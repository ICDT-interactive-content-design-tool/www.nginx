"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8599],{8599:(Ae,X,c)=>{c.r(X),c.d(X,{MediaDetailPageModule:()=>Be});var b=c(177),z=c(9417),u=c(6637),P=c(3658),p=c(467),J=c(5972),N=c(5781),O=c(8833),L=c(1632),D=c(8684),y=c(5414),U=c(1312),W=c(4552),K=c(5312),B=c(6539),Q=c(4835),x=c(1400),Z=c(8408),q=c(1607),ee=c(7868),ne=c(1951),te=c(5178),ie=c(7586),R=c.n(ie),oe=c(2527),V=c.n(oe),e=c(4438),A=c(345),ae=c(7704),le=c(9780),re=c(2706),de=c(31);const Y=o=>({$implicit:o});function ce(o,d){if(1&o&&(e.j41(0,"div",37),e.nrm(1,"ion-icon",38),e.j41(2,"span",39),e.EFF(3),e.k0s()()),2&o){let i;const t=e.XpG(2);e.Y8G("title",null==t.media?null:t.media.topic_titles),e.R7$(3),e.JRh(null==t.media||null==t.media.topic_titles||null==(i=t.media.topic_titles.split(";"))||null==(i=i.reverse())?null:i.join(" / "))}}function me(o,d){if(1&o&&(e.j41(0,"div",37),e.nrm(1,"ion-icon",40),e.j41(2,"span",39),e.EFF(3),e.k0s()()),2&o){let i;const t=e.XpG(2);e.Y8G("title",null==t.media?null:t.media.category_titles),e.R7$(3),e.JRh(null==t.media||null==t.media.category_titles||null==(i=t.media.category_titles.split(";"))||null==(i=i.reverse())?null:i.join(" / "))}}function se(o,d){if(1&o&&(e.j41(0,"div",37),e.nrm(1,"ion-icon",41),e.j41(2,"span",39),e.EFF(3),e.k0s()()),2&o){let i;const t=e.XpG(2);e.Y8G("title",null==t.media?null:t.media.directory_titles),e.R7$(3),e.JRh(null==t.media||null==t.media.directory_titles||null==(i=t.media.directory_titles.split(";"))||null==(i=i.reverse())?null:i.join(" / "))}}function ue(o,d){if(1&o&&(e.j41(0,"div",10),e.DNE(1,ce,4,2,"div",37)(2,me,4,2,"div",37)(3,se,4,2,"div",37),e.k0s()),2&o){const i=e.XpG();e.R7$(),e.vxM(1,null!=i.media&&i.media.topic_titles?1:-1),e.R7$(),e.vxM(2,null!=i.media&&i.media.category_titles?2:-1),e.R7$(),e.vxM(3,null!=i.media&&i.media.directory_titles?3:-1)}}function ge(o,d){if(1&o&&e.nrm(0,"img",44),2&o){const i=e.XpG(2);e.Y8G("src",i.viewOptions.url,e.B4B)("alt",null==i.media?null:i.media.media_title)}}function pe(o,d){if(1&o&&(e.j41(0,"div",42),e.DNE(1,ge,1,2,"img",43),e.k0s()),2&o){const i=e.XpG();e.BMQ("style",null!=i.media&&i.media.bigcover?"--bg-img:url("+i.readfileuploadurl+(null==i.media?null:i.media.bigcover)+")":"",e.$dS),e.R7$(),e.Y8G("ngIf",i.viewOptions.url)}}function _e(o,d){if(1&o&&(e.j41(0,"div",42),e.nrm(1,"canvas",45),e.k0s()),2&o){const i=e.XpG();e.BMQ("style",null!=i.media&&i.media.bigcover?"--bg-img:url("+i.readfileuploadurl+(null==i.media?null:i.media.bigcover)+")":"",e.$dS)}}function ve(o,d){if(1&o){const i=e.RV6();e.j41(0,"iframe",48),e.nI1(1,"safe"),e.bIt("load",function(n){e.eBV(i);const a=e.XpG(2);return e.Njj(a.loadIframe(n))}),e.k0s()}if(2&o){const i=e.XpG(2);e.Y8G("src",e.i5U(1,1,i.viewOptions.url,"resourceUrl"),e.f$h)}}function fe(o,d){if(1&o&&(e.j41(0,"div",46),e.DNE(1,ve,2,4,"iframe",47),e.k0s()),2&o){const i=e.XpG();e.BMQ("style",null!=i.media&&i.media.bigcover?"--bg-img:url("+i.readfileuploadurl+(null==i.media?null:i.media.bigcover)+")":"",e.$dS),e.R7$(),e.Y8G("ngIf",i.viewOptions.url)}}function he(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-button",49),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.downloadMedia())}),e.j41(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}2&o&&(e.Y8G("title",e.bMT(1,2,"Download")),e.R7$(3),e.JRh(e.bMT(4,4,"Download")))}function Me(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-button",50),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(i);const n=e.XpG();return e.Njj(n.AI_recommend())}),e.j41(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"ion-icon",51),e.k0s()}2&o&&(e.Y8G("title",e.bMT(1,2,"UpgradeTabcaProNow")),e.R7$(3),e.JRh(e.bMT(4,4,"Download")))}function Ce(o,d){1&o&&(e.j41(0,"ion-button",52)(1,"ion-label"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&o&&(e.Y8G("disabled",!0),e.R7$(2),e.JRh(e.bMT(3,2,"Download")))}function be(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-button",53),e.nI1(1,"translate"),e.bIt("click",function(n){e.eBV(i);const a=e.XpG();return e.Njj(a.presentModalMediaShare(n))}),e.nrm(2,"ion-icon",54),e.k0s()}2&o&&e.Y8G("title",e.bMT(1,1,"Share"))}function Pe(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-chip",55),e.bIt("click",function(){const n=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.switchMedia(n.media_id))}),e.nrm(1,"ion-icon",56),e.j41(2,"ion-label"),e.EFF(3),e.k0s()()}if(2&o){const i=d.$implicit,t=e.XpG();e.HbH((null==t.media?null:t.media.media_id)==i.media_id?"active":""),e.R7$(),e.Y8G("name",(null==t.media?null:t.media.media_id)==i.media_id?"ellipse":"ellipse-outline"),e.R7$(2),e.JRh(i.media_title)}}function Oe(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-infinite-scroll",57),e.bIt("ionInfinite",function(n){e.eBV(i);const a=e.XpG();return e.Njj(a.onIonInfinite_MediaRelated(n))}),e.nrm(1,"ion-infinite-scroll-content"),e.k0s()}}function ye(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-chip",55),e.bIt("click",function(){const n=e.eBV(i).$implicit,a=e.XpG();return e.Njj(a.switchMedia(n.media_id))}),e.nrm(1,"ion-icon",56),e.j41(2,"ion-label"),e.EFF(3),e.k0s()()}if(2&o){const i=d.$implicit,t=e.XpG();e.HbH((null==t.media?null:t.media.media_id)==i.media_id?"active":""),e.R7$(),e.Y8G("name",(null==t.media?null:t.media.media_id)==i.media_id?"ellipse":"ellipse-outline"),e.R7$(2),e.JRh(i.media_title)}}function Re(o,d){1&o&&(e.j41(0,"div",61),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.JRh(e.bMT(2,1,"NoData")))}function ke(o,d){if(1&o&&(e.j41(0,"div",62),e.nrm(1,"div",63),e.k0s()),2&o){const i=e.XpG(2);e.R7$(),e.Y8G("innerHTML",null==i.media?null:i.media.media_description,e.npT)}}function De(o,d){if(1&o&&(e.j41(0,"div",25)(1,"h5",58),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",59)(5,"div",11),e.nrm(6,"div",60),e.DNE(7,Re,3,3,"div",61),e.k0s(),e.DNE(8,ke,2,1,"div",62),e.k0s()()),2&o){const i=e.XpG();e.R7$(2),e.JRh(e.bMT(3,4,"Introduce")),e.R7$(4),e.Y8G("innerHTML",null==i.media?null:i.media.media_content,e.npT),e.R7$(),e.vxM(7,null!=i.media&&i.media.media_content?-1:7),e.R7$(),e.vxM(8,null!=i.media&&i.media.media_description?8:-1)}}function xe(o,d){if(1&o&&(e.j41(0,"div",65),e.nrm(1,"ion-icon",66),e.j41(2,"span",67),e.EFF(3),e.k0s()()),2&o){const i=d.$implicit;e.Y8G("title",i),e.R7$(3),e.JRh(i)}}function Te(o,d){if(1&o&&(e.j41(0,"div",26)(1,"h5",58),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",59)(5,"div",11)(6,"div",64),e.Z7z(7,xe,4,2,"div",65,e.fX1),e.k0s()()()()),2&o){const i=e.XpG();e.R7$(2),e.JRh(e.bMT(3,1,"Tag")),e.R7$(5),e.Dyx(null==i.media?null:i.media.tag_arrs)}}function je(o,d){if(1&o&&e.eu8(0,68),2&o){const i=d.$implicit;e.XpG();const t=e.sdS(60);e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,Y,i))}}function Ie(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-item-options",77)(1,"ion-item-option",78),e.bIt("click",function(n){e.eBV(i);const a=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.editComment(n,a.comment_id))}),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"ion-item-option",79),e.bIt("click",function(n){e.eBV(i);const a=e.XpG(2).$implicit,l=e.XpG();return e.Njj(l.deleteComment(n,a.comment_id))}),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&o&&(e.R7$(2),e.JRh(e.bMT(3,2,"Edit")),e.R7$(3),e.JRh(e.bMT(6,4,"Delete")))}function Fe(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-item-sliding")(1,"ion-item")(2,"ion-thumbnail",71),e.nrm(3,"img",9),e.k0s(),e.j41(4,"ion-label")(5,"div",72),e.EFF(6),e.nI1(7,"translate"),e.j41(8,"small"),e.EFF(9),e.k0s()(),e.j41(10,"div",73),e.EFF(11),e.k0s(),e.j41(12,"div",74)(13,"small",75),e.bIt("click",function(n){e.eBV(i);const a=e.XpG().$implicit,l=e.XpG();return e.Njj(l.replyComment(n,a.comment_id))}),e.EFF(14),e.nI1(15,"translate"),e.k0s()()()(),e.DNE(16,Ie,7,6,"ion-item-options",76),e.k0s()}if(2&o){let i;const t=e.XpG().$implicit,n=e.XpG();e.R7$(3),e.Y8G("src",t.createdby_avatar?n.readfileuploadurl+t.createdby_avatar:"assets/image/user-avatar-default.png",e.B4B),e.R7$(3),e.JRh(null!==(i=t.createdby_name)&&void 0!==i?i:e.bMT(7,6,"Guest")),e.R7$(3),e.JRh(n.formatDatetime(t.createddate)),e.R7$(2),e.JRh(t.comment_content),e.R7$(3),e.JRh(e.bMT(15,8,"Reply")),e.R7$(2),e.Y8G("ngIf",(null==n.user?null:n.user.userid)==t.createdby)}}function we(o,d){if(1&o){const i=e.RV6();e.j41(0,"ion-item",80)(1,"ion-input",81),e.nI1(2,"translate"),e.bIt("ionChange",function(n){e.eBV(i);const a=e.XpG(2);return e.Njj(a.changeComment2(n))})("keyup",function(n){e.eBV(i);const a=e.XpG(2);return e.Njj(a.keyupComment2(n))}),e.k0s(),e.j41(3,"ion-button",82),e.bIt("click",function(n){e.eBV(i);const a=e.XpG(2);return e.Njj(a.sendComment(n,a.comment2))}),e.nrm(4,"ion-icon",33),e.k0s()()}if(2&o){let i;const t=e.XpG(2);e.R7$(),e.FS9("placeholder",e.bMT(2,3,"EnterReply")),e.Y8G("autofocus",!0)("value",null!==(i=t.comment2.comment_content)&&void 0!==i?i:"")}}function Ge(o,d){if(1&o&&e.eu8(0,68),2&o){const i=d.$implicit;e.XpG(2);const t=e.sdS(60);e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,Y,i))}}function $e(o,d){if(1&o&&(e.j41(0,"li"),e.DNE(1,Fe,17,10,"ion-item-sliding",69)(2,we,5,5,"ion-item",70),e.j41(3,"ul"),e.DNE(4,Ge,1,4,"ng-container",36),e.k0s()()),2&o){const i=d.$implicit,t=e.XpG();e.R7$(),e.Y8G("ngIf",t.comment2.comment_id!=i.comment_id),e.R7$(),e.Y8G("ngIf",t.comment2.comment_pid==i.comment_id),e.R7$(2),e.Y8G("ngForOf",t.filterComments(i.comment_id))}}const Ee=[{path:"",component:(()=>{var o;class d{constructor(t,n,a,l,r,m,_){this.titleService=t,this.metaService=n,this.router=a,this.activatedRoute=l,this.toastController=r,this.modalController=m,this.loadingController=_,this.APP_ROUTE=O._,this.appsettings={},this.medias=[],this.paging_media={page:1,limit:20,active:!0},this.filter_media={},this.comment={},this.comment2={},this.comments=[],this.paging={page:1,limit:10,active:!0},this.readfileuploadurl="",this.viewOptions={ratio:66.67},this.onFullScreen=()=>{var s,g;(g=null!==(s=document.getElementById("sieunhangaoo"))&&void 0!==s?s:document.body).requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen(),setTimeout(()=>{this.isfullscreen=(g=>!!(g.fullscreen||g.fullscreenElement||g.webkitFullscreenElement||g.mozFullScreenElement||g.msFullscreenElement))(document)},600)},this.offFullScreen=()=>{var s;(s=document).exitFullscreen?s.exitFullscreen():s.mozCancelFullScreen?s.mozCancelFullScreen():s.webkitExitFullscreen?s.webkitExitFullscreen():s.msExitFullscreen&&s.msExitFullscreen(),setTimeout(()=>{this.isfullscreen=(s=>!!(s.fullscreen||s.fullscreenElement||s.webkitFullscreenElement||s.mozFullScreenElement||s.msFullscreenElement))(document)},600)}}ngOnInit(){var t=this;this.IsOnInit=!0,(0,p.A)(function*(){var n;t.appsettings=yield(0,J.AC)(),t.appsettings.madonvi&&(t.user=yield(0,B.sx)(),t.readfileuploadurl=null!==(n=t.appsettings.readfileuploadurl)&&void 0!==n?n:"",t.loadParams(()=>{t.refreshData()}))})()}ionViewDidEnter(){this.IsOnInit?this.IsOnInit=!1:this.loadParams(()=>{this.refreshData()})}ngAfterViewInit(){}onIonRefresher(t){this.refreshData(()=>{t.target.complete()})}onIonInfinite(t){this.loadMore(()=>{t.target.complete()})}onIonInfinite_MediaRelated(t){this.loadMore_MediaRelated(()=>{t.target.complete()})}loadParams(t){var n=this;return(0,p.A)(function*(){let a=n.activatedRoute.snapshot.paramMap.get("id")||n.activatedRoute.snapshot.queryParamMap.get("m")||"";var l;a?(n.media_id=parseInt(a),n.loadMedia(()=>{var r,m,_;n.paging_media.page=1,n.paging_media.active=!0,n.filter_media={topic_id:null===(r=n.media)||void 0===r?void 0:r.topic_id,category_id:null===(m=n.media)||void 0===m?void 0:m.category_id,directory_id:null===(_=n.media)||void 0===_?void 0:_.directory_id},n.loadData_Paging_MediaRelated()}),(0,ee.EW)({params:{userid:null===(l=n.user)||void 0===l?void 0:l.userid,v_functionlimit:x.r.TaiVeCacHocLieuHeThongCungCap},callback:r=>{var m;n.membership={TaiVeCacHocLieuHeThongCungCap:(0,ne.j)(null==r||null===(m=r.contents)||void 0===m?void 0:m.find(_=>_.v_functionlimit==x.r.TaiVeCacHocLieuHeThongCungCap))}}}),t&&t()):n.navigateToHome()})()}resetData(){this.medias.length=0,this.comments.length=0}refreshData(t){this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging(t)}loadMore(t){this.paging.page+=1,this.loadData_Paging(t)}loadData_Paging(t){var n=this;return(0,p.A)(function*(){var a;(0,D.Ct)({loading:l=>{n.paging.loading=l},params:{userid:null===(a=n.user)||void 0===a?void 0:a.userid,doctype:1106,docid:n.media_id,numchild:n.paging.limit,posstart:(n.paging.page-1)*n.paging.limit+1,numofrow:n.paging.limit,sortfield:234,sorttype:"desc"},callback:l=>{n.comments=n.comments.concat(l||[]),(!(null!=l&&l.length)||(null==l?void 0:l.length)<n.paging.limit)&&(n.paging.active=!1),t&&t()}})})()}loadMedia(t){var n=this;return(0,p.A)(function*(){var a;(0,N.e6)({loadingController:n.loadingController,params:{userid:null===(a=n.user)||void 0===a?void 0:a.userid,media_id:n.media_id},callback:l=>{var r,m,_,s,g,T,j,I,F,w,G,$;null!=l&&l.media_id?(n.media=l,n.media.tag_arrs=null===(r=n.media.tags||null)||void 0===r?void 0:r.split(";"),n.media.isdownload=!(n.media.v_mediatype==q.S.LINK||!n.media.filepath),null!==(m=n.media)&&void 0!==m&&null!==(m=m.filepath)&&void 0!==m&&m.match(/.lvm$/)?(0,te.Q)(`${n.appsettings.readfileuploadurl}${null===(_=n.media)||void 0===_?void 0:_.filepath}`).then(Ve=>{let{ext:H,file:k}=Ve;switch(H){case"gif":case"apng":n.viewOptions.type="img",n.viewOptions.file=k,n.viewOptions.url=URL.createObjectURL(k);break;case"avif":case"jpg":case"jpe":case"jpeg":case"jif":case"jfif":case"pjp":case"pjpeg":case"png":case"ico":case"cur":case"tif":case"tiff":case"bmp":case"webp":case"svg":{n.viewOptions.type="canvas",n.viewOptions.file=k;let E=new FileReader;E.onload=S=>{let f=new Image;f.onload=()=>{let v=f.width||1,h=f.height||1;if("svg"==H){let C=v/h;C>=1?(v=Math.max(v,800),h=v/C):(h=Math.max(h,800),v=h*C)}let M=document.getElementById("img-canvas");if(M){M.width=v,M.height=h,M.style.maxWidth="100%",M.style.maxHeight="100%";let C=M.getContext("2d");C&&C.drawImage(f,0,0,v,h)}},f.onerror=()=>{(0,y.c)(n.toastController,{color:"danger",message:"Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c th\xf4ng tin \u1ea3nh!"}).then(v=>v.present())},f.src=S.target.result},E.onerror=S=>{(0,y.c)(n.toastController,{color:"danger",message:"Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c t\u1eadp tin!"}).then(f=>f.present())},E.readAsDataURL(k);break}}}):(n.viewOptions.type="iframe",n.viewOptions.url=(0,Z._KM)({readfileuploadurl:n.appsettings.readfileuploadurl,type:null===(s=n.media)||void 0===s?void 0:s.v_mediatype,oss:null===(g=n.media)||void 0===g?void 0:g.v_osstype,path:null!==(T=null===(j=n.media)||void 0===j?void 0:j.filepath_extract)&&void 0!==T?T:null===(I=n.media)||void 0===I?void 0:I.filepath,url:null!==(F=null===(w=n.media)||void 0===w?void 0:w.link_file)&&void 0!==F?F:null===(G=n.media)||void 0===G?void 0:G.link_share})),l&&(0,U.Kd)(n.titleService,n.metaService,{title:l.media_title,description:(0,W.YW)(l.media_description),image:l.cover?{url:n.appsettings.readfileuploadurl+l.cover,alt:l.media_title}:null,url:K.c.url+O._.MEDIA_VIEWER+"?m="+(null===($=l.media_id)||void 0===$?void 0:$.toString())}),t&&t()):n.navigateToHome()}})})()}loadMore_MediaRelated(t){this.paging_media.page+=1,this.loadData_Paging_MediaRelated(t)}loadData_Paging_MediaRelated(t){var n=this;return(0,p.A)(function*(){var a;(0,N.br)({loading:l=>{n.paging_media.loading=l},params:{userid:null===(a=n.user)||void 0===a?void 0:a.userid,topic_id:n.filter_media.topic_id,category_id:n.filter_media.category_id,directory_id:n.filter_media.directory_id,sortfield:n.paging_media.sortfield,sorttype:n.paging_media.sorttype,page:n.paging_media.page,limit:n.paging_media.limit},callback:l=>{n.medias=n.medias.concat(null!=l?l:[]),(!(null!=l&&l.length)||(null==l?void 0:l.length)<n.paging_media.limit)&&(n.paging_media.active=!1),t&&t()}})})()}switchMedia(t){var n=this;return(0,p.A)(function*(){n.media_id=null!=t?t:0,n.router.navigate([],{relativeTo:n.activatedRoute,queryParams:{m:n.media_id},queryParamsHandling:"merge",replaceUrl:!0}),n.loadMedia()})()}presentModalMediaShare(t){var n=this;return(0,p.A)(function*(){var a;(yield n.modalController.create({component:L.U,componentProps:{m:null===(a=n.media)||void 0===a?void 0:a.media_id},mode:"md",cssClass:"ion-modal",backdropDismiss:!0,keyboardClose:!0})).present()})()}filterComments(t){return t?this.comments.filter(n=>n.comment_pid==t).sort((n,a)=>{var l,r;return(null!==(l=a.comment_id)&&void 0!==l?l:0)-(null!==(r=n.comment_id)&&void 0!==r?r:0)}):this.comments.filter(n=>!n.comment_pid).sort((n,a)=>{var l,r;return(null!==(l=a.comment_id)&&void 0!==l?l:0)-(null!==(r=n.comment_id)&&void 0!==r?r:0)})}formatDatetime(t,n){return R()().diff(R()(t),"days")<1?R()(t).fromNow():R()(t).format(null!=n?n:"HH:mm, DD/MM/YYYY")}keyupComment(t){var n=this;return(0,p.A)(function*(){13==t.keyCode&&n.sendComment(t,n.comment)})()}changeComment(t){var n=this;return(0,p.A)(function*(){var a;n.comment.comment_content=null!==(a=t.detail.value)&&void 0!==a?a:""})()}keyupComment2(t){var n=this;return(0,p.A)(function*(){13==t.keyCode&&n.sendComment(t,n.comment2)})()}changeComment2(t){var n=this;return(0,p.A)(function*(){var a;n.comment2.comment_content=null!==(a=t.detail.value)&&void 0!==a?a:""})()}replyComment(t,n){var a=this;return(0,p.A)(function*(){a.comment2={comment_pid:n}})()}editComment(t,n){var a=this;return(0,p.A)(function*(){var l;a.comment2=null!==(l=a.comments.find(r=>r.comment_id==n))&&void 0!==l?l:{}})()}sendComment(t,n){var a=this;return(0,p.A)(function*(){var l;n.comment_content&&(0,D.uy)({loadingController:a.loadingController,params:{userid:null===(l=a.user)||void 0===l?void 0:l.userid,doctype:1106,docid:a.media_id,comment_id:n.comment_id,comment_pid:n.comment_pid,comment_content:n.comment_content},callback:r=>{0==(null==r?void 0:r.returncode)?(n.comment_id?a.comments.filter(m=>m.comment_id!=n.comment_id).forEach(m=>n):(n.comment_id=null==r?void 0:r.id,a.comments.push(n)),a.comment={},a.comment2={}):(0,y.c)(a.toastController,{},r).then(m=>m.present())}})})()}deleteComment(t,n){var a=this;return(0,p.A)(function*(){var l;(0,D.TT)({loadingController:a.loadingController,params:{userid:null===(l=a.user)||void 0===l?void 0:l.userid,comment_id:n},callback:r=>{0==(null==r?void 0:r.returncode)?a.comments=a.comments.filter(m=>m.comment_id!=n&&m.comment_pid!=n):(0,y.c)(a.toastController,{},r).then(m=>m.present())}})})()}navigateByUrl(t){this.router.navigateByUrl(t)}navigateToHome(){var t=this;return(0,p.A)(function*(){(yield(0,B.lJ)())?t.navigateByUrl(O._.DASHBOARD_MATERIAL):t.navigateByUrl(O._.LANDING_PAGE)})()}downloadMedia(){var t,n,a;null!==(t=this.media)&&void 0!==t&&t.isdownload&&(["img","canvas"].includes(null!==(n=this.viewOptions.type)&&void 0!==n?n:"")&&this.viewOptions.file?V()(this.viewOptions.file,this.media.media_title+"."+this.viewOptions.file.name.split(".").pop(),this.viewOptions.file.type):null!==(a=this.media)&&void 0!==a&&a.filepath&&V()(`${this.appsettings.readfileuploadurl}${this.media.filepath}`))}AI_recommend(){var t=this;return(0,p.A)(function*(){(0,Q.QB)(t.modalController,x.r.TaiVeCacHocLieuHeThongCungCap)})()}loadIframe(t){this.iframe=t.target}}return(o=d).\u0275fac=function(t){return new(t||o)(e.rXU(A.hE),e.rXU(A.W8),e.rXU(P.Ix),e.rXU(P.nX),e.rXU(u.K_),e.rXU(u.W3),e.rXU(u.Xi))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-media-detail"]],decls:61,vars:20,consts:[["templateCommentLI",""],[1,"bg-cover","pb-5"],[1,"container","pt-3","pt-xxl-5","pb-5"],[1,"row","align-items-stretch"],[1,"col-12","col-lg-8","info"],[1,"mt-0","mb-2","mb-xxl-3"],[1,"d-flex","align-items-center","justify-content-between","mt-0","mb-2","mb-xxl-4"],[1,"flex-grow-1","mr-3","text-nowrap"],[1,"min-w-24"],["onerror","errorAvatar(this)",3,"src"],[1,"d-block","d-md-flex","flex-nowrap","align-items-center","text-ellipsis"],[1,"col-12","col-lg-8","mb-3"],[1,"position-relative","w-0","h-0"],[1,"position-absolute","top-0","left-0","right-0","bottom-0"],[1,"col-12","col-lg-4","mb-3","playlist"],[1,"d-flex","flex-column","w-100","h-100"],[1,"d-flex","w-100","mb-3"],[1,"col","pl-0"],["mode","ios","expand","block",3,"title"],[1,"col-auto","px-0"],["mode","ios","color","light",1,"mr-3",3,"title"],[1,"flex-grow-1","media-related-ion-content","d-none","d-lg-block"],["mode","ios",3,"class"],[3,"ionInfinite",4,"ngIf"],[1,"flex-grow-1","media-related","d-block","d-lg-none"],[1,"container","introduce","mb-4",2,"margin-top","-3rem"],[1,"container","introduce","mb-4"],[1,"container","container-comment","pb-5","mb-5"],[1,"row","mb-4"],[1,"col-12","col-lg-8"],["lines","full","mode","ios"],[3,"ionChange","keyup","placeholder","value"],["slot","end","mode","ios","size","default","shape","clear",3,"click"],["name","paper-plane-outline"],[1,"col-12","col-lg-8","pl-0"],["lines","none"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[1,"text-ellipsis","d-flex","align-items-center","mr-2",3,"title"],["src","../../../assets/icon-svg/dashboard/topic.svg",1,"fs-20"],[1,"fs-12","text-ellipsis"],["src","../../../assets/icon-svg/dashboard/category.svg",1,"fs-20"],["src","../../../assets/icon-svg/dashboard/template.svg",1,"fs-20"],["oncontextmenu","return false",1,"view-box","img-box"],[3,"src","alt",4,"ngIf"],[3,"src","alt"],["id","img-canvas"],["oncontextmenu","return false",1,"view-box","iframe-box"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen","oncontextmenu","return false",3,"src","load",4,"ngIf"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen","oncontextmenu","return false",3,"load","src"],["mode","ios","expand","block",3,"click","title"],["mode","ios","expand","block",1,"btn-download-vip",3,"click","title"],["slot","end","src","../../../assets/image/tabca-pro-2.svg",1,"fs-22","icon-tabca-pro"],["mode","ios","expand","block",3,"disabled"],["mode","ios","color","light",1,"mr-3",3,"click","title"],["name","share-social-outline"],["mode","ios",3,"click"],[3,"name"],[3,"ionInfinite"],[1,"mb-4"],[1,"row"],[3,"innerHTML"],[1,"text-muted"],[1,"col-12","col-lg-4","mb-3"],[1,"alert","mb-0",3,"innerHTML"],[1,"d-flex","flex-wrap"],[1,"text-ellipsis","d-flex","align-items-center","mr-3","mb-3",3,"title"],["src","../../../assets/icon-svg/dashboard/tag.svg",1,"fs-20"],[1,"fs-14","text-ellipsis"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],["lines","full",4,"ngIf"],["slot","start"],[1,"comment-name"],[1,"comment-content"],[1,"comment-action"],[3,"click"],["side","end",4,"ngIf"],["side","end"],["color","secondary",3,"click"],["color","danger",3,"click"],["lines","full"],[3,"ionChange","keyup","placeholder","autofocus","value"],["slot","end","mode","ios","size","large","shape","clear",3,"click"]],template:function(t,n){if(1&t){const a=e.RV6();e.nrm(0,"app-header"),e.j41(1,"ion-content")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),e.EFF(7),e.k0s(),e.j41(8,"div",6)(9,"div",7)(10,"ion-chip")(11,"ion-avatar",8),e.nrm(12,"img",9),e.k0s(),e.j41(13,"ion-label"),e.EFF(14),e.k0s()()(),e.DNE(15,ue,4,3,"div",10),e.k0s()(),e.j41(16,"div",11)(17,"div",12)(18,"div",13),e.DNE(19,pe,2,2)(20,_e,2,1)(21,fe,2,2),e.k0s()()(),e.j41(22,"div",14)(23,"div",15)(24,"div")(25,"div",16)(26,"div",17),e.DNE(27,he,5,6,"ion-button",18)(28,Me,6,6)(29,Ce,4,4),e.k0s(),e.j41(30,"div",19),e.DNE(31,be,3,3,"ion-button",20),e.k0s()()(),e.j41(32,"div",21)(33,"ion-content"),e.Z7z(34,Pe,4,4,"ion-chip",22,e.fX1),e.DNE(36,Oe,2,0,"ion-infinite-scroll",23),e.k0s()(),e.j41(37,"div",24),e.Z7z(38,ye,4,4,"ion-chip",22,e.fX1),e.k0s()()()()()(),e.DNE(40,De,9,6,"div",25)(41,Te,9,3,"div",26),e.j41(42,"div",27)(43,"div",28)(44,"div",29)(45,"h5"),e.EFF(46),e.nI1(47,"translate"),e.k0s(),e.j41(48,"ion-item",30)(49,"ion-input",31),e.nI1(50,"translate"),e.bIt("ionChange",function(r){return e.eBV(a),e.Njj(n.changeComment(r))})("keyup",function(r){return e.eBV(a),e.Njj(n.keyupComment(r))}),e.k0s(),e.j41(51,"ion-button",32),e.bIt("click",function(r){return e.eBV(a),e.Njj(n.sendComment(r,n.comment))}),e.nrm(52,"ion-icon",33),e.k0s()()()(),e.j41(53,"div",28)(54,"div",34)(55,"ion-list",35)(56,"ul"),e.DNE(57,je,1,4,"ng-container",36),e.k0s()()()()(),e.nrm(58,"app-footer"),e.k0s(),e.DNE(59,$e,5,3,"ng-template",null,0,e.C5r)}if(2&t){let a,l;e.R7$(7),e.JRh(null==n.media?null:n.media.media_title),e.R7$(5),e.Y8G("src",null!=n.media&&n.media.createdby_avatar?n.readfileuploadurl+(null==n.media?null:n.media.createdby_avatar):"assets/image/user-avatar-default.png",e.B4B),e.R7$(2),e.JRh(null==n.media?null:n.media.createdby_name),e.R7$(),e.vxM(15,null!=n.media&&n.media.topic_titles||null!=n.media&&n.media.category_titles||null!=n.media&&n.media.directory_titles?15:-1),e.R7$(2),e.BMQ("style","padding-bottom:"+n.viewOptions.ratio+"%",e.$dS),e.R7$(2),e.vxM(19,"img"===(a=n.viewOptions.type)?19:"canvas"===a?20:"iframe"===a?21:-1),e.R7$(8),e.vxM(27,null!=n.media&&n.media.isdownload&&(null!=n.media&&n.media.isowner||null!=n.media&&n.media.ispublic&&null!=n.membership&&n.membership.TaiVeCacHocLieuHeThongCungCap)?27:null==n.media||!n.media.isdownload||null==n.media||!n.media.ispublic||null!=n.membership&&n.membership.TaiVeCacHocLieuHeThongCungCap?29:28),e.R7$(4),e.vxM(31,null!=n.media&&n.media.isowner?31:-1),e.R7$(3),e.Dyx(n.medias),e.R7$(2),e.Y8G("ngIf",n.paging_media.active&&!n.paging_media.loading),e.R7$(2),e.Dyx(n.medias),e.R7$(2),e.vxM(40,null!=n.media&&n.media.media_description||null!=n.media&&n.media.media_content?40:-1),e.R7$(),e.vxM(41,null!=n.media&&null!=n.media.tag_arrs&&n.media.tag_arrs.length?41:-1),e.R7$(5),e.Lme("",e.bMT(47,16,"Comment")," (",n.comments.length,")"),e.R7$(3),e.FS9("placeholder",e.bMT(50,18,"EnterComment")),e.Y8G("value",null!==(l=n.comment.comment_content)&&void 0!==l?l:""),e.R7$(8),e.Y8G("ngForOf",n.filterComments())}},dependencies:[b.Sq,b.bT,b.T3,u.mC,u.Jm,u.ZB,u.W9,u.iq,u.Ax,u.Hp,u.$w,u.uz,u.LU,u.CE,u.A7,u.he,u.nf,u.Zx,u.Gw,ae.l,le.n,re.m,de.D9],styles:['.bg-contain[_ngcontent-%COMP%]{background-image:url(bg.33cb60bd32718d53.svg);background-repeat:no-repeat;background-position:top center;background-size:contain}.bg-cover[_ngcontent-%COMP%]{background-image:url(bg.33cb60bd32718d53.svg);background-repeat:no-repeat;background-position:bottom center;background-size:cover}.info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:0;--background: transparent}.info[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}.nav-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;font-size:1.25rem}.nav-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{margin-left:3rem}.introduce[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:.75rem;background-color:#fff3b6;color:#000}.img-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;line-height:0;overflow:hidden;border-radius:.75rem;box-shadow:0 0 0 1px #fff;display:flex;align-items:center;justify-content:center}.img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .img-box[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{border-radius:.25rem;overflow:hidden}.img-box[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;z-index:2147483647;background:transparent;-webkit-user-select:none;user-select:none}.iframe-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;line-height:0;overflow:hidden;border-radius:.75rem;background:var(--ion-background-color);box-shadow:4px 4px 12px #01010133}.iframe-box[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}.group-action[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:1rem;line-height:0;-webkit-user-select:none;user-select:none}.group-action[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap}.group-action[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-left:1rem}.group-action[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:0 1rem;vertical-align:middle;font-size:18px;color:#fab11d}.group-action[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{vertical-align:middle;width:34px;height:34px}.group-action[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:34px}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0;margin:1rem 0}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:empty{display:none}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;margin:0 0 .5rem}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:4rem}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 3rem;--border-radius: 50%;margin-top:0;margin-bottom:0;align-self:flex-start}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-name[_ngcontent-%COMP%]{line-height:1.5rem;font-weight:500}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-name[_ngcontent-%COMP%] > small[_ngcontent-%COMP%]{margin-left:.5rem;font-size:.75rem;color:var(--ion-color-medium);vertical-align:top}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{line-height:1.5rem;white-space:wrap;text-align:justify}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-action[_ngcontent-%COMP%]{line-height:1.5rem}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-action[_ngcontent-%COMP%] > small[_ngcontent-%COMP%]{line-height:1;vertical-align:middle;font-size:.75rem;color:var(--ion-color-primary);cursor:pointer}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0;margin:0;--border-radius: .5rem;--background: var(--ion-color-secondary)}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.container-comment[_ngcontent-%COMP%]   ion-item-option[_ngcontent-%COMP%]{text-transform:initial}.playlist[_ngcontent-%COMP%]   .media-related-ion-content[_ngcontent-%COMP%]{min-height:250px}.playlist[_ngcontent-%COMP%]   .media-related-ion-content[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--ion-background-color: transparent}.playlist[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .5rem;--padding-top: 0;--padding-bottom: 0;--padding-start: .75rem;--padding-end: .75rem;margin:0}.playlist[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([color]){--color: var(--ion-color-linear-contrast);--background: var(--ion-color-linear);--background-activated: var(--ion-color-linear-shade);--background-focused: var(--ion-color-linear-shade);--background-hover: var(--ion-color-linear-tint)}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.5rem;padding:.75rem 1.25rem;--background: transparent;--color: var(--ion-color-medium);-webkit-user-select:none;user-select:none}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.75rem;--color: var(--ion-color-medium-tint)}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:hover{--background: rgba(var(--ion-text-color-rgb), .1)}.playlist[_ngcontent-%COMP%]   ion-chip.active[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-secondary-rgb), .4);--color: var(--ion-text-color);font-weight:500}.playlist[_ngcontent-%COMP%]   ion-chip.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}']}),d})()}];let Xe=(()=>{var o;class d{}return(o=d).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[P.iI.forChild(Ee),P.iI]}),d})();var Ne=c(3890);let Be=(()=>{var o;class d{}return(o=d).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[b.MD,z.YN,u.bv,Xe,Ne.x]}),d})()}}]);