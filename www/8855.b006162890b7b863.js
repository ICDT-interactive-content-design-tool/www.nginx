"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8855],{8671:(S,$,s)=>{s.d($,{$:()=>w});var R=s(5972);function w(u){u.params=u.params||{},(0,R.hm)({url:"api/Lookup/get",params:{lookup_key:u.params.lookup_key||null},success:a=>{"function"==typeof u.callback&&u.callback(null==a?void 0:a.data)},error:a=>{"function"==typeof u.callback&&u.callback(),console.error(u,a)},loading:u.loading,loadingController:u.loadingController})}},307:(S,$,s)=>{s.r($),s.d($,{ViewerPageModule:()=>At});var R=s(177),w=s(9417),u=s(6637),a=s(3658),p=s(467),C=s(8408),L=s(5972),z=s(6081),G=s(4975),U=s(2635),V=s(8833),J=s(3181),Y=s(8684),E=s(5414),H=s(7586),g=s.n(H),M=s(1312),h=s(4552),f=s(5312),k=s(8963),j=s(6539),ot=s(7331),it=s(8405),lt=s(1038),K=s(5807),rt=s(2089),t=s(4438),at=s(9445),Q=s(31);function dt(l,_){if(1&l){const o=t.RV6();t.j41(0,"button",32),t.bIt("click",function(n){t.eBV(o);const i=t.XpG(2);return t.Njj(i.clearTopic(n))}),t.nrm(1,"ion-icon",33),t.k0s()}}function st(l,_){if(1&l){const o=t.RV6();t.j41(0,"button",32),t.bIt("click",function(n){t.eBV(o);const i=t.XpG(2);return t.Njj(i.clearCategory(n))}),t.nrm(1,"ion-icon",33),t.k0s()}}function ct(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-content",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13)(7,"b",14),t.EFF(8),t.nI1(9,"translate"),t.k0s()(),t.j41(10,"input",15),t.bIt("change",function(n){t.eBV(o);const i=t.XpG();return t.Njj(i.changeBoardTitle(n))}),t.k0s()(),t.j41(11,"div",12)(12,"div",13)(13,"b",14),t.EFF(14),t.nI1(15,"translate"),t.k0s()(),t.j41(16,"div",16),t.nrm(17,"input",17),t.j41(18,"div",18),t.DNE(19,dt,2,0,"button",19),t.j41(20,"button",20),t.bIt("click",function(n){t.eBV(o);const i=t.XpG();return t.Njj(i.presentPopoverTopic(n))}),t.nrm(21,"ion-icon",21),t.k0s()()()(),t.j41(22,"div",12)(23,"div",13)(24,"b",14),t.EFF(25),t.nI1(26,"translate"),t.k0s()(),t.j41(27,"div",16),t.nrm(28,"input",17),t.j41(29,"div",18),t.DNE(30,st,2,0,"button",19),t.j41(31,"button",20),t.bIt("click",function(n){t.eBV(o);const i=t.XpG();return t.Njj(i.presentPopoverCategory(n))}),t.nrm(32,"ion-icon",21),t.k0s()()()(),t.j41(33,"div",22)(34,"div",13)(35,"b",14),t.EFF(36),t.nI1(37,"translate"),t.k0s()(),t.j41(38,"div",16)(39,"div",23)(40,"input",24),t.bIt("change",function(n){t.eBV(o);const i=t.XpG();return t.Njj(i.changeBoardCover(n))}),t.k0s(),t.nrm(41,"label",25),t.k0s()()()(),t.j41(42,"div",26)(43,"div",12)(44,"div",13)(45,"b",14),t.EFF(46),t.nI1(47,"translate"),t.k0s()(),t.j41(48,"div",27)(49,"div",28),t.nrm(50,"ion-img",29),t.k0s()()()()(),t.j41(51,"div",30)(52,"div",13)(53,"b",14),t.EFF(54),t.nI1(55,"translate"),t.k0s()(),t.j41(56,"ckeditor",31),t.mxI("ngModelChange",function(n){t.eBV(o);const i=t.XpG();return t.DH7(i.board.board_description,n)||(i.board.board_description=n),t.Njj(n)}),t.k0s()(),t.j41(57,"div",30)(58,"div",13)(59,"b",14),t.EFF(60),t.nI1(61,"translate"),t.k0s()(),t.j41(62,"ckeditor",31),t.mxI("ngModelChange",function(n){t.eBV(o);const i=t.XpG();return t.DH7(i.board.board_content,n)||(i.board.board_content=n),t.Njj(n)}),t.k0s()()()()()}if(2&l){let o,e;const n=t.XpG();t.R7$(8),t.JRh(t.bMT(9,18,"LectureName")),t.R7$(2),t.Y8G("ngModel",n.board.board_title),t.R7$(4),t.JRh(t.bMT(15,20,"GradeLevel")),t.R7$(3),t.Y8G("value",null==(null!==(o=n.board.topic_titles)&&void 0!==o?o:n.board.topic_title)||null==(o=(null!=o?o:n.board.topic_title).split(";"))||null==(o=o.reverse())?null:o.join(" / ")),t.R7$(2),t.Y8G("ngIf",n.board.topic_id),t.R7$(6),t.JRh(t.bMT(26,22,"Subject")),t.R7$(3),t.Y8G("value",null==(null!==(e=n.board.category_title)&&void 0!==e?e:n.board.category_title)||null==(e=(null!=e?e:n.board.category_title).split(";"))||null==(e=e.reverse())?null:e.join(" / ")),t.R7$(2),t.Y8G("ngIf",n.board.category_id),t.R7$(6),t.JRh(t.bMT(37,24,"Cover")),t.R7$(10),t.JRh(t.bMT(47,26,"Cover")),t.R7$(4),t.Y8G("src",n.fileurl||n.coverUrl||"assets/image/no-image.svg")("alt",n.board.board_title),t.R7$(4),t.JRh(t.bMT(55,28,"Knowledge")),t.R7$(2),t.Y8G("editor",n.editorDescription),t.R50("ngModel",n.board.board_description),t.R7$(4),t.JRh(t.bMT(61,30,"ContentIntroduce")),t.R7$(2),t.Y8G("editor",n.editorContent),t.R50("ngModel",n.board.board_content)}}let ut=(()=>{var l;class _{constructor(e,n,i,r){this.modalController=e,this.popoverController=n,this.toastController=i,this.loadingController=r,this.b=0,this.editorDescription=K.m,this.editorContent=K.m,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var e=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,p.A)(function*(){e.appsettings=yield(0,L.AC)(),e.appsettings.madonvi&&(e.user=yield(0,U.Nk)(),e.readfileuploadurl=e.appsettings.readfileuploadurl||"",e.refreshData())})()}refreshData(){var e;(0,z.qU)({params:{userid:null===(e=this.user)||void 0===e?void 0:e.userid,board_id:this.b},callback:n=>{if((null==n?void 0:n.board_id)==this.b)return this.board=n,this.board.board_title=this.board.board_title+` (${Math.floor(999*Math.random())})`,void this.coverLoad();this.modalController.dismiss()}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var e=this;return(0,p.A)(function*(){if(!e.board.board_title)return void(0,E.c)(e.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(i=>{i.present()});let n=[];e.boardCover&&n.push(new Promise((i,r)=>{var d;(0,lt.v)({params:{file:e.boardCover,subFolder:`board-cover/${null!==(d=e.board.board_id)&&void 0!==d?d:0}`,fileType:"image"},callback:c=>{var b;0==(null==c?void 0:c.ReturnCode)?e.board.cover=c.path+"/"+(null===(b=c.file)||void 0===b?void 0:b.name):(0,E.c)(e.toastController,{},{returncode:null==c?void 0:c.ReturnCode,returnmsg:null==c?void 0:c.ReturnName}).then(m=>{m.present()}),i(!0)}})})),Promise.all(n).then(i=>{var r;(0,G.Wb)({loadingController:e.loadingController,params:{board_id:e.board.board_id,board_title:e.board.board_title,board_description:e.board.board_description,board_content:e.board.board_content,cover:e.board.cover,topic_id:e.board.topic_id,category_id:e.board.category_id,size_width:e.board.size_width,size_height:e.board.size_height,userid:null===(r=e.user)||void 0===r?void 0:r.userid},callback:d=>{(0,E.c)(e.toastController,{},d).then(c=>{c.present()}),0==(null==d?void 0:d.returncode)&&e.modalController.dismiss({id:null==d?void 0:d.id,title:e.board.board_title},"confirm")}})})})()}presentPopoverTopic(e){var n=this;return(0,p.A)(function*(){const i=yield n.popoverController.create({component:ot.E,componentProps:{selectedId:n.board.topic_id,filter:{for:"board"}},event:e,dismissOnSelect:!1,animated:!1,side:"right"});i.onDidDismiss().then(r=>{var d,c,b,m,v,P,T;"confirm"==r.role&&(Object.assign(n.board,{topic_id:null===(d=r.data)||void 0===d?void 0:d.topic_id,topic_title:null===(c=r.data)||void 0===c?void 0:c.topic_title,topic_titles:null===(b=r.data)||void 0===b?void 0:b.topic_titles}),null!==(m=r.data)&&void 0!==m&&m.category_id&&Object.assign(n.board,{category_id:null===(v=r.data)||void 0===v?void 0:v.category_id,category_title:null===(P=r.data)||void 0===P?void 0:P.category_title,category_titles:null===(T=r.data)||void 0===T?void 0:T.category_titles}))}),i.present()})()}clearTopic(e){Object.assign(this.board,{topic_id:null,topic_title:null,topic_titles:null})}changeTopic(e){this.board.topic_id=e}presentPopoverCategory(e){var n=this;return(0,p.A)(function*(){const i=yield n.popoverController.create({component:it.P,componentProps:{selectedId:n.board.category_id,filter:{for:"board"}},event:e,dismissOnSelect:!1,animated:!1,side:"right"});i.onDidDismiss().then(r=>{var d,c,b;"confirm"==r.role&&Object.assign(n.board,{category_id:null===(d=r.data)||void 0===d?void 0:d.category_id,category_title:null===(c=r.data)||void 0===c?void 0:c.category_title,category_titles:null===(b=r.data)||void 0===b?void 0:b.category_titles})}),i.present()})()}clearCategory(e){Object.assign(this.board,{category_id:null,category_title:null,category_titles:null})}changeCategory(e){this.board.category_id=e}presentPopoverTemplate(e){var n=this;return(0,p.A)(function*(){const i=yield n.popoverController.create({component:rt.B,componentProps:{selectedId:n.board.template_id,filter:{for:"board"}},event:e,dismissOnSelect:!1,animated:!1,side:"right"});i.onDidDismiss().then(r=>{var d,c,b;"confirm"==r.role&&Object.assign(n.board,{template_id:null===(d=r.data)||void 0===d?void 0:d.template_id,template_title:null===(c=r.data)||void 0===c?void 0:c.template_title,template_titles:null===(b=r.data)||void 0===b?void 0:b.template_titles})}),i.present()})()}clearTemplate(e){Object.assign(this.board,{template_id:null,template_title:null,template_titles:null})}changeTemplate(e){this.board.template_id=e}changeBoardTitle(e){var n;this.board.board_title=null==e||null===(n=e.target)||void 0===n?void 0:n.value}changeBoardDescription(e){var n;this.board.board_description=null==e||null===(n=e.target)||void 0===n?void 0:n.value}changeBoardContent(e){var n;this.board.board_content=null==e||null===(n=e.target)||void 0===n?void 0:n.value}changeBoardCover(e){this.boardCover=void 0,e.target.files.length&&(this.boardCover=e.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}coverLoad(){var e,n,i,r,d,c,b,m,v,P,T;let y=[null!==(e=this.board)&&void 0!==e&&e.cover?`${null!==(n=this.appsettings.readfileuploadurl)&&void 0!==n?n:""}${null===(i=this.board)||void 0===i?void 0:i.cover}`:void 0,null!==(r=this.board)&&void 0!==r&&r.board_id?`${null!==(d=this.appsettings.readfileuploadurl)&&void 0!==d?d:""}${null!==(c=this.appsettings.boardpath)&&void 0!==c?c:""}${null===(b=this.board)||void 0===b?void 0:b.board_id}/cover.svg`:void 0,null!==(m=this.board)&&void 0!==m&&m.board_id?`${null!==(v=this.appsettings.readfileuploadurl)&&void 0!==v?v:""}${null!==(P=this.appsettings.boardpathv1)&&void 0!==P?P:""}${null===(T=this.board)||void 0===T?void 0:T.board_id}/cover.png`:void 0].filter(x=>!!x),D=x=>{if(!x)return;let N=new Image;N.onload=()=>{this.coverUrl=x},N.onerror=()=>{D(y.shift())},N.src=x};y.length&&D(y.shift())}}return(l=_).\u0275fac=function(e){return new(e||l)(t.rXU(u.W3),t.rXU(u.IE),t.rXU(u.K_),t.rXU(u.Xi))},l.\u0275cmp=t.VBU({type:l,selectors:[["app-modal-board-customize-template"]],inputs:{b:"b"},decls:15,vars:8,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[1,"container-fluid","h-100"],[1,"d-flex","w-100","h-100","flex-column"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"line-height-24"],[1,"fs-14","fw-500"],["type","text",1,"form-control",3,"change","ngModel"],[1,"input-group"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","chevron-down-outline"],[1,"form-group","d-none"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"col-lg-6","col-cover"],["onClick","document.getElementById('inputGroupFile03').click()",1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[3,"src","alt"],[1,"pb-3"],[1,"w-100",3,"ngModelChange","editor","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"]],template:function(e,n){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-button",0),t.bIt("click",function(){return n.save()}),t.j41(6,"ion-label"),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"ion-buttons",1)(10,"ion-button",2),t.bIt("click",function(){return n.toggleFullScreen()}),t.nrm(11,"ion-icon",3),t.k0s(),t.j41(12,"ion-button",4),t.bIt("click",function(){return n.close()}),t.nrm(13,"ion-icon",5),t.k0s()()()(),t.DNE(14,ct,63,32,"ion-content",6)),2&e&&(t.R7$(3),t.JRh(t.bMT(4,4,"CustomizeTemplate")),t.R7$(4),t.JRh(t.bMT(8,6,"UseThisTemplate")),t.R7$(4),t.Y8G("src",n.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.R7$(3),t.Y8G("ngIf",n.board.board_id))},dependencies:[R.bT,w.me,w.BC,w.vS,u.Jm,u.QW,u.W9,u.eU,u.iq,u.KW,u.he,u.BC,u.ai,at.h,Q.D9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.col-cover[_ngcontent-%COMP%]{max-width:485px}"]}),_})();var Z=s(1171),q=s(345),_t=s(7704),mt=s(9780);const tt=l=>({$implicit:l});function pt(l,_){if(1&l&&(t.j41(0,"div",45),t.nrm(1,"ion-icon",46),t.j41(2,"span",47),t.EFF(3),t.k0s()()),2&l){let o;const e=t.XpG(2);t.Y8G("title",null==e.board?null:e.board.topic_titles),t.R7$(3),t.JRh(null==e.board||null==e.board.topic_titles||null==(o=e.board.topic_titles.split(";"))||null==(o=o.reverse())?null:o.join(" / "))}}function gt(l,_){if(1&l&&(t.j41(0,"div",45),t.nrm(1,"ion-icon",48),t.j41(2,"span",47),t.EFF(3),t.k0s()()),2&l){let o;const e=t.XpG(2);t.Y8G("title",null==e.board?null:e.board.category_titles),t.R7$(3),t.JRh(null==e.board||null==e.board.category_titles||null==(o=e.board.category_titles.split(";"))||null==(o=o.reverse())?null:o.join(" / "))}}function vt(l,_){if(1&l&&(t.j41(0,"div",45),t.nrm(1,"ion-icon",49),t.j41(2,"span",47),t.EFF(3),t.k0s()()),2&l){let o;const e=t.XpG(2);t.Y8G("title",null==e.board?null:e.board.template_titles),t.R7$(3),t.JRh(null==e.board||null==e.board.template_titles||null==(o=e.board.template_titles.split(";"))||null==(o=o.reverse())?null:o.join(" / "))}}function bt(l,_){if(1&l&&(t.j41(0,"div",10),t.DNE(1,pt,4,2,"div",45)(2,gt,4,2,"div",45)(3,vt,4,2,"div",45),t.k0s()),2&l){const o=t.XpG();t.R7$(),t.vxM(1,null!=o.board&&o.board.topic_titles?1:-1),t.R7$(),t.vxM(2,null!=o.board&&o.board.category_titles?2:-1),t.R7$(),t.vxM(3,null!=o.board&&o.board.template_titles?3:-1)}}function ft(l,_){if(1&l){const o=t.RV6();t.j41(0,"div",19)(1,"ion-button",50),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.pageBack())}),t.nrm(2,"ion-img",51),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s(),t.j41(5,"ion-button",50),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.pageNext())}),t.nrm(6,"ion-img",52),t.k0s()()}if(2&l){const o=t.XpG();t.R7$(),t.Y8G("disabled",o.slideIdx<1),t.R7$(3),t.Lme("",o.slideIdx+1,"/",o.slideTotal,""),t.R7$(),t.Y8G("disabled",o.slideIdx>=o.slideTotal-1)}}function ht(l,_){if(1&l){const o=t.RV6();t.j41(0,"div")(1,"ion-button",53),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.renderSlide())}),t.nrm(2,"ion-img",54),t.k0s()()}}function Ct(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-button",53),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.offFullScreen())}),t.nrm(1,"ion-img",56),t.k0s()}}function kt(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-button",53),t.bIt("click",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.onFullScreen())}),t.nrm(1,"ion-img",57),t.k0s()}}function Pt(l,_){if(1&l&&(t.j41(0,"div"),t.DNE(1,Ct,2,0,"ion-button",55)(2,kt,2,0),t.k0s()),2&l){const o=t.XpG();t.R7$(),t.vxM(1,o.isfullscreen?1:2)}}function Mt(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-button",58),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.navigateToEditor(n.APP_ROUTE.EDITOR+"?b="+(null==n.board?null:n.board.board_id)))}),t.j41(1,"ion-label"),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}2&l&&(t.R7$(2),t.JRh(t.bMT(3,1,"Editor")))}function Rt(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-button",58),t.bIt("click",function(n){t.eBV(o);const i=t.XpG();return t.Njj(i.presentModalBoardCustomizeTemplate(n,null==i.board?null:i.board.board_id))}),t.j41(1,"ion-label"),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}2&l&&(t.R7$(2),t.JRh(t.bMT(3,1,"CustomizeThisTemplate")))}function Tt(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-button",59),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.navigateToEditor(n.APP_ROUTE.EDITOR+"?b="+(null==n.board?null:n.board.board_id)))}),t.j41(1,"ion-label"),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}if(2&l){const o=t.XpG();t.Y8G("disabled",!(null!=o.board&&o.board.chotausuabai)),t.R7$(2),t.JRh(t.bMT(3,2,"Editor"))}}function Ot(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-button",60),t.nI1(1,"translate"),t.bIt("click",function(n){t.eBV(o);const i=t.XpG();return t.Njj(i.presentModalBoardShare(n))}),t.nrm(2,"ion-icon",61),t.k0s()}2&l&&t.Y8G("title",t.bMT(1,1,"Share"))}function jt(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-chip",62),t.bIt("click",function(){const n=t.eBV(o).$implicit,i=t.XpG();return t.Njj(i.switchBoard(n.board_id))}),t.nrm(1,"ion-icon",63),t.j41(2,"ion-label"),t.EFF(3),t.k0s()()}if(2&l){const o=_.$implicit,e=t.XpG();t.HbH((null==e.board?null:e.board.board_id)==o.board_id?"active":""),t.R7$(),t.Y8G("name",(null==e.board?null:e.board.board_id)==o.board_id?"ellipse":"ellipse-outline"),t.R7$(2),t.JRh(o.board_title)}}function yt(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-infinite-scroll",64),t.bIt("ionInfinite",function(n){t.eBV(o);const i=t.XpG();return t.Njj(i.onIonInfinite_BoardRelated(n))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function xt(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-chip",62),t.bIt("click",function(){const n=t.eBV(o).$implicit,i=t.XpG();return t.Njj(i.switchBoard(n.board_id))}),t.nrm(1,"ion-icon",63),t.j41(2,"ion-label"),t.EFF(3),t.k0s()()}if(2&l){const o=_.$implicit,e=t.XpG();t.HbH((null==e.board?null:e.board.board_id)==o.board_id?"active":""),t.R7$(),t.Y8G("name",(null==e.board?null:e.board.board_id)==o.board_id?"ellipse":"ellipse-outline"),t.R7$(2),t.JRh(o.board_title)}}function It(l,_){1&l&&(t.j41(0,"div",68),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&l&&(t.R7$(),t.JRh(t.bMT(2,1,"NoData")))}function $t(l,_){if(1&l&&(t.j41(0,"div",69),t.nrm(1,"div",70),t.k0s()),2&l){const o=t.XpG(2);t.R7$(),t.Y8G("innerHTML",null==o.board?null:o.board.board_description,t.npT)}}function wt(l,_){if(1&l&&(t.j41(0,"div",33)(1,"h5",65),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",66)(5,"div",11),t.nrm(6,"div",67),t.DNE(7,It,3,3,"div",68),t.k0s(),t.DNE(8,$t,2,1,"div",69),t.k0s()()),2&l){const o=t.XpG();t.R7$(2),t.JRh(t.bMT(3,4,"Introduce")),t.R7$(4),t.Y8G("innerHTML",null==o.board?null:o.board.board_content,t.npT),t.R7$(),t.vxM(7,null!=o.board&&o.board.board_content?-1:7),t.R7$(),t.vxM(8,null!=o.board&&o.board.board_description?8:-1)}}function Vt(l,_){if(1&l&&(t.j41(0,"div",72),t.nrm(1,"ion-icon",73),t.j41(2,"span",74),t.EFF(3),t.k0s()()),2&l){const o=_.$implicit;t.Y8G("title",o),t.R7$(3),t.JRh(o)}}function Et(l,_){if(1&l&&(t.j41(0,"div",34)(1,"h5",65),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",66)(5,"div",11)(6,"div",71),t.Z7z(7,Vt,4,2,"div",72,t.fX1),t.k0s()()()()),2&l){const o=t.XpG();t.R7$(2),t.JRh(t.bMT(3,1,"Tag")),t.R7$(5),t.Dyx(null==o.board?null:o.board.tag_arrs)}}function Ft(l,_){if(1&l&&t.eu8(0,75),2&l){const o=_.$implicit;t.XpG();const e=t.sdS(67);t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(2,tt,o))}}function Bt(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-item-options",84)(1,"ion-item-option",85),t.bIt("click",function(n){t.eBV(o);const i=t.XpG(2).$implicit,r=t.XpG();return t.Njj(r.editComment(n,i.comment_id))}),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"ion-item-option",86),t.bIt("click",function(n){t.eBV(o);const i=t.XpG(2).$implicit,r=t.XpG();return t.Njj(r.deleteComment(n,i.comment_id))}),t.EFF(5),t.nI1(6,"translate"),t.k0s()()}2&l&&(t.R7$(2),t.JRh(t.bMT(3,2,"Edit")),t.R7$(3),t.JRh(t.bMT(6,4,"Delete")))}function Gt(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-item-sliding")(1,"ion-item")(2,"ion-thumbnail",78),t.nrm(3,"img",9),t.k0s(),t.j41(4,"ion-label")(5,"div",79),t.EFF(6),t.nI1(7,"translate"),t.j41(8,"small"),t.EFF(9),t.k0s()(),t.j41(10,"div",80),t.EFF(11),t.k0s(),t.j41(12,"div",81)(13,"small",82),t.bIt("click",function(n){t.eBV(o);const i=t.XpG().$implicit,r=t.XpG();return t.Njj(r.replyComment(n,i.comment_id))}),t.EFF(14),t.nI1(15,"translate"),t.k0s()()()(),t.DNE(16,Bt,7,6,"ion-item-options",83),t.k0s()}if(2&l){let o;const e=t.XpG().$implicit,n=t.XpG();t.R7$(3),t.Y8G("src",e.createdby_avatar?n.readfileuploadurl+e.createdby_avatar:"assets/image/user-avatar-default.png",t.B4B),t.R7$(3),t.JRh(null!==(o=e.createdby_name)&&void 0!==o?o:t.bMT(7,6,"Guest")),t.R7$(3),t.JRh(n.formatDatetime(e.createddate)),t.R7$(2),t.JRh(e.comment_content),t.R7$(3),t.JRh(t.bMT(15,8,"Reply")),t.R7$(2),t.Y8G("ngIf",(null==n.user?null:n.user.userid)==e.createdby)}}function Dt(l,_){if(1&l){const o=t.RV6();t.j41(0,"ion-item",87)(1,"ion-input",88),t.nI1(2,"translate"),t.bIt("ionChange",function(n){t.eBV(o);const i=t.XpG(2);return t.Njj(i.changeComment2(n))})("keyup",function(n){t.eBV(o);const i=t.XpG(2);return t.Njj(i.keyupComment2(n))}),t.k0s(),t.j41(3,"ion-button",89),t.bIt("click",function(n){t.eBV(o);const i=t.XpG(2);return t.Njj(i.sendComment(n,i.comment2))}),t.nrm(4,"ion-icon",41),t.k0s()()}if(2&l){let o;const e=t.XpG(2);t.R7$(),t.FS9("placeholder",t.bMT(2,3,"EnterReply")),t.Y8G("autofocus",!0)("value",null!==(o=e.comment2.comment_content)&&void 0!==o?o:"")}}function Nt(l,_){if(1&l&&t.eu8(0,75),2&l){const o=_.$implicit;t.XpG(2);const e=t.sdS(67);t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(2,tt,o))}}function Xt(l,_){if(1&l&&(t.j41(0,"li"),t.DNE(1,Gt,17,10,"ion-item-sliding",76)(2,Dt,5,5,"ion-item",77),t.j41(3,"ul"),t.DNE(4,Nt,1,4,"ng-container",44),t.k0s()()),2&l){const o=_.$implicit,e=t.XpG();t.R7$(),t.Y8G("ngIf",e.comment2.comment_id!=o.comment_id),t.R7$(),t.Y8G("ngIf",e.comment2.comment_pid==o.comment_id),t.R7$(2),t.Y8G("ngForOf",e.filterComments(o.comment_id))}}const Lt=[{path:"",component:(()=>{var l;class _{constructor(e,n,i,r,d,c,b){this.titleService=e,this.metaService=n,this.router=i,this.activatedRoute=r,this.toastController=d,this.modalController=c,this.loadingController=b,this.appsettings={},this.b=0,this.boards=[],this.paging_board={page:1,limit:10,active:!0},this.filter_board={},this.comment={},this.comment2={},this.comments=[],this.paging={page:1,limit:10,active:!0},this.slides=[],this.slideIdx=0,this.slideTotal=0,this.svgRatio=56.25,this.settings={},this.APP_ROUTE=V._,this.readfileuploadurl="",this.isfullscreen=!1,this.pageBack=()=>{this.slideIdx>0&&(this.slideIdx--,this.renderSlide())},this.pageNext=()=>{this.slideIdx<this.slideTotal-1&&(this.slideIdx++,this.renderSlide())},this.onFullScreen=()=>{var m,v;(v=null!==(m=document.getElementById("sieunhangaoo"))&&void 0!==m?m:document.body).requestFullscreen?v.requestFullscreen():v.mozRequestFullScreen?v.mozRequestFullScreen():v.webkitRequestFullscreen?v.webkitRequestFullscreen():v.msRequestFullscreen&&v.msRequestFullscreen(),setTimeout(()=>{this.isfullscreen=(v=>!!(v.fullscreen||v.fullscreenElement||v.webkitFullscreenElement||v.mozFullScreenElement||v.msFullscreenElement))(document)},600)},this.offFullScreen=()=>{var m;(m=document).exitFullscreen?m.exitFullscreen():m.mozCancelFullScreen?m.mozCancelFullScreen():m.webkitExitFullscreen?m.webkitExitFullscreen():m.msExitFullscreen&&m.msExitFullscreen(),setTimeout(()=>{this.isfullscreen=(m=>!!(m.fullscreen||m.fullscreenElement||m.webkitFullscreenElement||m.mozFullScreenElement||m.msFullscreenElement))(document)},600)}}ngOnInit(){var e=this;this.IsOnInit=!0,C.LVk.container="#mainContainer",C.LVk.svg="#mainSvg",(0,p.A)(function*(){var n;e.appsettings=yield(0,L.AC)(),C.LVk.config=yield(0,L.AC)(),e.user=yield(0,U.Nk)(),e.readfileuploadurl=null!==(n=e.appsettings.readfileuploadurl)&&void 0!==n?n:"",e.loadParams(()=>{e.refreshData()})})(),(0,k.j)()}ionViewDidEnter(){this.IsOnInit?this.IsOnInit=!1:this.loadParams(()=>{this.refreshData()})}ngAfterViewInit(){window.addEventListener("resize",()=>{this.slide&&(0,C.I1Q)(C.LVk.container,C.LVk.svg,this.slide)})}onIonRefresher(e){this.refreshData(()=>{e.target.complete()})}onIonInfinite(e){this.loadMore(()=>{e.target.complete()})}onIonInfinite_BoardRelated(e){this.loadMore_BoardRelated(()=>{e.target.complete()})}loadParams(e){var n=this;return(0,p.A)(function*(){n.slideIdx=parseInt(n.activatedRoute.snapshot.queryParamMap.get("n")||"1")-1;let i=n.activatedRoute.snapshot.paramMap.get("id")||n.activatedRoute.snapshot.queryParamMap.get("b")||"";i?(n.b=parseInt(i),n.loadBoard(()=>{var r,d,c;n.paging_board.page=1,n.paging_board.active=!0,n.filter_board={topic_id:null===(r=n.board)||void 0===r?void 0:r.topic_id,category_id:null===(d=n.board)||void 0===d?void 0:d.category_id,template_id:null===(c=n.board)||void 0===c?void 0:c.template_id},n.loadData_Paging_BoardRelated()}),e&&e()):n.navigateToHome()})()}resetData(){this.boards.length=0,this.comments.length=0}refreshData(e){this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging(e)}loadMore(e){this.paging.page+=1,this.loadData_Paging(e)}loadData_Paging(e){var n=this;return(0,p.A)(function*(){var i;(0,Y.Ct)({loading:r=>{n.paging.loading=r},params:{userid:null===(i=n.user)||void 0===i?void 0:i.userid,doctype:1105,docid:n.b,numchild:n.paging.limit,posstart:(n.paging.page-1)*n.paging.limit+1,numofrow:n.paging.limit,sortfield:234,sorttype:"desc"},callback:r=>{n.comments=n.comments.concat(r||[]),(!(null!=r&&r.length)||(null==r?void 0:r.length)<n.paging.limit)&&(n.paging.active=!1),e&&e()}})})()}loadBoard(e){var n=this;return(0,p.A)(function*(){var i,r;(0,z.qU)({loadingController:n.loadingController,params:{userid:null===(i=n.user)||void 0===i?void 0:i.userid,board_id:n.b},callback:d=>{var c,b,m,v;null!=d&&d.board_id?(n.board=d,n.board.tag_arrs=null===(c=n.board.tags||null)||void 0===c?void 0:c.split(";"),e&&e(),d&&(0,M.Kd)(n.titleService,n.metaService,{title:d.board_title,description:(0,h.YW)(d.board_description),image:{url:`${n.appsettings.readfileuploadurl}${n.appsettings.boardpath}${d.board_id}/cover.svg`,type:"image/svg",width:d.size_width,height:d.size_height,alt:d.board_title},url:f.c.url+V._.VIEWER_ID.replace(":id",null!==(m=null===(v=d.board_id)||void 0===v?void 0:v.toString())&&void 0!==m?m:"")}),(0,G.U5)({params:{userid:null===(b=n.user)||void 0===b?void 0:b.userid,board_id:n.b},callback:P=>{var T;let y;if(P&&!P.modules?y=(0,C.vmR)(P):"icdtV2"==(null==P?void 0:P.modules)&&(y=P),y)return C.JRt.data=y,C.JRt.changeSlide=(D,x,N,nt,I)=>{var A,O,F,B;n.slideIdx=N,n.slideTotal=nt,n.slide=I;let X=(0,C.zOM)((null!==(A=null==I||null===(O=I.svg)||void 0===O?void 0:O.viewBox.height)&&void 0!==A?A:1)/(null!==(F=null==I||null===(B=I.svg)||void 0===B?void 0:B.viewBox.width)&&void 0!==F?F:1)*100,100);n.svgRatio!=X&&(n.svgRatio=X)},n.slideTotal=C.JRt.slideTotal,n.renderSlide(),void(0,Z.U2)(y.fonts||[]);(0,G.rH)({params:{userid:null===(T=n.user)||void 0===T?void 0:T.userid,board_id:n.b},callback:D=>{if(D){let x=(0,C.vmR)(D);C.JRt.data=x,C.JRt.changeSlide=(N,nt,I,A,O)=>{var F,B,X,W;n.slideIdx=I,n.slideTotal=A,n.slide=O;let et=(0,C.zOM)((null!==(F=null==O||null===(B=O.svg)||void 0===B?void 0:B.viewBox.height)&&void 0!==F?F:1)/(null!==(X=null==O||null===(W=O.svg)||void 0===W?void 0:W.viewBox.width)&&void 0!==X?X:1)*100,100);n.svgRatio!=et&&(n.svgRatio=et)},n.slideTotal=C.JRt.slideTotal,n.renderSlide(),(0,Z.U2)(x.fonts||[])}}})}})):n.navigateToHome()}}),(0,G.BS)({params:{board_id:n.b,userid:null===(r=n.user)||void 0===r?void 0:r.userid},callback:d=>{n.settings=d||{buttons:{paging:!0}}}})})()}loadMore_BoardRelated(e){this.paging_board.page+=1,this.loadData_Paging_BoardRelated(e)}loadData_Paging_BoardRelated(e){var n=this;return(0,p.A)(function*(){var i;(0,z.dq)({loading:r=>{n.paging_board.loading=r},params:{userid:null===(i=n.user)||void 0===i?void 0:i.userid,topic_id:n.filter_board.topic_id,category_id:n.filter_board.category_id,template_id:n.filter_board.template_id,sortfield:n.paging_board.sortfield,sorttype:n.paging_board.sorttype,page:n.paging_board.page,limit:n.paging_board.limit},callback:r=>{n.boards=n.boards.concat(null!=r?r:[]),(!(null!=r&&r.length)||(null==r?void 0:r.length)<n.paging_board.limit)&&(n.paging_board.active=!1),e&&e()}})})()}switchBoard(e){var n=this;return(0,p.A)(function*(){n.b=null!=e?e:0,n.router.navigate([],{relativeTo:n.activatedRoute,queryParams:{b:n.b,n:null},queryParamsHandling:"merge",replaceUrl:!0}),n.loadBoard()})()}renderSlide(){C.JRt.runSlide(this.slideIdx)}presentModalBoardShare(e){var n=this;return(0,p.A)(function*(){var i;(yield n.modalController.create({component:J.q,componentProps:{b:null===(i=n.board)||void 0===i?void 0:i.board_id},mode:"md",cssClass:"ion-modal",backdropDismiss:!0,keyboardClose:!0})).present()})()}filterComments(e){return e?this.comments.filter(n=>n.comment_pid==e).sort((n,i)=>{var r,d;return(null!==(r=i.comment_id)&&void 0!==r?r:0)-(null!==(d=n.comment_id)&&void 0!==d?d:0)}):this.comments.filter(n=>!n.comment_pid).sort((n,i)=>{var r,d;return(null!==(r=i.comment_id)&&void 0!==r?r:0)-(null!==(d=n.comment_id)&&void 0!==d?d:0)})}formatDatetime(e,n){return g()().diff(g()(e),"days")<1?g()(e).fromNow():g()(e).format(null!=n?n:"HH:mm, DD/MM/YYYY")}keyupComment(e){var n=this;return(0,p.A)(function*(){13==e.keyCode&&n.sendComment(e,n.comment)})()}changeComment(e){var n=this;return(0,p.A)(function*(){var i;n.comment.comment_content=null!==(i=e.detail.value)&&void 0!==i?i:""})()}keyupComment2(e){var n=this;return(0,p.A)(function*(){13==e.keyCode&&n.sendComment(e,n.comment2)})()}changeComment2(e){var n=this;return(0,p.A)(function*(){var i;n.comment2.comment_content=null!==(i=e.detail.value)&&void 0!==i?i:""})()}replyComment(e,n){var i=this;return(0,p.A)(function*(){i.comment2={comment_pid:n}})()}editComment(e,n){var i=this;return(0,p.A)(function*(){var r;i.comment2=null!==(r=i.comments.find(d=>d.comment_id==n))&&void 0!==r?r:{}})()}sendComment(e,n){var i=this;return(0,p.A)(function*(){var r;n.comment_content&&(0,Y.uy)({loadingController:i.loadingController,params:{userid:null===(r=i.user)||void 0===r?void 0:r.userid,doctype:1105,docid:i.b,comment_id:n.comment_id,comment_pid:n.comment_pid,comment_content:n.comment_content},callback:d=>{0==(null==d?void 0:d.returncode)?(n.comment_id?i.comments.filter(c=>c.comment_id!=n.comment_id).forEach(c=>n):(n.comment_id=null==d?void 0:d.id,i.comments.push(n)),i.comment={},i.comment2={}):(0,E.c)(i.toastController,{},d).then(c=>{c.present()})}})})()}deleteComment(e,n){var i=this;return(0,p.A)(function*(){var r;(0,Y.TT)({loadingController:i.loadingController,params:{userid:null===(r=i.user)||void 0===r?void 0:r.userid,comment_id:n},callback:d=>{0==(null==d?void 0:d.returncode)?i.comments=i.comments.filter(c=>c.comment_id!=n&&c.comment_pid!=n):(0,E.c)(i.toastController,{},d).then(c=>{c.present()})}})})()}toggleLike(e){var n=this;return(0,p.A)(function*(){n.board&&(n.board.isliked=!n.board.isliked)})()}navigateByUrl(e){this.router.navigateByUrl(e)}navigateToHome(){var e=this;return(0,p.A)(function*(){(yield(0,j.lJ)())?e.navigateByUrl(V._.DASHBOARD):e.navigateByUrl(V._.LANDING_PAGE)})()}navigateToEditor(e){return(0,p.A)(function*(){window.location.href=e})()}presentModalBoardCustomizeTemplate(e,n){var i=this;return(0,p.A)(function*(){const r=yield i.modalController.create({component:ut,componentProps:{b:n},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});r.onDidDismiss().then(d=>{"confirm"==d.role&&d.data&&i.navigateToEditor(V._.EDITOR+`?b=${d.data.id}`)}),r.present()})()}}return(l=_).\u0275fac=function(e){return new(e||l)(t.rXU(q.hE),t.rXU(q.W8),t.rXU(a.Ix),t.rXU(a.nX),t.rXU(u.K_),t.rXU(u.W3),t.rXU(u.Xi))},l.\u0275cmp=t.VBU({type:l,selectors:[["app-viewer"]],decls:68,vars:24,consts:[["templateCommentLI",""],[1,"bg-cover","pb-5"],[1,"container","pt-3","pt-xxl-5","pb-5"],[1,"row","align-items-stretch"],[1,"col-12","col-lg-8","info"],[1,"mt-0","mb-2","mb-xxl-3"],[1,"d-flex","align-items-center","justify-content-between","mt-0","mb-2","mb-xxl-4"],[1,"flex-grow-1","mr-3","text-nowrap"],[1,"min-w-24"],["onerror","errorAvatar(this)",3,"src"],[1,"d-block","d-md-flex","flex-nowrap","align-items-center","text-ellipsis"],[1,"col-12","col-lg-8","mb-3"],[1,"position-relative","w-0","h-0","content"],["id","sieunhangaoo"],[1,"position-absolute","top-0","left-0","right-0","bottom-0"],["id","mainContainer",1,"svg-box"],["id","mainSvg","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"viewer"],[1,"position-absolute","left-0","right-0","bottom-0"],[1,"group-action"],[1,"group-action-paging"],[1,"col-12","col-lg-4","mb-3","playlist"],[1,"d-flex","flex-column","w-100","h-100"],[1,"d-flex","w-100","mb-3"],[1,"col","pl-0"],["mode","ios","expand","block"],[1,"col-auto","px-0"],["mode","ios","color","light",1,"mr-3",3,"title"],["mode","ios","color","light",3,"click"],[3,"src"],[1,"flex-grow-1","board-related-ion-content","d-none","d-lg-block"],["mode","ios",3,"class"],[3,"ionInfinite",4,"ngIf"],[1,"flex-grow-1","board-related","d-block","d-lg-none"],[1,"container","introduce","mb-4",2,"margin-top","-3rem"],[1,"container","introduce","mb-4"],[1,"container","container-comment","pb-5","mb-5"],[1,"row","mb-4"],[1,"col-12","col-lg-8"],["lines","full","mode","ios"],[3,"ionChange","keyup","placeholder","value"],["slot","end","mode","ios","size","default","shape","clear",3,"click"],["name","paper-plane-outline"],[1,"col-12","col-lg-8","pl-0"],["lines","none"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[1,"text-ellipsis","d-flex","align-items-center","mr-2",3,"title"],["src","../../../assets/icon-svg/dashboard/topic.svg",1,"fs-20"],[1,"fs-12","text-ellipsis"],["src","../../../assets/icon-svg/dashboard/category.svg",1,"fs-20"],["src","../../../assets/icon-svg/dashboard/template.svg",1,"fs-20"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"click","disabled"],["src","../../../assets/icon-png/Back.png"],["src","../../../assets/icon-png/Next.png"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"click"],["src","../../../assets/images/viewer/RefreshButton_normal.png"],["fill","clear",1,"ion-no-margin","ion-no-padding"],["src","../../../assets/images/viewer/ExitFullButton_active.png"],["src","../../../assets/images/viewer/FullButton_normal.png"],["mode","ios","expand","block",3,"click"],["mode","ios","expand","block",3,"click","disabled"],["mode","ios","color","light",1,"mr-3",3,"click","title"],["name","share-social-outline"],["mode","ios",3,"click"],[3,"name"],[3,"ionInfinite"],[1,"mb-4"],[1,"row"],[3,"innerHTML"],[1,"text-muted"],[1,"col-12","col-lg-4","mb-3"],[1,"alert","mb-0",3,"innerHTML"],[1,"d-flex","flex-wrap"],[1,"text-ellipsis","d-flex","align-items-center","mr-3","mb-3",3,"title"],["src","../../../assets/icon-svg/dashboard/tag.svg",1,"fs-20"],[1,"fs-14","text-ellipsis"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],["lines","full",4,"ngIf"],["slot","start"],[1,"comment-name"],[1,"comment-content"],[1,"comment-action"],[3,"click"],["side","end",4,"ngIf"],["side","end"],["color","secondary",3,"click"],["color","danger",3,"click"],["lines","full"],[3,"ionChange","keyup","placeholder","autofocus","value"],["slot","end","mode","ios","size","large","shape","clear",3,"click"]],template:function(e,n){if(1&e){const i=t.RV6();t.nrm(0,"app-header"),t.j41(1,"ion-content")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),t.EFF(7),t.k0s(),t.j41(8,"div",6)(9,"div",7)(10,"ion-chip")(11,"ion-avatar",8),t.nrm(12,"img",9),t.k0s(),t.j41(13,"ion-label"),t.EFF(14),t.k0s()()(),t.DNE(15,bt,4,3,"div",10),t.k0s()(),t.j41(16,"div",11)(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15),t.qSk(),t.nrm(21,"svg",16),t.k0s()(),t.joV(),t.j41(22,"div",17)(23,"div",18),t.DNE(24,ft,7,4,"div",19)(25,ht,3,0,"div")(26,Pt,3,1,"div"),t.k0s()()()()(),t.j41(27,"div",20)(28,"div",21)(29,"div")(30,"div",22)(31,"div",23),t.DNE(32,Mt,4,3,"ion-button",24)(33,Rt,4,3)(34,Tt,4,4),t.k0s(),t.j41(35,"div",25),t.DNE(36,Ot,3,3,"ion-button",26),t.j41(37,"ion-button",27),t.bIt("click",function(d){return t.eBV(i),t.Njj(n.toggleLike(d))}),t.nrm(38,"ion-icon",28),t.k0s()()()(),t.j41(39,"div",29)(40,"ion-content"),t.Z7z(41,jt,4,4,"ion-chip",30,t.fX1),t.DNE(43,yt,2,0,"ion-infinite-scroll",31),t.k0s()(),t.j41(44,"div",32),t.Z7z(45,xt,4,4,"ion-chip",30,t.fX1),t.k0s()()()()()(),t.DNE(47,wt,9,6,"div",33)(48,Et,9,3,"div",34),t.j41(49,"div",35)(50,"div",36)(51,"div",37)(52,"h5"),t.EFF(53),t.nI1(54,"translate"),t.k0s(),t.j41(55,"ion-item",38)(56,"ion-input",39),t.nI1(57,"translate"),t.bIt("ionChange",function(d){return t.eBV(i),t.Njj(n.changeComment(d))})("keyup",function(d){return t.eBV(i),t.Njj(n.keyupComment(d))}),t.k0s(),t.j41(58,"ion-button",40),t.bIt("click",function(d){return t.eBV(i),t.Njj(n.sendComment(d,n.comment))}),t.nrm(59,"ion-icon",41),t.k0s()()()(),t.j41(60,"div",36)(61,"div",42)(62,"ion-list",43)(63,"ul"),t.DNE(64,Ft,1,4,"ng-container",44),t.k0s()()()()(),t.nrm(65,"app-footer"),t.k0s(),t.DNE(66,Xt,5,3,"ng-template",null,0,t.C5r)}if(2&e){let i;t.R7$(7),t.JRh(null==n.board?null:n.board.board_title),t.R7$(5),t.Y8G("src",null!=n.board&&n.board.createdby_avatar?n.readfileuploadurl+(null==n.board?null:n.board.createdby_avatar):"assets/image/user-avatar-default.png",t.B4B),t.R7$(2),t.JRh(null==n.board?null:n.board.createdby_name),t.R7$(),t.vxM(15,null!=n.board&&n.board.topic_titles||null!=n.board&&n.board.category_titles||null!=n.board&&n.board.template_titles?15:-1),t.R7$(2),t.BMQ("style","padding-bottom:"+n.svgRatio+"%",t.$dS),t.R7$(7),t.vxM(24,null!=n.settings.buttons&&n.settings.buttons.paging?24:-1),t.R7$(),t.vxM(25,null!=n.settings.buttons&&n.settings.buttons.refresh?25:-1),t.R7$(),t.vxM(26,null!=n.settings.buttons&&n.settings.buttons.fullscreen?26:-1),t.R7$(6),t.vxM(32,null!=n.board&&n.board.chotausuabai?32:null!=n.board&&n.board.ispublic&&null!=n.board&&n.board.istemplate?33:34),t.R7$(4),t.vxM(36,null!=n.board&&n.board.isowner?36:-1),t.R7$(2),t.Mz_("src","../../../assets/image/viewer/",null!=n.board&&n.board.isliked?"star-2.svg":"star.svg",""),t.R7$(3),t.Dyx(n.boards),t.R7$(2),t.Y8G("ngIf",n.paging_board.active&&!n.paging_board.loading),t.R7$(2),t.Dyx(n.boards),t.R7$(2),t.vxM(47,null!=n.board&&n.board.board_description||null!=n.board&&n.board.board_content?47:-1),t.R7$(),t.vxM(48,null!=n.board&&null!=n.board.tag_arrs&&n.board.tag_arrs.length?48:-1),t.R7$(5),t.Lme("",t.bMT(54,20,"Comment")," (",n.comments.length,")"),t.R7$(3),t.FS9("placeholder",t.bMT(57,22,"EnterComment")),t.Y8G("value",null!==(i=n.comment.comment_content)&&void 0!==i?i:""),t.R7$(8),t.Y8G("ngForOf",n.filterComments())}},dependencies:[R.Sq,R.bT,R.T3,u.mC,u.Jm,u.ZB,u.W9,u.iq,u.KW,u.Ax,u.Hp,u.$w,u.uz,u.LU,u.CE,u.A7,u.he,u.nf,u.Zx,u.Gw,_t.l,mt.n,Q.D9],styles:[".bg-contain[_ngcontent-%COMP%]{background-image:url(bg.33cb60bd32718d53.svg);background-repeat:no-repeat;background-position:top center;background-size:contain}.bg-cover[_ngcontent-%COMP%]{background-image:url(bg.33cb60bd32718d53.svg);background-repeat:no-repeat;background-position:bottom center;background-size:cover}.info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:0;--background: transparent}.info[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}.content[_ngcontent-%COMP%]{border-radius:.75rem;overflow:hidden;box-shadow:4px 4px 12px #01010133}.nav-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;font-size:1.25rem}.nav-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{margin-left:3rem}.introduce[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:.75rem;background-color:#fff3b6;color:#000}.svg-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));display:flex;align-items:center;justify-content:center}.svg-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;margin:auto;background:#fff}.group-action[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:1rem;line-height:0;-webkit-user-select:none;user-select:none}.group-action[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap}.group-action[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-left:1rem}.group-action[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:0 1rem;vertical-align:middle;font-size:18px;color:#fab11d}.group-action[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{vertical-align:middle;width:34px;height:34px}.group-action[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:34px}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0;margin:1rem 0}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:empty{display:none}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;margin:0 0 .5rem}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:4rem}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 3rem;--border-radius: 50%;margin-top:0;margin-bottom:0;align-self:flex-start}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-name[_ngcontent-%COMP%]{line-height:1.5rem;font-weight:500}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-name[_ngcontent-%COMP%] > small[_ngcontent-%COMP%]{margin-left:.5rem;font-size:.75rem;color:var(--ion-color-medium);vertical-align:top}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{line-height:1.5rem;white-space:wrap;text-align:justify}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-action[_ngcontent-%COMP%]{line-height:1.5rem}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-action[_ngcontent-%COMP%] > small[_ngcontent-%COMP%]{line-height:1;vertical-align:middle;font-size:.75rem;color:var(--ion-color-primary);cursor:pointer}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0;margin:0;--border-radius: .5rem;--background: var(--ion-color-secondary)}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.container-comment[_ngcontent-%COMP%]   ion-item-option[_ngcontent-%COMP%]{text-transform:initial}.playlist[_ngcontent-%COMP%]   .board-related-ion-content[_ngcontent-%COMP%]{min-height:250px}.playlist[_ngcontent-%COMP%]   .board-related-ion-content[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--ion-background-color: transparent}.playlist[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .5rem;--padding-top: 0;--padding-bottom: 0;--padding-start: .75rem;--padding-end: .75rem;margin:0}.playlist[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([color]){--color: var(--ion-color-linear-contrast);--background: var(--ion-color-linear);--background-activated: var(--ion-color-linear-shade);--background-focused: var(--ion-color-linear-shade);--background-hover: var(--ion-color-linear-tint)}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.5rem;padding:.75rem 1.25rem;--background: transparent;--color: var(--ion-color-medium);-webkit-user-select:none;user-select:none}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.75rem;--color: var(--ion-color-medium-tint)}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:hover{--background: rgba(var(--ion-text-color-rgb), .1)}.playlist[_ngcontent-%COMP%]   ion-chip.active[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-secondary-rgb), .4);--color: var(--ion-text-color);font-weight:500}.playlist[_ngcontent-%COMP%]   ion-chip.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),_})()}];let zt=(()=>{var l;class _{}return(l=_).\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.$C({type:l}),l.\u0275inj=t.G2t({imports:[a.iI.forChild(Lt),a.iI]}),_})();var Yt=s(3890);let At=(()=>{var l;class _{}return(l=_).\u0275fac=function(e){return new(e||l)},l.\u0275mod=t.$C({type:l}),l.\u0275inj=t.G2t({imports:[R.MD,w.YN,u.bv,zt,Yt.x]}),_})()},3753:(S,$,s)=>{s.d($,{t:()=>H});var R=s(467),w=s(8671),u=s(2635),a=s(4438),p=s(6637),C=s(177),L=s(31);function z(g,M){1&g&&(a.qex(0),a.j41(1,"ion-content")(2,"div",2)(3,"div",3),a.nrm(4,"ion-spinner",4),a.k0s()()(),a.bVm())}function G(g,M){if(1&g){const h=a.RV6();a.qex(0),a.j41(1,"ion-item",9),a.bIt("click",function(){const k=a.eBV(h).$implicit,j=a.XpG(3);return a.Njj(j.filterChange(k.lookup_value))}),a.j41(2,"ion-label"),a.EFF(3),a.k0s()(),a.bVm()}if(2&g){const h=M.$implicit,f=a.XpG(3);a.R7$(),a.BMQ("color",h.lookup_value==f.selectedId?"primary":""),a.R7$(2),a.JRh(h.lookup_title)}}function U(g,M){if(1&g&&(a.j41(0,"ion-list",7),a.DNE(1,G,4,2,"ng-container",8),a.k0s()),2&g){const h=a.XpG(2);a.R7$(),a.Y8G("ngForOf",h.lookups)}}function V(g,M){1&g&&(a.j41(0,"div",3)(1,"i"),a.EFF(2),a.nI1(3,"translate"),a.k0s()()),2&g&&(a.R7$(2),a.JRh(a.bMT(3,1,"DataNotFound")))}function J(g,M){if(1&g){const h=a.RV6();a.qex(0),a.j41(1,"ion-item",9),a.bIt("click",function(){const k=a.eBV(h).$implicit,j=a.XpG(3);return a.Njj(j.filterChange(k.lookup_value))}),a.j41(2,"ion-label",10),a.EFF(3),a.k0s()(),a.bVm()}if(2&g){const h=M.$implicit,f=a.XpG(3);a.R7$(),a.BMQ("color",h.lookup_value==f.selectedId?"primary":""),a.R7$(),a.Y8G("color",h.color),a.R7$(),a.JRh(h.lookup_title)}}function Y(g,M){if(1&g&&(a.qex(0),a.nrm(1,"hr"),a.j41(2,"ion-list",7),a.DNE(3,J,4,3,"ng-container",8),a.k0s(),a.bVm()),2&g){const h=a.XpG(2);a.R7$(3),a.Y8G("ngForOf",h.lookups_d2)}}function E(g,M){if(1&g&&(a.qex(0),a.DNE(1,U,2,1,"ion-list",5)(2,V,4,3,"div",6)(3,Y,4,1,"ng-container",1),a.bVm()),2&g){const h=a.XpG();a.R7$(),a.Y8G("ngIf",h.lookups.length),a.R7$(),a.Y8G("ngIf",!h.lookups.length),a.R7$(),a.Y8G("ngIf",h.lookups_d2.length)}}let H=(()=>{var g;class M{constructor(f){this.popoverController=f,this.selectedId=0,this.lookup_key="",this.lookups_d2=[],this.dataInit={loading:!0},this.lookups=[]}ngOnInit(){var f=this;(0,R.A)(function*(){f.user=yield(0,u.Nk)(),f.loadLookup()})()}loadLookup(){var f;(0,w.$)({loading:k=>{this.dataInit.loading=k},params:{userid:null===(f=this.user)||void 0===f?void 0:f.userid,lookup_key:this.lookup_key},callback:k=>{this.lookups=k||[]}})}filterChange(f){var k;this.popoverController.dismiss(null!==(k=this.lookups.find(j=>j.lookup_value==f))&&void 0!==k?k:this.lookups_d2.find(j=>j.lookup_value==f),"confirm")}}return(g=M).\u0275fac=function(f){return new(f||g)(a.rXU(p.IE))},g.\u0275cmp=a.VBU({type:g,selectors:[["app-popover-lookup"]],inputs:{selectedId:"selectedId",lookup_key:"lookup_key",lookups_d2:"lookups_d2"},decls:3,vars:2,consts:[[1,"menu-lookup","overflow-auto"],[4,"ngIf"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],["lines","full",4,"ngIf"],["class","px-3 py-1",4,"ngIf"],["lines","full"],[4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],[3,"color"]],template:function(f,k){1&f&&(a.j41(0,"div",0),a.DNE(1,z,5,0,"ng-container",1)(2,E,4,3,"ng-container",1),a.k0s()),2&f&&(a.R7$(),a.Y8G("ngIf",k.dataInit.loading),a.R7$(),a.Y8G("ngIf",!k.dataInit.loading))},dependencies:[C.Sq,C.bT,p.W9,p.uz,p.he,p.nf,p.w2,L.D9],styles:[".menu-lookup[_ngcontent-%COMP%]{width:240px;max-height:480px;border-top:3px solid #5F6CE1}hr[_ngcontent-%COMP%]{margin:0}"]}),M})()},4668:(S,$,s)=>{s.d($,{z:()=>R});const R={ONLY_ME:10400,ONLY_MEMBER:10401,EVERYONE_HAS_LINK:10402}}}]);