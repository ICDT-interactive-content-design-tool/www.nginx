"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7102],{8779:(he,Nt,m)=>{m.d(Nt,{$u:()=>D,IB:()=>mt,WR:()=>b,bf:()=>j,eD:()=>dt,lq:()=>y,pZ:()=>L,u$:()=>S});const L={fill:"transparent",stroke:"#129bff",strokeWidth:1},S={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},dt={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},j={fill:"transparent",stroke:"transparent",strokeWidth:1},mt={fill:"none",stroke:"#5F6CE1",strokeWidth:1},b={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},y={fill:"transparent"},D={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(he,Nt,m)=>{m.d(Nt,{$N:()=>b,An:()=>y,CS:()=>S,Kf:()=>M,Lp:()=>R,j9:()=>D,lP:()=>j,n9:()=>f,nf:()=>mt});var L=m(2492);const S=x=>{var k;return null===(k=x.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===k?void 0:k.map(h=>{let B={type:h.substring(0,1)},P=(V=h.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?V.split(/\s/).map(q=>(0,L.z)(parseFloat(q),1e6)):[];var V;return P.length&&(B.points=P),B})},j=x=>{let k=[],h=[],B=[],P=[];return x.forEach(V=>{switch(["M","L","C","S","Q","T"].includes(V.type)&&V.points&&V.points.forEach((Dt,ht)=>{ht%2==0?k.push(Dt):h.push(Dt)}),V.type){case"A":var q;7==(null===(q=V.points)||void 0===q?void 0:q.length)&&(B.push(V.points[5]),P.push(V.points[6]));break;case"H":var X;null!==(X=V.points)&&void 0!==X&&X.length&&(k.push(V.points[0]),B.push(V.points[0]));break;case"V":var Z;null!==(Z=V.points)&&void 0!==Z&&Z.length&&(h.push(V.points[0]),P.push(V.points[0]));break;case"a":var lt;if(7==(null===(lt=V.points)||void 0===lt?void 0:lt.length)){let Dt=k[k.length-1];k.push(Dt+V.points[5]),B.push(Dt+V.points[5]);let ht=h[h.length-1];h.push(ht+V.points[6]),P.push(ht+V.points[6])}break;case"h":var tt;if(null!==(tt=V.points)&&void 0!==tt&&tt.length){let Dt=k[k.length-1];k.push(Dt+V.points[0]),B.push(Dt+V.points[0])}break;case"v":var Jt;if(null!==(Jt=V.points)&&void 0!==Jt&&Jt.length){let Dt=h[h.length-1];h.push(Dt+V.points[0]),P.push(Dt+V.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var qt;null===(qt=V.points)||void 0===qt||qt.forEach((Dt,ht)=>{ht%2==0?B.push(Dt):P.push(Dt)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Mt;null===(Mt=V.points)||void 0===Mt||Mt.forEach((Dt,ht)=>{if(ht%2==0){let xt=k[k.length-1];k.push(xt+Dt),B.push(xt+Dt)}else{let xt=h[h.length-1];h.push(xt+Dt),P.push(xt+Dt)}})}}),{minX:Math.min.apply(null,B),minY:Math.min.apply(null,P),maxX:Math.max.apply(null,B),maxY:Math.max.apply(null,P)}},mt=(x,k)=>k.map(h=>{let B=[];switch(h.type){case"a":var P;7==(null===(P=h.points)||void 0===P?void 0:P.length)&&B.push([(0,L.z)(h.points[0]/x.width,1e6),(0,L.z)(h.points[1]/x.height,1e6),h.points[2],h.points[3],h.points[4],(0,L.z)(h.points[5]/x.width,1e6),(0,L.z)(h.points[6]/x.height,1e6)]);break;case"A":var V;7==(null===(V=h.points)||void 0===V?void 0:V.length)&&B.push([(0,L.z)(h.points[0]/x.width,1e6),(0,L.z)(h.points[1]/x.height,1e6),h.points[2],h.points[3],h.points[4],(0,L.z)((h.points[5]-x.x)/x.width,1e6),(0,L.z)((h.points[6]-x.y)/x.height,1e6)]);break;case"h":var q;null!==(q=h.points)&&void 0!==q&&q.length&&B.push([(0,L.z)(h.points[0]/x.width,1e6)]);break;case"H":var X;null!==(X=h.points)&&void 0!==X&&X.length&&B.push([(0,L.z)((h.points[0]-x.x)/x.width,1e6)]);break;case"v":var Z;null!==(Z=h.points)&&void 0!==Z&&Z.length&&B.push([(0,L.z)(h.points[0]/x.height,1e6)]);break;case"V":var lt;null!==(lt=h.points)&&void 0!==lt&&lt.length&&B.push([(0,L.z)((h.points[0]-x.y)/x.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var tt;if(null!==(tt=h.points)&&void 0!==tt&&tt.length)for(let qt=0,Mt=h.points.length-1;qt<Mt;qt+=2)B.push([(0,L.z)((h.points[qt]-x.x)/x.width,1e6),(0,L.z)((h.points[qt+1]-x.y)/x.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var Jt;if(null!==(Jt=h.points)&&void 0!==Jt&&Jt.length)for(let qt=0,Mt=h.points.length-1;qt<Mt;qt+=2)B.push([(0,L.z)(h.points[qt]/x.width,1e6),(0,L.z)(h.points[qt+1]/x.height,1e6)])}return B.length?{type:h.type,ratios:B}:{type:h.type}}),b=(x,k)=>k.map(h=>{switch(h.type){case"a":var B,P;return`${h.type}${null!==(B=null===(P=h.ratios)||void 0===P||null===(P=P.map(At=>{var Lt,Qt,_,F,u,nt,kt;return[(0,L.z)(x.width*(null!==(Lt=At[0])&&void 0!==Lt?Lt:0),1e6),(0,L.z)(x.height*(null!==(Qt=At[1])&&void 0!==Qt?Qt:0),1e6),null!==(_=At[2])&&void 0!==_?_:0,null!==(F=At[3])&&void 0!==F?F:0,null!==(u=At[4])&&void 0!==u?u:0,(0,L.z)(x.width*(null!==(nt=At[5])&&void 0!==nt?nt:0),1e6),(0,L.z)(x.height*(null!==(kt=At[6])&&void 0!==kt?kt:0),1e6)]}))||void 0===P||null===(P=P.map(At=>At.join(" ")))||void 0===P?void 0:P.join(" "))&&void 0!==B?B:""}`;case"A":var V,q;return`${h.type}${null!==(V=null===(q=h.ratios)||void 0===q||null===(q=q.map(At=>{var Lt,Qt,_,F,u,nt,kt;return[(0,L.z)(x.width*(null!==(Lt=At[0])&&void 0!==Lt?Lt:0),1e6),(0,L.z)(x.height*(null!==(Qt=At[1])&&void 0!==Qt?Qt:0),1e6),null!==(_=At[2])&&void 0!==_?_:0,null!==(F=At[3])&&void 0!==F?F:0,null!==(u=At[4])&&void 0!==u?u:0,(0,L.z)(x.x+x.width*(null!==(nt=At[5])&&void 0!==nt?nt:0),1e6),(0,L.z)(x.y+x.height*(null!==(kt=At[6])&&void 0!==kt?kt:0),1e6)]}))||void 0===q||null===(q=q.map(At=>At.join(" ")))||void 0===q?void 0:q.join(" "))&&void 0!==V?V:""}`;case"h":var X,Z;return`${h.type}${null!==(X=null===(Z=h.ratios)||void 0===Z||null===(Z=Z.map(At=>{var Lt;return(0,L.z)(x.width*(null!==(Lt=At[0])&&void 0!==Lt?Lt:0),1e6)}))||void 0===Z?void 0:Z.join(" "))&&void 0!==X?X:""}`;case"H":var lt,tt;return`${h.type}${null!==(lt=null===(tt=h.ratios)||void 0===tt||null===(tt=tt.map(At=>{var Lt;return(0,L.z)(x.x+x.width*(null!==(Lt=At[0])&&void 0!==Lt?Lt:0),1e6)}))||void 0===tt?void 0:tt.join(" "))&&void 0!==lt?lt:""}`;case"v":var Jt,qt;return`${h.type}${null!==(Jt=null===(qt=h.ratios)||void 0===qt||null===(qt=qt.map(At=>{var Lt;return(0,L.z)(x.height*(null!==(Lt=At[0])&&void 0!==Lt?Lt:0),1e6)}))||void 0===qt?void 0:qt.join(" "))&&void 0!==Jt?Jt:""}`;case"V":var Mt,Dt;return`${h.type}${null!==(Mt=null===(Dt=h.ratios)||void 0===Dt||null===(Dt=Dt.map(At=>{var Lt;return(0,L.z)(x.y+x.height*(null!==(Lt=At[0])&&void 0!==Lt?Lt:0),1e6)}))||void 0===Dt?void 0:Dt.join(" "))&&void 0!==Mt?Mt:""}`;case"z":case"Z":return h.type;case"M":case"L":case"C":case"S":case"Q":case"T":var ht,xt;return`${h.type}${null!==(ht=null===(xt=h.ratios)||void 0===xt||null===(xt=xt.map(At=>{var Lt,Qt;return[(0,L.z)(x.x+x.width*(null!==(Lt=At[0])&&void 0!==Lt?Lt:0),1e6),(0,L.z)(x.y+x.height*(null!==(Qt=At[1])&&void 0!==Qt?Qt:0),1e6)]}))||void 0===xt||null===(xt=xt.map(At=>At.join(" ")))||void 0===xt?void 0:xt.join(" "))&&void 0!==ht?ht:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var jt,Y;return`${h.type}${null!==(jt=null===(Y=h.ratios)||void 0===Y||null===(Y=Y.map(At=>{var Lt,Qt;return[(0,L.z)(x.width*(null!==(Lt=At[0])&&void 0!==Lt?Lt:0),1e6),(0,L.z)(x.height*(null!==(Qt=At[1])&&void 0!==Qt?Qt:0),1e6)]}))||void 0===Y||null===(Y=Y.map(At=>At.join(" ")))||void 0===Y?void 0:Y.join(" "))&&void 0!==jt?jt:""}`;default:return""}}).join(""),y=x=>{return(k=x.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?k.split(/\s/).map(h=>parseFloat(h)):[];var k},D=x=>{let k=[],h=[];return x.forEach((B,P)=>{P%2==0?k.push(B):h.push(B)}),{minX:Math.min.apply(null,k),minY:Math.min.apply(null,h),maxX:Math.max.apply(null,k),maxY:Math.max.apply(null,h)}},R=(x,k)=>{let h=[];for(let B=0,P=k.length-1;B<P;B+=2)h.push([(k[B]-x.x)/x.width,(k[B+1]-x.y)/x.height]);return h},f=(x,k)=>k.map(h=>[(0,L.z)(x.x+x.width*h[0],1e6),(0,L.z)(x.y+x.height*h[1],1e6)]).map(h=>h.join(" ")).join(" "),M=(x,k)=>{let h=(x=>{let k=x.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(h=>(0,L.z)(parseFloat(h),1e6));if(6==k.length)return{a:k[0],b:k[1],c:k[2],d:k[3],e:k[4],f:k[5]}})(k);return h?window.Snap.path.map(x,new window.Snap.Matrix(h.a,h.b,h.c,h.d,h.e,h.f)).toString():x}},2837:(he,Nt,m)=>{m.d(Nt,{v:()=>x,U:()=>I});var L=m(7102),S=m(1999),dt=m(2492),j=/^#[a-fA-F0-9]+$/i,mt=/^rgb\((\d+),(\d+),(\d+)\)$/i,b=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const y=k=>{let h=null,B=null;if(k)if("transparent"==k)h="#000000",B=0;else if(k.match(j))h=k;else{let P=(k=k.replace(/\s+/g,"")).match(b);if(P)h="#"+(256|P[1]).toString(16).slice(1)+(256|P[2]).toString(16).slice(1)+(256|P[3]).toString(16).slice(1),B=(0,dt.z)(parseFloat(P[4]),100);else{let V=k.match(mt);V&&(h="#"+(256|V[1]).toString(16).slice(1)+(256|V[2]).toString(16).slice(1)+(256|V[3]).toString(16).slice(1))}}return{hex:h,alpha:B}};var D=m(4896),R=m(8338);const I=k=>et(null==k?void 0:k.url,null==k?void 0:k.path,null==k?void 0:k.src,null==k?void 0:k.name);var et=(k,h,B,P)=>{var V,q;let X,Z,lt,tt;var Jt,qt;return k&&(X=k.replace(/\\/g,"/")),h&&(Z=h.replace(/\\/g,"/")),B&&(lt=B.replace(/\\/g,"/")),Z&&!X&&(X=(null===(Jt=L.L.config)||void 0===Jt?void 0:Jt.readfileuploadurl)+Z),!lt||Z||X||(Z=lt.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),X=(null===(qt=L.L.config)||void 0===qt?void 0:qt.readfileuploadurl)+Z),tt=P||(null!==(V=X)&&void 0!==V?V:"").split("/").pop()||(null!==(q=Z)&&void 0!==q?q:"").split("/").pop()||"",{url:X,path:Z,name:tt}};const x=k=>{let h={x:0,y:0,width:k.screen.w,height:k.screen.h},B=[];return k.data.forEach((P,V)=>{var q,X;let Z={id:"number"==typeof P.id?P.id:L.L.data.newSlideId,code:null===(q=P.id)||void 0===q?void 0:q.toString(),name:"string"==typeof P.id?P.id:`Trang ${V+1}`,svg:{viewBox:h,nodes:[]},test:(lt=P.test2,lt?(lt.audiotrue&&(lt.audiotrue=I({path:lt.audiotrue.path})),lt.audiofalse&&(lt.audiofalse=I({path:lt.audiofalse.path})),lt.effecttrue&&(lt.effecttrue=I({path:lt.effecttrue.path})),lt.effectfalse&&(lt.effectfalse=I({path:lt.effectfalse.path})),lt.icontrue&&(lt.icontrue=I({path:lt.icontrue.path})),lt.iconfalse&&(lt.iconfalse=I({path:lt.iconfalse.path})),lt):{})};var lt;P.background&&Z.svg&&(Z.svg.background=function(k){return k&&(null!==k.match(/#([a-zA-Z0-9]+)/)||null!==k.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==k.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(P.background)?{color:P.background}:function(k){return k&&null!==k.match(/data:[^;]+;base64,/)}(P.background)?{base64:P.background}:function(k){return k&&null!==k.match(/http(s)?:\/\//)}(P.background)?et(P.background):et(void 0,P.background)),jQuery(null!==(X=P.svg)&&void 0!==X?X:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((lt,tt)=>{var Jt,qt;let Mt=jQuery(tt).parents(".indexs"),Dt=(Y=Mt.attr("data-index"))?parseInt(Y):0,ht=(Y=>Dt&&Y?parseInt(Y):0)(Mt.attr("data-time")),xt=null!==(Jt=tt.getAttribute("id"))&&void 0!==Jt?Jt:(1e9*Math.random()).toFixed(),jt={id:parseInt(xt),code:`${tt.nodeName}-${xt}`,name:tt.nodeName,idx:Dt,time:ht,type:(()=>{switch(tt.nodeName){case"polygon":return S.h.POLYGON;case"path":return S.h.PATH;case"circle":return S.h.CIRCLE;case"ellipse":return S.h.ELLIPSE;case"line":return S.h.LINE;case"rect":return S.h.RECT;case"foreignObject":return S.h.FOREIGNOBJECT}return 0})(),size:(Y=>{let At={},Lt=0,Qt=0,_=0,F=0,u=null,nt=null,kt=parseFloat((null===(Y=tt.getAttribute("transform"))||void 0===Y?void 0:Y.replace("rotate(","").replace(")",""))||"0")||null;switch(tt.nodeName){case"polygon":{var It,Ht;let Ft=[],Kt=[],Bt=999999999,ie=999999999,yt=0,Ct=0;u=JSON.parse(tt.getAttribute("ratios")||"[]"),nt=null!==(It=null===(Ht=tt.getAttribute("points"))||void 0===Ht?void 0:Ht.split(",").map(function(T){return T.split(" ").map(function(d){return parseFloat(d)})}))&&void 0!==It?It:[],nt.forEach(function(T){Ft.push(T[0]),Kt.push(T[1])}),Bt=Math.min.apply(null,Ft),ie=Math.min.apply(null,Kt),yt=Math.max.apply(null,Ft),Ct=Math.max.apply(null,Kt),Lt=Bt,Qt=ie,_=yt-Lt,F=Ct-Qt;break}case"path":{let Ft=tt.getAttribute("d");if(Ft){let Kt=(0,D.CS)(Ft),{minX:Bt,minY:ie,maxX:yt,maxY:Ct}=(0,D.lP)(Kt);Lt=Bt,Qt=ie,_=yt-Lt||1,F=Ct-Qt||1,Object.assign(At,{ratioMaps:(0,D.nf)({x:Lt,y:Qt,width:_,height:F},Kt)})}break}case"circle":{let Ft=parseFloat(tt.getAttribute("cx")||"0"),Kt=parseFloat(tt.getAttribute("cy")||"0"),Bt=parseFloat(tt.getAttribute("r")||"0");Lt=Ft-Bt,Qt=Kt-Bt,_=2*Bt,F=2*Bt;break}case"ellipse":{let Ft=parseFloat(tt.getAttribute("cx")||"0"),Kt=parseFloat(tt.getAttribute("cy")||"0"),Bt=parseFloat(tt.getAttribute("rx")||"0"),ie=parseFloat(tt.getAttribute("ry")||"0");Lt=Ft-Bt,Qt=Kt-ie,_=2*Bt,F=2*ie;break}case"line":{let Ft=parseFloat(tt.getAttribute("x1")||"0"),Kt=parseFloat(tt.getAttribute("y1")||"0"),Bt=parseFloat(tt.getAttribute("x2")||"0"),ie=parseFloat(tt.getAttribute("y2")||"0"),yt=999999999,Ct=999999999,T=0,d=0;yt=Math.min(Ft,Bt),Ct=Math.min(Kt,ie),T=Math.max(Ft,Bt),d=Math.max(Kt,ie),Lt=yt,Qt=Ct,_=T-Lt,F=d-Qt,u=[[(Ft-Lt)/(_||1),(Kt-Qt)/(F||1)],[(Bt-Lt)/(_||1),(ie-Qt)/(F||1)]];break}case"rect":case"foreignObject":Lt=parseFloat(tt.getAttribute("x")||"0"),Qt=parseFloat(tt.getAttribute("y")||"0"),_=parseFloat(tt.getAttribute("width")||"0"),F=parseFloat(tt.getAttribute("height")||"0")}return Object.assign(At,{x:Lt,y:Qt,width:_,height:F,ratios:u,points:nt,rotate:kt})})(),attribute:(()=>{let Y={};switch(tt.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var At,Lt,Qt,_,F,u,nt,kt;let T=null!==(At=tt.getAttribute("fill"))&&void 0!==At?At:null,d=null!==(Lt=tt.getAttribute("stroke"))&&void 0!==Lt?Lt:null,U=null!==(Qt=parseFloat(null!==(_=tt.getAttribute("stroke-opacity"))&&void 0!==_?_:"1"))&&void 0!==Qt?Qt:null,it=null!==(F=parseFloat(tt.getAttribute("stroke-width")||"0"))&&void 0!==F?F:null,at=null!==(u=tt.getAttribute("stroke-linecap"))&&void 0!==u?u:null,J=null!==(nt=tt.getAttribute("stroke-linejoin"))&&void 0!==nt?nt:null,O=null!==(kt=parseFloat(tt.getAttribute("stroke-dasharray")||"0"))&&void 0!==kt?kt:null;Object.assign(Y,{fill:T,stroke:d,strokeOpacity:U,strokeWidth:it,strokeLinecap:at,strokeLinejoin:J,strokeDasharray:O});break}case"path":{let T=Mt.get(0);if(T){var It,Ht,Ft,Kt,Bt,ie,yt,Ct;let d=null!==(It=T.getAttribute("fill"))&&void 0!==It?It:null,U=null!==(Ht=T.getAttribute("stroke"))&&void 0!==Ht?Ht:null,it=null!==(Ft=parseFloat(null!==(Kt=T.getAttribute("stroke-opacity"))&&void 0!==Kt?Kt:"1"))&&void 0!==Ft?Ft:null,at=null!==(Bt=parseFloat(T.getAttribute("stroke-width")||"0"))&&void 0!==Bt?Bt:null,J=null!==(ie=T.getAttribute("stroke-linecap"))&&void 0!==ie?ie:null,O=null!==(yt=T.getAttribute("stroke-linejoin"))&&void 0!==yt?yt:null,H=null!==(Ct=parseFloat(T.getAttribute("stroke-dasharray")||"0"))&&void 0!==Ct?Ct:null;Object.assign(Y,{fill:d,stroke:U,strokeOpacity:it,strokeWidth:at,strokeLinecap:J,strokeLinejoin:O,strokeDasharray:H})}break}}return Y})(),style:(()=>{let Y={};switch(tt.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let Qt=jQuery(tt).find(".svg-container");if(Qt.length){let F=parseFloat(Qt.css("border-width")||"0")||null,u=Qt.css("border-style")||null,nt=Qt.css("border-color")||null,kt=null,It=Qt.css("background-color")||null,Ht=null;(()=>{let{hex:Ft,alpha:Kt}=y(nt);nt=Ft,kt=Kt})(),(()=>{let{hex:Ft,alpha:Kt}=y(It);It=Ft,Ht=Kt})(),Object.assign(Y,{borderWidth:F,borderStyle:u,borderColor:nt,borderOpacity:kt,backgroundColor:It,backgroundOpacity:Ht})}let _=jQuery(tt).find(".svg-editor-content");if(_.length){var At,Lt;let F=JSON.parse((_.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:u,alpha:nt}=y(F.TextColor);Object.assign(Y,{fontFamily:null!==(At=F.FontFamily)&&void 0!==At?At:null,fontSize:null!==(Lt=F.FontSize)&&void 0!==Lt?Lt:null,color:u,opacity:nt})}break}}return Y})(),source:(()=>{let Y={};switch(tt.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Mt.hasClass("editors")){let T=jQuery(tt).find(".svg-editor-content");if(T.length){var At;let d=T.html(),U=null!==(At=(null!=d?d:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==At?At:[];Object.assign(Y,{type:"html",html:{htmlContent:d,variableKeywords:U}})}}else if(Mt.hasClass("inputs")||Mt.hasClass("textareas"))Object.assign(Y,{type:"input",input:{input:!!jQuery(tt).find("input").length,textarea:!!jQuery(tt).find("textarea").length}});else if(Mt.hasClass("tests")){let yt=jQuery(tt).find(".svg-test");if(Mt.hasClass("tests-truefalse")){var Lt,Qt;let Ct=yt.find(".svg-editor-content").html(),T=null!==(Lt=(null!=Ct?Ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Lt?Lt:[];Object.assign(Y,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(Qt=P.test2.truefalse)||void 0===Qt?void 0:Qt.includes(xt)}},html:{htmlContent:Ct,variableKeywords:T}})}else if(Mt.hasClass("tests-singlechoice")){var _,F;let Ct=yt.find(".svg-editor-content").html(),T=null!==(_=(null!=Ct?Ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==_?_:[];Object.assign(Y,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(F=P.test2.singlechoice)||void 0===F?void 0:F.includes(xt)}},html:{htmlContent:Ct,variableKeywords:T}})}else if(Mt.hasClass("tests-multichoice")){var u,nt;let Ct=yt.find(".svg-editor-content").html(),T=null!==(u=(null!=Ct?Ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==u?u:[];Object.assign(Y,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(nt=P.test2.multichoice)||void 0===nt?void 0:nt.includes(xt)}},html:{htmlContent:Ct,variableKeywords:T}})}else if(Mt.hasClass("tests-fill")){var kt,It;let Ct=yt.find(".svg-editor-content").html(),T=null!==(kt=(null!=Ct?Ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==kt?kt:[],d=null!==(It=(null!=Ct?Ct:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==It?It:[];d=d.filter((U,it,at)=>at.indexOf(U)==it),Object.assign(Y,{type:"test",test:{type:"fill",fill:d.map(U=>{var it;return{key:U,value:null===(it=P.test2.fill)||void 0===it||null===(it=it.find(at=>at.id==xt))||void 0===it||null===(it=it.vals)||void 0===it?void 0:it.map(at=>at.text).filter(at=>!["",null,void 0,NaN].includes(at))}})},html:{htmlContent:Ct,variableKeywords:T,fillKeywords:d}})}else if(Mt.hasClass("tests-matching")){if(yt.hasClass("svg-test-empty"))Object.assign(Y,{type:"test",test:{type:"matching-empty",matching:{key:yt.attr("data-name")||null}}});else if(yt.hasClass("svg-test-content")){var Ht;let Ct=yt.find(".svg-editor-content").html(),T=null!==(Ht=(null!=Ct?Ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Ht?Ht:[];Object.assign(Y,{type:"test",test:{type:"matching-content",matching:{key:yt.attr("data-name")||null}},html:{htmlContent:Ct,variableKeywords:T}})}}else if(Mt.hasClass("tests-speech")){var Ft;Object.assign(Y,{type:"speech",speech:{value:null===(Ft=P.test2.speech)||void 0===Ft||null===(Ft=Ft.find(Ct=>Ct.id==xt))||void 0===Ft||null===(Ft=Ft.vals)||void 0===Ft?void 0:Ft.map(Ct=>Ct.text).filter(Ct=>!["",null,void 0,NaN].includes(Ct))}})}else if(Mt.hasClass("tests-submit")){let Ct=jQuery(tt).find(".svg-container img");Object.assign(Y,{type:"test",test:{type:"submit"},image:et(Ct.attr("url"),Ct.attr("path"),Ct.attr("src"))})}}else if(Mt.hasClass("images")){let yt=jQuery(tt).find(".svg-editor-content img");if(yt.length)Object.assign(Y,{type:"image",image:et(yt.attr("url"),yt.attr("path"),yt.attr("src"))});else{let Ct=jQuery(tt).find("iframe");Object.assign(Y,{type:"iframe",iframe:et(Ct.attr("url"),Ct.attr("path"),Ct.attr("src"))})}}else if(Mt.hasClass("sounds")){let yt=jQuery(tt).find(".svg-editor-content img");yt.length&&Object.assign(Y,{type:"image",image:et(yt.attr("url"),yt.attr("path"),yt.attr("src"))})}else if(Mt.hasClass("htmls")){let yt=jQuery(tt).find("iframe");yt.length&&Object.assign(Y,{type:"iframe",iframe:et(yt.attr("url"),yt.attr("path"),yt.attr("src"))})}else if(Mt.hasClass("svgs")){let yt=jQuery(tt).find("svg");var Kt,Bt;yt.length&&Object.assign(Y,{type:"svg",svg:Object.assign(et(yt.attr("url"),yt.attr("path"),yt.attr("src")),{svgContent:null!==(Kt=null===(Bt=yt.get(0))||void 0===Bt?void 0:Bt.outerHTML)&&void 0!==Kt?Kt:null})})}else if(Mt.hasClass("medias")){let yt=jQuery(tt).find(".media-item");if(yt.length)switch(yt.attr("type")){case"audio":Object.assign(Y,{type:"audio",audio:et(yt.attr("url"),yt.attr("path"),yt.attr("src"))});break;case"video":Object.assign(Y,{type:"video",video:et(yt.attr("url"),yt.attr("path"),yt.attr("src"))});break;case"file":Object.assign(Y,{type:"file",file:et(yt.attr("url"),yt.attr("path"),yt.attr("src"))});break;default:var ie;Object.assign(Y,{type:"link",link:{url:null!==(ie=yt.attr("url"))&&void 0!==ie?ie:null}})}let Ct=jQuery(tt).find("img");Ct.length&&(Object.assign(Y,{image:et(Ct.attr("url"),Ct.attr("path"),Ct.attr("src"))}),Y.type||Object.assign(Y,{type:"image"}))}}return Y})(),animate:(Y=>{let At={},Lt=null===(Y=P.animates)||void 0===Y?void 0:Y.find(Qt=>Qt.elementId==xt);return Lt&&Object.assign(At,{value:Lt.value}),At})(),interactive:(()=>{let Y={},At=P.actions.show.filter(Qt=>Qt.elementId==xt&&Qt.active);At.length&&(Y.show={},At.forEach(Qt=>{let{source:_}=Qt;switch(null==_?void 0:_.type){case"work":var F,u,nt,kt,It;Y.show.action={},Object.assign(Y.show.action,{value:null!==(F=_.value)&&void 0!==F?F:null,iteration:null!==(u=_.iteration)&&void 0!==u?u:null,finish:null!==(nt=_.end)&&void 0!==nt?nt:null,time:null!==(kt=_.time)&&void 0!==kt?kt:null,points:null!==(It=_.points)&&void 0!==It?It:null});break;case"audio":var Ht,Ft,Kt;Y.show.audio={},Object.assign(Y.show.audio,{source:et(null,null,_.url),iteration:null!==(Ht=_.iteration)&&void 0!==Ht?Ht:null,finish:null!==(Ft=_.end)&&void 0!==Ft?Ft:null,time:null!==(Kt=_.time)&&void 0!==Kt?Kt:null,async:-1==_.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Bt,ie,yt,Ct,T,d,U,it,at,J,O,H,rt,wt,bt;_.options.includes("show")&&(Y.show.triggershow={},Object.assign(Y.show.triggershow,{id:null!==(Bt=parseInt(null!==(ie=_.id)&&void 0!==ie?ie:"0"))&&void 0!==Bt?Bt:null,ids:null===(yt=_.ids)||void 0===yt?void 0:yt.map(St=>parseInt(St)),async:null!==(Ct=_.async)&&void 0!==Ct?Ct:null,time:null!==(T=_.time)&&void 0!==T?T:null})),_.options.includes("run")&&(Y.show.triggerrun={},Object.assign(Y.show.triggerrun,{id:null!==(d=parseInt(null!==(U=_.id)&&void 0!==U?U:"0"))&&void 0!==d?d:null,ids:null===(it=_.ids)||void 0===it?void 0:it.map(St=>parseInt(St)),async:null!==(at=_.async)&&void 0!==at?at:null,time:null!==(J=_.time)&&void 0!==J?J:null})),_.options.includes("hide")&&(Y.show.triggerhide={},Object.assign(Y.show.triggerhide,{id:null!==(O=parseInt(null!==(H=_.id)&&void 0!==H?H:"0"))&&void 0!==O?O:null,ids:null===(rt=_.ids)||void 0===rt?void 0:rt.map(St=>parseInt(St)),async:null!==(wt=_.async)&&void 0!==wt?wt:null,time:null!==(bt=_.time)&&void 0!==bt?bt:null}))}}));let Lt=P.actions.click.filter(Qt=>Qt.elementId==xt&&Qt.active);return Lt&&(Y.click={},Lt.forEach(Qt=>{let{source:_}=Qt;switch(null==_?void 0:_.type){case"work":var F,u,nt,kt,It;Y.click.action={},Object.assign(Y.click.action,{value:null!==(F=_.value)&&void 0!==F?F:null,iteration:null!==(u=_.iteration)&&void 0!==u?u:null,finish:null!==(nt=_.end)&&void 0!==nt?nt:null,time:null!==(kt=_.time)&&void 0!==kt?kt:null,points:null!==(It=_.points)&&void 0!==It?It:null});break;case"audio":var Ht,Ft,Kt;Y.click.audio={},Object.assign(Y.click.audio,{source:et(null,null,_.url),iteration:null!==(Ht=_.iteration)&&void 0!==Ht?Ht:null,finish:null!==(Ft=_.end)&&void 0!==Ft?Ft:null,time:null!==(Kt=_.time)&&void 0!==Kt?Kt:null,async:-1==_.iteration?"change-slide":"change-node"});break;case"video":{Y.click.video={},Object.assign(Y.click.video,{source:et(_.url,_.path)});let{url:ct,path:ot,name:pt}=et(_.url,_.path);Y.click.media={},Object.assign(Y.click.media,{url:ct,path:ot,name:pt,type:R.S.VIDEO});break}case"image":{Y.click.image={},Object.assign(Y.click.image,{source:et(_.url,_.path)});let{url:ct,path:ot,name:pt}=et(_.url,_.path);Y.click.media={},Object.assign(Y.click.media,{url:ct,path:ot,name:pt,type:R.S.IMAGE});break}case"link":{Y.click.link={},Object.assign(Y.click.link,{url:_.url,target:_.target});let{url:ct,path:ot,name:pt}=et(_.url,_.path);Y.click.media={},Object.assign(Y.click.media,{url:ct,path:ot,name:pt,type:R.S.LINK});break}case"text":Y.click.text={},Object.assign(Y.click.text,{content:_.content});break;case"node":case"node2":var Bt,ie,yt,Ct,T,d,U,it,at,J,O,H,rt,wt,bt;_.options.includes("show")&&(Y.click.triggershow={},Object.assign(Y.click.triggershow,{id:null!==(Bt=parseInt(null!==(ie=_.id)&&void 0!==ie?ie:"0"))&&void 0!==Bt?Bt:null,ids:null===(yt=_.ids)||void 0===yt?void 0:yt.map(ct=>parseInt(ct)),async:null!==(Ct=_.async)&&void 0!==Ct?Ct:null,time:null!==(T=_.time)&&void 0!==T?T:null})),_.options.includes("run")&&(Y.click.triggerrun={},Object.assign(Y.click.triggerrun,{id:null!==(d=parseInt(null!==(U=_.id)&&void 0!==U?U:"0"))&&void 0!==d?d:null,ids:null===(it=_.ids)||void 0===it?void 0:it.map(ct=>parseInt(ct)),async:null!==(at=_.async)&&void 0!==at?at:null,time:null!==(J=_.time)&&void 0!==J?J:null})),_.options.includes("hide")&&(Y.click.triggerhide={},Object.assign(Y.click.triggerhide,{id:null!==(O=parseInt(null!==(H=_.id)&&void 0!==H?H:"0"))&&void 0!==O?O:null,ids:null===(rt=_.ids)||void 0===rt?void 0:rt.map(ct=>parseInt(ct)),async:null!==(wt=_.async)&&void 0!==wt?wt:null,time:null!==(bt=_.time)&&void 0!==bt?bt:null}));break;case"slide":var St;Y.click.slide={},Object.assign(Y.click.slide,{id:parseInt(null!==(St=_.id)&&void 0!==St?St:"0")||_.num||null,code:_.id})}})),Y})(),variable:(Y=>{let At={};var Lt;tt.getAttribute("data-variable")&&(At.input={},Object.assign(At.input,{variable:null!==(Lt=tt.getAttribute("data-variable"))&&void 0!==Lt?Lt:null}));let Qt=null===(Y=P.nodes)||void 0===Y||null===(Y=Y.find(kt=>kt.id==xt))||void 0===Y?void 0:Y.variable;var _,F,u,nt;return Qt&&(At.click={},Object.assign(At.click,{variable:null!==(_=Qt.variable)&&void 0!==_?_:null,operator:null!==(F=Qt.operator)&&void 0!==F?F:null,valuetype:null!==(u=Qt.valuetype)&&void 0!==u?u:null,value:null!==(nt=Qt.value)&&void 0!==nt?nt:null})),At})()};var Y;null===(qt=Z.svg)||void 0===qt||qt.nodes.push(jt)}),B.push(Z)}),{screen:{width:k.screen.w,height:k.screen.h},data:{slides:B},variable:k.variable}}},6195:(he,Nt,m)=>{m.d(Nt,{A9:()=>R,IB:()=>f,_4:()=>D,_5:()=>mt,ar:()=>b,yW:()=>y});var L=m(467),S=m(119);S.config({driver:[S.INDEXEDDB,S.LOCALSTORAGE,S.WEBSQL],name:"_localDataDB",version:1});const j={create:(N=(0,L.A)(function*(){return S}),function(){return N.apply(this,arguments)}),get:function(){var N=(0,L.A)(function*(M){return S.getItem(M)});return function(I){return N.apply(this,arguments)}}(),set:function(){var N=(0,L.A)(function*(M,I){return S.setItem(M,I)});return function(I,et){return N.apply(this,arguments)}}()},mt=function(){var N=(0,L.A)(function*(M){yield j.create();var I=(yield j.get("icdt-data"))||[];"function"==typeof M.callback&&M.callback(I)});return function(I){return N.apply(this,arguments)}}(),b=function(){var N=(0,L.A)(function*(M){yield j.create(),M.params=M.params||{};try{yield j.set("icdt-data",M.params),"function"==typeof M.callback&&M.callback(M.params)}catch(I){"function"==typeof M.callback&&M.callback(null),console.error(I)}});return function(I){return N.apply(this,arguments)}}(),y=function(){var N=(0,L.A)(function*(M){yield j.create();try{var I=(yield j.get("icdt-config"))||{};"function"==typeof M.callback&&M.callback(I)}catch(et){"function"==typeof M.callback&&M.callback(null),console.error(et)}});return function(I){return N.apply(this,arguments)}}(),D=function(){var N=(0,L.A)(function*(M){yield j.create(),M.params=M.params||{};try{yield j.set("icdt-config",M.params),"function"==typeof M.callback&&M.callback(M.params)}catch(I){"function"==typeof M.callback&&M.callback(null),console.error(I)}});return function(I){return N.apply(this,arguments)}}(),R=function(){var N=(0,L.A)(function*(M){yield j.create();try{var I=(yield j.get("icdt-clipboard"))||{};"function"==typeof M.callback&&M.callback(I)}catch(et){"function"==typeof M.callback&&M.callback(null),console.error(et)}});return function(I){return N.apply(this,arguments)}}(),f=function(){var N=(0,L.A)(function*(M){yield j.create(),M.params=M.params||{};try{yield j.set("icdt-clipboard",M.params),"function"==typeof M.callback&&M.callback(M.params)}catch(I){"function"==typeof M.callback&&M.callback(null),console.error(I)}});return function(I){return N.apply(this,arguments)}}();var N},6315:(he,Nt,m)=>{m.d(Nt,{w:()=>L});const L=(S,dt)=>{if(!S)return"";let j=S.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),mt=(j&&j[4]||"").trim(),b=j?(256|j[1]).toString(16).slice(1)+(256|j[2]).toString(16).slice(1)+(256|j[3]).toString(16).slice(1):S;if("0"==mt)return"transparent";if(dt){let y;y=""!==mt?mt:"01",y=(255*y|256).toString(16).slice(1),b+=y}return`#${b}`}},7873:(he,Nt,m)=>{m.d(Nt,{F:()=>L});const L={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},2409:(he,Nt,m)=>{m.d(Nt,{F:()=>L});const L={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(he,Nt,m)=>{m.d(Nt,{P:()=>L});const L={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(he,Nt,m)=>{m.d(Nt,{Q:()=>L});const L={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(he,Nt,m)=>{m.d(Nt,{h:()=>L});const L={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},8338:(he,Nt,m)=>{m.d(Nt,{S:()=>L});const L={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},7102:(he,Nt,m)=>{m.d(Nt,{L:()=>_t});var L=m(3603),S=m(5970),dt=m(7873),j=m(9506),mt=m(1308),b=m(6037),y=m(4333);const f=K=>{var i,r,o,n,l,g,p;let c=(null===(i=K.mouseEvent)||void 0===i?void 0:i.target)||(null===(r=K.touchEvent)||void 0===r?void 0:r.target),A=(null===(o=c)||void 0===o?void 0:o.getAttribute("id"))||"",w=null===(n=c)||void 0===n?void 0:n.nodeName;_t.dataSelect.nodeName.includes(w)||(c=jQuery(c).parents("foreignObject").get(0),c&&(A=c.getAttribute("id")||"",w=c.nodeName));let W=(null===(l=c)||void 0===l||null===(l=l.parentNode)||void 0===l?void 0:l.getAttribute("id"))||"";var z,ft;if([dt.F.RESIZE_GROUP,dt.F.SELECT_GROUP].includes(W))return null===(z=K.mouseEvent)||void 0===z||z.stopPropagation(),void(null===(ft=K.mouseEvent)||void 0===ft||ft.preventDefault());if(null!==(g=K.mouseEvent)&&void 0!==g&&g.altKey||null!==(p=K.touchEvent)&&void 0!==p&&p.altKey||!A||A.match(/[^0-9]/)||!_t.dataSelect.nodeName.includes(w)){var gt;_t.dataSelect.ids.length&&(_t.dataSelect.ids=[]),(0==(null===(gt=K.mouseEvent)||void 0===gt?void 0:gt.button)||K.touchEvent)&&(K=>{let l=(0,S.RY)(dt.F.SCAN_GROUP,"g"),g=(0,j.CE)(0,0,1,1);(0,S.xJ)(l,g),((K,i,r)=>{(0,mt.I)(K,{start:l=>{},move:(l,g)=>{((l,g,p,c)=>{i=(0,j.CE)(l,g,p,c),(0,S.xJ)(r,i)})(g[0][0],g[0][1],l.x,l.y)},end:(l,g)=>{null==r||r.remove(),_t.dataSelect.ids=_t.data.getNodeInArea(Math.min(g[0][0],l.x),Math.min(g[0][1],l.y),Math.max(g[0][0],l.x),Math.max(g[0][1],l.y));let p=_t.dataSelect.nodes;1==p.length?(0,b.K)(p[0]):p.length>1&&(0,y.E)(p)}})})(K,g,l)})(K)}else{var Et,Pt;let $t=parseFloat(A||"0");_t.dataSelect.ids=null!==(Et=K.mouseEvent)&&void 0!==Et&&Et.shiftKey||null!==(Pt=K.touchEvent)&&void 0!==Pt&&Pt.shiftKey?[$t].concat(_t.dataSelect.ids).filter((ge,_e,xe)=>xe.indexOf(ge)==_e):[$t];let we=_t.dataSelect.nodes;we.length>1?(0,y.E)(we):1==we.length&&(0,b.K)(we[0])}};class M{constructor(){let{x:i,y:r}=_t.screen.dislocation;var o=(n,l,g,p)=>{_t.screen.move({x:i,y:r},{x:g-n,y:p-l})};return{start:n=>{},move:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)},end:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)}}}}var I=m(1999),et=m(4888);const x=[{name:"tam gi\xe1c vu\xf4ng",type:et.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:et.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:et.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:et.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:et.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:et.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:et.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:et.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:et.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:et.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:et.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:et.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:et.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var k=m(1281),h=m(2492);class B{constructor(){let i=(0,S.RY)(dt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,k.K)(Math.ceil(1e9*Math.random())),g=(p,c,A,w)=>{l=(0,j.CE)(p,c,A,w,{ratio:1}),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,j.xW)(I.h.CIRCLE,l,n)),(0,S.tD)(o,n),(0,S.in)(i,l)};return{start:p=>{g(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,c)=>{g(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,j.xW)(I.h.CIRCLE,l,n)),(0,S.tD)(o,n)),_t.data.node=Object.assign({id:r,type:I.h.CIRCLE,name:"Circle"},{size:l,attribute:n}),null==i||i.remove()}}}}var P=m(6153);class V{constructor(){let i=(0,S.RY)(dt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,P.W)(Math.ceil(1e9*Math.random()));var g=(p,c,A,w)=>{l=(0,j.CE)(p,c,A,w),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,j.xW)(I.h.ELLIPSE,l,n)),(0,S.tD)(o,n),(0,S.in)(i,l)};return{start:p=>{g(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,c)=>{g(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{(l.width<=16||l.height<=16)&&(l.width=90,l.height=60,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,j.xW)(I.h.ELLIPSE,l,n)),(0,S.tD)(o,n)),_t.data.node=Object.assign({id:r,type:I.h.ELLIPSE,name:"Ellipse"},{size:l,attribute:n}),null==i||i.remove()}}}}var q=m(7945);class X{constructor(){let i=(0,S.RY)(dt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,q.a)(Math.ceil(1e9*Math.random()));var g=(p,c,A,w)=>{l=(0,j.CE)(p,c,A,w),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,j.xW)(I.h.RECT,l,n)),(0,S.tD)(o,n),(0,S.in)(i,l)};return{start:p=>{g(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,c)=>{g(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,j.xW)(I.h.RECT,l,n)),(0,S.tD)(o,n)),_t.data.node=Object.assign({id:r,type:I.h.RECT,name:"Rect"},{size:l,attribute:n}),null==i||i.remove()}}}}var Z=m(3477);class lt{constructor(i){let r=(0,S.RY)(dt.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:n,element:l,attribute:g,size:p}=(0,Z.u)(Math.ceil(1e9*Math.random()));p.ratios=o;var c=(A,w,W,z)=>{p=(0,j.CE)(A,w,W,z,{ratios:o}),p.x=(0,h.z)(p.x),p.y=(0,h.z)(p.y),p.width=(0,h.z)(p.width),p.height=(0,h.z)(p.height),Object.assign(g,(0,j.xW)(I.h.POLYGON,p,g)),(0,S.tD)(l,g),(0,S.in)(r,p)};return{start:A=>{c(A.x,A.y,A.x+p.width,A.y+p.height)},move:(A,w)=>{c(w[0][0],w[0][1],A.x,A.y)},end:(A,w)=>{(p.width<=16||p.height<=16)&&(p.width=80,p.height=80,p.x=p.x-p.width/2,p.y=p.y-p.height/2,Object.assign(g,(0,j.xW)(I.h.POLYGON,p,g)),(0,S.tD)(l,g)),_t.data.node=Object.assign({id:n,type:I.h.POLYGON,name:"Polygon"},{size:p,attribute:g}),null==r||r.remove()}}}}var tt=m(3069);class Jt{constructor(){let i=(0,S.RY)(dt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,tt.q)(Math.ceil(1e9*Math.random()));return{start:p=>{},move:(p,c)=>{((p,c,A,w)=>{l=(0,j.CE)(p,c,A,w),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,j.xW)(I.h.LINE,l,n)),(0,S.tD)(o,n),(0,S.in)(i,l)})(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{c.length>=2?((l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,j.xW)(I.h.LINE,l,n)),(0,S.tD)(o,n)),_t.data.node=Object.assign({id:r,type:I.h.LINE,name:"Line"},{size:l,attribute:n})):null==o||o.remove(),null==i||i.remove()}}}}var qt=m(4896),Mt=m(6407);class Dt{constructor(){let{nodeId:i,element:r,attribute:o,size:n}=(0,Mt.X)(Math.ceil(1e9*Math.random())),g="";return{start:c=>{g=`M ${c.x} ${c.y} L ${c.x} ${c.y}`},move:(c,A)=>{((c,A)=>{g+=` ${c} ${A}`,r.setAttribute("d",g)})(c.x,c.y)},end:(c,A)=>{let w=(0,qt.CS)(g),{minX:W,minY:z,maxX:ft,maxY:gt}=(0,qt.lP)(w);n.x=W,n.y=z,n.width=ft-W||1,n.height=gt-z||1,n.ratioMaps=(0,qt.nf)(n,w),_t.data.node=Object.assign({id:i,type:I.h.PATH,name:"Path"},{size:n,attribute:o})}}}}var ht=m(745);class xt{constructor(){let i=(0,S.RY)(dt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,size:n,attribute:l,style:g,source:p}=(0,ht.$)(Math.ceil(1e9*Math.random()));var c=(A,w,W,z)=>{n=(0,j.CE)(A,w,W,z),n.x=(0,h.z)(n.x),n.y=(0,h.z)(n.y),n.width=(0,h.z)(n.width),n.height=(0,h.z)(n.height),Object.assign(l,(0,j.xW)(I.h.FOREIGNOBJECT,n,l)),(0,S.tD)(o,l),(0,S.in)(i,n)};return{start:A=>{c(A.x,A.y,A.x+n.width,A.y+n.height)},move:(A,w)=>{c(w[0][0],w[0][1],A.x,A.y)},end:(A,w)=>{(n.width<=16||n.height<=16)&&(n.width=90,n.height=60,n.x=n.x-n.width/2,n.y=n.y-n.height/2,Object.assign(l,(0,j.xW)(I.h.FOREIGNOBJECT,n,l)),(0,S.tD)(o,l)),_t.data.node=Object.assign({id:r,type:I.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:g,source:p}),null==i||i.remove()}}}}var jt=m(9173);class Y{constructor(){var i,r;let o=(0,S.RY)(dt.F.CREATE_GROUP,"g"),{nodeId:n,element:l,size:g,attribute:p,source:c}=(0,jt.B)(Math.ceil(1e9*Math.random())),A=1;(W=>{if(!W)return;let z=new Image;z.onload=()=>{A=(0,h.z)(z.naturalWidth/z.naturalHeight,100)},z.onerror=ft=>{console.error(`ImgSrc load failed -> ${W}`,ft)},z.src=W})(null!==(i=null===(r=c.image)||void 0===r?void 0:r.url)&&void 0!==i?i:"");var w=(W,z,ft,gt)=>{g=(0,j.CE)(W,z,ft,gt,{ratio:A}),g.x=(0,h.z)(g.x),g.y=(0,h.z)(g.y),g.width=(0,h.z)(g.width),g.height=(0,h.z)(g.height),Object.assign(p,(0,j.xW)(I.h.IMAGE,g,p)),(0,S.tD)(l,p),(0,S.in)(o,g)};return{start:W=>{w(W.x,W.y,W.x+g.width,W.y+g.height)},move:(W,z)=>{w(z[0][0],z[0][1],W.x,W.y)},end:(W,z)=>{(g.width<=16||g.height<=16)&&(g.width=80,g.height=80,g.x=g.x-g.width/2,g.y=g.y-g.height/2,Object.assign(p,(0,j.xW)(I.h.IMAGE,g,p)),(0,S.tD)(l,p)),_t.data.node=Object.assign({id:n,type:I.h.IMAGE,name:"Image"},{size:g,attribute:p,source:c}),null==o||o.remove()}}}}var Lt=m(7135),Qt=m(4979);function u(K,i,r,o){return Math.sqrt(Math.pow(r-K,2)+Math.pow(o-i,2))}function nt(K,i,r,o,n){return u(K,i,r,o)<n?1:0}function It(K,i,r,o,n,l,g){var p=[];return p.push(nt(K,i,r,o,g)),p.push(nt(K,i,n,l,g)),p.push(function kt(K,i,r,o,n,l,g){var p=[n-r,l-o],c=[K-r,i-o],A=[-p[1],p[0]],w=Math.sqrt(Math.pow(A[0],2)+Math.pow(A[1],2)),W=[A[0]/w,A[1]/w],z=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),ft=[p[0]/z,p[1]/z],gt=c[0]*ft[0]+c[1]*ft[1];if(gt<=0||gt>=z)return 0;var Et=c[0]*W[0]+c[1]*W[1];return Et>=g||Et<=-g?0:1}(K,i,r,o,n,l,g)),p}function Ht(K,i,r,o,n){var l=[r-K,o-i],g=[-l[1],l[0]],p=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)),c=[g[0]/p,g[1]/p];return[[K+n*c[0],i+n*c[1]],[K-n*c[0],i-n*c[1]],[r-n*c[0],o-n*c[1]],[r+n*c[0],o+n*c[1]]]}function Ft(K,i,r,o,n,l,g){var gt,p=[n-K,l-i],c=[r-K,o-i],A=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),w=[c[0]/A,c[1]/A],W=p[0]*w[0]+p[1]*w[1],z=[K+W*w[0],i+W*w[1]],ft=Math.sqrt(Math.pow(n-z[0],2)+Math.pow(l-z[1],2));gt=0===ft?g:Math.sqrt(Math.pow(g,2)-Math.pow(ft,2));var Et=[K+W*w[0]+gt*w[0],i+W*w[1]+gt*w[1]];return Et[0]===K&&Et[1]===i?null:Et}function Kt(K,i,r,o,n,l,g){var p=[n-K,l-i],c=[r-K,o-i],A=[-c[1],c[0]],w=Math.sqrt(Math.pow(A[0],2)+Math.pow(A[1],2)),W=[A[0]/w,A[1]/w],z=p[0]*W[0]+p[1]*W[1],ft=d([K,i],[r,o],[n,l]);if(Ct([ft[0]-n,ft[1]-l])>=g)return null;var Et=Math.sqrt(Math.pow(g,2)-Math.pow(z,2)),Pt=[n-z*W[0],l-z*W[1]],$t=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),we=[c[0]/$t,c[1]/$t],ge=[[Pt[0]-we[0]*Et,Pt[1]-we[1]*Et],[Pt[0]+we[0]*Et,Pt[1]+we[1]*Et]];return ge[0][0]===K&&ge[0][1]===i?null:ge}function Bt(K,i,r,o,n,l,g,p){var c,A,w,W,z,ft;return-(w=g-n)*(A=o-i)+(c=r-K)*(W=p-l)==0?null:(ft=(w*(i-l)-W*(K-n))/(-w*A+c*W),(z=(-A*(K-n)+c*(i-l))/(-w*A+c*W))>=0&&z<=1&&ft>=0&&ft<=1?[K+ft*c,i+ft*A]:null)}function ie(K,i,r,o,n,l,g,p,c,A){var w=Ht(l,g,p,c,A),W=[];if(r[0]&&!r[1])W.push(Ft(K,i,o,n,l,g,A)),W.push(Bt(K,i,o,n,w[0][0],w[0][1],w[3][0],w[3][1])),W.push(Bt(K,i,o,n,w[1][0],w[1][1],w[2][0],w[2][1])),(z=Kt(K,i,o,n,p,c,A))&&W.push(z[0],z[1]);else if(!r[0]&&r[1])W.push(Ft(K,i,o,n,p,c,A)),W.push(Bt(K,i,o,n,w[0][0],w[0][1],w[3][0],w[3][1])),W.push(Bt(K,i,o,n,w[1][0],w[1][1],w[2][0],w[2][1])),(z=Kt(K,i,o,n,l,g,A))&&W.push(z[0],z[1]);else if(r[0]&&r[1])W.push(Ft(K,i,o,n,l,g,A)),W.push(Bt(K,i,o,n,w[0][0],w[0][1],w[3][0],w[3][1])),W.push(Bt(K,i,o,n,w[1][0],w[1][1],w[2][0],w[2][1])),W.push(Ft(K,i,o,n,p,c,A));else{var z=Kt(K,i,o,n,p,c,A),ft=Kt(K,i,o,n,l,g,A);z&&W.push(z[0],z[1]),ft&&W.push(ft[0],ft[1]),W.push(Bt(K,i,o,n,w[0][0],w[0][1],w[3][0],w[3][1])),W.push(Bt(K,i,o,n,w[1][0],w[1][1],w[2][0],w[2][1]))}for(var gt=[K,i],Et=0;Et<W.length;Et++)W[Et]&&u(W[Et][0],W[Et][1],o,n)<u(gt[0],gt[1],o,n)&&(gt=W[Et]);return gt[0]===K&&gt[1]===i?null:gt}function yt(K,i,r,o,n,l,g,p,c){var A=Ht(n,l,g,p,c),w=[],W=Kt(K,i,r,o,n,l,c);W&&w.push(W[0],W[1]),(W=Kt(K,i,r,o,g,p,c))&&w.push(W[0],W[1]),w.push(Bt(K,i,r,o,A[0][0],A[0][1],A[3][0],A[3][1])),w.push(Bt(K,i,r,o,A[1][0],A[1][1],A[2][0],A[2][1]));for(var z=[r,o],ft=[K,i],gt=0;gt<w.length;gt++)w[gt]&&u(w[gt][0],w[gt][1],K,i)<u(z[0],z[1],K,i)&&(z=w[gt]);for(var Et=0;Et<w.length;Et++)w[Et]&&u(w[Et][0],w[Et][1],r,o)<u(ft[0],ft[1],r,o)&&(ft=w[Et]);return z[0]===r&&z[1]===o||ft[0]===K&&ft[1]===i?null:[z,ft]}var Ct=function(K){return Math.sqrt(K[0]*K[0]+K[1]*K[1])},d=function(K,i,r){var o=[i[0]-K[0],i[1]-K[1]],n=Ct(o);if(n<1e-6)return K;var l=[r[0]-K[0],r[1]-K[1]],g=(o[0]*l[0]+o[1]*l[1])/n;return g<0?K:g>n?i:[K[0]+o[0]*g/n,K[1]+o[1]*g/n]};class U{constructor(){let{element:o,size:l}=(0,Mt.X)(Math.ceil(1e9*Math.random()));(0,S.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let g="";return{start:A=>{g=`M ${A.x} ${A.y} L ${A.x} ${A.y}`},move:(A,w)=>{((A,w)=>{g+=` ${A} ${w}`,o.setAttribute("d",g)})(A.x,A.y)},end:(A,w)=>{o.remove(),(A=>{let w=9999,W=9999,z=-9999,ft=-9999;A.forEach(Et=>{w=Math.min(w,Et[0]),W=Math.min(W,Et[1]),z=Math.max(z,Et[0]),ft=Math.max(ft,Et[1])}),l=(0,j.CE)(w,W,z,ft,{points:A}),_t.data.getNodeInArea(0,0,1920,1920,I.h.PATH).forEach(Et=>{let $t=((K,i,r)=>{r=r||20;var o=[],n=function(w){var W=i[0][0],z=i[0][1],ft=0,gt=0;if(1!==w.length||nt(w[0][0],w[0][1],W,z,r)){for(var Et;ft<w.length-1;){var Pt=w[ft],$t=w[ft+1],we=nt(Pt[0],Pt[1],W,z,r),ge=nt($t[0],$t[1],W,z,r);if(we&&ge)gt=++ft;else if(we&&!ge)(_e=Ft(Pt[0],Pt[1],$t[0],$t[1],W,z,r))?(w[ft]=_e,gt=ft):ft++;else if(!we&&ge){var _e;(_e=Ft($t[0],$t[1],Pt[0],Pt[1],W,z,r))&&((Et=w.slice(gt,ft+1)).push(_e),o.push(Et)),gt=++ft}else{var xe=Kt(Pt[0],Pt[1],$t[0],$t[1],W,z,r);xe?(((Et=w.slice(gt,ft+1))[Et.length-1][0]!==xe[0][0]||Et[Et.length-1][1]!==xe[0][1])&&Et.push(xe[0]),Et.length>1&&o.push(Et),w[ft]=xe[1],w[ft+1]&&w[ft+1][0]==xe[1][0]&&w[ft+1][1]==xe[1][1]&&ft++,gt=ft):ft++}}gt!==ft&&(Et=w.slice(gt,w.length))&&o.push(Et)}else o.push(w)},l=function(w,W){var $t,z=i[W],ft=i[W+1],gt=0,Et=0;if(1!==w.length||-1!==(Pt=It(w[0][0],w[0][1],z[0],z[1],ft[0],ft[1],r)).indexOf(1)){for(;gt<w.length-1;){var we=w[gt],ge=w[gt+1],Pt=It(we[0],we[1],z[0],z[1],ft[0],ft[1],r),_e=It(ge[0],ge[1],z[0],z[1],ft[0],ft[1],r);if(-1!==Pt.indexOf(1)&&-1!==_e.indexOf(1))Et=++gt;else if(-1!==Pt.indexOf(1)&&-1===_e.indexOf(1))(xe=ie(we[0],we[1],Pt,ge[0],ge[1],z[0],z[1],ft[0],ft[1],r))?(w[gt]=xe,Et=gt):gt++;else if(-1===Pt.indexOf(1)&&-1!==_e.indexOf(1)){var xe;(xe=ie(ge[0],ge[1],_e,we[0],we[1],z[0],z[1],ft[0],ft[1],r))?(($t=w.slice(Et,gt+1)).push(xe),o.push($t),Et=++gt):gt++}else{var Ce=yt(we[0],we[1],ge[0],ge[1],z[0],z[1],ft[0],ft[1],r);Ce?((($t=w.slice(Et,gt+1))[$t.length-1][0]!==Ce[0][0]||$t[$t.length-1][1]!==Ce[0][1])&&$t.push(Ce[0]),$t.length>1&&o.push($t),w[gt]=Ce[1],w[gt+1]&&w[gt+1][0]==Ce[1][0]&&w[gt+1][1]==Ce[1][1]&&gt++,Et=gt):gt++}}Et!==gt&&($t=w.slice(Et,w.length))&&o.push($t)}else o.push(w)};if(i=function F(K){var i=[];if(1===K.length)i=K;else{for(var r=0;r<K.length-1;)(K[r][0]!==K[r+1][0]||K[r][1]!==K[r+1][1])&&i.push(K[r]),r++;0!==K.length&&0===i.length&&i.push(K[0]),(K[K.length-1][0]!==K[i.length-1][0]||K[K.length-1][1]!==K[i.length-1][1])&&i.push(K[r])}return i}(i),1===i.length){for(var g=0;g<K.length;g++)n(K[g]);K=o}else for(var p=0;p<i.length-1;p++){for(g=0;g<K.length;g++)l(K[g],p);K=o,o=[]}for(var c=0;c<K.length;c++)for(var A=0;A<K[c].length;A++)K[c][A][0]=Math.round(K[c][A][0]),K[c][A][1]=Math.round(K[c][A][1]);return K})(_t.data.getNode(Et).size.points,A,2);console.log($t)})})(w)}}}}var at=m(6847);class J{constructor(){let i=(0,S.RY)(dt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l,source:g}=(0,at.L)(Math.ceil(1e9*Math.random())),p=(c,A,w,W)=>{l=(0,j.CE)(c,A,w,W),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,j.xW)(I.h.TEXT,l,n)),(0,S.tD)(o,n),(0,S.in)(i,l)};return{start:c=>{p(c.x,c.y,c.x+l.width,c.y+l.height)},move:(c,A)=>{p(A[0][0],A[0][1],c.x,c.y)},end:(c,A)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,j.xW)(I.h.TEXT,l,n)),(0,S.tD)(o,n)),_t.data.node=Object.assign({id:r,type:I.h.TEXT,name:"Text"},{size:l,attribute:n,source:g}),null==i||i.remove()}}}}var wt=m(4312),bt=m(2409),St=m(6078);var ot=m(3073);class pt{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>_t.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var r,o,n,l,g;null===(r=window.document.getElementById(dt.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(o=window.document.getElementById(dt.F.SELECT_GROUP))||void 0===o||o.remove(),null===(n=window.document.getElementById(dt.F.SCAN_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(dt.F.CREATE_GROUP))||void 0===l||l.remove(),null===(g=window.document.getElementById(dt.F.INTERACTIVE_GROUP))||void 0===g||g.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(p=>p(i))}deleteNode(){for(let i of this._selected_Ids){let r=_t.data.deleteNode(i);_t.history.push([{type:"delete",from:{id:r},to:{id:r}}])}_t.dataSelect.ids=[]}groupNode(){let i=[];if(_t.dataSelect.ids.length>=2){let r=_t.data.getNode(_t.dataSelect.ids[0]),{nodeId:o,attribute:n,size:l}=(0,ot.v)(Math.ceil(1e9*Math.random()),void 0,r.pid?window.document.getElementById(r.pid):null);_t.data.node=Object.assign({id:o,type:I.h.GROUP,name:"G"},{size:l,attribute:n});for(let g of _t.dataSelect.ids)i.push(_t.data.addGroup(g,o))}if(i.length){_t.dataSelect.ids=i;let r=_t.dataSelect.nodes;1==r.length?(0,b.K)(r[0]):r.length>1&&(0,y.E)(r)}}ungroupNode(){let i=[];for(let r of _t.dataSelect.ids)i.push(_t.data.unGroup(r));if(i.length){_t.dataSelect.ids=i;let r=_t.dataSelect.nodes;1==r.length?(0,b.K)(r[0]):r.length>1&&(0,y.E)(r)}}}var Ot=m(2837),Ut=m(8338);class Xt{createNodeImage(i,r){var o,n,l,g;let{nodeId:c,element:A,size:w,attribute:W,source:z}=(0,jt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,Ot.U)(i)}});(ft=>{if(!ft)return;let gt=new Image;gt.onload=()=>{let Et=(0,h.z)(gt.naturalWidth/gt.naturalHeight,100);Et>=1?(w.width=Math.min(gt.naturalWidth,512),w.height=(0,h.z)(w.width/Et,100)):(w.height=Math.min(gt.naturalHeight,512),w.width=(0,h.z)(w.height*Et,100)),w.x=(0,h.z)(w.x+50-w.width/2,100),w.y=(0,h.z)(w.y+50-w.height/2,100),Object.assign(W,(0,j.xW)(I.h.IMAGE,w,W)),(0,S.tD)(A,W),_t.data.node=Object.assign({id:c,type:I.h.IMAGE,name:"Image"},{size:w,attribute:W,source:z})},gt.onerror=Et=>{console.error(`ImgSrc load failed -> ${ft}`,Et),null==A||A.remove()},gt.src=ft})(null!==(l=null===(g=z.image)||void 0===g?void 0:g.url)&&void 0!==l?l:"")}createNodeIframe(i,r){var o,n;let{nodeId:g,element:p,size:c,attribute:A,style:w,source:W}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,Ot.U)(i)}});(z=>{let ft=(null===(z=_t.data.slide)||void 0===z||null===(z=z.svg)||void 0===z?void 0:z.viewBox)||{x:0,y:0,width:100,height:100},gt=(0,h.z)(ft.width/ft.height,100);gt>=1?(c.width=Math.min(ft.width,512),c.height=(0,h.z)(c.width/gt,100)):(c.height=Math.min(ft.height,512),c.width=(0,h.z)(c.height*gt,100)),c.x=(0,h.z)(c.x+50-c.width/2,100),c.y=(0,h.z)(c.y+50-c.height/2,100),Object.assign(A,(0,j.xW)(I.h.IMAGE,c,A)),(0,S.tD)(p,A),_t.data.node=Object.assign({id:g,type:I.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:A,style:w,source:W})})()}createNodeEmbed(i,r){var o,n;let l={x:50,y:50,width:640,height:360};i.type==Ut.S.AUDIO&&(l.width=480,l.height=80);let{nodeId:g,element:p,size:c,attribute:A,style:w,source:W}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:l.x)-l.x,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:l.y)-l.y,width:l.width,height:l.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,Ot.U)(i))}});(()=>{let z=(0,h.z)(l.width/l.height,100);z>=1?(c.width=Math.min(c.width,l.width),c.height=(0,h.z)(c.width/z,1)):(c.height=Math.min(c.height,l.height),c.width=(0,h.z)(c.height*z,1)),c.x=(0,h.z)(c.x+l.x-c.width/2,1),c.y=(0,h.z)(c.y+l.y-c.height/2,1),Object.assign(A,(0,j.xW)(I.h.FOREIGNOBJECT,c,A)),(0,S.tD)(p,A),_t.data.node=Object.assign({id:g,type:I.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:A,style:w,source:W})})()}createNodeMedia(i,r){var o,n,l,g;let{nodeId:c,element:A,size:w,attribute:W,source:z}=(0,jt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,Ot.U)(i.cover)}}),ft={click:{media:i.media}};(gt=>{if(!gt)return;let Et=new Image;Et.onload=()=>{let Pt=(0,h.z)(Et.naturalWidth/Et.naturalHeight,100);Pt>=1?(w.width=Math.min(Et.naturalWidth,512),w.height=(0,h.z)(w.width/Pt,100)):(w.height=Math.min(Et.naturalHeight,512),w.width=(0,h.z)(w.height*Pt,100)),w.x=(0,h.z)(w.x+50-w.width/2,100),w.y=(0,h.z)(w.y+50-w.height/2,100),Object.assign(W,(0,j.xW)(I.h.IMAGE,w,W)),(0,S.tD)(A,W),_t.data.node=Object.assign({id:c,type:I.h.IMAGE,name:"Image"},{size:w,attribute:W,source:z,interactive:ft})},Et.onerror=Pt=>{console.error(`ImgSrc load failed -> ${gt}`,Pt),null==A||A.remove()},Et.src=gt})(null!==(l=null===(g=z.image)||void 0===g?void 0:g.url)&&void 0!==l?l:"")}createNodeText(i,r){var o,n;let{nodeId:g,element:p,size:c,attribute:A,style:w,source:W}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:0)-0,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let z=(0,h.z)(4,100);z>=1?(c.width=Math.min(c.width,320),c.height=(0,h.z)(c.width/z,1)):(c.height=Math.min(c.height,80),c.width=(0,h.z)(c.height*z,1)),c.x=(0,h.z)(c.x+0-c.width/2,1),c.y=(0,h.z)(c.y+0-c.height/2,1),Object.assign(A,(0,j.xW)(I.h.FOREIGNOBJECT,c,A)),(0,S.tD)(p,A),_t.data.node=Object.assign({id:g,type:I.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:A,style:w,source:W})})()}insert(i){var r;if(_t.data.insertSlide(_t.data.slideId,1),i.title){let{nodeId:o,size:n,attribute:l,style:g,source:p}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});_t.data.node=Object.assign({id:o,type:I.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:g,source:p})}if(i.description){let{nodeId:o,size:n,attribute:l,style:g,source:p}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});_t.data.node=Object.assign({id:o,type:I.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:g,source:p})}null!==(r=i.media)&&void 0!==r&&r.prompt&&((()=>{let{nodeId:o,size:n,attribute:l}=(0,q.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});_t.data.node=Object.assign({id:o,type:I.h.RECT,name:"Rect"},{size:n,attribute:l})})(),(o=>{let{nodeId:n,size:l,attribute:g,style:p,source:c}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});_t.data.node=Object.assign({id:n,type:I.h.FOREIGNOBJECT,name:"ForeignObject"},{size:l,attribute:g,style:p,source:c})})())}}var Vt=m(1026);class se{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:_t.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let r=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,g)=>g==this._slideIdx),o=null==r?void 0:r.svg,n=l=>{let g=[];return l.filter(p=>!p.isdeleted).forEach(p=>{p.type==I.h.GROUP?g=g.concat(n(p.nodes||[])):g.push(p.id)}),g};return n((null==o?void 0:o.nodes)||[])}}get get(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(g=>g.type==I.h.GROUP).forEach(g=>{var p;g.nodes=r(null===(p=g.nodes)||void 0===p?void 0:p.filter(c=>!c.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(g=>{var p,c;return g.type!=I.h.GROUP||(null!==(p=null===(c=g.nodes)||void 0===c?void 0:c.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource}get getResource(){var i;let r=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n,l,g,p,c,A,w,W;r.push(null===(n=o.svg)||void 0===n||null===(n=n.background)||void 0===n?void 0:n.path),null===(l=o.svg)||void 0===l||l.nodes.forEach(z=>{var ft,gt,Et,Pt,$t,we,ge,_e,xe,Ce;r.push(null===(ft=z.source)||void 0===ft||null===(ft=ft.image)||void 0===ft?void 0:ft.path),r.push(null===(gt=z.source)||void 0===gt||null===(gt=gt.audio)||void 0===gt?void 0:gt.path),r.push(null===(Et=z.source)||void 0===Et||null===(Et=Et.video)||void 0===Et?void 0:Et.path),r.push(null===(Pt=z.source)||void 0===Pt||null===(Pt=Pt.file)||void 0===Pt?void 0:Pt.path),r.push(null===($t=z.source)||void 0===$t||null===($t=$t.iframe)||void 0===$t?void 0:$t.path),r.push(null===(we=z.source)||void 0===we||null===(we=we.track)||void 0===we?void 0:we.path),r.push(null===(ge=z.interactive)||void 0===ge||null===(ge=ge.show)||void 0===ge||null===(ge=ge.audio)||void 0===ge||null===(ge=ge.source)||void 0===ge?void 0:ge.path),r.push(null===(_e=z.interactive)||void 0===_e||null===(_e=_e.click)||void 0===_e||null===(_e=_e.audio)||void 0===_e||null===(_e=_e.source)||void 0===_e?void 0:_e.path),r.push(null===(xe=z.interactive)||void 0===xe||null===(xe=xe.click)||void 0===xe||null===(xe=xe.image)||void 0===xe||null===(xe=xe.source)||void 0===xe?void 0:xe.path),r.push(null===(Ce=z.interactive)||void 0===Ce||null===(Ce=Ce.click)||void 0===Ce||null===(Ce=Ce.video)||void 0===Ce||null===(Ce=Ce.source)||void 0===Ce?void 0:Ce.path)}),r.push(null===(g=o.test)||void 0===g||null===(g=g.audiotrue)||void 0===g?void 0:g.path),r.push(null===(p=o.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),r.push(null===(c=o.test)||void 0===c||null===(c=c.effecttrue)||void 0===c?void 0:c.path),r.push(null===(A=o.test)||void 0===A||null===(A=A.effectfalse)||void 0===A?void 0:A.path),r.push(null===(w=o.test)||void 0===w||null===(w=w.icontrue)||void 0===w?void 0:w.path),r.push(null===(W=o.test)||void 0===W||null===(W=W.iconfalse)||void 0===W?void 0:W.path)}),r.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,n,l)=>l.indexOf(o)==n)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,S.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(g=>g.type==I.h.GROUP).forEach(g=>{var p;g.nodes=r(null===(p=g.nodes)||void 0===p?void 0:p.filter(c=>!c.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(g=>{var p,c;return g.type!=I.h.GROUP||(null!==(p=null===(c=g.nodes)||void 0===c?void 0:c.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,S.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,r;return null!==(i=null===(r=this.slide)||void 0===r?void 0:r.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((r,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,r;this._slideIdx<(null!==(i=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,S.rN)(),(0,Vt.t)(this.slide)}openSlide(i,r){var o,n,l,g,p;if(i)for(let z=0,ft=null!==(c=null===(A=this._dataSource.slides)||void 0===A?void 0:A.length)&&void 0!==c?c:0;z<ft;z++){var c,A,w;if((null!==(w=this._dataSource.slides)&&void 0!==w?w:[])[z].id==i){this._slideIdx=z;break}}else if(r&&r>=0&&r<(null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==o?o:0))this._slideIdx=null!=r?r:0;else{var W;this._slideIdx=0,null!==(W=this._dataSource.slides)&&void 0!==W&&W.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,S.rN)(),null!==(l=this.slide)&&void 0!==l&&null!==(l=l.svg)&&void 0!==l&&l.viewBox&&(_t.screen.frameSize=this.slide.svg.viewBox),(0,Vt.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(g=null===(p=this._dataSource.slides)||void 0===p?void 0:p.length)&&void 0!==g?g:0,this.slide)}addSlide(){var i,r,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==r?r:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,r,o){var n,l,g,p,c;let A=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(W=>W.id==i);if(!o||!A||null!=A&&null!==(l=A.svg)&&void 0!==l&&l.nodes.filter(W=>!W.isdeleted).length)return this.insertSlide(i,r,o);let w=null!==(g=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(A))&&void 0!==g?g:0;null===(c=this._dataSource.slides)||void 0===c||c.splice(w,1,o),this._slideIdx=w,this.openSlide(void 0,this._slideIdx)}insertSlide(i,r,o){var n,l,g,p,c;let A=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(z=>z.id==i))&&void 0!==n?n:this._defaultSlide,w=(null!==(g=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(A))&&void 0!==g?g:0)+r;var W;o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(W=o.svg)&&void 0!==W&&W.viewBox||o.svg&&(o.svg.viewBox=_t.screen.frameSize)):o=this._defaultSlide,null===(c=this._dataSource.slides)||void 0===c||c.splice(w,0,o),this._slideIdx=w,this.openSlide(void 0,this._slideIdx)}copySlide(i){var r,o,n,l,g,p,c;let A=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(z=>z.id==i))&&void 0!==r?r:this._defaultSlide,w=(null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(A))&&void 0!==n?n:0)+1,W=Object.assign(JSON.parse(JSON.stringify(A)),{id:this.newSlideId,code:void 0,name:`${A.name} + (Copy)`});null===(g=this._dataSource.slides)||void 0===g||g.splice(w,0,W),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(c=this._dataSource.slides)||void 0===c?void 0:c.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,r){var o,n,l,g,p,c;let A=null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(W=>W.id==i))&&void 0!==o?o:this._defaultSlide,w=null!==(l=null===(g=this._dataSource.slides)||void 0===g?void 0:g.indexOf(A))&&void 0!==l?l:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(w+r,0,null===(c=this._dataSource.slides)||void 0===c?void 0:c.splice(w,1)[0])}deleteSlide(i){var r,o,n,l,g,p;let c=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(z=>z.id==i))&&void 0!==r?r:this._defaultSlide,A=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(c))&&void 0!==n?n:0;if(null===(g=this._dataSource.slides)||void 0===g||g.splice(A,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(A<this._slideIdx){var w,W;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(w=null===(W=this._dataSource.slides)||void 0===W?void 0:W.length)&&void 0!==w?w:0,this.slide)}else A==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var r,o,n,l,g;let p=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(A=>A.id==i))&&void 0!==r?r:this._defaultSlide,c=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(p))&&void 0!==n?n:0;if(p.isdeleted=!0,null!==(g=this._dataSource.slides)&&void 0!==g&&null!==(g=g.filter(A=>!A.isdeleted))&&void 0!==g&&g.length){let A=!0;for(;p.isdeleted;)A?c++:c--,this._dataSource.slides[c]?p=this._dataSource.slides[c]:A=!A;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,r,o,n){this._fnChangeSlides.forEach(l=>l(i,r,o,n))}set node(i){var r,o;let n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((l,g)=>g==this._slideIdx);null!=n&&null!==(o=n.svg)&&void 0!==o&&o.nodes&&n.svg.nodes.push(i),_t.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Vt.t)(n),(0,Vt.t)(n,null==n?void 0:n.id)}findNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((z,ft)=>ft==this._slideIdx),n=null==o?void 0:o.svg,l=(z,ft)=>{let gt=null==z?void 0:z.find($t=>$t.id==i);if(gt)return gt.pid=ft,gt;let Et=0,Pt=z.length||0;for(;Et<Pt&&!gt&&(gt=l(z[Et].nodes||[],z[Et].id),!gt);)Et++;return gt},g=l((null==n?void 0:n.nodes)||[]);var p,c,A,w,W;return g?(g.style=null!==(p=g.style)&&void 0!==p?p:{},g.source=null!==(c=g.source)&&void 0!==c?c:{},g.animate=null!==(A=g.animate)&&void 0!==A?A:{},g.interactive=null!==(w=g.interactive)&&void 0!==w?w:{},g.variable=null!==(W=g.variable)&&void 0!==W?W:{},g):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((p,c)=>c==this._slideIdx),n=null==o?void 0:o.svg,g=p=>{let c=(null==p?void 0:p.find(gt=>gt.id==i))||(p=>{let c=null,A=0,w=p.length||0;for(;A<w&&!c;){if(c=g(p[A].nodes),c){c.pid=p[A].id;break}A++}var W,z,ft,gt,Et;return c&&(c.style=null!==(W=c.style)&&void 0!==W?W:{},c.source=null!==(z=c.source)&&void 0!==z?z:{},c.animate=null!==(ft=c.animate)&&void 0!==ft?ft:{},c.interactive=null!==(gt=c.interactive)&&void 0!==gt?gt:{},c.variable=null!==(Et=c.variable)&&void 0!==Et?Et:{}),c})((null==p?void 0:p.filter(gt=>gt.type==I.h.GROUP))||[]);var A,w,W,z,ft;return c&&(c.style=null!==(A=c.style)&&void 0!==A?A:{},c.source=null!==(w=c.source)&&void 0!==w?w:{},c.animate=null!==(W=c.animate)&&void 0!==W?W:{},c.interactive=null!==(z=c.interactive)&&void 0!==z?z:{},c.variable=null!==(ft=c.variable)&&void 0!==ft?ft:{}),c};return g((null==n?void 0:n.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,r,o,n,l){var g;let p=null===(g=this._dataSource.slides)||void 0===g?void 0:g.find((w,W)=>W==this._slideIdx),c=null==p?void 0:p.svg,A=w=>{let W=[];return w.filter(z=>!z.isdeleted).forEach(z=>{z.type==I.h.GROUP?W=W.concat(A(z.nodes||[])):i>z.size.x||r>z.size.y||o<z.size.x+z.size.width||n<z.size.y+z.size.height||(l?z.type==l&&W.push(z.id):W.push(z.id))}),W};return A((null==c?void 0:c.nodes)||[])}getNodeOnArea(i,r,o,n,l){var g;let p=null===(g=this._dataSource.slides)||void 0===g?void 0:g.find((w,W)=>W==this._slideIdx),c=null==p?void 0:p.svg,A=w=>{let W=[];return w.filter(z=>!z.isdeleted).forEach(z=>{z.type==I.h.GROUP?W=W.concat(A(z.nodes||[])):z.size.x+z.size.width<i||z.size.y+z.size.height<r||z.size.x>o||z.size.y>n||(l?z.type==l&&W.push(z.id):W.push(z.id))}),W};return A((null==c?void 0:c.nodes)||[])}deleteNode(i,r){var o;return this.getNode(i).isdeleted=null==r||r,(0,Vt.t)(this.slide),(0,Vt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var r,o;let n=this.getNode(i),l=Math.ceil(1e9*Math.random());return null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:l})),Object.assign(n,{isdeleted:!0}),(0,Vt.t)(this.slide),(0,Vt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),l}addGroup(i,r){var o;let n=this.getNode(i),l=this.getNode(r);l.nodes=l.nodes||[];let g=Math.ceil(1e9*Math.random());return l.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:g})),Object.assign(n,{isdeleted:!0}),(0,Vt.t)(this.slide),(0,Vt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),g}setNodeP(i,r){var o;let n=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(l=>l.id==i);n&&(n.pid=r||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,r){var o,n,l,g;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((w,W)=>{w.index=W+1});let p=(null!==(n=null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l?void 0:l.nodes.length)&&void 0!==n?n:0)+1;var c,A;i.map(w=>{var W,z;return{id:w,index:null!==(W=null===(z=this.slide)||void 0===z||null===(z=z.svg)||void 0===z||null===(z=z.nodes.find(ft=>ft.id==w))||void 0===z?void 0:z.index)&&void 0!==W?W:0}}).sort((w,W)=>w.index-W.index).forEach(w=>{var z,W;r?null===(z=this.slide)||void 0===z||null===(z=z.svg)||void 0===z||z.nodes.filter((ft,gt)=>ft.id==w.id).forEach(ft=>{ft.index=r+w.index+w.index/1e3}):null===(W=this.slide)||void 0===W||null===(W=W.svg)||void 0===W||W.nodes.filter(ft=>ft.id==w.id).forEach(ft=>{ft.index=p+w.index})}),null===(g=this.slide)||void 0===g||null===(g=g.svg)||void 0===g||g.nodes.sort((w,W)=>{var z,ft;return(null!==(z=w.index)&&void 0!==z?z:0)-(null!==(ft=W.index)&&void 0!==ft?ft:0)}),(0,Vt.$)(this.slide),i.length<=1?(null===(c=window.document.getElementById(dt.F.RESIZE_GROUP))||void 0===c||c.remove(),(0,b.K)(_t.dataSelect.nodes[0])):(null===(A=window.document.getElementById(dt.F.SELECT_GROUP))||void 0===A||A.remove(),(0,y.E)(_t.dataSelect.nodes))}sendToBackStep(i,r){var o,n,l,g;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((p,c)=>{p.index=c+1}),i.map(p=>{var c,A;return{id:p,index:null!==(c=null===(A=this.slide)||void 0===A||null===(A=A.svg)||void 0===A||null===(A=A.nodes.find(w=>w.id==p))||void 0===A?void 0:A.index)&&void 0!==c?c:0}}).sort((p,c)=>p.index-c.index).forEach(p=>{var A,c;r?null===(A=this.slide)||void 0===A||null===(A=A.svg)||void 0===A||A.nodes.filter(w=>w.id==p.id).forEach(w=>{w.index=r+p.index+p.index/1e3}):null===(c=this.slide)||void 0===c||null===(c=c.svg)||void 0===c||c.nodes.filter(w=>w.id==p.id).forEach(w=>{w.index=p.index/100-1})}),null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.sort((p,c)=>{var A,w;return(null!==(A=p.index)&&void 0!==A?A:0)-(null!==(w=c.index)&&void 0!==w?w:0)}),(0,Vt.$)(this.slide),i.length<=1?(null===(l=window.document.getElementById(dt.F.RESIZE_GROUP))||void 0===l||l.remove(),(0,b.K)(_t.dataSelect.nodes[0])):(null===(g=window.document.getElementById(dt.F.SELECT_GROUP))||void 0===g||g.remove(),(0,y.E)(_t.dataSelect.nodes))}bringToFrontArea(i){var r,o;let n=i.map(gt=>_t.data.getNode(gt)).filter(gt=>!gt.isfake),{x1:l,y1:g,x2:p,y2:c}=ne(n),A=this.getNodeOnArea(l,g,p,c);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((gt,Et)=>{gt.index=Et+1});let w=A.map(gt=>{var Et,Pt;return null!==(Et=null===(Pt=this.slide)||void 0===Pt||null===(Pt=Pt.svg)||void 0===Pt||null===(Pt=Pt.nodes.find($t=>$t.id==gt))||void 0===Pt?void 0:Pt.index)&&void 0!==Et?Et:0}),W=Math.max.apply(null,w);var z,ft;i.forEach((gt,Et)=>{var Pt;null===(Pt=this.slide)||void 0===Pt||null===(Pt=Pt.svg)||void 0===Pt||Pt.nodes.filter($t=>$t.id==gt).forEach($t=>{$t.index=W+(Et+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((gt,Et)=>{var Pt,$t;return(null!==(Pt=gt.index)&&void 0!==Pt?Pt:0)-(null!==($t=Et.index)&&void 0!==$t?$t:0)}),(0,Vt.$)(this.slide),i.length<=1?(null===(z=window.document.getElementById(dt.F.RESIZE_GROUP))||void 0===z||z.remove(),(0,b.K)(_t.dataSelect.nodes[0])):(null===(ft=window.document.getElementById(dt.F.SELECT_GROUP))||void 0===ft||ft.remove(),(0,y.E)(_t.dataSelect.nodes))}sendToBackArea(i){var r,o;let n=i.map(gt=>_t.data.getNode(gt)).filter(gt=>!gt.isfake),{x1:l,y1:g,x2:p,y2:c}=ne(n),A=this.getNodeOnArea(l,g,p,c);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((gt,Et)=>{gt.index=Et+1});let w=A.map(gt=>{var Et,Pt;return null!==(Et=null===(Pt=this.slide)||void 0===Pt||null===(Pt=Pt.svg)||void 0===Pt||null===(Pt=Pt.nodes.find($t=>$t.id==gt))||void 0===Pt?void 0:Pt.index)&&void 0!==Et?Et:0}),W=Math.min.apply(null,w)-1;var z,ft;i.forEach((gt,Et)=>{var Pt;null===(Pt=this.slide)||void 0===Pt||null===(Pt=Pt.svg)||void 0===Pt||Pt.nodes.filter($t=>$t.id==gt).forEach($t=>{$t.index=W+(Et+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((gt,Et)=>{var Pt,$t;return(null!==(Pt=gt.index)&&void 0!==Pt?Pt:0)-(null!==($t=Et.index)&&void 0!==$t?$t:0)}),(0,Vt.$)(this.slide),i.length<=1?(null===(z=window.document.getElementById(dt.F.RESIZE_GROUP))||void 0===z||z.remove(),(0,b.K)(_t.dataSelect.nodes[0])):(null===(ft=window.document.getElementById(dt.F.SELECT_GROUP))||void 0===ft||ft.remove(),(0,y.E)(_t.dataSelect.nodes))}}const ne=K=>{let i=999999,r=999999,o=-999999,n=-999999;return K.forEach(l=>{i=Math.min(i,l.size.x),r=Math.min(r,l.size.y),o=Math.max(o,l.size.x+l.size.width),n=Math.max(n,l.size.y+l.size.height)}),{x1:i,y1:r,x2:o,y2:n}};class ae{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":_t.data.deleteNode(r.from.id);break;case"edit":break;case"delete":_t.data.deleteNode(r.from.id,!1);break;case"size":{let{id:o,type:n,size:l,attribute:g}=_t.data.getNode(r.from.id);Object.assign(l,r.from.size),Object.assign(g,(0,j.xW)(n,l,g)),(0,S.tD)(window.document.getElementById(o),g);break}case"attribute":{let{id:o,attribute:n}=_t.data.getNode(r.from.id);Object.assign(n,r.from.attribute),(0,S.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=_t.data.getNode(r.from.id);Object.assign(null!=n?n:{},r.from.style),(0,S.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=_t.data.getNode(r.from.id);Object.assign(null!=l?l:{},r.from.source),(0,S.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=_t.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.animate);break}case"interactive":{let{interactive:o}=_t.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.interactive);break}case"variable":{let{variable:o}=_t.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.variable);break}}}),_t.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":_t.data.deleteNode(r.to.id,!1);break;case"edit":break;case"delete":_t.data.deleteNode(r.to.id,!0);break;case"size":{let{id:o,type:n,size:l,attribute:g}=_t.data.getNode(r.to.id);Object.assign(l,r.to.size),Object.assign(g,(0,j.xW)(n,l,g)),(0,S.tD)(window.document.getElementById(o),g);break}case"attribute":{let{id:o,attribute:n}=_t.data.getNode(r.to.id);Object.assign(n,r.to.attribute),(0,S.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=_t.data.getNode(r.to.id);Object.assign(null!=n?n:{},r.to.style),(0,S.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=_t.data.getNode(r.to.id);Object.assign(null!=l?l:{},r.to.source),(0,S.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=_t.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.animate);break}case"interactive":{let{interactive:o}=_t.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.interactive);break}case"variable":{let{variable:o}=_t.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.variable);break}}}),_t.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class pe{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var r,o;this._frameSize.width=null!==(r=null==i?void 0:i.width)&&void 0!==r?r:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,r,o){var n;if(!(i<.01||i>100)){if(r=null!==(n=r)&&void 0!==n?n:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-r.x,this._dislocation.y=this._height/i/2-r.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var l={x:Math.max(0,Math.min((0,h.z)(r.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,h.z)(r.y/this._height,1e3),1))},g={x:(this._width/i-this._width/this._scale)*l.x,y:(this._height/i-this._height/this._scale)*l.y};this._dislocation.x+=g.x,this._dislocation.y+=g.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,r){this._dislocation.x=i.x+r.x/this._scale,this._dislocation.y=i.y+r.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,S.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(r=>r(i))}}var Ae=m(6195);class ke{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,Ae.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,Ae._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(r=>r(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(r=>r(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(r=>r(i)),this.saveConfig()}}var me=m(5619),Oe=m(334),Te=m(3591),be=function(K){return K&&JSON.parse(JSON.stringify(K))},Ue=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],He=[],$e={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},Xe={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class Ye{constructor(){this._data_variables=be(Ue).concat(be(He)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(r=>{r(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(r=>{r(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var r of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))r.if&&r.if.length>0&&(this.checkValueConditions(r.if)?this.setValueOperators(r.then||[]):this.setValueOperators(r.else||[]))}}renew(){this._data_variables=be(Ue).concat(be(He)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let r={};"string"==typeof i?r=JSON.parse(i):"object"==typeof i&&(r=i),this._data_variables=r.variables||[],this._data_conditions=r.conditions||(o=>(this._data_variables.map(n=>n.change||[]).forEach(n=>{o=o.concat(n)}),o))([]),Ue.forEach(o=>{var n=this._data_variables.filter(l=>l.key==o.key);n.length?n.forEach(function(l,g,p){l.type=o.type,l.readonly=o.readonly,l.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return be($e)}getConditionTemp(){return be(Xe)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,r){return i.localeCompare(r)})}getVariableAll(){return this._data_variables.length?be((K=this._data_variables,i="key",function(r){for(var o of K.map(function(n){return n[i]}).sort())K.filter(function(n){return n[i]==o}).forEach(function(n){r.push(n)}),K=K.filter(function(n){return n[i]!=o});return r}([]))):be(Ue).concat(be(He));var K,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Ue.forEach(r=>{var o=this._data_variables.filter(n=>n.key==r.key);o.length?o.forEach((n,l,g)=>{n.type=r.type,n.readonly=r.readonly,n.system=r.system}):this._data_variables.push(r)}))}getVariable(i){return i?be(this._data_variables.filter(r=>r.key==i)[0]||{}):{}}setVariable(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(l=>l.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(l=>l.key==i);n.length?n.forEach(function(l,g,p){l.value=r,l.type=o}):this._data_variables.push({key:i,value:r,type:o})}}getValue(i,r){if(!i)return"";var o=this._data_variables.filter(function(g){return g.key==i});if(o.length){var l,n=o[0]||{};switch(this.OnGetActionExecuting(n),r||(r=n.type||null),r){case"string":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":"string"==typeof n.value?n.value||"":n.value.toString().trim();break;case"number":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?0:"number"==typeof n.value?n.value||0:parseFloat(n.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(n.value)>=0?l=!1:"boolean"==typeof n.value?l=n.value:(l=(n.value+"").toLowerCase(),l="1"==n.value||"true"==n.value||"yes"==n.value||"dung"==n.value);break;case"audio-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></audio>`:"";break;case"video-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></video>`:"";break;case"img-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<img style="width:100%;vertical-align:middle;" src="${n.value}"/>`:"";break;default:l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value}return this.OnGetActionExecuted(n),l}return null}setValue(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(function(g){return g.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(function(g){return g.key==i});if(n.length){var l=n[0];this.OnSetActionExecuting(l),l&&(l.value=r),this.OnSetActionExecuted(l)}}}getConditionAll(){return be(this._data_conditions.sort(function(i,r){return i.idx-r.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?be(this._data_conditions.filter(r=>r.variable==i||(r.variables||[]).indexOf(i)>=0).sort(function(r,o){return r.idx-o.idx})):{}}switchCondition(i,r,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})>0):r==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),0==o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})):r!=o;case">=":return r>=o;case"<=":return r<=o;case">":return r>o;case"<":return r<o;case"\u2208":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),0==o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l});default:return!1}}switchOperator(i,r,o){switch(i){case"+":return r+o;case"-":return r-o;case"*":return r*o;case"/":return r/o;case"=":return o;case"=!":return!o;case"==":return r==o;case"!=":return r!=o}}switchFormula(i,r){switch(i){case"sum":return r.reduce(function(n,l){return n+l});case"sub":return r.reduce(function(n,l){return n-l});case"pro":return r.reduce(function(n,l){return n*l});case"div":return r.reduce(function(n,l){return n/l});case"avg":var o=r.reduce(function(n,l){return n+l})/(r.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,r);case"max":return Math.max.apply(null,r);case"and":return r.reduce(function(n,l){return n&&l});case"or":return r.reduce(function(n,l){return n||l});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var r=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),r)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(r=>{switch(r.type){case"variable":return this.switchValueType_Condition(r)?0:1;case"variables":return 0==r.variables.map(o=>this.switchValueType_Condition(Object.assign(be(r),{variable:o}))?0:1).reduce(function(o,n){return o+n})?0:1;default:return 0}}).reduce((r,o)=>(null!=r?r:0)+(null!=o?o:0))}setValueOperators(i){for(var r of i)switch(r.type){case"variable":this.setValue(r.variable,this.getValueOperator(r));break;case"variables":for(var o of r.variables)this.setValue(o,this.getValueOperator(Object.assign(be(r),{variable:o})));break;case"slide":me.J.runSlide(void 0,void 0,r.slide);break;case"node":{var n;(0,Te.GD)({id:r.node,nodeStatus:me.J.nodeStatus,slideStatus:me.J.slideStatus});let l=me.J.findNode(r.node);null!=l&&null!==(n=l.interactive)&&void 0!==n&&n.click&&(0,Oe.J)(l,me.J.nodeStatus,me.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(r=>{r(i)})}}class ti{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,r,o){if(this._pointer_type=i,r)switch(i){case L.P.PEN:this._pen_type=r;break;case L.P.SHAPE:this._shape_type=r,o&&r===I.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case L.P.PEN:this._pen_type||(this._pen_type=bt.F.DRAW);break;case L.P.SHAPE:this._shape_type||(this._shape_type=I.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,r,o){this._fnChangePointerTypes.forEach(n=>n(i,r,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,r,o){this._fnChangePointerTypeTemps.forEach(n=>n(i,r,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,r,o){this._fnChangePenTypes.forEach(n=>n(i,r,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,r,o){this._fnChangeShapeTypes.forEach(n=>n(i,r,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,r,o){this._fnChangePolygonTypes.forEach(n=>n(i,r,o))}set onchange(i){this._fnChanges.push(i)}change(i,r,o){this._fnChanges.forEach(n=>n(i,r,o))}}const _t=new class hi{constructor(){this._container="",this._svg="",this._screen=pe.prototype,this._data=se.prototype,this._dataSelect=pt.prototype,this._slide=Xt.prototype,this._history=ae.prototype,this._attribute=ke.prototype,this._pointer=ti.prototype,this._variable=Ye.prototype,this._data=new se,this._dataSelect=new pt,this._slide=new Xt,this._history=new ae,this._attribute=new ke,this._pointer=new ti,this._variable=new Ye,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,r,o,n,l;this._screen.screen=(i=jQuery(this._container).offset(),r=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(n=null==i?void 0:i.left)&&void 0!==n?n:0,y:null!==(l=null==i?void 0:i.top)&&void 0!==l?l:0},width:null!=r?r:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new pe,(K=>{new S.cR(K.container,K.target);var i=(n,l,g,p)=>{switch(n){case L.P.POINTER:jQuery(K.target).css({cursor:"auto"});break;case L.P.HAND:p?jQuery(K.target).css({cursor:"grabbing"}):jQuery(K.target).css({cursor:"grab"});break;case L.P.PEN:switch(l){case bt.F.DRAW:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case bt.F.HIGHTLIGH:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case L.P.ERASER:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case L.P.SHAPE:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case L.P.TEXT:case L.P.FOREIGNOBJECT:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};_t.pointer.onchange=(n,l,g)=>{i(n,l)},jQuery(K.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",n=>{i(_t.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",n=>{i(_t.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",n=>{n.ctrlKey&&n.preventDefault()},{passive:!1}),jQuery(K.container).off("wheel.icdt-init").on("wheel.icdt-init",n=>{var l;n.preventDefault();let g=null!==(l=n.originalEvent)&&void 0!==l?l:n;if(!g.deltaX&&g.deltaY!=Math.floor(g.deltaY)||g.ctrlKey){var p=_t.screen.scale;_t.screen.scaleTo(p-.04*p*(g.deltaY>0?1:-1),(0,St.D)({x:n.clientX,y:n.clientY},1,{x:0,y:0},_t.screen.offset))}else _t.screen.move(_t.screen.dislocation,{x:-g.deltaX,y:-g.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{_t.screen.actived=!!jQuery(n.target).parents(_t.container).length}),jQuery(K.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",n=>{_t.screen.actived=!0}),jQuery(K.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",n=>{_t.screen.actived=!1,_t.pointer.pointer_type_temp==L.P.HAND&&(_t.pointer.pointer_type_temp=L.P.POINTER)}),jQuery(K.container).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{0==n.button&&(K.container.includes("#")&&K.container.includes(n.target.getAttribute("id"))||K.container.includes(".")&&K.container.includes(n.target.getAttribute("class"))||K.container.includes(n.target.nodeName))&&(_t.pointer.pointer_type_temp||_t.pointer.pointer_type)===L.P.POINTER&&(_t.dataSelect.ids=[])}),jQuery(K.container).off("touchmove.icdt-init").on("touchmove.icdt-init",n=>{n.preventDefault()});const r=n=>{switch(_t.pointer.pointer_type_temp||_t.pointer.pointer_type){case L.P.POINTER:f(n);break;case L.P.HAND:(K=>{(0,mt.I)(K,new M,1,{x:0,y:0})})(n);break;case L.P.PEN:(0,Qt.u)(n);break;case L.P.SHAPE:(K=>{var i=null;switch(_t.pointer.shape_type){case I.h.CIRCLE:i=new B;break;case I.h.ELLIPSE:i=new V;break;case I.h.LINE:i=new Jt;break;case I.h.RECT:i=new X;break;case I.h.POLYGON:var r;i=new lt(null===(r=x.find(o=>o.type==_t.pointer.polygon_type))||void 0===r?void 0:r.ratios);break;case I.h.FOREIGNOBJECT:i=new xt;break;case I.h.IMAGE:i=new Y;break;case I.h.TEXT:case I.h.PATH:i=new Dt}i&&(0,mt.I)(K,i)})(n);break;case L.P.FOREIGNOBJECT:(K=>{(0,mt.I)(K,new xt)})(n);break;case L.P.IMAGE:(K=>{(0,mt.I)(K,new Y)})(n);break;case L.P.TEXT:(K=>{(0,mt.I)(K,new J)})(n);break;case L.P.ERASER:(K=>{(0,mt.I)(K,new U)})(n);break;case L.P.INDEX:(0,wt.h)(n)}};let o=!1;jQuery(K.target).off("touchstart.icdt-init").on("touchstart.icdt-init",n=>{o=!0,r({touchEvent:n})}),jQuery(K.target).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{if(1!=n.button){if(o)return void(o=!1);r({mouseEvent:n})}}),K.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",n=>{_t.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Lt.K)(n))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",n=>{_t.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Lt.K)(n))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(he,Nt,m)=>{m.d(Nt,{h:()=>D,y:()=>f});var L=m(7873),S=m(7102),dt=m(9506),j=m(1308),mt=m(5970);const D=N=>{var M,I,et,x;let k=(null===(M=N.mouseEvent)||void 0===M?void 0:M.target)||(null===(I=N.touchEvent)||void 0===I?void 0:I.target),h=(null==k?void 0:k.getAttribute("id"))||"",B=null==k?void 0:k.nodeName,P=jQuery(k).parents("g[id]").attr("id")||"";if(![L.F.INDEX_GROUP].includes(P))if(null!==(et=N.mouseEvent)&&void 0!==et&&et.altKey||null!==(x=N.touchEvent)&&void 0!==x&&x.altKey||!h||h.match(/[^0-9]/)||!S.L.dataSelect.nodeName.includes(B)){var V;S.L.dataSelect.ids.length&&(S.L.dataSelect.ids=[]),(0==(null===(V=N.mouseEvent)||void 0===V?void 0:V.button)||N.touchEvent)&&((N,M)=>{let h=(0,mt.RY)(L.F.SCAN_GROUP,"g"),B=(0,dt.CE)(0,0,1,1);(0,mt.xJ)(h,B),((N,M,I,et)=>{(0,j.I)(N,{start:h=>{},move:(h,B)=>{((h,B,P,V)=>{M=(0,dt.CE)(h,B,P,V),(0,mt.xJ)(I,M)})(B[0][0],B[0][1],h.x,h.y)},end:(h,B)=>{null==I||I.remove(),S.L.dataSelect.ids=S.L.data.getNodeInArea(Math.min(B[0][0],h.x),Math.min(B[0][1],h.y),Math.max(B[0][0],h.x),Math.max(B[0][1],h.y)),et(S.L.dataSelect.nodes)}})})(N,B,h,M)})(N,R)}else{var q,X;let Z=parseFloat(h||"0");S.L.dataSelect.ids=null!==(q=N.mouseEvent)&&void 0!==q&&q.shiftKey||null!==(X=N.touchEvent)&&void 0!==X&&X.shiftKey?[Z].concat(S.L.dataSelect.ids).filter((tt,Jt,qt)=>qt.indexOf(tt)==Jt):[Z],R(S.L.dataSelect.nodes)}},R=N=>{var M,I;let et=1;var x,k;if(N.length&&(et=Math.max.apply(null,null!==(x=null===(k=S.L.data.slide)||void 0===k||null===(k=k.svg)||void 0===k?void 0:k.nodes.map(B=>{var P;return null!==(P=B.idx)&&void 0!==P?P:0}))&&void 0!==x?x:[0])+1),1==N.length)N[0].idx||(N[0].idx=et,N[0].time=0);else if(N.length>=0){let B=N.map(V=>{var q;return null!==(q=V.idx)&&void 0!==q?q:0}).filter(V=>V>0),P=B.length?Math.min.apply(null,B):et;N.forEach(V=>{var q;V.idx=P,V.time=null!==(q=V.time)&&void 0!==q?q:0})}let h=(0,mt.RY)(L.F.INDEX_GROUP,"g");(0,mt.IA)(h,null!==(M=null===(I=S.L.data.slide)||void 0===I||null===(I=I.svg)||void 0===I?void 0:I.nodes)&&void 0!==M?M:[])},f=N=>{var M,I,et;null!=N&&null!==(M=N.svg)&&void 0!==M&&M.nodes&&N.svg.nodes.forEach(k=>{k.idx=0,k.time=null});let x=(0,mt.RY)(L.F.INDEX_GROUP,"g");(0,mt.IA)(x,null!==(I=null===(et=S.L.data.slide)||void 0===et||null===(et=et.svg)||void 0===et?void 0:et.nodes)&&void 0!==I?I:[])}},7135:(he,Nt,m)=>{m.d(Nt,{K:()=>I,X:()=>M});var L=m(6195),S=m(1477),dt=m(3603),j=m(7102),mt=m(6037),b=m(4333),y=m(1026),D=m(9841),R=m(2492),f=m(6752);const M=new class N{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:S.r.Escape,fn:()=>{j.L.dataSelect.ids.length&&(j.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:S.r.Delete,fn:()=>{j.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:S.r.Space,fn:()=>{j.L.pointer.pointer_type_temp=dt.P.HAND}},this.onchange={type:"keyup",key:S.r.Space,fn:()=>{j.L.pointer.pointer_type_temp=dt.P.POINTER}},this.onchange={type:"keydown",key:S.r.ArrowLeft,fn:()=>{j.L.dataSelect.ids.length||j.L.data.backSlide()}},this.onchange={type:"keydown",key:S.r.ArrowRight,fn:()=>{j.L.dataSelect.ids.length||j.L.data.nextSlide()}},this.onchange={type:"keydown",key:S.r.ArrowLeft,fn:()=>{j.L.dataSelect.ids.length&&(j.L.dataSelect.nodes.forEach(x=>{(0,f.ei)(x,(0,R.z)(x.size.x-(0,D.$)(1)))}),1==j.L.dataSelect.ids.length?(0,mt.K)(j.L.dataSelect.nodes[0]):(0,b.E)(j.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:S.r.ArrowRight,fn:()=>{j.L.dataSelect.ids.length&&(j.L.dataSelect.nodes.forEach(x=>{(0,f.ei)(x,(0,R.z)(x.size.x+(0,D.$)(1)))}),1==j.L.dataSelect.ids.length?(0,mt.K)(j.L.dataSelect.nodes[0]):(0,b.E)(j.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:S.r.ArrowUp,fn:()=>{j.L.dataSelect.ids.length&&(j.L.dataSelect.nodes.forEach(x=>{(0,f.ZF)(x,(0,R.z)(x.size.y-(0,D.$)(1)))}),1==j.L.dataSelect.ids.length?(0,mt.K)(j.L.dataSelect.nodes[0]):(0,b.E)(j.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:S.r.ArrowDown,fn:()=>{j.L.dataSelect.ids.length&&(j.L.dataSelect.nodes.forEach(x=>{(0,f.ZF)(x,(0,R.z)(x.size.y+(0,D.$)(1)))}),1==j.L.dataSelect.ids.length?(0,mt.K)(j.L.dataSelect.nodes[0]):(0,b.E)(j.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:S.r.Digit1,fn:x=>{x.shiftKey&&(j.L.reloadView(),j.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:S.r.KeyA,fn:x=>{if(x.ctrlKey){j.L.dataSelect.ids=j.L.data.getNodeAll();let k=j.L.dataSelect.nodes;1==k.length?(0,mt.K)(k[0]):k.length>1&&(0,b.E)(k)}}},this.onchange={type:"keydown",key:S.r.KeyC,fn:x=>{if(x.ctrlKey){let k=j.L.dataSelect.nodes;k&&(0,L.IB)({params:{type:"nodes",nodes:k}})}}},this.onchange={type:"keydown",key:S.r.KeyV,fn:x=>{x.ctrlKey&&(0,L.A9)({callback:k=>{var h,B;"nodes"==(null==k?void 0:k.type)&&null!=k&&null!==(h=k.nodes)&&void 0!==h&&h.length&&(null==k||null===(B=k.nodes)||void 0===B||B.forEach(P=>{x.shiftKey||j.L.data.findNode(P.id).id&&(P.size.x+=16,P.size.y+=16),P.id=Math.ceil(1e9*Math.random()),j.L.data.node=P}),(0,y.t)(j.L.data.slide))}})}},this.onchange={type:"keydown",key:S.r.KeyZ,fn:x=>{x.ctrlKey&&x.shiftKey?j.L.history.redo():x.ctrlKey&&j.L.history.undo()}},this.onchange={type:"keydown",key:S.r.BracketLeft,fn:x=>{x.ctrlKey&&x.shiftKey?j.L.data.sendToBack(j.L.dataSelect.ids):x.ctrlKey?j.L.data.sendToBackStep(j.L.dataSelect.ids,-2):j.L.data.sendToBackArea(j.L.dataSelect.ids)}},this.onchange={type:"keydown",key:S.r.BracketRight,fn:x=>{x.ctrlKey&&x.shiftKey?j.L.data.bringToFront(j.L.dataSelect.ids):x.ctrlKey?j.L.data.bringToFrontStep(j.L.dataSelect.ids,1):j.L.data.bringToFrontArea(j.L.dataSelect.ids)}}}set onchange(x){let k=this._fnChanges.find(h=>h.eventType==x.type&&h.eventKey==x.key);k?k.fns.push(x.fn):this._fnChanges.push({eventType:x.type,eventKey:x.key,fns:[x.fn]})}change(x,k,h){var B;null===(B=this._fnChanges.find(P=>P.eventType==x&&P.eventKey==k))||void 0===B||B.fns.forEach(P=>P(h))}},I=et=>{M.change(et.type,et.keyCode||et.which||et.charCode||0,et)}},669:(he,Nt,m)=>{m.d(Nt,{O:()=>D});var L=m(6407),S=m(5970),dt=m(1131),j=m(9841),mt=m(7873),b=m(7102),y=m(1281);class D{constructor(f,N){var M,I;let et={stroke:"#FF0000",strokeWidth:(0,j.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,j.$)(8)},{element:x}=(0,L.X)(Math.ceil(1e9*Math.random()),{size:N});window.document.getElementById(mt.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(X=>null==X?void 0:X.remove()),window.document.getElementById(mt.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(X=>null==X?void 0:X.remove()),null===(M=window.document.getElementById(mt.F.INTERACTIVE_GROUP))||void 0===M||M.appendChild(x);var B=X=>{if(!X.length)return;let Z=[];if(1==X.length){var lt;let{size:tt}=null!==(lt=null!=f?f:b.L.dataSelect.nodes[0])&&void 0!==lt?lt:{};if(!tt)return;Z=[[tt.x+tt.width/2,tt.y+tt.height/2],X[0]]}else Z=[...X];V(Z),P(Z[0],"start"),P(Z[Z.length-1],"end")},P=(X,Z)=>{X&&((lt=>{let{element:tt}=(0,y.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==Z?"#FF0000":"#00BA00",strokeWidth:(0,j.$)(1)},size:{x:X[0]-5,y:X[1]-5,width:10,height:10}});null===(lt=window.document.getElementById(mt.F.INTERACTIVE_GROUP))||void 0===lt||lt.prepend(tt)})(),((lt,tt)=>{let{size:Jt}=null!==(lt=null!=f?f:b.L.dataSelect.nodes[0])&&void 0!==lt?lt:{};if(!Jt)return;let qt=[[X[0]-Jt.width/2,X[1]-Jt.height/2],[X[0]+Jt.width/2,X[1]-Jt.height/2],[X[0]+Jt.width/2,X[1]+Jt.height/2],[X[0]-Jt.width/2,X[1]+Jt.height/2],[X[0]-Jt.width/2,X[1]-Jt.height/2]],{element:Mt}=(0,L.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,j.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,j.$)(8)},size:{x:0,y:0,width:10,height:10,points:qt}});null===(tt=window.document.getElementById(mt.F.INTERACTIVE_GROUP))||void 0===tt||tt.prepend(Mt)})())},V=X=>{let lt=dt.n8j().x(tt=>tt[0]).y(tt=>tt[1]).curve(dt.qrM)(X);x.setAttribute("d",lt)};(0,S.tD)(x,et),B(null!==(I=null==N?void 0:N.points)&&void 0!==I?I:[]);let q="";return{start:X=>{q=`M ${X.x} ${X.y} L ${X.x} ${X.y}`},move:(X,Z)=>{q+=` ${X.x} ${X.y}`,x.setAttribute("d",q)},end:(X,Z)=>{B(Z),Z.length&&(window.interactivePoints=Z)}}}}},4979:(he,Nt,m)=>{m.d(Nt,{z:()=>et,u:()=>I});var L=m(7873),S=m(2409),dt=m(7102),j=m(1308),mt=m(5970),b=m(1131),y=m(6407),D=m(1999),R=m(4896);class f{constructor(){let k={stroke:dt.L.attribute.stroke,strokeWidth:dt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:h,element:B,attribute:P,size:V}=(0,y.X)(Math.ceil(1e9*Math.random()),{attribute:k});(0,mt.tD)(B,P);let q="",X="";return{start:lt=>{q=`M ${lt.x} ${lt.y} L ${lt.x} ${lt.y}`},move:(lt,tt)=>{((lt,tt)=>{q+=` ${lt} ${tt}`,B.setAttribute("d",q)})(lt.x,lt.y)},end:(lt,tt)=>{var Jt;tt.length>=3?(X=null!==(Jt=b.n8j().x(Y=>Y[0]).y(Y=>Y[1]).curve(b.qrM)(tt))&&void 0!==Jt?Jt:"",B.setAttribute("d",X)):B.setAttribute("d",q);let qt=(0,R.CS)(X||q),{minX:Mt,minY:Dt,maxX:ht,maxY:xt}=(0,R.lP)(qt);V.x=Mt,V.y=Dt,V.width=ht-Mt||1,V.height=xt-Dt||1,V.ratioMaps=(0,R.nf)(V,qt),dt.L.data.node=Object.assign({id:h,type:D.h.PATH,name:"Path"},{size:V,attribute:P})}}}}class N{constructor(){let k={stroke:dt.L.attribute.stroke,strokeOpacity:.4,strokeWidth:dt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:h,element:B,attribute:P,size:V}=(0,y.X)(Math.ceil(1e9*Math.random()),{attribute:k});(0,mt.tD)(B,P);let q="";return{start:lt=>{q=`M ${lt.x} ${lt.y} L ${lt.x} ${lt.y}`},move:(lt,tt)=>{((lt,tt)=>{q+=` ${lt} ${tt}`,B.setAttribute("d",q)})(lt.x,lt.y)},end:(lt,tt)=>{let Jt=(0,R.CS)(q),{minX:qt,minY:Mt,maxX:Dt,maxY:ht}=(0,R.lP)(Jt);V.x=qt,V.y=Mt,V.width=Dt-qt||1,V.height=ht-Mt||1,V.ratioMaps=(0,R.nf)(V,Jt),dt.L.data.node=Object.assign({id:h,type:D.h.PATH,name:"Path"},{size:V,attribute:P})}}}}var M=m(669);const I=x=>{switch(dt.L.pointer.pen_type){case S.F.DRAW:(0,j.I)(x,new f);break;case S.F.HIGHTLIGH:(0,j.I)(x,new N);break;case S.F.INTERACTIVE:et(x)}},et=x=>{var k,h;let B=(0,mt.RY)(L.F.INTERACTIVE_GROUP,"g"),P=null!==(k=null===(h=dt.L.data.slide)||void 0===h||null===(h=h.svg)||void 0===h?void 0:h.viewBox)&&void 0!==k?k:(()=>{let{width:V,height:q}=dt.L.screen.get;return{x:0,y:0,width:V,height:q}})();(0,mt.KP)(B,P),x&&(0,j.I)(x,new M.O)}},6037:(he,Nt,m)=>{m.d(Nt,{K:()=>y});var L=m(7873),S=m(7102),dt=m(9506),j=m(1308),mt=m(5970),b=m(2492);const y=f=>{let N=(0,mt.RY)(L.F.RESIZE_GROUP,"g");(0,mt.AE)(N,f).forEach(M=>{D(M.element,M.posType,f,N)})},D=(f,N,M,I)=>{let et=!1;null==f||f.addEventListener("touchstart",x=>{et=!0,R({touchEvent:x},N,M,I)}),null==f||f.addEventListener("mousedown",x=>{if(0==x.button){if(et)return void(et=!1);R({mouseEvent:x},N,M,I)}})},R=(f,N,M,I)=>{let Z,{id:et,type:x,size:k,attribute:h}=M,{x:B,y:P,width:V,height:q}=k,X=(V||1)/(q||1),tt=null,Mt=!1;(0,j.I)(f,{start:ht=>{tt=JSON.parse(JSON.stringify({id:et,size:k,attribute:h}))},move:(ht,xt)=>{((ht,xt,jt,Y)=>{let At=jt-ht,Lt=Y-xt;switch(N){case"rect-center":var Qt,_;Z=null!==(Qt=f.mouseEvent)&&void 0!==Qt&&Qt.shiftKey||null!==(_=f.touchEvent)&&void 0!==_&&_.shiftKey?Math.abs(jt-ht)>=Math.abs(Y-xt)?{x:B+jt-ht,y:P,width:V,height:q}:{x:B,y:P+Y-xt,width:V,height:q}:{x:B+jt-ht,y:P+Y-xt,width:V,height:q};break;case"rect-top-left":var F,u,nt,kt,It,Ht,Ft,Kt;Z=(null!==(F=f.mouseEvent)&&void 0!==F&&F.shiftKey||null!==(u=f.touchEvent)&&void 0!==u&&u.shiftKey)&&(null!==(nt=f.mouseEvent)&&void 0!==nt&&nt.altKey||null!==(kt=f.touchEvent)&&void 0!==kt&&kt.altKey)?X>=1?{x:B+(jt-ht),y:P+(jt-ht)/X,width:V-2*(jt-ht),height:q-2*(jt-ht)/X}:{x:B+(Y-xt)*X,y:P+(Y-xt),width:V-2*(Y-xt)*X,height:q-2*(Y-xt)}:null!==(It=f.mouseEvent)&&void 0!==It&&It.shiftKey||null!==(Ht=f.touchEvent)&&void 0!==Ht&&Ht.shiftKey?X>=1?{x:B+(jt-ht),y:P+(jt-ht)/X,width:V-(jt-ht),height:q-(jt-ht)/X}:{x:B+(Y-xt)*X,y:P+(Y-xt),width:V-(Y-xt)*X,height:q-(Y-xt)}:null!==(Ft=f.mouseEvent)&&void 0!==Ft&&Ft.altKey||null!==(Kt=f.touchEvent)&&void 0!==Kt&&Kt.altKey?{x:B+(jt-ht),y:P+(Y-xt),width:V-2*(jt-ht),height:q-2*(Y-xt)}:{x:B+(jt-ht),y:P+(Y-xt),width:V-(jt-ht),height:q-(Y-xt)};break;case"rect-top-right":var Bt,ie,yt,Ct,T,d,U,it;Z=(null!==(Bt=f.mouseEvent)&&void 0!==Bt&&Bt.shiftKey||null!==(ie=f.touchEvent)&&void 0!==ie&&ie.shiftKey)&&(null!==(yt=f.mouseEvent)&&void 0!==yt&&yt.altKey||null!==(Ct=f.touchEvent)&&void 0!==Ct&&Ct.altKey)?X>=1?{x:B-(jt-ht),y:P-(jt-ht)/X,width:V+2*(jt-ht),height:q+2*(jt-ht)/X}:{x:B+(Y-xt)*X,y:P+(Y-xt),width:V-2*(Y-xt)*X,height:q-2*(Y-xt)}:null!==(T=f.mouseEvent)&&void 0!==T&&T.shiftKey||null!==(d=f.touchEvent)&&void 0!==d&&d.shiftKey?X>=1?{x:B,y:P-(jt-ht)/X,width:V+(jt-ht),height:q+(jt-ht)/X}:{x:B,y:P+(Y-xt),width:V-(Y-xt)*X,height:q-(Y-xt)}:null!==(U=f.mouseEvent)&&void 0!==U&&U.altKey||null!==(it=f.touchEvent)&&void 0!==it&&it.altKey?{x:B-(jt-ht),y:P+(Y-xt),width:V+2*(jt-ht),height:q-2*(Y-xt)}:{x:B,y:P+(Y-xt),width:V+(jt-ht),height:q-(Y-xt)};break;case"rect-bottom-left":var at,J,O,H,rt,wt,bt,St;Z=(null!==(at=f.mouseEvent)&&void 0!==at&&at.shiftKey||null!==(J=f.touchEvent)&&void 0!==J&&J.shiftKey)&&(null!==(O=f.mouseEvent)&&void 0!==O&&O.altKey||null!==(H=f.touchEvent)&&void 0!==H&&H.altKey)?X>=1?{x:B+(jt-ht),y:P+(jt-ht)/X,width:V-2*(jt-ht),height:q-2*(jt-ht)/X}:{x:B-(Y-xt)*X,y:P-(Y-xt),width:V+2*(Y-xt)*X,height:q+2*(Y-xt)}:null!==(rt=f.mouseEvent)&&void 0!==rt&&rt.shiftKey||null!==(wt=f.touchEvent)&&void 0!==wt&&wt.shiftKey?X>=1?{x:B+(jt-ht),y:P,width:V-(jt-ht),height:q-(jt-ht)/X}:{x:B-(Y-xt)*X,y:P,width:V+(Y-xt)*X,height:q+(Y-xt)}:null!==(bt=f.mouseEvent)&&void 0!==bt&&bt.altKey||null!==(St=f.touchEvent)&&void 0!==St&&St.altKey?{x:B+(jt-ht),y:P-(Y-xt),width:V-2*(jt-ht),height:q+2*(Y-xt)}:{x:B+(jt-ht),y:P,width:V-(jt-ht),height:q+(Y-xt)};break;case"rect-bottom-right":var ct,ot,pt,Ot,Ut,Xt,Vt,se;Z=(null!==(ct=f.mouseEvent)&&void 0!==ct&&ct.shiftKey||null!==(ot=f.touchEvent)&&void 0!==ot&&ot.shiftKey)&&(null!==(pt=f.mouseEvent)&&void 0!==pt&&pt.altKey||null!==(Ot=f.touchEvent)&&void 0!==Ot&&Ot.altKey)?X>=1?{x:B-(jt-ht),y:P-(jt-ht)/X,width:V+2*(jt-ht),height:q+2*(jt-ht)/X}:{x:B-(Y-xt)*X,y:P-(Y-xt),width:V+2*(Y-xt)*X,height:q+2*(Y-xt)}:null!==(Ut=f.mouseEvent)&&void 0!==Ut&&Ut.shiftKey||null!==(Xt=f.touchEvent)&&void 0!==Xt&&Xt.shiftKey?X>=1?{x:B,y:P,width:V+(jt-ht),height:q+(jt-ht)/X}:{x:B,y:P,width:V+(Y-xt)*X,height:q+(Y-xt)}:null!==(Vt=f.mouseEvent)&&void 0!==Vt&&Vt.altKey||null!==(se=f.touchEvent)&&void 0!==se&&se.altKey?{x:B-(jt-ht),y:P-(Y-xt),width:V+2*(jt-ht),height:q+2*(Y-xt)}:{x:B,y:P,width:V+(jt-ht),height:q+(Y-xt)};break;case"rect-top":var ne,ae,pe,Ae;Z=null!==(ne=f.mouseEvent)&&void 0!==ne&&ne.shiftKey||null!==(ae=f.touchEvent)&&void 0!==ae&&ae.shiftKey?{x:B+Lt/2*X,y:P+Lt,width:V-Lt*X,height:q-Lt}:null!==(pe=f.mouseEvent)&&void 0!==pe&&pe.altKey||null!==(Ae=f.touchEvent)&&void 0!==Ae&&Ae.altKey?{x:B,y:P+Lt,width:V,height:q-2*Lt}:{x:B,y:P+Lt,width:V,height:q-Lt};break;case"rect-bottom":var ke,me,Oe,Te;Z=null!==(ke=f.mouseEvent)&&void 0!==ke&&ke.shiftKey||null!==(me=f.touchEvent)&&void 0!==me&&me.shiftKey?{x:B-Lt/2*X,y:P,width:V+Lt*X,height:q+Lt}:null!==(Oe=f.mouseEvent)&&void 0!==Oe&&Oe.altKey||null!==(Te=f.touchEvent)&&void 0!==Te&&Te.altKey?{x:B,y:P-Lt,width:V,height:q+2*Lt}:{x:B,y:P,width:V,height:q+Lt};break;case"rect-left":var je,be,qe,Ue;Z=null!==(je=f.mouseEvent)&&void 0!==je&&je.shiftKey||null!==(be=f.touchEvent)&&void 0!==be&&be.shiftKey?{x:B+At,y:P+At/2/X,width:V-At,height:q-At/X}:null!==(qe=f.mouseEvent)&&void 0!==qe&&qe.altKey||null!==(Ue=f.touchEvent)&&void 0!==Ue&&Ue.altKey?{x:B+At,y:P,width:V-2*At,height:q}:{x:B+At,y:P,width:V-At,height:q};break;case"rect-right":var He,$e,Xe,Ye;Z=null!==(He=f.mouseEvent)&&void 0!==He&&He.shiftKey||null!==($e=f.touchEvent)&&void 0!==$e&&$e.shiftKey?{x:B,y:P-At/2/X,width:V+At,height:q+At/X}:null!==(Xe=f.mouseEvent)&&void 0!==Xe&&Xe.altKey||null!==(Ye=f.touchEvent)&&void 0!==Ye&&Ye.altKey?{x:B-At,y:P,width:V+2*At,height:q}:{x:B,y:P,width:V+At,height:q};break;default:Z={x:B+jt-ht,y:P+Y-xt,width:V,height:q}}Z.width<0&&(Z.width=0),Z.height<0&&(Z.height=0),Z.x=(0,b.z)(Z.x),Z.y=(0,b.z)(Z.y),Z.width=(0,b.z)(Z.width),Z.height=(0,b.z)(Z.height),Object.assign(k,Z),Object.assign(h,(0,dt.xW)(x,k,h)),(0,mt.tD)(window.document.getElementById(et),h),(0,mt.AE)(I,M)})(xt[0][0],xt[0][1],ht.x,ht.y),Mt=!0},end:(ht,xt)=>{Mt&&tt&&S.L.history.push([{type:"size",from:tt,to:JSON.parse(JSON.stringify({id:et,size:k,attribute:h}))}])}})}},4333:(he,Nt,m)=>{m.d(Nt,{E:()=>y});var L=m(7873),S=m(7102),dt=m(9506),j=m(1308),mt=m(5970),b=m(2492);const y=f=>{let N=999999,M=999999,I=-999999,et=-999999;null==f||f.forEach(h=>{N=Math.min(N,h.size.x),M=Math.min(M,h.size.y),I=Math.max(I,h.size.x+h.size.width),et=Math.max(et,h.size.y+h.size.height)});let x=(0,mt.RY)(L.F.SELECT_GROUP,"g"),k=(0,dt.CE)(N,M,I,et);(0,mt.Mo)(x,f,k).forEach(h=>{D(h.element,h.posType,k,f,x)})},D=(f,N,M,I,et)=>{let x=!1;null==f||f.addEventListener("touchstart",k=>{x=!0,R({touchEvent:k},N,M,I,et)}),null==f||f.addEventListener("mousedown",k=>{if(0==k.button){if(x)return void(x=!1);R({mouseEvent:k},N,M,I,et)}})},R=(f,N,M,I,et)=>{let{x,y:k,width:h,height:B}=M,P=I.map(tt=>Object.assign({},tt.size)),q=[];(0,j.I)(f,{start:tt=>{I.forEach((tt,Jt)=>{let{id:qt,size:Dt,attribute:ht}=tt;q.push(JSON.parse(JSON.stringify({id:qt,size:Dt,attribute:ht})))})},move:(tt,Jt)=>{((tt,Jt,qt,Mt)=>{(()=>{let Dt;Dt="rect-center"===N?{x:x+qt-tt,y:k+Mt-Jt,width:h,height:B}:{x,y:k,width:h,height:B},Dt.width<0&&(Dt.width=0),Dt.height<0&&(Dt.height=0),Object.assign(M,Dt),(0,mt.Mo)(et,I,M)})(),I.forEach((Dt,ht)=>{let u,{x:xt,y:jt,width:Y,height:At}=P[ht],{id:Lt,type:Qt,size:_,attribute:F}=Dt;u="rect-center"===N?{x:xt+qt-tt,y:jt+Mt-Jt,width:Y,height:At}:{x:xt,y:jt,width:Y,height:At},u.width<0&&(u.width=0),u.height<0&&(u.height=0),u.x=(0,b.z)(u.x),u.y=(0,b.z)(u.y),u.width=(0,b.z)(u.width),u.height=(0,b.z)(u.height),Object.assign(_,u),Object.assign(F,(0,dt.xW)(Qt,_,F)),(0,mt.tD)(window.document.getElementById(Lt),F)})})(Jt[0][0],Jt[0][1],tt.x,tt.y)},end:(tt,Jt)=>{q.length&&S.L.history.push(I.map((tt,Jt)=>{let{id:qt,size:Dt,attribute:ht}=tt;return{type:"size",from:q[Jt],to:JSON.parse(JSON.stringify({id:qt,size:Dt,attribute:ht}))}}))}})}},1026:(he,Nt,m)=>{m.d(Nt,{$:()=>k,t:()=>x});var L=m(7873),S=m(1281),dt=m(6153),j=m(3477),mt=m(7945),b=m(3069),y=m(3073),D=m(1999),R=m(6407),f=m(6847),N=m(745),M=m(9173),I=m(7102),et=m(5970);const x=(h,B,P)=>{var V;if(B&&!(null!=P?P:window).document.getElementById(B))return;if(B){let X=(null!=P?P:window).document.getElementById(B);jQuery(X).find("#"+L.F.BACKGROUND_GROUP).empty();let Z=(0,et.RY)(L.F.BACKGROUND_GROUP,"g",void 0,X);(0,et.I6)(Z,h)}else{jQuery(I.L.target).find("#"+L.F.BACKGROUND_GROUP).empty();let X=(0,et.RY)(L.F.BACKGROUND_GROUP,"g",void 0,I.L.target);(0,et.I6)(X,h)}let q=(X,Z)=>{Z=B&&Z?`${B}-${Z}`:null!=B?B:Z,null==X||X.forEach(lt=>{let tt=B?`${B}-${lt.id}`:lt.id;var Jt;if(lt.isdeleted)null===(Jt=(null!=P?P:window).document.getElementById(tt))||void 0===Jt||Jt.remove();else switch(lt.type){case D.h.GROUP:(0,y.v)(tt,{},Z?(null!=P?P:window).document.getElementById(Z):null),q(lt.nodes,lt.id);break;case D.h.CIRCLE:(0,S.K)(tt,{size:lt.size,attribute:lt.attribute},Z?(null!=P?P:window).document.getElementById(Z):null);break;case D.h.ELLIPSE:(0,dt.W)(tt,{size:lt.size,attribute:lt.attribute},Z?(null!=P?P:window).document.getElementById(Z):null);break;case D.h.LINE:(0,b.q)(tt,{size:lt.size,attribute:lt.attribute},Z?(null!=P?P:window).document.getElementById(Z):null);break;case D.h.RECT:(0,mt.a)(tt,{size:lt.size,attribute:lt.attribute},Z?(null!=P?P:window).document.getElementById(Z):null);break;case D.h.POLYGON:(0,j.u)(tt,{size:lt.size,attribute:lt.attribute},Z?(null!=P?P:window).document.getElementById(Z):null);break;case D.h.FOREIGNOBJECT:(0,N.$)(tt,{size:lt.size,attribute:lt.attribute,style:lt.style,source:lt.source},Z?(null!=P?P:window).document.getElementById(Z):null);break;case D.h.IMAGE:(0,M.B)(tt,{size:lt.size,attribute:lt.attribute,source:lt.source},Z?(null!=P?P:window).document.getElementById(Z):null);break;case D.h.TEXT:(0,f.L)(tt,{size:lt.size,attribute:lt.attribute,source:lt.source},Z?(null!=P?P:window).document.getElementById(Z):null);break;case D.h.PATH:(0,R.X)(tt,{size:lt.size,attribute:lt.attribute},Z?(null!=P?P:window).document.getElementById(Z):null)}})};q(null==h||null===(V=h.svg)||void 0===V?void 0:V.nodes)},k=(h,B)=>{var P;if(B&&!window.document.getElementById(B))return;let V=(q,X)=>{X=X?`${B}-${X}`:B,null==q||q.forEach(Z=>{jQuery("#"+(B?`${B}-${Z.id}`:Z.id)).appendTo(X?window.document.getElementById(X):I.L.target),Z.type==D.h.GROUP&&V(Z.nodes,Z.id)})};V(null==h||null===(P=h.svg)||void 0===P?void 0:P.nodes)}},1281:(he,Nt,m)=>{m.d(Nt,{K:()=>mt});var L=m(1999),S=m(7102),dt=m(9506),j=m(5970);const mt=(b,y,D)=>{let R=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:S.L.attribute.fill,stroke:S.L.attribute.stroke,strokeWidth:S.L.attribute.strokeWidth};return Object.assign(f,(0,dt.xW)(L.h.CIRCLE,R,f)),{nodeId:b,element:(0,j.fn)(b,L.h.CIRCLE,"circle",{size:R,attribute:f},D),size:R,attribute:f}}},6153:(he,Nt,m)=>{m.d(Nt,{W:()=>mt});var L=m(1999),S=m(7102),dt=m(9506),j=m(5970);const mt=(b,y,D)=>{let R=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:S.L.attribute.fill,stroke:S.L.attribute.stroke,strokeWidth:S.L.attribute.strokeWidth};return Object.assign(f,(0,dt.xW)(L.h.ELLIPSE,R,f)),{nodeId:b,element:(0,j.fn)(b,L.h.ELLIPSE,"ellipse",{size:R,attribute:f},D),size:R,attribute:f}}},745:(he,Nt,m)=>{m.d(Nt,{$:()=>j});var L=m(1999),S=m(9506),dt=m(5970);const j=(mt,b,y)=>{let D=(null==b?void 0:b.size)||{x:0,y:0,width:320,height:80},R=(null==b?void 0:b.attribute)||{};Object.assign(R,(0,S.xW)(L.h.FOREIGNOBJECT,D,R));let f=(null==b?void 0:b.source)||{type:"html",html:{htmlContent:""}},N=(null==b?void 0:b.style)||{};return{nodeId:mt,element:(0,dt.fn)(mt,L.h.FOREIGNOBJECT,"foreignObject",{size:D,attribute:R,style:N,source:f},y),size:D,attribute:R,style:N,source:f}}},3073:(he,Nt,m)=>{m.d(Nt,{v:()=>j});var L=m(1999),S=m(9506),dt=m(5970);const j=(b,y,D)=>{let R=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{};return Object.assign(f,(0,S.xW)(L.h.GROUP,R,f)),{nodeId:b,element:(0,dt.fn)(b,L.h.GROUP,"g",{size:R,attribute:f},D),size:R,attribute:f}}},9173:(he,Nt,m)=>{m.d(Nt,{B:()=>j});var L=m(1999),S=m(9506),dt=m(5970);const j=(mt,b,y)=>{let D=(null==b?void 0:b.size)||{x:0,y:0,width:10,height:10},R=(null==b?void 0:b.attribute)||{preserveAspectRatio:"none"};Object.assign(R,(0,S.xW)(L.h.IMAGE,D,R));let f=(null==b?void 0:b.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:mt,element:(0,dt.fn)(mt,L.h.IMAGE,"image",{size:D,attribute:R,source:f},y),size:D,attribute:R,source:f}}},3069:(he,Nt,m)=>{m.d(Nt,{q:()=>mt});var L=m(1999),S=m(7102),dt=m(9506),j=m(5970);const mt=(b,y,D)=>{let R=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{stroke:S.L.attribute.stroke,strokeWidth:S.L.attribute.strokeWidth,strokeLinecap:S.L.attribute.strokeLinecap};return Object.assign(f,(0,dt.xW)(L.h.LINE,R,f)),{nodeId:b,element:(0,j.fn)(b,L.h.LINE,"line",{size:R,attribute:f},D),size:R,attribute:f}}},6407:(he,Nt,m)=>{m.d(Nt,{X:()=>mt});var L=m(1999),S=m(7102),dt=m(9506),j=m(5970);const mt=(b,y,D)=>{let R=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{stroke:S.L.attribute.stroke,strokeWidth:S.L.attribute.strokeWidth};return Object.assign(f,(0,dt.xW)(L.h.PATH,R,f)),{nodeId:b,element:(0,j.fn)(b,L.h.PATH,"path",{size:R,attribute:f},D),size:R,attribute:f}}},3477:(he,Nt,m)=>{m.d(Nt,{u:()=>mt});var L=m(1999),S=m(7102),dt=m(9506),j=m(5970);const mt=(b,y,D)=>{let R=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:S.L.attribute.fill,stroke:S.L.attribute.stroke,strokeWidth:S.L.attribute.strokeWidth};return Object.assign(f,(0,dt.xW)(L.h.POLYGON,R,f)),{nodeId:b,element:(0,j.fn)(b,L.h.POLYGON,"polygon",{size:R,attribute:f},D),size:R,attribute:f}}},7945:(he,Nt,m)=>{m.d(Nt,{a:()=>mt});var L=m(1999),S=m(7102),dt=m(9506),j=m(5970);const mt=(b,y,D)=>{let R=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:S.L.attribute.fill,stroke:S.L.attribute.stroke,strokeWidth:S.L.attribute.strokeWidth};return Object.assign(f,(0,dt.xW)(L.h.RECT,R,f)),{nodeId:b,element:(0,j.fn)(b,L.h.RECT,"rect",{size:R,attribute:f},D),size:R,attribute:f}}},6847:(he,Nt,m)=>{m.d(Nt,{L:()=>mt});var L=m(1999),S=m(7102),dt=m(9506),j=m(5970);const mt=(b,y,D)=>{let R=(null==y?void 0:y.size)||{x:0,y:0,width:320,height:80},f=(null==y?void 0:y.attribute)||{fill:S.L.attribute.stroke,fontFamily:S.L.attribute.fontFamily,fontSize:S.L.attribute.fontSize,textLength:S.L.attribute.textLength};Object.assign(f,(0,dt.xW)(L.h.TEXT,R,f));let N=(null==y?void 0:y.source)||{type:"text",text:{textContent:""}};return{nodeId:b,element:(0,j.fn)(b,L.h.TEXT,"text",{size:R,attribute:f,source:N},D),size:R,attribute:f,source:N}}},9506:(he,Nt,m)=>{m.d(Nt,{CE:()=>dt,xW:()=>j});var L=m(1999),S=m(4896);const dt=(b,y,D,R,f)=>{let N={x:Math.min(b,D),y:Math.min(y,R),width:Math.abs(D-b)||1,height:Math.abs(R-y)||1};return null!=f&&f.ratio&&(N.width<=N.height?N.height=N.width*(null==f?void 0:f.ratio):N.width=N.height/(null==f?void 0:f.ratio)),Object.assign(N,{ratios:(null==f?void 0:f.ratios)||[[(b-N.x)/(N.width||1),(y-N.y)/(N.height||1)],[(D-N.x)/(N.width||1),(R-N.y)/(N.height||1)]]}),null!=f&&f.points&&(N.points=null==f?void 0:f.points),N},j=(b,y,D)=>{var R,f=(()=>{switch(b){case L.h.CIRCLE:return{cx:y.x+y.width/2,cy:y.y+y.height/2,r:Math.min(y.width/2,y.height/2)};case L.h.ELLIPSE:return{cx:y.x+y.width/2,cy:y.y+y.height/2,rx:y.width/2,ry:y.height/2};case L.h.LINE:{var N;let k={};return null===(N=y.ratios)||void 0===N||N.forEach((h,B)=>{k[`x${B+1}`]=y.x+y.width*h[0],k[`y${B+1}`]=y.y+y.height*h[1]}),k}case L.h.RECT:case L.h.FOREIGNOBJECT:case L.h.IMAGE:return{x:y.x,y:y.y,width:y.width,height:y.height};case L.h.TEXT:var M;return{x:y.x,y:y.y+(null!==(M=D.fontSize)&&void 0!==M?M:16)};case L.h.POLYGON:var I;if(null!==(I=y.ratios)&&void 0!==I&&I.length)return{points:(0,S.n9)(y,y.ratios)};break;case L.h.PATH:var et,x;if(null!==(et=y.ratioMaps)&&void 0!==et&&et.length)return{d:(0,S.$N)(y,y.ratioMaps)};if(null!==(x=y.points)&&void 0!==x&&x.length)return{d:`M ${(k=y.points)[0][0]} ${k[0][1]} L ${(k.map(h=>[h[0],h[1]])||[]).map(h=>h.join(" ")).join(" ")}`}}var k;return{}})();return y.rotate?(f.transform=`rotate(${y.rotate})`,f.transformOrigin=`${y.x+y.width/2} ${y.y+y.height/2}`):null!==(R=D.transform)&&void 0!==R&&R.match(/^rotate/)&&(D.transform=null,D.transformOrigin=null),f}},9841:(he,Nt,m)=>{m.d(Nt,{$:()=>dt});var L=m(7102),S=m(2492);const dt=j=>(0,S.z)(j/L.L.screen.scale)},6752:(he,Nt,m)=>{m.d(Nt,{E$:()=>y,Nx:()=>R,ZF:()=>b,ei:()=>mt,fu:()=>D});var L=m(7102),S=m(5970),dt=m(9506),j=m(2492);const mt=(f,N)=>{let{id:M,type:I,size:et,attribute:x}=f,k=JSON.parse(JSON.stringify({id:M,size:et,attribute:x}));et.x=(0,j.z)(N),Object.assign(x,(0,dt.xW)(I,et,x)),(0,S.tD)(window.document.getElementById(M),x),L.L.history.push([{type:"size",from:k,to:JSON.parse(JSON.stringify({id:M,size:et,attribute:x}))}])},b=(f,N)=>{let{id:M,type:I,size:et,attribute:x}=f,k=JSON.parse(JSON.stringify({id:M,size:et,attribute:x}));et.y=(0,j.z)(N),Object.assign(x,(0,dt.xW)(I,et,x)),(0,S.tD)(window.document.getElementById(M),x),L.L.history.push([{type:"size",from:k,to:JSON.parse(JSON.stringify({id:M,size:et,attribute:x}))}])},y=(f,N,M)=>{let{id:I,type:et,size:x,attribute:k}=f,h=JSON.parse(JSON.stringify({id:I,size:x,attribute:k}));M&&(x.height=(0,j.z)(N*x.height/x.width)),x.width=(0,j.z)(N),Object.assign(k,(0,dt.xW)(et,x,k)),(0,S.tD)(window.document.getElementById(I),k),L.L.history.push([{type:"size",from:h,to:JSON.parse(JSON.stringify({id:I,size:x,attribute:k}))}])},D=(f,N,M)=>{let{id:I,type:et,size:x,attribute:k}=f,h=JSON.parse(JSON.stringify({id:I,size:x,attribute:k}));M&&(x.width=(0,j.z)(N*x.width/x.height)),x.height=(0,j.z)(N),Object.assign(k,(0,dt.xW)(et,x,k)),(0,S.tD)(window.document.getElementById(I),k),L.L.history.push([{type:"size",from:h,to:JSON.parse(JSON.stringify({id:I,size:x,attribute:k}))}])},R=(f,N)=>{let{id:M,type:I,size:et,attribute:x}=f,k=JSON.parse(JSON.stringify({id:M,size:et,attribute:x}));et.rotate="number"==typeof N?(0,j.z)(N,100):void 0,Object.assign(x,(0,dt.xW)(I,et,x)),(0,S.tD)(window.document.getElementById(M),x),L.L.history.push([{type:"size",from:k,to:JSON.parse(JSON.stringify({id:M,size:et,attribute:x}))}])}},1308:(he,Nt,m)=>{m.d(Nt,{I:()=>b});var L=m(3603),S=m(7102);class dt{constructor(D){this._points=[],this._options=D}start(D){this._points.length=0,this._points.push([D.x,D.y]),this._options.start(D)}move(D){this._points.push([D.x,D.y]),this._options.move(D,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(D=this._points[0])[0],y:D[1]}:{x:0,y:0};var D}get offsetLast(){return this._points.length>=1?{x:(D=this._points[this._points.length-1])[0],y:D[1]}:{x:0,y:0};var D}}var j=m(6078);const b=(y,D,R,f,N)=>{var M,I,et;let x=null,k=0,h=0;y.mouseEvent?(x=y.mouseEvent.target,k=y.mouseEvent.offsetX,h=y.mouseEvent.offsetY):y.touchEvent&&(x=y.touchEvent.target,y.touchEvent.touches.length&&(k=y.touchEvent.touches[0].clientX,h=y.touchEvent.touches[0].clientY));let B=null!=R?R:S.L.screen.scale,P=null!=f?f:S.L.screen.dislocation,V=null!=N?N:S.L.screen.offset,q=()=>{};var X=new dt({start:null!==(M=null==D?void 0:D.start)&&void 0!==M?M:q,move:null!==(I=null==D?void 0:D.move)&&void 0!==I?I:q,end:null!==(et=null==D?void 0:D.end)&&void 0!==et?et:q});y.mouseEvent?X.start((0,j.D)({x:k,y:h},B,P,{x:0,y:0})):y.touchEvent&&X.start((0,j.D)({x:k,y:h},B,P,V));let Z=ht=>{X.move((0,j.D)({x:ht.clientX,y:ht.clientY},B,P,V))},lt=ht=>{X.end(),[L.P.SHAPE,L.P.FOREIGNOBJECT,L.P.IMAGE,L.P.TEXT].includes(S.L.pointer.pointer_type)&&(ht.shiftKey||(S.L.pointer.pointer_type=L.P.POINTER))},tt=ht=>{ht.touches.length&&Z({clientX:ht.touches[0].clientX,clientY:ht.touches[0].clientY})},Jt=ht=>{lt({shiftKey:ht.shiftKey,ctrlKey:ht.ctrlKey,altKey:ht.altKey}),window.removeEventListener("touchmove",tt,!1),window.removeEventListener("touchend",Jt,!1)},qt=ht=>{0==ht.button&&Z({clientX:ht.clientX,clientY:ht.clientY})},Mt=ht=>{0==ht.button&&(lt({shiftKey:ht.shiftKey,ctrlKey:ht.ctrlKey,altKey:ht.altKey}),window.removeEventListener("mousemove",qt,!1),window.removeEventListener("mouseup",Mt,!1))};if(y.mouseEvent)window.addEventListener("mousemove",qt,!1),window.addEventListener("mouseup",Mt,!1);else if(y.touchEvent){var Dt;window.addEventListener("touchmove",tt,!1),window.addEventListener("touchend",Jt,!1),null===(Dt=x)||void 0===Dt||Dt.addEventListener("touchmove",function(ht){ht.preventDefault()})}}},6078:(he,Nt,m)=>{m.d(Nt,{D:()=>S});var L=m(2492);const S=(dt,j,mt,b)=>(dt.x-=b.x,dt.y-=b.y,dt.x/=j,dt.y/=j,dt.x-=mt.x,dt.y-=mt.y,dt.x=(0,L.z)(dt.x),dt.y=(0,L.z)(dt.y),dt)},5619:(he,Nt,m)=>{m.d(Nt,{J:()=>yt,I:()=>Ct});var L=m(7873),S=m(7102),dt=m(1999),j=m(334),mt=m(8946),b=m(7657),y=m(6769),D=m(3591),f=m(6847),N=m(3073);var k=m(7050),h=m(9173),B=m(2492);const P=(T,d,U)=>{var it,at,J,O;let H=1,rt=new Image;rt.onload=()=>{var wt,bt,St,ct;H=(0,B.z)(rt.naturalWidth/rt.naturalHeight,100);let ot=0,pt=0,Ot=0,Ut=0;var Xt,Vt,se,ne;H>=1?(Ot=Math.min(rt.naturalWidth,null!==(Xt=null===(Vt=yt.slide.svg)||void 0===Vt||null===(Vt=Vt.viewBox)||void 0===Vt?void 0:Vt.width)&&void 0!==Xt?Xt:0),Ut=Ot/H):(Ut=Math.min(rt.naturalHeight,null!==(se=null===(ne=yt.slide.svg)||void 0===ne||null===(ne=ne.viewBox)||void 0===ne?void 0:ne.height)&&void 0!==se?se:0),Ot=Ut/H),ot=((null!==(wt=null===(bt=yt.slide.svg)||void 0===bt||null===(bt=bt.viewBox)||void 0===bt?void 0:bt.width)&&void 0!==wt?wt:0)-Ot)/2,pt=((null!==(St=null===(ct=yt.slide.svg)||void 0===ct||null===(ct=ct.viewBox)||void 0===ct?void 0:ct.height)&&void 0!==St?St:0)-Ut)/2,d.size={x:ot,y:pt,width:Ot,height:Ut},V(d,U)},rt.onerror=wt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,wt)},rt.src=(null!==(it=d.source)&&void 0!==it&&it.path?(null===(at=S.L.config)||void 0===at?void 0:at.readfileuploadurl)+(null===(J=d.source)||void 0===J?void 0:J.path):null===(O=d.source)||void 0===O?void 0:O.url)||""},V=(T,d)=>{if(T.slideStatus!=yt.slideStatus)return void d();let{element:U}=(0,h.B)(Math.ceil(1e9*Math.random()),{size:T.size,source:{type:"image",image:null==T?void 0:T.source}});setTimeout(()=>{null==U||U.remove(),d()},3e3)};var q=m(5970);const X=(T,d,U)=>{var it,at,J,O;let H=new Image;H.onload=()=>{Z(T,{width:H.naturalWidth,height:H.naturalHeight},d,U)},H.onerror=rt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,rt),U()},H.src=(null!==(it=d.source)&&void 0!==it&&it.path?(null===(at=S.L.config)||void 0===at?void 0:at.readfileuploadurl)+(null===(J=d.source)||void 0===J?void 0:J.path):null===(O=d.source)||void 0===O?void 0:O.url)||""},Z=(T,d,U,it)=>{if(U.slideStatus!=yt.slideStatus)return void it();let at=(0,B.z)(d.width/d.height,100),J=0,O=0,H=0,rt=0;at>=1?(H=d.width,H=Math.max(H,40),H=Math.min(H,40),rt=H/at):(rt=d.height,rt=Math.max(rt,40),rt=Math.min(rt,40),H=rt/at);let{size:St}=T;J=St.x+St.width-H/2,O=St.y-rt/2;let ct=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,h.B)(`icon-${T.id}`,{size:{x:J,y:O,width:H,height:rt},source:{type:"image",image:null==U?void 0:U.source}},ct),setTimeout(()=>{it()},3e3)},lt=(T,d,U)=>{var it,at,J,O,H,rt,wt;if(d.slideStatus!=yt.slideStatus)return void U();if(!(null!==(it=d.source)&&void 0!==it&&it.path||null!==(at=d.source)&&void 0!==at&&at.url))return console.warn(`${T.id} -> audio no source!`),void U();var bt=jQuery("#"+T.id);let St=null!==(J=d.iteration)&&void 0!==J?J:0;if(St<0&&(U(),U=function(){}),!(bt.data("audio-running")&&St<0)){bt.data("audio-running",!0);var ct=new Audio;return ct.autoplay=!0,ct.loop=0!=St,ct.preload="auto",ct.controls=!0,ct.setAttributeNode(document.createAttribute("playsinline")),ct.addEventListener("canplay",function(){var ot=ct.play();ot&&ot.then(function(pt){bt.data("audio-running",!0)}).catch(function(pt){bt.data("audio-running",!1),d.slideStatus===yt.slideStatus&&U()})}),ct.addEventListener("timeupdate",function(){var pt;d.slideStatus!==yt.slideStatus&&((pt=this).pause(),pt.remove(),bt.data("audio-running",!1))}),ct.addEventListener("canplaythrough",function(){this.loop&&(St>0?St--:0==St&&(this.loop=!1))}),ct.addEventListener("play",function(){}),ct.addEventListener("pause",function(){}),ct.addEventListener("ended",function(){this.remove(),bt.data("audio-running",!1),d.slideStatus===yt.slideStatus&&U()}),ct.onerror=function(){this.remove(),bt.data("audio-running",!1),d.slideStatus===yt.slideStatus&&U()},ct.src=(null!==(O=d.source)&&void 0!==O&&O.path?(null===(H=S.L.config)||void 0===H?void 0:H.readfileuploadurl)+(null===(rt=d.source)||void 0===rt?void 0:rt.path):null===(wt=d.source)||void 0===wt?void 0:wt.url)||"",ct}};var tt=m(2837);const jt=(T,d)=>{var U;null===(U=d.test)||void 0===U||null===(U=U.answer)||void 0===U||null===(U=U.matching)||void 0===U||U.filter(it=>it.id==T.id).forEach(it=>it.value=""),jQuery(`#node-${T.id}`).remove()},At=(T,d,U,it,at,J)=>{var O,H,rt,wt,bt,St,ct,ot;at.iscorrect?(null!==(O=d.test)&&void 0!==O&&null!==(O=O.audiotrue)&&void 0!==O&&O.path&&lt(T,{source:(0,tt.U)(null===(rt=d.test)||void 0===rt?void 0:rt.audiotrue),iteration:0,nodeStatus:U,slideStatus:it},J),null!==(H=d.test)&&void 0!==H&&null!==(H=H.effecttrue)&&void 0!==H&&H.path&&P(0,{source:(0,tt.U)(null===(wt=d.test)||void 0===wt?void 0:wt.effecttrue),iteration:0,nodeStatus:U,slideStatus:it},J)):(null!==(bt=d.test)&&void 0!==bt&&null!==(bt=bt.audiofalse)&&void 0!==bt&&bt.path&&lt(T,{source:(0,tt.U)(null===(ct=d.test)||void 0===ct?void 0:ct.audiofalse),iteration:0,nodeStatus:U,slideStatus:it},J),null!==(St=d.test)&&void 0!==St&&null!==(St=St.effectfalse)&&void 0!==St&&St.path&&P(0,{source:(0,tt.U)(null===(ot=d.test)||void 0===ot?void 0:ot.effectfalse),iteration:0,nodeStatus:U,slideStatus:it},J));Lt(d,U,it,J)},Lt=(T,d,U,it)=>{var at;switch(null===(at=T.test)||void 0===at?void 0:at.type){case"truefalse":{var J,O;let{value:ne,iscorrect:ae}=null!==(J=null==T||null===(O=T.test)||void 0===O||null===(O=O.answer)||void 0===O?void 0:O.truefalse)&&void 0!==J?J:{};if(ne){let pe=yt.findNode(ne);var H,rt,wt,bt;ae?null!==(H=T.test)&&void 0!==H&&null!==(H=H.icontrue)&&void 0!==H&&H.path&&X(pe,{source:(0,tt.U)(null===(rt=T.test)||void 0===rt?void 0:rt.icontrue),iteration:0,nodeStatus:d,slideStatus:U},it):null!==(wt=T.test)&&void 0!==wt&&null!==(wt=wt.iconfalse)&&void 0!==wt&&wt.path&&X(pe,{source:(0,tt.U)(null===(bt=T.test)||void 0===bt?void 0:bt.iconfalse),iteration:0,nodeStatus:d,slideStatus:U},it)}break}case"singlechoice":{var St,ct;let{value:ne,iscorrect:ae}=null!==(St=null==T||null===(ct=T.test)||void 0===ct||null===(ct=ct.answer)||void 0===ct?void 0:ct.singlechoice)&&void 0!==St?St:{};if(ne){let pe=yt.findNode(ne);var ot,pt,Ot,Ut;ae?null!==(ot=T.test)&&void 0!==ot&&null!==(ot=ot.icontrue)&&void 0!==ot&&ot.path&&X(pe,{source:(0,tt.U)(null===(pt=T.test)||void 0===pt?void 0:pt.icontrue),iteration:0,nodeStatus:d,slideStatus:U},it):null!==(Ot=T.test)&&void 0!==Ot&&null!==(Ot=Ot.iconfalse)&&void 0!==Ot&&Ot.path&&X(pe,{source:(0,tt.U)(null===(Ut=T.test)||void 0===Ut?void 0:Ut.iconfalse),iteration:0,nodeStatus:d,slideStatus:U},it)}break}case"multichoice":var Xt;null==T||null===(Xt=T.test)||void 0===Xt||null===(Xt=Xt.answer)||void 0===Xt||null===(Xt=Xt.multichoice)||void 0===Xt||Xt.forEach(ne=>{let{value:ae,iscorrect:pe}=ne;if(ae){let Te=yt.findNode(ae);var Ae,ke,me,Oe;pe?null!==(Ae=T.test)&&void 0!==Ae&&null!==(Ae=Ae.icontrue)&&void 0!==Ae&&Ae.path&&X(Te,{source:(0,tt.U)(null===(ke=T.test)||void 0===ke?void 0:ke.icontrue),iteration:0,nodeStatus:d,slideStatus:U},it):null!==(me=T.test)&&void 0!==me&&null!==(me=me.iconfalse)&&void 0!==me&&me.path&&X(Te,{source:(0,tt.U)(null===(Oe=T.test)||void 0===Oe?void 0:Oe.iconfalse),iteration:0,nodeStatus:d,slideStatus:U},it)}});break;case"fill":var Vt;null==T||null===(Vt=T.test)||void 0===Vt||null===(Vt=Vt.answer)||void 0===Vt||null===(Vt=Vt.fill)||void 0===Vt||Vt.forEach(ne=>{let{id:ae,value:Ae,iscorrect:ke}=ne;if(Ae){let be=yt.findNode(ae);var me,Oe,Te,je;ke?null!==(me=T.test)&&void 0!==me&&null!==(me=me.icontrue)&&void 0!==me&&me.path&&X(be,{source:(0,tt.U)(null===(Oe=T.test)||void 0===Oe?void 0:Oe.icontrue),iteration:0,nodeStatus:d,slideStatus:U},it):null!==(Te=T.test)&&void 0!==Te&&null!==(Te=Te.iconfalse)&&void 0!==Te&&Te.path&&X(be,{source:(0,tt.U)(null===(je=T.test)||void 0===je?void 0:je.iconfalse),iteration:0,nodeStatus:d,slideStatus:U},it)}});break;case"matching":var se;null==T||null===(se=T.test)||void 0===se||null===(se=se.answer)||void 0===se||null===(se=se.matching)||void 0===se||se.forEach(ne=>{let{id:ae,key:pe,value:Ae}=ne;if(Ae){let je=yt.findNode(ae);var ke,me,Oe,Te;pe==Ae?null!==(ke=T.test)&&void 0!==ke&&null!==(ke=ke.icontrue)&&void 0!==ke&&ke.path&&X(je,{source:(0,tt.U)(null===(me=T.test)||void 0===me?void 0:me.icontrue),iteration:0,nodeStatus:d,slideStatus:U},it):null!==(Oe=T.test)&&void 0!==Oe&&null!==(Oe=Oe.iconfalse)&&void 0!==Oe&&Oe.path&&X(je,{source:(0,tt.U)(null===(Te=T.test)||void 0===Te?void 0:Te.iconfalse),iteration:0,nodeStatus:d,slideStatus:U},it)}})}},Qt=(T,d,U,it)=>{var at,J,O,H,rt,wt,St,ot,ct;null!==(at=d.animate)&&void 0!==at&&at.value&&(0,k.a)(d,U.nodeStatus,U.slideStatus),null!==(J=d.interactive)&&void 0!==J&&J.show?(console.log(`node(${d.id}) | nodeStatus(${U.nodeStatus}) | slideStatus(${U.slideStatus}) | show`),((T,d,U,it)=>{var at,J,O;let H={total:0,counter:0},{triggershow:rt,triggerrun:wt,triggerhide:bt,action:St,audio:ct}=null!==(at=null===(J=T.interactive)||void 0===J?void 0:J.show)&&void 0!==at?at:{};if(console.log(`node(${T.id}) | nodeStatus(${d}) | slideStatus(${U}) | show`),rt){let{id:pt,ids:Ot,time:Ut,async:Xt}=rt;"asynctrue"==Xt?setTimeout(()=>{(0,D.GD)({id:pt,ids:Ot,nodeStatus:d,slideStatus:U})}):"time"==Xt&&setTimeout(()=>{(0,D.GD)({id:pt,ids:Ot,nodeStatus:d,slideStatus:U})},1e3*(null!=Ut?Ut:0))}if(wt){let{id:pt,ids:Ot,time:Ut,async:Xt}=wt;"asynctrue"==Xt?setTimeout(()=>{(0,D.MF)({id:pt,ids:Ot,nodeStatus:d,slideStatus:U})}):"time"==Xt&&setTimeout(()=>{(0,D.MF)({id:pt,ids:Ot,nodeStatus:d,slideStatus:U})},1e3*(null!=Ut?Ut:0))}if(bt){let{id:pt,ids:Ot,time:Ut,async:Xt}=bt;"asynctrue"==Xt?setTimeout(()=>{(0,D.vi)({id:pt,ids:Ot,nodeStatus:d,slideStatus:U})}):"time"==Xt&&setTimeout(()=>{(0,D.vi)({id:pt,ids:Ot,nodeStatus:d,slideStatus:U})},1e3*(null!=Ut?Ut:0))}let ot=()=>{setTimeout(()=>{if(H.counter>=H.total){if(it&&it(),rt){let{id:pt,ids:Ot,async:Ut}=rt;(!Ut||"asyncfalse"==Ut)&&(0,D.GD)({id:pt,ids:Ot,nodeStatus:d,slideStatus:U})}if(wt){let{id:pt,ids:Ot,async:Ut}=wt;(!Ut||"asyncfalse"==Ut)&&(0,D.MF)({id:pt,ids:Ot,nodeStatus:d,slideStatus:U})}if(bt){let{id:pt,ids:Ot,async:Ut}=bt;(!Ut||"asyncfalse"==Ut)&&(0,D.vi)({id:pt,ids:Ot,nodeStatus:d,slideStatus:U})}}})};if(null!=St&&St.value){H.total+=1;let pt=()=>{H.counter+=1,ot()};switch(null==St?void 0:St.value){case"hide":jQuery("#"+T.id).addClass("hide"),pt();break;case"points":{let{points:Ot,time:Ut,iteration:Xt,finish:Vt}=St;(0,b.c)(T.id,{node:T,points:Ot,time:Ut,iteration:Xt,finish:Vt,nodeStatus:d,slideStatus:U},pt);break}default:{let{value:Ot,time:Ut,iteration:Xt,finish:Vt}=St;(0,mt.h)(T.id,{node:T,value:Ot,time:Ut,iteration:Xt,finish:Vt,nodeStatus:d,slideStatus:U},pt);break}}}if(null!=ct&&null!==(O=ct.source)&&void 0!==O&&O.path){H.total+=1;let pt=()=>{H.counter+=1,ot()},Ot=(0,y.d)(T.id,ct,H,{nodeStatus:d,slideStatus:U},pt);-1==(null==ct?void 0:ct.iteration)&&jQuery("#"+T.id).click(Ut=>{Ut.preventDefault(),Ot&&(Ot.volume=Ot.volume>=1?0:Ot.volume+.25),console.log(null==Ot?void 0:Ot.volume)})}H.total||ot()})(d,U.nodeStatus,U.slideStatus,it)):it&&it(),null!==(O=d.interactive)&&void 0!==O&&O.click&&(ot=null===(St=d.interactive)||void 0===St?void 0:St.click,Object.keys(null!=ot?ot:{}).map(Ot=>ot[Ot]?1:0).includes(1)&&jQuery("#"+d.id).addClass("interactive-click"),jQuery("#"+d.id).click(ot=>{ot.preventDefault(),U.nodeStatus=yt.refreshNodeStatus(),console.log(`node(${d.id}) | nodeStatus(${U.nodeStatus}) | slideStatus(${U.slideStatus}) | click`),(0,j.J)(d,U.nodeStatus,U.slideStatus)})),null!==(H=d.variable)&&void 0!==H&&H.input&&jQuery("#"+d.id).on("change","input,textarea",ot=>{ot.preventDefault(),((T,d,U)=>{var it,at;S.L.variable.setValue(null!==(it=null===(at=d.variable)||void 0===at||null===(at=at.input)||void 0===at?void 0:at.variable)&&void 0!==it?it:"",T),(T=>{var d;let U=(it,at)=>{null==it||it.forEach(J=>{switch(J.type){case dt.h.GROUP:(0,N.v)(J.id,{},at?window.document.getElementById(at):null),U(J.nodes,J.id);break;case dt.h.POLYGON:break;case dt.h.TEXT:(0,f.L)(J.id,{size:J.size,attribute:J.attribute,source:J.source},at?window.document.getElementById(at):null)}})};U(null===(d=T.svg)||void 0===d?void 0:d.nodes)})(U)})(ot.target.value,d,T)}),null!==(rt=d.variable)&&void 0!==rt&&rt.click&&(null!==(ct=d.variable)&&void 0!==ct&&null!==(ct=ct.click)&&void 0!==ct&&ct.variable&&jQuery("#"+d.id).addClass("variable-click"),jQuery("#"+d.id).click(ot=>{ot.preventDefault(),((T,d)=>{var U;S.L.variable.setValueOperator(null===(U=T.variable)||void 0===U?void 0:U.click),(T=>{var d;let U=(it,at)=>{null==it||it.forEach(J=>{switch(J.type){case dt.h.GROUP:(0,N.v)(J.id,{},at?window.document.getElementById(at):null),U(J.nodes,J.id);break;case dt.h.POLYGON:break;case dt.h.TEXT:(0,f.L)(J.id,{size:J.size,attribute:J.attribute,source:J.source},at?window.document.getElementById(at):null)}})};U(null===(d=T.svg)||void 0===d?void 0:d.nodes)})(d)})(d,T)})),"test"==(null===(wt=d.source)||void 0===wt?void 0:wt.type)&&((T,d)=>{var U;let it=()=>{};switch(null===(U=T.source)||void 0===U||null===(U=U.test)||void 0===U?void 0:U.type){case"truefalse":{jQuery("#"+T.id).click(O=>{O.preventDefault(),((T,d,U,it,at)=>{var J,O;let H=null===(J=T.source)||void 0===J||null===(J=J.test)||void 0===J||null===(J=J.truefalse)||void 0===J?void 0:J.iscorrect;d.test?d.test.answer?d.test.answer.truefalse={value:T.id,iscorrect:H}:d.test.answer={truefalse:{value:T.id,iscorrect:H}}:d.test={answer:{truefalse:{value:T.id,iscorrect:H}}},null!==(O=d.svg)&&void 0!==O&&O.nodes.find(wt=>{var bt;return"submit"==(null===(bt=wt.source)||void 0===bt||null===(bt=bt.test)||void 0===bt?void 0:bt.type)})||At(T,d,U,it,{iscorrect:H},at);let rt=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(rt,d,T)})(T,d,yt.nodeStatus,yt.slideStatus,it)});let J=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(J,d,T);break}case"singlechoice":{jQuery("#"+T.id).click(O=>{O.preventDefault(),((T,d,U,it,at)=>{var J,O;let H=null===(J=T.source)||void 0===J||null===(J=J.test)||void 0===J||null===(J=J.singlechoice)||void 0===J?void 0:J.iscorrect;d.test?d.test.answer?d.test.answer.singlechoice={value:T.id,iscorrect:H}:d.test.answer={singlechoice:{value:T.id,iscorrect:H}}:d.test={answer:{singlechoice:{value:T.id,iscorrect:H}}},null!==(O=d.svg)&&void 0!==O&&O.nodes.find(wt=>{var bt;return"submit"==(null===(bt=wt.source)||void 0===bt||null===(bt=bt.test)||void 0===bt?void 0:bt.type)})||At(T,d,U,it,{iscorrect:H},at);let rt=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(rt,d,T)})(T,d,yt.nodeStatus,yt.slideStatus,it)});let J=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(J,d,T);break}case"multichoice":{jQuery("#"+T.id).click(O=>{O.preventDefault(),((T,d,U,it,at)=>{var J,O;let H=null===(J=T.source)||void 0===J||null===(J=J.test)||void 0===J||null===(J=J.multichoice)||void 0===J?void 0:J.iscorrect;d.test?d.test.answer?d.test.answer.multichoice?d.test.answer.multichoice.find(wt=>wt.value==T.id)?d.test.answer.multichoice=d.test.answer.multichoice.filter(wt=>wt.value!=T.id):d.test.answer.multichoice.push({value:T.id,iscorrect:H}):d.test.answer.multichoice=[{value:T.id,iscorrect:H}]:d.test.answer={multichoice:[{value:T.id,iscorrect:H}]}:d.test={answer:{multichoice:[{value:T.id,iscorrect:H}]}},null!==(O=d.svg)&&void 0!==O&&O.nodes.find(wt=>{var bt;return"submit"==(null===(bt=wt.source)||void 0===bt||null===(bt=bt.test)||void 0===bt?void 0:bt.type)})||At(T,d,U,it,{iscorrect:H},at);let rt=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(rt,d,T)})(T,d,yt.nodeStatus,yt.slideStatus,it)});let J=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(J,d,T);break}case"fill":{var at;jQuery("#"+T.id).on("keyup",'input[type="text"]',O=>{var H;let rt=jQuery("<div/>").css({"font-size":jQuery(O.target).css("font-size"),visibility:"hidden",float:"left"}).text(O.target.value).appendTo(window.document.body);jQuery(O.target).css({width:(null!==(H=rt.width())&&void 0!==H?H:0)+30})}).on("keypress",'input[type="text"]',O=>{13===(O.keyCode||O.charCode||O.which)&&(O.preventDefault(),O.stopPropagation(),jQuery(O.target).blur())}).on("change",'input[type="text"]',O=>{var H,rt;let wt=null===(H=O.target)||void 0===H?void 0:H.getAttribute("data-key"),bt=null===(rt=O.target)||void 0===rt||null===(rt=rt.value)||void 0===rt?void 0:rt.trim();jQuery("#"+T.id).find(`input[type="text"][data-key="${wt}"]`).val(bt),((T,d,U,it,at,J)=>{var O,H,rt,wt;let{value:bt}=null!==(O=null===(H=T.source)||void 0===H||null===(H=H.test)||void 0===H||null===(H=H.fill)||void 0===H?void 0:H.find(ot=>ot.key==`[[${at.key}]]`))&&void 0!==O?O:{},St=bt&&bt.map(ot=>null==ot?void 0:ot.toLocaleLowerCase()).includes(null===(rt=at.value)||void 0===rt?void 0:rt.toLocaleLowerCase());at.iscorrect=St,d.test?d.test.answer?d.test.answer.fill?d.test.answer.fill.find(ot=>ot.key==at.key)?d.test.answer.fill.filter(ot=>ot.key==at.key).forEach(ot=>{ot.value=at.value,ot.iscorrect=at.iscorrect}):d.test.answer.fill.push(at):d.test.answer.fill=[at]:d.test.answer={fill:[at]}:d.test={answer:{fill:[at]}};let ct=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(ct,d,T),null!==(wt=d.svg)&&void 0!==wt&&wt.nodes.find(ot=>{var pt;return"submit"==(null===(pt=ot.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)})||At(T,d,U,it,{iscorrect:St},J)})(T,d,yt.nodeStatus,yt.slideStatus,{id:T.id,key:wt,value:bt},it)}),null!==(at=d.test)&&void 0!==at&&at.showselection||jQuery("#"+T.id).addClass("hide-selection");let J=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(J,d,T);break}case"matching-empty":{jQuery("#"+T.id).on("touchmove",".ondrag-item",function(O){O.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(O){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${T.size.height/T.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${O.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(O){var H;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(H=d.test)&&void 0!==H&&H.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),jt(T,d)},drag:function(O){},dragend:function(O){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${T.id} .ondrop-here`).kendoDropTarget({dragenter:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.addClass("focused")},dragleave:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.removeClass("focused")},drop:function(O){if(!O.dropTarget.hasClass("actived"))return;O.dropTarget.removeClass("focused");let H=O.dropTarget,rt=O.draggable.currentTarget;H.is(":empty")||H.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),rt.appendTo(H);let wt=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(wt,d,T),((T,d,U,it,at,J)=>{var O,H,rt;let{key:wt}=null!==(O=null===(H=T.source)||void 0===H||null===(H=H.test)||void 0===H?void 0:H.matching)&&void 0!==O?O:{key:"KIEN"},bt=at.key==wt;jt(T,d);let St={id:T.id,key:null!=wt?wt:"",value:at.key};d.test?d.test.answer?d.test.answer.matching?d.test.answer.matching.find(ct=>ct.id==St.id)?d.test.answer.matching.filter(ct=>ct.id==St.id).forEach(ct=>{ct.key=St.key,ct.value=St.value}):d.test.answer.matching.push(St):d.test.answer.matching=[St]:d.test.answer={matching:[St]}:d.test={answer:{matching:[St]}},null!==(rt=d.svg)&&void 0!==rt&&rt.nodes.find(ct=>{var ot;return"submit"==(null===(ot=ct.source)||void 0===ot||null===(ot=ot.test)||void 0===ot?void 0:ot.type)})||At(T,d,U,it,{iscorrect:bt},J)})(T,d,yt.nodeStatus,yt.slideStatus,{key:rt.data("key")},it)}});let J=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(J,d,T);break}case"matching-content":{jQuery("#"+T.id).on("touchmove",".ondrag-item",function(O){O.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(O){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${T.size.height/T.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${O.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(O){var H;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(H=d.test)&&void 0!==H&&H.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(O){},dragend:function(O){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${T.id} .ondrop-here`).kendoDropTarget({dragenter:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.addClass("focused")},dragleave:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.removeClass("focused")},drop:function(O){if(!O.dropTarget.hasClass("actived"))return;O.dropTarget.removeClass("focused");let H=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(H,d,T),O.draggable.currentTarget.appendTo(O.dropTarget),Lt(d,yt.nodeStatus,yt.slideStatus,it)}});let J=(0,q.RY)(L.F.TEST_GROUP,"g",void 0,S.L.target);(0,q.kE)(J,d,T);break}case"speech":break;case"submit":jQuery("#"+T.id).click(J=>{J.preventDefault(),((T,d,U,it,at)=>{var J,O,H,rt,wt;let bt;var St;if(null!=d&&null!==(J=d.test)&&void 0!==J&&null!==(J=J.answer)&&void 0!==J&&J.truefalse)bt=null==d||null===(St=d.test)||void 0===St||null===(St=St.answer)||void 0===St||null===(St=St.truefalse)||void 0===St?void 0:St.iscorrect;else if(null!=d&&null!==(O=d.test)&&void 0!==O&&null!==(O=O.answer)&&void 0!==O&&O.singlechoice){var ct;bt=null==d||null===(ct=d.test)||void 0===ct||null===(ct=ct.answer)||void 0===ct||null===(ct=ct.singlechoice)||void 0===ct?void 0:ct.iscorrect}else if(null!=d&&null!==(H=d.test)&&void 0!==H&&null!==(H=H.answer)&&void 0!==H&&H.multichoice){var ot,pt,Ot;bt=1==[null==d||null===(ot=d.test)||void 0===ot||null===(ot=ot.answer)||void 0===ot||null===(ot=ot.multichoice)||void 0===ot?void 0:ot.length,null==d||null===(pt=d.test)||void 0===pt||null===(pt=pt.answer)||void 0===pt||null===(pt=pt.multichoice)||void 0===pt||null===(pt=pt.map(ne=>ne.iscorrect?1:0))||void 0===pt?void 0:pt.reduce((ne,ae)=>ne+ae),null==d||null===(Ot=d.svg)||void 0===Ot||null===(Ot=Ot.nodes)||void 0===Ot||null===(Ot=Ot.filter(ne=>{var ae,pe;return"multichoice"==(null===(ae=ne.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)&&(null===(pe=ne.source)||void 0===pe||null===(pe=pe.test)||void 0===pe||null===(pe=pe.multichoice)||void 0===pe?void 0:pe.iscorrect)}))||void 0===Ot?void 0:Ot.length].filter((ne,ae,pe)=>pe.indexOf(ne)==ae).length}else if(null!=d&&null!==(rt=d.test)&&void 0!==rt&&null!==(rt=rt.answer)&&void 0!==rt&&rt.fill){var Ut,Xt;bt=(null==d||null===(Ut=d.test)||void 0===Ut||null===(Ut=Ut.answer)||void 0===Ut||null===(Ut=Ut.fill)||void 0===Ut||null===(Ut=Ut.map(ne=>ne.iscorrect?1:0))||void 0===Ut?void 0:Ut.reduce((ne,ae)=>ne+ae))==(null===(Xt=d.svg)||void 0===Xt||null===(Xt=Xt.nodes)||void 0===Xt||null===(Xt=Xt.filter(ne=>{var ae;return"fill"==(null===(ae=ne.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===Xt?void 0:Xt.length)}else if(null!=d&&null!==(wt=d.test)&&void 0!==wt&&null!==(wt=wt.answer)&&void 0!==wt&&wt.matching){var Vt,se;bt=(null===(Vt=d.svg)||void 0===Vt||null===(Vt=Vt.nodes)||void 0===Vt||null===(Vt=Vt.filter(ne=>{var ae;return"matching-empty"==(null===(ae=ne.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===Vt?void 0:Vt.length)==((null==d||null===(se=d.test)||void 0===se||null===(se=se.answer)||void 0===se?void 0:se.matching)||[]).map(ne=>ne.key==ne.value?1:0).reduce((ne,ae)=>ne+ae)}At(T,d,U,it,{iscorrect:bt},at)})(T,d,yt.nodeStatus,yt.slideStatus,it)})}})(d,T)};var _=m(1281),F=m(6153),u=m(3069),nt=m(7945),kt=m(3477),It=m(745),Ht=m(6407);const Kt=(T,d,U)=>{if(U.slideStatus!=yt.slideStatus||!d.length)return;let it=d.shift(),at=T.filter(rt=>{var wt;return(null!==(wt=rt.idx)&&void 0!==wt?wt:0)==it});if(!at.length)return;let J=Math.max.apply(null,at.map(rt=>{var wt;return null!==(wt=rt.time)&&void 0!==wt?wt:0})),O=!1,H=J<.5?0:setTimeout(()=>{O||(O=!0,Kt(T,d,U))},1e3*J);Bt(T,d,at,0,U,{idx:it,total:at.length,counter:0,isRecursive:O,timeoutRecursive:H,maxTimeCoundown:J,uid:Math.floor(1e9*Math.random())})},Bt=(T,d,U,it,at,J)=>{if(at.slideStatus!=yt.slideStatus)return;let O=U[it];if(O){switch(O.type){case dt.h.GROUP:break;case dt.h.CIRCLE:(0,_.K)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case dt.h.ELLIPSE:(0,F.W)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case dt.h.LINE:(0,u.q)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case dt.h.RECT:(0,nt.a)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case dt.h.POLYGON:(0,kt.u)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case dt.h.FOREIGNOBJECT:(0,It.$)(O.id,{size:O.size,attribute:O.attribute,style:O.style,source:O.source},O.pid?window.document.getElementById(O.pid):null);break;case dt.h.IMAGE:(0,h.B)(O.id,{size:O.size,attribute:O.attribute,source:O.source},O.pid?window.document.getElementById(O.pid):null);break;case dt.h.TEXT:(0,f.L)(O.id,{size:O.size,attribute:O.attribute,source:O.source},O.pid?window.document.getElementById(O.pid):null);break;case dt.h.PATH:(0,Ht.X)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null)}Qt(at.slide,O,at,()=>{J.counter+=1,J.maxTimeCoundown<.5&&J.counter>=J.total&&(J.total=J.counter=0,J.isRecursive||(clearTimeout(J.timeoutRecursive),J.isRecursive=!0,setTimeout(()=>{Kt(T,d,at)},250)))}),Bt(T,d,U,++it,at,J)}},yt=new class ie{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(d){this._dataSource=d.data||{},S.L.variable.set=d.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var d,U;return null!==(d=null===(U=this._dataSource)||void 0===U||null===(U=U.slides)||void 0===U?void 0:U.length)&&void 0!==d?d:0}get slides(){var d;return(null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[]}get slide(){var d;return((null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[])[this._slideIdx]||{}}findNode(d){var U;let it=null===(U=this._dataSource)||void 0===U||null===(U=U.slides)||void 0===U?void 0:U.find((ct,ot)=>ot==this._slideIdx),at=null==it?void 0:it.svg,J=(ct,ot)=>{let pt=null==ct?void 0:ct.find(Xt=>Xt.id==d);if(pt)return pt.pid=ot,pt;let Ot=0,Ut=ct.length||0;for(;Ot<Ut&&!pt&&(pt=J(ct[Ot].nodes||[],ct[Ot].id),!pt);)Ot++;return pt},O=J((null==at?void 0:at.nodes)||[]);var H,rt,wt,bt,St;return O?(O.style=null!==(H=O.style)&&void 0!==H?H:{},O.source=null!==(rt=O.source)&&void 0!==rt?rt:{},O.animate=null!==(wt=O.animate)&&void 0!==wt?wt:{},O.interactive=null!==(bt=O.interactive)&&void 0!==bt?bt:{},O.variable=null!==(St=O.variable)&&void 0!==St?St:{},O):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(d,U,it){var at;let J;var O,H;if(this.refreshNodeStatus(),this.refreshSlideStatus(),it)J=null===(O=this._dataSource)||void 0===O||null===(O=O.slides)||void 0===O?void 0:O.find(St=>St.code==it||St.id==it),J&&(this._slideIdx=(null===(H=this._dataSource)||void 0===H||null===(H=H.slides)||void 0===H?void 0:H.indexOf(J))||0);else if(U){var rt,wt;J=null===(rt=this._dataSource)||void 0===rt||null===(rt=rt.slides)||void 0===rt?void 0:rt.find(St=>St.id==U),J&&(this._slideIdx=(null===(wt=this._dataSource)||void 0===wt||null===(wt=wt.slides)||void 0===wt?void 0:wt.indexOf(J))||0)}else this._slideIdx=Math.min(Math.max(d||0,0),this.slideTotal-1),J=this.slide;if(J){var bt;Ct(S.L.container,S.L.svg,J,!0),null===(bt=jQuery(S.L.svg).find("#"+L.F.BACKGROUND_GROUP))||void 0===bt||bt.empty();let St=(0,q.RY)(L.F.BACKGROUND_GROUP,"g",void 0,S.L.svg);(0,q.I6)(St,J),(T=>{var d,U,it,at;let J=yt.nodeStatus,O=yt.slideStatus;null===(d=T.svg)||void 0===d||d.nodes.forEach(rt=>{rt.pid=Math.ceil(1e9*Math.random()),(0,N.v)(rt.pid)});let H=null===(U=T.svg)||void 0===U||null===(U=U.nodes)||void 0===U?void 0:U.map(rt=>{var wt;return null!==(wt=rt.idx)&&void 0!==wt?wt:0}).filter((rt,wt,bt)=>bt.indexOf(rt)==wt).sort((rt,wt)=>(null!=rt?rt:0)-(null!=wt?wt:0));Kt(null!==(it=null===(at=T.svg)||void 0===at?void 0:at.nodes)&&void 0!==it?it:[],null!=H?H:[],{slide:T,nodeStatus:J,slideStatus:O})})(J)}this.changeSlide(this.slides,null===(at=this.slide)||void 0===at?void 0:at.id,this.slideIdx,this.slides.length,J)}set onChangeSlide(d){this._fnChangeSlides.push(d)}changeSlide(d,U,it,at,J){this._fnChangeSlides.forEach(O=>O(d,U,it,at,J))}},Ct=(T,d,U,it)=>{var at,J,O,H;let rt=window.document.querySelector(d);var wt;rt||(rt=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(wt=window.document.querySelector(T))||void 0===wt||wt.appendChild(rt)),it&&(rt.textContent=null);let{x:bt,y:St,width:ct,height:ot}=null!==(at=null==U||null===(J=U.svg)||void 0===J?void 0:J.viewBox)&&void 0!==at?at:S.L.screen.frameSize;rt.setAttributeNS(null,"viewBox",bt+" "+St+" "+ct+" "+ot),rt.setAttribute("id",d.replace("#",""));var Vt,se,pt=null!==(O=jQuery(T).width())&&void 0!==O?O:1080,Ot=null!==(H=jQuery(T).height())&&void 0!==H?H:1080,Xt=ct/ot;Xt>=pt/Ot?se=(Vt=pt)/Xt:Vt=(se=Ot)*Xt,rt.setAttributeNS(null,"width",Vt.toString()),rt.setAttributeNS(null,"height",se.toString())}},7050:(he,Nt,m)=>{m.d(Nt,{M:()=>dt,a:()=>S});var L=m(5619);const S=(mt,b,y)=>{var D;let{value:f}=null!==(D=mt.animate)&&void 0!==D?D:{};dt(mt.id,{node:mt,value:f,nodeStatus:b,slideStatus:y},()=>{})},dt=(mt,b,y)=>{var D;if(!b.value)return void y();let R=jQuery("#"+mt).parents("g");if(!R.length)return void y();let{size:f}=b.node;R.css("transform-origin",`${f.x+f.width/2}px ${f.y+f.height/2}px`);let N="",M=null!==(D=b.iteration)&&void 0!==D?D:0,I=[];(b.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?I.push(b.value):b.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(b.value)?(I.push("animation"),I.push(`animation-${b.value}`)):(I.push("animate__animated"),I.push(`animate__${b.value}`)):(I.push("animation"),I.push("animation-fadein")),M<0?(I.push("animation-iteration-infinite"),y(),y=function(){}):M>0&&I.push("animation-iteration-"+(M+1)),N=I.join(" "),function(x){let k=function(){R.data("animate-running")?R.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){R.data("animate-running",!1),setTimeout(function(){x()},100)}):x()};R.hasClass("animation")?setTimeout(function(){k()}):k()}(function(){var x;j(mt),(M>0||M<0)&&R.one("animationiteration",function(){b.slideStatus===L.J.slideStatus||(R.data("animate-running",!1),j(mt),b.slideStatus===L.J.slideStatus&&y())}),R.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(R.data("animate-running",!1),j(mt),b.finish){default:case 0:case 1:break;case 2:var k;dt(mt,{node:b.node,value:null===(k=b.node.animate)||void 0===k?void 0:k.out,nodeStatus:b.nodeStatus,slideStatus:b.slideStatus},()=>{R.addClass("hide")})}b.slideStatus===L.J.slideStatus&&y()}),R.attr("data-class",null!==(x=R.attr("class"))&&void 0!==x?x:""),R.addClass(N),R.data("animate-running",!0)})},j=function(mt){var b,y,D=jQuery("#"+mt).parents("g"),R=null===(b=D.attr("class"))||void 0===b?void 0:b.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),f=null===(y=D.attr("class"))||void 0===y?void 0:y.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);R&&R.forEach(function(M){jQuery(D).removeClass(M)}),f&&f.forEach(function(M){jQuery(D).removeClass(M)});let N=D.attr("data-class");N&&(D.attr("class",N),D.removeAttr("data-class")),jQuery(D).data("animation-running",!1)}},8946:(he,Nt,m)=>{m.d(Nt,{h:()=>dt});var L=m(5619),S=m(7050);const dt=(mt,b,y)=>{var D;if(!b.value)return void y();let R=jQuery("#"+mt).parents("g");if(!R.length)return void y();let{size:f}=b.node;R.css("transform-origin",`${f.x+f.width/2}px ${f.y+f.height/2}px`);let N="",M=null!==(D=b.iteration)&&void 0!==D?D:0,I=[];(b.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?I.push(b.value):(I.push("animation"),I.push(b.value?"animation-"+b.value:"animation-fadein")),M<0?(I.push("animation-iteration-infinite"),y(),y=function(){}):M>0&&I.push("animation-iteration-"+(M+1)),N=I.join(" "),function(x){let k=function(){R.data("animate-running")?R.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){R.data("animate-running",!1),setTimeout(function(){x()},100)}):x()};R.hasClass("animation")?setTimeout(function(){k()}):k()}(function(){var x;j(mt),(M>0||M<0)&&R.one("animationiteration",function(){b.slideStatus===L.J.slideStatus||(R.data("animate-running",!1),j(mt),b.slideStatus===L.J.slideStatus&&y())}),R.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(R.data("animate-running",!1),j(mt),b.finish){default:case 0:case 1:break;case 2:var k;(0,S.M)(mt,{node:b.node,value:null===(k=b.node.animate)||void 0===k?void 0:k.out,nodeStatus:b.nodeStatus,slideStatus:b.slideStatus},()=>{R.addClass("hide")})}b.slideStatus===L.J.slideStatus&&y()}),R.attr("data-class",null!==(x=R.attr("class"))&&void 0!==x?x:""),R.addClass(N),R.data("animate-running",!0)})},j=function(mt){var b,y=jQuery("#"+mt).parents("g"),D=null===(b=y.attr("class"))||void 0===b?void 0:b.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);D&&D.forEach(function(f){jQuery(y).removeClass(f)});let R=y.attr("data-class");R&&(y.attr("class",R),y.removeAttr("data-class")),jQuery(y).data("animation-running",!1)}},7657:(he,Nt,m)=>{m.d(Nt,{c:()=>mt});var L=m(9506),S=m(5619),dt=m(5970),j=m(7050);const mt=(y,D,R)=>{var f;if(!D.points||!D.points.length)return void R();let N=jQuery("#"+y),I=function b(y){let D=[];2===y.length&&y.splice(1,0,[(y[0][0]+y[1][0])/2,(y[0][1]+y[1][1])/2]);let I,et,x,R=1,f=y.length;for(;R<f;){if(I=y[R-1],et=y[R],x=y[R+1],(Math.abs(I[0]-et[0])>=15||Math.abs(I[1]-et[1])>=15)&&Math.pow(I[0]-et[0],2)+Math.pow(I[1]-et[1],2)>=Math.pow(15,2)&&x&&(Math.abs(I[0]-x[0])<=20||Math.abs(I[1]-x[1])<=20)&&Math.pow(I[0]-x[0],2)+Math.pow(I[1]-x[1],2)<=Math.pow(20,2))D.push(et);else{let h=et[0]-I[0],B=et[1]-I[1],P=Math.max(Math.abs(h),Math.abs(B));for(var k=0;k<P;k+=15)D.push([I[0]+h*k/P,I[1]+B*k/P])}R++}return f>0&&(D.splice(0,0,y[0]),D.push(y[f-1])),D}((Z=>{if(1==Z.length){let{size:lt}=D.node;return[[lt.x+lt.width/2,lt.y+lt.height/2],...Z]}return[...Z]})(D.points||[])),et=null!==(f=D.iteration)&&void 0!==f?f:0;if(et<0&&(R(),R=function(){}),N.data("work-running")&&et<0)return;N.data("work-running",!0);let q,x=I.length,k=Math.max(20,1e3*(D.time||3)/x),{id:h,type:B,size:P,attribute:V}=S.J.findNode(y),X=function(Z){if(D.slideStatus!==S.J.slideStatus)return N.data("work-running",!1),void(D.slideStatus===S.J.slideStatus&&R());if(Z<x){let tt=I[Z];tt&&(q=Object.assign({},P,{x:tt[0]-P.width/2,y:tt[1]-P.height/2}),Object.assign(V,(0,L.xW)(B,q,V)),(0,dt.tD)(window.document.getElementById(h),V),setTimeout(function(){X(++Z)},k))}else if(et>0)et--,X(1);else if(et<0)X(1);else switch(N.data("work-running",!1),D.slideStatus===S.J.slideStatus&&R(),D.finish){default:case 0:break;case 1:Object.assign(V,(0,L.xW)(B,P,V)),(0,dt.tD)(window.document.getElementById(h),V);break;case 2:var lt;(0,j.M)(D.node.id,{node:D.node,value:null===(lt=D.node.animate)||void 0===lt?void 0:lt.out,nodeStatus:D.nodeStatus,slideStatus:D.slideStatus},()=>{N.addClass("hide")})}};X(1)}},6769:(he,Nt,m)=>{m.d(Nt,{d:()=>dt});var L=m(7102),S=m(5619);const dt=(mt,b,y,D,R)=>{var f,N,M,I,et,x,k;if(D.slideStatus!=S.J.slideStatus)return b.async&&"change-slide"!=b.async?void 0:void R();if(D.nodeStatus!=S.J.nodeStatus&&(!b.async||"change-node"==b.async))return void R();if(!(null!==(f=b.source)&&void 0!==f&&f.path||null!==(N=b.source)&&void 0!==N&&N.url))return console.warn(`${mt} -> audio no source!`),R(),void(R=()=>{});var h=jQuery("#"+mt);let B=null!==(M=b.iteration)&&void 0!==M?M:0;if(B<0&&(R(),R=function(){}),!(h.data("audio-running")&&B<0)){h.data("audio-running",!0);var P=function(q){q.pause(),q.remove(),h.data("audio-running",!1)},V=new Audio;return V.autoplay=!0,V.loop=0!=B,V.preload="auto",V.controls=!0,V.setAttributeNode(document.createAttribute("playsinline")),V.addEventListener("canplay",function(){var q=V.play();q&&q.then(function(X){var Z;h.data("audio-running",!0),"time"==b.async?setTimeout(()=>{P(V),R(),R=()=>{}},1e3*(null!==(Z=b.time)&&void 0!==Z?Z:1)):"non-stop"==b.async&&(R(),R=()=>{})}).catch(function(X){h.data("audio-running",!1),D.slideStatus===S.J.slideStatus&&(R(),R=()=>{})})}),V.addEventListener("timeupdate",function(){switch(b.async){case"time":case"non-stop":break;case"finish-action":y.total>=2&&y.total-y.counter==1&&(P(this),R(),R=()=>{});break;default:case"change-node":D.nodeStatus!==S.J.nodeStatus&&(P(this),R(),R=()=>{});break;case"change-slide":D.slideStatus!==S.J.slideStatus&&(P(this),R(),R=()=>{})}}),V.addEventListener("canplaythrough",function(){this.loop&&(B>0?B--:0==B&&(this.loop=!1))}),V.addEventListener("play",function(){}),V.addEventListener("pause",function(){}),V.addEventListener("ended",function(){this.remove(),h.data("audio-running",!1),D.slideStatus===S.J.slideStatus&&(R(),R=()=>{})}),V.onerror=function(){this.remove(),h.data("audio-running",!1),D.slideStatus===S.J.slideStatus&&(R(),R=()=>{})},V.src=(null!==(I=b.source)&&void 0!==I&&I.path?(null===(et=L.L.config)||void 0===et?void 0:et.readfileuploadurl)+(null===(x=b.source)||void 0===x?void 0:x.path):null===(k=b.source)||void 0===k?void 0:k.url)||"",V}}},334:(he,Nt,m)=>{m.d(Nt,{J:()=>R});var L=m(7102),S=m(5619),dt=m(8946),j=m(7657),mt=m(6769),b=m(3591),y=m(2241),D=m(7050);const R=(f,N,M,I)=>{var et,x,k;let h={total:0,counter:0},{triggershow:B,triggerrun:P,triggerhide:V,action:q,audio:X,slide:Z,media:lt}=null!==(et=null===(x=f.interactive)||void 0===x?void 0:x.click)&&void 0!==et?et:{};if(console.log(`node(${f.id}) | nodeStatus(${N}) | slideStatus(${M}) | click`),B){let{id:Dt,ids:ht,time:xt,async:jt}=B;"asynctrue"==jt?(0,b.GD)({id:Dt,ids:ht,nodeStatus:N,slideStatus:M}):"time"==jt&&setTimeout(()=>{(0,b.GD)({id:Dt,ids:ht,nodeStatus:N,slideStatus:M})},1e3*(null!=xt?xt:0))}if(P){let{id:Dt,ids:ht,time:xt,async:jt}=P;"asynctrue"==jt?(0,b.MF)({id:Dt,ids:ht,nodeStatus:N,slideStatus:M}):"time"==jt&&setTimeout(()=>{(0,b.MF)({id:Dt,ids:ht,nodeStatus:N,slideStatus:M})},1e3*(null!=xt?xt:0))}if(V){let{id:Dt,ids:ht,time:xt,async:jt}=V;"asynctrue"==jt?(0,b.vi)({id:Dt,ids:ht,nodeStatus:N,slideStatus:M}):"time"==jt&&setTimeout(()=>{(0,b.vi)({id:Dt,ids:ht,nodeStatus:N,slideStatus:M})},1e3*(null!=xt?xt:0))}let tt=()=>{setTimeout(()=>{if(h.counter>=h.total){if(I&&I(),B){let{id:Dt,ids:ht,async:xt}=B;(!xt||"asyncfalse"==xt)&&(0,b.GD)({id:Dt,ids:ht,nodeStatus:N,slideStatus:M})}if(P){let{id:Dt,ids:ht,async:xt}=P;(!xt||"asyncfalse"==xt)&&(0,b.MF)({id:Dt,ids:ht,nodeStatus:N,slideStatus:M})}if(V){let{id:Dt,ids:ht,async:xt}=V;(!xt||"asyncfalse"==xt)&&(0,b.vi)({id:Dt,ids:ht,nodeStatus:N,slideStatus:M})}}})};if(null!=q&&q.value){h.total+=1;let Dt=()=>{h.counter+=1,tt()};switch(null==q?void 0:q.value){case"hide":var Jt;(0,D.M)(f.id,{node:f,value:null===(Jt=f.animate)||void 0===Jt?void 0:Jt.out,nodeStatus:N,slideStatus:M},()=>{jQuery("#"+f.id).addClass("hide"),Dt()});break;case"points":{let{points:ht,time:xt,iteration:jt,finish:Y}=q;ht&&(0,j.c)(f.id,{node:f,points:ht,time:xt,iteration:jt,finish:Y,nodeStatus:N,slideStatus:M},Dt);break}default:{let{value:ht,time:xt,iteration:jt,finish:Y}=q;(0,dt.h)(f.id,{node:f,value:ht,time:xt,iteration:jt,finish:Y,nodeStatus:N,slideStatus:M},Dt);break}}}if(null!=X&&null!==(k=X.source)&&void 0!==k&&k.path){h.total+=1;let Dt=()=>{h.counter+=1,tt()};(0,mt.d)(f.id,X,h,{nodeStatus:N,slideStatus:M},Dt)}if(h.total||tt(),null!=Z&&Z.id)switch(Z.id){case-1:S.J.runSlide(S.J.slideIdx-1);break;case-2:S.J.runSlide(S.J.slideIdx+1);break;default:var qt;S.J.runSlide(void 0,Z.id,null===(qt=Z.code)||void 0===qt?void 0:qt.toString())}if(null!=lt&&lt.type){var Mt;let ht=`<div class="popup-media-viewer"><iframe src="${(0,y._)({readfileuploadurl:null===(Mt=L.L.config)||void 0===Mt?void 0:Mt.readfileuploadurl,type:null==lt?void 0:lt.type,oss:null==lt?void 0:lt.oss,path:null==lt?void 0:lt.path,url:null==lt?void 0:lt.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,xt=jQuery(ht).appendTo(window.document.body);xt.find(".btn-close").click(function(jt){jt.preventDefault(),xt.remove()})}}},3591:(he,Nt,m)=>{m.d(Nt,{GD:()=>j,MF:()=>mt,vi:()=>b});var L=m(5619),S=m(334),dt=m(7050);const j=y=>{y.id?jQuery("#"+y.id).removeClass("hide"):y.ids&&y.ids.forEach(D=>{jQuery("#"+D).removeClass("hide")})},mt=y=>{y.id?(jQuery("#"+y.id).removeClass("hide"),(0,S.J)(L.J.findNode(y.id),y.nodeStatus,y.slideStatus)):y.ids&&y.ids.forEach(D=>{jQuery("#"+D).removeClass("hide"),(0,S.J)(L.J.findNode(D),y.nodeStatus,y.slideStatus)})},b=y=>{if(y.id){var D;let R=L.J.findNode(y.id);(0,dt.M)(y.id,{node:R,value:null===(D=R.animate)||void 0===D?void 0:D.out,nodeStatus:y.nodeStatus,slideStatus:y.slideStatus},()=>{jQuery("#"+y.id).addClass("hide")})}else y.ids&&y.ids.forEach(R=>{var f;let N=L.J.findNode(R);(0,dt.M)(R,{node:N,value:null===(f=N.animate)||void 0===f?void 0:f.out,nodeStatus:y.nodeStatus,slideStatus:y.slideStatus},()=>{jQuery("#"+R).addClass("hide")})})}},5970:(he,Nt,m)=>{m.d(Nt,{cR:()=>P,rN:()=>X,t8:()=>V,fn:()=>Z,RY:()=>Mt,tD:()=>lt,KG:()=>Jt,c_:()=>tt,s6:()=>q,I6:()=>Lt,in:()=>Dt,IA:()=>At,KP:()=>Y,AE:()=>ht,xJ:()=>jt,Mo:()=>xt,kE:()=>Qt});var L=m(1999),S=m(7873),dt=m(6315),mt=/^#?[a-fA-F0-9]+$/;const D=(_,F)=>{var u;if("none"==(_=null!==(u=_)&&void 0!==u?u:""))return"none";if("transparent"==_)return"rgba(0,0,0,0)";if(_.includes("rgba("))return _;if(_.includes("rgb(")&&(_=(0,dt.w)(_)),!(_=_.replace(/[^0-9a-fA-F]/g,"")))return"";if(!mt.test(_))return console.error(`hex2rgba -> ${_}: first argument has invalid hexadecimal characters`),"";if("#"===_[0]&&(_=_.slice(1)),3===_.length){let kt=_.split("");kt.splice(2,0,_[2]),kt.splice(1,0,_[1]),kt.splice(0,0,_[0]),_=kt.join("")}if(6!==_.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var nt=[parseInt(_.slice(0,2),16),parseInt(_.slice(2,4),16),parseInt(_.slice(4,6),16)];return F="number"==typeof F?F:parseFloat(F),nt.push(F>=0&&F<=1?F:1),"rgba("+nt.join(",")+")"};var R=m(2241),f=m(8779),N=m(7102),M=m(9841),I=m(7945),et=m(9173),x=m(1281),k=m(5619),h=m(745),B=m(6847);class P{constructor(F,u){let nt=window.document.querySelector(u);var kt;nt||(nt=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(kt=window.document.querySelector(F))||void 0===kt||kt.appendChild(nt));let{svgViewBox:It,svgSize:Ht}=N.L.screen.init();nt.setAttributeNS(null,"viewBox",`${It.x} ${It.y} ${It.width} ${It.height}`),nt.setAttribute("id",u.replace("#","")),nt.style.display="block",nt.style.width=`${Ht.width}px`,nt.style.height=`${Ht.height}px`,nt.style.backgroundColor="#fafafa",nt.style.cursor="default"}}const V=_=>{jQuery(N.L.target).find("#"+S.F.BACKGROUND_GROUP).empty();let F=Mt(S.F.BACKGROUND_GROUP,"g",void 0,N.L.target);Lt(F,_),(()=>{let u=window.document.getElementById(null==_?void 0:_.id);jQuery(u).find("#"+S.F.BACKGROUND_GROUP).empty();let nt=Mt(S.F.BACKGROUND_GROUP,"g",void 0,u);Lt(nt,_)})()},q=()=>{let _=N.L.screen.svgViewBox,F=N.L.screen.svgSize;N.L.target&&(N.L.target.setAttributeNS(null,"viewBox",`${_.x} ${_.y} ${_.width} ${_.height}`),N.L.target.style.left=`${F.x}px`,N.L.target.style.top=`${F.y}px`,N.L.target.style.width=`${F.width}px`,N.L.target.style.height=`${F.height}px`)},X=()=>{jQuery(N.L.target).find(">*:not(defs)").remove()},Z=(_,F,u,nt,kt)=>{let It;return _?(It=jQuery(kt||N.L.target).find("#"+_).get(0),It||(It=window.document.createElementNS("http://www.w3.org/2000/svg",u),It.setAttribute("id",_),F==L.h.FOREIGNOBJECT&&It.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(It).appendTo(kt||N.L.target))):(It=window.document.createElementNS("http://www.w3.org/2000/svg",u),jQuery(It).appendTo(kt||N.L.target)),null!=nt&&nt.attribute&&lt(It,null==nt?void 0:nt.attribute),null!=nt&&nt.style&&tt(It,null==nt?void 0:nt.style),null!=nt&&nt.source&&Jt(It,F,null==nt?void 0:nt.source),It},lt=(_,F)=>{return jQuery(_).attr((u=Object.assign({},F||{}),null===(nt=Object.keys(u))||void 0===nt||nt.forEach(Ht=>{switch(Ht){case"fill":break;case"fillRule":var Ft;Object.assign(u,{"fill-rule":null!==(Ft=u.fillRule)&&void 0!==Ft?Ft:null,fillRule:null});break;case"stroke":var Kt;Object.assign(u,{"stroke-width":null!==(Kt=u.strokeWidth)&&void 0!==Kt?Kt:null,strokeWidth:null});break;case"strokeLinecap":var Bt;Object.assign(u,{"stroke-linecap":null!==(Bt=u.strokeLinecap)&&void 0!==Bt?Bt:null,strokeLinecap:null});break;case"strokeLinejoin":var ie;Object.assign(u,{"stroke-linejoin":null!==(ie=u.strokeLinejoin)&&void 0!==ie?ie:null,strokeLinejoin:null});break;case"strokeMiterlimit":var yt;Object.assign(u,{"stroke-miterlimit":null!==(yt=u.strokeMiterlimit)&&void 0!==yt?yt:null,strokeMiterlimit:null});break;case"strokeDasharray":var Ct;Object.assign(u,{"stroke-dasharray":null!==(Ct=u.strokeDasharray)&&void 0!==Ct?Ct:null,strokeDasharray:null});break;case"strokeDasharrays":var T,d;Object.assign(u,{"stroke-dasharray":null!==(T=null===(d=u.strokeDasharrays)||void 0===d?void 0:d.join(" "))&&void 0!==T?T:null,strokeDasharrays:null});break;case"fontFamily":var U;Object.assign(u,{"font-family":null!==(U=u.fontFamily)&&void 0!==U?U:null,fontFamily:null});break;case"fontWeight":var it;Object.assign(u,{"font-weight":null!==(it=u.fontWeight)&&void 0!==it?it:null,fontWeight:null});break;case"fontSize":var at;Object.assign(u,{"font-size":null!==(at=u.fontSize)&&void 0!==at?at:null,fontSize:null});break;case"textLength":Object.assign(u,{textLength:u.textLength?`${u.textLength}px`:null});break;case"transformOrigin":var J;Object.assign(u,{"transform-origin":null!==(J=u.transformOrigin)&&void 0!==J?J:null,transformOrigin:null})}}),Object.assign({},null!=u?u:{},{fill:null!=u&&u.fill?D(u.fill,null!==(kt=null==u?void 0:u.fillOpacity)&&void 0!==kt?kt:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=u&&u.stroke?D(u.stroke,null!==(It=null==u?void 0:u.strokeOpacity)&&void 0!==It?It:1):"rgba(0,0,0,0)",strokeOpacity:null}))),_;var u,nt,kt,It},tt=(_,F)=>{return jQuery(_).css((u=Object.assign({},F||{}),null===(nt=Object.keys(u))||void 0===nt||nt.forEach(kt=>{switch(kt){case"padding":Object.assign(u,{padding:u.padding?`${u.padding}px`:null});break;case"borderWidth":var It;Object.assign(u,u.borderWidth&&u.borderColor?{"border-width":`${u.borderWidth}px`,"border-style":u.borderStyle||"solid","border-color":D(u.borderColor,null!==(It=u.borderOpacity)&&void 0!==It?It:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(u,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(u,{"border-radius":u.borderRadius?`${u.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Ht;Object.assign(u,u.backgroundColor?{"background-color":D(u.backgroundColor,null!==(Ht=u.backgroundOpacity)&&void 0!==Ht?Ht:1)}:{"background-color":""}),Object.assign(u,{backgroundColor:null,backgroundOpacity:null})}}),u)),_;var u,nt},Jt=(_,F,u)=>{switch(F){case L.h.TEXT:var nt,kt;jQuery(_).text(null!==(nt=null==u||null===(kt=u.text)||void 0===kt?void 0:kt.textContent)&&void 0!==nt?nt:"");break;case L.h.IMAGE:var It,Ht,Ft,Kt,Bt;jQuery(_).attr("href",(null==u||null===(It=u.image)||void 0===It?void 0:It.base64)||(null!=u&&null!==(Ht=u.image)&&void 0!==Ht&&Ht.path?(null===(Ft=N.L.config)||void 0===Ft?void 0:Ft.readfileuploadurl)+(null==u||null===(Kt=u.image)||void 0===Kt?void 0:Kt.path):null==u||null===(Bt=u.image)||void 0===Bt?void 0:Bt.url)||"");break;case L.h.FOREIGNOBJECT:switch(null==u?void 0:u.type){case"text":var ie,yt;if(null!==(ie=u.text)&&void 0!==ie&&ie.variableKeywords&&null!==(yt=u.text)&&void 0!==yt&&yt.variableKeywords.length){var Ct;let n=N.L.variable.getKeys(),l=(null===(Ct=u.text)||void 0===Ct?void 0:Ct.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";u.text.variableKeywords.forEach(g=>{var p=g.replace(/[^a-zA-Z0-9_]/gm,"");if(n.indexOf(p)>=0){var c=N.L.variable.getValue(p);l=l.replace(g,c)}}),jQuery(_).text(l)}else{var T;jQuery(_).text((null===(T=u.text)||void 0===T?void 0:T.textContent)||"")}break;case"html":{var d,U,it;let n=(null==u||null===(d=u.html)||void 0===d?void 0:d.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>';if(null!==(U=u.html)&&void 0!==U&&U.variableKeywords&&null!==(it=u.html)&&void 0!==it&&it.variableKeywords.length){let l=N.L.variable.getKeys();u.html.variableKeywords.forEach(g=>{var p=g.replace(/[^a-zA-Z0-9_]/gm,"");if(l.indexOf(p)>=0){var c=N.L.variable.getValue(p);n=n.replace(g,c)}})}jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${n}</div>`).find("img[path],video[path],iframe[path]").each((l,g)=>{var p,c;g.setAttribute("src",(null!==(p=null===(c=N.L.config)||void 0===c?void 0:c.readfileuploadurl)&&void 0!==p?p:"")+g.getAttribute("path")),g.removeAttribute("path")});break}case"input":var at,J,O,H;if(null!==(at=u.input)&&void 0!==at&&at.input)jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(O=null===(H=u.input)||void 0===H?void 0:H.placeholder)&&void 0!==O?O:""}" maxlength="100" /></div>`);else if(null!==(J=u.input)&&void 0!==J&&J.textarea){var rt,wt;jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(rt=null===(wt=u.input)||void 0===wt?void 0:wt.placeholder)&&void 0!==rt?rt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var bt,St,ct,ot,pt;jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(bt=u.image)||void 0===bt?void 0:bt.base64)||(null!==(St=u.image)&&void 0!==St&&St.path?(null===(ct=N.L.config)||void 0===ct?void 0:ct.readfileuploadurl)+(null===(ot=u.image)||void 0===ot?void 0:ot.path):null===(pt=u.image)||void 0===pt?void 0:pt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Ot,Ut,Xt,Vt;jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Ot=u.iframe)&&void 0!==Ot&&Ot.path?(null===(Ut=N.L.config)||void 0===Ut?void 0:Ut.readfileuploadurl)+(null===(Xt=u.iframe)||void 0===Xt?void 0:Xt.path):null===(Vt=u.iframe)||void 0===Vt?void 0:Vt.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var se,ne,ae,pe,Ae;let n=(0,R._)({readfileuploadurl:null===(se=N.L.config)||void 0===se?void 0:se.readfileuploadurl,type:null===(ne=u.embed)||void 0===ne?void 0:ne.type,oss:null===(ae=u.embed)||void 0===ae?void 0:ae.oss,path:null===(pe=u.embed)||void 0===pe?void 0:pe.path,url:null===(Ae=u.embed)||void 0===Ae?void 0:Ae.url});jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${n}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var ke,me;jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(ke=null===(me=u.svg)||void 0===me?void 0:me.svgContent)&&void 0!==ke?ke:""}</div>`);break;case"test":{var Oe,Te,je,be;let n=(null==u||null===(Oe=u.html)||void 0===Oe?void 0:Oe.htmlContent)||"";if(null!==(Te=u.html)&&void 0!==Te&&Te.variableKeywords&&null!==(je=u.html)&&void 0!==je&&je.variableKeywords.length){let l=N.L.variable.getKeys();u.html.variableKeywords.forEach(g=>{var p=g.replace(/[^a-zA-Z0-9_]/gm,"");if(l.indexOf(p)>=0){var c=N.L.variable.getValue(p);n=n.replace(g,c)}})}switch(null==u||null===(be=u.test)||void 0===be?void 0:be.type){case"truefalse":var qe;jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(qe=u.test.truefalse)&&void 0!==qe&&qe.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"singlechoice":var Ue;jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(Ue=u.test.singlechoice)&&void 0!==Ue&&Ue.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"multichoice":var He;jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(He=u.test.multichoice)&&void 0!==He&&He.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"matching-empty":var $e;jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==u||null===($e=u.test.matching)||void 0===$e?void 0:$e.key}"></div>`);break;case"matching-content":var Xe,Ye,ti;jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==u||null===(Xe=u.test.matching)||void 0===Xe?void 0:Xe.key}"><div class="ondrag-item" data-key="${null!==(Ye=null==u||null===(ti=u.test)||void 0===ti||null===(ti=ti.matching)||void 0===ti?void 0:ti.key)&&void 0!==Ye?Ye:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div></div>`);break;case"fill":var hi;((null===(hi=u.html)||void 0===hi?void 0:hi.fillKeywords)||[]).forEach(l=>{var g=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${l.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;n=n.replace(new RegExp(l.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),g)}),jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"speech":jQuery(_).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var _t,K,i,r,o;jQuery(_).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(_t=null!==(K=u.image)&&void 0!==K&&K.path?(null===(i=N.L.config)||void 0===i?void 0:i.readfileuploadurl)+(null===(r=u.image)||void 0===r?void 0:r.path):null===(o=u.image)||void 0===o?void 0:o.url)&&void 0!==_t?_t:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(_).find("img[path],video[path],iframe[path]").each((l,g)=>{var p,c;g.setAttribute("src",(null!==(p=null===(c=N.L.config)||void 0===c?void 0:c.readfileuploadurl)&&void 0!==p?p:"")+g.getAttribute("path")),g.removeAttribute("path")})}}}},Mt=(_,F,u,nt)=>{let kt=jQuery(nt||N.L.target).find("#"+_).get(0);return kt||(kt=window.document.createElementNS("http://www.w3.org/2000/svg",F),kt.setAttribute("id",_),jQuery(kt).appendTo(nt||N.L.target)),jQuery(kt).attr((null==u?void 0:u.attribute)||{}),jQuery(kt).css((null==u?void 0:u.style)||{}),kt},Dt=(_,F)=>{let u=(0,M.$)(2),nt={fill:f.pZ.fill,stroke:f.pZ.stroke,"stroke-width":(0,M.$)(f.pZ.strokeWidth)};return[{element:Mt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:F.x-u,y:F.y-u,width:F.width+2*u,height:F.height+2*u},nt)},_),posType:"rect-center"}]},ht=(_,F)=>{let{size:u}=F,nt=(0,M.$)(1),kt=(0,M.$)(2),It=(0,M.$)(5),Ht={stroke:f.u$.stroke,"stroke-width":(0,M.$)(f.u$.strokeWidth),"stroke-linecap":f.u$.strokeLinecap},Ft={fill:f.bf.fill,stroke:f.bf.stroke,"stroke-width":(0,M.$)(f.bf.strokeWidth)},Kt={fill:f.eD.fill,stroke:f.eD.stroke,"stroke-width":(0,M.$)(f.eD.strokeWidth),width:(0,M.$)(f.eD.width),height:(0,M.$)(f.eD.height)};return Mt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:u.x-nt,y1:u.y,x2:u.x-nt,y2:u.y+u.height},Ht)},_),Mt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-nt,x2:u.x+u.width,y2:u.y-nt},Ht)},_),Mt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:u.x+u.width+nt,y1:u.y,x2:u.x+u.width+nt,y2:u.y+u.height},Ht)},_),Mt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+nt,x2:u.x+u.width,y2:u.y+u.height+nt},Ht)},_),[{element:Mt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},Ft),style:{cursor:"move"}},_),posType:"rect-center"},{element:Mt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:u.x-It,y:u.y-It},Kt),style:{cursor:"nw-resize"}},_),posType:"rect-top-left"},{element:Mt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:u.x+u.width-kt,y:u.y-It},Kt),style:{cursor:"ne-resize"}},_),posType:"rect-top-right"},{element:Mt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:u.x-It,y:u.y+u.height-kt},Kt),style:{cursor:"sw-resize"}},_),posType:"rect-bottom-left"},{element:Mt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:u.x+u.width-kt,y:u.y+u.height-kt},Kt),style:{cursor:"se-resize"}},_),posType:"rect-bottom-right"},{element:Mt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:u.x+u.width/2-kt-nt,y:u.y-It},Kt),style:{cursor:"n-resize"}},_),posType:"rect-top"},{element:Mt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:u.x+u.width-kt,y:u.y+u.height/2-kt-nt},Kt),style:{cursor:"e-resize"}},_),posType:"rect-right"},{element:Mt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:u.x+u.width/2-kt-nt,y:u.y+u.height-kt},Kt),style:{cursor:"s-resize"}},_),posType:"rect-bottom"},{element:Mt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:u.x-It,y:u.y+u.height/2-kt-nt},Kt),style:{cursor:"w-resize"}},_),posType:"rect-left"}]},xt=(_,F,u)=>{let nt=(0,M.$)(1),kt={stroke:f.u$.stroke,"stroke-width":(0,M.$)(f.u$.strokeWidth),"stroke-linecap":f.u$.strokeLinecap},It={fill:f.bf.fill,stroke:f.bf.stroke,"stroke-width":(0,M.$)(f.bf.strokeWidth)},Ht={fill:f.IB.fill,stroke:f.IB.stroke,"stroke-width":(0,M.$)(f.IB.strokeWidth)},yt=(Mt("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:u.x-nt,y1:u.y,x2:u.x-nt,y2:u.y+u.height},kt)},_),Mt("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-nt,x2:u.x+u.width,y2:u.y-nt},kt)},_),Mt("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:u.x+u.width+nt,y1:u.y,x2:u.x+u.width+nt,y2:u.y+u.height},kt)},_),Mt("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+nt,x2:u.x+u.width,y2:u.y+u.height+nt},kt)},_),Mt("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},It)},_));return F.forEach(Ct=>{let{size:T}=Ct;Mt("icdt-temp-select-rect-node-"+Ct.id,"rect",{attribute:Object.assign({x:T.x,y:T.y,width:T.width,height:T.height},Ht)},_)}),[{element:yt,posType:"rect-center"}]},jt=(_,F)=>{let u=(0,M.$)(1),nt={stroke:f.u$.stroke,"stroke-width":(0,M.$)(f.u$.strokeWidth),"stroke-linecap":f.u$.strokeLinecap},kt={fill:f.bf.fill,stroke:f.bf.stroke,"stroke-width":(0,M.$)(f.bf.strokeWidth)};return Mt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:F.x-u,y1:F.y,x2:F.x-u,y2:F.y+F.height},nt)},_),Mt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:F.x,y1:F.y-u,x2:F.x+F.width,y2:F.y-u},nt)},_),Mt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:F.x+F.width+u,y1:F.y,x2:F.x+F.width+u,y2:F.y+F.height},nt)},_),Mt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:F.x,y1:F.y+F.height+u,x2:F.x+F.width,y2:F.y+F.height+u},nt)},_),[{element:Mt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:F.x,y:F.y,width:F.width,height:F.height},kt)},_),posType:"rect-center"}]},Y=(_,F)=>((0,M.$)(-1),(0,M.$)(f.WR.strokeWidth),(0,M.$)(f.WR.strokeDasharray),Mt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:F.x,y:F.y,width:F.width,height:F.height,class:"cursor-draw"},{fill:f.lq.fill})},_),[]),At=(_,F)=>{let u={fill:f.$u.fill,stroke:f.$u.stroke,"stroke-width":(0,M.$)(f.$u.strokeWidth),"stroke-dasharray":(0,M.$)(f.$u.strokeDasharray)};jQuery(_).empty(),F.forEach(nt=>{var kt,It;let{size:Ht}=nt;if(!nt.idx)return;Mt("icdt-temp-index-rect-node-"+nt.id,"rect",{attribute:Object.assign({x:Ht.x-5,y:Ht.y-5,width:Ht.width+10,height:Ht.height+10},u)},_);let{element:Ft}=(0,h.$)(Math.ceil(1e9*Math.random()),{size:{x:Ht.x-76,y:Ht.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(kt=nt.idx)&&void 0!==kt?kt:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(It=nt.time)&&void 0!==It?It:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},_);Ft.classList.add("node-input"),jQuery(Ft).on("change",'input[name="idx"]',Kt=>{var Bt;nt.idx=parseInt(null!==(Bt=Kt.target.value)&&void 0!==Bt?Bt:"0")}).on("change",'input[name="time"]',Kt=>{var Bt;nt.time=parseFloat(null!==(Bt=Kt.target.value)&&void 0!==Bt?Bt:"0")}).on("click",'button[name="remove"]',Kt=>{nt.idx=0,nt.time=null,At(_,F)})})},Lt=(_,F)=>{var u,nt,kt,It,Ht,Ft;let{color:Kt,opacity:Bt,path:ie,url:yt,base64:Ct}=null!==(u=null==F||null===(nt=F.svg)||void 0===nt?void 0:nt.background)&&void 0!==u?u:{},{x:T,y:d,width:U,height:it}=null!==(kt=null==F||null===(It=F.svg)||void 0===It?void 0:It.viewBox)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,B.L)(void 0,{size:{x:0,y:(0,M.$)(-21),width:U,height:it},attribute:{fill:"#999",fontSize:(0,M.$)(14),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(Ht=null!==(Ft=null==F?void 0:F.name)&&void 0!==Ft?Ft:null==F?void 0:F.code)&&void 0!==Ht?Ht:void 0}}},_),(0,I.a)(void 0,{size:{x:T,y:d,width:U,height:it},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,M.$)(1),strokeDasharray:(0,M.$)(10),class:"hide-on-viewer"}},_),Kt&&(0,I.a)(void 0,{size:{x:T,y:d,width:U,height:it},attribute:{fill:Kt,fillOpacity:Bt}},_),ie&&(0,et.B)(void 0,{size:{x:T,y:d,width:U,height:it},source:{type:"image",image:{path:ie,url:yt,base64:Ct}}},_)},Qt=(_,F,u)=>{var nt;switch(jQuery(_).empty(),null===(nt=F.test)||void 0===nt?void 0:nt.type){case"truefalse":var kt;if(null!==(kt=F.test)&&void 0!==kt&&kt.showselection){var It,Ht,Ft;let ct=null==F||null===(It=F.test)||void 0===It||null===(It=It.answer)||void 0===It||null===(It=It.truefalse)||void 0===It?void 0:It.value;null===(Ht=F.svg)||void 0===Ht||Ht.nodes.filter(ot=>{var pt;return"truefalse"==(null===(pt=ot.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)&&ot.id!=ct}).forEach(ot=>{var pt;let{x:Ut,y:Xt,width:Vt,height:se}=null!==(pt=null==ot?void 0:ot.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,x.K)(Math.ceil(1e9*Math.random()),{size:{x:Ut-.5,y:Xt-.5,width:Vt+1,height:se+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},_)}),null!=F&&null!==(Ft=F.test)&&void 0!==Ft&&null!==(Ft=Ft.answer)&&void 0!==Ft&&Ft.truefalse&&ct&&(ot=>{let pt=k.J.findNode(ct),{x:Ut,y:Xt,width:Vt,height:se}=null!==(ot=null==pt?void 0:pt.size)&&void 0!==ot?ot:{x:0,y:0,width:0,height:0};(0,x.K)(Math.ceil(1e9*Math.random()),{size:{x:Ut-2,y:Xt-2,width:Vt+4,height:se+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},_)})()}break;case"singlechoice":var Kt;if(null!==(Kt=F.test)&&void 0!==Kt&&Kt.showselection){var Bt,ie,yt;let ct=null==F||null===(Bt=F.test)||void 0===Bt||null===(Bt=Bt.answer)||void 0===Bt||null===(Bt=Bt.singlechoice)||void 0===Bt?void 0:Bt.value;null===(ie=F.svg)||void 0===ie||ie.nodes.filter(ot=>{var pt;return"singlechoice"==(null===(pt=ot.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)&&ot.id!=ct}).forEach(ot=>{var pt;let{x:Ut,y:Xt,width:Vt,height:se}=null!==(pt=null==ot?void 0:ot.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,x.K)(Math.ceil(1e9*Math.random()),{size:{x:Ut-.5,y:Xt-.5,width:Vt+1,height:se+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},_)}),null!=F&&null!==(yt=F.test)&&void 0!==yt&&null!==(yt=yt.answer)&&void 0!==yt&&yt.singlechoice&&ct&&(ot=>{let pt=k.J.findNode(ct),{x:Ut,y:Xt,width:Vt,height:se}=null!==(ot=null==pt?void 0:pt.size)&&void 0!==ot?ot:{x:0,y:0,width:0,height:0};(0,x.K)(Math.ceil(1e9*Math.random()),{size:{x:Ut-2,y:Xt-2,width:Vt+4,height:se+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},_)})()}break;case"multichoice":var Ct;if(null!==(Ct=F.test)&&void 0!==Ct&&Ct.showselection){var T,d,U,it;let ct=null!==(T=null==F||null===(d=F.test)||void 0===d||null===(d=d.answer)||void 0===d||null===(d=d.multichoice)||void 0===d?void 0:d.map(ot=>ot.value))&&void 0!==T?T:[];var at;null===(U=F.svg)||void 0===U||U.nodes.filter(ot=>{var pt;return"multichoice"==(null===(pt=ot.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)&&!ct.includes(ot.id)}).forEach(ot=>{var pt;let{x:Ut,y:Xt,width:Vt,height:se}=null!==(pt=null==ot?void 0:ot.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,I.a)(Math.ceil(1e9*Math.random()),{size:{x:Ut-.5,y:Xt-.5,width:Vt+1,height:se+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},_)}),null!=F&&null!==(it=F.test)&&void 0!==it&&null!==(it=it.answer)&&void 0!==it&&it.multichoice&&ct.length&&(null==F||null===(at=F.test)||void 0===at||null===(at=at.answer)||void 0===at||at.multichoice.forEach(ot=>{var pt;let Ot=k.J.findNode(ot.value),{x:Xt,y:Vt,width:se,height:ne}=null!==(pt=null==Ot?void 0:Ot.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,I.a)(Math.ceil(1e9*Math.random()),{size:{x:Xt-2,y:Vt-2,width:se+4,height:ne+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},_)}))}break;case"fill":var J,O;null!=F&&null!==(J=F.test)&&void 0!==J&&null!==(J=J.answer)&&void 0!==J&&J.fill&&(null==F||null===(O=F.test)||void 0===O||null===(O=O.answer)||void 0===O||O.fill.forEach(ct=>{jQuery("#"+u.id).find(`input[type="text"][data-key="${ct.key}"]`).val(ct.value)}));break;case"matching":var H,rt,wt,bt;if(null!=F&&null!==(H=F.test)&&void 0!==H&&null!==(H=H.answer)&&void 0!==H&&H.matching)if("matching-empty"==(null===(rt=u.source)||void 0===rt||null===(rt=rt.test)||void 0===rt?void 0:rt.type))null==F||null===(bt=F.test)||void 0===bt||null===(bt=bt.answer)||void 0===bt||bt.matching.filter(ct=>{var ot;return ct.key==(null===(ot=u.source)||void 0===ot||null===(ot=ot.test)||void 0===ot||null===(ot=ot.matching)||void 0===ot?void 0:ot.key)}).forEach(ct=>{$(`foreignObject .ondrop-here[data-type2="matching-content"][data-key="${ct.value}"] .ondrag-item`).appendTo($(`foreignObject#${u.id} .ondrop-here[data-type2="matching-empty"][data-key="${ct.key}"]`))});else if("matching-content"==(null===(wt=u.source)||void 0===wt||null===(wt=wt.test)||void 0===wt?void 0:wt.type)){var St;null==F||null===(St=F.test)||void 0===St||null===(St=St.answer)||void 0===St||St.matching.filter(ct=>{var ot;return ct.value==(null===(ot=u.source)||void 0===ot||null===(ot=ot.test)||void 0===ot||null===(ot=ot.matching)||void 0===ot?void 0:ot.key)}).forEach(ct=>{$(`foreignObject#${u.id} .ondrop-here[data-type2="matching-content"][data-key="${ct.value}"] .ondrag-item`).appendTo($(`foreignObject .ondrop-here[data-type2="matching-empty"][data-key="${ct.key}"]:empty`))})}}}},2241:(he,Nt,m)=>{m.d(Nt,{_:()=>dt});var L=m(8338);const dt=b=>{switch(null==b?void 0:b.type){case L.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+b.readfileuploadurl+b.path;case L.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+b.readfileuploadurl+b.path;case L.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+b.readfileuploadurl+b.path;case L.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+b.readfileuploadurl+b.path;case L.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+b.readfileuploadurl+b.path;case L.S.HTML:case L.S.IMAGE_ANIMATION:case L.S.PHET:return""+b.readfileuploadurl+b.path;case L.S.ZIP:case L.S.SCORM:var y;return"imsmanifest.xml"==(null===(y=b.path)||void 0===y||null===(y=y.split("/"))||void 0===y?void 0:y.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+b.readfileuploadurl+b.path:""+b.readfileuploadurl+b.path;case L.S.TRACK:case L.S.TEXT:return""+b.readfileuploadurl+b.path;case L.S.LINK:switch(b.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+b.url;case 1002:var D;return null!==(D=j(b.url))&&void 0!==D?D:"";case 1005:var R;return null!==(R=b.url)&&void 0!==R?R:"";default:var f;return null!==(f=b.url)&&void 0!==f?f:""}default:return""+b.readfileuploadurl+b.path}},j=b=>{let y=mt(b);return y?"https://www.youtube.com/embed/"+y+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},mt=b=>{let y=null==b?void 0:b.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return y&&y.length>=2?y[1]:null}},1131:(he,Nt,m)=>{function L(){}function S(t){return null==t?L:function(){return this.querySelector(t)}}function mt(){return[]}function b(t){return null==t?mt:function(){return this.querySelectorAll(t)}}function R(t){return function(){return this.matches(t)}}function f(t){return function(e){return e.matches(t)}}m.d(Nt,{qrM:()=>aa,n8j:()=>la});var N=Array.prototype.find;function I(){return this.firstElementChild}var x=Array.prototype.filter;function k(){return Array.from(this.children)}function V(t){return new Array(t.length)}function X(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function lt(t,e,a,s,v,E){for(var G,C=0,Q=e.length,ut=E.length;C<ut;++C)(G=e[C])?(G.__data__=E[C],s[C]=G):a[C]=new X(t,E[C]);for(;C<Q;++C)(G=e[C])&&(v[C]=G)}function tt(t,e,a,s,v,E,C){var G,Q,te,ut=new Map,vt=e.length,Wt=E.length,Gt=new Array(vt);for(G=0;G<vt;++G)(Q=e[G])&&(Gt[G]=te=C.call(Q,Q.__data__,G,e)+"",ut.has(te)?v[G]=Q:ut.set(te,Q));for(G=0;G<Wt;++G)te=C.call(t,E[G],G,E)+"",(Q=ut.get(te))?(s[G]=Q,Q.__data__=E[G],ut.delete(te)):a[G]=new X(t,E[G]);for(G=0;G<vt;++G)(Q=e[G])&&ut.get(Gt[G])===Q&&(v[G]=Q)}function Jt(t){return t.__data__}function Mt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function At(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}X.prototype={constructor:X,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var kt="http://www.w3.org/1999/xhtml";const It={svg:"http://www.w3.org/2000/svg",xhtml:kt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ht(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),It.hasOwnProperty(e)?{space:It[e],local:t}:t}function Ft(t){return function(){this.removeAttribute(t)}}function Kt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Bt(t,e){return function(){this.setAttribute(t,e)}}function ie(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function yt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function Ct(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function d(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function U(t){return function(){this.style.removeProperty(t)}}function it(t,e,a){return function(){this.style.setProperty(t,e,a)}}function at(t,e,a){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,a)}}function O(t,e){return t.style.getPropertyValue(e)||d(t).getComputedStyle(t,null).getPropertyValue(e)}function H(t){return function(){delete this[t]}}function rt(t,e){return function(){this[t]=e}}function wt(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function St(t){return t.trim().split(/^|\s+/)}function ct(t){return t.classList||new ot(t)}function ot(t){this._node=t,this._names=St(t.getAttribute("class")||"")}function pt(t,e){for(var a=ct(t),s=-1,v=e.length;++s<v;)a.add(e[s])}function Ot(t,e){for(var a=ct(t),s=-1,v=e.length;++s<v;)a.remove(e[s])}function Ut(t){return function(){pt(this,t)}}function Xt(t){return function(){Ot(this,t)}}function Vt(t,e){return function(){(e.apply(this,arguments)?pt:Ot)(this,t)}}function ne(){this.textContent=""}function ae(t){return function(){this.textContent=t}}function pe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ke(){this.innerHTML=""}function me(t){return function(){this.innerHTML=t}}function Oe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function je(){this.nextSibling&&this.parentNode.appendChild(this)}function qe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function He(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===kt&&e.documentElement.namespaceURI===kt?e.createElement(t):e.createElementNS(a,t)}}function $e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xe(t){var e=Ht(t);return(e.local?$e:He)(e)}function ti(){return null}function _t(){var t=this.parentNode;t&&t.removeChild(this)}function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function p(t){return function(){var e=this.__on;if(e){for(var E,a=0,s=-1,v=e.length;a<v;++a)E=e[a],t.type&&E.type!==t.type||E.name!==t.name?e[++s]=E:this.removeEventListener(E.type,E.listener,E.options);++s?e.length=s:delete this.__on}}}function c(t,e,a){return function(){var v,s=this.__on,E=function l(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var C=0,G=s.length;C<G;++C)if((v=s[C]).type===t.type&&v.name===t.name)return this.removeEventListener(v.type,v.listener,v.options),this.addEventListener(v.type,v.listener=E,v.options=a),void(v.value=e);this.addEventListener(t.type,E,a),v={type:t.type,name:t.name,value:e,listener:E,options:a},s?s.push(v):this.__on=[v]}}function w(t,e,a){var s=d(t),v=s.CustomEvent;"function"==typeof v?v=new v(e,a):(v=s.document.createEvent("Event"),a?(v.initEvent(e,a.bubbles,a.cancelable),v.detail=a.detail):v.initEvent(e,!1,!1)),t.dispatchEvent(v)}function W(t,e){return function(){return w(this,t,e)}}function z(t,e){return function(){return w(this,t,e.apply(this,arguments))}}ot.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Et=[null];function Pt(t,e){this._groups=t,this._parents=e}function $t(){return new Pt([[document.documentElement]],Et)}Pt.prototype=$t.prototype={constructor:Pt,select:function dt(t){"function"!=typeof t&&(t=S(t));for(var e=this._groups,a=e.length,s=new Array(a),v=0;v<a;++v)for(var Q,ut,E=e[v],C=E.length,G=s[v]=new Array(C),vt=0;vt<C;++vt)(Q=E[vt])&&(ut=t.call(Q,Q.__data__,vt,E))&&("__data__"in Q&&(ut.__data__=Q.__data__),G[vt]=ut);return new Pt(s,this._parents)},selectAll:function D(t){t="function"==typeof t?function y(t){return function(){return function j(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):b(t);for(var e=this._groups,a=e.length,s=[],v=[],E=0;E<a;++E)for(var Q,C=e[E],G=C.length,ut=0;ut<G;++ut)(Q=C[ut])&&(s.push(t.call(Q,Q.__data__,ut,C)),v.push(Q));return new Pt(s,v)},selectChild:function et(t){return this.select(null==t?I:function M(t){return function(){return N.call(this.children,t)}}("function"==typeof t?t:f(t)))},selectChildren:function B(t){return this.selectAll(null==t?k:function h(t){return function(){return x.call(this.children,t)}}("function"==typeof t?t:f(t)))},filter:function P(t){"function"!=typeof t&&(t=R(t));for(var e=this._groups,a=e.length,s=new Array(a),v=0;v<a;++v)for(var Q,E=e[v],C=E.length,G=s[v]=[],ut=0;ut<C;++ut)(Q=E[ut])&&t.call(Q,Q.__data__,ut,E)&&G.push(Q);return new Pt(s,this._parents)},data:function qt(t,e){if(!arguments.length)return Array.from(this,Jt);var a=e?tt:lt,s=this._parents,v=this._groups;"function"!=typeof t&&(t=function Z(t){return function(){return t}}(t));for(var E=v.length,C=new Array(E),G=new Array(E),Q=new Array(E),ut=0;ut<E;++ut){var vt=s[ut],Wt=v[ut],Gt=Wt.length,te=Mt(t.call(vt,vt&&vt.__data__,ut,s)),Ee=te.length,Ie=G[ut]=new Array(Ee),zt=C[ut]=new Array(Ee);a(vt,Wt,Ie,zt,Q[ut]=new Array(Gt),te,e);for(var ce,ye,oe=0,ee=0;oe<Ee;++oe)if(ce=Ie[oe]){for(oe>=ee&&(ee=oe+1);!(ye=zt[ee])&&++ee<Ee;);ce._next=ye||null}}return(C=new Pt(C,s))._enter=G,C._exit=Q,C},enter:function q(){return new Pt(this._enter||this._groups.map(V),this._parents)},exit:function Dt(){return new Pt(this._exit||this._groups.map(V),this._parents)},join:function ht(t,e,a){var s=this.enter(),v=this,E=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(v=e(v))&&(v=v.selection()),null==a?E.remove():a(E),s&&v?s.merge(v).order():v},merge:function xt(t){for(var e=t.selection?t.selection():t,a=this._groups,s=e._groups,v=a.length,C=Math.min(v,s.length),G=new Array(v),Q=0;Q<C;++Q)for(var te,ut=a[Q],vt=s[Q],Wt=ut.length,Gt=G[Q]=new Array(Wt),Ee=0;Ee<Wt;++Ee)(te=ut[Ee]||vt[Ee])&&(Gt[Ee]=te);for(;Q<v;++Q)G[Q]=a[Q];return new Pt(G,this._parents)},selection:function we(){return this},order:function jt(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var C,s=t[e],v=s.length-1,E=s[v];--v>=0;)(C=s[v])&&(E&&4^C.compareDocumentPosition(E)&&E.parentNode.insertBefore(C,E),E=C);return this},sort:function Y(t){function e(Wt,Gt){return Wt&&Gt?t(Wt.__data__,Gt.__data__):!Wt-!Gt}t||(t=At);for(var a=this._groups,s=a.length,v=new Array(s),E=0;E<s;++E){for(var ut,C=a[E],G=C.length,Q=v[E]=new Array(G),vt=0;vt<G;++vt)(ut=C[vt])&&(Q[vt]=ut);Q.sort(e)}return new Pt(v,this._parents).order()},call:function Lt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function Qt(){return Array.from(this)},node:function _(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var s=t[e],v=0,E=s.length;v<E;++v){var C=s[v];if(C)return C}return null},size:function F(){let t=0;for(const e of this)++t;return t},empty:function u(){return!this.node()},each:function nt(t){for(var e=this._groups,a=0,s=e.length;a<s;++a)for(var G,v=e[a],E=0,C=v.length;E<C;++E)(G=v[E])&&t.call(G,G.__data__,E,v);return this},attr:function T(t,e){var a=Ht(t);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((null==e?a.local?Kt:Ft:"function"==typeof e?a.local?Ct:yt:a.local?ie:Bt)(a,e))},style:function J(t,e,a){return arguments.length>1?this.each((null==e?U:"function"==typeof e?at:it)(t,e,null==a?"":a)):O(this.node(),t)},property:function bt(t,e){return arguments.length>1?this.each((null==e?H:"function"==typeof e?wt:rt)(t,e)):this.node()[t]},classed:function se(t,e){var a=St(t+"");if(arguments.length<2){for(var s=ct(this.node()),v=-1,E=a.length;++v<E;)if(!s.contains(a[v]))return!1;return!0}return this.each(("function"==typeof e?Vt:e?Ut:Xt)(a,e))},text:function Ae(t){return arguments.length?this.each(null==t?ne:("function"==typeof t?pe:ae)(t)):this.node().textContent},html:function Te(t){return arguments.length?this.each(null==t?ke:("function"==typeof t?Oe:me)(t)):this.node().innerHTML},raise:function be(){return this.each(je)},lower:function Ue(){return this.each(qe)},append:function Ye(t){var e="function"==typeof t?t:Xe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function hi(t,e){var a="function"==typeof t?t:Xe(t),s=null==e?ti:"function"==typeof e?e:S(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})},remove:function K(){return this.each(_t)},clone:function o(t){return this.select(t?r:i)},datum:function n(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function A(t,e,a){var v,C,s=function g(t){return t.trim().split(/^|\s+/).map(function(e){var a="",s=e.indexOf(".");return s>=0&&(a=e.slice(s+1),e=e.slice(0,s)),{type:e,name:a}})}(t+""),E=s.length;if(!(arguments.length<2)){for(G=e?c:p,v=0;v<E;++v)this.each(G(s[v],e,a));return this}var G=this.node().__on;if(G)for(var vt,Q=0,ut=G.length;Q<ut;++Q)for(v=0,vt=G[Q];v<E;++v)if((C=s[v]).type===vt.type&&C.name===vt.name)return vt.value},dispatch:function ft(t,e){return this.each(("function"==typeof e?z:W)(t,e))},[Symbol.iterator]:function*gt(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var C,s=t[e],v=0,E=s.length;v<E;++v)(C=s[v])&&(yield C)}};const ge=$t;var _e={value:()=>{}};function xe(){for(var s,t=0,e=arguments.length,a={};t<e;++t){if(!(s=arguments[t]+"")||s in a||/[\s.]/.test(s))throw new Error("illegal type: "+s);a[s]=[]}return new Ce(a)}function Ce(t){this._=t}function ar(t,e){for(var v,a=0,s=t.length;a<s;++a)if((v=t[a]).name===e)return v.value}function gn(t,e,a){for(var s=0,v=t.length;s<v;++s)if(t[s].name===e){t[s]=_e,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=a&&t.push({name:e,value:a}),t}Ce.prototype=xe.prototype={constructor:Ce,on:function(t,e){var v,a=this._,s=function lr(t,e){return t.trim().split(/^|\s+/).map(function(a){var s="",v=a.indexOf(".");if(v>=0&&(s=a.slice(v+1),a=a.slice(0,v)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}(t+"",a),E=-1,C=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++E<C;)if(v=(t=s[E]).type)a[v]=gn(a[v],t.name,e);else if(null==e)for(v in a)a[v]=gn(a[v],t.name,null);return this}for(;++E<C;)if((v=(t=s[E]).type)&&(v=ar(a[v],t.name)))return v},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new Ce(t)},call:function(t,e){if((v=arguments.length-2)>0)for(var v,E,a=new Array(v),s=0;s<v;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,v=(E=this._[t]).length;s<v;++s)E[s].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],v=0,E=s.length;v<E;++v)s[v].value.apply(e,a)}};const or=xe;var Ni,ki,pi=0,Oi=0,Si=0,yn=1e3,Di=0,ci=0,zi=0,Ti="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yi(){return ci||(pn(sr),ci=Ti.now()+zi)}function sr(){ci=0}function ji(){this._call=this._time=this._next=null}function mn(t,e,a){var s=new ji;return s.restart(t,e,a),s}function wn(){ci=(Di=Ti.now())+zi,pi=Oi=0;try{!function ur(){Yi(),++pi;for(var e,t=Ni;t;)(e=ci-t._time)>=0&&t._call.call(void 0,e),t=t._next;--pi}()}finally{pi=0,function hr(){for(var t,a,e=Ni,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);ki=t,qi(s)}(),ci=0}}function dr(){var t=Ti.now(),e=t-Di;e>yn&&(zi-=e,Di=t)}function qi(t){pi||(Oi&&(Oi=clearTimeout(Oi)),t-ci>24?(t<1/0&&(Oi=setTimeout(wn,t-Ti.now()-zi)),Si&&(Si=clearInterval(Si))):(Si||(Di=Ti.now(),Si=setInterval(dr,yn)),pi=1,pn(wn)))}function xn(t,e,a){var s=new ji;return s.restart(v=>{s.stop(),t(v+e)},e=null==e?0:+e,a),s}ji.prototype=mn.prototype={constructor:ji,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Yi():+a)+(null==e?0:+e),!this._next&&ki!==this&&(ki?ki._next=this:Ni=this,ki=this),this._call=t,this._time=a,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,Ki=3;function Fi(t,e,a,s,v,E){var C=t.__transition;if(C){if(a in C)return}else t.__transition={};!function vr(t,e,a){var v,s=t.__transition;function C(ut){var vt,Wt,Gt,te;if(1!==a.state)return Q();for(vt in s)if((te=s[vt]).name===a.name){if(te.state===Ki)return xn(C);4===te.state?(te.state=6,te.timer.stop(),te.on.call("interrupt",t,t.__data__,te.index,te.group),delete s[vt]):+vt<e&&(te.state=6,te.timer.stop(),te.on.call("cancel",t,t.__data__,te.index,te.group),delete s[vt])}if(xn(function(){a.state===Ki&&(a.state=4,a.timer.restart(G,a.delay,a.time),G(ut))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=Ki,v=new Array(Gt=a.tween.length),vt=0,Wt=-1;vt<Gt;++vt)(te=a.tween[vt].value.call(t,t.__data__,a.index,a.group))&&(v[++Wt]=te);v.length=Wt+1}}function G(ut){for(var vt=ut<a.duration?a.ease.call(null,ut/a.duration):(a.timer.restart(Q),a.state=5,1),Wt=-1,Gt=v.length;++Wt<Gt;)v[Wt].call(t,vt);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),Q())}function Q(){for(var ut in a.state=6,a.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=a,a.timer=mn(function E(ut){a.state=1,a.timer.restart(C,a.delay,a.time),a.delay<=ut&&C(ut-a.delay)},0,a.time)}(t,a,{name:e,index:s,group:v,on:cr,tween:fr,time:E.time,delay:E.delay,duration:E.duration,ease:E.ease,timer:null,state:bn})}function en(t,e){var a=ei(t,e);if(a.state>bn)throw new Error("too late; already scheduled");return a}function ni(t,e){var a=ei(t,e);if(a.state>Ki)throw new Error("too late; already running");return a}function ei(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function ui(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,s,v,E){var C,G,Q;return(C=Math.sqrt(t*t+e*e))&&(t/=C,e/=C),(Q=t*a+e*s)&&(a-=t*Q,s-=e*Q),(G=Math.sqrt(a*a+s*s))&&(a/=G,s/=G,Q/=G),t*s<e*a&&(t=-t,e=-e,Q=-Q,C=-C),{translateX:v,translateY:E,rotate:Math.atan2(e,t)*On,skewX:Math.atan(Q)*On,scaleX:C,scaleY:G}}function kn(t,e,a,s){function v(ut){return ut.length?ut.pop()+" ":""}return function(ut,vt){var Wt=[],Gt=[];return ut=t(ut),vt=t(vt),function E(ut,vt,Wt,Gt,te,Ee){if(ut!==Wt||vt!==Gt){var Ie=te.push("translate(",null,e,null,a);Ee.push({i:Ie-4,x:ui(ut,Wt)},{i:Ie-2,x:ui(vt,Gt)})}else(Wt||Gt)&&te.push("translate("+Wt+e+Gt+a)}(ut.translateX,ut.translateY,vt.translateX,vt.translateY,Wt,Gt),function C(ut,vt,Wt,Gt){ut!==vt?(ut-vt>180?vt+=360:vt-ut>180&&(ut+=360),Gt.push({i:Wt.push(v(Wt)+"rotate(",null,s)-2,x:ui(ut,vt)})):vt&&Wt.push(v(Wt)+"rotate("+vt+s)}(ut.rotate,vt.rotate,Wt,Gt),function G(ut,vt,Wt,Gt){ut!==vt?Gt.push({i:Wt.push(v(Wt)+"skewX(",null,s)-2,x:ui(ut,vt)}):vt&&Wt.push(v(Wt)+"skewX("+vt+s)}(ut.skewX,vt.skewX,Wt,Gt),function Q(ut,vt,Wt,Gt,te,Ee){if(ut!==Wt||vt!==Gt){var Ie=te.push(v(te)+"scale(",null,",",null,")");Ee.push({i:Ie-4,x:ui(ut,Wt)},{i:Ie-2,x:ui(vt,Gt)})}else(1!==Wt||1!==Gt)&&te.push(v(te)+"scale("+Wt+","+Gt+")")}(ut.scaleX,ut.scaleY,vt.scaleX,vt.scaleY,Wt,Gt),ut=vt=null,function(te){for(var zt,Ee=-1,Ie=Gt.length;++Ee<Ie;)Wt[(zt=Gt[Ee]).i]=zt.x(te);return Wt.join("")}}}var wr=kn(function pr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xr=kn(function mr(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function br(t,e){var a,s;return function(){var v=ni(this,t),E=v.tween;if(E!==a)for(var C=0,G=(s=a=E).length;C<G;++C)if(s[C].name===e){(s=s.slice()).splice(C,1);break}v.tween=s}}function _r(t,e,a){var s,v;if("function"!=typeof a)throw new Error;return function(){var E=ni(this,t),C=E.tween;if(C!==s){v=(s=C).slice();for(var G={name:e,value:a},Q=0,ut=v.length;Q<ut;++Q)if(v[Q].name===e){v[Q]=G;break}Q===ut&&v.push(G)}E.tween=v}}function rn(t,e,a){var s=t._id;return t.each(function(){var v=ni(this,s);(v.value||(v.value={}))[e]=a.apply(this,arguments)}),function(v){return ei(v,s).value[e]}}function ln(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function Tn(t,e){var a=Object.create(t.prototype);for(var s in e)a[s]=e[s];return a}function Ci(){}var Wi=1/.7,mi="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),kr=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),Tr=new RegExp(`^rgba\\(${mi},${mi},${mi},${Ai}\\)$`),Cr=new RegExp(`^rgba\\(${ri},${ri},${ri},${Ai}\\)$`),Lr=new RegExp(`^hsl\\(${Ai},${ri},${ri}\\)$`),Ar=new RegExp(`^hsla\\(${Ai},${ri},${ri},${Ai}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ii(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?In(e):3===a?new Ge(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Ge(e[1],e[2],e[3],1):(e=kr.exec(t))?new Ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Lr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?In(Cn[t]):"transparent"===t?new Ge(NaN,NaN,NaN,0):null}function In(t){return new Ge(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,a,s){return s<=0&&(t=e=a=NaN),new Ge(t,e,a,s)}function Qi(t,e,a,s){return 1===arguments.length?function Mr(t){return t instanceof Ci||(t=Ii(t)),t?new Ge((t=t.rgb()).r,t.g,t.b,t.opacity):new Ge}(t):new Ge(t,e,a,null==s?1:s)}function Ge(t,e,a,s){this.r=+t,this.g=+e,this.b=+a,this.opacity=+s}function Pn(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}`}function Mn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${fi(this.r)}, ${fi(this.g)}, ${fi(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vi(t){return((t=fi(t))<16?"0":"")+t.toString(16)}function Rn(t,e,a,s){return s<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new ii(t,e,a,s)}function Nn(t){if(t instanceof ii)return new ii(t.h,t.s,t.l,t.opacity);if(t instanceof Ci||(t=Ii(t)),!t)return new ii;if(t instanceof ii)return t;var e=(t=t.rgb()).r/255,a=t.g/255,s=t.b/255,v=Math.min(e,a,s),E=Math.max(e,a,s),C=NaN,G=E-v,Q=(E+v)/2;return G?(C=e===E?(a-s)/G+6*(a<s):a===E?(s-e)/G+2:(e-a)/G+4,G/=Q<.5?E+v:2-E-v,C*=60):G=Q>0&&Q<1?0:C,new ii(C,G,Q,t.opacity)}function ii(t,e,a,s){this.h=+t,this.s=+e,this.l=+a,this.opacity=+s}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function zn(t,e,a,s,v){var E=t*t,C=E*t;return((1-3*t+3*E-C)*e+(4-6*E+3*C)*a+(1+3*t+3*E-3*C)*s+C*v)/6}ln(Ci,Ii,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Ir(){return this.rgb().formatHex8()},formatHsl:function Pr(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),ln(Ge,Qi,Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ge(fi(this.r),fi(this.g),fi(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pn,formatHex:Pn,formatHex8:function Rr(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}${vi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Mn,toString:Mn})),ln(ii,function Nr(t,e,a,s){return 1===arguments.length?Nn(t):new ii(t,e,a,null==s?1:s)},Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new ii(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ii(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*e,v=2*a-s;return new Ge(an(t>=240?t-240:t+120,v,s),an(t,v,s),an(t<120?t+240:t-120,v,s),this.opacity)},clamp(){return new ii(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const jn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):jn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kr(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function jr(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(s){return Math.pow(t+s*e,a)}}(e,a,t):jn(isNaN(e)?a:e)}}(e);function s(v,E){var C=a((v=Qi(v)).r,(E=Qi(E)).r),G=a(v.g,E.g),Q=a(v.b,E.b),ut=Bn(v.opacity,E.opacity);return function(vt){return v.r=C(vt),v.g=G(vt),v.b=Q(vt),v.opacity=ut(vt),v+""}}return s.gamma=t,s}(1);function Un(t){return function(e){var C,G,a=e.length,s=new Array(a),v=new Array(a),E=new Array(a);for(C=0;C<a;++C)G=Qi(e[C]),s[C]=G.r||0,v[C]=G.g||0,E[C]=G.b||0;return s=t(s),v=t(v),E=t(E),G.opacity=1,function(Q){return G.r=s(Q),G.g=v(Q),G.b=E(Q),G+""}}}Un(function Dr(t){var e=t.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),v=t[s],E=t[s+1];return zn((a-s/e)*e,s>0?t[s-1]:2*v-E,v,E,s<e-1?t[s+2]:2*E-v)}}),Un(function zr(t){var e=t.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*e);return zn((a-s/e)*e,t[(s+e-1)%e],t[s%e],t[(s+1)%e],t[(s+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ur(t,e){var s,v,E,a=on.lastIndex=sn.lastIndex=0,C=-1,G=[],Q=[];for(t+="",e+="";(s=on.exec(t))&&(v=sn.exec(e));)(E=v.index)>a&&(E=e.slice(a,E),G[C]?G[C]+=E:G[++C]=E),(s=s[0])===(v=v[0])?G[C]?G[C]+=v:G[++C]=v:(G[++C]=null,Q.push({i:C,x:ui(s,v)})),a=sn.lastIndex;return a<e.length&&(E=e.slice(a),G[C]?G[C]+=E:G[++C]=E),G.length<2?Q[0]?function Fr(t){return function(e){return t(e)+""}}(Q[0].x):function Br(t){return function(){return t}}(e):(e=Q.length,function(ut){for(var Wt,vt=0;vt<e;++vt)G[(Wt=Q[vt]).i]=Wt.x(ut);return G.join("")})}function Wn(t,e){var a;return("number"==typeof e?ui:e instanceof Ii?Fn:(a=Ii(e))?(e=a,Fn):Ur)(t,e)}function Wr(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,a){var s,E,v=a+"";return function(){var C=this.getAttribute(t);return C===v?null:C===s?E:E=e(s=C,a)}}function Jr(t,e,a){var s,E,v=a+"";return function(){var C=this.getAttributeNS(t.space,t.local);return C===v?null:C===s?E:E=e(s=C,a)}}function Hr(t,e,a){var s,v,E;return function(){var C,Q,G=a(this);return null==G?void this.removeAttribute(t):(C=this.getAttribute(t))===(Q=G+"")?null:C===s&&Q===v?E:(v=Q,E=e(s=C,G))}}function Vr(t,e,a){var s,v,E;return function(){var C,Q,G=a(this);return null==G?void this.removeAttributeNS(t.space,t.local):(C=this.getAttributeNS(t.space,t.local))===(Q=G+"")?null:C===s&&Q===v?E:(v=Q,E=e(s=C,G))}}function qr(t,e){var a,s;function v(){var E=e.apply(this,arguments);return E!==s&&(a=(s=E)&&function Yr(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,E)),a}return v._value=e,v}function $r(t,e){var a,s;function v(){var E=e.apply(this,arguments);return E!==s&&(a=(s=E)&&function Xr(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,E)),a}return v._value=e,v}function el(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){en(this,t).delay=e}}function rl(t,e){return function(){ni(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){ni(this,t).duration=e}}var xl=ge.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var jl=0;function ai(t,e,a,s){this._groups=t,this._parents=e,this._name=a,this._id=s}function Qn(){return++jl}var oi=ge.prototype;ai.prototype=function Kl(t){return ge().transition(t)}.prototype={constructor:ai,select:function ml(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=S(t));for(var s=this._groups,v=s.length,E=new Array(v),C=0;C<v;++C)for(var vt,Wt,G=s[C],Q=G.length,ut=E[C]=new Array(Q),Gt=0;Gt<Q;++Gt)(vt=G[Gt])&&(Wt=t.call(vt,vt.__data__,Gt,G))&&("__data__"in vt&&(Wt.__data__=vt.__data__),ut[Gt]=Wt,Fi(ut[Gt],e,a,Gt,ut,ei(vt,a)));return new ai(E,this._parents,e,a)},selectAll:function wl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=b(t));for(var s=this._groups,v=s.length,E=[],C=[],G=0;G<v;++G)for(var vt,Q=s[G],ut=Q.length,Wt=0;Wt<ut;++Wt)if(vt=Q[Wt]){for(var te,Gt=t.call(vt,vt.__data__,Wt,Q),Ee=ei(vt,a),Ie=0,zt=Gt.length;Ie<zt;++Ie)(te=Gt[Ie])&&Fi(te,e,a,Ie,Gt,Ee);E.push(Gt),C.push(vt)}return new ai(E,C,e,a)},selectChild:oi.selectChild,selectChildren:oi.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=R(t));for(var e=this._groups,a=e.length,s=new Array(a),v=0;v<a;++v)for(var Q,E=e[v],C=E.length,G=s[v]=[],ut=0;ut<C;++ut)(Q=E[ut])&&t.call(Q,Q.__data__,ut,E)&&G.push(Q);return new ai(s,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,s=e.length,E=Math.min(s,a.length),C=new Array(s),G=0;G<E;++G)for(var Gt,Q=e[G],ut=a[G],vt=Q.length,Wt=C[G]=new Array(vt),te=0;te<vt;++te)(Gt=Q[te]||ut[te])&&(Wt[te]=Gt);for(;G<s;++G)C[G]=e[G];return new ai(C,this._parents,this._name,this._id)},selection:function bl(){return new xl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,a=Qn(),s=this._groups,v=s.length,E=0;E<v;++E)for(var Q,C=s[E],G=C.length,ut=0;ut<G;++ut)if(Q=C[ut]){var vt=ei(Q,e);Fi(Q,t,a,ut,C,{time:vt.time+vt.delay+vt.duration,delay:0,duration:vt.duration,ease:vt.ease})}return new ai(s,this._parents,t,a)},call:oi.call,nodes:oi.nodes,node:oi.node,size:oi.size,empty:oi.empty,each:oi.each,on:function gl(t,e){var a=this._id;return arguments.length<2?ei(this.node(),a).on.on(t):this.each(function vl(t,e,a){var s,v,E=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?en:ni;return function(){var C=E(this,t),G=C.on;G!==s&&(v=(s=G).copy()).on(e,a),C.on=v}}(a,t,e))},attr:function Zr(t,e){var a=Ht(t),s="transform"===a?xr:Wn;return this.attrTween(t,"function"==typeof e?(a.local?Vr:Hr)(a,s,rn(this,"attr."+t,e)):null==e?(a.local?Gr:Wr)(a):(a.local?Jr:Qr)(a,s,e))},attrTween:function tl(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var s=Ht(t);return this.tween(a,(s.local?qr:$r)(s,e))},style:function kl(t,e,a){var s="transform"==(t+="")?wr:Wn;return null==e?this.styleTween(t,function _l(t,e){var a,s,v;return function(){var E=O(this,t),C=(this.style.removeProperty(t),O(this,t));return E===C?null:E===a&&C===s?v:v=e(a=E,s=C)}}(t,s)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,a){var s,v,E;return function(){var C=O(this,t),G=a(this),Q=G+"";return null==G&&(this.style.removeProperty(t),Q=G=O(this,t)),C===Q?null:C===s&&Q===v?E:(v=Q,E=e(s=C,G))}}(t,s,rn(this,"style."+t,e))).each(function Sl(t,e){var a,s,v,G,E="style."+e,C="end."+E;return function(){var Q=ni(this,t),ut=Q.on,vt=null==Q.value[E]?G||(G=Gn(e)):void 0;(ut!==a||v!==vt)&&(s=(a=ut).copy()).on(C,v=vt),Q.on=s}}(this._id,t)):this.styleTween(t,function El(t,e,a){var s,E,v=a+"";return function(){var C=O(this,t);return C===v?null:C===s?E:E=e(s=C,a)}}(t,s,e),a).on("end.style."+t,null)},styleTween:function Ll(t,e,a){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,function Cl(t,e,a){var s,v;function E(){var C=e.apply(this,arguments);return C!==v&&(s=(v=C)&&function Tl(t,e,a){return function(s){this.style.setProperty(t,e.call(this,s),a)}}(t,C,a)),s}return E._value=e,E}(t,e,null==a?"":a))},text:function Pl(t){return this.tween("text","function"==typeof t?function Il(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,a;function s(){var v=t.apply(this,arguments);return v!==a&&(e=(a=v)&&function Ml(t){return function(e){this.textContent=t.call(this,e)}}(v)),e}return s._value=t,s}(t))},remove:function pl(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var a=this._id;if(t+="",arguments.length<2){for(var C,s=ei(this.node(),a).tween,v=0,E=s.length;v<E;++v)if((C=s[v]).name===t)return C.value;return null}return this.each((null==e?br:_r)(a,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):ei(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):ei(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){ni(this,t).ease=e}}(e,t)):ei(this.node(),e).ease},easeVarying:function dl(t){if("function"!=typeof t)throw new Error;return this.each(function ul(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;ni(this,t).ease=a}}(this._id,t))},end:function zl(){var t,e,a=this,s=a._id,v=a.size();return new Promise(function(E,C){var G={value:C},Q={value:function(){0==--v&&E()}};a.each(function(){var ut=ni(this,s),vt=ut.on;vt!==t&&((e=(t=vt).copy())._.cancel.push(G),e._.interrupt.push(G),e._.end.push(Q)),ut.on=e}),0===v&&E()})},[Symbol.iterator]:oi[Symbol.iterator]};var Fl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}ge.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var s,v,C,a=t.__transition,E=!0;if(a){for(C in e=null==e?null:e+"",a)(s=a[C]).name===e?(v=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(v?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete a[C]):E=!1;E&&delete t.__transition}}(this,t)})},ge.prototype.transition=function Wl(t){var e,a;t instanceof ai?(e=t._id,t=t._name):(e=Qn(),(a=Fl).time=Yi(),t=null==t?null:t+"");for(var s=this._groups,v=s.length,E=0;E<v;++E)for(var Q,C=s[E],G=C.length,ut=0;ut<G;++ut)(Q=C[ut])&&Fi(Q,t,e,ut,C,a||Ul(Q,e));return new ai(s,this._parents,t,e)};Math;function Pi(t){return{type:t}}function bi(t){return function(){return t}}function Yn(t){this._context=t}function ql(t){return new Yn(t)}["w","e"].map(Pi),["n","s"].map(Pi),["n","w","e","s","nw","ne","sw","se"].map(Pi),Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const fn=Math.PI,vn=2*fn,gi=1e-6,$l=vn-gi;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Xi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(s){this._+=s[0];for(let v=1,E=s.length;v<E;++v)this._+=Math.round(arguments[v]*a)/a+s[v]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,s,v){this._append`Q${+e},${+a},${this._x1=+s},${this._y1=+v}`}bezierCurveTo(e,a,s,v,E,C){this._append`C${+e},${+a},${+s},${+v},${this._x1=+E},${this._y1=+C}`}arcTo(e,a,s,v,E){if(e=+e,a=+a,s=+s,v=+v,(E=+E)<0)throw new Error(`negative radius: ${E}`);let C=this._x1,G=this._y1,Q=s-e,ut=v-a,vt=C-e,Wt=G-a,Gt=vt*vt+Wt*Wt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Gt>gi)if(Math.abs(Wt*Q-ut*vt)>gi&&E){let te=s-C,Ee=v-G,Ie=Q*Q+ut*ut,zt=te*te+Ee*Ee,Rt=Math.sqrt(Ie),oe=Math.sqrt(Gt),ee=E*Math.tan((fn-Math.acos((Ie+Gt-zt)/(2*Rt*oe)))/2),ce=ee/oe,ye=ee/Rt;Math.abs(ce-1)>gi&&this._append`L${e+ce*vt},${a+ce*Wt}`,this._append`A${E},${E},0,0,${+(Wt*te>vt*Ee)},${this._x1=e+ye*Q},${this._y1=a+ye*ut}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,s,v,E,C){if(e=+e,a=+a,C=!!C,(s=+s)<0)throw new Error(`negative radius: ${s}`);let G=s*Math.cos(v),Q=s*Math.sin(v),ut=e+G,vt=a+Q,Wt=1^C,Gt=C?v-E:E-v;null===this._x1?this._append`M${ut},${vt}`:(Math.abs(this._x1-ut)>gi||Math.abs(this._y1-vt)>gi)&&this._append`L${ut},${vt}`,s&&(Gt<0&&(Gt=Gt%vn+vn),Gt>$l?this._append`A${s},${s},0,1,${Wt},${e-G},${a-Q}A${s},${s},0,1,${Wt},${this._x1=ut},${this._y1=vt}`:Gt>gi&&this._append`A${s},${s},0,${+(Gt>=fn)},${Wt},${this._x1=e+s*Math.cos(E)},${this._y1=a+s*Math.sin(E)}`)}rect(e,a,s,v){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${s=+s}v${+v}h${-s}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var a=bi(!0),s=null,v=ql,E=null,C=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);e=s}return t},()=>new Xi(e)}(G);function G(Q){var ut,Wt,te,vt=(Q=function Yl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(Q)).length,Gt=!1;for(null==s&&(E=v(te=C())),ut=0;ut<=vt;++ut)!(ut<vt&&a(Wt=Q[ut],ut,Q))===Gt&&((Gt=!Gt)?E.lineStart():E.lineEnd()),Gt&&E.point(+t(Wt,ut,Q),+e(Wt,ut,Q));if(te)return E=null,te+""||null}return t="function"==typeof t?t:void 0===t?na:bi(t),e="function"==typeof e?e:void 0===e?ra:bi(e),G.x=function(Q){return arguments.length?(t="function"==typeof Q?Q:bi(+Q),G):t},G.y=function(Q){return arguments.length?(e="function"==typeof Q?Q:bi(+Q),G):e},G.defined=function(Q){return arguments.length?(a="function"==typeof Q?Q:bi(!!Q),G):a},G.curve=function(Q){return arguments.length?(v=Q,null!=s&&(E=v(s)),G):v},G.context=function(Q){return arguments.length?(null==Q?s=E=null:E=v(s=Q),G):s},G}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function _i(t,e,a){this.k=t,this.x=e,this.y=a}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_i.prototype={constructor:_i,scale:function(t){return 1===t?this:new _i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new _i(1,0,0)}}]);