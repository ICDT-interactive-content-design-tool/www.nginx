"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3234],{1874:(ce,Ut,b)=>{b.d(Ut,{$u:()=>x,IB:()=>u,T2:()=>k,WR:()=>v,bf:()=>at,eD:()=>kt,l6:()=>C,lq:()=>D,pZ:()=>y,u$:()=>O});const y={fill:"transparent",stroke:"#129bff",strokeWidth:1},O={stroke:"#0D99FF",strokeWidth:1,strokeLinecap:"square",strokeDasharrays:[2,5]},kt={fill:"#FFFFFF",stroke:"#0D99FF",strokeWidth:1,width:7,height:7},at={fill:"transparent",stroke:"transparent",strokeWidth:1},u={fill:"none",stroke:"#2299F8",strokeWidth:1},C={fill:"#0D99FF",rx:4},k={fill:"#fff",alignmentBaseline:"central",textAnchor:"middle",fontSize:14},v={stroke:"#129bff",strokeWidth:1,strokeLinecap:"square",strokeDasharray:8},D={fill:"transparent"},x={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},2806:(ce,Ut,b)=>{b.d(Ut,{FC:()=>kt,FL:()=>y,LC:()=>C,PS:()=>O,Q$:()=>u,QQ:()=>v,Tt:()=>D,Xd:()=>k,hv:()=>at,r_:()=>x});const y={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"},O={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8},kt={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3},at={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,TSPAN:10,PATH:8,POLYLINE:11},u={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306},C=[{name:"tam gi\xe1c vu\xf4ng",type:u.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:u.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:u.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:u.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:u.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:u.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:u.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:u.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:u.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:u.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:u.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:u.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:u.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}],k={IMAGE:1,HTML:2,AUDIO:3,VIDEO:4},v={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,WORD:916,EXCEL:917,POWERPOINT:918,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912},D={ONEDRIVE:1e3,GOOGLEDRIVE:1001,YOUTUBE:1002,SCORM:1003,PHET:1005,OTHER:1004},x={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221,Minus:189,Equal:187}},4271:(ce,Ut,b)=>{b.d(Ut,{$N:()=>C,An:()=>k,CS:()=>O,Kf:()=>P,Lp:()=>D,j9:()=>v,lP:()=>at,ml:()=>V,n9:()=>x,nf:()=>u});var y=b(4067);const O=T=>{var N;return null===(N=T.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===N?void 0:N.map(d=>{let Y={type:d.substring(0,1)},z=(pt=d.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?pt.split(/\s/).map(F=>(0,y.z)(parseFloat(F),1e6)):[];var pt;return z.length&&(Y.points=z),Y})},at=T=>{let N=[],d=[],Y=[],z=[];return T.forEach(pt=>{switch(["M","L","C","S","Q","T"].includes(pt.type)&&pt.points&&pt.points.forEach((ht,Ct)=>{Ct%2==0?N.push(ht):d.push(ht)}),pt.type){case"A":var F;7==(null===(F=pt.points)||void 0===F?void 0:F.length)&&(Y.push(pt.points[5]),z.push(pt.points[6]));break;case"H":var it;null!==(it=pt.points)&&void 0!==it&&it.length&&(N.push(pt.points[0]),Y.push(pt.points[0]));break;case"V":var S;null!==(S=pt.points)&&void 0!==S&&S.length&&(d.push(pt.points[0]),z.push(pt.points[0]));break;case"a":var Q;if(7==(null===(Q=pt.points)||void 0===Q?void 0:Q.length)){let ht=N[N.length-1];N.push(ht+pt.points[5]),Y.push(ht+pt.points[5]);let Ct=d[d.length-1];d.push(Ct+pt.points[6]),z.push(Ct+pt.points[6])}break;case"h":var Et;if(null!==(Et=pt.points)&&void 0!==Et&&Et.length){let ht=N[N.length-1];N.push(ht+pt.points[0]),Y.push(ht+pt.points[0])}break;case"v":var Rt;if(null!==(Rt=pt.points)&&void 0!==Rt&&Rt.length){let ht=d[d.length-1];d.push(ht+pt.points[0]),z.push(ht+pt.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var wt;null===(wt=pt.points)||void 0===wt||wt.forEach((ht,Ct)=>{Ct%2==0?Y.push(ht):z.push(ht)});break;case"m":case"l":case"c":case"s":case"q":case"t":var ne;null===(ne=pt.points)||void 0===ne||ne.forEach((ht,Ct)=>{if(Ct%2==0){let Ot=N[N.length-1];N.push(Ot+ht),Y.push(Ot+ht)}else{let Ot=d[d.length-1];d.push(Ot+ht),z.push(Ot+ht)}})}}),{minX:Math.min.apply(null,Y),minY:Math.min.apply(null,z),maxX:Math.max.apply(null,Y),maxY:Math.max.apply(null,z)}},u=(T,N)=>N.map(d=>{let Y=[];switch(d.type){case"a":var z;7==(null===(z=d.points)||void 0===z?void 0:z.length)&&Y.push([(0,y.z)(d.points[0]/T.width,1e6),(0,y.z)(d.points[1]/T.height,1e6),d.points[2],d.points[3],d.points[4],(0,y.z)(d.points[5]/T.width,1e6),(0,y.z)(d.points[6]/T.height,1e6)]);break;case"A":var pt;7==(null===(pt=d.points)||void 0===pt?void 0:pt.length)&&Y.push([(0,y.z)(d.points[0]/T.width,1e6),(0,y.z)(d.points[1]/T.height,1e6),d.points[2],d.points[3],d.points[4],(0,y.z)((d.points[5]-T.x)/T.width,1e6),(0,y.z)((d.points[6]-T.y)/T.height,1e6)]);break;case"h":var F;null!==(F=d.points)&&void 0!==F&&F.length&&Y.push([(0,y.z)(d.points[0]/T.width,1e6)]);break;case"H":var it;null!==(it=d.points)&&void 0!==it&&it.length&&Y.push([(0,y.z)((d.points[0]-T.x)/T.width,1e6)]);break;case"v":var S;null!==(S=d.points)&&void 0!==S&&S.length&&Y.push([(0,y.z)(d.points[0]/T.height,1e6)]);break;case"V":var Q;null!==(Q=d.points)&&void 0!==Q&&Q.length&&Y.push([(0,y.z)((d.points[0]-T.y)/T.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var Et;if(null!==(Et=d.points)&&void 0!==Et&&Et.length)for(let wt=0,ne=d.points.length-1;wt<ne;wt+=2)Y.push([(0,y.z)((d.points[wt]-T.x)/T.width,1e6),(0,y.z)((d.points[wt+1]-T.y)/T.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var Rt;if(null!==(Rt=d.points)&&void 0!==Rt&&Rt.length)for(let wt=0,ne=d.points.length-1;wt<ne;wt+=2)Y.push([(0,y.z)(d.points[wt]/T.width,1e6),(0,y.z)(d.points[wt+1]/T.height,1e6)])}return Y.length?{type:d.type,ratios:Y}:{type:d.type}}),C=(T,N)=>N.map(d=>{switch(d.type){case"a":var Y,z;return`${d.type}${null!==(Y=null===(z=d.ratios)||void 0===z||null===(z=z.map(ct=>{var J,ft,K,U,s,E,W;return[(0,y.z)(T.width*(null!==(J=ct[0])&&void 0!==J?J:0),1e6),(0,y.z)(T.height*(null!==(ft=ct[1])&&void 0!==ft?ft:0),1e6),null!==(K=ct[2])&&void 0!==K?K:0,null!==(U=ct[3])&&void 0!==U?U:0,null!==(s=ct[4])&&void 0!==s?s:0,(0,y.z)(T.width*(null!==(E=ct[5])&&void 0!==E?E:0),1e6),(0,y.z)(T.height*(null!==(W=ct[6])&&void 0!==W?W:0),1e6)]}))||void 0===z||null===(z=z.map(ct=>ct.join(" ")))||void 0===z?void 0:z.join(" "))&&void 0!==Y?Y:""}`;case"A":var pt,F;return`${d.type}${null!==(pt=null===(F=d.ratios)||void 0===F||null===(F=F.map(ct=>{var J,ft,K,U,s,E,W;return[(0,y.z)(T.width*(null!==(J=ct[0])&&void 0!==J?J:0),1e6),(0,y.z)(T.height*(null!==(ft=ct[1])&&void 0!==ft?ft:0),1e6),null!==(K=ct[2])&&void 0!==K?K:0,null!==(U=ct[3])&&void 0!==U?U:0,null!==(s=ct[4])&&void 0!==s?s:0,(0,y.z)(T.x+T.width*(null!==(E=ct[5])&&void 0!==E?E:0),1e6),(0,y.z)(T.y+T.height*(null!==(W=ct[6])&&void 0!==W?W:0),1e6)]}))||void 0===F||null===(F=F.map(ct=>ct.join(" ")))||void 0===F?void 0:F.join(" "))&&void 0!==pt?pt:""}`;case"h":var it,S;return`${d.type}${null!==(it=null===(S=d.ratios)||void 0===S||null===(S=S.map(ct=>{var J;return(0,y.z)(T.width*(null!==(J=ct[0])&&void 0!==J?J:0),1e6)}))||void 0===S?void 0:S.join(" "))&&void 0!==it?it:""}`;case"H":var Q,Et;return`${d.type}${null!==(Q=null===(Et=d.ratios)||void 0===Et||null===(Et=Et.map(ct=>{var J;return(0,y.z)(T.x+T.width*(null!==(J=ct[0])&&void 0!==J?J:0),1e6)}))||void 0===Et?void 0:Et.join(" "))&&void 0!==Q?Q:""}`;case"v":var Rt,wt;return`${d.type}${null!==(Rt=null===(wt=d.ratios)||void 0===wt||null===(wt=wt.map(ct=>{var J;return(0,y.z)(T.height*(null!==(J=ct[0])&&void 0!==J?J:0),1e6)}))||void 0===wt?void 0:wt.join(" "))&&void 0!==Rt?Rt:""}`;case"V":var ne,ht;return`${d.type}${null!==(ne=null===(ht=d.ratios)||void 0===ht||null===(ht=ht.map(ct=>{var J;return(0,y.z)(T.y+T.height*(null!==(J=ct[0])&&void 0!==J?J:0),1e6)}))||void 0===ht?void 0:ht.join(" "))&&void 0!==ne?ne:""}`;case"z":case"Z":return d.type;case"M":case"L":case"C":case"S":case"Q":case"T":var Ct,Ot;return`${d.type}${null!==(Ct=null===(Ot=d.ratios)||void 0===Ot||null===(Ot=Ot.map(ct=>{var J,ft;return[(0,y.z)(T.x+T.width*(null!==(J=ct[0])&&void 0!==J?J:0),1e6),(0,y.z)(T.y+T.height*(null!==(ft=ct[1])&&void 0!==ft?ft:0),1e6)]}))||void 0===Ot||null===(Ot=Ot.map(ct=>ct.join(" ")))||void 0===Ot?void 0:Ot.join(" "))&&void 0!==Ct?Ct:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var Mt,Pt;return`${d.type}${null!==(Mt=null===(Pt=d.ratios)||void 0===Pt||null===(Pt=Pt.map(ct=>{var J,ft;return[(0,y.z)(T.width*(null!==(J=ct[0])&&void 0!==J?J:0),1e6),(0,y.z)(T.height*(null!==(ft=ct[1])&&void 0!==ft?ft:0),1e6)]}))||void 0===Pt||null===(Pt=Pt.map(ct=>ct.join(" ")))||void 0===Pt?void 0:Pt.join(" "))&&void 0!==Mt?Mt:""}`;default:return""}}).join(""),k=T=>{return(N=T.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?N.split(/\s/).map(d=>parseFloat(d)):[];var N},v=T=>{let N=[],d=[];return T.forEach((Y,z)=>{z%2==0?N.push(Y):d.push(Y)}),{minX:Math.min.apply(null,N),minY:Math.min.apply(null,d),maxX:Math.max.apply(null,N),maxY:Math.max.apply(null,d)}},D=(T,N)=>{let d=[];for(let Y=0,z=N.length-1;Y<z;Y+=2)d.push([(N[Y]-T.x)/T.width,(N[Y+1]-T.y)/T.height]);return d},x=(T,N)=>N.map(d=>[(0,y.z)(T.x+T.width*d[0],1e6),(0,y.z)(T.y+T.height*d[1],1e6)]).map(d=>d.join(" ")).join(" "),V=(T,N)=>{let d=G(N);if(d){let Y=window.Snap.matrix(d.a,d.b,d.c,d.d,d.e,d.f);if(Y){let{dx:z,dy:pt,rotate:F,scalex:it,scaley:S}=Y.split();return{x:T.x+z,y:T.y+pt,dx:z,dy:pt,rotate:F,scalex:it,scaley:S}}return{x:B(T.x,T.y,d),y:w(T.x,T.y,d)}}return T},G=T=>{let N=T.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(d=>(0,y.z)(parseFloat(d),1e6));if(6==N.length)return{a:N[0],b:N[1],c:N[2],d:N[3],e:N[4],f:N[5]}},P=(T,N)=>{let d=G(N);return d?window.Snap.path.map(T,window.Snap.matrix(d.a,d.b,d.c,d.d,d.e,d.f)).toString():T},B=function(T,N,d){return(0,y.z)(T*d.a+N*d.c+d.e,10)},w=function(T,N,d){return(0,y.z)(T*d.b+N*d.d+d.f,10)}},9296:(ce,Ut,b)=>{b.d(Ut,{d:()=>O});var y=b(4890);const O=kt=>{let at=[];return[/font-family\s*:\s*([^;]+);/g,/"fontFamily":"([a-zA-Z0-9\-\_\'\s]+)"/g].forEach(u=>{var C,k;at=[...at,...null!==(C=null===(k=kt.replace(/&quot;/g,"'").match(u))||void 0===k?void 0:k.filter((v,D,x)=>x.indexOf(v)==D).map(v=>v.replace(u,"$1").replace(/[^a-zA-Z0-9\-\_\s\,]/g,"").trim()).filter((v,D,x)=>v&&x.indexOf(v)==D))&&void 0!==C?C:[]]}),at.filter((u,C,k)=>k.indexOf(u)==C).map(u=>(0,y.n)(u).fontFamily).filter(u=>!!u).filter((u,C,k)=>k.indexOf(u)==C)}},4890:(ce,Ut,b)=>{b.d(Ut,{n:()=>y});const y=O=>{var kt,at,u={};let C=/Italic$/,k=/Thin$/,v=/ExtraLight|UltraLight$/i,D=/Light$/,x=/Regular|Normal$/,V=/Medium$/,G=/SemiBold|DemiBold$/i,P=/Bold$/,B=/ExtraBold|UltraBold$/i,w=/Black|Heavy$/;return(O=null!==(kt=null===(at=O.split(","))||void 0===at||null===(at=at.shift())||void 0===at?void 0:at.trim().replace(/[^a-zA-Z_-\s]/g,""))&&void 0!==kt?kt:"").match(C)&&(u.fontStyle="italic",O=O.replace(C,"").trim()),O.match(k)?(u.fontWeight=100,O=O.replace(k,"").trim()):O.match(v)?(u.fontWeight=200,O=O.replace(v,"").trim()):O.match(D)?(u.fontWeight=300,O=O.replace(D,"").trim()):O.match(x)?(u.fontWeight=400,O=O.replace(x,"").trim()):O.match(V)?(u.fontWeight=500,O=O.replace(V,"").trim()):O.match(G)?(u.fontWeight=600,O=O.replace(G,"").trim()):O.match(P)?(u.fontWeight=700,O=O.replace(P,"").trim()):O.match(B)?(u.fontWeight=800,O=O.replace(B,"").trim()):O.match(w)&&(u.fontWeight=900,O=O.replace(w,"").trim()),u.fontFamily=O.replace(/[\-\_\s]+$/,""),u}},9933:(ce,Ut,b)=>{b.d(Ut,{v:()=>B,U:()=>G});var y=b(5150),O=b(4067),kt=/^#[a-fA-F0-9]+$/i,at=/^rgb\((\d+),(\d+),(\d+)\)$/i,u=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const C=w=>{let T=null,N=null;if(w)if("transparent"==w)T="#000000",N=0;else if(w.match(kt))T=w;else{let d=(w=w.replace(/\s+/g,"")).match(u);if(d)T="#"+(256|d[1]).toString(16).slice(1)+(256|d[2]).toString(16).slice(1)+(256|d[3]).toString(16).slice(1),N=(0,O.z)(parseFloat(d[4]),100);else{let Y=w.match(at);Y&&(T="#"+(256|Y[1]).toString(16).slice(1)+(256|Y[2]).toString(16).slice(1)+(256|Y[3]).toString(16).slice(1))}}return{hex:T,alpha:N}};var k=b(4271),v=b(2806);const G=w=>P(null==w?void 0:w.url,null==w?void 0:w.path,null==w?void 0:w.src,null==w?void 0:w.name);var P=(w,T,N,d)=>{var Y,z;let pt,F,it,S;var Q,Et;return w&&(pt=w.replace(/\\/g,"/")),T&&(F=T.replace(/\\/g,"/")),N&&(it=N.replace(/\\/g,"/")),F&&!pt&&(pt=(null===(Q=y.L.config)||void 0===Q?void 0:Q.readfileuploadurl)+F),!it||F||pt||(F=it.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),pt=(null===(Et=y.L.config)||void 0===Et?void 0:Et.readfileuploadurl)+F),S=d||(null!==(Y=pt)&&void 0!==Y?Y:"").split("/").pop()||(null!==(z=F)&&void 0!==z?z:"").split("/").pop()||"",{url:pt,path:F,name:S}};const B=w=>{let T={x:0,y:0,width:w.screen.w,height:w.screen.h},N=[];return w.data.forEach((d,Y)=>{var z,pt;let F={id:"number"==typeof d.id?d.id:y.L.data.newSlideId,code:null===(z=d.id)||void 0===z?void 0:z.toString(),name:"string"==typeof d.id?d.id:`Trang ${Y+1}`,svg:{viewBox:T,nodes:[]},test:(it=d.test2,it?(it.audiotrue&&(it.audiotrue=G({path:it.audiotrue.path})),it.audiofalse&&(it.audiofalse=G({path:it.audiofalse.path})),it.effecttrue&&(it.effecttrue=G({path:it.effecttrue.path})),it.effectfalse&&(it.effectfalse=G({path:it.effectfalse.path})),it.icontrue&&(it.icontrue=G({path:it.icontrue.path})),it.iconfalse&&(it.iconfalse=G({path:it.iconfalse.path})),it):{})};var it;d.background&&F.svg&&(F.svg.background=function(w){return w&&(null!==w.match(/#([a-zA-Z0-9]+)/)||null!==w.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==w.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(d.background)?{color:d.background}:function(w){return w&&null!==w.match(/data:[^;]+;base64,/)}(d.background)?{base64:d.background}:function(w){return w&&null!==w.match(/http(s)?:\/\//)}(d.background)?P(d.background):P(void 0,d.background)),jQuery(null!==(pt=d.svg)&&void 0!==pt?pt:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((it,S)=>{var Q,Et;let Rt=jQuery(S).parents(".indexs"),wt=(Ot=Rt.attr("data-index"))?parseInt(Ot):0,ne=(Ot=>wt&&Ot?parseInt(Ot):0)(Rt.attr("data-time")),ht=null!==(Q=S.getAttribute("id"))&&void 0!==Q?Q:(1e9*Math.random()).toFixed(),Ct={id:parseInt(ht),code:`${S.nodeName}-${ht}`,name:S.nodeName,idx:wt,time:ne,type:(()=>{switch(S.nodeName){case"polygon":return v.hv.POLYGON;case"path":return v.hv.PATH;case"circle":return v.hv.CIRCLE;case"ellipse":return v.hv.ELLIPSE;case"line":return v.hv.LINE;case"rect":return v.hv.RECT;case"foreignObject":return v.hv.FOREIGNOBJECT}return 0})(),size:(Ot=>{let Mt={},Pt=0,ct=0,J=0,ft=0,K=null,U=null,s=parseFloat((null===(Ot=S.getAttribute("transform"))||void 0===Ot?void 0:Ot.replace("rotate(","").replace(")",""))||"0")||null;switch(S.nodeName){case"polygon":{var E,W;let q=[],ot=[],Xt=999999999,Zt=999999999,Ht=0,jt=0;K=JSON.parse(S.getAttribute("ratios")||"[]"),U=null!==(E=null===(W=S.getAttribute("points"))||void 0===W?void 0:W.split(",").map(function(dt){return dt.split(" ").map(function(qt){return parseFloat(qt)})}))&&void 0!==E?E:[],U.forEach(function(dt){q.push(dt[0]),ot.push(dt[1])}),Xt=Math.min.apply(null,q),Zt=Math.min.apply(null,ot),Ht=Math.max.apply(null,q),jt=Math.max.apply(null,ot),Pt=Xt,ct=Zt,J=Ht-Pt,ft=jt-ct;break}case"path":{let q=S.getAttribute("d");if(q){let ot=(0,k.CS)(q),{minX:Xt,minY:Zt,maxX:Ht,maxY:jt}=(0,k.lP)(ot);Pt=Xt,ct=Zt,J=Ht-Pt||1,ft=jt-ct||1,Object.assign(Mt,{ratioMaps:(0,k.nf)({x:Pt,y:ct,width:J,height:ft},ot)})}break}case"circle":{let q=parseFloat(S.getAttribute("cx")||"0"),ot=parseFloat(S.getAttribute("cy")||"0"),Xt=parseFloat(S.getAttribute("r")||"0");Pt=q-Xt,ct=ot-Xt,J=2*Xt,ft=2*Xt;break}case"ellipse":{let q=parseFloat(S.getAttribute("cx")||"0"),ot=parseFloat(S.getAttribute("cy")||"0"),Xt=parseFloat(S.getAttribute("rx")||"0"),Zt=parseFloat(S.getAttribute("ry")||"0");Pt=q-Xt,ct=ot-Zt,J=2*Xt,ft=2*Zt;break}case"line":{let q=parseFloat(S.getAttribute("x1")||"0"),ot=parseFloat(S.getAttribute("y1")||"0"),Xt=parseFloat(S.getAttribute("x2")||"0"),Zt=parseFloat(S.getAttribute("y2")||"0"),Ht=999999999,jt=999999999,dt=0,qt=0;Ht=Math.min(q,Xt),jt=Math.min(ot,Zt),dt=Math.max(q,Xt),qt=Math.max(ot,Zt),Pt=Ht,ct=jt,J=dt-Pt,ft=qt-ct,K=[[(q-Pt)/(J||1),(ot-ct)/(ft||1)],[(Xt-Pt)/(J||1),(Zt-ct)/(ft||1)]];break}case"rect":case"foreignObject":Pt=parseFloat(S.getAttribute("x")||"0"),ct=parseFloat(S.getAttribute("y")||"0"),J=parseFloat(S.getAttribute("width")||"0"),ft=parseFloat(S.getAttribute("height")||"0")}return Object.assign(Mt,{x:Pt,y:ct,width:J,height:ft,ratios:K,points:U,rotate:s})})(),attribute:(()=>{let Ot={};switch(S.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var Mt,Pt,ct,J,ft,K,U,s;let dt=null!==(Mt=S.getAttribute("fill"))&&void 0!==Mt?Mt:null,qt=null!==(Pt=S.getAttribute("stroke"))&&void 0!==Pt?Pt:null,j=null!==(ct=parseFloat(null!==(J=S.getAttribute("stroke-opacity"))&&void 0!==J?J:"1"))&&void 0!==ct?ct:null,c=null!==(ft=parseFloat(S.getAttribute("stroke-width")||"0"))&&void 0!==ft?ft:null,H=null!==(K=S.getAttribute("stroke-linecap"))&&void 0!==K?K:null,st=null!==(U=S.getAttribute("stroke-linejoin"))&&void 0!==U?U:null,gt=null!==(s=parseFloat(S.getAttribute("stroke-dasharray")||"0"))&&void 0!==s?s:null;Object.assign(Ot,{fill:dt,stroke:qt,strokeOpacity:j,strokeWidth:c,strokeLinecap:H,strokeLinejoin:st,strokeDasharray:gt});break}case"path":{let dt=Rt.get(0);if(dt){var E,W,q,ot,Xt,Zt,Ht,jt;let qt=null!==(E=dt.getAttribute("fill"))&&void 0!==E?E:null,j=null!==(W=dt.getAttribute("stroke"))&&void 0!==W?W:null,c=null!==(q=parseFloat(null!==(ot=dt.getAttribute("stroke-opacity"))&&void 0!==ot?ot:"1"))&&void 0!==q?q:null,H=null!==(Xt=parseFloat(dt.getAttribute("stroke-width")||"0"))&&void 0!==Xt?Xt:null,st=null!==(Zt=dt.getAttribute("stroke-linecap"))&&void 0!==Zt?Zt:null,gt=null!==(Ht=dt.getAttribute("stroke-linejoin"))&&void 0!==Ht?Ht:null,tt=null!==(jt=parseFloat(dt.getAttribute("stroke-dasharray")||"0"))&&void 0!==jt?jt:null;Object.assign(Ot,{fill:qt,stroke:j,strokeOpacity:c,strokeWidth:H,strokeLinecap:st,strokeLinejoin:gt,strokeDasharray:tt})}break}}return Ot})(),style:(()=>{let Ot={};switch(S.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let ct=jQuery(S).find(".svg-container");if(ct.length){let ft=parseFloat(ct.css("border-width")||"0")||null,K=ct.css("border-style")||null,U=ct.css("border-color")||null,s=null,E=ct.css("background-color")||null,W=null;(()=>{let{hex:q,alpha:ot}=C(U);U=q,s=ot})(),(()=>{let{hex:q,alpha:ot}=C(E);E=q,W=ot})(),Object.assign(Ot,{borderWidth:ft,borderStyle:K,borderColor:U,borderOpacity:s,backgroundColor:E,backgroundOpacity:W})}let J=jQuery(S).find(".svg-editor-content");if(J.length){var Mt,Pt;let ft=JSON.parse((J.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:K,alpha:U}=C(ft.TextColor);Object.assign(Ot,{fontFamily:null!==(Mt=ft.FontFamily)&&void 0!==Mt?Mt:null,fontSize:null!==(Pt=ft.FontSize)&&void 0!==Pt?Pt:null,color:K,opacity:U})}break}}return Ot})(),source:(()=>{let Ot={};switch(S.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Rt.hasClass("editors")){var Mt;let jt="div,h1,h2,h3,h4,h5,h6,p,span,strong,b,i",dt=c=>{null==c||c.forEach(H=>{let st=H.querySelectorAll(`:scope > ${jt}`);st.length&&dt(st),!H.querySelectorAll(":scope > *").length&&""==H.textContent&&H.remove()})},qt=c=>{let H=null==c?void 0:c.querySelectorAll(":scope > div,h1,h2,h3,h4,h5,h6,p,strong,span");if(null!=H&&H.length){var st;let gt=H[H.length-1];if(""==(null===(st=gt.textContent)||void 0===st?void 0:st.trim())){let tt=gt.querySelectorAll(":scope > *");if(tt.length){let L=tt[tt.length-1];["br","BR"].includes(null==L?void 0:L.nodeName)&&(L.remove(),qt(c))}else gt.remove(),qt(c)}}};dt(null===(Mt=jQuery(S).find(".svg-editor-content").get(0))||void 0===Mt?void 0:Mt.querySelectorAll(`:scope > ${jt}`)),qt(jQuery(S).find(".svg-editor-content").get(0));let j=jQuery(S).find(".svg-editor-content");if(j.length){var Pt;let c=j.html(),H=null!==(Pt=(null!=c?c:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Pt?Pt:[];Object.assign(Ot,{type:"html",html:{htmlContent:c,variableKeywords:H}})}}else if(Rt.hasClass("inputs")||Rt.hasClass("textareas"))Object.assign(Ot,{type:"input",input:{input:!!jQuery(S).find("input").length,textarea:!!jQuery(S).find("textarea").length}});else if(Rt.hasClass("tests")){let jt=jQuery(S).find(".svg-test");if(Rt.hasClass("tests-truefalse")){var ct,J;let dt=jt.find(".svg-editor-content").html(),qt=null!==(ct=(null!=dt?dt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==ct?ct:[];Object.assign(Ot,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(J=d.test2.truefalse)||void 0===J?void 0:J.includes(ht)}},html:{htmlContent:dt,variableKeywords:qt}})}else if(Rt.hasClass("tests-singlechoice")){var ft,K;let dt=jt.find(".svg-editor-content").html(),qt=null!==(ft=(null!=dt?dt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==ft?ft:[];Object.assign(Ot,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(K=d.test2.singlechoice)||void 0===K?void 0:K.includes(ht)}},html:{htmlContent:dt,variableKeywords:qt}})}else if(Rt.hasClass("tests-multichoice")){var U,s;let dt=jt.find(".svg-editor-content").html(),qt=null!==(U=(null!=dt?dt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==U?U:[];Object.assign(Ot,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(s=d.test2.multichoice)||void 0===s?void 0:s.includes(ht)}},html:{htmlContent:dt,variableKeywords:qt}})}else if(Rt.hasClass("tests-fill")){var E,W;let dt=jt.find(".svg-editor-content").html(),qt=null!==(E=(null!=dt?dt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==E?E:[],j=null!==(W=(null!=dt?dt:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==W?W:[];j=j.filter((c,H,st)=>st.indexOf(c)==H),Object.assign(Ot,{type:"test",test:{type:"fill",fill:j.map(c=>{var H;return{key:c,value:null===(H=d.test2.fill)||void 0===H||null===(H=H.find(st=>st.id==ht))||void 0===H||null===(H=H.vals)||void 0===H?void 0:H.map(st=>st.text).filter(st=>!["",null,void 0,NaN].includes(st))}})},html:{htmlContent:dt,variableKeywords:qt,fillKeywords:j}})}else if(Rt.hasClass("tests-matching")){if(jt.hasClass("svg-test-empty"))Object.assign(Ot,{type:"test",test:{type:"matching-empty",matching:{key:jt.attr("data-name")||null}}});else if(jt.hasClass("svg-test-content")){var q;let dt=jt.find(".svg-editor-content").html(),qt=null!==(q=(null!=dt?dt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==q?q:[];Object.assign(Ot,{type:"test",test:{type:"matching-content",matching:{key:jt.attr("data-name")||null}},html:{htmlContent:dt,variableKeywords:qt}})}}else if(Rt.hasClass("tests-speech")){var ot;Object.assign(Ot,{type:"speech",speech:{value:null===(ot=d.test2.speech)||void 0===ot||null===(ot=ot.find(dt=>dt.id==ht))||void 0===ot||null===(ot=ot.vals)||void 0===ot?void 0:ot.map(dt=>dt.text).filter(dt=>!["",null,void 0,NaN].includes(dt))}})}else if(Rt.hasClass("tests-submit")){let dt=jQuery(S).find(".svg-container img");Object.assign(Ot,{type:"test",test:{type:"submit"},image:P(dt.attr("url"),dt.attr("path"),dt.attr("src"))})}}else if(Rt.hasClass("images")){let jt=jQuery(S).find(".svg-editor-content img");if(jt.length)Object.assign(Ot,{type:"image",image:P(jt.attr("url"),jt.attr("path"),jt.attr("src"))});else{let dt=jQuery(S).find("iframe");Object.assign(Ot,{type:"iframe",iframe:P(dt.attr("url"),dt.attr("path"),dt.attr("src"))})}}else if(Rt.hasClass("sounds")){let jt=jQuery(S).find(".svg-editor-content img");jt.length&&Object.assign(Ot,{type:"image",image:P(jt.attr("url"),jt.attr("path"),jt.attr("src"))})}else if(Rt.hasClass("htmls")){let jt=jQuery(S).find("iframe");jt.length&&Object.assign(Ot,{type:"iframe",iframe:P(jt.attr("url"),jt.attr("path"),jt.attr("src"))})}else if(Rt.hasClass("svgs")){let jt=jQuery(S).find("svg");var Xt,Zt;jt.length&&Object.assign(Ot,{type:"svg",svg:Object.assign(P(jt.attr("url"),jt.attr("path"),jt.attr("src")),{svgContent:null!==(Xt=null===(Zt=jt.get(0))||void 0===Zt?void 0:Zt.outerHTML)&&void 0!==Xt?Xt:null})})}else if(Rt.hasClass("medias")){let jt=jQuery(S).find(".media-item");if(jt.length)switch(jt.attr("type")){case"audio":Object.assign(Ot,{type:"audio",audio:P(jt.attr("url"),jt.attr("path"),jt.attr("src"))});break;case"video":Object.assign(Ot,{type:"video",video:P(jt.attr("url"),jt.attr("path"),jt.attr("src"))});break;case"file":Object.assign(Ot,{type:"file",file:P(jt.attr("url"),jt.attr("path"),jt.attr("src"))});break;default:var Ht;Object.assign(Ot,{type:"link",link:{url:null!==(Ht=jt.attr("url"))&&void 0!==Ht?Ht:null}})}let dt=jQuery(S).find("img");dt.length&&(Object.assign(Ot,{image:P(dt.attr("url"),dt.attr("path"),dt.attr("src"))}),Ot.type||Object.assign(Ot,{type:"image"}))}}return Ot})(),animate:(Ot=>{let Mt={},Pt=null===(Ot=d.animates)||void 0===Ot?void 0:Ot.find(ct=>ct.elementId==ht);return Pt&&Object.assign(Mt,{value:Pt.value}),Mt})(),interactive:(()=>{let Ot={},Mt=d.actions.show.filter(ct=>ct.elementId==ht&&ct.active);Mt.length&&(Ot.show={},Mt.forEach(ct=>{let{source:J}=ct;switch(null==J?void 0:J.type){case"work":var ft,K,U,s,E;Ot.show.action={},Object.assign(Ot.show.action,{value:null!==(ft=J.value)&&void 0!==ft?ft:null,iteration:null!==(K=J.iteration)&&void 0!==K?K:null,finish:null!==(U=J.end)&&void 0!==U?U:null,time:null!==(s=J.time)&&void 0!==s?s:null,points:null!==(E=J.points)&&void 0!==E?E:null});break;case"audio":var W,q,ot;Ot.show.audio={},Object.assign(Ot.show.audio,{source:P(null,null,J.url),iteration:null!==(W=J.iteration)&&void 0!==W?W:null,finish:null!==(q=J.end)&&void 0!==q?q:null,time:null!==(ot=J.time)&&void 0!==ot?ot:null,async:-1==J.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Xt,Zt,Ht,jt,dt,qt,j,c,H,st,gt,tt,L,rt,ut;J.options.includes("show")&&(Ot.show.triggershow={},Object.assign(Ot.show.triggershow,{id:null!==(Xt=parseInt(null!==(Zt=J.id)&&void 0!==Zt?Zt:"0"))&&void 0!==Xt?Xt:null,ids:null===(Ht=J.ids)||void 0===Ht?void 0:Ht.map(Lt=>parseInt(Lt)),async:null!==(jt=J.async)&&void 0!==jt?jt:null,time:null!==(dt=J.time)&&void 0!==dt?dt:null})),J.options.includes("run")&&(Ot.show.triggerrun={},Object.assign(Ot.show.triggerrun,{id:null!==(qt=parseInt(null!==(j=J.id)&&void 0!==j?j:"0"))&&void 0!==qt?qt:null,ids:null===(c=J.ids)||void 0===c?void 0:c.map(Lt=>parseInt(Lt)),async:null!==(H=J.async)&&void 0!==H?H:null,time:null!==(st=J.time)&&void 0!==st?st:null})),J.options.includes("hide")&&(Ot.show.triggerhide={},Object.assign(Ot.show.triggerhide,{id:null!==(gt=parseInt(null!==(tt=J.id)&&void 0!==tt?tt:"0"))&&void 0!==gt?gt:null,ids:null===(L=J.ids)||void 0===L?void 0:L.map(Lt=>parseInt(Lt)),async:null!==(rt=J.async)&&void 0!==rt?rt:null,time:null!==(ut=J.time)&&void 0!==ut?ut:null}))}}));let Pt=d.actions.click.filter(ct=>ct.elementId==ht&&ct.active);return Pt&&(Ot.click={},Pt.forEach(ct=>{let{source:J}=ct;switch(null==J?void 0:J.type){case"work":var ft,K,U,s,E;Ot.click.action={},Object.assign(Ot.click.action,{value:null!==(ft=J.value)&&void 0!==ft?ft:null,iteration:null!==(K=J.iteration)&&void 0!==K?K:null,finish:null!==(U=J.end)&&void 0!==U?U:null,time:null!==(s=J.time)&&void 0!==s?s:null,points:null!==(E=J.points)&&void 0!==E?E:null});break;case"audio":var W,q,ot;Ot.click.audio={},Object.assign(Ot.click.audio,{source:P(null,null,J.url),iteration:null!==(W=J.iteration)&&void 0!==W?W:null,finish:null!==(q=J.end)&&void 0!==q?q:null,time:null!==(ot=J.time)&&void 0!==ot?ot:null,async:-1==J.iteration?"change-slide":"change-node"});break;case"video":{Ot.click.video={},Object.assign(Ot.click.video,{source:P(J.url,J.path)});let{url:Tt,path:Nt,name:bt}=P(J.url,J.path);Ot.click.media={},Object.assign(Ot.click.media,{url:Tt,path:Nt,name:bt,type:v.QQ.VIDEO});break}case"image":{Ot.click.image={},Object.assign(Ot.click.image,{source:P(J.url,J.path)});let{url:Tt,path:Nt,name:bt}=P(J.url,J.path);Ot.click.media={},Object.assign(Ot.click.media,{url:Tt,path:Nt,name:bt,type:v.QQ.IMAGE});break}case"link":{Ot.click.link={},Object.assign(Ot.click.link,{url:J.url,target:J.target});let{url:Tt,path:Nt,name:bt}=P(J.url,J.path);Ot.click.media={},Object.assign(Ot.click.media,{url:Tt,path:Nt,name:bt,type:v.QQ.LINK});break}case"text":Ot.click.text={},Object.assign(Ot.click.text,{content:J.content});break;case"node":case"node2":var Xt,Zt,Ht,jt,dt,qt,j,c,H,st,gt,tt,L,rt,ut;J.options.includes("show")&&(Ot.click.triggershow={},Object.assign(Ot.click.triggershow,{id:null!==(Xt=parseInt(null!==(Zt=J.id)&&void 0!==Zt?Zt:"0"))&&void 0!==Xt?Xt:null,ids:null===(Ht=J.ids)||void 0===Ht?void 0:Ht.map(Tt=>parseInt(Tt)),async:null!==(jt=J.async)&&void 0!==jt?jt:null,time:null!==(dt=J.time)&&void 0!==dt?dt:null})),J.options.includes("run")&&(Ot.click.triggerrun={},Object.assign(Ot.click.triggerrun,{id:null!==(qt=parseInt(null!==(j=J.id)&&void 0!==j?j:"0"))&&void 0!==qt?qt:null,ids:null===(c=J.ids)||void 0===c?void 0:c.map(Tt=>parseInt(Tt)),async:null!==(H=J.async)&&void 0!==H?H:null,time:null!==(st=J.time)&&void 0!==st?st:null})),J.options.includes("hide")&&(Ot.click.triggerhide={},Object.assign(Ot.click.triggerhide,{id:null!==(gt=parseInt(null!==(tt=J.id)&&void 0!==tt?tt:"0"))&&void 0!==gt?gt:null,ids:null===(L=J.ids)||void 0===L?void 0:L.map(Tt=>parseInt(Tt)),async:null!==(rt=J.async)&&void 0!==rt?rt:null,time:null!==(ut=J.time)&&void 0!==ut?ut:null}));break;case"slide":var Lt;Ot.click.slide={},Object.assign(Ot.click.slide,{id:parseInt(null!==(Lt=J.id)&&void 0!==Lt?Lt:"0")||J.num||null,code:J.id})}})),Ot})(),variable:(Ot=>{let Mt={};var Pt;S.getAttribute("data-variable")&&(Mt.input={},Object.assign(Mt.input,{variable:null!==(Pt=S.getAttribute("data-variable"))&&void 0!==Pt?Pt:null}));let ct=null===(Ot=d.nodes)||void 0===Ot||null===(Ot=Ot.find(s=>s.id==ht))||void 0===Ot?void 0:Ot.variable;var J,ft,K,U;return ct&&(Mt.click={},Object.assign(Mt.click,{variable:null!==(J=ct.variable)&&void 0!==J?J:null,operator:null!==(ft=ct.operator)&&void 0!==ft?ft:null,valuetype:null!==(K=ct.valuetype)&&void 0!==K?K:null,value:null!==(U=ct.value)&&void 0!==U?U:null})),Mt})()};var Ot;null===(Et=F.svg)||void 0===Et||Et.nodes.push(Ct)}),N.push(F)}),{screen:{width:w.screen.w,height:w.screen.h},data:{slides:N},variable:w.variable,fonts:[]}}},9311:(ce,Ut,b)=>{b.d(Ut,{A9:()=>D,IB:()=>x,_4:()=>v,_5:()=>u,ar:()=>C,yW:()=>k});var y=b(467),O=b(119);O.config({driver:[O.INDEXEDDB,O.LOCALSTORAGE,O.WEBSQL],name:"_localDataDB",version:1});const at={create:(V=(0,y.A)(function*(){return O}),function(){return V.apply(this,arguments)}),get:function(){var V=(0,y.A)(function*(G){return O.getItem(G)});return function(P){return V.apply(this,arguments)}}(),set:function(){var V=(0,y.A)(function*(G,P){return O.setItem(G,P)});return function(P,B){return V.apply(this,arguments)}}()},u=function(){var V=(0,y.A)(function*(G){yield at.create();var P=(yield at.get("icdt-data"))||[];"function"==typeof G.callback&&G.callback(P)});return function(P){return V.apply(this,arguments)}}(),C=function(){var V=(0,y.A)(function*(G){yield at.create(),G.params=G.params||{};try{yield at.set("icdt-data",G.params),"function"==typeof G.callback&&G.callback(G.params)}catch(P){"function"==typeof G.callback&&G.callback(null),console.error(P)}});return function(P){return V.apply(this,arguments)}}(),k=function(){var V=(0,y.A)(function*(G){yield at.create();try{var P=(yield at.get("icdt-config"))||{};"function"==typeof G.callback&&G.callback(P)}catch(B){"function"==typeof G.callback&&G.callback(null),console.error(B)}});return function(P){return V.apply(this,arguments)}}(),v=function(){var V=(0,y.A)(function*(G){yield at.create(),G.params=G.params||{};try{yield at.set("icdt-config",G.params),"function"==typeof G.callback&&G.callback(G.params)}catch(P){"function"==typeof G.callback&&G.callback(null),console.error(P)}});return function(P){return V.apply(this,arguments)}}(),D=function(){var V=(0,y.A)(function*(G){yield at.create();try{var P=(yield at.get("icdt-clipboard"))||{};"function"==typeof G.callback&&G.callback(P)}catch(B){"function"==typeof G.callback&&G.callback(null),console.error(B)}});return function(P){return V.apply(this,arguments)}}(),x=function(){var V=(0,y.A)(function*(G){yield at.create(),G.params=G.params||{};try{yield at.set("icdt-clipboard",G.params),"function"==typeof G.callback&&G.callback(G.params)}catch(P){"function"==typeof G.callback&&G.callback(null),console.error(P)}});return function(P){return V.apply(this,arguments)}}();var V},8527:(ce,Ut,b)=>{b.d(Ut,{w:()=>y});const y=(O,kt)=>{if(!O)return"";let at=O.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),u=(at&&at[4]||"").trim(),C=at?(256|at[1]).toString(16).slice(1)+(256|at[2]).toString(16).slice(1)+(256|at[3]).toString(16).slice(1):O;if("0"==u)return"transparent";if(kt){let k;k=""!==u?u:"01",k=(255*k|256).toString(16).slice(1),C+=k}return`#${C}`}},5150:(ce,Ut,b)=>{b.d(Ut,{L:()=>It});var y=b(596),O=b(1862),kt=b(5195),at=b(5268),u=b(2806);var v=b(568);const x=Z=>{var i,r,o,n,l,f,p;let g=(null===(i=Z.mouseEvent)||void 0===i?void 0:i.target)||(null===(r=Z.touchEvent)||void 0===r?void 0:r.target),R=(null===(o=g)||void 0===o?void 0:o.getAttribute("id"))||"",_=null===(n=g)||void 0===n?void 0:n.nodeName;It.dataSelect.nodeName.includes(_)||(g=jQuery(g).parents("foreignObject").get(0),g&&(R=g.getAttribute("id")||"",_=g.nodeName));let X=(null===(l=g)||void 0===l||null===(l=l.parentNode)||void 0===l?void 0:l.getAttribute("id"))||"";var A,lt,vt;if([u.FL.RESIZE_GROUP,u.FL.SELECT_GROUP].includes(X))return null===(A=Z.mouseEvent)||void 0===A||A.stopPropagation(),null===(lt=Z.mouseEvent)||void 0===lt||lt.preventDefault(),void("dblclick"==(null===(vt=Z.mouseEvent)||void 0===vt?void 0:vt.type)&&1==It.dataSelect.ids.length&&(Z=>{var i,r,o,n,l;if(1!=Z.length)return;let f=Z[0];if(!(f.type==u.hv.FOREIGNOBJECT&&["html","text"].includes(null!==(i=null===(r=f.source)||void 0===r?void 0:r.type)&&void 0!==i?i:"")||f.type==u.hv.FOREIGNOBJECT&&"test"==(null===(o=f.source)||void 0===o?void 0:o.type)&&["truefalse","singlechoice","multichoice","matching-content","fill"].includes(null!==(n=null===(l=f.source)||void 0===l||null===(l=l.test)||void 0===l?void 0:l.type)&&void 0!==n?n:"")||f.type==u.hv.TEXT))return;It.dataSelect.openEditable();let p=$(`#${f.id}`).find("[contenteditable]");p.on("input",()=>{var R,_,X;"html"==(null===(R=f.source)||void 0===R?void 0:R.type)||"test"==(null===(_=f.source)||void 0===_?void 0:_.type)?(0,v.xO)(f,p.html(),!0):"text"==(null===(X=f.source)||void 0===X?void 0:X.type)&&(0,v.rI)(f,p.text(),!0)}).on("focusout",()=>{It.dataSelect.closeEditable()}).focus();let g=p.get(0);if(g){let R=document.createRange(),_=window.getSelection();_&&(R.selectNodeContents(g),_.removeAllRanges(),_.addRange(R))}})(It.dataSelect.nodes));if(null!==(f=Z.mouseEvent)&&void 0!==f&&f.altKey||null!==(p=Z.touchEvent)&&void 0!==p&&p.altKey||!R||R.match(/[^0-9]/)||!It.dataSelect.nodeName.includes(_)){var xt;It.dataSelect.ids.length&&(It.dataSelect.ids=[]),(0==(null===(xt=Z.mouseEvent)||void 0===xt?void 0:xt.button)||Z.touchEvent)&&(Z=>{let l=(0,y.RY)(u.FL.SCAN_GROUP,"g"),f=(0,O.CE)(0,0,1,1);(0,y.xJ)(l,f),((Z,i,r)=>{(0,kt.I)(Z,{start:l=>{},move:(l,f)=>{((l,f,p,g)=>{i=(0,O.CE)(l,f,p,g),(0,y.xJ)(r,i)})(f[0][0],f[0][1],l.x,l.y)},end:(l,f)=>{null==r||r.remove(),It.dataSelect.ids=It.data.getNodeInArea(Math.min(f[0][0],l.x),Math.min(f[0][1],l.y),Math.max(f[0][0],l.x),Math.max(f[0][1],l.y)),(0,at.D)(It.dataSelect.nodes)}})})(Z,f,l)})(Z)}else{var Dt,Gt;let pe=parseFloat(R||"0");if(pe==It.dataSelect.contenteditable_id)return;It.dataSelect.ids=null!==(Dt=Z.mouseEvent)&&void 0!==Dt&&Dt.shiftKey||null!==(Gt=Z.touchEvent)&&void 0!==Gt&&Gt.shiftKey?[pe].concat(It.dataSelect.ids).filter((xe,ve,we)=>we.indexOf(xe)==ve):[pe],(0,at.D)(It.dataSelect.nodes)}};class G{constructor(){let{x:i,y:r}=It.screen.dislocation;var o=(n,l,f,p)=>{It.screen.move({x:i,y:r},{x:f-n,y:p-l})};return{start:n=>{},move:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)},end:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)}}}}var P=b(4205),B=b(4067);class w{constructor(){let i=(0,y.RY)(u.FL.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,P.K)(Math.ceil(1e9*Math.random())),f=(p,g,R,_)=>{l=(0,O.CE)(p,g,R,_,{ratio:1}),l.x=(0,B.z)(l.x),l.y=(0,B.z)(l.y),l.width=(0,B.z)(l.width),l.height=(0,B.z)(l.height),Object.assign(n,(0,O.xW)(u.hv.CIRCLE,l,n)),(0,y.tD)(o,n),(0,y.in)(i,l)};return{start:p=>{f(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,g)=>{f(g[0][0],g[0][1],p.x,p.y)},end:(p,g)=>{(l.width<=8||l.height<=8)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,O.xW)(u.hv.CIRCLE,l,n)),(0,y.tD)(o,n)),It.data.node=Object.assign({id:r,type:u.hv.CIRCLE,name:"Circle"},{size:l,attribute:n}),null==i||i.remove()}}}}var T=b(3189);class N{constructor(){let i=(0,y.RY)(u.FL.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,T.W)(Math.ceil(1e9*Math.random()));var f=(p,g,R,_)=>{l=(0,O.CE)(p,g,R,_),l.x=(0,B.z)(l.x),l.y=(0,B.z)(l.y),l.width=(0,B.z)(l.width),l.height=(0,B.z)(l.height),Object.assign(n,(0,O.xW)(u.hv.ELLIPSE,l,n)),(0,y.tD)(o,n),(0,y.in)(i,l)};return{start:p=>{f(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,g)=>{f(g[0][0],g[0][1],p.x,p.y)},end:(p,g)=>{l.width<4&&(l.width=4),l.height<4&&(l.height=4),l.width+l.height<8&&(l.width=90,l.height=60,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,O.xW)(u.hv.ELLIPSE,l,n)),(0,y.tD)(o,n)),It.data.node=Object.assign({id:r,type:u.hv.ELLIPSE,name:"Ellipse"},{size:l,attribute:n}),null==i||i.remove()}}}}var d=b(4245);class Y{constructor(){let i=(0,y.RY)(u.FL.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,d.a)(Math.ceil(1e9*Math.random()));var f=(p,g,R,_)=>{l=(0,O.CE)(p,g,R,_),l.x=(0,B.z)(l.x),l.y=(0,B.z)(l.y),l.width=(0,B.z)(l.width),l.height=(0,B.z)(l.height),Object.assign(n,(0,O.xW)(u.hv.RECT,l,n)),(0,y.tD)(o,n),(0,y.in)(i,l)};return{start:p=>{f(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,g)=>{f(g[0][0],g[0][1],p.x,p.y)},end:(p,g)=>{l.width<1&&(l.width=1),l.height<1&&(l.height=1),l.width+l.height<8&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,O.xW)(u.hv.RECT,l,n)),(0,y.tD)(o,n)),It.data.node=Object.assign({id:r,type:u.hv.RECT,name:"Rect"},{size:l,attribute:n}),null==i||i.remove()}}}}var z=b(2657);class pt{constructor(i){let r=(0,y.RY)(u.FL.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:n,element:l,attribute:f,size:p}=(0,z.u)(Math.ceil(1e9*Math.random()));p.ratios=o;var g=(R,_,X,A)=>{p=(0,O.CE)(R,_,X,A,{ratios:o}),p.x=(0,B.z)(p.x),p.y=(0,B.z)(p.y),p.width=(0,B.z)(p.width),p.height=(0,B.z)(p.height),Object.assign(f,(0,O.xW)(u.hv.POLYGON,p,f)),(0,y.tD)(l,f),(0,y.in)(r,p)};return{start:R=>{g(R.x,R.y,R.x+p.width,R.y+p.height)},move:(R,_)=>{g(_[0][0],_[0][1],R.x,R.y)},end:(R,_)=>{p.width<1&&(p.width=1),p.height<1&&(p.height=1),p.width+p.height<8&&(p.width=80,p.height=80,p.x=p.x-p.width/2,p.y=p.y-p.height/2,Object.assign(f,(0,O.xW)(u.hv.POLYGON,p,f)),(0,y.tD)(l,f)),It.data.node=Object.assign({id:n,type:u.hv.POLYGON,name:"Polygon"},{size:p,attribute:f}),null==r||r.remove()}}}}var F=b(3289);class it{constructor(){let i=(0,y.RY)(u.FL.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,F.q)(Math.ceil(1e9*Math.random()));return{start:p=>{},move:(p,g)=>{((p,g,R,_)=>{l=(0,O.CE)(p,g,R,_),l.x=(0,B.z)(l.x),l.y=(0,B.z)(l.y),l.width=(0,B.z)(l.width),l.height=(0,B.z)(l.height),Object.assign(n,(0,O.xW)(u.hv.LINE,l,n)),(0,y.tD)(o,n),(0,y.in)(i,l)})(g[0][0],g[0][1],p.x,p.y)},end:(p,g)=>{g.length>=2?(l.width<8&&(l.width=0),l.height<8&&(l.height=0),l.width+l.height<8&&(l.width=80,l.height=0,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,O.xW)(u.hv.LINE,l,n)),(0,y.tD)(o,n)),It.data.node=Object.assign({id:r,type:u.hv.LINE,name:"Line"},{size:l,attribute:n})):null==o||o.remove(),null==i||i.remove()}}}}var S=b(4271),Q=b(8691);class Et{constructor(){let{nodeId:i,element:r,attribute:o,size:n}=(0,Q.X)(Math.ceil(1e9*Math.random())),f="";return{start:g=>{f=`M ${g.x} ${g.y} L ${g.x} ${g.y}`},move:(g,R)=>{((g,R)=>{f+=` ${g} ${R}`,r.setAttribute("d",f)})(g.x,g.y)},end:(g,R)=>{let _=(0,S.CS)(f),{minX:X,minY:A,maxX:lt,maxY:vt}=(0,S.lP)(_);n.x=X,n.y=A,n.width=lt-X||1,n.height=vt-A||1,n.ratioMaps=(0,S.nf)(n,_),It.data.node=Object.assign({id:i,type:u.hv.PATH,name:"Path"},{size:n,attribute:o})}}}}var Rt=b(2197);class wt{constructor(){let i=(0,y.RY)(u.FL.CREATE_GROUP,"g"),{nodeId:r,element:o,size:n,attribute:l,style:f,source:p}=(0,Rt.$)(Math.ceil(1e9*Math.random()));var g=(R,_,X,A)=>{n=(0,O.CE)(R,_,X,A),n.x=(0,B.z)(n.x),n.y=(0,B.z)(n.y),n.width=(0,B.z)(n.width),n.height=(0,B.z)(n.height),Object.assign(l,(0,O.xW)(u.hv.FOREIGNOBJECT,n,l)),(0,y.tD)(o,l),(0,y.in)(i,n)};return{start:R=>{g(R.x,R.y,R.x+n.width,R.y+n.height)},move:(R,_)=>{g(_[0][0],_[0][1],R.x,R.y)},end:(R,_)=>{(n.width<=16||n.height<=16)&&(n.width=90,n.height=60,n.x=n.x-n.width/2,n.y=n.y-n.height/2,Object.assign(l,(0,O.xW)(u.hv.FOREIGNOBJECT,n,l)),(0,y.tD)(o,l)),It.data.node=Object.assign({id:r,type:u.hv.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:f,source:p}),null==i||i.remove()}}}}var ne=b(257);class ht{constructor(){var i,r;let o=(0,y.RY)(u.FL.CREATE_GROUP,"g"),{nodeId:n,element:l,size:f,attribute:p,source:g}=(0,ne.B)(Math.ceil(1e9*Math.random())),R=1;(X=>{if(!X)return;let A=new Image;A.onload=()=>{R=(0,B.z)(A.naturalWidth/A.naturalHeight,100)},A.onerror=lt=>{console.error(`ImgSrc load failed -> ${X}`,lt)},A.src=X})(null!==(i=null===(r=g.image)||void 0===r?void 0:r.url)&&void 0!==i?i:"");var _=(X,A,lt,vt)=>{f=(0,O.CE)(X,A,lt,vt,{ratio:R}),f.x=(0,B.z)(f.x),f.y=(0,B.z)(f.y),f.width=(0,B.z)(f.width),f.height=(0,B.z)(f.height),Object.assign(p,(0,O.xW)(u.hv.IMAGE,f,p)),(0,y.tD)(l,p),(0,y.in)(o,f)};return{start:X=>{_(X.x,X.y,X.x+f.width,X.y+f.height)},move:(X,A)=>{_(A[0][0],A[0][1],X.x,X.y)},end:(X,A)=>{(f.width<=16||f.height<=16)&&(f.width=80,f.height=80,f.x=f.x-f.width/2,f.y=f.y-f.height/2,Object.assign(p,(0,O.xW)(u.hv.IMAGE,f,p)),(0,y.tD)(l,p)),It.data.node=Object.assign({id:n,type:u.hv.IMAGE,name:"Image"},{size:f,attribute:p,source:g}),null==o||o.remove()}}}}var Ot=b(8939),Mt=b(4666);function J(Z,i,r,o){return Math.sqrt(Math.pow(r-Z,2)+Math.pow(o-i,2))}function ft(Z,i,r,o,n){return J(Z,i,r,o)<n?1:0}function U(Z,i,r,o,n,l,f){var p=[];return p.push(ft(Z,i,r,o,f)),p.push(ft(Z,i,n,l,f)),p.push(function K(Z,i,r,o,n,l,f){var p=[n-r,l-o],g=[Z-r,i-o],R=[-p[1],p[0]],_=Math.sqrt(Math.pow(R[0],2)+Math.pow(R[1],2)),X=[R[0]/_,R[1]/_],A=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),lt=[p[0]/A,p[1]/A],vt=g[0]*lt[0]+g[1]*lt[1];if(vt<=0||vt>=A)return 0;var xt=g[0]*X[0]+g[1]*X[1];return xt>=f||xt<=-f?0:1}(Z,i,r,o,n,l,f)),p}function s(Z,i,r,o,n){var l=[r-Z,o-i],f=[-l[1],l[0]],p=Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)),g=[f[0]/p,f[1]/p];return[[Z+n*g[0],i+n*g[1]],[Z-n*g[0],i-n*g[1]],[r-n*g[0],o-n*g[1]],[r+n*g[0],o+n*g[1]]]}function E(Z,i,r,o,n,l,f){var vt,p=[n-Z,l-i],g=[r-Z,o-i],R=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)),_=[g[0]/R,g[1]/R],X=p[0]*_[0]+p[1]*_[1],A=[Z+X*_[0],i+X*_[1]],lt=Math.sqrt(Math.pow(n-A[0],2)+Math.pow(l-A[1],2));vt=0===lt?f:Math.sqrt(Math.pow(f,2)-Math.pow(lt,2));var xt=[Z+X*_[0]+vt*_[0],i+X*_[1]+vt*_[1]];return xt[0]===Z&&xt[1]===i?null:xt}function W(Z,i,r,o,n,l,f){var p=[n-Z,l-i],g=[r-Z,o-i],R=[-g[1],g[0]],_=Math.sqrt(Math.pow(R[0],2)+Math.pow(R[1],2)),X=[R[0]/_,R[1]/_],A=p[0]*X[0]+p[1]*X[1],lt=jt([Z,i],[r,o],[n,l]);if(Zt([lt[0]-n,lt[1]-l])>=f)return null;var xt=Math.sqrt(Math.pow(f,2)-Math.pow(A,2)),Dt=[n-A*X[0],l-A*X[1]],Gt=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)),pe=[g[0]/Gt,g[1]/Gt],xe=[[Dt[0]-pe[0]*xt,Dt[1]-pe[1]*xt],[Dt[0]+pe[0]*xt,Dt[1]+pe[1]*xt]];return xe[0][0]===Z&&xe[0][1]===i?null:xe}function q(Z,i,r,o,n,l,f,p){var g,R,_,X,A,lt;return-(_=f-n)*(R=o-i)+(g=r-Z)*(X=p-l)==0?null:(lt=(_*(i-l)-X*(Z-n))/(-_*R+g*X),(A=(-R*(Z-n)+g*(i-l))/(-_*R+g*X))>=0&&A<=1&&lt>=0&&lt<=1?[Z+lt*g,i+lt*R]:null)}function ot(Z,i,r,o,n,l,f,p,g,R){var _=s(l,f,p,g,R),X=[];if(r[0]&&!r[1])X.push(E(Z,i,o,n,l,f,R)),X.push(q(Z,i,o,n,_[0][0],_[0][1],_[3][0],_[3][1])),X.push(q(Z,i,o,n,_[1][0],_[1][1],_[2][0],_[2][1])),(A=W(Z,i,o,n,p,g,R))&&X.push(A[0],A[1]);else if(!r[0]&&r[1])X.push(E(Z,i,o,n,p,g,R)),X.push(q(Z,i,o,n,_[0][0],_[0][1],_[3][0],_[3][1])),X.push(q(Z,i,o,n,_[1][0],_[1][1],_[2][0],_[2][1])),(A=W(Z,i,o,n,l,f,R))&&X.push(A[0],A[1]);else if(r[0]&&r[1])X.push(E(Z,i,o,n,l,f,R)),X.push(q(Z,i,o,n,_[0][0],_[0][1],_[3][0],_[3][1])),X.push(q(Z,i,o,n,_[1][0],_[1][1],_[2][0],_[2][1])),X.push(E(Z,i,o,n,p,g,R));else{var A=W(Z,i,o,n,p,g,R),lt=W(Z,i,o,n,l,f,R);A&&X.push(A[0],A[1]),lt&&X.push(lt[0],lt[1]),X.push(q(Z,i,o,n,_[0][0],_[0][1],_[3][0],_[3][1])),X.push(q(Z,i,o,n,_[1][0],_[1][1],_[2][0],_[2][1]))}for(var vt=[Z,i],xt=0;xt<X.length;xt++)X[xt]&&J(X[xt][0],X[xt][1],o,n)<J(vt[0],vt[1],o,n)&&(vt=X[xt]);return vt[0]===Z&&vt[1]===i?null:vt}function Xt(Z,i,r,o,n,l,f,p,g){var R=s(n,l,f,p,g),_=[],X=W(Z,i,r,o,n,l,g);X&&_.push(X[0],X[1]),(X=W(Z,i,r,o,f,p,g))&&_.push(X[0],X[1]),_.push(q(Z,i,r,o,R[0][0],R[0][1],R[3][0],R[3][1])),_.push(q(Z,i,r,o,R[1][0],R[1][1],R[2][0],R[2][1]));for(var A=[r,o],lt=[Z,i],vt=0;vt<_.length;vt++)_[vt]&&J(_[vt][0],_[vt][1],Z,i)<J(A[0],A[1],Z,i)&&(A=_[vt]);for(var xt=0;xt<_.length;xt++)_[xt]&&J(_[xt][0],_[xt][1],r,o)<J(lt[0],lt[1],r,o)&&(lt=_[xt]);return A[0]===r&&A[1]===o||lt[0]===Z&&lt[1]===i?null:[A,lt]}var Zt=function(Z){return Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1])},jt=function(Z,i,r){var o=[i[0]-Z[0],i[1]-Z[1]],n=Zt(o);if(n<1e-6)return Z;var l=[r[0]-Z[0],r[1]-Z[1]],f=(o[0]*l[0]+o[1]*l[1])/n;return f<0?Z:f>n?i:[Z[0]+o[0]*f/n,Z[1]+o[1]*f/n]};class dt{constructor(){let{element:o,size:l}=(0,Q.X)(Math.ceil(1e9*Math.random()));(0,y.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let f="";return{start:R=>{f=`M ${R.x} ${R.y} L ${R.x} ${R.y}`},move:(R,_)=>{((R,_)=>{f+=` ${R} ${_}`,o.setAttribute("d",f)})(R.x,R.y)},end:(R,_)=>{o.remove(),(R=>{let _=9999,X=9999,A=-9999,lt=-9999;R.forEach(xt=>{_=Math.min(_,xt[0]),X=Math.min(X,xt[1]),A=Math.max(A,xt[0]),lt=Math.max(lt,xt[1])}),l=(0,O.CE)(_,X,A,lt,{points:R}),It.data.getNodeInArea(0,0,1920,1920,u.hv.PATH).forEach(xt=>{let Gt=((Z,i,r)=>{r=r||20;var o=[],n=function(_){var X=i[0][0],A=i[0][1],lt=0,vt=0;if(1!==_.length||ft(_[0][0],_[0][1],X,A,r)){for(var xt;lt<_.length-1;){var Dt=_[lt],Gt=_[lt+1],pe=ft(Dt[0],Dt[1],X,A,r),xe=ft(Gt[0],Gt[1],X,A,r);if(pe&&xe)vt=++lt;else if(pe&&!xe)(ve=E(Dt[0],Dt[1],Gt[0],Gt[1],X,A,r))?(_[lt]=ve,vt=lt):lt++;else if(!pe&&xe){var ve;(ve=E(Gt[0],Gt[1],Dt[0],Dt[1],X,A,r))&&((xt=_.slice(vt,lt+1)).push(ve),o.push(xt)),vt=++lt}else{var we=W(Dt[0],Dt[1],Gt[0],Gt[1],X,A,r);we?(((xt=_.slice(vt,lt+1))[xt.length-1][0]!==we[0][0]||xt[xt.length-1][1]!==we[0][1])&&xt.push(we[0]),xt.length>1&&o.push(xt),_[lt]=we[1],_[lt+1]&&_[lt+1][0]==we[1][0]&&_[lt+1][1]==we[1][1]&&lt++,vt=lt):lt++}}vt!==lt&&(xt=_.slice(vt,_.length))&&o.push(xt)}else o.push(_)},l=function(_,X){var Gt,A=i[X],lt=i[X+1],vt=0,xt=0;if(1!==_.length||-1!==(Dt=U(_[0][0],_[0][1],A[0],A[1],lt[0],lt[1],r)).indexOf(1)){for(;vt<_.length-1;){var pe=_[vt],xe=_[vt+1],Dt=U(pe[0],pe[1],A[0],A[1],lt[0],lt[1],r),ve=U(xe[0],xe[1],A[0],A[1],lt[0],lt[1],r);if(-1!==Dt.indexOf(1)&&-1!==ve.indexOf(1))xt=++vt;else if(-1!==Dt.indexOf(1)&&-1===ve.indexOf(1))(we=ot(pe[0],pe[1],Dt,xe[0],xe[1],A[0],A[1],lt[0],lt[1],r))?(_[vt]=we,xt=vt):vt++;else if(-1===Dt.indexOf(1)&&-1!==ve.indexOf(1)){var we;(we=ot(xe[0],xe[1],ve,pe[0],pe[1],A[0],A[1],lt[0],lt[1],r))?((Gt=_.slice(xt,vt+1)).push(we),o.push(Gt),xt=++vt):vt++}else{var Se=Xt(pe[0],pe[1],xe[0],xe[1],A[0],A[1],lt[0],lt[1],r);Se?(((Gt=_.slice(xt,vt+1))[Gt.length-1][0]!==Se[0][0]||Gt[Gt.length-1][1]!==Se[0][1])&&Gt.push(Se[0]),Gt.length>1&&o.push(Gt),_[vt]=Se[1],_[vt+1]&&_[vt+1][0]==Se[1][0]&&_[vt+1][1]==Se[1][1]&&vt++,xt=vt):vt++}}xt!==vt&&(Gt=_.slice(xt,_.length))&&o.push(Gt)}else o.push(_)};if(i=function ct(Z){var i=[];if(1===Z.length)i=Z;else{for(var r=0;r<Z.length-1;)(Z[r][0]!==Z[r+1][0]||Z[r][1]!==Z[r+1][1])&&i.push(Z[r]),r++;0!==Z.length&&0===i.length&&i.push(Z[0]),(Z[Z.length-1][0]!==Z[i.length-1][0]||Z[Z.length-1][1]!==Z[i.length-1][1])&&i.push(Z[r])}return i}(i),1===i.length){for(var f=0;f<Z.length;f++)n(Z[f]);Z=o}else for(var p=0;p<i.length-1;p++){for(f=0;f<Z.length;f++)l(Z[f],p);Z=o,o=[]}for(var g=0;g<Z.length;g++)for(var R=0;R<Z[g].length;R++)Z[g][R][0]=Math.round(Z[g][R][0]),Z[g][R][1]=Math.round(Z[g][R][1]);return Z})(It.data.getNode(xt).size.points,R,2);console.log(Gt)})})(_)}}}}var j=b(4907);class c{constructor(){let i=(0,y.RY)(u.FL.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l,source:f}=(0,j.L)(Math.ceil(1e9*Math.random())),p=(g,R,_,X)=>{l=(0,O.CE)(g,R,_,X),l.x=(0,B.z)(l.x),l.y=(0,B.z)(l.y),l.width=(0,B.z)(l.width),l.height=(0,B.z)(l.height),Object.assign(n,(0,O.xW)(u.hv.TEXT,l,n)),(0,y.tD)(o,n),(0,y.in)(i,l)};return{start:g=>{p(g.x,g.y,g.x+l.width,g.y+l.height)},move:(g,R)=>{p(R[0][0],R[0][1],g.x,g.y)},end:(g,R)=>{l.width<100&&(l.width=100),l.height<20&&(l.height=20),l.width+l.height<8&&(l.width=100,l.height=20,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,O.xW)(u.hv.TEXT,l,n)),(0,y.tD)(o,n)),It.data.node=Object.assign({id:r,type:u.hv.TEXT,name:"Text"},{size:l,attribute:n,source:f}),null==i||i.remove()}}}}var tt=b(1949),L=b(2978);var ut=b(3309);class Lt{constructor(){this._nodeName=["circle","ellipse","line","polygon","polyline","rect","text","tspan","path","image","foreignObject"],this._selected_Ids=[],this._contenteditable_Id=0,this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.closeEditable(),this.change(this.ids)}get contenteditable_id(){return this._contenteditable_Id}get nodes(){return this._selected_Ids.map(i=>It.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){this.cleanSelected(),this._fnChanges.forEach(r=>r(i))}deleteNode(){for(let i of this._selected_Ids){let r=It.data.deleteNode(i);It.history.push([{type:"delete",from:{id:r},to:{id:r}}])}It.dataSelect.ids=[]}groupNode(){let i=[];if(It.dataSelect.ids.length>=2){let r=It.data.getNode(It.dataSelect.ids[0]),{nodeId:o,attribute:n,size:l}=(0,ut.v)(Math.ceil(1e9*Math.random()),void 0,r.pid?window.document.getElementById(r.pid):null);It.data.node=Object.assign({id:o,type:u.hv.GROUP,name:"G"},{size:l,attribute:n});for(let f of It.dataSelect.ids)i.push(It.data.addGroup(f,o))}i.length&&(It.dataSelect.ids=i,(0,at.D)(It.dataSelect.nodes))}ungroupNode(){let i=[];for(let r of It.dataSelect.ids)i.push(It.data.unGroup(r));i.length&&(It.dataSelect.ids=i,(0,at.D)(It.dataSelect.nodes))}cleanSelected(){var i,r,o,n,l;null===(i=window.document.getElementById(u.FL.RESIZE_GROUP))||void 0===i||i.remove(),null===(r=window.document.getElementById(u.FL.SELECT_GROUP))||void 0===r||r.remove(),null===(o=window.document.getElementById(u.FL.SCAN_GROUP))||void 0===o||o.remove(),null===(n=window.document.getElementById(u.FL.CREATE_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(u.FL.INTERACTIVE_GROUP))||void 0===l||l.remove(),jQuery('[id^="icdt-temp-"]').remove()}openEditable(){1==this._selected_Ids.length&&(this._contenteditable_Id=this._selected_Ids[0]);let i=It.data.getNode(this._contenteditable_Id);if(i.id){let{id:r,source:o,size:n,attribute:l,style:f}=i;(0,y.fn)(r,u.hv.FOREIGNOBJECT,"foreignObject",{source:o,size:n,attribute:l,style:f})}this.cleanSelected()}closeEditable(){if(!this._contenteditable_Id)return;let i=It.data.getNode(this._contenteditable_Id);if(i.id){this._contenteditable_Id=0;let{id:r,type:o,source:n,size:l,attribute:f,style:p}=i;(0,y.fn)(r,o,void 0,{source:n,size:l,attribute:f,style:p}),this.cleanSelected(),(0,at.D)(It.dataSelect.nodes)}}}var Tt=b(9933);class Nt{createNodeImage(i,r){var o,n,l,f;let{nodeId:g,element:R,size:_,attribute:X,source:A}=(0,ne.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,Tt.U)(i)}});(lt=>{if(!lt)return;let vt=new Image;vt.onload=()=>{let xt=(0,B.z)(vt.naturalWidth/vt.naturalHeight,100);xt>=1?(_.width=Math.min(vt.naturalWidth,512),_.height=(0,B.z)(_.width/xt,100)):(_.height=Math.min(vt.naturalHeight,512),_.width=(0,B.z)(_.height*xt,100)),_.x=(0,B.z)(_.x+50-_.width/2,100),_.y=(0,B.z)(_.y+50-_.height/2,100),Object.assign(X,(0,O.xW)(u.hv.IMAGE,_,X)),(0,y.tD)(R,X),It.data.node=Object.assign({id:g,type:u.hv.IMAGE,name:"Image"},{size:_,attribute:X,source:A})},vt.onerror=xt=>{console.error(`ImgSrc load failed -> ${lt}`,xt),null==R||R.remove()},vt.src=lt})(null!==(l=null===(f=A.image)||void 0===f?void 0:f.url)&&void 0!==l?l:"")}createNodeIframe(i,r){var o,n;let{nodeId:f,element:p,size:g,attribute:R,style:_,source:X}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,Tt.U)(i)}});(A=>{let lt=(null===(A=It.data.slide)||void 0===A||null===(A=A.svg)||void 0===A?void 0:A.viewBox)||{x:0,y:0,width:100,height:100},vt=(0,B.z)(lt.width/lt.height,100);vt>=1?(g.width=Math.min(lt.width,512),g.height=(0,B.z)(g.width/vt,100)):(g.height=Math.min(lt.height,512),g.width=(0,B.z)(g.height*vt,100)),g.x=(0,B.z)(g.x+50-g.width/2,100),g.y=(0,B.z)(g.y+50-g.height/2,100),Object.assign(R,(0,O.xW)(u.hv.IMAGE,g,R)),(0,y.tD)(p,R),It.data.node=Object.assign({id:f,type:u.hv.FOREIGNOBJECT,name:"ForeignObject"},{size:g,attribute:R,style:_,source:X})})()}createNodeEmbed(i,r){var o,n;let l={x:50,y:50,width:640,height:360};i.type==u.QQ.AUDIO&&(l.width=480,l.height=80);let{nodeId:f,element:p,size:g,attribute:R,style:_,source:X}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:l.x)-l.x,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:l.y)-l.y,width:l.width,height:l.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,Tt.U)(i))}});(()=>{let A=(0,B.z)(l.width/l.height,100);A>=1?(g.width=Math.min(g.width,l.width),g.height=(0,B.z)(g.width/A,1)):(g.height=Math.min(g.height,l.height),g.width=(0,B.z)(g.height*A,1)),g.x=(0,B.z)(g.x+l.x-g.width/2,1),g.y=(0,B.z)(g.y+l.y-g.height/2,1),Object.assign(R,(0,O.xW)(u.hv.FOREIGNOBJECT,g,R)),(0,y.tD)(p,R),It.data.node=Object.assign({id:f,type:u.hv.FOREIGNOBJECT,name:"ForeignObject"},{size:g,attribute:R,style:_,source:X})})()}createNodeMedia(i,r){var o,n,l,f;let{nodeId:g,element:R,size:_,attribute:X,source:A}=(0,ne.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,Tt.U)(i.cover)}}),lt={click:{media:i.media}};(vt=>{if(!vt)return;let xt=new Image;xt.onload=()=>{let Dt=(0,B.z)(xt.naturalWidth/xt.naturalHeight,100);Dt>=1?(_.width=Math.min(xt.naturalWidth,512),_.height=(0,B.z)(_.width/Dt,100)):(_.height=Math.min(xt.naturalHeight,512),_.width=(0,B.z)(_.height*Dt,100)),_.x=(0,B.z)(_.x+50-_.width/2,100),_.y=(0,B.z)(_.y+50-_.height/2,100),Object.assign(X,(0,O.xW)(u.hv.IMAGE,_,X)),(0,y.tD)(R,X),It.data.node=Object.assign({id:g,type:u.hv.IMAGE,name:"Image"},{size:_,attribute:X,source:A,interactive:lt})},xt.onerror=Dt=>{console.error(`ImgSrc load failed -> ${vt}`,Dt),null==R||R.remove()},xt.src=vt})(null!==(l=null===(f=A.image)||void 0===f?void 0:f.url)&&void 0!==l?l:"")}createNodeText(i,r){var o,n;let{nodeId:f,element:p,size:g,attribute:R,style:_,source:X}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:0)-0,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let A=(0,B.z)(4,100);A>=1?(g.width=Math.min(g.width,320),g.height=(0,B.z)(g.width/A,1)):(g.height=Math.min(g.height,80),g.width=(0,B.z)(g.height*A,1)),g.x=(0,B.z)(g.x+0-g.width/2,1),g.y=(0,B.z)(g.y+0-g.height/2,1),Object.assign(R,(0,O.xW)(u.hv.FOREIGNOBJECT,g,R)),(0,y.tD)(p,R),It.data.node=Object.assign({id:f,type:u.hv.FOREIGNOBJECT,name:"ForeignObject"},{size:g,attribute:R,style:_,source:X})})()}insert(i){var r;if(It.data.insertSlide(It.data.slideId,1),i.title){let{nodeId:o,size:n,attribute:l,style:f,source:p}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});It.data.node=Object.assign({id:o,type:u.hv.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:f,source:p})}if(i.description){let{nodeId:o,size:n,attribute:l,style:f,source:p}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});It.data.node=Object.assign({id:o,type:u.hv.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:f,source:p})}null!==(r=i.media)&&void 0!==r&&r.prompt&&((()=>{let{nodeId:o,size:n,attribute:l}=(0,d.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});It.data.node=Object.assign({id:o,type:u.hv.RECT,name:"Rect"},{size:n,attribute:l})})(),(o=>{let{nodeId:n,size:l,attribute:f,style:p,source:g}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});It.data.node=Object.assign({id:n,type:u.hv.FOREIGNOBJECT,name:"ForeignObject"},{size:l,attribute:f,style:p,source:g})})())}}var bt=b(2062),_t=b(9296);class At{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:It.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let r=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,f)=>f==this._slideIdx),o=null==r?void 0:r.svg,n=l=>{let f=[];return l.filter(p=>!p.isdeleted).forEach(p=>{p.type==u.hv.GROUP?f=f.concat(n(p.nodes||[])):f.push(p.id)}),f};return n((null==o?void 0:o.nodes)||[])}}get get(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(f=>f.type==u.hv.GROUP).forEach(f=>{var p;f.nodes=r(null===(p=f.nodes)||void 0===p?void 0:p.filter(g=>!g.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(f=>{var p,g;return f.type!=u.hv.GROUP||(null!==(p=null===(g=f.nodes)||void 0===g?void 0:g.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource}get getResource(){var i;let r=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n,l,f,p,g,R,_,X;r.push(null===(n=o.svg)||void 0===n||null===(n=n.background)||void 0===n?void 0:n.path),null===(l=o.svg)||void 0===l||l.nodes.forEach(A=>{var lt,vt,xt,Dt,Gt,pe,xe,ve,we,Se,Ie;r.push(null===(lt=A.source)||void 0===lt||null===(lt=lt.image)||void 0===lt?void 0:lt.path),r.push(null===(vt=A.source)||void 0===vt||null===(vt=vt.audio)||void 0===vt?void 0:vt.path),r.push(null===(xt=A.source)||void 0===xt||null===(xt=xt.video)||void 0===xt?void 0:xt.path),r.push(null===(Dt=A.source)||void 0===Dt||null===(Dt=Dt.file)||void 0===Dt?void 0:Dt.path),r.push(null===(Gt=A.source)||void 0===Gt||null===(Gt=Gt.iframe)||void 0===Gt?void 0:Gt.path),r.push(null===(pe=A.source)||void 0===pe||null===(pe=pe.embed)||void 0===pe?void 0:pe.path),r.push(null===(xe=A.source)||void 0===xe||null===(xe=xe.track)||void 0===xe?void 0:xe.path),r.push(null===(ve=A.interactive)||void 0===ve||null===(ve=ve.show)||void 0===ve||null===(ve=ve.audio)||void 0===ve||null===(ve=ve.source)||void 0===ve?void 0:ve.path),r.push(null===(we=A.interactive)||void 0===we||null===(we=we.click)||void 0===we||null===(we=we.audio)||void 0===we||null===(we=we.source)||void 0===we?void 0:we.path),r.push(null===(Se=A.interactive)||void 0===Se||null===(Se=Se.click)||void 0===Se||null===(Se=Se.image)||void 0===Se||null===(Se=Se.source)||void 0===Se?void 0:Se.path),r.push(null===(Ie=A.interactive)||void 0===Ie||null===(Ie=Ie.click)||void 0===Ie||null===(Ie=Ie.video)||void 0===Ie||null===(Ie=Ie.source)||void 0===Ie?void 0:Ie.path)}),r.push(null===(f=o.test)||void 0===f||null===(f=f.audiotrue)||void 0===f?void 0:f.path),r.push(null===(p=o.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),r.push(null===(g=o.test)||void 0===g||null===(g=g.effecttrue)||void 0===g?void 0:g.path),r.push(null===(R=o.test)||void 0===R||null===(R=R.effectfalse)||void 0===R?void 0:R.path),r.push(null===(_=o.test)||void 0===_||null===(_=_.icontrue)||void 0===_?void 0:_.path),r.push(null===(X=o.test)||void 0===X||null===(X=X.iconfalse)||void 0===X?void 0:X.path)}),r.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,n,l)=>l.indexOf(o)==n)}get getFonts(){var i;return(0,_t.d)(JSON.stringify(null!==(i=this._dataSource.slides)&&void 0!==i?i:[]))}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,y.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(f=>f.type==u.hv.GROUP).forEach(f=>{var p;f.nodes=r(null===(p=f.nodes)||void 0===p?void 0:p.filter(g=>!g.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(f=>{var p,g;return f.type!=u.hv.GROUP||(null!==(p=null===(g=f.nodes)||void 0===g?void 0:g.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,y.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,r;return null!==(i=null===(r=this.slide)||void 0===r?void 0:r.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((r,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,r;this._slideIdx<(null!==(i=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,y.rN)(),(0,bt.t)(this.slide)}openSlide(i,r){var o,n,l,f,p;if(i)for(let A=0,lt=null!==(g=null===(R=this._dataSource.slides)||void 0===R?void 0:R.length)&&void 0!==g?g:0;A<lt;A++){var g,R,_;if((null!==(_=this._dataSource.slides)&&void 0!==_?_:[])[A].id==i){this._slideIdx=A;break}}else if(r&&r>=0&&r<(null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==o?o:0))this._slideIdx=null!=r?r:0;else{var X;this._slideIdx=0,null!==(X=this._dataSource.slides)&&void 0!==X&&X.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,y.rN)(),null!==(l=this.slide)&&void 0!==l&&null!==(l=l.svg)&&void 0!==l&&l.viewBox&&(It.screen.frameSize=this.slide.svg.viewBox),(0,bt.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(f=null===(p=this._dataSource.slides)||void 0===p?void 0:p.length)&&void 0!==f?f:0,this.slide)}addSlide(){var i,r,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==r?r:0)-1,this.openSlide(void 0,this._slideIdx)}tryMergeSlide(i,r,o){var n,l,f;let p=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(g=>g.id==i);return p?null!==(l=p.test)&&void 0!==l&&l.type&&null!==(f=r.test)&&void 0!==f&&f.type?"boolean"!=typeof o?-1:o?this.mergeSlide(i,p,r):this.insertSlide(i,1,r):this.mergeSlide(i,p,r):this.insertSlide(i,1,r)}tryReplaceSlide(i,r){var o,n,l,f,p;let g=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(_=>_.id==i);if(!g||null!=g&&null!==(n=g.svg)&&void 0!==n&&n.nodes.filter(_=>!_.isdeleted).length)return this.insertSlide(i,1,r);let R=null!==(l=null===(f=this._dataSource.slides)||void 0===f?void 0:f.indexOf(g))&&void 0!==l?l:0;return null===(p=this._dataSource.slides)||void 0===p||p.splice(R,1,r),this._slideIdx=R,this.openSlide(void 0,this._slideIdx),1}mergeSlide(i,r,o){var n,l,f,p;return r.test=null!==(n=o.test)&&void 0!==n?n:r.test,r.audio=null!==(l=o.audio)&&void 0!==l?l:r.audio,r.svg?r.svg.nodes=r.svg.nodes.concat(null!==(f=null===(p=o.svg)||void 0===p?void 0:p.nodes)&&void 0!==f?f:[]):r.svg=o.svg,this.openSlide(i),1}insertSlide(i,r,o){var n,l,f,p,g;let R=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(A=>A.id==i))&&void 0!==n?n:this._defaultSlide,_=(null!==(f=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(R))&&void 0!==f?f:0)+r;var X;return o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(X=o.svg)&&void 0!==X&&X.viewBox||o.svg&&(o.svg.viewBox=It.screen.frameSize)):o=this._defaultSlide,null===(g=this._dataSource.slides)||void 0===g||g.splice(_,0,o),this._slideIdx=_,this.openSlide(void 0,this._slideIdx),1}copySlide(i){var r,o,n,l,f,p,g;let R=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(A=>A.id==i))&&void 0!==r?r:this._defaultSlide,_=(null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(R))&&void 0!==n?n:0)+1,X=Object.assign(JSON.parse(JSON.stringify(R)),{id:this.newSlideId,code:void 0,name:`${R.name} + (Copy)`});null===(f=this._dataSource.slides)||void 0===f||f.splice(_,0,X),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(g=this._dataSource.slides)||void 0===g?void 0:g.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,r){var o,n,l,f,p,g;let R=null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(X=>X.id==i))&&void 0!==o?o:this._defaultSlide,_=null!==(l=null===(f=this._dataSource.slides)||void 0===f?void 0:f.indexOf(R))&&void 0!==l?l:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(_+r,0,null===(g=this._dataSource.slides)||void 0===g?void 0:g.splice(_,1)[0])}deleteSlide(i){var r,o,n,l,f,p;let g=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(A=>A.id==i))&&void 0!==r?r:this._defaultSlide,R=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(g))&&void 0!==n?n:0;if(null===(f=this._dataSource.slides)||void 0===f||f.splice(R,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(R<this._slideIdx){var _,X;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(_=null===(X=this._dataSource.slides)||void 0===X?void 0:X.length)&&void 0!==_?_:0,this.slide)}else R==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var r,o,n,l,f;let p=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(R=>R.id==i))&&void 0!==r?r:this._defaultSlide,g=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(p))&&void 0!==n?n:0;if(p.isdeleted=!0,null!==(f=this._dataSource.slides)&&void 0!==f&&null!==(f=f.filter(R=>!R.isdeleted))&&void 0!==f&&f.length){let R=!0;for(;p.isdeleted;)R?g++:g--,this._dataSource.slides[g]?p=this._dataSource.slides[g]:R=!R;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,r,o,n){this._fnChangeSlides.forEach(l=>l(i,r,o,n))}set node(i){var r,o;let n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((l,f)=>f==this._slideIdx);null!=n&&null!==(o=n.svg)&&void 0!==o&&o.nodes&&n.svg.nodes.push(i),It.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,bt.t)(n),(0,bt.t)(n,null==n?void 0:n.id)}findNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((A,lt)=>lt==this._slideIdx),n=null==o?void 0:o.svg,l=(A,lt)=>{let vt=null==A?void 0:A.find(Gt=>Gt.id==i);if(vt)return vt.pid=lt,vt;let xt=0,Dt=A.length||0;for(;xt<Dt&&!vt&&(vt=l(A[xt].nodes||[],A[xt].id),!vt);)xt++;return vt},f=l((null==n?void 0:n.nodes)||[]);var p,g,R,_,X;return f?(f.style=null!==(p=f.style)&&void 0!==p?p:{},f.source=null!==(g=f.source)&&void 0!==g?g:{},f.animate=null!==(R=f.animate)&&void 0!==R?R:{},f.interactive=null!==(_=f.interactive)&&void 0!==_?_:{},f.variable=null!==(X=f.variable)&&void 0!==X?X:{},f):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((p,g)=>g==this._slideIdx),n=null==o?void 0:o.svg,f=p=>{let g=(null==p?void 0:p.find(vt=>vt.id==i))||(p=>{let g=null,R=0,_=p.length||0;for(;R<_&&!g;){if(g=f(p[R].nodes),g){g.pid=p[R].id;break}R++}var X,A,lt,vt,xt;return g&&(g.style=null!==(X=g.style)&&void 0!==X?X:{},g.source=null!==(A=g.source)&&void 0!==A?A:{},g.animate=null!==(lt=g.animate)&&void 0!==lt?lt:{},g.interactive=null!==(vt=g.interactive)&&void 0!==vt?vt:{},g.variable=null!==(xt=g.variable)&&void 0!==xt?xt:{}),g})((null==p?void 0:p.filter(vt=>vt.type==u.hv.GROUP))||[]);var R,_,X,A,lt;return g&&(g.style=null!==(R=g.style)&&void 0!==R?R:{},g.source=null!==(_=g.source)&&void 0!==_?_:{},g.animate=null!==(X=g.animate)&&void 0!==X?X:{},g.interactive=null!==(A=g.interactive)&&void 0!==A?A:{},g.variable=null!==(lt=g.variable)&&void 0!==lt?lt:{}),g};return f((null==n?void 0:n.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,r,o,n,l){var f;let p=null===(f=this._dataSource.slides)||void 0===f?void 0:f.find((_,X)=>X==this._slideIdx),g=null==p?void 0:p.svg,R=_=>{let X=[];return _.filter(A=>!A.isdeleted).forEach(A=>{A.type==u.hv.GROUP?X=X.concat(R(A.nodes||[])):i>A.size.x||r>A.size.y||o<A.size.x+A.size.width||n<A.size.y+A.size.height||(l?A.type==l&&X.push(A.id):X.push(A.id))}),X};return R((null==g?void 0:g.nodes)||[])}getNodeOnArea(i,r,o,n,l){var f;let p=null===(f=this._dataSource.slides)||void 0===f?void 0:f.find((_,X)=>X==this._slideIdx),g=null==p?void 0:p.svg,R=_=>{let X=[];return _.filter(A=>!A.isdeleted).forEach(A=>{A.type==u.hv.GROUP?X=X.concat(R(A.nodes||[])):A.size.x+A.size.width<i||A.size.y+A.size.height<r||A.size.x>o||A.size.y>n||(l?A.type==l&&X.push(A.id):X.push(A.id))}),X};return R((null==g?void 0:g.nodes)||[])}deleteNode(i,r){var o;return this.getNode(i).isdeleted=null==r||r,(0,bt.t)(this.slide),(0,bt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var r,o;let n=this.getNode(i),l=Math.ceil(1e9*Math.random());return null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:l})),Object.assign(n,{isdeleted:!0}),(0,bt.t)(this.slide),(0,bt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),l}addGroup(i,r){var o;let n=this.getNode(i),l=this.getNode(r);l.nodes=l.nodes||[];let f=Math.ceil(1e9*Math.random());return l.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:f})),Object.assign(n,{isdeleted:!0}),(0,bt.t)(this.slide),(0,bt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),f}setNodeP(i,r){var o;let n=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(l=>l.id==i);n&&(n.pid=r||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,r){var o,n,l,f,p,g;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((_,X)=>{_.index=X+1});let R=(null!==(n=null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l?void 0:l.nodes.length)&&void 0!==n?n:0)+1;i.map(_=>{var X,A;return{id:_,index:null!==(X=null===(A=this.slide)||void 0===A||null===(A=A.svg)||void 0===A||null===(A=A.nodes.find(lt=>lt.id==_))||void 0===A?void 0:A.index)&&void 0!==X?X:0}}).sort((_,X)=>_.index-X.index).forEach(_=>{var A,X;r?null===(A=this.slide)||void 0===A||null===(A=A.svg)||void 0===A||A.nodes.filter((lt,vt)=>lt.id==_.id).forEach(lt=>{lt.index=r+_.index+_.index/1e3}):null===(X=this.slide)||void 0===X||null===(X=X.svg)||void 0===X||X.nodes.filter(lt=>lt.id==_.id).forEach(lt=>{lt.index=R+_.index})}),null===(f=this.slide)||void 0===f||null===(f=f.svg)||void 0===f||f.nodes.sort((_,X)=>{var A,lt;return(null!==(A=_.index)&&void 0!==A?A:0)-(null!==(lt=X.index)&&void 0!==lt?lt:0)}),(0,bt.$)(this.slide),null===(p=window.document.getElementById(u.FL.RESIZE_GROUP))||void 0===p||p.remove(),null===(g=window.document.getElementById(u.FL.SELECT_GROUP))||void 0===g||g.remove(),(0,at.D)(It.dataSelect.nodes)}sendToBackStep(i,r){var o,n,l,f;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((p,g)=>{p.index=g+1}),i.map(p=>{var g,R;return{id:p,index:null!==(g=null===(R=this.slide)||void 0===R||null===(R=R.svg)||void 0===R||null===(R=R.nodes.find(_=>_.id==p))||void 0===R?void 0:R.index)&&void 0!==g?g:0}}).sort((p,g)=>p.index-g.index).forEach(p=>{var R,g;r?null===(R=this.slide)||void 0===R||null===(R=R.svg)||void 0===R||R.nodes.filter(_=>_.id==p.id).forEach(_=>{_.index=r+p.index+p.index/1e3}):null===(g=this.slide)||void 0===g||null===(g=g.svg)||void 0===g||g.nodes.filter(_=>_.id==p.id).forEach(_=>{_.index=p.index/100-1})}),null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.sort((p,g)=>{var R,_;return(null!==(R=p.index)&&void 0!==R?R:0)-(null!==(_=g.index)&&void 0!==_?_:0)}),(0,bt.$)(this.slide),null===(l=window.document.getElementById(u.FL.RESIZE_GROUP))||void 0===l||l.remove(),null===(f=window.document.getElementById(u.FL.SELECT_GROUP))||void 0===f||f.remove(),(0,at.D)(It.dataSelect.nodes)}bringToFrontArea(i){var r,o,n,l;let f=i.map(vt=>It.data.getNode(vt)).filter(vt=>!vt.isfake),{x1:p,y1:g,x2:R,y2:_}=zt(f),X=this.getNodeOnArea(p,g,R,_);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((vt,xt)=>{vt.index=xt+1});let A=X.map(vt=>{var xt,Dt;return null!==(xt=null===(Dt=this.slide)||void 0===Dt||null===(Dt=Dt.svg)||void 0===Dt||null===(Dt=Dt.nodes.find(Gt=>Gt.id==vt))||void 0===Dt?void 0:Dt.index)&&void 0!==xt?xt:0}),lt=Math.max.apply(null,A);i.forEach((vt,xt)=>{var Dt;null===(Dt=this.slide)||void 0===Dt||null===(Dt=Dt.svg)||void 0===Dt||Dt.nodes.filter(Gt=>Gt.id==vt).forEach(Gt=>{Gt.index=lt+(xt+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((vt,xt)=>{var Dt,Gt;return(null!==(Dt=vt.index)&&void 0!==Dt?Dt:0)-(null!==(Gt=xt.index)&&void 0!==Gt?Gt:0)}),(0,bt.$)(this.slide),null===(n=window.document.getElementById(u.FL.RESIZE_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(u.FL.SELECT_GROUP))||void 0===l||l.remove(),(0,at.D)(It.dataSelect.nodes)}sendToBackArea(i){var r,o,n,l;let f=i.map(vt=>It.data.getNode(vt)).filter(vt=>!vt.isfake),{x1:p,y1:g,x2:R,y2:_}=zt(f),X=this.getNodeOnArea(p,g,R,_);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((vt,xt)=>{vt.index=xt+1});let A=X.map(vt=>{var xt,Dt;return null!==(xt=null===(Dt=this.slide)||void 0===Dt||null===(Dt=Dt.svg)||void 0===Dt||null===(Dt=Dt.nodes.find(Gt=>Gt.id==vt))||void 0===Dt?void 0:Dt.index)&&void 0!==xt?xt:0}),lt=Math.min.apply(null,A)-1;i.forEach((vt,xt)=>{var Dt;null===(Dt=this.slide)||void 0===Dt||null===(Dt=Dt.svg)||void 0===Dt||Dt.nodes.filter(Gt=>Gt.id==vt).forEach(Gt=>{Gt.index=lt+(xt+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((vt,xt)=>{var Dt,Gt;return(null!==(Dt=vt.index)&&void 0!==Dt?Dt:0)-(null!==(Gt=xt.index)&&void 0!==Gt?Gt:0)}),(0,bt.$)(this.slide),null===(n=window.document.getElementById(u.FL.RESIZE_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(u.FL.SELECT_GROUP))||void 0===l||l.remove(),(0,at.D)(It.dataSelect.nodes)}}const zt=Z=>{let i=999999,r=999999,o=-999999,n=-999999;return Z.forEach(l=>{i=Math.min(i,l.size.x),r=Math.min(r,l.size.y),o=Math.max(o,l.size.x+l.size.width),n=Math.max(n,l.size.y+l.size.height)}),{x1:i,y1:r,x2:o,y2:n}};class Bt{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":It.data.deleteNode(r.from.id);break;case"edit":break;case"delete":It.data.deleteNode(r.from.id,!1);break;case"size":{let{id:o,type:n,size:l,attribute:f}=It.data.getNode(r.from.id);Object.assign(l,r.from.size),Object.assign(f,(0,O.xW)(n,l,f)),(0,y.tD)(window.document.getElementById(o),f);break}case"attribute":{let{id:o,attribute:n}=It.data.getNode(r.from.id);Object.assign(n,r.from.attribute),(0,y.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=It.data.getNode(r.from.id);Object.assign(null!=n?n:{},r.from.style),(0,y.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=It.data.getNode(r.from.id);Object.assign(null!=l?l:{},r.from.source),(0,y.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=It.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.animate);break}case"interactive":{let{interactive:o}=It.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.interactive);break}case"variable":{let{variable:o}=It.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.variable);break}}}),It.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":It.data.deleteNode(r.to.id,!1);break;case"edit":break;case"delete":It.data.deleteNode(r.to.id,!0);break;case"size":{let{id:o,type:n,size:l,attribute:f}=It.data.getNode(r.to.id);Object.assign(l,r.to.size),Object.assign(f,(0,O.xW)(n,l,f)),(0,y.tD)(window.document.getElementById(o),f);break}case"attribute":{let{id:o,attribute:n}=It.data.getNode(r.to.id);Object.assign(n,r.to.attribute),(0,y.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=It.data.getNode(r.to.id);Object.assign(null!=n?n:{},r.to.style),(0,y.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=It.data.getNode(r.to.id);Object.assign(null!=l?l:{},r.to.source),(0,y.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=It.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.animate);break}case"interactive":{let{interactive:o}=It.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.interactive);break}case"variable":{let{variable:o}=It.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.variable);break}}}),It.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class Yt{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var r,o;this._frameSize.width=null!==(r=null==i?void 0:i.width)&&void 0!==r?r:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,r,o){var n;if(!(i<.01||i>100)){if(r=null!==(n=r)&&void 0!==n?n:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-r.x,this._dislocation.y=this._height/i/2-r.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var l={x:Math.max(0,Math.min((0,B.z)(r.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,B.z)(r.y/this._height,1e3),1))},f={x:(this._width/i-this._width/this._scale)*l.x,y:(this._height/i-this._height/this._scale)*l.y};this._dislocation.x+=f.x,this._dislocation.y+=f.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}zoomIn(){this.scaleTo(this._scale+.04*this._scale)}zoomOut(){this.scaleTo(this._scale-.04*this._scale)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,r){this._dislocation.x=i.x+r.x/this._scale,this._dislocation.y=i.y+r.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,y.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(r=>r(i))}}var $t=b(9311);class oe{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,$t.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,$t._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(r=>r(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(r=>r(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(r=>r(i)),this.saveConfig()}}var re=b(9410),ue=b(6589),_e=b(2475),be=function(Z){return Z&&JSON.parse(JSON.stringify(Z))},Oe=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Ae=[],We={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},Ve={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class ri{constructor(){this._data_variables=be(Oe).concat(be(Ae)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(r=>{r(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(r=>{r(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var r of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))r.if&&r.if.length>0&&(this.checkValueConditions(r.if)?this.setValueOperators(r.then||[]):this.setValueOperators(r.else||[]))}}renew(){this._data_variables=be(Oe).concat(be(Ae)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let r={};"string"==typeof i?r=JSON.parse(i):"object"==typeof i&&(r=i),this._data_variables=r.variables||[],this._data_conditions=r.conditions||(o=>(this._data_variables.map(n=>n.change||[]).forEach(n=>{o=o.concat(n)}),o))([]),Oe.forEach(o=>{var n=this._data_variables.filter(l=>l.key==o.key);n.length?n.forEach(function(l,f,p){l.type=o.type,l.readonly=o.readonly,l.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return be(We)}getConditionTemp(){return be(Ve)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,r){return i.localeCompare(r)})}getVariableAll(){return this._data_variables.length?be((Z=this._data_variables,i="key",function(r){for(var o of Z.map(function(n){return n[i]}).sort())Z.filter(function(n){return n[i]==o}).forEach(function(n){r.push(n)}),Z=Z.filter(function(n){return n[i]!=o});return r}([]))):be(Oe).concat(be(Ae));var Z,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Oe.forEach(r=>{var o=this._data_variables.filter(n=>n.key==r.key);o.length?o.forEach((n,l,f)=>{n.type=r.type,n.readonly=r.readonly,n.system=r.system}):this._data_variables.push(r)}))}getVariable(i){return i?be(this._data_variables.filter(r=>r.key==i)[0]||{}):{}}setVariable(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(l=>l.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(l=>l.key==i);n.length?n.forEach(function(l,f,p){l.value=r,l.type=o}):this._data_variables.push({key:i,value:r,type:o})}}getValue(i,r){if(!i)return"";var o=this._data_variables.filter(function(f){return f.key==i});if(o.length){var l,n=o[0]||{};switch(this.OnGetActionExecuting(n),r||(r=n.type||null),r){case"string":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":"string"==typeof n.value?n.value||"":n.value.toString().trim();break;case"number":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?0:"number"==typeof n.value?n.value||0:parseFloat(n.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(n.value)>=0?l=!1:"boolean"==typeof n.value?l=n.value:(l=(n.value+"").toLowerCase(),l="1"==n.value||"true"==n.value||"yes"==n.value||"dung"==n.value);break;case"audio-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></audio>`:"";break;case"video-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></video>`:"";break;case"img-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<img style="width:100%;vertical-align:middle;" src="${n.value}"/>`:"";break;default:l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value}return this.OnGetActionExecuted(n),l}return null}setValue(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(function(f){return f.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(function(f){return f.key==i});if(n.length){var l=n[0];this.OnSetActionExecuting(l),l&&(l.value=r),this.OnSetActionExecuted(l)}}}getConditionAll(){return be(this._data_conditions.sort(function(i,r){return i.idx-r.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?be(this._data_conditions.filter(r=>r.variable==i||(r.variables||[]).indexOf(i)>=0).sort(function(r,o){return r.idx-o.idx})):{}}switchCondition(i,r,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})>0):r==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),0==o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})):r!=o;case">=":return r>=o;case"<=":return r<=o;case">":return r>o;case"<":return r<o;case"\u2208":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),0==o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l});default:return!1}}switchOperator(i,r,o){switch(i){case"+":return r+o;case"-":return r-o;case"*":return r*o;case"/":return r/o;case"=":return o;case"=!":return!o;case"==":return r==o;case"!=":return r!=o}}switchFormula(i,r){switch(i){case"sum":return r.reduce(function(n,l){return n+l});case"sub":return r.reduce(function(n,l){return n-l});case"pro":return r.reduce(function(n,l){return n*l});case"div":return r.reduce(function(n,l){return n/l});case"avg":var o=r.reduce(function(n,l){return n+l})/(r.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,r);case"max":return Math.max.apply(null,r);case"and":return r.reduce(function(n,l){return n&&l});case"or":return r.reduce(function(n,l){return n||l});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var r=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),r)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(r=>{switch(r.type){case"variable":return this.switchValueType_Condition(r)?0:1;case"variables":return 0==r.variables.map(o=>this.switchValueType_Condition(Object.assign(be(r),{variable:o}))?0:1).reduce(function(o,n){return o+n})?0:1;default:return 0}}).reduce((r,o)=>(null!=r?r:0)+(null!=o?o:0))}setValueOperators(i){for(var r of i)switch(r.type){case"variable":this.setValue(r.variable,this.getValueOperator(r));break;case"variables":for(var o of r.variables)this.setValue(o,this.getValueOperator(Object.assign(be(r),{variable:o})));break;case"slide":re.J.runSlide(void 0,void 0,r.slide);break;case"node":{var n;(0,_e.GD)({id:r.node,nodeStatus:re.J.nodeStatus,slideStatus:re.J.slideStatus});let l=re.J.findNode(r.node);null!=l&&null!==(n=l.interactive)&&void 0!==n&&n.click&&(0,ue.J)(l,re.J.nodeStatus,re.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(r=>{r(i)})}}class li{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,r,o){if(this._pointer_type=i,r)switch(i){case u.PS.PEN:this._pen_type=r;break;case u.PS.SHAPE:this._shape_type=r,o&&r===u.hv.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case u.PS.PEN:this._pen_type||(this._pen_type=u.FC.DRAW);break;case u.PS.SHAPE:this._shape_type||(this._shape_type=u.hv.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,r,o){this._fnChangePointerTypes.forEach(n=>n(i,r,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,r,o){this._fnChangePointerTypeTemps.forEach(n=>n(i,r,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,r,o){this._fnChangePenTypes.forEach(n=>n(i,r,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,r,o){this._fnChangeShapeTypes.forEach(n=>n(i,r,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,r,o){this._fnChangePolygonTypes.forEach(n=>n(i,r,o))}set onchange(i){this._fnChanges.push(i)}change(i,r,o){this._fnChanges.forEach(n=>n(i,r,o))}}const It=new class si{constructor(){this._container="",this._svg="",this._screen=Yt.prototype,this._data=At.prototype,this._dataSelect=Lt.prototype,this._slide=Nt.prototype,this._history=Bt.prototype,this._attribute=oe.prototype,this._pointer=li.prototype,this._variable=ri.prototype,this._data=new At,this._dataSelect=new Lt,this._slide=new Nt,this._history=new Bt,this._attribute=new oe,this._pointer=new li,this._variable=new ri,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,variable:this._variable.get,resources:this._data.getResource,fonts:this._data.getFonts,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,r,o,n,l;this._screen.screen=(i=jQuery(this._container).offset(),r=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(n=null==i?void 0:i.left)&&void 0!==n?n:0,y:null!==(l=null==i?void 0:i.top)&&void 0!==l?l:0},width:null!=r?r:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new Yt,(Z=>{new y.cR(Z.container,Z.target);var i=(n,l,f,p)=>{switch(n){case u.PS.POINTER:jQuery(Z.target).css({cursor:"auto"});break;case u.PS.HAND:p?jQuery(Z.target).css({cursor:"grabbing"}):jQuery(Z.target).css({cursor:"grab"});break;case u.PS.PEN:switch(l){case u.FC.DRAW:jQuery(Z.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case u.FC.HIGHTLIGH:jQuery(Z.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case u.PS.ERASER:jQuery(Z.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case u.PS.SHAPE:jQuery(Z.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case u.PS.TEXT:case u.PS.FOREIGNOBJECT:jQuery(Z.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};It.pointer.onchange=(n,l,f)=>{i(n,l)},jQuery(Z.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",n=>{i(It.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",n=>{i(It.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",n=>{n.ctrlKey&&n.preventDefault()},{passive:!1}),jQuery(Z.container).off("wheel.icdt-init").on("wheel.icdt-init",n=>{var l;n.preventDefault();let f=null!==(l=n.originalEvent)&&void 0!==l?l:n;if(!f.deltaX&&f.deltaY!=Math.floor(f.deltaY)||f.ctrlKey){var p=It.screen.scale;It.screen.scaleTo(p-.04*p*(f.deltaY>0?1:-1),(0,L.D)({x:n.clientX,y:n.clientY},1,{x:0,y:0},It.screen.offset))}else It.screen.move(It.screen.dislocation,{x:-f.deltaX,y:-f.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{It.screen.actived=!!jQuery(n.target).parents(It.container).length}),jQuery(Z.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",n=>{}),jQuery(Z.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",n=>{It.pointer.pointer_type_temp==u.PS.HAND&&(It.pointer.pointer_type_temp=u.PS.POINTER)}),jQuery(Z.container).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{0==n.button&&(Z.container.includes("#")&&Z.container.includes(n.target.getAttribute("id"))||Z.container.includes(".")&&Z.container.includes(n.target.getAttribute("class"))||Z.container.includes(n.target.nodeName))&&(It.pointer.pointer_type_temp||It.pointer.pointer_type)===u.PS.POINTER&&(It.dataSelect.ids=[])}),jQuery(Z.container).off("touchmove.icdt-init").on("touchmove.icdt-init",n=>{n.preventDefault()});const r=n=>{switch(It.pointer.pointer_type_temp||It.pointer.pointer_type){case u.PS.POINTER:var f,p,g;("touchstart"==(null===(f=n.touchEvent)||void 0===f?void 0:f.type)||"mousedown"==(null===(p=n.mouseEvent)||void 0===p?void 0:p.type)||"dblclick"==(null===(g=n.mouseEvent)||void 0===g?void 0:g.type))&&x(n);break;case u.PS.HAND:var R,_;("touchstart"==(null===(R=n.touchEvent)||void 0===R?void 0:R.type)||"mousedown"==(null===(_=n.mouseEvent)||void 0===_?void 0:_.type))&&(Z=>{(0,kt.I)(Z,new G,1,{x:0,y:0})})(n);break;case u.PS.PEN:var X,A;("touchstart"==(null===(X=n.touchEvent)||void 0===X?void 0:X.type)||"mousedown"==(null===(A=n.mouseEvent)||void 0===A?void 0:A.type))&&(0,Mt.u)(n);break;case u.PS.SHAPE:var lt,vt;("touchstart"==(null===(lt=n.touchEvent)||void 0===lt?void 0:lt.type)||"mousedown"==(null===(vt=n.mouseEvent)||void 0===vt?void 0:vt.type))&&(Z=>{var i=null;switch(It.pointer.shape_type){case u.hv.CIRCLE:i=new w;break;case u.hv.ELLIPSE:i=new N;break;case u.hv.LINE:i=new it;break;case u.hv.RECT:i=new Y;break;case u.hv.POLYGON:var r;i=new pt(null===(r=u.LC.find(o=>o.type==It.pointer.polygon_type))||void 0===r?void 0:r.ratios);break;case u.hv.FOREIGNOBJECT:i=new wt;break;case u.hv.IMAGE:i=new ht;break;case u.hv.TEXT:case u.hv.PATH:i=new Et}i&&(0,kt.I)(Z,i)})(n);break;case u.PS.FOREIGNOBJECT:var xt,Dt;("touchstart"==(null===(xt=n.touchEvent)||void 0===xt?void 0:xt.type)||"mousedown"==(null===(Dt=n.mouseEvent)||void 0===Dt?void 0:Dt.type))&&(Z=>{(0,kt.I)(Z,new wt)})(n);break;case u.PS.IMAGE:var Gt,pe;("touchstart"==(null===(Gt=n.touchEvent)||void 0===Gt?void 0:Gt.type)||"mousedown"==(null===(pe=n.mouseEvent)||void 0===pe?void 0:pe.type))&&(Z=>{(0,kt.I)(Z,new ht)})(n);break;case u.PS.TEXT:var xe,ve;("touchstart"==(null===(xe=n.touchEvent)||void 0===xe?void 0:xe.type)||"mousedown"==(null===(ve=n.mouseEvent)||void 0===ve?void 0:ve.type))&&(Z=>{(0,kt.I)(Z,new c)})(n);break;case u.PS.ERASER:var we,Se;("touchstart"==(null===(we=n.touchEvent)||void 0===we?void 0:we.type)||"mousedown"==(null===(Se=n.mouseEvent)||void 0===Se?void 0:Se.type))&&(Z=>{(0,kt.I)(Z,new dt)})(n);break;case u.PS.INDEX:var Ie,xi;("touchstart"==(null===(Ie=n.touchEvent)||void 0===Ie?void 0:Ie.type)||"mousedown"==(null===(xi=n.mouseEvent)||void 0===xi?void 0:xi.type))&&(0,tt.h)(n)}};let o=!1;jQuery(Z.target).off("touchstart.icdt-init").on("touchstart.icdt-init",n=>{o=!0,r({touchEvent:n})}),jQuery(Z.target).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{if(1!=n.button){if(o)return void(o=!1);r({mouseEvent:n})}}),jQuery(Z.target).off("dblclick.icdt-init").on("dblclick.icdt-init",n=>{if(1!=n.button){if(o)return void(o=!1);r({mouseEvent:n})}}),Z.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",n=>{It.screen.actived&&(It.dataSelect.contenteditable_id||((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Ot.K)(n)))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",n=>{It.screen.actived&&(It.dataSelect.contenteditable_id||((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Ot.K)(n)))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},1949:(ce,Ut,b)=>{b.d(Ut,{h:()=>v,y:()=>x});var y=b(5150),O=b(1862),kt=b(5195),at=b(596),u=b(2806);const v=V=>{var G,P,B,w;let T=(null===(G=V.mouseEvent)||void 0===G?void 0:G.target)||(null===(P=V.touchEvent)||void 0===P?void 0:P.target),N=(null==T?void 0:T.getAttribute("id"))||"",d=null==T?void 0:T.nodeName,Y=jQuery(T).parents("g[id]").attr("id")||"";if(![u.FL.INDEX_GROUP].includes(Y))if(null!==(B=V.mouseEvent)&&void 0!==B&&B.altKey||null!==(w=V.touchEvent)&&void 0!==w&&w.altKey||!N||N.match(/[^0-9]/)||!y.L.dataSelect.nodeName.includes(d)){var z;y.L.dataSelect.ids.length&&(y.L.dataSelect.ids=[]),(0==(null===(z=V.mouseEvent)||void 0===z?void 0:z.button)||V.touchEvent)&&((V,G)=>{let N=(0,at.RY)(u.FL.SCAN_GROUP,"g"),d=(0,O.CE)(0,0,1,1);(0,at.xJ)(N,d),((V,G,P,B)=>{(0,kt.I)(V,{start:N=>{},move:(N,d)=>{((N,d,Y,z)=>{G=(0,O.CE)(N,d,Y,z),(0,at.xJ)(P,G)})(d[0][0],d[0][1],N.x,N.y)},end:(N,d)=>{null==P||P.remove(),y.L.dataSelect.ids=y.L.data.getNodeInArea(Math.min(d[0][0],N.x),Math.min(d[0][1],N.y),Math.max(d[0][0],N.x),Math.max(d[0][1],N.y)),B(y.L.dataSelect.nodes)}})})(V,d,N,G)})(V,D)}else{var pt,F;let it=parseFloat(N||"0");y.L.dataSelect.ids=null!==(pt=V.mouseEvent)&&void 0!==pt&&pt.shiftKey||null!==(F=V.touchEvent)&&void 0!==F&&F.shiftKey?[it].concat(y.L.dataSelect.ids).filter((Q,Et,Rt)=>Rt.indexOf(Q)==Et):[it],D(y.L.dataSelect.nodes)}},D=V=>{var G,P;let B=1;var w,T;if(V.length&&(B=Math.max.apply(null,null!==(w=null===(T=y.L.data.slide)||void 0===T||null===(T=T.svg)||void 0===T?void 0:T.nodes.map(d=>{var Y;return null!==(Y=d.idx)&&void 0!==Y?Y:0}))&&void 0!==w?w:[0])+1),1==V.length)V[0].idx||(V[0].idx=B,V[0].time=0);else if(V.length>=0){let d=V.map(z=>{var pt;return null!==(pt=z.idx)&&void 0!==pt?pt:0}).filter(z=>z>0),Y=d.length?Math.min.apply(null,d):B;V.forEach(z=>{var pt;z.idx=Y,z.time=null!==(pt=z.time)&&void 0!==pt?pt:0})}let N=(0,at.RY)(u.FL.INDEX_GROUP,"g");(0,at.IA)(N,null!==(G=null===(P=y.L.data.slide)||void 0===P||null===(P=P.svg)||void 0===P?void 0:P.nodes)&&void 0!==G?G:[])},x=V=>{var G,P,B;null!=V&&null!==(G=V.svg)&&void 0!==G&&G.nodes&&V.svg.nodes.forEach(T=>{T.idx=0,T.time=null});let w=(0,at.RY)(u.FL.INDEX_GROUP,"g");(0,at.IA)(w,null!==(P=null===(B=y.L.data.slide)||void 0===B||null===(B=B.svg)||void 0===B?void 0:B.nodes)&&void 0!==P?P:[])}},8939:(ce,Ut,b)=>{b.d(Ut,{K:()=>V,X:()=>x});var y=b(9311),O=b(5150),kt=b(2062),at=b(2021),u=b(4067),C=b(900),k=b(5268),v=b(2806);const x=new class D{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:v.r_.Escape,fn:()=>{O.L.dataSelect.ids.length&&(O.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:v.r_.Delete,fn:()=>{O.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:v.r_.Space,fn:()=>{O.L.pointer.pointer_type_temp=v.PS.HAND}},this.onchange={type:"keyup",key:v.r_.Space,fn:()=>{O.L.pointer.pointer_type_temp=v.PS.POINTER}},this.onchange={type:"keydown",key:v.r_.ArrowLeft,fn:()=>{O.L.dataSelect.ids.length||O.L.data.backSlide()}},this.onchange={type:"keydown",key:v.r_.ArrowRight,fn:()=>{O.L.dataSelect.ids.length||O.L.data.nextSlide()}},this.onchange={type:"keydown",key:v.r_.PageDown,fn:()=>{O.L.dataSelect.ids.length||O.L.data.backSlide()}},this.onchange={type:"keydown",key:v.r_.PageUp,fn:()=>{O.L.dataSelect.ids.length||O.L.data.nextSlide()}},this.onchange={type:"keydown",key:v.r_.ArrowLeft,fn:()=>{O.L.dataSelect.ids.length&&(O.L.dataSelect.nodes.forEach(P=>{(0,C.ei)(P,(0,u.z)(P.size.x-(0,at.$)(1)))}),(0,k.D)(O.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:v.r_.ArrowRight,fn:()=>{O.L.dataSelect.ids.length&&(O.L.dataSelect.nodes.forEach(P=>{(0,C.ei)(P,(0,u.z)(P.size.x+(0,at.$)(1)))}),(0,k.D)(O.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:v.r_.ArrowUp,fn:()=>{O.L.dataSelect.ids.length&&(O.L.dataSelect.nodes.forEach(P=>{(0,C.ZF)(P,(0,u.z)(P.size.y-(0,at.$)(1)))}),(0,k.D)(O.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:v.r_.ArrowDown,fn:()=>{O.L.dataSelect.ids.length&&(O.L.dataSelect.nodes.forEach(P=>{(0,C.ZF)(P,(0,u.z)(P.size.y+(0,at.$)(1)))}),(0,k.D)(O.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:v.r_.Digit1,fn:P=>{P.shiftKey&&(O.L.reloadView(),O.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:v.r_.Digit0,fn:P=>{P.ctrlKey&&(O.L.screen.zoomTo=100)}},this.onchange={type:"keydown",key:v.r_.Equal,fn:P=>{P.ctrlKey&&O.L.screen.zoomIn()}},this.onchange={type:"keydown",key:v.r_.Minus,fn:P=>{P.ctrlKey&&O.L.screen.zoomOut()}},this.onchange={type:"keydown",key:v.r_.KeyA,fn:P=>{P.ctrlKey&&(O.L.dataSelect.ids=O.L.data.getNodeAll(),(0,k.D)(O.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:v.r_.KeyC,fn:P=>{if(P.ctrlKey){let B=O.L.dataSelect.nodes;B&&(0,y.IB)({params:{type:"nodes",nodes:B}})}}},this.onchange={type:"keydown",key:v.r_.KeyV,fn:P=>{P.ctrlKey&&(0,y.A9)({callback:B=>{var w,T;"nodes"==(null==B?void 0:B.type)&&null!=B&&null!==(w=B.nodes)&&void 0!==w&&w.length&&(null==B||null===(T=B.nodes)||void 0===T||T.forEach(N=>{P.shiftKey||O.L.data.findNode(N.id).id&&(N.size.x+=16,N.size.y+=16),N.id=Math.ceil(1e9*Math.random()),O.L.data.node=N}),(0,kt.t)(O.L.data.slide))}})}},this.onchange={type:"keydown",key:v.r_.KeyZ,fn:P=>{P.ctrlKey&&P.shiftKey?O.L.history.redo():P.ctrlKey&&O.L.history.undo()}},this.onchange={type:"keydown",key:v.r_.BracketLeft,fn:P=>{P.ctrlKey&&P.shiftKey?O.L.data.sendToBack(O.L.dataSelect.ids):P.ctrlKey?O.L.data.sendToBackStep(O.L.dataSelect.ids,-2):O.L.data.sendToBackArea(O.L.dataSelect.ids)}},this.onchange={type:"keydown",key:v.r_.BracketRight,fn:P=>{P.ctrlKey&&P.shiftKey?O.L.data.bringToFront(O.L.dataSelect.ids):P.ctrlKey?O.L.data.bringToFrontStep(O.L.dataSelect.ids,1):O.L.data.bringToFrontArea(O.L.dataSelect.ids)}}}set onchange(P){let B=this._fnChanges.find(w=>w.eventType==P.type&&w.eventKey==P.key);B?B.fns.push(P.fn):this._fnChanges.push({eventType:P.type,eventKey:P.key,fns:[P.fn]})}change(P,B,w){var T;O.L.dataSelect.contenteditable_id||null===(T=this._fnChanges.find(N=>N.eventType==P&&N.eventKey==B))||void 0===T||T.fns.forEach(N=>N(w))}},V=G=>{x.change(G.type,G.keyCode||G.which||G.charCode||0,G)}},9633:(ce,Ut,b)=>{b.d(Ut,{O:()=>v});var y=b(8691),O=b(596),kt=b(1131),at=b(2021),u=b(5150),C=b(4205),k=b(2806);class v{constructor(x,V){var G,P;let B={stroke:"#FF0000",strokeWidth:(0,at.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,at.$)(8)},{element:w}=(0,y.X)(Math.ceil(1e9*Math.random()),{size:V});window.document.getElementById(k.FL.INTERACTIVE_GROUP).querySelectorAll("path").forEach(F=>null==F?void 0:F.remove()),window.document.getElementById(k.FL.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(F=>null==F?void 0:F.remove()),null===(G=window.document.getElementById(k.FL.INTERACTIVE_GROUP))||void 0===G||G.appendChild(w);var d=F=>{if(!F.length)return;let it=[];if(1==F.length){var S;let{size:Q}=null!==(S=null!=x?x:u.L.dataSelect.nodes[0])&&void 0!==S?S:{};if(!Q)return;it=[[Q.x+Q.width/2,Q.y+Q.height/2],F[0]]}else it=[...F];z(it),Y(it[0],"start"),Y(it[it.length-1],"end")},Y=(F,it)=>{F&&((S=>{let{element:Q}=(0,C.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==it?"#FF0000":"#00BA00",strokeWidth:(0,at.$)(1)},size:{x:F[0]-5,y:F[1]-5,width:10,height:10}});null===(S=window.document.getElementById(k.FL.INTERACTIVE_GROUP))||void 0===S||S.prepend(Q)})(),((S,Q)=>{let{size:Et}=null!==(S=null!=x?x:u.L.dataSelect.nodes[0])&&void 0!==S?S:{};if(!Et)return;let Rt=[[F[0]-Et.width/2,F[1]-Et.height/2],[F[0]+Et.width/2,F[1]-Et.height/2],[F[0]+Et.width/2,F[1]+Et.height/2],[F[0]-Et.width/2,F[1]+Et.height/2],[F[0]-Et.width/2,F[1]-Et.height/2]],{element:wt}=(0,y.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,at.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,at.$)(8)},size:{x:0,y:0,width:10,height:10,points:Rt}});null===(Q=window.document.getElementById(k.FL.INTERACTIVE_GROUP))||void 0===Q||Q.prepend(wt)})())},z=F=>{let S=kt.n8j().x(Q=>Q[0]).y(Q=>Q[1]).curve(kt.qrM)(F);w.setAttribute("d",S)};(0,O.tD)(w,B),d(null!==(P=null==V?void 0:V.points)&&void 0!==P?P:[]);let pt="";return{start:F=>{pt=`M ${F.x} ${F.y} L ${F.x} ${F.y}`},move:(F,it)=>{pt+=` ${F.x} ${F.y}`,w.setAttribute("d",pt)},end:(F,it)=>{d(it),it.length&&(window.interactivePoints=it)}}}}},4666:(ce,Ut,b)=>{b.d(Ut,{z:()=>G,u:()=>V});var y=b(2806),O=b(5150),kt=b(5195),at=b(596),u=b(1131),C=b(8691),k=b(4271);class v{constructor(){let B={stroke:O.L.attribute.stroke,strokeWidth:O.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:w,element:T,attribute:N,size:d}=(0,C.X)(Math.ceil(1e9*Math.random()),{attribute:B});(0,at.tD)(T,N);let Y="",z="";return{start:F=>{Y=`M ${F.x} ${F.y} L ${F.x} ${F.y}`},move:(F,it)=>{((F,it)=>{Y+=` ${F} ${it}`,T.setAttribute("d",Y)})(F.x,F.y)},end:(F,it)=>{var S;it.length>=3?(z=null!==(S=u.n8j().x(Ct=>Ct[0]).y(Ct=>Ct[1]).curve(u.qrM)(it))&&void 0!==S?S:"",T.setAttribute("d",z)):T.setAttribute("d",Y);let Q=(0,k.CS)(z||Y),{minX:Et,minY:Rt,maxX:wt,maxY:ne}=(0,k.lP)(Q);d.x=Et,d.y=Rt,d.width=wt-Et||1,d.height=ne-Rt||1,d.ratioMaps=(0,k.nf)(d,Q),O.L.data.node=Object.assign({id:w,type:y.hv.PATH,name:"Path"},{size:d,attribute:N})}}}}class D{constructor(){let B={stroke:O.L.attribute.stroke,strokeOpacity:.4,strokeWidth:O.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:w,element:T,attribute:N,size:d}=(0,C.X)(Math.ceil(1e9*Math.random()),{attribute:B});(0,at.tD)(T,N);let Y="";return{start:F=>{Y=`M ${F.x} ${F.y} L ${F.x} ${F.y}`},move:(F,it)=>{((F,it)=>{Y+=` ${F} ${it}`,T.setAttribute("d",Y)})(F.x,F.y)},end:(F,it)=>{let S=(0,k.CS)(Y),{minX:Q,minY:Et,maxX:Rt,maxY:wt}=(0,k.lP)(S);d.x=Q,d.y=Et,d.width=Rt-Q||1,d.height=wt-Et||1,d.ratioMaps=(0,k.nf)(d,S),O.L.data.node=Object.assign({id:w,type:y.hv.PATH,name:"Path"},{size:d,attribute:N})}}}}var x=b(9633);const V=P=>{switch(O.L.pointer.pen_type){case y.FC.DRAW:(0,kt.I)(P,new v);break;case y.FC.HIGHTLIGH:(0,kt.I)(P,new D);break;case y.FC.INTERACTIVE:G(P)}},G=P=>{var B,w;let T=(0,at.RY)(y.FL.INTERACTIVE_GROUP,"g"),N=null!==(B=null===(w=O.L.data.slide)||void 0===w||null===(w=w.svg)||void 0===w?void 0:w.viewBox)&&void 0!==B?B:(()=>{let{width:d,height:Y}=O.L.screen.get;return{x:0,y:0,width:d,height:Y}})();(0,at.KP)(T,N),P&&(0,kt.I)(P,new x.O)}},5268:(ce,Ut,b)=>{b.d(Ut,{D:()=>T});var y=b(5150),O=b(1862),kt=b(5195),at=b(596),u=b(4067),C=b(2806);const D=(N,d,Y,z,pt)=>{let{x:F,y:it,width:S,height:Q}=Y;0==S&&(S=1),0==Q&&(Q=1);let Et=z.map(Mt=>Object.assign({},Mt.size)),wt=[],Ct=!1;(0,kt.I)(N,{start:Mt=>{z.forEach(Mt=>{let{id:Pt,size:ct,attribute:J}=Mt;wt.push({id:Pt,type:"size",from:JSON.parse(JSON.stringify({id:Pt,size:ct,attribute:J}))})})},move:(Mt,Pt,ct)=>{((Mt,Pt,ct,J,ft)=>{let K=ct-Mt,U=J-Pt;(()=>{let E,s=(S||1)/(Q||1);switch(d){case"rect-center":E=null!=ft&&ft.shiftKey?Math.abs(ct-Mt)>=Math.abs(J-Pt)?{x:F+ct-Mt,y:it,width:S,height:Q}:{x:F,y:it+J-Pt,width:S,height:Q}:{x:F+ct-Mt,y:it+J-Pt,width:S,height:Q};break;case"rect-top-left":E=null!=ft&&ft.shiftKey&&null!=ft&&ft.altKey?s>=1?{x:F+(ct-Mt),y:it+(ct-Mt)/s,width:S-2*(ct-Mt),height:Q-2*(ct-Mt)/s}:{x:F+(J-Pt)*s,y:it+(J-Pt),width:S-2*(J-Pt)*s,height:Q-2*(J-Pt)}:null!=ft&&ft.shiftKey?s>=1?{x:F+(ct-Mt),y:it+(ct-Mt)/s,width:S-(ct-Mt),height:Q-(ct-Mt)/s}:{x:F+(J-Pt)*s,y:it+(J-Pt),width:S-(J-Pt)*s,height:Q-(J-Pt)}:null!=ft&&ft.altKey?{x:F+(ct-Mt),y:it+(J-Pt),width:S-2*(ct-Mt),height:Q-2*(J-Pt)}:{x:F+(ct-Mt),y:it+(J-Pt),width:S-(ct-Mt),height:Q-(J-Pt)};break;case"rect-top-right":E=null!=ft&&ft.shiftKey&&null!=ft&&ft.altKey?s>=1?{x:F-(ct-Mt),y:it-(ct-Mt)/s,width:S+2*(ct-Mt),height:Q+2*(ct-Mt)/s}:{x:F+(J-Pt)*s,y:it+(J-Pt),width:S-2*(J-Pt)*s,height:Q-2*(J-Pt)}:null!=ft&&ft.shiftKey?s>=1?{x:F,y:it-(ct-Mt)/s,width:S+(ct-Mt),height:Q+(ct-Mt)/s}:{x:F,y:it+(J-Pt),width:S-(J-Pt)*s,height:Q-(J-Pt)}:null!=ft&&ft.altKey?{x:F-(ct-Mt),y:it+(J-Pt),width:S+2*(ct-Mt),height:Q-2*(J-Pt)}:{x:F,y:it+(J-Pt),width:S+(ct-Mt),height:Q-(J-Pt)};break;case"rect-bottom-left":E=null!=ft&&ft.shiftKey&&null!=ft&&ft.altKey?s>=1?{x:F+(ct-Mt),y:it+(ct-Mt)/s,width:S-2*(ct-Mt),height:Q-2*(ct-Mt)/s}:{x:F-(J-Pt)*s,y:it-(J-Pt),width:S+2*(J-Pt)*s,height:Q+2*(J-Pt)}:null!=ft&&ft.shiftKey?s>=1?{x:F+(ct-Mt),y:it,width:S-(ct-Mt),height:Q-(ct-Mt)/s}:{x:F-(J-Pt)*s,y:it,width:S+(J-Pt)*s,height:Q+(J-Pt)}:null!=ft&&ft.altKey?{x:F+(ct-Mt),y:it-(J-Pt),width:S-2*(ct-Mt),height:Q+2*(J-Pt)}:{x:F+(ct-Mt),y:it,width:S-(ct-Mt),height:Q+(J-Pt)};break;case"rect-bottom-right":E=null!=ft&&ft.shiftKey&&null!=ft&&ft.altKey?s>=1?{x:F-(ct-Mt),y:it-(ct-Mt)/s,width:S+2*(ct-Mt),height:Q+2*(ct-Mt)/s}:{x:F-(J-Pt)*s,y:it-(J-Pt),width:S+2*(J-Pt)*s,height:Q+2*(J-Pt)}:null!=ft&&ft.shiftKey?s>=1?{x:F,y:it,width:S+(ct-Mt),height:Q+(ct-Mt)/s}:{x:F,y:it,width:S+(J-Pt)*s,height:Q+(J-Pt)}:null!=ft&&ft.altKey?{x:F-(ct-Mt),y:it-(J-Pt),width:S+2*(ct-Mt),height:Q+2*(J-Pt)}:{x:F,y:it,width:S+(ct-Mt),height:Q+(J-Pt)};break;case"rect-top":E=null!=ft&&ft.shiftKey?{x:F+U/2*s,y:it+U,width:S-U*s,height:Q-U}:null!=ft&&ft.altKey?{x:F,y:it+U,width:S,height:Q-2*U}:{x:F,y:it+U,width:S,height:Q-U};break;case"rect-bottom":E=null!=ft&&ft.shiftKey?{x:F-U/2*s,y:it,width:S+U*s,height:Q+U}:null!=ft&&ft.altKey?{x:F,y:it-U,width:S,height:Q+2*U}:{x:F,y:it,width:S,height:Q+U};break;case"rect-left":E=null!=ft&&ft.shiftKey?{x:F+K,y:it+K/2/s,width:S-K,height:Q-K/s}:null!=ft&&ft.altKey?{x:F+K,y:it,width:S-2*K,height:Q}:{x:F+K,y:it,width:S-K,height:Q};break;case"rect-right":E=null!=ft&&ft.shiftKey?{x:F,y:it-K/2/s,width:S+K,height:Q+K/s}:null!=ft&&ft.altKey?{x:F-K,y:it,width:S+2*K,height:Q}:{x:F,y:it,width:S+K,height:Q};break;default:E={x:F+ct-Mt,y:it+J-Pt,width:S,height:Q}}E.width<=0&&(E.width=1),E.height<=0&&(E.height=1),E.x=(0,u.z)(E.x,1),E.y=(0,u.z)(E.y,1),E.width=(0,u.z)(E.width,1),E.height=(0,u.z)(E.height,1),Object.assign(Y,E),(0,at.D_)(pt,z,E),(()=>{let W=F-E.x,q=it-E.y,ot=(E.width-S)/S,Xt=(E.height-Q)/Q;z.forEach((Zt,Ht)=>{let jt=Et[Ht],qt=it-jt.y,j={x:(0,u.z)(jt.x-(W+(F-jt.x)*ot),100),y:(0,u.z)(jt.y-(q+qt*Xt),100),width:(0,u.z)(jt.width+jt.width*ot,100),height:(0,u.z)(jt.height+jt.height*Xt,100)},{id:c,type:H,size:st,attribute:gt}=Zt;Object.assign(st,j),Object.assign(gt,(0,O.xW)(H,st,gt)),(0,at.tD)(window.document.getElementById(c),gt)})})()})()})(Pt[0][0],Pt[0][1],Mt.x,Mt.y,ct),Ct=!0},end:(Mt,Pt)=>{Ct&&(z.forEach(Mt=>{let{id:Pt,size:ct,attribute:J}=Mt,ft=wt.find(K=>K.id==Pt);ft&&(ft.to=JSON.parse(JSON.stringify({id:Pt,size:ct,attribute:J})))}),y.L.history.push(wt))}})},G=(N,d,Y,z)=>{let Ct,{id:pt,type:F,size:it,attribute:S}=Y,{x:Q,y:Et,width:Rt,height:wt,ratios:ne}=it,ht=(Rt||1)/(wt||1),Mt=null,J=!1;(0,kt.I)(N,{start:K=>{Mt=JSON.parse(JSON.stringify({id:pt,size:it,attribute:S}))},move:(K,U,s)=>{((K,U,s,E,W)=>{let q=s-K,ot=E-U;switch(d){case"rect-center":Ct=null!=W&&W.shiftKey?Math.abs(q)>=Math.abs(ot)?{x:Q+q,y:Et,width:Rt,height:wt}:{x:Q,y:Et+ot,width:Rt,height:wt}:{x:Q+q,y:Et+ot,width:Rt,height:wt};break;case"rect-top-left":Ct=null!=W&&W.shiftKey&&null!=W&&W.altKey?ht>=1?{x:Q+q,y:Et+q/ht,width:Rt-2*q,height:wt-2*q/ht}:{x:Q+ot*ht,y:Et+ot,width:Rt-2*ot*ht,height:wt-2*ot}:null!=W&&W.shiftKey?ht>=1?{x:Q+q,y:Et+q/ht,width:Rt-q,height:wt-q/ht}:{x:Q+ot*ht,y:Et+ot,width:Rt-ot*ht,height:wt-ot}:null!=W&&W.altKey?{x:Q+q,y:Et+ot,width:Rt-2*q,height:wt-2*ot}:{x:Q+q,y:Et+ot,width:Rt-q,height:wt-ot};break;case"rect-top-right":Ct=null!=W&&W.shiftKey&&null!=W&&W.altKey?ht>=1?{x:Q-q,y:Et-q/ht,width:Rt+2*q,height:wt+2*q/ht}:{x:Q+ot*ht,y:Et+ot,width:Rt-2*ot*ht,height:wt-2*ot}:null!=W&&W.shiftKey?ht>=1?{x:Q,y:Et-q/ht,width:Rt+q,height:wt+q/ht}:{x:Q,y:Et+ot,width:Rt-ot*ht,height:wt-ot}:null!=W&&W.altKey?{x:Q-q,y:Et+ot,width:Rt+2*q,height:wt-2*ot}:{x:Q,y:Et+ot,width:Rt+q,height:wt-ot};break;case"rect-bottom-left":Ct=null!=W&&W.shiftKey&&null!=W&&W.altKey?ht>=1?{x:Q+q,y:Et+q/ht,width:Rt-2*q,height:wt-2*q/ht}:{x:Q-ot*ht,y:Et-ot,width:Rt+2*ot*ht,height:wt+2*ot}:null!=W&&W.shiftKey?ht>=1?{x:Q+q,y:Et,width:Rt-q,height:wt-q/ht}:{x:Q-ot*ht,y:Et,width:Rt+ot*ht,height:wt+ot}:null!=W&&W.altKey?{x:Q+q,y:Et-ot,width:Rt-2*q,height:wt+2*ot}:{x:Q+q,y:Et,width:Rt-q,height:wt+ot};break;case"rect-bottom-right":Ct=null!=W&&W.shiftKey&&null!=W&&W.altKey?ht>=1?{x:Q-q,y:Et-q/ht,width:Rt+2*q,height:wt+2*q/ht}:{x:Q-ot*ht,y:Et-ot,width:Rt+2*ot*ht,height:wt+2*ot}:null!=W&&W.shiftKey?ht>=1?{x:Q,y:Et,width:Rt+q,height:wt+q/ht}:{x:Q,y:Et,width:Rt+ot*ht,height:wt+ot}:null!=W&&W.altKey?{x:Q-q,y:Et-ot,width:Rt+2*q,height:wt+2*ot}:{x:Q,y:Et,width:Rt+q,height:wt+ot};break;case"rect-top":Ct=null!=W&&W.shiftKey?{x:Q+ot/2*ht,y:Et+ot,width:Rt-ot*ht,height:wt-ot}:null!=W&&W.altKey?{x:Q,y:Et+ot,width:Rt,height:wt-2*ot}:{x:Q,y:Et+ot,width:Rt,height:wt-ot};break;case"rect-bottom":Ct=null!=W&&W.shiftKey?{x:Q-ot/2*ht,y:Et,width:Rt+ot*ht,height:wt+ot}:null!=W&&W.altKey?{x:Q,y:Et-ot,width:Rt,height:wt+2*ot}:{x:Q,y:Et,width:Rt,height:wt+ot};break;case"rect-left":Ct=null!=W&&W.shiftKey?{x:Q+q,y:Et+q/2/ht,width:Rt-q,height:wt-q/ht}:null!=W&&W.altKey?{x:Q+q,y:Et,width:Rt-2*q,height:wt}:{x:Q+q,y:Et,width:Rt-q,height:wt};break;case"rect-right":Ct=null!=W&&W.shiftKey?{x:Q,y:Et-q/2/ht,width:Rt+q,height:wt+q/ht}:null!=W&&W.altKey?{x:Q-q,y:Et,width:Rt+2*q,height:wt}:{x:Q,y:Et,width:Rt+q,height:wt};break;default:Ct=d.match(/^point-(\d+)/)?{x:Q,y:Et,width:Rt,height:wt}:{x:Q+q,y:Et+ot,width:Rt,height:wt}}Ct.width<=0&&(Ct.width=1),Ct.height<=0&&(Ct.height=1);let Xt=d.match(/^point-(\d+)/);if(Xt){let Ht=parseInt(Xt[1]);if("number"==typeof Ht){var Zt;Ct.ratios=null==ne?void 0:ne.map((j,c)=>c==Ht?[(0,u.z)(j[0]+(0==Ct.width?0:q/Ct.width),100),(0,u.z)(j[1]+(0==Ct.height?0:ot/Ct.height),100)]:j);let jt=P(Ct.x,Ct.y,Ct.width,Ct.height,null!==(Zt=Ct.ratios)&&void 0!==Zt?Zt:[]),dt=w(jt),qt=B(dt.x,dt.y,dt.width,dt.height,jt);Ct={x:dt.x,y:dt.y,width:dt.width,height:dt.height,ratios:qt}}}Ct.x=(0,u.z)(Ct.x,1),Ct.y=(0,u.z)(Ct.y,1),Ct.width=(0,u.z)(Ct.width,1),Ct.height=(0,u.z)(Ct.height,1),Object.assign(it,Ct),Object.assign(S,(0,O.xW)(F,it,S)),(0,at.tD)(window.document.getElementById(pt),S),(0,at.AE)(z,Y)})(U[0][0],U[0][1],K.x,K.y,s),J=!0},end:(K,U)=>{J&&Mt&&y.L.history.push([{type:"size",from:Mt,to:JSON.parse(JSON.stringify({id:pt,size:it,attribute:S}))}])}})},P=(N,d,Y,z,pt)=>pt.map(F=>[N+Y*F[0],d+z*F[1]]),B=(N,d,Y,z,pt)=>pt.map(F=>[0==Y?0:(0,u.z)((F[0]-N)/Y,100),0==z?0:(0,u.z)((F[1]-d)/z,100)]),w=N=>{let d=[],Y=[];N.map(S=>{d.push(S[0]),Y.push(S[1])});let z=Math.min.apply(null,d),pt=Math.min.apply(null,Y);return{x:z,y:pt,width:Math.max.apply(null,d)-z||1,height:Math.max.apply(null,Y)-pt||1}},T=N=>{N.length>1?(N=>{let d=999999,Y=999999,z=-999999,pt=-999999;N.forEach(S=>{d=Math.min(d,S.size.x),Y=Math.min(Y,S.size.y),z=Math.max(z,S.size.x+S.size.width),pt=Math.max(pt,S.size.y+S.size.height)});let F=(0,at.RY)(C.FL.RESIZE_GROUP,"g"),it=(0,O.CE)(d,Y,z,pt);it.x=(0,u.z)(it.x,100),it.y=(0,u.z)(it.y,100),it.width=(0,u.z)(it.width,100),it.height=(0,u.z)(it.height,100),(0,at.D_)(F,N,it).forEach(S=>{((N,d,Y,z,pt)=>{let F=!1;null==N||N.addEventListener("touchstart",it=>{F=!0,D({touchEvent:it},d,Y,z,pt)}),null==N||N.addEventListener("mousedown",it=>{if(0==it.button){if(F)return void(F=!1);D({mouseEvent:it},d,Y,z,pt)}})})(S.element,S.posType,it,N,F)})})(N):1==N.length&&(N=>{let d=(0,at.RY)(C.FL.RESIZE_GROUP,"g");if(N.length>0){let Y=N[0];(0,at.AE)(d,Y).forEach(z=>{((N,d,Y,z)=>{let pt=!1;null==N||N.addEventListener("touchstart",F=>{pt=!0,G({touchEvent:F},d,Y,z)}),null==N||N.addEventListener("mousedown",F=>{if(0==F.button){if(pt)return void(pt=!1);G({mouseEvent:F},d,Y,z)}})})(z.element,z.posType,Y,d)})}})(N)}},2062:(ce,Ut,b)=>{b.d(Ut,{$:()=>N,t:()=>T});var y=b(4205),O=b(3189),kt=b(2657),at=b(4245),u=b(3289),C=b(3309),k=b(8691),v=b(4907),D=b(2197),x=b(257),V=b(5150),G=b(596),P=b(4537),B=b(2685),w=b(2806);const T=(d,Y,z)=>{var pt;if(Y&&!(null!=z?z:window).document.getElementById(Y))return;if(Y){let it=(null!=z?z:window).document.getElementById(Y);jQuery(it).find("#"+w.FL.BACKGROUND_GROUP).empty();let S=(0,G.RY)(w.FL.BACKGROUND_GROUP,"g",void 0,it);(0,G.I6)(S,d)}else{jQuery(V.L.target).find("#"+w.FL.BACKGROUND_GROUP).empty();let it=(0,G.RY)(w.FL.BACKGROUND_GROUP,"g",void 0,V.L.target);(0,G.I6)(it,d)}let F=(it,S)=>{S=Y&&S?`${Y}-${S}`:null!=Y?Y:S,null==it||it.forEach(Q=>{let Et=Y?`${Y}-${Q.id}`:Q.id;var Rt;if(Q.isdeleted)null===(Rt=(null!=z?z:window).document.getElementById(Et))||void 0===Rt||Rt.remove();else switch(Q.type){case w.hv.GROUP:(0,C.v)(Et,{},S?(null!=z?z:window).document.getElementById(S):null),F(Q.nodes,Q.id);break;case w.hv.CIRCLE:(0,y.K)(Et,{size:Q.size,attribute:Q.attribute},S?(null!=z?z:window).document.getElementById(S):null);break;case w.hv.ELLIPSE:(0,O.W)(Et,{size:Q.size,attribute:Q.attribute},S?(null!=z?z:window).document.getElementById(S):null);break;case w.hv.LINE:(0,u.q)(Et,{size:Q.size,attribute:Q.attribute},S?(null!=z?z:window).document.getElementById(S):null);break;case w.hv.RECT:(0,at.a)(Et,{size:Q.size,attribute:Q.attribute},S?(null!=z?z:window).document.getElementById(S):null);break;case w.hv.POLYGON:(0,kt.u)(Et,{size:Q.size,attribute:Q.attribute},S?(null!=z?z:window).document.getElementById(S):null);break;case w.hv.POLYLINE:(0,B.E)(Et,{size:Q.size,attribute:Q.attribute},S?(null!=z?z:window).document.getElementById(S):null);break;case w.hv.FOREIGNOBJECT:(0,D.$)(Et,{size:Q.size,attribute:Q.attribute,style:Q.style,source:Q.source},S?(null!=z?z:window).document.getElementById(S):null);break;case w.hv.IMAGE:(0,x.B)(Et,{size:Q.size,attribute:Q.attribute,source:Q.source},S?(null!=z?z:window).document.getElementById(S):null);break;case w.hv.TEXT:(0,v.L)(Et,{size:Q.size,attribute:Q.attribute,source:Q.source},S?(null!=z?z:window).document.getElementById(S):null);break;case w.hv.TSPAN:(0,P.M)(Et,{size:Q.size,attribute:Q.attribute,source:Q.source},S?(null!=z?z:window).document.getElementById(S):null);break;case w.hv.PATH:(0,k.X)(Et,{size:Q.size,attribute:Q.attribute},S?(null!=z?z:window).document.getElementById(S):null)}})};F(null==d||null===(pt=d.svg)||void 0===pt?void 0:pt.nodes)},N=(d,Y)=>{var z;if(Y&&!window.document.getElementById(Y))return;let pt=(F,it)=>{it=it?`${Y}-${it}`:Y,null==F||F.forEach(S=>{jQuery("#"+(Y?`${Y}-${S.id}`:S.id)).appendTo(it?window.document.getElementById(it):V.L.target),S.type==w.hv.GROUP&&pt(S.nodes,S.id)})};pt(null==d||null===(z=d.svg)||void 0===z?void 0:z.nodes)}},4205:(ce,Ut,b)=>{b.d(Ut,{K:()=>at});var y=b(5150),O=b(596),kt=b(2806);const at=(u,C,k)=>{let v=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},D=(null==C?void 0:C.attribute)||{fill:y.L.attribute.fill,stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return{nodeId:u,element:(0,O.fn)(u,kt.hv.CIRCLE,"circle",{size:v,attribute:D},k),size:v,attribute:D}}},3189:(ce,Ut,b)=>{b.d(Ut,{W:()=>at});var y=b(5150),O=b(596),kt=b(2806);const at=(u,C,k)=>{let v=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},D=(null==C?void 0:C.attribute)||{fill:y.L.attribute.fill,stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return{nodeId:u,element:(0,O.fn)(u,kt.hv.ELLIPSE,"ellipse",{size:v,attribute:D},k),size:v,attribute:D}}},2197:(ce,Ut,b)=>{b.d(Ut,{$:()=>kt});var y=b(596),O=b(2806);const kt=(at,u,C)=>{let k=(null==u?void 0:u.size)||{x:0,y:0,width:320,height:80},v=(null==u?void 0:u.attribute)||{},D=(null==u?void 0:u.source)||{type:"html",html:{htmlContent:""}},x=(null==u?void 0:u.style)||{};return{nodeId:at,element:(0,y.fn)(at,O.hv.FOREIGNOBJECT,"foreignObject",{size:k,attribute:v,style:x,source:D},C),size:k,attribute:v,style:x,source:D}}},3309:(ce,Ut,b)=>{b.d(Ut,{v:()=>kt});var y=b(596),O=b(2806);const kt=(u,C,k)=>{let v=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},D=(null==C?void 0:C.attribute)||{};return{nodeId:u,element:(0,y.fn)(u,O.hv.GROUP,"g",{size:v,attribute:D},k),size:v,attribute:D}}},257:(ce,Ut,b)=>{b.d(Ut,{B:()=>kt});var y=b(596),O=b(2806);const kt=(at,u,C)=>{let k=(null==u?void 0:u.size)||{x:0,y:0,width:10,height:10},v=(null==u?void 0:u.attribute)||{preserveAspectRatio:"none"},D=(null==u?void 0:u.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:at,element:(0,y.fn)(at,O.hv.IMAGE,"image",{size:k,attribute:v,source:D},C),size:k,attribute:v,source:D}}},3289:(ce,Ut,b)=>{b.d(Ut,{q:()=>at});var y=b(5150),O=b(596),kt=b(2806);const at=(u,C,k)=>{let v=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},D=(null==C?void 0:C.attribute)||{stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth,strokeLinecap:y.L.attribute.strokeLinecap};return{nodeId:u,element:(0,O.fn)(u,kt.hv.LINE,"line",{size:v,attribute:D},k),size:v,attribute:D}}},8691:(ce,Ut,b)=>{b.d(Ut,{X:()=>at});var y=b(5150),O=b(596),kt=b(2806);const at=(u,C,k)=>{let v=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},D=(null==C?void 0:C.attribute)||{stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return{nodeId:u,element:(0,O.fn)(u,kt.hv.PATH,"path",{size:v,attribute:D},k),size:v,attribute:D}}},2657:(ce,Ut,b)=>{b.d(Ut,{u:()=>at});var y=b(5150),O=b(596),kt=b(2806);const at=(u,C,k)=>{let v=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},D=(null==C?void 0:C.attribute)||{fill:y.L.attribute.fill,stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return{nodeId:u,element:(0,O.fn)(u,kt.hv.POLYGON,"polygon",{size:v,attribute:D},k),size:v,attribute:D}}},2685:(ce,Ut,b)=>{b.d(Ut,{E:()=>at});var y=b(5150),O=b(596),kt=b(2806);const at=(u,C,k)=>{let v=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},D=(null==C?void 0:C.attribute)||{fill:y.L.attribute.fill,stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return{nodeId:u,element:(0,O.fn)(u,kt.hv.POLYLINE,"polyline",{size:v,attribute:D},k),size:v,attribute:D}}},4245:(ce,Ut,b)=>{b.d(Ut,{a:()=>at});var y=b(5150),O=b(596),kt=b(2806);const at=(u,C,k)=>{let v=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},D=(null==C?void 0:C.attribute)||{fill:y.L.attribute.fill,stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return{nodeId:u,element:(0,O.fn)(u,kt.hv.RECT,"rect",{size:v,attribute:D},k),size:v,attribute:D}}},4907:(ce,Ut,b)=>{b.d(Ut,{L:()=>at});var y=b(5150),O=b(596),kt=b(2806);const at=(u,C,k)=>{let v=(null==C?void 0:C.size)||{x:0,y:0,width:320,height:80},D=(null==C?void 0:C.attribute)||{fill:y.L.attribute.stroke,fontFamily:y.L.attribute.fontFamily,fontSize:y.L.attribute.fontSize,textLength:y.L.attribute.textLength},x=(null==C?void 0:C.source)||{type:"text",text:{textContent:""}};return{nodeId:u,element:(0,O.fn)(u,kt.hv.TEXT,"text",{size:v,attribute:D,source:x},k),size:v,attribute:D,source:x}}},4537:(ce,Ut,b)=>{b.d(Ut,{M:()=>at});var y=b(5150),O=b(596),kt=b(2806);const at=(u,C,k)=>{let v=(null==C?void 0:C.size)||{x:0,y:0,width:320,height:80},D=(null==C?void 0:C.attribute)||{fill:y.L.attribute.stroke,fontFamily:y.L.attribute.fontFamily,fontSize:y.L.attribute.fontSize,textLength:y.L.attribute.textLength},x=(null==C?void 0:C.source)||{type:"text",text:{textContent:""}};return{nodeId:u,element:(0,O.fn)(u,kt.hv.TSPAN,"tspan",{size:v,attribute:D,source:x},k),size:v,attribute:D,source:x}}},1862:(ce,Ut,b)=>{b.d(Ut,{CE:()=>kt,xW:()=>at});var y=b(4271),O=b(2806);const kt=(C,k,v,D,x)=>{let V={x:Math.min(C,v),y:Math.min(k,D),width:Math.abs(v-C)||1,height:Math.abs(D-k)||1};return null!=x&&x.ratio&&(V.width<=V.height?V.height=V.width*(null==x?void 0:x.ratio):V.width=V.height/(null==x?void 0:x.ratio)),Object.assign(V,{ratios:(null==x?void 0:x.ratios)||[[(C-V.x)/(V.width||1),(k-V.y)/(V.height||1)],[(v-V.x)/(V.width||1),(D-V.y)/(V.height||1)]]}),null!=x&&x.points&&(V.points=null==x?void 0:x.points),V},at=(C,k,v)=>{var D,x=(()=>{switch(C){case O.hv.CIRCLE:return{cx:k.x+k.width/2,cy:k.y+k.height/2,r:Math.min(k.width/2,k.height/2)};case O.hv.ELLIPSE:return{cx:k.x+k.width/2,cy:k.y+k.height/2,rx:k.width/2,ry:k.height/2};case O.hv.LINE:{var V;let T={};return null===(V=k.ratios)||void 0===V||V.forEach((N,d)=>{T[`x${d+1}`]=k.x+k.width*N[0],T[`y${d+1}`]=k.y+k.height*N[1]}),T}case O.hv.RECT:case O.hv.FOREIGNOBJECT:case O.hv.IMAGE:return{x:k.x,y:k.y,width:k.width,height:k.height};case O.hv.TEXT:case O.hv.TSPAN:var G;return{x:k.x,y:k.y+(v.alignmentBaseline||v.dominantBaseline?0:null!==(G=v.fontSize)&&void 0!==G?G:16)};case O.hv.POLYGON:case O.hv.POLYLINE:var P;if(null!==(P=k.ratios)&&void 0!==P&&P.length)return{points:(0,y.n9)(k,k.ratios)};break;case O.hv.PATH:var B,w;if(null!==(B=k.ratioMaps)&&void 0!==B&&B.length)return{d:(0,y.$N)(k,k.ratioMaps)};if(null!==(w=k.points)&&void 0!==w&&w.length)return{d:`M ${(T=k.points)[0][0]} ${T[0][1]} L ${(T.map(N=>[N[0],N[1]])||[]).map(N=>N.join(" ")).join(" ")}`}}var T;return{}})();return k.rotate?(x.transform=`rotate(${k.rotate})`,x.transformOrigin=`${k.x+k.width/2} ${k.y+k.height/2}`):null!==(D=v.transform)&&void 0!==D&&D.match(/^rotate/)&&(v.transform=null,v.transformOrigin=null),x}},4067:(ce,Ut,b)=>{b.d(Ut,{z:()=>y});const y=(O,kt)=>{var at;return kt=null!==(at=kt)&&void 0!==at?at:100,Math.round((O+Number.EPSILON)*kt)/kt}},2021:(ce,Ut,b)=>{b.d(Ut,{$:()=>kt});var y=b(5150),O=b(4067);const kt=at=>(0,O.z)(at/y.L.screen.scale)},900:(ce,Ut,b)=>{b.d(Ut,{E$:()=>k,Nx:()=>D,ZF:()=>C,ei:()=>u,fu:()=>v});var y=b(5150),O=b(596),kt=b(1862),at=b(4067);const u=(x,V)=>{let{id:G,type:P,size:B,attribute:w}=x,T=JSON.parse(JSON.stringify({id:G,size:B,attribute:w}));B.x=(0,at.z)(V||0),Object.assign(w,(0,kt.xW)(P,B,w)),(0,O.tD)(window.document.getElementById(G),w),y.L.history.push([{type:"size",from:T,to:JSON.parse(JSON.stringify({id:G,size:B,attribute:w}))}])},C=(x,V)=>{let{id:G,type:P,size:B,attribute:w}=x,T=JSON.parse(JSON.stringify({id:G,size:B,attribute:w}));B.y=(0,at.z)(V||0),Object.assign(w,(0,kt.xW)(P,B,w)),(0,O.tD)(window.document.getElementById(G),w),y.L.history.push([{type:"size",from:T,to:JSON.parse(JSON.stringify({id:G,size:B,attribute:w}))}])},k=(x,V,G)=>{let{id:P,type:B,size:w,attribute:T}=x;V<=0&&(V=1);let N=JSON.parse(JSON.stringify({id:P,size:w,attribute:T}));G&&(w.height=(0,at.z)(V*w.height/(w.width||1))),w.width=(0,at.z)(V),Object.assign(T,(0,kt.xW)(B,w,T)),(0,O.tD)(window.document.getElementById(P),T),y.L.history.push([{type:"size",from:N,to:JSON.parse(JSON.stringify({id:P,size:w,attribute:T}))}])},v=(x,V,G)=>{let{id:P,type:B,size:w,attribute:T}=x;V<=0&&(V=1);let N=JSON.parse(JSON.stringify({id:P,size:w,attribute:T}));G&&(w.width=(0,at.z)(V*w.width/(w.height||1))),w.height=(0,at.z)(V),Object.assign(T,(0,kt.xW)(B,w,T)),(0,O.tD)(window.document.getElementById(P),T),y.L.history.push([{type:"size",from:N,to:JSON.parse(JSON.stringify({id:P,size:w,attribute:T}))}])},D=(x,V)=>{let{id:G,type:P,size:B,attribute:w}=x,T=JSON.parse(JSON.stringify({id:G,size:B,attribute:w}));B.rotate="number"==typeof V?(0,at.z)(V,100):void 0,Object.assign(w,(0,kt.xW)(P,B,w)),(0,O.tD)(window.document.getElementById(G),w),y.L.history.push([{type:"size",from:T,to:JSON.parse(JSON.stringify({id:G,size:B,attribute:w}))}])}},568:(ce,Ut,b)=>{b.d(Ut,{$x:()=>C,SF:()=>k,T1:()=>G,_o:()=>u,kT:()=>x,r4:()=>v,rI:()=>kt,sm:()=>D,vx:()=>P,xO:()=>at});var y=b(5150),O=b(596);const kt=(B,w,T)=>{var N;let{id:d,type:Y,source:z}=B;w=null===(N=w)||void 0===N?void 0:N.replace(/<[^>]+>/g,"");let pt=JSON.parse(JSON.stringify({id:d,type:Y,source:z}));var F,it;if(z)if(z.text){var Et,Rt;z.text.textContent=w,z.text.variableKeywords=null!==(Et=(null!==(Rt=w)&&void 0!==Rt?Rt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Et?Et:[]}else{var S,Q;z.text={textContent:w,variableKeywords:null!==(S=(null!==(Q=w)&&void 0!==Q?Q:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==S?S:[]}}else z={text:{textContent:w,variableKeywords:null!==(F=(null!==(it=w)&&void 0!==it?it:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==F?F:[]}};T||(0,O.KG)(window.document.getElementById(d),Y,z),y.L.history.push([{type:"source",from:pt,to:JSON.parse(JSON.stringify({id:d,type:Y,source:z}))}])},at=(B,w,T)=>{var N;let{id:d,type:Y,source:z}=B,pt=JSON.parse(JSON.stringify({id:d,type:Y,source:z})),F=S=>{var Q;return null!==(Q=(null!=S?S:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Q?Q:[]},it=S=>{var Q;return(null!==(Q=(null!=S?S:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==Q?Q:[]).filter((Rt,wt,ne)=>ne.indexOf(Rt)==wt)};z?z.html?(z.html.htmlContent=w,z.html.variableKeywords=F(w),z.html.fillKeywords=it(w)):z.html={htmlContent:w,variableKeywords:F(w),fillKeywords:it(w)}:z={html:{htmlContent:w,variableKeywords:F(w),fillKeywords:it(w)}},"fill"==(null===(N=z.test)||void 0===N?void 0:N.type)&&(z.test.fill=it(w).map(S=>{var Q,Et;return{key:S,value:null!==(Q=null===(Et=z)||void 0===Et||null===(Et=Et.test)||void 0===Et||null===(Et=Et.fill)||void 0===Et||null===(Et=Et.find(Rt=>Rt.key==S))||void 0===Et?void 0:Et.value)&&void 0!==Q?Q:[]}})),T||(0,O.KG)(window.document.getElementById(d),Y,z),y.L.history.push([{type:"source",from:pt,to:JSON.parse(JSON.stringify({id:d,type:Y,source:z}))}])},u=(B,w)=>{let{id:T,type:N,source:d}=B,Y=JSON.parse(JSON.stringify({id:T,type:N,source:d}));d?d.link?(d.link.url=w.url,d.link.title=w.title,d.link.description=w.description):d.link=w:d={link:w},(0,O.KG)(window.document.getElementById(T),N,d),y.L.history.push([{type:"source",from:Y,to:JSON.parse(JSON.stringify({id:T,type:N,source:d}))}])},C=(B,w)=>{let{id:T,type:N,source:d}=B,Y=JSON.parse(JSON.stringify({id:T,type:N,source:d}));d?d.image?(d.image.url=null==w?void 0:w.url,d.image.path=null==w?void 0:w.path,d.image.name=null==w?void 0:w.name,d.image.base64=void 0):d.image=w:d={image:w},(0,O.KG)(window.document.getElementById(T),N,d),y.L.history.push([{type:"source",from:Y,to:JSON.parse(JSON.stringify({id:T,type:N,source:d}))}])},k=(B,w)=>{let{id:T,type:N,source:d}=B,Y=JSON.parse(JSON.stringify({id:T,type:N,source:d}));d?d.audio?(d.audio.url=w.url,d.audio.path=w.path,d.audio.name=w.name):d.audio=w:d={audio:w},(0,O.KG)(window.document.getElementById(T),N,d),y.L.history.push([{type:"source",from:Y,to:JSON.parse(JSON.stringify({id:T,type:N,source:d}))}])},v=(B,w)=>{let{id:T,type:N,source:d}=B,Y=JSON.parse(JSON.stringify({id:T,type:N,source:d}));d?d.video?(d.video.url=w.url,d.video.path=w.path,d.video.name=w.name):d.video=w:d={video:w},(0,O.KG)(window.document.getElementById(T),N,d),y.L.history.push([{type:"source",from:Y,to:JSON.parse(JSON.stringify({id:T,type:N,source:d}))}])},D=(B,w)=>{let{id:T,type:N,source:d}=B,Y=JSON.parse(JSON.stringify({id:T,type:N,source:d}));d?d.file?(d.file.url=w.url,d.file.path=w.path,d.file.name=w.name):d.file=w:d={file:w},(0,O.KG)(window.document.getElementById(T),N,d),y.L.history.push([{type:"source",from:Y,to:JSON.parse(JSON.stringify({id:T,type:N,source:d}))}])},x=(B,w)=>{let{id:T,type:N,source:d}=B,Y=JSON.parse(JSON.stringify({id:T,type:N,source:d}));d?d.iframe?(d.iframe.url=null==w?void 0:w.url,d.iframe.path=null==w?void 0:w.path,d.iframe.name=null==w?void 0:w.name):d.iframe=w:d={iframe:w},(0,O.KG)(window.document.getElementById(T),N,d),y.L.history.push([{type:"source",from:Y,to:JSON.parse(JSON.stringify({id:T,type:N,source:d}))}])},G=(B,w)=>{let{id:T,type:N,source:d}=B,Y=JSON.parse(JSON.stringify({id:T,type:N,source:d}));d?d.input?d.input.placeholder=w:d.input={placeholder:w}:d={input:{placeholder:w}},(0,O.KG)(window.document.getElementById(T),N,d),y.L.history.push([{type:"source",from:Y,to:JSON.parse(JSON.stringify({id:T,type:N,source:d}))}])},P=(B,w)=>{let{id:T,type:N,source:d}=B,Y=JSON.parse(JSON.stringify({id:T,type:N,source:d}));d?d.embed?(d.embed.type=null==w?void 0:w.type,d.embed.oss=null==w?void 0:w.oss,d.embed.name=null==w?void 0:w.name,d.embed.path=null==w?void 0:w.path,d.embed.url=null==w?void 0:w.url):d.embed=w:d={embed:w},(0,O.KG)(window.document.getElementById(T),N,d),y.L.history.push([{type:"source",from:Y,to:JSON.parse(JSON.stringify({id:T,type:N,source:d}))}])}},5195:(ce,Ut,b)=>{b.d(Ut,{I:()=>C});var y=b(2806),O=b(5150);class kt{constructor(v){this._points=[],this._options=v}start(v){this._points.length=0,this._points.push([v.x,v.y]),this._options.start(v)}move(v,D){this._points.push([v.x,v.y]),this._options.move(v,this._points,D)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(v=this._points[0])[0],y:v[1]}:{x:0,y:0};var v}get offsetLast(){return this._points.length>=1?{x:(v=this._points[this._points.length-1])[0],y:v[1]}:{x:0,y:0};var v}}var at=b(2978);const C=(k,v,D,x,V)=>{var G,P,B;let w=null,T=0,N=0;k.mouseEvent?(w=k.mouseEvent.target,T=k.mouseEvent.offsetX,N=k.mouseEvent.offsetY):k.touchEvent&&(w=k.touchEvent.target,k.touchEvent.touches.length&&(T=k.touchEvent.touches[0].clientX,N=k.touchEvent.touches[0].clientY));let d=null!=D?D:O.L.screen.scale,Y=null!=x?x:O.L.screen.dislocation,z=null!=V?V:O.L.screen.offset,pt=()=>{};var F=new kt({start:null!==(G=null==v?void 0:v.start)&&void 0!==G?G:pt,move:null!==(P=null==v?void 0:v.move)&&void 0!==P?P:pt,end:null!==(B=null==v?void 0:v.end)&&void 0!==B?B:pt});k.mouseEvent?F.start((0,at.D)({x:T,y:N},d,Y,{x:0,y:0})):k.touchEvent&&F.start((0,at.D)({x:T,y:N},d,Y,z));let it=ht=>{F.move((0,at.D)({x:ht.clientX,y:ht.clientY},d,Y,z),{ctrlKey:ht.ctrlKey,shiftKey:ht.shiftKey,altKey:ht.altKey})},S=ht=>{F.end(),[y.PS.SHAPE,y.PS.FOREIGNOBJECT,y.PS.IMAGE,y.PS.TEXT].includes(O.L.pointer.pointer_type)&&(ht.shiftKey||(O.L.pointer.pointer_type=y.PS.POINTER))},Q=ht=>{ht.touches.length&&it({clientX:ht.touches[0].clientX,clientY:ht.touches[0].clientY,ctrlKey:ht.ctrlKey,shiftKey:ht.shiftKey,altKey:ht.altKey})},Et=ht=>{S({ctrlKey:ht.ctrlKey,shiftKey:ht.shiftKey,altKey:ht.altKey}),window.removeEventListener("touchmove",Q,!1),window.removeEventListener("touchend",Et,!1)},Rt=ht=>{0==ht.button&&it({clientX:ht.clientX,clientY:ht.clientY,ctrlKey:ht.ctrlKey,shiftKey:ht.shiftKey,altKey:ht.altKey})},wt=ht=>{0==ht.button&&(S({shiftKey:ht.shiftKey,ctrlKey:ht.ctrlKey,altKey:ht.altKey}),window.removeEventListener("mousemove",Rt,!1),window.removeEventListener("mouseup",wt,!1))};if(k.mouseEvent)window.addEventListener("mousemove",Rt,!1),window.addEventListener("mouseup",wt,!1);else if(k.touchEvent){var ne;window.addEventListener("touchmove",Q,!1),window.addEventListener("touchend",Et,!1),null===(ne=w)||void 0===ne||ne.addEventListener("touchmove",function(ht){ht.preventDefault()})}}},2978:(ce,Ut,b)=>{b.d(Ut,{D:()=>O});var y=b(4067);const O=(kt,at,u,C)=>(kt.x-=C.x,kt.y-=C.y,kt.x/=at,kt.y/=at,kt.x-=u.x,kt.y-=u.y,kt.x=(0,y.z)(kt.x),kt.y=(0,y.z)(kt.y),kt)},9410:(ce,Ut,b)=>{b.d(Ut,{J:()=>dt,I:()=>qt});var y=b(5150),O=b(6589),kt=b(9686),at=b(9349),u=b(8077),C=b(2475),v=b(4907),D=b(3309),x=b(2806);var w=b(8358),T=b(257),N=b(4067);const d=(j,c,H)=>{var st,gt,tt,L;let rt=1,ut=new Image;ut.onload=()=>{var Lt,Tt,Nt,bt;rt=(0,N.z)(ut.naturalWidth/ut.naturalHeight,100);let _t=0,At=0,zt=0,Bt=0;var Yt,$t,oe,re;rt>=1?(zt=Math.min(ut.naturalWidth,null!==(Yt=null===($t=dt.slide.svg)||void 0===$t||null===($t=$t.viewBox)||void 0===$t?void 0:$t.width)&&void 0!==Yt?Yt:0),Bt=zt/rt):(Bt=Math.min(ut.naturalHeight,null!==(oe=null===(re=dt.slide.svg)||void 0===re||null===(re=re.viewBox)||void 0===re?void 0:re.height)&&void 0!==oe?oe:0),zt=Bt/rt),_t=((null!==(Lt=null===(Tt=dt.slide.svg)||void 0===Tt||null===(Tt=Tt.viewBox)||void 0===Tt?void 0:Tt.width)&&void 0!==Lt?Lt:0)-zt)/2,At=((null!==(Nt=null===(bt=dt.slide.svg)||void 0===bt||null===(bt=bt.viewBox)||void 0===bt?void 0:bt.height)&&void 0!==Nt?Nt:0)-Bt)/2,c.size={x:_t,y:At,width:zt,height:Bt},Y(c,H)},ut.onerror=Lt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(c.source)}`,Lt)},ut.src=(null!==(st=c.source)&&void 0!==st&&st.path?(null===(gt=y.L.config)||void 0===gt?void 0:gt.readfileuploadurl)+(null===(tt=c.source)||void 0===tt?void 0:tt.path):null===(L=c.source)||void 0===L?void 0:L.url)||""},Y=(j,c)=>{if(j.slideStatus!=dt.slideStatus)return void c();let{element:H}=(0,T.B)(Math.ceil(1e9*Math.random()),{size:j.size,source:{type:"image",image:null==j?void 0:j.source}});setTimeout(()=>{null==H||H.remove(),c()},3e3)};var z=b(596);const pt=(j,c,H)=>{var st,gt,tt,L;let rt=new Image;rt.onload=()=>{F(j,{width:rt.naturalWidth,height:rt.naturalHeight},c,H)},rt.onerror=ut=>{console.error(`ImgSrc load failed -> ${JSON.stringify(c.source)}`,ut),H()},rt.src=(null!==(st=c.source)&&void 0!==st&&st.path?(null===(gt=y.L.config)||void 0===gt?void 0:gt.readfileuploadurl)+(null===(tt=c.source)||void 0===tt?void 0:tt.path):null===(L=c.source)||void 0===L?void 0:L.url)||""},F=(j,c,H,st)=>{if(H.slideStatus!=dt.slideStatus)return void st();let gt=(0,N.z)(c.width/c.height,100),tt=0,L=0,rt=0,ut=0;gt>=1?(rt=c.width,rt=Math.max(rt,40),rt=Math.min(rt,40),ut=rt/gt):(ut=c.height,ut=Math.max(ut,40),ut=Math.min(ut,40),rt=ut/gt);let{size:Nt}=j;tt=Nt.x+Nt.width-rt/2,L=Nt.y-ut/2;let bt=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,T.B)(`icon-${j.id}`,{size:{x:tt,y:L,width:rt,height:ut},source:{type:"image",image:null==H?void 0:H.source}},bt),setTimeout(()=>{st()},3e3)},it=(j,c,H)=>{var st,gt,tt,L,rt,ut,Lt;if(c.slideStatus!=dt.slideStatus)return void H();if(!(null!==(st=c.source)&&void 0!==st&&st.path||null!==(gt=c.source)&&void 0!==gt&&gt.url))return console.warn(`${j.id} -> audio no source!`),void H();var Tt=jQuery("#"+j.id);let Nt=null!==(tt=c.iteration)&&void 0!==tt?tt:0;if(Nt<0&&(H(),H=function(){}),!(Tt.data("audio-running")&&Nt<0)){Tt.data("audio-running",!0);var bt=new Audio;return bt.autoplay=!0,bt.loop=0!=Nt,bt.preload="auto",bt.controls=!0,bt.setAttributeNode(document.createAttribute("playsinline")),bt.addEventListener("canplay",function(){var _t=bt.play();_t&&_t.then(function(At){Tt.data("audio-running",!0)}).catch(function(At){Tt.data("audio-running",!1),c.slideStatus===dt.slideStatus&&H()})}),bt.addEventListener("timeupdate",function(){var At;c.slideStatus!==dt.slideStatus&&((At=this).pause(),At.remove(),Tt.data("audio-running",!1))}),bt.addEventListener("canplaythrough",function(){this.loop&&(Nt>0?Nt--:0==Nt&&(this.loop=!1))}),bt.addEventListener("play",function(){}),bt.addEventListener("pause",function(){}),bt.addEventListener("ended",function(){this.remove(),Tt.data("audio-running",!1),c.slideStatus===dt.slideStatus&&H()}),bt.onerror=function(){this.remove(),Tt.data("audio-running",!1),c.slideStatus===dt.slideStatus&&H()},bt.src=(null!==(L=c.source)&&void 0!==L&&L.path?(null===(rt=y.L.config)||void 0===rt?void 0:rt.readfileuploadurl)+(null===(ut=c.source)||void 0===ut?void 0:ut.path):null===(Lt=c.source)||void 0===Lt?void 0:Lt.url)||"",bt}};var S=b(9933);const Ct=(j,c)=>{var H;null===(H=c.test)||void 0===H||null===(H=H.answer)||void 0===H||null===(H=H.matching)||void 0===H||H.filter(st=>st.id==j.id).forEach(st=>st.value=""),jQuery(`#node-${j.id}`).remove()},Mt=(j,c,H,st,gt,tt)=>{var L,rt,ut,Lt,Tt,Nt,bt,_t;gt.iscorrect?(null!==(L=c.test)&&void 0!==L&&null!==(L=L.audiotrue)&&void 0!==L&&L.path&&it(j,{source:(0,S.U)(null===(ut=c.test)||void 0===ut?void 0:ut.audiotrue),iteration:0,nodeStatus:H,slideStatus:st},tt),null!==(rt=c.test)&&void 0!==rt&&null!==(rt=rt.effecttrue)&&void 0!==rt&&rt.path&&d(0,{source:(0,S.U)(null===(Lt=c.test)||void 0===Lt?void 0:Lt.effecttrue),iteration:0,nodeStatus:H,slideStatus:st},tt)):(null!==(Tt=c.test)&&void 0!==Tt&&null!==(Tt=Tt.audiofalse)&&void 0!==Tt&&Tt.path&&it(j,{source:(0,S.U)(null===(bt=c.test)||void 0===bt?void 0:bt.audiofalse),iteration:0,nodeStatus:H,slideStatus:st},tt),null!==(Nt=c.test)&&void 0!==Nt&&null!==(Nt=Nt.effectfalse)&&void 0!==Nt&&Nt.path&&d(0,{source:(0,S.U)(null===(_t=c.test)||void 0===_t?void 0:_t.effectfalse),iteration:0,nodeStatus:H,slideStatus:st},tt));Pt(c,H,st,tt)},Pt=(j,c,H,st)=>{var gt;switch(null===(gt=j.test)||void 0===gt?void 0:gt.type){case"truefalse":{var tt,L;let{value:re,iscorrect:ue}=null!==(tt=null==j||null===(L=j.test)||void 0===L||null===(L=L.answer)||void 0===L?void 0:L.truefalse)&&void 0!==tt?tt:{};if(re){let _e=dt.findNode(re);var rt,ut,Lt,Tt;ue?null!==(rt=j.test)&&void 0!==rt&&null!==(rt=rt.icontrue)&&void 0!==rt&&rt.path&&pt(_e,{source:(0,S.U)(null===(ut=j.test)||void 0===ut?void 0:ut.icontrue),iteration:0,nodeStatus:c,slideStatus:H},st):null!==(Lt=j.test)&&void 0!==Lt&&null!==(Lt=Lt.iconfalse)&&void 0!==Lt&&Lt.path&&pt(_e,{source:(0,S.U)(null===(Tt=j.test)||void 0===Tt?void 0:Tt.iconfalse),iteration:0,nodeStatus:c,slideStatus:H},st)}break}case"singlechoice":{var Nt,bt;let{value:re,iscorrect:ue}=null!==(Nt=null==j||null===(bt=j.test)||void 0===bt||null===(bt=bt.answer)||void 0===bt?void 0:bt.singlechoice)&&void 0!==Nt?Nt:{};if(re){let _e=dt.findNode(re);var _t,At,zt,Bt;ue?null!==(_t=j.test)&&void 0!==_t&&null!==(_t=_t.icontrue)&&void 0!==_t&&_t.path&&pt(_e,{source:(0,S.U)(null===(At=j.test)||void 0===At?void 0:At.icontrue),iteration:0,nodeStatus:c,slideStatus:H},st):null!==(zt=j.test)&&void 0!==zt&&null!==(zt=zt.iconfalse)&&void 0!==zt&&zt.path&&pt(_e,{source:(0,S.U)(null===(Bt=j.test)||void 0===Bt?void 0:Bt.iconfalse),iteration:0,nodeStatus:c,slideStatus:H},st)}break}case"multichoice":var Yt;null==j||null===(Yt=j.test)||void 0===Yt||null===(Yt=Yt.answer)||void 0===Yt||null===(Yt=Yt.multichoice)||void 0===Yt||Yt.forEach(re=>{let{value:ue,iscorrect:_e}=re;if(ue){let Ae=dt.findNode(ue);var ze,be,Le,Oe;_e?null!==(ze=j.test)&&void 0!==ze&&null!==(ze=ze.icontrue)&&void 0!==ze&&ze.path&&pt(Ae,{source:(0,S.U)(null===(be=j.test)||void 0===be?void 0:be.icontrue),iteration:0,nodeStatus:c,slideStatus:H},st):null!==(Le=j.test)&&void 0!==Le&&null!==(Le=Le.iconfalse)&&void 0!==Le&&Le.path&&pt(Ae,{source:(0,S.U)(null===(Oe=j.test)||void 0===Oe?void 0:Oe.iconfalse),iteration:0,nodeStatus:c,slideStatus:H},st)}});break;case"fill":var $t;null==j||null===($t=j.test)||void 0===$t||null===($t=$t.answer)||void 0===$t||null===($t=$t.fill)||void 0===$t||$t.forEach(re=>{let{id:ue,value:ze,iscorrect:be}=re;if(ze){let Ve=dt.findNode(ue);var Le,Oe,Ae,We;be?null!==(Le=j.test)&&void 0!==Le&&null!==(Le=Le.icontrue)&&void 0!==Le&&Le.path&&pt(Ve,{source:(0,S.U)(null===(Oe=j.test)||void 0===Oe?void 0:Oe.icontrue),iteration:0,nodeStatus:c,slideStatus:H},st):null!==(Ae=j.test)&&void 0!==Ae&&null!==(Ae=Ae.iconfalse)&&void 0!==Ae&&Ae.path&&pt(Ve,{source:(0,S.U)(null===(We=j.test)||void 0===We?void 0:We.iconfalse),iteration:0,nodeStatus:c,slideStatus:H},st)}});break;case"matching":var oe;null==j||null===(oe=j.test)||void 0===oe||null===(oe=oe.answer)||void 0===oe||null===(oe=oe.matching)||void 0===oe||oe.forEach(re=>{let{id:ue,key:_e,value:ze}=re;if(ze){let We=dt.findNode(ue);var be,Le,Oe,Ae;_e==ze?null!==(be=j.test)&&void 0!==be&&null!==(be=be.icontrue)&&void 0!==be&&be.path&&pt(We,{source:(0,S.U)(null===(Le=j.test)||void 0===Le?void 0:Le.icontrue),iteration:0,nodeStatus:c,slideStatus:H},st):null!==(Oe=j.test)&&void 0!==Oe&&null!==(Oe=Oe.iconfalse)&&void 0!==Oe&&Oe.path&&pt(We,{source:(0,S.U)(null===(Ae=j.test)||void 0===Ae?void 0:Ae.iconfalse),iteration:0,nodeStatus:c,slideStatus:H},st)}})}},ct=(j,c,H,st)=>{var gt,tt,L,rt,ut,Lt,Nt,_t,bt;null!==(gt=c.animate)&&void 0!==gt&&gt.value&&(0,w.a)(c,H.nodeStatus,H.slideStatus),null!==(tt=c.interactive)&&void 0!==tt&&tt.show?(console.log(`node(${c.id}) | nodeStatus(${H.nodeStatus}) | slideStatus(${H.slideStatus}) | show`),((j,c,H,st)=>{var gt,tt,L;let rt={total:0,counter:0},{triggershow:ut,triggerrun:Lt,triggerhide:Tt,action:Nt,audio:bt}=null!==(gt=null===(tt=j.interactive)||void 0===tt?void 0:tt.show)&&void 0!==gt?gt:{};if(console.log(`node(${j.id}) | nodeStatus(${c}) | slideStatus(${H}) | show`),ut){let{id:At,ids:zt,time:Bt,async:Yt}=ut;"asynctrue"==Yt?setTimeout(()=>{(0,C.GD)({id:At,ids:zt,nodeStatus:c,slideStatus:H})}):"time"==Yt&&setTimeout(()=>{(0,C.GD)({id:At,ids:zt,nodeStatus:c,slideStatus:H})},1e3*(null!=Bt?Bt:0))}if(Lt){let{id:At,ids:zt,time:Bt,async:Yt}=Lt;"asynctrue"==Yt?setTimeout(()=>{(0,C.MF)({id:At,ids:zt,nodeStatus:c,slideStatus:H})}):"time"==Yt&&setTimeout(()=>{(0,C.MF)({id:At,ids:zt,nodeStatus:c,slideStatus:H})},1e3*(null!=Bt?Bt:0))}if(Tt){let{id:At,ids:zt,time:Bt,async:Yt}=Tt;"asynctrue"==Yt?setTimeout(()=>{(0,C.vi)({id:At,ids:zt,nodeStatus:c,slideStatus:H})}):"time"==Yt&&setTimeout(()=>{(0,C.vi)({id:At,ids:zt,nodeStatus:c,slideStatus:H})},1e3*(null!=Bt?Bt:0))}let _t=()=>{setTimeout(()=>{if(rt.counter>=rt.total){if(st&&st(),ut){let{id:At,ids:zt,async:Bt}=ut;(!Bt||"asyncfalse"==Bt)&&(0,C.GD)({id:At,ids:zt,nodeStatus:c,slideStatus:H})}if(Lt){let{id:At,ids:zt,async:Bt}=Lt;(!Bt||"asyncfalse"==Bt)&&(0,C.MF)({id:At,ids:zt,nodeStatus:c,slideStatus:H})}if(Tt){let{id:At,ids:zt,async:Bt}=Tt;(!Bt||"asyncfalse"==Bt)&&(0,C.vi)({id:At,ids:zt,nodeStatus:c,slideStatus:H})}}})};if(null!=Nt&&Nt.value){rt.total+=1;let At=()=>{rt.counter+=1,_t()};switch(null==Nt?void 0:Nt.value){case"hide":jQuery("#"+j.id).addClass("hide"),At();break;case"points":{let{points:zt,time:Bt,iteration:Yt,finish:$t}=Nt;(0,at.c)(j.id,{node:j,points:zt,time:Bt,iteration:Yt,finish:$t,nodeStatus:c,slideStatus:H},At);break}default:{let{value:zt,time:Bt,iteration:Yt,finish:$t}=Nt;(0,kt.h)(j.id,{node:j,value:zt,time:Bt,iteration:Yt,finish:$t,nodeStatus:c,slideStatus:H},At);break}}}if(null!=bt&&null!==(L=bt.source)&&void 0!==L&&L.path){rt.total+=1;let At=()=>{rt.counter+=1,_t()},zt=(0,u.d)(j.id,bt,rt,{nodeStatus:c,slideStatus:H},At);-1==(null==bt?void 0:bt.iteration)&&jQuery("#"+j.id).click(Bt=>{Bt.preventDefault(),zt&&(zt.volume=zt.volume>=1?0:zt.volume+.25),console.log(null==zt?void 0:zt.volume)})}rt.total||_t()})(c,H.nodeStatus,H.slideStatus,st)):st&&st(),null!==(L=c.interactive)&&void 0!==L&&L.click&&(_t=null===(Nt=c.interactive)||void 0===Nt?void 0:Nt.click,Object.keys(null!=_t?_t:{}).map(zt=>_t[zt]?1:0).includes(1)&&jQuery("#"+c.id).addClass("interactive-click"),jQuery("#"+c.id).click(_t=>{_t.preventDefault(),H.nodeStatus=dt.refreshNodeStatus(),console.log(`node(${c.id}) | nodeStatus(${H.nodeStatus}) | slideStatus(${H.slideStatus}) | click`),(0,O.J)(c,H.nodeStatus,H.slideStatus)})),null!==(rt=c.variable)&&void 0!==rt&&rt.input&&jQuery("#"+c.id).on("change","input,textarea",_t=>{_t.preventDefault(),((j,c,H)=>{var st,gt;y.L.variable.setValue(null!==(st=null===(gt=c.variable)||void 0===gt||null===(gt=gt.input)||void 0===gt?void 0:gt.variable)&&void 0!==st?st:"",j),(j=>{var c;let H=(st,gt)=>{null==st||st.forEach(tt=>{switch(tt.type){case x.hv.GROUP:(0,D.v)(tt.id,{},gt?window.document.getElementById(gt):null),H(tt.nodes,tt.id);break;case x.hv.POLYGON:break;case x.hv.TEXT:(0,v.L)(tt.id,{size:tt.size,attribute:tt.attribute,source:tt.source},gt?window.document.getElementById(gt):null)}})};H(null===(c=j.svg)||void 0===c?void 0:c.nodes)})(H)})(_t.target.value,c,j)}),null!==(ut=c.variable)&&void 0!==ut&&ut.click&&(null!==(bt=c.variable)&&void 0!==bt&&null!==(bt=bt.click)&&void 0!==bt&&bt.variable&&jQuery("#"+c.id).addClass("variable-click"),jQuery("#"+c.id).click(_t=>{_t.preventDefault(),((j,c)=>{var H;y.L.variable.setValueOperator(null===(H=j.variable)||void 0===H?void 0:H.click),(j=>{var c;let H=(st,gt)=>{null==st||st.forEach(tt=>{switch(tt.type){case x.hv.GROUP:(0,D.v)(tt.id,{},gt?window.document.getElementById(gt):null),H(tt.nodes,tt.id);break;case x.hv.POLYGON:break;case x.hv.TEXT:(0,v.L)(tt.id,{size:tt.size,attribute:tt.attribute,source:tt.source},gt?window.document.getElementById(gt):null)}})};H(null===(c=j.svg)||void 0===c?void 0:c.nodes)})(c)})(c,j)})),"test"==(null===(Lt=c.source)||void 0===Lt?void 0:Lt.type)&&((j,c)=>{var H;let st=()=>{};switch(null===(H=j.source)||void 0===H||null===(H=H.test)||void 0===H?void 0:H.type){case"truefalse":{jQuery("#"+j.id).click(L=>{L.preventDefault(),((j,c,H,st,gt)=>{var tt,L;let rt=null===(tt=j.source)||void 0===tt||null===(tt=tt.test)||void 0===tt||null===(tt=tt.truefalse)||void 0===tt?void 0:tt.iscorrect;c.test?c.test.answer?c.test.answer.truefalse={value:j.id,iscorrect:rt}:c.test.answer={truefalse:{value:j.id,iscorrect:rt}}:c.test={answer:{truefalse:{value:j.id,iscorrect:rt}}},null!==(L=c.svg)&&void 0!==L&&L.nodes.find(Lt=>{var Tt;return"submit"==(null===(Tt=Lt.source)||void 0===Tt||null===(Tt=Tt.test)||void 0===Tt?void 0:Tt.type)})||Mt(j,c,H,st,{iscorrect:rt},gt);let ut=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(ut,c,j)})(j,c,dt.nodeStatus,dt.slideStatus,st)});let tt=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(tt,c,j);break}case"singlechoice":{jQuery("#"+j.id).click(L=>{L.preventDefault(),((j,c,H,st,gt)=>{var tt,L;let rt=null===(tt=j.source)||void 0===tt||null===(tt=tt.test)||void 0===tt||null===(tt=tt.singlechoice)||void 0===tt?void 0:tt.iscorrect;c.test?c.test.answer?c.test.answer.singlechoice={value:j.id,iscorrect:rt}:c.test.answer={singlechoice:{value:j.id,iscorrect:rt}}:c.test={answer:{singlechoice:{value:j.id,iscorrect:rt}}},null!==(L=c.svg)&&void 0!==L&&L.nodes.find(Lt=>{var Tt;return"submit"==(null===(Tt=Lt.source)||void 0===Tt||null===(Tt=Tt.test)||void 0===Tt?void 0:Tt.type)})||Mt(j,c,H,st,{iscorrect:rt},gt);let ut=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(ut,c,j)})(j,c,dt.nodeStatus,dt.slideStatus,st)});let tt=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(tt,c,j);break}case"multichoice":{jQuery("#"+j.id).click(L=>{L.preventDefault(),((j,c,H,st,gt)=>{var tt,L;let rt=null===(tt=j.source)||void 0===tt||null===(tt=tt.test)||void 0===tt||null===(tt=tt.multichoice)||void 0===tt?void 0:tt.iscorrect;c.test?c.test.answer?c.test.answer.multichoice?c.test.answer.multichoice.find(Lt=>Lt.value==j.id)?c.test.answer.multichoice=c.test.answer.multichoice.filter(Lt=>Lt.value!=j.id):c.test.answer.multichoice.push({value:j.id,iscorrect:rt}):c.test.answer.multichoice=[{value:j.id,iscorrect:rt}]:c.test.answer={multichoice:[{value:j.id,iscorrect:rt}]}:c.test={answer:{multichoice:[{value:j.id,iscorrect:rt}]}},null!==(L=c.svg)&&void 0!==L&&L.nodes.find(Lt=>{var Tt;return"submit"==(null===(Tt=Lt.source)||void 0===Tt||null===(Tt=Tt.test)||void 0===Tt?void 0:Tt.type)})||Mt(j,c,H,st,{iscorrect:rt},gt);let ut=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(ut,c,j)})(j,c,dt.nodeStatus,dt.slideStatus,st)});let tt=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(tt,c,j);break}case"fill":{var gt;jQuery("#"+j.id).on("keyup",'input[type="text"]',L=>{var rt;let ut=jQuery("<div/>").css({"font-size":jQuery(L.target).css("font-size"),visibility:"hidden",float:"left"}).text(L.target.value).appendTo(window.document.body);jQuery(L.target).css({width:(null!==(rt=ut.width())&&void 0!==rt?rt:0)+30})}).on("keypress",'input[type="text"]',L=>{13===(L.keyCode||L.charCode||L.which)&&(L.preventDefault(),L.stopPropagation(),jQuery(L.target).blur())}).on("change",'input[type="text"]',L=>{var rt,ut;let Lt=null===(rt=L.target)||void 0===rt?void 0:rt.getAttribute("data-key"),Tt=null===(ut=L.target)||void 0===ut||null===(ut=ut.value)||void 0===ut?void 0:ut.trim();jQuery("#"+j.id).find(`input[type="text"][data-key="${Lt}"]`).val(Tt),((j,c,H,st,gt,tt)=>{var L,rt,ut,Lt;let{value:Tt}=null!==(L=null===(rt=j.source)||void 0===rt||null===(rt=rt.test)||void 0===rt||null===(rt=rt.fill)||void 0===rt?void 0:rt.find(_t=>_t.key==`[[${gt.key}]]`))&&void 0!==L?L:{},Nt=Tt&&Tt.map(_t=>null==_t?void 0:_t.toLocaleLowerCase()).includes(null===(ut=gt.value)||void 0===ut?void 0:ut.toLocaleLowerCase());gt.iscorrect=Nt,c.test?c.test.answer?c.test.answer.fill?c.test.answer.fill.find(_t=>_t.key==gt.key)?c.test.answer.fill.filter(_t=>_t.key==gt.key).forEach(_t=>{_t.value=gt.value,_t.iscorrect=gt.iscorrect}):c.test.answer.fill.push(gt):c.test.answer.fill=[gt]:c.test.answer={fill:[gt]}:c.test={answer:{fill:[gt]}};let bt=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(bt,c,j),null!==(Lt=c.svg)&&void 0!==Lt&&Lt.nodes.find(_t=>{var At;return"submit"==(null===(At=_t.source)||void 0===At||null===(At=At.test)||void 0===At?void 0:At.type)})||Mt(j,c,H,st,{iscorrect:Nt},tt)})(j,c,dt.nodeStatus,dt.slideStatus,{id:j.id,key:Lt,value:Tt},st)}),null!==(gt=c.test)&&void 0!==gt&&gt.showselection||jQuery("#"+j.id).addClass("hide-selection");let tt=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(tt,c,j);break}case"matching-empty":{jQuery("#"+j.id).on("touchmove",".ondrag-item",function(L){L.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(L){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${j.size.height/j.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${L.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(L){var rt;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(rt=c.test)&&void 0!==rt&&rt.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),Ct(j,c)},drag:function(L){},dragend:function(L){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${j.id} .ondrop-here`).kendoDropTarget({dragenter:function(L){L.dropTarget.hasClass("actived")&&L.dropTarget.addClass("focused")},dragleave:function(L){L.dropTarget.hasClass("actived")&&L.dropTarget.removeClass("focused")},drop:function(L){if(!L.dropTarget.hasClass("actived"))return;L.dropTarget.removeClass("focused");let rt=L.dropTarget,ut=L.draggable.currentTarget;rt.is(":empty")||rt.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),ut.appendTo(rt);let Lt=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(Lt,c,j),((j,c,H,st,gt,tt)=>{var L,rt,ut;let{key:Lt}=null!==(L=null===(rt=j.source)||void 0===rt||null===(rt=rt.test)||void 0===rt?void 0:rt.matching)&&void 0!==L?L:{key:"KIEN"},Tt=gt.key==Lt;Ct(j,c);let Nt={id:j.id,key:null!=Lt?Lt:"",value:gt.key};c.test?c.test.answer?c.test.answer.matching?c.test.answer.matching.find(bt=>bt.id==Nt.id)?c.test.answer.matching.filter(bt=>bt.id==Nt.id).forEach(bt=>{bt.key=Nt.key,bt.value=Nt.value}):c.test.answer.matching.push(Nt):c.test.answer.matching=[Nt]:c.test.answer={matching:[Nt]}:c.test={answer:{matching:[Nt]}},null!==(ut=c.svg)&&void 0!==ut&&ut.nodes.find(bt=>{var _t;return"submit"==(null===(_t=bt.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)})||Mt(j,c,H,st,{iscorrect:Tt},tt)})(j,c,dt.nodeStatus,dt.slideStatus,{key:ut.data("key")},st)}});let tt=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(tt,c,j);break}case"matching-content":{jQuery("#"+j.id).on("touchmove",".ondrag-item",function(L){L.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(L){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${j.size.height/j.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${L.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(L){var rt;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(rt=c.test)&&void 0!==rt&&rt.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(L){},dragend:function(L){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${j.id} .ondrop-here`).kendoDropTarget({dragenter:function(L){L.dropTarget.hasClass("actived")&&L.dropTarget.addClass("focused")},dragleave:function(L){L.dropTarget.hasClass("actived")&&L.dropTarget.removeClass("focused")},drop:function(L){if(!L.dropTarget.hasClass("actived"))return;L.dropTarget.removeClass("focused");let rt=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(rt,c,j),L.draggable.currentTarget.appendTo(L.dropTarget),Pt(c,dt.nodeStatus,dt.slideStatus,st)}});let tt=(0,z.RY)(x.FL.TEST_GROUP,"g",void 0,y.L.target);(0,z.kE)(tt,c,j);break}case"speech":break;case"submit":jQuery("#"+j.id).click(tt=>{tt.preventDefault(),((j,c,H,st,gt)=>{var tt,L,rt,ut,Lt;let Tt;var Nt;if(null!=c&&null!==(tt=c.test)&&void 0!==tt&&null!==(tt=tt.answer)&&void 0!==tt&&tt.truefalse)Tt=null==c||null===(Nt=c.test)||void 0===Nt||null===(Nt=Nt.answer)||void 0===Nt||null===(Nt=Nt.truefalse)||void 0===Nt?void 0:Nt.iscorrect;else if(null!=c&&null!==(L=c.test)&&void 0!==L&&null!==(L=L.answer)&&void 0!==L&&L.singlechoice){var bt;Tt=null==c||null===(bt=c.test)||void 0===bt||null===(bt=bt.answer)||void 0===bt||null===(bt=bt.singlechoice)||void 0===bt?void 0:bt.iscorrect}else if(null!=c&&null!==(rt=c.test)&&void 0!==rt&&null!==(rt=rt.answer)&&void 0!==rt&&rt.multichoice){var _t,At,zt;Tt=1==[null==c||null===(_t=c.test)||void 0===_t||null===(_t=_t.answer)||void 0===_t||null===(_t=_t.multichoice)||void 0===_t?void 0:_t.length,null==c||null===(At=c.test)||void 0===At||null===(At=At.answer)||void 0===At||null===(At=At.multichoice)||void 0===At||null===(At=At.map(re=>re.iscorrect?1:0))||void 0===At?void 0:At.reduce((re,ue)=>re+ue),null==c||null===(zt=c.svg)||void 0===zt||null===(zt=zt.nodes)||void 0===zt||null===(zt=zt.filter(re=>{var ue,_e;return"multichoice"==(null===(ue=re.source)||void 0===ue||null===(ue=ue.test)||void 0===ue?void 0:ue.type)&&(null===(_e=re.source)||void 0===_e||null===(_e=_e.test)||void 0===_e||null===(_e=_e.multichoice)||void 0===_e?void 0:_e.iscorrect)}))||void 0===zt?void 0:zt.length].filter((re,ue,_e)=>_e.indexOf(re)==ue).length}else if(null!=c&&null!==(ut=c.test)&&void 0!==ut&&null!==(ut=ut.answer)&&void 0!==ut&&ut.fill){var Bt,Yt;Tt=(null==c||null===(Bt=c.test)||void 0===Bt||null===(Bt=Bt.answer)||void 0===Bt||null===(Bt=Bt.fill)||void 0===Bt||null===(Bt=Bt.map(re=>re.iscorrect?1:0))||void 0===Bt?void 0:Bt.reduce((re,ue)=>re+ue))==(null===(Yt=c.svg)||void 0===Yt||null===(Yt=Yt.nodes)||void 0===Yt||null===(Yt=Yt.filter(re=>{var ue;return"fill"==(null===(ue=re.source)||void 0===ue||null===(ue=ue.test)||void 0===ue?void 0:ue.type)}))||void 0===Yt?void 0:Yt.length)}else if(null!=c&&null!==(Lt=c.test)&&void 0!==Lt&&null!==(Lt=Lt.answer)&&void 0!==Lt&&Lt.matching){var $t,oe;Tt=(null===($t=c.svg)||void 0===$t||null===($t=$t.nodes)||void 0===$t||null===($t=$t.filter(re=>{var ue;return"matching-empty"==(null===(ue=re.source)||void 0===ue||null===(ue=ue.test)||void 0===ue?void 0:ue.type)}))||void 0===$t?void 0:$t.length)==((null==c||null===(oe=c.test)||void 0===oe||null===(oe=oe.answer)||void 0===oe?void 0:oe.matching)||[]).map(re=>re.key==re.value?1:0).reduce((re,ue)=>re+ue)}Mt(j,c,H,st,{iscorrect:Tt},gt)})(j,c,dt.nodeStatus,dt.slideStatus,st)})}})(c,j)};var J=b(4205),ft=b(3189),K=b(3289),U=b(4245),s=b(2657),E=b(2197),W=b(8691),q=b(2685),ot=b(4537);const Zt=(j,c,H)=>{if(H.slideStatus!=dt.slideStatus||!c.length)return;let st=c.shift(),gt=j.filter(ut=>{var Lt;return(null!==(Lt=ut.idx)&&void 0!==Lt?Lt:0)==st});if(!gt.length)return;let tt=Math.max.apply(null,gt.map(ut=>{var Lt;return null!==(Lt=ut.time)&&void 0!==Lt?Lt:0})),L=!1,rt=tt<.5?0:setTimeout(()=>{L||(L=!0,Zt(j,c,H))},1e3*tt);Ht(j,c,gt,0,H,{idx:st,total:gt.length,counter:0,isRecursive:L,timeoutRecursive:rt,maxTimeCoundown:tt,uid:Math.floor(1e9*Math.random())})},Ht=(j,c,H,st,gt,tt)=>{if(gt.slideStatus!=dt.slideStatus)return;let L=H[st];if(L){switch(L.type){case x.hv.GROUP:break;case x.hv.CIRCLE:(0,J.K)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case x.hv.ELLIPSE:(0,ft.W)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case x.hv.LINE:(0,K.q)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case x.hv.RECT:(0,U.a)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case x.hv.POLYGON:(0,s.u)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case x.hv.POLYLINE:(0,q.E)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null);break;case x.hv.FOREIGNOBJECT:(0,E.$)(L.id,{size:L.size,attribute:L.attribute,style:L.style,source:L.source},L.pid?window.document.getElementById(L.pid):null);break;case x.hv.IMAGE:(0,T.B)(L.id,{size:L.size,attribute:L.attribute,source:L.source},L.pid?window.document.getElementById(L.pid):null);break;case x.hv.TEXT:(0,v.L)(L.id,{size:L.size,attribute:L.attribute,source:L.source},L.pid?window.document.getElementById(L.pid):null);break;case x.hv.TSPAN:(0,ot.M)(L.id,{size:L.size,attribute:L.attribute,source:L.source},L.pid?window.document.getElementById(L.pid):null);break;case x.hv.PATH:(0,W.X)(L.id,{size:L.size,attribute:L.attribute},L.pid?window.document.getElementById(L.pid):null)}ct(gt.slide,L,gt,()=>{tt.counter+=1,tt.maxTimeCoundown<.5&&tt.counter>=tt.total&&(tt.total=tt.counter=0,tt.isRecursive||(clearTimeout(tt.timeoutRecursive),tt.isRecursive=!0,setTimeout(()=>{Zt(j,c,gt)},250)))}),Ht(j,c,H,++st,gt,tt)}},dt=new class jt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(c){this._dataSource=c.data||{},y.L.variable.set=c.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var c,H;return null!==(c=null===(H=this._dataSource)||void 0===H||null===(H=H.slides)||void 0===H?void 0:H.length)&&void 0!==c?c:0}get slides(){var c;return(null===(c=this._dataSource)||void 0===c?void 0:c.slides)||[]}get slide(){var c;return((null===(c=this._dataSource)||void 0===c?void 0:c.slides)||[])[this._slideIdx]||{}}findNode(c){var H;let st=null===(H=this._dataSource)||void 0===H||null===(H=H.slides)||void 0===H?void 0:H.find((bt,_t)=>_t==this._slideIdx),gt=null==st?void 0:st.svg,tt=(bt,_t)=>{let At=null==bt?void 0:bt.find(Yt=>Yt.id==c);if(At)return At;let zt=0,Bt=bt.length||0;for(;zt<Bt&&!At&&(At=tt(bt[zt].nodes||[],bt[zt].id),!At);)zt++;return At},L=tt((null==gt?void 0:gt.nodes)||[]);var rt,ut,Lt,Tt,Nt;return L?(L.style=null!==(rt=L.style)&&void 0!==rt?rt:{},L.source=null!==(ut=L.source)&&void 0!==ut?ut:{},L.animate=null!==(Lt=L.animate)&&void 0!==Lt?Lt:{},L.interactive=null!==(Tt=L.interactive)&&void 0!==Tt?Tt:{},L.variable=null!==(Nt=L.variable)&&void 0!==Nt?Nt:{},L):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(c,H,st){var gt;let tt;var L,rt;if(this.refreshNodeStatus(),this.refreshSlideStatus(),st)tt=null===(L=this._dataSource)||void 0===L||null===(L=L.slides)||void 0===L?void 0:L.find(Nt=>Nt.code==st||Nt.id==st),tt&&(this._slideIdx=(null===(rt=this._dataSource)||void 0===rt||null===(rt=rt.slides)||void 0===rt?void 0:rt.indexOf(tt))||0);else if(H){var ut,Lt;tt=null===(ut=this._dataSource)||void 0===ut||null===(ut=ut.slides)||void 0===ut?void 0:ut.find(Nt=>Nt.id==H),tt&&(this._slideIdx=(null===(Lt=this._dataSource)||void 0===Lt||null===(Lt=Lt.slides)||void 0===Lt?void 0:Lt.indexOf(tt))||0)}else this._slideIdx=Math.min(Math.max(c||0,0),this.slideTotal-1),tt=this.slide;if(tt){var Tt;qt(y.L.container,y.L.svg,tt,!0),null===(Tt=jQuery(y.L.svg).find("#"+x.FL.BACKGROUND_GROUP))||void 0===Tt||Tt.empty();let Nt=(0,z.RY)(x.FL.BACKGROUND_GROUP,"g",void 0,y.L.svg);(0,z.I6)(Nt,tt),(j=>{var c,H,st,gt;j.test&&(j.test.answer=void 0);let tt=dt.nodeStatus,L=dt.slideStatus;null===(c=j.svg)||void 0===c||c.nodes.forEach(ut=>{ut.pid=Math.ceil(1e9*Math.random()),(0,D.v)(ut.pid)});let rt=null===(H=j.svg)||void 0===H||null===(H=H.nodes)||void 0===H?void 0:H.map(ut=>{var Lt;return null!==(Lt=ut.idx)&&void 0!==Lt?Lt:0}).filter((ut,Lt,Tt)=>Tt.indexOf(ut)==Lt).sort((ut,Lt)=>(null!=ut?ut:0)-(null!=Lt?Lt:0));Zt(null!==(st=null===(gt=j.svg)||void 0===gt?void 0:gt.nodes)&&void 0!==st?st:[],null!=rt?rt:[],{slide:j,nodeStatus:tt,slideStatus:L})})(tt)}this.changeSlide(this.slides,null===(gt=this.slide)||void 0===gt?void 0:gt.id,this.slideIdx,this.slides.length,tt)}set onChangeSlide(c){this._fnChangeSlides.push(c)}changeSlide(c,H,st,gt,tt){this._fnChangeSlides.forEach(L=>L(c,H,st,gt,tt))}},qt=(j,c,H,st)=>{var gt,tt,L,rt;let ut=window.document.querySelector(c);var Lt;ut||(ut=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(Lt=window.document.querySelector(j))||void 0===Lt||Lt.appendChild(ut)),st&&(ut.textContent=null);let{x:Tt,y:Nt,width:bt,height:_t}=null!==(gt=null==H||null===(tt=H.svg)||void 0===tt?void 0:tt.viewBox)&&void 0!==gt?gt:y.L.screen.frameSize;ut.setAttributeNS(null,"viewBox",Tt+" "+Nt+" "+bt+" "+_t),ut.setAttribute("id",c.replace("#",""));var $t,oe,At=null!==(L=jQuery(j).width())&&void 0!==L?L:1080,zt=null!==(rt=jQuery(j).height())&&void 0!==rt?rt:1080,Yt=bt/_t;Yt>=At/zt?oe=($t=At)/Yt:$t=(oe=zt)*Yt,ut.setAttributeNS(null,"width",$t.toString()),ut.setAttributeNS(null,"height",oe.toString())}},8358:(ce,Ut,b)=>{b.d(Ut,{M:()=>kt,a:()=>O});var y=b(9410);const O=(u,C,k)=>{var v;let{value:x}=null!==(v=u.animate)&&void 0!==v?v:{};kt(u.id,{node:u,value:x,nodeStatus:C,slideStatus:k},()=>{})},kt=(u,C,k)=>{var v;if(!C.value)return void k();let D=jQuery("#"+u).parents("g");if(!D.length)return void k();let{size:x}=C.node;D.css("transform-origin",`${x.x+x.width/2}px ${x.y+x.height/2}px`);let V="",G=null!==(v=C.iteration)&&void 0!==v?v:0,P=[];(C.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?P.push(C.value):C.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(C.value)?(P.push("animation"),P.push(`animation-${C.value}`)):(P.push("animate__animated"),P.push(`animate__${C.value}`)):(P.push("animation"),P.push("animation-fadein")),G<0?(P.push("animation-iteration-infinite"),k(),k=function(){}):G>0&&P.push("animation-iteration-"+(G+1)),V=P.join(" "),function(w){let T=function(){D.data("animate-running")?D.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){D.data("animate-running",!1),setTimeout(function(){w()},100)}):w()};D.hasClass("animation")?setTimeout(function(){T()}):T()}(function(){var w;at(u),(G>0||G<0)&&D.one("animationiteration",function(){C.slideStatus===y.J.slideStatus||(D.data("animate-running",!1),at(u),C.slideStatus===y.J.slideStatus&&k())}),D.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(D.data("animate-running",!1),at(u),C.finish){default:case 0:case 1:break;case 2:var T;kt(u,{node:C.node,value:null===(T=C.node.animate)||void 0===T?void 0:T.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{D.addClass("hide")})}C.slideStatus===y.J.slideStatus&&k()}),D.attr("data-class",null!==(w=D.attr("class"))&&void 0!==w?w:""),D.addClass(V),D.data("animate-running",!0)})},at=function(u){var C,k,v=jQuery("#"+u).parents("g"),D=null===(C=v.attr("class"))||void 0===C?void 0:C.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),x=null===(k=v.attr("class"))||void 0===k?void 0:k.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);D&&D.forEach(function(G){jQuery(v).removeClass(G)}),x&&x.forEach(function(G){jQuery(v).removeClass(G)});let V=v.attr("data-class");V&&(v.attr("class",V),v.removeAttr("data-class")),jQuery(v).data("animation-running",!1)}},9686:(ce,Ut,b)=>{b.d(Ut,{h:()=>kt});var y=b(9410),O=b(8358);const kt=(u,C,k)=>{var v;if(!C.value)return void k();let D=jQuery("#"+u).parents("g");if(!D.length)return void k();let{size:x}=C.node;D.css("transform-origin",`${x.x+x.width/2}px ${x.y+x.height/2}px`);let V="",G=null!==(v=C.iteration)&&void 0!==v?v:0,P=[];(C.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?P.push(C.value):(P.push("animation"),P.push(C.value?"animation-"+C.value:"animation-fadein")),G<0?(P.push("animation-iteration-infinite"),k(),k=function(){}):G>0&&P.push("animation-iteration-"+(G+1)),V=P.join(" "),function(w){let T=function(){D.data("animate-running")?D.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){D.data("animate-running",!1),setTimeout(function(){w()},100)}):w()};D.hasClass("animation")?setTimeout(function(){T()}):T()}(function(){var w;at(u),(G>0||G<0)&&D.one("animationiteration",function(){C.slideStatus===y.J.slideStatus||(D.data("animate-running",!1),at(u),C.slideStatus===y.J.slideStatus&&k())}),D.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(D.data("animate-running",!1),at(u),C.finish){default:case 0:case 1:break;case 2:var T;(0,O.M)(u,{node:C.node,value:null===(T=C.node.animate)||void 0===T?void 0:T.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{D.addClass("hide")})}C.slideStatus===y.J.slideStatus&&k()}),D.attr("data-class",null!==(w=D.attr("class"))&&void 0!==w?w:""),D.addClass(V),D.data("animate-running",!0)})},at=function(u){var C,k=jQuery("#"+u).parents("g"),v=null===(C=k.attr("class"))||void 0===C?void 0:C.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);v&&v.forEach(function(x){jQuery(k).removeClass(x)});let D=k.attr("data-class");D&&(k.attr("class",D),k.removeAttr("data-class")),jQuery(k).data("animation-running",!1)}},9349:(ce,Ut,b)=>{b.d(Ut,{c:()=>u});var y=b(1862),O=b(9410),kt=b(596),at=b(8358);const u=(k,v,D)=>{var x;if(!v.points||!v.points.length)return void D();let V=jQuery("#"+k),P=function C(k){let v=[];2===k.length&&k.splice(1,0,[(k[0][0]+k[1][0])/2,(k[0][1]+k[1][1])/2]);let P,B,w,D=1,x=k.length;for(;D<x;){if(P=k[D-1],B=k[D],w=k[D+1],(Math.abs(P[0]-B[0])>=15||Math.abs(P[1]-B[1])>=15)&&Math.pow(P[0]-B[0],2)+Math.pow(P[1]-B[1],2)>=Math.pow(15,2)&&w&&(Math.abs(P[0]-w[0])<=20||Math.abs(P[1]-w[1])<=20)&&Math.pow(P[0]-w[0],2)+Math.pow(P[1]-w[1],2)<=Math.pow(20,2))v.push(B);else{let N=B[0]-P[0],d=B[1]-P[1],Y=Math.max(Math.abs(N),Math.abs(d));for(var T=0;T<Y;T+=15)v.push([P[0]+N*T/Y,P[1]+d*T/Y])}D++}return x>0&&(v.splice(0,0,k[0]),v.push(k[x-1])),v}((it=>{if(1==it.length){let{size:S}=v.node;return[[S.x+S.width/2,S.y+S.height/2],...it]}return[...it]})(v.points||[])),B=null!==(x=v.iteration)&&void 0!==x?x:0;if(B<0&&(D(),D=function(){}),V.data("work-running")&&B<0)return;V.data("work-running",!0);let pt,w=P.length,T=Math.max(20,1e3*(v.time||3)/w),{id:N,type:d,size:Y,attribute:z}=O.J.findNode(k),F=function(it){if(v.slideStatus!==O.J.slideStatus)return V.data("work-running",!1),void(v.slideStatus===O.J.slideStatus&&D());if(it<w){let Q=P[it];Q&&(pt=Object.assign({},Y,{x:Q[0]-Y.width/2,y:Q[1]-Y.height/2}),Object.assign(z,(0,y.xW)(d,pt,z)),(0,kt.tD)(window.document.getElementById(N),z),setTimeout(function(){F(++it)},T))}else if(B>0)B--,F(1);else if(B<0)F(1);else switch(V.data("work-running",!1),v.slideStatus===O.J.slideStatus&&D(),v.finish){default:case 0:break;case 1:Object.assign(z,(0,y.xW)(d,Y,z)),(0,kt.tD)(window.document.getElementById(N),z);break;case 2:var S;(0,at.M)(v.node.id,{node:v.node,value:null===(S=v.node.animate)||void 0===S?void 0:S.out,nodeStatus:v.nodeStatus,slideStatus:v.slideStatus},()=>{V.addClass("hide")})}};F(1)}},8077:(ce,Ut,b)=>{b.d(Ut,{d:()=>kt});var y=b(5150),O=b(9410);const kt=(at,u,C,k,v)=>{var D,x,V,G,P,B,w;if(k.slideStatus!=O.J.slideStatus)return u.async&&"change-slide"!=u.async?void 0:void v();if(k.nodeStatus!=O.J.nodeStatus&&(!u.async||"change-node"==u.async))return void v();if(!(null!==(D=u.source)&&void 0!==D&&D.path||null!==(x=u.source)&&void 0!==x&&x.url))return console.warn(`${at} -> audio no source!`),v(),void(v=()=>{});var T=jQuery("#"+at);let N=null!==(V=u.iteration)&&void 0!==V?V:0;if(N<0&&(v(),v=function(){}),!(T.data("audio-running")&&N<0)){T.data("audio-running",!0);var d=function(z){z.pause(),z.remove(),T.data("audio-running",!1)},Y=new Audio;return Y.autoplay=!0,Y.loop=0!=N,Y.preload="auto",Y.controls=!0,Y.setAttributeNode(document.createAttribute("playsinline")),Y.addEventListener("canplay",function(){var z=Y.play();z&&z.then(function(pt){var F;T.data("audio-running",!0),"time"==u.async?setTimeout(()=>{k.slideStatus===O.J.slideStatus&&(d(Y),v(),v=()=>{})},1e3*(null!==(F=u.time)&&void 0!==F?F:1)):"non-stop"==u.async&&(v(),v=()=>{})}).catch(function(pt){T.data("audio-running",!1),k.slideStatus===O.J.slideStatus&&(v(),v=()=>{})})}),Y.addEventListener("timeupdate",function(){switch(u.async){case"time":case"change-slide":k.slideStatus!==O.J.slideStatus&&(d(this),v(),v=()=>{});break;case"finish-action":C.total>=2&&C.total-C.counter==1&&(d(this),v(),v=()=>{});break;default:case"change-node":k.nodeStatus!==O.J.nodeStatus&&(d(this),v(),v=()=>{});case"non-stop":}}),Y.addEventListener("canplaythrough",function(){this.loop&&(N>0?N--:0==N&&(this.loop=!1))}),Y.addEventListener("play",function(){}),Y.addEventListener("pause",function(){}),Y.addEventListener("ended",function(){this.remove(),T.data("audio-running",!1),k.slideStatus===O.J.slideStatus&&(v(),v=()=>{})}),Y.onerror=function(){this.remove(),T.data("audio-running",!1),k.slideStatus===O.J.slideStatus&&(v(),v=()=>{})},Y.src=(null!==(G=u.source)&&void 0!==G&&G.path?(null===(P=y.L.config)||void 0===P?void 0:P.readfileuploadurl)+(null===(B=u.source)||void 0===B?void 0:B.path):null===(w=u.source)||void 0===w?void 0:w.url)||"",Y}}},6589:(ce,Ut,b)=>{b.d(Ut,{J:()=>D});var y=b(5150),O=b(9410),kt=b(9686),at=b(9349),u=b(8077),C=b(2475),k=b(1955),v=b(8358);const D=(x,V,G,P)=>{var B,w,T;let N={total:0,counter:0},{triggershow:d,triggerrun:Y,triggerhide:z,action:pt,audio:F,slide:it,media:S}=null!==(B=null===(w=x.interactive)||void 0===w?void 0:w.click)&&void 0!==B?B:{};if(console.log(`node(${x.id}) | nodeStatus(${V}) | slideStatus(${G}) | click`),d){let{id:ne,ids:ht,time:Ct,async:Ot}=d;"asynctrue"==Ot?(0,C.GD)({id:ne,ids:ht,nodeStatus:V,slideStatus:G}):"time"==Ot&&setTimeout(()=>{(0,C.GD)({id:ne,ids:ht,nodeStatus:V,slideStatus:G})},1e3*(null!=Ct?Ct:0))}if(Y){let{id:ne,ids:ht,time:Ct,async:Ot}=Y;"asynctrue"==Ot?(0,C.MF)({id:ne,ids:ht,nodeStatus:V,slideStatus:G}):"time"==Ot&&setTimeout(()=>{(0,C.MF)({id:ne,ids:ht,nodeStatus:V,slideStatus:G})},1e3*(null!=Ct?Ct:0))}if(z){let{id:ne,ids:ht,time:Ct,async:Ot}=z;"asynctrue"==Ot?(0,C.vi)({id:ne,ids:ht,nodeStatus:V,slideStatus:G}):"time"==Ot&&setTimeout(()=>{(0,C.vi)({id:ne,ids:ht,nodeStatus:V,slideStatus:G})},1e3*(null!=Ct?Ct:0))}let Q=()=>{setTimeout(()=>{if(N.counter>=N.total){if(P&&P(),d){let{id:ne,ids:ht,async:Ct}=d;(!Ct||"asyncfalse"==Ct)&&(0,C.GD)({id:ne,ids:ht,nodeStatus:V,slideStatus:G})}if(Y){let{id:ne,ids:ht,async:Ct}=Y;(!Ct||"asyncfalse"==Ct)&&(0,C.MF)({id:ne,ids:ht,nodeStatus:V,slideStatus:G})}if(z){let{id:ne,ids:ht,async:Ct}=z;(!Ct||"asyncfalse"==Ct)&&(0,C.vi)({id:ne,ids:ht,nodeStatus:V,slideStatus:G})}}})};if(null!=pt&&pt.value){N.total+=1;let ne=()=>{N.counter+=1,Q()};switch(null==pt?void 0:pt.value){case"hide":var Et;(0,v.M)(x.id,{node:x,value:null===(Et=x.animate)||void 0===Et?void 0:Et.out,nodeStatus:V,slideStatus:G},()=>{jQuery("#"+x.id).addClass("hide"),ne()});break;case"points":{let{points:ht,time:Ct,iteration:Ot,finish:Mt}=pt;ht&&(0,at.c)(x.id,{node:x,points:ht,time:Ct,iteration:Ot,finish:Mt,nodeStatus:V,slideStatus:G},ne);break}default:{let{value:ht,time:Ct,iteration:Ot,finish:Mt}=pt;(0,kt.h)(x.id,{node:x,value:ht,time:Ct,iteration:Ot,finish:Mt,nodeStatus:V,slideStatus:G},ne);break}}}if(null!=F&&null!==(T=F.source)&&void 0!==T&&T.path){N.total+=1;let ne=()=>{N.counter+=1,Q()};(0,u.d)(x.id,F,N,{nodeStatus:V,slideStatus:G},ne)}if(N.total||Q(),null!=it&&it.id)switch(it.id){case-1:O.J.runSlide(O.J.slideIdx-1);break;case-2:O.J.runSlide(O.J.slideIdx+1);break;default:var Rt;O.J.runSlide(void 0,it.id,null===(Rt=it.code)||void 0===Rt?void 0:Rt.toString())}if(null!=S&&S.type){var wt;let ht=`<div class="popup-media-viewer"><iframe src="${(0,k._)({readfileuploadurl:null===(wt=y.L.config)||void 0===wt?void 0:wt.readfileuploadurl,type:null==S?void 0:S.type,oss:null==S?void 0:S.oss,path:null==S?void 0:S.path,url:null==S?void 0:S.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,Ct=jQuery(ht).appendTo(window.document.body);Ct.find(".btn-close").click(function(Ot){Ot.preventDefault(),Ct.remove()})}}},2475:(ce,Ut,b)=>{b.d(Ut,{GD:()=>at,MF:()=>u,vi:()=>C});var y=b(9410),O=b(6589),kt=b(8358);const at=k=>{k.id?jQuery("#"+k.id).removeClass("hide"):k.ids&&k.ids.forEach(v=>{jQuery("#"+v).removeClass("hide")})},u=k=>{k.id?(jQuery("#"+k.id).removeClass("hide"),(0,O.J)(y.J.findNode(k.id),k.nodeStatus,k.slideStatus)):k.ids&&k.ids.forEach(v=>{jQuery("#"+v).removeClass("hide"),(0,O.J)(y.J.findNode(v),k.nodeStatus,k.slideStatus)})},C=k=>{if(k.id){var v;let D=y.J.findNode(k.id);(0,kt.M)(k.id,{node:D,value:null===(v=D.animate)||void 0===v?void 0:v.out,nodeStatus:k.nodeStatus,slideStatus:k.slideStatus},()=>{jQuery("#"+k.id).addClass("hide")})}else k.ids&&k.ids.forEach(D=>{var x;let V=y.J.findNode(D);(0,kt.M)(D,{node:V,value:null===(x=V.animate)||void 0===x?void 0:x.out,nodeStatus:k.nodeStatus,slideStatus:k.slideStatus},()=>{jQuery("#"+D).addClass("hide")})})}},596:(ce,Ut,b)=>{b.d(Ut,{cR:()=>Y,rN:()=>F,t8:()=>z,fn:()=>it,RY:()=>wt,tD:()=>S,KG:()=>Et,c_:()=>Q,s6:()=>pt,I6:()=>J,in:()=>ne,IA:()=>ct,KP:()=>Pt,AE:()=>ht,xJ:()=>Mt,D_:()=>Ct,kE:()=>ft});var y=b(8527),kt=/^#?[a-fA-F0-9]+$/;const C=(K,U)=>{var s;if("none"==(K=null!==(s=K)&&void 0!==s?s:""))return"none";if("transparent"==K)return"rgba(0,0,0,0)";if(K.includes("rgba("))return K;if(K.includes("rgb(")&&(K=(0,y.w)(K)),!(K=K.replace(/[^0-9a-fA-F]/g,"")))return"";if(!kt.test(K))return console.error(`hex2rgba -> ${K}: first argument has invalid hexadecimal characters`),"";if("#"===K[0]&&(K=K.slice(1)),3===K.length){let W=K.split("");W.splice(2,0,K[2]),W.splice(1,0,K[1]),W.splice(0,0,K[0]),K=W.join("")}if(6!==K.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var E=[parseInt(K.slice(0,2),16),parseInt(K.slice(2,4),16),parseInt(K.slice(4,6),16)];return U="number"==typeof U?U:parseFloat(U),E.push(U>=0&&U<=1?U:1),"rgba("+E.join(",")+")"};var k=b(1955),v=b(1874),D=b(5150),x=b(2021),V=b(4245),G=b(257),P=b(4205),B=b(9410),w=b(2197),T=b(4907),N=b(1862),d=b(2806);class Y{constructor(U,s){let E=window.document.querySelector(s);var W;E||(E=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(W=window.document.querySelector(U))||void 0===W||W.appendChild(E));let{svgViewBox:q,svgSize:ot}=D.L.screen.init();E.setAttributeNS(null,"viewBox",`${q.x} ${q.y} ${q.width} ${q.height}`),E.setAttribute("id",s.replace("#","")),E.style.display="block",E.style.width=`${ot.width}px`,E.style.height=`${ot.height}px`,E.style.backgroundColor="#fafafa",E.style.cursor="default"}}const z=K=>{jQuery(D.L.target).find("#"+d.FL.BACKGROUND_GROUP).empty();let U=wt(d.FL.BACKGROUND_GROUP,"g",void 0,D.L.target);J(U,K),(()=>{let s=window.document.getElementById(null==K?void 0:K.id);jQuery(s).find("#"+d.FL.BACKGROUND_GROUP).empty();let E=wt(d.FL.BACKGROUND_GROUP,"g",void 0,s);J(E,K)})()},pt=()=>{let K=D.L.screen.svgViewBox,U=D.L.screen.svgSize;D.L.target&&(D.L.target.setAttributeNS(null,"viewBox",`${K.x} ${K.y} ${K.width} ${K.height}`),D.L.target.style.left=`${U.x}px`,D.L.target.style.top=`${U.y}px`,D.L.target.style.width=`${U.width}px`,D.L.target.style.height=`${U.height}px`)},F=()=>{jQuery(D.L.target).find(">*:not(defs)").remove()},it=(K,U,s,E,W)=>{let q;if(!s)switch(U){case d.hv.GROUP:s="g";break;case d.hv.CIRCLE:s="circle";break;case d.hv.ELLIPSE:s="ellipse";break;case d.hv.LINE:s="line";break;case d.hv.RECT:s="rect";break;case d.hv.POLYGON:s="polygon";break;case d.hv.POLYLINE:s="polyline";break;case d.hv.PATH:s="path";break;case d.hv.FOREIGNOBJECT:s="foreignObject";break;case d.hv.IMAGE:s="image";break;case d.hv.TEXT:s="text";break;case d.hv.TSPAN:s="tspan"}if(U&&null!=E&&E.size&&null!=E&&E.attribute&&Object.assign(E.attribute,(0,N.xW)(U,E.size,E.attribute)),K)if(q=jQuery(W||D.L.target).find("#"+K).get(0),q){if(q.nodeName!=s){let ot=window.document.createElementNS("http://www.w3.org/2000/svg",s);ot.setAttribute("id",K),U==d.hv.FOREIGNOBJECT&&ot.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(q).replaceWith(ot),q=ot}}else q=window.document.createElementNS("http://www.w3.org/2000/svg",s),q.setAttribute("id",K),U==d.hv.FOREIGNOBJECT&&q.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(q).appendTo(W||D.L.target);else q=window.document.createElementNS("http://www.w3.org/2000/svg",s),jQuery(q).appendTo(W||D.L.target);return null!=E&&E.attribute&&S(q,null==E?void 0:E.attribute),null!=E&&E.style&&Q(q,null==E?void 0:E.style),null!=E&&E.source&&Et(q,U,null==E?void 0:E.source,K),q},S=(K,U)=>{return jQuery(K).attr((s=Object.assign({},U||{}),null===(E=Object.keys(s))||void 0===E||E.forEach(ot=>{switch(ot){case"fill":break;case"fillRule":var Xt;Object.assign(s,{"fill-rule":null!==(Xt=s.fillRule)&&void 0!==Xt?Xt:null,fillRule:null});break;case"stroke":var Zt;Object.assign(s,{"stroke-width":null!==(Zt=s.strokeWidth)&&void 0!==Zt?Zt:null,strokeWidth:null});break;case"strokeLinecap":var Ht;Object.assign(s,{"stroke-linecap":null!==(Ht=s.strokeLinecap)&&void 0!==Ht?Ht:null,strokeLinecap:null});break;case"strokeLinejoin":var jt;Object.assign(s,{"stroke-linejoin":null!==(jt=s.strokeLinejoin)&&void 0!==jt?jt:null,strokeLinejoin:null});break;case"strokeMiterlimit":var dt;Object.assign(s,{"stroke-miterlimit":null!==(dt=s.strokeMiterlimit)&&void 0!==dt?dt:null,strokeMiterlimit:null});break;case"strokeDasharray":var qt;Object.assign(s,{"stroke-dasharray":null!==(qt=s.strokeDasharray)&&void 0!==qt?qt:null,strokeDasharray:null});break;case"strokeDasharrays":var j,c;Object.assign(s,{"stroke-dasharray":null!==(j=null===(c=s.strokeDasharrays)||void 0===c?void 0:c.join(" "))&&void 0!==j?j:null,strokeDasharrays:null});break;case"fontFamily":var H;Object.assign(s,{"font-family":null!==(H=s.fontFamily)&&void 0!==H?H:null,fontFamily:null});break;case"fontWeight":var st;Object.assign(s,{"font-weight":null!==(st=s.fontWeight)&&void 0!==st?st:null,fontWeight:null});break;case"fontStyle":var gt;Object.assign(s,{"font-style":null!==(gt=s.fontStyle)&&void 0!==gt?gt:null,fontStyle:null});break;case"fontSize":var tt;Object.assign(s,{"font-size":null!==(tt=s.fontSize)&&void 0!==tt?tt:null,fontSize:null});break;case"textLength":Object.assign(s,{textLength:s.textLength?`${s.textLength}px`:null});break;case"letterSpacing":var L;Object.assign(s,{"letter-spacing":null!==(L=s.letterSpacing)&&void 0!==L?L:null,letterSpacing:null});break;case"wordSpacing":var rt;Object.assign(s,{"word-spacing":null!==(rt=s.wordSpacing)&&void 0!==rt?rt:null,wordSpacing:null});break;case"alignmentBaseline":var ut;Object.assign(s,{"alignment-baseline":null!==(ut=s.alignmentBaseline)&&void 0!==ut?ut:null,alignmentBaseline:null});break;case"dominantBaseline":var Lt;Object.assign(s,{"dominant-baseline":null!==(Lt=s.dominantBaseline)&&void 0!==Lt?Lt:null,dominantBaseline:null});break;case"textAnchor":var Tt;Object.assign(s,{"text-anchor":null!==(Tt=s.textAnchor)&&void 0!==Tt?Tt:null,textAnchor:null});break;case"textDecoration":var Nt;Object.assign(s,{"text-decoration":null!==(Nt=s.textDecoration)&&void 0!==Nt?Nt:null,textDecoration:null});break;case"transformOrigin":var bt;Object.assign(s,{"transform-origin":null!==(bt=s.transformOrigin)&&void 0!==bt?bt:null,transformOrigin:null})}}),Object.assign({},null!=s?s:{},{fill:null!=s&&s.fill?C(s.fill,null!==(W=null==s?void 0:s.fillOpacity)&&void 0!==W?W:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=s&&s.stroke?C(s.stroke,null!==(q=null==s?void 0:s.strokeOpacity)&&void 0!==q?q:1):"rgba(0,0,0,0)",strokeOpacity:null}))),K;var s,E,W,q},Q=(K,U)=>{return jQuery(K).css((s=Object.assign({},U||{}),null===(E=Object.keys(s))||void 0===E||E.forEach(W=>{switch(W){case"padding":Object.assign(s,{padding:s.padding?`${s.padding}px`:null});break;case"borderWidth":var q;Object.assign(s,s.borderWidth&&s.borderColor?{"border-width":`${s.borderWidth}px`,"border-style":s.borderStyle||"solid","border-color":C(s.borderColor,null!==(q=s.borderOpacity)&&void 0!==q?q:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(s,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(s,{"border-radius":s.borderRadius?`${s.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var ot;Object.assign(s,s.backgroundColor?{"background-color":C(s.backgroundColor,null!==(ot=s.backgroundOpacity)&&void 0!==ot?ot:1)}:{"background-color":""}),Object.assign(s,{backgroundColor:null,backgroundOpacity:null})}}),s)),K;var s,E},Et=(K,U,s,E)=>{switch(U){case d.hv.TEXT:{var W;let A=E==D.L.dataSelect.contenteditable_id,lt=(null==s||null===(W=s.text)||void 0===W?void 0:W.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";var q,ot;if(!A&&null!=s&&null!==(q=s.text)&&void 0!==q&&q.variableKeywords&&null!=s&&null!==(ot=s.text)&&void 0!==ot&&ot.variableKeywords.length){let vt=D.L.variable.getKeys();s.text.variableKeywords.forEach(xt=>{var Dt=xt.replace(/[^a-zA-Z0-9_]/gm,"");if(vt.indexOf(Dt)>=0){var Gt=D.L.variable.getValue(Dt);lt=lt.replace(xt,Gt)}})}A?jQuery(K).attr("editable",`${A}`).html(`<div contenteditable="${A}" xmlns="http://www.w3.org/1999/xhtml" style="width:100%;min-height:100%;display:block;">${lt}</div>`):jQuery(K).attr("editable",`${A}`).text(lt);break}case d.hv.TSPAN:var Xt,Zt;jQuery(K).text(null!==(Xt=null==s||null===(Zt=s.text)||void 0===Zt?void 0:Zt.textContent)&&void 0!==Xt?Xt:"");break;case d.hv.IMAGE:var Ht,jt,dt,qt,j;jQuery(K).attr("href",(null==s||null===(Ht=s.image)||void 0===Ht?void 0:Ht.base64)||(null!=s&&null!==(jt=s.image)&&void 0!==jt&&jt.path?(null===(dt=D.L.config)||void 0===dt?void 0:dt.readfileuploadurl)+(null==s||null===(qt=s.image)||void 0===qt?void 0:qt.path):null==s||null===(j=s.image)||void 0===j?void 0:j.url)||"");break;case d.hv.FOREIGNOBJECT:switch(null==s?void 0:s.type){case"text":{var c;let A=E==D.L.dataSelect.contenteditable_id,lt=(null===(c=s.text)||void 0===c?void 0:c.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";var H,st;if(!A&&null!==(H=s.text)&&void 0!==H&&H.variableKeywords&&null!==(st=s.text)&&void 0!==st&&st.variableKeywords.length){let vt=D.L.variable.getKeys();s.text.variableKeywords.forEach(xt=>{var Dt=xt.replace(/[^a-zA-Z0-9_]/gm,"");if(vt.indexOf(Dt)>=0){var Gt=D.L.variable.getValue(Dt);lt=lt.replace(xt,Gt)}})}A?jQuery(K).attr("editable",`${A}`).html(`<div contenteditable="${A}" xmlns="http://www.w3.org/1999/xhtml" style="width:100%;min-height:100%;display:block;">${lt}</div>`):jQuery(K).attr("editable",`${A}`).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;min-height:100%;display:block;">${lt}</div>`);break}case"html":{var gt;let A=E==D.L.dataSelect.contenteditable_id,lt=(null==s||null===(gt=s.html)||void 0===gt?void 0:gt.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>';var tt,L;if(!A&&null!==(tt=s.html)&&void 0!==tt&&tt.variableKeywords&&null!==(L=s.html)&&void 0!==L&&L.variableKeywords.length){let vt=D.L.variable.getKeys();s.html.variableKeywords.forEach(xt=>{var Dt=xt.replace(/[^a-zA-Z0-9_]/gm,"");if(vt.indexOf(Dt)>=0){var Gt=D.L.variable.getValue(Dt);lt=lt.replace(xt,Gt)}})}jQuery(K).attr("editable",`${A}`).html(`<div contenteditable="${A}" xmlns="http://www.w3.org/1999/xhtml" style="width:100%;min-height:100%;display:block;">${lt}</div>`).find("img[path],video[path],iframe[path]").each((vt,xt)=>{var Dt,Gt;xt.setAttribute("src",(null!==(Dt=null===(Gt=D.L.config)||void 0===Gt?void 0:Gt.readfileuploadurl)&&void 0!==Dt?Dt:"")+xt.getAttribute("path")),xt.removeAttribute("path")});break}case"input":var rt,ut,Lt,Tt;if(null!==(rt=s.input)&&void 0!==rt&&rt.input)jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(Lt=null===(Tt=s.input)||void 0===Tt?void 0:Tt.placeholder)&&void 0!==Lt?Lt:""}" maxlength="100" /></div>`);else if(null!==(ut=s.input)&&void 0!==ut&&ut.textarea){var Nt,bt;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(Nt=null===(bt=s.input)||void 0===bt?void 0:bt.placeholder)&&void 0!==Nt?Nt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var _t,At,zt,Bt,Yt;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(_t=s.image)||void 0===_t?void 0:_t.base64)||(null!==(At=s.image)&&void 0!==At&&At.path?(null===(zt=D.L.config)||void 0===zt?void 0:zt.readfileuploadurl)+(null===(Bt=s.image)||void 0===Bt?void 0:Bt.path):null===(Yt=s.image)||void 0===Yt?void 0:Yt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var $t,oe,re,ue;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==($t=s.iframe)&&void 0!==$t&&$t.path?(null===(oe=D.L.config)||void 0===oe?void 0:oe.readfileuploadurl)+(null===(re=s.iframe)||void 0===re?void 0:re.path):null===(ue=s.iframe)||void 0===ue?void 0:ue.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var _e,ze,be,Le,Oe;let A=(0,k._)({readfileuploadurl:null===(_e=D.L.config)||void 0===_e?void 0:_e.readfileuploadurl,type:null===(ze=s.embed)||void 0===ze?void 0:ze.type,oss:null===(be=s.embed)||void 0===be?void 0:be.oss,path:null===(Le=s.embed)||void 0===Le?void 0:Le.path,url:null===(Oe=s.embed)||void 0===Oe?void 0:Oe.url});jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${A}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var Ae,We;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(Ae=null===(We=s.svg)||void 0===We?void 0:We.svgContent)&&void 0!==Ae?Ae:""}</div>`);break;case"test":{var Ve,ri;let A=E==D.L.dataSelect.contenteditable_id,lt=(null==s||null===(Ve=s.html)||void 0===Ve?void 0:Ve.htmlContent)||"";var li,si;if(!A&&null!==(li=s.html)&&void 0!==li&&li.variableKeywords&&null!==(si=s.html)&&void 0!==si&&si.variableKeywords.length){let vt=D.L.variable.getKeys();s.html.variableKeywords.forEach(xt=>{var Dt=xt.replace(/[^a-zA-Z0-9_]/gm,"");if(vt.indexOf(Dt)>=0){var Gt=D.L.variable.getValue(Dt);lt=lt.replace(xt,Gt)}})}switch(null==s||null===(ri=s.test)||void 0===ri?void 0:ri.type){case"truefalse":var It;A?jQuery(K).attr("editable",`${A}`).html(`<div contenteditable="${A}" xmlns="http://www.w3.org/1999/xhtml" style="width:100%;min-height:100%;display:block;">${lt}</div>`):jQuery(K).attr("editable",`${A}`).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(It=s.test.truefalse)&&void 0!==It&&It.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${lt}</div></div></div>`);break;case"singlechoice":var Z;A?jQuery(K).attr("editable",`${A}`).html(`<div contenteditable="${A}" xmlns="http://www.w3.org/1999/xhtml" style="width:100%;min-height:100%;display:block;">${lt}</div>`):jQuery(K).attr("editable",`${A}`).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(Z=s.test.singlechoice)&&void 0!==Z&&Z.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${lt}</div></div></div>`);break;case"multichoice":var i;A?jQuery(K).attr("editable",`${A}`).html(`<div contenteditable="${A}" xmlns="http://www.w3.org/1999/xhtml" style="width:100%;min-height:100%;display:block;">${lt}</div>`):jQuery(K).attr("editable",`${A}`).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(i=s.test.multichoice)&&void 0!==i&&i.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${lt}</div></div></div>`);break;case"matching-empty":var r;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==s||null===(r=s.test.matching)||void 0===r?void 0:r.key}"></div>`);break;case"matching-content":var o,n,l;A?jQuery(K).attr("editable",`${A}`).html(`<div contenteditable="${A}" xmlns="http://www.w3.org/1999/xhtml" style="width:100%;min-height:100%;display:block;">${lt}</div>`):jQuery(K).attr("editable",`${A}`).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==s||null===(o=s.test.matching)||void 0===o?void 0:o.key}"><div class="ondrag-item" data-key="${null!==(n=null==s||null===(l=s.test)||void 0===l||null===(l=l.matching)||void 0===l?void 0:l.key)&&void 0!==n?n:"MIDDLEKIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${lt}</div></div></div></div>`);break;case"fill":var f;A||((null===(f=s.html)||void 0===f?void 0:f.fillKeywords)||[]).forEach(vt=>{var xt=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${vt.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;lt=lt.replace(new RegExp(vt.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),xt)}),A?jQuery(K).attr("editable",`${A}`).html(`<div contenteditable="${A}" xmlns="http://www.w3.org/1999/xhtml" style="width:100%;min-height:100%;display:block;">${lt}</div>`):jQuery(K).attr("editable",`${A}`).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${lt}</div></div></div>`);break;case"speech":jQuery(K).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var p,g,R,_,X;jQuery(K).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(p=null!==(g=s.image)&&void 0!==g&&g.path?(null===(R=D.L.config)||void 0===R?void 0:R.readfileuploadurl)+(null===(_=s.image)||void 0===_?void 0:_.path):null===(X=s.image)||void 0===X?void 0:X.url)&&void 0!==p?p:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(K).find("img[path],video[path],iframe[path]").each((vt,xt)=>{var Dt,Gt;xt.setAttribute("src",(null!==(Dt=null===(Gt=D.L.config)||void 0===Gt?void 0:Gt.readfileuploadurl)&&void 0!==Dt?Dt:"")+xt.getAttribute("path")),xt.removeAttribute("path")})}}}},wt=(K,U,s,E)=>{let W=jQuery(E||D.L.target).find("#"+K).get(0);return W||(W=window.document.createElementNS("http://www.w3.org/2000/svg",U),W.setAttribute("id",K),jQuery(W).appendTo(E||D.L.target)),jQuery(W).attr((null==s?void 0:s.attribute)||{}),jQuery(W).css((null==s?void 0:s.style)||{}),W},ne=(K,U)=>{let s=(0,x.$)(2),E={fill:v.pZ.fill,stroke:v.pZ.stroke,"stroke-width":(0,x.$)(v.pZ.strokeWidth)};return[{element:wt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:U.x-s,y:U.y-s,width:U.width+2*s,height:U.height+2*s},E)},K),posType:"rect-center"}]},ht=(K,U)=>{let s=[],{size:E}=U,W=(0,x.$)(1),q=(0,x.$)(2),ot=(0,x.$)(3),Ht=((0,x.$)(5),(0,x.$)(7),(0,x.$)(10)),jt={stroke:v.u$.stroke,"stroke-width":(0,x.$)(v.u$.strokeWidth),"stroke-linecap":v.u$.strokeLinecap,"stroke-dasharray":v.u$.strokeDasharrays.map(Bt=>(0,x.$)(Bt)).join(" ")},dt={fill:v.bf.fill,stroke:v.bf.stroke,"stroke-width":(0,x.$)(v.bf.strokeWidth)},qt={fill:v.eD.fill,stroke:v.eD.stroke,"stroke-width":(0,x.$)(v.eD.strokeWidth),width:(0,x.$)(v.eD.width),height:(0,x.$)(v.eD.height)},j={fill:v.eD.fill,stroke:v.eD.stroke,"stroke-width":(0,x.$)(v.eD.strokeWidth),width:(0,x.$)(v.eD.width),height:(0,x.$)(v.eD.height)},c=wt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:E.x,y:E.y,width:E.width,height:E.height},dt),style:{cursor:"move"}},K);if(wt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:E.x-W,y1:E.y-W,x2:E.x-W,y2:E.y+E.height+W},jt)},K),wt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:E.x-W,y1:E.y-W,x2:E.x+E.width+W,y2:E.y-W},jt)},K),wt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:E.x+E.width+W,y1:E.y-W,x2:E.x+E.width+W,y2:E.y+E.height+W},jt)},K),wt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:E.x-W,y1:E.y+E.height+W,x2:E.x+E.width+W,y2:E.y+E.height+W},jt)},K),U.type==d.hv.LINE){var L;let{size:Bt}=U,Yt=[];return null===(L=Bt.ratios)||void 0===L||L.forEach(function($t){Yt.push([Bt.x+Bt.width*$t[0],Bt.y+Bt.height*$t[1]])}),Yt.forEach(($t,oe)=>{s.push({posType:`point-${oe}`,element:wt(`icdt-temp-resize-point-${oe+1}`,"circle",{attribute:Object.assign((0,N.xW)(d.hv.CIRCLE,{x:$t[0]-q-W,y:$t[1]-q-W,width:j.width,height:j.height},{}),j)},K)})}),s.concat([{element:c,posType:"rect-center"}])}if(U.type==d.hv.POLYGON){var rt;let{size:Bt}=U,Yt=[];null===(rt=Bt.ratios)||void 0===rt||rt.forEach(function($t){Yt.push([Bt.x+Bt.width*$t[0],Bt.y+Bt.height*$t[1]])}),Yt.forEach(($t,oe)=>{s.push({posType:`point-${oe}`,element:wt(`icdt-temp-resize-point-${oe+1}`,"circle",{attribute:Object.assign((0,N.xW)(d.hv.CIRCLE,{x:$t[0]-q-W,y:$t[1]-q-W,width:j.width,height:j.height},{}),j)},K)})})}let ut=wt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:E.x-Ht,y:E.y-Ht},qt),style:{cursor:"nw-resize"}},K),Lt=wt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:E.x+E.width+ot,y:E.y-Ht},qt),style:{cursor:"ne-resize"}},K),Tt=wt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:E.x-Ht,y:E.y+E.height+ot},qt),style:{cursor:"sw-resize"}},K),Nt=wt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:E.x+E.width+ot,y:E.y+E.height+ot},qt),style:{cursor:"se-resize"}},K),bt=wt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:E.x-Ht,y:E.y+E.height/2-q-W},qt),style:{cursor:"w-resize"}},K),_t=wt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:E.x+E.width/2-q-W,y:E.y-Ht},qt),style:{cursor:"n-resize"}},K),At=wt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:E.x+E.width+ot,y:E.y+E.height/2-q-W},qt),style:{cursor:"e-resize"}},K),zt=wt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:E.x+E.width/2-q-W,y:E.y+E.height+ot},qt),style:{cursor:"s-resize"}},K);return s.concat([{element:c,posType:"rect-center"},{element:ut,posType:"rect-top-left"},{element:Lt,posType:"rect-top-right"},{element:Tt,posType:"rect-bottom-left"},{element:Nt,posType:"rect-bottom-right"},{element:bt,posType:"rect-left"},{element:_t,posType:"rect-top"},{element:At,posType:"rect-right"},{element:zt,posType:"rect-bottom"}])},Ct=(K,U,s)=>{let E=(0,x.$)(1),W=(0,x.$)(2),q=(0,x.$)(5),ot={stroke:v.u$.stroke,"stroke-width":(0,x.$)(v.u$.strokeWidth),"stroke-linecap":v.u$.strokeLinecap},Xt={fill:v.bf.fill,stroke:v.bf.stroke,"stroke-width":(0,x.$)(v.bf.strokeWidth)},Zt={fill:v.eD.fill,stroke:v.eD.stroke,"stroke-width":(0,x.$)(v.eD.strokeWidth),width:(0,x.$)(v.eD.width),height:(0,x.$)(v.eD.height)},Ht={fill:v.l6.fill,rx:(0,x.$)(v.l6.rx)},jt={fill:v.T2.fill,"alignment-baseline":v.T2.alignmentBaseline,"text-anchor":v.T2.textAnchor,"font-size":(0,x.$)(v.T2.fontSize)},dt={fill:v.IB.fill,stroke:v.IB.stroke,"stroke-width":(0,x.$)(v.IB.strokeWidth)},st=(wt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:s.x-E,y1:s.y-E,x2:s.x-E,y2:s.y+s.height+E},ot)},K),wt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:s.x-E,y1:s.y-E,x2:s.x+s.width+E,y2:s.y-E},ot)},K),wt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:s.x+s.width+E,y1:s.y-E,x2:s.x+s.width+E,y2:s.y+s.height+E},ot)},K),wt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:s.x-E,y1:s.y+s.height+E,x2:s.x+s.width+E,y2:s.y+s.height+E},ot)},K),wt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:s.x,y:s.y,width:s.width,height:s.height},Xt)},K)),gt=`${s.width} x ${s.height}`,tt=8*gt.length;return wt("icdt-temp-select-rect-text","rect",{attribute:Object.assign({x:s.x+s.width/2-(0,x.$)(tt/2),y:s.y+s.height+(0,x.$)(10),width:(0,x.$)(tt),height:(0,x.$)(20)},Ht)},K),wt("icdt-temp-select-text","text",{attribute:Object.assign({x:s.x+s.width/2,y:s.y+s.height+(0,x.$)(20)},jt)},K).textContent=gt,U.length>1&&U.forEach(Bt=>{let{size:Yt}=Bt;wt("icdt-temp-select-rect-node-"+Bt.id,"rect",{attribute:Object.assign({x:Yt.x,y:Yt.y,width:Yt.width,height:Yt.height},dt)},K)}),[{element:st,posType:"rect-center"},{element:wt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:s.x-q,y:s.y-q},Zt),style:{cursor:"nw-resize"}},K),posType:"rect-top-left"},{element:wt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:s.x+s.width-W,y:s.y-q},Zt),style:{cursor:"ne-resize"}},K),posType:"rect-top-right"},{element:wt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:s.x-q,y:s.y+s.height-W},Zt),style:{cursor:"sw-resize"}},K),posType:"rect-bottom-left"},{element:wt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:s.x+s.width-W,y:s.y+s.height-W},Zt),style:{cursor:"se-resize"}},K),posType:"rect-bottom-right"},{element:wt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:s.x-q,y:s.y+s.height/2-W-E},Zt),style:{cursor:"w-resize"}},K),posType:"rect-left"},{element:wt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:s.x+s.width/2-W-E,y:s.y-q},Zt),style:{cursor:"n-resize"}},K),posType:"rect-top"},{element:wt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:s.x+s.width-W,y:s.y+s.height/2-W-E},Zt),style:{cursor:"e-resize"}},K),posType:"rect-right"},{element:wt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:s.x+s.width/2-W-E,y:s.y+s.height-W},Zt),style:{cursor:"s-resize"}},K),posType:"rect-bottom"}]},Mt=(K,U)=>{let s=(0,x.$)(1),E={stroke:v.u$.stroke,"stroke-width":(0,x.$)(v.u$.strokeWidth),"stroke-linecap":v.u$.strokeLinecap},W={fill:v.bf.fill,stroke:v.bf.stroke,"stroke-width":(0,x.$)(v.bf.strokeWidth)};return wt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:U.x-s,y1:U.y,x2:U.x-s,y2:U.y+U.height},E)},K),wt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:U.x,y1:U.y-s,x2:U.x+U.width,y2:U.y-s},E)},K),wt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:U.x+U.width+s,y1:U.y,x2:U.x+U.width+s,y2:U.y+U.height},E)},K),wt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:U.x,y1:U.y+U.height+s,x2:U.x+U.width,y2:U.y+U.height+s},E)},K),[{element:wt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:U.x,y:U.y,width:U.width,height:U.height},W)},K),posType:"rect-center"}]},Pt=(K,U)=>((0,x.$)(-1),(0,x.$)(v.WR.strokeWidth),(0,x.$)(v.WR.strokeDasharray),wt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:U.x,y:U.y,width:U.width,height:U.height,class:"cursor-draw"},{fill:v.lq.fill})},K),[]),ct=(K,U)=>{let s={fill:v.$u.fill,stroke:v.$u.stroke,"stroke-width":(0,x.$)(v.$u.strokeWidth),"stroke-dasharray":(0,x.$)(v.$u.strokeDasharray)};jQuery(K).empty(),U.forEach(E=>{var W,q;let{size:ot}=E;if(!E.idx)return;wt("icdt-temp-index-rect-node-"+E.id,"rect",{attribute:Object.assign({x:ot.x-5,y:ot.y-5,width:ot.width+10,height:ot.height+10},s)},K);let{element:Xt}=(0,w.$)(Math.ceil(1e9*Math.random()),{size:{x:ot.x-76,y:ot.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(W=E.idx)&&void 0!==W?W:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(q=E.time)&&void 0!==q?q:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},K);Xt.classList.add("node-input"),jQuery(Xt).on("change",'input[name="idx"]',Zt=>{var Ht;E.idx=parseInt(null!==(Ht=Zt.target.value)&&void 0!==Ht?Ht:"0")}).on("change",'input[name="time"]',Zt=>{var Ht;E.time=parseFloat(null!==(Ht=Zt.target.value)&&void 0!==Ht?Ht:"0")}).on("click",'button[name="remove"]',Zt=>{E.idx=0,E.time=null,ct(K,U)})})},J=(K,U)=>{var s,E,W,q,ot,Xt;let{color:Zt,opacity:Ht,path:jt,url:dt,base64:qt}=null!==(s=null==U||null===(E=U.svg)||void 0===E?void 0:E.background)&&void 0!==s?s:{},{x:j,y:c,width:H,height:st}=null!==(W=null==U||null===(q=U.svg)||void 0===q?void 0:q.viewBox)&&void 0!==W?W:{x:0,y:0,width:0,height:0};(0,T.L)(void 0,{size:{x:0,y:(0,x.$)(-10),width:100,height:20},attribute:{fill:"#999",textAnchor:"start",alignmentBaseline:"central",fontSize:(0,x.$)(12),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(ot=null!==(Xt=null==U?void 0:U.name)&&void 0!==Xt?Xt:null==U?void 0:U.code)&&void 0!==ot?ot:void 0}}},K),(0,V.a)(void 0,{size:{x:j,y:c,width:H,height:st},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,x.$)(1),strokeDasharray:(0,x.$)(10),class:"hide-on-viewer"}},K),Zt&&(0,V.a)(void 0,{size:{x:j,y:c,width:H,height:st},attribute:{fill:Zt,fillOpacity:Ht}},K),jt&&(0,G.B)(void 0,{size:{x:j,y:c,width:H,height:st},source:{type:"image",image:{path:jt,url:dt,base64:qt}}},K)},ft=(K,U,s)=>{var E;switch(jQuery(K).empty(),null===(E=U.test)||void 0===E?void 0:E.type){case"truefalse":var W;if(null!==(W=U.test)&&void 0!==W&&W.showselection){var q,ot,Xt;let bt=null==U||null===(q=U.test)||void 0===q||null===(q=q.answer)||void 0===q||null===(q=q.truefalse)||void 0===q?void 0:q.value;null===(ot=U.svg)||void 0===ot||ot.nodes.filter(_t=>{var At;return"truefalse"==(null===(At=_t.source)||void 0===At||null===(At=At.test)||void 0===At?void 0:At.type)&&_t.id!=bt}).forEach(_t=>{var At;let{x:Bt,y:Yt,width:$t,height:oe}=null!==(At=null==_t?void 0:_t.size)&&void 0!==At?At:{x:0,y:0,width:0,height:0};(0,P.K)(Math.ceil(1e9*Math.random()),{size:{x:Bt-.5,y:Yt-.5,width:$t+1,height:oe+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},K)}),null!=U&&null!==(Xt=U.test)&&void 0!==Xt&&null!==(Xt=Xt.answer)&&void 0!==Xt&&Xt.truefalse&&bt&&(_t=>{let At=B.J.findNode(bt),{x:Bt,y:Yt,width:$t,height:oe}=null!==(_t=null==At?void 0:At.size)&&void 0!==_t?_t:{x:0,y:0,width:0,height:0};(0,P.K)(Math.ceil(1e9*Math.random()),{size:{x:Bt-2,y:Yt-2,width:$t+4,height:oe+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},K)})()}break;case"singlechoice":var Zt;if(null!==(Zt=U.test)&&void 0!==Zt&&Zt.showselection){var Ht,jt,dt;let bt=null==U||null===(Ht=U.test)||void 0===Ht||null===(Ht=Ht.answer)||void 0===Ht||null===(Ht=Ht.singlechoice)||void 0===Ht?void 0:Ht.value;null===(jt=U.svg)||void 0===jt||jt.nodes.filter(_t=>{var At;return"singlechoice"==(null===(At=_t.source)||void 0===At||null===(At=At.test)||void 0===At?void 0:At.type)&&_t.id!=bt}).forEach(_t=>{var At;let{x:Bt,y:Yt,width:$t,height:oe}=null!==(At=null==_t?void 0:_t.size)&&void 0!==At?At:{x:0,y:0,width:0,height:0};(0,P.K)(Math.ceil(1e9*Math.random()),{size:{x:Bt-.5,y:Yt-.5,width:$t+1,height:oe+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},K)}),null!=U&&null!==(dt=U.test)&&void 0!==dt&&null!==(dt=dt.answer)&&void 0!==dt&&dt.singlechoice&&bt&&(_t=>{let At=B.J.findNode(bt),{x:Bt,y:Yt,width:$t,height:oe}=null!==(_t=null==At?void 0:At.size)&&void 0!==_t?_t:{x:0,y:0,width:0,height:0};(0,P.K)(Math.ceil(1e9*Math.random()),{size:{x:Bt-2,y:Yt-2,width:$t+4,height:oe+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},K)})()}break;case"multichoice":var qt;if(null!==(qt=U.test)&&void 0!==qt&&qt.showselection){var j,c,H,st;let bt=null!==(j=null==U||null===(c=U.test)||void 0===c||null===(c=c.answer)||void 0===c||null===(c=c.multichoice)||void 0===c?void 0:c.map(_t=>_t.value))&&void 0!==j?j:[];var gt;null===(H=U.svg)||void 0===H||H.nodes.filter(_t=>{var At;return"multichoice"==(null===(At=_t.source)||void 0===At||null===(At=At.test)||void 0===At?void 0:At.type)&&!bt.includes(_t.id)}).forEach(_t=>{var At;let{x:Bt,y:Yt,width:$t,height:oe}=null!==(At=null==_t?void 0:_t.size)&&void 0!==At?At:{x:0,y:0,width:0,height:0};(0,V.a)(Math.ceil(1e9*Math.random()),{size:{x:Bt-.5,y:Yt-.5,width:$t+1,height:oe+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},K)}),null!=U&&null!==(st=U.test)&&void 0!==st&&null!==(st=st.answer)&&void 0!==st&&st.multichoice&&bt.length&&(null==U||null===(gt=U.test)||void 0===gt||null===(gt=gt.answer)||void 0===gt||gt.multichoice.forEach(_t=>{var At;let zt=B.J.findNode(_t.value),{x:Yt,y:$t,width:oe,height:re}=null!==(At=null==zt?void 0:zt.size)&&void 0!==At?At:{x:0,y:0,width:0,height:0};(0,V.a)(Math.ceil(1e9*Math.random()),{size:{x:Yt-2,y:$t-2,width:oe+4,height:re+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},K)}))}break;case"fill":var tt,L;null!=U&&null!==(tt=U.test)&&void 0!==tt&&null!==(tt=tt.answer)&&void 0!==tt&&tt.fill&&(null==U||null===(L=U.test)||void 0===L||null===(L=L.answer)||void 0===L||L.fill.forEach(bt=>{jQuery("#"+s.id).find(`input[type="text"][data-key="${bt.key}"]`).val(bt.value)}));break;case"matching":var rt,ut,Lt,Tt;if(null!=U&&null!==(rt=U.test)&&void 0!==rt&&null!==(rt=rt.answer)&&void 0!==rt&&rt.matching)if("matching-empty"==(null===(ut=s.source)||void 0===ut||null===(ut=ut.test)||void 0===ut?void 0:ut.type))null==U||null===(Tt=U.test)||void 0===Tt||null===(Tt=Tt.answer)||void 0===Tt||Tt.matching.filter(bt=>{var _t;return bt.key==(null===(_t=s.source)||void 0===_t||null===(_t=_t.test)||void 0===_t||null===(_t=_t.matching)||void 0===_t?void 0:_t.key)}).forEach(bt=>{});else if("matching-content"==(null===(Lt=s.source)||void 0===Lt||null===(Lt=Lt.test)||void 0===Lt?void 0:Lt.type)){var Nt;null==U||null===(Nt=U.test)||void 0===Nt||null===(Nt=Nt.answer)||void 0===Nt||Nt.matching.filter(bt=>{var _t;return bt.value==(null===(_t=s.source)||void 0===_t||null===(_t=_t.test)||void 0===_t||null===(_t=_t.matching)||void 0===_t?void 0:_t.key)}).forEach(bt=>{})}}}},1955:(ce,Ut,b)=>{b.d(Ut,{_:()=>O});var y=b(2806);const O=u=>{switch(null==u?void 0:u.type){case y.QQ.IMAGE:return"www.tabca.vn"==location.hostname?`assets/iframe/lib/mk-image-viewer/viewer.html?url=${encodeURIComponent(u.readfileuploadurl+""+u.path)}`:""+u.readfileuploadurl+u.path;case y.QQ.AUDIO:return"www.tabca.vn"==location.hostname?`assets/iframe/lib/mk-audio-player-2/player.html?url=${encodeURIComponent(u.readfileuploadurl+""+u.path)}`:""+u.readfileuploadurl+u.path;case y.QQ.VIDEO:return"www.tabca.vn"==location.hostname?`assets/iframe/lib/mk-video-player/player.html?url=${encodeURIComponent(u.readfileuploadurl+""+u.path)}`:""+u.readfileuploadurl+u.path;case y.QQ.OFFICE:case y.QQ.WORD:case y.QQ.EXCEL:case y.QQ.POWERPOINT:return"www.tabca.vn"==location.hostname?`assets/iframe/lib/ONLYOFFICE/player.html?url=${encodeURIComponent(u.readfileuploadurl+""+u.path)}`:""+u.readfileuploadurl+u.path;case y.QQ.PDF:return"www.tabca.vn"==location.hostname?"assets/iframe/lib/PDFReader/web/viewer.html?file="+u.readfileuploadurl+u.path:""+u.readfileuploadurl+u.path;case y.QQ.HTML:case y.QQ.IMAGE_ANIMATION:case y.QQ.PHET:return""+u.readfileuploadurl+u.path;case y.QQ.ZIP:case y.QQ.SCORM:var C;return"imsmanifest.xml"==(null===(C=u.path)||void 0===C||null===(C=C.split("/"))||void 0===C?void 0:C.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+u.readfileuploadurl+u.path:""+u.readfileuploadurl+u.path;case y.QQ.TRACK:case y.QQ.TEXT:return""+u.readfileuploadurl+u.path;case y.QQ.LINK:switch(u.oss){case y.Tt.SCORM:return"assets/iframe/lib/ScormPool_Player/player.html?url="+u.url;case y.Tt.YOUTUBE:var k;return null!==(k=kt(u.url))&&void 0!==k?k:"";case y.Tt.PHET:var v;return null!==(v=u.url)&&void 0!==v?v:"";default:var D;return null!==(D=u.url)&&void 0!==D?D:""}default:return""+u.readfileuploadurl+u.path}},kt=u=>{let C=at(u);return C?"https://www.youtube.com/embed/"+C+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},at=u=>{let C=null==u?void 0:u.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return C&&C.length>=2?C[1]:null}},4393:(ce,Ut,b)=>{b.d(Ut,{FC:()=>C,LK:()=>u,SD:()=>v,T9:()=>k,pJ:()=>at});var y=b(467),O=b(369);const kt=new O.w({name:"_localDataDB",driverOrder:[O.C.IndexedDB,O.C.LocalStorage]}),at=function(){var D=(0,y.A)(function*(x){var V;yield kt.create(),(x=null!==(V=x)&&void 0!==V?V:{}).params=x.params||{};try{var P=(yield kt.get("ui-config"))||{};return"function"==typeof x.callback&&x.callback(P),P}catch(B){"function"==typeof x.callback&&x.callback(),console.error(B)}return{}});return function(V){return D.apply(this,arguments)}}(),u=function(){var D=(0,y.A)(function*(x){var V;yield kt.create();var G="ui-config";(x=null!==(V=x)&&void 0!==V?V:{}).params=x.params||{};try{var P=(yield kt.get(G))||{};Object.assign(P,x.params),yield kt.set(G,P),"function"==typeof x.callback&&x.callback(P)}catch(B){"function"==typeof x.callback&&x.callback(),console.error(B)}});return function(V){return D.apply(this,arguments)}}(),C=function(){var D=(0,y.A)(function*(x){var V;yield kt.create(),(x=null!==(V=x)&&void 0!==V?V:{}).params=x.params||{};try{var P=(yield kt.get("setting"))||{};return"function"==typeof x.callback&&x.callback(P),P}catch(B){"function"==typeof x.callback&&x.callback(),console.error(B)}return{}});return function(V){return D.apply(this,arguments)}}(),k=function(){var D=(0,y.A)(function*(x){var V;yield kt.create();var G="setting";(x=null!==(V=x)&&void 0!==V?V:{}).params=x.params||{};try{var P=(yield kt.get(G))||{};Object.assign(P,x.params),yield kt.set(G,P),"function"==typeof x.callback&&x.callback(P)}catch(B){"function"==typeof x.callback&&x.callback(),console.error(B)}});return function(V){return D.apply(this,arguments)}}(),v=function(){var D=(0,y.A)(function*(x){var V;yield kt.create(),(x=null!==(V=x)&&void 0!==V?V:{}).params=x.params||{};try{yield kt.set("setting",{}),"function"==typeof x.callback&&x.callback()}catch(P){"function"==typeof x.callback&&x.callback(),console.error(P)}});return function(V){return D.apply(this,arguments)}}()},1131:(ce,Ut,b)=>{function y(){}function O(t){return null==t?y:function(){return this.querySelector(t)}}function u(){return[]}function C(t){return null==t?u:function(){return this.querySelectorAll(t)}}function D(t){return function(){return this.matches(t)}}function x(t){return function(e){return e.matches(t)}}b.d(Ut,{qrM:()=>aa,n8j:()=>la});var V=Array.prototype.find;function P(){return this.firstElementChild}var w=Array.prototype.filter;function T(){return Array.from(this.children)}function z(t){return new Array(t.length)}function F(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function S(t,e,a,h,m,I){for(var et,M=0,nt=e.length,mt=I.length;M<mt;++M)(et=e[M])?(et.__data__=I[M],h[M]=et):a[M]=new F(t,I[M]);for(;M<nt;++M)(et=e[M])&&(m[M]=et)}function Q(t,e,a,h,m,I,M){var et,nt,ee,mt=new Map,St=e.length,Qt=I.length,Jt=new Array(St);for(et=0;et<St;++et)(nt=e[et])&&(Jt[et]=ee=M.call(nt,nt.__data__,et,e)+"",mt.has(ee)?m[et]=nt:mt.set(ee,nt));for(et=0;et<Qt;++et)ee=M.call(t,I[et],et,I)+"",(nt=mt.get(ee))?(h[et]=nt,nt.__data__=I[et],mt.delete(ee)):a[et]=new F(t,I[et]);for(et=0;et<St;++et)(nt=e[et])&&mt.get(Jt[et])===nt&&(m[et]=nt)}function Et(t){return t.__data__}function wt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Pt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}F.prototype={constructor:F,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var E="http://www.w3.org/1999/xhtml";const W={svg:"http://www.w3.org/2000/svg",xhtml:E,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function q(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),W.hasOwnProperty(e)?{space:W[e],local:t}:t}function ot(t){return function(){this.removeAttribute(t)}}function Xt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zt(t,e){return function(){this.setAttribute(t,e)}}function Ht(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function jt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function dt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function j(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function c(t){return function(){this.style.removeProperty(t)}}function H(t,e,a){return function(){this.style.setProperty(t,e,a)}}function st(t,e,a){return function(){var h=e.apply(this,arguments);null==h?this.style.removeProperty(t):this.style.setProperty(t,h,a)}}function tt(t,e){return t.style.getPropertyValue(e)||j(t).getComputedStyle(t,null).getPropertyValue(e)}function L(t){return function(){delete this[t]}}function rt(t,e){return function(){this[t]=e}}function ut(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function Tt(t){return t.trim().split(/^|\s+/)}function Nt(t){return t.classList||new bt(t)}function bt(t){this._node=t,this._names=Tt(t.getAttribute("class")||"")}function _t(t,e){for(var a=Nt(t),h=-1,m=e.length;++h<m;)a.add(e[h])}function At(t,e){for(var a=Nt(t),h=-1,m=e.length;++h<m;)a.remove(e[h])}function zt(t){return function(){_t(this,t)}}function Bt(t){return function(){At(this,t)}}function Yt(t,e){return function(){(e.apply(this,arguments)?_t:At)(this,t)}}function oe(){this.textContent=""}function re(t){return function(){this.textContent=t}}function ue(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ze(){this.innerHTML=""}function be(t){return function(){this.innerHTML=t}}function Le(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ae(){this.nextSibling&&this.parentNode.appendChild(this)}function Ve(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function li(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===E&&e.documentElement.namespaceURI===E?e.createElement(t):e.createElementNS(a,t)}}function si(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function It(t){var e=q(t);return(e.local?si:li)(e)}function i(){return null}function o(){var t=this.parentNode;t&&t.removeChild(this)}function l(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function f(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function X(t){return function(){var e=this.__on;if(e){for(var I,a=0,h=-1,m=e.length;a<m;++a)I=e[a],t.type&&I.type!==t.type||I.name!==t.name?e[++h]=I:this.removeEventListener(I.type,I.listener,I.options);++h?e.length=h:delete this.__on}}}function A(t,e,a){return function(){var m,h=this.__on,I=function R(t){return function(e){t.call(this,e,this.__data__)}}(e);if(h)for(var M=0,et=h.length;M<et;++M)if((m=h[M]).type===t.type&&m.name===t.name)return this.removeEventListener(m.type,m.listener,m.options),this.addEventListener(m.type,m.listener=I,m.options=a),void(m.value=e);this.addEventListener(t.type,I,a),m={type:t.type,name:t.name,value:e,listener:I,options:a},h?h.push(m):this.__on=[m]}}function vt(t,e,a){var h=j(t),m=h.CustomEvent;"function"==typeof m?m=new m(e,a):(m=h.document.createEvent("Event"),a?(m.initEvent(e,a.bubbles,a.cancelable),m.detail=a.detail):m.initEvent(e,!1,!1)),t.dispatchEvent(m)}function xt(t,e){return function(){return vt(this,t,e)}}function Dt(t,e){return function(){return vt(this,t,e.apply(this,arguments))}}bt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var xe=[null];function ve(t,e){this._groups=t,this._parents=e}function we(){return new ve([[document.documentElement]],xe)}ve.prototype=we.prototype={constructor:ve,select:function kt(t){"function"!=typeof t&&(t=O(t));for(var e=this._groups,a=e.length,h=new Array(a),m=0;m<a;++m)for(var nt,mt,I=e[m],M=I.length,et=h[m]=new Array(M),St=0;St<M;++St)(nt=I[St])&&(mt=t.call(nt,nt.__data__,St,I))&&("__data__"in nt&&(mt.__data__=nt.__data__),et[St]=mt);return new ve(h,this._parents)},selectAll:function v(t){t="function"==typeof t?function k(t){return function(){return function at(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):C(t);for(var e=this._groups,a=e.length,h=[],m=[],I=0;I<a;++I)for(var nt,M=e[I],et=M.length,mt=0;mt<et;++mt)(nt=M[mt])&&(h.push(t.call(nt,nt.__data__,mt,M)),m.push(nt));return new ve(h,m)},selectChild:function B(t){return this.select(null==t?P:function G(t){return function(){return V.call(this.children,t)}}("function"==typeof t?t:x(t)))},selectChildren:function d(t){return this.selectAll(null==t?T:function N(t){return function(){return w.call(this.children,t)}}("function"==typeof t?t:x(t)))},filter:function Y(t){"function"!=typeof t&&(t=D(t));for(var e=this._groups,a=e.length,h=new Array(a),m=0;m<a;++m)for(var nt,I=e[m],M=I.length,et=h[m]=[],mt=0;mt<M;++mt)(nt=I[mt])&&t.call(nt,nt.__data__,mt,I)&&et.push(nt);return new ve(h,this._parents)},data:function Rt(t,e){if(!arguments.length)return Array.from(this,Et);var a=e?Q:S,h=this._parents,m=this._groups;"function"!=typeof t&&(t=function it(t){return function(){return t}}(t));for(var I=m.length,M=new Array(I),et=new Array(I),nt=new Array(I),mt=0;mt<I;++mt){var St=h[mt],Qt=m[mt],Jt=Qt.length,ee=wt(t.call(St,St&&St.__data__,mt,h)),Ee=ee.length,Ce=et[mt]=new Array(Ee),Wt=M[mt]=new Array(Ee);a(St,Qt,Ce,Wt,nt[mt]=new Array(Jt),ee,e);for(var fe,me,se=0,ie=0;se<Ee;++se)if(fe=Ce[se]){for(se>=ie&&(ie=se+1);!(me=Wt[ie])&&++ie<Ee;);fe._next=me||null}}return(M=new ve(M,h))._enter=et,M._exit=nt,M},enter:function pt(){return new ve(this._enter||this._groups.map(z),this._parents)},exit:function ne(){return new ve(this._exit||this._groups.map(z),this._parents)},join:function ht(t,e,a){var h=this.enter(),m=this,I=this.exit();return"function"==typeof t?(h=t(h))&&(h=h.selection()):h=h.append(t+""),null!=e&&(m=e(m))&&(m=m.selection()),null==a?I.remove():a(I),h&&m?h.merge(m).order():m},merge:function Ct(t){for(var e=t.selection?t.selection():t,a=this._groups,h=e._groups,m=a.length,M=Math.min(m,h.length),et=new Array(m),nt=0;nt<M;++nt)for(var ee,mt=a[nt],St=h[nt],Qt=mt.length,Jt=et[nt]=new Array(Qt),Ee=0;Ee<Qt;++Ee)(ee=mt[Ee]||St[Ee])&&(Jt[Ee]=ee);for(;nt<m;++nt)et[nt]=a[nt];return new ve(et,this._parents)},selection:function Se(){return this},order:function Ot(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var M,h=t[e],m=h.length-1,I=h[m];--m>=0;)(M=h[m])&&(I&&4^M.compareDocumentPosition(I)&&I.parentNode.insertBefore(M,I),I=M);return this},sort:function Mt(t){function e(Qt,Jt){return Qt&&Jt?t(Qt.__data__,Jt.__data__):!Qt-!Jt}t||(t=Pt);for(var a=this._groups,h=a.length,m=new Array(h),I=0;I<h;++I){for(var mt,M=a[I],et=M.length,nt=m[I]=new Array(et),St=0;St<et;++St)(mt=M[St])&&(nt[St]=mt);nt.sort(e)}return new ve(m,this._parents).order()},call:function ct(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function J(){return Array.from(this)},node:function ft(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var h=t[e],m=0,I=h.length;m<I;++m){var M=h[m];if(M)return M}return null},size:function K(){let t=0;for(const e of this)++t;return t},empty:function U(){return!this.node()},each:function s(t){for(var e=this._groups,a=0,h=e.length;a<h;++a)for(var et,m=e[a],I=0,M=m.length;I<M;++I)(et=m[I])&&t.call(et,et.__data__,I,m);return this},attr:function qt(t,e){var a=q(t);if(arguments.length<2){var h=this.node();return a.local?h.getAttributeNS(a.space,a.local):h.getAttribute(a)}return this.each((null==e?a.local?Xt:ot:"function"==typeof e?a.local?dt:jt:a.local?Ht:Zt)(a,e))},style:function gt(t,e,a){return arguments.length>1?this.each((null==e?c:"function"==typeof e?st:H)(t,e,null==a?"":a)):tt(this.node(),t)},property:function Lt(t,e){return arguments.length>1?this.each((null==e?L:"function"==typeof e?ut:rt)(t,e)):this.node()[t]},classed:function $t(t,e){var a=Tt(t+"");if(arguments.length<2){for(var h=Nt(this.node()),m=-1,I=a.length;++m<I;)if(!h.contains(a[m]))return!1;return!0}return this.each(("function"==typeof e?Yt:e?zt:Bt)(a,e))},text:function _e(t){return arguments.length?this.each(null==t?oe:("function"==typeof t?ue:re)(t)):this.node().textContent},html:function Oe(t){return arguments.length?this.each(null==t?ze:("function"==typeof t?Le:be)(t)):this.node().innerHTML},raise:function We(){return this.each(Ae)},lower:function ri(){return this.each(Ve)},append:function Z(t){var e="function"==typeof t?t:It(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function r(t,e){var a="function"==typeof t?t:It(t),h=null==e?i:"function"==typeof e?e:O(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),h.apply(this,arguments)||null)})},remove:function n(){return this.each(o)},clone:function p(t){return this.select(t?f:l)},datum:function g(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function lt(t,e,a){var m,M,h=function _(t){return t.trim().split(/^|\s+/).map(function(e){var a="",h=e.indexOf(".");return h>=0&&(a=e.slice(h+1),e=e.slice(0,h)),{type:e,name:a}})}(t+""),I=h.length;if(!(arguments.length<2)){for(et=e?A:X,m=0;m<I;++m)this.each(et(h[m],e,a));return this}var et=this.node().__on;if(et)for(var St,nt=0,mt=et.length;nt<mt;++nt)for(m=0,St=et[nt];m<I;++m)if((M=h[m]).type===St.type&&M.name===St.name)return St.value},dispatch:function Gt(t,e){return this.each(("function"==typeof e?Dt:xt)(t,e))},[Symbol.iterator]:function*pe(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var M,h=t[e],m=0,I=h.length;m<I;++m)(M=h[m])&&(yield M)}};const Ie=we;var xi={value:()=>{}};function fn(){for(var h,t=0,e=arguments.length,a={};t<e;++t){if(!(h=arguments[t]+"")||h in a||/[\s.]/.test(h))throw new Error("illegal type: "+h);a[h]=[]}return new Pi(a)}function Pi(t){this._=t}function ar(t,e){for(var m,a=0,h=t.length;a<h;++a)if((m=t[a]).name===e)return m.value}function gn(t,e,a){for(var h=0,m=t.length;h<m;++h)if(t[h].name===e){t[h]=xi,t=t.slice(0,h).concat(t.slice(h+1));break}return null!=a&&t.push({name:e,value:a}),t}Pi.prototype=fn.prototype={constructor:Pi,on:function(t,e){var m,a=this._,h=function lr(t,e){return t.trim().split(/^|\s+/).map(function(a){var h="",m=a.indexOf(".");if(m>=0&&(h=a.slice(m+1),a=a.slice(0,m)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:h}})}(t+"",a),I=-1,M=h.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++I<M;)if(m=(t=h[I]).type)a[m]=gn(a[m],t.name,e);else if(null==e)for(m in a)a[m]=gn(a[m],t.name,null);return this}for(;++I<M;)if((m=(t=h[I]).type)&&(m=ar(a[m],t.name)))return m},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new Pi(t)},call:function(t,e){if((m=arguments.length-2)>0)for(var m,I,a=new Array(m),h=0;h<m;++h)a[h]=arguments[h+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(h=0,m=(I=this._[t]).length;h<m;++h)I[h].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var h=this._[t],m=0,I=h.length;m<I;++m)h[m].value.apply(e,a)}};const or=fn;var Ni,Oi,fi=0,_i=0,Ei=0,yn=1e3,Mi=0,di=0,Di=0,Si="object"==typeof performance&&performance.now?performance:Date,mn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return di||(mn(sr),di=Si.now()+Di)}function sr(){di=0}function ji(){this._call=this._time=this._next=null}function pn(t,e,a){var h=new ji;return h.restart(t,e,a),h}function wn(){di=(Mi=Si.now())+Di,fi=_i=0;try{!function dr(){Xi(),++fi;for(var e,t=Ni;t;)(e=di-t._time)>=0&&t._call.call(void 0,e),t=t._next;--fi}()}finally{fi=0,function hr(){for(var t,a,e=Ni,h=1/0;e;)e._call?(h>e._time&&(h=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);Oi=t,Vi(h)}(),di=0}}function ur(){var t=Si.now(),e=t-Mi;e>yn&&(Di-=e,Mi=t)}function Vi(t){fi||(_i&&(_i=clearTimeout(_i)),t-di>24?(t<1/0&&(_i=setTimeout(wn,t-Si.now()-Di)),Ei&&(Ei=clearInterval(Ei))):(Ei||(Mi=Si.now(),Ei=setInterval(ur,yn)),fi=1,mn(wn)))}function bn(t,e,a){var h=new ji;return h.restart(m=>{h.stop(),t(m+e)},e=null==e?0:+e,a),h}ji.prototype=pn.prototype={constructor:ji,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Xi():+a)+(null==e?0:+e),!this._next&&Oi!==this&&(Oi?Oi._next=this:Ni=this,Oi=this),this._call=t,this._time=a,Vi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vi())}};var cr=or("start","end","cancel","interrupt"),vr=[],xn=0,zi=3;function Bi(t,e,a,h,m,I){var M=t.__transition;if(M){if(a in M)return}else t.__transition={};!function fr(t,e,a){var m,h=t.__transition;function M(mt){var St,Qt,Jt,ee;if(1!==a.state)return nt();for(St in h)if((ee=h[St]).name===a.name){if(ee.state===zi)return bn(M);4===ee.state?(ee.state=6,ee.timer.stop(),ee.on.call("interrupt",t,t.__data__,ee.index,ee.group),delete h[St]):+St<e&&(ee.state=6,ee.timer.stop(),ee.on.call("cancel",t,t.__data__,ee.index,ee.group),delete h[St])}if(bn(function(){a.state===zi&&(a.state=4,a.timer.restart(et,a.delay,a.time),et(mt))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=zi,m=new Array(Jt=a.tween.length),St=0,Qt=-1;St<Jt;++St)(ee=a.tween[St].value.call(t,t.__data__,a.index,a.group))&&(m[++Qt]=ee);m.length=Qt+1}}function et(mt){for(var St=mt<a.duration?a.ease.call(null,mt/a.duration):(a.timer.restart(nt),a.state=5,1),Qt=-1,Jt=m.length;++Qt<Jt;)m[Qt].call(t,St);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),nt())}function nt(){for(var mt in a.state=6,a.timer.stop(),delete h[e],h)return;delete t.__transition}h[e]=a,a.timer=pn(function I(mt){a.state=1,a.timer.restart(M,a.delay,a.time),a.delay<=mt&&M(mt-a.delay)},0,a.time)}(t,a,{name:e,index:h,group:m,on:cr,tween:vr,time:I.time,delay:I.delay,duration:I.duration,ease:I.ease,timer:null,state:xn})}function tn(t,e){var a=Ye(t,e);if(a.state>xn)throw new Error("too late; already scheduled");return a}function qe(t,e){var a=Ye(t,e);if(a.state>zi)throw new Error("too late; already running");return a}function Ye(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function ai(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Fi,On=180/Math.PI,en={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,h,m,I){var M,et,nt;return(M=Math.sqrt(t*t+e*e))&&(t/=M,e/=M),(nt=t*a+e*h)&&(a-=t*nt,h-=e*nt),(et=Math.sqrt(a*a+h*h))&&(a/=et,h/=et,nt/=et),t*h<e*a&&(t=-t,e=-e,nt=-nt,M=-M),{translateX:m,translateY:I,rotate:Math.atan2(e,t)*On,skewX:Math.atan(nt)*On,scaleX:M,scaleY:et}}function kn(t,e,a,h){function m(mt){return mt.length?mt.pop()+" ":""}return function(mt,St){var Qt=[],Jt=[];return mt=t(mt),St=t(St),function I(mt,St,Qt,Jt,ee,Ee){if(mt!==Qt||St!==Jt){var Ce=ee.push("translate(",null,e,null,a);Ee.push({i:Ce-4,x:ai(mt,Qt)},{i:Ce-2,x:ai(St,Jt)})}else(Qt||Jt)&&ee.push("translate("+Qt+e+Jt+a)}(mt.translateX,mt.translateY,St.translateX,St.translateY,Qt,Jt),function M(mt,St,Qt,Jt){mt!==St?(mt-St>180?St+=360:St-mt>180&&(mt+=360),Jt.push({i:Qt.push(m(Qt)+"rotate(",null,h)-2,x:ai(mt,St)})):St&&Qt.push(m(Qt)+"rotate("+St+h)}(mt.rotate,St.rotate,Qt,Jt),function et(mt,St,Qt,Jt){mt!==St?Jt.push({i:Qt.push(m(Qt)+"skewX(",null,h)-2,x:ai(mt,St)}):St&&Qt.push(m(Qt)+"skewX("+St+h)}(mt.skewX,St.skewX,Qt,Jt),function nt(mt,St,Qt,Jt,ee,Ee){if(mt!==Qt||St!==Jt){var Ce=ee.push(m(ee)+"scale(",null,",",null,")");Ee.push({i:Ce-4,x:ai(mt,Qt)},{i:Ce-2,x:ai(St,Jt)})}else(1!==Qt||1!==Jt)&&ee.push(m(ee)+"scale("+Qt+","+Jt+")")}(mt.scaleX,mt.scaleY,St.scaleX,St.scaleY,Qt,Jt),mt=St=null,function(ee){for(var Wt,Ee=-1,Ce=Jt.length;++Ee<Ce;)Qt[(Wt=Jt[Ee]).i]=Wt.x(ee);return Qt.join("")}}}var wr=kn(function mr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?en:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),br=kn(function pr(t){return null!=t&&(Fi||(Fi=document.createElementNS("http://www.w3.org/2000/svg","g")),Fi.setAttribute("transform",t),t=Fi.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):en},", ",")",")");function xr(t,e){var a,h;return function(){var m=qe(this,t),I=m.tween;if(I!==a)for(var M=0,et=(h=a=I).length;M<et;++M)if(h[M].name===e){(h=h.slice()).splice(M,1);break}m.tween=h}}function _r(t,e,a){var h,m;if("function"!=typeof a)throw new Error;return function(){var I=qe(this,t),M=I.tween;if(M!==h){m=(h=M).slice();for(var et={name:e,value:a},nt=0,mt=m.length;nt<mt;++nt)if(m[nt].name===e){m[nt]=et;break}nt===mt&&m.push(et)}I.tween=m}}function nn(t,e,a){var h=t._id;return t.each(function(){var m=qe(this,h);(m.value||(m.value={}))[e]=a.apply(this,arguments)}),function(m){return Ye(m,h).value[e]}}function rn(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function Ln(t,e){var a=Object.create(t.prototype);for(var h in e)a[h]=e[h];return a}function ki(){}var Ui=1/.7,gi="\\s*([+-]?\\d+)\\s*",Ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${gi},${gi},${gi}\\)$`),kr=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),Lr=new RegExp(`^rgba\\(${gi},${gi},${gi},${Ti}\\)$`),Tr=new RegExp(`^rgba\\(${$e},${$e},${$e},${Ti}\\)$`),Cr=new RegExp(`^hsl\\(${Ti},${$e},${$e}\\)$`),Ar=new RegExp(`^hsla\\(${Ti},${$e},${$e},${Ti}\\)$`),Tn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ci(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?In(e):3===a?new Ge(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Wi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Wi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Ge(e[1],e[2],e[3],1):(e=kr.exec(t))?new Ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Lr.exec(t))?Wi(e[1],e[2],e[3],e[4]):(e=Tr.exec(t))?Wi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Cr.exec(t))?Nn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Nn(e[1],e[2]/100,e[3]/100,e[4]):Tn.hasOwnProperty(t)?In(Tn[t]):"transparent"===t?new Ge(NaN,NaN,NaN,0):null}function In(t){return new Ge(t>>16&255,t>>8&255,255&t,1)}function Wi(t,e,a,h){return h<=0&&(t=e=a=NaN),new Ge(t,e,a,h)}function Gi(t,e,a,h){return 1===arguments.length?function Pr(t){return t instanceof ki||(t=Ci(t)),t?new Ge((t=t.rgb()).r,t.g,t.b,t.opacity):new Ge}(t):new Ge(t,e,a,null==h?1:h)}function Ge(t,e,a,h){this.r=+t,this.g=+e,this.b=+a,this.opacity=+h}function Rn(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}`}function Pn(){const t=Qi(this.opacity);return`${1===t?"rgb(":"rgba("}${ui(this.r)}, ${ui(this.g)}, ${ui(this.b)}${1===t?")":`, ${t})`}`}function Qi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ui(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hi(t){return((t=ui(t))<16?"0":"")+t.toString(16)}function Nn(t,e,a,h){return h<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new Xe(t,e,a,h)}function Mn(t){if(t instanceof Xe)return new Xe(t.h,t.s,t.l,t.opacity);if(t instanceof ki||(t=Ci(t)),!t)return new Xe;if(t instanceof Xe)return t;var e=(t=t.rgb()).r/255,a=t.g/255,h=t.b/255,m=Math.min(e,a,h),I=Math.max(e,a,h),M=NaN,et=I-m,nt=(I+m)/2;return et?(M=e===I?(a-h)/et+6*(a<h):a===I?(h-e)/et+2:(e-a)/et+4,et/=nt<.5?I+m:2-I-m,M*=60):et=nt>0&&nt<1?0:M,new Xe(M,et,nt,t.opacity)}function Xe(t,e,a,h){this.h=+t,this.s=+e,this.l=+a,this.opacity=+h}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Ji(t){return Math.max(0,Math.min(1,t||0))}function ln(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function jn(t,e,a,h,m){var I=t*t,M=I*t;return((1-3*t+3*I-M)*e+(4-6*I+3*M)*a+(1+3*t+3*I-3*M)*h+M*m)/6}rn(ki,Ci,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cn,formatHex:Cn,formatHex8:function Ir(){return this.rgb().formatHex8()},formatHsl:function Rr(){return Mn(this).formatHsl()},formatRgb:An,toString:An}),rn(Ge,Gi,Ln(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ge(ui(this.r),ui(this.g),ui(this.b),Qi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rn,formatHex:Rn,formatHex8:function Nr(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}${hi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Pn,toString:Pn})),rn(Xe,function Mr(t,e,a,h){return 1===arguments.length?Mn(t):new Xe(t,e,a,null==h?1:h)},Ln(ki,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Xe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Xe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,h=a+(a<.5?a:1-a)*e,m=2*a-h;return new Ge(ln(t>=240?t-240:t+120,m,h),ln(t,m,h),ln(t<120?t+240:t-120,m,h),this.opacity)},clamp(){return new Xe(Dn(this.h),Ji(this.s),Ji(this.l),Qi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Qi(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Ji(this.s)}%, ${100*Ji(this.l)}%${1===t?")":`, ${t})`}`}}));const zn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):zn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kr(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function zr(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(h){return Math.pow(t+h*e,a)}}(e,a,t):zn(isNaN(e)?a:e)}}(e);function h(m,I){var M=a((m=Gi(m)).r,(I=Gi(I)).r),et=a(m.g,I.g),nt=a(m.b,I.b),mt=Bn(m.opacity,I.opacity);return function(St){return m.r=M(St),m.g=et(St),m.b=nt(St),m.opacity=mt(St),m+""}}return h.gamma=t,h}(1);function Un(t){return function(e){var M,et,a=e.length,h=new Array(a),m=new Array(a),I=new Array(a);for(M=0;M<a;++M)et=Gi(e[M]),h[M]=et.r||0,m[M]=et.g||0,I[M]=et.b||0;return h=t(h),m=t(m),I=t(I),et.opacity=1,function(nt){return et.r=h(nt),et.g=m(nt),et.b=I(nt),et+""}}}Un(function Dr(t){var e=t.length-1;return function(a){var h=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),m=t[h],I=t[h+1];return jn((a-h/e)*e,h>0?t[h-1]:2*m-I,m,I,h<e-1?t[h+2]:2*I-m)}}),Un(function jr(t){var e=t.length;return function(a){var h=Math.floor(((a%=1)<0?++a:a)*e);return jn((a-h/e)*e,t[(h+e-1)%e],t[h%e],t[(h+1)%e],t[(h+2)%e])}});var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,on=new RegExp(an.source,"g");function Ur(t,e){var h,m,I,a=an.lastIndex=on.lastIndex=0,M=-1,et=[],nt=[];for(t+="",e+="";(h=an.exec(t))&&(m=on.exec(e));)(I=m.index)>a&&(I=e.slice(a,I),et[M]?et[M]+=I:et[++M]=I),(h=h[0])===(m=m[0])?et[M]?et[M]+=m:et[++M]=m:(et[++M]=null,nt.push({i:M,x:ai(h,m)})),a=on.lastIndex;return a<e.length&&(I=e.slice(a),et[M]?et[M]+=I:et[++M]=I),et.length<2?nt[0]?function Fr(t){return function(e){return t(e)+""}}(nt[0].x):function Br(t){return function(){return t}}(e):(e=nt.length,function(mt){for(var Qt,St=0;St<e;++St)et[(Qt=nt[St]).i]=Qt.x(mt);return et.join("")})}function Wn(t,e){var a;return("number"==typeof e?ai:e instanceof Ci?Fn:(a=Ci(e))?(e=a,Fn):Ur)(t,e)}function Wr(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,a){var h,I,m=a+"";return function(){var M=this.getAttribute(t);return M===m?null:M===h?I:I=e(h=M,a)}}function Jr(t,e,a){var h,I,m=a+"";return function(){var M=this.getAttributeNS(t.space,t.local);return M===m?null:M===h?I:I=e(h=M,a)}}function Hr(t,e,a){var h,m,I;return function(){var M,nt,et=a(this);return null==et?void this.removeAttribute(t):(M=this.getAttribute(t))===(nt=et+"")?null:M===h&&nt===m?I:(m=nt,I=e(h=M,et))}}function Zr(t,e,a){var h,m,I;return function(){var M,nt,et=a(this);return null==et?void this.removeAttributeNS(t.space,t.local):(M=this.getAttributeNS(t.space,t.local))===(nt=et+"")?null:M===h&&nt===m?I:(m=nt,I=e(h=M,et))}}function qr(t,e){var a,h;function m(){var I=e.apply(this,arguments);return I!==h&&(a=(h=I)&&function Vr(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,I)),a}return m._value=e,m}function $r(t,e){var a,h;function m(){var I=e.apply(this,arguments);return I!==h&&(a=(h=I)&&function Xr(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,I)),a}return m._value=e,m}function el(t,e){return function(){tn(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){tn(this,t).delay=e}}function rl(t,e){return function(){qe(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){qe(this,t).duration=e}}var bl=Ie.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var zl=0;function ei(t,e,a,h){this._groups=t,this._parents=e,this._name=a,this._id=h}function Qn(){return++zl}var ii=Ie.prototype;ei.prototype=function Kl(t){return Ie().transition(t)}.prototype={constructor:ei,select:function pl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=O(t));for(var h=this._groups,m=h.length,I=new Array(m),M=0;M<m;++M)for(var St,Qt,et=h[M],nt=et.length,mt=I[M]=new Array(nt),Jt=0;Jt<nt;++Jt)(St=et[Jt])&&(Qt=t.call(St,St.__data__,Jt,et))&&("__data__"in St&&(Qt.__data__=St.__data__),mt[Jt]=Qt,Bi(mt[Jt],e,a,Jt,mt,Ye(St,a)));return new ei(I,this._parents,e,a)},selectAll:function wl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=C(t));for(var h=this._groups,m=h.length,I=[],M=[],et=0;et<m;++et)for(var St,nt=h[et],mt=nt.length,Qt=0;Qt<mt;++Qt)if(St=nt[Qt]){for(var ee,Jt=t.call(St,St.__data__,Qt,nt),Ee=Ye(St,a),Ce=0,Wt=Jt.length;Ce<Wt;++Ce)(ee=Jt[Ce])&&Bi(ee,e,a,Ce,Jt,Ee);I.push(Jt),M.push(St)}return new ei(I,M,e,a)},selectChild:ii.selectChild,selectChildren:ii.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=D(t));for(var e=this._groups,a=e.length,h=new Array(a),m=0;m<a;++m)for(var nt,I=e[m],M=I.length,et=h[m]=[],mt=0;mt<M;++mt)(nt=I[mt])&&t.call(nt,nt.__data__,mt,I)&&et.push(nt);return new ei(h,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,h=e.length,I=Math.min(h,a.length),M=new Array(h),et=0;et<I;++et)for(var Jt,nt=e[et],mt=a[et],St=nt.length,Qt=M[et]=new Array(St),ee=0;ee<St;++ee)(Jt=nt[ee]||mt[ee])&&(Qt[ee]=Jt);for(;et<h;++et)M[et]=e[et];return new ei(M,this._parents,this._name,this._id)},selection:function xl(){return new bl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,a=Qn(),h=this._groups,m=h.length,I=0;I<m;++I)for(var nt,M=h[I],et=M.length,mt=0;mt<et;++mt)if(nt=M[mt]){var St=Ye(nt,e);Bi(nt,t,a,mt,M,{time:St.time+St.delay+St.duration,delay:0,duration:St.duration,ease:St.ease})}return new ei(h,this._parents,t,a)},call:ii.call,nodes:ii.nodes,node:ii.node,size:ii.size,empty:ii.empty,each:ii.each,on:function gl(t,e){var a=this._id;return arguments.length<2?Ye(this.node(),a).on.on(t):this.each(function fl(t,e,a){var h,m,I=function vl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?tn:qe;return function(){var M=I(this,t),et=M.on;et!==h&&(m=(h=et).copy()).on(e,a),M.on=m}}(a,t,e))},attr:function Yr(t,e){var a=q(t),h="transform"===a?br:Wn;return this.attrTween(t,"function"==typeof e?(a.local?Zr:Hr)(a,h,nn(this,"attr."+t,e)):null==e?(a.local?Gr:Wr)(a):(a.local?Jr:Qr)(a,h,e))},attrTween:function tl(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var h=q(t);return this.tween(a,(h.local?qr:$r)(h,e))},style:function kl(t,e,a){var h="transform"==(t+="")?wr:Wn;return null==e?this.styleTween(t,function _l(t,e){var a,h,m;return function(){var I=tt(this,t),M=(this.style.removeProperty(t),tt(this,t));return I===M?null:I===a&&M===h?m:m=e(a=I,h=M)}}(t,h)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,a){var h,m,I;return function(){var M=tt(this,t),et=a(this),nt=et+"";return null==et&&(this.style.removeProperty(t),nt=et=tt(this,t)),M===nt?null:M===h&&nt===m?I:(m=nt,I=e(h=M,et))}}(t,h,nn(this,"style."+t,e))).each(function Sl(t,e){var a,h,m,et,I="style."+e,M="end."+I;return function(){var nt=qe(this,t),mt=nt.on,St=null==nt.value[I]?et||(et=Gn(e)):void 0;(mt!==a||m!==St)&&(h=(a=mt).copy()).on(M,m=St),nt.on=h}}(this._id,t)):this.styleTween(t,function El(t,e,a){var h,I,m=a+"";return function(){var M=tt(this,t);return M===m?null:M===h?I:I=e(h=M,a)}}(t,h,e),a).on("end.style."+t,null)},styleTween:function Cl(t,e,a){var h="style."+(t+="");if(arguments.length<2)return(h=this.tween(h))&&h._value;if(null==e)return this.tween(h,null);if("function"!=typeof e)throw new Error;return this.tween(h,function Tl(t,e,a){var h,m;function I(){var M=e.apply(this,arguments);return M!==m&&(h=(m=M)&&function Ll(t,e,a){return function(h){this.style.setProperty(t,e.call(this,h),a)}}(t,M,a)),h}return I._value=e,I}(t,e,null==a?"":a))},text:function Rl(t){return this.tween("text","function"==typeof t?function Il(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(nn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Ml(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Nl(t){var e,a;function h(){var m=t.apply(this,arguments);return m!==a&&(e=(a=m)&&function Pl(t){return function(e){this.textContent=t.call(this,e)}}(m)),e}return h._value=t,h}(t))},remove:function ml(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var a=this._id;if(t+="",arguments.length<2){for(var M,h=Ye(this.node(),a).tween,m=0,I=h.length;m<I;++m)if((M=h[m]).name===t)return M.value;return null}return this.each((null==e?xr:_r)(a,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):Ye(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):Ye(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){qe(this,t).ease=e}}(e,t)):Ye(this.node(),e).ease},easeVarying:function ul(t){if("function"!=typeof t)throw new Error;return this.each(function dl(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;qe(this,t).ease=a}}(this._id,t))},end:function jl(){var t,e,a=this,h=a._id,m=a.size();return new Promise(function(I,M){var et={value:M},nt={value:function(){0==--m&&I()}};a.each(function(){var mt=qe(this,h),St=mt.on;St!==t&&((e=(t=St).copy())._.cancel.push(et),e._.interrupt.push(et),e._.end.push(nt)),mt.on=e}),0===m&&I()})},[Symbol.iterator]:ii[Symbol.iterator]};var Fl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}Ie.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var h,m,M,a=t.__transition,I=!0;if(a){for(M in e=null==e?null:e+"",a)(h=a[M]).name===e?(m=h.state>2&&h.state<5,h.state=6,h.timer.stop(),h.on.call(m?"interrupt":"cancel",t,t.__data__,h.index,h.group),delete a[M]):I=!1;I&&delete t.__transition}}(this,t)})},Ie.prototype.transition=function Wl(t){var e,a;t instanceof ei?(e=t._id,t=t._name):(e=Qn(),(a=Fl).time=Xi(),t=null==t?null:t+"");for(var h=this._groups,m=h.length,I=0;I<m;++I)for(var nt,M=h[I],et=M.length,mt=0;mt<et;++mt)(nt=M[mt])&&Bi(nt,t,e,mt,M,a||Ul(nt,e));return new ei(h,this._parents,t,e)};Math;function Ai(t){return{type:t}}function pi(t){return function(){return t}}function Vn(t){this._context=t}function ql(t){return new Vn(t)}["w","e"].map(Ai),["n","s"].map(Ai),["n","w","e","s","nw","ne","sw","se"].map(Ai),Vn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const cn=Math.PI,vn=2*cn,ci=1e-6,$l=vn-ci;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Yi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(h){this._+=h[0];for(let m=1,I=h.length;m<I;++m)this._+=Math.round(arguments[m]*a)/a+h[m]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,h,m){this._append`Q${+e},${+a},${this._x1=+h},${this._y1=+m}`}bezierCurveTo(e,a,h,m,I,M){this._append`C${+e},${+a},${+h},${+m},${this._x1=+I},${this._y1=+M}`}arcTo(e,a,h,m,I){if(e=+e,a=+a,h=+h,m=+m,(I=+I)<0)throw new Error(`negative radius: ${I}`);let M=this._x1,et=this._y1,nt=h-e,mt=m-a,St=M-e,Qt=et-a,Jt=St*St+Qt*Qt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Jt>ci)if(Math.abs(Qt*nt-mt*St)>ci&&I){let ee=h-M,Ee=m-et,Ce=nt*nt+mt*mt,Wt=ee*ee+Ee*Ee,Ft=Math.sqrt(Ce),se=Math.sqrt(Jt),ie=I*Math.tan((cn-Math.acos((Ce+Jt-Wt)/(2*Ft*se)))/2),fe=ie/se,me=ie/Ft;Math.abs(fe-1)>ci&&this._append`L${e+fe*St},${a+fe*Qt}`,this._append`A${I},${I},0,0,${+(Qt*ee>St*Ee)},${this._x1=e+me*nt},${this._y1=a+me*mt}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,h,m,I,M){if(e=+e,a=+a,M=!!M,(h=+h)<0)throw new Error(`negative radius: ${h}`);let et=h*Math.cos(m),nt=h*Math.sin(m),mt=e+et,St=a+nt,Qt=1^M,Jt=M?m-I:I-m;null===this._x1?this._append`M${mt},${St}`:(Math.abs(this._x1-mt)>ci||Math.abs(this._y1-St)>ci)&&this._append`L${mt},${St}`,h&&(Jt<0&&(Jt=Jt%vn+vn),Jt>$l?this._append`A${h},${h},0,1,${Qt},${e-et},${a-nt}A${h},${h},0,1,${Qt},${this._x1=mt},${this._y1=St}`:Jt>ci&&this._append`A${h},${h},0,${+(Jt>=cn)},${Qt},${this._x1=e+h*Math.cos(I)},${this._y1=a+h*Math.sin(I)}`)}rect(e,a,h,m){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${h=+h}v${+m}h${-h}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var a=pi(!0),h=null,m=ql,I=null,M=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const h=Math.floor(a);if(!(h>=0))throw new RangeError(`invalid digits: ${a}`);e=h}return t},()=>new Yi(e)}(et);function et(nt){var mt,Qt,ee,St=(nt=function Vl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(nt)).length,Jt=!1;for(null==h&&(I=m(ee=M())),mt=0;mt<=St;++mt)!(mt<St&&a(Qt=nt[mt],mt,nt))===Jt&&((Jt=!Jt)?I.lineStart():I.lineEnd()),Jt&&I.point(+t(Qt,mt,nt),+e(Qt,mt,nt));if(ee)return I=null,ee+""||null}return t="function"==typeof t?t:void 0===t?na:pi(t),e="function"==typeof e?e:void 0===e?ra:pi(e),et.x=function(nt){return arguments.length?(t="function"==typeof nt?nt:pi(+nt),et):t},et.y=function(nt){return arguments.length?(e="function"==typeof nt?nt:pi(+nt),et):e},et.defined=function(nt){return arguments.length?(a="function"==typeof nt?nt:pi(!!nt),et):a},et.curve=function(nt){return arguments.length?(m=nt,null!=h&&(I=m(h)),et):m},et.context=function(nt){return arguments.length?(null==nt?h=I=null:I=m(h=nt),et):h},et}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function wi(t,e,a){this.k=t,this.x=e,this.y=a}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},wi.prototype={constructor:wi,scale:function(t){return 1===t?this:new wi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new wi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new wi(1,0,0)}}]);