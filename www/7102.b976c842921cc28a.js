"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7102],{8779:(he,Mt,g)=>{g.d(Mt,{$u:()=>M,IB:()=>ct,WR:()=>I,bf:()=>D,eD:()=>ot,lq:()=>y,pZ:()=>T,u$:()=>O});const T={fill:"transparent",stroke:"#129bff",strokeWidth:1},O={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},ot={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},D={fill:"transparent",stroke:"transparent",strokeWidth:1},ct={fill:"none",stroke:"#5F6CE1",strokeWidth:1},I={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},y={fill:"transparent"},M={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(he,Mt,g)=>{g.d(Mt,{$N:()=>I,An:()=>y,CS:()=>O,Kf:()=>R,Lp:()=>F,j9:()=>M,lP:()=>D,n9:()=>c,nf:()=>ct});var T=g(2492);const O=b=>{var k;return null===(k=b.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===k?void 0:k.map(p=>{let Q={type:p.substring(0,1)},A=(tt=p.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?tt.split(/\s/).map(et=>(0,T.z)(parseFloat(et),1e6)):[];var tt;return A.length&&(Q.points=A),Q})},D=b=>{let k=[],p=[],Q=[],A=[];return b.forEach(tt=>{switch(["M","L","C","S","Q","T"].includes(tt.type)&&tt.points&&tt.points.forEach((zt,ht)=>{ht%2==0?k.push(zt):p.push(zt)}),tt.type){case"A":var et;7==(null===(et=tt.points)||void 0===et?void 0:et.length)&&(Q.push(tt.points[5]),A.push(tt.points[6]));break;case"H":var V;null!==(V=tt.points)&&void 0!==V&&V.length&&(k.push(tt.points[0]),Q.push(tt.points[0]));break;case"V":var X;null!==(X=tt.points)&&void 0!==X&&X.length&&(p.push(tt.points[0]),A.push(tt.points[0]));break;case"a":var at;if(7==(null===(at=tt.points)||void 0===at?void 0:at.length)){let zt=k[k.length-1];k.push(zt+tt.points[5]),Q.push(zt+tt.points[5]);let ht=p[p.length-1];p.push(ht+tt.points[6]),A.push(ht+tt.points[6])}break;case"h":var Y;if(null!==(Y=tt.points)&&void 0!==Y&&Y.length){let zt=k[k.length-1];k.push(zt+tt.points[0]),Q.push(zt+tt.points[0])}break;case"v":var Jt;if(null!==(Jt=tt.points)&&void 0!==Jt&&Jt.length){let zt=p[p.length-1];p.push(zt+tt.points[0]),A.push(zt+tt.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var qt;null===(qt=tt.points)||void 0===qt||qt.forEach((zt,ht)=>{ht%2==0?Q.push(zt):A.push(zt)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Pt;null===(Pt=tt.points)||void 0===Pt||Pt.forEach((zt,ht)=>{if(ht%2==0){let wt=k[k.length-1];k.push(wt+zt),Q.push(wt+zt)}else{let wt=p[p.length-1];p.push(wt+zt),A.push(wt+zt)}})}}),{minX:Math.min.apply(null,Q),minY:Math.min.apply(null,A),maxX:Math.max.apply(null,Q),maxY:Math.max.apply(null,A)}},ct=(b,k)=>k.map(p=>{let Q=[];switch(p.type){case"a":var A;7==(null===(A=p.points)||void 0===A?void 0:A.length)&&Q.push([(0,T.z)(p.points[0]/b.width,1e6),(0,T.z)(p.points[1]/b.height,1e6),p.points[2],p.points[3],p.points[4],(0,T.z)(p.points[5]/b.width,1e6),(0,T.z)(p.points[6]/b.height,1e6)]);break;case"A":var tt;7==(null===(tt=p.points)||void 0===tt?void 0:tt.length)&&Q.push([(0,T.z)(p.points[0]/b.width,1e6),(0,T.z)(p.points[1]/b.height,1e6),p.points[2],p.points[3],p.points[4],(0,T.z)((p.points[5]-b.x)/b.width,1e6),(0,T.z)((p.points[6]-b.y)/b.height,1e6)]);break;case"h":var et;null!==(et=p.points)&&void 0!==et&&et.length&&Q.push([(0,T.z)(p.points[0]/b.width,1e6)]);break;case"H":var V;null!==(V=p.points)&&void 0!==V&&V.length&&Q.push([(0,T.z)((p.points[0]-b.x)/b.width,1e6)]);break;case"v":var X;null!==(X=p.points)&&void 0!==X&&X.length&&Q.push([(0,T.z)(p.points[0]/b.height,1e6)]);break;case"V":var at;null!==(at=p.points)&&void 0!==at&&at.length&&Q.push([(0,T.z)((p.points[0]-b.y)/b.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var Y;if(null!==(Y=p.points)&&void 0!==Y&&Y.length)for(let qt=0,Pt=p.points.length-1;qt<Pt;qt+=2)Q.push([(0,T.z)((p.points[qt]-b.x)/b.width,1e6),(0,T.z)((p.points[qt+1]-b.y)/b.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var Jt;if(null!==(Jt=p.points)&&void 0!==Jt&&Jt.length)for(let qt=0,Pt=p.points.length-1;qt<Pt;qt+=2)Q.push([(0,T.z)(p.points[qt]/b.width,1e6),(0,T.z)(p.points[qt+1]/b.height,1e6)])}return Q.length?{type:p.type,ratios:Q}:{type:p.type}}),I=(b,k)=>k.map(p=>{switch(p.type){case"a":var Q,A;return`${p.type}${null!==(Q=null===(A=p.ratios)||void 0===A||null===(A=A.map(Ct=>{var Tt,Gt,E,B,u,lt,St;return[(0,T.z)(b.width*(null!==(Tt=Ct[0])&&void 0!==Tt?Tt:0),1e6),(0,T.z)(b.height*(null!==(Gt=Ct[1])&&void 0!==Gt?Gt:0),1e6),null!==(E=Ct[2])&&void 0!==E?E:0,null!==(B=Ct[3])&&void 0!==B?B:0,null!==(u=Ct[4])&&void 0!==u?u:0,(0,T.z)(b.width*(null!==(lt=Ct[5])&&void 0!==lt?lt:0),1e6),(0,T.z)(b.height*(null!==(St=Ct[6])&&void 0!==St?St:0),1e6)]}))||void 0===A||null===(A=A.map(Ct=>Ct.join(" ")))||void 0===A?void 0:A.join(" "))&&void 0!==Q?Q:""}`;case"A":var tt,et;return`${p.type}${null!==(tt=null===(et=p.ratios)||void 0===et||null===(et=et.map(Ct=>{var Tt,Gt,E,B,u,lt,St;return[(0,T.z)(b.width*(null!==(Tt=Ct[0])&&void 0!==Tt?Tt:0),1e6),(0,T.z)(b.height*(null!==(Gt=Ct[1])&&void 0!==Gt?Gt:0),1e6),null!==(E=Ct[2])&&void 0!==E?E:0,null!==(B=Ct[3])&&void 0!==B?B:0,null!==(u=Ct[4])&&void 0!==u?u:0,(0,T.z)(b.x+b.width*(null!==(lt=Ct[5])&&void 0!==lt?lt:0),1e6),(0,T.z)(b.y+b.height*(null!==(St=Ct[6])&&void 0!==St?St:0),1e6)]}))||void 0===et||null===(et=et.map(Ct=>Ct.join(" ")))||void 0===et?void 0:et.join(" "))&&void 0!==tt?tt:""}`;case"h":var V,X;return`${p.type}${null!==(V=null===(X=p.ratios)||void 0===X||null===(X=X.map(Ct=>{var Tt;return(0,T.z)(b.width*(null!==(Tt=Ct[0])&&void 0!==Tt?Tt:0),1e6)}))||void 0===X?void 0:X.join(" "))&&void 0!==V?V:""}`;case"H":var at,Y;return`${p.type}${null!==(at=null===(Y=p.ratios)||void 0===Y||null===(Y=Y.map(Ct=>{var Tt;return(0,T.z)(b.x+b.width*(null!==(Tt=Ct[0])&&void 0!==Tt?Tt:0),1e6)}))||void 0===Y?void 0:Y.join(" "))&&void 0!==at?at:""}`;case"v":var Jt,qt;return`${p.type}${null!==(Jt=null===(qt=p.ratios)||void 0===qt||null===(qt=qt.map(Ct=>{var Tt;return(0,T.z)(b.height*(null!==(Tt=Ct[0])&&void 0!==Tt?Tt:0),1e6)}))||void 0===qt?void 0:qt.join(" "))&&void 0!==Jt?Jt:""}`;case"V":var Pt,zt;return`${p.type}${null!==(Pt=null===(zt=p.ratios)||void 0===zt||null===(zt=zt.map(Ct=>{var Tt;return(0,T.z)(b.y+b.height*(null!==(Tt=Ct[0])&&void 0!==Tt?Tt:0),1e6)}))||void 0===zt?void 0:zt.join(" "))&&void 0!==Pt?Pt:""}`;case"z":case"Z":return p.type;case"M":case"L":case"C":case"S":case"Q":case"T":var ht,wt;return`${p.type}${null!==(ht=null===(wt=p.ratios)||void 0===wt||null===(wt=wt.map(Ct=>{var Tt,Gt;return[(0,T.z)(b.x+b.width*(null!==(Tt=Ct[0])&&void 0!==Tt?Tt:0),1e6),(0,T.z)(b.y+b.height*(null!==(Gt=Ct[1])&&void 0!==Gt?Gt:0),1e6)]}))||void 0===wt||null===(wt=wt.map(Ct=>Ct.join(" ")))||void 0===wt?void 0:wt.join(" "))&&void 0!==ht?ht:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var Kt,Z;return`${p.type}${null!==(Kt=null===(Z=p.ratios)||void 0===Z||null===(Z=Z.map(Ct=>{var Tt,Gt;return[(0,T.z)(b.width*(null!==(Tt=Ct[0])&&void 0!==Tt?Tt:0),1e6),(0,T.z)(b.height*(null!==(Gt=Ct[1])&&void 0!==Gt?Gt:0),1e6)]}))||void 0===Z||null===(Z=Z.map(Ct=>Ct.join(" ")))||void 0===Z?void 0:Z.join(" "))&&void 0!==Kt?Kt:""}`;default:return""}}).join(""),y=b=>{return(k=b.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?k.split(/\s/).map(p=>parseFloat(p)):[];var k},M=b=>{let k=[],p=[];return b.forEach((Q,A)=>{A%2==0?k.push(Q):p.push(Q)}),{minX:Math.min.apply(null,k),minY:Math.min.apply(null,p),maxX:Math.max.apply(null,k),maxY:Math.max.apply(null,p)}},F=(b,k)=>{let p=[];for(let Q=0,A=k.length-1;Q<A;Q+=2)p.push([(k[Q]-b.x)/b.width,(k[Q+1]-b.y)/b.height]);return p},c=(b,k)=>k.map(p=>[(0,T.z)(b.x+b.width*p[0],1e6),(0,T.z)(b.y+b.height*p[1],1e6)]).map(p=>p.join(" ")).join(" "),R=(b,k)=>{let p=(b=>{let k=b.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(p=>(0,T.z)(parseFloat(p),1e6));if(6==k.length)return{a:k[0],b:k[1],c:k[2],d:k[3],e:k[4],f:k[5]}})(k);return p?window.Snap.path.map(b,new window.Snap.Matrix(p.a,p.b,p.c,p.d,p.e,p.f)).toString():b}},2837:(he,Mt,g)=>{g.d(Mt,{v:()=>b,U:()=>P});var T=g(7102),O=g(1999),ot=g(2492),D=/^#[a-fA-F0-9]+$/i,ct=/^rgb\((\d+),(\d+),(\d+)\)$/i,I=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const y=k=>{let p=null,Q=null;if(k)if("transparent"==k)p="#000000",Q=0;else if(k.match(D))p=k;else{let A=(k=k.replace(/\s+/g,"")).match(I);if(A)p="#"+(256|A[1]).toString(16).slice(1)+(256|A[2]).toString(16).slice(1)+(256|A[3]).toString(16).slice(1),Q=(0,ot.z)(parseFloat(A[4]),100);else{let tt=k.match(ct);tt&&(p="#"+(256|tt[1]).toString(16).slice(1)+(256|tt[2]).toString(16).slice(1)+(256|tt[3]).toString(16).slice(1))}}return{hex:p,alpha:Q}};var M=g(4896),F=g(8338);const P=k=>rt(null==k?void 0:k.url,null==k?void 0:k.path,null==k?void 0:k.src,null==k?void 0:k.name);var rt=(k,p,Q,A)=>{var tt,et;let V,X,at,Y;var Jt,qt;return k&&(V=k.replace(/\\/g,"/")),p&&(X=p.replace(/\\/g,"/")),Q&&(at=Q.replace(/\\/g,"/")),X&&!V&&(V=(null===(Jt=T.L.config)||void 0===Jt?void 0:Jt.readfileuploadurl)+X),!at||X||V||(X=at.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),V=(null===(qt=T.L.config)||void 0===qt?void 0:qt.readfileuploadurl)+X),Y=A||(null!==(tt=V)&&void 0!==tt?tt:"").split("/").pop()||(null!==(et=X)&&void 0!==et?et:"").split("/").pop()||"",{url:V,path:X,name:Y}};const b=k=>{let p={x:0,y:0,width:k.screen.w,height:k.screen.h},Q=[];return k.data.forEach((A,tt)=>{var et,V;let X={id:"number"==typeof A.id?A.id:T.L.data.newSlideId,code:null===(et=A.id)||void 0===et?void 0:et.toString(),name:"string"==typeof A.id?A.id:`Trang ${tt+1}`,svg:{viewBox:p,nodes:[]},test:(at=A.test2,at?(at.audiotrue&&(at.audiotrue=P({path:at.audiotrue.path})),at.audiofalse&&(at.audiofalse=P({path:at.audiofalse.path})),at.effecttrue&&(at.effecttrue=P({path:at.effecttrue.path})),at.effectfalse&&(at.effectfalse=P({path:at.effectfalse.path})),at.icontrue&&(at.icontrue=P({path:at.icontrue.path})),at.iconfalse&&(at.iconfalse=P({path:at.iconfalse.path})),at):{})};var at;A.background&&X.svg&&(X.svg.background=function(k){return k&&(null!==k.match(/#([a-zA-Z0-9]+)/)||null!==k.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==k.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(A.background)?{color:A.background}:function(k){return k&&null!==k.match(/data:[^;]+;base64,/)}(A.background)?{base64:A.background}:function(k){return k&&null!==k.match(/http(s)?:\/\//)}(A.background)?rt(A.background):rt(void 0,A.background)),jQuery(null!==(V=A.svg)&&void 0!==V?V:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((at,Y)=>{var Jt,qt;let Pt=jQuery(Y).parents(".indexs"),zt=(Z=Pt.attr("data-index"))?parseInt(Z):0,ht=(Z=>zt&&Z?parseInt(Z):0)(Pt.attr("data-time")),wt=null!==(Jt=Y.getAttribute("id"))&&void 0!==Jt?Jt:(1e9*Math.random()).toFixed(),Kt={id:parseInt(wt),code:`${Y.nodeName}-${wt}`,name:Y.nodeName,idx:zt,time:ht,type:(()=>{switch(Y.nodeName){case"polygon":return O.h.POLYGON;case"path":return O.h.PATH;case"circle":return O.h.CIRCLE;case"ellipse":return O.h.ELLIPSE;case"line":return O.h.LINE;case"rect":return O.h.RECT;case"foreignObject":return O.h.FOREIGNOBJECT}return 0})(),size:(Z=>{let Ct={},Tt=0,Gt=0,E=0,B=0,u=null,lt=null,St=parseFloat((null===(Z=Y.getAttribute("transform"))||void 0===Z?void 0:Z.replace("rotate(","").replace(")",""))||"0")||null;switch(Y.nodeName){case"polygon":{var At,Ht;let Qt=[],Nt=[],Bt=999999999,ie=999999999,Dt=0,Lt=0;u=JSON.parse(Y.getAttribute("ratios")||"[]"),lt=null!==(At=null===(Ht=Y.getAttribute("points"))||void 0===Ht?void 0:Ht.split(",").map(function(w){return w.split(" ").map(function(d){return parseFloat(d)})}))&&void 0!==At?At:[],lt.forEach(function(w){Qt.push(w[0]),Nt.push(w[1])}),Bt=Math.min.apply(null,Qt),ie=Math.min.apply(null,Nt),Dt=Math.max.apply(null,Qt),Lt=Math.max.apply(null,Nt),Tt=Bt,Gt=ie,E=Dt-Tt,B=Lt-Gt;break}case"path":{let Qt=Y.getAttribute("d");if(Qt){let Nt=(0,M.CS)(Qt),{minX:Bt,minY:ie,maxX:Dt,maxY:Lt}=(0,M.lP)(Nt);Tt=Bt,Gt=ie,E=Dt-Tt||1,B=Lt-Gt||1,Object.assign(Ct,{ratioMaps:(0,M.nf)({x:Tt,y:Gt,width:E,height:B},Nt)})}break}case"circle":{let Qt=parseFloat(Y.getAttribute("cx")||"0"),Nt=parseFloat(Y.getAttribute("cy")||"0"),Bt=parseFloat(Y.getAttribute("r")||"0");Tt=Qt-Bt,Gt=Nt-Bt,E=2*Bt,B=2*Bt;break}case"ellipse":{let Qt=parseFloat(Y.getAttribute("cx")||"0"),Nt=parseFloat(Y.getAttribute("cy")||"0"),Bt=parseFloat(Y.getAttribute("rx")||"0"),ie=parseFloat(Y.getAttribute("ry")||"0");Tt=Qt-Bt,Gt=Nt-ie,E=2*Bt,B=2*ie;break}case"line":{let Qt=parseFloat(Y.getAttribute("x1")||"0"),Nt=parseFloat(Y.getAttribute("y1")||"0"),Bt=parseFloat(Y.getAttribute("x2")||"0"),ie=parseFloat(Y.getAttribute("y2")||"0"),Dt=999999999,Lt=999999999,w=0,d=0;Dt=Math.min(Qt,Bt),Lt=Math.min(Nt,ie),w=Math.max(Qt,Bt),d=Math.max(Nt,ie),Tt=Dt,Gt=Lt,E=w-Tt,B=d-Gt,u=[[(Qt-Tt)/(E||1),(Nt-Gt)/(B||1)],[(Bt-Tt)/(E||1),(ie-Gt)/(B||1)]];break}case"rect":case"foreignObject":Tt=parseFloat(Y.getAttribute("x")||"0"),Gt=parseFloat(Y.getAttribute("y")||"0"),E=parseFloat(Y.getAttribute("width")||"0"),B=parseFloat(Y.getAttribute("height")||"0")}return Object.assign(Ct,{x:Tt,y:Gt,width:E,height:B,ratios:u,points:lt,rotate:St})})(),attribute:(()=>{let Z={};switch(Y.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var Ct,Tt,Gt,E,B,u,lt,St;let w=null!==(Ct=Y.getAttribute("fill"))&&void 0!==Ct?Ct:null,d=null!==(Tt=Y.getAttribute("stroke"))&&void 0!==Tt?Tt:null,U=null!==(Gt=parseFloat(null!==(E=Y.getAttribute("stroke-opacity"))&&void 0!==E?E:"1"))&&void 0!==Gt?Gt:null,it=null!==(B=parseFloat(Y.getAttribute("stroke-width")||"0"))&&void 0!==B?B:null,q=null!==(u=Y.getAttribute("stroke-linecap"))&&void 0!==u?u:null,j=null!==(lt=Y.getAttribute("stroke-linejoin"))&&void 0!==lt?lt:null,_=null!==(St=parseFloat(Y.getAttribute("stroke-dasharray")||"0"))&&void 0!==St?St:null;Object.assign(Z,{fill:w,stroke:d,strokeOpacity:U,strokeWidth:it,strokeLinecap:q,strokeLinejoin:j,strokeDasharray:_});break}case"path":{let w=Pt.get(0);if(w){var At,Ht,Qt,Nt,Bt,ie,Dt,Lt;let d=null!==(At=w.getAttribute("fill"))&&void 0!==At?At:null,U=null!==(Ht=w.getAttribute("stroke"))&&void 0!==Ht?Ht:null,it=null!==(Qt=parseFloat(null!==(Nt=w.getAttribute("stroke-opacity"))&&void 0!==Nt?Nt:"1"))&&void 0!==Qt?Qt:null,q=null!==(Bt=parseFloat(w.getAttribute("stroke-width")||"0"))&&void 0!==Bt?Bt:null,j=null!==(ie=w.getAttribute("stroke-linecap"))&&void 0!==ie?ie:null,_=null!==(Dt=w.getAttribute("stroke-linejoin"))&&void 0!==Dt?Dt:null,J=null!==(Lt=parseFloat(w.getAttribute("stroke-dasharray")||"0"))&&void 0!==Lt?Lt:null;Object.assign(Z,{fill:d,stroke:U,strokeOpacity:it,strokeWidth:q,strokeLinecap:j,strokeLinejoin:_,strokeDasharray:J})}break}}return Z})(),style:(()=>{let Z={};switch(Y.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let Gt=jQuery(Y).find(".svg-container");if(Gt.length){let B=parseFloat(Gt.css("border-width")||"0")||null,u=Gt.css("border-style")||null,lt=Gt.css("border-color")||null,St=null,At=Gt.css("background-color")||null,Ht=null;(()=>{let{hex:Qt,alpha:Nt}=y(lt);lt=Qt,St=Nt})(),(()=>{let{hex:Qt,alpha:Nt}=y(At);At=Qt,Ht=Nt})(),Object.assign(Z,{borderWidth:B,borderStyle:u,borderColor:lt,borderOpacity:St,backgroundColor:At,backgroundOpacity:Ht})}let E=jQuery(Y).find(".svg-editor-content");if(E.length){var Ct,Tt;let B=JSON.parse((E.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:u,alpha:lt}=y(B.TextColor);Object.assign(Z,{fontFamily:null!==(Ct=B.FontFamily)&&void 0!==Ct?Ct:null,fontSize:null!==(Tt=B.FontSize)&&void 0!==Tt?Tt:null,color:u,opacity:lt})}break}}return Z})(),source:(()=>{let Z={};switch(Y.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Pt.hasClass("editors")){var Ct;let Lt="div,h1,h2,h3,h4,h5,h6,p,span,strong,b,i",w=it=>{null==it||it.forEach(q=>{let j=q.querySelectorAll(`:scope > ${Lt}`);j.length&&w(j),!q.querySelectorAll(":scope > *").length&&""==q.textContent&&q.remove()})},d=it=>{let q=null==it?void 0:it.querySelectorAll(":scope > div,h1,h2,h3,h4,h5,h6,p,strong,span");if(null!=q&&q.length){var j;let _=q[q.length-1];if(""==(null===(j=_.textContent)||void 0===j?void 0:j.trim())){let J=_.querySelectorAll(":scope > *");if(J.length){let nt=J[J.length-1];["br","BR"].includes(null==nt?void 0:nt.nodeName)&&(nt.remove(),d(it))}else _.remove(),d(it)}}};w(null===(Ct=jQuery(Y).find(".svg-editor-content").get(0))||void 0===Ct?void 0:Ct.querySelectorAll(`:scope > ${Lt}`)),d(jQuery(Y).find(".svg-editor-content").get(0));let U=jQuery(Y).find(".svg-editor-content");if(U.length){var Tt;let it=U.html(),q=null!==(Tt=(null!=it?it:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Tt?Tt:[];Object.assign(Z,{type:"html",html:{htmlContent:it,variableKeywords:q}})}}else if(Pt.hasClass("inputs")||Pt.hasClass("textareas"))Object.assign(Z,{type:"input",input:{input:!!jQuery(Y).find("input").length,textarea:!!jQuery(Y).find("textarea").length}});else if(Pt.hasClass("tests")){let Lt=jQuery(Y).find(".svg-test");if(Pt.hasClass("tests-truefalse")){var Gt,E;let w=Lt.find(".svg-editor-content").html(),d=null!==(Gt=(null!=w?w:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Gt?Gt:[];Object.assign(Z,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(E=A.test2.truefalse)||void 0===E?void 0:E.includes(wt)}},html:{htmlContent:w,variableKeywords:d}})}else if(Pt.hasClass("tests-singlechoice")){var B,u;let w=Lt.find(".svg-editor-content").html(),d=null!==(B=(null!=w?w:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==B?B:[];Object.assign(Z,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(u=A.test2.singlechoice)||void 0===u?void 0:u.includes(wt)}},html:{htmlContent:w,variableKeywords:d}})}else if(Pt.hasClass("tests-multichoice")){var lt,St;let w=Lt.find(".svg-editor-content").html(),d=null!==(lt=(null!=w?w:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==lt?lt:[];Object.assign(Z,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(St=A.test2.multichoice)||void 0===St?void 0:St.includes(wt)}},html:{htmlContent:w,variableKeywords:d}})}else if(Pt.hasClass("tests-fill")){var At,Ht;let w=Lt.find(".svg-editor-content").html(),d=null!==(At=(null!=w?w:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==At?At:[],U=null!==(Ht=(null!=w?w:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==Ht?Ht:[];U=U.filter((it,q,j)=>j.indexOf(it)==q),Object.assign(Z,{type:"test",test:{type:"fill",fill:U.map(it=>{var q;return{key:it,value:null===(q=A.test2.fill)||void 0===q||null===(q=q.find(j=>j.id==wt))||void 0===q||null===(q=q.vals)||void 0===q?void 0:q.map(j=>j.text).filter(j=>!["",null,void 0,NaN].includes(j))}})},html:{htmlContent:w,variableKeywords:d,fillKeywords:U}})}else if(Pt.hasClass("tests-matching")){if(Lt.hasClass("svg-test-empty"))Object.assign(Z,{type:"test",test:{type:"matching-empty",matching:{key:Lt.attr("data-name")||null}}});else if(Lt.hasClass("svg-test-content")){var Qt;let w=Lt.find(".svg-editor-content").html(),d=null!==(Qt=(null!=w?w:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Qt?Qt:[];Object.assign(Z,{type:"test",test:{type:"matching-content",matching:{key:Lt.attr("data-name")||null}},html:{htmlContent:w,variableKeywords:d}})}}else if(Pt.hasClass("tests-speech")){var Nt;Object.assign(Z,{type:"speech",speech:{value:null===(Nt=A.test2.speech)||void 0===Nt||null===(Nt=Nt.find(w=>w.id==wt))||void 0===Nt||null===(Nt=Nt.vals)||void 0===Nt?void 0:Nt.map(w=>w.text).filter(w=>!["",null,void 0,NaN].includes(w))}})}else if(Pt.hasClass("tests-submit")){let w=jQuery(Y).find(".svg-container img");Object.assign(Z,{type:"test",test:{type:"submit"},image:rt(w.attr("url"),w.attr("path"),w.attr("src"))})}}else if(Pt.hasClass("images")){let Lt=jQuery(Y).find(".svg-editor-content img");if(Lt.length)Object.assign(Z,{type:"image",image:rt(Lt.attr("url"),Lt.attr("path"),Lt.attr("src"))});else{let w=jQuery(Y).find("iframe");Object.assign(Z,{type:"iframe",iframe:rt(w.attr("url"),w.attr("path"),w.attr("src"))})}}else if(Pt.hasClass("sounds")){let Lt=jQuery(Y).find(".svg-editor-content img");Lt.length&&Object.assign(Z,{type:"image",image:rt(Lt.attr("url"),Lt.attr("path"),Lt.attr("src"))})}else if(Pt.hasClass("htmls")){let Lt=jQuery(Y).find("iframe");Lt.length&&Object.assign(Z,{type:"iframe",iframe:rt(Lt.attr("url"),Lt.attr("path"),Lt.attr("src"))})}else if(Pt.hasClass("svgs")){let Lt=jQuery(Y).find("svg");var Bt,ie;Lt.length&&Object.assign(Z,{type:"svg",svg:Object.assign(rt(Lt.attr("url"),Lt.attr("path"),Lt.attr("src")),{svgContent:null!==(Bt=null===(ie=Lt.get(0))||void 0===ie?void 0:ie.outerHTML)&&void 0!==Bt?Bt:null})})}else if(Pt.hasClass("medias")){let Lt=jQuery(Y).find(".media-item");if(Lt.length)switch(Lt.attr("type")){case"audio":Object.assign(Z,{type:"audio",audio:rt(Lt.attr("url"),Lt.attr("path"),Lt.attr("src"))});break;case"video":Object.assign(Z,{type:"video",video:rt(Lt.attr("url"),Lt.attr("path"),Lt.attr("src"))});break;case"file":Object.assign(Z,{type:"file",file:rt(Lt.attr("url"),Lt.attr("path"),Lt.attr("src"))});break;default:var Dt;Object.assign(Z,{type:"link",link:{url:null!==(Dt=Lt.attr("url"))&&void 0!==Dt?Dt:null}})}let w=jQuery(Y).find("img");w.length&&(Object.assign(Z,{image:rt(w.attr("url"),w.attr("path"),w.attr("src"))}),Z.type||Object.assign(Z,{type:"image"}))}}return Z})(),animate:(Z=>{let Ct={},Tt=null===(Z=A.animates)||void 0===Z?void 0:Z.find(Gt=>Gt.elementId==wt);return Tt&&Object.assign(Ct,{value:Tt.value}),Ct})(),interactive:(()=>{let Z={},Ct=A.actions.show.filter(Gt=>Gt.elementId==wt&&Gt.active);Ct.length&&(Z.show={},Ct.forEach(Gt=>{let{source:E}=Gt;switch(null==E?void 0:E.type){case"work":var B,u,lt,St,At;Z.show.action={},Object.assign(Z.show.action,{value:null!==(B=E.value)&&void 0!==B?B:null,iteration:null!==(u=E.iteration)&&void 0!==u?u:null,finish:null!==(lt=E.end)&&void 0!==lt?lt:null,time:null!==(St=E.time)&&void 0!==St?St:null,points:null!==(At=E.points)&&void 0!==At?At:null});break;case"audio":var Ht,Qt,Nt;Z.show.audio={},Object.assign(Z.show.audio,{source:rt(null,null,E.url),iteration:null!==(Ht=E.iteration)&&void 0!==Ht?Ht:null,finish:null!==(Qt=E.end)&&void 0!==Qt?Qt:null,time:null!==(Nt=E.time)&&void 0!==Nt?Nt:null,async:-1==E.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Bt,ie,Dt,Lt,w,d,U,it,q,j,_,J,nt,mt,xt;E.options.includes("show")&&(Z.show.triggershow={},Object.assign(Z.show.triggershow,{id:null!==(Bt=parseInt(null!==(ie=E.id)&&void 0!==ie?ie:"0"))&&void 0!==Bt?Bt:null,ids:null===(Dt=E.ids)||void 0===Dt?void 0:Dt.map(Ot=>parseInt(Ot)),async:null!==(Lt=E.async)&&void 0!==Lt?Lt:null,time:null!==(w=E.time)&&void 0!==w?w:null})),E.options.includes("run")&&(Z.show.triggerrun={},Object.assign(Z.show.triggerrun,{id:null!==(d=parseInt(null!==(U=E.id)&&void 0!==U?U:"0"))&&void 0!==d?d:null,ids:null===(it=E.ids)||void 0===it?void 0:it.map(Ot=>parseInt(Ot)),async:null!==(q=E.async)&&void 0!==q?q:null,time:null!==(j=E.time)&&void 0!==j?j:null})),E.options.includes("hide")&&(Z.show.triggerhide={},Object.assign(Z.show.triggerhide,{id:null!==(_=parseInt(null!==(J=E.id)&&void 0!==J?J:"0"))&&void 0!==_?_:null,ids:null===(nt=E.ids)||void 0===nt?void 0:nt.map(Ot=>parseInt(Ot)),async:null!==(mt=E.async)&&void 0!==mt?mt:null,time:null!==(xt=E.time)&&void 0!==xt?xt:null}))}}));let Tt=A.actions.click.filter(Gt=>Gt.elementId==wt&&Gt.active);return Tt&&(Z.click={},Tt.forEach(Gt=>{let{source:E}=Gt;switch(null==E?void 0:E.type){case"work":var B,u,lt,St,At;Z.click.action={},Object.assign(Z.click.action,{value:null!==(B=E.value)&&void 0!==B?B:null,iteration:null!==(u=E.iteration)&&void 0!==u?u:null,finish:null!==(lt=E.end)&&void 0!==lt?lt:null,time:null!==(St=E.time)&&void 0!==St?St:null,points:null!==(At=E.points)&&void 0!==At?At:null});break;case"audio":var Ht,Qt,Nt;Z.click.audio={},Object.assign(Z.click.audio,{source:rt(null,null,E.url),iteration:null!==(Ht=E.iteration)&&void 0!==Ht?Ht:null,finish:null!==(Qt=E.end)&&void 0!==Qt?Qt:null,time:null!==(Nt=E.time)&&void 0!==Nt?Nt:null,async:-1==E.iteration?"change-slide":"change-node"});break;case"video":{Z.click.video={},Object.assign(Z.click.video,{source:rt(E.url,E.path)});let{url:yt,path:st,name:pt}=rt(E.url,E.path);Z.click.media={},Object.assign(Z.click.media,{url:yt,path:st,name:pt,type:F.S.VIDEO});break}case"image":{Z.click.image={},Object.assign(Z.click.image,{source:rt(E.url,E.path)});let{url:yt,path:st,name:pt}=rt(E.url,E.path);Z.click.media={},Object.assign(Z.click.media,{url:yt,path:st,name:pt,type:F.S.IMAGE});break}case"link":{Z.click.link={},Object.assign(Z.click.link,{url:E.url,target:E.target});let{url:yt,path:st,name:pt}=rt(E.url,E.path);Z.click.media={},Object.assign(Z.click.media,{url:yt,path:st,name:pt,type:F.S.LINK});break}case"text":Z.click.text={},Object.assign(Z.click.text,{content:E.content});break;case"node":case"node2":var Bt,ie,Dt,Lt,w,d,U,it,q,j,_,J,nt,mt,xt;E.options.includes("show")&&(Z.click.triggershow={},Object.assign(Z.click.triggershow,{id:null!==(Bt=parseInt(null!==(ie=E.id)&&void 0!==ie?ie:"0"))&&void 0!==Bt?Bt:null,ids:null===(Dt=E.ids)||void 0===Dt?void 0:Dt.map(yt=>parseInt(yt)),async:null!==(Lt=E.async)&&void 0!==Lt?Lt:null,time:null!==(w=E.time)&&void 0!==w?w:null})),E.options.includes("run")&&(Z.click.triggerrun={},Object.assign(Z.click.triggerrun,{id:null!==(d=parseInt(null!==(U=E.id)&&void 0!==U?U:"0"))&&void 0!==d?d:null,ids:null===(it=E.ids)||void 0===it?void 0:it.map(yt=>parseInt(yt)),async:null!==(q=E.async)&&void 0!==q?q:null,time:null!==(j=E.time)&&void 0!==j?j:null})),E.options.includes("hide")&&(Z.click.triggerhide={},Object.assign(Z.click.triggerhide,{id:null!==(_=parseInt(null!==(J=E.id)&&void 0!==J?J:"0"))&&void 0!==_?_:null,ids:null===(nt=E.ids)||void 0===nt?void 0:nt.map(yt=>parseInt(yt)),async:null!==(mt=E.async)&&void 0!==mt?mt:null,time:null!==(xt=E.time)&&void 0!==xt?xt:null}));break;case"slide":var Ot;Z.click.slide={},Object.assign(Z.click.slide,{id:parseInt(null!==(Ot=E.id)&&void 0!==Ot?Ot:"0")||E.num||null,code:E.id})}})),Z})(),variable:(Z=>{let Ct={};var Tt;Y.getAttribute("data-variable")&&(Ct.input={},Object.assign(Ct.input,{variable:null!==(Tt=Y.getAttribute("data-variable"))&&void 0!==Tt?Tt:null}));let Gt=null===(Z=A.nodes)||void 0===Z||null===(Z=Z.find(St=>St.id==wt))||void 0===Z?void 0:Z.variable;var E,B,u,lt;return Gt&&(Ct.click={},Object.assign(Ct.click,{variable:null!==(E=Gt.variable)&&void 0!==E?E:null,operator:null!==(B=Gt.operator)&&void 0!==B?B:null,valuetype:null!==(u=Gt.valuetype)&&void 0!==u?u:null,value:null!==(lt=Gt.value)&&void 0!==lt?lt:null})),Ct})()};var Z;null===(qt=X.svg)||void 0===qt||qt.nodes.push(Kt)}),Q.push(X)}),{screen:{width:k.screen.w,height:k.screen.h},data:{slides:Q},variable:k.variable}}},6195:(he,Mt,g)=>{g.d(Mt,{A9:()=>F,IB:()=>c,_4:()=>M,_5:()=>ct,ar:()=>I,yW:()=>y});var T=g(467),O=g(119);O.config({driver:[O.INDEXEDDB,O.LOCALSTORAGE,O.WEBSQL],name:"_localDataDB",version:1});const D={create:(N=(0,T.A)(function*(){return O}),function(){return N.apply(this,arguments)}),get:function(){var N=(0,T.A)(function*(R){return O.getItem(R)});return function(P){return N.apply(this,arguments)}}(),set:function(){var N=(0,T.A)(function*(R,P){return O.setItem(R,P)});return function(P,rt){return N.apply(this,arguments)}}()},ct=function(){var N=(0,T.A)(function*(R){yield D.create();var P=(yield D.get("icdt-data"))||[];"function"==typeof R.callback&&R.callback(P)});return function(P){return N.apply(this,arguments)}}(),I=function(){var N=(0,T.A)(function*(R){yield D.create(),R.params=R.params||{};try{yield D.set("icdt-data",R.params),"function"==typeof R.callback&&R.callback(R.params)}catch(P){"function"==typeof R.callback&&R.callback(null),console.error(P)}});return function(P){return N.apply(this,arguments)}}(),y=function(){var N=(0,T.A)(function*(R){yield D.create();try{var P=(yield D.get("icdt-config"))||{};"function"==typeof R.callback&&R.callback(P)}catch(rt){"function"==typeof R.callback&&R.callback(null),console.error(rt)}});return function(P){return N.apply(this,arguments)}}(),M=function(){var N=(0,T.A)(function*(R){yield D.create(),R.params=R.params||{};try{yield D.set("icdt-config",R.params),"function"==typeof R.callback&&R.callback(R.params)}catch(P){"function"==typeof R.callback&&R.callback(null),console.error(P)}});return function(P){return N.apply(this,arguments)}}(),F=function(){var N=(0,T.A)(function*(R){yield D.create();try{var P=(yield D.get("icdt-clipboard"))||{};"function"==typeof R.callback&&R.callback(P)}catch(rt){"function"==typeof R.callback&&R.callback(null),console.error(rt)}});return function(P){return N.apply(this,arguments)}}(),c=function(){var N=(0,T.A)(function*(R){yield D.create(),R.params=R.params||{};try{yield D.set("icdt-clipboard",R.params),"function"==typeof R.callback&&R.callback(R.params)}catch(P){"function"==typeof R.callback&&R.callback(null),console.error(P)}});return function(P){return N.apply(this,arguments)}}();var N},6315:(he,Mt,g)=>{g.d(Mt,{w:()=>T});const T=(O,ot)=>{if(!O)return"";let D=O.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),ct=(D&&D[4]||"").trim(),I=D?(256|D[1]).toString(16).slice(1)+(256|D[2]).toString(16).slice(1)+(256|D[3]).toString(16).slice(1):O;if("0"==ct)return"transparent";if(ot){let y;y=""!==ct?ct:"01",y=(255*y|256).toString(16).slice(1),I+=y}return`#${I}`}},7873:(he,Mt,g)=>{g.d(Mt,{F:()=>T});const T={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},1477:(he,Mt,g)=>{g.d(Mt,{r:()=>T});const T={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221}},2409:(he,Mt,g)=>{g.d(Mt,{F:()=>T});const T={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(he,Mt,g)=>{g.d(Mt,{P:()=>T});const T={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(he,Mt,g)=>{g.d(Mt,{Q:()=>T});const T={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(he,Mt,g)=>{g.d(Mt,{h:()=>T});const T={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},8338:(he,Mt,g)=>{g.d(Mt,{S:()=>T});const T={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},7102:(he,Mt,g)=>{g.d(Mt,{L:()=>bt});var T=g(3603),O=g(5970),ot=g(7873),D=g(9506),ct=g(1308),I=g(6037),y=g(4333);const c=K=>{var i,r,o,n,l,v,m;let h=(null===(i=K.mouseEvent)||void 0===i?void 0:i.target)||(null===(r=K.touchEvent)||void 0===r?void 0:r.target),L=(null===(o=h)||void 0===o?void 0:o.getAttribute("id"))||"",x=null===(n=h)||void 0===n?void 0:n.nodeName;bt.dataSelect.nodeName.includes(x)||(h=jQuery(h).parents("foreignObject").get(0),h&&(L=h.getAttribute("id")||"",x=h.nodeName));let W=(null===(l=h)||void 0===l||null===(l=l.parentNode)||void 0===l?void 0:l.getAttribute("id"))||"";var z,ft;if([ot.F.RESIZE_GROUP,ot.F.SELECT_GROUP].includes(W))return null===(z=K.mouseEvent)||void 0===z||z.stopPropagation(),void(null===(ft=K.mouseEvent)||void 0===ft||ft.preventDefault());if(null!==(v=K.mouseEvent)&&void 0!==v&&v.altKey||null!==(m=K.touchEvent)&&void 0!==m&&m.altKey||!L||L.match(/[^0-9]/)||!bt.dataSelect.nodeName.includes(x)){var gt;bt.dataSelect.ids.length&&(bt.dataSelect.ids=[]),(0==(null===(gt=K.mouseEvent)||void 0===gt?void 0:gt.button)||K.touchEvent)&&(K=>{let l=(0,O.RY)(ot.F.SCAN_GROUP,"g"),v=(0,D.CE)(0,0,1,1);(0,O.xJ)(l,v),((K,i,r)=>{(0,ct.I)(K,{start:l=>{},move:(l,v)=>{((l,v,m,h)=>{i=(0,D.CE)(l,v,m,h),(0,O.xJ)(r,i)})(v[0][0],v[0][1],l.x,l.y)},end:(l,v)=>{null==r||r.remove(),bt.dataSelect.ids=bt.data.getNodeInArea(Math.min(v[0][0],l.x),Math.min(v[0][1],l.y),Math.max(v[0][0],l.x),Math.max(v[0][1],l.y));let m=bt.dataSelect.nodes;1==m.length?(0,I.K)(m[0]):m.length>1&&(0,y.E)(m)}})})(K,v,l)})(K)}else{var _t,It;let $t=parseFloat(L||"0");bt.dataSelect.ids=null!==(_t=K.mouseEvent)&&void 0!==_t&&_t.shiftKey||null!==(It=K.touchEvent)&&void 0!==It&&It.shiftKey?[$t].concat(bt.dataSelect.ids).filter((ge,_e,xe)=>xe.indexOf(ge)==_e):[$t];let we=bt.dataSelect.nodes;we.length>1?(0,y.E)(we):1==we.length&&(0,I.K)(we[0])}};class R{constructor(){let{x:i,y:r}=bt.screen.dislocation;var o=(n,l,v,m)=>{bt.screen.move({x:i,y:r},{x:v-n,y:m-l})};return{start:n=>{},move:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)},end:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)}}}}var P=g(1999),rt=g(4888);const b=[{name:"tam gi\xe1c vu\xf4ng",type:rt.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:rt.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:rt.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:rt.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:rt.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:rt.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:rt.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:rt.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:rt.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:rt.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:rt.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:rt.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:rt.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var k=g(1281),p=g(2492);class Q{constructor(){let i=(0,O.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,k.K)(Math.ceil(1e9*Math.random())),v=(m,h,L,x)=>{l=(0,D.CE)(m,h,L,x,{ratio:1}),l.x=(0,p.z)(l.x),l.y=(0,p.z)(l.y),l.width=(0,p.z)(l.width),l.height=(0,p.z)(l.height),Object.assign(n,(0,D.xW)(P.h.CIRCLE,l,n)),(0,O.tD)(o,n),(0,O.in)(i,l)};return{start:m=>{v(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,h)=>{v(h[0][0],h[0][1],m.x,m.y)},end:(m,h)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,D.xW)(P.h.CIRCLE,l,n)),(0,O.tD)(o,n)),bt.data.node=Object.assign({id:r,type:P.h.CIRCLE,name:"Circle"},{size:l,attribute:n}),null==i||i.remove()}}}}var A=g(6153);class tt{constructor(){let i=(0,O.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,A.W)(Math.ceil(1e9*Math.random()));var v=(m,h,L,x)=>{l=(0,D.CE)(m,h,L,x),l.x=(0,p.z)(l.x),l.y=(0,p.z)(l.y),l.width=(0,p.z)(l.width),l.height=(0,p.z)(l.height),Object.assign(n,(0,D.xW)(P.h.ELLIPSE,l,n)),(0,O.tD)(o,n),(0,O.in)(i,l)};return{start:m=>{v(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,h)=>{v(h[0][0],h[0][1],m.x,m.y)},end:(m,h)=>{(l.width<=16||l.height<=16)&&(l.width=90,l.height=60,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,D.xW)(P.h.ELLIPSE,l,n)),(0,O.tD)(o,n)),bt.data.node=Object.assign({id:r,type:P.h.ELLIPSE,name:"Ellipse"},{size:l,attribute:n}),null==i||i.remove()}}}}var et=g(7945);class V{constructor(){let i=(0,O.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,et.a)(Math.ceil(1e9*Math.random()));var v=(m,h,L,x)=>{l=(0,D.CE)(m,h,L,x),l.x=(0,p.z)(l.x),l.y=(0,p.z)(l.y),l.width=(0,p.z)(l.width),l.height=(0,p.z)(l.height),Object.assign(n,(0,D.xW)(P.h.RECT,l,n)),(0,O.tD)(o,n),(0,O.in)(i,l)};return{start:m=>{v(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,h)=>{v(h[0][0],h[0][1],m.x,m.y)},end:(m,h)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,D.xW)(P.h.RECT,l,n)),(0,O.tD)(o,n)),bt.data.node=Object.assign({id:r,type:P.h.RECT,name:"Rect"},{size:l,attribute:n}),null==i||i.remove()}}}}var X=g(3477);class at{constructor(i){let r=(0,O.RY)(ot.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:n,element:l,attribute:v,size:m}=(0,X.u)(Math.ceil(1e9*Math.random()));m.ratios=o;var h=(L,x,W,z)=>{m=(0,D.CE)(L,x,W,z,{ratios:o}),m.x=(0,p.z)(m.x),m.y=(0,p.z)(m.y),m.width=(0,p.z)(m.width),m.height=(0,p.z)(m.height),Object.assign(v,(0,D.xW)(P.h.POLYGON,m,v)),(0,O.tD)(l,v),(0,O.in)(r,m)};return{start:L=>{h(L.x,L.y,L.x+m.width,L.y+m.height)},move:(L,x)=>{h(x[0][0],x[0][1],L.x,L.y)},end:(L,x)=>{(m.width<=16||m.height<=16)&&(m.width=80,m.height=80,m.x=m.x-m.width/2,m.y=m.y-m.height/2,Object.assign(v,(0,D.xW)(P.h.POLYGON,m,v)),(0,O.tD)(l,v)),bt.data.node=Object.assign({id:n,type:P.h.POLYGON,name:"Polygon"},{size:m,attribute:v}),null==r||r.remove()}}}}var Y=g(3069);class Jt{constructor(){let i=(0,O.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,Y.q)(Math.ceil(1e9*Math.random()));return{start:m=>{},move:(m,h)=>{((m,h,L,x)=>{l=(0,D.CE)(m,h,L,x),l.x=(0,p.z)(l.x),l.y=(0,p.z)(l.y),l.width=(0,p.z)(l.width),l.height=(0,p.z)(l.height),Object.assign(n,(0,D.xW)(P.h.LINE,l,n)),(0,O.tD)(o,n),(0,O.in)(i,l)})(h[0][0],h[0][1],m.x,m.y)},end:(m,h)=>{h.length>=2?((l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,D.xW)(P.h.LINE,l,n)),(0,O.tD)(o,n)),bt.data.node=Object.assign({id:r,type:P.h.LINE,name:"Line"},{size:l,attribute:n})):null==o||o.remove(),null==i||i.remove()}}}}var qt=g(4896),Pt=g(6407);class zt{constructor(){let{nodeId:i,element:r,attribute:o,size:n}=(0,Pt.X)(Math.ceil(1e9*Math.random())),v="";return{start:h=>{v=`M ${h.x} ${h.y} L ${h.x} ${h.y}`},move:(h,L)=>{((h,L)=>{v+=` ${h} ${L}`,r.setAttribute("d",v)})(h.x,h.y)},end:(h,L)=>{let x=(0,qt.CS)(v),{minX:W,minY:z,maxX:ft,maxY:gt}=(0,qt.lP)(x);n.x=W,n.y=z,n.width=ft-W||1,n.height=gt-z||1,n.ratioMaps=(0,qt.nf)(n,x),bt.data.node=Object.assign({id:i,type:P.h.PATH,name:"Path"},{size:n,attribute:o})}}}}var ht=g(745);class wt{constructor(){let i=(0,O.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,size:n,attribute:l,style:v,source:m}=(0,ht.$)(Math.ceil(1e9*Math.random()));var h=(L,x,W,z)=>{n=(0,D.CE)(L,x,W,z),n.x=(0,p.z)(n.x),n.y=(0,p.z)(n.y),n.width=(0,p.z)(n.width),n.height=(0,p.z)(n.height),Object.assign(l,(0,D.xW)(P.h.FOREIGNOBJECT,n,l)),(0,O.tD)(o,l),(0,O.in)(i,n)};return{start:L=>{h(L.x,L.y,L.x+n.width,L.y+n.height)},move:(L,x)=>{h(x[0][0],x[0][1],L.x,L.y)},end:(L,x)=>{(n.width<=16||n.height<=16)&&(n.width=90,n.height=60,n.x=n.x-n.width/2,n.y=n.y-n.height/2,Object.assign(l,(0,D.xW)(P.h.FOREIGNOBJECT,n,l)),(0,O.tD)(o,l)),bt.data.node=Object.assign({id:r,type:P.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:v,source:m}),null==i||i.remove()}}}}var Kt=g(9173);class Z{constructor(){var i,r;let o=(0,O.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:n,element:l,size:v,attribute:m,source:h}=(0,Kt.B)(Math.ceil(1e9*Math.random())),L=1;(W=>{if(!W)return;let z=new Image;z.onload=()=>{L=(0,p.z)(z.naturalWidth/z.naturalHeight,100)},z.onerror=ft=>{console.error(`ImgSrc load failed -> ${W}`,ft)},z.src=W})(null!==(i=null===(r=h.image)||void 0===r?void 0:r.url)&&void 0!==i?i:"");var x=(W,z,ft,gt)=>{v=(0,D.CE)(W,z,ft,gt,{ratio:L}),v.x=(0,p.z)(v.x),v.y=(0,p.z)(v.y),v.width=(0,p.z)(v.width),v.height=(0,p.z)(v.height),Object.assign(m,(0,D.xW)(P.h.IMAGE,v,m)),(0,O.tD)(l,m),(0,O.in)(o,v)};return{start:W=>{x(W.x,W.y,W.x+v.width,W.y+v.height)},move:(W,z)=>{x(z[0][0],z[0][1],W.x,W.y)},end:(W,z)=>{(v.width<=16||v.height<=16)&&(v.width=80,v.height=80,v.x=v.x-v.width/2,v.y=v.y-v.height/2,Object.assign(m,(0,D.xW)(P.h.IMAGE,v,m)),(0,O.tD)(l,m)),bt.data.node=Object.assign({id:n,type:P.h.IMAGE,name:"Image"},{size:v,attribute:m,source:h}),null==o||o.remove()}}}}var Tt=g(7135),Gt=g(4979);function u(K,i,r,o){return Math.sqrt(Math.pow(r-K,2)+Math.pow(o-i,2))}function lt(K,i,r,o,n){return u(K,i,r,o)<n?1:0}function At(K,i,r,o,n,l,v){var m=[];return m.push(lt(K,i,r,o,v)),m.push(lt(K,i,n,l,v)),m.push(function St(K,i,r,o,n,l,v){var m=[n-r,l-o],h=[K-r,i-o],L=[-m[1],m[0]],x=Math.sqrt(Math.pow(L[0],2)+Math.pow(L[1],2)),W=[L[0]/x,L[1]/x],z=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)),ft=[m[0]/z,m[1]/z],gt=h[0]*ft[0]+h[1]*ft[1];if(gt<=0||gt>=z)return 0;var _t=h[0]*W[0]+h[1]*W[1];return _t>=v||_t<=-v?0:1}(K,i,r,o,n,l,v)),m}function Ht(K,i,r,o,n){var l=[r-K,o-i],v=[-l[1],l[0]],m=Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2)),h=[v[0]/m,v[1]/m];return[[K+n*h[0],i+n*h[1]],[K-n*h[0],i-n*h[1]],[r-n*h[0],o-n*h[1]],[r+n*h[0],o+n*h[1]]]}function Qt(K,i,r,o,n,l,v){var gt,m=[n-K,l-i],h=[r-K,o-i],L=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)),x=[h[0]/L,h[1]/L],W=m[0]*x[0]+m[1]*x[1],z=[K+W*x[0],i+W*x[1]],ft=Math.sqrt(Math.pow(n-z[0],2)+Math.pow(l-z[1],2));gt=0===ft?v:Math.sqrt(Math.pow(v,2)-Math.pow(ft,2));var _t=[K+W*x[0]+gt*x[0],i+W*x[1]+gt*x[1]];return _t[0]===K&&_t[1]===i?null:_t}function Nt(K,i,r,o,n,l,v){var m=[n-K,l-i],h=[r-K,o-i],L=[-h[1],h[0]],x=Math.sqrt(Math.pow(L[0],2)+Math.pow(L[1],2)),W=[L[0]/x,L[1]/x],z=m[0]*W[0]+m[1]*W[1],ft=d([K,i],[r,o],[n,l]);if(Lt([ft[0]-n,ft[1]-l])>=v)return null;var _t=Math.sqrt(Math.pow(v,2)-Math.pow(z,2)),It=[n-z*W[0],l-z*W[1]],$t=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)),we=[h[0]/$t,h[1]/$t],ge=[[It[0]-we[0]*_t,It[1]-we[1]*_t],[It[0]+we[0]*_t,It[1]+we[1]*_t]];return ge[0][0]===K&&ge[0][1]===i?null:ge}function Bt(K,i,r,o,n,l,v,m){var h,L,x,W,z,ft;return-(x=v-n)*(L=o-i)+(h=r-K)*(W=m-l)==0?null:(ft=(x*(i-l)-W*(K-n))/(-x*L+h*W),(z=(-L*(K-n)+h*(i-l))/(-x*L+h*W))>=0&&z<=1&&ft>=0&&ft<=1?[K+ft*h,i+ft*L]:null)}function ie(K,i,r,o,n,l,v,m,h,L){var x=Ht(l,v,m,h,L),W=[];if(r[0]&&!r[1])W.push(Qt(K,i,o,n,l,v,L)),W.push(Bt(K,i,o,n,x[0][0],x[0][1],x[3][0],x[3][1])),W.push(Bt(K,i,o,n,x[1][0],x[1][1],x[2][0],x[2][1])),(z=Nt(K,i,o,n,m,h,L))&&W.push(z[0],z[1]);else if(!r[0]&&r[1])W.push(Qt(K,i,o,n,m,h,L)),W.push(Bt(K,i,o,n,x[0][0],x[0][1],x[3][0],x[3][1])),W.push(Bt(K,i,o,n,x[1][0],x[1][1],x[2][0],x[2][1])),(z=Nt(K,i,o,n,l,v,L))&&W.push(z[0],z[1]);else if(r[0]&&r[1])W.push(Qt(K,i,o,n,l,v,L)),W.push(Bt(K,i,o,n,x[0][0],x[0][1],x[3][0],x[3][1])),W.push(Bt(K,i,o,n,x[1][0],x[1][1],x[2][0],x[2][1])),W.push(Qt(K,i,o,n,m,h,L));else{var z=Nt(K,i,o,n,m,h,L),ft=Nt(K,i,o,n,l,v,L);z&&W.push(z[0],z[1]),ft&&W.push(ft[0],ft[1]),W.push(Bt(K,i,o,n,x[0][0],x[0][1],x[3][0],x[3][1])),W.push(Bt(K,i,o,n,x[1][0],x[1][1],x[2][0],x[2][1]))}for(var gt=[K,i],_t=0;_t<W.length;_t++)W[_t]&&u(W[_t][0],W[_t][1],o,n)<u(gt[0],gt[1],o,n)&&(gt=W[_t]);return gt[0]===K&&gt[1]===i?null:gt}function Dt(K,i,r,o,n,l,v,m,h){var L=Ht(n,l,v,m,h),x=[],W=Nt(K,i,r,o,n,l,h);W&&x.push(W[0],W[1]),(W=Nt(K,i,r,o,v,m,h))&&x.push(W[0],W[1]),x.push(Bt(K,i,r,o,L[0][0],L[0][1],L[3][0],L[3][1])),x.push(Bt(K,i,r,o,L[1][0],L[1][1],L[2][0],L[2][1]));for(var z=[r,o],ft=[K,i],gt=0;gt<x.length;gt++)x[gt]&&u(x[gt][0],x[gt][1],K,i)<u(z[0],z[1],K,i)&&(z=x[gt]);for(var _t=0;_t<x.length;_t++)x[_t]&&u(x[_t][0],x[_t][1],r,o)<u(ft[0],ft[1],r,o)&&(ft=x[_t]);return z[0]===r&&z[1]===o||ft[0]===K&&ft[1]===i?null:[z,ft]}var Lt=function(K){return Math.sqrt(K[0]*K[0]+K[1]*K[1])},d=function(K,i,r){var o=[i[0]-K[0],i[1]-K[1]],n=Lt(o);if(n<1e-6)return K;var l=[r[0]-K[0],r[1]-K[1]],v=(o[0]*l[0]+o[1]*l[1])/n;return v<0?K:v>n?i:[K[0]+o[0]*v/n,K[1]+o[1]*v/n]};class U{constructor(){let{element:o,size:l}=(0,Pt.X)(Math.ceil(1e9*Math.random()));(0,O.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let v="";return{start:L=>{v=`M ${L.x} ${L.y} L ${L.x} ${L.y}`},move:(L,x)=>{((L,x)=>{v+=` ${L} ${x}`,o.setAttribute("d",v)})(L.x,L.y)},end:(L,x)=>{o.remove(),(L=>{let x=9999,W=9999,z=-9999,ft=-9999;L.forEach(_t=>{x=Math.min(x,_t[0]),W=Math.min(W,_t[1]),z=Math.max(z,_t[0]),ft=Math.max(ft,_t[1])}),l=(0,D.CE)(x,W,z,ft,{points:L}),bt.data.getNodeInArea(0,0,1920,1920,P.h.PATH).forEach(_t=>{let $t=((K,i,r)=>{r=r||20;var o=[],n=function(x){var W=i[0][0],z=i[0][1],ft=0,gt=0;if(1!==x.length||lt(x[0][0],x[0][1],W,z,r)){for(var _t;ft<x.length-1;){var It=x[ft],$t=x[ft+1],we=lt(It[0],It[1],W,z,r),ge=lt($t[0],$t[1],W,z,r);if(we&&ge)gt=++ft;else if(we&&!ge)(_e=Qt(It[0],It[1],$t[0],$t[1],W,z,r))?(x[ft]=_e,gt=ft):ft++;else if(!we&&ge){var _e;(_e=Qt($t[0],$t[1],It[0],It[1],W,z,r))&&((_t=x.slice(gt,ft+1)).push(_e),o.push(_t)),gt=++ft}else{var xe=Nt(It[0],It[1],$t[0],$t[1],W,z,r);xe?(((_t=x.slice(gt,ft+1))[_t.length-1][0]!==xe[0][0]||_t[_t.length-1][1]!==xe[0][1])&&_t.push(xe[0]),_t.length>1&&o.push(_t),x[ft]=xe[1],x[ft+1]&&x[ft+1][0]==xe[1][0]&&x[ft+1][1]==xe[1][1]&&ft++,gt=ft):ft++}}gt!==ft&&(_t=x.slice(gt,x.length))&&o.push(_t)}else o.push(x)},l=function(x,W){var $t,z=i[W],ft=i[W+1],gt=0,_t=0;if(1!==x.length||-1!==(It=At(x[0][0],x[0][1],z[0],z[1],ft[0],ft[1],r)).indexOf(1)){for(;gt<x.length-1;){var we=x[gt],ge=x[gt+1],It=At(we[0],we[1],z[0],z[1],ft[0],ft[1],r),_e=At(ge[0],ge[1],z[0],z[1],ft[0],ft[1],r);if(-1!==It.indexOf(1)&&-1!==_e.indexOf(1))_t=++gt;else if(-1!==It.indexOf(1)&&-1===_e.indexOf(1))(xe=ie(we[0],we[1],It,ge[0],ge[1],z[0],z[1],ft[0],ft[1],r))?(x[gt]=xe,_t=gt):gt++;else if(-1===It.indexOf(1)&&-1!==_e.indexOf(1)){var xe;(xe=ie(ge[0],ge[1],_e,we[0],we[1],z[0],z[1],ft[0],ft[1],r))?(($t=x.slice(_t,gt+1)).push(xe),o.push($t),_t=++gt):gt++}else{var Ce=Dt(we[0],we[1],ge[0],ge[1],z[0],z[1],ft[0],ft[1],r);Ce?((($t=x.slice(_t,gt+1))[$t.length-1][0]!==Ce[0][0]||$t[$t.length-1][1]!==Ce[0][1])&&$t.push(Ce[0]),$t.length>1&&o.push($t),x[gt]=Ce[1],x[gt+1]&&x[gt+1][0]==Ce[1][0]&&x[gt+1][1]==Ce[1][1]&&gt++,_t=gt):gt++}}_t!==gt&&($t=x.slice(_t,x.length))&&o.push($t)}else o.push(x)};if(i=function B(K){var i=[];if(1===K.length)i=K;else{for(var r=0;r<K.length-1;)(K[r][0]!==K[r+1][0]||K[r][1]!==K[r+1][1])&&i.push(K[r]),r++;0!==K.length&&0===i.length&&i.push(K[0]),(K[K.length-1][0]!==K[i.length-1][0]||K[K.length-1][1]!==K[i.length-1][1])&&i.push(K[r])}return i}(i),1===i.length){for(var v=0;v<K.length;v++)n(K[v]);K=o}else for(var m=0;m<i.length-1;m++){for(v=0;v<K.length;v++)l(K[v],m);K=o,o=[]}for(var h=0;h<K.length;h++)for(var L=0;L<K[h].length;L++)K[h][L][0]=Math.round(K[h][L][0]),K[h][L][1]=Math.round(K[h][L][1]);return K})(bt.data.getNode(_t).size.points,L,2);console.log($t)})})(x)}}}}var q=g(6847);class j{constructor(){let i=(0,O.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l,source:v}=(0,q.L)(Math.ceil(1e9*Math.random())),m=(h,L,x,W)=>{l=(0,D.CE)(h,L,x,W),l.x=(0,p.z)(l.x),l.y=(0,p.z)(l.y),l.width=(0,p.z)(l.width),l.height=(0,p.z)(l.height),Object.assign(n,(0,D.xW)(P.h.TEXT,l,n)),(0,O.tD)(o,n),(0,O.in)(i,l)};return{start:h=>{m(h.x,h.y,h.x+l.width,h.y+l.height)},move:(h,L)=>{m(L[0][0],L[0][1],h.x,h.y)},end:(h,L)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,D.xW)(P.h.TEXT,l,n)),(0,O.tD)(o,n)),bt.data.node=Object.assign({id:r,type:P.h.TEXT,name:"Text"},{size:l,attribute:n,source:v}),null==i||i.remove()}}}}var mt=g(4312),xt=g(2409),Ot=g(6078);var st=g(3073);class pt{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>bt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var r,o,n,l,v;null===(r=window.document.getElementById(ot.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(o=window.document.getElementById(ot.F.SELECT_GROUP))||void 0===o||o.remove(),null===(n=window.document.getElementById(ot.F.SCAN_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(ot.F.CREATE_GROUP))||void 0===l||l.remove(),null===(v=window.document.getElementById(ot.F.INTERACTIVE_GROUP))||void 0===v||v.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(m=>m(i))}deleteNode(){for(let i of this._selected_Ids){let r=bt.data.deleteNode(i);bt.history.push([{type:"delete",from:{id:r},to:{id:r}}])}bt.dataSelect.ids=[]}groupNode(){let i=[];if(bt.dataSelect.ids.length>=2){let r=bt.data.getNode(bt.dataSelect.ids[0]),{nodeId:o,attribute:n,size:l}=(0,st.v)(Math.ceil(1e9*Math.random()),void 0,r.pid?window.document.getElementById(r.pid):null);bt.data.node=Object.assign({id:o,type:P.h.GROUP,name:"G"},{size:l,attribute:n});for(let v of bt.dataSelect.ids)i.push(bt.data.addGroup(v,o))}if(i.length){bt.dataSelect.ids=i;let r=bt.dataSelect.nodes;1==r.length?(0,I.K)(r[0]):r.length>1&&(0,y.E)(r)}}ungroupNode(){let i=[];for(let r of bt.dataSelect.ids)i.push(bt.data.unGroup(r));if(i.length){bt.dataSelect.ids=i;let r=bt.dataSelect.nodes;1==r.length?(0,I.K)(r[0]):r.length>1&&(0,y.E)(r)}}}var Et=g(2837),Ft=g(8338);class Xt{createNodeImage(i,r){var o,n,l,v;let{nodeId:h,element:L,size:x,attribute:W,source:z}=(0,Kt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,Et.U)(i)}});(ft=>{if(!ft)return;let gt=new Image;gt.onload=()=>{let _t=(0,p.z)(gt.naturalWidth/gt.naturalHeight,100);_t>=1?(x.width=Math.min(gt.naturalWidth,512),x.height=(0,p.z)(x.width/_t,100)):(x.height=Math.min(gt.naturalHeight,512),x.width=(0,p.z)(x.height*_t,100)),x.x=(0,p.z)(x.x+50-x.width/2,100),x.y=(0,p.z)(x.y+50-x.height/2,100),Object.assign(W,(0,D.xW)(P.h.IMAGE,x,W)),(0,O.tD)(L,W),bt.data.node=Object.assign({id:h,type:P.h.IMAGE,name:"Image"},{size:x,attribute:W,source:z})},gt.onerror=_t=>{console.error(`ImgSrc load failed -> ${ft}`,_t),null==L||L.remove()},gt.src=ft})(null!==(l=null===(v=z.image)||void 0===v?void 0:v.url)&&void 0!==l?l:"")}createNodeIframe(i,r){var o,n;let{nodeId:v,element:m,size:h,attribute:L,style:x,source:W}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,Et.U)(i)}});(z=>{let ft=(null===(z=bt.data.slide)||void 0===z||null===(z=z.svg)||void 0===z?void 0:z.viewBox)||{x:0,y:0,width:100,height:100},gt=(0,p.z)(ft.width/ft.height,100);gt>=1?(h.width=Math.min(ft.width,512),h.height=(0,p.z)(h.width/gt,100)):(h.height=Math.min(ft.height,512),h.width=(0,p.z)(h.height*gt,100)),h.x=(0,p.z)(h.x+50-h.width/2,100),h.y=(0,p.z)(h.y+50-h.height/2,100),Object.assign(L,(0,D.xW)(P.h.IMAGE,h,L)),(0,O.tD)(m,L),bt.data.node=Object.assign({id:v,type:P.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:L,style:x,source:W})})()}createNodeEmbed(i,r){var o,n;let l={x:50,y:50,width:640,height:360};i.type==Ft.S.AUDIO&&(l.width=480,l.height=80);let{nodeId:v,element:m,size:h,attribute:L,style:x,source:W}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:l.x)-l.x,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:l.y)-l.y,width:l.width,height:l.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,Et.U)(i))}});(()=>{let z=(0,p.z)(l.width/l.height,100);z>=1?(h.width=Math.min(h.width,l.width),h.height=(0,p.z)(h.width/z,1)):(h.height=Math.min(h.height,l.height),h.width=(0,p.z)(h.height*z,1)),h.x=(0,p.z)(h.x+l.x-h.width/2,1),h.y=(0,p.z)(h.y+l.y-h.height/2,1),Object.assign(L,(0,D.xW)(P.h.FOREIGNOBJECT,h,L)),(0,O.tD)(m,L),bt.data.node=Object.assign({id:v,type:P.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:L,style:x,source:W})})()}createNodeMedia(i,r){var o,n,l,v;let{nodeId:h,element:L,size:x,attribute:W,source:z}=(0,Kt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,Et.U)(i.cover)}}),ft={click:{media:i.media}};(gt=>{if(!gt)return;let _t=new Image;_t.onload=()=>{let It=(0,p.z)(_t.naturalWidth/_t.naturalHeight,100);It>=1?(x.width=Math.min(_t.naturalWidth,512),x.height=(0,p.z)(x.width/It,100)):(x.height=Math.min(_t.naturalHeight,512),x.width=(0,p.z)(x.height*It,100)),x.x=(0,p.z)(x.x+50-x.width/2,100),x.y=(0,p.z)(x.y+50-x.height/2,100),Object.assign(W,(0,D.xW)(P.h.IMAGE,x,W)),(0,O.tD)(L,W),bt.data.node=Object.assign({id:h,type:P.h.IMAGE,name:"Image"},{size:x,attribute:W,source:z,interactive:ft})},_t.onerror=It=>{console.error(`ImgSrc load failed -> ${gt}`,It),null==L||L.remove()},_t.src=gt})(null!==(l=null===(v=z.image)||void 0===v?void 0:v.url)&&void 0!==l?l:"")}createNodeText(i,r){var o,n;let{nodeId:v,element:m,size:h,attribute:L,style:x,source:W}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:0)-0,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let z=(0,p.z)(4,100);z>=1?(h.width=Math.min(h.width,320),h.height=(0,p.z)(h.width/z,1)):(h.height=Math.min(h.height,80),h.width=(0,p.z)(h.height*z,1)),h.x=(0,p.z)(h.x+0-h.width/2,1),h.y=(0,p.z)(h.y+0-h.height/2,1),Object.assign(L,(0,D.xW)(P.h.FOREIGNOBJECT,h,L)),(0,O.tD)(m,L),bt.data.node=Object.assign({id:v,type:P.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:L,style:x,source:W})})()}insert(i){var r;if(bt.data.insertSlide(bt.data.slideId,1),i.title){let{nodeId:o,size:n,attribute:l,style:v,source:m}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});bt.data.node=Object.assign({id:o,type:P.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:v,source:m})}if(i.description){let{nodeId:o,size:n,attribute:l,style:v,source:m}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});bt.data.node=Object.assign({id:o,type:P.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:v,source:m})}null!==(r=i.media)&&void 0!==r&&r.prompt&&((()=>{let{nodeId:o,size:n,attribute:l}=(0,et.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});bt.data.node=Object.assign({id:o,type:P.h.RECT,name:"Rect"},{size:n,attribute:l})})(),(o=>{let{nodeId:n,size:l,attribute:v,style:m,source:h}=(0,ht.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});bt.data.node=Object.assign({id:n,type:P.h.FOREIGNOBJECT,name:"ForeignObject"},{size:l,attribute:v,style:m,source:h})})())}}var Vt=g(1026);class se{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:bt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let r=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,v)=>v==this._slideIdx),o=null==r?void 0:r.svg,n=l=>{let v=[];return l.filter(m=>!m.isdeleted).forEach(m=>{m.type==P.h.GROUP?v=v.concat(n(m.nodes||[])):v.push(m.id)}),v};return n((null==o?void 0:o.nodes)||[])}}get get(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(v=>v.type==P.h.GROUP).forEach(v=>{var m;v.nodes=r(null===(m=v.nodes)||void 0===m?void 0:m.filter(h=>!h.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(v=>{var m,h;return v.type!=P.h.GROUP||(null!==(m=null===(h=v.nodes)||void 0===h?void 0:h.length)&&void 0!==m?m:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource}get getResource(){var i;let r=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n,l,v,m,h,L,x,W;r.push(null===(n=o.svg)||void 0===n||null===(n=n.background)||void 0===n?void 0:n.path),null===(l=o.svg)||void 0===l||l.nodes.forEach(z=>{var ft,gt,_t,It,$t,we,ge,_e,xe,Ce;r.push(null===(ft=z.source)||void 0===ft||null===(ft=ft.image)||void 0===ft?void 0:ft.path),r.push(null===(gt=z.source)||void 0===gt||null===(gt=gt.audio)||void 0===gt?void 0:gt.path),r.push(null===(_t=z.source)||void 0===_t||null===(_t=_t.video)||void 0===_t?void 0:_t.path),r.push(null===(It=z.source)||void 0===It||null===(It=It.file)||void 0===It?void 0:It.path),r.push(null===($t=z.source)||void 0===$t||null===($t=$t.iframe)||void 0===$t?void 0:$t.path),r.push(null===(we=z.source)||void 0===we||null===(we=we.track)||void 0===we?void 0:we.path),r.push(null===(ge=z.interactive)||void 0===ge||null===(ge=ge.show)||void 0===ge||null===(ge=ge.audio)||void 0===ge||null===(ge=ge.source)||void 0===ge?void 0:ge.path),r.push(null===(_e=z.interactive)||void 0===_e||null===(_e=_e.click)||void 0===_e||null===(_e=_e.audio)||void 0===_e||null===(_e=_e.source)||void 0===_e?void 0:_e.path),r.push(null===(xe=z.interactive)||void 0===xe||null===(xe=xe.click)||void 0===xe||null===(xe=xe.image)||void 0===xe||null===(xe=xe.source)||void 0===xe?void 0:xe.path),r.push(null===(Ce=z.interactive)||void 0===Ce||null===(Ce=Ce.click)||void 0===Ce||null===(Ce=Ce.video)||void 0===Ce||null===(Ce=Ce.source)||void 0===Ce?void 0:Ce.path)}),r.push(null===(v=o.test)||void 0===v||null===(v=v.audiotrue)||void 0===v?void 0:v.path),r.push(null===(m=o.test)||void 0===m||null===(m=m.audiofalse)||void 0===m?void 0:m.path),r.push(null===(h=o.test)||void 0===h||null===(h=h.effecttrue)||void 0===h?void 0:h.path),r.push(null===(L=o.test)||void 0===L||null===(L=L.effectfalse)||void 0===L?void 0:L.path),r.push(null===(x=o.test)||void 0===x||null===(x=x.icontrue)||void 0===x?void 0:x.path),r.push(null===(W=o.test)||void 0===W||null===(W=W.iconfalse)||void 0===W?void 0:W.path)}),r.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,n,l)=>l.indexOf(o)==n)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,O.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(v=>v.type==P.h.GROUP).forEach(v=>{var m;v.nodes=r(null===(m=v.nodes)||void 0===m?void 0:m.filter(h=>!h.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(v=>{var m,h;return v.type!=P.h.GROUP||(null!==(m=null===(h=v.nodes)||void 0===h?void 0:h.length)&&void 0!==m?m:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,O.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,r;return null!==(i=null===(r=this.slide)||void 0===r?void 0:r.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((r,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,r;this._slideIdx<(null!==(i=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,O.rN)(),(0,Vt.t)(this.slide)}openSlide(i,r){var o,n,l,v,m;if(i)for(let z=0,ft=null!==(h=null===(L=this._dataSource.slides)||void 0===L?void 0:L.length)&&void 0!==h?h:0;z<ft;z++){var h,L,x;if((null!==(x=this._dataSource.slides)&&void 0!==x?x:[])[z].id==i){this._slideIdx=z;break}}else if(r&&r>=0&&r<(null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==o?o:0))this._slideIdx=null!=r?r:0;else{var W;this._slideIdx=0,null!==(W=this._dataSource.slides)&&void 0!==W&&W.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,O.rN)(),null!==(l=this.slide)&&void 0!==l&&null!==(l=l.svg)&&void 0!==l&&l.viewBox&&(bt.screen.frameSize=this.slide.svg.viewBox),(0,Vt.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(v=null===(m=this._dataSource.slides)||void 0===m?void 0:m.length)&&void 0!==v?v:0,this.slide)}addSlide(){var i,r,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==r?r:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,r,o){var n,l,v,m,h;let L=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(W=>W.id==i);if(!o||!L||null!=L&&null!==(l=L.svg)&&void 0!==l&&l.nodes.filter(W=>!W.isdeleted).length)return this.insertSlide(i,r,o);let x=null!==(v=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(L))&&void 0!==v?v:0;null===(h=this._dataSource.slides)||void 0===h||h.splice(x,1,o),this._slideIdx=x,this.openSlide(void 0,this._slideIdx)}insertSlide(i,r,o){var n,l,v,m,h;let L=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(z=>z.id==i))&&void 0!==n?n:this._defaultSlide,x=(null!==(v=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(L))&&void 0!==v?v:0)+r;var W;o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(W=o.svg)&&void 0!==W&&W.viewBox||o.svg&&(o.svg.viewBox=bt.screen.frameSize)):o=this._defaultSlide,null===(h=this._dataSource.slides)||void 0===h||h.splice(x,0,o),this._slideIdx=x,this.openSlide(void 0,this._slideIdx)}copySlide(i){var r,o,n,l,v,m,h;let L=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(z=>z.id==i))&&void 0!==r?r:this._defaultSlide,x=(null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(L))&&void 0!==n?n:0)+1,W=Object.assign(JSON.parse(JSON.stringify(L)),{id:this.newSlideId,code:void 0,name:`${L.name} + (Copy)`});null===(v=this._dataSource.slides)||void 0===v||v.splice(x,0,W),this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(h=this._dataSource.slides)||void 0===h?void 0:h.length)&&void 0!==m?m:0,this.slide)}moveSlide(i,r){var o,n,l,v,m,h;let L=null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(W=>W.id==i))&&void 0!==o?o:this._defaultSlide,x=null!==(l=null===(v=this._dataSource.slides)||void 0===v?void 0:v.indexOf(L))&&void 0!==l?l:0;null===(m=this._dataSource.slides)||void 0===m||m.splice(x+r,0,null===(h=this._dataSource.slides)||void 0===h?void 0:h.splice(x,1)[0])}deleteSlide(i){var r,o,n,l,v,m;let h=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(z=>z.id==i))&&void 0!==r?r:this._defaultSlide,L=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(h))&&void 0!==n?n:0;if(null===(v=this._dataSource.slides)||void 0===v||v.splice(L,1),null!==(m=this._dataSource.slides)&&void 0!==m&&m.length)if(L<this._slideIdx){var x,W;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(x=null===(W=this._dataSource.slides)||void 0===W?void 0:W.length)&&void 0!==x?x:0,this.slide)}else L==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var r,o,n,l,v;let m=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(L=>L.id==i))&&void 0!==r?r:this._defaultSlide,h=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(m))&&void 0!==n?n:0;if(m.isdeleted=!0,null!==(v=this._dataSource.slides)&&void 0!==v&&null!==(v=v.filter(L=>!L.isdeleted))&&void 0!==v&&v.length){let L=!0;for(;m.isdeleted;)L?h++:h--,this._dataSource.slides[h]?m=this._dataSource.slides[h]:L=!L;this.openSlide(m.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,r,o,n){this._fnChangeSlides.forEach(l=>l(i,r,o,n))}set node(i){var r,o;let n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((l,v)=>v==this._slideIdx);null!=n&&null!==(o=n.svg)&&void 0!==o&&o.nodes&&n.svg.nodes.push(i),bt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Vt.t)(n),(0,Vt.t)(n,null==n?void 0:n.id)}findNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((z,ft)=>ft==this._slideIdx),n=null==o?void 0:o.svg,l=(z,ft)=>{let gt=null==z?void 0:z.find($t=>$t.id==i);if(gt)return gt.pid=ft,gt;let _t=0,It=z.length||0;for(;_t<It&&!gt&&(gt=l(z[_t].nodes||[],z[_t].id),!gt);)_t++;return gt},v=l((null==n?void 0:n.nodes)||[]);var m,h,L,x,W;return v?(v.style=null!==(m=v.style)&&void 0!==m?m:{},v.source=null!==(h=v.source)&&void 0!==h?h:{},v.animate=null!==(L=v.animate)&&void 0!==L?L:{},v.interactive=null!==(x=v.interactive)&&void 0!==x?x:{},v.variable=null!==(W=v.variable)&&void 0!==W?W:{},v):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((m,h)=>h==this._slideIdx),n=null==o?void 0:o.svg,v=m=>{let h=(null==m?void 0:m.find(gt=>gt.id==i))||(m=>{let h=null,L=0,x=m.length||0;for(;L<x&&!h;){if(h=v(m[L].nodes),h){h.pid=m[L].id;break}L++}var W,z,ft,gt,_t;return h&&(h.style=null!==(W=h.style)&&void 0!==W?W:{},h.source=null!==(z=h.source)&&void 0!==z?z:{},h.animate=null!==(ft=h.animate)&&void 0!==ft?ft:{},h.interactive=null!==(gt=h.interactive)&&void 0!==gt?gt:{},h.variable=null!==(_t=h.variable)&&void 0!==_t?_t:{}),h})((null==m?void 0:m.filter(gt=>gt.type==P.h.GROUP))||[]);var L,x,W,z,ft;return h&&(h.style=null!==(L=h.style)&&void 0!==L?L:{},h.source=null!==(x=h.source)&&void 0!==x?x:{},h.animate=null!==(W=h.animate)&&void 0!==W?W:{},h.interactive=null!==(z=h.interactive)&&void 0!==z?z:{},h.variable=null!==(ft=h.variable)&&void 0!==ft?ft:{}),h};return v((null==n?void 0:n.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,r,o,n,l){var v;let m=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((x,W)=>W==this._slideIdx),h=null==m?void 0:m.svg,L=x=>{let W=[];return x.filter(z=>!z.isdeleted).forEach(z=>{z.type==P.h.GROUP?W=W.concat(L(z.nodes||[])):i>z.size.x||r>z.size.y||o<z.size.x+z.size.width||n<z.size.y+z.size.height||(l?z.type==l&&W.push(z.id):W.push(z.id))}),W};return L((null==h?void 0:h.nodes)||[])}getNodeOnArea(i,r,o,n,l){var v;let m=null===(v=this._dataSource.slides)||void 0===v?void 0:v.find((x,W)=>W==this._slideIdx),h=null==m?void 0:m.svg,L=x=>{let W=[];return x.filter(z=>!z.isdeleted).forEach(z=>{z.type==P.h.GROUP?W=W.concat(L(z.nodes||[])):z.size.x+z.size.width<i||z.size.y+z.size.height<r||z.size.x>o||z.size.y>n||(l?z.type==l&&W.push(z.id):W.push(z.id))}),W};return L((null==h?void 0:h.nodes)||[])}deleteNode(i,r){var o;return this.getNode(i).isdeleted=null==r||r,(0,Vt.t)(this.slide),(0,Vt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var r,o;let n=this.getNode(i),l=Math.ceil(1e9*Math.random());return null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:l})),Object.assign(n,{isdeleted:!0}),(0,Vt.t)(this.slide),(0,Vt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),l}addGroup(i,r){var o;let n=this.getNode(i),l=this.getNode(r);l.nodes=l.nodes||[];let v=Math.ceil(1e9*Math.random());return l.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:v})),Object.assign(n,{isdeleted:!0}),(0,Vt.t)(this.slide),(0,Vt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),v}setNodeP(i,r){var o;let n=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(l=>l.id==i);n&&(n.pid=r||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,r){var o,n,l,v;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((x,W)=>{x.index=W+1});let m=(null!==(n=null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l?void 0:l.nodes.length)&&void 0!==n?n:0)+1;var h,L;i.map(x=>{var W,z;return{id:x,index:null!==(W=null===(z=this.slide)||void 0===z||null===(z=z.svg)||void 0===z||null===(z=z.nodes.find(ft=>ft.id==x))||void 0===z?void 0:z.index)&&void 0!==W?W:0}}).sort((x,W)=>x.index-W.index).forEach(x=>{var z,W;r?null===(z=this.slide)||void 0===z||null===(z=z.svg)||void 0===z||z.nodes.filter((ft,gt)=>ft.id==x.id).forEach(ft=>{ft.index=r+x.index+x.index/1e3}):null===(W=this.slide)||void 0===W||null===(W=W.svg)||void 0===W||W.nodes.filter(ft=>ft.id==x.id).forEach(ft=>{ft.index=m+x.index})}),null===(v=this.slide)||void 0===v||null===(v=v.svg)||void 0===v||v.nodes.sort((x,W)=>{var z,ft;return(null!==(z=x.index)&&void 0!==z?z:0)-(null!==(ft=W.index)&&void 0!==ft?ft:0)}),(0,Vt.$)(this.slide),i.length<=1?(null===(h=window.document.getElementById(ot.F.RESIZE_GROUP))||void 0===h||h.remove(),(0,I.K)(bt.dataSelect.nodes[0])):(null===(L=window.document.getElementById(ot.F.SELECT_GROUP))||void 0===L||L.remove(),(0,y.E)(bt.dataSelect.nodes))}sendToBackStep(i,r){var o,n,l,v;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((m,h)=>{m.index=h+1}),i.map(m=>{var h,L;return{id:m,index:null!==(h=null===(L=this.slide)||void 0===L||null===(L=L.svg)||void 0===L||null===(L=L.nodes.find(x=>x.id==m))||void 0===L?void 0:L.index)&&void 0!==h?h:0}}).sort((m,h)=>m.index-h.index).forEach(m=>{var L,h;r?null===(L=this.slide)||void 0===L||null===(L=L.svg)||void 0===L||L.nodes.filter(x=>x.id==m.id).forEach(x=>{x.index=r+m.index+m.index/1e3}):null===(h=this.slide)||void 0===h||null===(h=h.svg)||void 0===h||h.nodes.filter(x=>x.id==m.id).forEach(x=>{x.index=m.index/100-1})}),null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.sort((m,h)=>{var L,x;return(null!==(L=m.index)&&void 0!==L?L:0)-(null!==(x=h.index)&&void 0!==x?x:0)}),(0,Vt.$)(this.slide),i.length<=1?(null===(l=window.document.getElementById(ot.F.RESIZE_GROUP))||void 0===l||l.remove(),(0,I.K)(bt.dataSelect.nodes[0])):(null===(v=window.document.getElementById(ot.F.SELECT_GROUP))||void 0===v||v.remove(),(0,y.E)(bt.dataSelect.nodes))}bringToFrontArea(i){var r,o;let n=i.map(gt=>bt.data.getNode(gt)).filter(gt=>!gt.isfake),{x1:l,y1:v,x2:m,y2:h}=ne(n),L=this.getNodeOnArea(l,v,m,h);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((gt,_t)=>{gt.index=_t+1});let x=L.map(gt=>{var _t,It;return null!==(_t=null===(It=this.slide)||void 0===It||null===(It=It.svg)||void 0===It||null===(It=It.nodes.find($t=>$t.id==gt))||void 0===It?void 0:It.index)&&void 0!==_t?_t:0}),W=Math.max.apply(null,x);var z,ft;i.forEach((gt,_t)=>{var It;null===(It=this.slide)||void 0===It||null===(It=It.svg)||void 0===It||It.nodes.filter($t=>$t.id==gt).forEach($t=>{$t.index=W+(_t+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((gt,_t)=>{var It,$t;return(null!==(It=gt.index)&&void 0!==It?It:0)-(null!==($t=_t.index)&&void 0!==$t?$t:0)}),(0,Vt.$)(this.slide),i.length<=1?(null===(z=window.document.getElementById(ot.F.RESIZE_GROUP))||void 0===z||z.remove(),(0,I.K)(bt.dataSelect.nodes[0])):(null===(ft=window.document.getElementById(ot.F.SELECT_GROUP))||void 0===ft||ft.remove(),(0,y.E)(bt.dataSelect.nodes))}sendToBackArea(i){var r,o;let n=i.map(gt=>bt.data.getNode(gt)).filter(gt=>!gt.isfake),{x1:l,y1:v,x2:m,y2:h}=ne(n),L=this.getNodeOnArea(l,v,m,h);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((gt,_t)=>{gt.index=_t+1});let x=L.map(gt=>{var _t,It;return null!==(_t=null===(It=this.slide)||void 0===It||null===(It=It.svg)||void 0===It||null===(It=It.nodes.find($t=>$t.id==gt))||void 0===It?void 0:It.index)&&void 0!==_t?_t:0}),W=Math.min.apply(null,x)-1;var z,ft;i.forEach((gt,_t)=>{var It;null===(It=this.slide)||void 0===It||null===(It=It.svg)||void 0===It||It.nodes.filter($t=>$t.id==gt).forEach($t=>{$t.index=W+(_t+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((gt,_t)=>{var It,$t;return(null!==(It=gt.index)&&void 0!==It?It:0)-(null!==($t=_t.index)&&void 0!==$t?$t:0)}),(0,Vt.$)(this.slide),i.length<=1?(null===(z=window.document.getElementById(ot.F.RESIZE_GROUP))||void 0===z||z.remove(),(0,I.K)(bt.dataSelect.nodes[0])):(null===(ft=window.document.getElementById(ot.F.SELECT_GROUP))||void 0===ft||ft.remove(),(0,y.E)(bt.dataSelect.nodes))}}const ne=K=>{let i=999999,r=999999,o=-999999,n=-999999;return K.forEach(l=>{i=Math.min(i,l.size.x),r=Math.min(r,l.size.y),o=Math.max(o,l.size.x+l.size.width),n=Math.max(n,l.size.y+l.size.height)}),{x1:i,y1:r,x2:o,y2:n}};class ae{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":bt.data.deleteNode(r.from.id);break;case"edit":break;case"delete":bt.data.deleteNode(r.from.id,!1);break;case"size":{let{id:o,type:n,size:l,attribute:v}=bt.data.getNode(r.from.id);Object.assign(l,r.from.size),Object.assign(v,(0,D.xW)(n,l,v)),(0,O.tD)(window.document.getElementById(o),v);break}case"attribute":{let{id:o,attribute:n}=bt.data.getNode(r.from.id);Object.assign(n,r.from.attribute),(0,O.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=bt.data.getNode(r.from.id);Object.assign(null!=n?n:{},r.from.style),(0,O.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=bt.data.getNode(r.from.id);Object.assign(null!=l?l:{},r.from.source),(0,O.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=bt.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.animate);break}case"interactive":{let{interactive:o}=bt.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.interactive);break}case"variable":{let{variable:o}=bt.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.variable);break}}}),bt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":bt.data.deleteNode(r.to.id,!1);break;case"edit":break;case"delete":bt.data.deleteNode(r.to.id,!0);break;case"size":{let{id:o,type:n,size:l,attribute:v}=bt.data.getNode(r.to.id);Object.assign(l,r.to.size),Object.assign(v,(0,D.xW)(n,l,v)),(0,O.tD)(window.document.getElementById(o),v);break}case"attribute":{let{id:o,attribute:n}=bt.data.getNode(r.to.id);Object.assign(n,r.to.attribute),(0,O.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=bt.data.getNode(r.to.id);Object.assign(null!=n?n:{},r.to.style),(0,O.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=bt.data.getNode(r.to.id);Object.assign(null!=l?l:{},r.to.source),(0,O.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=bt.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.animate);break}case"interactive":{let{interactive:o}=bt.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.interactive);break}case"variable":{let{variable:o}=bt.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.variable);break}}}),bt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class pe{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var r,o;this._frameSize.width=null!==(r=null==i?void 0:i.width)&&void 0!==r?r:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,r,o){var n;if(!(i<.01||i>100)){if(r=null!==(n=r)&&void 0!==n?n:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-r.x,this._dislocation.y=this._height/i/2-r.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var l={x:Math.max(0,Math.min((0,p.z)(r.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,p.z)(r.y/this._height,1e3),1))},v={x:(this._width/i-this._width/this._scale)*l.x,y:(this._height/i-this._height/this._scale)*l.y};this._dislocation.x+=v.x,this._dislocation.y+=v.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,r){this._dislocation.x=i.x+r.x/this._scale,this._dislocation.y=i.y+r.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,O.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(r=>r(i))}}var Ae=g(6195);class ke{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,Ae.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,Ae._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(r=>r(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(r=>r(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(r=>r(i)),this.saveConfig()}}var me=g(5619),Oe=g(334),Te=g(3591),be=function(K){return K&&JSON.parse(JSON.stringify(K))},Ue=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],He=[],$e={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},Xe={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class Ye{constructor(){this._data_variables=be(Ue).concat(be(He)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(r=>{r(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(r=>{r(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var r of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))r.if&&r.if.length>0&&(this.checkValueConditions(r.if)?this.setValueOperators(r.then||[]):this.setValueOperators(r.else||[]))}}renew(){this._data_variables=be(Ue).concat(be(He)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let r={};"string"==typeof i?r=JSON.parse(i):"object"==typeof i&&(r=i),this._data_variables=r.variables||[],this._data_conditions=r.conditions||(o=>(this._data_variables.map(n=>n.change||[]).forEach(n=>{o=o.concat(n)}),o))([]),Ue.forEach(o=>{var n=this._data_variables.filter(l=>l.key==o.key);n.length?n.forEach(function(l,v,m){l.type=o.type,l.readonly=o.readonly,l.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return be($e)}getConditionTemp(){return be(Xe)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,r){return i.localeCompare(r)})}getVariableAll(){return this._data_variables.length?be((K=this._data_variables,i="key",function(r){for(var o of K.map(function(n){return n[i]}).sort())K.filter(function(n){return n[i]==o}).forEach(function(n){r.push(n)}),K=K.filter(function(n){return n[i]!=o});return r}([]))):be(Ue).concat(be(He));var K,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Ue.forEach(r=>{var o=this._data_variables.filter(n=>n.key==r.key);o.length?o.forEach((n,l,v)=>{n.type=r.type,n.readonly=r.readonly,n.system=r.system}):this._data_variables.push(r)}))}getVariable(i){return i?be(this._data_variables.filter(r=>r.key==i)[0]||{}):{}}setVariable(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(l=>l.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(l=>l.key==i);n.length?n.forEach(function(l,v,m){l.value=r,l.type=o}):this._data_variables.push({key:i,value:r,type:o})}}getValue(i,r){if(!i)return"";var o=this._data_variables.filter(function(v){return v.key==i});if(o.length){var l,n=o[0]||{};switch(this.OnGetActionExecuting(n),r||(r=n.type||null),r){case"string":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":"string"==typeof n.value?n.value||"":n.value.toString().trim();break;case"number":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?0:"number"==typeof n.value?n.value||0:parseFloat(n.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(n.value)>=0?l=!1:"boolean"==typeof n.value?l=n.value:(l=(n.value+"").toLowerCase(),l="1"==n.value||"true"==n.value||"yes"==n.value||"dung"==n.value);break;case"audio-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></audio>`:"";break;case"video-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></video>`:"";break;case"img-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<img style="width:100%;vertical-align:middle;" src="${n.value}"/>`:"";break;default:l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value}return this.OnGetActionExecuted(n),l}return null}setValue(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(function(v){return v.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(function(v){return v.key==i});if(n.length){var l=n[0];this.OnSetActionExecuting(l),l&&(l.value=r),this.OnSetActionExecuted(l)}}}getConditionAll(){return be(this._data_conditions.sort(function(i,r){return i.idx-r.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?be(this._data_conditions.filter(r=>r.variable==i||(r.variables||[]).indexOf(i)>=0).sort(function(r,o){return r.idx-o.idx})):{}}switchCondition(i,r,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})>0):r==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),0==o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})):r!=o;case">=":return r>=o;case"<=":return r<=o;case">":return r>o;case"<":return r<o;case"\u2208":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),0==o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l});default:return!1}}switchOperator(i,r,o){switch(i){case"+":return r+o;case"-":return r-o;case"*":return r*o;case"/":return r/o;case"=":return o;case"=!":return!o;case"==":return r==o;case"!=":return r!=o}}switchFormula(i,r){switch(i){case"sum":return r.reduce(function(n,l){return n+l});case"sub":return r.reduce(function(n,l){return n-l});case"pro":return r.reduce(function(n,l){return n*l});case"div":return r.reduce(function(n,l){return n/l});case"avg":var o=r.reduce(function(n,l){return n+l})/(r.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,r);case"max":return Math.max.apply(null,r);case"and":return r.reduce(function(n,l){return n&&l});case"or":return r.reduce(function(n,l){return n||l});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var r=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),r)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(r=>{switch(r.type){case"variable":return this.switchValueType_Condition(r)?0:1;case"variables":return 0==r.variables.map(o=>this.switchValueType_Condition(Object.assign(be(r),{variable:o}))?0:1).reduce(function(o,n){return o+n})?0:1;default:return 0}}).reduce((r,o)=>(null!=r?r:0)+(null!=o?o:0))}setValueOperators(i){for(var r of i)switch(r.type){case"variable":this.setValue(r.variable,this.getValueOperator(r));break;case"variables":for(var o of r.variables)this.setValue(o,this.getValueOperator(Object.assign(be(r),{variable:o})));break;case"slide":me.J.runSlide(void 0,void 0,r.slide);break;case"node":{var n;(0,Te.GD)({id:r.node,nodeStatus:me.J.nodeStatus,slideStatus:me.J.slideStatus});let l=me.J.findNode(r.node);null!=l&&null!==(n=l.interactive)&&void 0!==n&&n.click&&(0,Oe.J)(l,me.J.nodeStatus,me.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(r=>{r(i)})}}class ti{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,r,o){if(this._pointer_type=i,r)switch(i){case T.P.PEN:this._pen_type=r;break;case T.P.SHAPE:this._shape_type=r,o&&r===P.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case T.P.PEN:this._pen_type||(this._pen_type=xt.F.DRAW);break;case T.P.SHAPE:this._shape_type||(this._shape_type=P.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,r,o){this._fnChangePointerTypes.forEach(n=>n(i,r,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,r,o){this._fnChangePointerTypeTemps.forEach(n=>n(i,r,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,r,o){this._fnChangePenTypes.forEach(n=>n(i,r,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,r,o){this._fnChangeShapeTypes.forEach(n=>n(i,r,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,r,o){this._fnChangePolygonTypes.forEach(n=>n(i,r,o))}set onchange(i){this._fnChanges.push(i)}change(i,r,o){this._fnChanges.forEach(n=>n(i,r,o))}}const bt=new class hi{constructor(){this._container="",this._svg="",this._screen=pe.prototype,this._data=se.prototype,this._dataSelect=pt.prototype,this._slide=Xt.prototype,this._history=ae.prototype,this._attribute=ke.prototype,this._pointer=ti.prototype,this._variable=Ye.prototype,this._data=new se,this._dataSelect=new pt,this._slide=new Xt,this._history=new ae,this._attribute=new ke,this._pointer=new ti,this._variable=new Ye,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,r,o,n,l;this._screen.screen=(i=jQuery(this._container).offset(),r=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(n=null==i?void 0:i.left)&&void 0!==n?n:0,y:null!==(l=null==i?void 0:i.top)&&void 0!==l?l:0},width:null!=r?r:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new pe,(K=>{new O.cR(K.container,K.target);var i=(n,l,v,m)=>{switch(n){case T.P.POINTER:jQuery(K.target).css({cursor:"auto"});break;case T.P.HAND:m?jQuery(K.target).css({cursor:"grabbing"}):jQuery(K.target).css({cursor:"grab"});break;case T.P.PEN:switch(l){case xt.F.DRAW:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case xt.F.HIGHTLIGH:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case T.P.ERASER:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case T.P.SHAPE:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case T.P.TEXT:case T.P.FOREIGNOBJECT:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};bt.pointer.onchange=(n,l,v)=>{i(n,l)},jQuery(K.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",n=>{i(bt.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",n=>{i(bt.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",n=>{n.ctrlKey&&n.preventDefault()},{passive:!1}),jQuery(K.container).off("wheel.icdt-init").on("wheel.icdt-init",n=>{var l;n.preventDefault();let v=null!==(l=n.originalEvent)&&void 0!==l?l:n;if(!v.deltaX&&v.deltaY!=Math.floor(v.deltaY)||v.ctrlKey){var m=bt.screen.scale;bt.screen.scaleTo(m-.04*m*(v.deltaY>0?1:-1),(0,Ot.D)({x:n.clientX,y:n.clientY},1,{x:0,y:0},bt.screen.offset))}else bt.screen.move(bt.screen.dislocation,{x:-v.deltaX,y:-v.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{bt.screen.actived=!!jQuery(n.target).parents(bt.container).length}),jQuery(K.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",n=>{bt.screen.actived=!0}),jQuery(K.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",n=>{bt.screen.actived=!1,bt.pointer.pointer_type_temp==T.P.HAND&&(bt.pointer.pointer_type_temp=T.P.POINTER)}),jQuery(K.container).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{0==n.button&&(K.container.includes("#")&&K.container.includes(n.target.getAttribute("id"))||K.container.includes(".")&&K.container.includes(n.target.getAttribute("class"))||K.container.includes(n.target.nodeName))&&(bt.pointer.pointer_type_temp||bt.pointer.pointer_type)===T.P.POINTER&&(bt.dataSelect.ids=[])}),jQuery(K.container).off("touchmove.icdt-init").on("touchmove.icdt-init",n=>{n.preventDefault()});const r=n=>{switch(bt.pointer.pointer_type_temp||bt.pointer.pointer_type){case T.P.POINTER:c(n);break;case T.P.HAND:(K=>{(0,ct.I)(K,new R,1,{x:0,y:0})})(n);break;case T.P.PEN:(0,Gt.u)(n);break;case T.P.SHAPE:(K=>{var i=null;switch(bt.pointer.shape_type){case P.h.CIRCLE:i=new Q;break;case P.h.ELLIPSE:i=new tt;break;case P.h.LINE:i=new Jt;break;case P.h.RECT:i=new V;break;case P.h.POLYGON:var r;i=new at(null===(r=b.find(o=>o.type==bt.pointer.polygon_type))||void 0===r?void 0:r.ratios);break;case P.h.FOREIGNOBJECT:i=new wt;break;case P.h.IMAGE:i=new Z;break;case P.h.TEXT:case P.h.PATH:i=new zt}i&&(0,ct.I)(K,i)})(n);break;case T.P.FOREIGNOBJECT:(K=>{(0,ct.I)(K,new wt)})(n);break;case T.P.IMAGE:(K=>{(0,ct.I)(K,new Z)})(n);break;case T.P.TEXT:(K=>{(0,ct.I)(K,new j)})(n);break;case T.P.ERASER:(K=>{(0,ct.I)(K,new U)})(n);break;case T.P.INDEX:(0,mt.h)(n)}};let o=!1;jQuery(K.target).off("touchstart.icdt-init").on("touchstart.icdt-init",n=>{o=!0,r({touchEvent:n})}),jQuery(K.target).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{if(1!=n.button){if(o)return void(o=!1);r({mouseEvent:n})}}),K.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",n=>{bt.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Tt.K)(n))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",n=>{bt.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Tt.K)(n))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(he,Mt,g)=>{g.d(Mt,{h:()=>M,y:()=>c});var T=g(7873),O=g(7102),ot=g(9506),D=g(1308),ct=g(5970);const M=N=>{var R,P,rt,b;let k=(null===(R=N.mouseEvent)||void 0===R?void 0:R.target)||(null===(P=N.touchEvent)||void 0===P?void 0:P.target),p=(null==k?void 0:k.getAttribute("id"))||"",Q=null==k?void 0:k.nodeName,A=jQuery(k).parents("g[id]").attr("id")||"";if(![T.F.INDEX_GROUP].includes(A))if(null!==(rt=N.mouseEvent)&&void 0!==rt&&rt.altKey||null!==(b=N.touchEvent)&&void 0!==b&&b.altKey||!p||p.match(/[^0-9]/)||!O.L.dataSelect.nodeName.includes(Q)){var tt;O.L.dataSelect.ids.length&&(O.L.dataSelect.ids=[]),(0==(null===(tt=N.mouseEvent)||void 0===tt?void 0:tt.button)||N.touchEvent)&&((N,R)=>{let p=(0,ct.RY)(T.F.SCAN_GROUP,"g"),Q=(0,ot.CE)(0,0,1,1);(0,ct.xJ)(p,Q),((N,R,P,rt)=>{(0,D.I)(N,{start:p=>{},move:(p,Q)=>{((p,Q,A,tt)=>{R=(0,ot.CE)(p,Q,A,tt),(0,ct.xJ)(P,R)})(Q[0][0],Q[0][1],p.x,p.y)},end:(p,Q)=>{null==P||P.remove(),O.L.dataSelect.ids=O.L.data.getNodeInArea(Math.min(Q[0][0],p.x),Math.min(Q[0][1],p.y),Math.max(Q[0][0],p.x),Math.max(Q[0][1],p.y)),rt(O.L.dataSelect.nodes)}})})(N,Q,p,R)})(N,F)}else{var et,V;let X=parseFloat(p||"0");O.L.dataSelect.ids=null!==(et=N.mouseEvent)&&void 0!==et&&et.shiftKey||null!==(V=N.touchEvent)&&void 0!==V&&V.shiftKey?[X].concat(O.L.dataSelect.ids).filter((Y,Jt,qt)=>qt.indexOf(Y)==Jt):[X],F(O.L.dataSelect.nodes)}},F=N=>{var R,P;let rt=1;var b,k;if(N.length&&(rt=Math.max.apply(null,null!==(b=null===(k=O.L.data.slide)||void 0===k||null===(k=k.svg)||void 0===k?void 0:k.nodes.map(Q=>{var A;return null!==(A=Q.idx)&&void 0!==A?A:0}))&&void 0!==b?b:[0])+1),1==N.length)N[0].idx||(N[0].idx=rt,N[0].time=0);else if(N.length>=0){let Q=N.map(tt=>{var et;return null!==(et=tt.idx)&&void 0!==et?et:0}).filter(tt=>tt>0),A=Q.length?Math.min.apply(null,Q):rt;N.forEach(tt=>{var et;tt.idx=A,tt.time=null!==(et=tt.time)&&void 0!==et?et:0})}let p=(0,ct.RY)(T.F.INDEX_GROUP,"g");(0,ct.IA)(p,null!==(R=null===(P=O.L.data.slide)||void 0===P||null===(P=P.svg)||void 0===P?void 0:P.nodes)&&void 0!==R?R:[])},c=N=>{var R,P,rt;null!=N&&null!==(R=N.svg)&&void 0!==R&&R.nodes&&N.svg.nodes.forEach(k=>{k.idx=0,k.time=null});let b=(0,ct.RY)(T.F.INDEX_GROUP,"g");(0,ct.IA)(b,null!==(P=null===(rt=O.L.data.slide)||void 0===rt||null===(rt=rt.svg)||void 0===rt?void 0:rt.nodes)&&void 0!==P?P:[])}},7135:(he,Mt,g)=>{g.d(Mt,{K:()=>P,X:()=>R});var T=g(6195),O=g(1477),ot=g(3603),D=g(7102),ct=g(6037),I=g(4333),y=g(1026),M=g(9841),F=g(2492),c=g(6752);const R=new class N{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:O.r.Escape,fn:()=>{D.L.dataSelect.ids.length&&(D.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:O.r.Delete,fn:()=>{D.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:O.r.Space,fn:()=>{D.L.pointer.pointer_type_temp=ot.P.HAND}},this.onchange={type:"keyup",key:O.r.Space,fn:()=>{D.L.pointer.pointer_type_temp=ot.P.POINTER}},this.onchange={type:"keydown",key:O.r.ArrowLeft,fn:()=>{D.L.dataSelect.ids.length||D.L.data.backSlide()}},this.onchange={type:"keydown",key:O.r.ArrowRight,fn:()=>{D.L.dataSelect.ids.length||D.L.data.nextSlide()}},this.onchange={type:"keydown",key:O.r.ArrowLeft,fn:()=>{D.L.dataSelect.ids.length&&(D.L.dataSelect.nodes.forEach(b=>{(0,c.ei)(b,(0,F.z)(b.size.x-(0,M.$)(1)))}),1==D.L.dataSelect.ids.length?(0,ct.K)(D.L.dataSelect.nodes[0]):(0,I.E)(D.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:O.r.ArrowRight,fn:()=>{D.L.dataSelect.ids.length&&(D.L.dataSelect.nodes.forEach(b=>{(0,c.ei)(b,(0,F.z)(b.size.x+(0,M.$)(1)))}),1==D.L.dataSelect.ids.length?(0,ct.K)(D.L.dataSelect.nodes[0]):(0,I.E)(D.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:O.r.ArrowUp,fn:()=>{D.L.dataSelect.ids.length&&(D.L.dataSelect.nodes.forEach(b=>{(0,c.ZF)(b,(0,F.z)(b.size.y-(0,M.$)(1)))}),1==D.L.dataSelect.ids.length?(0,ct.K)(D.L.dataSelect.nodes[0]):(0,I.E)(D.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:O.r.ArrowDown,fn:()=>{D.L.dataSelect.ids.length&&(D.L.dataSelect.nodes.forEach(b=>{(0,c.ZF)(b,(0,F.z)(b.size.y+(0,M.$)(1)))}),1==D.L.dataSelect.ids.length?(0,ct.K)(D.L.dataSelect.nodes[0]):(0,I.E)(D.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:O.r.Digit1,fn:b=>{b.shiftKey&&(D.L.reloadView(),D.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:O.r.KeyA,fn:b=>{if(b.ctrlKey){D.L.dataSelect.ids=D.L.data.getNodeAll();let k=D.L.dataSelect.nodes;1==k.length?(0,ct.K)(k[0]):k.length>1&&(0,I.E)(k)}}},this.onchange={type:"keydown",key:O.r.KeyC,fn:b=>{if(b.ctrlKey){let k=D.L.dataSelect.nodes;k&&(0,T.IB)({params:{type:"nodes",nodes:k}})}}},this.onchange={type:"keydown",key:O.r.KeyV,fn:b=>{b.ctrlKey&&(0,T.A9)({callback:k=>{var p,Q;"nodes"==(null==k?void 0:k.type)&&null!=k&&null!==(p=k.nodes)&&void 0!==p&&p.length&&(null==k||null===(Q=k.nodes)||void 0===Q||Q.forEach(A=>{b.shiftKey||D.L.data.findNode(A.id).id&&(A.size.x+=16,A.size.y+=16),A.id=Math.ceil(1e9*Math.random()),D.L.data.node=A}),(0,y.t)(D.L.data.slide))}})}},this.onchange={type:"keydown",key:O.r.KeyZ,fn:b=>{b.ctrlKey&&b.shiftKey?D.L.history.redo():b.ctrlKey&&D.L.history.undo()}},this.onchange={type:"keydown",key:O.r.BracketLeft,fn:b=>{b.ctrlKey&&b.shiftKey?D.L.data.sendToBack(D.L.dataSelect.ids):b.ctrlKey?D.L.data.sendToBackStep(D.L.dataSelect.ids,-2):D.L.data.sendToBackArea(D.L.dataSelect.ids)}},this.onchange={type:"keydown",key:O.r.BracketRight,fn:b=>{b.ctrlKey&&b.shiftKey?D.L.data.bringToFront(D.L.dataSelect.ids):b.ctrlKey?D.L.data.bringToFrontStep(D.L.dataSelect.ids,1):D.L.data.bringToFrontArea(D.L.dataSelect.ids)}}}set onchange(b){let k=this._fnChanges.find(p=>p.eventType==b.type&&p.eventKey==b.key);k?k.fns.push(b.fn):this._fnChanges.push({eventType:b.type,eventKey:b.key,fns:[b.fn]})}change(b,k,p){var Q;null===(Q=this._fnChanges.find(A=>A.eventType==b&&A.eventKey==k))||void 0===Q||Q.fns.forEach(A=>A(p))}},P=rt=>{R.change(rt.type,rt.keyCode||rt.which||rt.charCode||0,rt)}},669:(he,Mt,g)=>{g.d(Mt,{O:()=>M});var T=g(6407),O=g(5970),ot=g(1131),D=g(9841),ct=g(7873),I=g(7102),y=g(1281);class M{constructor(c,N){var R,P;let rt={stroke:"#FF0000",strokeWidth:(0,D.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,D.$)(8)},{element:b}=(0,T.X)(Math.ceil(1e9*Math.random()),{size:N});window.document.getElementById(ct.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(V=>null==V?void 0:V.remove()),window.document.getElementById(ct.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(V=>null==V?void 0:V.remove()),null===(R=window.document.getElementById(ct.F.INTERACTIVE_GROUP))||void 0===R||R.appendChild(b);var Q=V=>{if(!V.length)return;let X=[];if(1==V.length){var at;let{size:Y}=null!==(at=null!=c?c:I.L.dataSelect.nodes[0])&&void 0!==at?at:{};if(!Y)return;X=[[Y.x+Y.width/2,Y.y+Y.height/2],V[0]]}else X=[...V];tt(X),A(X[0],"start"),A(X[X.length-1],"end")},A=(V,X)=>{V&&((at=>{let{element:Y}=(0,y.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==X?"#FF0000":"#00BA00",strokeWidth:(0,D.$)(1)},size:{x:V[0]-5,y:V[1]-5,width:10,height:10}});null===(at=window.document.getElementById(ct.F.INTERACTIVE_GROUP))||void 0===at||at.prepend(Y)})(),((at,Y)=>{let{size:Jt}=null!==(at=null!=c?c:I.L.dataSelect.nodes[0])&&void 0!==at?at:{};if(!Jt)return;let qt=[[V[0]-Jt.width/2,V[1]-Jt.height/2],[V[0]+Jt.width/2,V[1]-Jt.height/2],[V[0]+Jt.width/2,V[1]+Jt.height/2],[V[0]-Jt.width/2,V[1]+Jt.height/2],[V[0]-Jt.width/2,V[1]-Jt.height/2]],{element:Pt}=(0,T.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,D.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,D.$)(8)},size:{x:0,y:0,width:10,height:10,points:qt}});null===(Y=window.document.getElementById(ct.F.INTERACTIVE_GROUP))||void 0===Y||Y.prepend(Pt)})())},tt=V=>{let at=ot.n8j().x(Y=>Y[0]).y(Y=>Y[1]).curve(ot.qrM)(V);b.setAttribute("d",at)};(0,O.tD)(b,rt),Q(null!==(P=null==N?void 0:N.points)&&void 0!==P?P:[]);let et="";return{start:V=>{et=`M ${V.x} ${V.y} L ${V.x} ${V.y}`},move:(V,X)=>{et+=` ${V.x} ${V.y}`,b.setAttribute("d",et)},end:(V,X)=>{Q(X),X.length&&(window.interactivePoints=X)}}}}},4979:(he,Mt,g)=>{g.d(Mt,{z:()=>rt,u:()=>P});var T=g(7873),O=g(2409),ot=g(7102),D=g(1308),ct=g(5970),I=g(1131),y=g(6407),M=g(1999),F=g(4896);class c{constructor(){let k={stroke:ot.L.attribute.stroke,strokeWidth:ot.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:p,element:Q,attribute:A,size:tt}=(0,y.X)(Math.ceil(1e9*Math.random()),{attribute:k});(0,ct.tD)(Q,A);let et="",V="";return{start:at=>{et=`M ${at.x} ${at.y} L ${at.x} ${at.y}`},move:(at,Y)=>{((at,Y)=>{et+=` ${at} ${Y}`,Q.setAttribute("d",et)})(at.x,at.y)},end:(at,Y)=>{var Jt;Y.length>=3?(V=null!==(Jt=I.n8j().x(Z=>Z[0]).y(Z=>Z[1]).curve(I.qrM)(Y))&&void 0!==Jt?Jt:"",Q.setAttribute("d",V)):Q.setAttribute("d",et);let qt=(0,F.CS)(V||et),{minX:Pt,minY:zt,maxX:ht,maxY:wt}=(0,F.lP)(qt);tt.x=Pt,tt.y=zt,tt.width=ht-Pt||1,tt.height=wt-zt||1,tt.ratioMaps=(0,F.nf)(tt,qt),ot.L.data.node=Object.assign({id:p,type:M.h.PATH,name:"Path"},{size:tt,attribute:A})}}}}class N{constructor(){let k={stroke:ot.L.attribute.stroke,strokeOpacity:.4,strokeWidth:ot.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:p,element:Q,attribute:A,size:tt}=(0,y.X)(Math.ceil(1e9*Math.random()),{attribute:k});(0,ct.tD)(Q,A);let et="";return{start:at=>{et=`M ${at.x} ${at.y} L ${at.x} ${at.y}`},move:(at,Y)=>{((at,Y)=>{et+=` ${at} ${Y}`,Q.setAttribute("d",et)})(at.x,at.y)},end:(at,Y)=>{let Jt=(0,F.CS)(et),{minX:qt,minY:Pt,maxX:zt,maxY:ht}=(0,F.lP)(Jt);tt.x=qt,tt.y=Pt,tt.width=zt-qt||1,tt.height=ht-Pt||1,tt.ratioMaps=(0,F.nf)(tt,Jt),ot.L.data.node=Object.assign({id:p,type:M.h.PATH,name:"Path"},{size:tt,attribute:A})}}}}var R=g(669);const P=b=>{switch(ot.L.pointer.pen_type){case O.F.DRAW:(0,D.I)(b,new c);break;case O.F.HIGHTLIGH:(0,D.I)(b,new N);break;case O.F.INTERACTIVE:rt(b)}},rt=b=>{var k,p;let Q=(0,ct.RY)(T.F.INTERACTIVE_GROUP,"g"),A=null!==(k=null===(p=ot.L.data.slide)||void 0===p||null===(p=p.svg)||void 0===p?void 0:p.viewBox)&&void 0!==k?k:(()=>{let{width:tt,height:et}=ot.L.screen.get;return{x:0,y:0,width:tt,height:et}})();(0,ct.KP)(Q,A),b&&(0,D.I)(b,new R.O)}},6037:(he,Mt,g)=>{g.d(Mt,{K:()=>y});var T=g(7873),O=g(7102),ot=g(9506),D=g(1308),ct=g(5970),I=g(2492);const y=c=>{let N=(0,ct.RY)(T.F.RESIZE_GROUP,"g");(0,ct.AE)(N,c).forEach(R=>{M(R.element,R.posType,c,N)})},M=(c,N,R,P)=>{let rt=!1;null==c||c.addEventListener("touchstart",b=>{rt=!0,F({touchEvent:b},N,R,P)}),null==c||c.addEventListener("mousedown",b=>{if(0==b.button){if(rt)return void(rt=!1);F({mouseEvent:b},N,R,P)}})},F=(c,N,R,P)=>{let X,{id:rt,type:b,size:k,attribute:p}=R,{x:Q,y:A,width:tt,height:et}=k,V=(tt||1)/(et||1),Y=null,Pt=!1;(0,D.I)(c,{start:ht=>{Y=JSON.parse(JSON.stringify({id:rt,size:k,attribute:p}))},move:(ht,wt)=>{((ht,wt,Kt,Z)=>{let Ct=Kt-ht,Tt=Z-wt;switch(N){case"rect-center":var Gt,E;X=null!==(Gt=c.mouseEvent)&&void 0!==Gt&&Gt.shiftKey||null!==(E=c.touchEvent)&&void 0!==E&&E.shiftKey?Math.abs(Kt-ht)>=Math.abs(Z-wt)?{x:Q+Kt-ht,y:A,width:tt,height:et}:{x:Q,y:A+Z-wt,width:tt,height:et}:{x:Q+Kt-ht,y:A+Z-wt,width:tt,height:et};break;case"rect-top-left":var B,u,lt,St,At,Ht,Qt,Nt;X=(null!==(B=c.mouseEvent)&&void 0!==B&&B.shiftKey||null!==(u=c.touchEvent)&&void 0!==u&&u.shiftKey)&&(null!==(lt=c.mouseEvent)&&void 0!==lt&&lt.altKey||null!==(St=c.touchEvent)&&void 0!==St&&St.altKey)?V>=1?{x:Q+(Kt-ht),y:A+(Kt-ht)/V,width:tt-2*(Kt-ht),height:et-2*(Kt-ht)/V}:{x:Q+(Z-wt)*V,y:A+(Z-wt),width:tt-2*(Z-wt)*V,height:et-2*(Z-wt)}:null!==(At=c.mouseEvent)&&void 0!==At&&At.shiftKey||null!==(Ht=c.touchEvent)&&void 0!==Ht&&Ht.shiftKey?V>=1?{x:Q+(Kt-ht),y:A+(Kt-ht)/V,width:tt-(Kt-ht),height:et-(Kt-ht)/V}:{x:Q+(Z-wt)*V,y:A+(Z-wt),width:tt-(Z-wt)*V,height:et-(Z-wt)}:null!==(Qt=c.mouseEvent)&&void 0!==Qt&&Qt.altKey||null!==(Nt=c.touchEvent)&&void 0!==Nt&&Nt.altKey?{x:Q+(Kt-ht),y:A+(Z-wt),width:tt-2*(Kt-ht),height:et-2*(Z-wt)}:{x:Q+(Kt-ht),y:A+(Z-wt),width:tt-(Kt-ht),height:et-(Z-wt)};break;case"rect-top-right":var Bt,ie,Dt,Lt,w,d,U,it;X=(null!==(Bt=c.mouseEvent)&&void 0!==Bt&&Bt.shiftKey||null!==(ie=c.touchEvent)&&void 0!==ie&&ie.shiftKey)&&(null!==(Dt=c.mouseEvent)&&void 0!==Dt&&Dt.altKey||null!==(Lt=c.touchEvent)&&void 0!==Lt&&Lt.altKey)?V>=1?{x:Q-(Kt-ht),y:A-(Kt-ht)/V,width:tt+2*(Kt-ht),height:et+2*(Kt-ht)/V}:{x:Q+(Z-wt)*V,y:A+(Z-wt),width:tt-2*(Z-wt)*V,height:et-2*(Z-wt)}:null!==(w=c.mouseEvent)&&void 0!==w&&w.shiftKey||null!==(d=c.touchEvent)&&void 0!==d&&d.shiftKey?V>=1?{x:Q,y:A-(Kt-ht)/V,width:tt+(Kt-ht),height:et+(Kt-ht)/V}:{x:Q,y:A+(Z-wt),width:tt-(Z-wt)*V,height:et-(Z-wt)}:null!==(U=c.mouseEvent)&&void 0!==U&&U.altKey||null!==(it=c.touchEvent)&&void 0!==it&&it.altKey?{x:Q-(Kt-ht),y:A+(Z-wt),width:tt+2*(Kt-ht),height:et-2*(Z-wt)}:{x:Q,y:A+(Z-wt),width:tt+(Kt-ht),height:et-(Z-wt)};break;case"rect-bottom-left":var q,j,_,J,nt,mt,xt,Ot;X=(null!==(q=c.mouseEvent)&&void 0!==q&&q.shiftKey||null!==(j=c.touchEvent)&&void 0!==j&&j.shiftKey)&&(null!==(_=c.mouseEvent)&&void 0!==_&&_.altKey||null!==(J=c.touchEvent)&&void 0!==J&&J.altKey)?V>=1?{x:Q+(Kt-ht),y:A+(Kt-ht)/V,width:tt-2*(Kt-ht),height:et-2*(Kt-ht)/V}:{x:Q-(Z-wt)*V,y:A-(Z-wt),width:tt+2*(Z-wt)*V,height:et+2*(Z-wt)}:null!==(nt=c.mouseEvent)&&void 0!==nt&&nt.shiftKey||null!==(mt=c.touchEvent)&&void 0!==mt&&mt.shiftKey?V>=1?{x:Q+(Kt-ht),y:A,width:tt-(Kt-ht),height:et-(Kt-ht)/V}:{x:Q-(Z-wt)*V,y:A,width:tt+(Z-wt)*V,height:et+(Z-wt)}:null!==(xt=c.mouseEvent)&&void 0!==xt&&xt.altKey||null!==(Ot=c.touchEvent)&&void 0!==Ot&&Ot.altKey?{x:Q+(Kt-ht),y:A-(Z-wt),width:tt-2*(Kt-ht),height:et+2*(Z-wt)}:{x:Q+(Kt-ht),y:A,width:tt-(Kt-ht),height:et+(Z-wt)};break;case"rect-bottom-right":var yt,st,pt,Et,Ft,Xt,Vt,se;X=(null!==(yt=c.mouseEvent)&&void 0!==yt&&yt.shiftKey||null!==(st=c.touchEvent)&&void 0!==st&&st.shiftKey)&&(null!==(pt=c.mouseEvent)&&void 0!==pt&&pt.altKey||null!==(Et=c.touchEvent)&&void 0!==Et&&Et.altKey)?V>=1?{x:Q-(Kt-ht),y:A-(Kt-ht)/V,width:tt+2*(Kt-ht),height:et+2*(Kt-ht)/V}:{x:Q-(Z-wt)*V,y:A-(Z-wt),width:tt+2*(Z-wt)*V,height:et+2*(Z-wt)}:null!==(Ft=c.mouseEvent)&&void 0!==Ft&&Ft.shiftKey||null!==(Xt=c.touchEvent)&&void 0!==Xt&&Xt.shiftKey?V>=1?{x:Q,y:A,width:tt+(Kt-ht),height:et+(Kt-ht)/V}:{x:Q,y:A,width:tt+(Z-wt)*V,height:et+(Z-wt)}:null!==(Vt=c.mouseEvent)&&void 0!==Vt&&Vt.altKey||null!==(se=c.touchEvent)&&void 0!==se&&se.altKey?{x:Q-(Kt-ht),y:A-(Z-wt),width:tt+2*(Kt-ht),height:et+2*(Z-wt)}:{x:Q,y:A,width:tt+(Kt-ht),height:et+(Z-wt)};break;case"rect-top":var ne,ae,pe,Ae;X=null!==(ne=c.mouseEvent)&&void 0!==ne&&ne.shiftKey||null!==(ae=c.touchEvent)&&void 0!==ae&&ae.shiftKey?{x:Q+Tt/2*V,y:A+Tt,width:tt-Tt*V,height:et-Tt}:null!==(pe=c.mouseEvent)&&void 0!==pe&&pe.altKey||null!==(Ae=c.touchEvent)&&void 0!==Ae&&Ae.altKey?{x:Q,y:A+Tt,width:tt,height:et-2*Tt}:{x:Q,y:A+Tt,width:tt,height:et-Tt};break;case"rect-bottom":var ke,me,Oe,Te;X=null!==(ke=c.mouseEvent)&&void 0!==ke&&ke.shiftKey||null!==(me=c.touchEvent)&&void 0!==me&&me.shiftKey?{x:Q-Tt/2*V,y:A,width:tt+Tt*V,height:et+Tt}:null!==(Oe=c.mouseEvent)&&void 0!==Oe&&Oe.altKey||null!==(Te=c.touchEvent)&&void 0!==Te&&Te.altKey?{x:Q,y:A-Tt,width:tt,height:et+2*Tt}:{x:Q,y:A,width:tt,height:et+Tt};break;case"rect-left":var je,be,qe,Ue;X=null!==(je=c.mouseEvent)&&void 0!==je&&je.shiftKey||null!==(be=c.touchEvent)&&void 0!==be&&be.shiftKey?{x:Q+Ct,y:A+Ct/2/V,width:tt-Ct,height:et-Ct/V}:null!==(qe=c.mouseEvent)&&void 0!==qe&&qe.altKey||null!==(Ue=c.touchEvent)&&void 0!==Ue&&Ue.altKey?{x:Q+Ct,y:A,width:tt-2*Ct,height:et}:{x:Q+Ct,y:A,width:tt-Ct,height:et};break;case"rect-right":var He,$e,Xe,Ye;X=null!==(He=c.mouseEvent)&&void 0!==He&&He.shiftKey||null!==($e=c.touchEvent)&&void 0!==$e&&$e.shiftKey?{x:Q,y:A-Ct/2/V,width:tt+Ct,height:et+Ct/V}:null!==(Xe=c.mouseEvent)&&void 0!==Xe&&Xe.altKey||null!==(Ye=c.touchEvent)&&void 0!==Ye&&Ye.altKey?{x:Q-Ct,y:A,width:tt+2*Ct,height:et}:{x:Q,y:A,width:tt+Ct,height:et};break;default:X={x:Q+Kt-ht,y:A+Z-wt,width:tt,height:et}}X.width<0&&(X.width=0),X.height<0&&(X.height=0),X.x=(0,I.z)(X.x),X.y=(0,I.z)(X.y),X.width=(0,I.z)(X.width),X.height=(0,I.z)(X.height),Object.assign(k,X),Object.assign(p,(0,ot.xW)(b,k,p)),(0,ct.tD)(window.document.getElementById(rt),p),(0,ct.AE)(P,R)})(wt[0][0],wt[0][1],ht.x,ht.y),Pt=!0},end:(ht,wt)=>{Pt&&Y&&O.L.history.push([{type:"size",from:Y,to:JSON.parse(JSON.stringify({id:rt,size:k,attribute:p}))}])}})}},4333:(he,Mt,g)=>{g.d(Mt,{E:()=>y});var T=g(7873),O=g(7102),ot=g(9506),D=g(1308),ct=g(5970),I=g(2492);const y=c=>{let N=999999,R=999999,P=-999999,rt=-999999;null==c||c.forEach(p=>{N=Math.min(N,p.size.x),R=Math.min(R,p.size.y),P=Math.max(P,p.size.x+p.size.width),rt=Math.max(rt,p.size.y+p.size.height)});let b=(0,ct.RY)(T.F.SELECT_GROUP,"g"),k=(0,ot.CE)(N,R,P,rt);(0,ct.Mo)(b,c,k).forEach(p=>{M(p.element,p.posType,k,c,b)})},M=(c,N,R,P,rt)=>{let b=!1;null==c||c.addEventListener("touchstart",k=>{b=!0,F({touchEvent:k},N,R,P,rt)}),null==c||c.addEventListener("mousedown",k=>{if(0==k.button){if(b)return void(b=!1);F({mouseEvent:k},N,R,P,rt)}})},F=(c,N,R,P,rt)=>{let{x:b,y:k,width:p,height:Q}=R,A=P.map(Y=>Object.assign({},Y.size)),et=[];(0,D.I)(c,{start:Y=>{P.forEach((Y,Jt)=>{let{id:qt,size:zt,attribute:ht}=Y;et.push(JSON.parse(JSON.stringify({id:qt,size:zt,attribute:ht})))})},move:(Y,Jt)=>{((Y,Jt,qt,Pt)=>{(()=>{let zt;zt="rect-center"===N?{x:b+qt-Y,y:k+Pt-Jt,width:p,height:Q}:{x:b,y:k,width:p,height:Q},zt.width<0&&(zt.width=0),zt.height<0&&(zt.height=0),Object.assign(R,zt),(0,ct.Mo)(rt,P,R)})(),P.forEach((zt,ht)=>{let u,{x:wt,y:Kt,width:Z,height:Ct}=A[ht],{id:Tt,type:Gt,size:E,attribute:B}=zt;u="rect-center"===N?{x:wt+qt-Y,y:Kt+Pt-Jt,width:Z,height:Ct}:{x:wt,y:Kt,width:Z,height:Ct},u.width<0&&(u.width=0),u.height<0&&(u.height=0),u.x=(0,I.z)(u.x),u.y=(0,I.z)(u.y),u.width=(0,I.z)(u.width),u.height=(0,I.z)(u.height),Object.assign(E,u),Object.assign(B,(0,ot.xW)(Gt,E,B)),(0,ct.tD)(window.document.getElementById(Tt),B)})})(Jt[0][0],Jt[0][1],Y.x,Y.y)},end:(Y,Jt)=>{et.length&&O.L.history.push(P.map((Y,Jt)=>{let{id:qt,size:zt,attribute:ht}=Y;return{type:"size",from:et[Jt],to:JSON.parse(JSON.stringify({id:qt,size:zt,attribute:ht}))}}))}})}},1026:(he,Mt,g)=>{g.d(Mt,{$:()=>k,t:()=>b});var T=g(7873),O=g(1281),ot=g(6153),D=g(3477),ct=g(7945),I=g(3069),y=g(3073),M=g(1999),F=g(6407),c=g(6847),N=g(745),R=g(9173),P=g(7102),rt=g(5970);const b=(p,Q,A)=>{var tt;if(Q&&!(null!=A?A:window).document.getElementById(Q))return;if(Q){let V=(null!=A?A:window).document.getElementById(Q);jQuery(V).find("#"+T.F.BACKGROUND_GROUP).empty();let X=(0,rt.RY)(T.F.BACKGROUND_GROUP,"g",void 0,V);(0,rt.I6)(X,p)}else{jQuery(P.L.target).find("#"+T.F.BACKGROUND_GROUP).empty();let V=(0,rt.RY)(T.F.BACKGROUND_GROUP,"g",void 0,P.L.target);(0,rt.I6)(V,p)}let et=(V,X)=>{X=Q&&X?`${Q}-${X}`:null!=Q?Q:X,null==V||V.forEach(at=>{let Y=Q?`${Q}-${at.id}`:at.id;var Jt;if(at.isdeleted)null===(Jt=(null!=A?A:window).document.getElementById(Y))||void 0===Jt||Jt.remove();else switch(at.type){case M.h.GROUP:(0,y.v)(Y,{},X?(null!=A?A:window).document.getElementById(X):null),et(at.nodes,at.id);break;case M.h.CIRCLE:(0,O.K)(Y,{size:at.size,attribute:at.attribute},X?(null!=A?A:window).document.getElementById(X):null);break;case M.h.ELLIPSE:(0,ot.W)(Y,{size:at.size,attribute:at.attribute},X?(null!=A?A:window).document.getElementById(X):null);break;case M.h.LINE:(0,I.q)(Y,{size:at.size,attribute:at.attribute},X?(null!=A?A:window).document.getElementById(X):null);break;case M.h.RECT:(0,ct.a)(Y,{size:at.size,attribute:at.attribute},X?(null!=A?A:window).document.getElementById(X):null);break;case M.h.POLYGON:(0,D.u)(Y,{size:at.size,attribute:at.attribute},X?(null!=A?A:window).document.getElementById(X):null);break;case M.h.FOREIGNOBJECT:(0,N.$)(Y,{size:at.size,attribute:at.attribute,style:at.style,source:at.source},X?(null!=A?A:window).document.getElementById(X):null);break;case M.h.IMAGE:(0,R.B)(Y,{size:at.size,attribute:at.attribute,source:at.source},X?(null!=A?A:window).document.getElementById(X):null);break;case M.h.TEXT:(0,c.L)(Y,{size:at.size,attribute:at.attribute,source:at.source},X?(null!=A?A:window).document.getElementById(X):null);break;case M.h.PATH:(0,F.X)(Y,{size:at.size,attribute:at.attribute},X?(null!=A?A:window).document.getElementById(X):null)}})};et(null==p||null===(tt=p.svg)||void 0===tt?void 0:tt.nodes)},k=(p,Q)=>{var A;if(Q&&!window.document.getElementById(Q))return;let tt=(et,V)=>{V=V?`${Q}-${V}`:Q,null==et||et.forEach(X=>{jQuery("#"+(Q?`${Q}-${X.id}`:X.id)).appendTo(V?window.document.getElementById(V):P.L.target),X.type==M.h.GROUP&&tt(X.nodes,X.id)})};tt(null==p||null===(A=p.svg)||void 0===A?void 0:A.nodes)}},1281:(he,Mt,g)=>{g.d(Mt,{K:()=>ct});var T=g(1999),O=g(7102),ot=g(9506),D=g(5970);const ct=(I,y,M)=>{let F=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},c=(null==y?void 0:y.attribute)||{fill:O.L.attribute.fill,stroke:O.L.attribute.stroke,strokeWidth:O.L.attribute.strokeWidth};return Object.assign(c,(0,ot.xW)(T.h.CIRCLE,F,c)),{nodeId:I,element:(0,D.fn)(I,T.h.CIRCLE,"circle",{size:F,attribute:c},M),size:F,attribute:c}}},6153:(he,Mt,g)=>{g.d(Mt,{W:()=>ct});var T=g(1999),O=g(7102),ot=g(9506),D=g(5970);const ct=(I,y,M)=>{let F=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},c=(null==y?void 0:y.attribute)||{fill:O.L.attribute.fill,stroke:O.L.attribute.stroke,strokeWidth:O.L.attribute.strokeWidth};return Object.assign(c,(0,ot.xW)(T.h.ELLIPSE,F,c)),{nodeId:I,element:(0,D.fn)(I,T.h.ELLIPSE,"ellipse",{size:F,attribute:c},M),size:F,attribute:c}}},745:(he,Mt,g)=>{g.d(Mt,{$:()=>D});var T=g(1999),O=g(9506),ot=g(5970);const D=(ct,I,y)=>{let M=(null==I?void 0:I.size)||{x:0,y:0,width:320,height:80},F=(null==I?void 0:I.attribute)||{};Object.assign(F,(0,O.xW)(T.h.FOREIGNOBJECT,M,F));let c=(null==I?void 0:I.source)||{type:"html",html:{htmlContent:""}},N=(null==I?void 0:I.style)||{};return{nodeId:ct,element:(0,ot.fn)(ct,T.h.FOREIGNOBJECT,"foreignObject",{size:M,attribute:F,style:N,source:c},y),size:M,attribute:F,style:N,source:c}}},3073:(he,Mt,g)=>{g.d(Mt,{v:()=>D});var T=g(1999),O=g(9506),ot=g(5970);const D=(I,y,M)=>{let F=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},c=(null==y?void 0:y.attribute)||{};return Object.assign(c,(0,O.xW)(T.h.GROUP,F,c)),{nodeId:I,element:(0,ot.fn)(I,T.h.GROUP,"g",{size:F,attribute:c},M),size:F,attribute:c}}},9173:(he,Mt,g)=>{g.d(Mt,{B:()=>D});var T=g(1999),O=g(9506),ot=g(5970);const D=(ct,I,y)=>{let M=(null==I?void 0:I.size)||{x:0,y:0,width:10,height:10},F=(null==I?void 0:I.attribute)||{preserveAspectRatio:"none"};Object.assign(F,(0,O.xW)(T.h.IMAGE,M,F));let c=(null==I?void 0:I.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:ct,element:(0,ot.fn)(ct,T.h.IMAGE,"image",{size:M,attribute:F,source:c},y),size:M,attribute:F,source:c}}},3069:(he,Mt,g)=>{g.d(Mt,{q:()=>ct});var T=g(1999),O=g(7102),ot=g(9506),D=g(5970);const ct=(I,y,M)=>{let F=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},c=(null==y?void 0:y.attribute)||{stroke:O.L.attribute.stroke,strokeWidth:O.L.attribute.strokeWidth,strokeLinecap:O.L.attribute.strokeLinecap};return Object.assign(c,(0,ot.xW)(T.h.LINE,F,c)),{nodeId:I,element:(0,D.fn)(I,T.h.LINE,"line",{size:F,attribute:c},M),size:F,attribute:c}}},6407:(he,Mt,g)=>{g.d(Mt,{X:()=>ct});var T=g(1999),O=g(7102),ot=g(9506),D=g(5970);const ct=(I,y,M)=>{let F=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},c=(null==y?void 0:y.attribute)||{stroke:O.L.attribute.stroke,strokeWidth:O.L.attribute.strokeWidth};return Object.assign(c,(0,ot.xW)(T.h.PATH,F,c)),{nodeId:I,element:(0,D.fn)(I,T.h.PATH,"path",{size:F,attribute:c},M),size:F,attribute:c}}},3477:(he,Mt,g)=>{g.d(Mt,{u:()=>ct});var T=g(1999),O=g(7102),ot=g(9506),D=g(5970);const ct=(I,y,M)=>{let F=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},c=(null==y?void 0:y.attribute)||{fill:O.L.attribute.fill,stroke:O.L.attribute.stroke,strokeWidth:O.L.attribute.strokeWidth};return Object.assign(c,(0,ot.xW)(T.h.POLYGON,F,c)),{nodeId:I,element:(0,D.fn)(I,T.h.POLYGON,"polygon",{size:F,attribute:c},M),size:F,attribute:c}}},7945:(he,Mt,g)=>{g.d(Mt,{a:()=>ct});var T=g(1999),O=g(7102),ot=g(9506),D=g(5970);const ct=(I,y,M)=>{let F=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},c=(null==y?void 0:y.attribute)||{fill:O.L.attribute.fill,stroke:O.L.attribute.stroke,strokeWidth:O.L.attribute.strokeWidth};return Object.assign(c,(0,ot.xW)(T.h.RECT,F,c)),{nodeId:I,element:(0,D.fn)(I,T.h.RECT,"rect",{size:F,attribute:c},M),size:F,attribute:c}}},6847:(he,Mt,g)=>{g.d(Mt,{L:()=>ct});var T=g(1999),O=g(7102),ot=g(9506),D=g(5970);const ct=(I,y,M)=>{let F=(null==y?void 0:y.size)||{x:0,y:0,width:320,height:80},c=(null==y?void 0:y.attribute)||{fill:O.L.attribute.stroke,fontFamily:O.L.attribute.fontFamily,fontSize:O.L.attribute.fontSize,textLength:O.L.attribute.textLength};Object.assign(c,(0,ot.xW)(T.h.TEXT,F,c));let N=(null==y?void 0:y.source)||{type:"text",text:{textContent:""}};return{nodeId:I,element:(0,D.fn)(I,T.h.TEXT,"text",{size:F,attribute:c,source:N},M),size:F,attribute:c,source:N}}},9506:(he,Mt,g)=>{g.d(Mt,{CE:()=>ot,xW:()=>D});var T=g(1999),O=g(4896);const ot=(I,y,M,F,c)=>{let N={x:Math.min(I,M),y:Math.min(y,F),width:Math.abs(M-I)||1,height:Math.abs(F-y)||1};return null!=c&&c.ratio&&(N.width<=N.height?N.height=N.width*(null==c?void 0:c.ratio):N.width=N.height/(null==c?void 0:c.ratio)),Object.assign(N,{ratios:(null==c?void 0:c.ratios)||[[(I-N.x)/(N.width||1),(y-N.y)/(N.height||1)],[(M-N.x)/(N.width||1),(F-N.y)/(N.height||1)]]}),null!=c&&c.points&&(N.points=null==c?void 0:c.points),N},D=(I,y,M)=>{var F,c=(()=>{switch(I){case T.h.CIRCLE:return{cx:y.x+y.width/2,cy:y.y+y.height/2,r:Math.min(y.width/2,y.height/2)};case T.h.ELLIPSE:return{cx:y.x+y.width/2,cy:y.y+y.height/2,rx:y.width/2,ry:y.height/2};case T.h.LINE:{var N;let k={};return null===(N=y.ratios)||void 0===N||N.forEach((p,Q)=>{k[`x${Q+1}`]=y.x+y.width*p[0],k[`y${Q+1}`]=y.y+y.height*p[1]}),k}case T.h.RECT:case T.h.FOREIGNOBJECT:case T.h.IMAGE:return{x:y.x,y:y.y,width:y.width,height:y.height};case T.h.TEXT:var R;return{x:y.x,y:y.y+(null!==(R=M.fontSize)&&void 0!==R?R:16)};case T.h.POLYGON:var P;if(null!==(P=y.ratios)&&void 0!==P&&P.length)return{points:(0,O.n9)(y,y.ratios)};break;case T.h.PATH:var rt,b;if(null!==(rt=y.ratioMaps)&&void 0!==rt&&rt.length)return{d:(0,O.$N)(y,y.ratioMaps)};if(null!==(b=y.points)&&void 0!==b&&b.length)return{d:`M ${(k=y.points)[0][0]} ${k[0][1]} L ${(k.map(p=>[p[0],p[1]])||[]).map(p=>p.join(" ")).join(" ")}`}}var k;return{}})();return y.rotate?(c.transform=`rotate(${y.rotate})`,c.transformOrigin=`${y.x+y.width/2} ${y.y+y.height/2}`):null!==(F=M.transform)&&void 0!==F&&F.match(/^rotate/)&&(M.transform=null,M.transformOrigin=null),c}},2492:(he,Mt,g)=>{g.d(Mt,{z:()=>T});const T=(O,ot)=>{var D;return ot=null!==(D=ot)&&void 0!==D?D:100,Math.round((O+Number.EPSILON)*ot)/ot}},9841:(he,Mt,g)=>{g.d(Mt,{$:()=>ot});var T=g(7102),O=g(2492);const ot=D=>(0,O.z)(D/T.L.screen.scale)},6752:(he,Mt,g)=>{g.d(Mt,{E$:()=>y,Nx:()=>F,ZF:()=>I,ei:()=>ct,fu:()=>M});var T=g(7102),O=g(5970),ot=g(9506),D=g(2492);const ct=(c,N)=>{let{id:R,type:P,size:rt,attribute:b}=c,k=JSON.parse(JSON.stringify({id:R,size:rt,attribute:b}));rt.x=(0,D.z)(N),Object.assign(b,(0,ot.xW)(P,rt,b)),(0,O.tD)(window.document.getElementById(R),b),T.L.history.push([{type:"size",from:k,to:JSON.parse(JSON.stringify({id:R,size:rt,attribute:b}))}])},I=(c,N)=>{let{id:R,type:P,size:rt,attribute:b}=c,k=JSON.parse(JSON.stringify({id:R,size:rt,attribute:b}));rt.y=(0,D.z)(N),Object.assign(b,(0,ot.xW)(P,rt,b)),(0,O.tD)(window.document.getElementById(R),b),T.L.history.push([{type:"size",from:k,to:JSON.parse(JSON.stringify({id:R,size:rt,attribute:b}))}])},y=(c,N,R)=>{let{id:P,type:rt,size:b,attribute:k}=c,p=JSON.parse(JSON.stringify({id:P,size:b,attribute:k}));R&&(b.height=(0,D.z)(N*b.height/b.width)),b.width=(0,D.z)(N),Object.assign(k,(0,ot.xW)(rt,b,k)),(0,O.tD)(window.document.getElementById(P),k),T.L.history.push([{type:"size",from:p,to:JSON.parse(JSON.stringify({id:P,size:b,attribute:k}))}])},M=(c,N,R)=>{let{id:P,type:rt,size:b,attribute:k}=c,p=JSON.parse(JSON.stringify({id:P,size:b,attribute:k}));R&&(b.width=(0,D.z)(N*b.width/b.height)),b.height=(0,D.z)(N),Object.assign(k,(0,ot.xW)(rt,b,k)),(0,O.tD)(window.document.getElementById(P),k),T.L.history.push([{type:"size",from:p,to:JSON.parse(JSON.stringify({id:P,size:b,attribute:k}))}])},F=(c,N)=>{let{id:R,type:P,size:rt,attribute:b}=c,k=JSON.parse(JSON.stringify({id:R,size:rt,attribute:b}));rt.rotate="number"==typeof N?(0,D.z)(N,100):void 0,Object.assign(b,(0,ot.xW)(P,rt,b)),(0,O.tD)(window.document.getElementById(R),b),T.L.history.push([{type:"size",from:k,to:JSON.parse(JSON.stringify({id:R,size:rt,attribute:b}))}])}},1308:(he,Mt,g)=>{g.d(Mt,{I:()=>I});var T=g(3603),O=g(7102);class ot{constructor(M){this._points=[],this._options=M}start(M){this._points.length=0,this._points.push([M.x,M.y]),this._options.start(M)}move(M){this._points.push([M.x,M.y]),this._options.move(M,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(M=this._points[0])[0],y:M[1]}:{x:0,y:0};var M}get offsetLast(){return this._points.length>=1?{x:(M=this._points[this._points.length-1])[0],y:M[1]}:{x:0,y:0};var M}}var D=g(6078);const I=(y,M,F,c,N)=>{var R,P,rt;let b=null,k=0,p=0;y.mouseEvent?(b=y.mouseEvent.target,k=y.mouseEvent.offsetX,p=y.mouseEvent.offsetY):y.touchEvent&&(b=y.touchEvent.target,y.touchEvent.touches.length&&(k=y.touchEvent.touches[0].clientX,p=y.touchEvent.touches[0].clientY));let Q=null!=F?F:O.L.screen.scale,A=null!=c?c:O.L.screen.dislocation,tt=null!=N?N:O.L.screen.offset,et=()=>{};var V=new ot({start:null!==(R=null==M?void 0:M.start)&&void 0!==R?R:et,move:null!==(P=null==M?void 0:M.move)&&void 0!==P?P:et,end:null!==(rt=null==M?void 0:M.end)&&void 0!==rt?rt:et});y.mouseEvent?V.start((0,D.D)({x:k,y:p},Q,A,{x:0,y:0})):y.touchEvent&&V.start((0,D.D)({x:k,y:p},Q,A,tt));let X=ht=>{V.move((0,D.D)({x:ht.clientX,y:ht.clientY},Q,A,tt))},at=ht=>{V.end(),[T.P.SHAPE,T.P.FOREIGNOBJECT,T.P.IMAGE,T.P.TEXT].includes(O.L.pointer.pointer_type)&&(ht.shiftKey||(O.L.pointer.pointer_type=T.P.POINTER))},Y=ht=>{ht.touches.length&&X({clientX:ht.touches[0].clientX,clientY:ht.touches[0].clientY})},Jt=ht=>{at({shiftKey:ht.shiftKey,ctrlKey:ht.ctrlKey,altKey:ht.altKey}),window.removeEventListener("touchmove",Y,!1),window.removeEventListener("touchend",Jt,!1)},qt=ht=>{0==ht.button&&X({clientX:ht.clientX,clientY:ht.clientY})},Pt=ht=>{0==ht.button&&(at({shiftKey:ht.shiftKey,ctrlKey:ht.ctrlKey,altKey:ht.altKey}),window.removeEventListener("mousemove",qt,!1),window.removeEventListener("mouseup",Pt,!1))};if(y.mouseEvent)window.addEventListener("mousemove",qt,!1),window.addEventListener("mouseup",Pt,!1);else if(y.touchEvent){var zt;window.addEventListener("touchmove",Y,!1),window.addEventListener("touchend",Jt,!1),null===(zt=b)||void 0===zt||zt.addEventListener("touchmove",function(ht){ht.preventDefault()})}}},6078:(he,Mt,g)=>{g.d(Mt,{D:()=>O});var T=g(2492);const O=(ot,D,ct,I)=>(ot.x-=I.x,ot.y-=I.y,ot.x/=D,ot.y/=D,ot.x-=ct.x,ot.y-=ct.y,ot.x=(0,T.z)(ot.x),ot.y=(0,T.z)(ot.y),ot)},5619:(he,Mt,g)=>{g.d(Mt,{J:()=>Dt,I:()=>Lt});var T=g(7873),O=g(7102),ot=g(1999),D=g(334),ct=g(8946),I=g(7657),y=g(6769),M=g(3591),c=g(6847),N=g(3073);var k=g(7050),p=g(9173),Q=g(2492);const A=(w,d,U)=>{var it,q,j,_;let J=1,nt=new Image;nt.onload=()=>{var mt,xt,Ot,yt;J=(0,Q.z)(nt.naturalWidth/nt.naturalHeight,100);let st=0,pt=0,Et=0,Ft=0;var Xt,Vt,se,ne;J>=1?(Et=Math.min(nt.naturalWidth,null!==(Xt=null===(Vt=Dt.slide.svg)||void 0===Vt||null===(Vt=Vt.viewBox)||void 0===Vt?void 0:Vt.width)&&void 0!==Xt?Xt:0),Ft=Et/J):(Ft=Math.min(nt.naturalHeight,null!==(se=null===(ne=Dt.slide.svg)||void 0===ne||null===(ne=ne.viewBox)||void 0===ne?void 0:ne.height)&&void 0!==se?se:0),Et=Ft/J),st=((null!==(mt=null===(xt=Dt.slide.svg)||void 0===xt||null===(xt=xt.viewBox)||void 0===xt?void 0:xt.width)&&void 0!==mt?mt:0)-Et)/2,pt=((null!==(Ot=null===(yt=Dt.slide.svg)||void 0===yt||null===(yt=yt.viewBox)||void 0===yt?void 0:yt.height)&&void 0!==Ot?Ot:0)-Ft)/2,d.size={x:st,y:pt,width:Et,height:Ft},tt(d,U)},nt.onerror=mt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,mt)},nt.src=(null!==(it=d.source)&&void 0!==it&&it.path?(null===(q=O.L.config)||void 0===q?void 0:q.readfileuploadurl)+(null===(j=d.source)||void 0===j?void 0:j.path):null===(_=d.source)||void 0===_?void 0:_.url)||""},tt=(w,d)=>{if(w.slideStatus!=Dt.slideStatus)return void d();let{element:U}=(0,p.B)(Math.ceil(1e9*Math.random()),{size:w.size,source:{type:"image",image:null==w?void 0:w.source}});setTimeout(()=>{null==U||U.remove(),d()},3e3)};var et=g(5970);const V=(w,d,U)=>{var it,q,j,_;let J=new Image;J.onload=()=>{X(w,{width:J.naturalWidth,height:J.naturalHeight},d,U)},J.onerror=nt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,nt),U()},J.src=(null!==(it=d.source)&&void 0!==it&&it.path?(null===(q=O.L.config)||void 0===q?void 0:q.readfileuploadurl)+(null===(j=d.source)||void 0===j?void 0:j.path):null===(_=d.source)||void 0===_?void 0:_.url)||""},X=(w,d,U,it)=>{if(U.slideStatus!=Dt.slideStatus)return void it();let q=(0,Q.z)(d.width/d.height,100),j=0,_=0,J=0,nt=0;q>=1?(J=d.width,J=Math.max(J,40),J=Math.min(J,40),nt=J/q):(nt=d.height,nt=Math.max(nt,40),nt=Math.min(nt,40),J=nt/q);let{size:Ot}=w;j=Ot.x+Ot.width-J/2,_=Ot.y-nt/2;let yt=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,p.B)(`icon-${w.id}`,{size:{x:j,y:_,width:J,height:nt},source:{type:"image",image:null==U?void 0:U.source}},yt),setTimeout(()=>{it()},3e3)},at=(w,d,U)=>{var it,q,j,_,J,nt,mt;if(d.slideStatus!=Dt.slideStatus)return void U();if(!(null!==(it=d.source)&&void 0!==it&&it.path||null!==(q=d.source)&&void 0!==q&&q.url))return console.warn(`${w.id} -> audio no source!`),void U();var xt=jQuery("#"+w.id);let Ot=null!==(j=d.iteration)&&void 0!==j?j:0;if(Ot<0&&(U(),U=function(){}),!(xt.data("audio-running")&&Ot<0)){xt.data("audio-running",!0);var yt=new Audio;return yt.autoplay=!0,yt.loop=0!=Ot,yt.preload="auto",yt.controls=!0,yt.setAttributeNode(document.createAttribute("playsinline")),yt.addEventListener("canplay",function(){var st=yt.play();st&&st.then(function(pt){xt.data("audio-running",!0)}).catch(function(pt){xt.data("audio-running",!1),d.slideStatus===Dt.slideStatus&&U()})}),yt.addEventListener("timeupdate",function(){var pt;d.slideStatus!==Dt.slideStatus&&((pt=this).pause(),pt.remove(),xt.data("audio-running",!1))}),yt.addEventListener("canplaythrough",function(){this.loop&&(Ot>0?Ot--:0==Ot&&(this.loop=!1))}),yt.addEventListener("play",function(){}),yt.addEventListener("pause",function(){}),yt.addEventListener("ended",function(){this.remove(),xt.data("audio-running",!1),d.slideStatus===Dt.slideStatus&&U()}),yt.onerror=function(){this.remove(),xt.data("audio-running",!1),d.slideStatus===Dt.slideStatus&&U()},yt.src=(null!==(_=d.source)&&void 0!==_&&_.path?(null===(J=O.L.config)||void 0===J?void 0:J.readfileuploadurl)+(null===(nt=d.source)||void 0===nt?void 0:nt.path):null===(mt=d.source)||void 0===mt?void 0:mt.url)||"",yt}};var Y=g(2837);const Kt=(w,d)=>{var U;null===(U=d.test)||void 0===U||null===(U=U.answer)||void 0===U||null===(U=U.matching)||void 0===U||U.filter(it=>it.id==w.id).forEach(it=>it.value=""),jQuery(`#node-${w.id}`).remove()},Ct=(w,d,U,it,q,j)=>{var _,J,nt,mt,xt,Ot,yt,st;q.iscorrect?(null!==(_=d.test)&&void 0!==_&&null!==(_=_.audiotrue)&&void 0!==_&&_.path&&at(w,{source:(0,Y.U)(null===(nt=d.test)||void 0===nt?void 0:nt.audiotrue),iteration:0,nodeStatus:U,slideStatus:it},j),null!==(J=d.test)&&void 0!==J&&null!==(J=J.effecttrue)&&void 0!==J&&J.path&&A(0,{source:(0,Y.U)(null===(mt=d.test)||void 0===mt?void 0:mt.effecttrue),iteration:0,nodeStatus:U,slideStatus:it},j)):(null!==(xt=d.test)&&void 0!==xt&&null!==(xt=xt.audiofalse)&&void 0!==xt&&xt.path&&at(w,{source:(0,Y.U)(null===(yt=d.test)||void 0===yt?void 0:yt.audiofalse),iteration:0,nodeStatus:U,slideStatus:it},j),null!==(Ot=d.test)&&void 0!==Ot&&null!==(Ot=Ot.effectfalse)&&void 0!==Ot&&Ot.path&&A(0,{source:(0,Y.U)(null===(st=d.test)||void 0===st?void 0:st.effectfalse),iteration:0,nodeStatus:U,slideStatus:it},j));Tt(d,U,it,j)},Tt=(w,d,U,it)=>{var q;switch(null===(q=w.test)||void 0===q?void 0:q.type){case"truefalse":{var j,_;let{value:ne,iscorrect:ae}=null!==(j=null==w||null===(_=w.test)||void 0===_||null===(_=_.answer)||void 0===_?void 0:_.truefalse)&&void 0!==j?j:{};if(ne){let pe=Dt.findNode(ne);var J,nt,mt,xt;ae?null!==(J=w.test)&&void 0!==J&&null!==(J=J.icontrue)&&void 0!==J&&J.path&&V(pe,{source:(0,Y.U)(null===(nt=w.test)||void 0===nt?void 0:nt.icontrue),iteration:0,nodeStatus:d,slideStatus:U},it):null!==(mt=w.test)&&void 0!==mt&&null!==(mt=mt.iconfalse)&&void 0!==mt&&mt.path&&V(pe,{source:(0,Y.U)(null===(xt=w.test)||void 0===xt?void 0:xt.iconfalse),iteration:0,nodeStatus:d,slideStatus:U},it)}break}case"singlechoice":{var Ot,yt;let{value:ne,iscorrect:ae}=null!==(Ot=null==w||null===(yt=w.test)||void 0===yt||null===(yt=yt.answer)||void 0===yt?void 0:yt.singlechoice)&&void 0!==Ot?Ot:{};if(ne){let pe=Dt.findNode(ne);var st,pt,Et,Ft;ae?null!==(st=w.test)&&void 0!==st&&null!==(st=st.icontrue)&&void 0!==st&&st.path&&V(pe,{source:(0,Y.U)(null===(pt=w.test)||void 0===pt?void 0:pt.icontrue),iteration:0,nodeStatus:d,slideStatus:U},it):null!==(Et=w.test)&&void 0!==Et&&null!==(Et=Et.iconfalse)&&void 0!==Et&&Et.path&&V(pe,{source:(0,Y.U)(null===(Ft=w.test)||void 0===Ft?void 0:Ft.iconfalse),iteration:0,nodeStatus:d,slideStatus:U},it)}break}case"multichoice":var Xt;null==w||null===(Xt=w.test)||void 0===Xt||null===(Xt=Xt.answer)||void 0===Xt||null===(Xt=Xt.multichoice)||void 0===Xt||Xt.forEach(ne=>{let{value:ae,iscorrect:pe}=ne;if(ae){let Te=Dt.findNode(ae);var Ae,ke,me,Oe;pe?null!==(Ae=w.test)&&void 0!==Ae&&null!==(Ae=Ae.icontrue)&&void 0!==Ae&&Ae.path&&V(Te,{source:(0,Y.U)(null===(ke=w.test)||void 0===ke?void 0:ke.icontrue),iteration:0,nodeStatus:d,slideStatus:U},it):null!==(me=w.test)&&void 0!==me&&null!==(me=me.iconfalse)&&void 0!==me&&me.path&&V(Te,{source:(0,Y.U)(null===(Oe=w.test)||void 0===Oe?void 0:Oe.iconfalse),iteration:0,nodeStatus:d,slideStatus:U},it)}});break;case"fill":var Vt;null==w||null===(Vt=w.test)||void 0===Vt||null===(Vt=Vt.answer)||void 0===Vt||null===(Vt=Vt.fill)||void 0===Vt||Vt.forEach(ne=>{let{id:ae,value:Ae,iscorrect:ke}=ne;if(Ae){let be=Dt.findNode(ae);var me,Oe,Te,je;ke?null!==(me=w.test)&&void 0!==me&&null!==(me=me.icontrue)&&void 0!==me&&me.path&&V(be,{source:(0,Y.U)(null===(Oe=w.test)||void 0===Oe?void 0:Oe.icontrue),iteration:0,nodeStatus:d,slideStatus:U},it):null!==(Te=w.test)&&void 0!==Te&&null!==(Te=Te.iconfalse)&&void 0!==Te&&Te.path&&V(be,{source:(0,Y.U)(null===(je=w.test)||void 0===je?void 0:je.iconfalse),iteration:0,nodeStatus:d,slideStatus:U},it)}});break;case"matching":var se;null==w||null===(se=w.test)||void 0===se||null===(se=se.answer)||void 0===se||null===(se=se.matching)||void 0===se||se.forEach(ne=>{let{id:ae,key:pe,value:Ae}=ne;if(Ae){let je=Dt.findNode(ae);var ke,me,Oe,Te;pe==Ae?null!==(ke=w.test)&&void 0!==ke&&null!==(ke=ke.icontrue)&&void 0!==ke&&ke.path&&V(je,{source:(0,Y.U)(null===(me=w.test)||void 0===me?void 0:me.icontrue),iteration:0,nodeStatus:d,slideStatus:U},it):null!==(Oe=w.test)&&void 0!==Oe&&null!==(Oe=Oe.iconfalse)&&void 0!==Oe&&Oe.path&&V(je,{source:(0,Y.U)(null===(Te=w.test)||void 0===Te?void 0:Te.iconfalse),iteration:0,nodeStatus:d,slideStatus:U},it)}})}},Gt=(w,d,U,it)=>{var q,j,_,J,nt,mt,Ot,st,yt;null!==(q=d.animate)&&void 0!==q&&q.value&&(0,k.a)(d,U.nodeStatus,U.slideStatus),null!==(j=d.interactive)&&void 0!==j&&j.show?(console.log(`node(${d.id}) | nodeStatus(${U.nodeStatus}) | slideStatus(${U.slideStatus}) | show`),((w,d,U,it)=>{var q,j,_;let J={total:0,counter:0},{triggershow:nt,triggerrun:mt,triggerhide:xt,action:Ot,audio:yt}=null!==(q=null===(j=w.interactive)||void 0===j?void 0:j.show)&&void 0!==q?q:{};if(console.log(`node(${w.id}) | nodeStatus(${d}) | slideStatus(${U}) | show`),nt){let{id:pt,ids:Et,time:Ft,async:Xt}=nt;"asynctrue"==Xt?setTimeout(()=>{(0,M.GD)({id:pt,ids:Et,nodeStatus:d,slideStatus:U})}):"time"==Xt&&setTimeout(()=>{(0,M.GD)({id:pt,ids:Et,nodeStatus:d,slideStatus:U})},1e3*(null!=Ft?Ft:0))}if(mt){let{id:pt,ids:Et,time:Ft,async:Xt}=mt;"asynctrue"==Xt?setTimeout(()=>{(0,M.MF)({id:pt,ids:Et,nodeStatus:d,slideStatus:U})}):"time"==Xt&&setTimeout(()=>{(0,M.MF)({id:pt,ids:Et,nodeStatus:d,slideStatus:U})},1e3*(null!=Ft?Ft:0))}if(xt){let{id:pt,ids:Et,time:Ft,async:Xt}=xt;"asynctrue"==Xt?setTimeout(()=>{(0,M.vi)({id:pt,ids:Et,nodeStatus:d,slideStatus:U})}):"time"==Xt&&setTimeout(()=>{(0,M.vi)({id:pt,ids:Et,nodeStatus:d,slideStatus:U})},1e3*(null!=Ft?Ft:0))}let st=()=>{setTimeout(()=>{if(J.counter>=J.total){if(it&&it(),nt){let{id:pt,ids:Et,async:Ft}=nt;(!Ft||"asyncfalse"==Ft)&&(0,M.GD)({id:pt,ids:Et,nodeStatus:d,slideStatus:U})}if(mt){let{id:pt,ids:Et,async:Ft}=mt;(!Ft||"asyncfalse"==Ft)&&(0,M.MF)({id:pt,ids:Et,nodeStatus:d,slideStatus:U})}if(xt){let{id:pt,ids:Et,async:Ft}=xt;(!Ft||"asyncfalse"==Ft)&&(0,M.vi)({id:pt,ids:Et,nodeStatus:d,slideStatus:U})}}})};if(null!=Ot&&Ot.value){J.total+=1;let pt=()=>{J.counter+=1,st()};switch(null==Ot?void 0:Ot.value){case"hide":jQuery("#"+w.id).addClass("hide"),pt();break;case"points":{let{points:Et,time:Ft,iteration:Xt,finish:Vt}=Ot;(0,I.c)(w.id,{node:w,points:Et,time:Ft,iteration:Xt,finish:Vt,nodeStatus:d,slideStatus:U},pt);break}default:{let{value:Et,time:Ft,iteration:Xt,finish:Vt}=Ot;(0,ct.h)(w.id,{node:w,value:Et,time:Ft,iteration:Xt,finish:Vt,nodeStatus:d,slideStatus:U},pt);break}}}if(null!=yt&&null!==(_=yt.source)&&void 0!==_&&_.path){J.total+=1;let pt=()=>{J.counter+=1,st()},Et=(0,y.d)(w.id,yt,J,{nodeStatus:d,slideStatus:U},pt);-1==(null==yt?void 0:yt.iteration)&&jQuery("#"+w.id).click(Ft=>{Ft.preventDefault(),Et&&(Et.volume=Et.volume>=1?0:Et.volume+.25),console.log(null==Et?void 0:Et.volume)})}J.total||st()})(d,U.nodeStatus,U.slideStatus,it)):it&&it(),null!==(_=d.interactive)&&void 0!==_&&_.click&&(st=null===(Ot=d.interactive)||void 0===Ot?void 0:Ot.click,Object.keys(null!=st?st:{}).map(Et=>st[Et]?1:0).includes(1)&&jQuery("#"+d.id).addClass("interactive-click"),jQuery("#"+d.id).click(st=>{st.preventDefault(),U.nodeStatus=Dt.refreshNodeStatus(),console.log(`node(${d.id}) | nodeStatus(${U.nodeStatus}) | slideStatus(${U.slideStatus}) | click`),(0,D.J)(d,U.nodeStatus,U.slideStatus)})),null!==(J=d.variable)&&void 0!==J&&J.input&&jQuery("#"+d.id).on("change","input,textarea",st=>{st.preventDefault(),((w,d,U)=>{var it,q;O.L.variable.setValue(null!==(it=null===(q=d.variable)||void 0===q||null===(q=q.input)||void 0===q?void 0:q.variable)&&void 0!==it?it:"",w),(w=>{var d;let U=(it,q)=>{null==it||it.forEach(j=>{switch(j.type){case ot.h.GROUP:(0,N.v)(j.id,{},q?window.document.getElementById(q):null),U(j.nodes,j.id);break;case ot.h.POLYGON:break;case ot.h.TEXT:(0,c.L)(j.id,{size:j.size,attribute:j.attribute,source:j.source},q?window.document.getElementById(q):null)}})};U(null===(d=w.svg)||void 0===d?void 0:d.nodes)})(U)})(st.target.value,d,w)}),null!==(nt=d.variable)&&void 0!==nt&&nt.click&&(null!==(yt=d.variable)&&void 0!==yt&&null!==(yt=yt.click)&&void 0!==yt&&yt.variable&&jQuery("#"+d.id).addClass("variable-click"),jQuery("#"+d.id).click(st=>{st.preventDefault(),((w,d)=>{var U;O.L.variable.setValueOperator(null===(U=w.variable)||void 0===U?void 0:U.click),(w=>{var d;let U=(it,q)=>{null==it||it.forEach(j=>{switch(j.type){case ot.h.GROUP:(0,N.v)(j.id,{},q?window.document.getElementById(q):null),U(j.nodes,j.id);break;case ot.h.POLYGON:break;case ot.h.TEXT:(0,c.L)(j.id,{size:j.size,attribute:j.attribute,source:j.source},q?window.document.getElementById(q):null)}})};U(null===(d=w.svg)||void 0===d?void 0:d.nodes)})(d)})(d,w)})),"test"==(null===(mt=d.source)||void 0===mt?void 0:mt.type)&&((w,d)=>{var U;let it=()=>{};switch(null===(U=w.source)||void 0===U||null===(U=U.test)||void 0===U?void 0:U.type){case"truefalse":{jQuery("#"+w.id).click(_=>{_.preventDefault(),((w,d,U,it,q)=>{var j,_;let J=null===(j=w.source)||void 0===j||null===(j=j.test)||void 0===j||null===(j=j.truefalse)||void 0===j?void 0:j.iscorrect;d.test?d.test.answer?d.test.answer.truefalse={value:w.id,iscorrect:J}:d.test.answer={truefalse:{value:w.id,iscorrect:J}}:d.test={answer:{truefalse:{value:w.id,iscorrect:J}}},null!==(_=d.svg)&&void 0!==_&&_.nodes.find(mt=>{var xt;return"submit"==(null===(xt=mt.source)||void 0===xt||null===(xt=xt.test)||void 0===xt?void 0:xt.type)})||Ct(w,d,U,it,{iscorrect:J},q);let nt=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(nt,d,w)})(w,d,Dt.nodeStatus,Dt.slideStatus,it)});let j=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(j,d,w);break}case"singlechoice":{jQuery("#"+w.id).click(_=>{_.preventDefault(),((w,d,U,it,q)=>{var j,_;let J=null===(j=w.source)||void 0===j||null===(j=j.test)||void 0===j||null===(j=j.singlechoice)||void 0===j?void 0:j.iscorrect;d.test?d.test.answer?d.test.answer.singlechoice={value:w.id,iscorrect:J}:d.test.answer={singlechoice:{value:w.id,iscorrect:J}}:d.test={answer:{singlechoice:{value:w.id,iscorrect:J}}},null!==(_=d.svg)&&void 0!==_&&_.nodes.find(mt=>{var xt;return"submit"==(null===(xt=mt.source)||void 0===xt||null===(xt=xt.test)||void 0===xt?void 0:xt.type)})||Ct(w,d,U,it,{iscorrect:J},q);let nt=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(nt,d,w)})(w,d,Dt.nodeStatus,Dt.slideStatus,it)});let j=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(j,d,w);break}case"multichoice":{jQuery("#"+w.id).click(_=>{_.preventDefault(),((w,d,U,it,q)=>{var j,_;let J=null===(j=w.source)||void 0===j||null===(j=j.test)||void 0===j||null===(j=j.multichoice)||void 0===j?void 0:j.iscorrect;d.test?d.test.answer?d.test.answer.multichoice?d.test.answer.multichoice.find(mt=>mt.value==w.id)?d.test.answer.multichoice=d.test.answer.multichoice.filter(mt=>mt.value!=w.id):d.test.answer.multichoice.push({value:w.id,iscorrect:J}):d.test.answer.multichoice=[{value:w.id,iscorrect:J}]:d.test.answer={multichoice:[{value:w.id,iscorrect:J}]}:d.test={answer:{multichoice:[{value:w.id,iscorrect:J}]}},null!==(_=d.svg)&&void 0!==_&&_.nodes.find(mt=>{var xt;return"submit"==(null===(xt=mt.source)||void 0===xt||null===(xt=xt.test)||void 0===xt?void 0:xt.type)})||Ct(w,d,U,it,{iscorrect:J},q);let nt=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(nt,d,w)})(w,d,Dt.nodeStatus,Dt.slideStatus,it)});let j=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(j,d,w);break}case"fill":{var q;jQuery("#"+w.id).on("keyup",'input[type="text"]',_=>{var J;let nt=jQuery("<div/>").css({"font-size":jQuery(_.target).css("font-size"),visibility:"hidden",float:"left"}).text(_.target.value).appendTo(window.document.body);jQuery(_.target).css({width:(null!==(J=nt.width())&&void 0!==J?J:0)+30})}).on("keypress",'input[type="text"]',_=>{13===(_.keyCode||_.charCode||_.which)&&(_.preventDefault(),_.stopPropagation(),jQuery(_.target).blur())}).on("change",'input[type="text"]',_=>{var J,nt;let mt=null===(J=_.target)||void 0===J?void 0:J.getAttribute("data-key"),xt=null===(nt=_.target)||void 0===nt||null===(nt=nt.value)||void 0===nt?void 0:nt.trim();jQuery("#"+w.id).find(`input[type="text"][data-key="${mt}"]`).val(xt),((w,d,U,it,q,j)=>{var _,J,nt,mt;let{value:xt}=null!==(_=null===(J=w.source)||void 0===J||null===(J=J.test)||void 0===J||null===(J=J.fill)||void 0===J?void 0:J.find(st=>st.key==`[[${q.key}]]`))&&void 0!==_?_:{},Ot=xt&&xt.map(st=>null==st?void 0:st.toLocaleLowerCase()).includes(null===(nt=q.value)||void 0===nt?void 0:nt.toLocaleLowerCase());q.iscorrect=Ot,d.test?d.test.answer?d.test.answer.fill?d.test.answer.fill.find(st=>st.key==q.key)?d.test.answer.fill.filter(st=>st.key==q.key).forEach(st=>{st.value=q.value,st.iscorrect=q.iscorrect}):d.test.answer.fill.push(q):d.test.answer.fill=[q]:d.test.answer={fill:[q]}:d.test={answer:{fill:[q]}};let yt=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(yt,d,w),null!==(mt=d.svg)&&void 0!==mt&&mt.nodes.find(st=>{var pt;return"submit"==(null===(pt=st.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)})||Ct(w,d,U,it,{iscorrect:Ot},j)})(w,d,Dt.nodeStatus,Dt.slideStatus,{id:w.id,key:mt,value:xt},it)}),null!==(q=d.test)&&void 0!==q&&q.showselection||jQuery("#"+w.id).addClass("hide-selection");let j=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(j,d,w);break}case"matching-empty":{jQuery("#"+w.id).on("touchmove",".ondrag-item",function(_){_.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(_){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${w.size.height/w.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${_.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(_){var J;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(J=d.test)&&void 0!==J&&J.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),Kt(w,d)},drag:function(_){},dragend:function(_){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${w.id} .ondrop-here`).kendoDropTarget({dragenter:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.addClass("focused")},dragleave:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.removeClass("focused")},drop:function(_){if(!_.dropTarget.hasClass("actived"))return;_.dropTarget.removeClass("focused");let J=_.dropTarget,nt=_.draggable.currentTarget;J.is(":empty")||J.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),nt.appendTo(J);let mt=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(mt,d,w),((w,d,U,it,q,j)=>{var _,J,nt;let{key:mt}=null!==(_=null===(J=w.source)||void 0===J||null===(J=J.test)||void 0===J?void 0:J.matching)&&void 0!==_?_:{key:"KIEN"},xt=q.key==mt;Kt(w,d);let Ot={id:w.id,key:null!=mt?mt:"",value:q.key};d.test?d.test.answer?d.test.answer.matching?d.test.answer.matching.find(yt=>yt.id==Ot.id)?d.test.answer.matching.filter(yt=>yt.id==Ot.id).forEach(yt=>{yt.key=Ot.key,yt.value=Ot.value}):d.test.answer.matching.push(Ot):d.test.answer.matching=[Ot]:d.test.answer={matching:[Ot]}:d.test={answer:{matching:[Ot]}},null!==(nt=d.svg)&&void 0!==nt&&nt.nodes.find(yt=>{var st;return"submit"==(null===(st=yt.source)||void 0===st||null===(st=st.test)||void 0===st?void 0:st.type)})||Ct(w,d,U,it,{iscorrect:xt},j)})(w,d,Dt.nodeStatus,Dt.slideStatus,{key:nt.data("key")},it)}});let j=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(j,d,w);break}case"matching-content":{jQuery("#"+w.id).on("touchmove",".ondrag-item",function(_){_.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(_){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${w.size.height/w.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${_.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(_){var J;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(J=d.test)&&void 0!==J&&J.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(_){},dragend:function(_){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${w.id} .ondrop-here`).kendoDropTarget({dragenter:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.addClass("focused")},dragleave:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.removeClass("focused")},drop:function(_){if(!_.dropTarget.hasClass("actived"))return;_.dropTarget.removeClass("focused");let J=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(J,d,w),_.draggable.currentTarget.appendTo(_.dropTarget),Tt(d,Dt.nodeStatus,Dt.slideStatus,it)}});let j=(0,et.RY)(T.F.TEST_GROUP,"g",void 0,O.L.target);(0,et.kE)(j,d,w);break}case"speech":break;case"submit":jQuery("#"+w.id).click(j=>{j.preventDefault(),((w,d,U,it,q)=>{var j,_,J,nt,mt;let xt;var Ot;if(null!=d&&null!==(j=d.test)&&void 0!==j&&null!==(j=j.answer)&&void 0!==j&&j.truefalse)xt=null==d||null===(Ot=d.test)||void 0===Ot||null===(Ot=Ot.answer)||void 0===Ot||null===(Ot=Ot.truefalse)||void 0===Ot?void 0:Ot.iscorrect;else if(null!=d&&null!==(_=d.test)&&void 0!==_&&null!==(_=_.answer)&&void 0!==_&&_.singlechoice){var yt;xt=null==d||null===(yt=d.test)||void 0===yt||null===(yt=yt.answer)||void 0===yt||null===(yt=yt.singlechoice)||void 0===yt?void 0:yt.iscorrect}else if(null!=d&&null!==(J=d.test)&&void 0!==J&&null!==(J=J.answer)&&void 0!==J&&J.multichoice){var st,pt,Et;xt=1==[null==d||null===(st=d.test)||void 0===st||null===(st=st.answer)||void 0===st||null===(st=st.multichoice)||void 0===st?void 0:st.length,null==d||null===(pt=d.test)||void 0===pt||null===(pt=pt.answer)||void 0===pt||null===(pt=pt.multichoice)||void 0===pt||null===(pt=pt.map(ne=>ne.iscorrect?1:0))||void 0===pt?void 0:pt.reduce((ne,ae)=>ne+ae),null==d||null===(Et=d.svg)||void 0===Et||null===(Et=Et.nodes)||void 0===Et||null===(Et=Et.filter(ne=>{var ae,pe;return"multichoice"==(null===(ae=ne.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)&&(null===(pe=ne.source)||void 0===pe||null===(pe=pe.test)||void 0===pe||null===(pe=pe.multichoice)||void 0===pe?void 0:pe.iscorrect)}))||void 0===Et?void 0:Et.length].filter((ne,ae,pe)=>pe.indexOf(ne)==ae).length}else if(null!=d&&null!==(nt=d.test)&&void 0!==nt&&null!==(nt=nt.answer)&&void 0!==nt&&nt.fill){var Ft,Xt;xt=(null==d||null===(Ft=d.test)||void 0===Ft||null===(Ft=Ft.answer)||void 0===Ft||null===(Ft=Ft.fill)||void 0===Ft||null===(Ft=Ft.map(ne=>ne.iscorrect?1:0))||void 0===Ft?void 0:Ft.reduce((ne,ae)=>ne+ae))==(null===(Xt=d.svg)||void 0===Xt||null===(Xt=Xt.nodes)||void 0===Xt||null===(Xt=Xt.filter(ne=>{var ae;return"fill"==(null===(ae=ne.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===Xt?void 0:Xt.length)}else if(null!=d&&null!==(mt=d.test)&&void 0!==mt&&null!==(mt=mt.answer)&&void 0!==mt&&mt.matching){var Vt,se;xt=(null===(Vt=d.svg)||void 0===Vt||null===(Vt=Vt.nodes)||void 0===Vt||null===(Vt=Vt.filter(ne=>{var ae;return"matching-empty"==(null===(ae=ne.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===Vt?void 0:Vt.length)==((null==d||null===(se=d.test)||void 0===se||null===(se=se.answer)||void 0===se?void 0:se.matching)||[]).map(ne=>ne.key==ne.value?1:0).reduce((ne,ae)=>ne+ae)}Ct(w,d,U,it,{iscorrect:xt},q)})(w,d,Dt.nodeStatus,Dt.slideStatus,it)})}})(d,w)};var E=g(1281),B=g(6153),u=g(3069),lt=g(7945),St=g(3477),At=g(745),Ht=g(6407);const Nt=(w,d,U)=>{if(U.slideStatus!=Dt.slideStatus||!d.length)return;let it=d.shift(),q=w.filter(nt=>{var mt;return(null!==(mt=nt.idx)&&void 0!==mt?mt:0)==it});if(!q.length)return;let j=Math.max.apply(null,q.map(nt=>{var mt;return null!==(mt=nt.time)&&void 0!==mt?mt:0})),_=!1,J=j<.5?0:setTimeout(()=>{_||(_=!0,Nt(w,d,U))},1e3*j);Bt(w,d,q,0,U,{idx:it,total:q.length,counter:0,isRecursive:_,timeoutRecursive:J,maxTimeCoundown:j,uid:Math.floor(1e9*Math.random())})},Bt=(w,d,U,it,q,j)=>{if(q.slideStatus!=Dt.slideStatus)return;let _=U[it];if(_){switch(_.type){case ot.h.GROUP:break;case ot.h.CIRCLE:(0,E.K)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case ot.h.ELLIPSE:(0,B.W)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case ot.h.LINE:(0,u.q)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case ot.h.RECT:(0,lt.a)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case ot.h.POLYGON:(0,St.u)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case ot.h.FOREIGNOBJECT:(0,At.$)(_.id,{size:_.size,attribute:_.attribute,style:_.style,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case ot.h.IMAGE:(0,p.B)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case ot.h.TEXT:(0,c.L)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case ot.h.PATH:(0,Ht.X)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null)}Gt(q.slide,_,q,()=>{j.counter+=1,j.maxTimeCoundown<.5&&j.counter>=j.total&&(j.total=j.counter=0,j.isRecursive||(clearTimeout(j.timeoutRecursive),j.isRecursive=!0,setTimeout(()=>{Nt(w,d,q)},250)))}),Bt(w,d,U,++it,q,j)}},Dt=new class ie{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(d){this._dataSource=d.data||{},O.L.variable.set=d.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var d,U;return null!==(d=null===(U=this._dataSource)||void 0===U||null===(U=U.slides)||void 0===U?void 0:U.length)&&void 0!==d?d:0}get slides(){var d;return(null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[]}get slide(){var d;return((null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[])[this._slideIdx]||{}}findNode(d){var U;let it=null===(U=this._dataSource)||void 0===U||null===(U=U.slides)||void 0===U?void 0:U.find((yt,st)=>st==this._slideIdx),q=null==it?void 0:it.svg,j=(yt,st)=>{let pt=null==yt?void 0:yt.find(Xt=>Xt.id==d);if(pt)return pt.pid=st,pt;let Et=0,Ft=yt.length||0;for(;Et<Ft&&!pt&&(pt=j(yt[Et].nodes||[],yt[Et].id),!pt);)Et++;return pt},_=j((null==q?void 0:q.nodes)||[]);var J,nt,mt,xt,Ot;return _?(_.style=null!==(J=_.style)&&void 0!==J?J:{},_.source=null!==(nt=_.source)&&void 0!==nt?nt:{},_.animate=null!==(mt=_.animate)&&void 0!==mt?mt:{},_.interactive=null!==(xt=_.interactive)&&void 0!==xt?xt:{},_.variable=null!==(Ot=_.variable)&&void 0!==Ot?Ot:{},_):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(d,U,it){var q;let j;var _,J;if(this.refreshNodeStatus(),this.refreshSlideStatus(),it)j=null===(_=this._dataSource)||void 0===_||null===(_=_.slides)||void 0===_?void 0:_.find(Ot=>Ot.code==it||Ot.id==it),j&&(this._slideIdx=(null===(J=this._dataSource)||void 0===J||null===(J=J.slides)||void 0===J?void 0:J.indexOf(j))||0);else if(U){var nt,mt;j=null===(nt=this._dataSource)||void 0===nt||null===(nt=nt.slides)||void 0===nt?void 0:nt.find(Ot=>Ot.id==U),j&&(this._slideIdx=(null===(mt=this._dataSource)||void 0===mt||null===(mt=mt.slides)||void 0===mt?void 0:mt.indexOf(j))||0)}else this._slideIdx=Math.min(Math.max(d||0,0),this.slideTotal-1),j=this.slide;if(j){var xt;Lt(O.L.container,O.L.svg,j,!0),null===(xt=jQuery(O.L.svg).find("#"+T.F.BACKGROUND_GROUP))||void 0===xt||xt.empty();let Ot=(0,et.RY)(T.F.BACKGROUND_GROUP,"g",void 0,O.L.svg);(0,et.I6)(Ot,j),(w=>{var d,U,it,q;let j=Dt.nodeStatus,_=Dt.slideStatus;null===(d=w.svg)||void 0===d||d.nodes.forEach(nt=>{nt.pid=Math.ceil(1e9*Math.random()),(0,N.v)(nt.pid)});let J=null===(U=w.svg)||void 0===U||null===(U=U.nodes)||void 0===U?void 0:U.map(nt=>{var mt;return null!==(mt=nt.idx)&&void 0!==mt?mt:0}).filter((nt,mt,xt)=>xt.indexOf(nt)==mt).sort((nt,mt)=>(null!=nt?nt:0)-(null!=mt?mt:0));Nt(null!==(it=null===(q=w.svg)||void 0===q?void 0:q.nodes)&&void 0!==it?it:[],null!=J?J:[],{slide:w,nodeStatus:j,slideStatus:_})})(j)}this.changeSlide(this.slides,null===(q=this.slide)||void 0===q?void 0:q.id,this.slideIdx,this.slides.length,j)}set onChangeSlide(d){this._fnChangeSlides.push(d)}changeSlide(d,U,it,q,j){this._fnChangeSlides.forEach(_=>_(d,U,it,q,j))}},Lt=(w,d,U,it)=>{var q,j,_,J;let nt=window.document.querySelector(d);var mt;nt||(nt=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(mt=window.document.querySelector(w))||void 0===mt||mt.appendChild(nt)),it&&(nt.textContent=null);let{x:xt,y:Ot,width:yt,height:st}=null!==(q=null==U||null===(j=U.svg)||void 0===j?void 0:j.viewBox)&&void 0!==q?q:O.L.screen.frameSize;nt.setAttributeNS(null,"viewBox",xt+" "+Ot+" "+yt+" "+st),nt.setAttribute("id",d.replace("#",""));var Vt,se,pt=null!==(_=jQuery(w).width())&&void 0!==_?_:1080,Et=null!==(J=jQuery(w).height())&&void 0!==J?J:1080,Xt=yt/st;Xt>=pt/Et?se=(Vt=pt)/Xt:Vt=(se=Et)*Xt,nt.setAttributeNS(null,"width",Vt.toString()),nt.setAttributeNS(null,"height",se.toString())}},7050:(he,Mt,g)=>{g.d(Mt,{M:()=>ot,a:()=>O});var T=g(5619);const O=(ct,I,y)=>{var M;let{value:c}=null!==(M=ct.animate)&&void 0!==M?M:{};ot(ct.id,{node:ct,value:c,nodeStatus:I,slideStatus:y},()=>{})},ot=(ct,I,y)=>{var M;if(!I.value)return void y();let F=jQuery("#"+ct).parents("g");if(!F.length)return void y();let{size:c}=I.node;F.css("transform-origin",`${c.x+c.width/2}px ${c.y+c.height/2}px`);let N="",R=null!==(M=I.iteration)&&void 0!==M?M:0,P=[];(I.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?P.push(I.value):I.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(I.value)?(P.push("animation"),P.push(`animation-${I.value}`)):(P.push("animate__animated"),P.push(`animate__${I.value}`)):(P.push("animation"),P.push("animation-fadein")),R<0?(P.push("animation-iteration-infinite"),y(),y=function(){}):R>0&&P.push("animation-iteration-"+(R+1)),N=P.join(" "),function(b){let k=function(){F.data("animate-running")?F.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){F.data("animate-running",!1),setTimeout(function(){b()},100)}):b()};F.hasClass("animation")?setTimeout(function(){k()}):k()}(function(){var b;D(ct),(R>0||R<0)&&F.one("animationiteration",function(){I.slideStatus===T.J.slideStatus||(F.data("animate-running",!1),D(ct),I.slideStatus===T.J.slideStatus&&y())}),F.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(F.data("animate-running",!1),D(ct),I.finish){default:case 0:case 1:break;case 2:var k;ot(ct,{node:I.node,value:null===(k=I.node.animate)||void 0===k?void 0:k.out,nodeStatus:I.nodeStatus,slideStatus:I.slideStatus},()=>{F.addClass("hide")})}I.slideStatus===T.J.slideStatus&&y()}),F.attr("data-class",null!==(b=F.attr("class"))&&void 0!==b?b:""),F.addClass(N),F.data("animate-running",!0)})},D=function(ct){var I,y,M=jQuery("#"+ct).parents("g"),F=null===(I=M.attr("class"))||void 0===I?void 0:I.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),c=null===(y=M.attr("class"))||void 0===y?void 0:y.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);F&&F.forEach(function(R){jQuery(M).removeClass(R)}),c&&c.forEach(function(R){jQuery(M).removeClass(R)});let N=M.attr("data-class");N&&(M.attr("class",N),M.removeAttr("data-class")),jQuery(M).data("animation-running",!1)}},8946:(he,Mt,g)=>{g.d(Mt,{h:()=>ot});var T=g(5619),O=g(7050);const ot=(ct,I,y)=>{var M;if(!I.value)return void y();let F=jQuery("#"+ct).parents("g");if(!F.length)return void y();let{size:c}=I.node;F.css("transform-origin",`${c.x+c.width/2}px ${c.y+c.height/2}px`);let N="",R=null!==(M=I.iteration)&&void 0!==M?M:0,P=[];(I.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?P.push(I.value):(P.push("animation"),P.push(I.value?"animation-"+I.value:"animation-fadein")),R<0?(P.push("animation-iteration-infinite"),y(),y=function(){}):R>0&&P.push("animation-iteration-"+(R+1)),N=P.join(" "),function(b){let k=function(){F.data("animate-running")?F.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){F.data("animate-running",!1),setTimeout(function(){b()},100)}):b()};F.hasClass("animation")?setTimeout(function(){k()}):k()}(function(){var b;D(ct),(R>0||R<0)&&F.one("animationiteration",function(){I.slideStatus===T.J.slideStatus||(F.data("animate-running",!1),D(ct),I.slideStatus===T.J.slideStatus&&y())}),F.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(F.data("animate-running",!1),D(ct),I.finish){default:case 0:case 1:break;case 2:var k;(0,O.M)(ct,{node:I.node,value:null===(k=I.node.animate)||void 0===k?void 0:k.out,nodeStatus:I.nodeStatus,slideStatus:I.slideStatus},()=>{F.addClass("hide")})}I.slideStatus===T.J.slideStatus&&y()}),F.attr("data-class",null!==(b=F.attr("class"))&&void 0!==b?b:""),F.addClass(N),F.data("animate-running",!0)})},D=function(ct){var I,y=jQuery("#"+ct).parents("g"),M=null===(I=y.attr("class"))||void 0===I?void 0:I.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);M&&M.forEach(function(c){jQuery(y).removeClass(c)});let F=y.attr("data-class");F&&(y.attr("class",F),y.removeAttr("data-class")),jQuery(y).data("animation-running",!1)}},7657:(he,Mt,g)=>{g.d(Mt,{c:()=>ct});var T=g(9506),O=g(5619),ot=g(5970),D=g(7050);const ct=(y,M,F)=>{var c;if(!M.points||!M.points.length)return void F();let N=jQuery("#"+y),P=function I(y){let M=[];2===y.length&&y.splice(1,0,[(y[0][0]+y[1][0])/2,(y[0][1]+y[1][1])/2]);let P,rt,b,F=1,c=y.length;for(;F<c;){if(P=y[F-1],rt=y[F],b=y[F+1],(Math.abs(P[0]-rt[0])>=15||Math.abs(P[1]-rt[1])>=15)&&Math.pow(P[0]-rt[0],2)+Math.pow(P[1]-rt[1],2)>=Math.pow(15,2)&&b&&(Math.abs(P[0]-b[0])<=20||Math.abs(P[1]-b[1])<=20)&&Math.pow(P[0]-b[0],2)+Math.pow(P[1]-b[1],2)<=Math.pow(20,2))M.push(rt);else{let p=rt[0]-P[0],Q=rt[1]-P[1],A=Math.max(Math.abs(p),Math.abs(Q));for(var k=0;k<A;k+=15)M.push([P[0]+p*k/A,P[1]+Q*k/A])}F++}return c>0&&(M.splice(0,0,y[0]),M.push(y[c-1])),M}((X=>{if(1==X.length){let{size:at}=M.node;return[[at.x+at.width/2,at.y+at.height/2],...X]}return[...X]})(M.points||[])),rt=null!==(c=M.iteration)&&void 0!==c?c:0;if(rt<0&&(F(),F=function(){}),N.data("work-running")&&rt<0)return;N.data("work-running",!0);let et,b=P.length,k=Math.max(20,1e3*(M.time||3)/b),{id:p,type:Q,size:A,attribute:tt}=O.J.findNode(y),V=function(X){if(M.slideStatus!==O.J.slideStatus)return N.data("work-running",!1),void(M.slideStatus===O.J.slideStatus&&F());if(X<b){let Y=P[X];Y&&(et=Object.assign({},A,{x:Y[0]-A.width/2,y:Y[1]-A.height/2}),Object.assign(tt,(0,T.xW)(Q,et,tt)),(0,ot.tD)(window.document.getElementById(p),tt),setTimeout(function(){V(++X)},k))}else if(rt>0)rt--,V(1);else if(rt<0)V(1);else switch(N.data("work-running",!1),M.slideStatus===O.J.slideStatus&&F(),M.finish){default:case 0:break;case 1:Object.assign(tt,(0,T.xW)(Q,A,tt)),(0,ot.tD)(window.document.getElementById(p),tt);break;case 2:var at;(0,D.M)(M.node.id,{node:M.node,value:null===(at=M.node.animate)||void 0===at?void 0:at.out,nodeStatus:M.nodeStatus,slideStatus:M.slideStatus},()=>{N.addClass("hide")})}};V(1)}},6769:(he,Mt,g)=>{g.d(Mt,{d:()=>ot});var T=g(7102),O=g(5619);const ot=(D,ct,I,y,M)=>{var F,c,N,R,P,rt,b;if(y.slideStatus!=O.J.slideStatus)return ct.async&&"change-slide"!=ct.async?void 0:void M();if(y.nodeStatus!=O.J.nodeStatus&&(!ct.async||"change-node"==ct.async))return void M();if(!(null!==(F=ct.source)&&void 0!==F&&F.path||null!==(c=ct.source)&&void 0!==c&&c.url))return console.warn(`${D} -> audio no source!`),M(),void(M=()=>{});var k=jQuery("#"+D);let p=null!==(N=ct.iteration)&&void 0!==N?N:0;if(p<0&&(M(),M=function(){}),!(k.data("audio-running")&&p<0)){k.data("audio-running",!0);var Q=function(tt){tt.pause(),tt.remove(),k.data("audio-running",!1)},A=new Audio;return A.autoplay=!0,A.loop=0!=p,A.preload="auto",A.controls=!0,A.setAttributeNode(document.createAttribute("playsinline")),A.addEventListener("canplay",function(){var tt=A.play();tt&&tt.then(function(et){var V;k.data("audio-running",!0),"time"==ct.async?setTimeout(()=>{y.slideStatus===O.J.slideStatus&&(Q(A),M(),M=()=>{})},1e3*(null!==(V=ct.time)&&void 0!==V?V:1)):"non-stop"==ct.async&&(M(),M=()=>{})}).catch(function(et){k.data("audio-running",!1),y.slideStatus===O.J.slideStatus&&(M(),M=()=>{})})}),A.addEventListener("timeupdate",function(){switch(ct.async){case"time":case"change-slide":y.slideStatus!==O.J.slideStatus&&(Q(this),M(),M=()=>{});break;case"finish-action":I.total>=2&&I.total-I.counter==1&&(Q(this),M(),M=()=>{});break;default:case"change-node":y.nodeStatus!==O.J.nodeStatus&&(Q(this),M(),M=()=>{});case"non-stop":}}),A.addEventListener("canplaythrough",function(){this.loop&&(p>0?p--:0==p&&(this.loop=!1))}),A.addEventListener("play",function(){}),A.addEventListener("pause",function(){}),A.addEventListener("ended",function(){this.remove(),k.data("audio-running",!1),y.slideStatus===O.J.slideStatus&&(M(),M=()=>{})}),A.onerror=function(){this.remove(),k.data("audio-running",!1),y.slideStatus===O.J.slideStatus&&(M(),M=()=>{})},A.src=(null!==(R=ct.source)&&void 0!==R&&R.path?(null===(P=T.L.config)||void 0===P?void 0:P.readfileuploadurl)+(null===(rt=ct.source)||void 0===rt?void 0:rt.path):null===(b=ct.source)||void 0===b?void 0:b.url)||"",A}}},334:(he,Mt,g)=>{g.d(Mt,{J:()=>F});var T=g(7102),O=g(5619),ot=g(8946),D=g(7657),ct=g(6769),I=g(3591),y=g(2241),M=g(7050);const F=(c,N,R,P)=>{var rt,b,k;let p={total:0,counter:0},{triggershow:Q,triggerrun:A,triggerhide:tt,action:et,audio:V,slide:X,media:at}=null!==(rt=null===(b=c.interactive)||void 0===b?void 0:b.click)&&void 0!==rt?rt:{};if(console.log(`node(${c.id}) | nodeStatus(${N}) | slideStatus(${R}) | click`),Q){let{id:zt,ids:ht,time:wt,async:Kt}=Q;"asynctrue"==Kt?(0,I.GD)({id:zt,ids:ht,nodeStatus:N,slideStatus:R}):"time"==Kt&&setTimeout(()=>{(0,I.GD)({id:zt,ids:ht,nodeStatus:N,slideStatus:R})},1e3*(null!=wt?wt:0))}if(A){let{id:zt,ids:ht,time:wt,async:Kt}=A;"asynctrue"==Kt?(0,I.MF)({id:zt,ids:ht,nodeStatus:N,slideStatus:R}):"time"==Kt&&setTimeout(()=>{(0,I.MF)({id:zt,ids:ht,nodeStatus:N,slideStatus:R})},1e3*(null!=wt?wt:0))}if(tt){let{id:zt,ids:ht,time:wt,async:Kt}=tt;"asynctrue"==Kt?(0,I.vi)({id:zt,ids:ht,nodeStatus:N,slideStatus:R}):"time"==Kt&&setTimeout(()=>{(0,I.vi)({id:zt,ids:ht,nodeStatus:N,slideStatus:R})},1e3*(null!=wt?wt:0))}let Y=()=>{setTimeout(()=>{if(p.counter>=p.total){if(P&&P(),Q){let{id:zt,ids:ht,async:wt}=Q;(!wt||"asyncfalse"==wt)&&(0,I.GD)({id:zt,ids:ht,nodeStatus:N,slideStatus:R})}if(A){let{id:zt,ids:ht,async:wt}=A;(!wt||"asyncfalse"==wt)&&(0,I.MF)({id:zt,ids:ht,nodeStatus:N,slideStatus:R})}if(tt){let{id:zt,ids:ht,async:wt}=tt;(!wt||"asyncfalse"==wt)&&(0,I.vi)({id:zt,ids:ht,nodeStatus:N,slideStatus:R})}}})};if(null!=et&&et.value){p.total+=1;let zt=()=>{p.counter+=1,Y()};switch(null==et?void 0:et.value){case"hide":var Jt;(0,M.M)(c.id,{node:c,value:null===(Jt=c.animate)||void 0===Jt?void 0:Jt.out,nodeStatus:N,slideStatus:R},()=>{jQuery("#"+c.id).addClass("hide"),zt()});break;case"points":{let{points:ht,time:wt,iteration:Kt,finish:Z}=et;ht&&(0,D.c)(c.id,{node:c,points:ht,time:wt,iteration:Kt,finish:Z,nodeStatus:N,slideStatus:R},zt);break}default:{let{value:ht,time:wt,iteration:Kt,finish:Z}=et;(0,ot.h)(c.id,{node:c,value:ht,time:wt,iteration:Kt,finish:Z,nodeStatus:N,slideStatus:R},zt);break}}}if(null!=V&&null!==(k=V.source)&&void 0!==k&&k.path){p.total+=1;let zt=()=>{p.counter+=1,Y()};(0,ct.d)(c.id,V,p,{nodeStatus:N,slideStatus:R},zt)}if(p.total||Y(),null!=X&&X.id)switch(X.id){case-1:O.J.runSlide(O.J.slideIdx-1);break;case-2:O.J.runSlide(O.J.slideIdx+1);break;default:var qt;O.J.runSlide(void 0,X.id,null===(qt=X.code)||void 0===qt?void 0:qt.toString())}if(null!=at&&at.type){var Pt;let ht=`<div class="popup-media-viewer"><iframe src="${(0,y._)({readfileuploadurl:null===(Pt=T.L.config)||void 0===Pt?void 0:Pt.readfileuploadurl,type:null==at?void 0:at.type,oss:null==at?void 0:at.oss,path:null==at?void 0:at.path,url:null==at?void 0:at.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,wt=jQuery(ht).appendTo(window.document.body);wt.find(".btn-close").click(function(Kt){Kt.preventDefault(),wt.remove()})}}},3591:(he,Mt,g)=>{g.d(Mt,{GD:()=>D,MF:()=>ct,vi:()=>I});var T=g(5619),O=g(334),ot=g(7050);const D=y=>{y.id?jQuery("#"+y.id).removeClass("hide"):y.ids&&y.ids.forEach(M=>{jQuery("#"+M).removeClass("hide")})},ct=y=>{y.id?(jQuery("#"+y.id).removeClass("hide"),(0,O.J)(T.J.findNode(y.id),y.nodeStatus,y.slideStatus)):y.ids&&y.ids.forEach(M=>{jQuery("#"+M).removeClass("hide"),(0,O.J)(T.J.findNode(M),y.nodeStatus,y.slideStatus)})},I=y=>{if(y.id){var M;let F=T.J.findNode(y.id);(0,ot.M)(y.id,{node:F,value:null===(M=F.animate)||void 0===M?void 0:M.out,nodeStatus:y.nodeStatus,slideStatus:y.slideStatus},()=>{jQuery("#"+y.id).addClass("hide")})}else y.ids&&y.ids.forEach(F=>{var c;let N=T.J.findNode(F);(0,ot.M)(F,{node:N,value:null===(c=N.animate)||void 0===c?void 0:c.out,nodeStatus:y.nodeStatus,slideStatus:y.slideStatus},()=>{jQuery("#"+F).addClass("hide")})})}},5970:(he,Mt,g)=>{g.d(Mt,{cR:()=>A,rN:()=>V,t8:()=>tt,fn:()=>X,RY:()=>Pt,tD:()=>at,KG:()=>Jt,c_:()=>Y,s6:()=>et,I6:()=>Tt,in:()=>zt,IA:()=>Ct,KP:()=>Z,AE:()=>ht,xJ:()=>Kt,Mo:()=>wt,kE:()=>Gt});var T=g(1999),O=g(7873),ot=g(6315),ct=/^#?[a-fA-F0-9]+$/;const M=(E,B)=>{var u;if("none"==(E=null!==(u=E)&&void 0!==u?u:""))return"none";if("transparent"==E)return"rgba(0,0,0,0)";if(E.includes("rgba("))return E;if(E.includes("rgb(")&&(E=(0,ot.w)(E)),!(E=E.replace(/[^0-9a-fA-F]/g,"")))return"";if(!ct.test(E))return console.error(`hex2rgba -> ${E}: first argument has invalid hexadecimal characters`),"";if("#"===E[0]&&(E=E.slice(1)),3===E.length){let St=E.split("");St.splice(2,0,E[2]),St.splice(1,0,E[1]),St.splice(0,0,E[0]),E=St.join("")}if(6!==E.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var lt=[parseInt(E.slice(0,2),16),parseInt(E.slice(2,4),16),parseInt(E.slice(4,6),16)];return B="number"==typeof B?B:parseFloat(B),lt.push(B>=0&&B<=1?B:1),"rgba("+lt.join(",")+")"};var F=g(2241),c=g(8779),N=g(7102),R=g(9841),P=g(7945),rt=g(9173),b=g(1281),k=g(5619),p=g(745),Q=g(6847);class A{constructor(B,u){let lt=window.document.querySelector(u);var St;lt||(lt=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(St=window.document.querySelector(B))||void 0===St||St.appendChild(lt));let{svgViewBox:At,svgSize:Ht}=N.L.screen.init();lt.setAttributeNS(null,"viewBox",`${At.x} ${At.y} ${At.width} ${At.height}`),lt.setAttribute("id",u.replace("#","")),lt.style.display="block",lt.style.width=`${Ht.width}px`,lt.style.height=`${Ht.height}px`,lt.style.backgroundColor="#fafafa",lt.style.cursor="default"}}const tt=E=>{jQuery(N.L.target).find("#"+O.F.BACKGROUND_GROUP).empty();let B=Pt(O.F.BACKGROUND_GROUP,"g",void 0,N.L.target);Tt(B,E),(()=>{let u=window.document.getElementById(null==E?void 0:E.id);jQuery(u).find("#"+O.F.BACKGROUND_GROUP).empty();let lt=Pt(O.F.BACKGROUND_GROUP,"g",void 0,u);Tt(lt,E)})()},et=()=>{let E=N.L.screen.svgViewBox,B=N.L.screen.svgSize;N.L.target&&(N.L.target.setAttributeNS(null,"viewBox",`${E.x} ${E.y} ${E.width} ${E.height}`),N.L.target.style.left=`${B.x}px`,N.L.target.style.top=`${B.y}px`,N.L.target.style.width=`${B.width}px`,N.L.target.style.height=`${B.height}px`)},V=()=>{jQuery(N.L.target).find(">*:not(defs)").remove()},X=(E,B,u,lt,St)=>{let At;return E?(At=jQuery(St||N.L.target).find("#"+E).get(0),At||(At=window.document.createElementNS("http://www.w3.org/2000/svg",u),At.setAttribute("id",E),B==T.h.FOREIGNOBJECT&&At.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(At).appendTo(St||N.L.target))):(At=window.document.createElementNS("http://www.w3.org/2000/svg",u),jQuery(At).appendTo(St||N.L.target)),null!=lt&&lt.attribute&&at(At,null==lt?void 0:lt.attribute),null!=lt&&lt.style&&Y(At,null==lt?void 0:lt.style),null!=lt&&lt.source&&Jt(At,B,null==lt?void 0:lt.source),At},at=(E,B)=>{return jQuery(E).attr((u=Object.assign({},B||{}),null===(lt=Object.keys(u))||void 0===lt||lt.forEach(Ht=>{switch(Ht){case"fill":break;case"fillRule":var Qt;Object.assign(u,{"fill-rule":null!==(Qt=u.fillRule)&&void 0!==Qt?Qt:null,fillRule:null});break;case"stroke":var Nt;Object.assign(u,{"stroke-width":null!==(Nt=u.strokeWidth)&&void 0!==Nt?Nt:null,strokeWidth:null});break;case"strokeLinecap":var Bt;Object.assign(u,{"stroke-linecap":null!==(Bt=u.strokeLinecap)&&void 0!==Bt?Bt:null,strokeLinecap:null});break;case"strokeLinejoin":var ie;Object.assign(u,{"stroke-linejoin":null!==(ie=u.strokeLinejoin)&&void 0!==ie?ie:null,strokeLinejoin:null});break;case"strokeMiterlimit":var Dt;Object.assign(u,{"stroke-miterlimit":null!==(Dt=u.strokeMiterlimit)&&void 0!==Dt?Dt:null,strokeMiterlimit:null});break;case"strokeDasharray":var Lt;Object.assign(u,{"stroke-dasharray":null!==(Lt=u.strokeDasharray)&&void 0!==Lt?Lt:null,strokeDasharray:null});break;case"strokeDasharrays":var w,d;Object.assign(u,{"stroke-dasharray":null!==(w=null===(d=u.strokeDasharrays)||void 0===d?void 0:d.join(" "))&&void 0!==w?w:null,strokeDasharrays:null});break;case"fontFamily":var U;Object.assign(u,{"font-family":null!==(U=u.fontFamily)&&void 0!==U?U:null,fontFamily:null});break;case"fontWeight":var it;Object.assign(u,{"font-weight":null!==(it=u.fontWeight)&&void 0!==it?it:null,fontWeight:null});break;case"fontSize":var q;Object.assign(u,{"font-size":null!==(q=u.fontSize)&&void 0!==q?q:null,fontSize:null});break;case"textLength":Object.assign(u,{textLength:u.textLength?`${u.textLength}px`:null});break;case"transformOrigin":var j;Object.assign(u,{"transform-origin":null!==(j=u.transformOrigin)&&void 0!==j?j:null,transformOrigin:null})}}),Object.assign({},null!=u?u:{},{fill:null!=u&&u.fill?M(u.fill,null!==(St=null==u?void 0:u.fillOpacity)&&void 0!==St?St:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=u&&u.stroke?M(u.stroke,null!==(At=null==u?void 0:u.strokeOpacity)&&void 0!==At?At:1):"rgba(0,0,0,0)",strokeOpacity:null}))),E;var u,lt,St,At},Y=(E,B)=>{return jQuery(E).css((u=Object.assign({},B||{}),null===(lt=Object.keys(u))||void 0===lt||lt.forEach(St=>{switch(St){case"padding":Object.assign(u,{padding:u.padding?`${u.padding}px`:null});break;case"borderWidth":var At;Object.assign(u,u.borderWidth&&u.borderColor?{"border-width":`${u.borderWidth}px`,"border-style":u.borderStyle||"solid","border-color":M(u.borderColor,null!==(At=u.borderOpacity)&&void 0!==At?At:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(u,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(u,{"border-radius":u.borderRadius?`${u.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Ht;Object.assign(u,u.backgroundColor?{"background-color":M(u.backgroundColor,null!==(Ht=u.backgroundOpacity)&&void 0!==Ht?Ht:1)}:{"background-color":""}),Object.assign(u,{backgroundColor:null,backgroundOpacity:null})}}),u)),E;var u,lt},Jt=(E,B,u)=>{switch(B){case T.h.TEXT:var lt,St;jQuery(E).text(null!==(lt=null==u||null===(St=u.text)||void 0===St?void 0:St.textContent)&&void 0!==lt?lt:"");break;case T.h.IMAGE:var At,Ht,Qt,Nt,Bt;jQuery(E).attr("href",(null==u||null===(At=u.image)||void 0===At?void 0:At.base64)||(null!=u&&null!==(Ht=u.image)&&void 0!==Ht&&Ht.path?(null===(Qt=N.L.config)||void 0===Qt?void 0:Qt.readfileuploadurl)+(null==u||null===(Nt=u.image)||void 0===Nt?void 0:Nt.path):null==u||null===(Bt=u.image)||void 0===Bt?void 0:Bt.url)||"");break;case T.h.FOREIGNOBJECT:switch(null==u?void 0:u.type){case"text":var ie,Dt;if(null!==(ie=u.text)&&void 0!==ie&&ie.variableKeywords&&null!==(Dt=u.text)&&void 0!==Dt&&Dt.variableKeywords.length){var Lt;let n=N.L.variable.getKeys(),l=(null===(Lt=u.text)||void 0===Lt?void 0:Lt.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";u.text.variableKeywords.forEach(v=>{var m=v.replace(/[^a-zA-Z0-9_]/gm,"");if(n.indexOf(m)>=0){var h=N.L.variable.getValue(m);l=l.replace(v,h)}}),jQuery(E).text(l)}else{var w;jQuery(E).text((null===(w=u.text)||void 0===w?void 0:w.textContent)||"")}break;case"html":{var d,U,it;let n=(null==u||null===(d=u.html)||void 0===d?void 0:d.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>';if(null!==(U=u.html)&&void 0!==U&&U.variableKeywords&&null!==(it=u.html)&&void 0!==it&&it.variableKeywords.length){let l=N.L.variable.getKeys();u.html.variableKeywords.forEach(v=>{var m=v.replace(/[^a-zA-Z0-9_]/gm,"");if(l.indexOf(m)>=0){var h=N.L.variable.getValue(m);n=n.replace(v,h)}})}jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${n}</div>`).find("img[path],video[path],iframe[path]").each((l,v)=>{var m,h;v.setAttribute("src",(null!==(m=null===(h=N.L.config)||void 0===h?void 0:h.readfileuploadurl)&&void 0!==m?m:"")+v.getAttribute("path")),v.removeAttribute("path")});break}case"input":var q,j,_,J;if(null!==(q=u.input)&&void 0!==q&&q.input)jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(_=null===(J=u.input)||void 0===J?void 0:J.placeholder)&&void 0!==_?_:""}" maxlength="100" /></div>`);else if(null!==(j=u.input)&&void 0!==j&&j.textarea){var nt,mt;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(nt=null===(mt=u.input)||void 0===mt?void 0:mt.placeholder)&&void 0!==nt?nt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var xt,Ot,yt,st,pt;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(xt=u.image)||void 0===xt?void 0:xt.base64)||(null!==(Ot=u.image)&&void 0!==Ot&&Ot.path?(null===(yt=N.L.config)||void 0===yt?void 0:yt.readfileuploadurl)+(null===(st=u.image)||void 0===st?void 0:st.path):null===(pt=u.image)||void 0===pt?void 0:pt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Et,Ft,Xt,Vt;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Et=u.iframe)&&void 0!==Et&&Et.path?(null===(Ft=N.L.config)||void 0===Ft?void 0:Ft.readfileuploadurl)+(null===(Xt=u.iframe)||void 0===Xt?void 0:Xt.path):null===(Vt=u.iframe)||void 0===Vt?void 0:Vt.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var se,ne,ae,pe,Ae;let n=(0,F._)({readfileuploadurl:null===(se=N.L.config)||void 0===se?void 0:se.readfileuploadurl,type:null===(ne=u.embed)||void 0===ne?void 0:ne.type,oss:null===(ae=u.embed)||void 0===ae?void 0:ae.oss,path:null===(pe=u.embed)||void 0===pe?void 0:pe.path,url:null===(Ae=u.embed)||void 0===Ae?void 0:Ae.url});jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${n}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var ke,me;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(ke=null===(me=u.svg)||void 0===me?void 0:me.svgContent)&&void 0!==ke?ke:""}</div>`);break;case"test":{var Oe,Te,je,be;let n=(null==u||null===(Oe=u.html)||void 0===Oe?void 0:Oe.htmlContent)||"";if(null!==(Te=u.html)&&void 0!==Te&&Te.variableKeywords&&null!==(je=u.html)&&void 0!==je&&je.variableKeywords.length){let l=N.L.variable.getKeys();u.html.variableKeywords.forEach(v=>{var m=v.replace(/[^a-zA-Z0-9_]/gm,"");if(l.indexOf(m)>=0){var h=N.L.variable.getValue(m);n=n.replace(v,h)}})}switch(null==u||null===(be=u.test)||void 0===be?void 0:be.type){case"truefalse":var qe;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(qe=u.test.truefalse)&&void 0!==qe&&qe.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"singlechoice":var Ue;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(Ue=u.test.singlechoice)&&void 0!==Ue&&Ue.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"multichoice":var He;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(He=u.test.multichoice)&&void 0!==He&&He.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"matching-empty":var $e;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==u||null===($e=u.test.matching)||void 0===$e?void 0:$e.key}"></div>`);break;case"matching-content":var Xe,Ye,ti;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==u||null===(Xe=u.test.matching)||void 0===Xe?void 0:Xe.key}"><div class="ondrag-item" data-key="${null!==(Ye=null==u||null===(ti=u.test)||void 0===ti||null===(ti=ti.matching)||void 0===ti?void 0:ti.key)&&void 0!==Ye?Ye:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div></div>`);break;case"fill":var hi;((null===(hi=u.html)||void 0===hi?void 0:hi.fillKeywords)||[]).forEach(l=>{var v=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${l.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;n=n.replace(new RegExp(l.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),v)}),jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"speech":jQuery(E).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var bt,K,i,r,o;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(bt=null!==(K=u.image)&&void 0!==K&&K.path?(null===(i=N.L.config)||void 0===i?void 0:i.readfileuploadurl)+(null===(r=u.image)||void 0===r?void 0:r.path):null===(o=u.image)||void 0===o?void 0:o.url)&&void 0!==bt?bt:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(E).find("img[path],video[path],iframe[path]").each((l,v)=>{var m,h;v.setAttribute("src",(null!==(m=null===(h=N.L.config)||void 0===h?void 0:h.readfileuploadurl)&&void 0!==m?m:"")+v.getAttribute("path")),v.removeAttribute("path")})}}}},Pt=(E,B,u,lt)=>{let St=jQuery(lt||N.L.target).find("#"+E).get(0);return St||(St=window.document.createElementNS("http://www.w3.org/2000/svg",B),St.setAttribute("id",E),jQuery(St).appendTo(lt||N.L.target)),jQuery(St).attr((null==u?void 0:u.attribute)||{}),jQuery(St).css((null==u?void 0:u.style)||{}),St},zt=(E,B)=>{let u=(0,R.$)(2),lt={fill:c.pZ.fill,stroke:c.pZ.stroke,"stroke-width":(0,R.$)(c.pZ.strokeWidth)};return[{element:Pt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:B.x-u,y:B.y-u,width:B.width+2*u,height:B.height+2*u},lt)},E),posType:"rect-center"}]},ht=(E,B)=>{let{size:u}=B,lt=(0,R.$)(1),St=(0,R.$)(2),At=(0,R.$)(5),Ht={stroke:c.u$.stroke,"stroke-width":(0,R.$)(c.u$.strokeWidth),"stroke-linecap":c.u$.strokeLinecap},Qt={fill:c.bf.fill,stroke:c.bf.stroke,"stroke-width":(0,R.$)(c.bf.strokeWidth)},Nt={fill:c.eD.fill,stroke:c.eD.stroke,"stroke-width":(0,R.$)(c.eD.strokeWidth),width:(0,R.$)(c.eD.width),height:(0,R.$)(c.eD.height)};return Pt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:u.x-lt,y1:u.y,x2:u.x-lt,y2:u.y+u.height},Ht)},E),Pt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-lt,x2:u.x+u.width,y2:u.y-lt},Ht)},E),Pt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:u.x+u.width+lt,y1:u.y,x2:u.x+u.width+lt,y2:u.y+u.height},Ht)},E),Pt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+lt,x2:u.x+u.width,y2:u.y+u.height+lt},Ht)},E),[{element:Pt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},Qt),style:{cursor:"move"}},E),posType:"rect-center"},{element:Pt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:u.x-At,y:u.y-At},Nt),style:{cursor:"nw-resize"}},E),posType:"rect-top-left"},{element:Pt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:u.x+u.width-St,y:u.y-At},Nt),style:{cursor:"ne-resize"}},E),posType:"rect-top-right"},{element:Pt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:u.x-At,y:u.y+u.height-St},Nt),style:{cursor:"sw-resize"}},E),posType:"rect-bottom-left"},{element:Pt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:u.x+u.width-St,y:u.y+u.height-St},Nt),style:{cursor:"se-resize"}},E),posType:"rect-bottom-right"},{element:Pt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:u.x+u.width/2-St-lt,y:u.y-At},Nt),style:{cursor:"n-resize"}},E),posType:"rect-top"},{element:Pt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:u.x+u.width-St,y:u.y+u.height/2-St-lt},Nt),style:{cursor:"e-resize"}},E),posType:"rect-right"},{element:Pt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:u.x+u.width/2-St-lt,y:u.y+u.height-St},Nt),style:{cursor:"s-resize"}},E),posType:"rect-bottom"},{element:Pt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:u.x-At,y:u.y+u.height/2-St-lt},Nt),style:{cursor:"w-resize"}},E),posType:"rect-left"}]},wt=(E,B,u)=>{let lt=(0,R.$)(1),St={stroke:c.u$.stroke,"stroke-width":(0,R.$)(c.u$.strokeWidth),"stroke-linecap":c.u$.strokeLinecap},At={fill:c.bf.fill,stroke:c.bf.stroke,"stroke-width":(0,R.$)(c.bf.strokeWidth)},Ht={fill:c.IB.fill,stroke:c.IB.stroke,"stroke-width":(0,R.$)(c.IB.strokeWidth)},Dt=(Pt("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:u.x-lt,y1:u.y,x2:u.x-lt,y2:u.y+u.height},St)},E),Pt("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-lt,x2:u.x+u.width,y2:u.y-lt},St)},E),Pt("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:u.x+u.width+lt,y1:u.y,x2:u.x+u.width+lt,y2:u.y+u.height},St)},E),Pt("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+lt,x2:u.x+u.width,y2:u.y+u.height+lt},St)},E),Pt("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},At)},E));return B.forEach(Lt=>{let{size:w}=Lt;Pt("icdt-temp-select-rect-node-"+Lt.id,"rect",{attribute:Object.assign({x:w.x,y:w.y,width:w.width,height:w.height},Ht)},E)}),[{element:Dt,posType:"rect-center"}]},Kt=(E,B)=>{let u=(0,R.$)(1),lt={stroke:c.u$.stroke,"stroke-width":(0,R.$)(c.u$.strokeWidth),"stroke-linecap":c.u$.strokeLinecap},St={fill:c.bf.fill,stroke:c.bf.stroke,"stroke-width":(0,R.$)(c.bf.strokeWidth)};return Pt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:B.x-u,y1:B.y,x2:B.x-u,y2:B.y+B.height},lt)},E),Pt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:B.x,y1:B.y-u,x2:B.x+B.width,y2:B.y-u},lt)},E),Pt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:B.x+B.width+u,y1:B.y,x2:B.x+B.width+u,y2:B.y+B.height},lt)},E),Pt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:B.x,y1:B.y+B.height+u,x2:B.x+B.width,y2:B.y+B.height+u},lt)},E),[{element:Pt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:B.x,y:B.y,width:B.width,height:B.height},St)},E),posType:"rect-center"}]},Z=(E,B)=>((0,R.$)(-1),(0,R.$)(c.WR.strokeWidth),(0,R.$)(c.WR.strokeDasharray),Pt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:B.x,y:B.y,width:B.width,height:B.height,class:"cursor-draw"},{fill:c.lq.fill})},E),[]),Ct=(E,B)=>{let u={fill:c.$u.fill,stroke:c.$u.stroke,"stroke-width":(0,R.$)(c.$u.strokeWidth),"stroke-dasharray":(0,R.$)(c.$u.strokeDasharray)};jQuery(E).empty(),B.forEach(lt=>{var St,At;let{size:Ht}=lt;if(!lt.idx)return;Pt("icdt-temp-index-rect-node-"+lt.id,"rect",{attribute:Object.assign({x:Ht.x-5,y:Ht.y-5,width:Ht.width+10,height:Ht.height+10},u)},E);let{element:Qt}=(0,p.$)(Math.ceil(1e9*Math.random()),{size:{x:Ht.x-76,y:Ht.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(St=lt.idx)&&void 0!==St?St:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(At=lt.time)&&void 0!==At?At:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},E);Qt.classList.add("node-input"),jQuery(Qt).on("change",'input[name="idx"]',Nt=>{var Bt;lt.idx=parseInt(null!==(Bt=Nt.target.value)&&void 0!==Bt?Bt:"0")}).on("change",'input[name="time"]',Nt=>{var Bt;lt.time=parseFloat(null!==(Bt=Nt.target.value)&&void 0!==Bt?Bt:"0")}).on("click",'button[name="remove"]',Nt=>{lt.idx=0,lt.time=null,Ct(E,B)})})},Tt=(E,B)=>{var u,lt,St,At,Ht,Qt;let{color:Nt,opacity:Bt,path:ie,url:Dt,base64:Lt}=null!==(u=null==B||null===(lt=B.svg)||void 0===lt?void 0:lt.background)&&void 0!==u?u:{},{x:w,y:d,width:U,height:it}=null!==(St=null==B||null===(At=B.svg)||void 0===At?void 0:At.viewBox)&&void 0!==St?St:{x:0,y:0,width:0,height:0};(0,Q.L)(void 0,{size:{x:0,y:(0,R.$)(-21),width:U,height:it},attribute:{fill:"#999",fontSize:(0,R.$)(14),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(Ht=null!==(Qt=null==B?void 0:B.name)&&void 0!==Qt?Qt:null==B?void 0:B.code)&&void 0!==Ht?Ht:void 0}}},E),(0,P.a)(void 0,{size:{x:w,y:d,width:U,height:it},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,R.$)(1),strokeDasharray:(0,R.$)(10),class:"hide-on-viewer"}},E),Nt&&(0,P.a)(void 0,{size:{x:w,y:d,width:U,height:it},attribute:{fill:Nt,fillOpacity:Bt}},E),ie&&(0,rt.B)(void 0,{size:{x:w,y:d,width:U,height:it},source:{type:"image",image:{path:ie,url:Dt,base64:Lt}}},E)},Gt=(E,B,u)=>{var lt;switch(jQuery(E).empty(),null===(lt=B.test)||void 0===lt?void 0:lt.type){case"truefalse":var St;if(null!==(St=B.test)&&void 0!==St&&St.showselection){var At,Ht,Qt;let yt=null==B||null===(At=B.test)||void 0===At||null===(At=At.answer)||void 0===At||null===(At=At.truefalse)||void 0===At?void 0:At.value;null===(Ht=B.svg)||void 0===Ht||Ht.nodes.filter(st=>{var pt;return"truefalse"==(null===(pt=st.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)&&st.id!=yt}).forEach(st=>{var pt;let{x:Ft,y:Xt,width:Vt,height:se}=null!==(pt=null==st?void 0:st.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,b.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Xt-.5,width:Vt+1,height:se+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},E)}),null!=B&&null!==(Qt=B.test)&&void 0!==Qt&&null!==(Qt=Qt.answer)&&void 0!==Qt&&Qt.truefalse&&yt&&(st=>{let pt=k.J.findNode(yt),{x:Ft,y:Xt,width:Vt,height:se}=null!==(st=null==pt?void 0:pt.size)&&void 0!==st?st:{x:0,y:0,width:0,height:0};(0,b.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-2,y:Xt-2,width:Vt+4,height:se+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},E)})()}break;case"singlechoice":var Nt;if(null!==(Nt=B.test)&&void 0!==Nt&&Nt.showselection){var Bt,ie,Dt;let yt=null==B||null===(Bt=B.test)||void 0===Bt||null===(Bt=Bt.answer)||void 0===Bt||null===(Bt=Bt.singlechoice)||void 0===Bt?void 0:Bt.value;null===(ie=B.svg)||void 0===ie||ie.nodes.filter(st=>{var pt;return"singlechoice"==(null===(pt=st.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)&&st.id!=yt}).forEach(st=>{var pt;let{x:Ft,y:Xt,width:Vt,height:se}=null!==(pt=null==st?void 0:st.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,b.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Xt-.5,width:Vt+1,height:se+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},E)}),null!=B&&null!==(Dt=B.test)&&void 0!==Dt&&null!==(Dt=Dt.answer)&&void 0!==Dt&&Dt.singlechoice&&yt&&(st=>{let pt=k.J.findNode(yt),{x:Ft,y:Xt,width:Vt,height:se}=null!==(st=null==pt?void 0:pt.size)&&void 0!==st?st:{x:0,y:0,width:0,height:0};(0,b.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-2,y:Xt-2,width:Vt+4,height:se+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},E)})()}break;case"multichoice":var Lt;if(null!==(Lt=B.test)&&void 0!==Lt&&Lt.showselection){var w,d,U,it;let yt=null!==(w=null==B||null===(d=B.test)||void 0===d||null===(d=d.answer)||void 0===d||null===(d=d.multichoice)||void 0===d?void 0:d.map(st=>st.value))&&void 0!==w?w:[];var q;null===(U=B.svg)||void 0===U||U.nodes.filter(st=>{var pt;return"multichoice"==(null===(pt=st.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)&&!yt.includes(st.id)}).forEach(st=>{var pt;let{x:Ft,y:Xt,width:Vt,height:se}=null!==(pt=null==st?void 0:st.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,P.a)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Xt-.5,width:Vt+1,height:se+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},E)}),null!=B&&null!==(it=B.test)&&void 0!==it&&null!==(it=it.answer)&&void 0!==it&&it.multichoice&&yt.length&&(null==B||null===(q=B.test)||void 0===q||null===(q=q.answer)||void 0===q||q.multichoice.forEach(st=>{var pt;let Et=k.J.findNode(st.value),{x:Xt,y:Vt,width:se,height:ne}=null!==(pt=null==Et?void 0:Et.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,P.a)(Math.ceil(1e9*Math.random()),{size:{x:Xt-2,y:Vt-2,width:se+4,height:ne+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},E)}))}break;case"fill":var j,_;null!=B&&null!==(j=B.test)&&void 0!==j&&null!==(j=j.answer)&&void 0!==j&&j.fill&&(null==B||null===(_=B.test)||void 0===_||null===(_=_.answer)||void 0===_||_.fill.forEach(yt=>{jQuery("#"+u.id).find(`input[type="text"][data-key="${yt.key}"]`).val(yt.value)}));break;case"matching":var J,nt,mt,xt;if(null!=B&&null!==(J=B.test)&&void 0!==J&&null!==(J=J.answer)&&void 0!==J&&J.matching)if("matching-empty"==(null===(nt=u.source)||void 0===nt||null===(nt=nt.test)||void 0===nt?void 0:nt.type))null==B||null===(xt=B.test)||void 0===xt||null===(xt=xt.answer)||void 0===xt||xt.matching.filter(yt=>{var st;return yt.key==(null===(st=u.source)||void 0===st||null===(st=st.test)||void 0===st||null===(st=st.matching)||void 0===st?void 0:st.key)}).forEach(yt=>{});else if("matching-content"==(null===(mt=u.source)||void 0===mt||null===(mt=mt.test)||void 0===mt?void 0:mt.type)){var Ot;null==B||null===(Ot=B.test)||void 0===Ot||null===(Ot=Ot.answer)||void 0===Ot||Ot.matching.filter(yt=>{var st;return yt.value==(null===(st=u.source)||void 0===st||null===(st=st.test)||void 0===st||null===(st=st.matching)||void 0===st?void 0:st.key)}).forEach(yt=>{})}}}},2241:(he,Mt,g)=>{g.d(Mt,{_:()=>ot});var T=g(8338);const ot=I=>{switch(null==I?void 0:I.type){case T.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+I.readfileuploadurl+I.path;case T.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+I.readfileuploadurl+I.path;case T.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+I.readfileuploadurl+I.path;case T.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+I.readfileuploadurl+I.path;case T.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+I.readfileuploadurl+I.path;case T.S.HTML:case T.S.IMAGE_ANIMATION:case T.S.PHET:return""+I.readfileuploadurl+I.path;case T.S.ZIP:case T.S.SCORM:var y;return"imsmanifest.xml"==(null===(y=I.path)||void 0===y||null===(y=y.split("/"))||void 0===y?void 0:y.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+I.readfileuploadurl+I.path:""+I.readfileuploadurl+I.path;case T.S.TRACK:case T.S.TEXT:return""+I.readfileuploadurl+I.path;case T.S.LINK:switch(I.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+I.url;case 1002:var M;return null!==(M=D(I.url))&&void 0!==M?M:"";case 1005:var F;return null!==(F=I.url)&&void 0!==F?F:"";default:var c;return null!==(c=I.url)&&void 0!==c?c:""}default:return""+I.readfileuploadurl+I.path}},D=I=>{let y=ct(I);return y?"https://www.youtube.com/embed/"+y+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},ct=I=>{let y=null==I?void 0:I.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return y&&y.length>=2?y[1]:null}},1131:(he,Mt,g)=>{function T(){}function O(t){return null==t?T:function(){return this.querySelector(t)}}function ct(){return[]}function I(t){return null==t?ct:function(){return this.querySelectorAll(t)}}function F(t){return function(){return this.matches(t)}}function c(t){return function(e){return e.matches(t)}}g.d(Mt,{qrM:()=>aa,n8j:()=>la});var N=Array.prototype.find;function P(){return this.firstElementChild}var b=Array.prototype.filter;function k(){return Array.from(this.children)}function tt(t){return new Array(t.length)}function V(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function at(t,e,a,s,f,S){for(var G,C=0,H=e.length,dt=S.length;C<dt;++C)(G=e[C])?(G.__data__=S[C],s[C]=G):a[C]=new V(t,S[C]);for(;C<H;++C)(G=e[C])&&(f[C]=G)}function Y(t,e,a,s,f,S,C){var G,H,te,dt=new Map,vt=e.length,Ut=S.length,Wt=new Array(vt);for(G=0;G<vt;++G)(H=e[G])&&(Wt[G]=te=C.call(H,H.__data__,G,e)+"",dt.has(te)?f[G]=H:dt.set(te,H));for(G=0;G<Ut;++G)te=C.call(t,S[G],G,S)+"",(H=dt.get(te))?(s[G]=H,H.__data__=S[G],dt.delete(te)):a[G]=new V(t,S[G]);for(G=0;G<vt;++G)(H=e[G])&&dt.get(Wt[G])===H&&(f[G]=H)}function Jt(t){return t.__data__}function Pt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ct(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}V.prototype={constructor:V,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var St="http://www.w3.org/1999/xhtml";const At={svg:"http://www.w3.org/2000/svg",xhtml:St,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ht(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),At.hasOwnProperty(e)?{space:At[e],local:t}:t}function Qt(t){return function(){this.removeAttribute(t)}}function Nt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Bt(t,e){return function(){this.setAttribute(t,e)}}function ie(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Dt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function Lt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function d(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function U(t){return function(){this.style.removeProperty(t)}}function it(t,e,a){return function(){this.style.setProperty(t,e,a)}}function q(t,e,a){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,a)}}function _(t,e){return t.style.getPropertyValue(e)||d(t).getComputedStyle(t,null).getPropertyValue(e)}function J(t){return function(){delete this[t]}}function nt(t,e){return function(){this[t]=e}}function mt(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function Ot(t){return t.trim().split(/^|\s+/)}function yt(t){return t.classList||new st(t)}function st(t){this._node=t,this._names=Ot(t.getAttribute("class")||"")}function pt(t,e){for(var a=yt(t),s=-1,f=e.length;++s<f;)a.add(e[s])}function Et(t,e){for(var a=yt(t),s=-1,f=e.length;++s<f;)a.remove(e[s])}function Ft(t){return function(){pt(this,t)}}function Xt(t){return function(){Et(this,t)}}function Vt(t,e){return function(){(e.apply(this,arguments)?pt:Et)(this,t)}}function ne(){this.textContent=""}function ae(t){return function(){this.textContent=t}}function pe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ke(){this.innerHTML=""}function me(t){return function(){this.innerHTML=t}}function Oe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function je(){this.nextSibling&&this.parentNode.appendChild(this)}function qe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function He(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===St&&e.documentElement.namespaceURI===St?e.createElement(t):e.createElementNS(a,t)}}function $e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xe(t){var e=Ht(t);return(e.local?$e:He)(e)}function ti(){return null}function bt(){var t=this.parentNode;t&&t.removeChild(this)}function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function m(t){return function(){var e=this.__on;if(e){for(var S,a=0,s=-1,f=e.length;a<f;++a)S=e[a],t.type&&S.type!==t.type||S.name!==t.name?e[++s]=S:this.removeEventListener(S.type,S.listener,S.options);++s?e.length=s:delete this.__on}}}function h(t,e,a){return function(){var f,s=this.__on,S=function l(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var C=0,G=s.length;C<G;++C)if((f=s[C]).type===t.type&&f.name===t.name)return this.removeEventListener(f.type,f.listener,f.options),this.addEventListener(f.type,f.listener=S,f.options=a),void(f.value=e);this.addEventListener(t.type,S,a),f={type:t.type,name:t.name,value:e,listener:S,options:a},s?s.push(f):this.__on=[f]}}function x(t,e,a){var s=d(t),f=s.CustomEvent;"function"==typeof f?f=new f(e,a):(f=s.document.createEvent("Event"),a?(f.initEvent(e,a.bubbles,a.cancelable),f.detail=a.detail):f.initEvent(e,!1,!1)),t.dispatchEvent(f)}function W(t,e){return function(){return x(this,t,e)}}function z(t,e){return function(){return x(this,t,e.apply(this,arguments))}}st.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var _t=[null];function It(t,e){this._groups=t,this._parents=e}function $t(){return new It([[document.documentElement]],_t)}It.prototype=$t.prototype={constructor:It,select:function ot(t){"function"!=typeof t&&(t=O(t));for(var e=this._groups,a=e.length,s=new Array(a),f=0;f<a;++f)for(var H,dt,S=e[f],C=S.length,G=s[f]=new Array(C),vt=0;vt<C;++vt)(H=S[vt])&&(dt=t.call(H,H.__data__,vt,S))&&("__data__"in H&&(dt.__data__=H.__data__),G[vt]=dt);return new It(s,this._parents)},selectAll:function M(t){t="function"==typeof t?function y(t){return function(){return function D(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):I(t);for(var e=this._groups,a=e.length,s=[],f=[],S=0;S<a;++S)for(var H,C=e[S],G=C.length,dt=0;dt<G;++dt)(H=C[dt])&&(s.push(t.call(H,H.__data__,dt,C)),f.push(H));return new It(s,f)},selectChild:function rt(t){return this.select(null==t?P:function R(t){return function(){return N.call(this.children,t)}}("function"==typeof t?t:c(t)))},selectChildren:function Q(t){return this.selectAll(null==t?k:function p(t){return function(){return b.call(this.children,t)}}("function"==typeof t?t:c(t)))},filter:function A(t){"function"!=typeof t&&(t=F(t));for(var e=this._groups,a=e.length,s=new Array(a),f=0;f<a;++f)for(var H,S=e[f],C=S.length,G=s[f]=[],dt=0;dt<C;++dt)(H=S[dt])&&t.call(H,H.__data__,dt,S)&&G.push(H);return new It(s,this._parents)},data:function qt(t,e){if(!arguments.length)return Array.from(this,Jt);var a=e?Y:at,s=this._parents,f=this._groups;"function"!=typeof t&&(t=function X(t){return function(){return t}}(t));for(var S=f.length,C=new Array(S),G=new Array(S),H=new Array(S),dt=0;dt<S;++dt){var vt=s[dt],Ut=f[dt],Wt=Ut.length,te=Pt(t.call(vt,vt&&vt.__data__,dt,s)),Ee=te.length,Ie=G[dt]=new Array(Ee),jt=C[dt]=new Array(Ee);a(vt,Ut,Ie,jt,H[dt]=new Array(Wt),te,e);for(var ce,ye,oe=0,ee=0;oe<Ee;++oe)if(ce=Ie[oe]){for(oe>=ee&&(ee=oe+1);!(ye=jt[ee])&&++ee<Ee;);ce._next=ye||null}}return(C=new It(C,s))._enter=G,C._exit=H,C},enter:function et(){return new It(this._enter||this._groups.map(tt),this._parents)},exit:function zt(){return new It(this._exit||this._groups.map(tt),this._parents)},join:function ht(t,e,a){var s=this.enter(),f=this,S=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(f=e(f))&&(f=f.selection()),null==a?S.remove():a(S),s&&f?s.merge(f).order():f},merge:function wt(t){for(var e=t.selection?t.selection():t,a=this._groups,s=e._groups,f=a.length,C=Math.min(f,s.length),G=new Array(f),H=0;H<C;++H)for(var te,dt=a[H],vt=s[H],Ut=dt.length,Wt=G[H]=new Array(Ut),Ee=0;Ee<Ut;++Ee)(te=dt[Ee]||vt[Ee])&&(Wt[Ee]=te);for(;H<f;++H)G[H]=a[H];return new It(G,this._parents)},selection:function we(){return this},order:function Kt(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var C,s=t[e],f=s.length-1,S=s[f];--f>=0;)(C=s[f])&&(S&&4^C.compareDocumentPosition(S)&&S.parentNode.insertBefore(C,S),S=C);return this},sort:function Z(t){function e(Ut,Wt){return Ut&&Wt?t(Ut.__data__,Wt.__data__):!Ut-!Wt}t||(t=Ct);for(var a=this._groups,s=a.length,f=new Array(s),S=0;S<s;++S){for(var dt,C=a[S],G=C.length,H=f[S]=new Array(G),vt=0;vt<G;++vt)(dt=C[vt])&&(H[vt]=dt);H.sort(e)}return new It(f,this._parents).order()},call:function Tt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function Gt(){return Array.from(this)},node:function E(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var s=t[e],f=0,S=s.length;f<S;++f){var C=s[f];if(C)return C}return null},size:function B(){let t=0;for(const e of this)++t;return t},empty:function u(){return!this.node()},each:function lt(t){for(var e=this._groups,a=0,s=e.length;a<s;++a)for(var G,f=e[a],S=0,C=f.length;S<C;++S)(G=f[S])&&t.call(G,G.__data__,S,f);return this},attr:function w(t,e){var a=Ht(t);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((null==e?a.local?Nt:Qt:"function"==typeof e?a.local?Lt:Dt:a.local?ie:Bt)(a,e))},style:function j(t,e,a){return arguments.length>1?this.each((null==e?U:"function"==typeof e?q:it)(t,e,null==a?"":a)):_(this.node(),t)},property:function xt(t,e){return arguments.length>1?this.each((null==e?J:"function"==typeof e?mt:nt)(t,e)):this.node()[t]},classed:function se(t,e){var a=Ot(t+"");if(arguments.length<2){for(var s=yt(this.node()),f=-1,S=a.length;++f<S;)if(!s.contains(a[f]))return!1;return!0}return this.each(("function"==typeof e?Vt:e?Ft:Xt)(a,e))},text:function Ae(t){return arguments.length?this.each(null==t?ne:("function"==typeof t?pe:ae)(t)):this.node().textContent},html:function Te(t){return arguments.length?this.each(null==t?ke:("function"==typeof t?Oe:me)(t)):this.node().innerHTML},raise:function be(){return this.each(je)},lower:function Ue(){return this.each(qe)},append:function Ye(t){var e="function"==typeof t?t:Xe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function hi(t,e){var a="function"==typeof t?t:Xe(t),s=null==e?ti:"function"==typeof e?e:O(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})},remove:function K(){return this.each(bt)},clone:function o(t){return this.select(t?r:i)},datum:function n(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function L(t,e,a){var f,C,s=function v(t){return t.trim().split(/^|\s+/).map(function(e){var a="",s=e.indexOf(".");return s>=0&&(a=e.slice(s+1),e=e.slice(0,s)),{type:e,name:a}})}(t+""),S=s.length;if(!(arguments.length<2)){for(G=e?h:m,f=0;f<S;++f)this.each(G(s[f],e,a));return this}var G=this.node().__on;if(G)for(var vt,H=0,dt=G.length;H<dt;++H)for(f=0,vt=G[H];f<S;++f)if((C=s[f]).type===vt.type&&C.name===vt.name)return vt.value},dispatch:function ft(t,e){return this.each(("function"==typeof e?z:W)(t,e))},[Symbol.iterator]:function*gt(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var C,s=t[e],f=0,S=s.length;f<S;++f)(C=s[f])&&(yield C)}};const ge=$t;var _e={value:()=>{}};function xe(){for(var s,t=0,e=arguments.length,a={};t<e;++t){if(!(s=arguments[t]+"")||s in a||/[\s.]/.test(s))throw new Error("illegal type: "+s);a[s]=[]}return new Ce(a)}function Ce(t){this._=t}function ar(t,e){for(var f,a=0,s=t.length;a<s;++a)if((f=t[a]).name===e)return f.value}function gn(t,e,a){for(var s=0,f=t.length;s<f;++s)if(t[s].name===e){t[s]=_e,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=a&&t.push({name:e,value:a}),t}Ce.prototype=xe.prototype={constructor:Ce,on:function(t,e){var f,a=this._,s=function lr(t,e){return t.trim().split(/^|\s+/).map(function(a){var s="",f=a.indexOf(".");if(f>=0&&(s=a.slice(f+1),a=a.slice(0,f)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}(t+"",a),S=-1,C=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++S<C;)if(f=(t=s[S]).type)a[f]=gn(a[f],t.name,e);else if(null==e)for(f in a)a[f]=gn(a[f],t.name,null);return this}for(;++S<C;)if((f=(t=s[S]).type)&&(f=ar(a[f],t.name)))return f},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new Ce(t)},call:function(t,e){if((f=arguments.length-2)>0)for(var f,S,a=new Array(f),s=0;s<f;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,f=(S=this._[t]).length;s<f;++s)S[s].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],f=0,S=s.length;f<S;++f)s[f].value.apply(e,a)}};const or=xe;var Ni,ki,pi=0,Oi=0,Si=0,yn=1e3,Di=0,ci=0,zi=0,Ti="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yi(){return ci||(pn(sr),ci=Ti.now()+zi)}function sr(){ci=0}function ji(){this._call=this._time=this._next=null}function mn(t,e,a){var s=new ji;return s.restart(t,e,a),s}function wn(){ci=(Di=Ti.now())+zi,pi=Oi=0;try{!function ur(){Yi(),++pi;for(var e,t=Ni;t;)(e=ci-t._time)>=0&&t._call.call(void 0,e),t=t._next;--pi}()}finally{pi=0,function hr(){for(var t,a,e=Ni,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);ki=t,qi(s)}(),ci=0}}function dr(){var t=Ti.now(),e=t-Di;e>yn&&(zi-=e,Di=t)}function qi(t){pi||(Oi&&(Oi=clearTimeout(Oi)),t-ci>24?(t<1/0&&(Oi=setTimeout(wn,t-Ti.now()-zi)),Si&&(Si=clearInterval(Si))):(Si||(Di=Ti.now(),Si=setInterval(dr,yn)),pi=1,pn(wn)))}function xn(t,e,a){var s=new ji;return s.restart(f=>{s.stop(),t(f+e)},e=null==e?0:+e,a),s}ji.prototype=mn.prototype={constructor:ji,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Yi():+a)+(null==e?0:+e),!this._next&&ki!==this&&(ki?ki._next=this:Ni=this,ki=this),this._call=t,this._time=a,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,Ki=3;function Fi(t,e,a,s,f,S){var C=t.__transition;if(C){if(a in C)return}else t.__transition={};!function vr(t,e,a){var f,s=t.__transition;function C(dt){var vt,Ut,Wt,te;if(1!==a.state)return H();for(vt in s)if((te=s[vt]).name===a.name){if(te.state===Ki)return xn(C);4===te.state?(te.state=6,te.timer.stop(),te.on.call("interrupt",t,t.__data__,te.index,te.group),delete s[vt]):+vt<e&&(te.state=6,te.timer.stop(),te.on.call("cancel",t,t.__data__,te.index,te.group),delete s[vt])}if(xn(function(){a.state===Ki&&(a.state=4,a.timer.restart(G,a.delay,a.time),G(dt))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=Ki,f=new Array(Wt=a.tween.length),vt=0,Ut=-1;vt<Wt;++vt)(te=a.tween[vt].value.call(t,t.__data__,a.index,a.group))&&(f[++Ut]=te);f.length=Ut+1}}function G(dt){for(var vt=dt<a.duration?a.ease.call(null,dt/a.duration):(a.timer.restart(H),a.state=5,1),Ut=-1,Wt=f.length;++Ut<Wt;)f[Ut].call(t,vt);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),H())}function H(){for(var dt in a.state=6,a.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=a,a.timer=mn(function S(dt){a.state=1,a.timer.restart(C,a.delay,a.time),a.delay<=dt&&C(dt-a.delay)},0,a.time)}(t,a,{name:e,index:s,group:f,on:cr,tween:fr,time:S.time,delay:S.delay,duration:S.duration,ease:S.ease,timer:null,state:bn})}function en(t,e){var a=ei(t,e);if(a.state>bn)throw new Error("too late; already scheduled");return a}function ni(t,e){var a=ei(t,e);if(a.state>Ki)throw new Error("too late; already running");return a}function ei(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function ui(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,s,f,S){var C,G,H;return(C=Math.sqrt(t*t+e*e))&&(t/=C,e/=C),(H=t*a+e*s)&&(a-=t*H,s-=e*H),(G=Math.sqrt(a*a+s*s))&&(a/=G,s/=G,H/=G),t*s<e*a&&(t=-t,e=-e,H=-H,C=-C),{translateX:f,translateY:S,rotate:Math.atan2(e,t)*On,skewX:Math.atan(H)*On,scaleX:C,scaleY:G}}function kn(t,e,a,s){function f(dt){return dt.length?dt.pop()+" ":""}return function(dt,vt){var Ut=[],Wt=[];return dt=t(dt),vt=t(vt),function S(dt,vt,Ut,Wt,te,Ee){if(dt!==Ut||vt!==Wt){var Ie=te.push("translate(",null,e,null,a);Ee.push({i:Ie-4,x:ui(dt,Ut)},{i:Ie-2,x:ui(vt,Wt)})}else(Ut||Wt)&&te.push("translate("+Ut+e+Wt+a)}(dt.translateX,dt.translateY,vt.translateX,vt.translateY,Ut,Wt),function C(dt,vt,Ut,Wt){dt!==vt?(dt-vt>180?vt+=360:vt-dt>180&&(dt+=360),Wt.push({i:Ut.push(f(Ut)+"rotate(",null,s)-2,x:ui(dt,vt)})):vt&&Ut.push(f(Ut)+"rotate("+vt+s)}(dt.rotate,vt.rotate,Ut,Wt),function G(dt,vt,Ut,Wt){dt!==vt?Wt.push({i:Ut.push(f(Ut)+"skewX(",null,s)-2,x:ui(dt,vt)}):vt&&Ut.push(f(Ut)+"skewX("+vt+s)}(dt.skewX,vt.skewX,Ut,Wt),function H(dt,vt,Ut,Wt,te,Ee){if(dt!==Ut||vt!==Wt){var Ie=te.push(f(te)+"scale(",null,",",null,")");Ee.push({i:Ie-4,x:ui(dt,Ut)},{i:Ie-2,x:ui(vt,Wt)})}else(1!==Ut||1!==Wt)&&te.push(f(te)+"scale("+Ut+","+Wt+")")}(dt.scaleX,dt.scaleY,vt.scaleX,vt.scaleY,Ut,Wt),dt=vt=null,function(te){for(var jt,Ee=-1,Ie=Wt.length;++Ee<Ie;)Ut[(jt=Wt[Ee]).i]=jt.x(te);return Ut.join("")}}}var wr=kn(function pr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xr=kn(function mr(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function br(t,e){var a,s;return function(){var f=ni(this,t),S=f.tween;if(S!==a)for(var C=0,G=(s=a=S).length;C<G;++C)if(s[C].name===e){(s=s.slice()).splice(C,1);break}f.tween=s}}function _r(t,e,a){var s,f;if("function"!=typeof a)throw new Error;return function(){var S=ni(this,t),C=S.tween;if(C!==s){f=(s=C).slice();for(var G={name:e,value:a},H=0,dt=f.length;H<dt;++H)if(f[H].name===e){f[H]=G;break}H===dt&&f.push(G)}S.tween=f}}function rn(t,e,a){var s=t._id;return t.each(function(){var f=ni(this,s);(f.value||(f.value={}))[e]=a.apply(this,arguments)}),function(f){return ei(f,s).value[e]}}function ln(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function Tn(t,e){var a=Object.create(t.prototype);for(var s in e)a[s]=e[s];return a}function Ci(){}var Wi=1/.7,mi="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),kr=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),Tr=new RegExp(`^rgba\\(${mi},${mi},${mi},${Ai}\\)$`),Cr=new RegExp(`^rgba\\(${ri},${ri},${ri},${Ai}\\)$`),Lr=new RegExp(`^hsl\\(${Ai},${ri},${ri}\\)$`),Ar=new RegExp(`^hsla\\(${Ai},${ri},${ri},${Ai}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ii(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?In(e):3===a?new Ge(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Ge(e[1],e[2],e[3],1):(e=kr.exec(t))?new Ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Lr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?In(Cn[t]):"transparent"===t?new Ge(NaN,NaN,NaN,0):null}function In(t){return new Ge(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,a,s){return s<=0&&(t=e=a=NaN),new Ge(t,e,a,s)}function Qi(t,e,a,s){return 1===arguments.length?function Mr(t){return t instanceof Ci||(t=Ii(t)),t?new Ge((t=t.rgb()).r,t.g,t.b,t.opacity):new Ge}(t):new Ge(t,e,a,null==s?1:s)}function Ge(t,e,a,s){this.r=+t,this.g=+e,this.b=+a,this.opacity=+s}function Pn(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}`}function Mn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${fi(this.r)}, ${fi(this.g)}, ${fi(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vi(t){return((t=fi(t))<16?"0":"")+t.toString(16)}function Rn(t,e,a,s){return s<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new ii(t,e,a,s)}function Nn(t){if(t instanceof ii)return new ii(t.h,t.s,t.l,t.opacity);if(t instanceof Ci||(t=Ii(t)),!t)return new ii;if(t instanceof ii)return t;var e=(t=t.rgb()).r/255,a=t.g/255,s=t.b/255,f=Math.min(e,a,s),S=Math.max(e,a,s),C=NaN,G=S-f,H=(S+f)/2;return G?(C=e===S?(a-s)/G+6*(a<s):a===S?(s-e)/G+2:(e-a)/G+4,G/=H<.5?S+f:2-S-f,C*=60):G=H>0&&H<1?0:C,new ii(C,G,H,t.opacity)}function ii(t,e,a,s){this.h=+t,this.s=+e,this.l=+a,this.opacity=+s}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function zn(t,e,a,s,f){var S=t*t,C=S*t;return((1-3*t+3*S-C)*e+(4-6*S+3*C)*a+(1+3*t+3*S-3*C)*s+C*f)/6}ln(Ci,Ii,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Ir(){return this.rgb().formatHex8()},formatHsl:function Pr(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),ln(Ge,Qi,Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ge(fi(this.r),fi(this.g),fi(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pn,formatHex:Pn,formatHex8:function Rr(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}${vi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Mn,toString:Mn})),ln(ii,function Nr(t,e,a,s){return 1===arguments.length?Nn(t):new ii(t,e,a,null==s?1:s)},Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new ii(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ii(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*e,f=2*a-s;return new Ge(an(t>=240?t-240:t+120,f,s),an(t,f,s),an(t<120?t+240:t-120,f,s),this.opacity)},clamp(){return new ii(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const jn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):jn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kr(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function jr(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(s){return Math.pow(t+s*e,a)}}(e,a,t):jn(isNaN(e)?a:e)}}(e);function s(f,S){var C=a((f=Qi(f)).r,(S=Qi(S)).r),G=a(f.g,S.g),H=a(f.b,S.b),dt=Bn(f.opacity,S.opacity);return function(vt){return f.r=C(vt),f.g=G(vt),f.b=H(vt),f.opacity=dt(vt),f+""}}return s.gamma=t,s}(1);function Un(t){return function(e){var C,G,a=e.length,s=new Array(a),f=new Array(a),S=new Array(a);for(C=0;C<a;++C)G=Qi(e[C]),s[C]=G.r||0,f[C]=G.g||0,S[C]=G.b||0;return s=t(s),f=t(f),S=t(S),G.opacity=1,function(H){return G.r=s(H),G.g=f(H),G.b=S(H),G+""}}}Un(function Dr(t){var e=t.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),f=t[s],S=t[s+1];return zn((a-s/e)*e,s>0?t[s-1]:2*f-S,f,S,s<e-1?t[s+2]:2*S-f)}}),Un(function zr(t){var e=t.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*e);return zn((a-s/e)*e,t[(s+e-1)%e],t[s%e],t[(s+1)%e],t[(s+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ur(t,e){var s,f,S,a=on.lastIndex=sn.lastIndex=0,C=-1,G=[],H=[];for(t+="",e+="";(s=on.exec(t))&&(f=sn.exec(e));)(S=f.index)>a&&(S=e.slice(a,S),G[C]?G[C]+=S:G[++C]=S),(s=s[0])===(f=f[0])?G[C]?G[C]+=f:G[++C]=f:(G[++C]=null,H.push({i:C,x:ui(s,f)})),a=sn.lastIndex;return a<e.length&&(S=e.slice(a),G[C]?G[C]+=S:G[++C]=S),G.length<2?H[0]?function Fr(t){return function(e){return t(e)+""}}(H[0].x):function Br(t){return function(){return t}}(e):(e=H.length,function(dt){for(var Ut,vt=0;vt<e;++vt)G[(Ut=H[vt]).i]=Ut.x(dt);return G.join("")})}function Wn(t,e){var a;return("number"==typeof e?ui:e instanceof Ii?Fn:(a=Ii(e))?(e=a,Fn):Ur)(t,e)}function Wr(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,a){var s,S,f=a+"";return function(){var C=this.getAttribute(t);return C===f?null:C===s?S:S=e(s=C,a)}}function Jr(t,e,a){var s,S,f=a+"";return function(){var C=this.getAttributeNS(t.space,t.local);return C===f?null:C===s?S:S=e(s=C,a)}}function Hr(t,e,a){var s,f,S;return function(){var C,H,G=a(this);return null==G?void this.removeAttribute(t):(C=this.getAttribute(t))===(H=G+"")?null:C===s&&H===f?S:(f=H,S=e(s=C,G))}}function Vr(t,e,a){var s,f,S;return function(){var C,H,G=a(this);return null==G?void this.removeAttributeNS(t.space,t.local):(C=this.getAttributeNS(t.space,t.local))===(H=G+"")?null:C===s&&H===f?S:(f=H,S=e(s=C,G))}}function qr(t,e){var a,s;function f(){var S=e.apply(this,arguments);return S!==s&&(a=(s=S)&&function Yr(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,S)),a}return f._value=e,f}function $r(t,e){var a,s;function f(){var S=e.apply(this,arguments);return S!==s&&(a=(s=S)&&function Xr(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,S)),a}return f._value=e,f}function el(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){en(this,t).delay=e}}function rl(t,e){return function(){ni(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){ni(this,t).duration=e}}var xl=ge.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var jl=0;function ai(t,e,a,s){this._groups=t,this._parents=e,this._name=a,this._id=s}function Qn(){return++jl}var oi=ge.prototype;ai.prototype=function Kl(t){return ge().transition(t)}.prototype={constructor:ai,select:function ml(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=O(t));for(var s=this._groups,f=s.length,S=new Array(f),C=0;C<f;++C)for(var vt,Ut,G=s[C],H=G.length,dt=S[C]=new Array(H),Wt=0;Wt<H;++Wt)(vt=G[Wt])&&(Ut=t.call(vt,vt.__data__,Wt,G))&&("__data__"in vt&&(Ut.__data__=vt.__data__),dt[Wt]=Ut,Fi(dt[Wt],e,a,Wt,dt,ei(vt,a)));return new ai(S,this._parents,e,a)},selectAll:function wl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=I(t));for(var s=this._groups,f=s.length,S=[],C=[],G=0;G<f;++G)for(var vt,H=s[G],dt=H.length,Ut=0;Ut<dt;++Ut)if(vt=H[Ut]){for(var te,Wt=t.call(vt,vt.__data__,Ut,H),Ee=ei(vt,a),Ie=0,jt=Wt.length;Ie<jt;++Ie)(te=Wt[Ie])&&Fi(te,e,a,Ie,Wt,Ee);S.push(Wt),C.push(vt)}return new ai(S,C,e,a)},selectChild:oi.selectChild,selectChildren:oi.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=F(t));for(var e=this._groups,a=e.length,s=new Array(a),f=0;f<a;++f)for(var H,S=e[f],C=S.length,G=s[f]=[],dt=0;dt<C;++dt)(H=S[dt])&&t.call(H,H.__data__,dt,S)&&G.push(H);return new ai(s,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,s=e.length,S=Math.min(s,a.length),C=new Array(s),G=0;G<S;++G)for(var Wt,H=e[G],dt=a[G],vt=H.length,Ut=C[G]=new Array(vt),te=0;te<vt;++te)(Wt=H[te]||dt[te])&&(Ut[te]=Wt);for(;G<s;++G)C[G]=e[G];return new ai(C,this._parents,this._name,this._id)},selection:function bl(){return new xl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,a=Qn(),s=this._groups,f=s.length,S=0;S<f;++S)for(var H,C=s[S],G=C.length,dt=0;dt<G;++dt)if(H=C[dt]){var vt=ei(H,e);Fi(H,t,a,dt,C,{time:vt.time+vt.delay+vt.duration,delay:0,duration:vt.duration,ease:vt.ease})}return new ai(s,this._parents,t,a)},call:oi.call,nodes:oi.nodes,node:oi.node,size:oi.size,empty:oi.empty,each:oi.each,on:function gl(t,e){var a=this._id;return arguments.length<2?ei(this.node(),a).on.on(t):this.each(function vl(t,e,a){var s,f,S=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?en:ni;return function(){var C=S(this,t),G=C.on;G!==s&&(f=(s=G).copy()).on(e,a),C.on=f}}(a,t,e))},attr:function Zr(t,e){var a=Ht(t),s="transform"===a?xr:Wn;return this.attrTween(t,"function"==typeof e?(a.local?Vr:Hr)(a,s,rn(this,"attr."+t,e)):null==e?(a.local?Gr:Wr)(a):(a.local?Jr:Qr)(a,s,e))},attrTween:function tl(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var s=Ht(t);return this.tween(a,(s.local?qr:$r)(s,e))},style:function kl(t,e,a){var s="transform"==(t+="")?wr:Wn;return null==e?this.styleTween(t,function _l(t,e){var a,s,f;return function(){var S=_(this,t),C=(this.style.removeProperty(t),_(this,t));return S===C?null:S===a&&C===s?f:f=e(a=S,s=C)}}(t,s)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,a){var s,f,S;return function(){var C=_(this,t),G=a(this),H=G+"";return null==G&&(this.style.removeProperty(t),H=G=_(this,t)),C===H?null:C===s&&H===f?S:(f=H,S=e(s=C,G))}}(t,s,rn(this,"style."+t,e))).each(function Sl(t,e){var a,s,f,G,S="style."+e,C="end."+S;return function(){var H=ni(this,t),dt=H.on,vt=null==H.value[S]?G||(G=Gn(e)):void 0;(dt!==a||f!==vt)&&(s=(a=dt).copy()).on(C,f=vt),H.on=s}}(this._id,t)):this.styleTween(t,function El(t,e,a){var s,S,f=a+"";return function(){var C=_(this,t);return C===f?null:C===s?S:S=e(s=C,a)}}(t,s,e),a).on("end.style."+t,null)},styleTween:function Ll(t,e,a){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,function Cl(t,e,a){var s,f;function S(){var C=e.apply(this,arguments);return C!==f&&(s=(f=C)&&function Tl(t,e,a){return function(s){this.style.setProperty(t,e.call(this,s),a)}}(t,C,a)),s}return S._value=e,S}(t,e,null==a?"":a))},text:function Pl(t){return this.tween("text","function"==typeof t?function Il(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,a;function s(){var f=t.apply(this,arguments);return f!==a&&(e=(a=f)&&function Ml(t){return function(e){this.textContent=t.call(this,e)}}(f)),e}return s._value=t,s}(t))},remove:function pl(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var a=this._id;if(t+="",arguments.length<2){for(var C,s=ei(this.node(),a).tween,f=0,S=s.length;f<S;++f)if((C=s[f]).name===t)return C.value;return null}return this.each((null==e?br:_r)(a,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):ei(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):ei(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){ni(this,t).ease=e}}(e,t)):ei(this.node(),e).ease},easeVarying:function dl(t){if("function"!=typeof t)throw new Error;return this.each(function ul(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;ni(this,t).ease=a}}(this._id,t))},end:function zl(){var t,e,a=this,s=a._id,f=a.size();return new Promise(function(S,C){var G={value:C},H={value:function(){0==--f&&S()}};a.each(function(){var dt=ni(this,s),vt=dt.on;vt!==t&&((e=(t=vt).copy())._.cancel.push(G),e._.interrupt.push(G),e._.end.push(H)),dt.on=e}),0===f&&S()})},[Symbol.iterator]:oi[Symbol.iterator]};var Fl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}ge.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var s,f,C,a=t.__transition,S=!0;if(a){for(C in e=null==e?null:e+"",a)(s=a[C]).name===e?(f=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(f?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete a[C]):S=!1;S&&delete t.__transition}}(this,t)})},ge.prototype.transition=function Wl(t){var e,a;t instanceof ai?(e=t._id,t=t._name):(e=Qn(),(a=Fl).time=Yi(),t=null==t?null:t+"");for(var s=this._groups,f=s.length,S=0;S<f;++S)for(var H,C=s[S],G=C.length,dt=0;dt<G;++dt)(H=C[dt])&&Fi(H,t,e,dt,C,a||Ul(H,e));return new ai(s,this._parents,t,e)};Math;function Pi(t){return{type:t}}function bi(t){return function(){return t}}function Yn(t){this._context=t}function ql(t){return new Yn(t)}["w","e"].map(Pi),["n","s"].map(Pi),["n","w","e","s","nw","ne","sw","se"].map(Pi),Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const fn=Math.PI,vn=2*fn,gi=1e-6,$l=vn-gi;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Xi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(s){this._+=s[0];for(let f=1,S=s.length;f<S;++f)this._+=Math.round(arguments[f]*a)/a+s[f]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,s,f){this._append`Q${+e},${+a},${this._x1=+s},${this._y1=+f}`}bezierCurveTo(e,a,s,f,S,C){this._append`C${+e},${+a},${+s},${+f},${this._x1=+S},${this._y1=+C}`}arcTo(e,a,s,f,S){if(e=+e,a=+a,s=+s,f=+f,(S=+S)<0)throw new Error(`negative radius: ${S}`);let C=this._x1,G=this._y1,H=s-e,dt=f-a,vt=C-e,Ut=G-a,Wt=vt*vt+Ut*Ut;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Wt>gi)if(Math.abs(Ut*H-dt*vt)>gi&&S){let te=s-C,Ee=f-G,Ie=H*H+dt*dt,jt=te*te+Ee*Ee,Rt=Math.sqrt(Ie),oe=Math.sqrt(Wt),ee=S*Math.tan((fn-Math.acos((Ie+Wt-jt)/(2*Rt*oe)))/2),ce=ee/oe,ye=ee/Rt;Math.abs(ce-1)>gi&&this._append`L${e+ce*vt},${a+ce*Ut}`,this._append`A${S},${S},0,0,${+(Ut*te>vt*Ee)},${this._x1=e+ye*H},${this._y1=a+ye*dt}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,s,f,S,C){if(e=+e,a=+a,C=!!C,(s=+s)<0)throw new Error(`negative radius: ${s}`);let G=s*Math.cos(f),H=s*Math.sin(f),dt=e+G,vt=a+H,Ut=1^C,Wt=C?f-S:S-f;null===this._x1?this._append`M${dt},${vt}`:(Math.abs(this._x1-dt)>gi||Math.abs(this._y1-vt)>gi)&&this._append`L${dt},${vt}`,s&&(Wt<0&&(Wt=Wt%vn+vn),Wt>$l?this._append`A${s},${s},0,1,${Ut},${e-G},${a-H}A${s},${s},0,1,${Ut},${this._x1=dt},${this._y1=vt}`:Wt>gi&&this._append`A${s},${s},0,${+(Wt>=fn)},${Ut},${this._x1=e+s*Math.cos(S)},${this._y1=a+s*Math.sin(S)}`)}rect(e,a,s,f){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${s=+s}v${+f}h${-s}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var a=bi(!0),s=null,f=ql,S=null,C=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);e=s}return t},()=>new Xi(e)}(G);function G(H){var dt,Ut,te,vt=(H=function Yl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(H)).length,Wt=!1;for(null==s&&(S=f(te=C())),dt=0;dt<=vt;++dt)!(dt<vt&&a(Ut=H[dt],dt,H))===Wt&&((Wt=!Wt)?S.lineStart():S.lineEnd()),Wt&&S.point(+t(Ut,dt,H),+e(Ut,dt,H));if(te)return S=null,te+""||null}return t="function"==typeof t?t:void 0===t?na:bi(t),e="function"==typeof e?e:void 0===e?ra:bi(e),G.x=function(H){return arguments.length?(t="function"==typeof H?H:bi(+H),G):t},G.y=function(H){return arguments.length?(e="function"==typeof H?H:bi(+H),G):e},G.defined=function(H){return arguments.length?(a="function"==typeof H?H:bi(!!H),G):a},G.curve=function(H){return arguments.length?(f=H,null!=s&&(S=f(s)),G):f},G.context=function(H){return arguments.length?(null==H?s=S=null:S=f(s=H),G):s},G}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function _i(t,e,a){this.k=t,this.x=e,this.y=a}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_i.prototype={constructor:_i,scale:function(t){return 1===t?this:new _i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new _i(1,0,0)}}]);