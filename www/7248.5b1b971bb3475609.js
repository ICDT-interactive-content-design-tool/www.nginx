"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7248],{7248:(W,N,s)=>{s.r(N),s.d(N,{ViewerPageModule:()=>Rn});var O=s(177),Y=s(9417),g=s(6637),I=s(3658),b=s(467),T=s(6611),$=s(5972),D=s(6081),E=s(4975),C=s(5619),A=s(2635),u=s(2837),d=s(2492),p=s(8833),R=s(4365),r=s(5414),w=s(7586),X=s.n(w),K=s(1312),Z=s(4552),Q=s(5312),q=s(8963),n=s(4438),U=s(345),nn=s(7704),tn=s(9780),en=s(31);const S=e=>({$implicit:e});function on(e,c){if(1&e){const a=n.RV6();n.j41(0,"div")(1,"ion-button",40),n.bIt("click",function(t){n.eBV(a);const i=n.XpG();return n.Njj(i.presentModalBoardShare(t))}),n.nrm(2,"ion-icon",41),n.j41(3,"ion-label"),n.EFF(4),n.nI1(5,"translate"),n.k0s()()()}2&e&&(n.R7$(4),n.JRh(n.bMT(5,1,"Share")))}function ln(e,c){if(1&e){const a=n.RV6();n.qex(0),n.j41(1,"div",42)(2,"ion-button",43),n.bIt("click",function(){n.eBV(a);const t=n.XpG();return n.Njj(t.pageBack())}),n.nrm(3,"ion-img",44),n.k0s(),n.j41(4,"span"),n.EFF(5),n.k0s(),n.j41(6,"ion-button",43),n.bIt("click",function(){n.eBV(a);const t=n.XpG();return n.Njj(t.pageNext())}),n.nrm(7,"ion-img",45),n.k0s()(),n.bVm()}if(2&e){const a=n.XpG();n.R7$(2),n.Y8G("disabled",a.slideIdx<1),n.R7$(3),n.Lme("",a.slideIdx+1,"/",a.slideTotal,""),n.R7$(),n.Y8G("disabled",a.slideIdx>=a.slideTotal-1)}}function an(e,c){if(1&e){const a=n.RV6();n.qex(0),n.j41(1,"div")(2,"ion-button",46),n.bIt("click",function(){n.eBV(a);const t=n.XpG();return n.Njj(t.renderSlide())}),n.nrm(3,"ion-img",47),n.k0s()(),n.bVm()}}function rn(e,c){if(1&e){const a=n.RV6();n.qex(0),n.j41(1,"ion-button",46),n.bIt("click",function(){n.eBV(a);const t=n.XpG(2);return n.Njj(t.offFullScreen())}),n.nrm(2,"ion-img",50),n.k0s(),n.bVm()}}function cn(e,c){if(1&e){const a=n.RV6();n.qex(0),n.j41(1,"ion-button",46),n.bIt("click",function(){n.eBV(a);const t=n.XpG(2);return n.Njj(t.onFullScreen())}),n.nrm(2,"ion-img",51),n.k0s(),n.bVm()}}function dn(e,c){if(1&e&&(n.qex(0),n.j41(1,"div"),n.qex(2,48),n.DNE(3,rn,3,0,"ng-container",49)(4,cn,3,0,"ng-container",49),n.bVm(),n.k0s(),n.bVm()),2&e){const a=n.XpG();n.R7$(2),n.Y8G("ngSwitch",a.isfullscreen),n.R7$(),n.Y8G("ngSwitchCase",!0),n.R7$(),n.Y8G("ngSwitchCase",!1)}}function sn(e,c){if(1&e){const a=n.RV6();n.qex(0),n.j41(1,"ion-chip",52),n.bIt("click",function(t){const i=n.eBV(a).$implicit,l=n.XpG();return n.Njj(l.switchBoard(t,i.board_id))}),n.nrm(2,"ion-icon",53),n.j41(3,"ion-label"),n.EFF(4),n.k0s()(),n.bVm()}if(2&e){const a=c.$implicit,o=n.XpG();n.R7$(),n.HbH((null==o.board?null:o.board.board_id)==a.board_id?"active":""),n.R7$(),n.Y8G("name",(null==o.board?null:o.board.board_id)==a.board_id?"ellipse":"ellipse-outline"),n.R7$(2),n.JRh(a.board_title)}}function mn(e,c){if(1&e){const a=n.RV6();n.j41(0,"ion-infinite-scroll",54),n.bIt("ionInfinite",function(t){n.eBV(a);const i=n.XpG();return n.Njj(i.onIonInfinite_BoardRelated(t))}),n.nrm(1,"ion-infinite-scroll-content"),n.k0s()}}function un(e,c){if(1&e){const a=n.RV6();n.qex(0),n.j41(1,"ion-chip",52),n.bIt("click",function(t){const i=n.eBV(a).$implicit,l=n.XpG();return n.Njj(l.switchBoard(t,i.board_id))}),n.nrm(2,"ion-icon",53),n.j41(3,"ion-label"),n.EFF(4),n.k0s()(),n.bVm()}if(2&e){const a=c.$implicit,o=n.XpG();n.R7$(),n.HbH((null==o.board?null:o.board.board_id)==a.board_id?"active":""),n.R7$(),n.Y8G("name",(null==o.board?null:o.board.board_id)==a.board_id?"ellipse":"ellipse-outline"),n.R7$(2),n.JRh(a.board_title)}}function gn(e,c){1&e&&(n.j41(0,"div",58),n.EFF(1),n.nI1(2,"translate"),n.k0s()),2&e&&(n.R7$(),n.JRh(n.bMT(2,1,"NoData")))}function _n(e,c){if(1&e&&(n.j41(0,"div",59),n.nrm(1,"div",60),n.k0s()),2&e){const a=n.XpG(2);n.R7$(),n.Y8G("innerHTML",null==a.board?null:a.board.board_content,n.npT)}}function pn(e,c){if(1&e&&(n.j41(0,"div",29)(1,"h5",55),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"div",56)(5,"div",9),n.nrm(6,"div",57),n.DNE(7,gn,3,3,"div",58),n.k0s(),n.DNE(8,_n,2,1,"div",59),n.k0s()()),2&e){const a=n.XpG();n.R7$(2),n.JRh(n.bMT(3,4,"Introduce")),n.R7$(4),n.Y8G("innerHTML",null==a.board?null:a.board.board_description,n.npT),n.R7$(),n.vxM(7,null!=a.board&&a.board.board_description?-1:7),n.R7$(),n.vxM(8,null!=a.board&&a.board.board_content?8:-1)}}function vn(e,c){if(1&e&&n.eu8(0,61),2&e){const a=c.$implicit;n.XpG();const o=n.sdS(66);n.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",n.eq3(2,S,a))}}function bn(e,c){if(1&e){const a=n.RV6();n.j41(0,"ion-item-options",69)(1,"ion-item-option",70),n.bIt("click",function(t){n.eBV(a);const i=n.XpG(2).$implicit,l=n.XpG();return n.Njj(l.editComment(t,i.comment_id))}),n.EFF(2),n.nI1(3,"translate"),n.k0s(),n.j41(4,"ion-item-option",71),n.bIt("click",function(t){n.eBV(a);const i=n.XpG(2).$implicit,l=n.XpG();return n.Njj(l.deleteComment(t,i.comment_id))}),n.EFF(5),n.nI1(6,"translate"),n.k0s()()}2&e&&(n.R7$(2),n.JRh(n.bMT(3,2,"Edit")),n.R7$(3),n.JRh(n.bMT(6,4,"Delete")))}function fn(e,c){if(1&e){const a=n.RV6();n.j41(0,"ion-item-sliding")(1,"ion-item")(2,"ion-thumbnail",63),n.nrm(3,"img",7),n.k0s(),n.j41(4,"ion-label")(5,"div",64),n.EFF(6),n.j41(7,"small"),n.EFF(8),n.k0s()(),n.j41(9,"div",65),n.EFF(10),n.k0s(),n.j41(11,"div",66)(12,"small",67),n.bIt("click",function(t){n.eBV(a);const i=n.XpG().$implicit,l=n.XpG();return n.Njj(l.replyComment(t,i.comment_id))}),n.EFF(13),n.nI1(14,"translate"),n.k0s()()()(),n.DNE(15,bn,7,6,"ion-item-options",68),n.k0s()}if(2&e){const a=n.XpG().$implicit,o=n.XpG();n.R7$(3),n.Y8G("src",a.account_avatar?o.readfileuploadurl+a.account_avatar:"assets/image/user-avatar-default.png",n.B4B),n.R7$(3),n.JRh(a.created_name),n.R7$(2),n.JRh(o.formatDatetime(a.createddate)),n.R7$(2),n.JRh(a.comment_content),n.R7$(3),n.JRh(n.bMT(14,6,"Reply")),n.R7$(2),n.Y8G("ngIf",(null==o.user?null:o.user.userid)==a.createdby)}}function hn(e,c){if(1&e){const a=n.RV6();n.j41(0,"ion-item",72)(1,"ion-input",73),n.nI1(2,"translate"),n.bIt("ionChange",function(t){n.eBV(a);const i=n.XpG(2);return n.Njj(i.changeComment2(t))})("keyup",function(t){n.eBV(a);const i=n.XpG(2);return n.Njj(i.keyupComment2(t))}),n.k0s(),n.j41(3,"ion-button",74),n.bIt("click",function(t){n.eBV(a);const i=n.XpG(2);return n.Njj(i.sendComment(t,i.comment2))}),n.nrm(4,"ion-icon",36),n.k0s()()}if(2&e){let a;const o=n.XpG(2);n.R7$(),n.FS9("placeholder",n.bMT(2,3,"EnterReply")),n.Y8G("autofocus",!0)("value",null!==(a=o.comment2.comment_content)&&void 0!==a?a:"")}}function Cn(e,c){if(1&e&&n.eu8(0,61),2&e){const a=c.$implicit;n.XpG(2);const o=n.sdS(66);n.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",n.eq3(2,S,a))}}function Pn(e,c){if(1&e&&(n.j41(0,"li"),n.DNE(1,fn,16,8,"ion-item-sliding",8)(2,hn,5,5,"ion-item",62),n.j41(3,"ul"),n.DNE(4,Cn,1,4,"ng-container",39),n.k0s()()),2&e){const a=c.$implicit,o=n.XpG();n.R7$(),n.Y8G("ngIf",o.comment2.comment_id!=a.comment_id),n.R7$(),n.Y8G("ngIf",o.comment2.comment_pid==a.comment_id),n.R7$(2),n.Y8G("ngForOf",o.filterComments(a.comment_id))}}const Mn=[{path:"",component:(()=>{var e;class c{constructor(o,t,i,l,m,f,B){this.titleService=o,this.metaService=t,this.router=i,this.activatedRoute=l,this.toastController=m,this.modalController=f,this.loadingController=B,this.appsettings={},this.b=0,this.boards=[],this.paging_board={page:1,limit:10,active:!0},this.filter_board={},this.comment={},this.comment2={},this.comments=[],this.paging={page:1,limit:10,active:!0},this.slides=[],this.slideIdx=0,this.slideTotal=0,this.svgRatio=56.25,this.settings={},this.APP_ROUTE=p._,this.readfileuploadurl="",this.isfullscreen=!1,this.pageBack=()=>{this.slideIdx>0&&(this.slideIdx--,this.renderSlide())},this.pageNext=()=>{this.slideIdx<this.slideTotal-1&&(this.slideIdx++,this.renderSlide())},this.onFullScreen=()=>{var _,v;(v=null!==(_=document.getElementById("sieunhangaoo"))&&void 0!==_?_:document.body).requestFullscreen?v.requestFullscreen():v.mozRequestFullScreen?v.mozRequestFullScreen():v.webkitRequestFullscreen?v.webkitRequestFullscreen():v.msRequestFullscreen&&v.msRequestFullscreen(),setTimeout(()=>{this.isfullscreen=(v=>!!(v.fullscreen||v.fullscreenElement||v.webkitFullscreenElement||v.mozFullScreenElement||v.msFullscreenElement))(document)},600)},this.offFullScreen=()=>{var _;(_=document).exitFullscreen?_.exitFullscreen():_.mozCancelFullScreen?_.mozCancelFullScreen():_.webkitExitFullscreen?_.webkitExitFullscreen():_.msExitFullscreen&&_.msExitFullscreen(),setTimeout(()=>{this.isfullscreen=(_=>!!(_.fullscreen||_.fullscreenElement||_.webkitFullscreenElement||_.mozFullScreenElement||_.msFullscreenElement))(document)},600)},this.slideIdx=parseInt(l.snapshot.queryParamMap.get("n")||"1")-1;let P=this.activatedRoute.snapshot.paramMap.get("id")||this.activatedRoute.snapshot.queryParamMap.get("b")||"";P?this.b=parseInt(P):window.location.replace("/")}ngOnInit(){var o=this;T.L.container="#mainContainer",T.L.svg="#mainSvg",(0,b.A)(function*(){var t;o.appsettings=yield(0,$.AC)(),T.L.config=yield(0,$.AC)(),o.user=yield(0,A.Nk)(),o.readfileuploadurl=null!==(t=o.appsettings.readfileuploadurl)&&void 0!==t?t:"",o.refreshData()})(),(0,q.j)()}ngAfterViewInit(){window.addEventListener("resize",()=>{console.log("preview window resize"),this.slide&&(0,C.I)(T.L.container,T.L.svg,this.slide)})}onIonRefresher(o){this.refreshData(()=>{o.target.complete()})}onIonInfinite(o){this.loadMore(()=>{o.target.complete()})}onIonInfinite_BoardRelated(o){this.loadMore_BoardRelated(()=>{o.target.complete()})}resetData(){this.boards.length=0,this.comments.length=0}refreshData(o){var t,i;this.paging.page=1,this.paging.active=!0,this.resetData(),this.loadData_Paging(o),(0,D.qU)({params:{userid:null===(t=this.user)||void 0===t?void 0:t.userid,board_id:this.b},callback:l=>{var m,f,B;null!=l&&l.board_id?(this.board=l,l&&(0,K.Kd)(this.titleService,this.metaService,{title:l.board_title,description:(0,Z.YW)(l.board_description),image:{url:`${this.appsettings.readfileuploadurl}${this.appsettings.boardpath}${l.board_id}/cover.svg`,type:"image/svg",width:l.size_width,height:l.size_height,alt:l.board_title},url:Q.c.url+p._.VIEWER_ID.replace(":id",null!==(f=null===(B=l.board_id)||void 0===B?void 0:B.toString())&&void 0!==f?f:"")}),(0,E.U5)({params:{userid:null===(m=this.user)||void 0===m?void 0:m.userid,board_id:this.b},callback:P=>{var _;let v;if(P&&!P.modules?v=(0,u.v)(P):"icdtV2"==(null==P?void 0:P.modules)&&(v=P),v)return C.J.data=v,C.J.changeSlide=(L,yn,J,z,k)=>{var h,V,F,j;this.slideIdx=J,this.slideTotal=z,this.slide=k;let x=(0,d.z)((null!==(h=null==k||null===(V=k.svg)||void 0===V?void 0:V.viewBox.height)&&void 0!==h?h:1)/(null!==(F=null==k||null===(j=k.svg)||void 0===j?void 0:j.viewBox.width)&&void 0!==F?F:1)*100,100);this.svgRatio!=x&&(this.svgRatio=x)},this.slideTotal=C.J.slideTotal,void this.renderSlide();(0,E.rH)({params:{userid:null===(_=this.user)||void 0===_?void 0:_.userid,board_id:this.b},callback:L=>{L&&(C.J.data=(0,u.v)(L),C.J.changeSlide=(yn,J,z,k,h)=>{var V,F,j,x;this.slideIdx=z,this.slideTotal=k,this.slide=h;let H=(0,d.z)((null!==(V=null==h||null===(F=h.svg)||void 0===F?void 0:F.viewBox.height)&&void 0!==V?V:1)/(null!==(j=null==h||null===(x=h.svg)||void 0===x?void 0:x.viewBox.width)&&void 0!==j?j:1)*100,100);this.svgRatio!=H&&(this.svgRatio=H)},this.slideTotal=C.J.slideTotal,this.renderSlide())}})}}),this.paging_board.page=1,this.paging_board.active=!0,this.filter_board={topic_id:null==l?void 0:l.topic_id,category_id:null==l?void 0:l.category_id},this.loadData_Paging_BoardRelated()):window.location.replace("/")}}),(0,E.BS)({params:{board_id:this.b,userid:null===(i=this.user)||void 0===i?void 0:i.userid},callback:l=>{this.settings=l||{buttons:{paging:!0}}}})}loadMore(o){this.paging.page+=1,this.loadData_Paging(o)}loadData_Paging(o){var t=this;return(0,b.A)(function*(){var i;!function M(e){e.params=e.params||{},(0,$.hm)({url:"api/comment/get",params:{getby:e.params.userid||null,v_tabletype:e.params.doctype||null,table_id:e.params.docid||null},success:c=>{c=c||{},"function"==typeof e.callback&&e.callback(c.data)},error:c=>{"function"==typeof e.callback&&e.callback(),console.error(e,c)},loading:e.loading,loadingController:e.loadingController})}({loading:l=>{t.paging.loading=l},params:{userid:null===(i=t.user)||void 0===i?void 0:i.userid,doctype:1105,docid:t.b,numchild:t.paging.limit,posstart:(t.paging.page-1)*t.paging.limit+1,numofrow:t.paging.limit,sortfield:234,sorttype:"desc"},callback:l=>{t.comments=t.comments.concat(null!=l?l:[]),(!(null!=l&&l.length)||(null==l?void 0:l.length)<t.paging.limit)&&(t.paging.active=!1),o&&o()}})})()}loadMore_BoardRelated(o){this.paging_board.page+=1,this.loadData_Paging_BoardRelated(o)}loadData_Paging_BoardRelated(o){var t=this;return(0,b.A)(function*(){var i;(0,D.dq)({loading:l=>{t.paging_board.loading=l},params:{userid:null===(i=t.user)||void 0===i?void 0:i.userid,topic_id:t.filter_board.topic_id,category_id:t.filter_board.category_id,sortfield:t.paging_board.sortfield,sorttype:t.paging_board.sorttype,page:t.paging_board.page,limit:t.paging_board.limit},callback:l=>{t.boards=t.boards.concat(null!=l?l:[]),(!(null!=l&&l.length)||(null==l?void 0:l.length)<t.paging_board.limit)&&(t.paging_board.active=!1),o&&o()}})})()}switchBoard(o,t){var i=this;return(0,b.A)(function*(){i.b=null!=t?t:0,i.router.navigate([],{relativeTo:i.activatedRoute,queryParams:{b:i.b},queryParamsHandling:"merge",replaceUrl:!0}),i.refreshData()})()}renderSlide(){C.J.runSlide(this.slideIdx)}presentModalBoardShare(o){var t=this;return(0,b.A)(function*(){var i;(yield t.modalController.create({component:R.q,componentProps:{b:null===(i=t.board)||void 0===i?void 0:i.board_id},mode:"md",cssClass:"ion-modal",backdropDismiss:!0,keyboardClose:!0})).present()})()}filterComments(o){return o?this.comments.filter(t=>t.comment_pid==o).sort((t,i)=>{var l,m;return(null!==(l=i.comment_id)&&void 0!==l?l:0)-(null!==(m=t.comment_id)&&void 0!==m?m:0)}):this.comments.filter(t=>!t.comment_pid).sort((t,i)=>{var l,m;return(null!==(l=i.comment_id)&&void 0!==l?l:0)-(null!==(m=t.comment_id)&&void 0!==m?m:0)})}formatDatetime(o,t){return X()().diff(X()(o),"days")<1?X()(o).fromNow():X()(o).format(null!=t?t:"HH:mm, DD/MM/YYYY")}keyupComment(o){var t=this;return(0,b.A)(function*(){13==o.keyCode&&t.sendComment(o,t.comment)})()}changeComment(o){var t=this;return(0,b.A)(function*(){var i;t.comment.comment_content=null!==(i=o.detail.value)&&void 0!==i?i:""})()}keyupComment2(o){var t=this;return(0,b.A)(function*(){13==o.keyCode&&t.sendComment(o,t.comment2)})()}changeComment2(o){var t=this;return(0,b.A)(function*(){var i;t.comment2.comment_content=null!==(i=o.detail.value)&&void 0!==i?i:""})()}replyComment(o,t){var i=this;return(0,b.A)(function*(){i.comment2={comment_pid:t}})()}editComment(o,t){var i=this;return(0,b.A)(function*(){var l;i.comment2=null!==(l=i.comments.find(m=>m.comment_id==t))&&void 0!==l?l:{}})()}sendComment(o,t){var i=this;return(0,b.A)(function*(){var l;t.comment_content&&function y(e){e.params=e.params||{},(0,$.Ll)({url:"api/comment/addupdate",params:{v_tabletype:e.params.doctype||null,table_id:e.params.docid||null,comment_id:e.params.comment_id||null,comment_pid:e.params.comment_pid||null,comment_content:e.params.comment_content||null,createdby:e.params.userid||null},success:c=>{"function"==typeof e.callback&&e.callback(c.data||null)},error:c=>{"function"==typeof e.callback&&e.callback(),console.error(e,c)},loading:e.loading,loadingController:e.loadingController})}({loadingController:i.loadingController,params:{userid:null===(l=i.user)||void 0===l?void 0:l.userid,doctype:1105,docid:i.b,comment_id:t.comment_id,comment_pid:t.comment_pid,comment_content:t.comment_content},callback:m=>{0==(null==m?void 0:m.returncode)?(t.comment_id?i.comments.filter(f=>f.comment_id!=t.comment_id).forEach(f=>t):(t.comment_id=null==m?void 0:m.id,i.comments.push(t)),i.comment={},i.comment2={}):(0,r.c)(i.toastController,{},m).then(f=>{f.present()})}})})()}deleteComment(o,t){var i=this;return(0,b.A)(function*(){var l;!function G(e){e.params=e.params||{},(0,$.sj)({url:"api/comment/delete",params:{comment_id:e.params.comment_id||null,createdby:e.params.userid||null},success:c=>{"function"==typeof e.callback&&e.callback(c.data||null)},error:c=>{"function"==typeof e.callback&&e.callback(),console.error(e,c)},loading:e.loading,loadingController:e.loadingController})}({loadingController:i.loadingController,params:{userid:null===(l=i.user)||void 0===l?void 0:l.userid,comment_id:t},callback:m=>{0==(null==m?void 0:m.returncode)?i.comments=i.comments.filter(f=>f.comment_id!=t&&f.comment_pid!=t):(0,r.c)(i.toastController,{},m).then(f=>{f.present()})}})})()}toggleLike(o){var t=this;return(0,b.A)(function*(){t.board&&(t.board.isliked=!t.board.isliked)})()}}return(e=c).\u0275fac=function(o){return new(o||e)(n.rXU(U.hE),n.rXU(U.W8),n.rXU(I.Ix),n.rXU(I.nX),n.rXU(g.K_),n.rXU(g.W3),n.rXU(g.Xi))},e.\u0275cmp=n.VBU({type:e,selectors:[["app-viewer"]],decls:67,vars:29,consts:[["templateCommentLI",""],[1,"bg-cover","pb-5"],[1,"container","pt-3","pt-xxl-5","pb-5"],[1,"row","align-items-stretch"],[1,"col-12","col-lg-8","info"],[1,"mt-0","mb-2","mb-xxl-3"],[1,"d-flex","align-items-center","justify-content-between","mt-0","mb-2","mb-xxl-4"],["onerror","errorAvatar(this)",3,"src"],[4,"ngIf"],[1,"col-12","col-lg-8","mb-3"],[1,"position-relative","w-0","h-0","content"],["id","sieunhangaoo"],[1,"position-absolute","top-0","left-0","right-0","bottom-0"],["id","mainContainer",1,"svg-box"],["id","mainSvg","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"viewer"],[1,"position-absolute","left-0","right-0","bottom-0"],[1,"group-action"],[1,"col-12","col-lg-4","mb-3","playlist"],[1,"d-flex","flex-column","w-100","h-100"],[1,"d-flex","w-100","my-3"],[1,"col","pl-0"],["mode","ios","expand","block",3,"href","disabled"],[1,"col-auto","px-0"],["mode","ios","color","light",3,"click"],[3,"src"],[1,"flex-grow-1","board-related-ion-content","d-none","d-lg-block"],[4,"ngFor","ngForOf"],[3,"ionInfinite",4,"ngIf"],[1,"flex-grow-1","board-related","d-block","d-lg-none"],[1,"container","introduce","mb-4",2,"margin-top","-3rem"],[1,"container","container-comment","pb-5","mb-5"],[1,"row","mb-4"],[1,"col-12","col-lg-8"],["lines","full","mode","ios"],[3,"ionChange","keyup","placeholder","value"],["slot","end","mode","ios","size","default","shape","clear",3,"click"],["name","paper-plane-outline"],[1,"col-12","col-lg-8","pl-0"],["lines","none"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["mode","ios","size","small","color","light",3,"click"],["slot","start","name","share-social-outline"],[1,"group-action-paging"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"click","disabled"],["src","../../../assets/icon-png/Back.png"],["src","../../../assets/icon-png/Next.png"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"click"],["src","../../../assets/images/viewer/RefreshButton_normal.png"],[3,"ngSwitch"],[4,"ngSwitchCase"],["src","../../../assets/images/viewer/ExitFullButton_active.png"],["src","../../../assets/images/viewer/FullButton_normal.png"],["mode","ios",3,"click"],[3,"name"],[3,"ionInfinite"],[1,"mb-4"],[1,"row"],[3,"innerHTML"],[1,"text-muted"],[1,"col-12","col-lg-4","mb-3"],[1,"alert","mb-0",3,"innerHTML"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["lines","full",4,"ngIf"],["slot","start"],[1,"comment-name"],[1,"comment-content"],[1,"comment-action"],[3,"click"],["side","end",4,"ngIf"],["side","end"],["color","secondary",3,"click"],["color","danger",3,"click"],["lines","full"],[3,"ionChange","keyup","placeholder","autofocus","value"],["slot","end","mode","ios","size","large","shape","clear",3,"click"]],template:function(o,t){if(1&o){const i=n.RV6();n.nrm(0,"app-header"),n.j41(1,"ion-content")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),n.EFF(7),n.k0s(),n.j41(8,"div",6)(9,"div")(10,"ion-chip")(11,"ion-avatar"),n.nrm(12,"img",7),n.k0s(),n.j41(13,"ion-label"),n.EFF(14),n.k0s()()(),n.DNE(15,on,6,3,"div",8),n.k0s()(),n.j41(16,"div",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13),n.qSk(),n.nrm(21,"svg",14),n.k0s()(),n.joV(),n.j41(22,"div",15)(23,"div",16),n.DNE(24,ln,8,4,"ng-container",8)(25,an,4,0,"ng-container",8)(26,dn,5,3,"ng-container",8),n.k0s()()()()(),n.j41(27,"div",17)(28,"div",18)(29,"div")(30,"div"),n.EFF(31),n.k0s(),n.j41(32,"div",19)(33,"div",20)(34,"ion-button",21)(35,"ion-label"),n.EFF(36),n.nI1(37,"translate"),n.k0s()()(),n.j41(38,"div",22)(39,"ion-button",23),n.bIt("click",function(m){return n.eBV(i),n.Njj(t.toggleLike(m))}),n.nrm(40,"ion-icon",24),n.k0s()()()(),n.j41(41,"div",25)(42,"ion-content"),n.DNE(43,sn,5,4,"ng-container",26)(44,mn,2,0,"ion-infinite-scroll",27),n.k0s()(),n.j41(45,"div",28),n.DNE(46,un,5,4,"ng-container",26),n.k0s()()()()()(),n.DNE(47,pn,9,6,"div",29),n.j41(48,"div",30)(49,"div",31)(50,"div",32)(51,"h5"),n.EFF(52),n.nI1(53,"translate"),n.k0s(),n.j41(54,"ion-item",33)(55,"ion-input",34),n.nI1(56,"translate"),n.bIt("ionChange",function(m){return n.eBV(i),n.Njj(t.changeComment(m))})("keyup",function(m){return n.eBV(i),n.Njj(t.keyupComment(m))}),n.k0s(),n.j41(57,"ion-button",35),n.bIt("click",function(m){return n.eBV(i),n.Njj(t.sendComment(m,t.comment))}),n.nrm(58,"ion-icon",36),n.k0s()()()(),n.j41(59,"div",31)(60,"div",37)(61,"ion-list",38)(62,"ul"),n.DNE(63,vn,1,4,"ng-container",39),n.k0s()()()()(),n.nrm(64,"app-footer"),n.k0s(),n.DNE(65,Pn,5,3,"ng-template",null,0,n.C5r)}if(2&o){let i,l;n.R7$(7),n.JRh(null==t.board?null:t.board.board_title),n.R7$(5),n.Y8G("src",null!=t.board&&t.board.created_avatar?t.readfileuploadurl+(null==t.board?null:t.board.created_avatar):"assets/image/user-avatar-default.png",n.B4B),n.R7$(2),n.JRh(null==t.board?null:t.board.created_name),n.R7$(),n.Y8G("ngIf",(null==t.user?null:t.user.userid)==(null==t.board?null:t.board.createdby)),n.R7$(2),n.BMQ("style","padding-bottom:"+t.svgRatio+"%",n.$dS),n.R7$(7),n.Y8G("ngIf",null==t.settings.buttons?null:t.settings.buttons.paging),n.R7$(),n.Y8G("ngIf",null==t.settings.buttons?null:t.settings.buttons.refresh),n.R7$(),n.Y8G("ngIf",null==t.settings.buttons?null:t.settings.buttons.fullscreen),n.R7$(5),n.JRh(null==(null!==(i=null!==(i=null!==(i=null==t.board?null:t.board.topic_titles)&&void 0!==i?i:null==t.board?null:t.board.topic_title)&&void 0!==i?i:null==t.board?null:t.board.category_titles)&&void 0!==i?i:null==t.board?null:t.board.category_title)||null==(i=(null!=i?i:null==t.board?null:t.board.category_title).split(";"))||null==(i=i.reverse())?null:i.join(" / ")),n.R7$(3),n.Y8G("href",t.APP_ROUTE.EDITOR+"?b="+(null==t.board?null:t.board.board_id))("disabled",!(null!=t.board&&t.board.chotausuabai)),n.R7$(2),n.JRh(n.bMT(37,23,"Editor")),n.R7$(4),n.Mz_("src","../../../assets/image/viewer/",null!=t.board&&t.board.isliked?"star-2.svg":"star.svg",""),n.R7$(3),n.Y8G("ngForOf",t.boards),n.R7$(),n.Y8G("ngIf",t.paging_board.active&&!t.paging_board.loading),n.R7$(2),n.Y8G("ngForOf",t.boards),n.R7$(),n.vxM(47,null!=t.board&&t.board.board_description||null!=t.board&&t.board.board_content?47:-1),n.R7$(5),n.Lme("",n.bMT(53,25,"Comment")," (",t.comments.length,")"),n.R7$(3),n.FS9("placeholder",n.bMT(56,27,"EnterComment")),n.Y8G("value",null!==(l=t.comment.comment_content)&&void 0!==l?l:""),n.R7$(8),n.Y8G("ngForOf",t.filterComments())}},dependencies:[O.Sq,O.bT,O.T3,O.ux,O.e1,g.mC,g.Jm,g.ZB,g.W9,g.iq,g.KW,g.Ax,g.Hp,g.$w,g.uz,g.LU,g.CE,g.A7,g.he,g.nf,g.Zx,g.Gw,nn.l,tn.n,en.D9],styles:[".bg-contain[_ngcontent-%COMP%]{background-image:url(bg.33cb60bd32718d53.svg);background-repeat:no-repeat;background-position:top center;background-size:contain}.bg-cover[_ngcontent-%COMP%]{background-image:url(bg.33cb60bd32718d53.svg);background-repeat:no-repeat;background-position:bottom center;background-size:cover}.info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:0;--background: transparent}.info[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}.content[_ngcontent-%COMP%]{border-radius:.75rem;overflow:hidden;box-shadow:4px 4px 12px #01010133}.nav-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;font-size:1.25rem}.nav-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{margin-left:3rem}.introduce[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:.75rem;background-color:#fff3b6;color:#000}.svg-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));display:flex;align-items:center;justify-content:center}.svg-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;margin:auto;background:#fff}.group-action[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:1rem;line-height:0;-webkit-user-select:none;user-select:none}.group-action[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap}.group-action[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-left:1rem}.group-action[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:0 1rem;vertical-align:middle;font-size:18px;color:#fab11d}.group-action[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{vertical-align:middle;width:34px;height:34px}.group-action[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:34px}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0;margin:1rem 0}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:empty{display:none}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;margin:0 0 .5rem}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:4rem}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 3rem;--border-radius: 50%;margin-top:0;margin-bottom:0;align-self:flex-start}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-name[_ngcontent-%COMP%]{line-height:1.5rem;font-weight:500}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-name[_ngcontent-%COMP%] > small[_ngcontent-%COMP%]{margin-left:.5rem;font-size:.75rem;color:var(--ion-color-medium);vertical-align:top}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{line-height:1.5rem;white-space:wrap;text-align:justify}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-action[_ngcontent-%COMP%]{line-height:1.5rem}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-action[_ngcontent-%COMP%] > small[_ngcontent-%COMP%]{line-height:1;vertical-align:middle;font-size:.75rem;color:var(--ion-color-primary);cursor:pointer}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0;margin:0;--border-radius: .5rem;--background: var(--ion-color-secondary)}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.container-comment[_ngcontent-%COMP%]   ion-item-option[_ngcontent-%COMP%]{text-transform:initial}.playlist[_ngcontent-%COMP%]   .board-related-ion-content[_ngcontent-%COMP%]{min-height:250px}.playlist[_ngcontent-%COMP%]   .board-related-ion-content[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--ion-background-color: transparent}.playlist[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .5rem;--padding-top: 0;--padding-bottom: 0;--padding-start: .75rem;--padding-end: .75rem;margin:0}.playlist[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([color]){--color: var(--ion-color-linear-contrast);--background: var(--ion-color-linear);--background-activated: var(--ion-color-linear-shade);--background-focused: var(--ion-color-linear-shade);--background-hover: var(--ion-color-linear-tint)}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.5rem;padding:.75rem 1.25rem;--background: transparent;--color: var(--ion-color-medium);-webkit-user-select:none;user-select:none}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.75rem;--color: var(--ion-color-medium-tint)}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:hover{--background: rgba(var(--ion-text-color-rgb), .1)}.playlist[_ngcontent-%COMP%]   ion-chip.active[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-secondary-rgb), .4);--color: var(--ion-text-color);font-weight:500}.playlist[_ngcontent-%COMP%]   ion-chip.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),c})()}];let kn=(()=>{var e;class c{}return(e=c).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.$C({type:e}),e.\u0275inj=n.G2t({imports:[I.iI.forChild(Mn),I.iI]}),c})();var On=s(3890);let Rn=(()=>{var e;class c{}return(e=c).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.$C({type:e}),e.\u0275inj=n.G2t({imports:[O.MD,Y.YN,g.bv,kn,On.x]}),c})()},1312:(W,N,s)=>{s.d(N,{Kd:()=>b,Rv:()=>D,Rw:()=>A,_Y:()=>E,gs:()=>C,iO:()=>$,oG:()=>T});var O=s(7586),Y=s.n(O),g=s(5312),I=s(4552);const b=(u,d,p)=>{var R,M,y,G,r;(r=g.c.site)&&(d.updateTag({property:"og:site_name",content:r}),d.updateTag({name:"twitter:site",content:r})),(r=>{if(!r)return;let w=document.querySelector('[rel="canonical"]');w?w.setAttribute("href",r):(w=document.createElement("link"),w.setAttribute("rel","canonical"),w.setAttribute("href",r),document.head.append(w)),d.updateTag({property:"og:url",content:r})})(null!==(R=p.url)&&void 0!==R?R:g.c.url),(r=>{r&&(d.updateTag({name:"twitter:creator",content:null==r?void 0:r.email}),d.updateTag({name:"twitter:label1",content:"Created by"}),d.updateTag({name:"twitter:data1",content:null==r?void 0:r.name}),d.updateTag({name:"twitter:label2",content:"Created by Email"}),d.updateTag({name:"twitter:data2",content:null==r?void 0:r.email}))})(g.c.author),(r=>{r&&(d.updateTag({property:"og:updated_time",content:r}),d.updateTag({property:"article:modified_time",content:r}),d.updateTag({property:"article:published_time",content:"2024-01-01T00:00:00+07:00"}))})(g.c.updated),(r=>{r&&(u.setTitle(r),d.updateTag({property:"og:title",content:r}),d.updateTag({name:"twitter:title",content:r}))})(null!==(M=p.title)&&void 0!==M?M:g.c.title),(r=>{r&&(d.updateTag({name:"description",content:r}),d.updateTag({property:"og:description",content:r}),d.updateTag({name:"twitter:description",content:r}))})(null!==(y=p.description)&&void 0!==y?y:g.c.description),(r=>{r&&(d.updateTag({property:"og:image",content:null==r?void 0:r.url}),d.updateTag({property:"og:image:secure_url",content:null==r?void 0:r.url}),d.updateTag({property:"og:image:width",content:null==r?void 0:r.width}),d.updateTag({property:"og:image:height",content:null==r?void 0:r.height}),d.updateTag({property:"og:image:alt",content:null==r?void 0:r.alt}),d.updateTag({property:"og:image:type",content:null==r?void 0:r.type}),d.updateTag({name:"twitter:card",content:"summary_large_image"}),d.updateTag({name:"twitter:image",content:null==r?void 0:r.url}))})(null!==(G=p.image)&&void 0!==G?G:g.c.image)},T=(u,d)=>{var p=document.createElement("input");p.type="file",p.accept=u.accept,p.multiple=!!u.multiple,p.style.display="none",p.style.visibility="hidden",p.addEventListener("change",R=>{var M;R.preventDefault();let y=(null===(M=R.target)||void 0===M?void 0:M.files)||[];y.length>0&&d(y),document.body.removeChild(p)}),document.body.appendChild(p),p.click()},$=u=>!u||u<=1?`${null!=u?u:0} byte`:u>=1073741824?`${(u/1073741824).toFixed(2)} GB`:u>=1048576?`${(u/1048576).toFixed(2)} MB`:u>=1024?`${(u/1024).toFixed(2)} KB`:`${u} bytes`,D=(u,d)=>Y()(u).format(null!=d?d:"HH:mm, DD/MM/YYYY"),E=u=>(0,I.XT)(u),C=u=>(null!=u?u:0).toLocaleString("vi"),A=(u,d)=>{var p;return"number"!=typeof u?0:(d=null!==(p=d)&&void 0!==p?p:100,Math.round((u+Number.EPSILON)*d)/d)}}}]);