"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6611],{8779:(ce,Kt,v)=>{v.d(Kt,{$u:()=>O,IB:()=>ft,T2:()=>f,WR:()=>I,bf:()=>z,eD:()=>rt,l6:()=>C,lq:()=>G,pZ:()=>S,u$:()=>_});const S={fill:"transparent",stroke:"#129bff",strokeWidth:1},_={stroke:"#0D99FF",strokeWidth:1,strokeLinecap:"square",strokeDasharrays:[2,5]},rt={fill:"#FFFFFF",stroke:"#0D99FF",strokeWidth:1,width:7,height:7},z={fill:"transparent",stroke:"transparent",strokeWidth:1},ft={fill:"none",stroke:"#2299F8",strokeWidth:1},C={fill:"#0D99FF",rx:4},f={fill:"#fff",alignmentBaseline:"central",textAnchor:"middle",fontSize:14},I={stroke:"#129bff",strokeWidth:1,strokeLinecap:"square",strokeDasharray:8},G={fill:"transparent"},O={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(ce,Kt,v)=>{v.d(Kt,{$N:()=>C,An:()=>f,CS:()=>_,Kf:()=>it,Lp:()=>G,j9:()=>I,lP:()=>z,ml:()=>Q,n9:()=>O,nf:()=>ft});var S=v(2492);const _=h=>{var tt;return null===(tt=h.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===tt?void 0:tt.map(M=>{let F={type:M.substring(0,1)},J=(L=M.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?L.split(/\s/).map(j=>(0,S.z)(parseFloat(j),1e6)):[];var L;return J.length&&(F.points=J),F})},z=h=>{let tt=[],M=[],F=[],J=[];return h.forEach(L=>{switch(["M","L","C","S","Q","T"].includes(L.type)&&L.points&&L.points.forEach((st,kt)=>{kt%2==0?tt.push(st):M.push(st)}),L.type){case"A":var j;7==(null===(j=L.points)||void 0===j?void 0:j.length)&&(F.push(L.points[5]),J.push(L.points[6]));break;case"H":var Ot;null!==(Ot=L.points)&&void 0!==Ot&&Ot.length&&(tt.push(L.points[0]),F.push(L.points[0]));break;case"V":var q;null!==(q=L.points)&&void 0!==q&&q.length&&(M.push(L.points[0]),J.push(L.points[0]));break;case"a":var D;if(7==(null===(D=L.points)||void 0===D?void 0:D.length)){let st=tt[tt.length-1];tt.push(st+L.points[5]),F.push(st+L.points[5]);let kt=M[M.length-1];M.push(kt+L.points[6]),J.push(kt+L.points[6])}break;case"h":var Dt;if(null!==(Dt=L.points)&&void 0!==Dt&&Dt.length){let st=tt[tt.length-1];tt.push(st+L.points[0]),F.push(st+L.points[0])}break;case"v":var It;if(null!==(It=L.points)&&void 0!==It&&It.length){let st=M[M.length-1];M.push(st+L.points[0]),J.push(st+L.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var St;null===(St=L.points)||void 0===St||St.forEach((st,kt)=>{kt%2==0?F.push(st):J.push(st)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Pt;null===(Pt=L.points)||void 0===Pt||Pt.forEach((st,kt)=>{if(kt%2==0){let zt=tt[tt.length-1];tt.push(zt+st),F.push(zt+st)}else{let zt=M[M.length-1];M.push(zt+st),J.push(zt+st)}})}}),{minX:Math.min.apply(null,F),minY:Math.min.apply(null,J),maxX:Math.max.apply(null,F),maxY:Math.max.apply(null,J)}},ft=(h,tt)=>tt.map(M=>{let F=[];switch(M.type){case"a":var J;7==(null===(J=M.points)||void 0===J?void 0:J.length)&&F.push([(0,S.z)(M.points[0]/h.width,1e6),(0,S.z)(M.points[1]/h.height,1e6),M.points[2],M.points[3],M.points[4],(0,S.z)(M.points[5]/h.width,1e6),(0,S.z)(M.points[6]/h.height,1e6)]);break;case"A":var L;7==(null===(L=M.points)||void 0===L?void 0:L.length)&&F.push([(0,S.z)(M.points[0]/h.width,1e6),(0,S.z)(M.points[1]/h.height,1e6),M.points[2],M.points[3],M.points[4],(0,S.z)((M.points[5]-h.x)/h.width,1e6),(0,S.z)((M.points[6]-h.y)/h.height,1e6)]);break;case"h":var j;null!==(j=M.points)&&void 0!==j&&j.length&&F.push([(0,S.z)(M.points[0]/h.width,1e6)]);break;case"H":var Ot;null!==(Ot=M.points)&&void 0!==Ot&&Ot.length&&F.push([(0,S.z)((M.points[0]-h.x)/h.width,1e6)]);break;case"v":var q;null!==(q=M.points)&&void 0!==q&&q.length&&F.push([(0,S.z)(M.points[0]/h.height,1e6)]);break;case"V":var D;null!==(D=M.points)&&void 0!==D&&D.length&&F.push([(0,S.z)((M.points[0]-h.y)/h.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var Dt;if(null!==(Dt=M.points)&&void 0!==Dt&&Dt.length)for(let St=0,Pt=M.points.length-1;St<Pt;St+=2)F.push([(0,S.z)((M.points[St]-h.x)/h.width,1e6),(0,S.z)((M.points[St+1]-h.y)/h.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var It;if(null!==(It=M.points)&&void 0!==It&&It.length)for(let St=0,Pt=M.points.length-1;St<Pt;St+=2)F.push([(0,S.z)(M.points[St]/h.width,1e6),(0,S.z)(M.points[St+1]/h.height,1e6)])}return F.length?{type:M.type,ratios:F}:{type:M.type}}),C=(h,tt)=>tt.map(M=>{switch(M.type){case"a":var F,J;return`${M.type}${null!==(F=null===(J=M.ratios)||void 0===J||null===(J=J.map(Rt=>{var gt,Y,te,E,k,d,K;return[(0,S.z)(h.width*(null!==(gt=Rt[0])&&void 0!==gt?gt:0),1e6),(0,S.z)(h.height*(null!==(Y=Rt[1])&&void 0!==Y?Y:0),1e6),null!==(te=Rt[2])&&void 0!==te?te:0,null!==(E=Rt[3])&&void 0!==E?E:0,null!==(k=Rt[4])&&void 0!==k?k:0,(0,S.z)(h.width*(null!==(d=Rt[5])&&void 0!==d?d:0),1e6),(0,S.z)(h.height*(null!==(K=Rt[6])&&void 0!==K?K:0),1e6)]}))||void 0===J||null===(J=J.map(Rt=>Rt.join(" ")))||void 0===J?void 0:J.join(" "))&&void 0!==F?F:""}`;case"A":var L,j;return`${M.type}${null!==(L=null===(j=M.ratios)||void 0===j||null===(j=j.map(Rt=>{var gt,Y,te,E,k,d,K;return[(0,S.z)(h.width*(null!==(gt=Rt[0])&&void 0!==gt?gt:0),1e6),(0,S.z)(h.height*(null!==(Y=Rt[1])&&void 0!==Y?Y:0),1e6),null!==(te=Rt[2])&&void 0!==te?te:0,null!==(E=Rt[3])&&void 0!==E?E:0,null!==(k=Rt[4])&&void 0!==k?k:0,(0,S.z)(h.x+h.width*(null!==(d=Rt[5])&&void 0!==d?d:0),1e6),(0,S.z)(h.y+h.height*(null!==(K=Rt[6])&&void 0!==K?K:0),1e6)]}))||void 0===j||null===(j=j.map(Rt=>Rt.join(" ")))||void 0===j?void 0:j.join(" "))&&void 0!==L?L:""}`;case"h":var Ot,q;return`${M.type}${null!==(Ot=null===(q=M.ratios)||void 0===q||null===(q=q.map(Rt=>{var gt;return(0,S.z)(h.width*(null!==(gt=Rt[0])&&void 0!==gt?gt:0),1e6)}))||void 0===q?void 0:q.join(" "))&&void 0!==Ot?Ot:""}`;case"H":var D,Dt;return`${M.type}${null!==(D=null===(Dt=M.ratios)||void 0===Dt||null===(Dt=Dt.map(Rt=>{var gt;return(0,S.z)(h.x+h.width*(null!==(gt=Rt[0])&&void 0!==gt?gt:0),1e6)}))||void 0===Dt?void 0:Dt.join(" "))&&void 0!==D?D:""}`;case"v":var It,St;return`${M.type}${null!==(It=null===(St=M.ratios)||void 0===St||null===(St=St.map(Rt=>{var gt;return(0,S.z)(h.height*(null!==(gt=Rt[0])&&void 0!==gt?gt:0),1e6)}))||void 0===St?void 0:St.join(" "))&&void 0!==It?It:""}`;case"V":var Pt,st;return`${M.type}${null!==(Pt=null===(st=M.ratios)||void 0===st||null===(st=st.map(Rt=>{var gt;return(0,S.z)(h.y+h.height*(null!==(gt=Rt[0])&&void 0!==gt?gt:0),1e6)}))||void 0===st?void 0:st.join(" "))&&void 0!==Pt?Pt:""}`;case"z":case"Z":return M.type;case"M":case"L":case"C":case"S":case"Q":case"T":var kt,zt;return`${M.type}${null!==(kt=null===(zt=M.ratios)||void 0===zt||null===(zt=zt.map(Rt=>{var gt,Y;return[(0,S.z)(h.x+h.width*(null!==(gt=Rt[0])&&void 0!==gt?gt:0),1e6),(0,S.z)(h.y+h.height*(null!==(Y=Rt[1])&&void 0!==Y?Y:0),1e6)]}))||void 0===zt||null===(zt=zt.map(Rt=>Rt.join(" ")))||void 0===zt?void 0:zt.join(" "))&&void 0!==kt?kt:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var et,qt;return`${M.type}${null!==(et=null===(qt=M.ratios)||void 0===qt||null===(qt=qt.map(Rt=>{var gt,Y;return[(0,S.z)(h.width*(null!==(gt=Rt[0])&&void 0!==gt?gt:0),1e6),(0,S.z)(h.height*(null!==(Y=Rt[1])&&void 0!==Y?Y:0),1e6)]}))||void 0===qt||null===(qt=qt.map(Rt=>Rt.join(" ")))||void 0===qt?void 0:qt.join(" "))&&void 0!==et?et:""}`;default:return""}}).join(""),f=h=>{return(tt=h.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?tt.split(/\s/).map(M=>parseFloat(M)):[];var tt},I=h=>{let tt=[],M=[];return h.forEach((F,J)=>{J%2==0?tt.push(F):M.push(F)}),{minX:Math.min.apply(null,tt),minY:Math.min.apply(null,M),maxX:Math.max.apply(null,tt),maxY:Math.max.apply(null,M)}},G=(h,tt)=>{let M=[];for(let F=0,J=tt.length-1;F<J;F+=2)M.push([(tt[F]-h.x)/h.width,(tt[F+1]-h.y)/h.height]);return M},O=(h,tt)=>tt.map(M=>[(0,S.z)(h.x+h.width*M[0],1e6),(0,S.z)(h.y+h.height*M[1],1e6)]).map(M=>M.join(" ")).join(" "),Q=(h,tt)=>{let M=x(tt);if(M){let F=new window.Snap.Matrix(M.a,M.b,M.c,M.d,M.e,M.f);if(F){let{dx:J,dy:L,rotate:j,scalex:Ot,scaley:q}=F.split();return{x:h.x+J,y:h.y+L,dx:J,dy:L,rotate:j,scalex:Ot,scaley:q}}return{x:y(h.x,h.y,M),y:at(h.x,h.y,M)}}return h},x=h=>{let tt=h.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(M=>(0,S.z)(parseFloat(M),1e6));if(6==tt.length)return{a:tt[0],b:tt[1],c:tt[2],d:tt[3],e:tt[4],f:tt[5]}},it=(h,tt)=>{let M=x(tt);return M?window.Snap.path.map(h,new window.Snap.Matrix(M.a,M.b,M.c,M.d,M.e,M.f)).toString():h},y=function(h,tt,M){return(0,S.z)(h*M.a+tt*M.c+M.e,10)},at=function(h,tt,M){return(0,S.z)(h*M.b+tt*M.d+M.f,10)}},8047:(ce,Kt,v)=>{v.d(Kt,{d:()=>S});const S=_=>{let rt=[];return[/font-family:([a-zA-Z-_' ]+)/g,/"fontFamily":"([a-zA-Z-_' ]+)"/g].forEach(z=>{var ft,C;rt=[...rt,...null!==(ft=null===(C=_.replace(/&quot;/g,"'").match(z))||void 0===C?void 0:C.filter((f,I,G)=>G.indexOf(f)==I).map(f=>f.replace(z,"$1").replace(/[^a-zA-Z-_ ]/g,"").trim()).filter((f,I,G)=>f&&G.indexOf(f)==I))&&void 0!==ft?ft:[]]}),rt.filter((z,ft,C)=>C.indexOf(z)==ft)}},2837:(ce,Kt,v)=>{v.d(Kt,{v:()=>at,U:()=>it});var S=v(6611),_=v(1999),rt=v(2492),z=/^#[a-fA-F0-9]+$/i,ft=/^rgb\((\d+),(\d+),(\d+)\)$/i,C=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const f=h=>{let tt=null,M=null;if(h)if("transparent"==h)tt="#000000",M=0;else if(h.match(z))tt=h;else{let F=(h=h.replace(/\s+/g,"")).match(C);if(F)tt="#"+(256|F[1]).toString(16).slice(1)+(256|F[2]).toString(16).slice(1)+(256|F[3]).toString(16).slice(1),M=(0,rt.z)(parseFloat(F[4]),100);else{let J=h.match(ft);J&&(tt="#"+(256|J[1]).toString(16).slice(1)+(256|J[2]).toString(16).slice(1)+(256|J[3]).toString(16).slice(1))}}return{hex:tt,alpha:M}};var I=v(4896),G=v(8338);const it=h=>y(null==h?void 0:h.url,null==h?void 0:h.path,null==h?void 0:h.src,null==h?void 0:h.name);var y=(h,tt,M,F)=>{var J,L;let j,Ot,q,D;var Dt,It;return h&&(j=h.replace(/\\/g,"/")),tt&&(Ot=tt.replace(/\\/g,"/")),M&&(q=M.replace(/\\/g,"/")),Ot&&!j&&(j=(null===(Dt=S.L.config)||void 0===Dt?void 0:Dt.readfileuploadurl)+Ot),!q||Ot||j||(Ot=q.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),j=(null===(It=S.L.config)||void 0===It?void 0:It.readfileuploadurl)+Ot),D=F||(null!==(J=j)&&void 0!==J?J:"").split("/").pop()||(null!==(L=Ot)&&void 0!==L?L:"").split("/").pop()||"",{url:j,path:Ot,name:D}};const at=h=>{let tt={x:0,y:0,width:h.screen.w,height:h.screen.h},M=[];return h.data.forEach((F,J)=>{var L,j;let Ot={id:"number"==typeof F.id?F.id:S.L.data.newSlideId,code:null===(L=F.id)||void 0===L?void 0:L.toString(),name:"string"==typeof F.id?F.id:`Trang ${J+1}`,svg:{viewBox:tt,nodes:[]},test:(q=F.test2,q?(q.audiotrue&&(q.audiotrue=it({path:q.audiotrue.path})),q.audiofalse&&(q.audiofalse=it({path:q.audiofalse.path})),q.effecttrue&&(q.effecttrue=it({path:q.effecttrue.path})),q.effectfalse&&(q.effectfalse=it({path:q.effectfalse.path})),q.icontrue&&(q.icontrue=it({path:q.icontrue.path})),q.iconfalse&&(q.iconfalse=it({path:q.iconfalse.path})),q):{})};var q;F.background&&Ot.svg&&(Ot.svg.background=function(h){return h&&(null!==h.match(/#([a-zA-Z0-9]+)/)||null!==h.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==h.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(F.background)?{color:F.background}:function(h){return h&&null!==h.match(/data:[^;]+;base64,/)}(F.background)?{base64:F.background}:function(h){return h&&null!==h.match(/http(s)?:\/\//)}(F.background)?y(F.background):y(void 0,F.background)),jQuery(null!==(j=F.svg)&&void 0!==j?j:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((q,D)=>{var Dt,It;let St=jQuery(D).parents(".indexs"),Pt=(et=St.attr("data-index"))?parseInt(et):0,st=(et=>Pt&&et?parseInt(et):0)(St.attr("data-time")),kt=null!==(Dt=D.getAttribute("id"))&&void 0!==Dt?Dt:(1e9*Math.random()).toFixed(),zt={id:parseInt(kt),code:`${D.nodeName}-${kt}`,name:D.nodeName,idx:Pt,time:st,type:(()=>{switch(D.nodeName){case"polygon":return _.h.POLYGON;case"path":return _.h.PATH;case"circle":return _.h.CIRCLE;case"ellipse":return _.h.ELLIPSE;case"line":return _.h.LINE;case"rect":return _.h.RECT;case"foreignObject":return _.h.FOREIGNOBJECT}return 0})(),size:(et=>{let qt={},Rt=0,gt=0,Y=0,te=0,E=null,k=null,d=parseFloat((null===(et=D.getAttribute("transform"))||void 0===et?void 0:et.replace("rotate(","").replace(")",""))||"0")||null;switch(D.nodeName){case"polygon":{var K,xt;let Tt=[],Mt=[],Yt=999999999,Vt=999999999,Jt=0,jt=0;E=JSON.parse(D.getAttribute("ratios")||"[]"),k=null!==(K=null===(xt=D.getAttribute("points"))||void 0===xt?void 0:xt.split(",").map(function(dt){return dt.split(" ").map(function(Zt){return parseFloat(Zt)})}))&&void 0!==K?K:[],k.forEach(function(dt){Tt.push(dt[0]),Mt.push(dt[1])}),Yt=Math.min.apply(null,Tt),Vt=Math.min.apply(null,Mt),Jt=Math.max.apply(null,Tt),jt=Math.max.apply(null,Mt),Rt=Yt,gt=Vt,Y=Jt-Rt,te=jt-gt;break}case"path":{let Tt=D.getAttribute("d");if(Tt){let Mt=(0,I.CS)(Tt),{minX:Yt,minY:Vt,maxX:Jt,maxY:jt}=(0,I.lP)(Mt);Rt=Yt,gt=Vt,Y=Jt-Rt||1,te=jt-gt||1,Object.assign(qt,{ratioMaps:(0,I.nf)({x:Rt,y:gt,width:Y,height:te},Mt)})}break}case"circle":{let Tt=parseFloat(D.getAttribute("cx")||"0"),Mt=parseFloat(D.getAttribute("cy")||"0"),Yt=parseFloat(D.getAttribute("r")||"0");Rt=Tt-Yt,gt=Mt-Yt,Y=2*Yt,te=2*Yt;break}case"ellipse":{let Tt=parseFloat(D.getAttribute("cx")||"0"),Mt=parseFloat(D.getAttribute("cy")||"0"),Yt=parseFloat(D.getAttribute("rx")||"0"),Vt=parseFloat(D.getAttribute("ry")||"0");Rt=Tt-Yt,gt=Mt-Vt,Y=2*Yt,te=2*Vt;break}case"line":{let Tt=parseFloat(D.getAttribute("x1")||"0"),Mt=parseFloat(D.getAttribute("y1")||"0"),Yt=parseFloat(D.getAttribute("x2")||"0"),Vt=parseFloat(D.getAttribute("y2")||"0"),Jt=999999999,jt=999999999,dt=0,Zt=0;Jt=Math.min(Tt,Yt),jt=Math.min(Mt,Vt),dt=Math.max(Tt,Yt),Zt=Math.max(Mt,Vt),Rt=Jt,gt=jt,Y=dt-Rt,te=Zt-gt,E=[[(Tt-Rt)/(Y||1),(Mt-gt)/(te||1)],[(Yt-Rt)/(Y||1),(Vt-gt)/(te||1)]];break}case"rect":case"foreignObject":Rt=parseFloat(D.getAttribute("x")||"0"),gt=parseFloat(D.getAttribute("y")||"0"),Y=parseFloat(D.getAttribute("width")||"0"),te=parseFloat(D.getAttribute("height")||"0")}return Object.assign(qt,{x:Rt,y:gt,width:Y,height:te,ratios:E,points:k,rotate:d})})(),attribute:(()=>{let et={};switch(D.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var qt,Rt,gt,Y,te,E,k,d;let dt=null!==(qt=D.getAttribute("fill"))&&void 0!==qt?qt:null,Zt=null!==(Rt=D.getAttribute("stroke"))&&void 0!==Rt?Rt:null,R=null!==(gt=parseFloat(null!==(Y=D.getAttribute("stroke-opacity"))&&void 0!==Y?Y:"1"))&&void 0!==gt?gt:null,u=null!==(te=parseFloat(D.getAttribute("stroke-width")||"0"))&&void 0!==te?te:null,B=null!==(E=D.getAttribute("stroke-linecap"))&&void 0!==E?E:null,lt=null!==(k=D.getAttribute("stroke-linejoin"))&&void 0!==k?k:null,ot=null!==(d=parseFloat(D.getAttribute("stroke-dasharray")||"0"))&&void 0!==d?d:null;Object.assign(et,{fill:dt,stroke:Zt,strokeOpacity:R,strokeWidth:u,strokeLinecap:B,strokeLinejoin:lt,strokeDasharray:ot});break}case"path":{let dt=St.get(0);if(dt){var K,xt,Tt,Mt,Yt,Vt,Jt,jt;let Zt=null!==(K=dt.getAttribute("fill"))&&void 0!==K?K:null,R=null!==(xt=dt.getAttribute("stroke"))&&void 0!==xt?xt:null,u=null!==(Tt=parseFloat(null!==(Mt=dt.getAttribute("stroke-opacity"))&&void 0!==Mt?Mt:"1"))&&void 0!==Tt?Tt:null,B=null!==(Yt=parseFloat(dt.getAttribute("stroke-width")||"0"))&&void 0!==Yt?Yt:null,lt=null!==(Vt=dt.getAttribute("stroke-linecap"))&&void 0!==Vt?Vt:null,ot=null!==(Jt=dt.getAttribute("stroke-linejoin"))&&void 0!==Jt?Jt:null,H=null!==(jt=parseFloat(dt.getAttribute("stroke-dasharray")||"0"))&&void 0!==jt?jt:null;Object.assign(et,{fill:Zt,stroke:R,strokeOpacity:u,strokeWidth:B,strokeLinecap:lt,strokeLinejoin:ot,strokeDasharray:H})}break}}return et})(),style:(()=>{let et={};switch(D.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let gt=jQuery(D).find(".svg-container");if(gt.length){let te=parseFloat(gt.css("border-width")||"0")||null,E=gt.css("border-style")||null,k=gt.css("border-color")||null,d=null,K=gt.css("background-color")||null,xt=null;(()=>{let{hex:Tt,alpha:Mt}=f(k);k=Tt,d=Mt})(),(()=>{let{hex:Tt,alpha:Mt}=f(K);K=Tt,xt=Mt})(),Object.assign(et,{borderWidth:te,borderStyle:E,borderColor:k,borderOpacity:d,backgroundColor:K,backgroundOpacity:xt})}let Y=jQuery(D).find(".svg-editor-content");if(Y.length){var qt,Rt;let te=JSON.parse((Y.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:E,alpha:k}=f(te.TextColor);Object.assign(et,{fontFamily:null!==(qt=te.FontFamily)&&void 0!==qt?qt:null,fontSize:null!==(Rt=te.FontSize)&&void 0!==Rt?Rt:null,color:E,opacity:k})}break}}return et})(),source:(()=>{let et={};switch(D.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(St.hasClass("editors")){var qt;let jt="div,h1,h2,h3,h4,h5,h6,p,span,strong,b,i",dt=u=>{null==u||u.forEach(B=>{let lt=B.querySelectorAll(`:scope > ${jt}`);lt.length&&dt(lt),!B.querySelectorAll(":scope > *").length&&""==B.textContent&&B.remove()})},Zt=u=>{let B=null==u?void 0:u.querySelectorAll(":scope > div,h1,h2,h3,h4,h5,h6,p,strong,span");if(null!=B&&B.length){var lt;let ot=B[B.length-1];if(""==(null===(lt=ot.textContent)||void 0===lt?void 0:lt.trim())){let H=ot.querySelectorAll(":scope > *");if(H.length){let b=H[H.length-1];["br","BR"].includes(null==b?void 0:b.nodeName)&&(b.remove(),Zt(u))}else ot.remove(),Zt(u)}}};dt(null===(qt=jQuery(D).find(".svg-editor-content").get(0))||void 0===qt?void 0:qt.querySelectorAll(`:scope > ${jt}`)),Zt(jQuery(D).find(".svg-editor-content").get(0));let R=jQuery(D).find(".svg-editor-content");if(R.length){var Rt;let u=R.html(),B=null!==(Rt=(null!=u?u:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Rt?Rt:[];Object.assign(et,{type:"html",html:{htmlContent:u,variableKeywords:B}})}}else if(St.hasClass("inputs")||St.hasClass("textareas"))Object.assign(et,{type:"input",input:{input:!!jQuery(D).find("input").length,textarea:!!jQuery(D).find("textarea").length}});else if(St.hasClass("tests")){let jt=jQuery(D).find(".svg-test");if(St.hasClass("tests-truefalse")){var gt,Y;let dt=jt.find(".svg-editor-content").html(),Zt=null!==(gt=(null!=dt?dt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==gt?gt:[];Object.assign(et,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(Y=F.test2.truefalse)||void 0===Y?void 0:Y.includes(kt)}},html:{htmlContent:dt,variableKeywords:Zt}})}else if(St.hasClass("tests-singlechoice")){var te,E;let dt=jt.find(".svg-editor-content").html(),Zt=null!==(te=(null!=dt?dt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==te?te:[];Object.assign(et,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(E=F.test2.singlechoice)||void 0===E?void 0:E.includes(kt)}},html:{htmlContent:dt,variableKeywords:Zt}})}else if(St.hasClass("tests-multichoice")){var k,d;let dt=jt.find(".svg-editor-content").html(),Zt=null!==(k=(null!=dt?dt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==k?k:[];Object.assign(et,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(d=F.test2.multichoice)||void 0===d?void 0:d.includes(kt)}},html:{htmlContent:dt,variableKeywords:Zt}})}else if(St.hasClass("tests-fill")){var K,xt;let dt=jt.find(".svg-editor-content").html(),Zt=null!==(K=(null!=dt?dt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==K?K:[],R=null!==(xt=(null!=dt?dt:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==xt?xt:[];R=R.filter((u,B,lt)=>lt.indexOf(u)==B),Object.assign(et,{type:"test",test:{type:"fill",fill:R.map(u=>{var B;return{key:u,value:null===(B=F.test2.fill)||void 0===B||null===(B=B.find(lt=>lt.id==kt))||void 0===B||null===(B=B.vals)||void 0===B?void 0:B.map(lt=>lt.text).filter(lt=>!["",null,void 0,NaN].includes(lt))}})},html:{htmlContent:dt,variableKeywords:Zt,fillKeywords:R}})}else if(St.hasClass("tests-matching")){if(jt.hasClass("svg-test-empty"))Object.assign(et,{type:"test",test:{type:"matching-empty",matching:{key:jt.attr("data-name")||null}}});else if(jt.hasClass("svg-test-content")){var Tt;let dt=jt.find(".svg-editor-content").html(),Zt=null!==(Tt=(null!=dt?dt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Tt?Tt:[];Object.assign(et,{type:"test",test:{type:"matching-content",matching:{key:jt.attr("data-name")||null}},html:{htmlContent:dt,variableKeywords:Zt}})}}else if(St.hasClass("tests-speech")){var Mt;Object.assign(et,{type:"speech",speech:{value:null===(Mt=F.test2.speech)||void 0===Mt||null===(Mt=Mt.find(dt=>dt.id==kt))||void 0===Mt||null===(Mt=Mt.vals)||void 0===Mt?void 0:Mt.map(dt=>dt.text).filter(dt=>!["",null,void 0,NaN].includes(dt))}})}else if(St.hasClass("tests-submit")){let dt=jQuery(D).find(".svg-container img");Object.assign(et,{type:"test",test:{type:"submit"},image:y(dt.attr("url"),dt.attr("path"),dt.attr("src"))})}}else if(St.hasClass("images")){let jt=jQuery(D).find(".svg-editor-content img");if(jt.length)Object.assign(et,{type:"image",image:y(jt.attr("url"),jt.attr("path"),jt.attr("src"))});else{let dt=jQuery(D).find("iframe");Object.assign(et,{type:"iframe",iframe:y(dt.attr("url"),dt.attr("path"),dt.attr("src"))})}}else if(St.hasClass("sounds")){let jt=jQuery(D).find(".svg-editor-content img");jt.length&&Object.assign(et,{type:"image",image:y(jt.attr("url"),jt.attr("path"),jt.attr("src"))})}else if(St.hasClass("htmls")){let jt=jQuery(D).find("iframe");jt.length&&Object.assign(et,{type:"iframe",iframe:y(jt.attr("url"),jt.attr("path"),jt.attr("src"))})}else if(St.hasClass("svgs")){let jt=jQuery(D).find("svg");var Yt,Vt;jt.length&&Object.assign(et,{type:"svg",svg:Object.assign(y(jt.attr("url"),jt.attr("path"),jt.attr("src")),{svgContent:null!==(Yt=null===(Vt=jt.get(0))||void 0===Vt?void 0:Vt.outerHTML)&&void 0!==Yt?Yt:null})})}else if(St.hasClass("medias")){let jt=jQuery(D).find(".media-item");if(jt.length)switch(jt.attr("type")){case"audio":Object.assign(et,{type:"audio",audio:y(jt.attr("url"),jt.attr("path"),jt.attr("src"))});break;case"video":Object.assign(et,{type:"video",video:y(jt.attr("url"),jt.attr("path"),jt.attr("src"))});break;case"file":Object.assign(et,{type:"file",file:y(jt.attr("url"),jt.attr("path"),jt.attr("src"))});break;default:var Jt;Object.assign(et,{type:"link",link:{url:null!==(Jt=jt.attr("url"))&&void 0!==Jt?Jt:null}})}let dt=jQuery(D).find("img");dt.length&&(Object.assign(et,{image:y(dt.attr("url"),dt.attr("path"),dt.attr("src"))}),et.type||Object.assign(et,{type:"image"}))}}return et})(),animate:(et=>{let qt={},Rt=null===(et=F.animates)||void 0===et?void 0:et.find(gt=>gt.elementId==kt);return Rt&&Object.assign(qt,{value:Rt.value}),qt})(),interactive:(()=>{let et={},qt=F.actions.show.filter(gt=>gt.elementId==kt&&gt.active);qt.length&&(et.show={},qt.forEach(gt=>{let{source:Y}=gt;switch(null==Y?void 0:Y.type){case"work":var te,E,k,d,K;et.show.action={},Object.assign(et.show.action,{value:null!==(te=Y.value)&&void 0!==te?te:null,iteration:null!==(E=Y.iteration)&&void 0!==E?E:null,finish:null!==(k=Y.end)&&void 0!==k?k:null,time:null!==(d=Y.time)&&void 0!==d?d:null,points:null!==(K=Y.points)&&void 0!==K?K:null});break;case"audio":var xt,Tt,Mt;et.show.audio={},Object.assign(et.show.audio,{source:y(null,null,Y.url),iteration:null!==(xt=Y.iteration)&&void 0!==xt?xt:null,finish:null!==(Tt=Y.end)&&void 0!==Tt?Tt:null,time:null!==(Mt=Y.time)&&void 0!==Mt?Mt:null,async:-1==Y.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Yt,Vt,Jt,jt,dt,Zt,R,u,B,lt,ot,H,b,V,nt;Y.options.includes("show")&&(et.show.triggershow={},Object.assign(et.show.triggershow,{id:null!==(Yt=parseInt(null!==(Vt=Y.id)&&void 0!==Vt?Vt:"0"))&&void 0!==Yt?Yt:null,ids:null===(Jt=Y.ids)||void 0===Jt?void 0:Jt.map(vt=>parseInt(vt)),async:null!==(jt=Y.async)&&void 0!==jt?jt:null,time:null!==(dt=Y.time)&&void 0!==dt?dt:null})),Y.options.includes("run")&&(et.show.triggerrun={},Object.assign(et.show.triggerrun,{id:null!==(Zt=parseInt(null!==(R=Y.id)&&void 0!==R?R:"0"))&&void 0!==Zt?Zt:null,ids:null===(u=Y.ids)||void 0===u?void 0:u.map(vt=>parseInt(vt)),async:null!==(B=Y.async)&&void 0!==B?B:null,time:null!==(lt=Y.time)&&void 0!==lt?lt:null})),Y.options.includes("hide")&&(et.show.triggerhide={},Object.assign(et.show.triggerhide,{id:null!==(ot=parseInt(null!==(H=Y.id)&&void 0!==H?H:"0"))&&void 0!==ot?ot:null,ids:null===(b=Y.ids)||void 0===b?void 0:b.map(vt=>parseInt(vt)),async:null!==(V=Y.async)&&void 0!==V?V:null,time:null!==(nt=Y.time)&&void 0!==nt?nt:null}))}}));let Rt=F.actions.click.filter(gt=>gt.elementId==kt&&gt.active);return Rt&&(et.click={},Rt.forEach(gt=>{let{source:Y}=gt;switch(null==Y?void 0:Y.type){case"work":var te,E,k,d,K;et.click.action={},Object.assign(et.click.action,{value:null!==(te=Y.value)&&void 0!==te?te:null,iteration:null!==(E=Y.iteration)&&void 0!==E?E:null,finish:null!==(k=Y.end)&&void 0!==k?k:null,time:null!==(d=Y.time)&&void 0!==d?d:null,points:null!==(K=Y.points)&&void 0!==K?K:null});break;case"audio":var xt,Tt,Mt;et.click.audio={},Object.assign(et.click.audio,{source:y(null,null,Y.url),iteration:null!==(xt=Y.iteration)&&void 0!==xt?xt:null,finish:null!==(Tt=Y.end)&&void 0!==Tt?Tt:null,time:null!==(Mt=Y.time)&&void 0!==Mt?Mt:null,async:-1==Y.iteration?"change-slide":"change-node"});break;case"video":{et.click.video={},Object.assign(et.click.video,{source:y(Y.url,Y.path)});let{url:wt,path:Ct,name:yt}=y(Y.url,Y.path);et.click.media={},Object.assign(et.click.media,{url:wt,path:Ct,name:yt,type:G.S.VIDEO});break}case"image":{et.click.image={},Object.assign(et.click.image,{source:y(Y.url,Y.path)});let{url:wt,path:Ct,name:yt}=y(Y.url,Y.path);et.click.media={},Object.assign(et.click.media,{url:wt,path:Ct,name:yt,type:G.S.IMAGE});break}case"link":{et.click.link={},Object.assign(et.click.link,{url:Y.url,target:Y.target});let{url:wt,path:Ct,name:yt}=y(Y.url,Y.path);et.click.media={},Object.assign(et.click.media,{url:wt,path:Ct,name:yt,type:G.S.LINK});break}case"text":et.click.text={},Object.assign(et.click.text,{content:Y.content});break;case"node":case"node2":var Yt,Vt,Jt,jt,dt,Zt,R,u,B,lt,ot,H,b,V,nt;Y.options.includes("show")&&(et.click.triggershow={},Object.assign(et.click.triggershow,{id:null!==(Yt=parseInt(null!==(Vt=Y.id)&&void 0!==Vt?Vt:"0"))&&void 0!==Yt?Yt:null,ids:null===(Jt=Y.ids)||void 0===Jt?void 0:Jt.map(wt=>parseInt(wt)),async:null!==(jt=Y.async)&&void 0!==jt?jt:null,time:null!==(dt=Y.time)&&void 0!==dt?dt:null})),Y.options.includes("run")&&(et.click.triggerrun={},Object.assign(et.click.triggerrun,{id:null!==(Zt=parseInt(null!==(R=Y.id)&&void 0!==R?R:"0"))&&void 0!==Zt?Zt:null,ids:null===(u=Y.ids)||void 0===u?void 0:u.map(wt=>parseInt(wt)),async:null!==(B=Y.async)&&void 0!==B?B:null,time:null!==(lt=Y.time)&&void 0!==lt?lt:null})),Y.options.includes("hide")&&(et.click.triggerhide={},Object.assign(et.click.triggerhide,{id:null!==(ot=parseInt(null!==(H=Y.id)&&void 0!==H?H:"0"))&&void 0!==ot?ot:null,ids:null===(b=Y.ids)||void 0===b?void 0:b.map(wt=>parseInt(wt)),async:null!==(V=Y.async)&&void 0!==V?V:null,time:null!==(nt=Y.time)&&void 0!==nt?nt:null}));break;case"slide":var vt;et.click.slide={},Object.assign(et.click.slide,{id:parseInt(null!==(vt=Y.id)&&void 0!==vt?vt:"0")||Y.num||null,code:Y.id})}})),et})(),variable:(et=>{let qt={};var Rt;D.getAttribute("data-variable")&&(qt.input={},Object.assign(qt.input,{variable:null!==(Rt=D.getAttribute("data-variable"))&&void 0!==Rt?Rt:null}));let gt=null===(et=F.nodes)||void 0===et||null===(et=et.find(d=>d.id==kt))||void 0===et?void 0:et.variable;var Y,te,E,k;return gt&&(qt.click={},Object.assign(qt.click,{variable:null!==(Y=gt.variable)&&void 0!==Y?Y:null,operator:null!==(te=gt.operator)&&void 0!==te?te:null,valuetype:null!==(E=gt.valuetype)&&void 0!==E?E:null,value:null!==(k=gt.value)&&void 0!==k?k:null})),qt})()};var et;null===(It=Ot.svg)||void 0===It||It.nodes.push(zt)}),M.push(Ot)}),{screen:{width:h.screen.w,height:h.screen.h},data:{slides:M},variable:h.variable,fonts:[]}}},6195:(ce,Kt,v)=>{v.d(Kt,{A9:()=>G,IB:()=>O,_4:()=>I,_5:()=>ft,ar:()=>C,yW:()=>f});var S=v(467),_=v(119);_.config({driver:[_.INDEXEDDB,_.LOCALSTORAGE,_.WEBSQL],name:"_localDataDB",version:1});const z={create:(Q=(0,S.A)(function*(){return _}),function(){return Q.apply(this,arguments)}),get:function(){var Q=(0,S.A)(function*(x){return _.getItem(x)});return function(it){return Q.apply(this,arguments)}}(),set:function(){var Q=(0,S.A)(function*(x,it){return _.setItem(x,it)});return function(it,y){return Q.apply(this,arguments)}}()},ft=function(){var Q=(0,S.A)(function*(x){yield z.create();var it=(yield z.get("icdt-data"))||[];"function"==typeof x.callback&&x.callback(it)});return function(it){return Q.apply(this,arguments)}}(),C=function(){var Q=(0,S.A)(function*(x){yield z.create(),x.params=x.params||{};try{yield z.set("icdt-data",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(it){"function"==typeof x.callback&&x.callback(null),console.error(it)}});return function(it){return Q.apply(this,arguments)}}(),f=function(){var Q=(0,S.A)(function*(x){yield z.create();try{var it=(yield z.get("icdt-config"))||{};"function"==typeof x.callback&&x.callback(it)}catch(y){"function"==typeof x.callback&&x.callback(null),console.error(y)}});return function(it){return Q.apply(this,arguments)}}(),I=function(){var Q=(0,S.A)(function*(x){yield z.create(),x.params=x.params||{};try{yield z.set("icdt-config",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(it){"function"==typeof x.callback&&x.callback(null),console.error(it)}});return function(it){return Q.apply(this,arguments)}}(),G=function(){var Q=(0,S.A)(function*(x){yield z.create();try{var it=(yield z.get("icdt-clipboard"))||{};"function"==typeof x.callback&&x.callback(it)}catch(y){"function"==typeof x.callback&&x.callback(null),console.error(y)}});return function(it){return Q.apply(this,arguments)}}(),O=function(){var Q=(0,S.A)(function*(x){yield z.create(),x.params=x.params||{};try{yield z.set("icdt-clipboard",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(it){"function"==typeof x.callback&&x.callback(null),console.error(it)}});return function(it){return Q.apply(this,arguments)}}();var Q},6315:(ce,Kt,v)=>{v.d(Kt,{w:()=>S});const S=(_,rt)=>{if(!_)return"";let z=_.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),ft=(z&&z[4]||"").trim(),C=z?(256|z[1]).toString(16).slice(1)+(256|z[2]).toString(16).slice(1)+(256|z[3]).toString(16).slice(1):_;if("0"==ft)return"transparent";if(rt){let f;f=""!==ft?ft:"01",f=(255*f|256).toString(16).slice(1),C+=f}return`#${C}`}},7873:(ce,Kt,v)=>{v.d(Kt,{F:()=>S});const S={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},1477:(ce,Kt,v)=>{v.d(Kt,{r:()=>S});const S={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221,Minus:189,Equal:187}},2409:(ce,Kt,v)=>{v.d(Kt,{F:()=>S});const S={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(ce,Kt,v)=>{v.d(Kt,{P:()=>S});const S={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(ce,Kt,v)=>{v.d(Kt,{Q:()=>S});const S={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(ce,Kt,v)=>{v.d(Kt,{h:()=>S});const S={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,TSPAN:10,PATH:8,POLYLINE:11}},8338:(ce,Kt,v)=>{v.d(Kt,{S:()=>S});const S={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},6611:(ce,Kt,v)=>{v.d(Kt,{L:()=>Lt});var S=v(3603),_=v(5970),rt=v(7873),z=v(9506),ft=v(1308),C=v(5483);const G=W=>{var i,l,o,n,r,m,w;let c=(null===(i=W.mouseEvent)||void 0===i?void 0:i.target)||(null===(l=W.touchEvent)||void 0===l?void 0:l.target),A=(null===(o=c)||void 0===o?void 0:o.getAttribute("id"))||"",p=null===(n=c)||void 0===n?void 0:n.nodeName;Lt.dataSelect.nodeName.includes(p)||(c=jQuery(c).parents("foreignObject").get(0),c&&(A=c.getAttribute("id")||"",p=c.nodeName));let U=(null===(r=c)||void 0===r||null===(r=r.parentNode)||void 0===r?void 0:r.getAttribute("id"))||"";var N,Et;if([rt.F.RESIZE_GROUP,rt.F.SELECT_GROUP].includes(U))return null===(N=W.mouseEvent)||void 0===N||N.stopPropagation(),void(null===(Et=W.mouseEvent)||void 0===Et||Et.preventDefault());if(null!==(m=W.mouseEvent)&&void 0!==m&&m.altKey||null!==(w=W.touchEvent)&&void 0!==w&&w.altKey||!A||A.match(/[^0-9]/)||!Lt.dataSelect.nodeName.includes(p)){var bt;Lt.dataSelect.ids.length&&(Lt.dataSelect.ids=[]),(0==(null===(bt=W.mouseEvent)||void 0===bt?void 0:bt.button)||W.touchEvent)&&(W=>{let r=(0,_.RY)(rt.F.SCAN_GROUP,"g"),m=(0,z.CE)(0,0,1,1);(0,_.xJ)(r,m),((W,i,l)=>{(0,ft.I)(W,{start:r=>{},move:(r,m)=>{((r,m,w,c)=>{i=(0,z.CE)(r,m,w,c),(0,_.xJ)(l,i)})(m[0][0],m[0][1],r.x,r.y)},end:(r,m)=>{null==l||l.remove(),Lt.dataSelect.ids=Lt.data.getNodeInArea(Math.min(m[0][0],r.x),Math.min(m[0][1],r.y),Math.max(m[0][0],r.x),Math.max(m[0][1],r.y)),(0,C.D)(Lt.dataSelect.nodes)}})})(W,m,r)})(W)}else{var At,Bt;let ie=parseFloat(A||"0");Lt.dataSelect.ids=null!==(At=W.mouseEvent)&&void 0!==At&&At.shiftKey||null!==(Bt=W.touchEvent)&&void 0!==Bt&&Bt.shiftKey?[ie].concat(Lt.dataSelect.ids).filter((ke,we,Te)=>Te.indexOf(ke)==we):[ie],(0,C.D)(Lt.dataSelect.nodes)}};class Q{constructor(){let{x:i,y:l}=Lt.screen.dislocation;var o=(n,r,m,w)=>{Lt.screen.move({x:i,y:l},{x:m-n,y:w-r})};return{start:n=>{},move:(n,r)=>{o(r[0][0],r[0][1],n.x,n.y)},end:(n,r)=>{o(r[0][0],r[0][1],n.x,n.y)}}}}var x=v(1999),it=v(4888);const y=[{name:"tam gi\xe1c vu\xf4ng",type:it.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:it.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:it.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:it.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:it.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:it.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:it.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:it.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:it.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:it.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:it.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:it.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:it.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var at=v(1281),h=v(2492);class tt{constructor(){let i=(0,_.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,attribute:n,size:r}=(0,at.K)(Math.ceil(1e9*Math.random())),m=(w,c,A,p)=>{r=(0,z.CE)(w,c,A,p,{ratio:1}),r.x=(0,h.z)(r.x),r.y=(0,h.z)(r.y),r.width=(0,h.z)(r.width),r.height=(0,h.z)(r.height),Object.assign(n,(0,z.xW)(x.h.CIRCLE,r,n)),(0,_.tD)(o,n),(0,_.in)(i,r)};return{start:w=>{m(w.x,w.y,w.x+r.width,w.y+r.height)},move:(w,c)=>{m(c[0][0],c[0][1],w.x,w.y)},end:(w,c)=>{(r.width<=16||r.height<=16)&&(r.width=80,r.height=80,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(n,(0,z.xW)(x.h.CIRCLE,r,n)),(0,_.tD)(o,n)),Lt.data.node=Object.assign({id:l,type:x.h.CIRCLE,name:"Circle"},{size:r,attribute:n}),null==i||i.remove()}}}}var M=v(6153);class F{constructor(){let i=(0,_.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,attribute:n,size:r}=(0,M.W)(Math.ceil(1e9*Math.random()));var m=(w,c,A,p)=>{r=(0,z.CE)(w,c,A,p),r.x=(0,h.z)(r.x),r.y=(0,h.z)(r.y),r.width=(0,h.z)(r.width),r.height=(0,h.z)(r.height),Object.assign(n,(0,z.xW)(x.h.ELLIPSE,r,n)),(0,_.tD)(o,n),(0,_.in)(i,r)};return{start:w=>{m(w.x,w.y,w.x+r.width,w.y+r.height)},move:(w,c)=>{m(c[0][0],c[0][1],w.x,w.y)},end:(w,c)=>{(r.width<=16||r.height<=16)&&(r.width=90,r.height=60,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(n,(0,z.xW)(x.h.ELLIPSE,r,n)),(0,_.tD)(o,n)),Lt.data.node=Object.assign({id:l,type:x.h.ELLIPSE,name:"Ellipse"},{size:r,attribute:n}),null==i||i.remove()}}}}var J=v(7945);class L{constructor(){let i=(0,_.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,attribute:n,size:r}=(0,J.a)(Math.ceil(1e9*Math.random()));var m=(w,c,A,p)=>{r=(0,z.CE)(w,c,A,p),r.x=(0,h.z)(r.x),r.y=(0,h.z)(r.y),r.width=(0,h.z)(r.width),r.height=(0,h.z)(r.height),Object.assign(n,(0,z.xW)(x.h.RECT,r,n)),(0,_.tD)(o,n),(0,_.in)(i,r)};return{start:w=>{m(w.x,w.y,w.x+r.width,w.y+r.height)},move:(w,c)=>{m(c[0][0],c[0][1],w.x,w.y)},end:(w,c)=>{(r.width<=16||r.height<=16)&&(r.width=80,r.height=80,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(n,(0,z.xW)(x.h.RECT,r,n)),(0,_.tD)(o,n)),Lt.data.node=Object.assign({id:l,type:x.h.RECT,name:"Rect"},{size:r,attribute:n}),null==i||i.remove()}}}}var j=v(3477);class Ot{constructor(i){let l=(0,_.RY)(rt.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:n,element:r,attribute:m,size:w}=(0,j.u)(Math.ceil(1e9*Math.random()));w.ratios=o;var c=(A,p,U,N)=>{w=(0,z.CE)(A,p,U,N,{ratios:o}),w.x=(0,h.z)(w.x),w.y=(0,h.z)(w.y),w.width=(0,h.z)(w.width),w.height=(0,h.z)(w.height),Object.assign(m,(0,z.xW)(x.h.POLYGON,w,m)),(0,_.tD)(r,m),(0,_.in)(l,w)};return{start:A=>{c(A.x,A.y,A.x+w.width,A.y+w.height)},move:(A,p)=>{c(p[0][0],p[0][1],A.x,A.y)},end:(A,p)=>{(w.width<=16||w.height<=16)&&(w.width=80,w.height=80,w.x=w.x-w.width/2,w.y=w.y-w.height/2,Object.assign(m,(0,z.xW)(x.h.POLYGON,w,m)),(0,_.tD)(r,m)),Lt.data.node=Object.assign({id:n,type:x.h.POLYGON,name:"Polygon"},{size:w,attribute:m}),null==l||l.remove()}}}}var q=v(3069);class D{constructor(){let i=(0,_.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,attribute:n,size:r}=(0,q.q)(Math.ceil(1e9*Math.random()));return{start:w=>{},move:(w,c)=>{((w,c,A,p)=>{r=(0,z.CE)(w,c,A,p),r.x=(0,h.z)(r.x),r.y=(0,h.z)(r.y),r.width=(0,h.z)(r.width),r.height=(0,h.z)(r.height),Object.assign(n,(0,z.xW)(x.h.LINE,r,n)),(0,_.tD)(o,n),(0,_.in)(i,r)})(c[0][0],c[0][1],w.x,w.y)},end:(w,c)=>{c.length>=2?((r.width<=16||r.height<=16)&&(r.width=80,r.height=80,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(n,(0,z.xW)(x.h.LINE,r,n)),(0,_.tD)(o,n)),Lt.data.node=Object.assign({id:l,type:x.h.LINE,name:"Line"},{size:r,attribute:n})):null==o||o.remove(),null==i||i.remove()}}}}var Dt=v(4896),It=v(6407);class St{constructor(){let{nodeId:i,element:l,attribute:o,size:n}=(0,It.X)(Math.ceil(1e9*Math.random())),m="";return{start:c=>{m=`M ${c.x} ${c.y} L ${c.x} ${c.y}`},move:(c,A)=>{((c,A)=>{m+=` ${c} ${A}`,l.setAttribute("d",m)})(c.x,c.y)},end:(c,A)=>{let p=(0,Dt.CS)(m),{minX:U,minY:N,maxX:Et,maxY:bt}=(0,Dt.lP)(p);n.x=U,n.y=N,n.width=Et-U||1,n.height=bt-N||1,n.ratioMaps=(0,Dt.nf)(n,p),Lt.data.node=Object.assign({id:i,type:x.h.PATH,name:"Path"},{size:n,attribute:o})}}}}var Pt=v(745);class st{constructor(){let i=(0,_.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,size:n,attribute:r,style:m,source:w}=(0,Pt.$)(Math.ceil(1e9*Math.random()));var c=(A,p,U,N)=>{n=(0,z.CE)(A,p,U,N),n.x=(0,h.z)(n.x),n.y=(0,h.z)(n.y),n.width=(0,h.z)(n.width),n.height=(0,h.z)(n.height),Object.assign(r,(0,z.xW)(x.h.FOREIGNOBJECT,n,r)),(0,_.tD)(o,r),(0,_.in)(i,n)};return{start:A=>{c(A.x,A.y,A.x+n.width,A.y+n.height)},move:(A,p)=>{c(p[0][0],p[0][1],A.x,A.y)},end:(A,p)=>{(n.width<=16||n.height<=16)&&(n.width=90,n.height=60,n.x=n.x-n.width/2,n.y=n.y-n.height/2,Object.assign(r,(0,z.xW)(x.h.FOREIGNOBJECT,n,r)),(0,_.tD)(o,r)),Lt.data.node=Object.assign({id:l,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:r,style:m,source:w}),null==i||i.remove()}}}}var kt=v(9173);class zt{constructor(){var i,l;let o=(0,_.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:n,element:r,size:m,attribute:w,source:c}=(0,kt.B)(Math.ceil(1e9*Math.random())),A=1;(U=>{if(!U)return;let N=new Image;N.onload=()=>{A=(0,h.z)(N.naturalWidth/N.naturalHeight,100)},N.onerror=Et=>{console.error(`ImgSrc load failed -> ${U}`,Et)},N.src=U})(null!==(i=null===(l=c.image)||void 0===l?void 0:l.url)&&void 0!==i?i:"");var p=(U,N,Et,bt)=>{m=(0,z.CE)(U,N,Et,bt,{ratio:A}),m.x=(0,h.z)(m.x),m.y=(0,h.z)(m.y),m.width=(0,h.z)(m.width),m.height=(0,h.z)(m.height),Object.assign(w,(0,z.xW)(x.h.IMAGE,m,w)),(0,_.tD)(r,w),(0,_.in)(o,m)};return{start:U=>{p(U.x,U.y,U.x+m.width,U.y+m.height)},move:(U,N)=>{p(N[0][0],N[0][1],U.x,U.y)},end:(U,N)=>{(m.width<=16||m.height<=16)&&(m.width=80,m.height=80,m.x=m.x-m.width/2,m.y=m.y-m.height/2,Object.assign(w,(0,z.xW)(x.h.IMAGE,m,w)),(0,_.tD)(r,w)),Lt.data.node=Object.assign({id:n,type:x.h.IMAGE,name:"Image"},{size:m,attribute:w,source:c}),null==o||o.remove()}}}}var qt=v(7135),Rt=v(4979);function te(W,i,l,o){return Math.sqrt(Math.pow(l-W,2)+Math.pow(o-i,2))}function E(W,i,l,o,n){return te(W,i,l,o)<n?1:0}function d(W,i,l,o,n,r,m){var w=[];return w.push(E(W,i,l,o,m)),w.push(E(W,i,n,r,m)),w.push(function k(W,i,l,o,n,r,m){var w=[n-l,r-o],c=[W-l,i-o],A=[-w[1],w[0]],p=Math.sqrt(Math.pow(A[0],2)+Math.pow(A[1],2)),U=[A[0]/p,A[1]/p],N=Math.sqrt(Math.pow(w[0],2)+Math.pow(w[1],2)),Et=[w[0]/N,w[1]/N],bt=c[0]*Et[0]+c[1]*Et[1];if(bt<=0||bt>=N)return 0;var At=c[0]*U[0]+c[1]*U[1];return At>=m||At<=-m?0:1}(W,i,l,o,n,r,m)),w}function K(W,i,l,o,n){var r=[l-W,o-i],m=[-r[1],r[0]],w=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)),c=[m[0]/w,m[1]/w];return[[W+n*c[0],i+n*c[1]],[W-n*c[0],i-n*c[1]],[l-n*c[0],o-n*c[1]],[l+n*c[0],o+n*c[1]]]}function xt(W,i,l,o,n,r,m){var bt,w=[n-W,r-i],c=[l-W,o-i],A=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),p=[c[0]/A,c[1]/A],U=w[0]*p[0]+w[1]*p[1],N=[W+U*p[0],i+U*p[1]],Et=Math.sqrt(Math.pow(n-N[0],2)+Math.pow(r-N[1],2));bt=0===Et?m:Math.sqrt(Math.pow(m,2)-Math.pow(Et,2));var At=[W+U*p[0]+bt*p[0],i+U*p[1]+bt*p[1]];return At[0]===W&&At[1]===i?null:At}function Tt(W,i,l,o,n,r,m){var w=[n-W,r-i],c=[l-W,o-i],A=[-c[1],c[0]],p=Math.sqrt(Math.pow(A[0],2)+Math.pow(A[1],2)),U=[A[0]/p,A[1]/p],N=w[0]*U[0]+w[1]*U[1],Et=dt([W,i],[l,o],[n,r]);if(Jt([Et[0]-n,Et[1]-r])>=m)return null;var At=Math.sqrt(Math.pow(m,2)-Math.pow(N,2)),Bt=[n-N*U[0],r-N*U[1]],ie=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),ke=[c[0]/ie,c[1]/ie],we=[[Bt[0]-ke[0]*At,Bt[1]-ke[1]*At],[Bt[0]+ke[0]*At,Bt[1]+ke[1]*At]];return we[0][0]===W&&we[0][1]===i?null:we}function Mt(W,i,l,o,n,r,m,w){var c,A,p,U,N,Et;return-(p=m-n)*(A=o-i)+(c=l-W)*(U=w-r)==0?null:(Et=(p*(i-r)-U*(W-n))/(-p*A+c*U),(N=(-A*(W-n)+c*(i-r))/(-p*A+c*U))>=0&&N<=1&&Et>=0&&Et<=1?[W+Et*c,i+Et*A]:null)}function Yt(W,i,l,o,n,r,m,w,c,A){var p=K(r,m,w,c,A),U=[];if(l[0]&&!l[1])U.push(xt(W,i,o,n,r,m,A)),U.push(Mt(W,i,o,n,p[0][0],p[0][1],p[3][0],p[3][1])),U.push(Mt(W,i,o,n,p[1][0],p[1][1],p[2][0],p[2][1])),(N=Tt(W,i,o,n,w,c,A))&&U.push(N[0],N[1]);else if(!l[0]&&l[1])U.push(xt(W,i,o,n,w,c,A)),U.push(Mt(W,i,o,n,p[0][0],p[0][1],p[3][0],p[3][1])),U.push(Mt(W,i,o,n,p[1][0],p[1][1],p[2][0],p[2][1])),(N=Tt(W,i,o,n,r,m,A))&&U.push(N[0],N[1]);else if(l[0]&&l[1])U.push(xt(W,i,o,n,r,m,A)),U.push(Mt(W,i,o,n,p[0][0],p[0][1],p[3][0],p[3][1])),U.push(Mt(W,i,o,n,p[1][0],p[1][1],p[2][0],p[2][1])),U.push(xt(W,i,o,n,w,c,A));else{var N=Tt(W,i,o,n,w,c,A),Et=Tt(W,i,o,n,r,m,A);N&&U.push(N[0],N[1]),Et&&U.push(Et[0],Et[1]),U.push(Mt(W,i,o,n,p[0][0],p[0][1],p[3][0],p[3][1])),U.push(Mt(W,i,o,n,p[1][0],p[1][1],p[2][0],p[2][1]))}for(var bt=[W,i],At=0;At<U.length;At++)U[At]&&te(U[At][0],U[At][1],o,n)<te(bt[0],bt[1],o,n)&&(bt=U[At]);return bt[0]===W&&bt[1]===i?null:bt}function Vt(W,i,l,o,n,r,m,w,c){var A=K(n,r,m,w,c),p=[],U=Tt(W,i,l,o,n,r,c);U&&p.push(U[0],U[1]),(U=Tt(W,i,l,o,m,w,c))&&p.push(U[0],U[1]),p.push(Mt(W,i,l,o,A[0][0],A[0][1],A[3][0],A[3][1])),p.push(Mt(W,i,l,o,A[1][0],A[1][1],A[2][0],A[2][1]));for(var N=[l,o],Et=[W,i],bt=0;bt<p.length;bt++)p[bt]&&te(p[bt][0],p[bt][1],W,i)<te(N[0],N[1],W,i)&&(N=p[bt]);for(var At=0;At<p.length;At++)p[At]&&te(p[At][0],p[At][1],l,o)<te(Et[0],Et[1],l,o)&&(Et=p[At]);return N[0]===l&&N[1]===o||Et[0]===W&&Et[1]===i?null:[N,Et]}var Jt=function(W){return Math.sqrt(W[0]*W[0]+W[1]*W[1])},dt=function(W,i,l){var o=[i[0]-W[0],i[1]-W[1]],n=Jt(o);if(n<1e-6)return W;var r=[l[0]-W[0],l[1]-W[1]],m=(o[0]*r[0]+o[1]*r[1])/n;return m<0?W:m>n?i:[W[0]+o[0]*m/n,W[1]+o[1]*m/n]};class Zt{constructor(){let{element:o,size:r}=(0,It.X)(Math.ceil(1e9*Math.random()));(0,_.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let m="";return{start:A=>{m=`M ${A.x} ${A.y} L ${A.x} ${A.y}`},move:(A,p)=>{((A,p)=>{m+=` ${A} ${p}`,o.setAttribute("d",m)})(A.x,A.y)},end:(A,p)=>{o.remove(),(A=>{let p=9999,U=9999,N=-9999,Et=-9999;A.forEach(At=>{p=Math.min(p,At[0]),U=Math.min(U,At[1]),N=Math.max(N,At[0]),Et=Math.max(Et,At[1])}),r=(0,z.CE)(p,U,N,Et,{points:A}),Lt.data.getNodeInArea(0,0,1920,1920,x.h.PATH).forEach(At=>{let ie=((W,i,l)=>{l=l||20;var o=[],n=function(p){var U=i[0][0],N=i[0][1],Et=0,bt=0;if(1!==p.length||E(p[0][0],p[0][1],U,N,l)){for(var At;Et<p.length-1;){var Bt=p[Et],ie=p[Et+1],ke=E(Bt[0],Bt[1],U,N,l),we=E(ie[0],ie[1],U,N,l);if(ke&&we)bt=++Et;else if(ke&&!we)(Te=xt(Bt[0],Bt[1],ie[0],ie[1],U,N,l))?(p[Et]=Te,bt=Et):Et++;else if(!ke&&we){var Te;(Te=xt(ie[0],ie[1],Bt[0],Bt[1],U,N,l))&&((At=p.slice(bt,Et+1)).push(Te),o.push(At)),bt=++Et}else{var Oe=Tt(Bt[0],Bt[1],ie[0],ie[1],U,N,l);Oe?(((At=p.slice(bt,Et+1))[At.length-1][0]!==Oe[0][0]||At[At.length-1][1]!==Oe[0][1])&&At.push(Oe[0]),At.length>1&&o.push(At),p[Et]=Oe[1],p[Et+1]&&p[Et+1][0]==Oe[1][0]&&p[Et+1][1]==Oe[1][1]&&Et++,bt=Et):Et++}}bt!==Et&&(At=p.slice(bt,p.length))&&o.push(At)}else o.push(p)},r=function(p,U){var ie,N=i[U],Et=i[U+1],bt=0,At=0;if(1!==p.length||-1!==(Bt=d(p[0][0],p[0][1],N[0],N[1],Et[0],Et[1],l)).indexOf(1)){for(;bt<p.length-1;){var ke=p[bt],we=p[bt+1],Bt=d(ke[0],ke[1],N[0],N[1],Et[0],Et[1],l),Te=d(we[0],we[1],N[0],N[1],Et[0],Et[1],l);if(-1!==Bt.indexOf(1)&&-1!==Te.indexOf(1))At=++bt;else if(-1!==Bt.indexOf(1)&&-1===Te.indexOf(1))(Oe=Yt(ke[0],ke[1],Bt,we[0],we[1],N[0],N[1],Et[0],Et[1],l))?(p[bt]=Oe,At=bt):bt++;else if(-1===Bt.indexOf(1)&&-1!==Te.indexOf(1)){var Oe;(Oe=Yt(we[0],we[1],Te,ke[0],ke[1],N[0],N[1],Et[0],Et[1],l))?((ie=p.slice(At,bt+1)).push(Oe),o.push(ie),At=++bt):bt++}else{var Ae=Vt(ke[0],ke[1],we[0],we[1],N[0],N[1],Et[0],Et[1],l);Ae?(((ie=p.slice(At,bt+1))[ie.length-1][0]!==Ae[0][0]||ie[ie.length-1][1]!==Ae[0][1])&&ie.push(Ae[0]),ie.length>1&&o.push(ie),p[bt]=Ae[1],p[bt+1]&&p[bt+1][0]==Ae[1][0]&&p[bt+1][1]==Ae[1][1]&&bt++,At=bt):bt++}}At!==bt&&(ie=p.slice(At,p.length))&&o.push(ie)}else o.push(p)};if(i=function Y(W){var i=[];if(1===W.length)i=W;else{for(var l=0;l<W.length-1;)(W[l][0]!==W[l+1][0]||W[l][1]!==W[l+1][1])&&i.push(W[l]),l++;0!==W.length&&0===i.length&&i.push(W[0]),(W[W.length-1][0]!==W[i.length-1][0]||W[W.length-1][1]!==W[i.length-1][1])&&i.push(W[l])}return i}(i),1===i.length){for(var m=0;m<W.length;m++)n(W[m]);W=o}else for(var w=0;w<i.length-1;w++){for(m=0;m<W.length;m++)r(W[m],w);W=o,o=[]}for(var c=0;c<W.length;c++)for(var A=0;A<W[c].length;A++)W[c][A][0]=Math.round(W[c][A][0]),W[c][A][1]=Math.round(W[c][A][1]);return W})(Lt.data.getNode(At).size.points,A,2);console.log(ie)})})(p)}}}}var u=v(6847);class B{constructor(){let i=(0,_.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,attribute:n,size:r,source:m}=(0,u.L)(Math.ceil(1e9*Math.random())),w=(c,A,p,U)=>{r=(0,z.CE)(c,A,p,U),r.x=(0,h.z)(r.x),r.y=(0,h.z)(r.y),r.width=(0,h.z)(r.width),r.height=(0,h.z)(r.height),Object.assign(n,(0,z.xW)(x.h.TEXT,r,n)),(0,_.tD)(o,n),(0,_.in)(i,r)};return{start:c=>{w(c.x,c.y,c.x+r.width,c.y+r.height)},move:(c,A)=>{w(A[0][0],A[0][1],c.x,c.y)},end:(c,A)=>{(r.width<=16||r.height<=16)&&(r.width=80,r.height=80,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(n,(0,z.xW)(x.h.TEXT,r,n)),(0,_.tD)(o,n)),Lt.data.node=Object.assign({id:l,type:x.h.TEXT,name:"Text"},{size:r,attribute:n,source:m}),null==i||i.remove()}}}}var b=v(4312),V=v(2409),nt=v(6078);var wt=v(3073);class Ct{constructor(){this._nodeName=["circle","ellipse","line","polygon","polyline","rect","text","tspan","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>Lt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var l,o,n,r,m;null===(l=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===l||l.remove(),null===(o=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===o||o.remove(),null===(n=window.document.getElementById(rt.F.SCAN_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(rt.F.CREATE_GROUP))||void 0===r||r.remove(),null===(m=window.document.getElementById(rt.F.INTERACTIVE_GROUP))||void 0===m||m.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(w=>w(i))}deleteNode(){for(let i of this._selected_Ids){let l=Lt.data.deleteNode(i);Lt.history.push([{type:"delete",from:{id:l},to:{id:l}}])}Lt.dataSelect.ids=[]}groupNode(){let i=[];if(Lt.dataSelect.ids.length>=2){let l=Lt.data.getNode(Lt.dataSelect.ids[0]),{nodeId:o,attribute:n,size:r}=(0,wt.v)(Math.ceil(1e9*Math.random()),void 0,l.pid?window.document.getElementById(l.pid):null);Lt.data.node=Object.assign({id:o,type:x.h.GROUP,name:"G"},{size:r,attribute:n});for(let m of Lt.dataSelect.ids)i.push(Lt.data.addGroup(m,o))}i.length&&(Lt.dataSelect.ids=i,(0,C.D)(Lt.dataSelect.nodes))}ungroupNode(){let i=[];for(let l of Lt.dataSelect.ids)i.push(Lt.data.unGroup(l));i.length&&(Lt.dataSelect.ids=i,(0,C.D)(Lt.dataSelect.nodes))}}var yt=v(2837),ut=v(8338);class _t{createNodeImage(i,l){var o,n,r,m;let{nodeId:c,element:A,size:p,attribute:U,source:N}=(0,kt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==l?void 0:l.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==l?void 0:l.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,yt.U)(i)}});(Et=>{if(!Et)return;let bt=new Image;bt.onload=()=>{let At=(0,h.z)(bt.naturalWidth/bt.naturalHeight,100);At>=1?(p.width=Math.min(bt.naturalWidth,512),p.height=(0,h.z)(p.width/At,100)):(p.height=Math.min(bt.naturalHeight,512),p.width=(0,h.z)(p.height*At,100)),p.x=(0,h.z)(p.x+50-p.width/2,100),p.y=(0,h.z)(p.y+50-p.height/2,100),Object.assign(U,(0,z.xW)(x.h.IMAGE,p,U)),(0,_.tD)(A,U),Lt.data.node=Object.assign({id:c,type:x.h.IMAGE,name:"Image"},{size:p,attribute:U,source:N})},bt.onerror=At=>{console.error(`ImgSrc load failed -> ${Et}`,At),null==A||A.remove()},bt.src=Et})(null!==(r=null===(m=N.image)||void 0===m?void 0:m.url)&&void 0!==r?r:"")}createNodeIframe(i,l){var o,n;let{nodeId:m,element:w,size:c,attribute:A,style:p,source:U}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==l?void 0:l.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==l?void 0:l.y)&&void 0!==n?n:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,yt.U)(i)}});(N=>{let Et=(null===(N=Lt.data.slide)||void 0===N||null===(N=N.svg)||void 0===N?void 0:N.viewBox)||{x:0,y:0,width:100,height:100},bt=(0,h.z)(Et.width/Et.height,100);bt>=1?(c.width=Math.min(Et.width,512),c.height=(0,h.z)(c.width/bt,100)):(c.height=Math.min(Et.height,512),c.width=(0,h.z)(c.height*bt,100)),c.x=(0,h.z)(c.x+50-c.width/2,100),c.y=(0,h.z)(c.y+50-c.height/2,100),Object.assign(A,(0,z.xW)(x.h.IMAGE,c,A)),(0,_.tD)(w,A),Lt.data.node=Object.assign({id:m,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:A,style:p,source:U})})()}createNodeEmbed(i,l){var o,n;let r={x:50,y:50,width:640,height:360};i.type==ut.S.AUDIO&&(r.width=480,r.height=80);let{nodeId:m,element:w,size:c,attribute:A,style:p,source:U}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==l?void 0:l.x)&&void 0!==o?o:r.x)-r.x,y:(null!==(n=null==l?void 0:l.y)&&void 0!==n?n:r.y)-r.y,width:r.width,height:r.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,yt.U)(i))}});(()=>{let N=(0,h.z)(r.width/r.height,100);N>=1?(c.width=Math.min(c.width,r.width),c.height=(0,h.z)(c.width/N,1)):(c.height=Math.min(c.height,r.height),c.width=(0,h.z)(c.height*N,1)),c.x=(0,h.z)(c.x+r.x-c.width/2,1),c.y=(0,h.z)(c.y+r.y-c.height/2,1),Object.assign(A,(0,z.xW)(x.h.FOREIGNOBJECT,c,A)),(0,_.tD)(w,A),Lt.data.node=Object.assign({id:m,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:A,style:p,source:U})})()}createNodeMedia(i,l){var o,n,r,m;let{nodeId:c,element:A,size:p,attribute:U,source:N}=(0,kt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==l?void 0:l.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==l?void 0:l.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,yt.U)(i.cover)}}),Et={click:{media:i.media}};(bt=>{if(!bt)return;let At=new Image;At.onload=()=>{let Bt=(0,h.z)(At.naturalWidth/At.naturalHeight,100);Bt>=1?(p.width=Math.min(At.naturalWidth,512),p.height=(0,h.z)(p.width/Bt,100)):(p.height=Math.min(At.naturalHeight,512),p.width=(0,h.z)(p.height*Bt,100)),p.x=(0,h.z)(p.x+50-p.width/2,100),p.y=(0,h.z)(p.y+50-p.height/2,100),Object.assign(U,(0,z.xW)(x.h.IMAGE,p,U)),(0,_.tD)(A,U),Lt.data.node=Object.assign({id:c,type:x.h.IMAGE,name:"Image"},{size:p,attribute:U,source:N,interactive:Et})},At.onerror=Bt=>{console.error(`ImgSrc load failed -> ${bt}`,Bt),null==A||A.remove()},At.src=bt})(null!==(r=null===(m=N.image)||void 0===m?void 0:m.url)&&void 0!==r?r:"")}createNodeText(i,l){var o,n;let{nodeId:m,element:w,size:c,attribute:A,style:p,source:U}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==l?void 0:l.x)&&void 0!==o?o:0)-0,y:(null!==(n=null==l?void 0:l.y)&&void 0!==n?n:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let N=(0,h.z)(4,100);N>=1?(c.width=Math.min(c.width,320),c.height=(0,h.z)(c.width/N,1)):(c.height=Math.min(c.height,80),c.width=(0,h.z)(c.height*N,1)),c.x=(0,h.z)(c.x+0-c.width/2,1),c.y=(0,h.z)(c.y+0-c.height/2,1),Object.assign(A,(0,z.xW)(x.h.FOREIGNOBJECT,c,A)),(0,_.tD)(w,A),Lt.data.node=Object.assign({id:m,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:A,style:p,source:U})})()}insert(i){var l;if(Lt.data.insertSlide(Lt.data.slideId,1),i.title){let{nodeId:o,size:n,attribute:r,style:m,source:w}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});Lt.data.node=Object.assign({id:o,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:r,style:m,source:w})}if(i.description){let{nodeId:o,size:n,attribute:r,style:m,source:w}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});Lt.data.node=Object.assign({id:o,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:r,style:m,source:w})}null!==(l=i.media)&&void 0!==l&&l.prompt&&((()=>{let{nodeId:o,size:n,attribute:r}=(0,J.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});Lt.data.node=Object.assign({id:o,type:x.h.RECT,name:"Rect"},{size:n,attribute:r})})(),(o=>{let{nodeId:n,size:r,attribute:m,style:w,source:c}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});Lt.data.node=Object.assign({id:n,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:m,style:w,source:c})})())}}var mt=v(1026),Ft=v(8047);class Gt{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:Lt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let l=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((r,m)=>m==this._slideIdx),o=null==l?void 0:l.svg,n=r=>{let m=[];return r.filter(w=>!w.isdeleted).forEach(w=>{w.type==x.h.GROUP?m=m.concat(n(w.nodes||[])):m.push(w.id)}),m};return n((null==o?void 0:o.nodes)||[])}}get get(){var i;let l=o=>{var n,r;return null===(n=o)||void 0===n||n.filter(m=>m.type==x.h.GROUP).forEach(m=>{var w;m.nodes=l(null===(w=m.nodes)||void 0===w?void 0:w.filter(c=>!c.isdeleted))}),(o=null===(r=o)||void 0===r?void 0:r.filter(m=>{var w,c;return m.type!=x.h.GROUP||(null!==(w=null===(c=m.nodes)||void 0===c?void 0:c.length)&&void 0!==w?w:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=l(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(r=>!r.isdeleted)))}),this._dataSource}get getResource(){var i;let l=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n,r,m,w,c,A,p,U;l.push(null===(n=o.svg)||void 0===n||null===(n=n.background)||void 0===n?void 0:n.path),null===(r=o.svg)||void 0===r||r.nodes.forEach(N=>{var Et,bt,At,Bt,ie,ke,we,Te,Oe,Ae;l.push(null===(Et=N.source)||void 0===Et||null===(Et=Et.image)||void 0===Et?void 0:Et.path),l.push(null===(bt=N.source)||void 0===bt||null===(bt=bt.audio)||void 0===bt?void 0:bt.path),l.push(null===(At=N.source)||void 0===At||null===(At=At.video)||void 0===At?void 0:At.path),l.push(null===(Bt=N.source)||void 0===Bt||null===(Bt=Bt.file)||void 0===Bt?void 0:Bt.path),l.push(null===(ie=N.source)||void 0===ie||null===(ie=ie.iframe)||void 0===ie?void 0:ie.path),l.push(null===(ke=N.source)||void 0===ke||null===(ke=ke.track)||void 0===ke?void 0:ke.path),l.push(null===(we=N.interactive)||void 0===we||null===(we=we.show)||void 0===we||null===(we=we.audio)||void 0===we||null===(we=we.source)||void 0===we?void 0:we.path),l.push(null===(Te=N.interactive)||void 0===Te||null===(Te=Te.click)||void 0===Te||null===(Te=Te.audio)||void 0===Te||null===(Te=Te.source)||void 0===Te?void 0:Te.path),l.push(null===(Oe=N.interactive)||void 0===Oe||null===(Oe=Oe.click)||void 0===Oe||null===(Oe=Oe.image)||void 0===Oe||null===(Oe=Oe.source)||void 0===Oe?void 0:Oe.path),l.push(null===(Ae=N.interactive)||void 0===Ae||null===(Ae=Ae.click)||void 0===Ae||null===(Ae=Ae.video)||void 0===Ae||null===(Ae=Ae.source)||void 0===Ae?void 0:Ae.path)}),l.push(null===(m=o.test)||void 0===m||null===(m=m.audiotrue)||void 0===m?void 0:m.path),l.push(null===(w=o.test)||void 0===w||null===(w=w.audiofalse)||void 0===w?void 0:w.path),l.push(null===(c=o.test)||void 0===c||null===(c=c.effecttrue)||void 0===c?void 0:c.path),l.push(null===(A=o.test)||void 0===A||null===(A=A.effectfalse)||void 0===A?void 0:A.path),l.push(null===(p=o.test)||void 0===p||null===(p=p.icontrue)||void 0===p?void 0:p.path),l.push(null===(U=o.test)||void 0===U||null===(U=U.iconfalse)||void 0===U?void 0:U.path)}),l.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,n,r)=>r.indexOf(o)==n)}get getFonts(){var i;return(0,Ft.d)(JSON.stringify(null!==(i=this._dataSource.slides)&&void 0!==i?i:[]))}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,_.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let l=o=>{var n,r;return null===(n=o)||void 0===n||n.filter(m=>m.type==x.h.GROUP).forEach(m=>{var w;m.nodes=l(null===(w=m.nodes)||void 0===w?void 0:w.filter(c=>!c.isdeleted))}),(o=null===(r=o)||void 0===r?void 0:r.filter(m=>{var w,c;return m.type!=x.h.GROUP||(null!==(w=null===(c=m.nodes)||void 0===c?void 0:c.length)&&void 0!==w?w:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=l(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(r=>!r.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,_.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,l;return null!==(i=null===(l=this.slide)||void 0===l?void 0:l.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,l;this._slideIdx<(null!==(i=null===(l=this._dataSource.slides)||void 0===l?void 0:l.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,_.rN)(),(0,mt.t)(this.slide)}openSlide(i,l){var o,n,r,m,w;if(i)for(let N=0,Et=null!==(c=null===(A=this._dataSource.slides)||void 0===A?void 0:A.length)&&void 0!==c?c:0;N<Et;N++){var c,A,p;if((null!==(p=this._dataSource.slides)&&void 0!==p?p:[])[N].id==i){this._slideIdx=N;break}}else if(l&&l>=0&&l<(null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==o?o:0))this._slideIdx=null!=l?l:0;else{var U;this._slideIdx=0,null!==(U=this._dataSource.slides)&&void 0!==U&&U.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,_.rN)(),null!==(r=this.slide)&&void 0!==r&&null!==(r=r.svg)&&void 0!==r&&r.viewBox&&(Lt.screen.frameSize=this.slide.svg.viewBox),(0,mt.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(w=this._dataSource.slides)||void 0===w?void 0:w.length)&&void 0!==m?m:0,this.slide)}addSlide(){var i,l,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(l=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==l?l:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,l,o){var n,r,m,w,c;let A=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(U=>U.id==i);if(!o||!A||null!=A&&null!==(r=A.svg)&&void 0!==r&&r.nodes.filter(U=>!U.isdeleted).length)return this.insertSlide(i,l,o);let p=null!==(m=null===(w=this._dataSource.slides)||void 0===w?void 0:w.indexOf(A))&&void 0!==m?m:0;null===(c=this._dataSource.slides)||void 0===c||c.splice(p,1,o),this._slideIdx=p,this.openSlide(void 0,this._slideIdx)}insertSlide(i,l,o){var n,r,m,w,c;let A=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(N=>N.id==i))&&void 0!==n?n:this._defaultSlide,p=(null!==(m=null===(w=this._dataSource.slides)||void 0===w?void 0:w.indexOf(A))&&void 0!==m?m:0)+l;var U;o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(U=o.svg)&&void 0!==U&&U.viewBox||o.svg&&(o.svg.viewBox=Lt.screen.frameSize)):o=this._defaultSlide,null===(c=this._dataSource.slides)||void 0===c||c.splice(p,0,o),this._slideIdx=p,this.openSlide(void 0,this._slideIdx)}copySlide(i){var l,o,n,r,m,w,c;let A=null!==(l=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(N=>N.id==i))&&void 0!==l?l:this._defaultSlide,p=(null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.indexOf(A))&&void 0!==n?n:0)+1,U=Object.assign(JSON.parse(JSON.stringify(A)),{id:this.newSlideId,code:void 0,name:`${A.name} + (Copy)`});null===(m=this._dataSource.slides)||void 0===m||m.splice(p,0,U),this.changeSlide(this.slides,this.slideIdx,null!==(w=null===(c=this._dataSource.slides)||void 0===c?void 0:c.length)&&void 0!==w?w:0,this.slide)}moveSlide(i,l){var o,n,r,m,w,c;let A=null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(U=>U.id==i))&&void 0!==o?o:this._defaultSlide,p=null!==(r=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(A))&&void 0!==r?r:0;null===(w=this._dataSource.slides)||void 0===w||w.splice(p+l,0,null===(c=this._dataSource.slides)||void 0===c?void 0:c.splice(p,1)[0])}deleteSlide(i){var l,o,n,r,m,w;let c=null!==(l=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(N=>N.id==i))&&void 0!==l?l:this._defaultSlide,A=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.indexOf(c))&&void 0!==n?n:0;if(null===(m=this._dataSource.slides)||void 0===m||m.splice(A,1),null!==(w=this._dataSource.slides)&&void 0!==w&&w.length)if(A<this._slideIdx){var p,U;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(U=this._dataSource.slides)||void 0===U?void 0:U.length)&&void 0!==p?p:0,this.slide)}else A==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var l,o,n,r,m;let w=null!==(l=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(A=>A.id==i))&&void 0!==l?l:this._defaultSlide,c=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.indexOf(w))&&void 0!==n?n:0;if(w.isdeleted=!0,null!==(m=this._dataSource.slides)&&void 0!==m&&null!==(m=m.filter(A=>!A.isdeleted))&&void 0!==m&&m.length){let A=!0;for(;w.isdeleted;)A?c++:c--,this._dataSource.slides[c]?w=this._dataSource.slides[c]:A=!A;this.openSlide(w.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,l,o,n){this._fnChangeSlides.forEach(r=>r(i,l,o,n))}set node(i){var l,o;let n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find((r,m)=>m==this._slideIdx);null!=n&&null!==(o=n.svg)&&void 0!==o&&o.nodes&&n.svg.nodes.push(i),Lt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,mt.t)(n),(0,mt.t)(n,null==n?void 0:n.id)}findNode(i){var l;let o=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find((N,Et)=>Et==this._slideIdx),n=null==o?void 0:o.svg,r=(N,Et)=>{let bt=null==N?void 0:N.find(ie=>ie.id==i);if(bt)return bt.pid=Et,bt;let At=0,Bt=N.length||0;for(;At<Bt&&!bt&&(bt=r(N[At].nodes||[],N[At].id),!bt);)At++;return bt},m=r((null==n?void 0:n.nodes)||[]);var w,c,A,p,U;return m?(m.style=null!==(w=m.style)&&void 0!==w?w:{},m.source=null!==(c=m.source)&&void 0!==c?c:{},m.animate=null!==(A=m.animate)&&void 0!==A?A:{},m.interactive=null!==(p=m.interactive)&&void 0!==p?p:{},m.variable=null!==(U=m.variable)&&void 0!==U?U:{},m):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var l;let o=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find((w,c)=>c==this._slideIdx),n=null==o?void 0:o.svg,m=w=>{let c=(null==w?void 0:w.find(bt=>bt.id==i))||(w=>{let c=null,A=0,p=w.length||0;for(;A<p&&!c;){if(c=m(w[A].nodes),c){c.pid=w[A].id;break}A++}var U,N,Et,bt,At;return c&&(c.style=null!==(U=c.style)&&void 0!==U?U:{},c.source=null!==(N=c.source)&&void 0!==N?N:{},c.animate=null!==(Et=c.animate)&&void 0!==Et?Et:{},c.interactive=null!==(bt=c.interactive)&&void 0!==bt?bt:{},c.variable=null!==(At=c.variable)&&void 0!==At?At:{}),c})((null==w?void 0:w.filter(bt=>bt.type==x.h.GROUP))||[]);var A,p,U,N,Et;return c&&(c.style=null!==(A=c.style)&&void 0!==A?A:{},c.source=null!==(p=c.source)&&void 0!==p?p:{},c.animate=null!==(U=c.animate)&&void 0!==U?U:{},c.interactive=null!==(N=c.interactive)&&void 0!==N?N:{},c.variable=null!==(Et=c.variable)&&void 0!==Et?Et:{}),c};return m((null==n?void 0:n.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,l,o,n,r){var m;let w=null===(m=this._dataSource.slides)||void 0===m?void 0:m.find((p,U)=>U==this._slideIdx),c=null==w?void 0:w.svg,A=p=>{let U=[];return p.filter(N=>!N.isdeleted).forEach(N=>{N.type==x.h.GROUP?U=U.concat(A(N.nodes||[])):i>N.size.x||l>N.size.y||o<N.size.x+N.size.width||n<N.size.y+N.size.height||(r?N.type==r&&U.push(N.id):U.push(N.id))}),U};return A((null==c?void 0:c.nodes)||[])}getNodeOnArea(i,l,o,n,r){var m;let w=null===(m=this._dataSource.slides)||void 0===m?void 0:m.find((p,U)=>U==this._slideIdx),c=null==w?void 0:w.svg,A=p=>{let U=[];return p.filter(N=>!N.isdeleted).forEach(N=>{N.type==x.h.GROUP?U=U.concat(A(N.nodes||[])):N.size.x+N.size.width<i||N.size.y+N.size.height<l||N.size.x>o||N.size.y>n||(r?N.type==r&&U.push(N.id):U.push(N.id))}),U};return A((null==c?void 0:c.nodes)||[])}deleteNode(i,l){var o;return this.getNode(i).isdeleted=null==l||l,(0,mt.t)(this.slide),(0,mt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var l,o;let n=this.getNode(i),r=Math.ceil(1e9*Math.random());return null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l||l.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:r})),Object.assign(n,{isdeleted:!0}),(0,mt.t)(this.slide),(0,mt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),r}addGroup(i,l){var o;let n=this.getNode(i),r=this.getNode(l);r.nodes=r.nodes||[];let m=Math.ceil(1e9*Math.random());return r.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:m})),Object.assign(n,{isdeleted:!0}),(0,mt.t)(this.slide),(0,mt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),m}setNodeP(i,l){var o;let n=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(r=>r.id==i);n&&(n.pid=l||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,l){var o,n,r,m,w,c;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((p,U)=>{p.index=U+1});let A=(null!==(n=null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r?void 0:r.nodes.length)&&void 0!==n?n:0)+1;i.map(p=>{var U,N;return{id:p,index:null!==(U=null===(N=this.slide)||void 0===N||null===(N=N.svg)||void 0===N||null===(N=N.nodes.find(Et=>Et.id==p))||void 0===N?void 0:N.index)&&void 0!==U?U:0}}).sort((p,U)=>p.index-U.index).forEach(p=>{var N,U;l?null===(N=this.slide)||void 0===N||null===(N=N.svg)||void 0===N||N.nodes.filter((Et,bt)=>Et.id==p.id).forEach(Et=>{Et.index=l+p.index+p.index/1e3}):null===(U=this.slide)||void 0===U||null===(U=U.svg)||void 0===U||U.nodes.filter(Et=>Et.id==p.id).forEach(Et=>{Et.index=A+p.index})}),null===(m=this.slide)||void 0===m||null===(m=m.svg)||void 0===m||m.nodes.sort((p,U)=>{var N,Et;return(null!==(N=p.index)&&void 0!==N?N:0)-(null!==(Et=U.index)&&void 0!==Et?Et:0)}),(0,mt.$)(this.slide),null===(w=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===w||w.remove(),null===(c=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===c||c.remove(),(0,C.D)(Lt.dataSelect.nodes)}sendToBackStep(i,l){var o,n,r,m;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((w,c)=>{w.index=c+1}),i.map(w=>{var c,A;return{id:w,index:null!==(c=null===(A=this.slide)||void 0===A||null===(A=A.svg)||void 0===A||null===(A=A.nodes.find(p=>p.id==w))||void 0===A?void 0:A.index)&&void 0!==c?c:0}}).sort((w,c)=>w.index-c.index).forEach(w=>{var A,c;l?null===(A=this.slide)||void 0===A||null===(A=A.svg)||void 0===A||A.nodes.filter(p=>p.id==w.id).forEach(p=>{p.index=l+w.index+w.index/1e3}):null===(c=this.slide)||void 0===c||null===(c=c.svg)||void 0===c||c.nodes.filter(p=>p.id==w.id).forEach(p=>{p.index=w.index/100-1})}),null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.sort((w,c)=>{var A,p;return(null!==(A=w.index)&&void 0!==A?A:0)-(null!==(p=c.index)&&void 0!==p?p:0)}),(0,mt.$)(this.slide),null===(r=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(m=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===m||m.remove(),(0,C.D)(Lt.dataSelect.nodes)}bringToFrontArea(i){var l,o,n,r;let m=i.map(bt=>Lt.data.getNode(bt)).filter(bt=>!bt.isfake),{x1:w,y1:c,x2:A,y2:p}=$t(m),U=this.getNodeOnArea(w,c,A,p);null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l||l.nodes.forEach((bt,At)=>{bt.index=At+1});let N=U.map(bt=>{var At,Bt;return null!==(At=null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||null===(Bt=Bt.nodes.find(ie=>ie.id==bt))||void 0===Bt?void 0:Bt.index)&&void 0!==At?At:0}),Et=Math.max.apply(null,N);i.forEach((bt,At)=>{var Bt;null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||Bt.nodes.filter(ie=>ie.id==bt).forEach(ie=>{ie.index=Et+(At+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((bt,At)=>{var Bt,ie;return(null!==(Bt=bt.index)&&void 0!==Bt?Bt:0)-(null!==(ie=At.index)&&void 0!==ie?ie:0)}),(0,mt.$)(this.slide),null===(n=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===r||r.remove(),(0,C.D)(Lt.dataSelect.nodes)}sendToBackArea(i){var l,o,n,r;let m=i.map(bt=>Lt.data.getNode(bt)).filter(bt=>!bt.isfake),{x1:w,y1:c,x2:A,y2:p}=$t(m),U=this.getNodeOnArea(w,c,A,p);null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l||l.nodes.forEach((bt,At)=>{bt.index=At+1});let N=U.map(bt=>{var At,Bt;return null!==(At=null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||null===(Bt=Bt.nodes.find(ie=>ie.id==bt))||void 0===Bt?void 0:Bt.index)&&void 0!==At?At:0}),Et=Math.min.apply(null,N)-1;i.forEach((bt,At)=>{var Bt;null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||Bt.nodes.filter(ie=>ie.id==bt).forEach(ie=>{ie.index=Et+(At+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((bt,At)=>{var Bt,ie;return(null!==(Bt=bt.index)&&void 0!==Bt?Bt:0)-(null!==(ie=At.index)&&void 0!==ie?ie:0)}),(0,mt.$)(this.slide),null===(n=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===r||r.remove(),(0,C.D)(Lt.dataSelect.nodes)}}const $t=W=>{let i=999999,l=999999,o=-999999,n=-999999;return W.forEach(r=>{i=Math.min(i,r.size.x),l=Math.min(l,r.size.y),o=Math.max(o,r.size.x+r.size.width),n=Math.max(n,r.size.y+r.size.height)}),{x1:i,y1:l,x2:o,y2:n}};class oe{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(l){switch(l.type){case"add":Lt.data.deleteNode(l.from.id);break;case"edit":break;case"delete":Lt.data.deleteNode(l.from.id,!1);break;case"size":{let{id:o,type:n,size:r,attribute:m}=Lt.data.getNode(l.from.id);Object.assign(r,l.from.size),Object.assign(m,(0,z.xW)(n,r,m)),(0,_.tD)(window.document.getElementById(o),m);break}case"attribute":{let{id:o,attribute:n}=Lt.data.getNode(l.from.id);Object.assign(n,l.from.attribute),(0,_.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=Lt.data.getNode(l.from.id);Object.assign(null!=n?n:{},l.from.style),(0,_.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:r}=Lt.data.getNode(l.from.id);Object.assign(null!=r?r:{},l.from.source),(0,_.KG)(window.document.getElementById(o),n,null!=r?r:{});break}case"animate":{let{animate:o}=Lt.data.getNode(l.from.id);Object.assign(null!=o?o:{},l.from.animate);break}case"interactive":{let{interactive:o}=Lt.data.getNode(l.from.id);Object.assign(null!=o?o:{},l.from.interactive);break}case"variable":{let{variable:o}=Lt.data.getNode(l.from.id);Object.assign(null!=o?o:{},l.from.variable);break}}}),Lt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(l){switch(l.type){case"add":Lt.data.deleteNode(l.to.id,!1);break;case"edit":break;case"delete":Lt.data.deleteNode(l.to.id,!0);break;case"size":{let{id:o,type:n,size:r,attribute:m}=Lt.data.getNode(l.to.id);Object.assign(r,l.to.size),Object.assign(m,(0,z.xW)(n,r,m)),(0,_.tD)(window.document.getElementById(o),m);break}case"attribute":{let{id:o,attribute:n}=Lt.data.getNode(l.to.id);Object.assign(n,l.to.attribute),(0,_.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=Lt.data.getNode(l.to.id);Object.assign(null!=n?n:{},l.to.style),(0,_.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:r}=Lt.data.getNode(l.to.id);Object.assign(null!=r?r:{},l.to.source),(0,_.KG)(window.document.getElementById(o),n,null!=r?r:{});break}case"animate":{let{animate:o}=Lt.data.getNode(l.to.id);Object.assign(null!=o?o:{},l.to.animate);break}case"interactive":{let{interactive:o}=Lt.data.getNode(l.to.id);Object.assign(null!=o?o:{},l.to.interactive);break}case"variable":{let{variable:o}=Lt.data.getNode(l.to.id);Object.assign(null!=o?o:{},l.to.variable);break}}}),Lt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class re{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var l,o;this._frameSize.width=null!==(l=null==i?void 0:i.width)&&void 0!==l?l:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,l,o){var n;if(!(i<.01||i>100)){if(l=null!==(n=l)&&void 0!==n?n:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-l.x,this._dislocation.y=this._height/i/2-l.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var r={x:Math.max(0,Math.min((0,h.z)(l.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,h.z)(l.y/this._height,1e3),1))},m={x:(this._width/i-this._width/this._scale)*r.x,y:(this._height/i-this._height/this._scale)*r.y};this._dislocation.x+=m.x,this._dislocation.y+=m.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}zoomIn(){this.scaleTo(this._scale+.04*this._scale)}zoomOut(){this.scaleTo(this._scale-.04*this._scale)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,l){this._dislocation.x=i.x+l.x/this._scale,this._dislocation.y=i.y+l.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,_.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(l=>l(i))}}var ae=v(6195);class pe{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,ae.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,ae._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(l=>l(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(l=>l(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(l=>l(i)),this.saveConfig()}}var _e=v(5619),Se=v(334),be=v(3591),ve=function(W){return W&&JSON.parse(JSON.stringify(W))},Me=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Fe=[],Ve={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},Ue={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class We{constructor(){this._data_variables=ve(Me).concat(ve(Fe)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(l=>{l(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(l=>{l(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var l of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))l.if&&l.if.length>0&&(this.checkValueConditions(l.if)?this.setValueOperators(l.then||[]):this.setValueOperators(l.else||[]))}}renew(){this._data_variables=ve(Me).concat(ve(Fe)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let l={};"string"==typeof i?l=JSON.parse(i):"object"==typeof i&&(l=i),this._data_variables=l.variables||[],this._data_conditions=l.conditions||(o=>(this._data_variables.map(n=>n.change||[]).forEach(n=>{o=o.concat(n)}),o))([]),Me.forEach(o=>{var n=this._data_variables.filter(r=>r.key==o.key);n.length?n.forEach(function(r,m,w){r.type=o.type,r.readonly=o.readonly,r.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return ve(Ve)}getConditionTemp(){return ve(Ue)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,l){return i.localeCompare(l)})}getVariableAll(){return this._data_variables.length?ve((W=this._data_variables,i="key",function(l){for(var o of W.map(function(n){return n[i]}).sort())W.filter(function(n){return n[i]==o}).forEach(function(n){l.push(n)}),W=W.filter(function(n){return n[i]!=o});return l}([]))):ve(Me).concat(ve(Fe));var W,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Me.forEach(l=>{var o=this._data_variables.filter(n=>n.key==l.key);o.length?o.forEach((n,r,m)=>{n.type=l.type,n.readonly=l.readonly,n.system=l.system}):this._data_variables.push(l)}))}getVariable(i){return i?ve(this._data_variables.filter(l=>l.key==i)[0]||{}):{}}setVariable(i,l,o){if(i){switch([null,void 0,NaN,1/0].indexOf(l)>=0&&(l=""),o||(o=(this._data_variables.filter(r=>r.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof l&&(l=l.toString().trim());break;case"number":"number"!=typeof l&&(l=parseFloat(l)||0);break;case"boolean":"string"==typeof l&&(l=l.toLowerCase()),"boolean"!=typeof l&&(l="1"==l||"true"==l||"yes"==l||"dung"==l)}var n=this._data_variables.filter(r=>r.key==i);n.length?n.forEach(function(r,m,w){r.value=l,r.type=o}):this._data_variables.push({key:i,value:l,type:o})}}getValue(i,l){if(!i)return"";var o=this._data_variables.filter(function(m){return m.key==i});if(o.length){var r,n=o[0]||{};switch(this.OnGetActionExecuting(n),l||(l=n.type||null),l){case"string":r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":"string"==typeof n.value?n.value||"":n.value.toString().trim();break;case"number":r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?0:"number"==typeof n.value?n.value||0:parseFloat(n.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(n.value)>=0?r=!1:"boolean"==typeof n.value?r=n.value:(r=(n.value+"").toLowerCase(),r="1"==n.value||"true"==n.value||"yes"==n.value||"dung"==n.value);break;case"audio-src":r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></audio>`:"";break;case"video-src":r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></video>`:"";break;case"img-src":r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<img style="width:100%;vertical-align:middle;" src="${n.value}"/>`:"";break;default:r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value}return this.OnGetActionExecuted(n),r}return null}setValue(i,l,o){if(i){switch([null,void 0,NaN,1/0].indexOf(l)>=0&&(l=""),o||(o=(this._data_variables.filter(function(m){return m.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof l&&(l=l.toString().trim());break;case"number":"number"!=typeof l&&(l=parseFloat(l)||0);break;case"boolean":"string"==typeof l&&(l=l.toLowerCase()),"boolean"!=typeof l&&(l="1"==l||"true"==l||"yes"==l||"dung"==l)}var n=this._data_variables.filter(function(m){return m.key==i});if(n.length){var r=n[0];this.OnSetActionExecuting(r),r&&(r.value=l),this.OnSetActionExecuted(r)}}}getConditionAll(){return ve(this._data_conditions.sort(function(i,l){return i.idx-l.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?ve(this._data_conditions.filter(l=>l.variable==i||(l.variables||[]).indexOf(i)>=0).sort(function(l,o){return l.idx-o.idx})):{}}switchCondition(i,l,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof l&&(l=l.toLowerCase().trim()),o.split(";").map(function(n){return l==n.trim()?1:0}).reduce(function(n,r){return n+r})>0):l==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof l&&(l=l.toLowerCase().trim()),0==o.split(";").map(function(n){return l==n.trim()?1:0}).reduce(function(n,r){return n+r})):l!=o;case">=":return l>=o;case"<=":return l<=o;case">":return l>o;case"<":return l<o;case"\u2208":return o=(o+"").toLowerCase().trim(),l=(l+"").toLowerCase().trim(),o.split(";").map(function(n){return l.indexOf(n.trim())>=0?1:0}).reduce(function(n,r){return n+r})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),l=(l+"").toLowerCase().trim(),0==o.split(";").map(function(n){return l.indexOf(n.trim())>=0?1:0}).reduce(function(n,r){return n+r});default:return!1}}switchOperator(i,l,o){switch(i){case"+":return l+o;case"-":return l-o;case"*":return l*o;case"/":return l/o;case"=":return o;case"=!":return!o;case"==":return l==o;case"!=":return l!=o}}switchFormula(i,l){switch(i){case"sum":return l.reduce(function(n,r){return n+r});case"sub":return l.reduce(function(n,r){return n-r});case"pro":return l.reduce(function(n,r){return n*r});case"div":return l.reduce(function(n,r){return n/r});case"avg":var o=l.reduce(function(n,r){return n+r})/(l.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,l);case"max":return Math.max.apply(null,l);case"and":return l.reduce(function(n,r){return n&&r});case"or":return l.reduce(function(n,r){return n||r});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var l=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),l)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(l=>{switch(l.type){case"variable":return this.switchValueType_Condition(l)?0:1;case"variables":return 0==l.variables.map(o=>this.switchValueType_Condition(Object.assign(ve(l),{variable:o}))?0:1).reduce(function(o,n){return o+n})?0:1;default:return 0}}).reduce((l,o)=>(null!=l?l:0)+(null!=o?o:0))}setValueOperators(i){for(var l of i)switch(l.type){case"variable":this.setValue(l.variable,this.getValueOperator(l));break;case"variables":for(var o of l.variables)this.setValue(o,this.getValueOperator(Object.assign(ve(l),{variable:o})));break;case"slide":_e.J.runSlide(void 0,void 0,l.slide);break;case"node":{var n;(0,be.GD)({id:l.node,nodeStatus:_e.J.nodeStatus,slideStatus:_e.J.slideStatus});let r=_e.J.findNode(l.node);null!=r&&null!==(n=r.interactive)&&void 0!==n&&n.click&&(0,Se.J)(r,_e.J.nodeStatus,_e.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(l=>{l(i)})}}class Ge{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,l,o){if(this._pointer_type=i,l)switch(i){case S.P.PEN:this._pen_type=l;break;case S.P.SHAPE:this._shape_type=l,o&&l===x.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case S.P.PEN:this._pen_type||(this._pen_type=V.F.DRAW);break;case S.P.SHAPE:this._shape_type||(this._shape_type=x.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,l,o){this._fnChangePointerTypes.forEach(n=>n(i,l,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,l,o){this._fnChangePointerTypeTemps.forEach(n=>n(i,l,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,l,o){this._fnChangePenTypes.forEach(n=>n(i,l,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,l,o){this._fnChangeShapeTypes.forEach(n=>n(i,l,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,l,o){this._fnChangePolygonTypes.forEach(n=>n(i,l,o))}set onchange(i){this._fnChanges.push(i)}change(i,l,o){this._fnChanges.forEach(n=>n(i,l,o))}}const Lt=new class Ye{constructor(){this._container="",this._svg="",this._screen=re.prototype,this._data=Gt.prototype,this._dataSelect=Ct.prototype,this._slide=_t.prototype,this._history=oe.prototype,this._attribute=pe.prototype,this._pointer=Ge.prototype,this._variable=We.prototype,this._data=new Gt,this._dataSelect=new Ct,this._slide=new _t,this._history=new oe,this._attribute=new pe,this._pointer=new Ge,this._variable=new We,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,variable:this._variable.get,resources:this._data.getResource,fonts:this._data.getFonts,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,l,o,n,r;this._screen.screen=(i=jQuery(this._container).offset(),l=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(n=null==i?void 0:i.left)&&void 0!==n?n:0,y:null!==(r=null==i?void 0:i.top)&&void 0!==r?r:0},width:null!=l?l:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new re,(W=>{new _.cR(W.container,W.target);var i=(n,r,m,w)=>{switch(n){case S.P.POINTER:jQuery(W.target).css({cursor:"auto"});break;case S.P.HAND:w?jQuery(W.target).css({cursor:"grabbing"}):jQuery(W.target).css({cursor:"grab"});break;case S.P.PEN:switch(r){case V.F.DRAW:jQuery(W.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case V.F.HIGHTLIGH:jQuery(W.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case S.P.ERASER:jQuery(W.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case S.P.SHAPE:jQuery(W.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case S.P.TEXT:case S.P.FOREIGNOBJECT:jQuery(W.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};Lt.pointer.onchange=(n,r,m)=>{i(n,r)},jQuery(W.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",n=>{i(Lt.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",n=>{i(Lt.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",n=>{n.ctrlKey&&n.preventDefault()},{passive:!1}),jQuery(W.container).off("wheel.icdt-init").on("wheel.icdt-init",n=>{var r;n.preventDefault();let m=null!==(r=n.originalEvent)&&void 0!==r?r:n;if(!m.deltaX&&m.deltaY!=Math.floor(m.deltaY)||m.ctrlKey){var w=Lt.screen.scale;Lt.screen.scaleTo(w-.04*w*(m.deltaY>0?1:-1),(0,nt.D)({x:n.clientX,y:n.clientY},1,{x:0,y:0},Lt.screen.offset))}else Lt.screen.move(Lt.screen.dislocation,{x:-m.deltaX,y:-m.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{Lt.screen.actived=!!jQuery(n.target).parents(Lt.container).length}),jQuery(W.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",n=>{}),jQuery(W.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",n=>{Lt.pointer.pointer_type_temp==S.P.HAND&&(Lt.pointer.pointer_type_temp=S.P.POINTER)}),jQuery(W.container).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{0==n.button&&(W.container.includes("#")&&W.container.includes(n.target.getAttribute("id"))||W.container.includes(".")&&W.container.includes(n.target.getAttribute("class"))||W.container.includes(n.target.nodeName))&&(Lt.pointer.pointer_type_temp||Lt.pointer.pointer_type)===S.P.POINTER&&(Lt.dataSelect.ids=[])}),jQuery(W.container).off("touchmove.icdt-init").on("touchmove.icdt-init",n=>{n.preventDefault()});const l=n=>{switch(Lt.pointer.pointer_type_temp||Lt.pointer.pointer_type){case S.P.POINTER:G(n);break;case S.P.HAND:(W=>{(0,ft.I)(W,new Q,1,{x:0,y:0})})(n);break;case S.P.PEN:(0,Rt.u)(n);break;case S.P.SHAPE:(W=>{var i=null;switch(Lt.pointer.shape_type){case x.h.CIRCLE:i=new tt;break;case x.h.ELLIPSE:i=new F;break;case x.h.LINE:i=new D;break;case x.h.RECT:i=new L;break;case x.h.POLYGON:var l;i=new Ot(null===(l=y.find(o=>o.type==Lt.pointer.polygon_type))||void 0===l?void 0:l.ratios);break;case x.h.FOREIGNOBJECT:i=new st;break;case x.h.IMAGE:i=new zt;break;case x.h.TEXT:case x.h.PATH:i=new St}i&&(0,ft.I)(W,i)})(n);break;case S.P.FOREIGNOBJECT:(W=>{(0,ft.I)(W,new st)})(n);break;case S.P.IMAGE:(W=>{(0,ft.I)(W,new zt)})(n);break;case S.P.TEXT:(W=>{(0,ft.I)(W,new B)})(n);break;case S.P.ERASER:(W=>{(0,ft.I)(W,new Zt)})(n);break;case S.P.INDEX:(0,b.h)(n)}};let o=!1;jQuery(W.target).off("touchstart.icdt-init").on("touchstart.icdt-init",n=>{o=!0,l({touchEvent:n})}),jQuery(W.target).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{if(1!=n.button){if(o)return void(o=!1);l({mouseEvent:n})}}),W.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",n=>{Lt.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,qt.K)(n))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",n=>{Lt.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,qt.K)(n))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(ce,Kt,v)=>{v.d(Kt,{h:()=>I,y:()=>O});var S=v(7873),_=v(6611),rt=v(9506),z=v(1308),ft=v(5970);const I=Q=>{var x,it,y,at;let h=(null===(x=Q.mouseEvent)||void 0===x?void 0:x.target)||(null===(it=Q.touchEvent)||void 0===it?void 0:it.target),tt=(null==h?void 0:h.getAttribute("id"))||"",M=null==h?void 0:h.nodeName,F=jQuery(h).parents("g[id]").attr("id")||"";if(![S.F.INDEX_GROUP].includes(F))if(null!==(y=Q.mouseEvent)&&void 0!==y&&y.altKey||null!==(at=Q.touchEvent)&&void 0!==at&&at.altKey||!tt||tt.match(/[^0-9]/)||!_.L.dataSelect.nodeName.includes(M)){var J;_.L.dataSelect.ids.length&&(_.L.dataSelect.ids=[]),(0==(null===(J=Q.mouseEvent)||void 0===J?void 0:J.button)||Q.touchEvent)&&((Q,x)=>{let tt=(0,ft.RY)(S.F.SCAN_GROUP,"g"),M=(0,rt.CE)(0,0,1,1);(0,ft.xJ)(tt,M),((Q,x,it,y)=>{(0,z.I)(Q,{start:tt=>{},move:(tt,M)=>{((tt,M,F,J)=>{x=(0,rt.CE)(tt,M,F,J),(0,ft.xJ)(it,x)})(M[0][0],M[0][1],tt.x,tt.y)},end:(tt,M)=>{null==it||it.remove(),_.L.dataSelect.ids=_.L.data.getNodeInArea(Math.min(M[0][0],tt.x),Math.min(M[0][1],tt.y),Math.max(M[0][0],tt.x),Math.max(M[0][1],tt.y)),y(_.L.dataSelect.nodes)}})})(Q,M,tt,x)})(Q,G)}else{var L,j;let Ot=parseFloat(tt||"0");_.L.dataSelect.ids=null!==(L=Q.mouseEvent)&&void 0!==L&&L.shiftKey||null!==(j=Q.touchEvent)&&void 0!==j&&j.shiftKey?[Ot].concat(_.L.dataSelect.ids).filter((D,Dt,It)=>It.indexOf(D)==Dt):[Ot],G(_.L.dataSelect.nodes)}},G=Q=>{var x,it;let y=1;var at,h;if(Q.length&&(y=Math.max.apply(null,null!==(at=null===(h=_.L.data.slide)||void 0===h||null===(h=h.svg)||void 0===h?void 0:h.nodes.map(M=>{var F;return null!==(F=M.idx)&&void 0!==F?F:0}))&&void 0!==at?at:[0])+1),1==Q.length)Q[0].idx||(Q[0].idx=y,Q[0].time=0);else if(Q.length>=0){let M=Q.map(J=>{var L;return null!==(L=J.idx)&&void 0!==L?L:0}).filter(J=>J>0),F=M.length?Math.min.apply(null,M):y;Q.forEach(J=>{var L;J.idx=F,J.time=null!==(L=J.time)&&void 0!==L?L:0})}let tt=(0,ft.RY)(S.F.INDEX_GROUP,"g");(0,ft.IA)(tt,null!==(x=null===(it=_.L.data.slide)||void 0===it||null===(it=it.svg)||void 0===it?void 0:it.nodes)&&void 0!==x?x:[])},O=Q=>{var x,it,y;null!=Q&&null!==(x=Q.svg)&&void 0!==x&&x.nodes&&Q.svg.nodes.forEach(h=>{h.idx=0,h.time=null});let at=(0,ft.RY)(S.F.INDEX_GROUP,"g");(0,ft.IA)(at,null!==(it=null===(y=_.L.data.slide)||void 0===y||null===(y=y.svg)||void 0===y?void 0:y.nodes)&&void 0!==it?it:[])}},7135:(ce,Kt,v)=>{v.d(Kt,{K:()=>x,X:()=>Q});var S=v(6195),_=v(1477),rt=v(3603),z=v(6611),ft=v(1026),C=v(9841),f=v(2492),I=v(6752),G=v(5483);const Q=new class O{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:_.r.Escape,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:_.r.Delete,fn:()=>{z.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:_.r.Space,fn:()=>{z.L.pointer.pointer_type_temp=rt.P.HAND}},this.onchange={type:"keyup",key:_.r.Space,fn:()=>{z.L.pointer.pointer_type_temp=rt.P.POINTER}},this.onchange={type:"keydown",key:_.r.ArrowLeft,fn:()=>{z.L.dataSelect.ids.length||z.L.data.backSlide()}},this.onchange={type:"keydown",key:_.r.ArrowRight,fn:()=>{z.L.dataSelect.ids.length||z.L.data.nextSlide()}},this.onchange={type:"keydown",key:_.r.PageDown,fn:()=>{z.L.dataSelect.ids.length||z.L.data.backSlide()}},this.onchange={type:"keydown",key:_.r.PageUp,fn:()=>{z.L.dataSelect.ids.length||z.L.data.nextSlide()}},this.onchange={type:"keydown",key:_.r.ArrowLeft,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(y=>{(0,I.ei)(y,(0,f.z)(y.size.x-(0,C.$)(1)))}),(0,G.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:_.r.ArrowRight,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(y=>{(0,I.ei)(y,(0,f.z)(y.size.x+(0,C.$)(1)))}),(0,G.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:_.r.ArrowUp,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(y=>{(0,I.ZF)(y,(0,f.z)(y.size.y-(0,C.$)(1)))}),(0,G.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:_.r.ArrowDown,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(y=>{(0,I.ZF)(y,(0,f.z)(y.size.y+(0,C.$)(1)))}),(0,G.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:_.r.Digit1,fn:y=>{y.shiftKey&&(z.L.reloadView(),z.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:_.r.Digit0,fn:y=>{y.ctrlKey&&(z.L.screen.zoomTo=100)}},this.onchange={type:"keydown",key:_.r.Equal,fn:y=>{y.ctrlKey&&z.L.screen.zoomIn()}},this.onchange={type:"keydown",key:_.r.Minus,fn:y=>{y.ctrlKey&&z.L.screen.zoomOut()}},this.onchange={type:"keydown",key:_.r.KeyA,fn:y=>{y.ctrlKey&&(z.L.dataSelect.ids=z.L.data.getNodeAll(),(0,G.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:_.r.KeyC,fn:y=>{if(y.ctrlKey){let at=z.L.dataSelect.nodes;at&&(0,S.IB)({params:{type:"nodes",nodes:at}})}}},this.onchange={type:"keydown",key:_.r.KeyV,fn:y=>{y.ctrlKey&&(0,S.A9)({callback:at=>{var h,tt;"nodes"==(null==at?void 0:at.type)&&null!=at&&null!==(h=at.nodes)&&void 0!==h&&h.length&&(null==at||null===(tt=at.nodes)||void 0===tt||tt.forEach(M=>{y.shiftKey||z.L.data.findNode(M.id).id&&(M.size.x+=16,M.size.y+=16),M.id=Math.ceil(1e9*Math.random()),z.L.data.node=M}),(0,ft.t)(z.L.data.slide))}})}},this.onchange={type:"keydown",key:_.r.KeyZ,fn:y=>{y.ctrlKey&&y.shiftKey?z.L.history.redo():y.ctrlKey&&z.L.history.undo()}},this.onchange={type:"keydown",key:_.r.BracketLeft,fn:y=>{y.ctrlKey&&y.shiftKey?z.L.data.sendToBack(z.L.dataSelect.ids):y.ctrlKey?z.L.data.sendToBackStep(z.L.dataSelect.ids,-2):z.L.data.sendToBackArea(z.L.dataSelect.ids)}},this.onchange={type:"keydown",key:_.r.BracketRight,fn:y=>{y.ctrlKey&&y.shiftKey?z.L.data.bringToFront(z.L.dataSelect.ids):y.ctrlKey?z.L.data.bringToFrontStep(z.L.dataSelect.ids,1):z.L.data.bringToFrontArea(z.L.dataSelect.ids)}}}set onchange(y){let at=this._fnChanges.find(h=>h.eventType==y.type&&h.eventKey==y.key);at?at.fns.push(y.fn):this._fnChanges.push({eventType:y.type,eventKey:y.key,fns:[y.fn]})}change(y,at,h){var tt;null===(tt=this._fnChanges.find(M=>M.eventType==y&&M.eventKey==at))||void 0===tt||tt.fns.forEach(M=>M(h))}},x=it=>{Q.change(it.type,it.keyCode||it.which||it.charCode||0,it)}},669:(ce,Kt,v)=>{v.d(Kt,{O:()=>I});var S=v(6407),_=v(5970),rt=v(1131),z=v(9841),ft=v(7873),C=v(6611),f=v(1281);class I{constructor(O,Q){var x,it;let y={stroke:"#FF0000",strokeWidth:(0,z.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,z.$)(8)},{element:at}=(0,S.X)(Math.ceil(1e9*Math.random()),{size:Q});window.document.getElementById(ft.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(j=>null==j?void 0:j.remove()),window.document.getElementById(ft.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(j=>null==j?void 0:j.remove()),null===(x=window.document.getElementById(ft.F.INTERACTIVE_GROUP))||void 0===x||x.appendChild(at);var M=j=>{if(!j.length)return;let Ot=[];if(1==j.length){var q;let{size:D}=null!==(q=null!=O?O:C.L.dataSelect.nodes[0])&&void 0!==q?q:{};if(!D)return;Ot=[[D.x+D.width/2,D.y+D.height/2],j[0]]}else Ot=[...j];J(Ot),F(Ot[0],"start"),F(Ot[Ot.length-1],"end")},F=(j,Ot)=>{j&&((q=>{let{element:D}=(0,f.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==Ot?"#FF0000":"#00BA00",strokeWidth:(0,z.$)(1)},size:{x:j[0]-5,y:j[1]-5,width:10,height:10}});null===(q=window.document.getElementById(ft.F.INTERACTIVE_GROUP))||void 0===q||q.prepend(D)})(),((q,D)=>{let{size:Dt}=null!==(q=null!=O?O:C.L.dataSelect.nodes[0])&&void 0!==q?q:{};if(!Dt)return;let It=[[j[0]-Dt.width/2,j[1]-Dt.height/2],[j[0]+Dt.width/2,j[1]-Dt.height/2],[j[0]+Dt.width/2,j[1]+Dt.height/2],[j[0]-Dt.width/2,j[1]+Dt.height/2],[j[0]-Dt.width/2,j[1]-Dt.height/2]],{element:St}=(0,S.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,z.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,z.$)(8)},size:{x:0,y:0,width:10,height:10,points:It}});null===(D=window.document.getElementById(ft.F.INTERACTIVE_GROUP))||void 0===D||D.prepend(St)})())},J=j=>{let q=rt.n8j().x(D=>D[0]).y(D=>D[1]).curve(rt.qrM)(j);at.setAttribute("d",q)};(0,_.tD)(at,y),M(null!==(it=null==Q?void 0:Q.points)&&void 0!==it?it:[]);let L="";return{start:j=>{L=`M ${j.x} ${j.y} L ${j.x} ${j.y}`},move:(j,Ot)=>{L+=` ${j.x} ${j.y}`,at.setAttribute("d",L)},end:(j,Ot)=>{M(Ot),Ot.length&&(window.interactivePoints=Ot)}}}}},4979:(ce,Kt,v)=>{v.d(Kt,{z:()=>y,u:()=>it});var S=v(7873),_=v(2409),rt=v(6611),z=v(1308),ft=v(5970),C=v(1131),f=v(6407),I=v(1999),G=v(4896);class O{constructor(){let h={stroke:rt.L.attribute.stroke,strokeWidth:rt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:tt,element:M,attribute:F,size:J}=(0,f.X)(Math.ceil(1e9*Math.random()),{attribute:h});(0,ft.tD)(M,F);let L="",j="";return{start:q=>{L=`M ${q.x} ${q.y} L ${q.x} ${q.y}`},move:(q,D)=>{((q,D)=>{L+=` ${q} ${D}`,M.setAttribute("d",L)})(q.x,q.y)},end:(q,D)=>{var Dt;D.length>=3?(j=null!==(Dt=C.n8j().x(et=>et[0]).y(et=>et[1]).curve(C.qrM)(D))&&void 0!==Dt?Dt:"",M.setAttribute("d",j)):M.setAttribute("d",L);let It=(0,G.CS)(j||L),{minX:St,minY:Pt,maxX:st,maxY:kt}=(0,G.lP)(It);J.x=St,J.y=Pt,J.width=st-St||1,J.height=kt-Pt||1,J.ratioMaps=(0,G.nf)(J,It),rt.L.data.node=Object.assign({id:tt,type:I.h.PATH,name:"Path"},{size:J,attribute:F})}}}}class Q{constructor(){let h={stroke:rt.L.attribute.stroke,strokeOpacity:.4,strokeWidth:rt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:tt,element:M,attribute:F,size:J}=(0,f.X)(Math.ceil(1e9*Math.random()),{attribute:h});(0,ft.tD)(M,F);let L="";return{start:q=>{L=`M ${q.x} ${q.y} L ${q.x} ${q.y}`},move:(q,D)=>{((q,D)=>{L+=` ${q} ${D}`,M.setAttribute("d",L)})(q.x,q.y)},end:(q,D)=>{let Dt=(0,G.CS)(L),{minX:It,minY:St,maxX:Pt,maxY:st}=(0,G.lP)(Dt);J.x=It,J.y=St,J.width=Pt-It||1,J.height=st-St||1,J.ratioMaps=(0,G.nf)(J,Dt),rt.L.data.node=Object.assign({id:tt,type:I.h.PATH,name:"Path"},{size:J,attribute:F})}}}}var x=v(669);const it=at=>{switch(rt.L.pointer.pen_type){case _.F.DRAW:(0,z.I)(at,new O);break;case _.F.HIGHTLIGH:(0,z.I)(at,new Q);break;case _.F.INTERACTIVE:y(at)}},y=at=>{var h,tt;let M=(0,ft.RY)(S.F.INTERACTIVE_GROUP,"g"),F=null!==(h=null===(tt=rt.L.data.slide)||void 0===tt||null===(tt=tt.svg)||void 0===tt?void 0:tt.viewBox)&&void 0!==h?h:(()=>{let{width:J,height:L}=rt.L.screen.get;return{x:0,y:0,width:J,height:L}})();(0,ft.KP)(M,F),at&&(0,z.I)(at,new x.O)}},5483:(ce,Kt,v)=>{v.d(Kt,{D:()=>it});var S=v(7873),_=v(6611),rt=v(9506),z=v(1308),ft=v(5970),C=v(2492);const G=(y,at,h,tt,M)=>{let{x:F,y:J,width:L,height:j}=h;0==L&&(L=1),0==j&&(j=1);let Ot=tt.map(st=>Object.assign({},st.size)),D=[],St=!1;(0,z.I)(y,{start:st=>{tt.forEach(st=>{let{id:kt,size:zt,attribute:et}=st;D.push({id:kt,type:"size",from:JSON.parse(JSON.stringify({id:kt,size:zt,attribute:et}))})})},move:(st,kt)=>{((st,kt,zt,et)=>{let qt=zt-st,Rt=et-kt;(()=>{let Y,gt=(L||1)/(j||1);switch(at){case"rect-center":var te,E;Y=null!==(te=y.mouseEvent)&&void 0!==te&&te.shiftKey||null!==(E=y.touchEvent)&&void 0!==E&&E.shiftKey?Math.abs(zt-st)>=Math.abs(et-kt)?{x:F+zt-st,y:J,width:L,height:j}:{x:F,y:J+et-kt,width:L,height:j}:{x:F+zt-st,y:J+et-kt,width:L,height:j};break;case"rect-top-left":var k,d,K,xt,Tt,Mt,Yt,Vt;Y=(null!==(k=y.mouseEvent)&&void 0!==k&&k.shiftKey||null!==(d=y.touchEvent)&&void 0!==d&&d.shiftKey)&&(null!==(K=y.mouseEvent)&&void 0!==K&&K.altKey||null!==(xt=y.touchEvent)&&void 0!==xt&&xt.altKey)?gt>=1?{x:F+(zt-st),y:J+(zt-st)/gt,width:L-2*(zt-st),height:j-2*(zt-st)/gt}:{x:F+(et-kt)*gt,y:J+(et-kt),width:L-2*(et-kt)*gt,height:j-2*(et-kt)}:null!==(Tt=y.mouseEvent)&&void 0!==Tt&&Tt.shiftKey||null!==(Mt=y.touchEvent)&&void 0!==Mt&&Mt.shiftKey?gt>=1?{x:F+(zt-st),y:J+(zt-st)/gt,width:L-(zt-st),height:j-(zt-st)/gt}:{x:F+(et-kt)*gt,y:J+(et-kt),width:L-(et-kt)*gt,height:j-(et-kt)}:null!==(Yt=y.mouseEvent)&&void 0!==Yt&&Yt.altKey||null!==(Vt=y.touchEvent)&&void 0!==Vt&&Vt.altKey?{x:F+(zt-st),y:J+(et-kt),width:L-2*(zt-st),height:j-2*(et-kt)}:{x:F+(zt-st),y:J+(et-kt),width:L-(zt-st),height:j-(et-kt)};break;case"rect-top-right":var Jt,jt,dt,Zt,R,u,B,lt;Y=(null!==(Jt=y.mouseEvent)&&void 0!==Jt&&Jt.shiftKey||null!==(jt=y.touchEvent)&&void 0!==jt&&jt.shiftKey)&&(null!==(dt=y.mouseEvent)&&void 0!==dt&&dt.altKey||null!==(Zt=y.touchEvent)&&void 0!==Zt&&Zt.altKey)?gt>=1?{x:F-(zt-st),y:J-(zt-st)/gt,width:L+2*(zt-st),height:j+2*(zt-st)/gt}:{x:F+(et-kt)*gt,y:J+(et-kt),width:L-2*(et-kt)*gt,height:j-2*(et-kt)}:null!==(R=y.mouseEvent)&&void 0!==R&&R.shiftKey||null!==(u=y.touchEvent)&&void 0!==u&&u.shiftKey?gt>=1?{x:F,y:J-(zt-st)/gt,width:L+(zt-st),height:j+(zt-st)/gt}:{x:F,y:J+(et-kt),width:L-(et-kt)*gt,height:j-(et-kt)}:null!==(B=y.mouseEvent)&&void 0!==B&&B.altKey||null!==(lt=y.touchEvent)&&void 0!==lt&&lt.altKey?{x:F-(zt-st),y:J+(et-kt),width:L+2*(zt-st),height:j-2*(et-kt)}:{x:F,y:J+(et-kt),width:L+(zt-st),height:j-(et-kt)};break;case"rect-bottom-left":var ot,H,b,V,nt,vt,wt,Ct;Y=(null!==(ot=y.mouseEvent)&&void 0!==ot&&ot.shiftKey||null!==(H=y.touchEvent)&&void 0!==H&&H.shiftKey)&&(null!==(b=y.mouseEvent)&&void 0!==b&&b.altKey||null!==(V=y.touchEvent)&&void 0!==V&&V.altKey)?gt>=1?{x:F+(zt-st),y:J+(zt-st)/gt,width:L-2*(zt-st),height:j-2*(zt-st)/gt}:{x:F-(et-kt)*gt,y:J-(et-kt),width:L+2*(et-kt)*gt,height:j+2*(et-kt)}:null!==(nt=y.mouseEvent)&&void 0!==nt&&nt.shiftKey||null!==(vt=y.touchEvent)&&void 0!==vt&&vt.shiftKey?gt>=1?{x:F+(zt-st),y:J,width:L-(zt-st),height:j-(zt-st)/gt}:{x:F-(et-kt)*gt,y:J,width:L+(et-kt)*gt,height:j+(et-kt)}:null!==(wt=y.mouseEvent)&&void 0!==wt&&wt.altKey||null!==(Ct=y.touchEvent)&&void 0!==Ct&&Ct.altKey?{x:F+(zt-st),y:J-(et-kt),width:L-2*(zt-st),height:j+2*(et-kt)}:{x:F+(zt-st),y:J,width:L-(zt-st),height:j+(et-kt)};break;case"rect-bottom-right":var yt,ut,_t,mt,Ft,Gt,$t,oe;Y=(null!==(yt=y.mouseEvent)&&void 0!==yt&&yt.shiftKey||null!==(ut=y.touchEvent)&&void 0!==ut&&ut.shiftKey)&&(null!==(_t=y.mouseEvent)&&void 0!==_t&&_t.altKey||null!==(mt=y.touchEvent)&&void 0!==mt&&mt.altKey)?gt>=1?{x:F-(zt-st),y:J-(zt-st)/gt,width:L+2*(zt-st),height:j+2*(zt-st)/gt}:{x:F-(et-kt)*gt,y:J-(et-kt),width:L+2*(et-kt)*gt,height:j+2*(et-kt)}:null!==(Ft=y.mouseEvent)&&void 0!==Ft&&Ft.shiftKey||null!==(Gt=y.touchEvent)&&void 0!==Gt&&Gt.shiftKey?gt>=1?{x:F,y:J,width:L+(zt-st),height:j+(zt-st)/gt}:{x:F,y:J,width:L+(et-kt)*gt,height:j+(et-kt)}:null!==($t=y.mouseEvent)&&void 0!==$t&&$t.altKey||null!==(oe=y.touchEvent)&&void 0!==oe&&oe.altKey?{x:F-(zt-st),y:J-(et-kt),width:L+2*(zt-st),height:j+2*(et-kt)}:{x:F,y:J,width:L+(zt-st),height:j+(et-kt)};break;case"rect-top":var re,ae,pe,_e;Y=null!==(re=y.mouseEvent)&&void 0!==re&&re.shiftKey||null!==(ae=y.touchEvent)&&void 0!==ae&&ae.shiftKey?{x:F+Rt/2*gt,y:J+Rt,width:L-Rt*gt,height:j-Rt}:null!==(pe=y.mouseEvent)&&void 0!==pe&&pe.altKey||null!==(_e=y.touchEvent)&&void 0!==_e&&_e.altKey?{x:F,y:J+Rt,width:L,height:j-2*Rt}:{x:F,y:J+Rt,width:L,height:j-Rt};break;case"rect-bottom":var Se,be,Ee,ve;Y=null!==(Se=y.mouseEvent)&&void 0!==Se&&Se.shiftKey||null!==(be=y.touchEvent)&&void 0!==be&&be.shiftKey?{x:F-Rt/2*gt,y:J,width:L+Rt*gt,height:j+Rt}:null!==(Ee=y.mouseEvent)&&void 0!==Ee&&Ee.altKey||null!==(ve=y.touchEvent)&&void 0!==ve&&ve.altKey?{x:F,y:J-Rt,width:L,height:j+2*Rt}:{x:F,y:J,width:L,height:j+Rt};break;case"rect-left":var Re,Me,Fe,Ve;Y=null!==(Re=y.mouseEvent)&&void 0!==Re&&Re.shiftKey||null!==(Me=y.touchEvent)&&void 0!==Me&&Me.shiftKey?{x:F+qt,y:J+qt/2/gt,width:L-qt,height:j-qt/gt}:null!==(Fe=y.mouseEvent)&&void 0!==Fe&&Fe.altKey||null!==(Ve=y.touchEvent)&&void 0!==Ve&&Ve.altKey?{x:F+qt,y:J,width:L-2*qt,height:j}:{x:F+qt,y:J,width:L-qt,height:j};break;case"rect-right":var Ue,We,Ge,Ye;Y=null!==(Ue=y.mouseEvent)&&void 0!==Ue&&Ue.shiftKey||null!==(We=y.touchEvent)&&void 0!==We&&We.shiftKey?{x:F,y:J-qt/2/gt,width:L+qt,height:j+qt/gt}:null!==(Ge=y.mouseEvent)&&void 0!==Ge&&Ge.altKey||null!==(Ye=y.touchEvent)&&void 0!==Ye&&Ye.altKey?{x:F-qt,y:J,width:L+2*qt,height:j}:{x:F,y:J,width:L+qt,height:j};break;default:Y={x:F+zt-st,y:J+et-kt,width:L,height:j}}Y.width<0&&(Y.width=0),Y.height<0&&(Y.height=0),Y.x=(0,C.z)(Y.x,1),Y.y=(0,C.z)(Y.y,1),Y.width=(0,C.z)(Y.width,1),Y.height=(0,C.z)(Y.height,1),Object.assign(h,Y),(0,ft.D_)(M,tt,Y),(()=>{let Lt=F-Y.x,W=J-Y.y,i=(Y.width-L)/L,l=(Y.height-j)/j;tt.forEach((o,n)=>{let r=Ot[n],w=J-r.y,c={x:(0,C.z)(r.x-(Lt+(F-r.x)*i),100),y:(0,C.z)(r.y-(W+w*l),100),width:(0,C.z)(r.width+r.width*i,100),height:(0,C.z)(r.height+r.height*l,100)},{id:A,type:p,size:U,attribute:N}=o;Object.assign(U,c),Object.assign(N,(0,rt.xW)(p,U,N)),(0,ft.tD)(window.document.getElementById(A),N)})})()})()})(kt[0][0],kt[0][1],st.x,st.y),St=!0},end:(st,kt)=>{St&&(tt.forEach(st=>{let{id:kt,size:zt,attribute:et}=st,qt=D.find(Rt=>Rt.id==kt);qt&&(qt.to=JSON.parse(JSON.stringify({id:kt,size:zt,attribute:et})))}),_.L.history.push(D))}})},x=(y,at,h,tt)=>{let St,{id:M,type:F,size:J,attribute:L}=h,{x:j,y:Ot,width:q,height:D,ratios:Dt}=J,It=(q||1)/(D||1),st=null,et=!1;(0,z.I)(y,{start:Rt=>{st=JSON.parse(JSON.stringify({id:M,size:J,attribute:L}))},move:(Rt,gt)=>{((Rt,gt,Y,te)=>{let E=Y-Rt,k=te-gt;switch(at){case"rect-center":var d,K;St=null!==(d=y.mouseEvent)&&void 0!==d&&d.shiftKey||null!==(K=y.touchEvent)&&void 0!==K&&K.shiftKey?Math.abs(E)>=Math.abs(k)?{x:j+E,y:Ot,width:q,height:D}:{x:j,y:Ot+k,width:q,height:D}:{x:j+E,y:Ot+k,width:q,height:D};break;case"rect-top-left":var xt,Tt,Mt,Yt,Vt,Jt,jt,dt;St=(null!==(xt=y.mouseEvent)&&void 0!==xt&&xt.shiftKey||null!==(Tt=y.touchEvent)&&void 0!==Tt&&Tt.shiftKey)&&(null!==(Mt=y.mouseEvent)&&void 0!==Mt&&Mt.altKey||null!==(Yt=y.touchEvent)&&void 0!==Yt&&Yt.altKey)?It>=1?{x:j+E,y:Ot+E/It,width:q-2*E,height:D-2*E/It}:{x:j+k*It,y:Ot+k,width:q-2*k*It,height:D-2*k}:null!==(Vt=y.mouseEvent)&&void 0!==Vt&&Vt.shiftKey||null!==(Jt=y.touchEvent)&&void 0!==Jt&&Jt.shiftKey?It>=1?{x:j+E,y:Ot+E/It,width:q-E,height:D-E/It}:{x:j+k*It,y:Ot+k,width:q-k*It,height:D-k}:null!==(jt=y.mouseEvent)&&void 0!==jt&&jt.altKey||null!==(dt=y.touchEvent)&&void 0!==dt&&dt.altKey?{x:j+E,y:Ot+k,width:q-2*E,height:D-2*k}:{x:j+E,y:Ot+k,width:q-E,height:D-k};break;case"rect-top-right":var Zt,R,u,B,lt,ot,H,b;St=(null!==(Zt=y.mouseEvent)&&void 0!==Zt&&Zt.shiftKey||null!==(R=y.touchEvent)&&void 0!==R&&R.shiftKey)&&(null!==(u=y.mouseEvent)&&void 0!==u&&u.altKey||null!==(B=y.touchEvent)&&void 0!==B&&B.altKey)?It>=1?{x:j-E,y:Ot-E/It,width:q+2*E,height:D+2*E/It}:{x:j+k*It,y:Ot+k,width:q-2*k*It,height:D-2*k}:null!==(lt=y.mouseEvent)&&void 0!==lt&&lt.shiftKey||null!==(ot=y.touchEvent)&&void 0!==ot&&ot.shiftKey?It>=1?{x:j,y:Ot-E/It,width:q+E,height:D+E/It}:{x:j,y:Ot+k,width:q-k*It,height:D-k}:null!==(H=y.mouseEvent)&&void 0!==H&&H.altKey||null!==(b=y.touchEvent)&&void 0!==b&&b.altKey?{x:j-E,y:Ot+k,width:q+2*E,height:D-2*k}:{x:j,y:Ot+k,width:q+E,height:D-k};break;case"rect-bottom-left":var V,nt,vt,wt,Ct,yt,ut,_t;St=(null!==(V=y.mouseEvent)&&void 0!==V&&V.shiftKey||null!==(nt=y.touchEvent)&&void 0!==nt&&nt.shiftKey)&&(null!==(vt=y.mouseEvent)&&void 0!==vt&&vt.altKey||null!==(wt=y.touchEvent)&&void 0!==wt&&wt.altKey)?It>=1?{x:j+E,y:Ot+E/It,width:q-2*E,height:D-2*E/It}:{x:j-k*It,y:Ot-k,width:q+2*k*It,height:D+2*k}:null!==(Ct=y.mouseEvent)&&void 0!==Ct&&Ct.shiftKey||null!==(yt=y.touchEvent)&&void 0!==yt&&yt.shiftKey?It>=1?{x:j+E,y:Ot,width:q-E,height:D-E/It}:{x:j-k*It,y:Ot,width:q+k*It,height:D+k}:null!==(ut=y.mouseEvent)&&void 0!==ut&&ut.altKey||null!==(_t=y.touchEvent)&&void 0!==_t&&_t.altKey?{x:j+E,y:Ot-k,width:q-2*E,height:D+2*k}:{x:j+E,y:Ot,width:q-E,height:D+k};break;case"rect-bottom-right":var mt,Ft,Gt,$t,oe,re,ae,pe;St=(null!==(mt=y.mouseEvent)&&void 0!==mt&&mt.shiftKey||null!==(Ft=y.touchEvent)&&void 0!==Ft&&Ft.shiftKey)&&(null!==(Gt=y.mouseEvent)&&void 0!==Gt&&Gt.altKey||null!==($t=y.touchEvent)&&void 0!==$t&&$t.altKey)?It>=1?{x:j-E,y:Ot-E/It,width:q+2*E,height:D+2*E/It}:{x:j-k*It,y:Ot-k,width:q+2*k*It,height:D+2*k}:null!==(oe=y.mouseEvent)&&void 0!==oe&&oe.shiftKey||null!==(re=y.touchEvent)&&void 0!==re&&re.shiftKey?It>=1?{x:j,y:Ot,width:q+E,height:D+E/It}:{x:j,y:Ot,width:q+k*It,height:D+k}:null!==(ae=y.mouseEvent)&&void 0!==ae&&ae.altKey||null!==(pe=y.touchEvent)&&void 0!==pe&&pe.altKey?{x:j-E,y:Ot-k,width:q+2*E,height:D+2*k}:{x:j,y:Ot,width:q+E,height:D+k};break;case"rect-top":var _e,Se,be,Ee;St=null!==(_e=y.mouseEvent)&&void 0!==_e&&_e.shiftKey||null!==(Se=y.touchEvent)&&void 0!==Se&&Se.shiftKey?{x:j+k/2*It,y:Ot+k,width:q-k*It,height:D-k}:null!==(be=y.mouseEvent)&&void 0!==be&&be.altKey||null!==(Ee=y.touchEvent)&&void 0!==Ee&&Ee.altKey?{x:j,y:Ot+k,width:q,height:D-2*k}:{x:j,y:Ot+k,width:q,height:D-k};break;case"rect-bottom":var ve,Re,Me,Fe;St=null!==(ve=y.mouseEvent)&&void 0!==ve&&ve.shiftKey||null!==(Re=y.touchEvent)&&void 0!==Re&&Re.shiftKey?{x:j-k/2*It,y:Ot,width:q+k*It,height:D+k}:null!==(Me=y.mouseEvent)&&void 0!==Me&&Me.altKey||null!==(Fe=y.touchEvent)&&void 0!==Fe&&Fe.altKey?{x:j,y:Ot-k,width:q,height:D+2*k}:{x:j,y:Ot,width:q,height:D+k};break;case"rect-left":var Ve,Ue,We,Ge;St=null!==(Ve=y.mouseEvent)&&void 0!==Ve&&Ve.shiftKey||null!==(Ue=y.touchEvent)&&void 0!==Ue&&Ue.shiftKey?{x:j+E,y:Ot+E/2/It,width:q-E,height:D-E/It}:null!==(We=y.mouseEvent)&&void 0!==We&&We.altKey||null!==(Ge=y.touchEvent)&&void 0!==Ge&&Ge.altKey?{x:j+E,y:Ot,width:q-2*E,height:D}:{x:j+E,y:Ot,width:q-E,height:D};break;case"rect-right":var Ye,Lt,W,i;St=null!==(Ye=y.mouseEvent)&&void 0!==Ye&&Ye.shiftKey||null!==(Lt=y.touchEvent)&&void 0!==Lt&&Lt.shiftKey?{x:j,y:Ot-E/2/It,width:q+E,height:D+E/It}:null!==(W=y.mouseEvent)&&void 0!==W&&W.altKey||null!==(i=y.touchEvent)&&void 0!==i&&i.altKey?{x:j-E,y:Ot,width:q+2*E,height:D}:{x:j,y:Ot,width:q+E,height:D};break;default:{let l=at.match(/^point-(\d+)/);if(l){St={x:j,y:Ot,width:q,height:D};let o=parseInt(l[1]);"number"==typeof o&&(St.ratios=null==Dt?void 0:Dt.map((n,r)=>r==o?[n[0]+E/J.width,n[1]+k/J.height]:n)),console.log(St.ratios)}else St={x:j+E,y:Ot+k,width:q,height:D};break}}St.width<0&&(St.width=0),St.height<0&&(St.height=0),St.x=(0,C.z)(St.x),St.y=(0,C.z)(St.y),St.width=(0,C.z)(St.width),St.height=(0,C.z)(St.height),Object.assign(J,St),Object.assign(L,(0,rt.xW)(F,J,L)),(0,ft.tD)(window.document.getElementById(M),L),(0,ft.AE)(tt,h)})(gt[0][0],gt[0][1],Rt.x,Rt.y),et=!0},end:(Rt,gt)=>{et&&st&&_.L.history.push([{type:"size",from:st,to:JSON.parse(JSON.stringify({id:M,size:J,attribute:L}))}])}})},it=y=>{y.length>1?(y=>{let at=999999,h=999999,tt=-999999,M=-999999;y.forEach(L=>{at=Math.min(at,L.size.x),h=Math.min(h,L.size.y),tt=Math.max(tt,L.size.x+L.size.width),M=Math.max(M,L.size.y+L.size.height)});let F=(0,ft.RY)(S.F.RESIZE_GROUP,"g"),J=(0,rt.CE)(at,h,tt,M);J.x=(0,C.z)(J.x,100),J.y=(0,C.z)(J.y,100),J.width=(0,C.z)(J.width,100),J.height=(0,C.z)(J.height,100),(0,ft.D_)(F,y,J).forEach(L=>{((y,at,h,tt,M)=>{let F=!1;null==y||y.addEventListener("touchstart",J=>{F=!0,G({touchEvent:J},at,h,tt,M)}),null==y||y.addEventListener("mousedown",J=>{if(0==J.button){if(F)return void(F=!1);G({mouseEvent:J},at,h,tt,M)}})})(L.element,L.posType,J,y,F)})})(y):1==y.length&&(y=>{let at=(0,ft.RY)(S.F.RESIZE_GROUP,"g");if(y.length>0){let h=y[0];(0,ft.AE)(at,h).forEach(tt=>{((y,at,h,tt)=>{let M=!1;null==y||y.addEventListener("touchstart",F=>{M=!0,x({touchEvent:F},at,h,tt)}),null==y||y.addEventListener("mousedown",F=>{if(0==F.button){if(M)return void(M=!1);x({mouseEvent:F},at,h,tt)}})})(tt.element,tt.posType,h,at)})}})(y)}},1026:(ce,Kt,v)=>{v.d(Kt,{$:()=>M,t:()=>tt});var S=v(7873),_=v(1281),rt=v(6153),z=v(3477),ft=v(7945),C=v(3069),f=v(3073),I=v(1999),G=v(6407),O=v(6847),Q=v(745),x=v(9173),it=v(6611),y=v(5970),at=v(4669),h=v(3617);const tt=(F,J,L)=>{var j;if(J&&!(null!=L?L:window).document.getElementById(J))return;if(J){let q=(null!=L?L:window).document.getElementById(J);jQuery(q).find("#"+S.F.BACKGROUND_GROUP).empty();let D=(0,y.RY)(S.F.BACKGROUND_GROUP,"g",void 0,q);(0,y.I6)(D,F)}else{jQuery(it.L.target).find("#"+S.F.BACKGROUND_GROUP).empty();let q=(0,y.RY)(S.F.BACKGROUND_GROUP,"g",void 0,it.L.target);(0,y.I6)(q,F)}let Ot=(q,D)=>{D=J&&D?`${J}-${D}`:null!=J?J:D,null==q||q.forEach(Dt=>{let It=J?`${J}-${Dt.id}`:Dt.id;var St;if(Dt.isdeleted)null===(St=(null!=L?L:window).document.getElementById(It))||void 0===St||St.remove();else switch(Dt.type){case I.h.GROUP:(0,f.v)(It,{},D?(null!=L?L:window).document.getElementById(D):null),Ot(Dt.nodes,Dt.id);break;case I.h.CIRCLE:(0,_.K)(It,{size:Dt.size,attribute:Dt.attribute},D?(null!=L?L:window).document.getElementById(D):null);break;case I.h.ELLIPSE:(0,rt.W)(It,{size:Dt.size,attribute:Dt.attribute},D?(null!=L?L:window).document.getElementById(D):null);break;case I.h.LINE:(0,C.q)(It,{size:Dt.size,attribute:Dt.attribute},D?(null!=L?L:window).document.getElementById(D):null);break;case I.h.RECT:(0,ft.a)(It,{size:Dt.size,attribute:Dt.attribute},D?(null!=L?L:window).document.getElementById(D):null);break;case I.h.POLYGON:(0,z.u)(It,{size:Dt.size,attribute:Dt.attribute},D?(null!=L?L:window).document.getElementById(D):null);break;case I.h.POLYLINE:(0,h.E)(It,{size:Dt.size,attribute:Dt.attribute},D?(null!=L?L:window).document.getElementById(D):null);break;case I.h.FOREIGNOBJECT:(0,Q.$)(It,{size:Dt.size,attribute:Dt.attribute,style:Dt.style,source:Dt.source},D?(null!=L?L:window).document.getElementById(D):null);break;case I.h.IMAGE:(0,x.B)(It,{size:Dt.size,attribute:Dt.attribute,source:Dt.source},D?(null!=L?L:window).document.getElementById(D):null);break;case I.h.TEXT:(0,O.L)(It,{size:Dt.size,attribute:Dt.attribute,source:Dt.source},D?(null!=L?L:window).document.getElementById(D):null);break;case I.h.TSPAN:(0,at.M)(It,{size:Dt.size,attribute:Dt.attribute,source:Dt.source},D?(null!=L?L:window).document.getElementById(D):null);break;case I.h.PATH:(0,G.X)(It,{size:Dt.size,attribute:Dt.attribute},D?(null!=L?L:window).document.getElementById(D):null)}})};Ot(null==F||null===(j=F.svg)||void 0===j?void 0:j.nodes)},M=(F,J)=>{var L;if(J&&!window.document.getElementById(J))return;let j=(Ot,q)=>{q=q?`${J}-${q}`:J,null==Ot||Ot.forEach(D=>{jQuery("#"+(J?`${J}-${D.id}`:D.id)).appendTo(q?window.document.getElementById(q):it.L.target),D.type==I.h.GROUP&&j(D.nodes,D.id)})};j(null==F||null===(L=F.svg)||void 0===L?void 0:L.nodes)}},1281:(ce,Kt,v)=>{v.d(Kt,{K:()=>ft});var S=v(1999),_=v(6611),rt=v(9506),z=v(5970);const ft=(C,f,I)=>{let G=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{fill:_.L.attribute.fill,stroke:_.L.attribute.stroke,strokeWidth:_.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(S.h.CIRCLE,G,O)),{nodeId:C,element:(0,z.fn)(C,S.h.CIRCLE,"circle",{size:G,attribute:O},I),size:G,attribute:O}}},6153:(ce,Kt,v)=>{v.d(Kt,{W:()=>ft});var S=v(1999),_=v(6611),rt=v(9506),z=v(5970);const ft=(C,f,I)=>{let G=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{fill:_.L.attribute.fill,stroke:_.L.attribute.stroke,strokeWidth:_.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(S.h.ELLIPSE,G,O)),{nodeId:C,element:(0,z.fn)(C,S.h.ELLIPSE,"ellipse",{size:G,attribute:O},I),size:G,attribute:O}}},745:(ce,Kt,v)=>{v.d(Kt,{$:()=>z});var S=v(1999),_=v(9506),rt=v(5970);const z=(ft,C,f)=>{let I=(null==C?void 0:C.size)||{x:0,y:0,width:320,height:80},G=(null==C?void 0:C.attribute)||{};Object.assign(G,(0,_.xW)(S.h.FOREIGNOBJECT,I,G));let O=(null==C?void 0:C.source)||{type:"html",html:{htmlContent:""}},Q=(null==C?void 0:C.style)||{};return{nodeId:ft,element:(0,rt.fn)(ft,S.h.FOREIGNOBJECT,"foreignObject",{size:I,attribute:G,style:Q,source:O},f),size:I,attribute:G,style:Q,source:O}}},3073:(ce,Kt,v)=>{v.d(Kt,{v:()=>z});var S=v(1999),_=v(9506),rt=v(5970);const z=(C,f,I)=>{let G=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{};return Object.assign(O,(0,_.xW)(S.h.GROUP,G,O)),{nodeId:C,element:(0,rt.fn)(C,S.h.GROUP,"g",{size:G,attribute:O},I),size:G,attribute:O}}},9173:(ce,Kt,v)=>{v.d(Kt,{B:()=>z});var S=v(1999),_=v(9506),rt=v(5970);const z=(ft,C,f)=>{let I=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},G=(null==C?void 0:C.attribute)||{preserveAspectRatio:"none"};Object.assign(G,(0,_.xW)(S.h.IMAGE,I,G));let O=(null==C?void 0:C.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:ft,element:(0,rt.fn)(ft,S.h.IMAGE,"image",{size:I,attribute:G,source:O},f),size:I,attribute:G,source:O}}},3069:(ce,Kt,v)=>{v.d(Kt,{q:()=>ft});var S=v(1999),_=v(6611),rt=v(9506),z=v(5970);const ft=(C,f,I)=>{let G=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{stroke:_.L.attribute.stroke,strokeWidth:_.L.attribute.strokeWidth,strokeLinecap:_.L.attribute.strokeLinecap};return Object.assign(O,(0,rt.xW)(S.h.LINE,G,O)),{nodeId:C,element:(0,z.fn)(C,S.h.LINE,"line",{size:G,attribute:O},I),size:G,attribute:O}}},6407:(ce,Kt,v)=>{v.d(Kt,{X:()=>ft});var S=v(1999),_=v(6611),rt=v(9506),z=v(5970);const ft=(C,f,I)=>{let G=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{stroke:_.L.attribute.stroke,strokeWidth:_.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(S.h.PATH,G,O)),{nodeId:C,element:(0,z.fn)(C,S.h.PATH,"path",{size:G,attribute:O},I),size:G,attribute:O}}},3477:(ce,Kt,v)=>{v.d(Kt,{u:()=>ft});var S=v(1999),_=v(6611),rt=v(9506),z=v(5970);const ft=(C,f,I)=>{let G=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{fill:_.L.attribute.fill,stroke:_.L.attribute.stroke,strokeWidth:_.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(S.h.POLYGON,G,O)),{nodeId:C,element:(0,z.fn)(C,S.h.POLYGON,"polygon",{size:G,attribute:O},I),size:G,attribute:O}}},3617:(ce,Kt,v)=>{v.d(Kt,{E:()=>ft});var S=v(1999),_=v(6611),rt=v(9506),z=v(5970);const ft=(C,f,I)=>{let G=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{fill:_.L.attribute.fill,stroke:_.L.attribute.stroke,strokeWidth:_.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(S.h.POLYLINE,G,O)),{nodeId:C,element:(0,z.fn)(C,S.h.POLYLINE,"polyline",{size:G,attribute:O},I),size:G,attribute:O}}},7945:(ce,Kt,v)=>{v.d(Kt,{a:()=>ft});var S=v(1999),_=v(6611),rt=v(9506),z=v(5970);const ft=(C,f,I)=>{let G=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{fill:_.L.attribute.fill,stroke:_.L.attribute.stroke,strokeWidth:_.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(S.h.RECT,G,O)),{nodeId:C,element:(0,z.fn)(C,S.h.RECT,"rect",{size:G,attribute:O},I),size:G,attribute:O}}},6847:(ce,Kt,v)=>{v.d(Kt,{L:()=>ft});var S=v(1999),_=v(6611),rt=v(9506),z=v(5970);const ft=(C,f,I)=>{let G=(null==f?void 0:f.size)||{x:0,y:0,width:320,height:80},O=(null==f?void 0:f.attribute)||{fill:_.L.attribute.stroke,fontFamily:_.L.attribute.fontFamily,fontSize:_.L.attribute.fontSize,textLength:_.L.attribute.textLength};Object.assign(O,(0,rt.xW)(S.h.TEXT,G,O));let Q=(null==f?void 0:f.source)||{type:"text",text:{textContent:""}};return{nodeId:C,element:(0,z.fn)(C,S.h.TEXT,"text",{size:G,attribute:O,source:Q},I),size:G,attribute:O,source:Q}}},4669:(ce,Kt,v)=>{v.d(Kt,{M:()=>ft});var S=v(1999),_=v(6611),rt=v(9506),z=v(5970);const ft=(C,f,I)=>{let G=(null==f?void 0:f.size)||{x:0,y:0,width:320,height:80},O=(null==f?void 0:f.attribute)||{fill:_.L.attribute.stroke,fontFamily:_.L.attribute.fontFamily,fontSize:_.L.attribute.fontSize,textLength:_.L.attribute.textLength};Object.assign(O,(0,rt.xW)(S.h.TSPAN,G,O));let Q=(null==f?void 0:f.source)||{type:"text",text:{textContent:""}};return{nodeId:C,element:(0,z.fn)(C,S.h.TSPAN,"tspan",{size:G,attribute:O,source:Q},I),size:G,attribute:O,source:Q}}},9506:(ce,Kt,v)=>{v.d(Kt,{CE:()=>rt,xW:()=>z});var S=v(1999),_=v(4896);const rt=(C,f,I,G,O)=>{let Q={x:Math.min(C,I),y:Math.min(f,G),width:Math.abs(I-C)||1,height:Math.abs(G-f)||1};return null!=O&&O.ratio&&(Q.width<=Q.height?Q.height=Q.width*(null==O?void 0:O.ratio):Q.width=Q.height/(null==O?void 0:O.ratio)),Object.assign(Q,{ratios:(null==O?void 0:O.ratios)||[[(C-Q.x)/(Q.width||1),(f-Q.y)/(Q.height||1)],[(I-Q.x)/(Q.width||1),(G-Q.y)/(Q.height||1)]]}),null!=O&&O.points&&(Q.points=null==O?void 0:O.points),Q},z=(C,f,I)=>{var G,O=(()=>{switch(C){case S.h.CIRCLE:return{cx:f.x+f.width/2,cy:f.y+f.height/2,r:Math.min(f.width/2,f.height/2)};case S.h.ELLIPSE:return{cx:f.x+f.width/2,cy:f.y+f.height/2,rx:f.width/2,ry:f.height/2};case S.h.LINE:{var Q;let h={};return null===(Q=f.ratios)||void 0===Q||Q.forEach((tt,M)=>{h[`x${M+1}`]=f.x+f.width*tt[0],h[`y${M+1}`]=f.y+f.height*tt[1]}),h}case S.h.RECT:case S.h.FOREIGNOBJECT:case S.h.IMAGE:return{x:f.x,y:f.y,width:f.width,height:f.height};case S.h.TEXT:case S.h.TSPAN:var x;return{x:f.x,y:f.y+(I.alignmentBaseline||I.dominantBaseline?0:null!==(x=I.fontSize)&&void 0!==x?x:16)};case S.h.POLYGON:case S.h.POLYLINE:var it;if(null!==(it=f.ratios)&&void 0!==it&&it.length)return{points:(0,_.n9)(f,f.ratios)};break;case S.h.PATH:var y,at;if(null!==(y=f.ratioMaps)&&void 0!==y&&y.length)return{d:(0,_.$N)(f,f.ratioMaps)};if(null!==(at=f.points)&&void 0!==at&&at.length)return{d:`M ${(h=f.points)[0][0]} ${h[0][1]} L ${(h.map(tt=>[tt[0],tt[1]])||[]).map(tt=>tt.join(" ")).join(" ")}`}}var h;return{}})();return f.rotate?(O.transform=`rotate(${f.rotate})`,O.transformOrigin=`${f.x+f.width/2} ${f.y+f.height/2}`):null!==(G=I.transform)&&void 0!==G&&G.match(/^rotate/)&&(I.transform=null,I.transformOrigin=null),O}},2492:(ce,Kt,v)=>{v.d(Kt,{z:()=>S});const S=(_,rt)=>{var z;return rt=null!==(z=rt)&&void 0!==z?z:100,Math.round((_+Number.EPSILON)*rt)/rt}},9841:(ce,Kt,v)=>{v.d(Kt,{$:()=>rt});var S=v(6611),_=v(2492);const rt=z=>(0,_.z)(z/S.L.screen.scale)},6752:(ce,Kt,v)=>{v.d(Kt,{E$:()=>f,Nx:()=>G,ZF:()=>C,ei:()=>ft,fu:()=>I});var S=v(6611),_=v(5970),rt=v(9506),z=v(2492);const ft=(O,Q)=>{let{id:x,type:it,size:y,attribute:at}=O,h=JSON.parse(JSON.stringify({id:x,size:y,attribute:at}));y.x=(0,z.z)(Q),Object.assign(at,(0,rt.xW)(it,y,at)),(0,_.tD)(window.document.getElementById(x),at),S.L.history.push([{type:"size",from:h,to:JSON.parse(JSON.stringify({id:x,size:y,attribute:at}))}])},C=(O,Q)=>{let{id:x,type:it,size:y,attribute:at}=O,h=JSON.parse(JSON.stringify({id:x,size:y,attribute:at}));y.y=(0,z.z)(Q),Object.assign(at,(0,rt.xW)(it,y,at)),(0,_.tD)(window.document.getElementById(x),at),S.L.history.push([{type:"size",from:h,to:JSON.parse(JSON.stringify({id:x,size:y,attribute:at}))}])},f=(O,Q,x)=>{let{id:it,type:y,size:at,attribute:h}=O,tt=JSON.parse(JSON.stringify({id:it,size:at,attribute:h}));x&&(at.height=(0,z.z)(Q*at.height/at.width)),at.width=(0,z.z)(Q),Object.assign(h,(0,rt.xW)(y,at,h)),(0,_.tD)(window.document.getElementById(it),h),S.L.history.push([{type:"size",from:tt,to:JSON.parse(JSON.stringify({id:it,size:at,attribute:h}))}])},I=(O,Q,x)=>{let{id:it,type:y,size:at,attribute:h}=O,tt=JSON.parse(JSON.stringify({id:it,size:at,attribute:h}));x&&(at.width=(0,z.z)(Q*at.width/at.height)),at.height=(0,z.z)(Q),Object.assign(h,(0,rt.xW)(y,at,h)),(0,_.tD)(window.document.getElementById(it),h),S.L.history.push([{type:"size",from:tt,to:JSON.parse(JSON.stringify({id:it,size:at,attribute:h}))}])},G=(O,Q)=>{let{id:x,type:it,size:y,attribute:at}=O,h=JSON.parse(JSON.stringify({id:x,size:y,attribute:at}));y.rotate="number"==typeof Q?(0,z.z)(Q,100):void 0,Object.assign(at,(0,rt.xW)(it,y,at)),(0,_.tD)(window.document.getElementById(x),at),S.L.history.push([{type:"size",from:h,to:JSON.parse(JSON.stringify({id:x,size:y,attribute:at}))}])}},1308:(ce,Kt,v)=>{v.d(Kt,{I:()=>C});var S=v(3603),_=v(6611);class rt{constructor(I){this._points=[],this._options=I}start(I){this._points.length=0,this._points.push([I.x,I.y]),this._options.start(I)}move(I){this._points.push([I.x,I.y]),this._options.move(I,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(I=this._points[0])[0],y:I[1]}:{x:0,y:0};var I}get offsetLast(){return this._points.length>=1?{x:(I=this._points[this._points.length-1])[0],y:I[1]}:{x:0,y:0};var I}}var z=v(6078);const C=(f,I,G,O,Q)=>{var x,it,y;let at=null,h=0,tt=0;f.mouseEvent?(at=f.mouseEvent.target,h=f.mouseEvent.offsetX,tt=f.mouseEvent.offsetY):f.touchEvent&&(at=f.touchEvent.target,f.touchEvent.touches.length&&(h=f.touchEvent.touches[0].clientX,tt=f.touchEvent.touches[0].clientY));let M=null!=G?G:_.L.screen.scale,F=null!=O?O:_.L.screen.dislocation,J=null!=Q?Q:_.L.screen.offset,L=()=>{};var j=new rt({start:null!==(x=null==I?void 0:I.start)&&void 0!==x?x:L,move:null!==(it=null==I?void 0:I.move)&&void 0!==it?it:L,end:null!==(y=null==I?void 0:I.end)&&void 0!==y?y:L});f.mouseEvent?j.start((0,z.D)({x:h,y:tt},M,F,{x:0,y:0})):f.touchEvent&&j.start((0,z.D)({x:h,y:tt},M,F,J));let Ot=st=>{j.move((0,z.D)({x:st.clientX,y:st.clientY},M,F,J))},q=st=>{j.end(),[S.P.SHAPE,S.P.FOREIGNOBJECT,S.P.IMAGE,S.P.TEXT].includes(_.L.pointer.pointer_type)&&(st.shiftKey||(_.L.pointer.pointer_type=S.P.POINTER))},D=st=>{st.touches.length&&Ot({clientX:st.touches[0].clientX,clientY:st.touches[0].clientY})},Dt=st=>{q({shiftKey:st.shiftKey,ctrlKey:st.ctrlKey,altKey:st.altKey}),window.removeEventListener("touchmove",D,!1),window.removeEventListener("touchend",Dt,!1)},It=st=>{0==st.button&&Ot({clientX:st.clientX,clientY:st.clientY})},St=st=>{0==st.button&&(q({shiftKey:st.shiftKey,ctrlKey:st.ctrlKey,altKey:st.altKey}),window.removeEventListener("mousemove",It,!1),window.removeEventListener("mouseup",St,!1))};if(f.mouseEvent)window.addEventListener("mousemove",It,!1),window.addEventListener("mouseup",St,!1);else if(f.touchEvent){var Pt;window.addEventListener("touchmove",D,!1),window.addEventListener("touchend",Dt,!1),null===(Pt=at)||void 0===Pt||Pt.addEventListener("touchmove",function(st){st.preventDefault()})}}},6078:(ce,Kt,v)=>{v.d(Kt,{D:()=>_});var S=v(2492);const _=(rt,z,ft,C)=>(rt.x-=C.x,rt.y-=C.y,rt.x/=z,rt.y/=z,rt.x-=ft.x,rt.y-=ft.y,rt.x=(0,S.z)(rt.x),rt.y=(0,S.z)(rt.y),rt)},5619:(ce,Kt,v)=>{v.d(Kt,{J:()=>dt,I:()=>Zt});var S=v(7873),_=v(6611),rt=v(1999),z=v(334),ft=v(8946),C=v(7657),f=v(6769),I=v(3591),O=v(6847),Q=v(3073);var h=v(7050),tt=v(9173),M=v(2492);const F=(R,u,B)=>{var lt,ot,H,b;let V=1,nt=new Image;nt.onload=()=>{var vt,wt,Ct,yt;V=(0,M.z)(nt.naturalWidth/nt.naturalHeight,100);let ut=0,_t=0,mt=0,Ft=0;var Gt,$t,oe,re;V>=1?(mt=Math.min(nt.naturalWidth,null!==(Gt=null===($t=dt.slide.svg)||void 0===$t||null===($t=$t.viewBox)||void 0===$t?void 0:$t.width)&&void 0!==Gt?Gt:0),Ft=mt/V):(Ft=Math.min(nt.naturalHeight,null!==(oe=null===(re=dt.slide.svg)||void 0===re||null===(re=re.viewBox)||void 0===re?void 0:re.height)&&void 0!==oe?oe:0),mt=Ft/V),ut=((null!==(vt=null===(wt=dt.slide.svg)||void 0===wt||null===(wt=wt.viewBox)||void 0===wt?void 0:wt.width)&&void 0!==vt?vt:0)-mt)/2,_t=((null!==(Ct=null===(yt=dt.slide.svg)||void 0===yt||null===(yt=yt.viewBox)||void 0===yt?void 0:yt.height)&&void 0!==Ct?Ct:0)-Ft)/2,u.size={x:ut,y:_t,width:mt,height:Ft},J(u,B)},nt.onerror=vt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(u.source)}`,vt)},nt.src=(null!==(lt=u.source)&&void 0!==lt&&lt.path?(null===(ot=_.L.config)||void 0===ot?void 0:ot.readfileuploadurl)+(null===(H=u.source)||void 0===H?void 0:H.path):null===(b=u.source)||void 0===b?void 0:b.url)||""},J=(R,u)=>{if(R.slideStatus!=dt.slideStatus)return void u();let{element:B}=(0,tt.B)(Math.ceil(1e9*Math.random()),{size:R.size,source:{type:"image",image:null==R?void 0:R.source}});setTimeout(()=>{null==B||B.remove(),u()},3e3)};var L=v(5970);const j=(R,u,B)=>{var lt,ot,H,b;let V=new Image;V.onload=()=>{Ot(R,{width:V.naturalWidth,height:V.naturalHeight},u,B)},V.onerror=nt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(u.source)}`,nt),B()},V.src=(null!==(lt=u.source)&&void 0!==lt&&lt.path?(null===(ot=_.L.config)||void 0===ot?void 0:ot.readfileuploadurl)+(null===(H=u.source)||void 0===H?void 0:H.path):null===(b=u.source)||void 0===b?void 0:b.url)||""},Ot=(R,u,B,lt)=>{if(B.slideStatus!=dt.slideStatus)return void lt();let ot=(0,M.z)(u.width/u.height,100),H=0,b=0,V=0,nt=0;ot>=1?(V=u.width,V=Math.max(V,40),V=Math.min(V,40),nt=V/ot):(nt=u.height,nt=Math.max(nt,40),nt=Math.min(nt,40),V=nt/ot);let{size:Ct}=R;H=Ct.x+Ct.width-V/2,b=Ct.y-nt/2;let yt=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,tt.B)(`icon-${R.id}`,{size:{x:H,y:b,width:V,height:nt},source:{type:"image",image:null==B?void 0:B.source}},yt),setTimeout(()=>{lt()},3e3)},q=(R,u,B)=>{var lt,ot,H,b,V,nt,vt;if(u.slideStatus!=dt.slideStatus)return void B();if(!(null!==(lt=u.source)&&void 0!==lt&&lt.path||null!==(ot=u.source)&&void 0!==ot&&ot.url))return console.warn(`${R.id} -> audio no source!`),void B();var wt=jQuery("#"+R.id);let Ct=null!==(H=u.iteration)&&void 0!==H?H:0;if(Ct<0&&(B(),B=function(){}),!(wt.data("audio-running")&&Ct<0)){wt.data("audio-running",!0);var yt=new Audio;return yt.autoplay=!0,yt.loop=0!=Ct,yt.preload="auto",yt.controls=!0,yt.setAttributeNode(document.createAttribute("playsinline")),yt.addEventListener("canplay",function(){var ut=yt.play();ut&&ut.then(function(_t){wt.data("audio-running",!0)}).catch(function(_t){wt.data("audio-running",!1),u.slideStatus===dt.slideStatus&&B()})}),yt.addEventListener("timeupdate",function(){var _t;u.slideStatus!==dt.slideStatus&&((_t=this).pause(),_t.remove(),wt.data("audio-running",!1))}),yt.addEventListener("canplaythrough",function(){this.loop&&(Ct>0?Ct--:0==Ct&&(this.loop=!1))}),yt.addEventListener("play",function(){}),yt.addEventListener("pause",function(){}),yt.addEventListener("ended",function(){this.remove(),wt.data("audio-running",!1),u.slideStatus===dt.slideStatus&&B()}),yt.onerror=function(){this.remove(),wt.data("audio-running",!1),u.slideStatus===dt.slideStatus&&B()},yt.src=(null!==(b=u.source)&&void 0!==b&&b.path?(null===(V=_.L.config)||void 0===V?void 0:V.readfileuploadurl)+(null===(nt=u.source)||void 0===nt?void 0:nt.path):null===(vt=u.source)||void 0===vt?void 0:vt.url)||"",yt}};var D=v(2837);const zt=(R,u)=>{var B;null===(B=u.test)||void 0===B||null===(B=B.answer)||void 0===B||null===(B=B.matching)||void 0===B||B.filter(lt=>lt.id==R.id).forEach(lt=>lt.value=""),jQuery(`#node-${R.id}`).remove()},qt=(R,u,B,lt,ot,H)=>{var b,V,nt,vt,wt,Ct,yt,ut;ot.iscorrect?(null!==(b=u.test)&&void 0!==b&&null!==(b=b.audiotrue)&&void 0!==b&&b.path&&q(R,{source:(0,D.U)(null===(nt=u.test)||void 0===nt?void 0:nt.audiotrue),iteration:0,nodeStatus:B,slideStatus:lt},H),null!==(V=u.test)&&void 0!==V&&null!==(V=V.effecttrue)&&void 0!==V&&V.path&&F(0,{source:(0,D.U)(null===(vt=u.test)||void 0===vt?void 0:vt.effecttrue),iteration:0,nodeStatus:B,slideStatus:lt},H)):(null!==(wt=u.test)&&void 0!==wt&&null!==(wt=wt.audiofalse)&&void 0!==wt&&wt.path&&q(R,{source:(0,D.U)(null===(yt=u.test)||void 0===yt?void 0:yt.audiofalse),iteration:0,nodeStatus:B,slideStatus:lt},H),null!==(Ct=u.test)&&void 0!==Ct&&null!==(Ct=Ct.effectfalse)&&void 0!==Ct&&Ct.path&&F(0,{source:(0,D.U)(null===(ut=u.test)||void 0===ut?void 0:ut.effectfalse),iteration:0,nodeStatus:B,slideStatus:lt},H));Rt(u,B,lt,H)},Rt=(R,u,B,lt)=>{var ot;switch(null===(ot=R.test)||void 0===ot?void 0:ot.type){case"truefalse":{var H,b;let{value:re,iscorrect:ae}=null!==(H=null==R||null===(b=R.test)||void 0===b||null===(b=b.answer)||void 0===b?void 0:b.truefalse)&&void 0!==H?H:{};if(re){let pe=dt.findNode(re);var V,nt,vt,wt;ae?null!==(V=R.test)&&void 0!==V&&null!==(V=V.icontrue)&&void 0!==V&&V.path&&j(pe,{source:(0,D.U)(null===(nt=R.test)||void 0===nt?void 0:nt.icontrue),iteration:0,nodeStatus:u,slideStatus:B},lt):null!==(vt=R.test)&&void 0!==vt&&null!==(vt=vt.iconfalse)&&void 0!==vt&&vt.path&&j(pe,{source:(0,D.U)(null===(wt=R.test)||void 0===wt?void 0:wt.iconfalse),iteration:0,nodeStatus:u,slideStatus:B},lt)}break}case"singlechoice":{var Ct,yt;let{value:re,iscorrect:ae}=null!==(Ct=null==R||null===(yt=R.test)||void 0===yt||null===(yt=yt.answer)||void 0===yt?void 0:yt.singlechoice)&&void 0!==Ct?Ct:{};if(re){let pe=dt.findNode(re);var ut,_t,mt,Ft;ae?null!==(ut=R.test)&&void 0!==ut&&null!==(ut=ut.icontrue)&&void 0!==ut&&ut.path&&j(pe,{source:(0,D.U)(null===(_t=R.test)||void 0===_t?void 0:_t.icontrue),iteration:0,nodeStatus:u,slideStatus:B},lt):null!==(mt=R.test)&&void 0!==mt&&null!==(mt=mt.iconfalse)&&void 0!==mt&&mt.path&&j(pe,{source:(0,D.U)(null===(Ft=R.test)||void 0===Ft?void 0:Ft.iconfalse),iteration:0,nodeStatus:u,slideStatus:B},lt)}break}case"multichoice":var Gt;null==R||null===(Gt=R.test)||void 0===Gt||null===(Gt=Gt.answer)||void 0===Gt||null===(Gt=Gt.multichoice)||void 0===Gt||Gt.forEach(re=>{let{value:ae,iscorrect:pe}=re;if(ae){let ve=dt.findNode(ae);var _e,Se,be,Ee;pe?null!==(_e=R.test)&&void 0!==_e&&null!==(_e=_e.icontrue)&&void 0!==_e&&_e.path&&j(ve,{source:(0,D.U)(null===(Se=R.test)||void 0===Se?void 0:Se.icontrue),iteration:0,nodeStatus:u,slideStatus:B},lt):null!==(be=R.test)&&void 0!==be&&null!==(be=be.iconfalse)&&void 0!==be&&be.path&&j(ve,{source:(0,D.U)(null===(Ee=R.test)||void 0===Ee?void 0:Ee.iconfalse),iteration:0,nodeStatus:u,slideStatus:B},lt)}});break;case"fill":var $t;null==R||null===($t=R.test)||void 0===$t||null===($t=$t.answer)||void 0===$t||null===($t=$t.fill)||void 0===$t||$t.forEach(re=>{let{id:ae,value:_e,iscorrect:Se}=re;if(_e){let Me=dt.findNode(ae);var be,Ee,ve,Re;Se?null!==(be=R.test)&&void 0!==be&&null!==(be=be.icontrue)&&void 0!==be&&be.path&&j(Me,{source:(0,D.U)(null===(Ee=R.test)||void 0===Ee?void 0:Ee.icontrue),iteration:0,nodeStatus:u,slideStatus:B},lt):null!==(ve=R.test)&&void 0!==ve&&null!==(ve=ve.iconfalse)&&void 0!==ve&&ve.path&&j(Me,{source:(0,D.U)(null===(Re=R.test)||void 0===Re?void 0:Re.iconfalse),iteration:0,nodeStatus:u,slideStatus:B},lt)}});break;case"matching":var oe;null==R||null===(oe=R.test)||void 0===oe||null===(oe=oe.answer)||void 0===oe||null===(oe=oe.matching)||void 0===oe||oe.forEach(re=>{let{id:ae,key:pe,value:_e}=re;if(_e){let Re=dt.findNode(ae);var Se,be,Ee,ve;pe==_e?null!==(Se=R.test)&&void 0!==Se&&null!==(Se=Se.icontrue)&&void 0!==Se&&Se.path&&j(Re,{source:(0,D.U)(null===(be=R.test)||void 0===be?void 0:be.icontrue),iteration:0,nodeStatus:u,slideStatus:B},lt):null!==(Ee=R.test)&&void 0!==Ee&&null!==(Ee=Ee.iconfalse)&&void 0!==Ee&&Ee.path&&j(Re,{source:(0,D.U)(null===(ve=R.test)||void 0===ve?void 0:ve.iconfalse),iteration:0,nodeStatus:u,slideStatus:B},lt)}})}},gt=(R,u,B,lt)=>{var ot,H,b,V,nt,vt,Ct,ut,yt;null!==(ot=u.animate)&&void 0!==ot&&ot.value&&(0,h.a)(u,B.nodeStatus,B.slideStatus),null!==(H=u.interactive)&&void 0!==H&&H.show?(console.log(`node(${u.id}) | nodeStatus(${B.nodeStatus}) | slideStatus(${B.slideStatus}) | show`),((R,u,B,lt)=>{var ot,H,b;let V={total:0,counter:0},{triggershow:nt,triggerrun:vt,triggerhide:wt,action:Ct,audio:yt}=null!==(ot=null===(H=R.interactive)||void 0===H?void 0:H.show)&&void 0!==ot?ot:{};if(console.log(`node(${R.id}) | nodeStatus(${u}) | slideStatus(${B}) | show`),nt){let{id:_t,ids:mt,time:Ft,async:Gt}=nt;"asynctrue"==Gt?setTimeout(()=>{(0,I.GD)({id:_t,ids:mt,nodeStatus:u,slideStatus:B})}):"time"==Gt&&setTimeout(()=>{(0,I.GD)({id:_t,ids:mt,nodeStatus:u,slideStatus:B})},1e3*(null!=Ft?Ft:0))}if(vt){let{id:_t,ids:mt,time:Ft,async:Gt}=vt;"asynctrue"==Gt?setTimeout(()=>{(0,I.MF)({id:_t,ids:mt,nodeStatus:u,slideStatus:B})}):"time"==Gt&&setTimeout(()=>{(0,I.MF)({id:_t,ids:mt,nodeStatus:u,slideStatus:B})},1e3*(null!=Ft?Ft:0))}if(wt){let{id:_t,ids:mt,time:Ft,async:Gt}=wt;"asynctrue"==Gt?setTimeout(()=>{(0,I.vi)({id:_t,ids:mt,nodeStatus:u,slideStatus:B})}):"time"==Gt&&setTimeout(()=>{(0,I.vi)({id:_t,ids:mt,nodeStatus:u,slideStatus:B})},1e3*(null!=Ft?Ft:0))}let ut=()=>{setTimeout(()=>{if(V.counter>=V.total){if(lt&&lt(),nt){let{id:_t,ids:mt,async:Ft}=nt;(!Ft||"asyncfalse"==Ft)&&(0,I.GD)({id:_t,ids:mt,nodeStatus:u,slideStatus:B})}if(vt){let{id:_t,ids:mt,async:Ft}=vt;(!Ft||"asyncfalse"==Ft)&&(0,I.MF)({id:_t,ids:mt,nodeStatus:u,slideStatus:B})}if(wt){let{id:_t,ids:mt,async:Ft}=wt;(!Ft||"asyncfalse"==Ft)&&(0,I.vi)({id:_t,ids:mt,nodeStatus:u,slideStatus:B})}}})};if(null!=Ct&&Ct.value){V.total+=1;let _t=()=>{V.counter+=1,ut()};switch(null==Ct?void 0:Ct.value){case"hide":jQuery("#"+R.id).addClass("hide"),_t();break;case"points":{let{points:mt,time:Ft,iteration:Gt,finish:$t}=Ct;(0,C.c)(R.id,{node:R,points:mt,time:Ft,iteration:Gt,finish:$t,nodeStatus:u,slideStatus:B},_t);break}default:{let{value:mt,time:Ft,iteration:Gt,finish:$t}=Ct;(0,ft.h)(R.id,{node:R,value:mt,time:Ft,iteration:Gt,finish:$t,nodeStatus:u,slideStatus:B},_t);break}}}if(null!=yt&&null!==(b=yt.source)&&void 0!==b&&b.path){V.total+=1;let _t=()=>{V.counter+=1,ut()},mt=(0,f.d)(R.id,yt,V,{nodeStatus:u,slideStatus:B},_t);-1==(null==yt?void 0:yt.iteration)&&jQuery("#"+R.id).click(Ft=>{Ft.preventDefault(),mt&&(mt.volume=mt.volume>=1?0:mt.volume+.25),console.log(null==mt?void 0:mt.volume)})}V.total||ut()})(u,B.nodeStatus,B.slideStatus,lt)):lt&&lt(),null!==(b=u.interactive)&&void 0!==b&&b.click&&(ut=null===(Ct=u.interactive)||void 0===Ct?void 0:Ct.click,Object.keys(null!=ut?ut:{}).map(mt=>ut[mt]?1:0).includes(1)&&jQuery("#"+u.id).addClass("interactive-click"),jQuery("#"+u.id).click(ut=>{ut.preventDefault(),B.nodeStatus=dt.refreshNodeStatus(),console.log(`node(${u.id}) | nodeStatus(${B.nodeStatus}) | slideStatus(${B.slideStatus}) | click`),(0,z.J)(u,B.nodeStatus,B.slideStatus)})),null!==(V=u.variable)&&void 0!==V&&V.input&&jQuery("#"+u.id).on("change","input,textarea",ut=>{ut.preventDefault(),((R,u,B)=>{var lt,ot;_.L.variable.setValue(null!==(lt=null===(ot=u.variable)||void 0===ot||null===(ot=ot.input)||void 0===ot?void 0:ot.variable)&&void 0!==lt?lt:"",R),(R=>{var u;let B=(lt,ot)=>{null==lt||lt.forEach(H=>{switch(H.type){case rt.h.GROUP:(0,Q.v)(H.id,{},ot?window.document.getElementById(ot):null),B(H.nodes,H.id);break;case rt.h.POLYGON:break;case rt.h.TEXT:(0,O.L)(H.id,{size:H.size,attribute:H.attribute,source:H.source},ot?window.document.getElementById(ot):null)}})};B(null===(u=R.svg)||void 0===u?void 0:u.nodes)})(B)})(ut.target.value,u,R)}),null!==(nt=u.variable)&&void 0!==nt&&nt.click&&(null!==(yt=u.variable)&&void 0!==yt&&null!==(yt=yt.click)&&void 0!==yt&&yt.variable&&jQuery("#"+u.id).addClass("variable-click"),jQuery("#"+u.id).click(ut=>{ut.preventDefault(),((R,u)=>{var B;_.L.variable.setValueOperator(null===(B=R.variable)||void 0===B?void 0:B.click),(R=>{var u;let B=(lt,ot)=>{null==lt||lt.forEach(H=>{switch(H.type){case rt.h.GROUP:(0,Q.v)(H.id,{},ot?window.document.getElementById(ot):null),B(H.nodes,H.id);break;case rt.h.POLYGON:break;case rt.h.TEXT:(0,O.L)(H.id,{size:H.size,attribute:H.attribute,source:H.source},ot?window.document.getElementById(ot):null)}})};B(null===(u=R.svg)||void 0===u?void 0:u.nodes)})(u)})(u,R)})),"test"==(null===(vt=u.source)||void 0===vt?void 0:vt.type)&&((R,u)=>{var B;let lt=()=>{};switch(null===(B=R.source)||void 0===B||null===(B=B.test)||void 0===B?void 0:B.type){case"truefalse":{jQuery("#"+R.id).click(b=>{b.preventDefault(),((R,u,B,lt,ot)=>{var H,b;let V=null===(H=R.source)||void 0===H||null===(H=H.test)||void 0===H||null===(H=H.truefalse)||void 0===H?void 0:H.iscorrect;u.test?u.test.answer?u.test.answer.truefalse={value:R.id,iscorrect:V}:u.test.answer={truefalse:{value:R.id,iscorrect:V}}:u.test={answer:{truefalse:{value:R.id,iscorrect:V}}},null!==(b=u.svg)&&void 0!==b&&b.nodes.find(vt=>{var wt;return"submit"==(null===(wt=vt.source)||void 0===wt||null===(wt=wt.test)||void 0===wt?void 0:wt.type)})||qt(R,u,B,lt,{iscorrect:V},ot);let nt=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(nt,u,R)})(R,u,dt.nodeStatus,dt.slideStatus,lt)});let H=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(H,u,R);break}case"singlechoice":{jQuery("#"+R.id).click(b=>{b.preventDefault(),((R,u,B,lt,ot)=>{var H,b;let V=null===(H=R.source)||void 0===H||null===(H=H.test)||void 0===H||null===(H=H.singlechoice)||void 0===H?void 0:H.iscorrect;u.test?u.test.answer?u.test.answer.singlechoice={value:R.id,iscorrect:V}:u.test.answer={singlechoice:{value:R.id,iscorrect:V}}:u.test={answer:{singlechoice:{value:R.id,iscorrect:V}}},null!==(b=u.svg)&&void 0!==b&&b.nodes.find(vt=>{var wt;return"submit"==(null===(wt=vt.source)||void 0===wt||null===(wt=wt.test)||void 0===wt?void 0:wt.type)})||qt(R,u,B,lt,{iscorrect:V},ot);let nt=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(nt,u,R)})(R,u,dt.nodeStatus,dt.slideStatus,lt)});let H=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(H,u,R);break}case"multichoice":{jQuery("#"+R.id).click(b=>{b.preventDefault(),((R,u,B,lt,ot)=>{var H,b;let V=null===(H=R.source)||void 0===H||null===(H=H.test)||void 0===H||null===(H=H.multichoice)||void 0===H?void 0:H.iscorrect;u.test?u.test.answer?u.test.answer.multichoice?u.test.answer.multichoice.find(vt=>vt.value==R.id)?u.test.answer.multichoice=u.test.answer.multichoice.filter(vt=>vt.value!=R.id):u.test.answer.multichoice.push({value:R.id,iscorrect:V}):u.test.answer.multichoice=[{value:R.id,iscorrect:V}]:u.test.answer={multichoice:[{value:R.id,iscorrect:V}]}:u.test={answer:{multichoice:[{value:R.id,iscorrect:V}]}},null!==(b=u.svg)&&void 0!==b&&b.nodes.find(vt=>{var wt;return"submit"==(null===(wt=vt.source)||void 0===wt||null===(wt=wt.test)||void 0===wt?void 0:wt.type)})||qt(R,u,B,lt,{iscorrect:V},ot);let nt=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(nt,u,R)})(R,u,dt.nodeStatus,dt.slideStatus,lt)});let H=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(H,u,R);break}case"fill":{var ot;jQuery("#"+R.id).on("keyup",'input[type="text"]',b=>{var V;let nt=jQuery("<div/>").css({"font-size":jQuery(b.target).css("font-size"),visibility:"hidden",float:"left"}).text(b.target.value).appendTo(window.document.body);jQuery(b.target).css({width:(null!==(V=nt.width())&&void 0!==V?V:0)+30})}).on("keypress",'input[type="text"]',b=>{13===(b.keyCode||b.charCode||b.which)&&(b.preventDefault(),b.stopPropagation(),jQuery(b.target).blur())}).on("change",'input[type="text"]',b=>{var V,nt;let vt=null===(V=b.target)||void 0===V?void 0:V.getAttribute("data-key"),wt=null===(nt=b.target)||void 0===nt||null===(nt=nt.value)||void 0===nt?void 0:nt.trim();jQuery("#"+R.id).find(`input[type="text"][data-key="${vt}"]`).val(wt),((R,u,B,lt,ot,H)=>{var b,V,nt,vt;let{value:wt}=null!==(b=null===(V=R.source)||void 0===V||null===(V=V.test)||void 0===V||null===(V=V.fill)||void 0===V?void 0:V.find(ut=>ut.key==`[[${ot.key}]]`))&&void 0!==b?b:{},Ct=wt&&wt.map(ut=>null==ut?void 0:ut.toLocaleLowerCase()).includes(null===(nt=ot.value)||void 0===nt?void 0:nt.toLocaleLowerCase());ot.iscorrect=Ct,u.test?u.test.answer?u.test.answer.fill?u.test.answer.fill.find(ut=>ut.key==ot.key)?u.test.answer.fill.filter(ut=>ut.key==ot.key).forEach(ut=>{ut.value=ot.value,ut.iscorrect=ot.iscorrect}):u.test.answer.fill.push(ot):u.test.answer.fill=[ot]:u.test.answer={fill:[ot]}:u.test={answer:{fill:[ot]}};let yt=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(yt,u,R),null!==(vt=u.svg)&&void 0!==vt&&vt.nodes.find(ut=>{var _t;return"submit"==(null===(_t=ut.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)})||qt(R,u,B,lt,{iscorrect:Ct},H)})(R,u,dt.nodeStatus,dt.slideStatus,{id:R.id,key:vt,value:wt},lt)}),null!==(ot=u.test)&&void 0!==ot&&ot.showselection||jQuery("#"+R.id).addClass("hide-selection");let H=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(H,u,R);break}case"matching-empty":{jQuery("#"+R.id).on("touchmove",".ondrag-item",function(b){b.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(b){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${R.size.height/R.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${b.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(b){var V;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(V=u.test)&&void 0!==V&&V.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),zt(R,u)},drag:function(b){},dragend:function(b){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${R.id} .ondrop-here`).kendoDropTarget({dragenter:function(b){b.dropTarget.hasClass("actived")&&b.dropTarget.addClass("focused")},dragleave:function(b){b.dropTarget.hasClass("actived")&&b.dropTarget.removeClass("focused")},drop:function(b){if(!b.dropTarget.hasClass("actived"))return;b.dropTarget.removeClass("focused");let V=b.dropTarget,nt=b.draggable.currentTarget;V.is(":empty")||V.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),nt.appendTo(V);let vt=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(vt,u,R),((R,u,B,lt,ot,H)=>{var b,V,nt;let{key:vt}=null!==(b=null===(V=R.source)||void 0===V||null===(V=V.test)||void 0===V?void 0:V.matching)&&void 0!==b?b:{key:"KIEN"},wt=ot.key==vt;zt(R,u);let Ct={id:R.id,key:null!=vt?vt:"",value:ot.key};u.test?u.test.answer?u.test.answer.matching?u.test.answer.matching.find(yt=>yt.id==Ct.id)?u.test.answer.matching.filter(yt=>yt.id==Ct.id).forEach(yt=>{yt.key=Ct.key,yt.value=Ct.value}):u.test.answer.matching.push(Ct):u.test.answer.matching=[Ct]:u.test.answer={matching:[Ct]}:u.test={answer:{matching:[Ct]}},null!==(nt=u.svg)&&void 0!==nt&&nt.nodes.find(yt=>{var ut;return"submit"==(null===(ut=yt.source)||void 0===ut||null===(ut=ut.test)||void 0===ut?void 0:ut.type)})||qt(R,u,B,lt,{iscorrect:wt},H)})(R,u,dt.nodeStatus,dt.slideStatus,{key:nt.data("key")},lt)}});let H=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(H,u,R);break}case"matching-content":{jQuery("#"+R.id).on("touchmove",".ondrag-item",function(b){b.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(b){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${R.size.height/R.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${b.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(b){var V;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(V=u.test)&&void 0!==V&&V.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(b){},dragend:function(b){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${R.id} .ondrop-here`).kendoDropTarget({dragenter:function(b){b.dropTarget.hasClass("actived")&&b.dropTarget.addClass("focused")},dragleave:function(b){b.dropTarget.hasClass("actived")&&b.dropTarget.removeClass("focused")},drop:function(b){if(!b.dropTarget.hasClass("actived"))return;b.dropTarget.removeClass("focused");let V=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(V,u,R),b.draggable.currentTarget.appendTo(b.dropTarget),Rt(u,dt.nodeStatus,dt.slideStatus,lt)}});let H=(0,L.RY)(S.F.TEST_GROUP,"g",void 0,_.L.target);(0,L.kE)(H,u,R);break}case"speech":break;case"submit":jQuery("#"+R.id).click(H=>{H.preventDefault(),((R,u,B,lt,ot)=>{var H,b,V,nt,vt;let wt;var Ct;if(null!=u&&null!==(H=u.test)&&void 0!==H&&null!==(H=H.answer)&&void 0!==H&&H.truefalse)wt=null==u||null===(Ct=u.test)||void 0===Ct||null===(Ct=Ct.answer)||void 0===Ct||null===(Ct=Ct.truefalse)||void 0===Ct?void 0:Ct.iscorrect;else if(null!=u&&null!==(b=u.test)&&void 0!==b&&null!==(b=b.answer)&&void 0!==b&&b.singlechoice){var yt;wt=null==u||null===(yt=u.test)||void 0===yt||null===(yt=yt.answer)||void 0===yt||null===(yt=yt.singlechoice)||void 0===yt?void 0:yt.iscorrect}else if(null!=u&&null!==(V=u.test)&&void 0!==V&&null!==(V=V.answer)&&void 0!==V&&V.multichoice){var ut,_t,mt;wt=1==[null==u||null===(ut=u.test)||void 0===ut||null===(ut=ut.answer)||void 0===ut||null===(ut=ut.multichoice)||void 0===ut?void 0:ut.length,null==u||null===(_t=u.test)||void 0===_t||null===(_t=_t.answer)||void 0===_t||null===(_t=_t.multichoice)||void 0===_t||null===(_t=_t.map(re=>re.iscorrect?1:0))||void 0===_t?void 0:_t.reduce((re,ae)=>re+ae),null==u||null===(mt=u.svg)||void 0===mt||null===(mt=mt.nodes)||void 0===mt||null===(mt=mt.filter(re=>{var ae,pe;return"multichoice"==(null===(ae=re.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)&&(null===(pe=re.source)||void 0===pe||null===(pe=pe.test)||void 0===pe||null===(pe=pe.multichoice)||void 0===pe?void 0:pe.iscorrect)}))||void 0===mt?void 0:mt.length].filter((re,ae,pe)=>pe.indexOf(re)==ae).length}else if(null!=u&&null!==(nt=u.test)&&void 0!==nt&&null!==(nt=nt.answer)&&void 0!==nt&&nt.fill){var Ft,Gt;wt=(null==u||null===(Ft=u.test)||void 0===Ft||null===(Ft=Ft.answer)||void 0===Ft||null===(Ft=Ft.fill)||void 0===Ft||null===(Ft=Ft.map(re=>re.iscorrect?1:0))||void 0===Ft?void 0:Ft.reduce((re,ae)=>re+ae))==(null===(Gt=u.svg)||void 0===Gt||null===(Gt=Gt.nodes)||void 0===Gt||null===(Gt=Gt.filter(re=>{var ae;return"fill"==(null===(ae=re.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===Gt?void 0:Gt.length)}else if(null!=u&&null!==(vt=u.test)&&void 0!==vt&&null!==(vt=vt.answer)&&void 0!==vt&&vt.matching){var $t,oe;wt=(null===($t=u.svg)||void 0===$t||null===($t=$t.nodes)||void 0===$t||null===($t=$t.filter(re=>{var ae;return"matching-empty"==(null===(ae=re.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===$t?void 0:$t.length)==((null==u||null===(oe=u.test)||void 0===oe||null===(oe=oe.answer)||void 0===oe?void 0:oe.matching)||[]).map(re=>re.key==re.value?1:0).reduce((re,ae)=>re+ae)}qt(R,u,B,lt,{iscorrect:wt},ot)})(R,u,dt.nodeStatus,dt.slideStatus,lt)})}})(u,R)};var Y=v(1281),te=v(6153),E=v(3069),k=v(7945),d=v(3477),K=v(745),xt=v(6407),Tt=v(3617),Mt=v(4669);const Vt=(R,u,B)=>{if(B.slideStatus!=dt.slideStatus||!u.length)return;let lt=u.shift(),ot=R.filter(nt=>{var vt;return(null!==(vt=nt.idx)&&void 0!==vt?vt:0)==lt});if(!ot.length)return;let H=Math.max.apply(null,ot.map(nt=>{var vt;return null!==(vt=nt.time)&&void 0!==vt?vt:0})),b=!1,V=H<.5?0:setTimeout(()=>{b||(b=!0,Vt(R,u,B))},1e3*H);Jt(R,u,ot,0,B,{idx:lt,total:ot.length,counter:0,isRecursive:b,timeoutRecursive:V,maxTimeCoundown:H,uid:Math.floor(1e9*Math.random())})},Jt=(R,u,B,lt,ot,H)=>{if(ot.slideStatus!=dt.slideStatus)return;let b=B[lt];if(b){switch(b.type){case rt.h.GROUP:break;case rt.h.CIRCLE:(0,Y.K)(b.id,{size:b.size,attribute:b.attribute},b.pid?window.document.getElementById(b.pid):null);break;case rt.h.ELLIPSE:(0,te.W)(b.id,{size:b.size,attribute:b.attribute},b.pid?window.document.getElementById(b.pid):null);break;case rt.h.LINE:(0,E.q)(b.id,{size:b.size,attribute:b.attribute},b.pid?window.document.getElementById(b.pid):null);break;case rt.h.RECT:(0,k.a)(b.id,{size:b.size,attribute:b.attribute},b.pid?window.document.getElementById(b.pid):null);break;case rt.h.POLYGON:(0,d.u)(b.id,{size:b.size,attribute:b.attribute},b.pid?window.document.getElementById(b.pid):null);break;case rt.h.POLYLINE:(0,Tt.E)(b.id,{size:b.size,attribute:b.attribute},b.pid?window.document.getElementById(b.pid):null);break;case rt.h.FOREIGNOBJECT:(0,K.$)(b.id,{size:b.size,attribute:b.attribute,style:b.style,source:b.source},b.pid?window.document.getElementById(b.pid):null);break;case rt.h.IMAGE:(0,tt.B)(b.id,{size:b.size,attribute:b.attribute,source:b.source},b.pid?window.document.getElementById(b.pid):null);break;case rt.h.TEXT:(0,O.L)(b.id,{size:b.size,attribute:b.attribute,source:b.source},b.pid?window.document.getElementById(b.pid):null);break;case rt.h.TSPAN:(0,Mt.M)(b.id,{size:b.size,attribute:b.attribute,source:b.source},b.pid?window.document.getElementById(b.pid):null);break;case rt.h.PATH:(0,xt.X)(b.id,{size:b.size,attribute:b.attribute},b.pid?window.document.getElementById(b.pid):null)}gt(ot.slide,b,ot,()=>{H.counter+=1,H.maxTimeCoundown<.5&&H.counter>=H.total&&(H.total=H.counter=0,H.isRecursive||(clearTimeout(H.timeoutRecursive),H.isRecursive=!0,setTimeout(()=>{Vt(R,u,ot)},250)))}),Jt(R,u,B,++lt,ot,H)}},dt=new class jt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(u){this._dataSource=u.data||{},_.L.variable.set=u.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var u,B;return null!==(u=null===(B=this._dataSource)||void 0===B||null===(B=B.slides)||void 0===B?void 0:B.length)&&void 0!==u?u:0}get slides(){var u;return(null===(u=this._dataSource)||void 0===u?void 0:u.slides)||[]}get slide(){var u;return((null===(u=this._dataSource)||void 0===u?void 0:u.slides)||[])[this._slideIdx]||{}}findNode(u){var B;let lt=null===(B=this._dataSource)||void 0===B||null===(B=B.slides)||void 0===B?void 0:B.find((yt,ut)=>ut==this._slideIdx),ot=null==lt?void 0:lt.svg,H=(yt,ut)=>{let _t=null==yt?void 0:yt.find(Gt=>Gt.id==u);if(_t)return _t.pid=ut,_t;let mt=0,Ft=yt.length||0;for(;mt<Ft&&!_t&&(_t=H(yt[mt].nodes||[],yt[mt].id),!_t);)mt++;return _t},b=H((null==ot?void 0:ot.nodes)||[]);var V,nt,vt,wt,Ct;return b?(b.style=null!==(V=b.style)&&void 0!==V?V:{},b.source=null!==(nt=b.source)&&void 0!==nt?nt:{},b.animate=null!==(vt=b.animate)&&void 0!==vt?vt:{},b.interactive=null!==(wt=b.interactive)&&void 0!==wt?wt:{},b.variable=null!==(Ct=b.variable)&&void 0!==Ct?Ct:{},b):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(u,B,lt){var ot;let H;var b,V;if(this.refreshNodeStatus(),this.refreshSlideStatus(),lt)H=null===(b=this._dataSource)||void 0===b||null===(b=b.slides)||void 0===b?void 0:b.find(Ct=>Ct.code==lt||Ct.id==lt),H&&(this._slideIdx=(null===(V=this._dataSource)||void 0===V||null===(V=V.slides)||void 0===V?void 0:V.indexOf(H))||0);else if(B){var nt,vt;H=null===(nt=this._dataSource)||void 0===nt||null===(nt=nt.slides)||void 0===nt?void 0:nt.find(Ct=>Ct.id==B),H&&(this._slideIdx=(null===(vt=this._dataSource)||void 0===vt||null===(vt=vt.slides)||void 0===vt?void 0:vt.indexOf(H))||0)}else this._slideIdx=Math.min(Math.max(u||0,0),this.slideTotal-1),H=this.slide;if(H){var wt;Zt(_.L.container,_.L.svg,H,!0),null===(wt=jQuery(_.L.svg).find("#"+S.F.BACKGROUND_GROUP))||void 0===wt||wt.empty();let Ct=(0,L.RY)(S.F.BACKGROUND_GROUP,"g",void 0,_.L.svg);(0,L.I6)(Ct,H),(R=>{var u,B,lt,ot;let H=dt.nodeStatus,b=dt.slideStatus;null===(u=R.svg)||void 0===u||u.nodes.forEach(nt=>{nt.pid=Math.ceil(1e9*Math.random()),(0,Q.v)(nt.pid)});let V=null===(B=R.svg)||void 0===B||null===(B=B.nodes)||void 0===B?void 0:B.map(nt=>{var vt;return null!==(vt=nt.idx)&&void 0!==vt?vt:0}).filter((nt,vt,wt)=>wt.indexOf(nt)==vt).sort((nt,vt)=>(null!=nt?nt:0)-(null!=vt?vt:0));Vt(null!==(lt=null===(ot=R.svg)||void 0===ot?void 0:ot.nodes)&&void 0!==lt?lt:[],null!=V?V:[],{slide:R,nodeStatus:H,slideStatus:b})})(H)}this.changeSlide(this.slides,null===(ot=this.slide)||void 0===ot?void 0:ot.id,this.slideIdx,this.slides.length,H)}set onChangeSlide(u){this._fnChangeSlides.push(u)}changeSlide(u,B,lt,ot,H){this._fnChangeSlides.forEach(b=>b(u,B,lt,ot,H))}},Zt=(R,u,B,lt)=>{var ot,H,b,V;let nt=window.document.querySelector(u);var vt;nt||(nt=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(vt=window.document.querySelector(R))||void 0===vt||vt.appendChild(nt)),lt&&(nt.textContent=null);let{x:wt,y:Ct,width:yt,height:ut}=null!==(ot=null==B||null===(H=B.svg)||void 0===H?void 0:H.viewBox)&&void 0!==ot?ot:_.L.screen.frameSize;nt.setAttributeNS(null,"viewBox",wt+" "+Ct+" "+yt+" "+ut),nt.setAttribute("id",u.replace("#",""));var $t,oe,_t=null!==(b=jQuery(R).width())&&void 0!==b?b:1080,mt=null!==(V=jQuery(R).height())&&void 0!==V?V:1080,Gt=yt/ut;Gt>=_t/mt?oe=($t=_t)/Gt:$t=(oe=mt)*Gt,nt.setAttributeNS(null,"width",$t.toString()),nt.setAttributeNS(null,"height",oe.toString())}},7050:(ce,Kt,v)=>{v.d(Kt,{M:()=>rt,a:()=>_});var S=v(5619);const _=(ft,C,f)=>{var I;let{value:O}=null!==(I=ft.animate)&&void 0!==I?I:{};rt(ft.id,{node:ft,value:O,nodeStatus:C,slideStatus:f},()=>{})},rt=(ft,C,f)=>{var I;if(!C.value)return void f();let G=jQuery("#"+ft).parents("g");if(!G.length)return void f();let{size:O}=C.node;G.css("transform-origin",`${O.x+O.width/2}px ${O.y+O.height/2}px`);let Q="",x=null!==(I=C.iteration)&&void 0!==I?I:0,it=[];(C.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?it.push(C.value):C.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(C.value)?(it.push("animation"),it.push(`animation-${C.value}`)):(it.push("animate__animated"),it.push(`animate__${C.value}`)):(it.push("animation"),it.push("animation-fadein")),x<0?(it.push("animation-iteration-infinite"),f(),f=function(){}):x>0&&it.push("animation-iteration-"+(x+1)),Q=it.join(" "),function(at){let h=function(){G.data("animate-running")?G.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){G.data("animate-running",!1),setTimeout(function(){at()},100)}):at()};G.hasClass("animation")?setTimeout(function(){h()}):h()}(function(){var at;z(ft),(x>0||x<0)&&G.one("animationiteration",function(){C.slideStatus===S.J.slideStatus||(G.data("animate-running",!1),z(ft),C.slideStatus===S.J.slideStatus&&f())}),G.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(G.data("animate-running",!1),z(ft),C.finish){default:case 0:case 1:break;case 2:var h;rt(ft,{node:C.node,value:null===(h=C.node.animate)||void 0===h?void 0:h.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{G.addClass("hide")})}C.slideStatus===S.J.slideStatus&&f()}),G.attr("data-class",null!==(at=G.attr("class"))&&void 0!==at?at:""),G.addClass(Q),G.data("animate-running",!0)})},z=function(ft){var C,f,I=jQuery("#"+ft).parents("g"),G=null===(C=I.attr("class"))||void 0===C?void 0:C.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),O=null===(f=I.attr("class"))||void 0===f?void 0:f.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);G&&G.forEach(function(x){jQuery(I).removeClass(x)}),O&&O.forEach(function(x){jQuery(I).removeClass(x)});let Q=I.attr("data-class");Q&&(I.attr("class",Q),I.removeAttr("data-class")),jQuery(I).data("animation-running",!1)}},8946:(ce,Kt,v)=>{v.d(Kt,{h:()=>rt});var S=v(5619),_=v(7050);const rt=(ft,C,f)=>{var I;if(!C.value)return void f();let G=jQuery("#"+ft).parents("g");if(!G.length)return void f();let{size:O}=C.node;G.css("transform-origin",`${O.x+O.width/2}px ${O.y+O.height/2}px`);let Q="",x=null!==(I=C.iteration)&&void 0!==I?I:0,it=[];(C.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?it.push(C.value):(it.push("animation"),it.push(C.value?"animation-"+C.value:"animation-fadein")),x<0?(it.push("animation-iteration-infinite"),f(),f=function(){}):x>0&&it.push("animation-iteration-"+(x+1)),Q=it.join(" "),function(at){let h=function(){G.data("animate-running")?G.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){G.data("animate-running",!1),setTimeout(function(){at()},100)}):at()};G.hasClass("animation")?setTimeout(function(){h()}):h()}(function(){var at;z(ft),(x>0||x<0)&&G.one("animationiteration",function(){C.slideStatus===S.J.slideStatus||(G.data("animate-running",!1),z(ft),C.slideStatus===S.J.slideStatus&&f())}),G.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(G.data("animate-running",!1),z(ft),C.finish){default:case 0:case 1:break;case 2:var h;(0,_.M)(ft,{node:C.node,value:null===(h=C.node.animate)||void 0===h?void 0:h.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{G.addClass("hide")})}C.slideStatus===S.J.slideStatus&&f()}),G.attr("data-class",null!==(at=G.attr("class"))&&void 0!==at?at:""),G.addClass(Q),G.data("animate-running",!0)})},z=function(ft){var C,f=jQuery("#"+ft).parents("g"),I=null===(C=f.attr("class"))||void 0===C?void 0:C.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);I&&I.forEach(function(O){jQuery(f).removeClass(O)});let G=f.attr("data-class");G&&(f.attr("class",G),f.removeAttr("data-class")),jQuery(f).data("animation-running",!1)}},7657:(ce,Kt,v)=>{v.d(Kt,{c:()=>ft});var S=v(9506),_=v(5619),rt=v(5970),z=v(7050);const ft=(f,I,G)=>{var O;if(!I.points||!I.points.length)return void G();let Q=jQuery("#"+f),it=function C(f){let I=[];2===f.length&&f.splice(1,0,[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]);let it,y,at,G=1,O=f.length;for(;G<O;){if(it=f[G-1],y=f[G],at=f[G+1],(Math.abs(it[0]-y[0])>=15||Math.abs(it[1]-y[1])>=15)&&Math.pow(it[0]-y[0],2)+Math.pow(it[1]-y[1],2)>=Math.pow(15,2)&&at&&(Math.abs(it[0]-at[0])<=20||Math.abs(it[1]-at[1])<=20)&&Math.pow(it[0]-at[0],2)+Math.pow(it[1]-at[1],2)<=Math.pow(20,2))I.push(y);else{let tt=y[0]-it[0],M=y[1]-it[1],F=Math.max(Math.abs(tt),Math.abs(M));for(var h=0;h<F;h+=15)I.push([it[0]+tt*h/F,it[1]+M*h/F])}G++}return O>0&&(I.splice(0,0,f[0]),I.push(f[O-1])),I}((Ot=>{if(1==Ot.length){let{size:q}=I.node;return[[q.x+q.width/2,q.y+q.height/2],...Ot]}return[...Ot]})(I.points||[])),y=null!==(O=I.iteration)&&void 0!==O?O:0;if(y<0&&(G(),G=function(){}),Q.data("work-running")&&y<0)return;Q.data("work-running",!0);let L,at=it.length,h=Math.max(20,1e3*(I.time||3)/at),{id:tt,type:M,size:F,attribute:J}=_.J.findNode(f),j=function(Ot){if(I.slideStatus!==_.J.slideStatus)return Q.data("work-running",!1),void(I.slideStatus===_.J.slideStatus&&G());if(Ot<at){let D=it[Ot];D&&(L=Object.assign({},F,{x:D[0]-F.width/2,y:D[1]-F.height/2}),Object.assign(J,(0,S.xW)(M,L,J)),(0,rt.tD)(window.document.getElementById(tt),J),setTimeout(function(){j(++Ot)},h))}else if(y>0)y--,j(1);else if(y<0)j(1);else switch(Q.data("work-running",!1),I.slideStatus===_.J.slideStatus&&G(),I.finish){default:case 0:break;case 1:Object.assign(J,(0,S.xW)(M,F,J)),(0,rt.tD)(window.document.getElementById(tt),J);break;case 2:var q;(0,z.M)(I.node.id,{node:I.node,value:null===(q=I.node.animate)||void 0===q?void 0:q.out,nodeStatus:I.nodeStatus,slideStatus:I.slideStatus},()=>{Q.addClass("hide")})}};j(1)}},6769:(ce,Kt,v)=>{v.d(Kt,{d:()=>rt});var S=v(6611),_=v(5619);const rt=(z,ft,C,f,I)=>{var G,O,Q,x,it,y,at;if(f.slideStatus!=_.J.slideStatus)return ft.async&&"change-slide"!=ft.async?void 0:void I();if(f.nodeStatus!=_.J.nodeStatus&&(!ft.async||"change-node"==ft.async))return void I();if(!(null!==(G=ft.source)&&void 0!==G&&G.path||null!==(O=ft.source)&&void 0!==O&&O.url))return console.warn(`${z} -> audio no source!`),I(),void(I=()=>{});var h=jQuery("#"+z);let tt=null!==(Q=ft.iteration)&&void 0!==Q?Q:0;if(tt<0&&(I(),I=function(){}),!(h.data("audio-running")&&tt<0)){h.data("audio-running",!0);var M=function(J){J.pause(),J.remove(),h.data("audio-running",!1)},F=new Audio;return F.autoplay=!0,F.loop=0!=tt,F.preload="auto",F.controls=!0,F.setAttributeNode(document.createAttribute("playsinline")),F.addEventListener("canplay",function(){var J=F.play();J&&J.then(function(L){var j;h.data("audio-running",!0),"time"==ft.async?setTimeout(()=>{f.slideStatus===_.J.slideStatus&&(M(F),I(),I=()=>{})},1e3*(null!==(j=ft.time)&&void 0!==j?j:1)):"non-stop"==ft.async&&(I(),I=()=>{})}).catch(function(L){h.data("audio-running",!1),f.slideStatus===_.J.slideStatus&&(I(),I=()=>{})})}),F.addEventListener("timeupdate",function(){switch(ft.async){case"time":case"change-slide":f.slideStatus!==_.J.slideStatus&&(M(this),I(),I=()=>{});break;case"finish-action":C.total>=2&&C.total-C.counter==1&&(M(this),I(),I=()=>{});break;default:case"change-node":f.nodeStatus!==_.J.nodeStatus&&(M(this),I(),I=()=>{});case"non-stop":}}),F.addEventListener("canplaythrough",function(){this.loop&&(tt>0?tt--:0==tt&&(this.loop=!1))}),F.addEventListener("play",function(){}),F.addEventListener("pause",function(){}),F.addEventListener("ended",function(){this.remove(),h.data("audio-running",!1),f.slideStatus===_.J.slideStatus&&(I(),I=()=>{})}),F.onerror=function(){this.remove(),h.data("audio-running",!1),f.slideStatus===_.J.slideStatus&&(I(),I=()=>{})},F.src=(null!==(x=ft.source)&&void 0!==x&&x.path?(null===(it=S.L.config)||void 0===it?void 0:it.readfileuploadurl)+(null===(y=ft.source)||void 0===y?void 0:y.path):null===(at=ft.source)||void 0===at?void 0:at.url)||"",F}}},334:(ce,Kt,v)=>{v.d(Kt,{J:()=>G});var S=v(6611),_=v(5619),rt=v(8946),z=v(7657),ft=v(6769),C=v(3591),f=v(2241),I=v(7050);const G=(O,Q,x,it)=>{var y,at,h;let tt={total:0,counter:0},{triggershow:M,triggerrun:F,triggerhide:J,action:L,audio:j,slide:Ot,media:q}=null!==(y=null===(at=O.interactive)||void 0===at?void 0:at.click)&&void 0!==y?y:{};if(console.log(`node(${O.id}) | nodeStatus(${Q}) | slideStatus(${x}) | click`),M){let{id:Pt,ids:st,time:kt,async:zt}=M;"asynctrue"==zt?(0,C.GD)({id:Pt,ids:st,nodeStatus:Q,slideStatus:x}):"time"==zt&&setTimeout(()=>{(0,C.GD)({id:Pt,ids:st,nodeStatus:Q,slideStatus:x})},1e3*(null!=kt?kt:0))}if(F){let{id:Pt,ids:st,time:kt,async:zt}=F;"asynctrue"==zt?(0,C.MF)({id:Pt,ids:st,nodeStatus:Q,slideStatus:x}):"time"==zt&&setTimeout(()=>{(0,C.MF)({id:Pt,ids:st,nodeStatus:Q,slideStatus:x})},1e3*(null!=kt?kt:0))}if(J){let{id:Pt,ids:st,time:kt,async:zt}=J;"asynctrue"==zt?(0,C.vi)({id:Pt,ids:st,nodeStatus:Q,slideStatus:x}):"time"==zt&&setTimeout(()=>{(0,C.vi)({id:Pt,ids:st,nodeStatus:Q,slideStatus:x})},1e3*(null!=kt?kt:0))}let D=()=>{setTimeout(()=>{if(tt.counter>=tt.total){if(it&&it(),M){let{id:Pt,ids:st,async:kt}=M;(!kt||"asyncfalse"==kt)&&(0,C.GD)({id:Pt,ids:st,nodeStatus:Q,slideStatus:x})}if(F){let{id:Pt,ids:st,async:kt}=F;(!kt||"asyncfalse"==kt)&&(0,C.MF)({id:Pt,ids:st,nodeStatus:Q,slideStatus:x})}if(J){let{id:Pt,ids:st,async:kt}=J;(!kt||"asyncfalse"==kt)&&(0,C.vi)({id:Pt,ids:st,nodeStatus:Q,slideStatus:x})}}})};if(null!=L&&L.value){tt.total+=1;let Pt=()=>{tt.counter+=1,D()};switch(null==L?void 0:L.value){case"hide":var Dt;(0,I.M)(O.id,{node:O,value:null===(Dt=O.animate)||void 0===Dt?void 0:Dt.out,nodeStatus:Q,slideStatus:x},()=>{jQuery("#"+O.id).addClass("hide"),Pt()});break;case"points":{let{points:st,time:kt,iteration:zt,finish:et}=L;st&&(0,z.c)(O.id,{node:O,points:st,time:kt,iteration:zt,finish:et,nodeStatus:Q,slideStatus:x},Pt);break}default:{let{value:st,time:kt,iteration:zt,finish:et}=L;(0,rt.h)(O.id,{node:O,value:st,time:kt,iteration:zt,finish:et,nodeStatus:Q,slideStatus:x},Pt);break}}}if(null!=j&&null!==(h=j.source)&&void 0!==h&&h.path){tt.total+=1;let Pt=()=>{tt.counter+=1,D()};(0,ft.d)(O.id,j,tt,{nodeStatus:Q,slideStatus:x},Pt)}if(tt.total||D(),null!=Ot&&Ot.id)switch(Ot.id){case-1:_.J.runSlide(_.J.slideIdx-1);break;case-2:_.J.runSlide(_.J.slideIdx+1);break;default:var It;_.J.runSlide(void 0,Ot.id,null===(It=Ot.code)||void 0===It?void 0:It.toString())}if(null!=q&&q.type){var St;let st=`<div class="popup-media-viewer"><iframe src="${(0,f._)({readfileuploadurl:null===(St=S.L.config)||void 0===St?void 0:St.readfileuploadurl,type:null==q?void 0:q.type,oss:null==q?void 0:q.oss,path:null==q?void 0:q.path,url:null==q?void 0:q.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,kt=jQuery(st).appendTo(window.document.body);kt.find(".btn-close").click(function(zt){zt.preventDefault(),kt.remove()})}}},3591:(ce,Kt,v)=>{v.d(Kt,{GD:()=>z,MF:()=>ft,vi:()=>C});var S=v(5619),_=v(334),rt=v(7050);const z=f=>{f.id?jQuery("#"+f.id).removeClass("hide"):f.ids&&f.ids.forEach(I=>{jQuery("#"+I).removeClass("hide")})},ft=f=>{f.id?(jQuery("#"+f.id).removeClass("hide"),(0,_.J)(S.J.findNode(f.id),f.nodeStatus,f.slideStatus)):f.ids&&f.ids.forEach(I=>{jQuery("#"+I).removeClass("hide"),(0,_.J)(S.J.findNode(I),f.nodeStatus,f.slideStatus)})},C=f=>{if(f.id){var I;let G=S.J.findNode(f.id);(0,rt.M)(f.id,{node:G,value:null===(I=G.animate)||void 0===I?void 0:I.out,nodeStatus:f.nodeStatus,slideStatus:f.slideStatus},()=>{jQuery("#"+f.id).addClass("hide")})}else f.ids&&f.ids.forEach(G=>{var O;let Q=S.J.findNode(G);(0,rt.M)(G,{node:Q,value:null===(O=Q.animate)||void 0===O?void 0:O.out,nodeStatus:f.nodeStatus,slideStatus:f.slideStatus},()=>{jQuery("#"+G).addClass("hide")})})}},5970:(ce,Kt,v)=>{v.d(Kt,{cR:()=>J,rN:()=>Ot,t8:()=>L,fn:()=>q,RY:()=>Pt,tD:()=>D,KG:()=>It,c_:()=>Dt,s6:()=>j,I6:()=>Y,in:()=>st,IA:()=>gt,KP:()=>Rt,AE:()=>kt,xJ:()=>qt,D_:()=>zt,kE:()=>te});var S=v(1999),_=v(7873),rt=v(6315),ft=/^#?[a-fA-F0-9]+$/;const I=(E,k)=>{var d;if("none"==(E=null!==(d=E)&&void 0!==d?d:""))return"none";if("transparent"==E)return"rgba(0,0,0,0)";if(E.includes("rgba("))return E;if(E.includes("rgb(")&&(E=(0,rt.w)(E)),!(E=E.replace(/[^0-9a-fA-F]/g,"")))return"";if(!ft.test(E))return console.error(`hex2rgba -> ${E}: first argument has invalid hexadecimal characters`),"";if("#"===E[0]&&(E=E.slice(1)),3===E.length){let xt=E.split("");xt.splice(2,0,E[2]),xt.splice(1,0,E[1]),xt.splice(0,0,E[0]),E=xt.join("")}if(6!==E.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var K=[parseInt(E.slice(0,2),16),parseInt(E.slice(2,4),16),parseInt(E.slice(4,6),16)];return k="number"==typeof k?k:parseFloat(k),K.push(k>=0&&k<=1?k:1),"rgba("+K.join(",")+")"};var G=v(2241),O=v(8779),Q=v(6611),x=v(9841),it=v(7945),y=v(9173),at=v(1281),h=v(5619),tt=v(745),M=v(6847),F=v(9506);class J{constructor(k,d){let K=window.document.querySelector(d);var xt;K||(K=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(xt=window.document.querySelector(k))||void 0===xt||xt.appendChild(K));let{svgViewBox:Tt,svgSize:Mt}=Q.L.screen.init();K.setAttributeNS(null,"viewBox",`${Tt.x} ${Tt.y} ${Tt.width} ${Tt.height}`),K.setAttribute("id",d.replace("#","")),K.style.display="block",K.style.width=`${Mt.width}px`,K.style.height=`${Mt.height}px`,K.style.backgroundColor="#fafafa",K.style.cursor="default"}}const L=E=>{jQuery(Q.L.target).find("#"+_.F.BACKGROUND_GROUP).empty();let k=Pt(_.F.BACKGROUND_GROUP,"g",void 0,Q.L.target);Y(k,E),(()=>{let d=window.document.getElementById(null==E?void 0:E.id);jQuery(d).find("#"+_.F.BACKGROUND_GROUP).empty();let K=Pt(_.F.BACKGROUND_GROUP,"g",void 0,d);Y(K,E)})()},j=()=>{let E=Q.L.screen.svgViewBox,k=Q.L.screen.svgSize;Q.L.target&&(Q.L.target.setAttributeNS(null,"viewBox",`${E.x} ${E.y} ${E.width} ${E.height}`),Q.L.target.style.left=`${k.x}px`,Q.L.target.style.top=`${k.y}px`,Q.L.target.style.width=`${k.width}px`,Q.L.target.style.height=`${k.height}px`)},Ot=()=>{jQuery(Q.L.target).find(">*:not(defs)").remove()},q=(E,k,d,K,xt)=>{let Tt;return E?(Tt=jQuery(xt||Q.L.target).find("#"+E).get(0),Tt||(Tt=window.document.createElementNS("http://www.w3.org/2000/svg",d),Tt.setAttribute("id",E),k==S.h.FOREIGNOBJECT&&Tt.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(Tt).appendTo(xt||Q.L.target))):(Tt=window.document.createElementNS("http://www.w3.org/2000/svg",d),jQuery(Tt).appendTo(xt||Q.L.target)),null!=K&&K.attribute&&D(Tt,null==K?void 0:K.attribute),null!=K&&K.style&&Dt(Tt,null==K?void 0:K.style),null!=K&&K.source&&It(Tt,k,null==K?void 0:K.source),Tt},D=(E,k)=>{return jQuery(E).attr((d=Object.assign({},k||{}),null===(K=Object.keys(d))||void 0===K||K.forEach(Mt=>{switch(Mt){case"fill":break;case"fillRule":var Yt;Object.assign(d,{"fill-rule":null!==(Yt=d.fillRule)&&void 0!==Yt?Yt:null,fillRule:null});break;case"stroke":var Vt;Object.assign(d,{"stroke-width":null!==(Vt=d.strokeWidth)&&void 0!==Vt?Vt:null,strokeWidth:null});break;case"strokeLinecap":var Jt;Object.assign(d,{"stroke-linecap":null!==(Jt=d.strokeLinecap)&&void 0!==Jt?Jt:null,strokeLinecap:null});break;case"strokeLinejoin":var jt;Object.assign(d,{"stroke-linejoin":null!==(jt=d.strokeLinejoin)&&void 0!==jt?jt:null,strokeLinejoin:null});break;case"strokeMiterlimit":var dt;Object.assign(d,{"stroke-miterlimit":null!==(dt=d.strokeMiterlimit)&&void 0!==dt?dt:null,strokeMiterlimit:null});break;case"strokeDasharray":var Zt;Object.assign(d,{"stroke-dasharray":null!==(Zt=d.strokeDasharray)&&void 0!==Zt?Zt:null,strokeDasharray:null});break;case"strokeDasharrays":var R,u;Object.assign(d,{"stroke-dasharray":null!==(R=null===(u=d.strokeDasharrays)||void 0===u?void 0:u.join(" "))&&void 0!==R?R:null,strokeDasharrays:null});break;case"fontFamily":var B;Object.assign(d,{"font-family":null!==(B=d.fontFamily)&&void 0!==B?B:null,fontFamily:null});break;case"fontWeight":var lt;Object.assign(d,{"font-weight":null!==(lt=d.fontWeight)&&void 0!==lt?lt:null,fontWeight:null});break;case"fontStyle":var ot;Object.assign(d,{"font-style":null!==(ot=d.fontStyle)&&void 0!==ot?ot:null,fontStyle:null});break;case"fontSize":var H;Object.assign(d,{"font-size":null!==(H=d.fontSize)&&void 0!==H?H:null,fontSize:null});break;case"textLength":Object.assign(d,{textLength:d.textLength?`${d.textLength}px`:null});break;case"letterSpacing":var b;Object.assign(d,{"letter-spacing":null!==(b=d.letterSpacing)&&void 0!==b?b:null,letterSpacing:null});break;case"wordSpacing":var V;Object.assign(d,{"word-spacing":null!==(V=d.wordSpacing)&&void 0!==V?V:null,wordSpacing:null});break;case"alignmentBaseline":var nt;Object.assign(d,{"alignment-baseline":null!==(nt=d.alignmentBaseline)&&void 0!==nt?nt:null,alignmentBaseline:null});break;case"dominantBaseline":var vt;Object.assign(d,{"dominant-baseline":null!==(vt=d.dominantBaseline)&&void 0!==vt?vt:null,dominantBaseline:null});break;case"textAnchor":var wt;Object.assign(d,{"text-anchor":null!==(wt=d.textAnchor)&&void 0!==wt?wt:null,textAnchor:null});break;case"textDecoration":var Ct;Object.assign(d,{"text-decoration":null!==(Ct=d.textDecoration)&&void 0!==Ct?Ct:null,textDecoration:null});break;case"transformOrigin":var yt;Object.assign(d,{"transform-origin":null!==(yt=d.transformOrigin)&&void 0!==yt?yt:null,transformOrigin:null})}}),Object.assign({},null!=d?d:{},{fill:null!=d&&d.fill?I(d.fill,null!==(xt=null==d?void 0:d.fillOpacity)&&void 0!==xt?xt:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=d&&d.stroke?I(d.stroke,null!==(Tt=null==d?void 0:d.strokeOpacity)&&void 0!==Tt?Tt:1):"rgba(0,0,0,0)",strokeOpacity:null}))),E;var d,K,xt,Tt},Dt=(E,k)=>{return jQuery(E).css((d=Object.assign({},k||{}),null===(K=Object.keys(d))||void 0===K||K.forEach(xt=>{switch(xt){case"padding":Object.assign(d,{padding:d.padding?`${d.padding}px`:null});break;case"borderWidth":var Tt;Object.assign(d,d.borderWidth&&d.borderColor?{"border-width":`${d.borderWidth}px`,"border-style":d.borderStyle||"solid","border-color":I(d.borderColor,null!==(Tt=d.borderOpacity)&&void 0!==Tt?Tt:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(d,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(d,{"border-radius":d.borderRadius?`${d.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Mt;Object.assign(d,d.backgroundColor?{"background-color":I(d.backgroundColor,null!==(Mt=d.backgroundOpacity)&&void 0!==Mt?Mt:1)}:{"background-color":""}),Object.assign(d,{backgroundColor:null,backgroundOpacity:null})}}),d)),E;var d,K},It=(E,k,d)=>{switch(k){case S.h.TEXT:var K,xt;jQuery(E).text(null!==(K=null==d||null===(xt=d.text)||void 0===xt?void 0:xt.textContent)&&void 0!==K?K:"");break;case S.h.TSPAN:var Tt,Mt;jQuery(E).text(null!==(Tt=null==d||null===(Mt=d.text)||void 0===Mt?void 0:Mt.textContent)&&void 0!==Tt?Tt:"");break;case S.h.IMAGE:var Yt,Vt,Jt,jt,dt;jQuery(E).attr("href",(null==d||null===(Yt=d.image)||void 0===Yt?void 0:Yt.base64)||(null!=d&&null!==(Vt=d.image)&&void 0!==Vt&&Vt.path?(null===(Jt=Q.L.config)||void 0===Jt?void 0:Jt.readfileuploadurl)+(null==d||null===(jt=d.image)||void 0===jt?void 0:jt.path):null==d||null===(dt=d.image)||void 0===dt?void 0:dt.url)||"");break;case S.h.FOREIGNOBJECT:switch(null==d?void 0:d.type){case"text":var Zt,R;if(null!==(Zt=d.text)&&void 0!==Zt&&Zt.variableKeywords&&null!==(R=d.text)&&void 0!==R&&R.variableKeywords.length){var u;let c=Q.L.variable.getKeys(),A=(null===(u=d.text)||void 0===u?void 0:u.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";d.text.variableKeywords.forEach(p=>{var U=p.replace(/[^a-zA-Z0-9_]/gm,"");if(c.indexOf(U)>=0){var N=Q.L.variable.getValue(U);A=A.replace(p,N)}}),jQuery(E).text(A)}else{var B;jQuery(E).text((null===(B=d.text)||void 0===B?void 0:B.textContent)||"")}break;case"html":{var lt,ot,H;let c=(null==d||null===(lt=d.html)||void 0===lt?void 0:lt.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>';if(null!==(ot=d.html)&&void 0!==ot&&ot.variableKeywords&&null!==(H=d.html)&&void 0!==H&&H.variableKeywords.length){let A=Q.L.variable.getKeys();d.html.variableKeywords.forEach(p=>{var U=p.replace(/[^a-zA-Z0-9_]/gm,"");if(A.indexOf(U)>=0){var N=Q.L.variable.getValue(U);c=c.replace(p,N)}})}jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${c}</div>`).find("img[path],video[path],iframe[path]").each((A,p)=>{var U,N;p.setAttribute("src",(null!==(U=null===(N=Q.L.config)||void 0===N?void 0:N.readfileuploadurl)&&void 0!==U?U:"")+p.getAttribute("path")),p.removeAttribute("path")});break}case"input":var b,V,nt,vt;if(null!==(b=d.input)&&void 0!==b&&b.input)jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(nt=null===(vt=d.input)||void 0===vt?void 0:vt.placeholder)&&void 0!==nt?nt:""}" maxlength="100" /></div>`);else if(null!==(V=d.input)&&void 0!==V&&V.textarea){var wt,Ct;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(wt=null===(Ct=d.input)||void 0===Ct?void 0:Ct.placeholder)&&void 0!==wt?wt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var yt,ut,_t,mt,Ft;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(yt=d.image)||void 0===yt?void 0:yt.base64)||(null!==(ut=d.image)&&void 0!==ut&&ut.path?(null===(_t=Q.L.config)||void 0===_t?void 0:_t.readfileuploadurl)+(null===(mt=d.image)||void 0===mt?void 0:mt.path):null===(Ft=d.image)||void 0===Ft?void 0:Ft.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Gt,$t,oe,re;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Gt=d.iframe)&&void 0!==Gt&&Gt.path?(null===($t=Q.L.config)||void 0===$t?void 0:$t.readfileuploadurl)+(null===(oe=d.iframe)||void 0===oe?void 0:oe.path):null===(re=d.iframe)||void 0===re?void 0:re.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var ae,pe,_e,Se,be;let c=(0,G._)({readfileuploadurl:null===(ae=Q.L.config)||void 0===ae?void 0:ae.readfileuploadurl,type:null===(pe=d.embed)||void 0===pe?void 0:pe.type,oss:null===(_e=d.embed)||void 0===_e?void 0:_e.oss,path:null===(Se=d.embed)||void 0===Se?void 0:Se.path,url:null===(be=d.embed)||void 0===be?void 0:be.url});jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${c}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var Ee,ve;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(Ee=null===(ve=d.svg)||void 0===ve?void 0:ve.svgContent)&&void 0!==Ee?Ee:""}</div>`);break;case"test":{var Re,Me,Fe,Ve;let c=(null==d||null===(Re=d.html)||void 0===Re?void 0:Re.htmlContent)||"";if(null!==(Me=d.html)&&void 0!==Me&&Me.variableKeywords&&null!==(Fe=d.html)&&void 0!==Fe&&Fe.variableKeywords.length){let A=Q.L.variable.getKeys();d.html.variableKeywords.forEach(p=>{var U=p.replace(/[^a-zA-Z0-9_]/gm,"");if(A.indexOf(U)>=0){var N=Q.L.variable.getValue(U);c=c.replace(p,N)}})}switch(null==d||null===(Ve=d.test)||void 0===Ve?void 0:Ve.type){case"truefalse":var Ue;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(Ue=d.test.truefalse)&&void 0!==Ue&&Ue.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"singlechoice":var We;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(We=d.test.singlechoice)&&void 0!==We&&We.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"multichoice":var Ge;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(Ge=d.test.multichoice)&&void 0!==Ge&&Ge.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"matching-empty":var Ye;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==d||null===(Ye=d.test.matching)||void 0===Ye?void 0:Ye.key}"></div>`);break;case"matching-content":var Lt,W,i;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==d||null===(Lt=d.test.matching)||void 0===Lt?void 0:Lt.key}"><div class="ondrag-item" data-key="${null!==(W=null==d||null===(i=d.test)||void 0===i||null===(i=i.matching)||void 0===i?void 0:i.key)&&void 0!==W?W:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div></div>`);break;case"fill":var l;((null===(l=d.html)||void 0===l?void 0:l.fillKeywords)||[]).forEach(A=>{var p=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${A.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;c=c.replace(new RegExp(A.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),p)}),jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"speech":jQuery(E).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var o,n,r,m,w;jQuery(E).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(o=null!==(n=d.image)&&void 0!==n&&n.path?(null===(r=Q.L.config)||void 0===r?void 0:r.readfileuploadurl)+(null===(m=d.image)||void 0===m?void 0:m.path):null===(w=d.image)||void 0===w?void 0:w.url)&&void 0!==o?o:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(E).find("img[path],video[path],iframe[path]").each((A,p)=>{var U,N;p.setAttribute("src",(null!==(U=null===(N=Q.L.config)||void 0===N?void 0:N.readfileuploadurl)&&void 0!==U?U:"")+p.getAttribute("path")),p.removeAttribute("path")})}}}},Pt=(E,k,d,K)=>{let xt=jQuery(K||Q.L.target).find("#"+E).get(0);return xt||(xt=window.document.createElementNS("http://www.w3.org/2000/svg",k),xt.setAttribute("id",E),jQuery(xt).appendTo(K||Q.L.target)),jQuery(xt).attr((null==d?void 0:d.attribute)||{}),jQuery(xt).css((null==d?void 0:d.style)||{}),xt},st=(E,k)=>{let d=(0,x.$)(2),K={fill:O.pZ.fill,stroke:O.pZ.stroke,"stroke-width":(0,x.$)(O.pZ.strokeWidth)};return[{element:Pt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:k.x-d,y:k.y-d,width:k.width+2*d,height:k.height+2*d},K)},E),posType:"rect-center"}]},kt=(E,k)=>{let d=[],{size:K}=k,xt=(0,x.$)(1),Tt=(0,x.$)(2),Mt=(0,x.$)(3),Jt=((0,x.$)(5),(0,x.$)(7),(0,x.$)(10)),jt={stroke:O.u$.stroke,"stroke-width":(0,x.$)(O.u$.strokeWidth),"stroke-linecap":O.u$.strokeLinecap,"stroke-dasharray":O.u$.strokeDasharrays.map(mt=>(0,x.$)(mt)).join(" ")},dt={fill:O.bf.fill,stroke:O.bf.stroke,"stroke-width":(0,x.$)(O.bf.strokeWidth)},Zt={fill:O.eD.fill,stroke:O.eD.stroke,"stroke-width":(0,x.$)(O.eD.strokeWidth),width:(0,x.$)(O.eD.width),height:(0,x.$)(O.eD.height)},R={fill:O.eD.fill,stroke:O.eD.stroke,"stroke-width":(0,x.$)(O.eD.strokeWidth),width:(0,x.$)(O.eD.width),height:(0,x.$)(O.eD.height)},H=(Pt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:K.x-xt,y1:K.y-xt,x2:K.x-xt,y2:K.y+K.height+xt},jt)},E),Pt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:K.x-xt,y1:K.y-xt,x2:K.x+K.width+xt,y2:K.y-xt},jt)},E),Pt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:K.x+K.width+xt,y1:K.y-xt,x2:K.x+K.width+xt,y2:K.y+K.height+xt},jt)},E),Pt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:K.x-xt,y1:K.y+K.height+xt,x2:K.x+K.width+xt,y2:K.y+K.height+xt},jt)},E),Pt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:K.x,y:K.y,width:K.width,height:K.height},dt),style:{cursor:"move"}},E));if(k.type==S.h.POLYGON){var b;let{size:mt}=k,Ft=[];null===(b=mt.ratios)||void 0===b||b.forEach(function(Gt){Ft.push([mt.x+mt.width*Gt[0],mt.y+mt.height*Gt[1]])}),Ft.forEach((Gt,$t)=>{d.push({posType:`point-${$t}`,element:Pt(`icdt-temp-resize-point-${$t+1}`,"circle",{attribute:Object.assign((0,F.xW)(S.h.CIRCLE,{x:Gt[0]-Tt-xt,y:Gt[1]-Tt-xt,width:R.width,height:R.height},{}),R)},E)})})}let V=Pt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:K.x-Jt,y:K.y-Jt},Zt),style:{cursor:"nw-resize"}},E),nt=Pt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:K.x+K.width+Mt,y:K.y-Jt},Zt),style:{cursor:"ne-resize"}},E),vt=Pt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:K.x-Jt,y:K.y+K.height+Mt},Zt),style:{cursor:"sw-resize"}},E),wt=Pt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:K.x+K.width+Mt,y:K.y+K.height+Mt},Zt),style:{cursor:"se-resize"}},E),Ct=Pt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:K.x-Jt,y:K.y+K.height/2-Tt-xt},Zt),style:{cursor:"w-resize"}},E),yt=Pt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:K.x+K.width/2-Tt-xt,y:K.y-Jt},Zt),style:{cursor:"n-resize"}},E),ut=Pt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:K.x+K.width+Mt,y:K.y+K.height/2-Tt-xt},Zt),style:{cursor:"e-resize"}},E),_t=Pt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:K.x+K.width/2-Tt-xt,y:K.y+K.height+Mt},Zt),style:{cursor:"s-resize"}},E);return d.concat([{element:H,posType:"rect-center"},{element:V,posType:"rect-top-left"},{element:nt,posType:"rect-top-right"},{element:vt,posType:"rect-bottom-left"},{element:wt,posType:"rect-bottom-right"},{element:Ct,posType:"rect-left"},{element:yt,posType:"rect-top"},{element:ut,posType:"rect-right"},{element:_t,posType:"rect-bottom"}])},zt=(E,k,d)=>{let K=(0,x.$)(1),xt=(0,x.$)(2),Tt=(0,x.$)(5),Mt={stroke:O.u$.stroke,"stroke-width":(0,x.$)(O.u$.strokeWidth),"stroke-linecap":O.u$.strokeLinecap},Yt={fill:O.bf.fill,stroke:O.bf.stroke,"stroke-width":(0,x.$)(O.bf.strokeWidth)},Vt={fill:O.eD.fill,stroke:O.eD.stroke,"stroke-width":(0,x.$)(O.eD.strokeWidth),width:(0,x.$)(O.eD.width),height:(0,x.$)(O.eD.height)},Jt={fill:O.l6.fill,rx:(0,x.$)(O.l6.rx)},jt={fill:O.T2.fill,"alignment-baseline":O.T2.alignmentBaseline,"text-anchor":O.T2.textAnchor,"font-size":(0,x.$)(O.T2.fontSize)},dt={fill:O.IB.fill,stroke:O.IB.stroke,"stroke-width":(0,x.$)(O.IB.strokeWidth)},lt=(Pt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:d.x-K,y1:d.y-K,x2:d.x-K,y2:d.y+d.height+K},Mt)},E),Pt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:d.x-K,y1:d.y-K,x2:d.x+d.width+K,y2:d.y-K},Mt)},E),Pt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:d.x+d.width+K,y1:d.y-K,x2:d.x+d.width+K,y2:d.y+d.height+K},Mt)},E),Pt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:d.x-K,y1:d.y+d.height+K,x2:d.x+d.width+K,y2:d.y+d.height+K},Mt)},E),Pt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},Yt)},E)),ot=`${d.width} x ${d.height}`,H=8*ot.length;return Pt("icdt-temp-select-rect-text","rect",{attribute:Object.assign({x:d.x+d.width/2-(0,x.$)(H/2),y:d.y+d.height+(0,x.$)(10),width:(0,x.$)(H),height:(0,x.$)(20)},Jt)},E),Pt("icdt-temp-select-text","text",{attribute:Object.assign({x:d.x+d.width/2,y:d.y+d.height+(0,x.$)(20)},jt)},E).textContent=ot,k.length>1&&k.forEach(Ft=>{let{size:Gt}=Ft;Pt("icdt-temp-select-rect-node-"+Ft.id,"rect",{attribute:Object.assign({x:Gt.x,y:Gt.y,width:Gt.width,height:Gt.height},dt)},E)}),[{element:lt,posType:"rect-center"},{element:Pt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:d.x-Tt,y:d.y-Tt},Vt),style:{cursor:"nw-resize"}},E),posType:"rect-top-left"},{element:Pt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:d.x+d.width-xt,y:d.y-Tt},Vt),style:{cursor:"ne-resize"}},E),posType:"rect-top-right"},{element:Pt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:d.x-Tt,y:d.y+d.height-xt},Vt),style:{cursor:"sw-resize"}},E),posType:"rect-bottom-left"},{element:Pt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:d.x+d.width-xt,y:d.y+d.height-xt},Vt),style:{cursor:"se-resize"}},E),posType:"rect-bottom-right"},{element:Pt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:d.x-Tt,y:d.y+d.height/2-xt-K},Vt),style:{cursor:"w-resize"}},E),posType:"rect-left"},{element:Pt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:d.x+d.width/2-xt-K,y:d.y-Tt},Vt),style:{cursor:"n-resize"}},E),posType:"rect-top"},{element:Pt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:d.x+d.width-xt,y:d.y+d.height/2-xt-K},Vt),style:{cursor:"e-resize"}},E),posType:"rect-right"},{element:Pt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:d.x+d.width/2-xt-K,y:d.y+d.height-xt},Vt),style:{cursor:"s-resize"}},E),posType:"rect-bottom"}]},qt=(E,k)=>{let d=(0,x.$)(1),K={stroke:O.u$.stroke,"stroke-width":(0,x.$)(O.u$.strokeWidth),"stroke-linecap":O.u$.strokeLinecap},xt={fill:O.bf.fill,stroke:O.bf.stroke,"stroke-width":(0,x.$)(O.bf.strokeWidth)};return Pt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:k.x-d,y1:k.y,x2:k.x-d,y2:k.y+k.height},K)},E),Pt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:k.x,y1:k.y-d,x2:k.x+k.width,y2:k.y-d},K)},E),Pt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:k.x+k.width+d,y1:k.y,x2:k.x+k.width+d,y2:k.y+k.height},K)},E),Pt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:k.x,y1:k.y+k.height+d,x2:k.x+k.width,y2:k.y+k.height+d},K)},E),[{element:Pt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:k.x,y:k.y,width:k.width,height:k.height},xt)},E),posType:"rect-center"}]},Rt=(E,k)=>((0,x.$)(-1),(0,x.$)(O.WR.strokeWidth),(0,x.$)(O.WR.strokeDasharray),Pt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:k.x,y:k.y,width:k.width,height:k.height,class:"cursor-draw"},{fill:O.lq.fill})},E),[]),gt=(E,k)=>{let d={fill:O.$u.fill,stroke:O.$u.stroke,"stroke-width":(0,x.$)(O.$u.strokeWidth),"stroke-dasharray":(0,x.$)(O.$u.strokeDasharray)};jQuery(E).empty(),k.forEach(K=>{var xt,Tt;let{size:Mt}=K;if(!K.idx)return;Pt("icdt-temp-index-rect-node-"+K.id,"rect",{attribute:Object.assign({x:Mt.x-5,y:Mt.y-5,width:Mt.width+10,height:Mt.height+10},d)},E);let{element:Yt}=(0,tt.$)(Math.ceil(1e9*Math.random()),{size:{x:Mt.x-76,y:Mt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(xt=K.idx)&&void 0!==xt?xt:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(Tt=K.time)&&void 0!==Tt?Tt:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},E);Yt.classList.add("node-input"),jQuery(Yt).on("change",'input[name="idx"]',Vt=>{var Jt;K.idx=parseInt(null!==(Jt=Vt.target.value)&&void 0!==Jt?Jt:"0")}).on("change",'input[name="time"]',Vt=>{var Jt;K.time=parseFloat(null!==(Jt=Vt.target.value)&&void 0!==Jt?Jt:"0")}).on("click",'button[name="remove"]',Vt=>{K.idx=0,K.time=null,gt(E,k)})})},Y=(E,k)=>{var d,K,xt,Tt,Mt,Yt;let{color:Vt,opacity:Jt,path:jt,url:dt,base64:Zt}=null!==(d=null==k||null===(K=k.svg)||void 0===K?void 0:K.background)&&void 0!==d?d:{},{x:R,y:u,width:B,height:lt}=null!==(xt=null==k||null===(Tt=k.svg)||void 0===Tt?void 0:Tt.viewBox)&&void 0!==xt?xt:{x:0,y:0,width:0,height:0};(0,M.L)(void 0,{size:{x:0,y:(0,x.$)(-10),width:100,height:20},attribute:{fill:"#999",textAnchor:"start",alignmentBaseline:"central",fontSize:(0,x.$)(12),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(Mt=null!==(Yt=null==k?void 0:k.name)&&void 0!==Yt?Yt:null==k?void 0:k.code)&&void 0!==Mt?Mt:void 0}}},E),(0,it.a)(void 0,{size:{x:R,y:u,width:B,height:lt},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,x.$)(1),strokeDasharray:(0,x.$)(10),class:"hide-on-viewer"}},E),Vt&&(0,it.a)(void 0,{size:{x:R,y:u,width:B,height:lt},attribute:{fill:Vt,fillOpacity:Jt}},E),jt&&(0,y.B)(void 0,{size:{x:R,y:u,width:B,height:lt},source:{type:"image",image:{path:jt,url:dt,base64:Zt}}},E)},te=(E,k,d)=>{var K;switch(jQuery(E).empty(),null===(K=k.test)||void 0===K?void 0:K.type){case"truefalse":var xt;if(null!==(xt=k.test)&&void 0!==xt&&xt.showselection){var Tt,Mt,Yt;let yt=null==k||null===(Tt=k.test)||void 0===Tt||null===(Tt=Tt.answer)||void 0===Tt||null===(Tt=Tt.truefalse)||void 0===Tt?void 0:Tt.value;null===(Mt=k.svg)||void 0===Mt||Mt.nodes.filter(ut=>{var _t;return"truefalse"==(null===(_t=ut.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)&&ut.id!=yt}).forEach(ut=>{var _t;let{x:Ft,y:Gt,width:$t,height:oe}=null!==(_t=null==ut?void 0:ut.size)&&void 0!==_t?_t:{x:0,y:0,width:0,height:0};(0,at.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Gt-.5,width:$t+1,height:oe+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},E)}),null!=k&&null!==(Yt=k.test)&&void 0!==Yt&&null!==(Yt=Yt.answer)&&void 0!==Yt&&Yt.truefalse&&yt&&(ut=>{let _t=h.J.findNode(yt),{x:Ft,y:Gt,width:$t,height:oe}=null!==(ut=null==_t?void 0:_t.size)&&void 0!==ut?ut:{x:0,y:0,width:0,height:0};(0,at.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-2,y:Gt-2,width:$t+4,height:oe+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},E)})()}break;case"singlechoice":var Vt;if(null!==(Vt=k.test)&&void 0!==Vt&&Vt.showselection){var Jt,jt,dt;let yt=null==k||null===(Jt=k.test)||void 0===Jt||null===(Jt=Jt.answer)||void 0===Jt||null===(Jt=Jt.singlechoice)||void 0===Jt?void 0:Jt.value;null===(jt=k.svg)||void 0===jt||jt.nodes.filter(ut=>{var _t;return"singlechoice"==(null===(_t=ut.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)&&ut.id!=yt}).forEach(ut=>{var _t;let{x:Ft,y:Gt,width:$t,height:oe}=null!==(_t=null==ut?void 0:ut.size)&&void 0!==_t?_t:{x:0,y:0,width:0,height:0};(0,at.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Gt-.5,width:$t+1,height:oe+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},E)}),null!=k&&null!==(dt=k.test)&&void 0!==dt&&null!==(dt=dt.answer)&&void 0!==dt&&dt.singlechoice&&yt&&(ut=>{let _t=h.J.findNode(yt),{x:Ft,y:Gt,width:$t,height:oe}=null!==(ut=null==_t?void 0:_t.size)&&void 0!==ut?ut:{x:0,y:0,width:0,height:0};(0,at.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-2,y:Gt-2,width:$t+4,height:oe+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},E)})()}break;case"multichoice":var Zt;if(null!==(Zt=k.test)&&void 0!==Zt&&Zt.showselection){var R,u,B,lt;let yt=null!==(R=null==k||null===(u=k.test)||void 0===u||null===(u=u.answer)||void 0===u||null===(u=u.multichoice)||void 0===u?void 0:u.map(ut=>ut.value))&&void 0!==R?R:[];var ot;null===(B=k.svg)||void 0===B||B.nodes.filter(ut=>{var _t;return"multichoice"==(null===(_t=ut.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)&&!yt.includes(ut.id)}).forEach(ut=>{var _t;let{x:Ft,y:Gt,width:$t,height:oe}=null!==(_t=null==ut?void 0:ut.size)&&void 0!==_t?_t:{x:0,y:0,width:0,height:0};(0,it.a)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Gt-.5,width:$t+1,height:oe+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},E)}),null!=k&&null!==(lt=k.test)&&void 0!==lt&&null!==(lt=lt.answer)&&void 0!==lt&&lt.multichoice&&yt.length&&(null==k||null===(ot=k.test)||void 0===ot||null===(ot=ot.answer)||void 0===ot||ot.multichoice.forEach(ut=>{var _t;let mt=h.J.findNode(ut.value),{x:Gt,y:$t,width:oe,height:re}=null!==(_t=null==mt?void 0:mt.size)&&void 0!==_t?_t:{x:0,y:0,width:0,height:0};(0,it.a)(Math.ceil(1e9*Math.random()),{size:{x:Gt-2,y:$t-2,width:oe+4,height:re+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},E)}))}break;case"fill":var H,b;null!=k&&null!==(H=k.test)&&void 0!==H&&null!==(H=H.answer)&&void 0!==H&&H.fill&&(null==k||null===(b=k.test)||void 0===b||null===(b=b.answer)||void 0===b||b.fill.forEach(yt=>{jQuery("#"+d.id).find(`input[type="text"][data-key="${yt.key}"]`).val(yt.value)}));break;case"matching":var V,nt,vt,wt;if(null!=k&&null!==(V=k.test)&&void 0!==V&&null!==(V=V.answer)&&void 0!==V&&V.matching)if("matching-empty"==(null===(nt=d.source)||void 0===nt||null===(nt=nt.test)||void 0===nt?void 0:nt.type))null==k||null===(wt=k.test)||void 0===wt||null===(wt=wt.answer)||void 0===wt||wt.matching.filter(yt=>{var ut;return yt.key==(null===(ut=d.source)||void 0===ut||null===(ut=ut.test)||void 0===ut||null===(ut=ut.matching)||void 0===ut?void 0:ut.key)}).forEach(yt=>{});else if("matching-content"==(null===(vt=d.source)||void 0===vt||null===(vt=vt.test)||void 0===vt?void 0:vt.type)){var Ct;null==k||null===(Ct=k.test)||void 0===Ct||null===(Ct=Ct.answer)||void 0===Ct||Ct.matching.filter(yt=>{var ut;return yt.value==(null===(ut=d.source)||void 0===ut||null===(ut=ut.test)||void 0===ut||null===(ut=ut.matching)||void 0===ut?void 0:ut.key)}).forEach(yt=>{})}}}},2241:(ce,Kt,v)=>{v.d(Kt,{_:()=>rt});var S=v(8338);const rt=C=>{switch(null==C?void 0:C.type){case S.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+C.readfileuploadurl+C.path;case S.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+C.readfileuploadurl+C.path;case S.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+C.readfileuploadurl+C.path;case S.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+C.readfileuploadurl+C.path;case S.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+C.readfileuploadurl+C.path;case S.S.HTML:case S.S.IMAGE_ANIMATION:case S.S.PHET:return""+C.readfileuploadurl+C.path;case S.S.ZIP:case S.S.SCORM:var f;return"imsmanifest.xml"==(null===(f=C.path)||void 0===f||null===(f=f.split("/"))||void 0===f?void 0:f.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+C.readfileuploadurl+C.path:""+C.readfileuploadurl+C.path;case S.S.TRACK:case S.S.TEXT:return""+C.readfileuploadurl+C.path;case S.S.LINK:switch(C.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+C.url;case 1002:var I;return null!==(I=z(C.url))&&void 0!==I?I:"";case 1005:var G;return null!==(G=C.url)&&void 0!==G?G:"";default:var O;return null!==(O=C.url)&&void 0!==O?O:""}default:return""+C.readfileuploadurl+C.path}},z=C=>{let f=ft(C);return f?"https://www.youtube.com/embed/"+f+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},ft=C=>{let f=null==C?void 0:C.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return f&&f.length>=2?f[1]:null}},1131:(ce,Kt,v)=>{function S(){}function _(t){return null==t?S:function(){return this.querySelector(t)}}function ft(){return[]}function C(t){return null==t?ft:function(){return this.querySelectorAll(t)}}function G(t){return function(){return this.matches(t)}}function O(t){return function(e){return e.matches(t)}}v.d(Kt,{qrM:()=>aa,n8j:()=>ra});var Q=Array.prototype.find;function it(){return this.firstElementChild}var at=Array.prototype.filter;function h(){return Array.from(this.children)}function J(t){return new Array(t.length)}function j(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function q(t,e,a,s,g,T){for(var Z,P=0,X=e.length,ct=T.length;P<ct;++P)(Z=e[P])?(Z.__data__=T[P],s[P]=Z):a[P]=new j(t,T[P]);for(;P<X;++P)(Z=e[P])&&(g[P]=Z)}function D(t,e,a,s,g,T,P){var Z,X,ne,ct=new Map,pt=e.length,Qt=T.length,Ht=new Array(pt);for(Z=0;Z<pt;++Z)(X=e[Z])&&(Ht[Z]=ne=P.call(X,X.__data__,Z,e)+"",ct.has(ne)?g[Z]=X:ct.set(ne,X));for(Z=0;Z<Qt;++Z)ne=P.call(t,T[Z],Z,T)+"",(X=ct.get(ne))?(s[Z]=X,X.__data__=T[Z],ct.delete(ne)):a[Z]=new j(t,T[Z]);for(Z=0;Z<pt;++Z)(X=e[Z])&&ct.get(Ht[Z])===X&&(g[Z]=X)}function Dt(t){return t.__data__}function St(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function qt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}j.prototype={constructor:j,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var d="http://www.w3.org/1999/xhtml";const K={svg:"http://www.w3.org/2000/svg",xhtml:d,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xt(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),K.hasOwnProperty(e)?{space:K[e],local:t}:t}function Tt(t){return function(){this.removeAttribute(t)}}function Mt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yt(t,e){return function(){this.setAttribute(t,e)}}function Vt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Jt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function jt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function Zt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function R(t){return function(){this.style.removeProperty(t)}}function u(t,e,a){return function(){this.style.setProperty(t,e,a)}}function B(t,e,a){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,a)}}function ot(t,e){return t.style.getPropertyValue(e)||Zt(t).getComputedStyle(t,null).getPropertyValue(e)}function H(t){return function(){delete this[t]}}function b(t,e){return function(){this[t]=e}}function V(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function vt(t){return t.trim().split(/^|\s+/)}function wt(t){return t.classList||new Ct(t)}function Ct(t){this._node=t,this._names=vt(t.getAttribute("class")||"")}function yt(t,e){for(var a=wt(t),s=-1,g=e.length;++s<g;)a.add(e[s])}function ut(t,e){for(var a=wt(t),s=-1,g=e.length;++s<g;)a.remove(e[s])}function _t(t){return function(){yt(this,t)}}function mt(t){return function(){ut(this,t)}}function Ft(t,e){return function(){(e.apply(this,arguments)?yt:ut)(this,t)}}function $t(){this.textContent=""}function oe(t){return function(){this.textContent=t}}function re(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function pe(){this.innerHTML=""}function _e(t){return function(){this.innerHTML=t}}function Se(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ee(){this.nextSibling&&this.parentNode.appendChild(this)}function Re(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fe(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===d&&e.documentElement.namespaceURI===d?e.createElement(t):e.createElementNS(a,t)}}function Ve(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ue(t){var e=xt(t);return(e.local?Ve:Fe)(e)}function Ge(){return null}function Lt(){var t=this.parentNode;t&&t.removeChild(this)}function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function l(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function w(t){return function(){var e=this.__on;if(e){for(var T,a=0,s=-1,g=e.length;a<g;++a)T=e[a],t.type&&T.type!==t.type||T.name!==t.name?e[++s]=T:this.removeEventListener(T.type,T.listener,T.options);++s?e.length=s:delete this.__on}}}function c(t,e,a){return function(){var g,s=this.__on,T=function r(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var P=0,Z=s.length;P<Z;++P)if((g=s[P]).type===t.type&&g.name===t.name)return this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=T,g.options=a),void(g.value=e);this.addEventListener(t.type,T,a),g={type:t.type,name:t.name,value:e,listener:T,options:a},s?s.push(g):this.__on=[g]}}function p(t,e,a){var s=Zt(t),g=s.CustomEvent;"function"==typeof g?g=new g(e,a):(g=s.document.createEvent("Event"),a?(g.initEvent(e,a.bubbles,a.cancelable),g.detail=a.detail):g.initEvent(e,!1,!1)),t.dispatchEvent(g)}function U(t,e){return function(){return p(this,t,e)}}function N(t,e){return function(){return p(this,t,e.apply(this,arguments))}}Ct.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var At=[null];function Bt(t,e){this._groups=t,this._parents=e}function ie(){return new Bt([[document.documentElement]],At)}Bt.prototype=ie.prototype={constructor:Bt,select:function rt(t){"function"!=typeof t&&(t=_(t));for(var e=this._groups,a=e.length,s=new Array(a),g=0;g<a;++g)for(var X,ct,T=e[g],P=T.length,Z=s[g]=new Array(P),pt=0;pt<P;++pt)(X=T[pt])&&(ct=t.call(X,X.__data__,pt,T))&&("__data__"in X&&(ct.__data__=X.__data__),Z[pt]=ct);return new Bt(s,this._parents)},selectAll:function I(t){t="function"==typeof t?function f(t){return function(){return function z(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):C(t);for(var e=this._groups,a=e.length,s=[],g=[],T=0;T<a;++T)for(var X,P=e[T],Z=P.length,ct=0;ct<Z;++ct)(X=P[ct])&&(s.push(t.call(X,X.__data__,ct,P)),g.push(X));return new Bt(s,g)},selectChild:function y(t){return this.select(null==t?it:function x(t){return function(){return Q.call(this.children,t)}}("function"==typeof t?t:O(t)))},selectChildren:function M(t){return this.selectAll(null==t?h:function tt(t){return function(){return at.call(this.children,t)}}("function"==typeof t?t:O(t)))},filter:function F(t){"function"!=typeof t&&(t=G(t));for(var e=this._groups,a=e.length,s=new Array(a),g=0;g<a;++g)for(var X,T=e[g],P=T.length,Z=s[g]=[],ct=0;ct<P;++ct)(X=T[ct])&&t.call(X,X.__data__,ct,T)&&Z.push(X);return new Bt(s,this._parents)},data:function It(t,e){if(!arguments.length)return Array.from(this,Dt);var a=e?D:q,s=this._parents,g=this._groups;"function"!=typeof t&&(t=function Ot(t){return function(){return t}}(t));for(var T=g.length,P=new Array(T),Z=new Array(T),X=new Array(T),ct=0;ct<T;++ct){var pt=s[ct],Qt=g[ct],Ht=Qt.length,ne=St(t.call(pt,pt&&pt.__data__,ct,s)),Ce=ne.length,Ie=Z[ct]=new Array(Ce),Wt=P[ct]=new Array(Ce);a(pt,Qt,Ie,Wt,X[ct]=new Array(Ht),ne,e);for(var ge,xe,ue=0,le=0;ue<Ce;++ue)if(ge=Ie[ue]){for(ue>=le&&(le=ue+1);!(xe=Wt[le])&&++le<Ce;);ge._next=xe||null}}return(P=new Bt(P,s))._enter=Z,P._exit=X,P},enter:function L(){return new Bt(this._enter||this._groups.map(J),this._parents)},exit:function Pt(){return new Bt(this._exit||this._groups.map(J),this._parents)},join:function st(t,e,a){var s=this.enter(),g=this,T=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(g=e(g))&&(g=g.selection()),null==a?T.remove():a(T),s&&g?s.merge(g).order():g},merge:function kt(t){for(var e=t.selection?t.selection():t,a=this._groups,s=e._groups,g=a.length,P=Math.min(g,s.length),Z=new Array(g),X=0;X<P;++X)for(var ne,ct=a[X],pt=s[X],Qt=ct.length,Ht=Z[X]=new Array(Qt),Ce=0;Ce<Qt;++Ce)(ne=ct[Ce]||pt[Ce])&&(Ht[Ce]=ne);for(;X<g;++X)Z[X]=a[X];return new Bt(Z,this._parents)},selection:function ke(){return this},order:function zt(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var P,s=t[e],g=s.length-1,T=s[g];--g>=0;)(P=s[g])&&(T&&4^P.compareDocumentPosition(T)&&T.parentNode.insertBefore(P,T),T=P);return this},sort:function et(t){function e(Qt,Ht){return Qt&&Ht?t(Qt.__data__,Ht.__data__):!Qt-!Ht}t||(t=qt);for(var a=this._groups,s=a.length,g=new Array(s),T=0;T<s;++T){for(var ct,P=a[T],Z=P.length,X=g[T]=new Array(Z),pt=0;pt<Z;++pt)(ct=P[pt])&&(X[pt]=ct);X.sort(e)}return new Bt(g,this._parents).order()},call:function Rt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function gt(){return Array.from(this)},node:function Y(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var s=t[e],g=0,T=s.length;g<T;++g){var P=s[g];if(P)return P}return null},size:function te(){let t=0;for(const e of this)++t;return t},empty:function E(){return!this.node()},each:function k(t){for(var e=this._groups,a=0,s=e.length;a<s;++a)for(var Z,g=e[a],T=0,P=g.length;T<P;++T)(Z=g[T])&&t.call(Z,Z.__data__,T,g);return this},attr:function dt(t,e){var a=xt(t);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((null==e?a.local?Mt:Tt:"function"==typeof e?a.local?jt:Jt:a.local?Vt:Yt)(a,e))},style:function lt(t,e,a){return arguments.length>1?this.each((null==e?R:"function"==typeof e?B:u)(t,e,null==a?"":a)):ot(this.node(),t)},property:function nt(t,e){return arguments.length>1?this.each((null==e?H:"function"==typeof e?V:b)(t,e)):this.node()[t]},classed:function Gt(t,e){var a=vt(t+"");if(arguments.length<2){for(var s=wt(this.node()),g=-1,T=a.length;++g<T;)if(!s.contains(a[g]))return!1;return!0}return this.each(("function"==typeof e?Ft:e?_t:mt)(a,e))},text:function ae(t){return arguments.length?this.each(null==t?$t:("function"==typeof t?re:oe)(t)):this.node().textContent},html:function be(t){return arguments.length?this.each(null==t?pe:("function"==typeof t?Se:_e)(t)):this.node().innerHTML},raise:function ve(){return this.each(Ee)},lower:function Me(){return this.each(Re)},append:function We(t){var e="function"==typeof t?t:Ue(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function Ye(t,e){var a="function"==typeof t?t:Ue(t),s=null==e?Ge:"function"==typeof e?e:_(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})},remove:function W(){return this.each(Lt)},clone:function o(t){return this.select(t?l:i)},datum:function n(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function A(t,e,a){var g,P,s=function m(t){return t.trim().split(/^|\s+/).map(function(e){var a="",s=e.indexOf(".");return s>=0&&(a=e.slice(s+1),e=e.slice(0,s)),{type:e,name:a}})}(t+""),T=s.length;if(!(arguments.length<2)){for(Z=e?c:w,g=0;g<T;++g)this.each(Z(s[g],e,a));return this}var Z=this.node().__on;if(Z)for(var pt,X=0,ct=Z.length;X<ct;++X)for(g=0,pt=Z[X];g<T;++g)if((P=s[g]).type===pt.type&&P.name===pt.name)return pt.value},dispatch:function Et(t,e){return this.each(("function"==typeof e?N:U)(t,e))},[Symbol.iterator]:function*bt(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var P,s=t[e],g=0,T=s.length;g<T;++g)(P=s[g])&&(yield P)}};const we=ie;var Te={value:()=>{}};function Oe(){for(var s,t=0,e=arguments.length,a={};t<e;++t){if(!(s=arguments[t]+"")||s in a||/[\s.]/.test(s))throw new Error("illegal type: "+s);a[s]=[]}return new Ae(a)}function Ae(t){this._=t}function al(t,e){for(var g,a=0,s=t.length;a<s;++a)if((g=t[a]).name===e)return g.value}function gn(t,e,a){for(var s=0,g=t.length;s<g;++s)if(t[s].name===e){t[s]=Te,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=a&&t.push({name:e,value:a}),t}Ae.prototype=Oe.prototype={constructor:Ae,on:function(t,e){var g,a=this._,s=function rl(t,e){return t.trim().split(/^|\s+/).map(function(a){var s="",g=a.indexOf(".");if(g>=0&&(s=a.slice(g+1),a=a.slice(0,g)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}(t+"",a),T=-1,P=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++T<P;)if(g=(t=s[T]).type)a[g]=gn(a[g],t.name,e);else if(null==e)for(g in a)a[g]=gn(a[g],t.name,null);return this}for(;++T<P;)if((g=(t=s[T]).type)&&(g=al(a[g],t.name)))return g},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new Ae(t)},call:function(t,e){if((g=arguments.length-2)>0)for(var g,T,a=new Array(g),s=0;s<g;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,g=(T=this._[t]).length;s<g;++s)T[s].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],g=0,T=s.length;g<T;++g)s[g].value.apply(e,a)}};const ol=Oe;var Ni,ki,mi=0,Oi=0,Si=0,yn=1e3,Di=0,ci=0,ji=0,Ti="object"==typeof performance&&performance.now?performance:Date,mn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return ci||(mn(sl),ci=Ti.now()+ji)}function sl(){ci=0}function zi(){this._call=this._time=this._next=null}function pn(t,e,a){var s=new zi;return s.restart(t,e,a),s}function wn(){ci=(Di=Ti.now())+ji,mi=Oi=0;try{!function dl(){Xi(),++mi;for(var e,t=Ni;t;)(e=ci-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mi}()}finally{mi=0,function hl(){for(var t,a,e=Ni,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);ki=t,qi(s)}(),ci=0}}function ul(){var t=Ti.now(),e=t-Di;e>yn&&(ji-=e,Di=t)}function qi(t){mi||(Oi&&(Oi=clearTimeout(Oi)),t-ci>24?(t<1/0&&(Oi=setTimeout(wn,t-Ti.now()-ji)),Si&&(Si=clearInterval(Si))):(Si||(Di=Ti.now(),Si=setInterval(ul,yn)),mi=1,mn(wn)))}function xn(t,e,a){var s=new zi;return s.restart(g=>{s.stop(),t(g+e)},e=null==e?0:+e,a),s}zi.prototype=pn.prototype={constructor:zi,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Xi():+a)+(null==e?0:+e),!this._next&&ki!==this&&(ki?ki._next=this:Ni=this,ki=this),this._call=t,this._time=a,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cl=ol("start","end","cancel","interrupt"),fl=[],bn=0,Ki=3;function Fi(t,e,a,s,g,T){var P=t.__transition;if(P){if(a in P)return}else t.__transition={};!function vl(t,e,a){var g,s=t.__transition;function P(ct){var pt,Qt,Ht,ne;if(1!==a.state)return X();for(pt in s)if((ne=s[pt]).name===a.name){if(ne.state===Ki)return xn(P);4===ne.state?(ne.state=6,ne.timer.stop(),ne.on.call("interrupt",t,t.__data__,ne.index,ne.group),delete s[pt]):+pt<e&&(ne.state=6,ne.timer.stop(),ne.on.call("cancel",t,t.__data__,ne.index,ne.group),delete s[pt])}if(xn(function(){a.state===Ki&&(a.state=4,a.timer.restart(Z,a.delay,a.time),Z(ct))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=Ki,g=new Array(Ht=a.tween.length),pt=0,Qt=-1;pt<Ht;++pt)(ne=a.tween[pt].value.call(t,t.__data__,a.index,a.group))&&(g[++Qt]=ne);g.length=Qt+1}}function Z(ct){for(var pt=ct<a.duration?a.ease.call(null,ct/a.duration):(a.timer.restart(X),a.state=5,1),Qt=-1,Ht=g.length;++Qt<Ht;)g[Qt].call(t,pt);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),X())}function X(){for(var ct in a.state=6,a.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=a,a.timer=pn(function T(ct){a.state=1,a.timer.restart(P,a.delay,a.time),a.delay<=ct&&P(ct-a.delay)},0,a.time)}(t,a,{name:e,index:s,group:g,on:cl,tween:fl,time:T.time,delay:T.delay,duration:T.duration,ease:T.ease,timer:null,state:bn})}function en(t,e){var a=ii(t,e);if(a.state>bn)throw new Error("too late; already scheduled");return a}function li(t,e){var a=ii(t,e);if(a.state>Ki)throw new Error("too late; already running");return a}function ii(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function ui(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,s,g,T){var P,Z,X;return(P=Math.sqrt(t*t+e*e))&&(t/=P,e/=P),(X=t*a+e*s)&&(a-=t*X,s-=e*X),(Z=Math.sqrt(a*a+s*s))&&(a/=Z,s/=Z,X/=Z),t*s<e*a&&(t=-t,e=-e,X=-X,P=-P),{translateX:g,translateY:T,rotate:Math.atan2(e,t)*On,skewX:Math.atan(X)*On,scaleX:P,scaleY:Z}}function kn(t,e,a,s){function g(ct){return ct.length?ct.pop()+" ":""}return function(ct,pt){var Qt=[],Ht=[];return ct=t(ct),pt=t(pt),function T(ct,pt,Qt,Ht,ne,Ce){if(ct!==Qt||pt!==Ht){var Ie=ne.push("translate(",null,e,null,a);Ce.push({i:Ie-4,x:ui(ct,Qt)},{i:Ie-2,x:ui(pt,Ht)})}else(Qt||Ht)&&ne.push("translate("+Qt+e+Ht+a)}(ct.translateX,ct.translateY,pt.translateX,pt.translateY,Qt,Ht),function P(ct,pt,Qt,Ht){ct!==pt?(ct-pt>180?pt+=360:pt-ct>180&&(ct+=360),Ht.push({i:Qt.push(g(Qt)+"rotate(",null,s)-2,x:ui(ct,pt)})):pt&&Qt.push(g(Qt)+"rotate("+pt+s)}(ct.rotate,pt.rotate,Qt,Ht),function Z(ct,pt,Qt,Ht){ct!==pt?Ht.push({i:Qt.push(g(Qt)+"skewX(",null,s)-2,x:ui(ct,pt)}):pt&&Qt.push(g(Qt)+"skewX("+pt+s)}(ct.skewX,pt.skewX,Qt,Ht),function X(ct,pt,Qt,Ht,ne,Ce){if(ct!==Qt||pt!==Ht){var Ie=ne.push(g(ne)+"scale(",null,",",null,")");Ce.push({i:Ie-4,x:ui(ct,Qt)},{i:Ie-2,x:ui(pt,Ht)})}else(1!==Qt||1!==Ht)&&ne.push(g(ne)+"scale("+Qt+","+Ht+")")}(ct.scaleX,ct.scaleY,pt.scaleX,pt.scaleY,Qt,Ht),ct=pt=null,function(ne){for(var Wt,Ce=-1,Ie=Ht.length;++Ce<Ie;)Qt[(Wt=Ht[Ce]).i]=Wt.x(ne);return Qt.join("")}}}var wl=kn(function ml(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xl=kn(function pl(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function bl(t,e){var a,s;return function(){var g=li(this,t),T=g.tween;if(T!==a)for(var P=0,Z=(s=a=T).length;P<Z;++P)if(s[P].name===e){(s=s.slice()).splice(P,1);break}g.tween=s}}function _l(t,e,a){var s,g;if("function"!=typeof a)throw new Error;return function(){var T=li(this,t),P=T.tween;if(P!==s){g=(s=P).slice();for(var Z={name:e,value:a},X=0,ct=g.length;X<ct;++X)if(g[X].name===e){g[X]=Z;break}X===ct&&g.push(Z)}T.tween=g}}function ln(t,e,a){var s=t._id;return t.each(function(){var g=li(this,s);(g.value||(g.value={}))[e]=a.apply(this,arguments)}),function(g){return ii(g,s).value[e]}}function rn(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function Tn(t,e){var a=Object.create(t.prototype);for(var s in e)a[s]=e[s];return a}function Ci(){}var Wi=1/.7,pi="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ol=/^#([0-9a-f]{3,8})$/,Sl=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),kl=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),Tl=new RegExp(`^rgba\\(${pi},${pi},${pi},${Ai}\\)$`),Cl=new RegExp(`^rgba\\(${ri},${ri},${ri},${Ai}\\)$`),Ll=new RegExp(`^hsl\\(${Ai},${ri},${ri}\\)$`),Al=new RegExp(`^hsla\\(${Ai},${ri},${ri},${Ai}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Pi(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Ol.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?Pn(e):3===a?new Xe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sl.exec(t))?new Xe(e[1],e[2],e[3],1):(e=kl.exec(t))?new Xe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tl.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cl.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ll.exec(t))?Mn(e[1],e[2]/100,e[3]/100,1):(e=Al.exec(t))?Mn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?Pn(Cn[t]):"transparent"===t?new Xe(NaN,NaN,NaN,0):null}function Pn(t){return new Xe(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,a,s){return s<=0&&(t=e=a=NaN),new Xe(t,e,a,s)}function Qi(t,e,a,s){return 1===arguments.length?function Rl(t){return t instanceof Ci||(t=Pi(t)),t?new Xe((t=t.rgb()).r,t.g,t.b,t.opacity):new Xe}(t):new Xe(t,e,a,null==s?1:s)}function Xe(t,e,a,s){this.r=+t,this.g=+e,this.b=+a,this.opacity=+s}function In(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}`}function Rn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${fi(this.r)}, ${fi(this.g)}, ${fi(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vi(t){return((t=fi(t))<16?"0":"")+t.toString(16)}function Mn(t,e,a,s){return s<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new ni(t,e,a,s)}function Nn(t){if(t instanceof ni)return new ni(t.h,t.s,t.l,t.opacity);if(t instanceof Ci||(t=Pi(t)),!t)return new ni;if(t instanceof ni)return t;var e=(t=t.rgb()).r/255,a=t.g/255,s=t.b/255,g=Math.min(e,a,s),T=Math.max(e,a,s),P=NaN,Z=T-g,X=(T+g)/2;return Z?(P=e===T?(a-s)/Z+6*(a<s):a===T?(s-e)/Z+2:(e-a)/Z+4,Z/=X<.5?T+g:2-T-g,P*=60):Z=X>0&&X<1?0:P,new ni(P,Z,X,t.opacity)}function ni(t,e,a,s){this.h=+t,this.s=+e,this.l=+a,this.opacity=+s}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function jn(t,e,a,s,g){var T=t*t,P=T*t;return((1-3*t+3*T-P)*e+(4-6*T+3*P)*a+(1+3*t+3*T-3*P)*s+P*g)/6}rn(Ci,Pi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Pl(){return this.rgb().formatHex8()},formatHsl:function Il(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),rn(Xe,Qi,Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xe(fi(this.r),fi(this.g),fi(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:In,formatHex:In,formatHex8:function Ml(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}${vi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Rn,toString:Rn})),rn(ni,function Nl(t,e,a,s){return 1===arguments.length?Nn(t):new ni(t,e,a,null==s?1:s)},Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new ni(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ni(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*e,g=2*a-s;return new Xe(an(t>=240?t-240:t+120,g,s),an(t,g,s),an(t<120?t+240:t-120,g,s),this.opacity)},clamp(){return new ni(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const zn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):zn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kl(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function zl(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(s){return Math.pow(t+s*e,a)}}(e,a,t):zn(isNaN(e)?a:e)}}(e);function s(g,T){var P=a((g=Qi(g)).r,(T=Qi(T)).r),Z=a(g.g,T.g),X=a(g.b,T.b),ct=Bn(g.opacity,T.opacity);return function(pt){return g.r=P(pt),g.g=Z(pt),g.b=X(pt),g.opacity=ct(pt),g+""}}return s.gamma=t,s}(1);function Un(t){return function(e){var P,Z,a=e.length,s=new Array(a),g=new Array(a),T=new Array(a);for(P=0;P<a;++P)Z=Qi(e[P]),s[P]=Z.r||0,g[P]=Z.g||0,T[P]=Z.b||0;return s=t(s),g=t(g),T=t(T),Z.opacity=1,function(X){return Z.r=s(X),Z.g=g(X),Z.b=T(X),Z+""}}}Un(function Dl(t){var e=t.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),g=t[s],T=t[s+1];return jn((a-s/e)*e,s>0?t[s-1]:2*g-T,g,T,s<e-1?t[s+2]:2*T-g)}}),Un(function jl(t){var e=t.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*e);return jn((a-s/e)*e,t[(s+e-1)%e],t[s%e],t[(s+1)%e],t[(s+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ul(t,e){var s,g,T,a=on.lastIndex=sn.lastIndex=0,P=-1,Z=[],X=[];for(t+="",e+="";(s=on.exec(t))&&(g=sn.exec(e));)(T=g.index)>a&&(T=e.slice(a,T),Z[P]?Z[P]+=T:Z[++P]=T),(s=s[0])===(g=g[0])?Z[P]?Z[P]+=g:Z[++P]=g:(Z[++P]=null,X.push({i:P,x:ui(s,g)})),a=sn.lastIndex;return a<e.length&&(T=e.slice(a),Z[P]?Z[P]+=T:Z[++P]=T),Z.length<2?X[0]?function Fl(t){return function(e){return t(e)+""}}(X[0].x):function Bl(t){return function(){return t}}(e):(e=X.length,function(ct){for(var Qt,pt=0;pt<e;++pt)Z[(Qt=X[pt]).i]=Qt.x(ct);return Z.join("")})}function Wn(t,e){var a;return("number"==typeof e?ui:e instanceof Pi?Fn:(a=Pi(e))?(e=a,Fn):Ul)(t,e)}function Wl(t){return function(){this.removeAttribute(t)}}function Gl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ql(t,e,a){var s,T,g=a+"";return function(){var P=this.getAttribute(t);return P===g?null:P===s?T:T=e(s=P,a)}}function Jl(t,e,a){var s,T,g=a+"";return function(){var P=this.getAttributeNS(t.space,t.local);return P===g?null:P===s?T:T=e(s=P,a)}}function Hl(t,e,a){var s,g,T;return function(){var P,X,Z=a(this);return null==Z?void this.removeAttribute(t):(P=this.getAttribute(t))===(X=Z+"")?null:P===s&&X===g?T:(g=X,T=e(s=P,Z))}}function Vl(t,e,a){var s,g,T;return function(){var P,X,Z=a(this);return null==Z?void this.removeAttributeNS(t.space,t.local):(P=this.getAttributeNS(t.space,t.local))===(X=Z+"")?null:P===s&&X===g?T:(g=X,T=e(s=P,Z))}}function ql(t,e){var a,s;function g(){var T=e.apply(this,arguments);return T!==s&&(a=(s=T)&&function Xl(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,T)),a}return g._value=e,g}function $l(t,e){var a,s;function g(){var T=e.apply(this,arguments);return T!==s&&(a=(s=T)&&function Zl(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,T)),a}return g._value=e,g}function er(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function ir(t,e){return e=+e,function(){en(this,t).delay=e}}function lr(t,e){return function(){li(this,t).duration=+e.apply(this,arguments)}}function rr(t,e){return e=+e,function(){li(this,t).duration=e}}var xr=we.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var zr=0;function oi(t,e,a,s){this._groups=t,this._parents=e,this._name=a,this._id=s}function Qn(){return++zr}var si=we.prototype;oi.prototype=function Kr(t){return we().transition(t)}.prototype={constructor:oi,select:function pr(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=_(t));for(var s=this._groups,g=s.length,T=new Array(g),P=0;P<g;++P)for(var pt,Qt,Z=s[P],X=Z.length,ct=T[P]=new Array(X),Ht=0;Ht<X;++Ht)(pt=Z[Ht])&&(Qt=t.call(pt,pt.__data__,Ht,Z))&&("__data__"in pt&&(Qt.__data__=pt.__data__),ct[Ht]=Qt,Fi(ct[Ht],e,a,Ht,ct,ii(pt,a)));return new oi(T,this._parents,e,a)},selectAll:function wr(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=C(t));for(var s=this._groups,g=s.length,T=[],P=[],Z=0;Z<g;++Z)for(var pt,X=s[Z],ct=X.length,Qt=0;Qt<ct;++Qt)if(pt=X[Qt]){for(var ne,Ht=t.call(pt,pt.__data__,Qt,X),Ce=ii(pt,a),Ie=0,Wt=Ht.length;Ie<Wt;++Ie)(ne=Ht[Ie])&&Fi(ne,e,a,Ie,Ht,Ce);T.push(Ht),P.push(pt)}return new oi(T,P,e,a)},selectChild:si.selectChild,selectChildren:si.selectChildren,filter:function hr(t){"function"!=typeof t&&(t=G(t));for(var e=this._groups,a=e.length,s=new Array(a),g=0;g<a;++g)for(var X,T=e[g],P=T.length,Z=s[g]=[],ct=0;ct<P;++ct)(X=T[ct])&&t.call(X,X.__data__,ct,T)&&Z.push(X);return new oi(s,this._parents,this._name,this._id)},merge:function cr(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,s=e.length,T=Math.min(s,a.length),P=new Array(s),Z=0;Z<T;++Z)for(var Ht,X=e[Z],ct=a[Z],pt=X.length,Qt=P[Z]=new Array(pt),ne=0;ne<pt;++ne)(Ht=X[ne]||ct[ne])&&(Qt[ne]=Ht);for(;Z<s;++Z)P[Z]=e[Z];return new oi(P,this._parents,this._name,this._id)},selection:function br(){return new xr(this._groups,this._parents)},transition:function Dr(){for(var t=this._name,e=this._id,a=Qn(),s=this._groups,g=s.length,T=0;T<g;++T)for(var X,P=s[T],Z=P.length,ct=0;ct<Z;++ct)if(X=P[ct]){var pt=ii(X,e);Fi(X,t,a,ct,P,{time:pt.time+pt.delay+pt.duration,delay:0,duration:pt.duration,ease:pt.ease})}return new oi(s,this._parents,t,a)},call:si.call,nodes:si.nodes,node:si.node,size:si.size,empty:si.empty,each:si.each,on:function gr(t,e){var a=this._id;return arguments.length<2?ii(this.node(),a).on.on(t):this.each(function vr(t,e,a){var s,g,T=function fr(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?en:li;return function(){var P=T(this,t),Z=P.on;Z!==s&&(g=(s=Z).copy()).on(e,a),P.on=g}}(a,t,e))},attr:function Yl(t,e){var a=xt(t),s="transform"===a?xl:Wn;return this.attrTween(t,"function"==typeof e?(a.local?Vl:Hl)(a,s,ln(this,"attr."+t,e)):null==e?(a.local?Gl:Wl)(a):(a.local?Jl:Ql)(a,s,e))},attrTween:function tr(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var s=xt(t);return this.tween(a,(s.local?ql:$l)(s,e))},style:function kr(t,e,a){var s="transform"==(t+="")?wl:Wn;return null==e?this.styleTween(t,function _r(t,e){var a,s,g;return function(){var T=ot(this,t),P=(this.style.removeProperty(t),ot(this,t));return T===P?null:T===a&&P===s?g:g=e(a=T,s=P)}}(t,s)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Or(t,e,a){var s,g,T;return function(){var P=ot(this,t),Z=a(this),X=Z+"";return null==Z&&(this.style.removeProperty(t),X=Z=ot(this,t)),P===X?null:P===s&&X===g?T:(g=X,T=e(s=P,Z))}}(t,s,ln(this,"style."+t,e))).each(function Sr(t,e){var a,s,g,Z,T="style."+e,P="end."+T;return function(){var X=li(this,t),ct=X.on,pt=null==X.value[T]?Z||(Z=Gn(e)):void 0;(ct!==a||g!==pt)&&(s=(a=ct).copy()).on(P,g=pt),X.on=s}}(this._id,t)):this.styleTween(t,function Er(t,e,a){var s,T,g=a+"";return function(){var P=ot(this,t);return P===g?null:P===s?T:T=e(s=P,a)}}(t,s,e),a).on("end.style."+t,null)},styleTween:function Lr(t,e,a){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,function Cr(t,e,a){var s,g;function T(){var P=e.apply(this,arguments);return P!==g&&(s=(g=P)&&function Tr(t,e,a){return function(s){this.style.setProperty(t,e.call(this,s),a)}}(t,P,a)),s}return T._value=e,T}(t,e,null==a?"":a))},text:function Ir(t){return this.tween("text","function"==typeof t?function Pr(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ln(this,"text",t)):function Ar(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nr(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Mr(t){var e,a;function s(){var g=t.apply(this,arguments);return g!==a&&(e=(a=g)&&function Rr(t){return function(e){this.textContent=t.call(this,e)}}(g)),e}return s._value=t,s}(t))},remove:function mr(){return this.on("end.remove",function yr(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function El(t,e){var a=this._id;if(t+="",arguments.length<2){for(var P,s=ii(this.node(),a).tween,g=0,T=s.length;g<T;++g)if((P=s[g]).name===t)return P.value;return null}return this.each((null==e?bl:_l)(a,t,e))},delay:function nr(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?er:ir)(e,t)):ii(this.node(),e).delay},duration:function ar(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?lr:rr)(e,t)):ii(this.node(),e).duration},ease:function sr(t){var e=this._id;return arguments.length?this.each(function or(t,e){if("function"!=typeof e)throw new Error;return function(){li(this,t).ease=e}}(e,t)):ii(this.node(),e).ease},easeVarying:function ur(t){if("function"!=typeof t)throw new Error;return this.each(function dr(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;li(this,t).ease=a}}(this._id,t))},end:function jr(){var t,e,a=this,s=a._id,g=a.size();return new Promise(function(T,P){var Z={value:P},X={value:function(){0==--g&&T()}};a.each(function(){var ct=li(this,s),pt=ct.on;pt!==t&&((e=(t=pt).copy())._.cancel.push(Z),e._.interrupt.push(Z),e._.end.push(X)),ct.on=e}),0===g&&T()})},[Symbol.iterator]:si[Symbol.iterator]};var Fr={time:null,delay:0,duration:250,ease:function Br(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ur(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}we.prototype.interrupt=function yl(t){return this.each(function(){!function gl(t,e){var s,g,P,a=t.__transition,T=!0;if(a){for(P in e=null==e?null:e+"",a)(s=a[P]).name===e?(g=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(g?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete a[P]):T=!1;T&&delete t.__transition}}(this,t)})},we.prototype.transition=function Wr(t){var e,a;t instanceof oi?(e=t._id,t=t._name):(e=Qn(),(a=Fr).time=Xi(),t=null==t?null:t+"");for(var s=this._groups,g=s.length,T=0;T<g;++T)for(var X,P=s[T],Z=P.length,ct=0;ct<Z;++ct)(X=P[ct])&&Fi(X,t,e,ct,P,a||Ur(X,e));return new oi(s,this._parents,t,e)};Math;function Ii(t){return{type:t}}function bi(t){return function(){return t}}function Xn(t){this._context=t}function qr(t){return new Xn(t)}["w","e"].map(Ii),["n","s"].map(Ii),["n","w","e","s","nw","ne","sw","se"].map(Ii),Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const fn=Math.PI,vn=2*fn,gi=1e-6,$r=vn-gi;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Zi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(s){this._+=s[0];for(let g=1,T=s.length;g<T;++g)this._+=Math.round(arguments[g]*a)/a+s[g]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,s,g){this._append`Q${+e},${+a},${this._x1=+s},${this._y1=+g}`}bezierCurveTo(e,a,s,g,T,P){this._append`C${+e},${+a},${+s},${+g},${this._x1=+T},${this._y1=+P}`}arcTo(e,a,s,g,T){if(e=+e,a=+a,s=+s,g=+g,(T=+T)<0)throw new Error(`negative radius: ${T}`);let P=this._x1,Z=this._y1,X=s-e,ct=g-a,pt=P-e,Qt=Z-a,Ht=pt*pt+Qt*Qt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Ht>gi)if(Math.abs(Qt*X-ct*pt)>gi&&T){let ne=s-P,Ce=g-Z,Ie=X*X+ct*ct,Wt=ne*ne+Ce*Ce,Ut=Math.sqrt(Ie),ue=Math.sqrt(Ht),le=T*Math.tan((fn-Math.acos((Ie+Ht-Wt)/(2*Ut*ue)))/2),ge=le/ue,xe=le/Ut;Math.abs(ge-1)>gi&&this._append`L${e+ge*pt},${a+ge*Qt}`,this._append`A${T},${T},0,0,${+(Qt*ne>pt*Ce)},${this._x1=e+xe*X},${this._y1=a+xe*ct}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,s,g,T,P){if(e=+e,a=+a,P=!!P,(s=+s)<0)throw new Error(`negative radius: ${s}`);let Z=s*Math.cos(g),X=s*Math.sin(g),ct=e+Z,pt=a+X,Qt=1^P,Ht=P?g-T:T-g;null===this._x1?this._append`M${ct},${pt}`:(Math.abs(this._x1-ct)>gi||Math.abs(this._y1-pt)>gi)&&this._append`L${ct},${pt}`,s&&(Ht<0&&(Ht=Ht%vn+vn),Ht>$r?this._append`A${s},${s},0,1,${Qt},${e-Z},${a-X}A${s},${s},0,1,${Qt},${this._x1=ct},${this._y1=pt}`:Ht>gi&&this._append`A${s},${s},0,${+(Ht>=fn)},${Qt},${this._x1=e+s*Math.cos(T)},${this._y1=a+s*Math.sin(T)}`)}rect(e,a,s,g){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${s=+s}v${+g}h${-s}Z`}toString(){return this._}}function na(t){return t[0]}function la(t){return t[1]}function ra(t,e){var a=bi(!0),s=null,g=qr,T=null,P=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);e=s}return t},()=>new Zi(e)}(Z);function Z(X){var ct,Qt,ne,pt=(X=function Xr(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(X)).length,Ht=!1;for(null==s&&(T=g(ne=P())),ct=0;ct<=pt;++ct)!(ct<pt&&a(Qt=X[ct],ct,X))===Ht&&((Ht=!Ht)?T.lineStart():T.lineEnd()),Ht&&T.point(+t(Qt,ct,X),+e(Qt,ct,X));if(ne)return T=null,ne+""||null}return t="function"==typeof t?t:void 0===t?na:bi(t),e="function"==typeof e?e:void 0===e?la:bi(e),Z.x=function(X){return arguments.length?(t="function"==typeof X?X:bi(+X),Z):t},Z.y=function(X){return arguments.length?(e="function"==typeof X?X:bi(+X),Z):e},Z.defined=function(X){return arguments.length?(a="function"==typeof X?X:bi(!!X),Z):a},Z.curve=function(X){return arguments.length?(g=X,null!=s&&(T=g(s)),Z):g},Z.context=function(X){return arguments.length?(null==X?s=T=null:T=g(s=X),Z):s},Z}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tl(t){this._context=t}function aa(t){return new tl(t)}function _i(t,e,a){this.k=t,this.x=e,this.y=a}tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_i.prototype={constructor:_i,scale:function(t){return 1===t?this:new _i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new _i(1,0,0)}}]);