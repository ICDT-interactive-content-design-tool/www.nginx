"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[675],{9469:(tt,Y,v)=>{v.d(Y,{K5:()=>u,Ur:()=>W,Xs:()=>t,op:()=>V});var y=v(5972);const V=s=>{var I,E,D,$,A,n,x,B,N;s.params=s.params||{},s.params.page=s.params.page||1,s.params.limit=s.params.limit||1,(0,y.hm)({url:"api/Directory/SearchTreeList",params:{getby:null!==(I=s.params.userid)&&void 0!==I?I:null,directory_id:null!==(E=s.params.directory_id)&&void 0!==E?E:null,directory_pid:null!==(D=s.params.directory_pid)&&void 0!==D?D:null,directory_title:null!==($=s.params.directory_title)&&void 0!==$?$:null,active:null!==(A=s.params.active)&&void 0!==A?A:null,isdataowner:null!==(n=s.params.isdataowner)&&void 0!==n?n:null,statistic:null!==(x=s.params.statistic)&&void 0!==x?x:null,sortfield:null!==(B=s.params.sortfield)&&void 0!==B?B:null,sorttype:null!==(N=s.params.sorttype)&&void 0!==N?N:null,posstart:(s.params.page-1)*s.params.limit,numofrow:s.params.limit},success:z=>{"function"==typeof s.callback&&s.callback(z.data)},error:z=>{"function"==typeof s.callback&&s.callback(),console.error(z)},loading:s.loading,loadingController:s.loadingController})},W=s=>{var I,E,D,$,A,n,x;s.params=s.params||{},s.params.page=s.params.page||1,s.params.limit=s.params.limit||1,(0,y.hm)({url:"api/Directory/SearchTreeNode",params:{getby:null!==(I=s.params.userid)&&void 0!==I?I:null,directory_id:null!==(E=s.params.directory_id)&&void 0!==E?E:null,active:null!==(D=s.params.active)&&void 0!==D?D:null,isdataowner:null!==($=s.params.isdataowner)&&void 0!==$?$:null,statistic:null!==(A=s.params.statistic)&&void 0!==A?A:null,sortfield:null!==(n=s.params.sortfield)&&void 0!==n?n:null,sorttype:null!==(x=s.params.sorttype)&&void 0!==x?x:null,posstart:(s.params.page-1)*s.params.limit,numofrow:s.params.limit},success:B=>{"function"==typeof s.callback&&s.callback(B.data)},error:B=>{"function"==typeof s.callback&&s.callback(),console.error(B)},loading:s.loading,loadingController:s.loadingController})},u=s=>{var I,E,D,$,A,n,x,B;s.params=s.params||{},s.params.page=s.params.page||1,s.params.limit=s.params.limit||1,(0,y.Ll)({url:"api/Directory/AddUpdate",params:{userid:null!==(I=s.params.userid)&&void 0!==I?I:null,directory_id:null!==(E=s.params.directory_id)&&void 0!==E?E:null,directory_pid:null!==(D=s.params.directory_pid)&&void 0!==D?D:null,directory_title:null!==($=s.params.directory_title)&&void 0!==$?$:null,directory_description:null!==(A=s.params.directory_description)&&void 0!==A?A:null,directory_icon:null!==(n=s.params.directory_icon)&&void 0!==n?n:null,directory_cover:null!==(x=s.params.directory_cover)&&void 0!==x?x:null,directory_color:null!==(B=s.params.directory_color)&&void 0!==B?B:null},success:N=>{"function"==typeof s.callback&&s.callback(N.data)},error:N=>{"function"==typeof s.callback&&s.callback(),console.error(N)},loading:s.loading,loadingController:s.loadingController})},t=s=>{var I,E;s.params=s.params||{},s.params.page=s.params.page||1,s.params.limit=s.params.limit||1,(0,y.sj)({url:"api/Directory/Delete",params:{deleteby:null!==(I=s.params.userid)&&void 0!==I?I:null,directory_id:null!==(E=s.params.directory_id)&&void 0!==E?E:null},success:D=>{"function"==typeof s.callback&&s.callback(D.data)},error:D=>{"function"==typeof s.callback&&s.callback(),console.error(D)},loading:s.loading,loadingController:s.loadingController})}},6128:(tt,Y,v)=>{v.d(Y,{Wn:()=>V,lI:()=>u,mI:()=>W});var y=v(5972);function V(t){t.params=t.params||{},t.params.page=t.params.page||1,t.params.limit=t.params.limit||1,(0,y.hm)({url:"api/Tags/Search",params:{getby:t.params.userid||null,tags_id:t.params.tags_id||null,tags_pid:t.params.tags_pid||null,sortfield:t.params.sortfield||null,sorttype:t.params.sorttype||null,posstart:(t.params.page-1)*t.params.limit,numofrow:t.params.limit},success:s=>{"function"==typeof t.callback&&t.callback(s.data||null)},error:s=>{"function"==typeof t.callback&&t.callback(),console.error(s)},loading:t.loading,loadingController:t.loadingController})}function W(t){t.params=t.params||{},(0,y.Ll)({url:"api/Tags/AddUpdate",params:{tags_id:t.params.tags_id||null,tags_pid:t.params.tags_pid||null,tags_key:t.params.tags_key||null,createdby:t.params.userid||null,modifiedby:t.params.userid||null},success:s=>{"function"==typeof t.callback&&t.callback(s.data||null)},error:s=>{"function"==typeof t.callback&&t.callback(),console.error(s)},loading:t.loading,loadingController:t.loadingController})}function u(t){t.params=t.params||{},(0,y.sj)({url:"api/Tags/Delete",params:{deleteby:t.params.userid||null,tags_id:t.params.tags_id||null},success:s=>{"function"==typeof t.callback&&t.callback(s.data||null)},error:s=>{"function"==typeof t.callback&&t.callback(),console.error(s)},loading:t.loading,loadingController:t.loadingController})}},9957:(tt,Y,v)=>{v.d(Y,{Y:()=>S});var y=v(467),V=v(5972),W=v(6081),u=v(4975),t=v(2635),s=v(5414),I=v(7331),E=v(8405),D=v(1038),$=v(5807),A=v(2089),n=v(4438),x=v(6637),B=v(177),N=v(9417),z=v(9445),Q=v(31);function Z(M,F){if(1&M){const b=n.RV6();n.j41(0,"button",32),n.bIt("click",function(d){n.eBV(b);const _=n.XpG(2);return n.Njj(_.clearTopic(d))}),n.nrm(1,"ion-icon",33),n.k0s()}}function e(M,F){if(1&M){const b=n.RV6();n.j41(0,"button",32),n.bIt("click",function(d){n.eBV(b);const _=n.XpG(2);return n.Njj(_.clearCategory(d))}),n.nrm(1,"ion-icon",33),n.k0s()}}function U(M,F){if(1&M){const b=n.RV6();n.j41(0,"button",32),n.bIt("click",function(d){n.eBV(b);const _=n.XpG(2);return n.Njj(_.clearTemplate(d))}),n.nrm(1,"ion-icon",33),n.k0s()}}function H(M,F){if(1&M){const b=n.RV6();n.j41(0,"ion-content",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13)(7,"b",14),n.EFF(8),n.nI1(9,"translate"),n.k0s()(),n.j41(10,"input",15),n.bIt("change",function(d){n.eBV(b);const _=n.XpG();return n.Njj(_.changeBoardTitle(d))}),n.k0s()(),n.j41(11,"div",12)(12,"div",13)(13,"b",14),n.EFF(14),n.nI1(15,"translate"),n.k0s()(),n.j41(16,"div",16),n.nrm(17,"input",17),n.j41(18,"div",18),n.DNE(19,Z,2,0,"button",19),n.j41(20,"button",20),n.bIt("click",function(d){n.eBV(b);const _=n.XpG();return n.Njj(_.presentPopoverTopic(d))}),n.nrm(21,"ion-icon",21),n.k0s()()()(),n.j41(22,"div",12)(23,"div",13)(24,"b",14),n.EFF(25),n.nI1(26,"translate"),n.k0s()(),n.j41(27,"div",16),n.nrm(28,"input",17),n.j41(29,"div",18),n.DNE(30,e,2,0,"button",19),n.j41(31,"button",20),n.bIt("click",function(d){n.eBV(b);const _=n.XpG();return n.Njj(_.presentPopoverCategory(d))}),n.nrm(32,"ion-icon",21),n.k0s()()()(),n.j41(33,"div",12)(34,"div",13)(35,"b",14),n.EFF(36),n.nI1(37,"translate"),n.k0s()(),n.j41(38,"div",16),n.nrm(39,"input",17),n.j41(40,"div",18),n.DNE(41,U,2,0,"button",19),n.j41(42,"button",20),n.bIt("click",function(d){n.eBV(b);const _=n.XpG();return n.Njj(_.presentPopoverTemplate(d))}),n.nrm(43,"ion-icon",21),n.k0s()()()(),n.j41(44,"div",22)(45,"div",13)(46,"b",14),n.EFF(47),n.nI1(48,"translate"),n.k0s()(),n.j41(49,"div",16)(50,"div",23)(51,"input",24),n.bIt("change",function(d){n.eBV(b);const _=n.XpG();return n.Njj(_.changeBoardCover(d))}),n.k0s(),n.nrm(52,"label",25),n.k0s()()()(),n.j41(53,"div",26)(54,"div",12)(55,"div",13)(56,"b",14),n.EFF(57),n.nI1(58,"translate"),n.k0s()(),n.j41(59,"div",27)(60,"div",28),n.nrm(61,"ion-img",29),n.k0s()()()()(),n.j41(62,"div",30)(63,"div",13)(64,"b",14),n.EFF(65),n.nI1(66,"translate"),n.k0s()(),n.j41(67,"ckeditor",31),n.mxI("ngModelChange",function(d){n.eBV(b);const _=n.XpG();return n.DH7(_.board.board_description,d)||(_.board.board_description=d),n.Njj(d)}),n.k0s()(),n.j41(68,"div",30)(69,"div",13)(70,"b",14),n.EFF(71),n.nI1(72,"translate"),n.k0s()(),n.j41(73,"ckeditor",31),n.mxI("ngModelChange",function(d){n.eBV(b);const _=n.XpG();return n.DH7(_.board.board_content,d)||(_.board.board_content=d),n.Njj(d)}),n.k0s()()()()()}if(2&M){let b,i,d;const _=n.XpG();n.R7$(8),n.JRh(n.bMT(9,21,"LectureName")),n.R7$(2),n.Y8G("ngModel",_.board.board_title),n.R7$(4),n.JRh(n.bMT(15,23,"GradeLevel")),n.R7$(3),n.Y8G("value",null==(null!==(b=_.board.topic_titles)&&void 0!==b?b:_.board.topic_title)||null==(b=(null!=b?b:_.board.topic_title).split(";"))||null==(b=b.reverse())?null:b.join(" / ")),n.R7$(2),n.Y8G("ngIf",_.board.topic_id),n.R7$(6),n.JRh(n.bMT(26,25,"Subject")),n.R7$(3),n.Y8G("value",null==(null!==(i=_.board.category_title)&&void 0!==i?i:_.board.category_title)||null==(i=(null!=i?i:_.board.category_title).split(";"))||null==(i=i.reverse())?null:i.join(" / ")),n.R7$(2),n.Y8G("ngIf",_.board.category_id),n.R7$(6),n.JRh(n.bMT(37,27,"BoardTemplate")),n.R7$(3),n.Y8G("value",null==(null!==(d=_.board.template_titles)&&void 0!==d?d:_.board.template_title)||null==(d=(null!=d?d:_.board.template_title).split(";"))||null==(d=d.reverse())?null:d.join(" / ")),n.R7$(2),n.Y8G("ngIf",_.board.template_id),n.R7$(6),n.JRh(n.bMT(48,29,"Cover")),n.R7$(10),n.JRh(n.bMT(58,31,"Cover")),n.R7$(4),n.Y8G("src",_.fileurl||_.coverUrl||"assets/image/no-image.svg")("alt",_.board.board_title),n.R7$(4),n.JRh(n.bMT(66,33,"Introduce")),n.R7$(2),n.Y8G("editor",_.editorDescription),n.R50("ngModel",_.board.board_description),n.R7$(4),n.JRh(n.bMT(72,35,"Knowledge")),n.R7$(2),n.Y8G("editor",_.editorContent),n.R50("ngModel",_.board.board_content)}}let S=(()=>{var M;class F{constructor(i,d,_,h){this.modalController=i,this.popoverController=d,this.toastController=_,this.loadingController=h,this.b=0,this.editorDescription=$.m,this.editorContent=$.m,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var i=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,y.A)(function*(){i.appsettings=yield(0,V.AC)(),i.appsettings.madonvi&&(i.user=yield(0,t.Nk)(),i.readfileuploadurl=i.appsettings.readfileuploadurl||"",i.refreshData())})()}refreshData(){var i;(0,W.qU)({params:{userid:null===(i=this.user)||void 0===i?void 0:i.userid,board_id:this.b},callback:d=>{if((null==d?void 0:d.board_id)==this.b)return this.board=d,this.board.board_title=this.board.board_title+` - Copy #${this.board.board_id} (${Math.floor(999*Math.random())})`,void this.coverLoad();this.modalController.dismiss()}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var i=this;return(0,y.A)(function*(){if(!i.board.board_title)return void(0,s.c)(i.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(_=>{_.present()});let d=[];i.boardCover&&d.push(new Promise((_,h)=>{var O;(0,D.v)({params:{file:i.boardCover,subFolder:`board-cover/${null!==(O=i.board.board_id)&&void 0!==O?O:0}`,fileType:"image"},callback:T=>{var R;0==(null==T?void 0:T.ReturnCode)&&(i.board.cover=T.path+"/"+(null===(R=T.file)||void 0===R?void 0:R.name)),_(!0)}})})),Promise.all(d).then(_=>{var h;(0,u.Wb)({loadingController:i.loadingController,params:Object.assign({},i.board,{userid:null===(h=i.user)||void 0===h?void 0:h.userid}),callback:O=>{(0,s.c)(i.toastController,{},O).then(T=>{T.present()}),0==(null==O?void 0:O.returncode)&&i.modalController.dismiss({id:null==O?void 0:O.id,title:i.board.board_title},"confirm")}})})})()}presentPopoverTopic(i){var d=this;return(0,y.A)(function*(){const _=yield d.popoverController.create({component:I.E,componentProps:{selectedId:d.board.topic_id,filter:{for:"board"}},event:i,dismissOnSelect:!1,animated:!1,side:"right"});_.onDidDismiss().then(h=>{var O,T,R,K,w,X,L;"confirm"==h.role&&(Object.assign(d.board,{topic_id:null===(O=h.data)||void 0===O?void 0:O.topic_id,topic_title:null===(T=h.data)||void 0===T?void 0:T.topic_title,topic_titles:null===(R=h.data)||void 0===R?void 0:R.topic_titles}),null!==(K=h.data)&&void 0!==K&&K.category_id&&Object.assign(d.board,{category_id:null===(w=h.data)||void 0===w?void 0:w.category_id,category_title:null===(X=h.data)||void 0===X?void 0:X.category_title,category_titles:null===(L=h.data)||void 0===L?void 0:L.category_titles}))}),_.present()})()}clearTopic(i){Object.assign(this.board,{topic_id:null,topic_title:null,topic_titles:null})}changeTopic(i){this.board.topic_id=i}presentPopoverCategory(i){var d=this;return(0,y.A)(function*(){const _=yield d.popoverController.create({component:E.P,componentProps:{selectedId:d.board.category_id,filter:{for:"board"}},event:i,dismissOnSelect:!1,animated:!1,side:"right"});_.onDidDismiss().then(h=>{var O,T,R;"confirm"==h.role&&Object.assign(d.board,{category_id:null===(O=h.data)||void 0===O?void 0:O.category_id,category_title:null===(T=h.data)||void 0===T?void 0:T.category_title,category_titles:null===(R=h.data)||void 0===R?void 0:R.category_titles})}),_.present()})()}clearCategory(i){Object.assign(this.board,{category_id:null,category_title:null,category_titles:null})}changeCategory(i){this.board.category_id=i}presentPopoverTemplate(i){var d=this;return(0,y.A)(function*(){const _=yield d.popoverController.create({component:A.B,componentProps:{selectedId:d.board.template_id,filter:{for:"board"}},event:i,dismissOnSelect:!1,animated:!1,side:"right"});_.onDidDismiss().then(h=>{var O,T,R;"confirm"==h.role&&Object.assign(d.board,{template_id:null===(O=h.data)||void 0===O?void 0:O.template_id,template_title:null===(T=h.data)||void 0===T?void 0:T.template_title,template_titles:null===(R=h.data)||void 0===R?void 0:R.template_titles})}),_.present()})()}clearTemplate(i){Object.assign(this.board,{template_id:null,template_title:null,template_titles:null})}changeTemplate(i){this.board.template_id=i}changeBoardTitle(i){var d;this.board.board_title=null==i||null===(d=i.target)||void 0===d?void 0:d.value}changeBoardDescription(i){var d;this.board.board_description=null==i||null===(d=i.target)||void 0===d?void 0:d.value}changeBoardContent(i){var d;this.board.board_content=null==i||null===(d=i.target)||void 0===d?void 0:d.value}changeBoardCover(i){this.boardCover=void 0,i.target.files.length&&(this.boardCover=i.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}coverLoad(){var i,d,_,h,O,T,R,K,w,X,L;let q=[null!==(i=this.board)&&void 0!==i&&i.cover?`${null!==(d=this.appsettings.readfileuploadurl)&&void 0!==d?d:""}${null===(_=this.board)||void 0===_?void 0:_.cover}`:void 0,null!==(h=this.board)&&void 0!==h&&h.board_id?`${null!==(O=this.appsettings.readfileuploadurl)&&void 0!==O?O:""}${null!==(T=this.appsettings.boardpath)&&void 0!==T?T:""}${null===(R=this.board)||void 0===R?void 0:R.board_id}/cover.svg`:void 0,null!==(K=this.board)&&void 0!==K&&K.board_id?`${null!==(w=this.appsettings.readfileuploadurl)&&void 0!==w?w:""}${null!==(X=this.appsettings.boardpathv1)&&void 0!==X?X:""}${null===(L=this.board)||void 0===L?void 0:L.board_id}/cover.png`:void 0].filter(G=>!!G),k=G=>{if(!G)return;let P=new Image;P.onload=()=>{this.coverUrl=G},P.onerror=()=>{k(q.shift())},P.src=G};q.length&&k(q.shift())}}return(M=F).\u0275fac=function(i){return new(i||M)(n.rXU(x.W3),n.rXU(x.IE),n.rXU(x.K_),n.rXU(x.Xi))},M.\u0275cmp=n.VBU({type:M,selectors:[["app-modal-board-copy"]],inputs:{b:"b"},decls:15,vars:8,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[1,"container-fluid","h-100"],[1,"d-flex","w-100","h-100","flex-column"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"line-height-24"],[1,"fs-14","fw-500"],["type","text",1,"form-control",3,"change","ngModel"],[1,"input-group"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","chevron-down-outline"],[1,"form-group","d-none"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"col-lg-6","col-cover"],["onClick","document.getElementById('inputGroupFile03').click()",1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[3,"src","alt"],[1,"pb-3"],[1,"w-100",3,"ngModelChange","editor","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"]],template:function(i,d){1&i&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-button",0),n.bIt("click",function(){return d.save()}),n.j41(6,"ion-label"),n.EFF(7),n.nI1(8,"translate"),n.k0s()(),n.j41(9,"ion-buttons",1)(10,"ion-button",2),n.bIt("click",function(){return d.toggleFullScreen()}),n.nrm(11,"ion-icon",3),n.k0s(),n.j41(12,"ion-button",4),n.bIt("click",function(){return d.close()}),n.nrm(13,"ion-icon",5),n.k0s()()()(),n.DNE(14,H,74,37,"ion-content",6)),2&i&&(n.R7$(3),n.JRh(n.bMT(4,4,"CopyLecture")),n.R7$(4),n.JRh(n.bMT(8,6,"Save")),n.R7$(4),n.Y8G("src",d.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.R7$(3),n.Y8G("ngIf",d.board.board_id))},dependencies:[B.bT,N.me,N.BC,N.vS,x.Jm,x.QW,x.W9,x.eU,x.iq,x.KW,x.he,x.BC,x.ai,z.h,Q.D9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.col-cover[_ngcontent-%COMP%]{max-width:485px}"]}),F})()},2807:(tt,Y,v)=>{v.d(Y,{M:()=>q});var y=v(467),V=v(5972),W=v(8671),u=v(5781),t=v(1038),s=v(2635),I=v(4552),E=v(1607),D=v(4296),$=v(5414),A=v(8405),n=v(7331),x=v(7868),B=v(1400),N=v(1951),z=v(3675),Q=v(4835),Z=v(1799),e=v(4438),U=v(6637),H=v(177),S=v(9417),M=v(31);function F(k,G){if(1&k){const P=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(P);const r=e.XpG();return e.Njj(r.switchModal("ai-image"))}),e.j41(1,"div",44)(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"ion-icon",45),e.k0s()()}2&k&&(e.HbH("btn-light btn-with-ai"),e.R7$(3),e.JRh(e.bMT(4,3,"CreativityWithAI")))}function b(k,G){if(1&k){const P=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(P);const r=e.XpG();return e.Njj(r.AI_recommend())}),e.j41(1,"div",44)(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"ion-icon",46),e.nI1(6,"translate"),e.k0s()()}2&k&&(e.HbH("btn-light"),e.R7$(3),e.JRh(e.bMT(4,4,"CreativityWithAI")),e.R7$(2),e.Y8G("title",e.bMT(6,6,"UpgradeTabcaProNow")))}function i(k,G){if(1&k&&e.eu8(0,47),2&k){e.XpG();const P=e.sdS(124);e.Y8G("ngTemplateOutlet",P)}}function d(k,G){if(1&k&&e.eu8(0,47),2&k){e.XpG();const P=e.sdS(126);e.Y8G("ngTemplateOutlet",P)}}function _(k,G){if(1&k){const P=e.RV6();e.j41(0,"button",48),e.bIt("click",function(r){e.eBV(P);const f=e.XpG();return e.Njj(f.clearTopic(r))}),e.nrm(1,"ion-icon",49),e.k0s()}}function h(k,G){if(1&k){const P=e.RV6();e.j41(0,"button",48),e.bIt("click",function(r){e.eBV(P);const f=e.XpG();return e.Njj(f.clearCategory(r))}),e.nrm(1,"ion-icon",49),e.k0s()}}function O(k,G){if(1&k){const P=e.RV6();e.j41(0,"button",48),e.bIt("click",function(r){e.eBV(P);const f=e.XpG();return e.Njj(f.clearDirectory(r))}),e.nrm(1,"ion-icon",49),e.k0s()}}function T(k,G){if(1&k){const P=e.RV6();e.j41(0,"ion-chip")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-icon",50),e.bIt("click",function(){const r=e.eBV(P).$implicit,f=e.XpG();return e.Njj(f.removeTags(r))}),e.k0s()()}if(2&k){const P=G.$implicit;e.R7$(2),e.JRh(P)}}function R(k,G){if(1&k&&(e.j41(0,"option",60),e.EFF(1),e.k0s()),2&k){const P=G.$implicit;e.Y8G("value",P.lookup_value),e.R7$(),e.JRh(P.lookup_title)}}function K(k,G){if(1&k&&(e.qex(0),e.j41(1,"option",58),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,R,2,2,"option",59),e.bVm()),2&k){const P=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"SelectMediaType")),e.R7$(2),e.Y8G("ngForOf",P.v_mediatypes)}}function w(k,G){if(1&k){const P=e.RV6();e.j41(0,"div",12)(1,"div",20)(2,"div",51)(3,"label",52),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"div",30)(7,"input",53),e.bIt("change",function(r){e.eBV(P);const f=e.XpG();return e.Njj(f.changeMediaFile(r))}),e.k0s(),e.j41(8,"label",54),e.EFF(9),e.nI1(10,"translate"),e.nI1(11,"translate"),e.k0s()()()(),e.j41(12,"div",12)(13,"div",20)(14,"div",51)(15,"label",52),e.EFF(16),e.nI1(17,"translate"),e.k0s()(),e.j41(18,"select",55),e.bIt("ngModelChange",function(r){e.eBV(P);const f=e.XpG();return e.Njj(f.changeMediaType(r))}),e.DNE(19,K,5,4,"ng-container",56),e.qex(20),e.j41(21,"option",57),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.bVm(),e.k0s()()()}if(2&k){let P,c;const r=e.XpG();e.R7$(4),e.JRh(e.bMT(5,6,"File")),e.R7$(5),e.JRh(r.mediaFiles.length?e.bMT(10,8,"Selected")+" "+r.mediaFiles.length+" "+e.bMT(11,10,"File"):(null!==(P=r.media.filepath)&&void 0!==P?P:"").split("/").pop()),e.R7$(7),e.JRh(e.bMT(17,12,"MediaType")),e.R7$(2),e.Y8G("ngModel",null!==(c=r.media.v_mediatype)&&void 0!==c?c:0),e.R7$(),e.Y8G("ngIf",r.mediaFiles.length<=1),e.R7$(3),e.JRh(e.bMT(23,14,"AutomaticallySelectsByFileType"))}}function X(k,G){if(1&k&&(e.j41(0,"option",60),e.EFF(1),e.k0s()),2&k){const P=G.$implicit;e.Y8G("value",P.lookup_value),e.R7$(),e.JRh(P.lookup_title)}}function L(k,G){if(1&k){const P=e.RV6();e.j41(0,"div",12)(1,"div",20)(2,"div",51)(3,"label",52),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"input",61),e.bIt("ngModelChange",function(r){e.eBV(P);const f=e.XpG();return e.Njj(f.changeLinkShare(r))}),e.k0s()()(),e.j41(7,"div",12)(8,"div",20)(9,"div",51)(10,"label",52),e.EFF(11),e.nI1(12,"translate"),e.k0s()(),e.j41(13,"select",55),e.bIt("ngModelChange",function(r){e.eBV(P);const f=e.XpG();return e.Njj(f.changeOssType(r))}),e.j41(14,"option",58),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.DNE(17,X,2,2,"option",59),e.k0s()()()}if(2&k){let P;const c=e.XpG();e.R7$(4),e.JRh(e.bMT(5,6,"Url")),e.R7$(2),e.Y8G("ngModel",c.media.link_share),e.R7$(5),e.JRh(e.bMT(12,8,"OssType")),e.R7$(2),e.Y8G("ngModel",null!==(P=c.media.v_osstype)&&void 0!==P?P:0),e.R7$(2),e.JRh(e.bMT(16,10,"SelectOssType")),e.R7$(2),e.Y8G("ngForOf",c.v_osstypes)}}let q=(()=>{var k;class G{constructor(c,r,f,o){this.modalController=c,this.toastController=r,this.loadingController=f,this.popoverController=o,this.filter={},this.media={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.fileurl="",this.coverUrl="",this.v_mediatypes=[],this.v_osstypes=[],this.mediaFiles=[]}ngOnInit(){var c=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),Object.assign(this.media,this.filter),(0,y.A)(function*(){c.appsettings=yield(0,V.AC)(),c.appsettings.madonvi&&(c.user=yield(0,s.Nk)(),c.readfileuploadurl=c.appsettings.readfileuploadurl||"",c.refreshData())})()}refreshData(){var c;(0,W.$)({params:{lookup_key:"v_mediatype"},callback:r=>{this.v_mediatypes=r||[]}}),(0,W.$)({params:{lookup_key:"v_osstype"},callback:r=>{this.v_osstypes=r||[]}}),this.membership||(0,x.EW)({params:{userid:null===(c=this.user)||void 0===c?void 0:c.userid,v_functionlimit:B.r.GenAITaoHinhAnh},callback:r=>{var f;this.membership={GenAITaoHinhAnh:(0,N.j)(null==r||null===(f=r.contents)||void 0===f?void 0:f.find(o=>o.v_functionlimit==B.r.GenAITaoHinhAnh))}}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}switchModal(c){return this.modalController.dismiss({modalName:c},"switch")}save(){var c=this;return(0,y.A)(function*(){let r=[];if(c.mediaCover&&r.push(new Promise((f,o)=>{(0,t.v)({params:{file:c.mediaCover,subFolder:"material/tabca",fileType:"image"},callback:p=>{var a;0==(null==p?void 0:p.ReturnCode)&&(c.media.cover=p.path+"/"+(null===(a=p.file)||void 0===a?void 0:a.name)),f(!0)}})})),c.isLink){if(c.media.v_mediatype=E.S.LINK,!c.media.link_share)return void(0,$.c)(c.toastController,{message:"Nh\u1eadp \u0111\u01b0\u1eddng d\u1eabn!"}).then(f=>{f.present()})}else if(!c.media.link_file){if(c.mediaFiles.length>=2){const f=yield c.loadingController.create({message:"\u0110ang t\u1ea3i..."});return f.present(),void c.recursiveUpload(o=>{o||f.dismiss()})}if(1!=c.mediaFiles.length)return void(0,$.c)(c.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y t\u1eadp tin t\u1ea3i l\xean!"}).then(f=>{f.present()});r.push(new Promise((f,o)=>{let p=c.mediaFiles.pop();(0,t.v)({params:{file:p,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:a=>{var l,m;0==(null==a?void 0:a.ReturnCode)?(c.media.filepath=a.path+"/"+(null===(l=a.file)||void 0===l?void 0:l.name),c.media.link_file=c.readfileuploadurl+a.path+"/"+(null===(m=a.file)||void 0===m?void 0:m.name),c.media.media_title||(c.media.media_title=a.name.replace(/.[a-zA-Z0-9]+$/,"")),c.media.v_mediatype||c.v_mediatypes.every(g=>{var C,j;return null===(C=g.lookup_note)||void 0===C||null===(C=C.replace(/\s+/g,""))||void 0===C||!C.split(",").includes(null===(j=a.file)||void 0===j?void 0:j.extension)||(c.media.v_mediatype=g.lookup_value,!1)}),"zip"==(null==a?void 0:a.fileTye)&&c.media.v_mediatype==E.S.SCORM?(0,t.o)({loadingController:c.loadingController,params:{pathFile:c.media.filepath},callback:g=>{null!=g&&g.imsmanifest?c.media.filepath_extract=null==g?void 0:g.imsmanifest:c.media.v_mediatype=E.S.ZIP,f(!0)}}):f(!0)):f(!0)}})}))}Promise.all(r).then(f=>{var o,p;(0,u.Rq)({loadingController:c.loadingController,params:Object.assign({},c.media,{userid:null===(o=c.user)||void 0===o?void 0:o.userid,tags:null===(p=c.media.tag_arrs)||void 0===p||null===(p=p.filter((a,l,m)=>m.indexOf(a)==l))||void 0===p?void 0:p.join(";")}),callback:a=>{(0,$.c)(c.toastController,{},a).then(l=>{l.present()}),0==(null==a?void 0:a.returncode)&&c.modalController.dismiss(null==a?void 0:a.id,"confirm")}})})})()}recursiveUpload(c){if(this.mediaFiles.length){let r={topic_id:this.media.topic_id,category_id:this.media.category_id,directory_id:this.media.directory_id},f=this.mediaFiles.pop();(0,t.v)({params:{file:f,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:o=>{var p,a,l;0==(null==o?void 0:o.ReturnCode)?(r.filepath=o.path+"/"+(null===(p=o.file)||void 0===p?void 0:p.name),r.link_file=this.readfileuploadurl+o.path+"/"+(null===(a=o.file)||void 0===a?void 0:a.name),r.media_title=o.name.replace(/.[a-zA-Z0-9]+$/,""),this.v_mediatypes.every(m=>{var g,C;return null===(g=m.lookup_note)||void 0===g||null===(g=g.replace(/\s+/g,""))||void 0===g||!g.split(",").includes(null===(C=o.file)||void 0===C?void 0:C.extension)||(r.v_mediatype=m.lookup_value,!1)}),(0,u.Rq)({params:Object.assign(r,{userid:null===(l=this.user)||void 0===l?void 0:l.userid}),callback:m=>{this.recursiveUpload(c)}})):this.recursiveUpload(c)}})}else c(!1),this.modalController.dismiss(null,"confirm")}presentPopoverTopic(c){var r=this;return(0,y.A)(function*(){const f=yield r.popoverController.create({component:n.E,componentProps:{selectedId:r.media.topic_id,filter:{for:"media"}},event:c,dismissOnSelect:!1,animated:!1,side:"right"});f.onDidDismiss().then(o=>{var p,a,l,m,g,C,j;"confirm"==o.role&&(Object.assign(r.media,{topic_id:null===(p=o.data)||void 0===p?void 0:p.topic_id,topic_title:null===(a=o.data)||void 0===a?void 0:a.topic_title,topic_titles:null===(l=o.data)||void 0===l?void 0:l.topic_titles}),null!==(m=o.data)&&void 0!==m&&m.category_id&&Object.assign(r.media,{category_id:null===(g=o.data)||void 0===g?void 0:g.category_id,category_title:null===(C=o.data)||void 0===C?void 0:C.category_title,category_titles:null===(j=o.data)||void 0===j?void 0:j.category_titles}))}),f.present()})()}clearTopic(c){Object.assign(this.media,{topic_id:null,topic_title:null,topic_titles:null})}changeTopic(c){var r;this.media.topic_id=null!==(r=parseInt(c))&&void 0!==r?r:0}presentPopoverCategory(c){var r=this;return(0,y.A)(function*(){const f=yield r.popoverController.create({component:A.P,componentProps:{selectedId:r.media.category_id,filter:{for:"media"}},event:c,dismissOnSelect:!1,animated:!1,side:"right"});f.onDidDismiss().then(o=>{var p,a,l;"confirm"==o.role&&Object.assign(r.media,{category_id:null===(p=o.data)||void 0===p?void 0:p.category_id,category_title:null===(a=o.data)||void 0===a?void 0:a.category_title,category_titles:null===(l=o.data)||void 0===l?void 0:l.category_titles})}),f.present()})()}clearCategory(c){Object.assign(this.media,{category_id:null,category_title:null,category_titles:null})}changeCategory(c){var r;this.media.category_id=null!==(r=parseInt(c))&&void 0!==r?r:0}presentPopoverDirectory(c){var r=this;return(0,y.A)(function*(){const f=yield r.popoverController.create({component:z._,componentProps:{selectedId:r.media.directory_id,filter:{for:"media"}},event:c,dismissOnSelect:!1,animated:!1,side:"right"});f.onDidDismiss().then(o=>{var p,a,l;"confirm"==o.role&&Object.assign(r.media,{directory_id:null===(p=o.data)||void 0===p?void 0:p.directory_id,directory_title:null===(a=o.data)||void 0===a?void 0:a.directory_title,directory_titles:null===(l=o.data)||void 0===l?void 0:l.directory_titles})}),f.present()})()}clearDirectory(c){Object.assign(this.media,{directory_id:null,directory_title:null,directory_titles:null})}changeDirectory(c){var r;this.media.directory_id=null!==(r=parseInt(c))&&void 0!==r?r:0}presentPopoverTags(c){var r=this;return(0,y.A)(function*(){var f;const o=yield r.popoverController.create({component:Z.M,componentProps:{selected_Arrs:[...null!==(f=r.media.tag_arrs)&&void 0!==f?f:[]]},event:c,dismissOnSelect:!1,animated:!1,side:"right"});o.onDidDismiss().then(p=>{"confirm"==p.role&&Object.assign(r.media,{tag_arrs:p.data})}),o.present()})()}removeTags(c){var r;this.media.tag_arrs=null===(r=this.media.tag_arrs)||void 0===r?void 0:r.filter(f=>f!=c)}changeMediaTitle(c){var r;this.media.media_title=null==c||null===(r=c.target)||void 0===r?void 0:r.value}changeMediaDescription(c){var r;this.media.media_description=null==c||null===(r=c.target)||void 0===r?void 0:r.value}changeMediaContent(c){var r;this.media.media_content=null==c||null===(r=c.target)||void 0===r?void 0:r.value}changeMediaType(c){this.media.v_mediatype=c?parseInt(c):0}changeOssType(c){this.media.v_osstype=c?parseInt(c):0}changeLinkShare(c){this.media.link_share=c,(0,I.nh)(c)?this.media.v_osstype=D.N.YOUTUBE:(0,I.Ho)(c)&&(this.media.v_osstype=D.N.PHET)}changeMediaFile(c){this.mediaFiles.length=0;for(let o=0,p=null===(r=c.target)||void 0===r?void 0:r.files.length;o<p;o++){var r;this.mediaFiles.push(c.target.files[o])}if(1==this.mediaFiles.length){let{fileName:o,fileExtension:p}=(0,I.XG)(this.mediaFiles[0].name);var f;if(this.media.media_title=o,this.media.v_mediatype=void 0,this.v_mediatypes.every(a=>{var l;return null===(l=a.lookup_note)||void 0===l||null===(l=l.replace(/\s+/g,""))||void 0===l||!l.split(",").includes(p)||(this.media.v_mediatype=a.lookup_value,!1)}),!this.mediaCover)switch(null!==(f=this.media.v_mediatype)&&void 0!==f?f:0){case E.S.IMAGE:this.fileurl=URL.createObjectURL(this.mediaFiles[0]);break;case E.S.VIDEO:(()=>{let a=this.mediaFiles[0],l=new FileReader;l.onload=()=>{let m=document.createElement("canvas"),g=document.createElement("video");g.addEventListener("loadedmetadata",()=>{setTimeout(()=>{var C;m.width=g.videoWidth,m.height=g.videoHeight,null===(C=m.getContext("2d"))||void 0===C||C.drawImage(g,0,0,g.videoWidth,g.videoHeight),((J,nt)=>{let ot=(J.match(/^data:([^;]+);/)||"")[1];fetch(J).then(et=>et.arrayBuffer()).then(et=>new File([et],nt,{type:ot})).then(et=>{this.mediaCover=et,this.fileurl=URL.createObjectURL(et)})})(m.toDataURL("image/png"),`${a.name}.png`),m.remove(),g.pause(),g.remove()},1e3)}),g.preload="metadata",g.muted=!0,g.playsInline=!0,g.src=l.result,g.play()},l.readAsDataURL(a)})()}}}changeMediaCover(c){var r;if(this.mediaCover=void 0,c.target.files.length&&(this.mediaCover=c.target.files[0]),!this.mediaCover)return;let p,{fileExtension:o}=(0,I.XG)(null===(r=this.mediaCover)||void 0===r?void 0:r.name);o&&(this.v_mediatypes.every(a=>{var l;return null===(l=a.lookup_note)||void 0===l||null===(l=l.replace(/\s+/g,""))||void 0===l||!l.split(",").includes(o)||(p=a.lookup_value,!1)}),this.mediaCover&&p==E.S.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaCover)))}changeIsLink(c){this.isLink=c}useDefaultCover(){var c=this;return(0,y.A)(function*(){c.mediaCover=void 0,c.fileurl="",c.media.cover=void 0,c.coverUrl="",c.coverLoad()})()}coverLoad(){var c,r,f;let o=[null!==(c=this.media)&&void 0!==c&&c.cover?`${null!==(r=this.appsettings.readfileuploadurl)&&void 0!==r?r:""}${null===(f=this.media)||void 0===f?void 0:f.cover}`:void 0].filter(a=>!!a),p=a=>{if(!a)return;let l=new Image;l.onload=()=>{this.coverUrl=a},l.onerror=()=>{p(o.shift())},l.src=a};o.length&&p(o.shift())}AI_recommend(){var c=this;return(0,y.A)(function*(){(0,Q.QB)(c.modalController,B.r.GenAITaoHinhAnh)})()}}return(k=G).\u0275fac=function(c){return new(c||k)(e.rXU(U.W3),e.rXU(U.K_),e.rXU(U.Xi),e.rXU(U.IE))},k.\u0275cmp=e.VBU({type:k,selectors:[["app-modal-media-add"]],inputs:{filter:"filter",membership:"membership"},decls:127,vars:63,consts:[["typefile",""],["typelink",""],["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"ion-padding"],[1,"container-fluid"],[1,"row"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"form-group"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["type","button",1,"btn",3,"class"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col"],[1,"line-height-24"],[1,"fs-14","fw-500"],[1,"input-group"],["type","text",1,"form-control",3,"change","ngModel"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","chevron-down-outline"],[1,"form-control"],[1,"col-auto"],[1,"form-group","d-none"],[1,"custom-file"],["type","file","id","inputGroupFile02",1,"custom-file-input",3,"change"],["for","inputGroupFile02",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[1,"placeholder"],[1,"d-flex","flex-wrap","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"placeholder-text"],["onClick","document.getElementById('inputGroupFile02').click()",1,"btn","btn-primary"],[1,"my-1"],[1,"text-lowercase"],[1,"btn","btn-outline-primary",3,"click"],[1,"pb-3"],["rows","6",1,"form-control",3,"change","ngModel"],[1,"d-flex","align-items-center","justify-content-center"],["src","../../../assets/icon-svg/magic.svg",1,"ml-2"],["src","../../../assets/image/tabca-pro-2.svg",1,"icon-tabca-pro","fs-22","ml-3","my-0",3,"title"],[3,"ngTemplateOutlet"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"],["name","close-outline",3,"click"],[1,"input-group-prepend"],[1,"input-group-text"],["type","file","id","inputGroupFile01","multiple","",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],[1,"custom-select",3,"ngModelChange","ngModel"],[4,"ngIf"],["value","","selected",""],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","https://",1,"form-control",3,"ngModelChange","ngModel"]],template:function(c,r){if(1&c){const f=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-button",2),e.bIt("click",function(){return e.eBV(f),e.Njj(r.save())}),e.j41(6,"ion-label"),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"ion-buttons",3)(10,"ion-button",4),e.bIt("click",function(){return e.eBV(f),e.Njj(r.toggleFullScreen())}),e.nrm(11,"ion-icon",5),e.k0s(),e.j41(12,"ion-button",6),e.bIt("click",function(){return e.eBV(f),e.Njj(r.close())}),e.nrm(13,"ion-icon",7),e.k0s()()()(),e.j41(14,"ion-content",8)(15,"div",9)(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13)(20,"button",14),e.bIt("click",function(){return e.eBV(f),e.Njj(r.changeIsLink(!1))}),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"button",14),e.bIt("click",function(){return e.eBV(f),e.Njj(r.changeIsLink(!0))}),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.DNE(26,F,6,5,"button",15)(27,b,7,8),e.k0s()(),e.DNE(28,i,1,1,"ng-container",16)(29,d,1,1,"ng-container",16),e.k0s()(),e.j41(30,"div",10)(31,"div",17)(32,"div",12)(33,"div",18)(34,"b",19),e.EFF(35),e.nI1(36,"translate"),e.k0s()(),e.j41(37,"div",20)(38,"input",21),e.bIt("change",function(p){return e.eBV(f),e.Njj(r.changeMediaTitle(p))}),e.k0s()()(),e.j41(39,"div",12)(40,"div",18)(41,"b",19),e.EFF(42),e.nI1(43,"translate"),e.k0s()(),e.j41(44,"div",20),e.nrm(45,"input",22),e.j41(46,"div",23),e.DNE(47,_,2,0,"button",24),e.j41(48,"button",25),e.bIt("click",function(p){return e.eBV(f),e.Njj(r.presentPopoverTopic(p))}),e.nrm(49,"ion-icon",26),e.k0s()()()(),e.j41(50,"div",12)(51,"div",18)(52,"b",19),e.EFF(53),e.nI1(54,"translate"),e.k0s()(),e.j41(55,"div",20),e.nrm(56,"input",22),e.j41(57,"div",23),e.DNE(58,h,2,0,"button",24),e.j41(59,"button",25),e.bIt("click",function(p){return e.eBV(f),e.Njj(r.presentPopoverCategory(p))}),e.nrm(60,"ion-icon",26),e.k0s()()()(),e.j41(61,"div",12)(62,"div",18)(63,"b",19),e.EFF(64),e.nI1(65,"translate"),e.k0s()(),e.j41(66,"div",20),e.nrm(67,"input",22),e.j41(68,"div",23),e.DNE(69,O,2,0,"button",24),e.j41(70,"button",25),e.bIt("click",function(p){return e.eBV(f),e.Njj(r.presentPopoverDirectory(p))}),e.nrm(71,"ion-icon",26),e.k0s()()()(),e.j41(72,"div",12)(73,"div",18)(74,"b",19),e.EFF(75),e.nI1(76,"translate"),e.k0s()(),e.j41(77,"div",20)(78,"div",27),e.Z7z(79,T,4,1,"ion-chip",null,e.fX1),e.k0s(),e.j41(81,"div",23)(82,"button",25),e.bIt("click",function(p){return e.eBV(f),e.Njj(r.presentPopoverTags(p))}),e.nrm(83,"ion-icon",26),e.k0s()()()()(),e.j41(84,"div",28)(85,"div",29)(86,"div",18)(87,"b",19),e.EFF(88),e.nI1(89,"translate"),e.k0s()(),e.j41(90,"div",20)(91,"div",30)(92,"input",31),e.bIt("change",function(p){return e.eBV(f),e.Njj(r.changeMediaCover(p))}),e.k0s(),e.j41(93,"label",32),e.EFF(94),e.k0s()()()(),e.j41(95,"div",12)(96,"div",18)(97,"b",19),e.EFF(98),e.nI1(99,"translate"),e.k0s()(),e.j41(100,"div",33)(101,"div",34),e.nrm(102,"img",5),e.j41(103,"div",35)(104,"div",36)(105,"div")(106,"div",37)(107,"button",38),e.EFF(108),e.nI1(109,"translate"),e.k0s(),e.j41(110,"div",39)(111,"small",40),e.EFF(112),e.nI1(113,"translate"),e.k0s()(),e.j41(114,"button",41),e.bIt("click",function(){return e.eBV(f),e.Njj(r.useDefaultCover())}),e.EFF(115),e.nI1(116,"translate"),e.k0s()()()()()()()()()(),e.j41(117,"div",42)(118,"div",18)(119,"b",19),e.EFF(120),e.nI1(121,"translate"),e.k0s()(),e.j41(122,"textarea",43),e.bIt("change",function(p){return e.eBV(f),e.Njj(r.changeMediaDescription(p))}),e.k0s()()()(),e.DNE(123,w,24,16,"ng-template",null,0,e.C5r)(125,L,18,12,"ng-template",null,1,e.C5r)}if(2&c){let f,o,p;e.R7$(3),e.JRh(e.bMT(4,33,"AddMaterial")),e.R7$(4),e.JRh(e.bMT(8,35,"Add")),e.R7$(4),e.Y8G("src",r.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),e.R7$(9),e.HbH(r.isLink?"btn-light":"btn-primary"),e.R7$(),e.JRh(e.bMT(22,37,"File")),e.R7$(2),e.HbH(r.isLink?"btn-primary":"btn-light"),e.R7$(),e.JRh(e.bMT(25,39,"Link")),e.R7$(2),e.vxM(26,null!=r.membership&&r.membership.GenAITaoHinhAnh?26:27),e.R7$(2),e.Y8G("ngIf",!r.isLink),e.R7$(),e.Y8G("ngIf",r.isLink),e.R7$(6),e.JRh(e.bMT(36,41,"MaterialName")),e.R7$(3),e.Y8G("ngModel",r.media.media_title),e.R7$(4),e.JRh(e.bMT(43,43,"GradeLevel")),e.R7$(3),e.Y8G("value",null==(null!==(f=r.media.topic_titles)&&void 0!==f?f:r.media.topic_title)||null==(f=(null!=f?f:r.media.topic_title).split(";"))||null==(f=f.reverse())?null:f.join(" / ")),e.R7$(2),e.Y8G("ngIf",r.media.topic_id),e.R7$(6),e.JRh(e.bMT(54,45,"Subject")),e.R7$(3),e.Y8G("value",null==(null!==(o=r.media.category_titles)&&void 0!==o?o:r.media.category_title)||null==(o=(null!=o?o:r.media.category_title).split(";"))||null==(o=o.reverse())?null:o.join(" / ")),e.R7$(2),e.Y8G("ngIf",r.media.category_id),e.R7$(6),e.JRh(e.bMT(65,47,"Directory")),e.R7$(3),e.Y8G("value",null==(null!==(p=r.media.directory_titles)&&void 0!==p?p:r.media.directory_title)||null==(p=(null!=p?p:r.media.directory_title).split(";"))||null==(p=p.reverse())?null:p.join(" / ")),e.R7$(2),e.Y8G("ngIf",r.media.directory_id),e.R7$(6),e.JRh(e.bMT(76,49,"Tag")),e.R7$(4),e.Dyx(r.media.tag_arrs),e.R7$(9),e.JRh(e.bMT(89,51,"Cover")),e.R7$(6),e.JRh(null==r.mediaCover?null:r.mediaCover.name),e.R7$(4),e.JRh(e.bMT(99,53,"Cover")),e.R7$(4),e.Y8G("src",r.fileurl||r.coverUrl||"assets/image-png/media-default.jpg",e.B4B),e.R7$(6),e.JRh(e.bMT(109,55,"ChooseFile")),e.R7$(4),e.JRh(e.bMT(113,57,"Or")),e.R7$(3),e.JRh(e.bMT(116,59,"UseDefaultCover")),e.R7$(5),e.JRh(e.bMT(121,61,"Introduce")),e.R7$(2),e.Y8G("ngModel",r.media.media_description)}},dependencies:[H.Sq,H.bT,H.T3,S.xH,S.y7,S.me,S.wz,S.BC,S.vS,U.Jm,U.QW,U.ZB,U.W9,U.eU,U.iq,U.he,U.BC,U.ai,M.D9],styles:['.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[readonly][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[readonly][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[readonly][_ngcontent-%COMP%]{cursor:default}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.input-group[_ngcontent-%COMP%]   div.form-control[_ngcontent-%COMP%]{height:auto;min-height:38px;padding-top:4px;padding-bottom:0}.input-group[_ngcontent-%COMP%]   div.form-control[_ngcontent-%COMP%] + .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:38px}.input-group[_ngcontent-%COMP%]   div.form-control[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{height:auto;min-height:28px;padding:3px 8px;margin:0 4px 4px 0;line-height:20px}.btn-group[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;box-shadow:none}.btn-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff;border-color:#5359e6;background-color:#5359e6}.btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{color:#333;border-color:#ced4da;background-color:#e9f9ff}.embed-cover[_ngcontent-%COMP%]{width:424px;max-width:100%;border:1px dashed var(--ion-color-primary)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:none;width:100%;height:100%}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{line-height:0;font-size:40px}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{line-height:14px;font-size:12px;color:#333}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px;color:#333c}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:1.75rem;padding:0 .75rem;border-radius:4px;text-align:center;font-size:.8rem}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%] + .placeholder-text[_ngcontent-%COMP%]{margin-top:.25rem}.embed-cover[_ngcontent-%COMP%]:hover   img[src][_ngcontent-%COMP%]:not([src=""]) + .placeholder[_ngcontent-%COMP%]{display:block;position:absolute;top:0;left:0;background:#fffc}']}),G})()},6103:(tt,Y,v)=>{v.d(Y,{t:()=>f});var y=v(2505),V=v(8671),W=v(6128),u=v(5446),t=v(4438),s=v(6637),I=v(177),E=v(31);const D=()=>[],$=o=>({$implicit:o});function A(o,p){if(1&o&&t.eu8(0,23),2&o){t.XpG();const a=t.sdS(26);t.Y8G("ngTemplateOutlet",a)}}function n(o,p){if(1&o&&(t.j41(0,"ion-accordion",24)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&o){t.XpG();const a=t.sdS(28);t.R7$(3),t.JRh(t.bMT(4,2,"MediaType")),t.R7$(3),t.Y8G("ngTemplateOutlet",a)}}function x(o,p){if(1&o&&(t.j41(0,"ion-accordion",27)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&o){t.XpG();const a=t.sdS(30);t.R7$(3),t.JRh(t.bMT(4,2,"Tag")),t.R7$(3),t.Y8G("ngTemplateOutlet",a)}}function B(o,p){if(1&o&&(t.j41(0,"ion-accordion",28)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&o){t.XpG();const a=t.sdS(32);t.R7$(3),t.JRh(t.bMT(4,2,"GradeLevel")),t.R7$(3),t.Y8G("ngTemplateOutlet",a)}}function N(o,p){if(1&o&&(t.j41(0,"ion-accordion",29)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&o){t.XpG();const a=t.sdS(36);t.R7$(3),t.JRh(t.bMT(4,2,"Subject")),t.R7$(3),t.Y8G("ngTemplateOutlet",a)}}function z(o,p){if(1&o){const a=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",37),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(m){t.eBV(a);const g=t.XpG(2);return t.Njj(g.clearFilterTopic(m))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&o){let a;const l=t.XpG(2);t.R7$(4),t.JRh(null!==(a=l.filter.topic_title)&&void 0!==a?a:t.bMT(5,1,"GradeLevel"))}}function Q(o,p){if(1&o){const a=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",40),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(m){t.eBV(a);const g=t.XpG(2);return t.Njj(g.clearFilterCategory(m))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&o){let a;const l=t.XpG(2);t.R7$(4),t.JRh(null!==(a=l.filter.category_title)&&void 0!==a?a:t.bMT(5,1,"Subject"))}}function Z(o,p){if(1&o){const a=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",41),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(m){t.eBV(a);const g=t.XpG(2);return t.Njj(g.clearFilterTags(m))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&o){let a;const l=t.XpG(2);t.R7$(4),t.JRh(null!==(a=l.filter.tags_key)&&void 0!==a?a:t.bMT(5,1,"Tag"))}}function e(o,p){if(1&o){const a=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",42),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(m){t.eBV(a);const g=t.XpG(2);return t.Njj(g.clearFilterMediaType(m,g.filter.v_mediatype))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&o){let a;const l=t.XpG(2);t.R7$(4),t.JRh(null!==(a=l.filter.v_mediatype_title)&&void 0!==a?a:t.bMT(5,1,"MediaType"))}}function U(o,p){if(1&o){const a=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",42),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(m){const g=t.eBV(a).$implicit,C=t.XpG(2);return t.Njj(C.clearFilterMediaType(m,g.v_mediatype))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&o){let a;const l=p.$implicit;t.R7$(4),t.JRh(null!==(a=l.v_mediatype_title)&&void 0!==a?a:t.bMT(5,1,"MediaType"))}}function H(o,p){if(1&o){const a=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",43),t.j41(3,"ion-label"),t.EFF(4),t.k0s(),t.j41(5,"button",38),t.bIt("click",function(m){t.eBV(a);const g=t.XpG(2);return t.Njj(g.clearSearch(m))}),t.nrm(6,"ion-icon",39),t.k0s()()()}if(2&o){const a=t.XpG(2);t.R7$(4),t.JRh(a.filter.search)}}function S(o,p){if(1&o&&(t.j41(0,"div",30)(1,"div",31)(2,"b"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",32),t.DNE(6,z,8,3,"div",33)(7,Q,8,3,"div",33)(8,Z,8,3,"div",33)(9,e,8,3,"div",33)(10,U,8,3,"div",34)(11,H,7,1,"div",33),t.k0s()(),t.nrm(12,"hr")),2&o){let a;const l=t.XpG();t.R7$(3),t.Lme("",t.bMT(4,8,"AppliedFilters")," (",l.counter(),")"),t.R7$(3),t.Y8G("ngIf",l.filter.topic_id),t.R7$(),t.Y8G("ngIf",l.filter.category_id),t.R7$(),t.Y8G("ngIf",l.filter.tags_id),t.R7$(),t.Y8G("ngIf",l.filter.v_mediatype),t.R7$(),t.Y8G("ngForOf",null!==(a=l.filter.v_mediatypes)&&void 0!==a?a:t.lJ4(10,D)),t.R7$(),t.Y8G("ngIf",l.filter.search)}}function M(o,p){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"ion-item")(2,"ion-checkbox",47),t.bIt("ionChange",function(m){t.eBV(a);const g=t.XpG(2);return t.Njj(g.changeMediaType(m))}),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.k0s()(),t.bVm()}if(2&o){const a=p.$implicit,l=t.XpG(2);t.R7$(2),t.Y8G("value",a.lookup_value)("checked",l.checkedMediaType(a.lookup_value)),t.R7$(2),t.JRh(a.lookup_title)}}function F(o,p){if(1&o){const a=t.RV6();t.j41(0,"ion-list",44)(1,"ion-item")(2,"ion-checkbox",45),t.bIt("ionChange",function(m){t.eBV(a);const g=t.XpG();return t.Njj(g.changeMediaType(m))}),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s()(),t.DNE(6,M,5,3,"ng-container",46),t.k0s()}if(2&o){const a=t.XpG();t.R7$(2),t.Y8G("value",0),t.R7$(2),t.JRh(t.bMT(5,3,"All")),t.R7$(2),t.Y8G("ngForOf",a.v_mediatypes)}}function b(o,p){if(1&o){const a=t.RV6();t.qex(0),t.j41(1,"button",49),t.bIt("click",function(){const m=t.eBV(a).$implicit,g=t.XpG(2);return t.Njj(g.applyFilterTags({tags_id:m.tags_id,tags_key:m.tags_key}))}),t.EFF(2),t.k0s(),t.bVm()}if(2&o){const a=p.$implicit,l=t.XpG(2);t.R7$(),t.HbH(a.tags_id==l.filter.tags_id?"btn-warning":"btn-outline-secondary"),t.BMQ("data-id",a.tags_id),t.R7$(),t.JRh(a.tags_key)}}function i(o,p){if(1&o&&(t.j41(0,"div",48),t.DNE(1,b,3,4,"ng-container",46),t.k0s()),2&o){const a=t.XpG();t.R7$(),t.Y8G("ngForOf",a.filterTags(a.tagss))}}function d(o,p){if(1&o&&t.eu8(0,52),2&o){const a=p.$implicit;t.XpG(2);const l=t.sdS(34);t.Y8G("ngTemplateOutlet",l)("ngTemplateOutletContext",t.eq3(2,$,a))}}function _(o,p){if(1&o&&(t.j41(0,"div",50)(1,"ion-list",44)(2,"ul"),t.DNE(3,d,1,4,"ng-container",51),t.k0s()()()),2&o){const a=t.XpG();t.R7$(3),t.Y8G("ngForOf",a.filterTopic(a.topics))}}function h(o,p){1&o&&t.nrm(0,"ion-icon",55)}function O(o,p){1&o&&t.nrm(0,"ion-spinner",57)}function T(o,p){1&o&&t.nrm(0,"ion-icon",58)}function R(o,p){if(1&o&&t.eu8(0,52),2&o){const a=p.$implicit;t.XpG(3);const l=t.sdS(34);t.Y8G("ngTemplateOutlet",l)("ngTemplateOutletContext",t.eq3(2,$,a))}}function K(o,p){if(1&o&&(t.j41(0,"ul"),t.DNE(1,R,1,4,"ng-container",51),t.k0s()),2&o){const a=t.XpG().$implicit,l=t.XpG();t.R7$(),t.Y8G("ngForOf",l.filterTopic(l.topics,a.topic_id))}}function w(o,p){if(1&o){const a=t.RV6();t.j41(0,"li")(1,"ion-item",53),t.bIt("click",function(){const m=t.eBV(a).$implicit,g=t.XpG();return t.Njj(g.applyFilterTopic({topic_id:m.topic_id,topic_title:m.topic_title}))}),t.j41(2,"ion-button",54),t.bIt("click",function(m){const g=t.eBV(a).$implicit,C=t.XpG();return t.Njj(C.expandTopic(m,g.topic_id,g.isexpanded))}),t.DNE(3,h,1,0,"ion-icon",55)(4,O,1,0)(5,T,1,0),t.k0s(),t.j41(6,"ion-label",56),t.EFF(7),t.k0s()(),t.DNE(8,K,2,1,"ul"),t.k0s()}if(2&o){const a=p.$implicit,l=t.XpG();t.R7$(),t.HbH(a.topic_id==l.filter.topic_id?"actived":""),t.R7$(),t.BMQ("style",a.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.vxM(3,a.isexpanded?a.loading?4:5:3),t.R7$(3),t.Y8G("title",a.topic_title),t.R7$(),t.JRh(a.topic_title),t.R7$(),t.vxM(8,a.isexpanded?8:-1)}}function X(o,p){if(1&o&&t.eu8(0,52),2&o){const a=p.$implicit;t.XpG(2);const l=t.sdS(38);t.Y8G("ngTemplateOutlet",l)("ngTemplateOutletContext",t.eq3(2,$,a))}}function L(o,p){if(1&o&&(t.j41(0,"div",59)(1,"ion-list",44)(2,"ul"),t.DNE(3,X,1,4,"ng-container",51),t.k0s()()()),2&o){const a=t.XpG();t.R7$(3),t.Y8G("ngForOf",a.filterCategory(a.categorys))}}function q(o,p){1&o&&t.nrm(0,"ion-icon",55)}function k(o,p){1&o&&t.nrm(0,"ion-spinner",57)}function G(o,p){1&o&&t.nrm(0,"ion-icon",58)}function P(o,p){if(1&o&&t.eu8(0,52),2&o){const a=p.$implicit;t.XpG(3);const l=t.sdS(38);t.Y8G("ngTemplateOutlet",l)("ngTemplateOutletContext",t.eq3(2,$,a))}}function c(o,p){if(1&o&&(t.j41(0,"ul"),t.DNE(1,P,1,4,"ng-container",51),t.k0s()),2&o){const a=t.XpG().$implicit,l=t.XpG();t.R7$(),t.Y8G("ngForOf",l.filterCategory(l.categorys,a.category_id))}}function r(o,p){if(1&o){const a=t.RV6();t.j41(0,"li")(1,"ion-item",53),t.bIt("click",function(){const m=t.eBV(a).$implicit,g=t.XpG();return t.Njj(g.applyFilterCategory({category_id:m.category_id,category_title:m.category_title}))}),t.j41(2,"ion-button",54),t.bIt("click",function(m){const g=t.eBV(a).$implicit,C=t.XpG();return t.Njj(C.expandCategory(m,g.category_id,g.isexpanded))}),t.DNE(3,q,1,0,"ion-icon",55)(4,k,1,0)(5,G,1,0),t.k0s(),t.j41(6,"ion-label",56),t.EFF(7),t.k0s()(),t.DNE(8,c,2,1,"ul"),t.k0s()}if(2&o){const a=p.$implicit,l=t.XpG();t.R7$(),t.HbH(a.category_id==l.filter.category_id?"actived":""),t.R7$(),t.BMQ("style",a.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.vxM(3,a.isexpanded?a.loading?4:5:3),t.R7$(3),t.Y8G("title",a.category_title),t.R7$(),t.JRh(a.category_title),t.R7$(),t.vxM(8,a.isexpanded?8:-1)}}let f=(()=>{var o;class p{constructor(l){this.modalController=l,this.filter={},this.topics=[],this.categorys=[],this.tagss=[],this.v_mediatypes=[],this.accordionValue=[]}ngOnInit(){var l;null!==(l=this.filter.v_mediatypes)&&void 0!==l&&l.length&&this.accordionValue.push("accordion-mediatype"),this.filter.tags_id&&this.accordionValue.push("accordion-tags"),this.filter.topic_id&&this.accordionValue.push("accordion-topic"),this.filter.category_id&&this.accordionValue.push("accordion-category"),this.accordionValue.length||this.accordionValue.push("accordion-mediatype"),(0,V.$)({params:{lookup_key:"v_mediatype"},callback:m=>{this.v_mediatypes=m||[]}}),this.refreshDataTags(),this.refreshDataTopic(),this.refreshDataCategory()}clean(){this.filter={}}close(){this.modalController.dismiss(null,"cancel")}apply(){this.modalController.dismiss(this.filter,"confirm")}counter(){let l=0;return this.filter.search&&(l+=1),this.filter.topic_id&&(l+=1),this.filter.category_id&&(l+=1),this.filter.tags_id&&(l+=1),this.filter.v_mediatypes&&(l+=this.filter.v_mediatypes.length),l}changeMediaType(l){let{value:m,checked:g}=l.detail;if(0==m)return void(this.filter.v_mediatypes=g?this.v_mediatypes.map(J=>({v_mediatype:J.lookup_value,v_mediatype_title:J.lookup_title})):[]);let C=this.v_mediatypes.find(J=>J.lookup_value==m);var j;g?this.filter.v_mediatypes?this.filter.v_mediatypes.find(J=>J.v_mediatype==m)||this.filter.v_mediatypes.push({v_mediatype:null==C?void 0:C.lookup_value,v_mediatype_title:null==C?void 0:C.lookup_title}):this.filter.v_mediatypes=[{v_mediatype:null==C?void 0:C.lookup_value,v_mediatype_title:null==C?void 0:C.lookup_title}]:this.filter.v_mediatypes=null===(j=this.filter.v_mediatypes)||void 0===j?void 0:j.filter(J=>J.v_mediatype!=m)}checkedMediaType(l){var m;return!(null===(m=this.filter.v_mediatypes)||void 0===m||!m.find(g=>g.v_mediatype==l))}clearSearch(l){Object.assign(this.filter,{search:null})}clearFilterMediaType(l,m){this.changeMediaType({detail:{value:m,checked:!1}})}refreshDataTags(l){this.loadTags(void 0,l,!0)}loadTags(l,m,g){var C;(0,W.Wn)({params:{userid:null===(C=this.user)||void 0===C?void 0:C.userid,tags_pid:l,sortfield:"createddate",sorttype:"asc",page:1,limit:-1},callback:j=>{var J,nt;this.tagss=g?null!==(J=null==j?void 0:j.tags)&&void 0!==J?J:[]:this.tagss.concat(null!==(nt=null==j?void 0:j.tags)&&void 0!==nt?nt:[]),m&&m()}})}filterTags(l,m){return l.filter(m?g=>g.tags_pid==m:g=>null==g.tags_pid||0==g.tags_pid)}expandTags(l,m,g){l.preventDefault(),l.stopPropagation(),this.tagss.filter(C=>C.tags_id==m).forEach(C=>{C.isexpanded=!g,C.isloadedchild||(C.isloadedchild=!0,this.loadTags(C.tags_id))})}applyFilterTags(l){Object.assign(this.filter,this.filter.tags_id==l.tags_id?{tags_id:null,tags_key:null}:l)}clearFilterTags(l){Object.assign(this.filter,{tags_id:null,tags_key:null})}refreshDataTopic(l){this.loadTopic(void 0,l,!0)}loadTopic(l,m,g){var C;(0,u.At)({loading:j=>{l&&(l.loading=j)},params:{userid:null===(C=this.user)||void 0===C?void 0:C.userid,topic_pid:null==l?void 0:l.topic_id,page:1,limit:-1},callback:j=>{this.topics=g?null!=j?j:[]:this.topics.concat(null!=j?j:[]),m&&m()}})}filterTopic(l,m){return l.filter(m?g=>g.topic_pid==m:g=>null==g.topic_pid||0==g.topic_pid)}expandTopic(l,m,g){l.preventDefault(),l.stopPropagation(),this.topics.filter(C=>C.topic_id==m).forEach(C=>{C.isexpanded=!g,C.isloadedchild||(C.isloadedchild=!0,this.loadTopic(C))})}applyFilterTopic(l){Object.assign(this.filter,this.filter.topic_id==l.topic_id?{topic_id:null,topic_title:null}:l)}clearFilterTopic(l){Object.assign(this.filter,{topic_id:null,topic_title:null})}refreshDataCategory(l){this.loadCategory(void 0,l,!0)}loadCategory(l,m,g){var C;(0,y.BI)({loading:j=>{l&&(l.loading=j)},params:{userid:null===(C=this.user)||void 0===C?void 0:C.userid,category_pid:null==l?void 0:l.category_pid,page:1,limit:-1},callback:j=>{this.categorys=g?null!=j?j:[]:this.categorys.concat(null!=j?j:[]),m&&m()}})}filterCategory(l,m){return l.filter(m?g=>g.category_pid==m:g=>null==g.category_pid||0==g.category_pid)}expandCategory(l,m,g){l.preventDefault(),l.stopPropagation(),this.categorys.filter(C=>C.category_id==m).forEach(C=>{C.isexpanded=!g,C.isloadedchild||(C.isloadedchild=!0,this.loadCategory(C))})}applyFilterCategory(l){Object.assign(this.filter,this.filter.category_id==l.category_id?{category_id:null,category_title:null}:l)}clearFilterCategory(l){Object.assign(this.filter,{category_id:null,category_title:null})}}return(o=p).\u0275fac=function(l){return new(l||o)(t.rXU(s.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-modal-media-filter"]],inputs:{user:"user",filter:"filter"},decls:39,vars:16,consts:[["filtered",""],["mediatype",""],["tags",""],["topic",""],["topicNode",""],["category",""],["categoryNode",""],["mode","md"],["slot","end","color","dark",1,"btn-clean",3,"click"],["slot","end"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"m-0"],[1,"ion-no-padding"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"multiple","value"],["value","accordion-mediatype",4,"ngIf"],["value","accordion-tags",4,"ngIf"],["value","accordion-topic",4,"ngIf"],["value","accordion-category",4,"ngIf"],["lines","none","color","tertiary","button","","detail","false",3,"click"],["slot","start"],["slot","end","src","../../../assets/icon-svg/arrow-right.svg"],[3,"ngTemplateOutlet"],["value","accordion-mediatype"],["slot","header"],["slot","content"],["value","accordion-tags"],["value","accordion-topic"],["value","accordion-category"],[1,"p-3"],[1,"mb-2"],[1,"list-filter","clearfix"],["class","item-filter float-left",4,"ngIf"],["class","item-filter float-left",4,"ngFor","ngForOf"],[1,"item-filter","float-left"],[1,"d-flex","align-items-center"],["src","../../../assets/icon-svg/dashboard/topic.svg"],[3,"click"],["name","close-outline"],["src","../../../assets/icon-svg/dashboard/category.svg"],["src","../../../assets/icon-svg/dashboard/tag.svg"],["name","ticket-outline"],["name","search-outline"],["lines","none"],["mode","md","slot","start",3,"ionChange","value"],[4,"ngFor","ngForOf"],["mode","md","slot","start",3,"ionChange","value","checked"],[1,"list-tags","px-3","pt-2","mb-3"],[1,"btn",3,"click"],[1,"tree-topic"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline"],[3,"title"],["color","dark"],["name","caret-down-outline"],[1,"tree-category"]],template:function(l,m){if(1&l){const g=t.RV6();t.j41(0,"ion-header",7)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-label",8),t.bIt("click",function(){return t.eBV(g),t.Njj(m.clean())}),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"ion-buttons",9)(9,"ion-button",10),t.bIt("click",function(){return t.eBV(g),t.Njj(m.close())}),t.nrm(10,"ion-icon",11),t.k0s()()()(),t.nrm(11,"hr",12),t.j41(12,"ion-content",13),t.DNE(13,A,1,1,"ng-container",14),t.j41(14,"ion-accordion-group",15),t.DNE(15,n,7,4,"ion-accordion",16)(16,x,7,4,"ion-accordion",17)(17,B,7,4,"ion-accordion",18)(18,N,7,4,"ion-accordion",19),t.k0s()(),t.j41(19,"ion-footer")(20,"ion-item",20),t.bIt("click",function(){return t.eBV(g),t.Njj(m.apply())}),t.j41(21,"ion-label",21),t.EFF(22),t.nI1(23,"translate"),t.k0s(),t.nrm(24,"ion-icon",22),t.k0s()(),t.DNE(25,S,13,11,"ng-template",null,0,t.C5r)(27,F,7,5,"ng-template",null,1,t.C5r)(29,i,2,1,"ng-template",null,2,t.C5r)(31,_,4,1,"ng-template",null,3,t.C5r)(33,w,9,7,"ng-template",null,4,t.C5r)(35,L,4,1,"ng-template",null,5,t.C5r)(37,r,9,7,"ng-template",null,6,t.C5r)}2&l&&(t.R7$(3),t.JRh(t.bMT(4,10,"Filter")),t.R7$(3),t.JRh(t.bMT(7,12,"ClearAll")),t.R7$(7),t.Y8G("ngIf",m.filter.topic_id||m.filter.category_id||m.filter.tags_id||m.filter.v_mediatype||(null==m.filter.v_mediatypes?null:m.filter.v_mediatypes.length)||m.filter.search),t.R7$(),t.Y8G("multiple",!0)("value",m.accordionValue),t.R7$(),t.Y8G("ngIf",m.v_mediatypes.length),t.R7$(),t.Y8G("ngIf",m.tagss.length),t.R7$(),t.Y8G("ngIf",m.topics.length),t.R7$(),t.Y8G("ngIf",m.categorys.length),t.R7$(4),t.JRh(t.bMT(23,14,"Apply")))},dependencies:[I.Sq,I.bT,I.T3,s.xk,s.YH,s.Jm,s.QW,s.eY,s.W9,s.M0,s.eU,s.iq,s.uz,s.he,s.nf,s.w2,s.BC,s.ai,s.hB,E.D9],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}ion-header[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]:after{display:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:40px;margin-left:5px}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]{cursor:pointer;margin-right:1rem}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{margin:0}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 50px;text-transform:uppercase}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:27px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;line-height:20px}ion-accordion[_ngcontent-%COMP%]{font-size:14px}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{text-transform:uppercase}ion-accordion[_ngcontent-%COMP%]   [slot=content][_ngcontent-%COMP%]{padding:0}.tree-topic[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]{position:relative}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.list-filter[_ngcontent-%COMP%]   .item-filter[_ngcontent-%COMP%]{max-width:100%;height:36px;margin:4px 16px 4px 0;border-radius:18px;border:1px solid #E75969;color:#e75969}.list-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 .5rem 0 .75rem;stroke:#e75969}.list-filter[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{max-width:72%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;margin:0 2px;border-radius:50%;line-height:0;vertical-align:middle;text-align:center;outline:none;box-shadow:none;background-color:transparent;color:#1f1f39}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;font-size:20px}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eee}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-right:1rem;display:inline-block;vertical-align:middle}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;stroke:#1abdff}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;color:#4d4f60}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:24px;vertical-align:middle;line-height:0}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#1abdff}.list-tags[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;min-height:40px;padding:0 1rem;margin:.25rem .5rem .25rem 0;border-radius:8px;line-height:0;font-size:1rem;vertical-align:middle;text-align:center;outline:none;box-shadow:none!important}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]{color:var(--color-active, #333);background-color:var(--background-active, #E5F4FF);border-color:var(--background-active, #E5F4FF)}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]:hover{color:#000}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{padding:0;color:#000;background-color:#ececec;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ddd}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.list-tags[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;width:120px;vertical-align:middle;color:#333;background-color:#ececec;border-color:#ececec;outline:none;box-shadow:none!important}"]}),p})()},3355:(tt,Y,v)=>{v.d(Y,{j:()=>u});var y=v(4438),V=v(6637),W=v(31);let u=(()=>{var t;class s{constructor(E){this.popoverController=E,this.message={TitleConfirm:"",TextConfirm:"",TextCancel:""}}ngOnInit(){}cancel(){this.popoverController.dismiss(this.selectedId,"cancel")}confirm(){this.popoverController.dismiss(this.selectedId,"confirm")}}return(t=s).\u0275fac=function(E){return new(E||t)(y.rXU(V.IE))},t.\u0275cmp=y.VBU({type:t,selectors:[["app-popover-confirm"]],inputs:{selectedId:"selectedId",message:"message"},decls:12,vars:9,consts:[[1,"menu-confirm"],[1,"text-center","p-3"],["role","group",1,"w-100","btn-group","btn-group-sm"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(E,D){1&E&&(y.j41(0,"div",0)(1,"div",1)(2,"small"),y.EFF(3),y.nI1(4,"translate"),y.k0s()(),y.j41(5,"div",2)(6,"button",3),y.bIt("click",function(){return D.cancel()}),y.EFF(7),y.nI1(8,"translate"),y.k0s(),y.j41(9,"button",4),y.bIt("click",function(){return D.confirm()}),y.EFF(10),y.nI1(11,"translate"),y.k0s()()()),2&E&&(y.R7$(3),y.JRh(y.bMT(4,3,D.message.TitleConfirm)),y.R7$(4),y.JRh(y.bMT(8,5,D.message.TextCancel)),y.R7$(3),y.JRh(y.bMT(11,7,D.message.TextConfirm)))},dependencies:[W.D9],styles:[".menu-confirm[_ngcontent-%COMP%]{border-top:3px solid #5F6CE1}"]}),s})()},3675:(tt,Y,v)=>{v.d(Y,{_:()=>b});var y=v(467),V=v(9469),W=v(2635),u=v(2313),t=v(4438),s=v(6637),I=v(177),E=v(31);const D=i=>({$implicit:i});function $(i,d){1&i&&t.eu8(0)}function A(i,d){1&i&&(t.j41(0,"ion-content")(1,"div",6)(2,"div",7),t.nrm(3,"ion-spinner",8),t.k0s()()())}function n(i,d){1&i&&t.eu8(0)}function x(i,d){if(1&i&&t.DNE(0,n,1,0,"ng-container",5),2&i){const _=t.XpG(),h=t.sdS(6),O=t.sdS(8);t.Y8G("ngIf",!(null!=_.directorys&&_.directorys.length))("ngIfThen",h)("ngIfElse",O)}}function B(i,d){1&i&&(t.j41(0,"div",9)(1,"small",10),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&i&&(t.R7$(2),t.JRh(t.bMT(3,1,"DataNotFound")))}function N(i,d){if(1&i&&t.eu8(0,13),2&i){const _=d.$implicit;t.XpG(2);const h=t.sdS(10);t.Y8G("ngTemplateOutlet",h)("ngTemplateOutletContext",t.eq3(2,D,_))}}function z(i,d){if(1&i&&(t.j41(0,"div",11)(1,"ul"),t.DNE(2,N,1,4,"ng-container",12),t.k0s()()),2&i){const _=t.XpG();t.R7$(2),t.Y8G("ngForOf",_.filterDirectory(_.directorys))}}function Q(i,d){1&i&&t.nrm(0,"ion-icon",16)}function Z(i,d){1&i&&t.nrm(0,"ion-spinner",18)}function e(i,d){1&i&&t.nrm(0,"ion-icon",19)}function U(i,d){if(1&i&&(t.j41(0,"ion-badge",20),t.EFF(1),t.k0s()),2&i){const _=t.XpG().$implicit;t.R7$(),t.JRh(_.total_board)}}function H(i,d){if(1&i&&(t.j41(0,"ion-badge",20),t.EFF(1),t.k0s()),2&i){const _=t.XpG().$implicit;t.R7$(),t.JRh(_.total_media)}}function S(i,d){if(1&i&&t.eu8(0,13),2&i){const _=d.$implicit;t.XpG(3);const h=t.sdS(10);t.Y8G("ngTemplateOutlet",h)("ngTemplateOutletContext",t.eq3(2,D,_))}}function M(i,d){if(1&i&&(t.j41(0,"ul"),t.DNE(1,S,1,4,"ng-container",12),t.k0s()),2&i){const _=t.XpG().$implicit,h=t.XpG();t.R7$(),t.Y8G("ngForOf",h.filterDirectory(h.directorys,_.directory_id))}}function F(i,d){if(1&i){const _=t.RV6();t.j41(0,"li")(1,"ion-item",14),t.bIt("click",function(){const O=t.eBV(_).$implicit,T=t.XpG();return t.Njj(T.filterChange(O.directory_id))}),t.j41(2,"ion-button",15),t.bIt("click",function(O){const T=t.eBV(_).$implicit,R=t.XpG();return t.Njj(R.expandDirectory(O,T.directory_id,T.isexpanded))}),t.DNE(3,Q,1,0,"ion-icon",16)(4,Z,1,0)(5,e,1,0),t.k0s(),t.j41(6,"ion-label"),t.EFF(7),t.k0s(),t.DNE(8,U,2,1,"ion-badge",17)(9,H,2,1,"ion-badge",17),t.k0s(),t.DNE(10,M,2,1,"ul"),t.k0s()}if(2&i){const _=d.$implicit,h=t.XpG();t.R7$(),t.BMQ("color",_.directory_id==h.selectedId?"primary":""),t.R7$(),t.BMQ("style",_.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.vxM(3,_.isexpanded?_.loading?4:5:3),t.R7$(4),t.JRh(_.directory_title),t.R7$(),t.Y8G("ngIf","board"==h.filter.for&&_.total_board),t.R7$(),t.Y8G("ngIf","media"==h.filter.for&&_.total_media),t.R7$(),t.vxM(10,_.isexpanded?10:-1)}}let b=(()=>{var i;class d{constructor(h){this.popoverController=h,this.selectedId=0,this.filter={},this.response={loading:!0},this.directorys=[]}ngOnInit(){var h=this;(0,y.A)(function*(){h.user=yield(0,W.Nk)(),h.loadDirectory()})()}loadDirectory(h){var O;(0,V.op)({loading:T=>{this.response.loading=T,h&&(h.loading=T)},params:{userid:null===(O=this.user)||void 0===O?void 0:O.userid,directory_pid:null==h?void 0:h.directory_id,isdataowner:this.filter.isdataowner,statistic:this.filter.for?u.C[this.filter.for]:null,page:1,limit:-1},callback:T=>{var R;this.directorys=this.directorys.concat(T||[]),this.selectedId&&!this.directorys.find(K=>K.directory_id==this.selectedId)&&(0,V.Ur)({params:{userid:null===(R=this.user)||void 0===R?void 0:R.userid,directory_id:this.selectedId,statistic:this.filter.for?u.C[this.filter.for]:null,page:1,limit:-1},callback:K=>{let w=K||[];this.directorys=this.directorys.concat(w),w.map(X=>X.directory_pid).filter((X,L,q)=>q.indexOf(X)==L).forEach(X=>{this.directorys.filter(L=>L.directory_id==X).forEach(L=>{L.isexpanded=!0,L.isloadedchild=!0})})}})}})}filterDirectory(h,O){return h.filter(O?T=>T.directory_pid==O:T=>null==T.directory_pid||0==T.directory_pid)}expandDirectory(h,O,T){h.preventDefault(),h.stopPropagation(),this.directorys.filter(R=>R.directory_id==O).forEach(R=>{R.isexpanded=!T,R.isloadedchild||(R.isloadedchild=!0,this.loadDirectory(R))})}filterChange(h){this.popoverController.dismiss(this.directorys.find(O=>O.directory_id==h),"confirm")}}return(i=d).\u0275fac=function(h){return new(h||i)(t.rXU(s.IE))},i.\u0275cmp=t.VBU({type:i,selectors:[["app-popover-directory"]],inputs:{selectedId:"selectedId",filter:"filter"},decls:11,vars:3,consts:[["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[4,"ngIf","ngIfThen","ngIfElse"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-directory","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline"],["color","medium",4,"ngIf"],["color","dark"],["name","caret-down-outline"],["color","medium"]],template:function(h,O){if(1&h&&t.DNE(0,$,1,0,"ng-container",5)(1,A,4,0,"ng-template",null,0,t.C5r)(3,x,1,3,"ng-template",null,1,t.C5r)(5,B,4,3,"ng-template",null,2,t.C5r)(7,z,3,1,"ng-template",null,3,t.C5r)(9,F,11,7,"ng-template",null,4,t.C5r),2&h){const T=t.sdS(2),R=t.sdS(4);t.Y8G("ngIf",!(null!=O.directorys&&O.directorys.length)&&!1!==O.response.loading)("ngIfThen",T)("ngIfElse",R)}},dependencies:[I.Sq,I.bT,I.T3,s.In,s.Jm,s.W9,s.iq,s.uz,s.he,s.w2,E.D9],styles:["ion-content[_ngcontent-%COMP%]{width:320px;max-width:100%}.menu-directory[_ngcontent-%COMP%]{width:320px;max-height:240px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),d})()},1799:(tt,Y,v)=>{v.d(Y,{M:()=>S});var y=v(467),V=v(6128),W=v(2635),u=v(4438),t=v(6637),s=v(177),I=v(31);const E=M=>({$implicit:M});function D(M,F){1&M&&u.eu8(0)}function $(M,F){1&M&&(u.j41(0,"ion-content")(1,"div",6)(2,"div",7),u.nrm(3,"ion-spinner",8),u.k0s()()())}function A(M,F){1&M&&u.eu8(0)}function n(M,F){if(1&M&&u.DNE(0,A,1,0,"ng-container",5),2&M){const b=u.XpG(),i=u.sdS(6),d=u.sdS(8);u.Y8G("ngIf",!(null!=b.tagss&&b.tagss.length))("ngIfThen",i)("ngIfElse",d)}}function x(M,F){1&M&&(u.j41(0,"div",9)(1,"small",10),u.EFF(2),u.nI1(3,"translate"),u.k0s()()),2&M&&(u.R7$(2),u.JRh(u.bMT(3,1,"DataNotFound")))}function B(M,F){if(1&M&&u.eu8(0,13),2&M){const b=F.$implicit;u.XpG(2);const i=u.sdS(10);u.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",u.eq3(2,E,b))}}function N(M,F){if(1&M&&(u.j41(0,"div",11)(1,"ul"),u.DNE(2,B,1,4,"ng-container",12),u.k0s()()),2&M){const b=u.XpG();u.R7$(2),u.Y8G("ngForOf",b.filterTags(b.tagss))}}function z(M,F){1&M&&u.nrm(0,"ion-icon",16)}function Q(M,F){1&M&&u.nrm(0,"ion-spinner",17)}function Z(M,F){1&M&&u.nrm(0,"ion-icon",18)}function e(M,F){if(1&M&&u.eu8(0,13),2&M){const b=F.$implicit;u.XpG(3);const i=u.sdS(10);u.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",u.eq3(2,E,b))}}function U(M,F){if(1&M&&(u.j41(0,"ul"),u.DNE(1,e,1,4,"ng-container",12),u.k0s()),2&M){const b=u.XpG().$implicit,i=u.XpG();u.R7$(),u.Y8G("ngForOf",i.filterTags(i.tagss,b.tags_id))}}function H(M,F){if(1&M){const b=u.RV6();u.j41(0,"li")(1,"ion-item",14),u.bIt("click",function(){const d=u.eBV(b).$implicit,_=u.XpG();return u.Njj(_.filterSelect(d.tags_id))}),u.j41(2,"ion-button",15),u.bIt("click",function(d){const _=u.eBV(b).$implicit,h=u.XpG();return u.Njj(h.expandTags(d,_.tags_id,_.isexpanded))}),u.DNE(3,z,1,0,"ion-icon",16)(4,Q,1,0)(5,Z,1,0),u.k0s(),u.j41(6,"ion-label"),u.EFF(7),u.k0s()(),u.DNE(8,U,2,1,"ul"),u.k0s()}if(2&M){const b=F.$implicit,i=u.XpG();u.R7$(),u.BMQ("color",i.selected_Arrs.includes(b.tags_key)?"primary":""),u.R7$(),u.BMQ("style",b.ishaschild?"visibility:unset":"visibility:hidden",u.$dS),u.R7$(),u.vxM(3,b.isexpanded?b.loading?4:5:3),u.R7$(4),u.JRh(b.tags_key),u.R7$(),u.vxM(8,b.isexpanded?8:-1)}}let S=(()=>{var M;class F{constructor(i){this.popoverController=i,this.selected_Arrs=[],this.response={loading:!0},this.tagss=[]}ngOnInit(){var i=this;(0,y.A)(function*(){i.user=yield(0,W.Nk)(),i.loadTags()})()}apply(){this.popoverController.dismiss(this.selected_Arrs,"confirm")}loadTags(i){var d;(0,V.Wn)({loading:_=>{this.response.loading=_,i&&(i.loading=_)},params:{userid:null===(d=this.user)||void 0===d?void 0:d.userid,tags_pid:null==i?void 0:i.tags_pid,sortfield:"createddate",sorttype:"asc",page:1,limit:-1},callback:_=>{this.tagss=this.tagss.concat((null==_?void 0:_.tags)||[])}})}filterTags(i,d){return i.filter(d?_=>_.tags_pid==d:_=>null==_.tags_pid||0==_.tags_pid)}expandTags(i,d,_){i.preventDefault(),i.stopPropagation(),this.tagss.filter(h=>h.tags_id==d).forEach(h=>{h.isexpanded=!_,h.isloadedchild||(h.isloadedchild=!0,this.loadTags(h))})}filterToggle(i){let d=this.tagss.find(_=>_.tags_id==i);null!=d&&d.tags_key&&(this.selected_Arrs.includes(d.tags_key)?this.selected_Arrs=this.selected_Arrs.filter(_=>_!=d.tags_key):this.selected_Arrs.push(d.tags_key))}filterSelect(i){let d=this.tagss.find(_=>_.tags_id==i);if(null!=d&&d.tags_key){if(this.selected_Arrs.includes(d.tags_key))return;this.selected_Arrs.push(d.tags_key),this.apply()}}}return(M=F).\u0275fac=function(i){return new(i||M)(u.rXU(t.IE))},M.\u0275cmp=u.VBU({type:M,selectors:[["app-popover-tags"]],inputs:{selected_Arrs:"selected_Arrs"},decls:11,vars:3,consts:[["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[4,"ngIf","ngIfThen","ngIfElse"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-tags","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline"],["color","dark"],["name","caret-down-outline"]],template:function(i,d){if(1&i&&u.DNE(0,D,1,0,"ng-container",5)(1,$,4,0,"ng-template",null,0,u.C5r)(3,n,1,3,"ng-template",null,1,u.C5r)(5,x,4,3,"ng-template",null,2,u.C5r)(7,N,3,1,"ng-template",null,3,u.C5r)(9,H,9,5,"ng-template",null,4,u.C5r),2&i){const _=u.sdS(2),h=u.sdS(4);u.Y8G("ngIf",!(null!=d.tagss&&d.tagss.length)&&!1!==d.response.loading)("ngIfThen",_)("ngIfElse",h)}},dependencies:[s.Sq,s.bT,s.T3,t.Jm,t.W9,t.iq,t.uz,t.he,t.w2,I.D9],styles:["ion-content[_ngcontent-%COMP%]{width:320px;max-width:100%}.menu-tags[_ngcontent-%COMP%]{width:320px;max-height:240px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),F})()}}]);