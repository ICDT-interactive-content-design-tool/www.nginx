"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6611],{8779:(he,Mt,v)=>{v.d(Mt,{$u:()=>S,IB:()=>dt,T2:()=>c,WR:()=>A,bf:()=>N,eD:()=>et,l6:()=>C,lq:()=>D,pZ:()=>T,u$:()=>E});const T={fill:"transparent",stroke:"#129bff",strokeWidth:1},E={stroke:"#0D99FF",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},et={fill:"#FFFFFF",stroke:"#0D99FF",strokeWidth:1,width:7,height:7},N={fill:"transparent",stroke:"transparent",strokeWidth:1},dt={fill:"none",stroke:"#2299F8",strokeWidth:1},C={fill:"#0D99FF",rx:4},c={fill:"#fff",alignmentBaseline:"central",textAnchor:"middle",fontSize:14},A={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},D={fill:"transparent"},S={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(he,Mt,v)=>{v.d(Mt,{$N:()=>C,An:()=>c,CS:()=>E,Kf:()=>H,Lp:()=>D,j9:()=>A,lP:()=>N,ml:()=>x,n9:()=>S,nf:()=>dt});var T=v(2492);const E=d=>{var I;return null===(I=d.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===I?void 0:I.map(b=>{let B={type:b.substring(0,1)},pt=(J=b.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?J.split(/\s/).map(gt=>(0,T.z)(parseFloat(gt),1e6)):[];var J;return pt.length&&(B.points=pt),B})},N=d=>{let I=[],b=[],B=[],pt=[];return d.forEach(J=>{switch(["M","L","C","S","Q","T"].includes(J.type)&&J.points&&J.points.forEach((ut,Gt)=>{Gt%2==0?I.push(ut):b.push(ut)}),J.type){case"A":var gt;7==(null===(gt=J.points)||void 0===gt?void 0:gt.length)&&(B.push(J.points[5]),pt.push(J.points[6]));break;case"H":var Bt;null!==(Bt=J.points)&&void 0!==Bt&&Bt.length&&(I.push(J.points[0]),B.push(J.points[0]));break;case"V":var ht;null!==(ht=J.points)&&void 0!==ht&&ht.length&&(b.push(J.points[0]),pt.push(J.points[0]));break;case"a":var V;if(7==(null===(V=J.points)||void 0===V?void 0:V.length)){let ut=I[I.length-1];I.push(ut+J.points[5]),B.push(ut+J.points[5]);let Gt=b[b.length-1];b.push(Gt+J.points[6]),pt.push(Gt+J.points[6])}break;case"h":var It;if(null!==(It=J.points)&&void 0!==It&&It.length){let ut=I[I.length-1];I.push(ut+J.points[0]),B.push(ut+J.points[0])}break;case"v":var Et;if(null!==(Et=J.points)&&void 0!==Et&&Et.length){let ut=b[b.length-1];b.push(ut+J.points[0]),pt.push(ut+J.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var Y;null===(Y=J.points)||void 0===Y||Y.forEach((ut,Gt)=>{Gt%2==0?B.push(ut):pt.push(ut)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Tt;null===(Tt=J.points)||void 0===Tt||Tt.forEach((ut,Gt)=>{if(Gt%2==0){let ne=I[I.length-1];I.push(ne+ut),B.push(ne+ut)}else{let ne=b[b.length-1];b.push(ne+ut),pt.push(ne+ut)}})}}),{minX:Math.min.apply(null,B),minY:Math.min.apply(null,pt),maxX:Math.max.apply(null,B),maxY:Math.max.apply(null,pt)}},dt=(d,I)=>I.map(b=>{let B=[];switch(b.type){case"a":var pt;7==(null===(pt=b.points)||void 0===pt?void 0:pt.length)&&B.push([(0,T.z)(b.points[0]/d.width,1e6),(0,T.z)(b.points[1]/d.height,1e6),b.points[2],b.points[3],b.points[4],(0,T.z)(b.points[5]/d.width,1e6),(0,T.z)(b.points[6]/d.height,1e6)]);break;case"A":var J;7==(null===(J=b.points)||void 0===J?void 0:J.length)&&B.push([(0,T.z)(b.points[0]/d.width,1e6),(0,T.z)(b.points[1]/d.height,1e6),b.points[2],b.points[3],b.points[4],(0,T.z)((b.points[5]-d.x)/d.width,1e6),(0,T.z)((b.points[6]-d.y)/d.height,1e6)]);break;case"h":var gt;null!==(gt=b.points)&&void 0!==gt&&gt.length&&B.push([(0,T.z)(b.points[0]/d.width,1e6)]);break;case"H":var Bt;null!==(Bt=b.points)&&void 0!==Bt&&Bt.length&&B.push([(0,T.z)((b.points[0]-d.x)/d.width,1e6)]);break;case"v":var ht;null!==(ht=b.points)&&void 0!==ht&&ht.length&&B.push([(0,T.z)(b.points[0]/d.height,1e6)]);break;case"V":var V;null!==(V=b.points)&&void 0!==V&&V.length&&B.push([(0,T.z)((b.points[0]-d.y)/d.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var It;if(null!==(It=b.points)&&void 0!==It&&It.length)for(let Y=0,Tt=b.points.length-1;Y<Tt;Y+=2)B.push([(0,T.z)((b.points[Y]-d.x)/d.width,1e6),(0,T.z)((b.points[Y+1]-d.y)/d.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var Et;if(null!==(Et=b.points)&&void 0!==Et&&Et.length)for(let Y=0,Tt=b.points.length-1;Y<Tt;Y+=2)B.push([(0,T.z)(b.points[Y]/d.width,1e6),(0,T.z)(b.points[Y+1]/d.height,1e6)])}return B.length?{type:b.type,ratios:B}:{type:b.type}}),C=(d,I)=>I.map(b=>{switch(b.type){case"a":var B,pt;return`${b.type}${null!==(B=null===(pt=b.ratios)||void 0===pt||null===(pt=pt.map(Kt=>{var Dt,wt,M,W,s,tt,_t;return[(0,T.z)(d.width*(null!==(Dt=Kt[0])&&void 0!==Dt?Dt:0),1e6),(0,T.z)(d.height*(null!==(wt=Kt[1])&&void 0!==wt?wt:0),1e6),null!==(M=Kt[2])&&void 0!==M?M:0,null!==(W=Kt[3])&&void 0!==W?W:0,null!==(s=Kt[4])&&void 0!==s?s:0,(0,T.z)(d.width*(null!==(tt=Kt[5])&&void 0!==tt?tt:0),1e6),(0,T.z)(d.height*(null!==(_t=Kt[6])&&void 0!==_t?_t:0),1e6)]}))||void 0===pt||null===(pt=pt.map(Kt=>Kt.join(" ")))||void 0===pt?void 0:pt.join(" "))&&void 0!==B?B:""}`;case"A":var J,gt;return`${b.type}${null!==(J=null===(gt=b.ratios)||void 0===gt||null===(gt=gt.map(Kt=>{var Dt,wt,M,W,s,tt,_t;return[(0,T.z)(d.width*(null!==(Dt=Kt[0])&&void 0!==Dt?Dt:0),1e6),(0,T.z)(d.height*(null!==(wt=Kt[1])&&void 0!==wt?wt:0),1e6),null!==(M=Kt[2])&&void 0!==M?M:0,null!==(W=Kt[3])&&void 0!==W?W:0,null!==(s=Kt[4])&&void 0!==s?s:0,(0,T.z)(d.x+d.width*(null!==(tt=Kt[5])&&void 0!==tt?tt:0),1e6),(0,T.z)(d.y+d.height*(null!==(_t=Kt[6])&&void 0!==_t?_t:0),1e6)]}))||void 0===gt||null===(gt=gt.map(Kt=>Kt.join(" ")))||void 0===gt?void 0:gt.join(" "))&&void 0!==J?J:""}`;case"h":var Bt,ht;return`${b.type}${null!==(Bt=null===(ht=b.ratios)||void 0===ht||null===(ht=ht.map(Kt=>{var Dt;return(0,T.z)(d.width*(null!==(Dt=Kt[0])&&void 0!==Dt?Dt:0),1e6)}))||void 0===ht?void 0:ht.join(" "))&&void 0!==Bt?Bt:""}`;case"H":var V,It;return`${b.type}${null!==(V=null===(It=b.ratios)||void 0===It||null===(It=It.map(Kt=>{var Dt;return(0,T.z)(d.x+d.width*(null!==(Dt=Kt[0])&&void 0!==Dt?Dt:0),1e6)}))||void 0===It?void 0:It.join(" "))&&void 0!==V?V:""}`;case"v":var Et,Y;return`${b.type}${null!==(Et=null===(Y=b.ratios)||void 0===Y||null===(Y=Y.map(Kt=>{var Dt;return(0,T.z)(d.height*(null!==(Dt=Kt[0])&&void 0!==Dt?Dt:0),1e6)}))||void 0===Y?void 0:Y.join(" "))&&void 0!==Et?Et:""}`;case"V":var Tt,ut;return`${b.type}${null!==(Tt=null===(ut=b.ratios)||void 0===ut||null===(ut=ut.map(Kt=>{var Dt;return(0,T.z)(d.y+d.height*(null!==(Dt=Kt[0])&&void 0!==Dt?Dt:0),1e6)}))||void 0===ut?void 0:ut.join(" "))&&void 0!==Tt?Tt:""}`;case"z":case"Z":return b.type;case"M":case"L":case"C":case"S":case"Q":case"T":var Gt,ne;return`${b.type}${null!==(Gt=null===(ne=b.ratios)||void 0===ne||null===(ne=ne.map(Kt=>{var Dt,wt;return[(0,T.z)(d.x+d.width*(null!==(Dt=Kt[0])&&void 0!==Dt?Dt:0),1e6),(0,T.z)(d.y+d.height*(null!==(wt=Kt[1])&&void 0!==wt?wt:0),1e6)]}))||void 0===ne||null===(ne=ne.map(Kt=>Kt.join(" ")))||void 0===ne?void 0:ne.join(" "))&&void 0!==Gt?Gt:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var q,Ct;return`${b.type}${null!==(q=null===(Ct=b.ratios)||void 0===Ct||null===(Ct=Ct.map(Kt=>{var Dt,wt;return[(0,T.z)(d.width*(null!==(Dt=Kt[0])&&void 0!==Dt?Dt:0),1e6),(0,T.z)(d.height*(null!==(wt=Kt[1])&&void 0!==wt?wt:0),1e6)]}))||void 0===Ct||null===(Ct=Ct.map(Kt=>Kt.join(" ")))||void 0===Ct?void 0:Ct.join(" "))&&void 0!==q?q:""}`;default:return""}}).join(""),c=d=>{return(I=d.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?I.split(/\s/).map(b=>parseFloat(b)):[];var I},A=d=>{let I=[],b=[];return d.forEach((B,pt)=>{pt%2==0?I.push(B):b.push(B)}),{minX:Math.min.apply(null,I),minY:Math.min.apply(null,b),maxX:Math.max.apply(null,I),maxY:Math.max.apply(null,b)}},D=(d,I)=>{let b=[];for(let B=0,pt=I.length-1;B<pt;B+=2)b.push([(I[B]-d.x)/d.width,(I[B+1]-d.y)/d.height]);return b},S=(d,I)=>I.map(b=>[(0,T.z)(d.x+d.width*b[0],1e6),(0,T.z)(d.y+d.height*b[1],1e6)]).map(b=>b.join(" ")).join(" "),x=(d,I)=>{let b=w(I);if(b){let B=new window.Snap.Matrix(b.a,b.b,b.c,b.d,b.e,b.f);if(B){let{dx:pt,dy:J,rotate:gt,scalex:Bt,scaley:ht}=B.split();return{x:d.x+pt,y:d.y+J,dx:pt,dy:J,rotate:gt,scalex:Bt,scaley:ht}}return{x:Z(d.x,d.y,b),y:lt(d.x,d.y,b)}}return d},w=d=>{let I=d.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(b=>(0,T.z)(parseFloat(b),1e6));if(6==I.length)return{a:I[0],b:I[1],c:I[2],d:I[3],e:I[4],f:I[5]}},H=(d,I)=>{let b=w(I);return b?window.Snap.path.map(d,new window.Snap.Matrix(b.a,b.b,b.c,b.d,b.e,b.f)).toString():d},Z=function(d,I,b){return(0,T.z)(d*b.a+I*b.c+b.e,10)},lt=function(d,I,b){return(0,T.z)(d*b.b+I*b.d+b.f,10)}},8047:(he,Mt,v)=>{v.d(Mt,{d:()=>T});const T=E=>{let et=[];return[/font-family:([a-zA-Z-_' ]+)/g,/"fontFamily":"([a-zA-Z-_' ]+)"/g].forEach(N=>{var dt,C;et=[...et,...null!==(dt=null===(C=E.replace(/&quot;/g,"'").match(N))||void 0===C?void 0:C.filter((c,A,D)=>D.indexOf(c)==A).map(c=>c.replace(N,"$1").replace(/[^a-zA-Z-_ ]/g,"").trim()).filter((c,A,D)=>c&&D.indexOf(c)==A))&&void 0!==dt?dt:[]]}),et.filter((N,dt,C)=>C.indexOf(N)==dt)}},2837:(he,Mt,v)=>{v.d(Mt,{v:()=>lt,U:()=>H});var T=v(6611),E=v(1999),et=v(2492),N=/^#[a-fA-F0-9]+$/i,dt=/^rgb\((\d+),(\d+),(\d+)\)$/i,C=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const c=d=>{let I=null,b=null;if(d)if("transparent"==d)I="#000000",b=0;else if(d.match(N))I=d;else{let B=(d=d.replace(/\s+/g,"")).match(C);if(B)I="#"+(256|B[1]).toString(16).slice(1)+(256|B[2]).toString(16).slice(1)+(256|B[3]).toString(16).slice(1),b=(0,et.z)(parseFloat(B[4]),100);else{let pt=d.match(dt);pt&&(I="#"+(256|pt[1]).toString(16).slice(1)+(256|pt[2]).toString(16).slice(1)+(256|pt[3]).toString(16).slice(1))}}return{hex:I,alpha:b}};var A=v(4896),D=v(8338);const H=d=>Z(null==d?void 0:d.url,null==d?void 0:d.path,null==d?void 0:d.src,null==d?void 0:d.name);var Z=(d,I,b,B)=>{var pt,J;let gt,Bt,ht,V;var It,Et;return d&&(gt=d.replace(/\\/g,"/")),I&&(Bt=I.replace(/\\/g,"/")),b&&(ht=b.replace(/\\/g,"/")),Bt&&!gt&&(gt=(null===(It=T.L.config)||void 0===It?void 0:It.readfileuploadurl)+Bt),!ht||Bt||gt||(Bt=ht.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),gt=(null===(Et=T.L.config)||void 0===Et?void 0:Et.readfileuploadurl)+Bt),V=B||(null!==(pt=gt)&&void 0!==pt?pt:"").split("/").pop()||(null!==(J=Bt)&&void 0!==J?J:"").split("/").pop()||"",{url:gt,path:Bt,name:V}};const lt=d=>{let I={x:0,y:0,width:d.screen.w,height:d.screen.h},b=[];return d.data.forEach((B,pt)=>{var J,gt;let Bt={id:"number"==typeof B.id?B.id:T.L.data.newSlideId,code:null===(J=B.id)||void 0===J?void 0:J.toString(),name:"string"==typeof B.id?B.id:`Trang ${pt+1}`,svg:{viewBox:I,nodes:[]},test:(ht=B.test2,ht?(ht.audiotrue&&(ht.audiotrue=H({path:ht.audiotrue.path})),ht.audiofalse&&(ht.audiofalse=H({path:ht.audiofalse.path})),ht.effecttrue&&(ht.effecttrue=H({path:ht.effecttrue.path})),ht.effectfalse&&(ht.effectfalse=H({path:ht.effectfalse.path})),ht.icontrue&&(ht.icontrue=H({path:ht.icontrue.path})),ht.iconfalse&&(ht.iconfalse=H({path:ht.iconfalse.path})),ht):{})};var ht;B.background&&Bt.svg&&(Bt.svg.background=function(d){return d&&(null!==d.match(/#([a-zA-Z0-9]+)/)||null!==d.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==d.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(B.background)?{color:B.background}:function(d){return d&&null!==d.match(/data:[^;]+;base64,/)}(B.background)?{base64:B.background}:function(d){return d&&null!==d.match(/http(s)?:\/\//)}(B.background)?Z(B.background):Z(void 0,B.background)),jQuery(null!==(gt=B.svg)&&void 0!==gt?gt:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((ht,V)=>{var It,Et;let Y=jQuery(V).parents(".indexs"),Tt=(q=Y.attr("data-index"))?parseInt(q):0,ut=(q=>Tt&&q?parseInt(q):0)(Y.attr("data-time")),Gt=null!==(It=V.getAttribute("id"))&&void 0!==It?It:(1e9*Math.random()).toFixed(),ne={id:parseInt(Gt),code:`${V.nodeName}-${Gt}`,name:V.nodeName,idx:Tt,time:ut,type:(()=>{switch(V.nodeName){case"polygon":return E.h.POLYGON;case"path":return E.h.PATH;case"circle":return E.h.CIRCLE;case"ellipse":return E.h.ELLIPSE;case"line":return E.h.LINE;case"rect":return E.h.RECT;case"foreignObject":return E.h.FOREIGNOBJECT}return 0})(),size:(q=>{let Ct={},Kt=0,Dt=0,wt=0,M=0,W=null,s=null,tt=parseFloat((null===(q=V.getAttribute("transform"))||void 0===q?void 0:q.replace("rotate(","").replace(")",""))||"0")||null;switch(V.nodeName){case"polygon":{var _t,Lt;let jt=[],Ft=[],Wt=999999999,Vt=999999999,re=0,Rt=0;W=JSON.parse(V.getAttribute("ratios")||"[]"),s=null!==(_t=null===(Lt=V.getAttribute("points"))||void 0===Lt?void 0:Lt.split(",").map(function(st){return st.split(" ").map(function(Yt){return parseFloat(Yt)})}))&&void 0!==_t?_t:[],s.forEach(function(st){jt.push(st[0]),Ft.push(st[1])}),Wt=Math.min.apply(null,jt),Vt=Math.min.apply(null,Ft),re=Math.max.apply(null,jt),Rt=Math.max.apply(null,Ft),Kt=Wt,Dt=Vt,wt=re-Kt,M=Rt-Dt;break}case"path":{let jt=V.getAttribute("d");if(jt){let Ft=(0,A.CS)(jt),{minX:Wt,minY:Vt,maxX:re,maxY:Rt}=(0,A.lP)(Ft);Kt=Wt,Dt=Vt,wt=re-Kt||1,M=Rt-Dt||1,Object.assign(Ct,{ratioMaps:(0,A.nf)({x:Kt,y:Dt,width:wt,height:M},Ft)})}break}case"circle":{let jt=parseFloat(V.getAttribute("cx")||"0"),Ft=parseFloat(V.getAttribute("cy")||"0"),Wt=parseFloat(V.getAttribute("r")||"0");Kt=jt-Wt,Dt=Ft-Wt,wt=2*Wt,M=2*Wt;break}case"ellipse":{let jt=parseFloat(V.getAttribute("cx")||"0"),Ft=parseFloat(V.getAttribute("cy")||"0"),Wt=parseFloat(V.getAttribute("rx")||"0"),Vt=parseFloat(V.getAttribute("ry")||"0");Kt=jt-Wt,Dt=Ft-Vt,wt=2*Wt,M=2*Vt;break}case"line":{let jt=parseFloat(V.getAttribute("x1")||"0"),Ft=parseFloat(V.getAttribute("y1")||"0"),Wt=parseFloat(V.getAttribute("x2")||"0"),Vt=parseFloat(V.getAttribute("y2")||"0"),re=999999999,Rt=999999999,st=0,Yt=0;re=Math.min(jt,Wt),Rt=Math.min(Ft,Vt),st=Math.max(jt,Wt),Yt=Math.max(Ft,Vt),Kt=re,Dt=Rt,wt=st-Kt,M=Yt-Dt,W=[[(jt-Kt)/(wt||1),(Ft-Dt)/(M||1)],[(Wt-Kt)/(wt||1),(Vt-Dt)/(M||1)]];break}case"rect":case"foreignObject":Kt=parseFloat(V.getAttribute("x")||"0"),Dt=parseFloat(V.getAttribute("y")||"0"),wt=parseFloat(V.getAttribute("width")||"0"),M=parseFloat(V.getAttribute("height")||"0")}return Object.assign(Ct,{x:Kt,y:Dt,width:wt,height:M,ratios:W,points:s,rotate:tt})})(),attribute:(()=>{let q={};switch(V.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var Ct,Kt,Dt,wt,M,W,s,tt;let st=null!==(Ct=V.getAttribute("fill"))&&void 0!==Ct?Ct:null,Yt=null!==(Kt=V.getAttribute("stroke"))&&void 0!==Kt?Kt:null,P=null!==(Dt=parseFloat(null!==(wt=V.getAttribute("stroke-opacity"))&&void 0!==wt?wt:"1"))&&void 0!==Dt?Dt:null,h=null!==(M=parseFloat(V.getAttribute("stroke-width")||"0"))&&void 0!==M?M:null,R=null!==(W=V.getAttribute("stroke-linecap"))&&void 0!==W?W:null,nt=null!==(s=V.getAttribute("stroke-linejoin"))&&void 0!==s?s:null,rt=null!==(tt=parseFloat(V.getAttribute("stroke-dasharray")||"0"))&&void 0!==tt?tt:null;Object.assign(q,{fill:st,stroke:Yt,strokeOpacity:P,strokeWidth:h,strokeLinecap:R,strokeLinejoin:nt,strokeDasharray:rt});break}case"path":{let st=Y.get(0);if(st){var _t,Lt,jt,Ft,Wt,Vt,re,Rt;let Yt=null!==(_t=st.getAttribute("fill"))&&void 0!==_t?_t:null,P=null!==(Lt=st.getAttribute("stroke"))&&void 0!==Lt?Lt:null,h=null!==(jt=parseFloat(null!==(Ft=st.getAttribute("stroke-opacity"))&&void 0!==Ft?Ft:"1"))&&void 0!==jt?jt:null,R=null!==(Wt=parseFloat(st.getAttribute("stroke-width")||"0"))&&void 0!==Wt?Wt:null,nt=null!==(Vt=st.getAttribute("stroke-linecap"))&&void 0!==Vt?Vt:null,rt=null!==(re=st.getAttribute("stroke-linejoin"))&&void 0!==re?re:null,G=null!==(Rt=parseFloat(st.getAttribute("stroke-dasharray")||"0"))&&void 0!==Rt?Rt:null;Object.assign(q,{fill:Yt,stroke:P,strokeOpacity:h,strokeWidth:R,strokeLinecap:nt,strokeLinejoin:rt,strokeDasharray:G})}break}}return q})(),style:(()=>{let q={};switch(V.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let Dt=jQuery(V).find(".svg-container");if(Dt.length){let M=parseFloat(Dt.css("border-width")||"0")||null,W=Dt.css("border-style")||null,s=Dt.css("border-color")||null,tt=null,_t=Dt.css("background-color")||null,Lt=null;(()=>{let{hex:jt,alpha:Ft}=c(s);s=jt,tt=Ft})(),(()=>{let{hex:jt,alpha:Ft}=c(_t);_t=jt,Lt=Ft})(),Object.assign(q,{borderWidth:M,borderStyle:W,borderColor:s,borderOpacity:tt,backgroundColor:_t,backgroundOpacity:Lt})}let wt=jQuery(V).find(".svg-editor-content");if(wt.length){var Ct,Kt;let M=JSON.parse((wt.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:W,alpha:s}=c(M.TextColor);Object.assign(q,{fontFamily:null!==(Ct=M.FontFamily)&&void 0!==Ct?Ct:null,fontSize:null!==(Kt=M.FontSize)&&void 0!==Kt?Kt:null,color:W,opacity:s})}break}}return q})(),source:(()=>{let q={};switch(V.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Y.hasClass("editors")){var Ct;let Rt="div,h1,h2,h3,h4,h5,h6,p,span,strong,b,i",st=h=>{null==h||h.forEach(R=>{let nt=R.querySelectorAll(`:scope > ${Rt}`);nt.length&&st(nt),!R.querySelectorAll(":scope > *").length&&""==R.textContent&&R.remove()})},Yt=h=>{let R=null==h?void 0:h.querySelectorAll(":scope > div,h1,h2,h3,h4,h5,h6,p,strong,span");if(null!=R&&R.length){var nt;let rt=R[R.length-1];if(""==(null===(nt=rt.textContent)||void 0===nt?void 0:nt.trim())){let G=rt.querySelectorAll(":scope > *");if(G.length){let _=G[G.length-1];["br","BR"].includes(null==_?void 0:_.nodeName)&&(_.remove(),Yt(h))}else rt.remove(),Yt(h)}}};st(null===(Ct=jQuery(V).find(".svg-editor-content").get(0))||void 0===Ct?void 0:Ct.querySelectorAll(`:scope > ${Rt}`)),Yt(jQuery(V).find(".svg-editor-content").get(0));let P=jQuery(V).find(".svg-editor-content");if(P.length){var Kt;let h=P.html(),R=null!==(Kt=(null!=h?h:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Kt?Kt:[];Object.assign(q,{type:"html",html:{htmlContent:h,variableKeywords:R}})}}else if(Y.hasClass("inputs")||Y.hasClass("textareas"))Object.assign(q,{type:"input",input:{input:!!jQuery(V).find("input").length,textarea:!!jQuery(V).find("textarea").length}});else if(Y.hasClass("tests")){let Rt=jQuery(V).find(".svg-test");if(Y.hasClass("tests-truefalse")){var Dt,wt;let st=Rt.find(".svg-editor-content").html(),Yt=null!==(Dt=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Dt?Dt:[];Object.assign(q,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(wt=B.test2.truefalse)||void 0===wt?void 0:wt.includes(Gt)}},html:{htmlContent:st,variableKeywords:Yt}})}else if(Y.hasClass("tests-singlechoice")){var M,W;let st=Rt.find(".svg-editor-content").html(),Yt=null!==(M=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==M?M:[];Object.assign(q,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(W=B.test2.singlechoice)||void 0===W?void 0:W.includes(Gt)}},html:{htmlContent:st,variableKeywords:Yt}})}else if(Y.hasClass("tests-multichoice")){var s,tt;let st=Rt.find(".svg-editor-content").html(),Yt=null!==(s=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==s?s:[];Object.assign(q,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(tt=B.test2.multichoice)||void 0===tt?void 0:tt.includes(Gt)}},html:{htmlContent:st,variableKeywords:Yt}})}else if(Y.hasClass("tests-fill")){var _t,Lt;let st=Rt.find(".svg-editor-content").html(),Yt=null!==(_t=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==_t?_t:[],P=null!==(Lt=(null!=st?st:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==Lt?Lt:[];P=P.filter((h,R,nt)=>nt.indexOf(h)==R),Object.assign(q,{type:"test",test:{type:"fill",fill:P.map(h=>{var R;return{key:h,value:null===(R=B.test2.fill)||void 0===R||null===(R=R.find(nt=>nt.id==Gt))||void 0===R||null===(R=R.vals)||void 0===R?void 0:R.map(nt=>nt.text).filter(nt=>!["",null,void 0,NaN].includes(nt))}})},html:{htmlContent:st,variableKeywords:Yt,fillKeywords:P}})}else if(Y.hasClass("tests-matching")){if(Rt.hasClass("svg-test-empty"))Object.assign(q,{type:"test",test:{type:"matching-empty",matching:{key:Rt.attr("data-name")||null}}});else if(Rt.hasClass("svg-test-content")){var jt;let st=Rt.find(".svg-editor-content").html(),Yt=null!==(jt=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==jt?jt:[];Object.assign(q,{type:"test",test:{type:"matching-content",matching:{key:Rt.attr("data-name")||null}},html:{htmlContent:st,variableKeywords:Yt}})}}else if(Y.hasClass("tests-speech")){var Ft;Object.assign(q,{type:"speech",speech:{value:null===(Ft=B.test2.speech)||void 0===Ft||null===(Ft=Ft.find(st=>st.id==Gt))||void 0===Ft||null===(Ft=Ft.vals)||void 0===Ft?void 0:Ft.map(st=>st.text).filter(st=>!["",null,void 0,NaN].includes(st))}})}else if(Y.hasClass("tests-submit")){let st=jQuery(V).find(".svg-container img");Object.assign(q,{type:"test",test:{type:"submit"},image:Z(st.attr("url"),st.attr("path"),st.attr("src"))})}}else if(Y.hasClass("images")){let Rt=jQuery(V).find(".svg-editor-content img");if(Rt.length)Object.assign(q,{type:"image",image:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});else{let st=jQuery(V).find("iframe");Object.assign(q,{type:"iframe",iframe:Z(st.attr("url"),st.attr("path"),st.attr("src"))})}}else if(Y.hasClass("sounds")){let Rt=jQuery(V).find(".svg-editor-content img");Rt.length&&Object.assign(q,{type:"image",image:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))})}else if(Y.hasClass("htmls")){let Rt=jQuery(V).find("iframe");Rt.length&&Object.assign(q,{type:"iframe",iframe:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))})}else if(Y.hasClass("svgs")){let Rt=jQuery(V).find("svg");var Wt,Vt;Rt.length&&Object.assign(q,{type:"svg",svg:Object.assign(Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src")),{svgContent:null!==(Wt=null===(Vt=Rt.get(0))||void 0===Vt?void 0:Vt.outerHTML)&&void 0!==Wt?Wt:null})})}else if(Y.hasClass("medias")){let Rt=jQuery(V).find(".media-item");if(Rt.length)switch(Rt.attr("type")){case"audio":Object.assign(q,{type:"audio",audio:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});break;case"video":Object.assign(q,{type:"video",video:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});break;case"file":Object.assign(q,{type:"file",file:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});break;default:var re;Object.assign(q,{type:"link",link:{url:null!==(re=Rt.attr("url"))&&void 0!==re?re:null}})}let st=jQuery(V).find("img");st.length&&(Object.assign(q,{image:Z(st.attr("url"),st.attr("path"),st.attr("src"))}),q.type||Object.assign(q,{type:"image"}))}}return q})(),animate:(q=>{let Ct={},Kt=null===(q=B.animates)||void 0===q?void 0:q.find(Dt=>Dt.elementId==Gt);return Kt&&Object.assign(Ct,{value:Kt.value}),Ct})(),interactive:(()=>{let q={},Ct=B.actions.show.filter(Dt=>Dt.elementId==Gt&&Dt.active);Ct.length&&(q.show={},Ct.forEach(Dt=>{let{source:wt}=Dt;switch(null==wt?void 0:wt.type){case"work":var M,W,s,tt,_t;q.show.action={},Object.assign(q.show.action,{value:null!==(M=wt.value)&&void 0!==M?M:null,iteration:null!==(W=wt.iteration)&&void 0!==W?W:null,finish:null!==(s=wt.end)&&void 0!==s?s:null,time:null!==(tt=wt.time)&&void 0!==tt?tt:null,points:null!==(_t=wt.points)&&void 0!==_t?_t:null});break;case"audio":var Lt,jt,Ft;q.show.audio={},Object.assign(q.show.audio,{source:Z(null,null,wt.url),iteration:null!==(Lt=wt.iteration)&&void 0!==Lt?Lt:null,finish:null!==(jt=wt.end)&&void 0!==jt?jt:null,time:null!==(Ft=wt.time)&&void 0!==Ft?Ft:null,async:-1==wt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Wt,Vt,re,Rt,st,Yt,P,h,R,nt,rt,G,_,F,it;wt.options.includes("show")&&(q.show.triggershow={},Object.assign(q.show.triggershow,{id:null!==(Wt=parseInt(null!==(Vt=wt.id)&&void 0!==Vt?Vt:"0"))&&void 0!==Wt?Wt:null,ids:null===(re=wt.ids)||void 0===re?void 0:re.map(ft=>parseInt(ft)),async:null!==(Rt=wt.async)&&void 0!==Rt?Rt:null,time:null!==(st=wt.time)&&void 0!==st?st:null})),wt.options.includes("run")&&(q.show.triggerrun={},Object.assign(q.show.triggerrun,{id:null!==(Yt=parseInt(null!==(P=wt.id)&&void 0!==P?P:"0"))&&void 0!==Yt?Yt:null,ids:null===(h=wt.ids)||void 0===h?void 0:h.map(ft=>parseInt(ft)),async:null!==(R=wt.async)&&void 0!==R?R:null,time:null!==(nt=wt.time)&&void 0!==nt?nt:null})),wt.options.includes("hide")&&(q.show.triggerhide={},Object.assign(q.show.triggerhide,{id:null!==(rt=parseInt(null!==(G=wt.id)&&void 0!==G?G:"0"))&&void 0!==rt?rt:null,ids:null===(_=wt.ids)||void 0===_?void 0:_.map(ft=>parseInt(ft)),async:null!==(F=wt.async)&&void 0!==F?F:null,time:null!==(it=wt.time)&&void 0!==it?it:null}))}}));let Kt=B.actions.click.filter(Dt=>Dt.elementId==Gt&&Dt.active);return Kt&&(q.click={},Kt.forEach(Dt=>{let{source:wt}=Dt;switch(null==wt?void 0:wt.type){case"work":var M,W,s,tt,_t;q.click.action={},Object.assign(q.click.action,{value:null!==(M=wt.value)&&void 0!==M?M:null,iteration:null!==(W=wt.iteration)&&void 0!==W?W:null,finish:null!==(s=wt.end)&&void 0!==s?s:null,time:null!==(tt=wt.time)&&void 0!==tt?tt:null,points:null!==(_t=wt.points)&&void 0!==_t?_t:null});break;case"audio":var Lt,jt,Ft;q.click.audio={},Object.assign(q.click.audio,{source:Z(null,null,wt.url),iteration:null!==(Lt=wt.iteration)&&void 0!==Lt?Lt:null,finish:null!==(jt=wt.end)&&void 0!==jt?jt:null,time:null!==(Ft=wt.time)&&void 0!==Ft?Ft:null,async:-1==wt.iteration?"change-slide":"change-node"});break;case"video":{q.click.video={},Object.assign(q.click.video,{source:Z(wt.url,wt.path)});let{url:xt,path:bt,name:X}=Z(wt.url,wt.path);q.click.media={},Object.assign(q.click.media,{url:xt,path:bt,name:X,type:D.S.VIDEO});break}case"image":{q.click.image={},Object.assign(q.click.image,{source:Z(wt.url,wt.path)});let{url:xt,path:bt,name:X}=Z(wt.url,wt.path);q.click.media={},Object.assign(q.click.media,{url:xt,path:bt,name:X,type:D.S.IMAGE});break}case"link":{q.click.link={},Object.assign(q.click.link,{url:wt.url,target:wt.target});let{url:xt,path:bt,name:X}=Z(wt.url,wt.path);q.click.media={},Object.assign(q.click.media,{url:xt,path:bt,name:X,type:D.S.LINK});break}case"text":q.click.text={},Object.assign(q.click.text,{content:wt.content});break;case"node":case"node2":var Wt,Vt,re,Rt,st,Yt,P,h,R,nt,rt,G,_,F,it;wt.options.includes("show")&&(q.click.triggershow={},Object.assign(q.click.triggershow,{id:null!==(Wt=parseInt(null!==(Vt=wt.id)&&void 0!==Vt?Vt:"0"))&&void 0!==Wt?Wt:null,ids:null===(re=wt.ids)||void 0===re?void 0:re.map(xt=>parseInt(xt)),async:null!==(Rt=wt.async)&&void 0!==Rt?Rt:null,time:null!==(st=wt.time)&&void 0!==st?st:null})),wt.options.includes("run")&&(q.click.triggerrun={},Object.assign(q.click.triggerrun,{id:null!==(Yt=parseInt(null!==(P=wt.id)&&void 0!==P?P:"0"))&&void 0!==Yt?Yt:null,ids:null===(h=wt.ids)||void 0===h?void 0:h.map(xt=>parseInt(xt)),async:null!==(R=wt.async)&&void 0!==R?R:null,time:null!==(nt=wt.time)&&void 0!==nt?nt:null})),wt.options.includes("hide")&&(q.click.triggerhide={},Object.assign(q.click.triggerhide,{id:null!==(rt=parseInt(null!==(G=wt.id)&&void 0!==G?G:"0"))&&void 0!==rt?rt:null,ids:null===(_=wt.ids)||void 0===_?void 0:_.map(xt=>parseInt(xt)),async:null!==(F=wt.async)&&void 0!==F?F:null,time:null!==(it=wt.time)&&void 0!==it?it:null}));break;case"slide":var ft;q.click.slide={},Object.assign(q.click.slide,{id:parseInt(null!==(ft=wt.id)&&void 0!==ft?ft:"0")||wt.num||null,code:wt.id})}})),q})(),variable:(q=>{let Ct={};var Kt;V.getAttribute("data-variable")&&(Ct.input={},Object.assign(Ct.input,{variable:null!==(Kt=V.getAttribute("data-variable"))&&void 0!==Kt?Kt:null}));let Dt=null===(q=B.nodes)||void 0===q||null===(q=q.find(tt=>tt.id==Gt))||void 0===q?void 0:q.variable;var wt,M,W,s;return Dt&&(Ct.click={},Object.assign(Ct.click,{variable:null!==(wt=Dt.variable)&&void 0!==wt?wt:null,operator:null!==(M=Dt.operator)&&void 0!==M?M:null,valuetype:null!==(W=Dt.valuetype)&&void 0!==W?W:null,value:null!==(s=Dt.value)&&void 0!==s?s:null})),Ct})()};var q;null===(Et=Bt.svg)||void 0===Et||Et.nodes.push(ne)}),b.push(Bt)}),{screen:{width:d.screen.w,height:d.screen.h},data:{slides:b},variable:d.variable,fonts:[]}}},6195:(he,Mt,v)=>{v.d(Mt,{A9:()=>D,IB:()=>S,_4:()=>A,_5:()=>dt,ar:()=>C,yW:()=>c});var T=v(467),E=v(119);E.config({driver:[E.INDEXEDDB,E.LOCALSTORAGE,E.WEBSQL],name:"_localDataDB",version:1});const N={create:(x=(0,T.A)(function*(){return E}),function(){return x.apply(this,arguments)}),get:function(){var x=(0,T.A)(function*(w){return E.getItem(w)});return function(H){return x.apply(this,arguments)}}(),set:function(){var x=(0,T.A)(function*(w,H){return E.setItem(w,H)});return function(H,Z){return x.apply(this,arguments)}}()},dt=function(){var x=(0,T.A)(function*(w){yield N.create();var H=(yield N.get("icdt-data"))||[];"function"==typeof w.callback&&w.callback(H)});return function(H){return x.apply(this,arguments)}}(),C=function(){var x=(0,T.A)(function*(w){yield N.create(),w.params=w.params||{};try{yield N.set("icdt-data",w.params),"function"==typeof w.callback&&w.callback(w.params)}catch(H){"function"==typeof w.callback&&w.callback(null),console.error(H)}});return function(H){return x.apply(this,arguments)}}(),c=function(){var x=(0,T.A)(function*(w){yield N.create();try{var H=(yield N.get("icdt-config"))||{};"function"==typeof w.callback&&w.callback(H)}catch(Z){"function"==typeof w.callback&&w.callback(null),console.error(Z)}});return function(H){return x.apply(this,arguments)}}(),A=function(){var x=(0,T.A)(function*(w){yield N.create(),w.params=w.params||{};try{yield N.set("icdt-config",w.params),"function"==typeof w.callback&&w.callback(w.params)}catch(H){"function"==typeof w.callback&&w.callback(null),console.error(H)}});return function(H){return x.apply(this,arguments)}}(),D=function(){var x=(0,T.A)(function*(w){yield N.create();try{var H=(yield N.get("icdt-clipboard"))||{};"function"==typeof w.callback&&w.callback(H)}catch(Z){"function"==typeof w.callback&&w.callback(null),console.error(Z)}});return function(H){return x.apply(this,arguments)}}(),S=function(){var x=(0,T.A)(function*(w){yield N.create(),w.params=w.params||{};try{yield N.set("icdt-clipboard",w.params),"function"==typeof w.callback&&w.callback(w.params)}catch(H){"function"==typeof w.callback&&w.callback(null),console.error(H)}});return function(H){return x.apply(this,arguments)}}();var x},6315:(he,Mt,v)=>{v.d(Mt,{w:()=>T});const T=(E,et)=>{if(!E)return"";let N=E.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),dt=(N&&N[4]||"").trim(),C=N?(256|N[1]).toString(16).slice(1)+(256|N[2]).toString(16).slice(1)+(256|N[3]).toString(16).slice(1):E;if("0"==dt)return"transparent";if(et){let c;c=""!==dt?dt:"01",c=(255*c|256).toString(16).slice(1),C+=c}return`#${C}`}},7873:(he,Mt,v)=>{v.d(Mt,{F:()=>T});const T={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},1477:(he,Mt,v)=>{v.d(Mt,{r:()=>T});const T={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221}},2409:(he,Mt,v)=>{v.d(Mt,{F:()=>T});const T={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(he,Mt,v)=>{v.d(Mt,{P:()=>T});const T={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(he,Mt,v)=>{v.d(Mt,{Q:()=>T});const T={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(he,Mt,v)=>{v.d(Mt,{h:()=>T});const T={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,TSPAN:10,PATH:8,POLYLINE:11}},8338:(he,Mt,v)=>{v.d(Mt,{S:()=>T});const T={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},6611:(he,Mt,v)=>{v.d(Mt,{L:()=>Ot});var T=v(3603),E=v(5970),et=v(7873),N=v(9506),dt=v(1308),C=v(3138);const D=j=>{var i,n,o,r,l,m,y;let f=(null===(i=j.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=j.touchEvent)||void 0===n?void 0:n.target),O=(null===(o=f)||void 0===o?void 0:o.getAttribute("id"))||"",p=null===(r=f)||void 0===r?void 0:r.nodeName;Ot.dataSelect.nodeName.includes(p)||(f=jQuery(f).parents("foreignObject").get(0),f&&(O=f.getAttribute("id")||"",p=f.nodeName));let z=(null===(l=f)||void 0===l||null===(l=l.parentNode)||void 0===l?void 0:l.getAttribute("id"))||"";var K,mt;if([et.F.RESIZE_GROUP,et.F.SELECT_GROUP].includes(z))return null===(K=j.mouseEvent)||void 0===K||K.stopPropagation(),void(null===(mt=j.mouseEvent)||void 0===mt||mt.preventDefault());if(null!==(m=j.mouseEvent)&&void 0!==m&&m.altKey||null!==(y=j.touchEvent)&&void 0!==y&&y.altKey||!O||O.match(/[^0-9]/)||!Ot.dataSelect.nodeName.includes(p)){var yt;Ot.dataSelect.ids.length&&(Ot.dataSelect.ids=[]),(0==(null===(yt=j.mouseEvent)||void 0===yt?void 0:yt.button)||j.touchEvent)&&(j=>{let l=(0,E.RY)(et.F.SCAN_GROUP,"g"),m=(0,N.CE)(0,0,1,1);(0,E.xJ)(l,m),((j,i,n)=>{(0,dt.I)(j,{start:l=>{},move:(l,m)=>{((l,m,y,f)=>{i=(0,N.CE)(l,m,y,f),(0,E.xJ)(n,i)})(m[0][0],m[0][1],l.x,l.y)},end:(l,m)=>{null==n||n.remove(),Ot.dataSelect.ids=Ot.data.getNodeInArea(Math.min(m[0][0],l.x),Math.min(m[0][1],l.y),Math.max(m[0][0],l.x),Math.max(m[0][1],l.y)),(0,C.D)(Ot.dataSelect.nodes)}})})(j,m,l)})(j)}else{var St,Nt;let $t=parseFloat(O||"0");Ot.dataSelect.ids=null!==(St=j.mouseEvent)&&void 0!==St&&St.shiftKey||null!==(Nt=j.touchEvent)&&void 0!==Nt&&Nt.shiftKey?[$t].concat(Ot.dataSelect.ids).filter((Oe,pe,Se)=>Se.indexOf(Oe)==pe):[$t],(0,C.D)(Ot.dataSelect.nodes)}};class x{constructor(){let{x:i,y:n}=Ot.screen.dislocation;var o=(r,l,m,y)=>{Ot.screen.move({x:i,y:n},{x:m-r,y:y-l})};return{start:r=>{},move:(r,l)=>{o(l[0][0],l[0][1],r.x,r.y)},end:(r,l)=>{o(l[0][0],l[0][1],r.x,r.y)}}}}var w=v(1999),H=v(4888);const Z=[{name:"tam gi\xe1c vu\xf4ng",type:H.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:H.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:H.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:H.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:H.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:H.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:H.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:H.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:H.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:H.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:H.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:H.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:H.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var lt=v(1281),d=v(2492);class I{constructor(){let i=(0,E.RY)(et.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,lt.K)(Math.ceil(1e9*Math.random())),m=(y,f,O,p)=>{l=(0,N.CE)(y,f,O,p,{ratio:1}),l.x=(0,d.z)(l.x),l.y=(0,d.z)(l.y),l.width=(0,d.z)(l.width),l.height=(0,d.z)(l.height),Object.assign(r,(0,N.xW)(w.h.CIRCLE,l,r)),(0,E.tD)(o,r),(0,E.in)(i,l)};return{start:y=>{m(y.x,y.y,y.x+l.width,y.y+l.height)},move:(y,f)=>{m(f[0][0],f[0][1],y.x,y.y)},end:(y,f)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,N.xW)(w.h.CIRCLE,l,r)),(0,E.tD)(o,r)),Ot.data.node=Object.assign({id:n,type:w.h.CIRCLE,name:"Circle"},{size:l,attribute:r}),null==i||i.remove()}}}}var b=v(6153);class B{constructor(){let i=(0,E.RY)(et.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,b.W)(Math.ceil(1e9*Math.random()));var m=(y,f,O,p)=>{l=(0,N.CE)(y,f,O,p),l.x=(0,d.z)(l.x),l.y=(0,d.z)(l.y),l.width=(0,d.z)(l.width),l.height=(0,d.z)(l.height),Object.assign(r,(0,N.xW)(w.h.ELLIPSE,l,r)),(0,E.tD)(o,r),(0,E.in)(i,l)};return{start:y=>{m(y.x,y.y,y.x+l.width,y.y+l.height)},move:(y,f)=>{m(f[0][0],f[0][1],y.x,y.y)},end:(y,f)=>{(l.width<=16||l.height<=16)&&(l.width=90,l.height=60,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,N.xW)(w.h.ELLIPSE,l,r)),(0,E.tD)(o,r)),Ot.data.node=Object.assign({id:n,type:w.h.ELLIPSE,name:"Ellipse"},{size:l,attribute:r}),null==i||i.remove()}}}}var pt=v(7945);class J{constructor(){let i=(0,E.RY)(et.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,pt.a)(Math.ceil(1e9*Math.random()));var m=(y,f,O,p)=>{l=(0,N.CE)(y,f,O,p),l.x=(0,d.z)(l.x),l.y=(0,d.z)(l.y),l.width=(0,d.z)(l.width),l.height=(0,d.z)(l.height),Object.assign(r,(0,N.xW)(w.h.RECT,l,r)),(0,E.tD)(o,r),(0,E.in)(i,l)};return{start:y=>{m(y.x,y.y,y.x+l.width,y.y+l.height)},move:(y,f)=>{m(f[0][0],f[0][1],y.x,y.y)},end:(y,f)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,N.xW)(w.h.RECT,l,r)),(0,E.tD)(o,r)),Ot.data.node=Object.assign({id:n,type:w.h.RECT,name:"Rect"},{size:l,attribute:r}),null==i||i.remove()}}}}var gt=v(3477);class Bt{constructor(i){let n=(0,E.RY)(et.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:r,element:l,attribute:m,size:y}=(0,gt.u)(Math.ceil(1e9*Math.random()));y.ratios=o;var f=(O,p,z,K)=>{y=(0,N.CE)(O,p,z,K,{ratios:o}),y.x=(0,d.z)(y.x),y.y=(0,d.z)(y.y),y.width=(0,d.z)(y.width),y.height=(0,d.z)(y.height),Object.assign(m,(0,N.xW)(w.h.POLYGON,y,m)),(0,E.tD)(l,m),(0,E.in)(n,y)};return{start:O=>{f(O.x,O.y,O.x+y.width,O.y+y.height)},move:(O,p)=>{f(p[0][0],p[0][1],O.x,O.y)},end:(O,p)=>{(y.width<=16||y.height<=16)&&(y.width=80,y.height=80,y.x=y.x-y.width/2,y.y=y.y-y.height/2,Object.assign(m,(0,N.xW)(w.h.POLYGON,y,m)),(0,E.tD)(l,m)),Ot.data.node=Object.assign({id:r,type:w.h.POLYGON,name:"Polygon"},{size:y,attribute:m}),null==n||n.remove()}}}}var ht=v(3069);class V{constructor(){let i=(0,E.RY)(et.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,ht.q)(Math.ceil(1e9*Math.random()));return{start:y=>{},move:(y,f)=>{((y,f,O,p)=>{l=(0,N.CE)(y,f,O,p),l.x=(0,d.z)(l.x),l.y=(0,d.z)(l.y),l.width=(0,d.z)(l.width),l.height=(0,d.z)(l.height),Object.assign(r,(0,N.xW)(w.h.LINE,l,r)),(0,E.tD)(o,r),(0,E.in)(i,l)})(f[0][0],f[0][1],y.x,y.y)},end:(y,f)=>{f.length>=2?((l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,N.xW)(w.h.LINE,l,r)),(0,E.tD)(o,r)),Ot.data.node=Object.assign({id:n,type:w.h.LINE,name:"Line"},{size:l,attribute:r})):null==o||o.remove(),null==i||i.remove()}}}}var It=v(4896),Et=v(6407);class Y{constructor(){let{nodeId:i,element:n,attribute:o,size:r}=(0,Et.X)(Math.ceil(1e9*Math.random())),m="";return{start:f=>{m=`M ${f.x} ${f.y} L ${f.x} ${f.y}`},move:(f,O)=>{((f,O)=>{m+=` ${f} ${O}`,n.setAttribute("d",m)})(f.x,f.y)},end:(f,O)=>{let p=(0,It.CS)(m),{minX:z,minY:K,maxX:mt,maxY:yt}=(0,It.lP)(p);r.x=z,r.y=K,r.width=mt-z||1,r.height=yt-K||1,r.ratioMaps=(0,It.nf)(r,p),Ot.data.node=Object.assign({id:i,type:w.h.PATH,name:"Path"},{size:r,attribute:o})}}}}var Tt=v(745);class ut{constructor(){let i=(0,E.RY)(et.F.CREATE_GROUP,"g"),{nodeId:n,element:o,size:r,attribute:l,style:m,source:y}=(0,Tt.$)(Math.ceil(1e9*Math.random()));var f=(O,p,z,K)=>{r=(0,N.CE)(O,p,z,K),r.x=(0,d.z)(r.x),r.y=(0,d.z)(r.y),r.width=(0,d.z)(r.width),r.height=(0,d.z)(r.height),Object.assign(l,(0,N.xW)(w.h.FOREIGNOBJECT,r,l)),(0,E.tD)(o,l),(0,E.in)(i,r)};return{start:O=>{f(O.x,O.y,O.x+r.width,O.y+r.height)},move:(O,p)=>{f(p[0][0],p[0][1],O.x,O.y)},end:(O,p)=>{(r.width<=16||r.height<=16)&&(r.width=90,r.height=60,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(l,(0,N.xW)(w.h.FOREIGNOBJECT,r,l)),(0,E.tD)(o,l)),Ot.data.node=Object.assign({id:n,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:l,style:m,source:y}),null==i||i.remove()}}}}var Gt=v(9173);class ne{constructor(){var i,n;let o=(0,E.RY)(et.F.CREATE_GROUP,"g"),{nodeId:r,element:l,size:m,attribute:y,source:f}=(0,Gt.B)(Math.ceil(1e9*Math.random())),O=1;(z=>{if(!z)return;let K=new Image;K.onload=()=>{O=(0,d.z)(K.naturalWidth/K.naturalHeight,100)},K.onerror=mt=>{console.error(`ImgSrc load failed -> ${z}`,mt)},K.src=z})(null!==(i=null===(n=f.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var p=(z,K,mt,yt)=>{m=(0,N.CE)(z,K,mt,yt,{ratio:O}),m.x=(0,d.z)(m.x),m.y=(0,d.z)(m.y),m.width=(0,d.z)(m.width),m.height=(0,d.z)(m.height),Object.assign(y,(0,N.xW)(w.h.IMAGE,m,y)),(0,E.tD)(l,y),(0,E.in)(o,m)};return{start:z=>{p(z.x,z.y,z.x+m.width,z.y+m.height)},move:(z,K)=>{p(K[0][0],K[0][1],z.x,z.y)},end:(z,K)=>{(m.width<=16||m.height<=16)&&(m.width=80,m.height=80,m.x=m.x-m.width/2,m.y=m.y-m.height/2,Object.assign(y,(0,N.xW)(w.h.IMAGE,m,y)),(0,E.tD)(l,y)),Ot.data.node=Object.assign({id:r,type:w.h.IMAGE,name:"Image"},{size:m,attribute:y,source:f}),null==o||o.remove()}}}}var Ct=v(7135),Kt=v(4979);function M(j,i,n,o){return Math.sqrt(Math.pow(n-j,2)+Math.pow(o-i,2))}function W(j,i,n,o,r){return M(j,i,n,o)<r?1:0}function tt(j,i,n,o,r,l,m){var y=[];return y.push(W(j,i,n,o,m)),y.push(W(j,i,r,l,m)),y.push(function s(j,i,n,o,r,l,m){var y=[r-n,l-o],f=[j-n,i-o],O=[-y[1],y[0]],p=Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2)),z=[O[0]/p,O[1]/p],K=Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)),mt=[y[0]/K,y[1]/K],yt=f[0]*mt[0]+f[1]*mt[1];if(yt<=0||yt>=K)return 0;var St=f[0]*z[0]+f[1]*z[1];return St>=m||St<=-m?0:1}(j,i,n,o,r,l,m)),y}function _t(j,i,n,o,r){var l=[n-j,o-i],m=[-l[1],l[0]],y=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)),f=[m[0]/y,m[1]/y];return[[j+r*f[0],i+r*f[1]],[j-r*f[0],i-r*f[1]],[n-r*f[0],o-r*f[1]],[n+r*f[0],o+r*f[1]]]}function Lt(j,i,n,o,r,l,m){var yt,y=[r-j,l-i],f=[n-j,o-i],O=Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)),p=[f[0]/O,f[1]/O],z=y[0]*p[0]+y[1]*p[1],K=[j+z*p[0],i+z*p[1]],mt=Math.sqrt(Math.pow(r-K[0],2)+Math.pow(l-K[1],2));yt=0===mt?m:Math.sqrt(Math.pow(m,2)-Math.pow(mt,2));var St=[j+z*p[0]+yt*p[0],i+z*p[1]+yt*p[1]];return St[0]===j&&St[1]===i?null:St}function jt(j,i,n,o,r,l,m){var y=[r-j,l-i],f=[n-j,o-i],O=[-f[1],f[0]],p=Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2)),z=[O[0]/p,O[1]/p],K=y[0]*z[0]+y[1]*z[1],mt=st([j,i],[n,o],[r,l]);if(re([mt[0]-r,mt[1]-l])>=m)return null;var St=Math.sqrt(Math.pow(m,2)-Math.pow(K,2)),Nt=[r-K*z[0],l-K*z[1]],$t=Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)),Oe=[f[0]/$t,f[1]/$t],pe=[[Nt[0]-Oe[0]*St,Nt[1]-Oe[1]*St],[Nt[0]+Oe[0]*St,Nt[1]+Oe[1]*St]];return pe[0][0]===j&&pe[0][1]===i?null:pe}function Ft(j,i,n,o,r,l,m,y){var f,O,p,z,K,mt;return-(p=m-r)*(O=o-i)+(f=n-j)*(z=y-l)==0?null:(mt=(p*(i-l)-z*(j-r))/(-p*O+f*z),(K=(-O*(j-r)+f*(i-l))/(-p*O+f*z))>=0&&K<=1&&mt>=0&&mt<=1?[j+mt*f,i+mt*O]:null)}function Wt(j,i,n,o,r,l,m,y,f,O){var p=_t(l,m,y,f,O),z=[];if(n[0]&&!n[1])z.push(Lt(j,i,o,r,l,m,O)),z.push(Ft(j,i,o,r,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(Ft(j,i,o,r,p[1][0],p[1][1],p[2][0],p[2][1])),(K=jt(j,i,o,r,y,f,O))&&z.push(K[0],K[1]);else if(!n[0]&&n[1])z.push(Lt(j,i,o,r,y,f,O)),z.push(Ft(j,i,o,r,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(Ft(j,i,o,r,p[1][0],p[1][1],p[2][0],p[2][1])),(K=jt(j,i,o,r,l,m,O))&&z.push(K[0],K[1]);else if(n[0]&&n[1])z.push(Lt(j,i,o,r,l,m,O)),z.push(Ft(j,i,o,r,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(Ft(j,i,o,r,p[1][0],p[1][1],p[2][0],p[2][1])),z.push(Lt(j,i,o,r,y,f,O));else{var K=jt(j,i,o,r,y,f,O),mt=jt(j,i,o,r,l,m,O);K&&z.push(K[0],K[1]),mt&&z.push(mt[0],mt[1]),z.push(Ft(j,i,o,r,p[0][0],p[0][1],p[3][0],p[3][1])),z.push(Ft(j,i,o,r,p[1][0],p[1][1],p[2][0],p[2][1]))}for(var yt=[j,i],St=0;St<z.length;St++)z[St]&&M(z[St][0],z[St][1],o,r)<M(yt[0],yt[1],o,r)&&(yt=z[St]);return yt[0]===j&&yt[1]===i?null:yt}function Vt(j,i,n,o,r,l,m,y,f){var O=_t(r,l,m,y,f),p=[],z=jt(j,i,n,o,r,l,f);z&&p.push(z[0],z[1]),(z=jt(j,i,n,o,m,y,f))&&p.push(z[0],z[1]),p.push(Ft(j,i,n,o,O[0][0],O[0][1],O[3][0],O[3][1])),p.push(Ft(j,i,n,o,O[1][0],O[1][1],O[2][0],O[2][1]));for(var K=[n,o],mt=[j,i],yt=0;yt<p.length;yt++)p[yt]&&M(p[yt][0],p[yt][1],j,i)<M(K[0],K[1],j,i)&&(K=p[yt]);for(var St=0;St<p.length;St++)p[St]&&M(p[St][0],p[St][1],n,o)<M(mt[0],mt[1],n,o)&&(mt=p[St]);return K[0]===n&&K[1]===o||mt[0]===j&&mt[1]===i?null:[K,mt]}var re=function(j){return Math.sqrt(j[0]*j[0]+j[1]*j[1])},st=function(j,i,n){var o=[i[0]-j[0],i[1]-j[1]],r=re(o);if(r<1e-6)return j;var l=[n[0]-j[0],n[1]-j[1]],m=(o[0]*l[0]+o[1]*l[1])/r;return m<0?j:m>r?i:[j[0]+o[0]*m/r,j[1]+o[1]*m/r]};class Yt{constructor(){let{element:o,size:l}=(0,Et.X)(Math.ceil(1e9*Math.random()));(0,E.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let m="";return{start:O=>{m=`M ${O.x} ${O.y} L ${O.x} ${O.y}`},move:(O,p)=>{((O,p)=>{m+=` ${O} ${p}`,o.setAttribute("d",m)})(O.x,O.y)},end:(O,p)=>{o.remove(),(O=>{let p=9999,z=9999,K=-9999,mt=-9999;O.forEach(St=>{p=Math.min(p,St[0]),z=Math.min(z,St[1]),K=Math.max(K,St[0]),mt=Math.max(mt,St[1])}),l=(0,N.CE)(p,z,K,mt,{points:O}),Ot.data.getNodeInArea(0,0,1920,1920,w.h.PATH).forEach(St=>{let $t=((j,i,n)=>{n=n||20;var o=[],r=function(p){var z=i[0][0],K=i[0][1],mt=0,yt=0;if(1!==p.length||W(p[0][0],p[0][1],z,K,n)){for(var St;mt<p.length-1;){var Nt=p[mt],$t=p[mt+1],Oe=W(Nt[0],Nt[1],z,K,n),pe=W($t[0],$t[1],z,K,n);if(Oe&&pe)yt=++mt;else if(Oe&&!pe)(Se=Lt(Nt[0],Nt[1],$t[0],$t[1],z,K,n))?(p[mt]=Se,yt=mt):mt++;else if(!Oe&&pe){var Se;(Se=Lt($t[0],$t[1],Nt[0],Nt[1],z,K,n))&&((St=p.slice(yt,mt+1)).push(Se),o.push(St)),yt=++mt}else{var _e=jt(Nt[0],Nt[1],$t[0],$t[1],z,K,n);_e?(((St=p.slice(yt,mt+1))[St.length-1][0]!==_e[0][0]||St[St.length-1][1]!==_e[0][1])&&St.push(_e[0]),St.length>1&&o.push(St),p[mt]=_e[1],p[mt+1]&&p[mt+1][0]==_e[1][0]&&p[mt+1][1]==_e[1][1]&&mt++,yt=mt):mt++}}yt!==mt&&(St=p.slice(yt,p.length))&&o.push(St)}else o.push(p)},l=function(p,z){var $t,K=i[z],mt=i[z+1],yt=0,St=0;if(1!==p.length||-1!==(Nt=tt(p[0][0],p[0][1],K[0],K[1],mt[0],mt[1],n)).indexOf(1)){for(;yt<p.length-1;){var Oe=p[yt],pe=p[yt+1],Nt=tt(Oe[0],Oe[1],K[0],K[1],mt[0],mt[1],n),Se=tt(pe[0],pe[1],K[0],K[1],mt[0],mt[1],n);if(-1!==Nt.indexOf(1)&&-1!==Se.indexOf(1))St=++yt;else if(-1!==Nt.indexOf(1)&&-1===Se.indexOf(1))(_e=Wt(Oe[0],Oe[1],Nt,pe[0],pe[1],K[0],K[1],mt[0],mt[1],n))?(p[yt]=_e,St=yt):yt++;else if(-1===Nt.indexOf(1)&&-1!==Se.indexOf(1)){var _e;(_e=Wt(pe[0],pe[1],Se,Oe[0],Oe[1],K[0],K[1],mt[0],mt[1],n))?(($t=p.slice(St,yt+1)).push(_e),o.push($t),St=++yt):yt++}else{var Le=Vt(Oe[0],Oe[1],pe[0],pe[1],K[0],K[1],mt[0],mt[1],n);Le?((($t=p.slice(St,yt+1))[$t.length-1][0]!==Le[0][0]||$t[$t.length-1][1]!==Le[0][1])&&$t.push(Le[0]),$t.length>1&&o.push($t),p[yt]=Le[1],p[yt+1]&&p[yt+1][0]==Le[1][0]&&p[yt+1][1]==Le[1][1]&&yt++,St=yt):yt++}}St!==yt&&($t=p.slice(St,p.length))&&o.push($t)}else o.push(p)};if(i=function wt(j){var i=[];if(1===j.length)i=j;else{for(var n=0;n<j.length-1;)(j[n][0]!==j[n+1][0]||j[n][1]!==j[n+1][1])&&i.push(j[n]),n++;0!==j.length&&0===i.length&&i.push(j[0]),(j[j.length-1][0]!==j[i.length-1][0]||j[j.length-1][1]!==j[i.length-1][1])&&i.push(j[n])}return i}(i),1===i.length){for(var m=0;m<j.length;m++)r(j[m]);j=o}else for(var y=0;y<i.length-1;y++){for(m=0;m<j.length;m++)l(j[m],y);j=o,o=[]}for(var f=0;f<j.length;f++)for(var O=0;O<j[f].length;O++)j[f][O][0]=Math.round(j[f][O][0]),j[f][O][1]=Math.round(j[f][O][1]);return j})(Ot.data.getNode(St).size.points,O,2);console.log($t)})})(p)}}}}var h=v(6847);class R{constructor(){let i=(0,E.RY)(et.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l,source:m}=(0,h.L)(Math.ceil(1e9*Math.random())),y=(f,O,p,z)=>{l=(0,N.CE)(f,O,p,z),l.x=(0,d.z)(l.x),l.y=(0,d.z)(l.y),l.width=(0,d.z)(l.width),l.height=(0,d.z)(l.height),Object.assign(r,(0,N.xW)(w.h.TEXT,l,r)),(0,E.tD)(o,r),(0,E.in)(i,l)};return{start:f=>{y(f.x,f.y,f.x+l.width,f.y+l.height)},move:(f,O)=>{y(O[0][0],O[0][1],f.x,f.y)},end:(f,O)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,N.xW)(w.h.TEXT,l,r)),(0,E.tD)(o,r)),Ot.data.node=Object.assign({id:n,type:w.h.TEXT,name:"Text"},{size:l,attribute:r,source:m}),null==i||i.remove()}}}}var _=v(4312),F=v(2409),it=v(6078);var xt=v(3073);class bt{constructor(){this._nodeName=["circle","ellipse","line","polygon","polyline","rect","text","tspan","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>Ot.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,o,r,l,m;null===(n=window.document.getElementById(et.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(o=window.document.getElementById(et.F.SELECT_GROUP))||void 0===o||o.remove(),null===(r=window.document.getElementById(et.F.SCAN_GROUP))||void 0===r||r.remove(),null===(l=window.document.getElementById(et.F.CREATE_GROUP))||void 0===l||l.remove(),null===(m=window.document.getElementById(et.F.INTERACTIVE_GROUP))||void 0===m||m.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(y=>y(i))}deleteNode(){for(let i of this._selected_Ids){let n=Ot.data.deleteNode(i);Ot.history.push([{type:"delete",from:{id:n},to:{id:n}}])}Ot.dataSelect.ids=[]}groupNode(){let i=[];if(Ot.dataSelect.ids.length>=2){let n=Ot.data.getNode(Ot.dataSelect.ids[0]),{nodeId:o,attribute:r,size:l}=(0,xt.v)(Math.ceil(1e9*Math.random()),void 0,n.pid?window.document.getElementById(n.pid):null);Ot.data.node=Object.assign({id:o,type:w.h.GROUP,name:"G"},{size:l,attribute:r});for(let m of Ot.dataSelect.ids)i.push(Ot.data.addGroup(m,o))}i.length&&(Ot.dataSelect.ids=i,(0,C.D)(Ot.dataSelect.nodes))}ungroupNode(){let i=[];for(let n of Ot.dataSelect.ids)i.push(Ot.data.unGroup(n));i.length&&(Ot.dataSelect.ids=i,(0,C.D)(Ot.dataSelect.nodes))}}var X=v(2837),ct=v(8338);class kt{createNodeImage(i,n){var o,r,l,m;let{nodeId:f,element:O,size:p,attribute:z,source:K}=(0,Gt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:50)-50,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:50)-50,width:100,height:100},source:{type:"image",image:(0,X.U)(i)}});(mt=>{if(!mt)return;let yt=new Image;yt.onload=()=>{let St=(0,d.z)(yt.naturalWidth/yt.naturalHeight,100);St>=1?(p.width=Math.min(yt.naturalWidth,512),p.height=(0,d.z)(p.width/St,100)):(p.height=Math.min(yt.naturalHeight,512),p.width=(0,d.z)(p.height*St,100)),p.x=(0,d.z)(p.x+50-p.width/2,100),p.y=(0,d.z)(p.y+50-p.height/2,100),Object.assign(z,(0,N.xW)(w.h.IMAGE,p,z)),(0,E.tD)(O,z),Ot.data.node=Object.assign({id:f,type:w.h.IMAGE,name:"Image"},{size:p,attribute:z,source:K})},yt.onerror=St=>{console.error(`ImgSrc load failed -> ${mt}`,St),null==O||O.remove()},yt.src=mt})(null!==(l=null===(m=K.image)||void 0===m?void 0:m.url)&&void 0!==l?l:"")}createNodeIframe(i,n){var o,r;let{nodeId:m,element:y,size:f,attribute:O,style:p,source:z}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:50)-50,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,X.U)(i)}});(K=>{let mt=(null===(K=Ot.data.slide)||void 0===K||null===(K=K.svg)||void 0===K?void 0:K.viewBox)||{x:0,y:0,width:100,height:100},yt=(0,d.z)(mt.width/mt.height,100);yt>=1?(f.width=Math.min(mt.width,512),f.height=(0,d.z)(f.width/yt,100)):(f.height=Math.min(mt.height,512),f.width=(0,d.z)(f.height*yt,100)),f.x=(0,d.z)(f.x+50-f.width/2,100),f.y=(0,d.z)(f.y+50-f.height/2,100),Object.assign(O,(0,N.xW)(w.h.IMAGE,f,O)),(0,E.tD)(y,O),Ot.data.node=Object.assign({id:m,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:f,attribute:O,style:p,source:z})})()}createNodeEmbed(i,n){var o,r;let l={x:50,y:50,width:640,height:360};i.type==ct.S.AUDIO&&(l.width=480,l.height=80);let{nodeId:m,element:y,size:f,attribute:O,style:p,source:z}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:l.x)-l.x,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:l.y)-l.y,width:l.width,height:l.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,X.U)(i))}});(()=>{let K=(0,d.z)(l.width/l.height,100);K>=1?(f.width=Math.min(f.width,l.width),f.height=(0,d.z)(f.width/K,1)):(f.height=Math.min(f.height,l.height),f.width=(0,d.z)(f.height*K,1)),f.x=(0,d.z)(f.x+l.x-f.width/2,1),f.y=(0,d.z)(f.y+l.y-f.height/2,1),Object.assign(O,(0,N.xW)(w.h.FOREIGNOBJECT,f,O)),(0,E.tD)(y,O),Ot.data.node=Object.assign({id:m,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:f,attribute:O,style:p,source:z})})()}createNodeMedia(i,n){var o,r,l,m;let{nodeId:f,element:O,size:p,attribute:z,source:K}=(0,Gt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:50)-50,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:50)-50,width:100,height:100},source:{type:"image",image:(0,X.U)(i.cover)}}),mt={click:{media:i.media}};(yt=>{if(!yt)return;let St=new Image;St.onload=()=>{let Nt=(0,d.z)(St.naturalWidth/St.naturalHeight,100);Nt>=1?(p.width=Math.min(St.naturalWidth,512),p.height=(0,d.z)(p.width/Nt,100)):(p.height=Math.min(St.naturalHeight,512),p.width=(0,d.z)(p.height*Nt,100)),p.x=(0,d.z)(p.x+50-p.width/2,100),p.y=(0,d.z)(p.y+50-p.height/2,100),Object.assign(z,(0,N.xW)(w.h.IMAGE,p,z)),(0,E.tD)(O,z),Ot.data.node=Object.assign({id:f,type:w.h.IMAGE,name:"Image"},{size:p,attribute:z,source:K,interactive:mt})},St.onerror=Nt=>{console.error(`ImgSrc load failed -> ${yt}`,Nt),null==O||O.remove()},St.src=yt})(null!==(l=null===(m=K.image)||void 0===m?void 0:m.url)&&void 0!==l?l:"")}createNodeText(i,n){var o,r;let{nodeId:m,element:y,size:f,attribute:O,style:p,source:z}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:0)-0,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let K=(0,d.z)(4,100);K>=1?(f.width=Math.min(f.width,320),f.height=(0,d.z)(f.width/K,1)):(f.height=Math.min(f.height,80),f.width=(0,d.z)(f.height*K,1)),f.x=(0,d.z)(f.x+0-f.width/2,1),f.y=(0,d.z)(f.y+0-f.height/2,1),Object.assign(O,(0,N.xW)(w.h.FOREIGNOBJECT,f,O)),(0,E.tD)(y,O),Ot.data.node=Object.assign({id:m,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:f,attribute:O,style:p,source:z})})()}insert(i){var n;if(Ot.data.insertSlide(Ot.data.slideId,1),i.title){let{nodeId:o,size:r,attribute:l,style:m,source:y}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});Ot.data.node=Object.assign({id:o,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:l,style:m,source:y})}if(i.description){let{nodeId:o,size:r,attribute:l,style:m,source:y}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});Ot.data.node=Object.assign({id:o,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:l,style:m,source:y})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:o,size:r,attribute:l}=(0,pt.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});Ot.data.node=Object.assign({id:o,type:w.h.RECT,name:"Rect"},{size:r,attribute:l})})(),(o=>{let{nodeId:r,size:l,attribute:m,style:y,source:f}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});Ot.data.node=Object.assign({id:r,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:l,attribute:m,style:y,source:f})})())}}var Pt=v(1026),Qt=v(8047);class Xt{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:Ot.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,m)=>m==this._slideIdx),o=null==n?void 0:n.svg,r=l=>{let m=[];return l.filter(y=>!y.isdeleted).forEach(y=>{y.type==w.h.GROUP?m=m.concat(r(y.nodes||[])):m.push(y.id)}),m};return r((null==o?void 0:o.nodes)||[])}}get get(){var i;let n=o=>{var r,l;return null===(r=o)||void 0===r||r.filter(m=>m.type==w.h.GROUP).forEach(m=>{var y;m.nodes=n(null===(y=m.nodes)||void 0===y?void 0:y.filter(f=>!f.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(m=>{var y,f;return m.type!=w.h.GROUP||(null!==(y=null===(f=m.nodes)||void 0===f?void 0:f.length)&&void 0!==y?y:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var r;o.svg&&(o.svg.nodes=n(null===(r=o.svg)||void 0===r||null===(r=r.nodes)||void 0===r?void 0:r.filter(l=>!l.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var r,l,m,y,f,O,p,z;n.push(null===(r=o.svg)||void 0===r||null===(r=r.background)||void 0===r?void 0:r.path),null===(l=o.svg)||void 0===l||l.nodes.forEach(K=>{var mt,yt,St,Nt,$t,Oe,pe,Se,_e,Le;n.push(null===(mt=K.source)||void 0===mt||null===(mt=mt.image)||void 0===mt?void 0:mt.path),n.push(null===(yt=K.source)||void 0===yt||null===(yt=yt.audio)||void 0===yt?void 0:yt.path),n.push(null===(St=K.source)||void 0===St||null===(St=St.video)||void 0===St?void 0:St.path),n.push(null===(Nt=K.source)||void 0===Nt||null===(Nt=Nt.file)||void 0===Nt?void 0:Nt.path),n.push(null===($t=K.source)||void 0===$t||null===($t=$t.iframe)||void 0===$t?void 0:$t.path),n.push(null===(Oe=K.source)||void 0===Oe||null===(Oe=Oe.track)||void 0===Oe?void 0:Oe.path),n.push(null===(pe=K.interactive)||void 0===pe||null===(pe=pe.show)||void 0===pe||null===(pe=pe.audio)||void 0===pe||null===(pe=pe.source)||void 0===pe?void 0:pe.path),n.push(null===(Se=K.interactive)||void 0===Se||null===(Se=Se.click)||void 0===Se||null===(Se=Se.audio)||void 0===Se||null===(Se=Se.source)||void 0===Se?void 0:Se.path),n.push(null===(_e=K.interactive)||void 0===_e||null===(_e=_e.click)||void 0===_e||null===(_e=_e.image)||void 0===_e||null===(_e=_e.source)||void 0===_e?void 0:_e.path),n.push(null===(Le=K.interactive)||void 0===Le||null===(Le=Le.click)||void 0===Le||null===(Le=Le.video)||void 0===Le||null===(Le=Le.source)||void 0===Le?void 0:Le.path)}),n.push(null===(m=o.test)||void 0===m||null===(m=m.audiotrue)||void 0===m?void 0:m.path),n.push(null===(y=o.test)||void 0===y||null===(y=y.audiofalse)||void 0===y?void 0:y.path),n.push(null===(f=o.test)||void 0===f||null===(f=f.effecttrue)||void 0===f?void 0:f.path),n.push(null===(O=o.test)||void 0===O||null===(O=O.effectfalse)||void 0===O?void 0:O.path),n.push(null===(p=o.test)||void 0===p||null===(p=p.icontrue)||void 0===p?void 0:p.path),n.push(null===(z=o.test)||void 0===z||null===(z=z.iconfalse)||void 0===z?void 0:z.path)}),n.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,r,l)=>l.indexOf(o)==r)}get getFonts(){var i;return(0,Qt.d)(JSON.stringify(null!==(i=this._dataSource.slides)&&void 0!==i?i:[]))}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=o=>{var r,l;return null===(r=o)||void 0===r||r.filter(m=>m.type==w.h.GROUP).forEach(m=>{var y;m.nodes=n(null===(y=m.nodes)||void 0===y?void 0:y.filter(f=>!f.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(m=>{var y,f;return m.type!=w.h.GROUP||(null!==(y=null===(f=m.nodes)||void 0===f?void 0:f.length)&&void 0!==y?y:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var r;o.svg&&(o.svg.nodes=n(null===(r=o.svg)||void 0===r||null===(r=r.nodes)||void 0===r?void 0:r.filter(l=>!l.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,E.rN)(),(0,Pt.t)(this.slide)}openSlide(i,n){var o,r,l,m,y;if(i)for(let K=0,mt=null!==(f=null===(O=this._dataSource.slides)||void 0===O?void 0:O.length)&&void 0!==f?f:0;K<mt;K++){var f,O,p;if((null!==(p=this._dataSource.slides)&&void 0!==p?p:[])[K].id==i){this._slideIdx=K;break}}else if(n&&n>=0&&n<(null!==(o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==o?o:0))this._slideIdx=null!=n?n:0;else{var z;this._slideIdx=0,null!==(z=this._dataSource.slides)&&void 0!==z&&z.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,E.rN)(),null!==(l=this.slide)&&void 0!==l&&null!==(l=l.svg)&&void 0!==l&&l.viewBox&&(Ot.screen.frameSize=this.slide.svg.viewBox),(0,Pt.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(y=this._dataSource.slides)||void 0===y?void 0:y.length)&&void 0!==m?m:0,this.slide)}addSlide(){var i,n,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,n,o){var r,l,m,y,f;let O=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(z=>z.id==i);if(!o||!O||null!=O&&null!==(l=O.svg)&&void 0!==l&&l.nodes.filter(z=>!z.isdeleted).length)return this.insertSlide(i,n,o);let p=null!==(m=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(O))&&void 0!==m?m:0;null===(f=this._dataSource.slides)||void 0===f||f.splice(p,1,o),this._slideIdx=p,this.openSlide(void 0,this._slideIdx)}insertSlide(i,n,o){var r,l,m,y,f;let O=null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(K=>K.id==i))&&void 0!==r?r:this._defaultSlide,p=(null!==(m=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(O))&&void 0!==m?m:0)+n;var z;o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(z=o.svg)&&void 0!==z&&z.viewBox||o.svg&&(o.svg.viewBox=Ot.screen.frameSize)):o=this._defaultSlide,null===(f=this._dataSource.slides)||void 0===f||f.splice(p,0,o),this._slideIdx=p,this.openSlide(void 0,this._slideIdx)}copySlide(i){var n,o,r,l,m,y,f;let O=null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(K=>K.id==i))&&void 0!==n?n:this._defaultSlide,p=(null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(O))&&void 0!==r?r:0)+1,z=Object.assign(JSON.parse(JSON.stringify(O)),{id:this.newSlideId,code:void 0,name:`${O.name} + (Copy)`});null===(m=this._dataSource.slides)||void 0===m||m.splice(p,0,z),this.changeSlide(this.slides,this.slideIdx,null!==(y=null===(f=this._dataSource.slides)||void 0===f?void 0:f.length)&&void 0!==y?y:0,this.slide)}moveSlide(i,n){var o,r,l,m,y,f;let O=null!==(o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(z=>z.id==i))&&void 0!==o?o:this._defaultSlide,p=null!==(l=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(O))&&void 0!==l?l:0;null===(y=this._dataSource.slides)||void 0===y||y.splice(p+n,0,null===(f=this._dataSource.slides)||void 0===f?void 0:f.splice(p,1)[0])}deleteSlide(i){var n,o,r,l,m,y;let f=null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(K=>K.id==i))&&void 0!==n?n:this._defaultSlide,O=null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(f))&&void 0!==r?r:0;if(null===(m=this._dataSource.slides)||void 0===m||m.splice(O,1),null!==(y=this._dataSource.slides)&&void 0!==y&&y.length)if(O<this._slideIdx){var p,z;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(z=this._dataSource.slides)||void 0===z?void 0:z.length)&&void 0!==p?p:0,this.slide)}else O==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,o,r,l,m;let y=null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(O=>O.id==i))&&void 0!==n?n:this._defaultSlide,f=null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(y))&&void 0!==r?r:0;if(y.isdeleted=!0,null!==(m=this._dataSource.slides)&&void 0!==m&&null!==(m=m.filter(O=>!O.isdeleted))&&void 0!==m&&m.length){let O=!0;for(;y.isdeleted;)O?f++:f--,this._dataSource.slides[f]?y=this._dataSource.slides[f]:O=!O;this.openSlide(y.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,o,r){this._fnChangeSlides.forEach(l=>l(i,n,o,r))}set node(i){var n,o;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((l,m)=>m==this._slideIdx);null!=r&&null!==(o=r.svg)&&void 0!==o&&o.nodes&&r.svg.nodes.push(i),Ot.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Pt.t)(r),(0,Pt.t)(r,null==r?void 0:r.id)}findNode(i){var n;let o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((K,mt)=>mt==this._slideIdx),r=null==o?void 0:o.svg,l=(K,mt)=>{let yt=null==K?void 0:K.find($t=>$t.id==i);if(yt)return yt.pid=mt,yt;let St=0,Nt=K.length||0;for(;St<Nt&&!yt&&(yt=l(K[St].nodes||[],K[St].id),!yt);)St++;return yt},m=l((null==r?void 0:r.nodes)||[]);var y,f,O,p,z;return m?(m.style=null!==(y=m.style)&&void 0!==y?y:{},m.source=null!==(f=m.source)&&void 0!==f?f:{},m.animate=null!==(O=m.animate)&&void 0!==O?O:{},m.interactive=null!==(p=m.interactive)&&void 0!==p?p:{},m.variable=null!==(z=m.variable)&&void 0!==z?z:{},m):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((y,f)=>f==this._slideIdx),r=null==o?void 0:o.svg,m=y=>{let f=(null==y?void 0:y.find(yt=>yt.id==i))||(y=>{let f=null,O=0,p=y.length||0;for(;O<p&&!f;){if(f=m(y[O].nodes),f){f.pid=y[O].id;break}O++}var z,K,mt,yt,St;return f&&(f.style=null!==(z=f.style)&&void 0!==z?z:{},f.source=null!==(K=f.source)&&void 0!==K?K:{},f.animate=null!==(mt=f.animate)&&void 0!==mt?mt:{},f.interactive=null!==(yt=f.interactive)&&void 0!==yt?yt:{},f.variable=null!==(St=f.variable)&&void 0!==St?St:{}),f})((null==y?void 0:y.filter(yt=>yt.type==w.h.GROUP))||[]);var O,p,z,K,mt;return f&&(f.style=null!==(O=f.style)&&void 0!==O?O:{},f.source=null!==(p=f.source)&&void 0!==p?p:{},f.animate=null!==(z=f.animate)&&void 0!==z?z:{},f.interactive=null!==(K=f.interactive)&&void 0!==K?K:{},f.variable=null!==(mt=f.variable)&&void 0!==mt?mt:{}),f};return m((null==r?void 0:r.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,o,r,l){var m;let y=null===(m=this._dataSource.slides)||void 0===m?void 0:m.find((p,z)=>z==this._slideIdx),f=null==y?void 0:y.svg,O=p=>{let z=[];return p.filter(K=>!K.isdeleted).forEach(K=>{K.type==w.h.GROUP?z=z.concat(O(K.nodes||[])):i>K.size.x||n>K.size.y||o<K.size.x+K.size.width||r<K.size.y+K.size.height||(l?K.type==l&&z.push(K.id):z.push(K.id))}),z};return O((null==f?void 0:f.nodes)||[])}getNodeOnArea(i,n,o,r,l){var m;let y=null===(m=this._dataSource.slides)||void 0===m?void 0:m.find((p,z)=>z==this._slideIdx),f=null==y?void 0:y.svg,O=p=>{let z=[];return p.filter(K=>!K.isdeleted).forEach(K=>{K.type==w.h.GROUP?z=z.concat(O(K.nodes||[])):K.size.x+K.size.width<i||K.size.y+K.size.height<n||K.size.x>o||K.size.y>r||(l?K.type==l&&z.push(K.id):z.push(K.id))}),z};return O((null==f?void 0:f.nodes)||[])}deleteNode(i,n){var o;return this.getNode(i).isdeleted=null==n||n,(0,Pt.t)(this.slide),(0,Pt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var n,o;let r=this.getNode(i),l=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(r)),{id:l})),Object.assign(r,{isdeleted:!0}),(0,Pt.t)(this.slide),(0,Pt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),l}addGroup(i,n){var o;let r=this.getNode(i),l=this.getNode(n);l.nodes=l.nodes||[];let m=Math.ceil(1e9*Math.random());return l.nodes.push(Object.assign(JSON.parse(JSON.stringify(r)),{id:m})),Object.assign(r,{isdeleted:!0}),(0,Pt.t)(this.slide),(0,Pt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),m}setNodeP(i,n){var o;let r=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(l=>l.id==i);r&&(r.pid=n||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,n){var o,r,l,m,y,f;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((p,z)=>{p.index=z+1});let O=(null!==(r=null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l?void 0:l.nodes.length)&&void 0!==r?r:0)+1;i.map(p=>{var z,K;return{id:p,index:null!==(z=null===(K=this.slide)||void 0===K||null===(K=K.svg)||void 0===K||null===(K=K.nodes.find(mt=>mt.id==p))||void 0===K?void 0:K.index)&&void 0!==z?z:0}}).sort((p,z)=>p.index-z.index).forEach(p=>{var K,z;n?null===(K=this.slide)||void 0===K||null===(K=K.svg)||void 0===K||K.nodes.filter((mt,yt)=>mt.id==p.id).forEach(mt=>{mt.index=n+p.index+p.index/1e3}):null===(z=this.slide)||void 0===z||null===(z=z.svg)||void 0===z||z.nodes.filter(mt=>mt.id==p.id).forEach(mt=>{mt.index=O+p.index})}),null===(m=this.slide)||void 0===m||null===(m=m.svg)||void 0===m||m.nodes.sort((p,z)=>{var K,mt;return(null!==(K=p.index)&&void 0!==K?K:0)-(null!==(mt=z.index)&&void 0!==mt?mt:0)}),(0,Pt.$)(this.slide),null===(y=window.document.getElementById(et.F.RESIZE_GROUP))||void 0===y||y.remove(),null===(f=window.document.getElementById(et.F.SELECT_GROUP))||void 0===f||f.remove(),(0,C.D)(Ot.dataSelect.nodes)}sendToBackStep(i,n){var o,r,l,m;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((y,f)=>{y.index=f+1}),i.map(y=>{var f,O;return{id:y,index:null!==(f=null===(O=this.slide)||void 0===O||null===(O=O.svg)||void 0===O||null===(O=O.nodes.find(p=>p.id==y))||void 0===O?void 0:O.index)&&void 0!==f?f:0}}).sort((y,f)=>y.index-f.index).forEach(y=>{var O,f;n?null===(O=this.slide)||void 0===O||null===(O=O.svg)||void 0===O||O.nodes.filter(p=>p.id==y.id).forEach(p=>{p.index=n+y.index+y.index/1e3}):null===(f=this.slide)||void 0===f||null===(f=f.svg)||void 0===f||f.nodes.filter(p=>p.id==y.id).forEach(p=>{p.index=y.index/100-1})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((y,f)=>{var O,p;return(null!==(O=y.index)&&void 0!==O?O:0)-(null!==(p=f.index)&&void 0!==p?p:0)}),(0,Pt.$)(this.slide),null===(l=window.document.getElementById(et.F.RESIZE_GROUP))||void 0===l||l.remove(),null===(m=window.document.getElementById(et.F.SELECT_GROUP))||void 0===m||m.remove(),(0,C.D)(Ot.dataSelect.nodes)}bringToFrontArea(i){var n,o,r,l;let m=i.map(yt=>Ot.data.getNode(yt)).filter(yt=>!yt.isfake),{x1:y,y1:f,x2:O,y2:p}=ie(m),z=this.getNodeOnArea(y,f,O,p);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((yt,St)=>{yt.index=St+1});let K=z.map(yt=>{var St,Nt;return null!==(St=null===(Nt=this.slide)||void 0===Nt||null===(Nt=Nt.svg)||void 0===Nt||null===(Nt=Nt.nodes.find($t=>$t.id==yt))||void 0===Nt?void 0:Nt.index)&&void 0!==St?St:0}),mt=Math.max.apply(null,K);i.forEach((yt,St)=>{var Nt;null===(Nt=this.slide)||void 0===Nt||null===(Nt=Nt.svg)||void 0===Nt||Nt.nodes.filter($t=>$t.id==yt).forEach($t=>{$t.index=mt+(St+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((yt,St)=>{var Nt,$t;return(null!==(Nt=yt.index)&&void 0!==Nt?Nt:0)-(null!==($t=St.index)&&void 0!==$t?$t:0)}),(0,Pt.$)(this.slide),null===(r=window.document.getElementById(et.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(l=window.document.getElementById(et.F.SELECT_GROUP))||void 0===l||l.remove(),(0,C.D)(Ot.dataSelect.nodes)}sendToBackArea(i){var n,o,r,l;let m=i.map(yt=>Ot.data.getNode(yt)).filter(yt=>!yt.isfake),{x1:y,y1:f,x2:O,y2:p}=ie(m),z=this.getNodeOnArea(y,f,O,p);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((yt,St)=>{yt.index=St+1});let K=z.map(yt=>{var St,Nt;return null!==(St=null===(Nt=this.slide)||void 0===Nt||null===(Nt=Nt.svg)||void 0===Nt||null===(Nt=Nt.nodes.find($t=>$t.id==yt))||void 0===Nt?void 0:Nt.index)&&void 0!==St?St:0}),mt=Math.min.apply(null,K)-1;i.forEach((yt,St)=>{var Nt;null===(Nt=this.slide)||void 0===Nt||null===(Nt=Nt.svg)||void 0===Nt||Nt.nodes.filter($t=>$t.id==yt).forEach($t=>{$t.index=mt+(St+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((yt,St)=>{var Nt,$t;return(null!==(Nt=yt.index)&&void 0!==Nt?Nt:0)-(null!==($t=St.index)&&void 0!==$t?$t:0)}),(0,Pt.$)(this.slide),null===(r=window.document.getElementById(et.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(l=window.document.getElementById(et.F.SELECT_GROUP))||void 0===l||l.remove(),(0,C.D)(Ot.dataSelect.nodes)}}const ie=j=>{let i=999999,n=999999,o=-999999,r=-999999;return j.forEach(l=>{i=Math.min(i,l.size.x),n=Math.min(n,l.size.y),o=Math.max(o,l.size.x+l.size.width),r=Math.max(r,l.size.y+l.size.height)}),{x1:i,y1:n,x2:o,y2:r}};class ye{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":Ot.data.deleteNode(n.from.id);break;case"edit":break;case"delete":Ot.data.deleteNode(n.from.id,!1);break;case"size":{let{id:o,type:r,size:l,attribute:m}=Ot.data.getNode(n.from.id);Object.assign(l,n.from.size),Object.assign(m,(0,N.xW)(r,l,m)),(0,E.tD)(window.document.getElementById(o),m);break}case"attribute":{let{id:o,attribute:r}=Ot.data.getNode(n.from.id);Object.assign(r,n.from.attribute),(0,E.tD)(window.document.getElementById(o),r);break}case"style":{let{id:o,style:r}=Ot.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.style),(0,E.c_)(window.document.getElementById(o),r);break}case"source":{let{id:o,type:r,source:l}=Ot.data.getNode(n.from.id);Object.assign(null!=l?l:{},n.from.source),(0,E.KG)(window.document.getElementById(o),r,null!=l?l:{});break}case"animate":{let{animate:o}=Ot.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.animate);break}case"interactive":{let{interactive:o}=Ot.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.interactive);break}case"variable":{let{variable:o}=Ot.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.variable);break}}}),Ot.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":Ot.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":Ot.data.deleteNode(n.to.id,!0);break;case"size":{let{id:o,type:r,size:l,attribute:m}=Ot.data.getNode(n.to.id);Object.assign(l,n.to.size),Object.assign(m,(0,N.xW)(r,l,m)),(0,E.tD)(window.document.getElementById(o),m);break}case"attribute":{let{id:o,attribute:r}=Ot.data.getNode(n.to.id);Object.assign(r,n.to.attribute),(0,E.tD)(window.document.getElementById(o),r);break}case"style":{let{id:o,style:r}=Ot.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.style),(0,E.c_)(window.document.getElementById(o),r);break}case"source":{let{id:o,type:r,source:l}=Ot.data.getNode(n.to.id);Object.assign(null!=l?l:{},n.to.source),(0,E.KG)(window.document.getElementById(o),r,null!=l?l:{});break}case"animate":{let{animate:o}=Ot.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.animate);break}case"interactive":{let{interactive:o}=Ot.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.interactive);break}case"variable":{let{variable:o}=Ot.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.variable);break}}}),Ot.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class ae{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,o;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,o){var r;if(!(i<.01||i>100)){if(n=null!==(r=n)&&void 0!==r?r:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var l={x:Math.max(0,Math.min((0,d.z)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,d.z)(n.y/this._height,1e3),1))},m={x:(this._width/i-this._width/this._scale)*l.x,y:(this._height/i-this._height/this._scale)*l.y};this._dislocation.x+=m.x,this._dislocation.y+=m.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,E.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var se=v(6195);class xe{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,se.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,se._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var Ee=v(5619),Pe=v(334),be=v(3591),me=function(j){return j&&JSON.parse(JSON.stringify(j))},Be=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Ve=[],qe={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},Xe={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class ei{constructor(){this._data_variables=me(Be).concat(me(Ve)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=me(Be).concat(me(Ve)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(o=>(this._data_variables.map(r=>r.change||[]).forEach(r=>{o=o.concat(r)}),o))([]),Be.forEach(o=>{var r=this._data_variables.filter(l=>l.key==o.key);r.length?r.forEach(function(l,m,y){l.type=o.type,l.readonly=o.readonly,l.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return me(qe)}getConditionTemp(){return me(Xe)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?me((j=this._data_variables,i="key",function(n){for(var o of j.map(function(r){return r[i]}).sort())j.filter(function(r){return r[i]==o}).forEach(function(r){n.push(r)}),j=j.filter(function(r){return r[i]!=o});return n}([]))):me(Be).concat(me(Ve));var j,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Be.forEach(n=>{var o=this._data_variables.filter(r=>r.key==n.key);o.length?o.forEach((r,l,m)=>{r.type=n.type,r.readonly=n.readonly,r.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?me(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,o){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),o||(o=(this._data_variables.filter(l=>l.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var r=this._data_variables.filter(l=>l.key==i);r.length?r.forEach(function(l,m,y){l.value=n,l.type=o}):this._data_variables.push({key:i,value:n,type:o})}}getValue(i,n){if(!i)return"";var o=this._data_variables.filter(function(m){return m.key==i});if(o.length){var l,r=o[0]||{};switch(this.OnGetActionExecuting(r),n||(n=r.type||null),n){case"string":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":"string"==typeof r.value?r.value||"":r.value.toString().trim();break;case"number":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?0:"number"==typeof r.value?r.value||0:parseFloat(r.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(r.value)>=0?l=!1:"boolean"==typeof r.value?l=r.value:(l=(r.value+"").toLowerCase(),l="1"==r.value||"true"==r.value||"yes"==r.value||"dung"==r.value);break;case"audio-src":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${r.value}"></source></audio>`:"";break;case"video-src":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${r.value}"></source></video>`:"";break;case"img-src":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value?`<img style="width:100%;vertical-align:middle;" src="${r.value}"/>`:"";break;default:l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value}return this.OnGetActionExecuted(r),l}return null}setValue(i,n,o){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),o||(o=(this._data_variables.filter(function(m){return m.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var r=this._data_variables.filter(function(m){return m.key==i});if(r.length){var l=r[0];this.OnSetActionExecuting(l),l&&(l.value=n),this.OnSetActionExecuted(l)}}}getConditionAll(){return me(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?me(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,o){return n.idx-o.idx})):{}}switchCondition(i,n,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),o.split(";").map(function(r){return n==r.trim()?1:0}).reduce(function(r,l){return r+l})>0):n==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==o.split(";").map(function(r){return n==r.trim()?1:0}).reduce(function(r,l){return r+l})):n!=o;case">=":return n>=o;case"<=":return n<=o;case">":return n>o;case"<":return n<o;case"\u2208":return o=(o+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),o.split(";").map(function(r){return n.indexOf(r.trim())>=0?1:0}).reduce(function(r,l){return r+l})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==o.split(";").map(function(r){return n.indexOf(r.trim())>=0?1:0}).reduce(function(r,l){return r+l});default:return!1}}switchOperator(i,n,o){switch(i){case"+":return n+o;case"-":return n-o;case"*":return n*o;case"/":return n/o;case"=":return o;case"=!":return!o;case"==":return n==o;case"!=":return n!=o}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(r,l){return r+l});case"sub":return n.reduce(function(r,l){return r-l});case"pro":return n.reduce(function(r,l){return r*l});case"div":return n.reduce(function(r,l){return r/l});case"avg":var o=n.reduce(function(r,l){return r+l})/(n.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(r,l){return r&&l});case"or":return n.reduce(function(r,l){return r||l});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(o=>this.switchValueType_Condition(Object.assign(me(n),{variable:o}))?0:1).reduce(function(o,r){return o+r})?0:1;default:return 0}}).reduce((n,o)=>(null!=n?n:0)+(null!=o?o:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var o of n.variables)this.setValue(o,this.getValueOperator(Object.assign(me(n),{variable:o})));break;case"slide":Ee.J.runSlide(void 0,void 0,n.slide);break;case"node":{var r;(0,be.GD)({id:n.node,nodeStatus:Ee.J.nodeStatus,slideStatus:Ee.J.slideStatus});let l=Ee.J.findNode(n.node);null!=l&&null!==(r=l.interactive)&&void 0!==r&&r.click&&(0,Pe.J)(l,Ee.J.nodeStatus,Ee.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class ii{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,o){if(this._pointer_type=i,n)switch(i){case T.P.PEN:this._pen_type=n;break;case T.P.SHAPE:this._shape_type=n,o&&n===w.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case T.P.PEN:this._pen_type||(this._pen_type=F.F.DRAW);break;case T.P.SHAPE:this._shape_type||(this._shape_type=w.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,o){this._fnChangePointerTypes.forEach(r=>r(i,n,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,o){this._fnChangePointerTypeTemps.forEach(r=>r(i,n,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,o){this._fnChangePenTypes.forEach(r=>r(i,n,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,o){this._fnChangeShapeTypes.forEach(r=>r(i,n,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,o){this._fnChangePolygonTypes.forEach(r=>r(i,n,o))}set onchange(i){this._fnChanges.push(i)}change(i,n,o){this._fnChanges.forEach(r=>r(i,n,o))}}const Ot=new class ni{constructor(){this._container="",this._svg="",this._screen=ae.prototype,this._data=Xt.prototype,this._dataSelect=bt.prototype,this._slide=kt.prototype,this._history=ye.prototype,this._attribute=xe.prototype,this._pointer=ii.prototype,this._variable=ei.prototype,this._data=new Xt,this._dataSelect=new bt,this._slide=new kt,this._history=new ye,this._attribute=new xe,this._pointer=new ii,this._variable=new ei,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,variable:this._variable.get,resources:this._data.getResource,fonts:this._data.getFonts,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,o,r,l;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(r=null==i?void 0:i.left)&&void 0!==r?r:0,y:null!==(l=null==i?void 0:i.top)&&void 0!==l?l:0},width:null!=n?n:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new ae,(j=>{new E.cR(j.container,j.target);var i=(r,l,m,y)=>{switch(r){case T.P.POINTER:jQuery(j.target).css({cursor:"auto"});break;case T.P.HAND:y?jQuery(j.target).css({cursor:"grabbing"}):jQuery(j.target).css({cursor:"grab"});break;case T.P.PEN:switch(l){case F.F.DRAW:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case F.F.HIGHTLIGH:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case T.P.ERASER:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case T.P.SHAPE:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case T.P.TEXT:case T.P.FOREIGNOBJECT:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};Ot.pointer.onchange=(r,l,m)=>{i(r,l)},jQuery(j.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",r=>{i(Ot.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",r=>{i(Ot.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",r=>{r.ctrlKey&&r.preventDefault()},{passive:!1}),jQuery(j.container).off("wheel.icdt-init").on("wheel.icdt-init",r=>{var l;r.preventDefault();let m=null!==(l=r.originalEvent)&&void 0!==l?l:r;if(!m.deltaX&&m.deltaY!=Math.floor(m.deltaY)||m.ctrlKey){var y=Ot.screen.scale;Ot.screen.scaleTo(y-.04*y*(m.deltaY>0?1:-1),(0,it.D)({x:r.clientX,y:r.clientY},1,{x:0,y:0},Ot.screen.offset))}else Ot.screen.move(Ot.screen.dislocation,{x:-m.deltaX,y:-m.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{Ot.screen.actived=!!jQuery(r.target).parents(Ot.container).length}),jQuery(j.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",r=>{Ot.screen.actived=!0}),jQuery(j.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",r=>{Ot.screen.actived=!1,Ot.pointer.pointer_type_temp==T.P.HAND&&(Ot.pointer.pointer_type_temp=T.P.POINTER)}),jQuery(j.container).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{0==r.button&&(j.container.includes("#")&&j.container.includes(r.target.getAttribute("id"))||j.container.includes(".")&&j.container.includes(r.target.getAttribute("class"))||j.container.includes(r.target.nodeName))&&(Ot.pointer.pointer_type_temp||Ot.pointer.pointer_type)===T.P.POINTER&&(Ot.dataSelect.ids=[])}),jQuery(j.container).off("touchmove.icdt-init").on("touchmove.icdt-init",r=>{r.preventDefault()});const n=r=>{switch(Ot.pointer.pointer_type_temp||Ot.pointer.pointer_type){case T.P.POINTER:D(r);break;case T.P.HAND:(j=>{(0,dt.I)(j,new x,1,{x:0,y:0})})(r);break;case T.P.PEN:(0,Kt.u)(r);break;case T.P.SHAPE:(j=>{var i=null;switch(Ot.pointer.shape_type){case w.h.CIRCLE:i=new I;break;case w.h.ELLIPSE:i=new B;break;case w.h.LINE:i=new V;break;case w.h.RECT:i=new J;break;case w.h.POLYGON:var n;i=new Bt(null===(n=Z.find(o=>o.type==Ot.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case w.h.FOREIGNOBJECT:i=new ut;break;case w.h.IMAGE:i=new ne;break;case w.h.TEXT:case w.h.PATH:i=new Y}i&&(0,dt.I)(j,i)})(r);break;case T.P.FOREIGNOBJECT:(j=>{(0,dt.I)(j,new ut)})(r);break;case T.P.IMAGE:(j=>{(0,dt.I)(j,new ne)})(r);break;case T.P.TEXT:(j=>{(0,dt.I)(j,new R)})(r);break;case T.P.ERASER:(j=>{(0,dt.I)(j,new Yt)})(r);break;case T.P.INDEX:(0,_.h)(r)}};let o=!1;jQuery(j.target).off("touchstart.icdt-init").on("touchstart.icdt-init",r=>{o=!0,n({touchEvent:r})}),jQuery(j.target).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{if(1!=r.button){if(o)return void(o=!1);n({mouseEvent:r})}}),j.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",r=>{Ot.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,Ct.K)(r))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",r=>{Ot.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,Ct.K)(r))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(he,Mt,v)=>{v.d(Mt,{h:()=>A,y:()=>S});var T=v(7873),E=v(6611),et=v(9506),N=v(1308),dt=v(5970);const A=x=>{var w,H,Z,lt;let d=(null===(w=x.mouseEvent)||void 0===w?void 0:w.target)||(null===(H=x.touchEvent)||void 0===H?void 0:H.target),I=(null==d?void 0:d.getAttribute("id"))||"",b=null==d?void 0:d.nodeName,B=jQuery(d).parents("g[id]").attr("id")||"";if(![T.F.INDEX_GROUP].includes(B))if(null!==(Z=x.mouseEvent)&&void 0!==Z&&Z.altKey||null!==(lt=x.touchEvent)&&void 0!==lt&&lt.altKey||!I||I.match(/[^0-9]/)||!E.L.dataSelect.nodeName.includes(b)){var pt;E.L.dataSelect.ids.length&&(E.L.dataSelect.ids=[]),(0==(null===(pt=x.mouseEvent)||void 0===pt?void 0:pt.button)||x.touchEvent)&&((x,w)=>{let I=(0,dt.RY)(T.F.SCAN_GROUP,"g"),b=(0,et.CE)(0,0,1,1);(0,dt.xJ)(I,b),((x,w,H,Z)=>{(0,N.I)(x,{start:I=>{},move:(I,b)=>{((I,b,B,pt)=>{w=(0,et.CE)(I,b,B,pt),(0,dt.xJ)(H,w)})(b[0][0],b[0][1],I.x,I.y)},end:(I,b)=>{null==H||H.remove(),E.L.dataSelect.ids=E.L.data.getNodeInArea(Math.min(b[0][0],I.x),Math.min(b[0][1],I.y),Math.max(b[0][0],I.x),Math.max(b[0][1],I.y)),Z(E.L.dataSelect.nodes)}})})(x,b,I,w)})(x,D)}else{var J,gt;let Bt=parseFloat(I||"0");E.L.dataSelect.ids=null!==(J=x.mouseEvent)&&void 0!==J&&J.shiftKey||null!==(gt=x.touchEvent)&&void 0!==gt&&gt.shiftKey?[Bt].concat(E.L.dataSelect.ids).filter((V,It,Et)=>Et.indexOf(V)==It):[Bt],D(E.L.dataSelect.nodes)}},D=x=>{var w,H;let Z=1;var lt,d;if(x.length&&(Z=Math.max.apply(null,null!==(lt=null===(d=E.L.data.slide)||void 0===d||null===(d=d.svg)||void 0===d?void 0:d.nodes.map(b=>{var B;return null!==(B=b.idx)&&void 0!==B?B:0}))&&void 0!==lt?lt:[0])+1),1==x.length)x[0].idx||(x[0].idx=Z,x[0].time=0);else if(x.length>=0){let b=x.map(pt=>{var J;return null!==(J=pt.idx)&&void 0!==J?J:0}).filter(pt=>pt>0),B=b.length?Math.min.apply(null,b):Z;x.forEach(pt=>{var J;pt.idx=B,pt.time=null!==(J=pt.time)&&void 0!==J?J:0})}let I=(0,dt.RY)(T.F.INDEX_GROUP,"g");(0,dt.IA)(I,null!==(w=null===(H=E.L.data.slide)||void 0===H||null===(H=H.svg)||void 0===H?void 0:H.nodes)&&void 0!==w?w:[])},S=x=>{var w,H,Z;null!=x&&null!==(w=x.svg)&&void 0!==w&&w.nodes&&x.svg.nodes.forEach(d=>{d.idx=0,d.time=null});let lt=(0,dt.RY)(T.F.INDEX_GROUP,"g");(0,dt.IA)(lt,null!==(H=null===(Z=E.L.data.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z?void 0:Z.nodes)&&void 0!==H?H:[])}},7135:(he,Mt,v)=>{v.d(Mt,{K:()=>w,X:()=>x});var T=v(6195),E=v(1477),et=v(3603),N=v(6611),dt=v(1026),C=v(9841),c=v(2492),A=v(6752),D=v(3138);const x=new class S{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:E.r.Escape,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:E.r.Delete,fn:()=>{N.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:E.r.Space,fn:()=>{N.L.pointer.pointer_type_temp=et.P.HAND}},this.onchange={type:"keyup",key:E.r.Space,fn:()=>{N.L.pointer.pointer_type_temp=et.P.POINTER}},this.onchange={type:"keydown",key:E.r.ArrowLeft,fn:()=>{N.L.dataSelect.ids.length||N.L.data.backSlide()}},this.onchange={type:"keydown",key:E.r.ArrowRight,fn:()=>{N.L.dataSelect.ids.length||N.L.data.nextSlide()}},this.onchange={type:"keydown",key:E.r.ArrowLeft,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(Z=>{(0,A.ei)(Z,(0,c.z)(Z.size.x-(0,C.$)(1)))}),(0,D.D)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowRight,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(Z=>{(0,A.ei)(Z,(0,c.z)(Z.size.x+(0,C.$)(1)))}),(0,D.D)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowUp,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(Z=>{(0,A.ZF)(Z,(0,c.z)(Z.size.y-(0,C.$)(1)))}),(0,D.D)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowDown,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(Z=>{(0,A.ZF)(Z,(0,c.z)(Z.size.y+(0,C.$)(1)))}),(0,D.D)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.Digit1,fn:Z=>{Z.shiftKey&&(N.L.reloadView(),N.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:E.r.KeyA,fn:Z=>{Z.ctrlKey&&(N.L.dataSelect.ids=N.L.data.getNodeAll(),(0,D.D)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.KeyC,fn:Z=>{if(Z.ctrlKey){let lt=N.L.dataSelect.nodes;lt&&(0,T.IB)({params:{type:"nodes",nodes:lt}})}}},this.onchange={type:"keydown",key:E.r.KeyV,fn:Z=>{Z.ctrlKey&&(0,T.A9)({callback:lt=>{var d,I;"nodes"==(null==lt?void 0:lt.type)&&null!=lt&&null!==(d=lt.nodes)&&void 0!==d&&d.length&&(null==lt||null===(I=lt.nodes)||void 0===I||I.forEach(b=>{Z.shiftKey||N.L.data.findNode(b.id).id&&(b.size.x+=16,b.size.y+=16),b.id=Math.ceil(1e9*Math.random()),N.L.data.node=b}),(0,dt.t)(N.L.data.slide))}})}},this.onchange={type:"keydown",key:E.r.KeyZ,fn:Z=>{Z.ctrlKey&&Z.shiftKey?N.L.history.redo():Z.ctrlKey&&N.L.history.undo()}},this.onchange={type:"keydown",key:E.r.BracketLeft,fn:Z=>{Z.ctrlKey&&Z.shiftKey?N.L.data.sendToBack(N.L.dataSelect.ids):Z.ctrlKey?N.L.data.sendToBackStep(N.L.dataSelect.ids,-2):N.L.data.sendToBackArea(N.L.dataSelect.ids)}},this.onchange={type:"keydown",key:E.r.BracketRight,fn:Z=>{Z.ctrlKey&&Z.shiftKey?N.L.data.bringToFront(N.L.dataSelect.ids):Z.ctrlKey?N.L.data.bringToFrontStep(N.L.dataSelect.ids,1):N.L.data.bringToFrontArea(N.L.dataSelect.ids)}}}set onchange(Z){let lt=this._fnChanges.find(d=>d.eventType==Z.type&&d.eventKey==Z.key);lt?lt.fns.push(Z.fn):this._fnChanges.push({eventType:Z.type,eventKey:Z.key,fns:[Z.fn]})}change(Z,lt,d){var I;null===(I=this._fnChanges.find(b=>b.eventType==Z&&b.eventKey==lt))||void 0===I||I.fns.forEach(b=>b(d))}},w=H=>{x.change(H.type,H.keyCode||H.which||H.charCode||0,H)}},669:(he,Mt,v)=>{v.d(Mt,{O:()=>A});var T=v(6407),E=v(5970),et=v(1131),N=v(9841),dt=v(7873),C=v(6611),c=v(1281);class A{constructor(S,x){var w,H;let Z={stroke:"#FF0000",strokeWidth:(0,N.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,N.$)(8)},{element:lt}=(0,T.X)(Math.ceil(1e9*Math.random()),{size:x});window.document.getElementById(dt.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(gt=>null==gt?void 0:gt.remove()),window.document.getElementById(dt.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(gt=>null==gt?void 0:gt.remove()),null===(w=window.document.getElementById(dt.F.INTERACTIVE_GROUP))||void 0===w||w.appendChild(lt);var b=gt=>{if(!gt.length)return;let Bt=[];if(1==gt.length){var ht;let{size:V}=null!==(ht=null!=S?S:C.L.dataSelect.nodes[0])&&void 0!==ht?ht:{};if(!V)return;Bt=[[V.x+V.width/2,V.y+V.height/2],gt[0]]}else Bt=[...gt];pt(Bt),B(Bt[0],"start"),B(Bt[Bt.length-1],"end")},B=(gt,Bt)=>{gt&&((ht=>{let{element:V}=(0,c.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==Bt?"#FF0000":"#00BA00",strokeWidth:(0,N.$)(1)},size:{x:gt[0]-5,y:gt[1]-5,width:10,height:10}});null===(ht=window.document.getElementById(dt.F.INTERACTIVE_GROUP))||void 0===ht||ht.prepend(V)})(),((ht,V)=>{let{size:It}=null!==(ht=null!=S?S:C.L.dataSelect.nodes[0])&&void 0!==ht?ht:{};if(!It)return;let Et=[[gt[0]-It.width/2,gt[1]-It.height/2],[gt[0]+It.width/2,gt[1]-It.height/2],[gt[0]+It.width/2,gt[1]+It.height/2],[gt[0]-It.width/2,gt[1]+It.height/2],[gt[0]-It.width/2,gt[1]-It.height/2]],{element:Y}=(0,T.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,N.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,N.$)(8)},size:{x:0,y:0,width:10,height:10,points:Et}});null===(V=window.document.getElementById(dt.F.INTERACTIVE_GROUP))||void 0===V||V.prepend(Y)})())},pt=gt=>{let ht=et.n8j().x(V=>V[0]).y(V=>V[1]).curve(et.qrM)(gt);lt.setAttribute("d",ht)};(0,E.tD)(lt,Z),b(null!==(H=null==x?void 0:x.points)&&void 0!==H?H:[]);let J="";return{start:gt=>{J=`M ${gt.x} ${gt.y} L ${gt.x} ${gt.y}`},move:(gt,Bt)=>{J+=` ${gt.x} ${gt.y}`,lt.setAttribute("d",J)},end:(gt,Bt)=>{b(Bt),Bt.length&&(window.interactivePoints=Bt)}}}}},4979:(he,Mt,v)=>{v.d(Mt,{z:()=>Z,u:()=>H});var T=v(7873),E=v(2409),et=v(6611),N=v(1308),dt=v(5970),C=v(1131),c=v(6407),A=v(1999),D=v(4896);class S{constructor(){let d={stroke:et.L.attribute.stroke,strokeWidth:et.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:I,element:b,attribute:B,size:pt}=(0,c.X)(Math.ceil(1e9*Math.random()),{attribute:d});(0,dt.tD)(b,B);let J="",gt="";return{start:ht=>{J=`M ${ht.x} ${ht.y} L ${ht.x} ${ht.y}`},move:(ht,V)=>{((ht,V)=>{J+=` ${ht} ${V}`,b.setAttribute("d",J)})(ht.x,ht.y)},end:(ht,V)=>{var It;V.length>=3?(gt=null!==(It=C.n8j().x(q=>q[0]).y(q=>q[1]).curve(C.qrM)(V))&&void 0!==It?It:"",b.setAttribute("d",gt)):b.setAttribute("d",J);let Et=(0,D.CS)(gt||J),{minX:Y,minY:Tt,maxX:ut,maxY:Gt}=(0,D.lP)(Et);pt.x=Y,pt.y=Tt,pt.width=ut-Y||1,pt.height=Gt-Tt||1,pt.ratioMaps=(0,D.nf)(pt,Et),et.L.data.node=Object.assign({id:I,type:A.h.PATH,name:"Path"},{size:pt,attribute:B})}}}}class x{constructor(){let d={stroke:et.L.attribute.stroke,strokeOpacity:.4,strokeWidth:et.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:I,element:b,attribute:B,size:pt}=(0,c.X)(Math.ceil(1e9*Math.random()),{attribute:d});(0,dt.tD)(b,B);let J="";return{start:ht=>{J=`M ${ht.x} ${ht.y} L ${ht.x} ${ht.y}`},move:(ht,V)=>{((ht,V)=>{J+=` ${ht} ${V}`,b.setAttribute("d",J)})(ht.x,ht.y)},end:(ht,V)=>{let It=(0,D.CS)(J),{minX:Et,minY:Y,maxX:Tt,maxY:ut}=(0,D.lP)(It);pt.x=Et,pt.y=Y,pt.width=Tt-Et||1,pt.height=ut-Y||1,pt.ratioMaps=(0,D.nf)(pt,It),et.L.data.node=Object.assign({id:I,type:A.h.PATH,name:"Path"},{size:pt,attribute:B})}}}}var w=v(669);const H=lt=>{switch(et.L.pointer.pen_type){case E.F.DRAW:(0,N.I)(lt,new S);break;case E.F.HIGHTLIGH:(0,N.I)(lt,new x);break;case E.F.INTERACTIVE:Z(lt)}},Z=lt=>{var d,I;let b=(0,dt.RY)(T.F.INTERACTIVE_GROUP,"g"),B=null!==(d=null===(I=et.L.data.slide)||void 0===I||null===(I=I.svg)||void 0===I?void 0:I.viewBox)&&void 0!==d?d:(()=>{let{width:pt,height:J}=et.L.screen.get;return{x:0,y:0,width:pt,height:J}})();(0,dt.KP)(b,B),lt&&(0,N.I)(lt,new w.O)}},3138:(he,Mt,v)=>{v.d(Mt,{D:()=>S});var T=v(7873),E=v(6611),et=v(9506),N=v(1308),dt=v(5970),C=v(2492);const D=(x,w,H,Z,lt)=>{let{x:d,y:I,width:b,height:B}=H;0==b&&(b=1),0==B&&(B=1);let pt=Z.map(Et=>Object.assign({},Et.size)),gt=[],V=!1;(0,N.I)(x,{start:Et=>{Z.forEach(Et=>{let{id:Y,size:Tt,attribute:ut}=Et;gt.push({id:Y,type:"size",from:JSON.parse(JSON.stringify({id:Y,size:Tt,attribute:ut}))})})},move:(Et,Y)=>{((Et,Y,Tt,ut)=>{let Gt=Tt-Et,ne=ut-Y;(()=>{let Ct,q=(b||1)/(B||1);switch(w){case"rect-center":var Kt,Dt;Ct=null!==(Kt=x.mouseEvent)&&void 0!==Kt&&Kt.shiftKey||null!==(Dt=x.touchEvent)&&void 0!==Dt&&Dt.shiftKey?Math.abs(Tt-Et)>=Math.abs(ut-Y)?{x:d+Tt-Et,y:I,width:b,height:B}:{x:d,y:I+ut-Y,width:b,height:B}:{x:d+Tt-Et,y:I+ut-Y,width:b,height:B};break;case"rect-top-left":var wt,M,W,s,tt,_t,Lt,jt;Ct=(null!==(wt=x.mouseEvent)&&void 0!==wt&&wt.shiftKey||null!==(M=x.touchEvent)&&void 0!==M&&M.shiftKey)&&(null!==(W=x.mouseEvent)&&void 0!==W&&W.altKey||null!==(s=x.touchEvent)&&void 0!==s&&s.altKey)?q>=1?{x:d+(Tt-Et),y:I+(Tt-Et)/q,width:b-2*(Tt-Et),height:B-2*(Tt-Et)/q}:{x:d+(ut-Y)*q,y:I+(ut-Y),width:b-2*(ut-Y)*q,height:B-2*(ut-Y)}:null!==(tt=x.mouseEvent)&&void 0!==tt&&tt.shiftKey||null!==(_t=x.touchEvent)&&void 0!==_t&&_t.shiftKey?q>=1?{x:d+(Tt-Et),y:I+(Tt-Et)/q,width:b-(Tt-Et),height:B-(Tt-Et)/q}:{x:d+(ut-Y)*q,y:I+(ut-Y),width:b-(ut-Y)*q,height:B-(ut-Y)}:null!==(Lt=x.mouseEvent)&&void 0!==Lt&&Lt.altKey||null!==(jt=x.touchEvent)&&void 0!==jt&&jt.altKey?{x:d+(Tt-Et),y:I+(ut-Y),width:b-2*(Tt-Et),height:B-2*(ut-Y)}:{x:d+(Tt-Et),y:I+(ut-Y),width:b-(Tt-Et),height:B-(ut-Y)};break;case"rect-top-right":var Ft,Wt,Vt,re,Rt,st,Yt,P;Ct=(null!==(Ft=x.mouseEvent)&&void 0!==Ft&&Ft.shiftKey||null!==(Wt=x.touchEvent)&&void 0!==Wt&&Wt.shiftKey)&&(null!==(Vt=x.mouseEvent)&&void 0!==Vt&&Vt.altKey||null!==(re=x.touchEvent)&&void 0!==re&&re.altKey)?q>=1?{x:d-(Tt-Et),y:I-(Tt-Et)/q,width:b+2*(Tt-Et),height:B+2*(Tt-Et)/q}:{x:d+(ut-Y)*q,y:I+(ut-Y),width:b-2*(ut-Y)*q,height:B-2*(ut-Y)}:null!==(Rt=x.mouseEvent)&&void 0!==Rt&&Rt.shiftKey||null!==(st=x.touchEvent)&&void 0!==st&&st.shiftKey?q>=1?{x:d,y:I-(Tt-Et)/q,width:b+(Tt-Et),height:B+(Tt-Et)/q}:{x:d,y:I+(ut-Y),width:b-(ut-Y)*q,height:B-(ut-Y)}:null!==(Yt=x.mouseEvent)&&void 0!==Yt&&Yt.altKey||null!==(P=x.touchEvent)&&void 0!==P&&P.altKey?{x:d-(Tt-Et),y:I+(ut-Y),width:b+2*(Tt-Et),height:B-2*(ut-Y)}:{x:d,y:I+(ut-Y),width:b+(Tt-Et),height:B-(ut-Y)};break;case"rect-bottom-left":var h,R,nt,rt,G,_,F,it;Ct=(null!==(h=x.mouseEvent)&&void 0!==h&&h.shiftKey||null!==(R=x.touchEvent)&&void 0!==R&&R.shiftKey)&&(null!==(nt=x.mouseEvent)&&void 0!==nt&&nt.altKey||null!==(rt=x.touchEvent)&&void 0!==rt&&rt.altKey)?q>=1?{x:d+(Tt-Et),y:I+(Tt-Et)/q,width:b-2*(Tt-Et),height:B-2*(Tt-Et)/q}:{x:d-(ut-Y)*q,y:I-(ut-Y),width:b+2*(ut-Y)*q,height:B+2*(ut-Y)}:null!==(G=x.mouseEvent)&&void 0!==G&&G.shiftKey||null!==(_=x.touchEvent)&&void 0!==_&&_.shiftKey?q>=1?{x:d+(Tt-Et),y:I,width:b-(Tt-Et),height:B-(Tt-Et)/q}:{x:d-(ut-Y)*q,y:I,width:b+(ut-Y)*q,height:B+(ut-Y)}:null!==(F=x.mouseEvent)&&void 0!==F&&F.altKey||null!==(it=x.touchEvent)&&void 0!==it&&it.altKey?{x:d+(Tt-Et),y:I-(ut-Y),width:b-2*(Tt-Et),height:B+2*(ut-Y)}:{x:d+(Tt-Et),y:I,width:b-(Tt-Et),height:B+(ut-Y)};break;case"rect-bottom-right":var ft,xt,bt,X,ct,kt,Pt,Qt;Ct=(null!==(ft=x.mouseEvent)&&void 0!==ft&&ft.shiftKey||null!==(xt=x.touchEvent)&&void 0!==xt&&xt.shiftKey)&&(null!==(bt=x.mouseEvent)&&void 0!==bt&&bt.altKey||null!==(X=x.touchEvent)&&void 0!==X&&X.altKey)?q>=1?{x:d-(Tt-Et),y:I-(Tt-Et)/q,width:b+2*(Tt-Et),height:B+2*(Tt-Et)/q}:{x:d-(ut-Y)*q,y:I-(ut-Y),width:b+2*(ut-Y)*q,height:B+2*(ut-Y)}:null!==(ct=x.mouseEvent)&&void 0!==ct&&ct.shiftKey||null!==(kt=x.touchEvent)&&void 0!==kt&&kt.shiftKey?q>=1?{x:d,y:I,width:b+(Tt-Et),height:B+(Tt-Et)/q}:{x:d,y:I,width:b+(ut-Y)*q,height:B+(ut-Y)}:null!==(Pt=x.mouseEvent)&&void 0!==Pt&&Pt.altKey||null!==(Qt=x.touchEvent)&&void 0!==Qt&&Qt.altKey?{x:d-(Tt-Et),y:I-(ut-Y),width:b+2*(Tt-Et),height:B+2*(ut-Y)}:{x:d,y:I,width:b+(Tt-Et),height:B+(ut-Y)};break;case"rect-top":var Xt,ie,ye,ae;Ct=null!==(Xt=x.mouseEvent)&&void 0!==Xt&&Xt.shiftKey||null!==(ie=x.touchEvent)&&void 0!==ie&&ie.shiftKey?{x:d+ne/2*q,y:I+ne,width:b-ne*q,height:B-ne}:null!==(ye=x.mouseEvent)&&void 0!==ye&&ye.altKey||null!==(ae=x.touchEvent)&&void 0!==ae&&ae.altKey?{x:d,y:I+ne,width:b,height:B-2*ne}:{x:d,y:I+ne,width:b,height:B-ne};break;case"rect-bottom":var se,xe,Ee,Pe;Ct=null!==(se=x.mouseEvent)&&void 0!==se&&se.shiftKey||null!==(xe=x.touchEvent)&&void 0!==xe&&xe.shiftKey?{x:d-ne/2*q,y:I,width:b+ne*q,height:B+ne}:null!==(Ee=x.mouseEvent)&&void 0!==Ee&&Ee.altKey||null!==(Pe=x.touchEvent)&&void 0!==Pe&&Pe.altKey?{x:d,y:I-ne,width:b,height:B+2*ne}:{x:d,y:I,width:b,height:B+ne};break;case"rect-left":var be,Ce,me,Ke;Ct=null!==(be=x.mouseEvent)&&void 0!==be&&be.shiftKey||null!==(Ce=x.touchEvent)&&void 0!==Ce&&Ce.shiftKey?{x:d+Gt,y:I+Gt/2/q,width:b-Gt,height:B-Gt/q}:null!==(me=x.mouseEvent)&&void 0!==me&&me.altKey||null!==(Ke=x.touchEvent)&&void 0!==Ke&&Ke.altKey?{x:d+Gt,y:I,width:b-2*Gt,height:B}:{x:d+Gt,y:I,width:b-Gt,height:B};break;case"rect-right":var Be,Ve,qe,Xe;Ct=null!==(Be=x.mouseEvent)&&void 0!==Be&&Be.shiftKey||null!==(Ve=x.touchEvent)&&void 0!==Ve&&Ve.shiftKey?{x:d,y:I-Gt/2/q,width:b+Gt,height:B+Gt/q}:null!==(qe=x.mouseEvent)&&void 0!==qe&&qe.altKey||null!==(Xe=x.touchEvent)&&void 0!==Xe&&Xe.altKey?{x:d-Gt,y:I,width:b+2*Gt,height:B}:{x:d,y:I,width:b+Gt,height:B};break;default:Ct={x:d+Tt-Et,y:I+ut-Y,width:b,height:B}}Ct.width<0&&(Ct.width=0),Ct.height<0&&(Ct.height=0),Ct.x=(0,C.z)(Ct.x,1),Ct.y=(0,C.z)(Ct.y,1),Ct.width=(0,C.z)(Ct.width,1),Ct.height=(0,C.z)(Ct.height,1),Object.assign(H,Ct),(0,dt.D_)(lt,Z,Ct),(()=>{let ei=d-Ct.x,ii=I-Ct.y,ni=(Ct.width-b)/b,Ot=(Ct.height-B)/B;Z.forEach((j,i)=>{let n=pt[i],r=I-n.y,l={x:(0,C.z)(n.x-(ei+(d-n.x)*ni),100),y:(0,C.z)(n.y-(ii+r*Ot),100),width:(0,C.z)(n.width+n.width*ni,100),height:(0,C.z)(n.height+n.height*Ot,100)},{id:m,type:y,size:f,attribute:O}=j;Object.assign(f,l),Object.assign(O,(0,et.xW)(y,f,O)),(0,dt.tD)(window.document.getElementById(m),O)})})()})()})(Y[0][0],Y[0][1],Et.x,Et.y),V=!0},end:(Et,Y)=>{V&&(Z.forEach(Et=>{let{id:Y,size:Tt,attribute:ut}=Et,Gt=gt.find(ne=>ne.id==Y);Gt&&(Gt.to=JSON.parse(JSON.stringify({id:Y,size:Tt,attribute:ut})))}),E.L.history.push(gt))}})},S=x=>{x.length>=1&&(x=>{let w=999999,H=999999,Z=-999999,lt=-999999;x.forEach(b=>{w=Math.min(w,b.size.x),H=Math.min(H,b.size.y),Z=Math.max(Z,b.size.x+b.size.width),lt=Math.max(lt,b.size.y+b.size.height)});let d=(0,dt.RY)(T.F.RESIZE_GROUP,"g"),I=(0,et.CE)(w,H,Z,lt);I.x=(0,C.z)(I.x,100),I.y=(0,C.z)(I.y,100),I.width=(0,C.z)(I.width,100),I.height=(0,C.z)(I.height,100),(0,dt.D_)(d,x,I).forEach(b=>{((x,w,H,Z,lt)=>{let d=!1;null==x||x.addEventListener("touchstart",I=>{d=!0,D({touchEvent:I},w,H,Z,lt)}),null==x||x.addEventListener("mousedown",I=>{if(0==I.button){if(d)return void(d=!1);D({mouseEvent:I},w,H,Z,lt)}})})(b.element,b.posType,I,x,d)})})(x)}},1026:(he,Mt,v)=>{v.d(Mt,{$:()=>b,t:()=>I});var T=v(7873),E=v(1281),et=v(6153),N=v(3477),dt=v(7945),C=v(3069),c=v(3073),A=v(1999),D=v(6407),S=v(6847),x=v(745),w=v(9173),H=v(6611),Z=v(5970),lt=v(4669),d=v(3617);const I=(B,pt,J)=>{var gt;if(pt&&!(null!=J?J:window).document.getElementById(pt))return;if(pt){let ht=(null!=J?J:window).document.getElementById(pt);jQuery(ht).find("#"+T.F.BACKGROUND_GROUP).empty();let V=(0,Z.RY)(T.F.BACKGROUND_GROUP,"g",void 0,ht);(0,Z.I6)(V,B)}else{jQuery(H.L.target).find("#"+T.F.BACKGROUND_GROUP).empty();let ht=(0,Z.RY)(T.F.BACKGROUND_GROUP,"g",void 0,H.L.target);(0,Z.I6)(ht,B)}let Bt=(ht,V)=>{V=pt&&V?`${pt}-${V}`:null!=pt?pt:V,null==ht||ht.forEach(It=>{let Et=pt?`${pt}-${It.id}`:It.id;var Y;if(It.isdeleted)null===(Y=(null!=J?J:window).document.getElementById(Et))||void 0===Y||Y.remove();else switch(It.type){case A.h.GROUP:(0,c.v)(Et,{},V?(null!=J?J:window).document.getElementById(V):null),Bt(It.nodes,It.id);break;case A.h.CIRCLE:(0,E.K)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.ELLIPSE:(0,et.W)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.LINE:(0,C.q)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.RECT:(0,dt.a)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.POLYGON:(0,N.u)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.POLYLINE:(0,d.E)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.FOREIGNOBJECT:(0,x.$)(Et,{size:It.size,attribute:It.attribute,style:It.style,source:It.source},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.IMAGE:(0,w.B)(Et,{size:It.size,attribute:It.attribute,source:It.source},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.TEXT:(0,S.L)(Et,{size:It.size,attribute:It.attribute,source:It.source},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.TSPAN:(0,lt.M)(Et,{size:It.size,attribute:It.attribute,source:It.source},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.PATH:(0,D.X)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null)}})};Bt(null==B||null===(gt=B.svg)||void 0===gt?void 0:gt.nodes)},b=(B,pt)=>{var J;if(pt&&!window.document.getElementById(pt))return;let gt=(Bt,ht)=>{ht=ht?`${pt}-${ht}`:pt,null==Bt||Bt.forEach(V=>{jQuery("#"+(pt?`${pt}-${V.id}`:V.id)).appendTo(ht?window.document.getElementById(ht):H.L.target),V.type==A.h.GROUP&&gt(V.nodes,V.id)})};gt(null==B||null===(J=B.svg)||void 0===J?void 0:J.nodes)}},1281:(he,Mt,v)=>{v.d(Mt,{K:()=>dt});var T=v(1999),E=v(6611),et=v(9506),N=v(5970);const dt=(C,c,A)=>{let D=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,et.xW)(T.h.CIRCLE,D,S)),{nodeId:C,element:(0,N.fn)(C,T.h.CIRCLE,"circle",{size:D,attribute:S},A),size:D,attribute:S}}},6153:(he,Mt,v)=>{v.d(Mt,{W:()=>dt});var T=v(1999),E=v(6611),et=v(9506),N=v(5970);const dt=(C,c,A)=>{let D=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,et.xW)(T.h.ELLIPSE,D,S)),{nodeId:C,element:(0,N.fn)(C,T.h.ELLIPSE,"ellipse",{size:D,attribute:S},A),size:D,attribute:S}}},745:(he,Mt,v)=>{v.d(Mt,{$:()=>N});var T=v(1999),E=v(9506),et=v(5970);const N=(dt,C,c)=>{let A=(null==C?void 0:C.size)||{x:0,y:0,width:320,height:80},D=(null==C?void 0:C.attribute)||{};Object.assign(D,(0,E.xW)(T.h.FOREIGNOBJECT,A,D));let S=(null==C?void 0:C.source)||{type:"html",html:{htmlContent:""}},x=(null==C?void 0:C.style)||{};return{nodeId:dt,element:(0,et.fn)(dt,T.h.FOREIGNOBJECT,"foreignObject",{size:A,attribute:D,style:x,source:S},c),size:A,attribute:D,style:x,source:S}}},3073:(he,Mt,v)=>{v.d(Mt,{v:()=>N});var T=v(1999),E=v(9506),et=v(5970);const N=(C,c,A)=>{let D=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{};return Object.assign(S,(0,E.xW)(T.h.GROUP,D,S)),{nodeId:C,element:(0,et.fn)(C,T.h.GROUP,"g",{size:D,attribute:S},A),size:D,attribute:S}}},9173:(he,Mt,v)=>{v.d(Mt,{B:()=>N});var T=v(1999),E=v(9506),et=v(5970);const N=(dt,C,c)=>{let A=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},D=(null==C?void 0:C.attribute)||{preserveAspectRatio:"none"};Object.assign(D,(0,E.xW)(T.h.IMAGE,A,D));let S=(null==C?void 0:C.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:dt,element:(0,et.fn)(dt,T.h.IMAGE,"image",{size:A,attribute:D,source:S},c),size:A,attribute:D,source:S}}},3069:(he,Mt,v)=>{v.d(Mt,{q:()=>dt});var T=v(1999),E=v(6611),et=v(9506),N=v(5970);const dt=(C,c,A)=>{let D=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth,strokeLinecap:E.L.attribute.strokeLinecap};return Object.assign(S,(0,et.xW)(T.h.LINE,D,S)),{nodeId:C,element:(0,N.fn)(C,T.h.LINE,"line",{size:D,attribute:S},A),size:D,attribute:S}}},6407:(he,Mt,v)=>{v.d(Mt,{X:()=>dt});var T=v(1999),E=v(6611),et=v(9506),N=v(5970);const dt=(C,c,A)=>{let D=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,et.xW)(T.h.PATH,D,S)),{nodeId:C,element:(0,N.fn)(C,T.h.PATH,"path",{size:D,attribute:S},A),size:D,attribute:S}}},3477:(he,Mt,v)=>{v.d(Mt,{u:()=>dt});var T=v(1999),E=v(6611),et=v(9506),N=v(5970);const dt=(C,c,A)=>{let D=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,et.xW)(T.h.POLYGON,D,S)),{nodeId:C,element:(0,N.fn)(C,T.h.POLYGON,"polygon",{size:D,attribute:S},A),size:D,attribute:S}}},3617:(he,Mt,v)=>{v.d(Mt,{E:()=>dt});var T=v(1999),E=v(6611),et=v(9506),N=v(5970);const dt=(C,c,A)=>{let D=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,et.xW)(T.h.POLYLINE,D,S)),{nodeId:C,element:(0,N.fn)(C,T.h.POLYLINE,"polyline",{size:D,attribute:S},A),size:D,attribute:S}}},7945:(he,Mt,v)=>{v.d(Mt,{a:()=>dt});var T=v(1999),E=v(6611),et=v(9506),N=v(5970);const dt=(C,c,A)=>{let D=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,et.xW)(T.h.RECT,D,S)),{nodeId:C,element:(0,N.fn)(C,T.h.RECT,"rect",{size:D,attribute:S},A),size:D,attribute:S}}},6847:(he,Mt,v)=>{v.d(Mt,{L:()=>dt});var T=v(1999),E=v(6611),et=v(9506),N=v(5970);const dt=(C,c,A)=>{let D=(null==c?void 0:c.size)||{x:0,y:0,width:320,height:80},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.stroke,fontFamily:E.L.attribute.fontFamily,fontSize:E.L.attribute.fontSize,textLength:E.L.attribute.textLength};Object.assign(S,(0,et.xW)(T.h.TEXT,D,S));let x=(null==c?void 0:c.source)||{type:"text",text:{textContent:""}};return{nodeId:C,element:(0,N.fn)(C,T.h.TEXT,"text",{size:D,attribute:S,source:x},A),size:D,attribute:S,source:x}}},4669:(he,Mt,v)=>{v.d(Mt,{M:()=>dt});var T=v(1999),E=v(6611),et=v(9506),N=v(5970);const dt=(C,c,A)=>{let D=(null==c?void 0:c.size)||{x:0,y:0,width:320,height:80},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.stroke,fontFamily:E.L.attribute.fontFamily,fontSize:E.L.attribute.fontSize,textLength:E.L.attribute.textLength};Object.assign(S,(0,et.xW)(T.h.TSPAN,D,S));let x=(null==c?void 0:c.source)||{type:"text",text:{textContent:""}};return{nodeId:C,element:(0,N.fn)(C,T.h.TSPAN,"tspan",{size:D,attribute:S,source:x},A),size:D,attribute:S,source:x}}},9506:(he,Mt,v)=>{v.d(Mt,{CE:()=>et,xW:()=>N});var T=v(1999),E=v(4896);const et=(C,c,A,D,S)=>{let x={x:Math.min(C,A),y:Math.min(c,D),width:Math.abs(A-C)||1,height:Math.abs(D-c)||1};return null!=S&&S.ratio&&(x.width<=x.height?x.height=x.width*(null==S?void 0:S.ratio):x.width=x.height/(null==S?void 0:S.ratio)),Object.assign(x,{ratios:(null==S?void 0:S.ratios)||[[(C-x.x)/(x.width||1),(c-x.y)/(x.height||1)],[(A-x.x)/(x.width||1),(D-x.y)/(x.height||1)]]}),null!=S&&S.points&&(x.points=null==S?void 0:S.points),x},N=(C,c,A)=>{var D,S=(()=>{switch(C){case T.h.CIRCLE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,r:Math.min(c.width/2,c.height/2)};case T.h.ELLIPSE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,rx:c.width/2,ry:c.height/2};case T.h.LINE:{var x;let d={};return null===(x=c.ratios)||void 0===x||x.forEach((I,b)=>{d[`x${b+1}`]=c.x+c.width*I[0],d[`y${b+1}`]=c.y+c.height*I[1]}),d}case T.h.RECT:case T.h.FOREIGNOBJECT:case T.h.IMAGE:return{x:c.x,y:c.y,width:c.width,height:c.height};case T.h.TEXT:case T.h.TSPAN:var w;return{x:c.x,y:c.y+(A.alignmentBaseline||A.dominantBaseline?0:null!==(w=A.fontSize)&&void 0!==w?w:16)};case T.h.POLYGON:case T.h.POLYLINE:var H;if(null!==(H=c.ratios)&&void 0!==H&&H.length)return{points:(0,E.n9)(c,c.ratios)};break;case T.h.PATH:var Z,lt;if(null!==(Z=c.ratioMaps)&&void 0!==Z&&Z.length)return{d:(0,E.$N)(c,c.ratioMaps)};if(null!==(lt=c.points)&&void 0!==lt&&lt.length)return{d:`M ${(d=c.points)[0][0]} ${d[0][1]} L ${(d.map(I=>[I[0],I[1]])||[]).map(I=>I.join(" ")).join(" ")}`}}var d;return{}})();return c.rotate?(S.transform=`rotate(${c.rotate})`,S.transformOrigin=`${c.x+c.width/2} ${c.y+c.height/2}`):null!==(D=A.transform)&&void 0!==D&&D.match(/^rotate/)&&(A.transform=null,A.transformOrigin=null),S}},2492:(he,Mt,v)=>{v.d(Mt,{z:()=>T});const T=(E,et)=>{var N;return et=null!==(N=et)&&void 0!==N?N:100,Math.round((E+Number.EPSILON)*et)/et}},9841:(he,Mt,v)=>{v.d(Mt,{$:()=>et});var T=v(6611),E=v(2492);const et=N=>(0,E.z)(N/T.L.screen.scale)},6752:(he,Mt,v)=>{v.d(Mt,{E$:()=>c,Nx:()=>D,ZF:()=>C,ei:()=>dt,fu:()=>A});var T=v(6611),E=v(5970),et=v(9506),N=v(2492);const dt=(S,x)=>{let{id:w,type:H,size:Z,attribute:lt}=S,d=JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}));Z.x=(0,N.z)(x),Object.assign(lt,(0,et.xW)(H,Z,lt)),(0,E.tD)(window.document.getElementById(w),lt),T.L.history.push([{type:"size",from:d,to:JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}))}])},C=(S,x)=>{let{id:w,type:H,size:Z,attribute:lt}=S,d=JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}));Z.y=(0,N.z)(x),Object.assign(lt,(0,et.xW)(H,Z,lt)),(0,E.tD)(window.document.getElementById(w),lt),T.L.history.push([{type:"size",from:d,to:JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}))}])},c=(S,x,w)=>{let{id:H,type:Z,size:lt,attribute:d}=S,I=JSON.parse(JSON.stringify({id:H,size:lt,attribute:d}));w&&(lt.height=(0,N.z)(x*lt.height/lt.width)),lt.width=(0,N.z)(x),Object.assign(d,(0,et.xW)(Z,lt,d)),(0,E.tD)(window.document.getElementById(H),d),T.L.history.push([{type:"size",from:I,to:JSON.parse(JSON.stringify({id:H,size:lt,attribute:d}))}])},A=(S,x,w)=>{let{id:H,type:Z,size:lt,attribute:d}=S,I=JSON.parse(JSON.stringify({id:H,size:lt,attribute:d}));w&&(lt.width=(0,N.z)(x*lt.width/lt.height)),lt.height=(0,N.z)(x),Object.assign(d,(0,et.xW)(Z,lt,d)),(0,E.tD)(window.document.getElementById(H),d),T.L.history.push([{type:"size",from:I,to:JSON.parse(JSON.stringify({id:H,size:lt,attribute:d}))}])},D=(S,x)=>{let{id:w,type:H,size:Z,attribute:lt}=S,d=JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}));Z.rotate="number"==typeof x?(0,N.z)(x,100):void 0,Object.assign(lt,(0,et.xW)(H,Z,lt)),(0,E.tD)(window.document.getElementById(w),lt),T.L.history.push([{type:"size",from:d,to:JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}))}])}},1308:(he,Mt,v)=>{v.d(Mt,{I:()=>C});var T=v(3603),E=v(6611);class et{constructor(A){this._points=[],this._options=A}start(A){this._points.length=0,this._points.push([A.x,A.y]),this._options.start(A)}move(A){this._points.push([A.x,A.y]),this._options.move(A,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(A=this._points[0])[0],y:A[1]}:{x:0,y:0};var A}get offsetLast(){return this._points.length>=1?{x:(A=this._points[this._points.length-1])[0],y:A[1]}:{x:0,y:0};var A}}var N=v(6078);const C=(c,A,D,S,x)=>{var w,H,Z;let lt=null,d=0,I=0;c.mouseEvent?(lt=c.mouseEvent.target,d=c.mouseEvent.offsetX,I=c.mouseEvent.offsetY):c.touchEvent&&(lt=c.touchEvent.target,c.touchEvent.touches.length&&(d=c.touchEvent.touches[0].clientX,I=c.touchEvent.touches[0].clientY));let b=null!=D?D:E.L.screen.scale,B=null!=S?S:E.L.screen.dislocation,pt=null!=x?x:E.L.screen.offset,J=()=>{};var gt=new et({start:null!==(w=null==A?void 0:A.start)&&void 0!==w?w:J,move:null!==(H=null==A?void 0:A.move)&&void 0!==H?H:J,end:null!==(Z=null==A?void 0:A.end)&&void 0!==Z?Z:J});c.mouseEvent?gt.start((0,N.D)({x:d,y:I},b,B,{x:0,y:0})):c.touchEvent&&gt.start((0,N.D)({x:d,y:I},b,B,pt));let Bt=ut=>{gt.move((0,N.D)({x:ut.clientX,y:ut.clientY},b,B,pt))},ht=ut=>{gt.end(),[T.P.SHAPE,T.P.FOREIGNOBJECT,T.P.IMAGE,T.P.TEXT].includes(E.L.pointer.pointer_type)&&(ut.shiftKey||(E.L.pointer.pointer_type=T.P.POINTER))},V=ut=>{ut.touches.length&&Bt({clientX:ut.touches[0].clientX,clientY:ut.touches[0].clientY})},It=ut=>{ht({shiftKey:ut.shiftKey,ctrlKey:ut.ctrlKey,altKey:ut.altKey}),window.removeEventListener("touchmove",V,!1),window.removeEventListener("touchend",It,!1)},Et=ut=>{0==ut.button&&Bt({clientX:ut.clientX,clientY:ut.clientY})},Y=ut=>{0==ut.button&&(ht({shiftKey:ut.shiftKey,ctrlKey:ut.ctrlKey,altKey:ut.altKey}),window.removeEventListener("mousemove",Et,!1),window.removeEventListener("mouseup",Y,!1))};if(c.mouseEvent)window.addEventListener("mousemove",Et,!1),window.addEventListener("mouseup",Y,!1);else if(c.touchEvent){var Tt;window.addEventListener("touchmove",V,!1),window.addEventListener("touchend",It,!1),null===(Tt=lt)||void 0===Tt||Tt.addEventListener("touchmove",function(ut){ut.preventDefault()})}}},6078:(he,Mt,v)=>{v.d(Mt,{D:()=>E});var T=v(2492);const E=(et,N,dt,C)=>(et.x-=C.x,et.y-=C.y,et.x/=N,et.y/=N,et.x-=dt.x,et.y-=dt.y,et.x=(0,T.z)(et.x),et.y=(0,T.z)(et.y),et)},5619:(he,Mt,v)=>{v.d(Mt,{J:()=>st,I:()=>Yt});var T=v(7873),E=v(6611),et=v(1999),N=v(334),dt=v(8946),C=v(7657),c=v(6769),A=v(3591),S=v(6847),x=v(3073);var d=v(7050),I=v(9173),b=v(2492);const B=(P,h,R)=>{var nt,rt,G,_;let F=1,it=new Image;it.onload=()=>{var ft,xt,bt,X;F=(0,b.z)(it.naturalWidth/it.naturalHeight,100);let ct=0,kt=0,Pt=0,Qt=0;var Xt,ie,ye,ae;F>=1?(Pt=Math.min(it.naturalWidth,null!==(Xt=null===(ie=st.slide.svg)||void 0===ie||null===(ie=ie.viewBox)||void 0===ie?void 0:ie.width)&&void 0!==Xt?Xt:0),Qt=Pt/F):(Qt=Math.min(it.naturalHeight,null!==(ye=null===(ae=st.slide.svg)||void 0===ae||null===(ae=ae.viewBox)||void 0===ae?void 0:ae.height)&&void 0!==ye?ye:0),Pt=Qt/F),ct=((null!==(ft=null===(xt=st.slide.svg)||void 0===xt||null===(xt=xt.viewBox)||void 0===xt?void 0:xt.width)&&void 0!==ft?ft:0)-Pt)/2,kt=((null!==(bt=null===(X=st.slide.svg)||void 0===X||null===(X=X.viewBox)||void 0===X?void 0:X.height)&&void 0!==bt?bt:0)-Qt)/2,h.size={x:ct,y:kt,width:Pt,height:Qt},pt(h,R)},it.onerror=ft=>{console.error(`ImgSrc load failed -> ${JSON.stringify(h.source)}`,ft)},it.src=(null!==(nt=h.source)&&void 0!==nt&&nt.path?(null===(rt=E.L.config)||void 0===rt?void 0:rt.readfileuploadurl)+(null===(G=h.source)||void 0===G?void 0:G.path):null===(_=h.source)||void 0===_?void 0:_.url)||""},pt=(P,h)=>{if(P.slideStatus!=st.slideStatus)return void h();let{element:R}=(0,I.B)(Math.ceil(1e9*Math.random()),{size:P.size,source:{type:"image",image:null==P?void 0:P.source}});setTimeout(()=>{null==R||R.remove(),h()},3e3)};var J=v(5970);const gt=(P,h,R)=>{var nt,rt,G,_;let F=new Image;F.onload=()=>{Bt(P,{width:F.naturalWidth,height:F.naturalHeight},h,R)},F.onerror=it=>{console.error(`ImgSrc load failed -> ${JSON.stringify(h.source)}`,it),R()},F.src=(null!==(nt=h.source)&&void 0!==nt&&nt.path?(null===(rt=E.L.config)||void 0===rt?void 0:rt.readfileuploadurl)+(null===(G=h.source)||void 0===G?void 0:G.path):null===(_=h.source)||void 0===_?void 0:_.url)||""},Bt=(P,h,R,nt)=>{if(R.slideStatus!=st.slideStatus)return void nt();let rt=(0,b.z)(h.width/h.height,100),G=0,_=0,F=0,it=0;rt>=1?(F=h.width,F=Math.max(F,40),F=Math.min(F,40),it=F/rt):(it=h.height,it=Math.max(it,40),it=Math.min(it,40),F=it/rt);let{size:bt}=P;G=bt.x+bt.width-F/2,_=bt.y-it/2;let X=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,I.B)(`icon-${P.id}`,{size:{x:G,y:_,width:F,height:it},source:{type:"image",image:null==R?void 0:R.source}},X),setTimeout(()=>{nt()},3e3)},ht=(P,h,R)=>{var nt,rt,G,_,F,it,ft;if(h.slideStatus!=st.slideStatus)return void R();if(!(null!==(nt=h.source)&&void 0!==nt&&nt.path||null!==(rt=h.source)&&void 0!==rt&&rt.url))return console.warn(`${P.id} -> audio no source!`),void R();var xt=jQuery("#"+P.id);let bt=null!==(G=h.iteration)&&void 0!==G?G:0;if(bt<0&&(R(),R=function(){}),!(xt.data("audio-running")&&bt<0)){xt.data("audio-running",!0);var X=new Audio;return X.autoplay=!0,X.loop=0!=bt,X.preload="auto",X.controls=!0,X.setAttributeNode(document.createAttribute("playsinline")),X.addEventListener("canplay",function(){var ct=X.play();ct&&ct.then(function(kt){xt.data("audio-running",!0)}).catch(function(kt){xt.data("audio-running",!1),h.slideStatus===st.slideStatus&&R()})}),X.addEventListener("timeupdate",function(){var kt;h.slideStatus!==st.slideStatus&&((kt=this).pause(),kt.remove(),xt.data("audio-running",!1))}),X.addEventListener("canplaythrough",function(){this.loop&&(bt>0?bt--:0==bt&&(this.loop=!1))}),X.addEventListener("play",function(){}),X.addEventListener("pause",function(){}),X.addEventListener("ended",function(){this.remove(),xt.data("audio-running",!1),h.slideStatus===st.slideStatus&&R()}),X.onerror=function(){this.remove(),xt.data("audio-running",!1),h.slideStatus===st.slideStatus&&R()},X.src=(null!==(_=h.source)&&void 0!==_&&_.path?(null===(F=E.L.config)||void 0===F?void 0:F.readfileuploadurl)+(null===(it=h.source)||void 0===it?void 0:it.path):null===(ft=h.source)||void 0===ft?void 0:ft.url)||"",X}};var V=v(2837);const ne=(P,h)=>{var R;null===(R=h.test)||void 0===R||null===(R=R.answer)||void 0===R||null===(R=R.matching)||void 0===R||R.filter(nt=>nt.id==P.id).forEach(nt=>nt.value=""),jQuery(`#node-${P.id}`).remove()},Ct=(P,h,R,nt,rt,G)=>{var _,F,it,ft,xt,bt,X,ct;rt.iscorrect?(null!==(_=h.test)&&void 0!==_&&null!==(_=_.audiotrue)&&void 0!==_&&_.path&&ht(P,{source:(0,V.U)(null===(it=h.test)||void 0===it?void 0:it.audiotrue),iteration:0,nodeStatus:R,slideStatus:nt},G),null!==(F=h.test)&&void 0!==F&&null!==(F=F.effecttrue)&&void 0!==F&&F.path&&B(0,{source:(0,V.U)(null===(ft=h.test)||void 0===ft?void 0:ft.effecttrue),iteration:0,nodeStatus:R,slideStatus:nt},G)):(null!==(xt=h.test)&&void 0!==xt&&null!==(xt=xt.audiofalse)&&void 0!==xt&&xt.path&&ht(P,{source:(0,V.U)(null===(X=h.test)||void 0===X?void 0:X.audiofalse),iteration:0,nodeStatus:R,slideStatus:nt},G),null!==(bt=h.test)&&void 0!==bt&&null!==(bt=bt.effectfalse)&&void 0!==bt&&bt.path&&B(0,{source:(0,V.U)(null===(ct=h.test)||void 0===ct?void 0:ct.effectfalse),iteration:0,nodeStatus:R,slideStatus:nt},G));Kt(h,R,nt,G)},Kt=(P,h,R,nt)=>{var rt;switch(null===(rt=P.test)||void 0===rt?void 0:rt.type){case"truefalse":{var G,_;let{value:ae,iscorrect:se}=null!==(G=null==P||null===(_=P.test)||void 0===_||null===(_=_.answer)||void 0===_?void 0:_.truefalse)&&void 0!==G?G:{};if(ae){let xe=st.findNode(ae);var F,it,ft,xt;se?null!==(F=P.test)&&void 0!==F&&null!==(F=F.icontrue)&&void 0!==F&&F.path&&gt(xe,{source:(0,V.U)(null===(it=P.test)||void 0===it?void 0:it.icontrue),iteration:0,nodeStatus:h,slideStatus:R},nt):null!==(ft=P.test)&&void 0!==ft&&null!==(ft=ft.iconfalse)&&void 0!==ft&&ft.path&&gt(xe,{source:(0,V.U)(null===(xt=P.test)||void 0===xt?void 0:xt.iconfalse),iteration:0,nodeStatus:h,slideStatus:R},nt)}break}case"singlechoice":{var bt,X;let{value:ae,iscorrect:se}=null!==(bt=null==P||null===(X=P.test)||void 0===X||null===(X=X.answer)||void 0===X?void 0:X.singlechoice)&&void 0!==bt?bt:{};if(ae){let xe=st.findNode(ae);var ct,kt,Pt,Qt;se?null!==(ct=P.test)&&void 0!==ct&&null!==(ct=ct.icontrue)&&void 0!==ct&&ct.path&&gt(xe,{source:(0,V.U)(null===(kt=P.test)||void 0===kt?void 0:kt.icontrue),iteration:0,nodeStatus:h,slideStatus:R},nt):null!==(Pt=P.test)&&void 0!==Pt&&null!==(Pt=Pt.iconfalse)&&void 0!==Pt&&Pt.path&&gt(xe,{source:(0,V.U)(null===(Qt=P.test)||void 0===Qt?void 0:Qt.iconfalse),iteration:0,nodeStatus:h,slideStatus:R},nt)}break}case"multichoice":var Xt;null==P||null===(Xt=P.test)||void 0===Xt||null===(Xt=Xt.answer)||void 0===Xt||null===(Xt=Xt.multichoice)||void 0===Xt||Xt.forEach(ae=>{let{value:se,iscorrect:xe}=ae;if(se){let me=st.findNode(se);var Ee,Pe,be,Ce;xe?null!==(Ee=P.test)&&void 0!==Ee&&null!==(Ee=Ee.icontrue)&&void 0!==Ee&&Ee.path&&gt(me,{source:(0,V.U)(null===(Pe=P.test)||void 0===Pe?void 0:Pe.icontrue),iteration:0,nodeStatus:h,slideStatus:R},nt):null!==(be=P.test)&&void 0!==be&&null!==(be=be.iconfalse)&&void 0!==be&&be.path&&gt(me,{source:(0,V.U)(null===(Ce=P.test)||void 0===Ce?void 0:Ce.iconfalse),iteration:0,nodeStatus:h,slideStatus:R},nt)}});break;case"fill":var ie;null==P||null===(ie=P.test)||void 0===ie||null===(ie=ie.answer)||void 0===ie||null===(ie=ie.fill)||void 0===ie||ie.forEach(ae=>{let{id:se,value:Ee,iscorrect:Pe}=ae;if(Ee){let Be=st.findNode(se);var be,Ce,me,Ke;Pe?null!==(be=P.test)&&void 0!==be&&null!==(be=be.icontrue)&&void 0!==be&&be.path&&gt(Be,{source:(0,V.U)(null===(Ce=P.test)||void 0===Ce?void 0:Ce.icontrue),iteration:0,nodeStatus:h,slideStatus:R},nt):null!==(me=P.test)&&void 0!==me&&null!==(me=me.iconfalse)&&void 0!==me&&me.path&&gt(Be,{source:(0,V.U)(null===(Ke=P.test)||void 0===Ke?void 0:Ke.iconfalse),iteration:0,nodeStatus:h,slideStatus:R},nt)}});break;case"matching":var ye;null==P||null===(ye=P.test)||void 0===ye||null===(ye=ye.answer)||void 0===ye||null===(ye=ye.matching)||void 0===ye||ye.forEach(ae=>{let{id:se,key:xe,value:Ee}=ae;if(Ee){let Ke=st.findNode(se);var Pe,be,Ce,me;xe==Ee?null!==(Pe=P.test)&&void 0!==Pe&&null!==(Pe=Pe.icontrue)&&void 0!==Pe&&Pe.path&&gt(Ke,{source:(0,V.U)(null===(be=P.test)||void 0===be?void 0:be.icontrue),iteration:0,nodeStatus:h,slideStatus:R},nt):null!==(Ce=P.test)&&void 0!==Ce&&null!==(Ce=Ce.iconfalse)&&void 0!==Ce&&Ce.path&&gt(Ke,{source:(0,V.U)(null===(me=P.test)||void 0===me?void 0:me.iconfalse),iteration:0,nodeStatus:h,slideStatus:R},nt)}})}},Dt=(P,h,R,nt)=>{var rt,G,_,F,it,ft,bt,ct,X;null!==(rt=h.animate)&&void 0!==rt&&rt.value&&(0,d.a)(h,R.nodeStatus,R.slideStatus),null!==(G=h.interactive)&&void 0!==G&&G.show?(console.log(`node(${h.id}) | nodeStatus(${R.nodeStatus}) | slideStatus(${R.slideStatus}) | show`),((P,h,R,nt)=>{var rt,G,_;let F={total:0,counter:0},{triggershow:it,triggerrun:ft,triggerhide:xt,action:bt,audio:X}=null!==(rt=null===(G=P.interactive)||void 0===G?void 0:G.show)&&void 0!==rt?rt:{};if(console.log(`node(${P.id}) | nodeStatus(${h}) | slideStatus(${R}) | show`),it){let{id:kt,ids:Pt,time:Qt,async:Xt}=it;"asynctrue"==Xt?setTimeout(()=>{(0,A.GD)({id:kt,ids:Pt,nodeStatus:h,slideStatus:R})}):"time"==Xt&&setTimeout(()=>{(0,A.GD)({id:kt,ids:Pt,nodeStatus:h,slideStatus:R})},1e3*(null!=Qt?Qt:0))}if(ft){let{id:kt,ids:Pt,time:Qt,async:Xt}=ft;"asynctrue"==Xt?setTimeout(()=>{(0,A.MF)({id:kt,ids:Pt,nodeStatus:h,slideStatus:R})}):"time"==Xt&&setTimeout(()=>{(0,A.MF)({id:kt,ids:Pt,nodeStatus:h,slideStatus:R})},1e3*(null!=Qt?Qt:0))}if(xt){let{id:kt,ids:Pt,time:Qt,async:Xt}=xt;"asynctrue"==Xt?setTimeout(()=>{(0,A.vi)({id:kt,ids:Pt,nodeStatus:h,slideStatus:R})}):"time"==Xt&&setTimeout(()=>{(0,A.vi)({id:kt,ids:Pt,nodeStatus:h,slideStatus:R})},1e3*(null!=Qt?Qt:0))}let ct=()=>{setTimeout(()=>{if(F.counter>=F.total){if(nt&&nt(),it){let{id:kt,ids:Pt,async:Qt}=it;(!Qt||"asyncfalse"==Qt)&&(0,A.GD)({id:kt,ids:Pt,nodeStatus:h,slideStatus:R})}if(ft){let{id:kt,ids:Pt,async:Qt}=ft;(!Qt||"asyncfalse"==Qt)&&(0,A.MF)({id:kt,ids:Pt,nodeStatus:h,slideStatus:R})}if(xt){let{id:kt,ids:Pt,async:Qt}=xt;(!Qt||"asyncfalse"==Qt)&&(0,A.vi)({id:kt,ids:Pt,nodeStatus:h,slideStatus:R})}}})};if(null!=bt&&bt.value){F.total+=1;let kt=()=>{F.counter+=1,ct()};switch(null==bt?void 0:bt.value){case"hide":jQuery("#"+P.id).addClass("hide"),kt();break;case"points":{let{points:Pt,time:Qt,iteration:Xt,finish:ie}=bt;(0,C.c)(P.id,{node:P,points:Pt,time:Qt,iteration:Xt,finish:ie,nodeStatus:h,slideStatus:R},kt);break}default:{let{value:Pt,time:Qt,iteration:Xt,finish:ie}=bt;(0,dt.h)(P.id,{node:P,value:Pt,time:Qt,iteration:Xt,finish:ie,nodeStatus:h,slideStatus:R},kt);break}}}if(null!=X&&null!==(_=X.source)&&void 0!==_&&_.path){F.total+=1;let kt=()=>{F.counter+=1,ct()},Pt=(0,c.d)(P.id,X,F,{nodeStatus:h,slideStatus:R},kt);-1==(null==X?void 0:X.iteration)&&jQuery("#"+P.id).click(Qt=>{Qt.preventDefault(),Pt&&(Pt.volume=Pt.volume>=1?0:Pt.volume+.25),console.log(null==Pt?void 0:Pt.volume)})}F.total||ct()})(h,R.nodeStatus,R.slideStatus,nt)):nt&&nt(),null!==(_=h.interactive)&&void 0!==_&&_.click&&(ct=null===(bt=h.interactive)||void 0===bt?void 0:bt.click,Object.keys(null!=ct?ct:{}).map(Pt=>ct[Pt]?1:0).includes(1)&&jQuery("#"+h.id).addClass("interactive-click"),jQuery("#"+h.id).click(ct=>{ct.preventDefault(),R.nodeStatus=st.refreshNodeStatus(),console.log(`node(${h.id}) | nodeStatus(${R.nodeStatus}) | slideStatus(${R.slideStatus}) | click`),(0,N.J)(h,R.nodeStatus,R.slideStatus)})),null!==(F=h.variable)&&void 0!==F&&F.input&&jQuery("#"+h.id).on("change","input,textarea",ct=>{ct.preventDefault(),((P,h,R)=>{var nt,rt;E.L.variable.setValue(null!==(nt=null===(rt=h.variable)||void 0===rt||null===(rt=rt.input)||void 0===rt?void 0:rt.variable)&&void 0!==nt?nt:"",P),(P=>{var h;let R=(nt,rt)=>{null==nt||nt.forEach(G=>{switch(G.type){case et.h.GROUP:(0,x.v)(G.id,{},rt?window.document.getElementById(rt):null),R(G.nodes,G.id);break;case et.h.POLYGON:break;case et.h.TEXT:(0,S.L)(G.id,{size:G.size,attribute:G.attribute,source:G.source},rt?window.document.getElementById(rt):null)}})};R(null===(h=P.svg)||void 0===h?void 0:h.nodes)})(R)})(ct.target.value,h,P)}),null!==(it=h.variable)&&void 0!==it&&it.click&&(null!==(X=h.variable)&&void 0!==X&&null!==(X=X.click)&&void 0!==X&&X.variable&&jQuery("#"+h.id).addClass("variable-click"),jQuery("#"+h.id).click(ct=>{ct.preventDefault(),((P,h)=>{var R;E.L.variable.setValueOperator(null===(R=P.variable)||void 0===R?void 0:R.click),(P=>{var h;let R=(nt,rt)=>{null==nt||nt.forEach(G=>{switch(G.type){case et.h.GROUP:(0,x.v)(G.id,{},rt?window.document.getElementById(rt):null),R(G.nodes,G.id);break;case et.h.POLYGON:break;case et.h.TEXT:(0,S.L)(G.id,{size:G.size,attribute:G.attribute,source:G.source},rt?window.document.getElementById(rt):null)}})};R(null===(h=P.svg)||void 0===h?void 0:h.nodes)})(h)})(h,P)})),"test"==(null===(ft=h.source)||void 0===ft?void 0:ft.type)&&((P,h)=>{var R;let nt=()=>{};switch(null===(R=P.source)||void 0===R||null===(R=R.test)||void 0===R?void 0:R.type){case"truefalse":{jQuery("#"+P.id).click(_=>{_.preventDefault(),((P,h,R,nt,rt)=>{var G,_;let F=null===(G=P.source)||void 0===G||null===(G=G.test)||void 0===G||null===(G=G.truefalse)||void 0===G?void 0:G.iscorrect;h.test?h.test.answer?h.test.answer.truefalse={value:P.id,iscorrect:F}:h.test.answer={truefalse:{value:P.id,iscorrect:F}}:h.test={answer:{truefalse:{value:P.id,iscorrect:F}}},null!==(_=h.svg)&&void 0!==_&&_.nodes.find(ft=>{var xt;return"submit"==(null===(xt=ft.source)||void 0===xt||null===(xt=xt.test)||void 0===xt?void 0:xt.type)})||Ct(P,h,R,nt,{iscorrect:F},rt);let it=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(it,h,P)})(P,h,st.nodeStatus,st.slideStatus,nt)});let G=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,h,P);break}case"singlechoice":{jQuery("#"+P.id).click(_=>{_.preventDefault(),((P,h,R,nt,rt)=>{var G,_;let F=null===(G=P.source)||void 0===G||null===(G=G.test)||void 0===G||null===(G=G.singlechoice)||void 0===G?void 0:G.iscorrect;h.test?h.test.answer?h.test.answer.singlechoice={value:P.id,iscorrect:F}:h.test.answer={singlechoice:{value:P.id,iscorrect:F}}:h.test={answer:{singlechoice:{value:P.id,iscorrect:F}}},null!==(_=h.svg)&&void 0!==_&&_.nodes.find(ft=>{var xt;return"submit"==(null===(xt=ft.source)||void 0===xt||null===(xt=xt.test)||void 0===xt?void 0:xt.type)})||Ct(P,h,R,nt,{iscorrect:F},rt);let it=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(it,h,P)})(P,h,st.nodeStatus,st.slideStatus,nt)});let G=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,h,P);break}case"multichoice":{jQuery("#"+P.id).click(_=>{_.preventDefault(),((P,h,R,nt,rt)=>{var G,_;let F=null===(G=P.source)||void 0===G||null===(G=G.test)||void 0===G||null===(G=G.multichoice)||void 0===G?void 0:G.iscorrect;h.test?h.test.answer?h.test.answer.multichoice?h.test.answer.multichoice.find(ft=>ft.value==P.id)?h.test.answer.multichoice=h.test.answer.multichoice.filter(ft=>ft.value!=P.id):h.test.answer.multichoice.push({value:P.id,iscorrect:F}):h.test.answer.multichoice=[{value:P.id,iscorrect:F}]:h.test.answer={multichoice:[{value:P.id,iscorrect:F}]}:h.test={answer:{multichoice:[{value:P.id,iscorrect:F}]}},null!==(_=h.svg)&&void 0!==_&&_.nodes.find(ft=>{var xt;return"submit"==(null===(xt=ft.source)||void 0===xt||null===(xt=xt.test)||void 0===xt?void 0:xt.type)})||Ct(P,h,R,nt,{iscorrect:F},rt);let it=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(it,h,P)})(P,h,st.nodeStatus,st.slideStatus,nt)});let G=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,h,P);break}case"fill":{var rt;jQuery("#"+P.id).on("keyup",'input[type="text"]',_=>{var F;let it=jQuery("<div/>").css({"font-size":jQuery(_.target).css("font-size"),visibility:"hidden",float:"left"}).text(_.target.value).appendTo(window.document.body);jQuery(_.target).css({width:(null!==(F=it.width())&&void 0!==F?F:0)+30})}).on("keypress",'input[type="text"]',_=>{13===(_.keyCode||_.charCode||_.which)&&(_.preventDefault(),_.stopPropagation(),jQuery(_.target).blur())}).on("change",'input[type="text"]',_=>{var F,it;let ft=null===(F=_.target)||void 0===F?void 0:F.getAttribute("data-key"),xt=null===(it=_.target)||void 0===it||null===(it=it.value)||void 0===it?void 0:it.trim();jQuery("#"+P.id).find(`input[type="text"][data-key="${ft}"]`).val(xt),((P,h,R,nt,rt,G)=>{var _,F,it,ft;let{value:xt}=null!==(_=null===(F=P.source)||void 0===F||null===(F=F.test)||void 0===F||null===(F=F.fill)||void 0===F?void 0:F.find(ct=>ct.key==`[[${rt.key}]]`))&&void 0!==_?_:{},bt=xt&&xt.map(ct=>null==ct?void 0:ct.toLocaleLowerCase()).includes(null===(it=rt.value)||void 0===it?void 0:it.toLocaleLowerCase());rt.iscorrect=bt,h.test?h.test.answer?h.test.answer.fill?h.test.answer.fill.find(ct=>ct.key==rt.key)?h.test.answer.fill.filter(ct=>ct.key==rt.key).forEach(ct=>{ct.value=rt.value,ct.iscorrect=rt.iscorrect}):h.test.answer.fill.push(rt):h.test.answer.fill=[rt]:h.test.answer={fill:[rt]}:h.test={answer:{fill:[rt]}};let X=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(X,h,P),null!==(ft=h.svg)&&void 0!==ft&&ft.nodes.find(ct=>{var kt;return"submit"==(null===(kt=ct.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)})||Ct(P,h,R,nt,{iscorrect:bt},G)})(P,h,st.nodeStatus,st.slideStatus,{id:P.id,key:ft,value:xt},nt)}),null!==(rt=h.test)&&void 0!==rt&&rt.showselection||jQuery("#"+P.id).addClass("hide-selection");let G=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,h,P);break}case"matching-empty":{jQuery("#"+P.id).on("touchmove",".ondrag-item",function(_){_.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(_){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${P.size.height/P.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${_.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(_){var F;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(F=h.test)&&void 0!==F&&F.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),ne(P,h)},drag:function(_){},dragend:function(_){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${P.id} .ondrop-here`).kendoDropTarget({dragenter:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.addClass("focused")},dragleave:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.removeClass("focused")},drop:function(_){if(!_.dropTarget.hasClass("actived"))return;_.dropTarget.removeClass("focused");let F=_.dropTarget,it=_.draggable.currentTarget;F.is(":empty")||F.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),it.appendTo(F);let ft=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(ft,h,P),((P,h,R,nt,rt,G)=>{var _,F,it;let{key:ft}=null!==(_=null===(F=P.source)||void 0===F||null===(F=F.test)||void 0===F?void 0:F.matching)&&void 0!==_?_:{key:"KIEN"},xt=rt.key==ft;ne(P,h);let bt={id:P.id,key:null!=ft?ft:"",value:rt.key};h.test?h.test.answer?h.test.answer.matching?h.test.answer.matching.find(X=>X.id==bt.id)?h.test.answer.matching.filter(X=>X.id==bt.id).forEach(X=>{X.key=bt.key,X.value=bt.value}):h.test.answer.matching.push(bt):h.test.answer.matching=[bt]:h.test.answer={matching:[bt]}:h.test={answer:{matching:[bt]}},null!==(it=h.svg)&&void 0!==it&&it.nodes.find(X=>{var ct;return"submit"==(null===(ct=X.source)||void 0===ct||null===(ct=ct.test)||void 0===ct?void 0:ct.type)})||Ct(P,h,R,nt,{iscorrect:xt},G)})(P,h,st.nodeStatus,st.slideStatus,{key:it.data("key")},nt)}});let G=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,h,P);break}case"matching-content":{jQuery("#"+P.id).on("touchmove",".ondrag-item",function(_){_.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(_){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${P.size.height/P.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${_.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(_){var F;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(F=h.test)&&void 0!==F&&F.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(_){},dragend:function(_){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${P.id} .ondrop-here`).kendoDropTarget({dragenter:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.addClass("focused")},dragleave:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.removeClass("focused")},drop:function(_){if(!_.dropTarget.hasClass("actived"))return;_.dropTarget.removeClass("focused");let F=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(F,h,P),_.draggable.currentTarget.appendTo(_.dropTarget),Kt(h,st.nodeStatus,st.slideStatus,nt)}});let G=(0,J.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,h,P);break}case"speech":break;case"submit":jQuery("#"+P.id).click(G=>{G.preventDefault(),((P,h,R,nt,rt)=>{var G,_,F,it,ft;let xt;var bt;if(null!=h&&null!==(G=h.test)&&void 0!==G&&null!==(G=G.answer)&&void 0!==G&&G.truefalse)xt=null==h||null===(bt=h.test)||void 0===bt||null===(bt=bt.answer)||void 0===bt||null===(bt=bt.truefalse)||void 0===bt?void 0:bt.iscorrect;else if(null!=h&&null!==(_=h.test)&&void 0!==_&&null!==(_=_.answer)&&void 0!==_&&_.singlechoice){var X;xt=null==h||null===(X=h.test)||void 0===X||null===(X=X.answer)||void 0===X||null===(X=X.singlechoice)||void 0===X?void 0:X.iscorrect}else if(null!=h&&null!==(F=h.test)&&void 0!==F&&null!==(F=F.answer)&&void 0!==F&&F.multichoice){var ct,kt,Pt;xt=1==[null==h||null===(ct=h.test)||void 0===ct||null===(ct=ct.answer)||void 0===ct||null===(ct=ct.multichoice)||void 0===ct?void 0:ct.length,null==h||null===(kt=h.test)||void 0===kt||null===(kt=kt.answer)||void 0===kt||null===(kt=kt.multichoice)||void 0===kt||null===(kt=kt.map(ae=>ae.iscorrect?1:0))||void 0===kt?void 0:kt.reduce((ae,se)=>ae+se),null==h||null===(Pt=h.svg)||void 0===Pt||null===(Pt=Pt.nodes)||void 0===Pt||null===(Pt=Pt.filter(ae=>{var se,xe;return"multichoice"==(null===(se=ae.source)||void 0===se||null===(se=se.test)||void 0===se?void 0:se.type)&&(null===(xe=ae.source)||void 0===xe||null===(xe=xe.test)||void 0===xe||null===(xe=xe.multichoice)||void 0===xe?void 0:xe.iscorrect)}))||void 0===Pt?void 0:Pt.length].filter((ae,se,xe)=>xe.indexOf(ae)==se).length}else if(null!=h&&null!==(it=h.test)&&void 0!==it&&null!==(it=it.answer)&&void 0!==it&&it.fill){var Qt,Xt;xt=(null==h||null===(Qt=h.test)||void 0===Qt||null===(Qt=Qt.answer)||void 0===Qt||null===(Qt=Qt.fill)||void 0===Qt||null===(Qt=Qt.map(ae=>ae.iscorrect?1:0))||void 0===Qt?void 0:Qt.reduce((ae,se)=>ae+se))==(null===(Xt=h.svg)||void 0===Xt||null===(Xt=Xt.nodes)||void 0===Xt||null===(Xt=Xt.filter(ae=>{var se;return"fill"==(null===(se=ae.source)||void 0===se||null===(se=se.test)||void 0===se?void 0:se.type)}))||void 0===Xt?void 0:Xt.length)}else if(null!=h&&null!==(ft=h.test)&&void 0!==ft&&null!==(ft=ft.answer)&&void 0!==ft&&ft.matching){var ie,ye;xt=(null===(ie=h.svg)||void 0===ie||null===(ie=ie.nodes)||void 0===ie||null===(ie=ie.filter(ae=>{var se;return"matching-empty"==(null===(se=ae.source)||void 0===se||null===(se=se.test)||void 0===se?void 0:se.type)}))||void 0===ie?void 0:ie.length)==((null==h||null===(ye=h.test)||void 0===ye||null===(ye=ye.answer)||void 0===ye?void 0:ye.matching)||[]).map(ae=>ae.key==ae.value?1:0).reduce((ae,se)=>ae+se)}Ct(P,h,R,nt,{iscorrect:xt},rt)})(P,h,st.nodeStatus,st.slideStatus,nt)})}})(h,P)};var wt=v(1281),M=v(6153),W=v(3069),s=v(7945),tt=v(3477),_t=v(745),Lt=v(6407),jt=v(3617),Ft=v(4669);const Vt=(P,h,R)=>{if(R.slideStatus!=st.slideStatus||!h.length)return;let nt=h.shift(),rt=P.filter(it=>{var ft;return(null!==(ft=it.idx)&&void 0!==ft?ft:0)==nt});if(!rt.length)return;let G=Math.max.apply(null,rt.map(it=>{var ft;return null!==(ft=it.time)&&void 0!==ft?ft:0})),_=!1,F=G<.5?0:setTimeout(()=>{_||(_=!0,Vt(P,h,R))},1e3*G);re(P,h,rt,0,R,{idx:nt,total:rt.length,counter:0,isRecursive:_,timeoutRecursive:F,maxTimeCoundown:G,uid:Math.floor(1e9*Math.random())})},re=(P,h,R,nt,rt,G)=>{if(rt.slideStatus!=st.slideStatus)return;let _=R[nt];if(_){switch(_.type){case et.h.GROUP:break;case et.h.CIRCLE:(0,wt.K)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case et.h.ELLIPSE:(0,M.W)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case et.h.LINE:(0,W.q)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case et.h.RECT:(0,s.a)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case et.h.POLYGON:(0,tt.u)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case et.h.POLYLINE:(0,jt.E)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case et.h.FOREIGNOBJECT:(0,_t.$)(_.id,{size:_.size,attribute:_.attribute,style:_.style,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case et.h.IMAGE:(0,I.B)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case et.h.TEXT:(0,S.L)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case et.h.TSPAN:(0,Ft.M)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case et.h.PATH:(0,Lt.X)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null)}Dt(rt.slide,_,rt,()=>{G.counter+=1,G.maxTimeCoundown<.5&&G.counter>=G.total&&(G.total=G.counter=0,G.isRecursive||(clearTimeout(G.timeoutRecursive),G.isRecursive=!0,setTimeout(()=>{Vt(P,h,rt)},250)))}),re(P,h,R,++nt,rt,G)}},st=new class Rt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(h){this._dataSource=h.data||{},E.L.variable.set=h.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var h,R;return null!==(h=null===(R=this._dataSource)||void 0===R||null===(R=R.slides)||void 0===R?void 0:R.length)&&void 0!==h?h:0}get slides(){var h;return(null===(h=this._dataSource)||void 0===h?void 0:h.slides)||[]}get slide(){var h;return((null===(h=this._dataSource)||void 0===h?void 0:h.slides)||[])[this._slideIdx]||{}}findNode(h){var R;let nt=null===(R=this._dataSource)||void 0===R||null===(R=R.slides)||void 0===R?void 0:R.find((X,ct)=>ct==this._slideIdx),rt=null==nt?void 0:nt.svg,G=(X,ct)=>{let kt=null==X?void 0:X.find(Xt=>Xt.id==h);if(kt)return kt.pid=ct,kt;let Pt=0,Qt=X.length||0;for(;Pt<Qt&&!kt&&(kt=G(X[Pt].nodes||[],X[Pt].id),!kt);)Pt++;return kt},_=G((null==rt?void 0:rt.nodes)||[]);var F,it,ft,xt,bt;return _?(_.style=null!==(F=_.style)&&void 0!==F?F:{},_.source=null!==(it=_.source)&&void 0!==it?it:{},_.animate=null!==(ft=_.animate)&&void 0!==ft?ft:{},_.interactive=null!==(xt=_.interactive)&&void 0!==xt?xt:{},_.variable=null!==(bt=_.variable)&&void 0!==bt?bt:{},_):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(h,R,nt){var rt;let G;var _,F;if(this.refreshNodeStatus(),this.refreshSlideStatus(),nt)G=null===(_=this._dataSource)||void 0===_||null===(_=_.slides)||void 0===_?void 0:_.find(bt=>bt.code==nt||bt.id==nt),G&&(this._slideIdx=(null===(F=this._dataSource)||void 0===F||null===(F=F.slides)||void 0===F?void 0:F.indexOf(G))||0);else if(R){var it,ft;G=null===(it=this._dataSource)||void 0===it||null===(it=it.slides)||void 0===it?void 0:it.find(bt=>bt.id==R),G&&(this._slideIdx=(null===(ft=this._dataSource)||void 0===ft||null===(ft=ft.slides)||void 0===ft?void 0:ft.indexOf(G))||0)}else this._slideIdx=Math.min(Math.max(h||0,0),this.slideTotal-1),G=this.slide;if(G){var xt;Yt(E.L.container,E.L.svg,G,!0),null===(xt=jQuery(E.L.svg).find("#"+T.F.BACKGROUND_GROUP))||void 0===xt||xt.empty();let bt=(0,J.RY)(T.F.BACKGROUND_GROUP,"g",void 0,E.L.svg);(0,J.I6)(bt,G),(P=>{var h,R,nt,rt;let G=st.nodeStatus,_=st.slideStatus;null===(h=P.svg)||void 0===h||h.nodes.forEach(it=>{it.pid=Math.ceil(1e9*Math.random()),(0,x.v)(it.pid)});let F=null===(R=P.svg)||void 0===R||null===(R=R.nodes)||void 0===R?void 0:R.map(it=>{var ft;return null!==(ft=it.idx)&&void 0!==ft?ft:0}).filter((it,ft,xt)=>xt.indexOf(it)==ft).sort((it,ft)=>(null!=it?it:0)-(null!=ft?ft:0));Vt(null!==(nt=null===(rt=P.svg)||void 0===rt?void 0:rt.nodes)&&void 0!==nt?nt:[],null!=F?F:[],{slide:P,nodeStatus:G,slideStatus:_})})(G)}this.changeSlide(this.slides,null===(rt=this.slide)||void 0===rt?void 0:rt.id,this.slideIdx,this.slides.length,G)}set onChangeSlide(h){this._fnChangeSlides.push(h)}changeSlide(h,R,nt,rt,G){this._fnChangeSlides.forEach(_=>_(h,R,nt,rt,G))}},Yt=(P,h,R,nt)=>{var rt,G,_,F;let it=window.document.querySelector(h);var ft;it||(it=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(ft=window.document.querySelector(P))||void 0===ft||ft.appendChild(it)),nt&&(it.textContent=null);let{x:xt,y:bt,width:X,height:ct}=null!==(rt=null==R||null===(G=R.svg)||void 0===G?void 0:G.viewBox)&&void 0!==rt?rt:E.L.screen.frameSize;it.setAttributeNS(null,"viewBox",xt+" "+bt+" "+X+" "+ct),it.setAttribute("id",h.replace("#",""));var ie,ye,kt=null!==(_=jQuery(P).width())&&void 0!==_?_:1080,Pt=null!==(F=jQuery(P).height())&&void 0!==F?F:1080,Xt=X/ct;Xt>=kt/Pt?ye=(ie=kt)/Xt:ie=(ye=Pt)*Xt,it.setAttributeNS(null,"width",ie.toString()),it.setAttributeNS(null,"height",ye.toString())}},7050:(he,Mt,v)=>{v.d(Mt,{M:()=>et,a:()=>E});var T=v(5619);const E=(dt,C,c)=>{var A;let{value:S}=null!==(A=dt.animate)&&void 0!==A?A:{};et(dt.id,{node:dt,value:S,nodeStatus:C,slideStatus:c},()=>{})},et=(dt,C,c)=>{var A;if(!C.value)return void c();let D=jQuery("#"+dt).parents("g");if(!D.length)return void c();let{size:S}=C.node;D.css("transform-origin",`${S.x+S.width/2}px ${S.y+S.height/2}px`);let x="",w=null!==(A=C.iteration)&&void 0!==A?A:0,H=[];(C.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?H.push(C.value):C.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(C.value)?(H.push("animation"),H.push(`animation-${C.value}`)):(H.push("animate__animated"),H.push(`animate__${C.value}`)):(H.push("animation"),H.push("animation-fadein")),w<0?(H.push("animation-iteration-infinite"),c(),c=function(){}):w>0&&H.push("animation-iteration-"+(w+1)),x=H.join(" "),function(lt){let d=function(){D.data("animate-running")?D.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){D.data("animate-running",!1),setTimeout(function(){lt()},100)}):lt()};D.hasClass("animation")?setTimeout(function(){d()}):d()}(function(){var lt;N(dt),(w>0||w<0)&&D.one("animationiteration",function(){C.slideStatus===T.J.slideStatus||(D.data("animate-running",!1),N(dt),C.slideStatus===T.J.slideStatus&&c())}),D.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(D.data("animate-running",!1),N(dt),C.finish){default:case 0:case 1:break;case 2:var d;et(dt,{node:C.node,value:null===(d=C.node.animate)||void 0===d?void 0:d.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{D.addClass("hide")})}C.slideStatus===T.J.slideStatus&&c()}),D.attr("data-class",null!==(lt=D.attr("class"))&&void 0!==lt?lt:""),D.addClass(x),D.data("animate-running",!0)})},N=function(dt){var C,c,A=jQuery("#"+dt).parents("g"),D=null===(C=A.attr("class"))||void 0===C?void 0:C.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),S=null===(c=A.attr("class"))||void 0===c?void 0:c.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);D&&D.forEach(function(w){jQuery(A).removeClass(w)}),S&&S.forEach(function(w){jQuery(A).removeClass(w)});let x=A.attr("data-class");x&&(A.attr("class",x),A.removeAttr("data-class")),jQuery(A).data("animation-running",!1)}},8946:(he,Mt,v)=>{v.d(Mt,{h:()=>et});var T=v(5619),E=v(7050);const et=(dt,C,c)=>{var A;if(!C.value)return void c();let D=jQuery("#"+dt).parents("g");if(!D.length)return void c();let{size:S}=C.node;D.css("transform-origin",`${S.x+S.width/2}px ${S.y+S.height/2}px`);let x="",w=null!==(A=C.iteration)&&void 0!==A?A:0,H=[];(C.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?H.push(C.value):(H.push("animation"),H.push(C.value?"animation-"+C.value:"animation-fadein")),w<0?(H.push("animation-iteration-infinite"),c(),c=function(){}):w>0&&H.push("animation-iteration-"+(w+1)),x=H.join(" "),function(lt){let d=function(){D.data("animate-running")?D.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){D.data("animate-running",!1),setTimeout(function(){lt()},100)}):lt()};D.hasClass("animation")?setTimeout(function(){d()}):d()}(function(){var lt;N(dt),(w>0||w<0)&&D.one("animationiteration",function(){C.slideStatus===T.J.slideStatus||(D.data("animate-running",!1),N(dt),C.slideStatus===T.J.slideStatus&&c())}),D.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(D.data("animate-running",!1),N(dt),C.finish){default:case 0:case 1:break;case 2:var d;(0,E.M)(dt,{node:C.node,value:null===(d=C.node.animate)||void 0===d?void 0:d.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{D.addClass("hide")})}C.slideStatus===T.J.slideStatus&&c()}),D.attr("data-class",null!==(lt=D.attr("class"))&&void 0!==lt?lt:""),D.addClass(x),D.data("animate-running",!0)})},N=function(dt){var C,c=jQuery("#"+dt).parents("g"),A=null===(C=c.attr("class"))||void 0===C?void 0:C.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);A&&A.forEach(function(S){jQuery(c).removeClass(S)});let D=c.attr("data-class");D&&(c.attr("class",D),c.removeAttr("data-class")),jQuery(c).data("animation-running",!1)}},7657:(he,Mt,v)=>{v.d(Mt,{c:()=>dt});var T=v(9506),E=v(5619),et=v(5970),N=v(7050);const dt=(c,A,D)=>{var S;if(!A.points||!A.points.length)return void D();let x=jQuery("#"+c),H=function C(c){let A=[];2===c.length&&c.splice(1,0,[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]);let H,Z,lt,D=1,S=c.length;for(;D<S;){if(H=c[D-1],Z=c[D],lt=c[D+1],(Math.abs(H[0]-Z[0])>=15||Math.abs(H[1]-Z[1])>=15)&&Math.pow(H[0]-Z[0],2)+Math.pow(H[1]-Z[1],2)>=Math.pow(15,2)&&lt&&(Math.abs(H[0]-lt[0])<=20||Math.abs(H[1]-lt[1])<=20)&&Math.pow(H[0]-lt[0],2)+Math.pow(H[1]-lt[1],2)<=Math.pow(20,2))A.push(Z);else{let I=Z[0]-H[0],b=Z[1]-H[1],B=Math.max(Math.abs(I),Math.abs(b));for(var d=0;d<B;d+=15)A.push([H[0]+I*d/B,H[1]+b*d/B])}D++}return S>0&&(A.splice(0,0,c[0]),A.push(c[S-1])),A}((Bt=>{if(1==Bt.length){let{size:ht}=A.node;return[[ht.x+ht.width/2,ht.y+ht.height/2],...Bt]}return[...Bt]})(A.points||[])),Z=null!==(S=A.iteration)&&void 0!==S?S:0;if(Z<0&&(D(),D=function(){}),x.data("work-running")&&Z<0)return;x.data("work-running",!0);let J,lt=H.length,d=Math.max(20,1e3*(A.time||3)/lt),{id:I,type:b,size:B,attribute:pt}=E.J.findNode(c),gt=function(Bt){if(A.slideStatus!==E.J.slideStatus)return x.data("work-running",!1),void(A.slideStatus===E.J.slideStatus&&D());if(Bt<lt){let V=H[Bt];V&&(J=Object.assign({},B,{x:V[0]-B.width/2,y:V[1]-B.height/2}),Object.assign(pt,(0,T.xW)(b,J,pt)),(0,et.tD)(window.document.getElementById(I),pt),setTimeout(function(){gt(++Bt)},d))}else if(Z>0)Z--,gt(1);else if(Z<0)gt(1);else switch(x.data("work-running",!1),A.slideStatus===E.J.slideStatus&&D(),A.finish){default:case 0:break;case 1:Object.assign(pt,(0,T.xW)(b,B,pt)),(0,et.tD)(window.document.getElementById(I),pt);break;case 2:var ht;(0,N.M)(A.node.id,{node:A.node,value:null===(ht=A.node.animate)||void 0===ht?void 0:ht.out,nodeStatus:A.nodeStatus,slideStatus:A.slideStatus},()=>{x.addClass("hide")})}};gt(1)}},6769:(he,Mt,v)=>{v.d(Mt,{d:()=>et});var T=v(6611),E=v(5619);const et=(N,dt,C,c,A)=>{var D,S,x,w,H,Z,lt;if(c.slideStatus!=E.J.slideStatus)return dt.async&&"change-slide"!=dt.async?void 0:void A();if(c.nodeStatus!=E.J.nodeStatus&&(!dt.async||"change-node"==dt.async))return void A();if(!(null!==(D=dt.source)&&void 0!==D&&D.path||null!==(S=dt.source)&&void 0!==S&&S.url))return console.warn(`${N} -> audio no source!`),A(),void(A=()=>{});var d=jQuery("#"+N);let I=null!==(x=dt.iteration)&&void 0!==x?x:0;if(I<0&&(A(),A=function(){}),!(d.data("audio-running")&&I<0)){d.data("audio-running",!0);var b=function(pt){pt.pause(),pt.remove(),d.data("audio-running",!1)},B=new Audio;return B.autoplay=!0,B.loop=0!=I,B.preload="auto",B.controls=!0,B.setAttributeNode(document.createAttribute("playsinline")),B.addEventListener("canplay",function(){var pt=B.play();pt&&pt.then(function(J){var gt;d.data("audio-running",!0),"time"==dt.async?setTimeout(()=>{c.slideStatus===E.J.slideStatus&&(b(B),A(),A=()=>{})},1e3*(null!==(gt=dt.time)&&void 0!==gt?gt:1)):"non-stop"==dt.async&&(A(),A=()=>{})}).catch(function(J){d.data("audio-running",!1),c.slideStatus===E.J.slideStatus&&(A(),A=()=>{})})}),B.addEventListener("timeupdate",function(){switch(dt.async){case"time":case"change-slide":c.slideStatus!==E.J.slideStatus&&(b(this),A(),A=()=>{});break;case"finish-action":C.total>=2&&C.total-C.counter==1&&(b(this),A(),A=()=>{});break;default:case"change-node":c.nodeStatus!==E.J.nodeStatus&&(b(this),A(),A=()=>{});case"non-stop":}}),B.addEventListener("canplaythrough",function(){this.loop&&(I>0?I--:0==I&&(this.loop=!1))}),B.addEventListener("play",function(){}),B.addEventListener("pause",function(){}),B.addEventListener("ended",function(){this.remove(),d.data("audio-running",!1),c.slideStatus===E.J.slideStatus&&(A(),A=()=>{})}),B.onerror=function(){this.remove(),d.data("audio-running",!1),c.slideStatus===E.J.slideStatus&&(A(),A=()=>{})},B.src=(null!==(w=dt.source)&&void 0!==w&&w.path?(null===(H=T.L.config)||void 0===H?void 0:H.readfileuploadurl)+(null===(Z=dt.source)||void 0===Z?void 0:Z.path):null===(lt=dt.source)||void 0===lt?void 0:lt.url)||"",B}}},334:(he,Mt,v)=>{v.d(Mt,{J:()=>D});var T=v(6611),E=v(5619),et=v(8946),N=v(7657),dt=v(6769),C=v(3591),c=v(2241),A=v(7050);const D=(S,x,w,H)=>{var Z,lt,d;let I={total:0,counter:0},{triggershow:b,triggerrun:B,triggerhide:pt,action:J,audio:gt,slide:Bt,media:ht}=null!==(Z=null===(lt=S.interactive)||void 0===lt?void 0:lt.click)&&void 0!==Z?Z:{};if(console.log(`node(${S.id}) | nodeStatus(${x}) | slideStatus(${w}) | click`),b){let{id:Tt,ids:ut,time:Gt,async:ne}=b;"asynctrue"==ne?(0,C.GD)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w}):"time"==ne&&setTimeout(()=>{(0,C.GD)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})},1e3*(null!=Gt?Gt:0))}if(B){let{id:Tt,ids:ut,time:Gt,async:ne}=B;"asynctrue"==ne?(0,C.MF)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w}):"time"==ne&&setTimeout(()=>{(0,C.MF)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})},1e3*(null!=Gt?Gt:0))}if(pt){let{id:Tt,ids:ut,time:Gt,async:ne}=pt;"asynctrue"==ne?(0,C.vi)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w}):"time"==ne&&setTimeout(()=>{(0,C.vi)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})},1e3*(null!=Gt?Gt:0))}let V=()=>{setTimeout(()=>{if(I.counter>=I.total){if(H&&H(),b){let{id:Tt,ids:ut,async:Gt}=b;(!Gt||"asyncfalse"==Gt)&&(0,C.GD)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})}if(B){let{id:Tt,ids:ut,async:Gt}=B;(!Gt||"asyncfalse"==Gt)&&(0,C.MF)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})}if(pt){let{id:Tt,ids:ut,async:Gt}=pt;(!Gt||"asyncfalse"==Gt)&&(0,C.vi)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})}}})};if(null!=J&&J.value){I.total+=1;let Tt=()=>{I.counter+=1,V()};switch(null==J?void 0:J.value){case"hide":var It;(0,A.M)(S.id,{node:S,value:null===(It=S.animate)||void 0===It?void 0:It.out,nodeStatus:x,slideStatus:w},()=>{jQuery("#"+S.id).addClass("hide"),Tt()});break;case"points":{let{points:ut,time:Gt,iteration:ne,finish:q}=J;ut&&(0,N.c)(S.id,{node:S,points:ut,time:Gt,iteration:ne,finish:q,nodeStatus:x,slideStatus:w},Tt);break}default:{let{value:ut,time:Gt,iteration:ne,finish:q}=J;(0,et.h)(S.id,{node:S,value:ut,time:Gt,iteration:ne,finish:q,nodeStatus:x,slideStatus:w},Tt);break}}}if(null!=gt&&null!==(d=gt.source)&&void 0!==d&&d.path){I.total+=1;let Tt=()=>{I.counter+=1,V()};(0,dt.d)(S.id,gt,I,{nodeStatus:x,slideStatus:w},Tt)}if(I.total||V(),null!=Bt&&Bt.id)switch(Bt.id){case-1:E.J.runSlide(E.J.slideIdx-1);break;case-2:E.J.runSlide(E.J.slideIdx+1);break;default:var Et;E.J.runSlide(void 0,Bt.id,null===(Et=Bt.code)||void 0===Et?void 0:Et.toString())}if(null!=ht&&ht.type){var Y;let ut=`<div class="popup-media-viewer"><iframe src="${(0,c._)({readfileuploadurl:null===(Y=T.L.config)||void 0===Y?void 0:Y.readfileuploadurl,type:null==ht?void 0:ht.type,oss:null==ht?void 0:ht.oss,path:null==ht?void 0:ht.path,url:null==ht?void 0:ht.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,Gt=jQuery(ut).appendTo(window.document.body);Gt.find(".btn-close").click(function(ne){ne.preventDefault(),Gt.remove()})}}},3591:(he,Mt,v)=>{v.d(Mt,{GD:()=>N,MF:()=>dt,vi:()=>C});var T=v(5619),E=v(334),et=v(7050);const N=c=>{c.id?jQuery("#"+c.id).removeClass("hide"):c.ids&&c.ids.forEach(A=>{jQuery("#"+A).removeClass("hide")})},dt=c=>{c.id?(jQuery("#"+c.id).removeClass("hide"),(0,E.J)(T.J.findNode(c.id),c.nodeStatus,c.slideStatus)):c.ids&&c.ids.forEach(A=>{jQuery("#"+A).removeClass("hide"),(0,E.J)(T.J.findNode(A),c.nodeStatus,c.slideStatus)})},C=c=>{if(c.id){var A;let D=T.J.findNode(c.id);(0,et.M)(c.id,{node:D,value:null===(A=D.animate)||void 0===A?void 0:A.out,nodeStatus:c.nodeStatus,slideStatus:c.slideStatus},()=>{jQuery("#"+c.id).addClass("hide")})}else c.ids&&c.ids.forEach(D=>{var S;let x=T.J.findNode(D);(0,et.M)(D,{node:x,value:null===(S=x.animate)||void 0===S?void 0:S.out,nodeStatus:c.nodeStatus,slideStatus:c.slideStatus},()=>{jQuery("#"+D).addClass("hide")})})}},5970:(he,Mt,v)=>{v.d(Mt,{cR:()=>B,rN:()=>gt,t8:()=>pt,fn:()=>Bt,RY:()=>Y,tD:()=>ht,KG:()=>It,c_:()=>V,s6:()=>J,I6:()=>Dt,in:()=>Tt,IA:()=>Kt,KP:()=>Ct,AE:()=>ut,xJ:()=>q,D_:()=>Gt,kE:()=>wt});var T=v(1999),E=v(7873),et=v(6315),dt=/^#?[a-fA-F0-9]+$/;const A=(M,W)=>{var s;if("none"==(M=null!==(s=M)&&void 0!==s?s:""))return"none";if("transparent"==M)return"rgba(0,0,0,0)";if(M.includes("rgba("))return M;if(M.includes("rgb(")&&(M=(0,et.w)(M)),!(M=M.replace(/[^0-9a-fA-F]/g,"")))return"";if(!dt.test(M))return console.error(`hex2rgba -> ${M}: first argument has invalid hexadecimal characters`),"";if("#"===M[0]&&(M=M.slice(1)),3===M.length){let _t=M.split("");_t.splice(2,0,M[2]),_t.splice(1,0,M[1]),_t.splice(0,0,M[0]),M=_t.join("")}if(6!==M.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var tt=[parseInt(M.slice(0,2),16),parseInt(M.slice(2,4),16),parseInt(M.slice(4,6),16)];return W="number"==typeof W?W:parseFloat(W),tt.push(W>=0&&W<=1?W:1),"rgba("+tt.join(",")+")"};var D=v(2241),S=v(8779),x=v(6611),w=v(9841),H=v(7945),Z=v(9173),lt=v(1281),d=v(5619),I=v(745),b=v(6847);class B{constructor(W,s){let tt=window.document.querySelector(s);var _t;tt||(tt=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(_t=window.document.querySelector(W))||void 0===_t||_t.appendChild(tt));let{svgViewBox:Lt,svgSize:jt}=x.L.screen.init();tt.setAttributeNS(null,"viewBox",`${Lt.x} ${Lt.y} ${Lt.width} ${Lt.height}`),tt.setAttribute("id",s.replace("#","")),tt.style.display="block",tt.style.width=`${jt.width}px`,tt.style.height=`${jt.height}px`,tt.style.backgroundColor="#fafafa",tt.style.cursor="default"}}const pt=M=>{jQuery(x.L.target).find("#"+E.F.BACKGROUND_GROUP).empty();let W=Y(E.F.BACKGROUND_GROUP,"g",void 0,x.L.target);Dt(W,M),(()=>{let s=window.document.getElementById(null==M?void 0:M.id);jQuery(s).find("#"+E.F.BACKGROUND_GROUP).empty();let tt=Y(E.F.BACKGROUND_GROUP,"g",void 0,s);Dt(tt,M)})()},J=()=>{let M=x.L.screen.svgViewBox,W=x.L.screen.svgSize;x.L.target&&(x.L.target.setAttributeNS(null,"viewBox",`${M.x} ${M.y} ${M.width} ${M.height}`),x.L.target.style.left=`${W.x}px`,x.L.target.style.top=`${W.y}px`,x.L.target.style.width=`${W.width}px`,x.L.target.style.height=`${W.height}px`)},gt=()=>{jQuery(x.L.target).find(">*:not(defs)").remove()},Bt=(M,W,s,tt,_t)=>{let Lt;return M?(Lt=jQuery(_t||x.L.target).find("#"+M).get(0),Lt||(Lt=window.document.createElementNS("http://www.w3.org/2000/svg",s),Lt.setAttribute("id",M),W==T.h.FOREIGNOBJECT&&Lt.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(Lt).appendTo(_t||x.L.target))):(Lt=window.document.createElementNS("http://www.w3.org/2000/svg",s),jQuery(Lt).appendTo(_t||x.L.target)),null!=tt&&tt.attribute&&ht(Lt,null==tt?void 0:tt.attribute),null!=tt&&tt.style&&V(Lt,null==tt?void 0:tt.style),null!=tt&&tt.source&&It(Lt,W,null==tt?void 0:tt.source),Lt},ht=(M,W)=>{return jQuery(M).attr((s=Object.assign({},W||{}),null===(tt=Object.keys(s))||void 0===tt||tt.forEach(jt=>{switch(jt){case"fill":break;case"fillRule":var Ft;Object.assign(s,{"fill-rule":null!==(Ft=s.fillRule)&&void 0!==Ft?Ft:null,fillRule:null});break;case"stroke":var Wt;Object.assign(s,{"stroke-width":null!==(Wt=s.strokeWidth)&&void 0!==Wt?Wt:null,strokeWidth:null});break;case"strokeLinecap":var Vt;Object.assign(s,{"stroke-linecap":null!==(Vt=s.strokeLinecap)&&void 0!==Vt?Vt:null,strokeLinecap:null});break;case"strokeLinejoin":var re;Object.assign(s,{"stroke-linejoin":null!==(re=s.strokeLinejoin)&&void 0!==re?re:null,strokeLinejoin:null});break;case"strokeMiterlimit":var Rt;Object.assign(s,{"stroke-miterlimit":null!==(Rt=s.strokeMiterlimit)&&void 0!==Rt?Rt:null,strokeMiterlimit:null});break;case"strokeDasharray":var st;Object.assign(s,{"stroke-dasharray":null!==(st=s.strokeDasharray)&&void 0!==st?st:null,strokeDasharray:null});break;case"strokeDasharrays":var Yt,P;Object.assign(s,{"stroke-dasharray":null!==(Yt=null===(P=s.strokeDasharrays)||void 0===P?void 0:P.join(" "))&&void 0!==Yt?Yt:null,strokeDasharrays:null});break;case"fontFamily":var h;Object.assign(s,{"font-family":null!==(h=s.fontFamily)&&void 0!==h?h:null,fontFamily:null});break;case"fontWeight":var R;Object.assign(s,{"font-weight":null!==(R=s.fontWeight)&&void 0!==R?R:null,fontWeight:null});break;case"fontStyle":var nt;Object.assign(s,{"font-style":null!==(nt=s.fontStyle)&&void 0!==nt?nt:null,fontStyle:null});break;case"fontSize":var rt;Object.assign(s,{"font-size":null!==(rt=s.fontSize)&&void 0!==rt?rt:null,fontSize:null});break;case"textLength":Object.assign(s,{textLength:s.textLength?`${s.textLength}px`:null});break;case"letterSpacing":var G;Object.assign(s,{"letter-spacing":null!==(G=s.letterSpacing)&&void 0!==G?G:null,letterSpacing:null});break;case"wordSpacing":var _;Object.assign(s,{"word-spacing":null!==(_=s.wordSpacing)&&void 0!==_?_:null,wordSpacing:null});break;case"alignmentBaseline":var F;Object.assign(s,{"alignment-baseline":null!==(F=s.alignmentBaseline)&&void 0!==F?F:null,alignmentBaseline:null});break;case"dominantBaseline":var it;Object.assign(s,{"dominant-baseline":null!==(it=s.dominantBaseline)&&void 0!==it?it:null,dominantBaseline:null});break;case"textAnchor":var ft;Object.assign(s,{"text-anchor":null!==(ft=s.textAnchor)&&void 0!==ft?ft:null,textAnchor:null});break;case"textDecoration":var xt;Object.assign(s,{"text-decoration":null!==(xt=s.textDecoration)&&void 0!==xt?xt:null,textDecoration:null});break;case"transformOrigin":var bt;Object.assign(s,{"transform-origin":null!==(bt=s.transformOrigin)&&void 0!==bt?bt:null,transformOrigin:null})}}),Object.assign({},null!=s?s:{},{fill:null!=s&&s.fill?A(s.fill,null!==(_t=null==s?void 0:s.fillOpacity)&&void 0!==_t?_t:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=s&&s.stroke?A(s.stroke,null!==(Lt=null==s?void 0:s.strokeOpacity)&&void 0!==Lt?Lt:1):"rgba(0,0,0,0)",strokeOpacity:null}))),M;var s,tt,_t,Lt},V=(M,W)=>{return jQuery(M).css((s=Object.assign({},W||{}),null===(tt=Object.keys(s))||void 0===tt||tt.forEach(_t=>{switch(_t){case"padding":Object.assign(s,{padding:s.padding?`${s.padding}px`:null});break;case"borderWidth":var Lt;Object.assign(s,s.borderWidth&&s.borderColor?{"border-width":`${s.borderWidth}px`,"border-style":s.borderStyle||"solid","border-color":A(s.borderColor,null!==(Lt=s.borderOpacity)&&void 0!==Lt?Lt:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(s,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(s,{"border-radius":s.borderRadius?`${s.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var jt;Object.assign(s,s.backgroundColor?{"background-color":A(s.backgroundColor,null!==(jt=s.backgroundOpacity)&&void 0!==jt?jt:1)}:{"background-color":""}),Object.assign(s,{backgroundColor:null,backgroundOpacity:null})}}),s)),M;var s,tt},It=(M,W,s)=>{switch(W){case T.h.TEXT:var tt,_t;jQuery(M).text(null!==(tt=null==s||null===(_t=s.text)||void 0===_t?void 0:_t.textContent)&&void 0!==tt?tt:"");break;case T.h.TSPAN:var Lt,jt;jQuery(M).text(null!==(Lt=null==s||null===(jt=s.text)||void 0===jt?void 0:jt.textContent)&&void 0!==Lt?Lt:"");break;case T.h.IMAGE:var Ft,Wt,Vt,re,Rt;jQuery(M).attr("href",(null==s||null===(Ft=s.image)||void 0===Ft?void 0:Ft.base64)||(null!=s&&null!==(Wt=s.image)&&void 0!==Wt&&Wt.path?(null===(Vt=x.L.config)||void 0===Vt?void 0:Vt.readfileuploadurl)+(null==s||null===(re=s.image)||void 0===re?void 0:re.path):null==s||null===(Rt=s.image)||void 0===Rt?void 0:Rt.url)||"");break;case T.h.FOREIGNOBJECT:switch(null==s?void 0:s.type){case"text":var st,Yt;if(null!==(st=s.text)&&void 0!==st&&st.variableKeywords&&null!==(Yt=s.text)&&void 0!==Yt&&Yt.variableKeywords.length){var P;let y=x.L.variable.getKeys(),f=(null===(P=s.text)||void 0===P?void 0:P.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";s.text.variableKeywords.forEach(O=>{var p=O.replace(/[^a-zA-Z0-9_]/gm,"");if(y.indexOf(p)>=0){var z=x.L.variable.getValue(p);f=f.replace(O,z)}}),jQuery(M).text(f)}else{var h;jQuery(M).text((null===(h=s.text)||void 0===h?void 0:h.textContent)||"")}break;case"html":{var R,nt,rt;let y=(null==s||null===(R=s.html)||void 0===R?void 0:R.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>';if(null!==(nt=s.html)&&void 0!==nt&&nt.variableKeywords&&null!==(rt=s.html)&&void 0!==rt&&rt.variableKeywords.length){let f=x.L.variable.getKeys();s.html.variableKeywords.forEach(O=>{var p=O.replace(/[^a-zA-Z0-9_]/gm,"");if(f.indexOf(p)>=0){var z=x.L.variable.getValue(p);y=y.replace(O,z)}})}jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${y}</div>`).find("img[path],video[path],iframe[path]").each((f,O)=>{var p,z;O.setAttribute("src",(null!==(p=null===(z=x.L.config)||void 0===z?void 0:z.readfileuploadurl)&&void 0!==p?p:"")+O.getAttribute("path")),O.removeAttribute("path")});break}case"input":var G,_,F,it;if(null!==(G=s.input)&&void 0!==G&&G.input)jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(F=null===(it=s.input)||void 0===it?void 0:it.placeholder)&&void 0!==F?F:""}" maxlength="100" /></div>`);else if(null!==(_=s.input)&&void 0!==_&&_.textarea){var ft,xt;jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(ft=null===(xt=s.input)||void 0===xt?void 0:xt.placeholder)&&void 0!==ft?ft:""}" maxlength="1000"></textarea></div>`)}break;case"image":var bt,X,ct,kt,Pt;jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(bt=s.image)||void 0===bt?void 0:bt.base64)||(null!==(X=s.image)&&void 0!==X&&X.path?(null===(ct=x.L.config)||void 0===ct?void 0:ct.readfileuploadurl)+(null===(kt=s.image)||void 0===kt?void 0:kt.path):null===(Pt=s.image)||void 0===Pt?void 0:Pt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Qt,Xt,ie,ye;jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Qt=s.iframe)&&void 0!==Qt&&Qt.path?(null===(Xt=x.L.config)||void 0===Xt?void 0:Xt.readfileuploadurl)+(null===(ie=s.iframe)||void 0===ie?void 0:ie.path):null===(ye=s.iframe)||void 0===ye?void 0:ye.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var ae,se,xe,Ee,Pe;let y=(0,D._)({readfileuploadurl:null===(ae=x.L.config)||void 0===ae?void 0:ae.readfileuploadurl,type:null===(se=s.embed)||void 0===se?void 0:se.type,oss:null===(xe=s.embed)||void 0===xe?void 0:xe.oss,path:null===(Ee=s.embed)||void 0===Ee?void 0:Ee.path,url:null===(Pe=s.embed)||void 0===Pe?void 0:Pe.url});jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${y}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var be,Ce;jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(be=null===(Ce=s.svg)||void 0===Ce?void 0:Ce.svgContent)&&void 0!==be?be:""}</div>`);break;case"test":{var me,Ke,Be,Ve;let y=(null==s||null===(me=s.html)||void 0===me?void 0:me.htmlContent)||"";if(null!==(Ke=s.html)&&void 0!==Ke&&Ke.variableKeywords&&null!==(Be=s.html)&&void 0!==Be&&Be.variableKeywords.length){let f=x.L.variable.getKeys();s.html.variableKeywords.forEach(O=>{var p=O.replace(/[^a-zA-Z0-9_]/gm,"");if(f.indexOf(p)>=0){var z=x.L.variable.getValue(p);y=y.replace(O,z)}})}switch(null==s||null===(Ve=s.test)||void 0===Ve?void 0:Ve.type){case"truefalse":var qe;jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(qe=s.test.truefalse)&&void 0!==qe&&qe.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${y}</div></div></div>`);break;case"singlechoice":var Xe;jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(Xe=s.test.singlechoice)&&void 0!==Xe&&Xe.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${y}</div></div></div>`);break;case"multichoice":var ei;jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(ei=s.test.multichoice)&&void 0!==ei&&ei.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${y}</div></div></div>`);break;case"matching-empty":var ii;jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==s||null===(ii=s.test.matching)||void 0===ii?void 0:ii.key}"></div>`);break;case"matching-content":var ni,Ot,j;jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==s||null===(ni=s.test.matching)||void 0===ni?void 0:ni.key}"><div class="ondrag-item" data-key="${null!==(Ot=null==s||null===(j=s.test)||void 0===j||null===(j=j.matching)||void 0===j?void 0:j.key)&&void 0!==Ot?Ot:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${y}</div></div></div></div>`);break;case"fill":var i;((null===(i=s.html)||void 0===i?void 0:i.fillKeywords)||[]).forEach(f=>{var O=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${f.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;y=y.replace(new RegExp(f.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),O)}),jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${y}</div></div></div>`);break;case"speech":jQuery(M).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var n,o,r,l,m;jQuery(M).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(n=null!==(o=s.image)&&void 0!==o&&o.path?(null===(r=x.L.config)||void 0===r?void 0:r.readfileuploadurl)+(null===(l=s.image)||void 0===l?void 0:l.path):null===(m=s.image)||void 0===m?void 0:m.url)&&void 0!==n?n:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(M).find("img[path],video[path],iframe[path]").each((f,O)=>{var p,z;O.setAttribute("src",(null!==(p=null===(z=x.L.config)||void 0===z?void 0:z.readfileuploadurl)&&void 0!==p?p:"")+O.getAttribute("path")),O.removeAttribute("path")})}}}},Y=(M,W,s,tt)=>{let _t=jQuery(tt||x.L.target).find("#"+M).get(0);return _t||(_t=window.document.createElementNS("http://www.w3.org/2000/svg",W),_t.setAttribute("id",M),jQuery(_t).appendTo(tt||x.L.target)),jQuery(_t).attr((null==s?void 0:s.attribute)||{}),jQuery(_t).css((null==s?void 0:s.style)||{}),_t},Tt=(M,W)=>{let s=(0,w.$)(2),tt={fill:S.pZ.fill,stroke:S.pZ.stroke,"stroke-width":(0,w.$)(S.pZ.strokeWidth)};return[{element:Y("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:W.x-s,y:W.y-s,width:W.width+2*s,height:W.height+2*s},tt)},M),posType:"rect-center"}]},ut=(M,W)=>{let{size:s}=W,tt=(0,w.$)(1),_t=(0,w.$)(2),Lt=(0,w.$)(5),jt={stroke:S.u$.stroke,"stroke-width":(0,w.$)(S.u$.strokeWidth),"stroke-linecap":S.u$.strokeLinecap},Ft={fill:S.bf.fill,stroke:S.bf.stroke,"stroke-width":(0,w.$)(S.bf.strokeWidth)},Wt={fill:S.eD.fill,stroke:S.eD.stroke,"stroke-width":(0,w.$)(S.eD.strokeWidth),width:(0,w.$)(S.eD.width),height:(0,w.$)(S.eD.height)};return Y("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:s.x-tt,y1:s.y,x2:s.x-tt,y2:s.y+s.height},jt)},M),Y("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:s.x,y1:s.y-tt,x2:s.x+s.width,y2:s.y-tt},jt)},M),Y("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:s.x+s.width+tt,y1:s.y,x2:s.x+s.width+tt,y2:s.y+s.height},jt)},M),Y("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:s.x,y1:s.y+s.height+tt,x2:s.x+s.width,y2:s.y+s.height+tt},jt)},M),[{element:Y("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:s.x,y:s.y,width:s.width,height:s.height},Ft),style:{cursor:"move"}},M),posType:"rect-center"},{element:Y("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y-Lt},Wt),style:{cursor:"nw-resize"}},M),posType:"rect-top-left"},{element:Y("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y-Lt},Wt),style:{cursor:"ne-resize"}},M),posType:"rect-top-right"},{element:Y("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y+s.height-_t},Wt),style:{cursor:"sw-resize"}},M),posType:"rect-bottom-left"},{element:Y("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y+s.height-_t},Wt),style:{cursor:"se-resize"}},M),posType:"rect-bottom-right"},{element:Y("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:s.x+s.width/2-_t-tt,y:s.y-Lt},Wt),style:{cursor:"n-resize"}},M),posType:"rect-top"},{element:Y("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y+s.height/2-_t-tt},Wt),style:{cursor:"e-resize"}},M),posType:"rect-right"},{element:Y("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:s.x+s.width/2-_t-tt,y:s.y+s.height-_t},Wt),style:{cursor:"s-resize"}},M),posType:"rect-bottom"},{element:Y("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y+s.height/2-_t-tt},Wt),style:{cursor:"w-resize"}},M),posType:"rect-left"}]},Gt=(M,W,s)=>{let tt=(0,w.$)(1),_t=(0,w.$)(2),Lt=(0,w.$)(5),jt={stroke:S.u$.stroke,"stroke-width":(0,w.$)(S.u$.strokeWidth),"stroke-linecap":S.u$.strokeLinecap},Ft={fill:S.bf.fill,stroke:S.bf.stroke,"stroke-width":(0,w.$)(S.bf.strokeWidth)},Wt={fill:S.eD.fill,stroke:S.eD.stroke,"stroke-width":(0,w.$)(S.eD.strokeWidth),width:(0,w.$)(S.eD.width),height:(0,w.$)(S.eD.height)},Vt={fill:S.l6.fill,rx:(0,w.$)(S.l6.rx)},re={fill:S.T2.fill,"alignment-baseline":S.T2.alignmentBaseline,"text-anchor":S.T2.textAnchor,"font-size":(0,w.$)(S.T2.fontSize)},Rt={fill:S.IB.fill,stroke:S.IB.stroke,"stroke-width":(0,w.$)(S.IB.strokeWidth)},R=(Y("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:s.x-tt,y1:s.y,x2:s.x-tt,y2:s.y+s.height},jt)},M),Y("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:s.x,y1:s.y-tt,x2:s.x+s.width,y2:s.y-tt},jt)},M),Y("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:s.x+s.width+tt,y1:s.y,x2:s.x+s.width+tt,y2:s.y+s.height},jt)},M),Y("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:s.x,y1:s.y+s.height+tt,x2:s.x+s.width,y2:s.y+s.height+tt},jt)},M),Y("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:s.x,y:s.y,width:s.width,height:s.height},Ft)},M)),nt=`${s.width} x ${s.height}`,rt=8*nt.length;return Y("icdt-temp-select-rect-text","rect",{attribute:Object.assign({x:s.x+s.width/2-(0,w.$)(rt/2),y:s.y+s.height+(0,w.$)(10),width:(0,w.$)(rt),height:(0,w.$)(20)},Vt)},M),Y("icdt-temp-select-text","text",{attribute:Object.assign({x:s.x+s.width/2,y:s.y+s.height+(0,w.$)(20)},re)},M).textContent=nt,W.length>1&&W.forEach(Pt=>{let{size:Qt}=Pt;Y("icdt-temp-select-rect-node-"+Pt.id,"rect",{attribute:Object.assign({x:Qt.x,y:Qt.y,width:Qt.width,height:Qt.height},Rt)},M)}),[{element:R,posType:"rect-center"},{element:Y("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y-Lt},Wt),style:{cursor:"nw-resize"}},M),posType:"rect-top-left"},{element:Y("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y-Lt},Wt),style:{cursor:"ne-resize"}},M),posType:"rect-top-right"},{element:Y("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y+s.height-_t},Wt),style:{cursor:"sw-resize"}},M),posType:"rect-bottom-left"},{element:Y("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y+s.height-_t},Wt),style:{cursor:"se-resize"}},M),posType:"rect-bottom-right"},{element:Y("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:s.x+s.width/2-_t-tt,y:s.y-Lt},Wt),style:{cursor:"n-resize"}},M),posType:"rect-top"},{element:Y("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y+s.height/2-_t-tt},Wt),style:{cursor:"e-resize"}},M),posType:"rect-right"},{element:Y("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:s.x+s.width/2-_t-tt,y:s.y+s.height-_t},Wt),style:{cursor:"s-resize"}},M),posType:"rect-bottom"},{element:Y("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y+s.height/2-_t-tt},Wt),style:{cursor:"w-resize"}},M),posType:"rect-left"}]},q=(M,W)=>{let s=(0,w.$)(1),tt={stroke:S.u$.stroke,"stroke-width":(0,w.$)(S.u$.strokeWidth),"stroke-linecap":S.u$.strokeLinecap},_t={fill:S.bf.fill,stroke:S.bf.stroke,"stroke-width":(0,w.$)(S.bf.strokeWidth)};return Y("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:W.x-s,y1:W.y,x2:W.x-s,y2:W.y+W.height},tt)},M),Y("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:W.x,y1:W.y-s,x2:W.x+W.width,y2:W.y-s},tt)},M),Y("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:W.x+W.width+s,y1:W.y,x2:W.x+W.width+s,y2:W.y+W.height},tt)},M),Y("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:W.x,y1:W.y+W.height+s,x2:W.x+W.width,y2:W.y+W.height+s},tt)},M),[{element:Y("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:W.x,y:W.y,width:W.width,height:W.height},_t)},M),posType:"rect-center"}]},Ct=(M,W)=>((0,w.$)(-1),(0,w.$)(S.WR.strokeWidth),(0,w.$)(S.WR.strokeDasharray),Y("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:W.x,y:W.y,width:W.width,height:W.height,class:"cursor-draw"},{fill:S.lq.fill})},M),[]),Kt=(M,W)=>{let s={fill:S.$u.fill,stroke:S.$u.stroke,"stroke-width":(0,w.$)(S.$u.strokeWidth),"stroke-dasharray":(0,w.$)(S.$u.strokeDasharray)};jQuery(M).empty(),W.forEach(tt=>{var _t,Lt;let{size:jt}=tt;if(!tt.idx)return;Y("icdt-temp-index-rect-node-"+tt.id,"rect",{attribute:Object.assign({x:jt.x-5,y:jt.y-5,width:jt.width+10,height:jt.height+10},s)},M);let{element:Ft}=(0,I.$)(Math.ceil(1e9*Math.random()),{size:{x:jt.x-76,y:jt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(_t=tt.idx)&&void 0!==_t?_t:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(Lt=tt.time)&&void 0!==Lt?Lt:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},M);Ft.classList.add("node-input"),jQuery(Ft).on("change",'input[name="idx"]',Wt=>{var Vt;tt.idx=parseInt(null!==(Vt=Wt.target.value)&&void 0!==Vt?Vt:"0")}).on("change",'input[name="time"]',Wt=>{var Vt;tt.time=parseFloat(null!==(Vt=Wt.target.value)&&void 0!==Vt?Vt:"0")}).on("click",'button[name="remove"]',Wt=>{tt.idx=0,tt.time=null,Kt(M,W)})})},Dt=(M,W)=>{var s,tt,_t,Lt,jt,Ft;let{color:Wt,opacity:Vt,path:re,url:Rt,base64:st}=null!==(s=null==W||null===(tt=W.svg)||void 0===tt?void 0:tt.background)&&void 0!==s?s:{},{x:Yt,y:P,width:h,height:R}=null!==(_t=null==W||null===(Lt=W.svg)||void 0===Lt?void 0:Lt.viewBox)&&void 0!==_t?_t:{x:0,y:0,width:0,height:0};(0,b.L)(void 0,{size:{x:0,y:(0,w.$)(-10),width:100,height:20},attribute:{fill:"#999",textAnchor:"start",alignmentBaseline:"central",fontSize:(0,w.$)(12),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(jt=null!==(Ft=null==W?void 0:W.name)&&void 0!==Ft?Ft:null==W?void 0:W.code)&&void 0!==jt?jt:void 0}}},M),(0,H.a)(void 0,{size:{x:Yt,y:P,width:h,height:R},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,w.$)(1),strokeDasharray:(0,w.$)(10),class:"hide-on-viewer"}},M),Wt&&(0,H.a)(void 0,{size:{x:Yt,y:P,width:h,height:R},attribute:{fill:Wt,fillOpacity:Vt}},M),re&&(0,Z.B)(void 0,{size:{x:Yt,y:P,width:h,height:R},source:{type:"image",image:{path:re,url:Rt,base64:st}}},M)},wt=(M,W,s)=>{var tt;switch(jQuery(M).empty(),null===(tt=W.test)||void 0===tt?void 0:tt.type){case"truefalse":var _t;if(null!==(_t=W.test)&&void 0!==_t&&_t.showselection){var Lt,jt,Ft;let bt=null==W||null===(Lt=W.test)||void 0===Lt||null===(Lt=Lt.answer)||void 0===Lt||null===(Lt=Lt.truefalse)||void 0===Lt?void 0:Lt.value;null===(jt=W.svg)||void 0===jt||jt.nodes.filter(X=>{var ct;return"truefalse"==(null===(ct=X.source)||void 0===ct||null===(ct=ct.test)||void 0===ct?void 0:ct.type)&&X.id!=bt}).forEach(X=>{var ct;let{x:Pt,y:Qt,width:Xt,height:ie}=null!==(ct=null==X?void 0:X.size)&&void 0!==ct?ct:{x:0,y:0,width:0,height:0};(0,lt.K)(Math.ceil(1e9*Math.random()),{size:{x:Pt-.5,y:Qt-.5,width:Xt+1,height:ie+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},M)}),null!=W&&null!==(Ft=W.test)&&void 0!==Ft&&null!==(Ft=Ft.answer)&&void 0!==Ft&&Ft.truefalse&&bt&&(X=>{let ct=d.J.findNode(bt),{x:Pt,y:Qt,width:Xt,height:ie}=null!==(X=null==ct?void 0:ct.size)&&void 0!==X?X:{x:0,y:0,width:0,height:0};(0,lt.K)(Math.ceil(1e9*Math.random()),{size:{x:Pt-2,y:Qt-2,width:Xt+4,height:ie+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},M)})()}break;case"singlechoice":var Wt;if(null!==(Wt=W.test)&&void 0!==Wt&&Wt.showselection){var Vt,re,Rt;let bt=null==W||null===(Vt=W.test)||void 0===Vt||null===(Vt=Vt.answer)||void 0===Vt||null===(Vt=Vt.singlechoice)||void 0===Vt?void 0:Vt.value;null===(re=W.svg)||void 0===re||re.nodes.filter(X=>{var ct;return"singlechoice"==(null===(ct=X.source)||void 0===ct||null===(ct=ct.test)||void 0===ct?void 0:ct.type)&&X.id!=bt}).forEach(X=>{var ct;let{x:Pt,y:Qt,width:Xt,height:ie}=null!==(ct=null==X?void 0:X.size)&&void 0!==ct?ct:{x:0,y:0,width:0,height:0};(0,lt.K)(Math.ceil(1e9*Math.random()),{size:{x:Pt-.5,y:Qt-.5,width:Xt+1,height:ie+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},M)}),null!=W&&null!==(Rt=W.test)&&void 0!==Rt&&null!==(Rt=Rt.answer)&&void 0!==Rt&&Rt.singlechoice&&bt&&(X=>{let ct=d.J.findNode(bt),{x:Pt,y:Qt,width:Xt,height:ie}=null!==(X=null==ct?void 0:ct.size)&&void 0!==X?X:{x:0,y:0,width:0,height:0};(0,lt.K)(Math.ceil(1e9*Math.random()),{size:{x:Pt-2,y:Qt-2,width:Xt+4,height:ie+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},M)})()}break;case"multichoice":var st;if(null!==(st=W.test)&&void 0!==st&&st.showselection){var Yt,P,h,R;let bt=null!==(Yt=null==W||null===(P=W.test)||void 0===P||null===(P=P.answer)||void 0===P||null===(P=P.multichoice)||void 0===P?void 0:P.map(X=>X.value))&&void 0!==Yt?Yt:[];var nt;null===(h=W.svg)||void 0===h||h.nodes.filter(X=>{var ct;return"multichoice"==(null===(ct=X.source)||void 0===ct||null===(ct=ct.test)||void 0===ct?void 0:ct.type)&&!bt.includes(X.id)}).forEach(X=>{var ct;let{x:Pt,y:Qt,width:Xt,height:ie}=null!==(ct=null==X?void 0:X.size)&&void 0!==ct?ct:{x:0,y:0,width:0,height:0};(0,H.a)(Math.ceil(1e9*Math.random()),{size:{x:Pt-.5,y:Qt-.5,width:Xt+1,height:ie+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},M)}),null!=W&&null!==(R=W.test)&&void 0!==R&&null!==(R=R.answer)&&void 0!==R&&R.multichoice&&bt.length&&(null==W||null===(nt=W.test)||void 0===nt||null===(nt=nt.answer)||void 0===nt||nt.multichoice.forEach(X=>{var ct;let kt=d.J.findNode(X.value),{x:Qt,y:Xt,width:ie,height:ye}=null!==(ct=null==kt?void 0:kt.size)&&void 0!==ct?ct:{x:0,y:0,width:0,height:0};(0,H.a)(Math.ceil(1e9*Math.random()),{size:{x:Qt-2,y:Xt-2,width:ie+4,height:ye+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},M)}))}break;case"fill":var rt,G;null!=W&&null!==(rt=W.test)&&void 0!==rt&&null!==(rt=rt.answer)&&void 0!==rt&&rt.fill&&(null==W||null===(G=W.test)||void 0===G||null===(G=G.answer)||void 0===G||G.fill.forEach(bt=>{jQuery("#"+s.id).find(`input[type="text"][data-key="${bt.key}"]`).val(bt.value)}));break;case"matching":var _,F,it,ft;if(null!=W&&null!==(_=W.test)&&void 0!==_&&null!==(_=_.answer)&&void 0!==_&&_.matching)if("matching-empty"==(null===(F=s.source)||void 0===F||null===(F=F.test)||void 0===F?void 0:F.type))null==W||null===(ft=W.test)||void 0===ft||null===(ft=ft.answer)||void 0===ft||ft.matching.filter(bt=>{var X;return bt.key==(null===(X=s.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.matching)||void 0===X?void 0:X.key)}).forEach(bt=>{});else if("matching-content"==(null===(it=s.source)||void 0===it||null===(it=it.test)||void 0===it?void 0:it.type)){var xt;null==W||null===(xt=W.test)||void 0===xt||null===(xt=xt.answer)||void 0===xt||xt.matching.filter(bt=>{var X;return bt.value==(null===(X=s.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.matching)||void 0===X?void 0:X.key)}).forEach(bt=>{})}}}},2241:(he,Mt,v)=>{v.d(Mt,{_:()=>et});var T=v(8338);const et=C=>{switch(null==C?void 0:C.type){case T.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+C.readfileuploadurl+C.path;case T.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+C.readfileuploadurl+C.path;case T.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+C.readfileuploadurl+C.path;case T.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+C.readfileuploadurl+C.path;case T.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+C.readfileuploadurl+C.path;case T.S.HTML:case T.S.IMAGE_ANIMATION:case T.S.PHET:return""+C.readfileuploadurl+C.path;case T.S.ZIP:case T.S.SCORM:var c;return"imsmanifest.xml"==(null===(c=C.path)||void 0===c||null===(c=c.split("/"))||void 0===c?void 0:c.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+C.readfileuploadurl+C.path:""+C.readfileuploadurl+C.path;case T.S.TRACK:case T.S.TEXT:return""+C.readfileuploadurl+C.path;case T.S.LINK:switch(C.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+C.url;case 1002:var A;return null!==(A=N(C.url))&&void 0!==A?A:"";case 1005:var D;return null!==(D=C.url)&&void 0!==D?D:"";default:var S;return null!==(S=C.url)&&void 0!==S?S:""}default:return""+C.readfileuploadurl+C.path}},N=C=>{let c=dt(C);return c?"https://www.youtube.com/embed/"+c+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},dt=C=>{let c=null==C?void 0:C.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return c&&c.length>=2?c[1]:null}},1131:(he,Mt,v)=>{function T(){}function E(t){return null==t?T:function(){return this.querySelector(t)}}function dt(){return[]}function C(t){return null==t?dt:function(){return this.querySelectorAll(t)}}function D(t){return function(){return this.matches(t)}}function S(t){return function(e){return e.matches(t)}}v.d(Mt,{qrM:()=>aa,n8j:()=>la});var x=Array.prototype.find;function H(){return this.firstElementChild}var lt=Array.prototype.filter;function d(){return Array.from(this.children)}function pt(t){return new Array(t.length)}function gt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function ht(t,e,a,u,g,k){for(var U,L=0,Q=e.length,ot=k.length;L<ot;++L)(U=e[L])?(U.__data__=k[L],u[L]=U):a[L]=new gt(t,k[L]);for(;L<Q;++L)(U=e[L])&&(g[L]=U)}function V(t,e,a,u,g,k,L){var U,Q,te,ot=new Map,vt=e.length,Jt=k.length,Ht=new Array(vt);for(U=0;U<vt;++U)(Q=e[U])&&(Ht[U]=te=L.call(Q,Q.__data__,U,e)+"",ot.has(te)?g[U]=Q:ot.set(te,Q));for(U=0;U<Jt;++U)te=L.call(t,k[U],U,k)+"",(Q=ot.get(te))?(u[U]=Q,Q.__data__=k[U],ot.delete(te)):a[U]=new gt(t,k[U]);for(U=0;U<vt;++U)(Q=e[U])&&ot.get(Ht[U])===Q&&(g[U]=Q)}function It(t){return t.__data__}function Y(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ct(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}gt.prototype={constructor:gt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var tt="http://www.w3.org/1999/xhtml";const _t={svg:"http://www.w3.org/2000/svg",xhtml:tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lt(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),_t.hasOwnProperty(e)?{space:_t[e],local:t}:t}function jt(t){return function(){this.removeAttribute(t)}}function Ft(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wt(t,e){return function(){this.setAttribute(t,e)}}function Vt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function re(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function Rt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function Yt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function P(t){return function(){this.style.removeProperty(t)}}function h(t,e,a){return function(){this.style.setProperty(t,e,a)}}function R(t,e,a){return function(){var u=e.apply(this,arguments);null==u?this.style.removeProperty(t):this.style.setProperty(t,u,a)}}function rt(t,e){return t.style.getPropertyValue(e)||Yt(t).getComputedStyle(t,null).getPropertyValue(e)}function G(t){return function(){delete this[t]}}function _(t,e){return function(){this[t]=e}}function F(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function ft(t){return t.trim().split(/^|\s+/)}function xt(t){return t.classList||new bt(t)}function bt(t){this._node=t,this._names=ft(t.getAttribute("class")||"")}function X(t,e){for(var a=xt(t),u=-1,g=e.length;++u<g;)a.add(e[u])}function ct(t,e){for(var a=xt(t),u=-1,g=e.length;++u<g;)a.remove(e[u])}function kt(t){return function(){X(this,t)}}function Pt(t){return function(){ct(this,t)}}function Qt(t,e){return function(){(e.apply(this,arguments)?X:ct)(this,t)}}function ie(){this.textContent=""}function ye(t){return function(){this.textContent=t}}function ae(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function xe(){this.innerHTML=""}function Ee(t){return function(){this.innerHTML=t}}function Pe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ce(){this.nextSibling&&this.parentNode.appendChild(this)}function Ke(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ve(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===tt&&e.documentElement.namespaceURI===tt?e.createElement(t):e.createElementNS(a,t)}}function qe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xe(t){var e=Lt(t);return(e.local?qe:Ve)(e)}function ii(){return null}function Ot(){var t=this.parentNode;t&&t.removeChild(this)}function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function n(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function y(t){return function(){var e=this.__on;if(e){for(var k,a=0,u=-1,g=e.length;a<g;++a)k=e[a],t.type&&k.type!==t.type||k.name!==t.name?e[++u]=k:this.removeEventListener(k.type,k.listener,k.options);++u?e.length=u:delete this.__on}}}function f(t,e,a){return function(){var g,u=this.__on,k=function l(t){return function(e){t.call(this,e,this.__data__)}}(e);if(u)for(var L=0,U=u.length;L<U;++L)if((g=u[L]).type===t.type&&g.name===t.name)return this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=k,g.options=a),void(g.value=e);this.addEventListener(t.type,k,a),g={type:t.type,name:t.name,value:e,listener:k,options:a},u?u.push(g):this.__on=[g]}}function p(t,e,a){var u=Yt(t),g=u.CustomEvent;"function"==typeof g?g=new g(e,a):(g=u.document.createEvent("Event"),a?(g.initEvent(e,a.bubbles,a.cancelable),g.detail=a.detail):g.initEvent(e,!1,!1)),t.dispatchEvent(g)}function z(t,e){return function(){return p(this,t,e)}}function K(t,e){return function(){return p(this,t,e.apply(this,arguments))}}bt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var St=[null];function Nt(t,e){this._groups=t,this._parents=e}function $t(){return new Nt([[document.documentElement]],St)}Nt.prototype=$t.prototype={constructor:Nt,select:function et(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Q,ot,k=e[g],L=k.length,U=u[g]=new Array(L),vt=0;vt<L;++vt)(Q=k[vt])&&(ot=t.call(Q,Q.__data__,vt,k))&&("__data__"in Q&&(ot.__data__=Q.__data__),U[vt]=ot);return new Nt(u,this._parents)},selectAll:function A(t){t="function"==typeof t?function c(t){return function(){return function N(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):C(t);for(var e=this._groups,a=e.length,u=[],g=[],k=0;k<a;++k)for(var Q,L=e[k],U=L.length,ot=0;ot<U;++ot)(Q=L[ot])&&(u.push(t.call(Q,Q.__data__,ot,L)),g.push(Q));return new Nt(u,g)},selectChild:function Z(t){return this.select(null==t?H:function w(t){return function(){return x.call(this.children,t)}}("function"==typeof t?t:S(t)))},selectChildren:function b(t){return this.selectAll(null==t?d:function I(t){return function(){return lt.call(this.children,t)}}("function"==typeof t?t:S(t)))},filter:function B(t){"function"!=typeof t&&(t=D(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Q,k=e[g],L=k.length,U=u[g]=[],ot=0;ot<L;++ot)(Q=k[ot])&&t.call(Q,Q.__data__,ot,k)&&U.push(Q);return new Nt(u,this._parents)},data:function Et(t,e){if(!arguments.length)return Array.from(this,It);var a=e?V:ht,u=this._parents,g=this._groups;"function"!=typeof t&&(t=function Bt(t){return function(){return t}}(t));for(var k=g.length,L=new Array(k),U=new Array(k),Q=new Array(k),ot=0;ot<k;++ot){var vt=u[ot],Jt=g[ot],Ht=Jt.length,te=Y(t.call(vt,vt&&vt.__data__,ot,u)),ke=te.length,Ie=U[ot]=new Array(ke),Ut=L[ot]=new Array(ke);a(vt,Jt,Ie,Ut,Q[ot]=new Array(Ht),te,e);for(var fe,we,ue=0,ee=0;ue<ke;++ue)if(fe=Ie[ue]){for(ue>=ee&&(ee=ue+1);!(we=Ut[ee])&&++ee<ke;);fe._next=we||null}}return(L=new Nt(L,u))._enter=U,L._exit=Q,L},enter:function J(){return new Nt(this._enter||this._groups.map(pt),this._parents)},exit:function Tt(){return new Nt(this._exit||this._groups.map(pt),this._parents)},join:function ut(t,e,a){var u=this.enter(),g=this,k=this.exit();return"function"==typeof t?(u=t(u))&&(u=u.selection()):u=u.append(t+""),null!=e&&(g=e(g))&&(g=g.selection()),null==a?k.remove():a(k),u&&g?u.merge(g).order():g},merge:function Gt(t){for(var e=t.selection?t.selection():t,a=this._groups,u=e._groups,g=a.length,L=Math.min(g,u.length),U=new Array(g),Q=0;Q<L;++Q)for(var te,ot=a[Q],vt=u[Q],Jt=ot.length,Ht=U[Q]=new Array(Jt),ke=0;ke<Jt;++ke)(te=ot[ke]||vt[ke])&&(Ht[ke]=te);for(;Q<g;++Q)U[Q]=a[Q];return new Nt(U,this._parents)},selection:function Oe(){return this},order:function ne(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var L,u=t[e],g=u.length-1,k=u[g];--g>=0;)(L=u[g])&&(k&&4^L.compareDocumentPosition(k)&&k.parentNode.insertBefore(L,k),k=L);return this},sort:function q(t){function e(Jt,Ht){return Jt&&Ht?t(Jt.__data__,Ht.__data__):!Jt-!Ht}t||(t=Ct);for(var a=this._groups,u=a.length,g=new Array(u),k=0;k<u;++k){for(var ot,L=a[k],U=L.length,Q=g[k]=new Array(U),vt=0;vt<U;++vt)(ot=L[vt])&&(Q[vt]=ot);Q.sort(e)}return new Nt(g,this._parents).order()},call:function Kt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function Dt(){return Array.from(this)},node:function wt(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var u=t[e],g=0,k=u.length;g<k;++g){var L=u[g];if(L)return L}return null},size:function M(){let t=0;for(const e of this)++t;return t},empty:function W(){return!this.node()},each:function s(t){for(var e=this._groups,a=0,u=e.length;a<u;++a)for(var U,g=e[a],k=0,L=g.length;k<L;++k)(U=g[k])&&t.call(U,U.__data__,k,g);return this},attr:function st(t,e){var a=Lt(t);if(arguments.length<2){var u=this.node();return a.local?u.getAttributeNS(a.space,a.local):u.getAttribute(a)}return this.each((null==e?a.local?Ft:jt:"function"==typeof e?a.local?Rt:re:a.local?Vt:Wt)(a,e))},style:function nt(t,e,a){return arguments.length>1?this.each((null==e?P:"function"==typeof e?R:h)(t,e,null==a?"":a)):rt(this.node(),t)},property:function it(t,e){return arguments.length>1?this.each((null==e?G:"function"==typeof e?F:_)(t,e)):this.node()[t]},classed:function Xt(t,e){var a=ft(t+"");if(arguments.length<2){for(var u=xt(this.node()),g=-1,k=a.length;++g<k;)if(!u.contains(a[g]))return!1;return!0}return this.each(("function"==typeof e?Qt:e?kt:Pt)(a,e))},text:function se(t){return arguments.length?this.each(null==t?ie:("function"==typeof t?ae:ye)(t)):this.node().textContent},html:function be(t){return arguments.length?this.each(null==t?xe:("function"==typeof t?Pe:Ee)(t)):this.node().innerHTML},raise:function me(){return this.each(Ce)},lower:function Be(){return this.each(Ke)},append:function ei(t){var e="function"==typeof t?t:Xe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function ni(t,e){var a="function"==typeof t?t:Xe(t),u=null==e?ii:"function"==typeof e?e:E(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),u.apply(this,arguments)||null)})},remove:function j(){return this.each(Ot)},clone:function o(t){return this.select(t?n:i)},datum:function r(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function O(t,e,a){var g,L,u=function m(t){return t.trim().split(/^|\s+/).map(function(e){var a="",u=e.indexOf(".");return u>=0&&(a=e.slice(u+1),e=e.slice(0,u)),{type:e,name:a}})}(t+""),k=u.length;if(!(arguments.length<2)){for(U=e?f:y,g=0;g<k;++g)this.each(U(u[g],e,a));return this}var U=this.node().__on;if(U)for(var vt,Q=0,ot=U.length;Q<ot;++Q)for(g=0,vt=U[Q];g<k;++g)if((L=u[g]).type===vt.type&&L.name===vt.name)return vt.value},dispatch:function mt(t,e){return this.each(("function"==typeof e?K:z)(t,e))},[Symbol.iterator]:function*yt(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var L,u=t[e],g=0,k=u.length;g<k;++g)(L=u[g])&&(yield L)}};const pe=$t;var Se={value:()=>{}};function _e(){for(var u,t=0,e=arguments.length,a={};t<e;++t){if(!(u=arguments[t]+"")||u in a||/[\s.]/.test(u))throw new Error("illegal type: "+u);a[u]=[]}return new Le(a)}function Le(t){this._=t}function ar(t,e){for(var g,a=0,u=t.length;a<u;++a)if((g=t[a]).name===e)return g.value}function gn(t,e,a){for(var u=0,g=t.length;u<g;++u)if(t[u].name===e){t[u]=Se,t=t.slice(0,u).concat(t.slice(u+1));break}return null!=a&&t.push({name:e,value:a}),t}Le.prototype=_e.prototype={constructor:Le,on:function(t,e){var g,a=this._,u=function lr(t,e){return t.trim().split(/^|\s+/).map(function(a){var u="",g=a.indexOf(".");if(g>=0&&(u=a.slice(g+1),a=a.slice(0,g)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:u}})}(t+"",a),k=-1,L=u.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++k<L;)if(g=(t=u[k]).type)a[g]=gn(a[g],t.name,e);else if(null==e)for(g in a)a[g]=gn(a[g],t.name,null);return this}for(;++k<L;)if((g=(t=u[k]).type)&&(g=ar(a[g],t.name)))return g},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new Le(t)},call:function(t,e){if((g=arguments.length-2)>0)for(var g,k,a=new Array(g),u=0;u<g;++u)a[u]=arguments[u+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=0,g=(k=this._[t]).length;u<g;++u)k[u].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var u=this._[t],g=0,k=u.length;g<k;++g)u[g].value.apply(e,a)}};const or=_e;var Ni,ki,mi=0,Oi=0,Si=0,yn=1e3,Di=0,ci=0,ji=0,Ti="object"==typeof performance&&performance.now?performance:Date,mn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return ci||(mn(sr),ci=Ti.now()+ji)}function sr(){ci=0}function zi(){this._call=this._time=this._next=null}function pn(t,e,a){var u=new zi;return u.restart(t,e,a),u}function wn(){ci=(Di=Ti.now())+ji,mi=Oi=0;try{!function ur(){Xi(),++mi;for(var e,t=Ni;t;)(e=ci-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mi}()}finally{mi=0,function hr(){for(var t,a,e=Ni,u=1/0;e;)e._call?(u>e._time&&(u=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);ki=t,qi(u)}(),ci=0}}function dr(){var t=Ti.now(),e=t-Di;e>yn&&(ji-=e,Di=t)}function qi(t){mi||(Oi&&(Oi=clearTimeout(Oi)),t-ci>24?(t<1/0&&(Oi=setTimeout(wn,t-Ti.now()-ji)),Si&&(Si=clearInterval(Si))):(Si||(Di=Ti.now(),Si=setInterval(dr,yn)),mi=1,mn(wn)))}function xn(t,e,a){var u=new zi;return u.restart(g=>{u.stop(),t(g+e)},e=null==e?0:+e,a),u}zi.prototype=pn.prototype={constructor:zi,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Xi():+a)+(null==e?0:+e),!this._next&&ki!==this&&(ki?ki._next=this:Ni=this,ki=this),this._call=t,this._time=a,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,Ki=3;function Fi(t,e,a,u,g,k){var L=t.__transition;if(L){if(a in L)return}else t.__transition={};!function vr(t,e,a){var g,u=t.__transition;function L(ot){var vt,Jt,Ht,te;if(1!==a.state)return Q();for(vt in u)if((te=u[vt]).name===a.name){if(te.state===Ki)return xn(L);4===te.state?(te.state=6,te.timer.stop(),te.on.call("interrupt",t,t.__data__,te.index,te.group),delete u[vt]):+vt<e&&(te.state=6,te.timer.stop(),te.on.call("cancel",t,t.__data__,te.index,te.group),delete u[vt])}if(xn(function(){a.state===Ki&&(a.state=4,a.timer.restart(U,a.delay,a.time),U(ot))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=Ki,g=new Array(Ht=a.tween.length),vt=0,Jt=-1;vt<Ht;++vt)(te=a.tween[vt].value.call(t,t.__data__,a.index,a.group))&&(g[++Jt]=te);g.length=Jt+1}}function U(ot){for(var vt=ot<a.duration?a.ease.call(null,ot/a.duration):(a.timer.restart(Q),a.state=5,1),Jt=-1,Ht=g.length;++Jt<Ht;)g[Jt].call(t,vt);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),Q())}function Q(){for(var ot in a.state=6,a.timer.stop(),delete u[e],u)return;delete t.__transition}u[e]=a,a.timer=pn(function k(ot){a.state=1,a.timer.restart(L,a.delay,a.time),a.delay<=ot&&L(ot-a.delay)},0,a.time)}(t,a,{name:e,index:u,group:g,on:cr,tween:fr,time:k.time,delay:k.delay,duration:k.duration,ease:k.ease,timer:null,state:bn})}function en(t,e){var a=$e(t,e);if(a.state>bn)throw new Error("too late; already scheduled");return a}function ri(t,e){var a=$e(t,e);if(a.state>Ki)throw new Error("too late; already running");return a}function $e(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function di(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,u,g,k){var L,U,Q;return(L=Math.sqrt(t*t+e*e))&&(t/=L,e/=L),(Q=t*a+e*u)&&(a-=t*Q,u-=e*Q),(U=Math.sqrt(a*a+u*u))&&(a/=U,u/=U,Q/=U),t*u<e*a&&(t=-t,e=-e,Q=-Q,L=-L),{translateX:g,translateY:k,rotate:Math.atan2(e,t)*On,skewX:Math.atan(Q)*On,scaleX:L,scaleY:U}}function kn(t,e,a,u){function g(ot){return ot.length?ot.pop()+" ":""}return function(ot,vt){var Jt=[],Ht=[];return ot=t(ot),vt=t(vt),function k(ot,vt,Jt,Ht,te,ke){if(ot!==Jt||vt!==Ht){var Ie=te.push("translate(",null,e,null,a);ke.push({i:Ie-4,x:di(ot,Jt)},{i:Ie-2,x:di(vt,Ht)})}else(Jt||Ht)&&te.push("translate("+Jt+e+Ht+a)}(ot.translateX,ot.translateY,vt.translateX,vt.translateY,Jt,Ht),function L(ot,vt,Jt,Ht){ot!==vt?(ot-vt>180?vt+=360:vt-ot>180&&(ot+=360),Ht.push({i:Jt.push(g(Jt)+"rotate(",null,u)-2,x:di(ot,vt)})):vt&&Jt.push(g(Jt)+"rotate("+vt+u)}(ot.rotate,vt.rotate,Jt,Ht),function U(ot,vt,Jt,Ht){ot!==vt?Ht.push({i:Jt.push(g(Jt)+"skewX(",null,u)-2,x:di(ot,vt)}):vt&&Jt.push(g(Jt)+"skewX("+vt+u)}(ot.skewX,vt.skewX,Jt,Ht),function Q(ot,vt,Jt,Ht,te,ke){if(ot!==Jt||vt!==Ht){var Ie=te.push(g(te)+"scale(",null,",",null,")");ke.push({i:Ie-4,x:di(ot,Jt)},{i:Ie-2,x:di(vt,Ht)})}else(1!==Jt||1!==Ht)&&te.push(g(te)+"scale("+Jt+","+Ht+")")}(ot.scaleX,ot.scaleY,vt.scaleX,vt.scaleY,Jt,Ht),ot=vt=null,function(te){for(var Ut,ke=-1,Ie=Ht.length;++ke<Ie;)Jt[(Ut=Ht[ke]).i]=Ut.x(te);return Jt.join("")}}}var wr=kn(function mr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xr=kn(function pr(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function br(t,e){var a,u;return function(){var g=ri(this,t),k=g.tween;if(k!==a)for(var L=0,U=(u=a=k).length;L<U;++L)if(u[L].name===e){(u=u.slice()).splice(L,1);break}g.tween=u}}function _r(t,e,a){var u,g;if("function"!=typeof a)throw new Error;return function(){var k=ri(this,t),L=k.tween;if(L!==u){g=(u=L).slice();for(var U={name:e,value:a},Q=0,ot=g.length;Q<ot;++Q)if(g[Q].name===e){g[Q]=U;break}Q===ot&&g.push(U)}k.tween=g}}function rn(t,e,a){var u=t._id;return t.each(function(){var g=ri(this,u);(g.value||(g.value={}))[e]=a.apply(this,arguments)}),function(g){return $e(g,u).value[e]}}function ln(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function Tn(t,e){var a=Object.create(t.prototype);for(var u in e)a[u]=e[u];return a}function Ci(){}var Wi=1/.7,pi="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),kr=new RegExp(`^rgb\\(${li},${li},${li}\\)$`),Tr=new RegExp(`^rgba\\(${pi},${pi},${pi},${Ai}\\)$`),Cr=new RegExp(`^rgba\\(${li},${li},${li},${Ai}\\)$`),Lr=new RegExp(`^hsl\\(${Ai},${li},${li}\\)$`),Ar=new RegExp(`^hsla\\(${Ai},${li},${li},${Ai}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Pi(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?Pn(e):3===a?new Qe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Qe(e[1],e[2],e[3],1):(e=kr.exec(t))?new Qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Lr.exec(t))?Mn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Mn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?Pn(Cn[t]):"transparent"===t?new Qe(NaN,NaN,NaN,0):null}function Pn(t){return new Qe(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,a,u){return u<=0&&(t=e=a=NaN),new Qe(t,e,a,u)}function Qi(t,e,a,u){return 1===arguments.length?function Rr(t){return t instanceof Ci||(t=Pi(t)),t?new Qe((t=t.rgb()).r,t.g,t.b,t.opacity):new Qe}(t):new Qe(t,e,a,null==u?1:u)}function Qe(t,e,a,u){this.r=+t,this.g=+e,this.b=+a,this.opacity=+u}function In(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}`}function Rn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${fi(this.r)}, ${fi(this.g)}, ${fi(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vi(t){return((t=fi(t))<16?"0":"")+t.toString(16)}function Mn(t,e,a,u){return u<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new ti(t,e,a,u)}function Nn(t){if(t instanceof ti)return new ti(t.h,t.s,t.l,t.opacity);if(t instanceof Ci||(t=Pi(t)),!t)return new ti;if(t instanceof ti)return t;var e=(t=t.rgb()).r/255,a=t.g/255,u=t.b/255,g=Math.min(e,a,u),k=Math.max(e,a,u),L=NaN,U=k-g,Q=(k+g)/2;return U?(L=e===k?(a-u)/U+6*(a<u):a===k?(u-e)/U+2:(e-a)/U+4,U/=Q<.5?k+g:2-k-g,L*=60):U=Q>0&&Q<1?0:L,new ti(L,U,Q,t.opacity)}function ti(t,e,a,u){this.h=+t,this.s=+e,this.l=+a,this.opacity=+u}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function jn(t,e,a,u,g){var k=t*t,L=k*t;return((1-3*t+3*k-L)*e+(4-6*k+3*L)*a+(1+3*t+3*k-3*L)*u+L*g)/6}ln(Ci,Pi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Pr(){return this.rgb().formatHex8()},formatHsl:function Ir(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),ln(Qe,Qi,Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qe(fi(this.r),fi(this.g),fi(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:In,formatHex:In,formatHex8:function Mr(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}${vi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Rn,toString:Rn})),ln(ti,function Nr(t,e,a,u){return 1===arguments.length?Nn(t):new ti(t,e,a,null==u?1:u)},Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new ti(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ti(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,u=a+(a<.5?a:1-a)*e,g=2*a-u;return new Qe(an(t>=240?t-240:t+120,g,u),an(t,g,u),an(t<120?t+240:t-120,g,u),this.opacity)},clamp(){return new ti(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const zn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):zn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kr(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function zr(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(u){return Math.pow(t+u*e,a)}}(e,a,t):zn(isNaN(e)?a:e)}}(e);function u(g,k){var L=a((g=Qi(g)).r,(k=Qi(k)).r),U=a(g.g,k.g),Q=a(g.b,k.b),ot=Bn(g.opacity,k.opacity);return function(vt){return g.r=L(vt),g.g=U(vt),g.b=Q(vt),g.opacity=ot(vt),g+""}}return u.gamma=t,u}(1);function Un(t){return function(e){var L,U,a=e.length,u=new Array(a),g=new Array(a),k=new Array(a);for(L=0;L<a;++L)U=Qi(e[L]),u[L]=U.r||0,g[L]=U.g||0,k[L]=U.b||0;return u=t(u),g=t(g),k=t(k),U.opacity=1,function(Q){return U.r=u(Q),U.g=g(Q),U.b=k(Q),U+""}}}Un(function Dr(t){var e=t.length-1;return function(a){var u=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),g=t[u],k=t[u+1];return jn((a-u/e)*e,u>0?t[u-1]:2*g-k,g,k,u<e-1?t[u+2]:2*k-g)}}),Un(function jr(t){var e=t.length;return function(a){var u=Math.floor(((a%=1)<0?++a:a)*e);return jn((a-u/e)*e,t[(u+e-1)%e],t[u%e],t[(u+1)%e],t[(u+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ur(t,e){var u,g,k,a=on.lastIndex=sn.lastIndex=0,L=-1,U=[],Q=[];for(t+="",e+="";(u=on.exec(t))&&(g=sn.exec(e));)(k=g.index)>a&&(k=e.slice(a,k),U[L]?U[L]+=k:U[++L]=k),(u=u[0])===(g=g[0])?U[L]?U[L]+=g:U[++L]=g:(U[++L]=null,Q.push({i:L,x:di(u,g)})),a=sn.lastIndex;return a<e.length&&(k=e.slice(a),U[L]?U[L]+=k:U[++L]=k),U.length<2?Q[0]?function Fr(t){return function(e){return t(e)+""}}(Q[0].x):function Br(t){return function(){return t}}(e):(e=Q.length,function(ot){for(var Jt,vt=0;vt<e;++vt)U[(Jt=Q[vt]).i]=Jt.x(ot);return U.join("")})}function Wn(t,e){var a;return("number"==typeof e?di:e instanceof Pi?Fn:(a=Pi(e))?(e=a,Fn):Ur)(t,e)}function Wr(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,a){var u,k,g=a+"";return function(){var L=this.getAttribute(t);return L===g?null:L===u?k:k=e(u=L,a)}}function Jr(t,e,a){var u,k,g=a+"";return function(){var L=this.getAttributeNS(t.space,t.local);return L===g?null:L===u?k:k=e(u=L,a)}}function Hr(t,e,a){var u,g,k;return function(){var L,Q,U=a(this);return null==U?void this.removeAttribute(t):(L=this.getAttribute(t))===(Q=U+"")?null:L===u&&Q===g?k:(g=Q,k=e(u=L,U))}}function Vr(t,e,a){var u,g,k;return function(){var L,Q,U=a(this);return null==U?void this.removeAttributeNS(t.space,t.local):(L=this.getAttributeNS(t.space,t.local))===(Q=U+"")?null:L===u&&Q===g?k:(g=Q,k=e(u=L,U))}}function qr(t,e){var a,u;function g(){var k=e.apply(this,arguments);return k!==u&&(a=(u=k)&&function Xr(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,k)),a}return g._value=e,g}function $r(t,e){var a,u;function g(){var k=e.apply(this,arguments);return k!==u&&(a=(u=k)&&function Yr(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,k)),a}return g._value=e,g}function el(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){en(this,t).delay=e}}function rl(t,e){return function(){ri(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){ri(this,t).duration=e}}var xl=pe.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var zl=0;function oi(t,e,a,u){this._groups=t,this._parents=e,this._name=a,this._id=u}function Qn(){return++zl}var si=pe.prototype;oi.prototype=function Kl(t){return pe().transition(t)}.prototype={constructor:oi,select:function pl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=E(t));for(var u=this._groups,g=u.length,k=new Array(g),L=0;L<g;++L)for(var vt,Jt,U=u[L],Q=U.length,ot=k[L]=new Array(Q),Ht=0;Ht<Q;++Ht)(vt=U[Ht])&&(Jt=t.call(vt,vt.__data__,Ht,U))&&("__data__"in vt&&(Jt.__data__=vt.__data__),ot[Ht]=Jt,Fi(ot[Ht],e,a,Ht,ot,$e(vt,a)));return new oi(k,this._parents,e,a)},selectAll:function wl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=C(t));for(var u=this._groups,g=u.length,k=[],L=[],U=0;U<g;++U)for(var vt,Q=u[U],ot=Q.length,Jt=0;Jt<ot;++Jt)if(vt=Q[Jt]){for(var te,Ht=t.call(vt,vt.__data__,Jt,Q),ke=$e(vt,a),Ie=0,Ut=Ht.length;Ie<Ut;++Ie)(te=Ht[Ie])&&Fi(te,e,a,Ie,Ht,ke);k.push(Ht),L.push(vt)}return new oi(k,L,e,a)},selectChild:si.selectChild,selectChildren:si.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=D(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Q,k=e[g],L=k.length,U=u[g]=[],ot=0;ot<L;++ot)(Q=k[ot])&&t.call(Q,Q.__data__,ot,k)&&U.push(Q);return new oi(u,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,u=e.length,k=Math.min(u,a.length),L=new Array(u),U=0;U<k;++U)for(var Ht,Q=e[U],ot=a[U],vt=Q.length,Jt=L[U]=new Array(vt),te=0;te<vt;++te)(Ht=Q[te]||ot[te])&&(Jt[te]=Ht);for(;U<u;++U)L[U]=e[U];return new oi(L,this._parents,this._name,this._id)},selection:function bl(){return new xl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,a=Qn(),u=this._groups,g=u.length,k=0;k<g;++k)for(var Q,L=u[k],U=L.length,ot=0;ot<U;++ot)if(Q=L[ot]){var vt=$e(Q,e);Fi(Q,t,a,ot,L,{time:vt.time+vt.delay+vt.duration,delay:0,duration:vt.duration,ease:vt.ease})}return new oi(u,this._parents,t,a)},call:si.call,nodes:si.nodes,node:si.node,size:si.size,empty:si.empty,each:si.each,on:function gl(t,e){var a=this._id;return arguments.length<2?$e(this.node(),a).on.on(t):this.each(function vl(t,e,a){var u,g,k=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?en:ri;return function(){var L=k(this,t),U=L.on;U!==u&&(g=(u=U).copy()).on(e,a),L.on=g}}(a,t,e))},attr:function Zr(t,e){var a=Lt(t),u="transform"===a?xr:Wn;return this.attrTween(t,"function"==typeof e?(a.local?Vr:Hr)(a,u,rn(this,"attr."+t,e)):null==e?(a.local?Gr:Wr)(a):(a.local?Jr:Qr)(a,u,e))},attrTween:function tl(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var u=Lt(t);return this.tween(a,(u.local?qr:$r)(u,e))},style:function kl(t,e,a){var u="transform"==(t+="")?wr:Wn;return null==e?this.styleTween(t,function _l(t,e){var a,u,g;return function(){var k=rt(this,t),L=(this.style.removeProperty(t),rt(this,t));return k===L?null:k===a&&L===u?g:g=e(a=k,u=L)}}(t,u)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,a){var u,g,k;return function(){var L=rt(this,t),U=a(this),Q=U+"";return null==U&&(this.style.removeProperty(t),Q=U=rt(this,t)),L===Q?null:L===u&&Q===g?k:(g=Q,k=e(u=L,U))}}(t,u,rn(this,"style."+t,e))).each(function Sl(t,e){var a,u,g,U,k="style."+e,L="end."+k;return function(){var Q=ri(this,t),ot=Q.on,vt=null==Q.value[k]?U||(U=Gn(e)):void 0;(ot!==a||g!==vt)&&(u=(a=ot).copy()).on(L,g=vt),Q.on=u}}(this._id,t)):this.styleTween(t,function El(t,e,a){var u,k,g=a+"";return function(){var L=rt(this,t);return L===g?null:L===u?k:k=e(u=L,a)}}(t,u,e),a).on("end.style."+t,null)},styleTween:function Ll(t,e,a){var u="style."+(t+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==e)return this.tween(u,null);if("function"!=typeof e)throw new Error;return this.tween(u,function Cl(t,e,a){var u,g;function k(){var L=e.apply(this,arguments);return L!==g&&(u=(g=L)&&function Tl(t,e,a){return function(u){this.style.setProperty(t,e.call(this,u),a)}}(t,L,a)),u}return k._value=e,k}(t,e,null==a?"":a))},text:function Il(t){return this.tween("text","function"==typeof t?function Pl(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Ml(t){var e,a;function u(){var g=t.apply(this,arguments);return g!==a&&(e=(a=g)&&function Rl(t){return function(e){this.textContent=t.call(this,e)}}(g)),e}return u._value=t,u}(t))},remove:function ml(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var a=this._id;if(t+="",arguments.length<2){for(var L,u=$e(this.node(),a).tween,g=0,k=u.length;g<k;++g)if((L=u[g]).name===t)return L.value;return null}return this.each((null==e?br:_r)(a,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):$e(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):$e(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){ri(this,t).ease=e}}(e,t)):$e(this.node(),e).ease},easeVarying:function dl(t){if("function"!=typeof t)throw new Error;return this.each(function ul(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;ri(this,t).ease=a}}(this._id,t))},end:function jl(){var t,e,a=this,u=a._id,g=a.size();return new Promise(function(k,L){var U={value:L},Q={value:function(){0==--g&&k()}};a.each(function(){var ot=ri(this,u),vt=ot.on;vt!==t&&((e=(t=vt).copy())._.cancel.push(U),e._.interrupt.push(U),e._.end.push(Q)),ot.on=e}),0===g&&k()})},[Symbol.iterator]:si[Symbol.iterator]};var Fl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}pe.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var u,g,L,a=t.__transition,k=!0;if(a){for(L in e=null==e?null:e+"",a)(u=a[L]).name===e?(g=u.state>2&&u.state<5,u.state=6,u.timer.stop(),u.on.call(g?"interrupt":"cancel",t,t.__data__,u.index,u.group),delete a[L]):k=!1;k&&delete t.__transition}}(this,t)})},pe.prototype.transition=function Wl(t){var e,a;t instanceof oi?(e=t._id,t=t._name):(e=Qn(),(a=Fl).time=Xi(),t=null==t?null:t+"");for(var u=this._groups,g=u.length,k=0;k<g;++k)for(var Q,L=u[k],U=L.length,ot=0;ot<U;++ot)(Q=L[ot])&&Fi(Q,t,e,ot,L,a||Ul(Q,e));return new oi(u,this._parents,t,e)};Math;function Ii(t){return{type:t}}function bi(t){return function(){return t}}function Xn(t){this._context=t}function ql(t){return new Xn(t)}["w","e"].map(Ii),["n","s"].map(Ii),["n","w","e","s","nw","ne","sw","se"].map(Ii),Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const fn=Math.PI,vn=2*fn,gi=1e-6,$l=vn-gi;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Yi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(u){this._+=u[0];for(let g=1,k=u.length;g<k;++g)this._+=Math.round(arguments[g]*a)/a+u[g]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,u,g){this._append`Q${+e},${+a},${this._x1=+u},${this._y1=+g}`}bezierCurveTo(e,a,u,g,k,L){this._append`C${+e},${+a},${+u},${+g},${this._x1=+k},${this._y1=+L}`}arcTo(e,a,u,g,k){if(e=+e,a=+a,u=+u,g=+g,(k=+k)<0)throw new Error(`negative radius: ${k}`);let L=this._x1,U=this._y1,Q=u-e,ot=g-a,vt=L-e,Jt=U-a,Ht=vt*vt+Jt*Jt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Ht>gi)if(Math.abs(Jt*Q-ot*vt)>gi&&k){let te=u-L,ke=g-U,Ie=Q*Q+ot*ot,Ut=te*te+ke*ke,zt=Math.sqrt(Ie),ue=Math.sqrt(Ht),ee=k*Math.tan((fn-Math.acos((Ie+Ht-Ut)/(2*zt*ue)))/2),fe=ee/ue,we=ee/zt;Math.abs(fe-1)>gi&&this._append`L${e+fe*vt},${a+fe*Jt}`,this._append`A${k},${k},0,0,${+(Jt*te>vt*ke)},${this._x1=e+we*Q},${this._y1=a+we*ot}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,u,g,k,L){if(e=+e,a=+a,L=!!L,(u=+u)<0)throw new Error(`negative radius: ${u}`);let U=u*Math.cos(g),Q=u*Math.sin(g),ot=e+U,vt=a+Q,Jt=1^L,Ht=L?g-k:k-g;null===this._x1?this._append`M${ot},${vt}`:(Math.abs(this._x1-ot)>gi||Math.abs(this._y1-vt)>gi)&&this._append`L${ot},${vt}`,u&&(Ht<0&&(Ht=Ht%vn+vn),Ht>$l?this._append`A${u},${u},0,1,${Jt},${e-U},${a-Q}A${u},${u},0,1,${Jt},${this._x1=ot},${this._y1=vt}`:Ht>gi&&this._append`A${u},${u},0,${+(Ht>=fn)},${Jt},${this._x1=e+u*Math.cos(k)},${this._y1=a+u*Math.sin(k)}`)}rect(e,a,u,g){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${u=+u}v${+g}h${-u}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var a=bi(!0),u=null,g=ql,k=null,L=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);e=u}return t},()=>new Yi(e)}(U);function U(Q){var ot,Jt,te,vt=(Q=function Xl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(Q)).length,Ht=!1;for(null==u&&(k=g(te=L())),ot=0;ot<=vt;++ot)!(ot<vt&&a(Jt=Q[ot],ot,Q))===Ht&&((Ht=!Ht)?k.lineStart():k.lineEnd()),Ht&&k.point(+t(Jt,ot,Q),+e(Jt,ot,Q));if(te)return k=null,te+""||null}return t="function"==typeof t?t:void 0===t?na:bi(t),e="function"==typeof e?e:void 0===e?ra:bi(e),U.x=function(Q){return arguments.length?(t="function"==typeof Q?Q:bi(+Q),U):t},U.y=function(Q){return arguments.length?(e="function"==typeof Q?Q:bi(+Q),U):e},U.defined=function(Q){return arguments.length?(a="function"==typeof Q?Q:bi(!!Q),U):a},U.curve=function(Q){return arguments.length?(g=Q,null!=u&&(k=g(u)),U):g},U.context=function(Q){return arguments.length?(null==Q?u=k=null:k=g(u=Q),U):u},U}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function _i(t,e,a){this.k=t,this.x=e,this.y=a}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_i.prototype={constructor:_i,scale:function(t){return 1===t?this:new _i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new _i(1,0,0)}}]);