"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3130],{311:(Q,k,c)=>{c.r(k),c.d(k,{UserPageModule:()=>We});var g=c(6814),I=c(6223),p=c(1773),U=c(8935),T=c(5861),A=c(4459),M=c(1062),q=c(203),x=c(3377),h=c(6143),y=c(196),Z=c(5511),v=c(2695),e=c(2948),Y=c(6593),C=c(2088),D=c(9565),J=c(4876),w=c(3589),E=c(5328),S=c(522),R=c(8186);let L=(()=>{var n;class i{constructor(t,a,r){this.modalController=t,this.toastController=a,this.loadingController=r,this.APP_ROUTE=v.z,this.loadingController.create({message:""}).then(s=>this.loading=s)}ngOnInit(){}changeAvatar(t){var a=this;return(0,T.Z)(function*(){(0,S.V)({modalController:a.modalController,toastController:a.toastController},function(){var r=(0,T.Z)(function*(s){if(s.length){let l=yield a.modalController.create({component:J.J,componentProps:{file:s[0]},backdropDismiss:!0,keyboardClose:!0});l.onDidDismiss().then(m=>{"submit"==m.role&&m.data&&(0,w.z)({loading:d=>{var _,u;d?null===(_=a.loading)||void 0===_||_.present():null===(u=a.loading)||void 0===u||u.dismiss()},params:{file:m.data,subFolder:"avatar",fileType:"image"},callback:d=>{var _;0==(null==d?void 0:d.ReturnCode)&&(0,E.$y)({loading:u=>{var P,b;u?null===(P=a.loading)||void 0===P||P.present():null===(b=a.loading)||void 0===b||b.dismiss()},params:{userid:null===(_=a.user)||void 0===_?void 0:_.userid,avatar:`${d.path}/${d.file.name}`},callback:u=>{0==(null==u?void 0:u.returncode)?a.user&&(a.user.profilephoto=`${d.path}/${d.file.name}`,(0,x.LE)({params:a.user,callback:P=>{a.user=P}})):(0,R.B)(a.toastController,{},u).then(P=>P.present())}})}})}),l.present()}});return function(s){return r.apply(this,arguments)}}())})()}}return(n=i).\u0275fac=function(t){return new(t||n)(e.Y36(p.IN),e.Y36(p.yF),e.Y36(p.HT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-info"]],inputs:{user:"user"},decls:9,vars:3,consts:[[1,"container","py-4"],[1,"cursor-pointer",3,"click"],["onerror","errorAvatar(this)",3,"src"],[1,"user-name","text-ellipsis","my-3"],[1,"text-center","mt-0","mb-1"],[1,"text-center","text-muted"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"ion-thumbnail",1),e.NdJ("click",function(s){return a.changeAvatar(s)}),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"h5",4)(5,"b"),e._uU(6),e.qZA()(),e.TgZ(7,"div",5),e._uU(8),e.qZA()()()),2&t){let r;e.xp6(2),e.Q6J("src",null!==(r=null==a.user?null:a.user.url_profilephoto)&&void 0!==r?r:"../../../assets/image/user-avatar-default.png",e.LSH),e.xp6(4),e.Oqu(null==a.user?null:a.user.fullname),e.xp6(2),e.Oqu(null==a.user?null:a.user.emailaddr)}},dependencies:[p.Bs],styles:["ion-thumbnail[_ngcontent-%COMP%]{--size: 140px;--border-radius: 50%;margin:auto}"]}),i})();var $=c(6676),O=c.n($),F=c(2654);function B(n,i){1&n&&e.GkF(0)}function H(n,i){1&n&&e.GkF(0)}function G(n,i){1&n&&(e.TgZ(0,"div",6),e._UZ(1,"ion-spinner",7),e.qZA())}function W(n,i){1&n&&(e.TgZ(0,"small",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DataNotFound")))}function z(n,i){if(1&n&&e.YNc(0,W,3,3,"small",8),2&n){const o=e.oxw();e.Q6J("ngIf",!1===o.response.loading)}}function j(n,i){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.TgZ(3,"b"),e._uU(4),e.qZA()()),2&n){const o=e.oxw(2);e.xp6(1),e.hij("",e.lcZ(2,2,"AppliedTo")," "),e.xp6(3),e.Oqu(o.renderDate(null==o.productpackageapplied?null:o.productpackageapplied.expirateddate,"DD/MM/YYYY"))}}function X(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-badge",16),e._uU(2),e.qZA(),e.BQk()),2&n){const o=e.oxw().$implicit;e.xp6(2),e.Oqu(o.datavalue)}}function K(n,i){1&n&&(e.ynx(0),e._UZ(1,"ion-icon",17),e.BQk())}function V(n,i){1&n&&(e.ynx(0),e._UZ(1,"ion-icon",18),e.BQk())}function ee(n,i){if(1&n&&(e.ynx(0)(1,14),e.YNc(2,K,2,0,"ng-container",15),e.YNc(3,V,2,0,"ng-container",15),e.BQk()()),2&n){const o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngSwitch",o.datavalue),e.xp6(1),e.Q6J("ngSwitchCase","1"),e.xp6(1),e.Q6J("ngSwitchCase","0")}}function ne(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-badge",16),e._uU(2),e.qZA(),e.BQk()),2&n){const o=e.oxw().$implicit,t=e.oxw(2);e.xp6(2),e.Oqu(t.renderTemplate(o.datavalue,o.template))}}function te(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-badge",16),e._uU(2),e.qZA(),e.BQk()),2&n){const o=e.oxw().$implicit,t=e.oxw(2);e.xp6(2),e.Oqu(t.renderDate(o.datavalue))}}function ae(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"ion-item")(2,"ion-label"),e._uU(3),e.qZA(),e.ynx(4,14),e.YNc(5,X,3,1,"ng-container",15),e.YNc(6,ee,4,3,"ng-container",15),e.YNc(7,ne,3,1,"ng-container",15),e.YNc(8,te,3,1,"ng-container",15),e.BQk(),e.qZA(),e.BQk()),2&n){const o=i.$implicit;e.xp6(3),e.Oqu(o.productpackagecontent_title),e.xp6(1),e.Q6J("ngSwitch",o.v_datatype),e.xp6(1),e.Q6J("ngSwitchCase",800),e.xp6(1),e.Q6J("ngSwitchCase",801),e.xp6(1),e.Q6J("ngSwitchCase",802),e.xp6(1),e.Q6J("ngSwitchCase",803)}}function oe(n,i){if(1&n&&(e.TgZ(0,"h3",10),e._uU(1),e.qZA(),e.YNc(2,j,5,4,"p",11),e.TgZ(3,"ion-list",12),e.YNc(4,ae,9,6,"ng-container",13),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.AsE("",null==o.productpackageapplied?null:o.productpackageapplied.productpackage_key," - ",null==o.productpackageapplied?null:o.productpackageapplied.productpackage_title,""),e.xp6(1),e.Q6J("ngIf",null==o.productpackageapplied?null:o.productpackageapplied.expirateddate),e.xp6(2),e.Q6J("ngForOf",o.filterData(o.response.productpackagecontents))}}let ie=(()=>{var n;class i{constructor(){this.response={}}ngOnInit(){this.loadData()}onIonRefresher(t){this.loadData(()=>{t.target.complete()})}loadData(t){var a,r;(0,F.A)({loading:s=>{this.response.loading=s},params:{userid:null===(a=this.user)||void 0===a?void 0:a.userid,productpackage_id:null===(r=this.productpackageapplied)||void 0===r?void 0:r.productpackage_id},callback:s=>{var l;this.response.productpackagecontents=null!==(l=null==s?void 0:s.productpackagecontents)&&void 0!==l?l:[],t&&t()}})}filterData(t){var a;return null!==(a=null==t?void 0:t.filter(r=>r.iseffect))&&void 0!==a?a:[]}renderTemplate(t,a){return a?a.replace(/\{0\}/gm,null!=t?t:""):t}renderDate(t,a){return O()(t).format(null!=a?a:"DD/MM/YYYY HH:mm")}}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-membership"]],inputs:{user:"user",productpackageapplied:"productpackageapplied"},decls:13,vars:8,consts:[["slot","fixed",3,"ionRefresh"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf","ngIfThen"],["templateLoading",""],["templateNoData",""],["templateYesData",""],[1,"text-center"],["name","dots"],["class","text-muted",4,"ngIf"],[1,"text-muted"],[1,"text-primary"],[4,"ngIf"],["mode","ios"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["slot","end"],["slot","end","color","primary","name","checkmark-outline"],["slot","end","color","danger","name","close-outline"]],template:function(t,a){if(1&t&&(e.TgZ(0,"ion-refresher",0),e.NdJ("ionRefresh",function(s){return a.onIonRefresher(s)}),e._UZ(1,"ion-refresher-content"),e.qZA(),e.TgZ(2,"h5"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,B,1,0,"ng-container",1),e.YNc(6,H,1,0,"ng-container",2),e.YNc(7,G,2,0,"ng-template",null,3,e.W1O),e.YNc(9,z,1,1,"ng-template",null,4,e.W1O),e.YNc(11,oe,5,4,"ng-template",null,5,e.W1O)),2&t){const r=e.MAs(8),s=e.MAs(10),l=e.MAs(12);e.xp6(3),e.Oqu(e.lcZ(4,6,"ProductPackageApplied")),e.xp6(2),e.Q6J("ngIf",a.productpackageapplied)("ngIfThen",l)("ngIfElse",s),e.xp6(1),e.Q6J("ngIf",!1!==a.response.loading)("ngIfThen",r)}},dependencies:[g.sg,g.O5,g.RF,g.n9,p.yp,p.gu,p.Ie,p.Q$,p.q_,p.nJ,p.Wo,p.PQ,C.X$]}),i})();var N=c(1862);function se(n,i){1&n&&e.GkF(0)}function le(n,i){1&n&&e.GkF(0)}function ce(n,i){if(1&n){const o=e.EpF();e.TgZ(0,"ion-infinite-scroll",9),e.NdJ("ionInfinite",function(a){e.CHM(o);const r=e.oxw();return e.KtG(r.onIonInfiniteScroll(a))}),e._UZ(1,"ion-infinite-scroll-content"),e.qZA()}}function pe(n,i){1&n&&(e.TgZ(0,"div",10),e._UZ(1,"ion-spinner",11),e.qZA())}function ue(n,i){1&n&&(e.TgZ(0,"small",13),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DataNotFound")))}function ge(n,i){if(1&n&&e.YNc(0,ue,3,3,"small",12),2&n){const o=e.oxw();e.Q6J("ngIf",!1===o.response.loading)}}function me(n,i){1&n&&(e.ynx(0),e.TgZ(1,"span",13),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"NotYetApplied")))}function de(n,i){1&n&&(e.ynx(0),e.TgZ(1,"span",17),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Applying")))}function _e(n,i){1&n&&(e.ynx(0),e.TgZ(1,"span",18),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Expired")))}function fe(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e.ynx(9,15),e.YNc(10,me,4,3,"ng-container",16),e.YNc(11,de,4,3,"ng-container",16),e.YNc(12,_e,4,3,"ng-container",16),e.BQk(),e.qZA()(),e.BQk()),2&n){const o=i.$implicit,t=e.oxw(2);e.xp6(3),e.AsE("",o.productpackage_key," - ",o.productpackage_title,""),e.xp6(2),e.Oqu(t.renderDate(o.applieddate,"DD/M/YYYY HH:mm")),e.xp6(2),e.Oqu(t.renderDate(o.expirateddate,"DD/M/YYYY HH:mm")),e.xp6(2),e.Q6J("ngSwitch",o.statusapply),e.xp6(1),e.Q6J("ngSwitchCase",-1),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",1)}}const he=function(){return[]};function Te(n,i){if(1&n&&e.YNc(0,fe,13,8,"ng-container",14),2&n){const o=e.oxw();let t;e.Q6J("ngForOf",null!==(t=o.response.productpackagepaids)&&void 0!==t?t:e.DdM(1,he))}}let xe=(()=>{var n;class i{constructor(){this.APP_ROUTE=v.z,this.paging={page:1,limit:20,active:!0},this.response={}}ngOnInit(){this.refreshData()}onIonRefresher(t){this.refreshData(()=>{t.target.complete()})}onIonInfiniteScroll(t){this.loadMore(()=>{t.target.complete()})}refreshData(t){this.paging.page=1,this.paging.active=!0,this.loadData_Paging(t,!0)}loadMore(t){this.paging.page+=1,this.loadData_Paging(t)}loadData_Paging(t,a){var r,s;(n=>{var i,o,t,a,r,s,l;n.params=n.params||{},n.params.page=n.params.page||1,n.params.limit=n.params.limit||1,(0,A.cd)({url:"api/ProductPackagePaid/Search",params:{getby:null!==(i=n.params.userid)&&void 0!==i?i:null,userid:null!==(o=n.params.userid)&&void 0!==o?o:null,productpackage_id:null!==(t=n.params.productpackage_id)&&void 0!==t?t:null,productpackage_key:null!==(a=n.params.productpackage_key)&&void 0!==a?a:null,name:null!==(r=n.params.name)&&void 0!==r?r:null,sortfield:null!==(s=n.params.sortfield)&&void 0!==s?s:null,sorttype:null!==(l=n.params.sorttype)&&void 0!==l?l:null,posstart:(n.params.page-1)*n.params.limit,numofrow:n.params.limit},success:m=>{var f;"function"==typeof n.callback&&n.callback(null!==(f=m.data)&&void 0!==f?f:null)},error:m=>{"function"==typeof n.callback&&n.callback(),console.error(m)},loading:n.loading})})({loading:l=>{this.response.loading=l},params:{userid:null===(r=this.user)||void 0===r?void 0:r.userid,name:null===(s=this.user)||void 0===s?void 0:s.emailaddr,page:this.paging.page,limit:this.paging.limit},callback:l=>{var m,f,d,_,u;this.response.productpackagepaids=a?null!==(m=null==l?void 0:l.productpackagepaids)&&void 0!==m?m:[]:(null!==(f=this.response.productpackagepaids)&&void 0!==f?f:[]).concat(null!==(d=null==l?void 0:l.productpackagepaids)&&void 0!==d?d:[]),(!(null!=l&&null!==(_=l.productpackagepaids)&&void 0!==_&&_.length)||(null==l||null===(u=l.productpackagepaids)||void 0===u?void 0:u.length)<this.paging.limit)&&(this.paging.active=!1),t&&t()}})}renderMoney(t){return(0,N.lb)(t,".")}renderDate(t,a){return O()(t).format(null!=a?a:"DD/MM/YYYY HH:mm")}}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-product-package-paid"]],inputs:{user:"user"},decls:35,vars:21,consts:[["slot","fixed",3,"ionRefresh"],[1,"table","table-hover"],["width","25%"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf","ngIfThen"],[3,"ionInfinite",4,"ngIf"],["templateLoading",""],["templateNoData",""],["templateYesData",""],[3,"ionInfinite"],[1,"text-center"],["name","dots","slot","center"],["class","text-muted",4,"ngIf"],[1,"text-muted"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"text-success"],[1,"text-danger"]],template:function(t,a){if(1&t&&(e.TgZ(0,"ion-refresher",0),e.NdJ("ionRefresh",function(s){return a.onIonRefresher(s)}),e._UZ(1,"ion-refresher-content"),e.qZA(),e.TgZ(2,"h5"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"table",1)(6,"colgroup"),e._UZ(7,"col")(8,"col",2)(9,"col",2)(10,"col",2),e.qZA(),e.TgZ(11,"thead")(12,"tr")(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"tbody"),e.YNc(26,se,1,0,"ng-container",3),e.qZA()(),e.YNc(27,le,1,0,"ng-container",4),e.YNc(28,ce,2,0,"ion-infinite-scroll",5),e.YNc(29,pe,2,0,"ng-template",null,6,e.W1O),e.YNc(31,ge,1,1,"ng-template",null,7,e.W1O),e.YNc(33,Te,1,2,"ng-template",null,8,e.W1O)),2&t){const r=e.MAs(30),s=e.MAs(32),l=e.MAs(34);e.xp6(3),e.Oqu(e.lcZ(4,11,"PurchaseHistory")),e.xp6(11),e.Oqu(e.lcZ(15,13,"Package")),e.xp6(3),e.Oqu(e.lcZ(18,15,"AppliedFrom")),e.xp6(3),e.Oqu(e.lcZ(21,17,"ExpiredTime")),e.xp6(3),e.Oqu(e.lcZ(24,19,"Status")),e.xp6(3),e.Q6J("ngIf",null==a.response.productpackagepaids?null:a.response.productpackagepaids.length)("ngIfThen",l)("ngIfElse",s),e.xp6(1),e.Q6J("ngIf",!1!==a.response.loading)("ngIfThen",r),e.xp6(1),e.Q6J("ngIf",a.paging.active)}},dependencies:[g.sg,g.O5,g.RF,g.n9,p.ju,p.MB,p.nJ,p.Wo,p.PQ,C.X$],styles:[".table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:0}"]}),i})();var Ze=c(5844);function Pe(n,i){1&n&&e.GkF(0)}function Ue(n,i){1&n&&e.GkF(0)}function ve(n,i){if(1&n){const o=e.EpF();e.TgZ(0,"ion-infinite-scroll",9),e.NdJ("ionInfinite",function(a){e.CHM(o);const r=e.oxw();return e.KtG(r.onIonInfiniteScroll(a))}),e._UZ(1,"ion-infinite-scroll-content"),e.qZA()}}function Ae(n,i){1&n&&(e.TgZ(0,"div",10),e._UZ(1,"ion-spinner",11),e.qZA())}function ye(n,i){1&n&&(e.TgZ(0,"small",13),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"DataNotFound")))}function Ce(n,i){if(1&n&&e.YNc(0,ye,3,3,"small",12),2&n){const o=e.oxw();e.Q6J("ngIf",!1===o.response.loading)}}function ke(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"a",19),e._uU(2),e.qZA(),e.BQk()),2&n){const o=e.oxw().$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("href",t.APP_ROUTE.HOME_STATUS_PAYMENT+"?poi="+o.pay_orderid,e.LSH),e.xp6(1),e.Oqu(o.order_code)}}function Ie(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"span",20),e._uU(2),e.qZA(),e.BQk()),2&n){const o=e.oxw().$implicit;e.xp6(2),e.Oqu(o.v_feesstatus_name)}}function Oe(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"span",21),e._uU(2),e.qZA(),e.BQk()),2&n){const o=e.oxw().$implicit;e.xp6(2),e.Oqu(o.v_feesstatus_name)}}function be(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"span",13),e._uU(2),e.qZA(),e.BQk()),2&n){const o=e.oxw().$implicit;e.xp6(2),e.Oqu(o.v_feesstatus_name)}}function Me(n,i){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e.YNc(3,ke,3,2,"ng-container",15),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e.ynx(9,16),e.YNc(10,Ie,3,1,"ng-container",17),e.YNc(11,Oe,3,1,"ng-container",17),e.YNc(12,be,3,1,"ng-container",18),e.BQk(),e.qZA()(),e.BQk()),2&n){const o=i.$implicit,t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",o.order_code),e.xp6(2),e.hij("",t.renderMoney(o.amount)," VN\u0110"),e.xp6(2),e.Oqu(t.renderDate(o.order_date)),e.xp6(2),e.Q6J("ngSwitch",o.v_feesstatus),e.xp6(1),e.Q6J("ngSwitchCase",10201),e.xp6(1),e.Q6J("ngSwitchCase",10203)}}const qe=function(){return[]};function Ne(n,i){if(1&n&&e.YNc(0,Me,13,6,"ng-container",14),2&n){const o=e.oxw();let t;e.Q6J("ngForOf",null!==(t=o.response.payorderinfos)&&void 0!==t?t:e.DdM(1,qe))}}let Qe=(()=>{var n;class i{constructor(){this.APP_ROUTE=v.z,this.paging={page:1,limit:20,active:!0},this.response={}}ngOnInit(){this.refreshData()}onIonRefresher(t){this.refreshData(()=>{t.target.complete()})}onIonInfiniteScroll(t){this.loadMore(()=>{t.target.complete()})}refreshData(t){this.paging.page=1,this.paging.active=!0,this.loadData_Paging(t,!0)}loadMore(t){this.paging.page+=1,this.loadData_Paging(t)}loadData_Paging(t,a){var r;(0,Ze.Sz)({loading:s=>{this.response.loading=s},params:{userid:null===(r=this.user)||void 0===r?void 0:r.userid,page:this.paging.page,limit:this.paging.limit},callback:s=>{var l;this.response.payorderinfos=a?null!=s?s:[]:(null!==(l=this.response.payorderinfos)&&void 0!==l?l:[]).concat(null!=s?s:[]),(!(null!=s&&s.length)||(null==s?void 0:s.length)<this.paging.limit)&&(this.paging.active=!1),t&&t()}})}renderMoney(t){return(0,N.lb)(t,".")}renderDate(t,a){return O()(t).format(null!=a?a:"DD/MM/YYYY HH:mm")}}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-payment"]],inputs:{user:"user"},decls:35,vars:21,consts:[["slot","fixed",3,"ionRefresh"],[1,"table","table-hover"],["width","25%"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf","ngIfThen"],[3,"ionInfinite",4,"ngIf"],["templateLoading",""],["templateNoData",""],["templateYesData",""],[3,"ionInfinite"],[1,"text-center"],["name","dots","slot","center"],["class","text-muted",4,"ngIf"],[1,"text-muted"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"href"],[1,"text-success"],[1,"text-danger"]],template:function(t,a){if(1&t&&(e.TgZ(0,"ion-refresher",0),e.NdJ("ionRefresh",function(s){return a.onIonRefresher(s)}),e._UZ(1,"ion-refresher-content"),e.qZA(),e.TgZ(2,"h5"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"table",1)(6,"colgroup"),e._UZ(7,"col")(8,"col",2)(9,"col",2)(10,"col",2),e.qZA(),e.TgZ(11,"thead")(12,"tr")(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"tbody"),e.YNc(26,Pe,1,0,"ng-container",3),e.qZA()(),e.YNc(27,Ue,1,0,"ng-container",4),e.YNc(28,ve,2,0,"ion-infinite-scroll",5),e.YNc(29,Ae,2,0,"ng-template",null,6,e.W1O),e.YNc(31,Ce,1,1,"ng-template",null,7,e.W1O),e.YNc(33,Ne,1,2,"ng-template",null,8,e.W1O)),2&t){const r=e.MAs(30),s=e.MAs(32),l=e.MAs(34);e.xp6(3),e.Oqu(e.lcZ(4,11,"PaymentHistory")),e.xp6(11),e.Oqu(e.lcZ(15,13,"OrderCode")),e.xp6(3),e.Oqu(e.lcZ(18,15,"TransactionAmount")),e.xp6(3),e.Oqu(e.lcZ(21,17,"Time")),e.xp6(3),e.Oqu(e.lcZ(24,19,"Status")),e.xp6(3),e.Q6J("ngIf",null==a.response.payorderinfos?null:a.response.payorderinfos.length)("ngIfThen",l)("ngIfElse",s),e.xp6(1),e.Q6J("ngIf",!1!==a.response.loading)("ngIfThen",r),e.xp6(1),e.Q6J("ngIf",a.paging.active)}},dependencies:[g.sg,g.O5,g.RF,g.n9,g.ED,p.ju,p.MB,p.nJ,p.Wo,p.PQ,C.X$],styles:[".table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-top:0}"]}),i})();function Ye(n,i){1&n&&e.GkF(0)}function De(n,i){1&n&&e._UZ(0,"ion-spinner",18)}function Je(n,i){1&n&&e.GkF(0)}function we(n,i){if(1&n&&e.YNc(0,Je,1,0,"ng-container",13),2&n){const o=e.oxw(),t=e.MAs(57),a=e.MAs(55);e.Q6J("ngIf",o.params.component)("ngIfThen",t)("ngIfElse",a)}}function Ee(n,i){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"app-user-info",19),e.qZA(),e.TgZ(2,"div",20),e._UZ(3,"app-user-membership",21),e.qZA(),e.TgZ(4,"div",20),e._UZ(5,"app-user-product-package-paid",19),e.qZA(),e.TgZ(6,"div",20),e._UZ(7,"app-user-payment",19),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.Q6J("user",o.user),e.xp6(2),e.Q6J("user",o.user)("productpackageapplied",o.response.productpackageapplied),e.xp6(2),e.Q6J("user",o.user),e.xp6(2),e.Q6J("user",o.user)}}function Se(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"app-user-info",19),e.BQk()),2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("user",o.user)}}function Re(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"app-user-membership",21),e.BQk()),2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("user",o.user)("productpackageapplied",o.response.productpackageapplied)}}function Le(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"app-user-product-package-paid",19),e.BQk()),2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("user",o.user)}}function $e(n,i){if(1&n&&(e.ynx(0),e._UZ(1,"app-user-payment",19),e.BQk()),2&n){const o=e.oxw(2);e.xp6(1),e.Q6J("user",o.user)}}function Fe(n,i){if(1&n&&(e.ynx(0,22),e.YNc(1,Se,2,1,"ng-container",23),e.YNc(2,Re,2,2,"ng-container",23),e.YNc(3,Le,2,1,"ng-container",23),e.YNc(4,$e,2,1,"ng-container",23),e.BQk()),2&n){const o=e.oxw();e.Q6J("ngSwitch",o.params.component),e.xp6(1),e.Q6J("ngSwitchCase","info"),e.xp6(1),e.Q6J("ngSwitchCase","membership"),e.xp6(1),e.Q6J("ngSwitchCase","product-package-paid"),e.xp6(1),e.Q6J("ngSwitchCase","payment")}}const Be=[{path:"",component:(()=>{var n;class i{constructor(t,a,r,s,l){var m,f;if(this.router=t,this.activatedRoute=a,this.titleService=r,this.modalController=s,this.translateService=l,this.appsettings={},this.APP_ROUTE=v.z,this.params={},this.response={},this.params.component=null!==(m=a.snapshot.params.component)&&void 0!==m?m:"",this.params.to=null!==(f=a.snapshot.queryParamMap.get("to"))&&void 0!==f?f:"",this.params.to)t.navigate([v.z.USER_COMPONENT.replace(":component",this.params.to)],{replaceUrl:!0});else switch(this.params.component){case"info":l.stream("AccountInfo").subscribe(u=>{r.setTitle(u)});break;case"membership":l.stream("MemberInfo").subscribe(u=>{r.setTitle(u)});break;case"product-package-paid":l.stream("PurchaseHistory").subscribe(u=>{r.setTitle(u)});break;case"payment":l.stream("PaymentHistory").subscribe(u=>{r.setTitle(u)});break;default:var d,_;null!==(d=this.user)&&void 0!==d&&d.fullname?r.setTitle(null===(_=this.user)||void 0===_?void 0:_.fullname):l.stream("Account").subscribe(u=>{r.setTitle(u)})}}ngOnInit(){var t=this;(0,T.Z)(function*(){t.appsettings=yield(0,A.H0)(),t.appsettings.madonvi&&(t.user=yield(0,Z.RC)(t.appsettings),t.refreshData())})()}reloadTitle(){switch(this.params.component){case"info":this.translateService.stream("AccountInfo").subscribe(r=>{this.titleService.setTitle(r)});break;case"membership":this.translateService.stream("MemberInfo").subscribe(r=>{this.titleService.setTitle(r)});break;case"product-package-paid":this.translateService.stream("PurchaseHistory").subscribe(r=>{this.titleService.setTitle(r)});break;case"payment":this.translateService.stream("PaymentHistory").subscribe(r=>{this.titleService.setTitle(r)});break;default:var t,a;null!==(t=this.user)&&void 0!==t&&t.fullname?this.titleService.setTitle(null===(a=this.user)||void 0===a?void 0:a.fullname):this.translateService.stream("Account").subscribe(r=>{this.titleService.setTitle(r)})}}refreshData(){var t;(0,q.nC)({loading:a=>{this.response.loading=a},params:{userid:null===(t=this.user)||void 0===t?void 0:t.userid},callback:a=>{this.response.productpackageapplied=a}})}swichComponent(t,a){this.params.component=a,this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{to:a},queryParamsHandling:"merge",replaceUrl:!0}),this.reloadTitle()}presentModalUserChangeInfo(t){var a=this;return(0,T.Z)(function*(){const r=yield a.modalController.create({component:h.w,componentProps:{user:a.user},mode:"md",cssClass:"ion-modal ion-modal-change-info",backdropDismiss:!0,keyboardClose:!0});r.onDidDismiss().then(function(){var s=(0,T.Z)(function*(l){"confirm"==l.role&&(0,x.LE)({params:l.data,callback:m=>{a.user=m}})});return function(l){return s.apply(this,arguments)}}()),r.present()})()}presentModalUserChangePwd(t){var a=this;return(0,T.Z)(function*(){(yield a.modalController.create({component:y.B,componentProps:{user:a.user},mode:"md",cssClass:"ion-modal ion-modal-change-pwd",backdropDismiss:!0,keyboardClose:!0})).present()})()}signOut(){return(0,T.Z)(function*(){yield(0,A.rt)(),yield(0,M.h5)(),(0,x.Kr)({callback:()=>{window.location.replace(v.z.LANDING_PAGE)}})})()}}return(n=i).\u0275fac=function(t){return new(t||n)(e.Y36(U.F0),e.Y36(U.gz),e.Y36(Y.Dx),e.Y36(p.IN),e.Y36(C.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user"]],decls:58,vars:38,consts:[[3,"isFullWidth"],["when","md","contentId","main"],[1,"ion-no-padding"],["mode","ios"],[1,"font-weight-normal","text-muted"],[1,"text-dark"],["button","","detail","true","detail-icon","chevron-forward-outline",3,"href"],[3,"color"],["button","","detail","true","detail-icon","chevron-forward-outline",3,"click"],["button","","detail","true","detail-icon","log-out-outline",3,"click"],["color","danger"],["id","main",1,"ion-page"],[1,"ion-padding"],[4,"ngIf","ngIfThen","ngIfElse"],["templateLoading",""],["templateData",""],["templateDataAll",""],["templateDataSwitch",""],["name","dots"],[3,"user"],[1,"mb-5"],[3,"user","productpackageapplied"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,a){if(1&t&&(e._UZ(0,"app-header",0),e.TgZ(1,"ion-content")(2,"ion-split-pane",1)(3,"ion-content",2)(4,"ion-list",3)(5,"ion-list-header")(6,"ion-label")(7,"span",4),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"b",5),e._uU(11),e.qZA(),e._uU(12,"."),e.qZA()()(),e.TgZ(13,"ion-item",6)(14,"ion-label",7),e._uU(15),e.ALo(16,"translate"),e.qZA()(),e.TgZ(17,"ion-item",8),e.NdJ("click",function(s){return a.presentModalUserChangeInfo(s)}),e.TgZ(18,"ion-label"),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"ion-item",8),e.NdJ("click",function(s){return a.presentModalUserChangePwd(s)}),e.TgZ(22,"ion-label"),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"ion-item",9),e.NdJ("click",function(){return a.signOut()}),e.TgZ(26,"ion-label",10),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"ion-list-header")(30,"ion-label"),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e.TgZ(33,"ion-item",8),e.NdJ("click",function(s){return a.swichComponent(s,"membership")}),e.TgZ(34,"ion-label",7),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"ion-badge"),e._uU(38),e.qZA()(),e.TgZ(39,"ion-item",8),e.NdJ("click",function(s){return a.swichComponent(s,"product-package-paid")}),e.TgZ(40,"ion-label",7),e._uU(41),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"ion-item",8),e.NdJ("click",function(s){return a.swichComponent(s,"payment")}),e.TgZ(44,"ion-label",7),e._uU(45),e.ALo(46,"translate"),e.qZA()()()(),e.TgZ(47,"div",11)(48,"ion-content",12),e.YNc(49,Ye,1,0,"ng-container",13),e.qZA()()()(),e.YNc(50,De,1,0,"ng-template",null,14,e.W1O),e.YNc(52,we,1,3,"ng-template",null,15,e.W1O),e.YNc(54,Ee,8,5,"ng-template",null,16,e.W1O),e.YNc(56,Fe,5,5,"ng-template",null,17,e.W1O)),2&t){const r=e.MAs(51),s=e.MAs(53);e.Q6J("isFullWidth",!0),e.xp6(8),e.hij("",e.lcZ(9,20,"Welcome")," "),e.xp6(3),e.Oqu(null==a.user?null:a.user.fullname),e.xp6(2),e.Q6J("href",a.APP_ROUTE.USER),e.xp6(1),e.Q6J("color",a.params.component&&"info"!=a.params.component?"":"primary"),e.xp6(1),e.Oqu(e.lcZ(16,22,"AccountInfo")),e.xp6(4),e.Oqu(e.lcZ(20,24,"ChangeInfo")),e.xp6(4),e.Oqu(e.lcZ(24,26,"ChangePassword")),e.xp6(4),e.Oqu(e.lcZ(28,28,"SignOut")),e.xp6(4),e.Oqu(e.lcZ(32,30,"Membership")),e.xp6(3),e.Q6J("color","membership"==a.params.component?"primary":""),e.xp6(1),e.Oqu(e.lcZ(36,32,"MemberInfo")),e.xp6(3),e.Oqu(null==a.response.productpackageapplied?null:a.response.productpackageapplied.productpackage_key),e.xp6(2),e.Q6J("color","product-package-paid"==a.params.component?"primary":""),e.xp6(1),e.Oqu(e.lcZ(42,34,"PurchaseHistory")),e.xp6(3),e.Q6J("color","payment"==a.params.component?"primary":""),e.xp6(1),e.Oqu(e.lcZ(46,36,"PaymentHistory")),e.xp6(4),e.Q6J("ngIf",!1!==a.response.loading)("ngIfThen",r)("ngIfElse",s)}},dependencies:[g.O5,g.RF,g.n9,p.yp,p.W2,p.Ie,p.Q$,p.q_,p.yh,p.PQ,p.jI,D.G,L,ie,xe,Qe,C.X$],styles:["ion-split-pane[_ngcontent-%COMP%]{--side-max-width: 360px}"]}),i})()}];let He=(()=>{var n;class i{}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[U.Bz.forChild(Be),U.Bz]}),i})();var Ge=c(9074);let We=(()=>{var n;class i{}return(n=i).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.ez,I.u5,p.Pc,He,Ge.V]}),i})()},5511:(Q,k,c)=>{c.d(k,{RC:()=>A,vL:()=>T});var g=c(5861),I=c(3377),p=c(2695),U=c(4459);const T=function(){var x=(0,g.Z)(function*(){return yield(0,I.iA)()});return function(){return x.apply(this,arguments)}}(),A=function(){var x=(0,g.Z)(function*(h){let y=null!=h?h:yield(0,U.H0)(),Z=yield(0,I.iA)();return(!y.madonvi||!Z.userid||y.madonvi!=(null==Z?void 0:Z.madonvi))&&window.location.replace(p.z.LANDING_PAGE+`?require=signin&returnurl=${encodeURIComponent(window.location.href)}`),Z});return function(y){return x.apply(this,arguments)}}()}}]);