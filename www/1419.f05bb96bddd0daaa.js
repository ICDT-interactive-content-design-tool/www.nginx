"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1419],{8671:(j,y,c)=>{c.d(y,{$:()=>b});var _=c(5972);function b(h){h.params=h.params||{},(0,_.hm)({url:"api/Lookup/get",params:{lookup_key:h.params.lookup_key||null},success:n=>{"function"==typeof h.callback&&h.callback(null==n?void 0:n.data)},error:n=>{"function"==typeof h.callback&&h.callback(),console.error(h,n)},loading:h.loading,loadingController:h.loadingController})}},1419:(j,y,c)=>{c.d(y,{q:()=>N});var _=c(467),b=c(5972),h=c(6081),n=c(2635),v=c(3753),O=c(1477);function P(r){r.params=r.params||{},(0,b.Ll)({url:"api/BoardShareUser/AddUpdate",params:{board_id:r.params.board_id||null,emailaddr:r.params.emailaddr||null,v_sharepermission:r.params.v_sharepermission||null,createdby:r.params.userid||null,modifiedby:r.params.userid||null},success:s=>{"function"==typeof r.callback&&r.callback(s.data||null)},error:s=>{"function"==typeof r.callback&&r.callback(),console.error(s)},loading:r.loading,loadingController:r.loadingController})}var k=c(5414),S=c(8833),E=c(4552);const d={ONLY_ME:10400,ONLY_MEMBER:10401,EVERYONE_HAS_LINK:10402};var e=c(4438),i=c(6637),u=c(9417),m=c(31);function C(r,s){1&r&&e.nrm(0,"ion-icon",7)}function A(r,s){1&r&&e.nrm(0,"ion-icon",24)}function G(r,s){1&r&&e.nrm(0,"ion-icon",25)}function x(r,s){if(1&r){const M=e.RV6();e.j41(0,"ion-item",19)(1,"ion-avatar"),e.nrm(2,"img",26),e.k0s(),e.j41(3,"ion-label",27),e.EFF(4),e.k0s(),e.j41(5,"ion-button",28),e.bIt("click",function(o){const l=e.eBV(M).$implicit,t=e.XpG();return e.Njj(t.presentPopoverLookupSharePermission(o,l.emailaddr))}),e.j41(6,"ion-label"),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.nrm(9,"ion-icon",29),e.k0s()()}if(2&r){let M,a,o;const l=s.$implicit,t=e.XpG();e.Y8G("disabled",t.isDisabled4Only),e.R7$(2),e.Y8G("src",null!==(M=l.profilephoto?t.readfileuploadurl+l.profilephoto:null)&&void 0!==M?M:"../../../assets/image/user-avatar-default.png",e.B4B),e.R7$(2),e.JRh(null!==(a=l.fullname)&&void 0!==a?a:l.emailaddr),e.R7$(3),e.JRh(null!==(o=l.v_sharepermission_title)&&void 0!==o?o:e.bMT(8,4,"View"))}}let N=(()=>{var r;class s{constructor(a,o,l,t){this.modalController=a,this.popoverController=o,this.toastController=l,this.loadingController=t,this.b=0,this.v_share=d,this.dataForm={},this.board={},this.boardShare={},this.boardShareUsers=[],this.isfullscreen=!1,this.readfileuploadurl="",this.fileurl="",this.appsettings={}}ngOnInit(){var a=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,_.A)(function*(){a.appsettings=yield(0,b.AC)(),a.appsettings.madonvi&&(a.user=yield(0,n.Nk)(),a.readfileuploadurl=a.appsettings.readfileuploadurl||"",a.refreshData())})()}refreshData(){var a;(0,h.qU)({loadingController:this.loadingController,params:{userid:null===(a=this.user)||void 0===a?void 0:a.userid,board_id:this.b},callback:o=>{this.board=o||{},this.board.board_id&&(this.GetBoardShare(),this.GetBoardShareUser())}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}changeEmails(a){var o;this.dataForm.emailaddrs=((null==a||null===(o=a.target)||void 0===o?void 0:o.value)||"").replace(/[^a-zA-Z0-9\@\;\ \-\_\.]+/g,"").replace(/\s+/," ").trim().replace(/\ \;/g,";").replace(/\;\ /g,";").replace(/\ /g,";").replace(/\;+/g,";").split(";").map(l=>{let t=l.match(/^[a-zA-Z0-9\.\-\_]+@[a-zA-Z0-9\-\_]+\.[a-zA-Z0-9\-\_]+((\.[a-zA-Z0-9\-\_]+)+)?$/);return t?t[0]:null}).filter(l=>!!l).filter((l,t,p)=>p.indexOf(l)==t).join("; ")}keypressEmails(a){var o,t,l=a.keyCode||a.which||a.charCode||0;l!=O.r.Enter&&l!=O.r.Escape||(null===(t=a.target)||void 0===t||t.blur(),this.submitEmails()),null!==(o=a.key)&&void 0!==o&&o.match(/[^a-zA-Z0-9\@\;\ \-\_\.]/)&&(null==a||a.preventDefault(),null==a||a.stopPropagation())}submitEmails(a){this.dataForm.emailaddrs&&(this.AddUpdateBoardShareUser_Recursive(this.dataForm.emailaddrs.replace(/\s+/g,"").split(";")),this.dataForm.emailaddrs="")}presentPopoverLookupShare(a){var o=this;return(0,_.A)(function*(){const l=yield o.popoverController.create({component:v.t,componentProps:{selectedId:o.boardShare.v_share,lookup_key:"v_share"},event:a,dismissOnSelect:!1,animated:!1,side:"bottom",alignment:"start"});l.onDidDismiss().then(t=>{var p,f,g;"confirm"==t.role&&(Object.assign(o.boardShare,{v_share:null===(p=t.data)||void 0===p?void 0:p.lookup_value,v_share_title:null===(f=t.data)||void 0===f?void 0:f.lookup_title}),o.AddUpdateBoardShare(null===(g=t.data)||void 0===g?void 0:g.lookup_value))}),l.present()})()}presentPopoverLookupSharePermission(a,o){var l=this;return(0,_.A)(function*(){var t;const f=yield l.popoverController.create({component:v.t,componentProps:{selectedId:null===(t=l.boardShareUsers.find(g=>g.emailaddr==o))||void 0===t?void 0:t.v_sharepermission,lookup_key:"v_sharepermission",lookups_d2:[{lookup_value:-1,lookup_title:"X\xf3a",color:"danger"}]},event:a,dismissOnSelect:!1,animated:!1,alignment:"end",side:"bottom"});f.onDidDismiss().then(g=>{var D;"confirm"==g.role&&(l.boardShareUsers.filter($=>$.emailaddr==o).forEach($=>{var F,T;Object.assign($,{v_sharepermission:null===(F=g.data)||void 0===F?void 0:F.lookup_value,v_sharepermission_title:null===(T=g.data)||void 0===T?void 0:T.lookup_title})}),l.AddUpdateBoardShareUser(o,null===(D=g.data)||void 0===D?void 0:D.lookup_value))}),f.present()})()}GetBoardShare(){var a=this;return(0,_.A)(function*(){var o;!function I(r){r.params=r.params||{},(0,b.hm)({url:"api/BoardShare/Get",params:{getby:r.params.userid||null,boardshare_id:r.params.boardshare_id||null,board_id:r.params.board_id||null,v_share:r.params.v_share||null},success:s=>{"function"==typeof r.callback&&r.callback(s.data||null)},error:s=>{"function"==typeof r.callback&&r.callback(),console.error(s)},loading:r.loading,loadingController:r.loadingController})}({loadingController:a.loadingController,params:{userid:null===(o=a.user)||void 0===o?void 0:o.userid,board_id:a.b},callback:l=>{a.boardShare=l||{},a.isDisabled4Only=!a.boardShare.v_share||a.boardShare.v_share==d.ONLY_ME}})})()}AddUpdateBoardShare(a){var o=this;return(0,_.A)(function*(){var l;if(!a||a<=0)return o.DeleteBoardShare();!function L(r){r.params=r.params||{},(0,b.Ll)({url:"api/BoardShare/AddUpdate",params:{board_id:r.params.board_id||null,v_share:r.params.v_share||null,createdby:r.params.userid||null,modifiedby:r.params.userid||null},success:s=>{"function"==typeof r.callback&&r.callback(s.data||null)},error:s=>{"function"==typeof r.callback&&r.callback(),console.error(s)},loading:r.loading,loadingController:r.loadingController})}({loadingController:o.loadingController,params:{userid:null===(l=o.user)||void 0===l?void 0:l.userid,board_id:o.b,v_share:a},callback:t=>{0==(null==t?void 0:t.returncode)?o.GetBoardShare():(0,k.c)(o.toastController,{},t).then(p=>p.present())}})})()}DeleteBoardShare(){var a=this;return(0,_.A)(function*(){var o;!function U(r){r.params=r.params||{},(0,b.sj)({url:"api/BoardShare/Delete",params:{deleteby:r.params.userid||null,boardshare_id:r.params.boardshare_id||null,board_id:r.params.board_id||null},success:s=>{"function"==typeof r.callback&&r.callback(s.data||null)},error:s=>{"function"==typeof r.callback&&r.callback(),console.error(s)},loading:r.loading,loadingController:r.loadingController})}({loadingController:a.loadingController,params:{userid:null===(o=a.user)||void 0===o?void 0:o.userid,board_id:a.b},callback:l=>{0==(null==l?void 0:l.returncode)?a.GetBoardShare():(0,k.c)(a.toastController,{},l).then(t=>t.present())}})})()}GetBoardShareUser(){var a=this;return(0,_.A)(function*(){var o;!function B(r){r.params=r.params||{},(0,b.hm)({url:"api/BoardShareUser/Get",params:{getby:r.params.userid||null,boardshareuser_id:r.params.boardshareuser_id||null,board_id:r.params.board_id||null,emailaddr:r.params.emailaddr||null,v_sharepermission:r.params.v_sharepermission||null},success:s=>{"function"==typeof r.callback&&r.callback(s.data||null)},error:s=>{"function"==typeof r.callback&&r.callback(),console.error(s)},loading:r.loading,loadingController:r.loadingController})}({loadingController:a.loadingController,params:{userid:null===(o=a.user)||void 0===o?void 0:o.userid,board_id:a.b},callback:l=>{a.boardShareUsers=l||[]}})})()}AddUpdateBoardShareUser_Recursive(a){var o=this;return(0,_.A)(function*(){let l=t=>{var p;t&&P({loadingController:o.loadingController,params:{userid:null===(p=o.user)||void 0===p?void 0:p.userid,board_id:o.b,emailaddr:t,v_sharepermission:1},callback:f=>{a.length?l(null==a?void 0:a.shift()):0==(null==f?void 0:f.returncode)?o.GetBoardShareUser():(0,k.c)(o.toastController,{},f).then(g=>g.present())}})};l(a.shift())})()}AddUpdateBoardShareUser(a,o){var l=this;return(0,_.A)(function*(){var t;if(a){if(!o||o<=0)return l.DeleteBoardShareUser(a);P({loadingController:l.loadingController,params:{userid:null===(t=l.user)||void 0===t?void 0:t.userid,board_id:l.b,emailaddr:a,v_sharepermission:o},callback:p=>{0==(null==p?void 0:p.returncode)?l.GetBoardShareUser():(0,k.c)(l.toastController,{},p).then(f=>f.present())}})}})()}DeleteBoardShareUser(a){var o=this;return(0,_.A)(function*(){var l;a&&function R(r){r.params=r.params||{},(0,b.sj)({url:"api/BoardShareUser/Delete",params:{deleteby:r.params.userid||null,boardshareuser_id:r.params.boardshareuser_id||null,board_id:r.params.board_id||null,emailaddr:r.params.emailaddr||null},success:s=>{"function"==typeof r.callback&&r.callback(s.data||null)},error:s=>{"function"==typeof r.callback&&r.callback(),console.error(s)},loading:r.loading,loadingController:r.loadingController})}({loadingController:o.loadingController,params:{userid:null===(l=o.user)||void 0===l?void 0:l.userid,board_id:o.b,emailaddr:a},callback:t=>{0==(null==t?void 0:t.returncode)?o.GetBoardShareUser():(0,k.c)(o.toastController,{},t).then(p=>p.present())}})})()}copyLink(a){var o=this;return(0,_.A)(function*(){let l=o.appsettings.weburl+S._.VIEWER+"?"+jQuery.param({b:o.b});(0,E.lW)(l)?(o.isCopiedLink=!0,o.isCopiedEmbed=!1):(0,k.c)(o.toastController,{message:"Sao ch\xe9p l\u1ed7i!"}).then(t=>t.present())})()}copyEmbed(a){var o=this;return(0,_.A)(function*(){let t=`<iframe src="${o.appsettings.weburl+S._.EMBED+"?"+jQuery.param({b:o.b})}" width="${o.board.size_width||1280}" height="${o.board.size_height||720}" frameborder="0" allowfullscreen webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="display: block; margin: auto; border: 1px dashed rgba(0,0,0,0.1);"></iframe>`;(0,E.lW)(t)?(o.isCopiedLink=!1,o.isCopiedEmbed=!0):(0,k.c)(o.toastController,{message:"Sao ch\xe9p l\u1ed7i!"}).then(p=>p.present())})()}}return(r=s).\u0275fac=function(a){return new(a||r)(e.rXU(i.W3),e.rXU(i.IE),e.rXU(i.K_),e.rXU(i.Xi))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-modal-board-share"]],inputs:{b:"b"},decls:51,vars:26,consts:[["color","primary"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],["lines","none","detail","false","button","",3,"click"],["slot","start","name","lock-closed-outline",1,"mr-3"],[1,"d-flex","align-items-center"],[1,"mr-2"],["src","../../../assets/icon/16x16/chevron-down.svg",1,"fs-12"],[1,"fs-12","mt-1"],[1,"px-3","pt-2","pb-3"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","email@example.com; email2@example.com; ...",1,"form-control",3,"change","keypress","disabled","ngModel"],[1,"input-group-append"],["type","button",1,"btn",3,"click","disabled"],[1,"mb-0","mt-3"],["button","","detail","false",3,"disabled"],[1,"p-2"],["shape","round","fill","outline",1,"m-1",3,"click"],["slot","start","src","../../../assets/icon/24x24/attach.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/24x24/embed.svg",1,"fs-24"],["slot","start","name","people-outline",1,"mr-3"],["slot","start","name","globe-outline",1,"mr-3"],["onerror","errorAvatar(this)",3,"src"],[1,"ml-3"],["slot","end","size","default","color","dark","fill","clear",1,"m-0",3,"click"],["slot","end","src","../../../assets/icon/16x16/chevron-down.svg",1,"fs-10"]],template:function(a,o){1&a&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.j41(5,"ion-text",0),e.EFF(6),e.k0s()(),e.j41(7,"ion-buttons",1)(8,"ion-button",2),e.bIt("click",function(){return o.toggleFullScreen()}),e.nrm(9,"ion-icon",3),e.k0s(),e.j41(10,"ion-button",4),e.bIt("click",function(){return o.close()}),e.nrm(11,"ion-icon",5),e.k0s()()(),e.j41(12,"ion-toolbar")(13,"ion-item",6),e.bIt("click",function(t){return o.presentPopoverLookupShare(t)}),e.DNE(14,C,1,0,"ion-icon",7)(15,A,1,0)(16,G,1,0),e.j41(17,"ion-label")(18,"div",8)(19,"b",9),e.EFF(20),e.k0s(),e.nrm(21,"ion-icon",10),e.k0s(),e.j41(22,"div",11),e.EFF(23),e.k0s()()(),e.j41(24,"div",12)(25,"div",13)(26,"div",14)(27,"input",15),e.bIt("change",function(t){return o.changeEmails(t)})("keypress",function(t){return o.keypressEmails(t)}),e.k0s(),e.j41(28,"div",16)(29,"button",17),e.bIt("click",function(t){return o.submitEmails(t)}),e.EFF(30),e.nI1(31,"translate"),e.k0s()()()(),e.nrm(32,"hr"),e.j41(33,"label",18),e.EFF(34),e.nI1(35,"translate"),e.k0s()()()(),e.j41(36,"ion-content")(37,"ion-list"),e.Z7z(38,x,10,6,"ion-item",19,e.fX1),e.k0s()(),e.j41(40,"ion-footer",20)(41,"ion-button",21),e.bIt("click",function(t){return o.copyLink(t)}),e.nrm(42,"ion-icon",22),e.j41(43,"ion-label"),e.EFF(44),e.nI1(45,"translate"),e.k0s()(),e.j41(46,"ion-button",21),e.bIt("click",function(t){return o.copyEmbed(t)}),e.nrm(47,"ion-icon",23),e.j41(48,"ion-label"),e.EFF(49),e.nI1(50,"translate"),e.k0s()()()),2&a&&(e.R7$(3),e.SpI("",e.bMT(4,16,"Share"),": "),e.R7$(3),e.JRh(o.board.board_title),e.R7$(3),e.Y8G("src",o.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),e.R7$(5),e.vxM(14,o.boardShare.v_share&&o.boardShare.v_share!=o.v_share.ONLY_ME?o.boardShare.v_share==o.v_share.ONLY_MEMBER?15:o.boardShare.v_share==o.v_share.EVERYONE_HAS_LINK?16:-1:14),e.R7$(6),e.JRh(o.boardShare.v_share_title),e.R7$(3),e.JRh(o.boardShare.v_share_note),e.R7$(4),e.Y8G("disabled",!!o.isDisabled4Only)("ngModel",o.dataForm.emailaddrs),e.R7$(2),e.Y8G("disabled",!!o.isDisabled4Only),e.R7$(),e.JRh(e.bMT(31,18,"Add")),e.R7$(3),e.HbH(o.isDisabled4Only?"disabled":""),e.R7$(),e.Lme("",e.bMT(35,20,"SharedMembership")," (",o.boardShareUsers.length,")"),e.R7$(4),e.Dyx(o.boardShareUsers),e.R7$(6),e.JRh(e.bMT(45,22,o.isCopiedLink?"Copied":"CopyLink")),e.R7$(5),e.JRh(e.bMT(50,24,o.isCopiedEmbed?"Copied":"CopyEmbed")))},dependencies:[u.me,u.BC,u.vS,i.mC,i.Jm,i.QW,i.W9,i.M0,i.eU,i.iq,i.uz,i.he,i.nf,i.IO,i.BC,i.ai,m.D9],styles:["ion-toolbar[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{border-radius:50%;padding:8px;margin:0 1rem 0 0;background-color:#faebd7;color:var(--ion-color-primary)}ion-toolbar[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5}ion-footer[_ngcontent-%COMP%]{box-shadow:none;border:0;--box-shadow: none;--border-width: 0}ion-footer[_ngcontent-%COMP%]:before{display:none}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:234px;--border-width: 1px;--border-color: #747775;--background: transparent;--color: var(--ion-color-primary);--background-hover: var(--ion-color-primary-tint);--background-hover-opacity: 1;--color-hover: #fff;--background-focused: var(--ion-color-primary-shade);--background-focused-opacity: 1;--color-focused: #fff;--background-activated: var(--ion-color-primary);--background-activated-opacity: 1;--color-activated: #fff}.disabled[_ngcontent-%COMP%]{opacity:.65}.input-group[_ngcontent-%COMP%]{--color: #eee}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]{margin-left:.5rem}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:3rem;min-height:3rem;padding:0 1rem;border:0;border-radius:.25rem;text-align:center;line-height:0;vertical-align:middle;background-color:var(--ion-color-tertiary);color:var(--ion-color-tertiary-contrast)}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-tertiary-shade)}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{height:3rem;padding:.25rem .5rem;border-color:var(--color, #4D4F60);color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5f6ce1}.btn-share[_ngcontent-%COMP%]{padding:.25rem 0;margin:0;border:0;font-size:1rem;background-color:transparent;color:var(--ion-text-color, #000);outline:none;box-shadow:none}.btn-share[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:1.5rem}.btn-share[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]:last-child{font-size:1rem}.btn-share[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:0 .5rem;vertical-align:middle}.share-member-action[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .share-member-action[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.share-member-action[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%] + ion-icon[_ngcontent-%COMP%]{margin-left:.5rem}hr[_ngcontent-%COMP%]{margin:0}"]}),s})()},3753:(j,y,c)=>{c.d(y,{t:()=>E});var _=c(467),b=c(8671),h=c(2635),n=c(4438),v=c(6637),O=c(177),B=c(31);function P(d,e){1&d&&(n.qex(0),n.j41(1,"ion-content")(2,"div",2)(3,"div",3),n.nrm(4,"ion-spinner",4),n.k0s()()(),n.bVm())}function R(d,e){if(1&d){const i=n.RV6();n.qex(0),n.j41(1,"ion-item",9),n.bIt("click",function(){const m=n.eBV(i).$implicit,C=n.XpG(3);return n.Njj(C.filterChange(m.lookup_value))}),n.j41(2,"ion-label"),n.EFF(3),n.k0s()(),n.bVm()}if(2&d){const i=e.$implicit,u=n.XpG(3);n.R7$(),n.BMQ("color",i.lookup_value==u.selectedId?"primary":""),n.R7$(2),n.JRh(i.lookup_title)}}function k(d,e){if(1&d&&(n.j41(0,"ion-list",7),n.DNE(1,R,4,2,"ng-container",8),n.k0s()),2&d){const i=n.XpG(2);n.R7$(),n.Y8G("ngForOf",i.lookups)}}function I(d,e){1&d&&(n.j41(0,"div",3)(1,"i"),n.EFF(2),n.nI1(3,"translate"),n.k0s()()),2&d&&(n.R7$(2),n.JRh(n.bMT(3,1,"DataNotFound")))}function L(d,e){if(1&d){const i=n.RV6();n.qex(0),n.j41(1,"ion-item",9),n.bIt("click",function(){const m=n.eBV(i).$implicit,C=n.XpG(3);return n.Njj(C.filterChange(m.lookup_value))}),n.j41(2,"ion-label",10),n.EFF(3),n.k0s()(),n.bVm()}if(2&d){const i=e.$implicit,u=n.XpG(3);n.R7$(),n.BMQ("color",i.lookup_value==u.selectedId?"primary":""),n.R7$(),n.Y8G("color",i.color),n.R7$(),n.JRh(i.lookup_title)}}function U(d,e){if(1&d&&(n.qex(0),n.nrm(1,"hr"),n.j41(2,"ion-list",7),n.DNE(3,L,4,3,"ng-container",8),n.k0s(),n.bVm()),2&d){const i=n.XpG(2);n.R7$(3),n.Y8G("ngForOf",i.lookups_d2)}}function S(d,e){if(1&d&&(n.qex(0),n.DNE(1,k,2,1,"ion-list",5)(2,I,4,3,"div",6)(3,U,4,1,"ng-container",1),n.bVm()),2&d){const i=n.XpG();n.R7$(),n.Y8G("ngIf",i.lookups.length),n.R7$(),n.Y8G("ngIf",!i.lookups.length),n.R7$(),n.Y8G("ngIf",i.lookups_d2.length)}}let E=(()=>{var d;class e{constructor(u){this.popoverController=u,this.selectedId=0,this.lookup_key="",this.lookups_d2=[],this.dataInit={loading:!0},this.lookups=[]}ngOnInit(){var u=this;(0,_.A)(function*(){u.user=yield(0,h.Nk)(),u.loadLookup()})()}loadLookup(){var u;(0,b.$)({loading:m=>{this.dataInit.loading=m},params:{userid:null===(u=this.user)||void 0===u?void 0:u.userid,lookup_key:this.lookup_key},callback:m=>{this.lookups=m||[]}})}filterChange(u){var m;this.popoverController.dismiss(null!==(m=this.lookups.find(C=>C.lookup_value==u))&&void 0!==m?m:this.lookups_d2.find(C=>C.lookup_value==u),"confirm")}}return(d=e).\u0275fac=function(u){return new(u||d)(n.rXU(v.IE))},d.\u0275cmp=n.VBU({type:d,selectors:[["app-popover-lookup"]],inputs:{selectedId:"selectedId",lookup_key:"lookup_key",lookups_d2:"lookups_d2"},decls:3,vars:2,consts:[[1,"menu-lookup","overflow-auto"],[4,"ngIf"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],["lines","full",4,"ngIf"],["class","px-3 py-1",4,"ngIf"],["lines","full"],[4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],[3,"color"]],template:function(u,m){1&u&&(n.j41(0,"div",0),n.DNE(1,P,5,0,"ng-container",1)(2,S,4,3,"ng-container",1),n.k0s()),2&u&&(n.R7$(),n.Y8G("ngIf",m.dataInit.loading),n.R7$(),n.Y8G("ngIf",!m.dataInit.loading))},dependencies:[O.Sq,O.bT,v.W9,v.uz,v.he,v.nf,v.w2,B.D9],styles:[".menu-lookup[_ngcontent-%COMP%]{width:240px;max-height:480px;border-top:3px solid #5F6CE1}hr[_ngcontent-%COMP%]{margin:0}"]}),e})()}}]);