"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8847],{14:(ie,Z,C)=>{C.d(Z,{n:()=>E});const E=S=>{var N,a,e,F={};let Y=(null!==(e=(S=null!==(N=null===(a=S.split(","))||void 0===a||null===(a=a.shift())||void 0===a?void 0:a.trim().replace(/[^a-zA-Z_-]/g,""))&&void 0!==N?N:"").match(/^[a-zA-Z_]+[^-]+/))&&void 0!==e?e:[])[0];return Y&&(F.fontFamily=Y.split("_").map((W,J)=>0==J?W.replace(/([A-Z])/g," $1").trim():W).join(" ")),S.match(/-([a-zA-Z]+)?Thin([a-zA-Z]+)?/)?F.fontWeight=100:S.match(/-([a-zA-Z]+)?ExtraLight([a-zA-Z]+)?/)?F.fontWeight=200:S.match(/-([a-zA-Z]+)?Light([a-zA-Z]+)?/)?F.fontWeight=300:S.match(/-([a-zA-Z]+)?Regular([a-zA-Z]+)?/)?F.fontWeight=400:S.match(/-([a-zA-Z]+)?Medium([a-zA-Z]+)?/)?F.fontWeight=500:S.match(/-([a-zA-Z]+)?SemiBold([a-zA-Z]+)?/)?F.fontWeight=600:S.match(/-([a-zA-Z]+)?ExtraBold([a-zA-Z]+)?/)?F.fontWeight=800:S.match(/-([a-zA-Z]+)?Bold([a-zA-Z]+)?/)?F.fontWeight=700:S.match(/-([a-zA-Z]+)?Black([a-zA-Z]+)?/)&&(F.fontWeight=900),S.match(/-([a-zA-Z]+)?Italic([a-zA-Z]+)?/)&&(F.fontStyle="italic"),F}},5120:(ie,Z,C)=>{C.d(Z,{C:()=>W});var E=C(1999),S=C(6611),N=C(4896),a=C(4114),e=C(6315),F=C(2492),Y=C(14);const W=(L,w)=>{X(L,null,w,L);var M=j=>{var k;"text"==j.nodeName?(j=>{var k;null!==(k=j.child)&&void 0!==k&&k.length&&(j.nodeName="g",j.child=j.child.reduce((I,v,p,o)=>{if("tspan"==v.nodeName){let _=I.find(g=>g.fill==v.fill&&g.y==v.y&&g["font-family"]==v["font-family"]&&g["font-weight"]==v["font-weight"]&&g["font-style"]==v["font-style"]&&g["font-size"]==v["font-size"]);var i,f;_?(_.x=Math.min(parseFloat(null!==(i=_.x)&&void 0!==i?i:"0"),parseFloat(null!==(f=v.x)&&void 0!==f?f:"0")),_.textContent+=v.textContent):(v.nodeName="text",I.push(v))}else I.push(v);return I},[]))})(j):null!==(k=j.child)&&void 0!==k&&k.length&&j.child.forEach(I=>M(I))},t=j=>j.reduce((k,I,v,p)=>{var o;if("g"==I.nodeName&&null!==(o=I.child)&&void 0!==o&&o.length&&(I.child=t(I.child)),"text"==I.nodeName){let _=k.find(g=>g.fill==I.fill&&g.y==I.y&&g["font-family"]==I["font-family"]&&g["font-weight"]==I["font-weight"]&&g["font-style"]==I["font-style"]&&g["font-size"]==I["font-size"]);var i,f;_?(_.x=Math.min(parseFloat(null!==(i=_.x)&&void 0!==i?i:"0"),parseFloat(null!==(f=I.x)&&void 0!==f?f:"0")),_.textContent+=I.textContent):k.push(I)}else k.push(I);return k},[]);w.forEach(j=>M(j)),w=t(w),console.log("SVG2JSON",w);let B=((j,k,I,v,p)=>{let o=null===(j=L.getAttribute("viewBox"))||void 0===j||null===(j=j.replace(/^([0-9\.]+)[\s]([0-9\.]+)[\s\,]([0-9\.]+)[\s\,]([0-9\.]+)$/g,"$1,$2,$3,$4"))||void 0===j||null===(j=j.split(","))||void 0===j?void 0:j.map(i=>(0,F.z)(parseFloat(i),1));return 4==(null==o?void 0:o.length)?{x:o[0],y:o[1],width:o[2],height:o[3]}:{x:null!==(k=K(L.getAttribute("x")))&&void 0!==k?k:0,y:null!==(I=K(L.getAttribute("y")))&&void 0!==I?I:0,width:null!==(v=K(L.getAttribute("width")))&&void 0!==v?v:0,height:null!==(p=K(L.getAttribute("height")))&&void 0!==p?p:0}})(),y={id:S.L.data.newSlideId,name:"SVG",svg:{viewBox:B,nodes:J(w)}};if(console.log(y),y.svg&&(!y.svg.viewBox.width||!y.svg.viewBox.height)){var $;let j=0,k=0,I=v=>{v.forEach(p=>{var o;let{size:i}=p;j=Math.max(j,i.width),k=Math.max(k,i.height),I(null!==(o=p.nodes)&&void 0!==o?o:[])})};I(null!==($=y.svg.nodes)&&void 0!==$?$:[]),y.svg.viewBox.width=j,y.svg.viewBox.height=k}return y},J=(L,w)=>{let V=[];return L.forEach(M=>{let t={id:Math.ceil(1e9*Math.random()),pid:w,name:M.nodeName,type:(()=>{switch(M.nodeName){case"polygon":return E.h.POLYGON;case"polyline":return E.h.POLYLINE;case"path":return E.h.PATH;case"circle":return E.h.CIRCLE;case"ellipse":return E.h.ELLIPSE;case"line":return E.h.LINE;case"rect":return E.h.RECT;case"foreignObject":return E.h.FOREIGNOBJECT;case"image":return E.h.IMAGE;case"text":return E.h.TEXT;case"tspan":return E.h.TSPAN;case"g":return E.h.GROUP}return 0})(),size:((B,y)=>{let $={},j=0,k=0,I=0,v=0,p=null!==(B=M.rotate)&&void 0!==B?B:null;switch(M.nodeName){case"circle":{let o=parseFloat(M.cx||"0"),i=parseFloat(M.cy||"0"),f=parseFloat(M.r||"0");j=o-f,k=i-f,I=2*f,v=2*f;break}case"ellipse":{let o=parseFloat(M.cx||"0"),i=parseFloat(M.cy||"0"),f=parseFloat(M.rx||"0"),_=parseFloat(M.ry||"0");j=o-f,k=i-_,I=2*f,v=2*_;break}case"line":{let o=parseFloat(M.x1||"0"),i=parseFloat(M.y1||"0"),f=parseFloat(M.x2||"0"),_=parseFloat(M.y2||"0"),g=999999999,P=999999999,x=0,O=0;g=Math.min(o,f),P=Math.min(i,_),x=Math.max(o,f),O=Math.max(i,_),j=g,k=P,I=x-j||1,v=O-k||1,Object.assign($,{ratios:[[(o-j)/I,(i-k)/v],[(f-j)/I,(_-k)/v]]});break}case"rect":j=parseFloat(M.x||"0"),k=parseFloat(M.y||"0"),I=parseFloat(M.width||"0"),v=parseFloat(M.height||"0"),Object.assign($,{x:j,y:k,width:I,height:v});break;case"foreignObject":case"image":j=parseFloat(M.x||"0"),k=parseFloat(M.y||"0"),I=parseFloat(M.width||"0"),v=parseFloat(M.height||"0");break;case"text":case"tspan":$.x||$.y||(M.x&&(j=parseFloat(M.x||"0")),M.y&&(k=parseFloat(M.y||"0"))),(o=>{let i=16;var f,_,g;o&&(i=o.match(/rem/)?16*parseInt(o):parseInt(o)),v=1.2*(f=i),I=f/14*8*(null!==(_=null===(g=M.textContent)||void 0===g?void 0:g.length)&&void 0!==_?_:1),M["alignment-baseline"]||M["dominant-baseline"]||(k-=f)})(M["font-size"]||"16");break;case"polygon":case"polyline":{if(!M.points)break;let o=(0,N.An)(M.points),{minX:i,minY:f,maxX:_,maxY:g}=(0,N.j9)(o);j=i,k=f,I=_-j||1,v=g-k||1,Object.assign($,{ratios:(0,N.Lp)({x:j,y:k,width:I,height:v},o)});break}case"path":{if(!M.d)break;let o=(0,N.CS)(M.d),{minX:i,minY:f,maxX:_,maxY:g}=(0,N.lP)(o);j=i,k=f,I=_-j||1,v=g-k||1,Object.assign($,{ratioMaps:(0,N.nf)({x:j,y:k,width:I,height:v},o)});break}}return null!=(o=null===(y=M.transform)||void 0===y||null===(y=y.replace(/\,/," "))||void 0===y?void 0:y.replace(/\s+/g," "))&&o.match(/rotate\([^\)]+\)/)&&(P=null===(i=null!==(f=null==o?void 0:o.match(/rotate\([^\)]+\)/))&&void 0!==f?f:[])||void 0===i||null===(i=i.shift())||void 0===i?void 0:i.toString())&&(O=null==P||null===(x=P.replace(/[^0-9\-\.\,\ ]/g,""))||void 0===x||null===(x=x.replace(/\,/g," "))||void 0===x||null===(x=x.replace(/\s+/g," "))||void 0===x?void 0:x.split(" ")).length&&Object.assign($,{rotate:parseFloat(O[0]||"0")}),null!=o&&o.match(/translate\([^\)]+\)/)&&(P=>{var x;P&&(O=>{O.length>=2&&(j+=parseFloat(O[0]||"0"),k+=parseFloat(O[1]||"0"))})(null==P||null===(x=P.replace(/[^0-9\-\.\,\ ]/g,""))||void 0===x||null===(x=x.replace(/\,/g," "))||void 0===x||null===(x=x.replace(/\s+/g," "))||void 0===x?void 0:x.split(" "))})(null===(_=null!==(g=null==o?void 0:o.match(/translate\([^\)]+\)/))&&void 0!==g?g:[])||void 0===_||null===(_=_.shift())||void 0===_?void 0:_.toString()),null!=o&&o.match(/matrix\([^\)]+\)/)&&(P=>{if(P){var x;let O=(0,N.ml)({x:j,y:k},P);j=O.x,k=O.y,p=null!==(x=O.rotate)&&void 0!==x?x:null}})(o),Object.assign($,{x:j,y:k,width:I,height:v,rotate:p}),$;var o,i,f,P,x,O,_,g})(),attribute:(()=>{let B={};switch(M.fill&&(B.fill=(0,a.Pe)(O=M.fill)?(0,e.w)(O):(0,a.XT)(O)?O:(0,a.Tq)(O)?"rgba(0,0,0,0)":"#000000"),M["fill-opacity"]&&(B.fillOpacity=M["fill-opacity"]),M["fill-rule"]&&(B.fillRule=M["fill-rule"]),M.stroke&&(O=>{B.stroke=(0,a.Pe)(O)?(0,e.w)(O):(0,a.XT)(O)?O:(0,a.Tq)(O)?"rgba(0,0,0,0)":"#000000"})(M.stroke),M["stroke-opacity"]&&(B.strokeOpacity=M["stroke-opacity"]),M["stroke-width"]&&(B.strokeWidth=parseFloat(M["stroke-width"])||0),M["stroke-linecap"]&&(B.strokeLinecap=M["stroke-linecap"]),M["stroke-linejoin"]&&(B.strokeLinejoin=M["stroke-linejoin"]),M["stroke-miterlimit"]&&(B.strokeMiterlimit=parseFloat(M["stroke-miterlimit"])||0),M["stroke-dasharray"]&&(B.strokeDasharray=parseFloat(M["stroke-dasharray"])||0),M.nodeName){case"polygon":case"polyline":{var y;let O=null!==(y=M.points)&&void 0!==y?y:null;Object.assign(B,{points:O});break}case"path":{var $;let O=null!==($=M.d)&&void 0!==$?$:null;Object.assign(B,{d:O});break}case"circle":case"ellipse":case"line":case"rect":case"foreignObject":case"image":break;case"text":case"tspan":{var j,k,I,v,p,o,i,f,_;let O=null!==(j=M["font-family"])&&void 0!==j?j:null,A=null!==(k=M["font-weight"])&&void 0!==k?k:null,R=null!==(I=M["font-style"])&&void 0!==I?I:null,G=null!==(v=M["font-size"])&&void 0!==v?v:null,D=null!==(p=M["letter-spacing"])&&void 0!==p?p:null,c=null!==(o=M["word-spacing"])&&void 0!==o?o:null,s=null!==(i=M["alignment-baseline"])&&void 0!==i?i:null,m=null!==(f=M["dominant-baseline"])&&void 0!==f?f:null,d=null!==(_=M["text-anchor"])&&void 0!==_?_:null;if(O){var g,P,x;let u=(0,Y.n)(O);O=null!==(g=u.fontFamily)&&void 0!==g?g:O,A=null!==(P=u.fontWeight)&&void 0!==P?P:A,R=null!==(x=u.fontStyle)&&void 0!==x?x:R}s||m||(m="text-before-edge"),Object.assign(B,{fontFamily:O,fontWeight:A,fontStyle:R,letterSpacing:D,wordSpacing:c,alignmentBaseline:s,dominantBaseline:m,textAnchor:d}),G&&(G.match(/rem/)?Object.assign(B,{fontSize:16*parseInt(G)}):Object.assign(B,{fontSize:parseInt(G)}));break}}var O;return B})(),style:{},source:(()=>{let B={};switch(M.nodeName){case"polygon":case"polyline":case"circle":case"ellipse":case"line":case"rect":case"foreignObject":break;case"image":M.base64&&Object.assign(B,{type:"image",image:{base64:M.base64}});break;case"text":case"tspan":M.textContent&&Object.assign(B,{type:"text",text:{textContent:M.textContent}})}return B})()};if(V.push(t),M.child){let B=J(M.child,t.id);V=[...V,...B]}}),V},X=(L,w,V,M)=>{L.querySelectorAll(":scope > *").forEach(t=>{if(["defs","script"].includes(t.nodeName))return;let B=[],y={};switch("use"===(z(t,y),y=Object.assign({},null!=w?w:{},y),y.nodeName)&&(y.href?z(M.querySelector(y.href),y):y["xlink:href"]&&z(M.querySelector(y["xlink:href"]),y)),y.nodeName){case"circle":case"ellipse":var $;if(null!==($=y.transform)&&void 0!==$&&$.match(/matrix\([^\)]+\)/)){var j,k;let m=parseFloat(null!==(j=y.x)&&void 0!==j?j:"0"),d=parseFloat(null!==(k=y.y)&&void 0!==k?k:"0");(u=>{if(u){var l;let r=(0,N.ml)({x:m,y:d},u);y.x=r.x,y.y=r.y,y.rotate=null!==(l=r.rotate)&&void 0!==l?l:null}})(y.transform),y.transform=null}break;case"text":{var I,v;if(null!==(I=y.transform)&&void 0!==I&&I.match(/matrix\([^\)]+\)/)){var p,o;let d=parseFloat(null!==(p=y.x)&&void 0!==p?p:"0"),u=parseFloat(null!==(o=y.y)&&void 0!==o?o:"0");(l=>{if(l){var r;let h=(0,N.ml)({x:d,y:u},l);y.x=h.x,y.y=h.y,y.rotate=null!==(r=h.rotate)&&void 0!==r?r:null}})(y.transform),y.transform=null}else if(null!==(v=y.transform)&&void 0!==v&&v.match(/translate\([^\)]+\)/)){var i,f,_,g,P;let d=parseFloat(null!==(i=y.x)&&void 0!==i?i:"0"),u=parseFloat(null!==(f=y.y)&&void 0!==f?f:"0");(l=null===(_=null!==(g=null===(P=y.transform)||void 0===P?void 0:P.match(/translate\([^\)]+\)/))&&void 0!==g?g:[])||void 0===_||null===(_=_.shift())||void 0===_?void 0:_.toString())&&(h=null==l||null===(r=l.replace(/[^0-9\-\.\,\ ]/g,""))||void 0===r||null===(r=r.replace(/\,/g," "))||void 0===r||null===(r=r.replace(/\s+/g," "))||void 0===r?void 0:r.split(" ")).length>=2&&(y.x=d+parseFloat(h[0]||"0"),y.y=u+parseFloat(h[1]||"0")),y.transform=null}let m=t.textContent;m&&Object.assign(y,{textContent:m}),!y.fill&&!y.stroke&&(y.fill="#000000");break}case"tspan":{var x;if(null!==(x=y.transform)&&void 0!==x&&x.match(/matrix\([^\)]+\)/)){var O,A;let d=parseFloat(null!==(O=y.x)&&void 0!==O?O:"0"),u=parseFloat(null!==(A=y.y)&&void 0!==A?A:"0");(l=>{if(l){let r=(0,N.ml)({x:d,y:u},l);y.x=r.x,y.y=r.y}})(y.transform),y.transform=null}else{var R,G,D,c;let d=parseFloat(null!==(R=y.x)&&void 0!==R?R:"0"),u=parseFloat(null!==(G=y.y)&&void 0!==G?G:"0");y.x=(0,F.z)(null!==(D=d+(null==w?void 0:w.x))&&void 0!==D?D:0,10),y.y=(0,F.z)(null!==(c=u+(null==w?void 0:w.y))&&void 0!==c?c:0,10)}let m=t.textContent;m&&Object.assign(y,{textContent:m}),!y.fill&&!y.stroke&&(y.fill="#000000");break}case"path":if(y.d){var s;let m=(0,N.Kf)(y.d,null!==(s=y.transform)&&void 0!==s&&s.match(/matrix/)?y.transform:"matrix(1 0 0 1 0 0)");Object.assign(y,{d:m}),y.transform=null}!y.fill&&!y.stroke&&(y.fill="#000000");break;case"image":{let m=y["xlink:href"]||y.href;null!=m&&m.match(/;base64,/)&&Object.assign(y,{base64:m});break}}var l,r,h;X(t,y,B,M),B.length&&Object.assign(y,{child:B}),V.push(y)})},z=(L,w)=>{if(L){if(["symbol"].includes(L.nodeName))return void z((L.querySelectorAll(":scope > *")||[])[0],w);w.nodeName=L.nodeName,[["x","y","width","height"],["x1","x2","y1","y2"],["rx","ry","r"],["cx","cy"],["fill","fill-opacity","fill-rule"],["stroke","stroke-opacity","stroke-width","stroke-miterlimit","stroke-linecap","stroke-linejoin","stroke-dasharray"],["d","points"],["font-family","font-weight","font-style","font-size","letter-spacing","word-spacing","alignment-baseline","dominant-baseline","text-anchor"],["transform","transform-origin"],["href","xlink:href"]].forEach(V=>{V.forEach(M=>{n(L,w,M)})})}},n=(L,w,V)=>{let M=L.getAttribute(V);if(M){let t={};t[V]=M.trim(),Object.assign(w,t)}},K=L=>{return L?"string"==typeof L?L.match(/in/)?(0,F.z)(96*parseFloat(null!==(w=L.replace(/[^0-9\.]/g,""))&&void 0!==w?w:"0"),1):(0,F.z)(parseFloat(null!==(V=L.replace(/[^0-9\.]/g,""))&&void 0!==V?V:"0"),1):"number"==typeof L?L:0:0;var w,V}},4114:(ie,Z,C)=>{C.d(Z,{Pe:()=>S,Tq:()=>N,XT:()=>E});const E=a=>!!a.match("^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$"),S=a=>!!a.match(/^rgba?/),N=a=>!!a.match(/^none|transparent$/)},9469:(ie,Z,C)=>{C.d(Z,{U:()=>N,o:()=>S});var E=C(5972);const S=a=>{var e,F,Y,W,J,X,z,n;a.params=a.params||{},a.params.page=a.params.page||1,a.params.limit=a.params.limit||1,(0,E.hm)({url:"api/Directory/SearchTreeList",params:{getby:null!==(e=a.params.userid)&&void 0!==e?e:null,directory_id:null!==(F=a.params.directory_id)&&void 0!==F?F:null,directory_pid:null!==(Y=a.params.directory_pid)&&void 0!==Y?Y:null,directory_title:null!==(W=a.params.directory_title)&&void 0!==W?W:null,active:null!==(J=a.params.active)&&void 0!==J?J:null,isdataowner:null!==(X=a.params.isdataowner)&&void 0!==X?X:null,sortfield:null!==(z=a.params.sortfield)&&void 0!==z?z:null,sorttype:null!==(n=a.params.sorttype)&&void 0!==n?n:null,posstart:(a.params.page-1)*a.params.limit,numofrow:a.params.limit},success:K=>{"function"==typeof a.callback&&a.callback(K.data)},error:K=>{"function"==typeof a.callback&&a.callback(),console.error(K)},loading:a.loading,loadingController:a.loadingController})},N=a=>{var e,F,Y,W,J,X;a.params=a.params||{},a.params.page=a.params.page||1,a.params.limit=a.params.limit||1,(0,E.hm)({url:"api/Directory/SearchTreeNode",params:{getby:null!==(e=a.params.userid)&&void 0!==e?e:null,directory_id:null!==(F=a.params.directory_id)&&void 0!==F?F:null,active:null!==(Y=a.params.active)&&void 0!==Y?Y:null,isdataowner:null!==(W=a.params.isdataowner)&&void 0!==W?W:null,sortfield:null!==(J=a.params.sortfield)&&void 0!==J?J:null,sorttype:null!==(X=a.params.sorttype)&&void 0!==X?X:null,posstart:(a.params.page-1)*a.params.limit,numofrow:a.params.limit},success:z=>{"function"==typeof a.callback&&a.callback(z.data)},error:z=>{"function"==typeof a.callback&&a.callback(),console.error(z)},loading:a.loading,loadingController:a.loadingController})}},6128:(ie,Z,C)=>{C.d(Z,{Wn:()=>S,lI:()=>a,mI:()=>N});var E=C(5972);function S(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,E.hm)({url:"api/Tags/Search",params:{getby:e.params.userid||null,tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:F=>{"function"==typeof e.callback&&e.callback(F.data||null)},error:F=>{"function"==typeof e.callback&&e.callback(),console.error(F)},loading:e.loading,loadingController:e.loadingController})}function N(e){e.params=e.params||{},(0,E.Ll)({url:"api/Tags/AddUpdate",params:{tags_id:e.params.tags_id||null,tags_pid:e.params.tags_pid||null,tags_key:e.params.tags_key||null,createdby:e.params.userid||null,modifiedby:e.params.userid||null},success:F=>{"function"==typeof e.callback&&e.callback(F.data||null)},error:F=>{"function"==typeof e.callback&&e.callback(),console.error(F)},loading:e.loading,loadingController:e.loadingController})}function a(e){e.params=e.params||{},(0,E.sj)({url:"api/Tags/Delete",params:{deleteby:e.params.userid||null,tags_id:e.params.tags_id||null},success:F=>{"function"==typeof e.callback&&e.callback(F.data||null)},error:F=>{"function"==typeof e.callback&&e.callback(),console.error(F)},loading:e.loading,loadingController:e.loadingController})}},9957:(ie,Z,C)=>{C.d(Z,{Y:()=>j});var E=C(467),S=C(5972),N=C(6081),a=C(4975),e=C(2635),F=C(5414),Y=C(7331),W=C(8405),J=C(1038),X=C(5807),z=C(2089),n=C(4438),K=C(6637),L=C(177),w=C(9417),V=C(9445),M=C(31);function t(k,I){if(1&k){const v=n.RV6();n.j41(0,"button",29),n.bIt("click",function(o){n.eBV(v);const i=n.XpG(2);return n.Njj(i.clearTopic(o))}),n.nrm(1,"ion-icon",30),n.k0s()}}function B(k,I){if(1&k){const v=n.RV6();n.j41(0,"button",29),n.bIt("click",function(o){n.eBV(v);const i=n.XpG(2);return n.Njj(i.clearCategory(o))}),n.nrm(1,"ion-icon",30),n.k0s()}}function y(k,I){if(1&k){const v=n.RV6();n.j41(0,"button",29),n.bIt("click",function(o){n.eBV(v);const i=n.XpG(2);return n.Njj(i.clearTemplate(o))}),n.nrm(1,"ion-icon",30),n.k0s()}}function $(k,I){if(1&k){const v=n.RV6();n.qex(0),n.j41(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11)(6,"div",12)(7,"b"),n.EFF(8),n.nI1(9,"translate"),n.k0s()(),n.j41(10,"input",13),n.bIt("change",function(o){n.eBV(v);const i=n.XpG();return n.Njj(i.changeBoardTitle(o))}),n.k0s()(),n.j41(11,"div",11)(12,"div",12)(13,"b"),n.EFF(14),n.nI1(15,"translate"),n.k0s()(),n.j41(16,"div",14),n.nrm(17,"input",15),n.j41(18,"div",16),n.DNE(19,t,2,0,"button",17),n.j41(20,"button",18),n.bIt("click",function(o){n.eBV(v);const i=n.XpG();return n.Njj(i.presentPopoverTopic(o))}),n.nrm(21,"ion-icon",19),n.k0s()()()(),n.j41(22,"div",11)(23,"div",12)(24,"b"),n.EFF(25),n.nI1(26,"translate"),n.k0s()(),n.j41(27,"div",14),n.nrm(28,"input",15),n.j41(29,"div",16),n.DNE(30,B,2,0,"button",17),n.j41(31,"button",18),n.bIt("click",function(o){n.eBV(v);const i=n.XpG();return n.Njj(i.presentPopoverCategory(o))}),n.nrm(32,"ion-icon",19),n.k0s()()()(),n.j41(33,"div",11)(34,"div",12)(35,"b"),n.EFF(36),n.nI1(37,"translate"),n.k0s()(),n.j41(38,"div",14),n.nrm(39,"input",15),n.j41(40,"div",16),n.DNE(41,y,2,0,"button",17),n.j41(42,"button",18),n.bIt("click",function(o){n.eBV(v);const i=n.XpG();return n.Njj(i.presentPopoverTemplate(o))}),n.nrm(43,"ion-icon",19),n.k0s()()()(),n.j41(44,"div",20)(45,"div",12)(46,"b"),n.EFF(47),n.nI1(48,"translate"),n.k0s()(),n.j41(49,"div",14)(50,"div",21)(51,"input",22),n.bIt("change",function(o){n.eBV(v);const i=n.XpG();return n.Njj(i.changeBoardCover(o))}),n.k0s(),n.nrm(52,"label",23),n.k0s()()()(),n.j41(53,"div",24)(54,"div",11)(55,"div",12)(56,"b"),n.EFF(57),n.nI1(58,"translate"),n.k0s()(),n.j41(59,"div",25)(60,"div",26),n.nrm(61,"ion-img",27),n.k0s()()()()(),n.j41(62,"div",11)(63,"div",12)(64,"b"),n.EFF(65),n.nI1(66,"translate"),n.k0s()(),n.j41(67,"ckeditor",28),n.mxI("ngModelChange",function(o){n.eBV(v);const i=n.XpG();return n.DH7(i.board.board_description,o)||(i.board.board_description=o),n.Njj(o)}),n.k0s()(),n.j41(68,"div",11)(69,"div",12)(70,"b"),n.EFF(71),n.nI1(72,"translate"),n.k0s()(),n.j41(73,"ckeditor",28),n.mxI("ngModelChange",function(o){n.eBV(v);const i=n.XpG();return n.DH7(i.board.board_content,o)||(i.board.board_content=o),n.Njj(o)}),n.k0s()()()(),n.bVm()}if(2&k){let v,p,o;const i=n.XpG();n.R7$(8),n.JRh(n.bMT(9,21,"LectureName")),n.R7$(2),n.Y8G("ngModel",i.board.board_title),n.R7$(4),n.JRh(n.bMT(15,23,"GradeLevel")),n.R7$(3),n.Y8G("value",null!==(v=i.board.topic_title)&&void 0!==v?v:""),n.R7$(2),n.Y8G("ngIf",i.board.topic_id),n.R7$(6),n.JRh(n.bMT(26,25,"Subject")),n.R7$(3),n.Y8G("value",null!==(p=i.board.category_title)&&void 0!==p?p:""),n.R7$(2),n.Y8G("ngIf",i.board.category_id),n.R7$(6),n.JRh(n.bMT(37,27,"BoardTemplate")),n.R7$(3),n.Y8G("value",null!==(o=i.board.template_title)&&void 0!==o?o:""),n.R7$(2),n.Y8G("ngIf",i.board.template_id),n.R7$(6),n.JRh(n.bMT(48,29,"Cover")),n.R7$(10),n.JRh(n.bMT(58,31,"Cover")),n.R7$(4),n.Y8G("src",i.fileurl||i.coverUrl||"assets/image/no-image.svg")("alt",i.board.board_title),n.R7$(4),n.JRh(n.bMT(66,33,"Introduce")),n.R7$(2),n.Y8G("editor",i.editorDescription),n.R50("ngModel",i.board.board_description),n.R7$(4),n.JRh(n.bMT(72,35,"Knowledge")),n.R7$(2),n.Y8G("editor",i.editorContent),n.R50("ngModel",i.board.board_content)}}let j=(()=>{var k;class I{constructor(p,o,i,f){this.modalController=p,this.popoverController=o,this.toastController=i,this.loadingController=f,this.b=0,this.editorDescription=X.m,this.editorContent=X.m,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var p=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,E.A)(function*(){p.appsettings=yield(0,S.AC)(),p.appsettings.madonvi&&(p.user=yield(0,e.Nk)(),p.readfileuploadurl=p.appsettings.readfileuploadurl||"",p.refreshData())})()}refreshData(){var p;(0,N.qU)({params:{userid:null===(p=this.user)||void 0===p?void 0:p.userid,board_id:this.b},callback:o=>{if((null==o?void 0:o.board_id)==this.b)return this.board=o,this.board.board_title=this.board.board_title+` - Copy #${this.board.board_id} (${Math.floor(999*Math.random())})`,void this.coverLoad();this.modalController.dismiss()}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var p=this;return(0,E.A)(function*(){if(!p.board.board_title)return void(0,F.c)(p.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(i=>{i.present()});let o=[];p.boardCover&&o.push(new Promise((i,f)=>{var _;(0,J.v)({params:{file:p.boardCover,subFolder:`board-cover/${null!==(_=p.board.board_id)&&void 0!==_?_:0}`,fileType:"image"},callback:g=>{var P;0==(null==g?void 0:g.ReturnCode)&&(p.board.cover=g.path+"/"+(null===(P=g.file)||void 0===P?void 0:P.name)),i(!0)}})})),Promise.all(o).then(i=>{var f;(0,a.Wb)({loadingController:p.loadingController,params:Object.assign({},p.board,{userid:null===(f=p.user)||void 0===f?void 0:f.userid}),callback:_=>{(0,F.c)(p.toastController,{},_).then(g=>{g.present()}),0==(null==_?void 0:_.returncode)&&p.modalController.dismiss({id:null==_?void 0:_.id,title:p.board.board_title},"confirm")}})})})()}presentPopoverTopic(p){var o=this;return(0,E.A)(function*(){const i=yield o.popoverController.create({component:Y.E,componentProps:{selectedId:o.board.topic_id,filter:{for:"board"}},event:p,dismissOnSelect:!1,animated:!1,side:"right"});i.onDidDismiss().then(f=>{var _,g;"confirm"==f.role&&Object.assign(o.board,{topic_id:null===(_=f.data)||void 0===_?void 0:_.topic_id,topic_title:null===(g=f.data)||void 0===g?void 0:g.topic_title})}),i.present()})()}clearTopic(p){Object.assign(this.board,{topic_id:null,topic_title:null})}changeTopic(p){this.board.topic_id=p}presentPopoverCategory(p){var o=this;return(0,E.A)(function*(){const i=yield o.popoverController.create({component:W.P,componentProps:{selectedId:o.board.category_id,filter:{for:"board"}},event:p,dismissOnSelect:!1,animated:!1,side:"right"});i.onDidDismiss().then(f=>{var _,g;"confirm"==f.role&&Object.assign(o.board,{category_id:null===(_=f.data)||void 0===_?void 0:_.category_id,category_title:null===(g=f.data)||void 0===g?void 0:g.category_title})}),i.present()})()}clearCategory(p){Object.assign(this.board,{category_id:null,category_title:null})}changeCategory(p){this.board.category_id=p}presentPopoverTemplate(p){var o=this;return(0,E.A)(function*(){const i=yield o.popoverController.create({component:z.B,componentProps:{selectedId:o.board.template_id,filter:{for:"board"}},event:p,dismissOnSelect:!1,animated:!1,side:"right"});i.onDidDismiss().then(f=>{var _,g;"confirm"==f.role&&Object.assign(o.board,{template_id:null===(_=f.data)||void 0===_?void 0:_.template_id,template_title:null===(g=f.data)||void 0===g?void 0:g.template_title})}),i.present()})()}clearTemplate(p){Object.assign(this.board,{template_id:null,template_title:null})}changeTemplate(p){this.board.template_id=p}changeBoardTitle(p){var o;this.board.board_title=null==p||null===(o=p.target)||void 0===o?void 0:o.value}changeBoardDescription(p){var o;this.board.board_description=null==p||null===(o=p.target)||void 0===o?void 0:o.value}changeBoardContent(p){var o;this.board.board_content=null==p||null===(o=p.target)||void 0===o?void 0:o.value}changeBoardCover(p){this.boardCover=void 0,p.target.files.length&&(this.boardCover=p.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}coverLoad(){var p,o,i,f,_,g,P,x,O,A,R;let G=[null!==(p=this.board)&&void 0!==p&&p.cover?`${null!==(o=this.appsettings.readfileuploadurl)&&void 0!==o?o:""}${null===(i=this.board)||void 0===i?void 0:i.cover}`:void 0,null!==(f=this.board)&&void 0!==f&&f.board_id?`${null!==(_=this.appsettings.readfileuploadurl)&&void 0!==_?_:""}${null!==(g=this.appsettings.boardpath)&&void 0!==g?g:""}${null===(P=this.board)||void 0===P?void 0:P.board_id}/cover.svg`:void 0,null!==(x=this.board)&&void 0!==x&&x.board_id?`${null!==(O=this.appsettings.readfileuploadurl)&&void 0!==O?O:""}${null!==(A=this.appsettings.boardpathv1)&&void 0!==A?A:""}${null===(R=this.board)||void 0===R?void 0:R.board_id}/cover.png`:void 0].filter(c=>!!c),D=c=>{if(!c)return;let s=new Image;s.onload=()=>{this.coverUrl=c},s.onerror=()=>{D(G.shift())},s.src=c};G.length&&D(G.shift())}}return(k=I).\u0275fac=function(p){return new(p||k)(n.rXU(K.W3),n.rXU(K.IE),n.rXU(K.K_),n.rXU(K.Xi))},k.\u0275cmp=n.VBU({type:k,selectors:[["app-modal-board-copy"]],inputs:{b:"b"},decls:16,vars:8,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[4,"ngIf"],[1,"container-fluid","h-100","py-3"],[1,"d-flex","w-100","h-100","flex-column"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"mb-1"],["type","text",1,"form-control",3,"change","ngModel"],[1,"input-group"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","chevron-down-outline"],[1,"form-group","d-none"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"col-lg-6","col-cover"],["onClick","document.getElementById('inputGroupFile03').click()",1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[3,"src","alt"],[1,"w-100",3,"ngModelChange","editor","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"]],template:function(p,o){1&p&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-button",0),n.bIt("click",function(){return o.save()}),n.j41(6,"ion-label"),n.EFF(7),n.nI1(8,"translate"),n.k0s()(),n.j41(9,"ion-buttons",1)(10,"ion-button",2),n.bIt("click",function(){return o.toggleFullScreen()}),n.nrm(11,"ion-icon",3),n.k0s(),n.j41(12,"ion-button",4),n.bIt("click",function(){return o.close()}),n.nrm(13,"ion-icon",5),n.k0s()()()(),n.j41(14,"ion-content"),n.DNE(15,$,74,37,"ng-container",6),n.k0s()),2&p&&(n.R7$(3),n.JRh(n.bMT(4,4,"CopyLecture")),n.R7$(4),n.JRh(n.bMT(8,6,"Save")),n.R7$(4),n.Y8G("src",o.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.R7$(4),n.Y8G("ngIf",o.board.board_id))},dependencies:[L.bT,w.me,w.BC,w.vS,K.Jm,K.QW,K.W9,K.eU,K.iq,K.KW,K.he,K.BC,K.ai,V.h,M.D9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.col-cover[_ngcontent-%COMP%]{max-width:485px}"]}),I})()},2807:(ie,Z,C)=>{C.d(Z,{M:()=>A});var E=C(467),S=C(5972),N=C(8671),a=C(5781),e=C(1038),F=C(2635),Y=C(4552),W=C(1607),J=C(4296),X=C(5414),z=C(8405),n=C(7331),K=C(7868),L=C(1400),w=C(1951),V=C(3675),M=C(4835),t=C(4438),B=C(6637),y=C(177),$=C(9417),j=C(31);function k(R,G){if(1&R){const D=t.RV6();t.j41(0,"button",13),t.bIt("click",function(){t.eBV(D);const s=t.XpG();return t.Njj(s.switchModal("ai-image"))}),t.j41(1,"div",41)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.nrm(5,"ion-icon",42),t.k0s()()}2&R&&(t.HbH("btn-light btn-with-ai"),t.R7$(3),t.JRh(t.bMT(4,3,"CreativityWithAI")))}function I(R,G){if(1&R){const D=t.RV6();t.j41(0,"button",13),t.bIt("click",function(){t.eBV(D);const s=t.XpG();return t.Njj(s.AI_recommend())}),t.j41(1,"div",41)(2,"span"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.nrm(5,"ion-icon",43),t.nI1(6,"translate"),t.k0s()()}2&R&&(t.HbH("btn-light"),t.R7$(3),t.JRh(t.bMT(4,4,"CreativityWithAI")),t.R7$(2),t.Y8G("title",t.bMT(6,6,"UpgradeTabcaProNow")))}function v(R,G){if(1&R&&t.eu8(0,44),2&R){t.XpG();const D=t.sdS(109);t.Y8G("ngTemplateOutlet",D)}}function p(R,G){if(1&R&&t.eu8(0,44),2&R){t.XpG();const D=t.sdS(111);t.Y8G("ngTemplateOutlet",D)}}function o(R,G){if(1&R){const D=t.RV6();t.j41(0,"button",45),t.bIt("click",function(s){t.eBV(D);const m=t.XpG();return t.Njj(m.clearTopic(s))}),t.nrm(1,"ion-icon",46),t.k0s()}}function i(R,G){if(1&R){const D=t.RV6();t.j41(0,"button",45),t.bIt("click",function(s){t.eBV(D);const m=t.XpG();return t.Njj(m.clearCategory(s))}),t.nrm(1,"ion-icon",46),t.k0s()}}function f(R,G){if(1&R){const D=t.RV6();t.j41(0,"button",45),t.bIt("click",function(s){t.eBV(D);const m=t.XpG();return t.Njj(m.clearDirectory(s))}),t.nrm(1,"ion-icon",46),t.k0s()}}function _(R,G){if(1&R&&(t.j41(0,"option",54),t.EFF(1),t.k0s()),2&R){const D=G.$implicit;t.Y8G("value",D.lookup_value),t.R7$(),t.JRh(D.lookup_title)}}function g(R,G){if(1&R&&(t.qex(0),t.j41(1,"option",52),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.DNE(4,_,2,2,"option",53),t.bVm()),2&R){const D=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,2,"SelectMediaType")),t.R7$(2),t.Y8G("ngForOf",D.v_mediatypes)}}function P(R,G){if(1&R){const D=t.RV6();t.j41(0,"div",11)(1,"div",17)(2,"div",18)(3,"label",19),t.EFF(4),t.nI1(5,"translate"),t.k0s()(),t.j41(6,"div",29)(7,"input",47),t.bIt("change",function(s){t.eBV(D);const m=t.XpG();return t.Njj(m.changeMediaFile(s))}),t.k0s(),t.j41(8,"label",48),t.EFF(9),t.nI1(10,"translate"),t.nI1(11,"translate"),t.k0s()()()(),t.j41(12,"div",11)(13,"div",17)(14,"div",18)(15,"label",19),t.EFF(16),t.nI1(17,"translate"),t.k0s()(),t.j41(18,"select",49),t.bIt("ngModelChange",function(s){t.eBV(D);const m=t.XpG();return t.Njj(m.changeMediaType(s))}),t.DNE(19,g,5,4,"ng-container",50),t.qex(20),t.j41(21,"option",51),t.EFF(22),t.nI1(23,"translate"),t.k0s(),t.bVm(),t.k0s()()()}if(2&R){let D,c;const s=t.XpG();t.R7$(4),t.JRh(t.bMT(5,6,"File")),t.R7$(5),t.JRh(s.mediaFiles.length?t.bMT(10,8,"Selected")+" "+s.mediaFiles.length+" "+t.bMT(11,10,"File"):(null!==(D=s.media.filepath)&&void 0!==D?D:"").split("/").pop()),t.R7$(7),t.JRh(t.bMT(17,12,"MediaType")),t.R7$(2),t.Y8G("ngModel",null!==(c=s.media.v_mediatype)&&void 0!==c?c:0),t.R7$(),t.Y8G("ngIf",s.mediaFiles.length<=1),t.R7$(3),t.JRh(t.bMT(23,14,"AutomaticallySelectsByFileType"))}}function x(R,G){if(1&R&&(t.j41(0,"option",54),t.EFF(1),t.k0s()),2&R){const D=G.$implicit;t.Y8G("value",D.lookup_value),t.R7$(),t.JRh(D.lookup_title)}}function O(R,G){if(1&R){const D=t.RV6();t.j41(0,"div",11)(1,"div",17)(2,"div",18)(3,"label",19),t.EFF(4),t.nI1(5,"translate"),t.k0s()(),t.j41(6,"input",55),t.bIt("ngModelChange",function(s){t.eBV(D);const m=t.XpG();return t.Njj(m.changeLinkShare(s))}),t.k0s()()(),t.j41(7,"div",11)(8,"div",17)(9,"div",18)(10,"label",19),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"select",49),t.bIt("ngModelChange",function(s){t.eBV(D);const m=t.XpG();return t.Njj(m.changeOssType(s))}),t.j41(14,"option",52),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.DNE(17,x,2,2,"option",53),t.k0s()()()}if(2&R){let D;const c=t.XpG();t.R7$(4),t.JRh(t.bMT(5,6,"Url")),t.R7$(2),t.Y8G("ngModel",c.media.link_share),t.R7$(5),t.JRh(t.bMT(12,8,"OssType")),t.R7$(2),t.Y8G("ngModel",null!==(D=c.media.v_osstype)&&void 0!==D?D:0),t.R7$(2),t.JRh(t.bMT(16,10,"SelectOssType")),t.R7$(2),t.Y8G("ngForOf",c.v_osstypes)}}let A=(()=>{var R;class G{constructor(c,s,m,d){this.modalController=c,this.toastController=s,this.loadingController=m,this.popoverController=d,this.filter={},this.media={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.fileurl="",this.coverUrl="",this.v_mediatypes=[],this.v_osstypes=[],this.mediaFiles=[]}ngOnInit(){var c=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),Object.assign(this.media,this.filter),(0,E.A)(function*(){c.appsettings=yield(0,S.AC)(),c.appsettings.madonvi&&(c.user=yield(0,F.Nk)(),c.readfileuploadurl=c.appsettings.readfileuploadurl||"",c.refreshData())})()}refreshData(){var c;(0,N.$)({params:{lookup_key:"v_mediatype"},callback:s=>{this.v_mediatypes=s||[]}}),(0,N.$)({params:{lookup_key:"v_osstype"},callback:s=>{this.v_osstypes=s||[]}}),this.membership||(0,K.EW)({params:{userid:null===(c=this.user)||void 0===c?void 0:c.userid,v_functionlimit:L.r.GenAITaoHinhAnh},callback:s=>{var m;this.membership={GenAITaoHinhAnh:(0,w.j)(null==s||null===(m=s.contents)||void 0===m?void 0:m.find(d=>d.v_functionlimit==L.r.GenAITaoHinhAnh))}}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}switchModal(c){return this.modalController.dismiss({modalName:c},"switch")}save(){var c=this;return(0,E.A)(function*(){let s=[];if(c.mediaCover&&s.push(new Promise((m,d)=>{(0,e.v)({params:{file:c.mediaCover,subFolder:"material/tabca",fileType:"image"},callback:u=>{var l;0==(null==u?void 0:u.ReturnCode)&&(c.media.cover=u.path+"/"+(null===(l=u.file)||void 0===l?void 0:l.name)),m(!0)}})})),c.isLink){if(c.media.v_mediatype=W.S.LINK,!c.media.link_share)return void(0,X.c)(c.toastController,{message:"Nh\u1eadp \u0111\u01b0\u1eddng d\u1eabn!"}).then(m=>{m.present()})}else if(!c.media.link_file){if(c.mediaFiles.length>=2){const m=yield c.loadingController.create({message:"\u0110ang t\u1ea3i..."});return m.present(),void c.recursiveUpload(d=>{d||m.dismiss()})}if(1!=c.mediaFiles.length)return void(0,X.c)(c.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y t\u1eadp tin t\u1ea3i l\xean!"}).then(m=>{m.present()});s.push(new Promise((m,d)=>{let u=c.mediaFiles.pop();(0,e.v)({params:{file:u,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:l=>{var r,h;0==(null==l?void 0:l.ReturnCode)?(c.media.filepath=l.path+"/"+(null===(r=l.file)||void 0===r?void 0:r.name),c.media.link_file=c.readfileuploadurl+l.path+"/"+(null===(h=l.file)||void 0===h?void 0:h.name),c.media.media_title||(c.media.media_title=l.name.replace(/.[a-zA-Z0-9]+$/,"")),c.media.v_mediatype||c.v_mediatypes.every(b=>{var T,U;return null===(T=b.lookup_note)||void 0===T||null===(T=T.replace(/\s+/g,""))||void 0===T||!T.split(",").includes(null===(U=l.file)||void 0===U?void 0:U.extension)||(c.media.v_mediatype=b.lookup_value,!1)}),"zip"==(null==l?void 0:l.fileTye)&&c.media.v_mediatype==W.S.SCORM?(0,e.o)({loadingController:c.loadingController,params:{pathFile:c.media.filepath},callback:b=>{null!=b&&b.imsmanifest?c.media.filepath_extract=null==b?void 0:b.imsmanifest:c.media.v_mediatype=W.S.ZIP,m(!0)}}):m(!0)):m(!0)}})}))}Promise.all(s).then(m=>{var d;(0,a.Rq)({loadingController:c.loadingController,params:Object.assign({},c.media,{userid:null===(d=c.user)||void 0===d?void 0:d.userid}),callback:u=>{(0,X.c)(c.toastController,{},u).then(l=>{l.present()}),0==(null==u?void 0:u.returncode)&&c.modalController.dismiss(null==u?void 0:u.id,"confirm")}})})})()}recursiveUpload(c){if(this.mediaFiles.length){let s={topic_id:this.media.topic_id,category_id:this.media.category_id,directory_id:this.media.directory_id},m=this.mediaFiles.pop();(0,e.v)({params:{file:m,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:d=>{var u,l,r;0==(null==d?void 0:d.ReturnCode)?(s.filepath=d.path+"/"+(null===(u=d.file)||void 0===u?void 0:u.name),s.link_file=this.readfileuploadurl+d.path+"/"+(null===(l=d.file)||void 0===l?void 0:l.name),s.media_title=d.name.replace(/.[a-zA-Z0-9]+$/,""),this.v_mediatypes.every(h=>{var b,T;return null===(b=h.lookup_note)||void 0===b||null===(b=b.replace(/\s+/g,""))||void 0===b||!b.split(",").includes(null===(T=d.file)||void 0===T?void 0:T.extension)||(s.v_mediatype=h.lookup_value,!1)}),(0,a.Rq)({params:Object.assign(s,{userid:null===(r=this.user)||void 0===r?void 0:r.userid}),callback:h=>{this.recursiveUpload(c)}})):this.recursiveUpload(c)}})}else c(!1),this.modalController.dismiss(null,"confirm")}presentPopoverTopic(c){var s=this;return(0,E.A)(function*(){const m=yield s.popoverController.create({component:n.E,componentProps:{selectedId:s.media.topic_id,filter:{for:"media"}},event:c,dismissOnSelect:!1,animated:!1,side:"right"});m.onDidDismiss().then(d=>{var u,l;"confirm"==d.role&&Object.assign(s.media,{topic_id:null===(u=d.data)||void 0===u?void 0:u.topic_id,topic_title:null===(l=d.data)||void 0===l?void 0:l.topic_title})}),m.present()})()}clearTopic(c){Object.assign(this.media,{topic_id:null,topic_title:null})}changeTopic(c){var s;this.media.topic_id=null!==(s=parseInt(c))&&void 0!==s?s:0}presentPopoverCategory(c){var s=this;return(0,E.A)(function*(){const m=yield s.popoverController.create({component:z.P,componentProps:{selectedId:s.media.category_id,filter:{for:"media"}},event:c,dismissOnSelect:!1,animated:!1,side:"right"});m.onDidDismiss().then(d=>{var u,l;"confirm"==d.role&&Object.assign(s.media,{category_id:null===(u=d.data)||void 0===u?void 0:u.category_id,category_title:null===(l=d.data)||void 0===l?void 0:l.category_title})}),m.present()})()}clearCategory(c){Object.assign(this.media,{category_id:null,category_title:null})}changeCategory(c){var s;this.media.category_id=null!==(s=parseInt(c))&&void 0!==s?s:0}presentPopoverDirectory(c){var s=this;return(0,E.A)(function*(){const m=yield s.popoverController.create({component:V._,componentProps:{selectedId:s.media.directory_id,filter:{for:"media"}},event:c,dismissOnSelect:!1,animated:!1,side:"right"});m.onDidDismiss().then(d=>{var u,l;"confirm"==d.role&&Object.assign(s.media,{directory_id:null===(u=d.data)||void 0===u?void 0:u.directory_id,directory_title:null===(l=d.data)||void 0===l?void 0:l.directory_title})}),m.present()})()}clearDirectory(c){Object.assign(this.media,{directory_id:null,directory_title:null})}changeDirectory(c){var s;this.media.directory_id=null!==(s=parseInt(c))&&void 0!==s?s:0}changeMediaTitle(c){var s;this.media.media_title=null==c||null===(s=c.target)||void 0===s?void 0:s.value}changeMediaDescription(c){var s;this.media.media_description=null==c||null===(s=c.target)||void 0===s?void 0:s.value}changeMediaContent(c){var s;this.media.media_content=null==c||null===(s=c.target)||void 0===s?void 0:s.value}changeMediaType(c){this.media.v_mediatype=c?parseInt(c):0}changeOssType(c){this.media.v_osstype=c?parseInt(c):0}changeLinkShare(c){this.media.link_share=c,(0,Y.nh)(c)?this.media.v_osstype=J.N.YOUTUBE:(0,Y.Ho)(c)&&(this.media.v_osstype=J.N.PHET)}changeMediaFile(c){this.mediaFiles.length=0;for(let d=0,u=null===(s=c.target)||void 0===s?void 0:s.files.length;d<u;d++){var s;this.mediaFiles.push(c.target.files[d])}if(1==this.mediaFiles.length){let{fileName:d,fileExtension:u}=(0,Y.XG)(this.mediaFiles[0].name);var m;if(this.media.media_title=d,this.media.v_mediatype=void 0,this.v_mediatypes.every(l=>{var r;return null===(r=l.lookup_note)||void 0===r||null===(r=r.replace(/\s+/g,""))||void 0===r||!r.split(",").includes(u)||(this.media.v_mediatype=l.lookup_value,!1)}),!this.mediaCover)switch(null!==(m=this.media.v_mediatype)&&void 0!==m?m:0){case W.S.IMAGE:this.fileurl=URL.createObjectURL(this.mediaFiles[0]);break;case W.S.VIDEO:(()=>{let l=this.mediaFiles[0],r=new FileReader;r.onload=()=>{let h=document.createElement("canvas"),b=document.createElement("video");b.addEventListener("loadedmetadata",()=>{setTimeout(()=>{var T;h.width=b.videoWidth,h.height=b.videoHeight,null===(T=h.getContext("2d"))||void 0===T||T.drawImage(b,0,0,b.videoWidth,b.videoHeight),((q,ee)=>{let oe=(q.match(/^data:([^;]+);/)||"")[1];fetch(q).then(H=>H.arrayBuffer()).then(H=>new File([H],ee,{type:oe})).then(H=>{this.mediaCover=H,this.fileurl=URL.createObjectURL(H)})})(h.toDataURL("image/png"),`${l.name}.png`),h.remove(),b.pause(),b.remove()},1e3)}),b.preload="metadata",b.muted=!0,b.playsInline=!0,b.src=r.result,b.play()},r.readAsDataURL(l)})()}}}changeMediaCover(c){var s;if(this.mediaCover=void 0,c.target.files.length&&(this.mediaCover=c.target.files[0]),!this.mediaCover)return;let u,{fileExtension:d}=(0,Y.XG)(null===(s=this.mediaCover)||void 0===s?void 0:s.name);d&&(this.v_mediatypes.every(l=>{var r;return null===(r=l.lookup_note)||void 0===r||null===(r=r.replace(/\s+/g,""))||void 0===r||!r.split(",").includes(d)||(u=l.lookup_value,!1)}),this.mediaCover&&u==W.S.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaCover)))}changeIsLink(c){this.isLink=c}useDefaultCover(){var c=this;return(0,E.A)(function*(){c.mediaCover=void 0,c.fileurl="",c.media.cover=void 0,c.coverUrl="",c.coverLoad()})()}coverLoad(){var c,s,m;let d=[null!==(c=this.media)&&void 0!==c&&c.cover?`${null!==(s=this.appsettings.readfileuploadurl)&&void 0!==s?s:""}${null===(m=this.media)||void 0===m?void 0:m.cover}`:void 0].filter(l=>!!l),u=l=>{if(!l)return;let r=new Image;r.onload=()=>{this.coverUrl=l},r.onerror=()=>{u(d.shift())},r.src=l};d.length&&u(d.shift())}AI_recommend(){var c=this;return(0,E.A)(function*(){(0,M.QB)(c.modalController)})()}}return(R=G).\u0275fac=function(c){return new(c||R)(t.rXU(B.W3),t.rXU(B.K_),t.rXU(B.Xi),t.rXU(B.IE))},R.\u0275cmp=t.VBU({type:R,selectors:[["app-modal-media-add"]],inputs:{filter:"filter",membership:"membership"},decls:112,vars:57,consts:[["typefile",""],["typelink",""],["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"container-fluid","py-3"],[1,"row"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"form-group"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["type","button",1,"btn",3,"class"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","chevron-down-outline"],["type","text",1,"form-control",3,"change","ngModel"],["rows","6",1,"form-control",3,"change","ngModel"],[1,"col-auto"],[1,"form-group","d-none"],[1,"custom-file"],["type","file","id","inputGroupFile02",1,"custom-file-input",3,"change"],["for","inputGroupFile02",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[1,"placeholder"],[1,"d-flex","flex-wrap","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"placeholder-text"],["onClick","document.getElementById('inputGroupFile02').click()",1,"btn","btn-primary"],[1,"my-1"],[1,"text-lowercase"],[1,"btn","btn-outline-primary",3,"click"],[1,"d-flex","align-items-center","justify-content-center"],["src","../../../assets/icon-svg/magic.svg",1,"ml-2"],["src","../../../assets/image/tabca-pro-2.svg",1,"icon-tabca-pro","fs-22","ml-3","my-0",3,"title"],[3,"ngTemplateOutlet"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"],["type","file","id","inputGroupFile01","multiple","",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],[1,"custom-select",3,"ngModelChange","ngModel"],[4,"ngIf"],["value","","selected",""],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","https://",1,"form-control",3,"ngModelChange","ngModel"]],template:function(c,s){if(1&c){const m=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-button",2),t.bIt("click",function(){return t.eBV(m),t.Njj(s.save())}),t.j41(6,"ion-label"),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"ion-buttons",3)(10,"ion-button",4),t.bIt("click",function(){return t.eBV(m),t.Njj(s.toggleFullScreen())}),t.nrm(11,"ion-icon",5),t.k0s(),t.j41(12,"ion-button",6),t.bIt("click",function(){return t.eBV(m),t.Njj(s.close())}),t.nrm(13,"ion-icon",7),t.k0s()()()(),t.j41(14,"ion-content")(15,"div",8)(16,"div",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"button",13),t.bIt("click",function(){return t.eBV(m),t.Njj(s.changeIsLink(!1))}),t.EFF(21),t.nI1(22,"translate"),t.k0s(),t.j41(23,"button",13),t.bIt("click",function(){return t.eBV(m),t.Njj(s.changeIsLink(!0))}),t.EFF(24),t.nI1(25,"translate"),t.k0s(),t.DNE(26,k,6,5,"button",14)(27,I,7,8),t.k0s()(),t.DNE(28,v,1,1,"ng-container",15)(29,p,1,1,"ng-container",15),t.k0s()(),t.j41(30,"div",9)(31,"div",16)(32,"div",11)(33,"div",17)(34,"div",18)(35,"label",19),t.EFF(36),t.nI1(37,"translate"),t.k0s()(),t.nrm(38,"input",20),t.j41(39,"div",21),t.DNE(40,o,2,0,"button",22),t.j41(41,"button",23),t.bIt("click",function(u){return t.eBV(m),t.Njj(s.presentPopoverTopic(u))}),t.nrm(42,"ion-icon",24),t.k0s()()()(),t.j41(43,"div",11)(44,"div",17)(45,"div",18)(46,"label",19),t.EFF(47),t.nI1(48,"translate"),t.k0s()(),t.nrm(49,"input",20),t.j41(50,"div",21),t.DNE(51,i,2,0,"button",22),t.j41(52,"button",23),t.bIt("click",function(u){return t.eBV(m),t.Njj(s.presentPopoverCategory(u))}),t.nrm(53,"ion-icon",24),t.k0s()()()(),t.j41(54,"div",11)(55,"div",17)(56,"div",18)(57,"label",19),t.EFF(58),t.nI1(59,"translate"),t.k0s()(),t.nrm(60,"input",20),t.j41(61,"div",21),t.DNE(62,f,2,0,"button",22),t.j41(63,"button",23),t.bIt("click",function(u){return t.eBV(m),t.Njj(s.presentPopoverDirectory(u))}),t.nrm(64,"ion-icon",24),t.k0s()()()(),t.j41(65,"div",11)(66,"div",17)(67,"div",18)(68,"label",19),t.EFF(69),t.nI1(70,"translate"),t.k0s()(),t.j41(71,"input",25),t.bIt("change",function(u){return t.eBV(m),t.Njj(s.changeMediaTitle(u))}),t.k0s()()(),t.j41(72,"div",11)(73,"div",17)(74,"div",18)(75,"label",19),t.EFF(76),t.nI1(77,"translate"),t.k0s()(),t.j41(78,"textarea",26),t.bIt("change",function(u){return t.eBV(m),t.Njj(s.changeMediaDescription(u))}),t.k0s()()()(),t.j41(79,"div",27)(80,"div",28)(81,"div",17)(82,"div",18)(83,"label",19),t.EFF(84),t.nI1(85,"translate"),t.k0s()(),t.j41(86,"div",29)(87,"input",30),t.bIt("change",function(u){return t.eBV(m),t.Njj(s.changeMediaCover(u))}),t.k0s(),t.j41(88,"label",31),t.EFF(89),t.k0s()()()(),t.j41(90,"div",11)(91,"div",32)(92,"div",33),t.nrm(93,"img",5),t.j41(94,"div",34)(95,"div",35)(96,"div")(97,"div",36)(98,"button",37),t.EFF(99),t.nI1(100,"translate"),t.k0s(),t.j41(101,"div",38)(102,"small",39),t.EFF(103),t.nI1(104,"translate"),t.k0s()(),t.j41(105,"button",40),t.bIt("click",function(){return t.eBV(m),t.Njj(s.useDefaultCover())}),t.EFF(106),t.nI1(107,"translate"),t.k0s()()()()()()()()()()()(),t.DNE(108,P,24,16,"ng-template",null,0,t.C5r)(110,O,18,12,"ng-template",null,1,t.C5r)}if(2&c){let m,d,u;t.R7$(3),t.JRh(t.bMT(4,31,"AddMaterial")),t.R7$(4),t.JRh(t.bMT(8,33,"Add")),t.R7$(4),t.Y8G("src",s.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.R7$(9),t.HbH(s.isLink?"btn-light":"btn-primary"),t.R7$(),t.JRh(t.bMT(22,35,"File")),t.R7$(2),t.HbH(s.isLink?"btn-primary":"btn-light"),t.R7$(),t.JRh(t.bMT(25,37,"Link")),t.R7$(2),t.vxM(26,null!=s.membership&&s.membership.GenAITaoHinhAnh?26:27),t.R7$(2),t.Y8G("ngIf",!s.isLink),t.R7$(),t.Y8G("ngIf",s.isLink),t.R7$(7),t.JRh(t.bMT(37,39,"GradeLevel")),t.R7$(2),t.Y8G("value",null!==(m=s.media.topic_title)&&void 0!==m?m:""),t.R7$(2),t.Y8G("ngIf",s.media.topic_id),t.R7$(7),t.JRh(t.bMT(48,41,"Subject")),t.R7$(2),t.Y8G("value",null!==(d=s.media.category_title)&&void 0!==d?d:""),t.R7$(2),t.Y8G("ngIf",s.media.category_id),t.R7$(7),t.JRh(t.bMT(59,43,"Directory")),t.R7$(2),t.Y8G("value",null!==(u=s.media.directory_title)&&void 0!==u?u:""),t.R7$(2),t.Y8G("ngIf",s.media.directory_id),t.R7$(7),t.JRh(t.bMT(70,45,"MaterialName")),t.R7$(2),t.Y8G("ngModel",s.media.media_title),t.R7$(5),t.JRh(t.bMT(77,47,"Description")),t.R7$(2),t.Y8G("ngModel",s.media.media_description),t.R7$(6),t.JRh(t.bMT(85,49,"Cover")),t.R7$(5),t.JRh(null==s.mediaCover?null:s.mediaCover.name),t.R7$(4),t.Y8G("src",s.fileurl||s.coverUrl||"assets/image-png/media-default.jpg",t.B4B),t.R7$(6),t.JRh(t.bMT(100,51,"ChooseFile")),t.R7$(4),t.JRh(t.bMT(104,53,"Or")),t.R7$(3),t.JRh(t.bMT(107,55,"UseDefaultCover"))}},dependencies:[y.Sq,y.bT,y.T3,$.xH,$.y7,$.me,$.wz,$.BC,$.vS,B.Jm,B.QW,B.W9,B.eU,B.iq,B.he,B.BC,B.ai,j.D9],styles:['.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.btn-group[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;box-shadow:none}.btn-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff;border-color:#5359e6;background-color:#5359e6}.btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{color:#333;border-color:#ced4da;background-color:#e9f9ff}.embed-cover[_ngcontent-%COMP%]{width:424px;max-width:100%;border:1px dashed var(--ion-color-primary-shade)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:none;width:100%;height:100%}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{line-height:0;font-size:40px}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{line-height:14px;font-size:12px;color:#333}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px;color:#333c}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:1.75rem;padding:0 .75rem;border-radius:4px;text-align:center;font-size:.8rem}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%] + .placeholder-text[_ngcontent-%COMP%]{margin-top:.25rem}.embed-cover[_ngcontent-%COMP%]:hover   img[src][_ngcontent-%COMP%]:not([src=""]) + .placeholder[_ngcontent-%COMP%]{display:block;position:absolute;top:0;left:0;background:#fffc}']}),G})()},6103:(ie,Z,C)=>{C.d(Z,{t:()=>m});var E=C(2505),S=C(8671),N=C(6128),a=C(5446),e=C(4438),F=C(6637),Y=C(177),W=C(31);const J=()=>[],X=d=>({$implicit:d});function z(d,u){if(1&d&&e.eu8(0,23),2&d){e.XpG();const l=e.sdS(26);e.Y8G("ngTemplateOutlet",l)}}function n(d,u){if(1&d&&(e.j41(0,"ion-accordion",24)(1,"ion-item",25)(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"div",26),e.eu8(6,23),e.k0s()()),2&d){e.XpG();const l=e.sdS(28);e.R7$(3),e.JRh(e.bMT(4,2,"MediaType")),e.R7$(3),e.Y8G("ngTemplateOutlet",l)}}function K(d,u){if(1&d&&(e.j41(0,"ion-accordion",27)(1,"ion-item",25)(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"div",26),e.eu8(6,23),e.k0s()()),2&d){e.XpG();const l=e.sdS(30);e.R7$(3),e.JRh(e.bMT(4,2,"Tag")),e.R7$(3),e.Y8G("ngTemplateOutlet",l)}}function L(d,u){if(1&d&&(e.j41(0,"ion-accordion",28)(1,"ion-item",25)(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"div",26),e.eu8(6,23),e.k0s()()),2&d){e.XpG();const l=e.sdS(32);e.R7$(3),e.JRh(e.bMT(4,2,"GradeLevel")),e.R7$(3),e.Y8G("ngTemplateOutlet",l)}}function w(d,u){if(1&d&&(e.j41(0,"ion-accordion",29)(1,"ion-item",25)(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"div",26),e.eu8(6,23),e.k0s()()),2&d){e.XpG();const l=e.sdS(36);e.R7$(3),e.JRh(e.bMT(4,2,"Subject")),e.R7$(3),e.Y8G("ngTemplateOutlet",l)}}function V(d,u){if(1&d){const l=e.RV6();e.j41(0,"div",35)(1,"div",36),e.nrm(2,"ion-icon",37),e.j41(3,"ion-label"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"button",38),e.bIt("click",function(h){e.eBV(l);const b=e.XpG(2);return e.Njj(b.clearFilterTopic(h))}),e.nrm(7,"ion-icon",39),e.k0s()()()}if(2&d){let l;const r=e.XpG(2);e.R7$(4),e.JRh(null!==(l=r.filter.topic_title)&&void 0!==l?l:e.bMT(5,1,"GradeLevel"))}}function M(d,u){if(1&d){const l=e.RV6();e.j41(0,"div",35)(1,"div",36),e.nrm(2,"ion-icon",40),e.j41(3,"ion-label"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"button",38),e.bIt("click",function(h){e.eBV(l);const b=e.XpG(2);return e.Njj(b.clearFilterCategory(h))}),e.nrm(7,"ion-icon",39),e.k0s()()()}if(2&d){let l;const r=e.XpG(2);e.R7$(4),e.JRh(null!==(l=r.filter.category_title)&&void 0!==l?l:e.bMT(5,1,"Subject"))}}function t(d,u){if(1&d){const l=e.RV6();e.j41(0,"div",35)(1,"div",36),e.nrm(2,"ion-icon",41),e.j41(3,"ion-label"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"button",38),e.bIt("click",function(h){e.eBV(l);const b=e.XpG(2);return e.Njj(b.clearFilterTags(h))}),e.nrm(7,"ion-icon",39),e.k0s()()()}if(2&d){let l;const r=e.XpG(2);e.R7$(4),e.JRh(null!==(l=r.filter.tags_key)&&void 0!==l?l:e.bMT(5,1,"Tag"))}}function B(d,u){if(1&d){const l=e.RV6();e.j41(0,"div",35)(1,"div",36),e.nrm(2,"ion-icon",42),e.j41(3,"ion-label"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"button",38),e.bIt("click",function(h){e.eBV(l);const b=e.XpG(2);return e.Njj(b.clearFilterMediaType(h,b.filter.v_mediatype))}),e.nrm(7,"ion-icon",39),e.k0s()()()}if(2&d){let l;const r=e.XpG(2);e.R7$(4),e.JRh(null!==(l=r.filter.v_mediatype_title)&&void 0!==l?l:e.bMT(5,1,"MediaType"))}}function y(d,u){if(1&d){const l=e.RV6();e.j41(0,"div",35)(1,"div",36),e.nrm(2,"ion-icon",42),e.j41(3,"ion-label"),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.j41(6,"button",38),e.bIt("click",function(h){const b=e.eBV(l).$implicit,T=e.XpG(2);return e.Njj(T.clearFilterMediaType(h,b.v_mediatype))}),e.nrm(7,"ion-icon",39),e.k0s()()()}if(2&d){let l;const r=u.$implicit;e.R7$(4),e.JRh(null!==(l=r.v_mediatype_title)&&void 0!==l?l:e.bMT(5,1,"MediaType"))}}function $(d,u){if(1&d){const l=e.RV6();e.j41(0,"div",35)(1,"div",36),e.nrm(2,"ion-icon",43),e.j41(3,"ion-label"),e.EFF(4),e.k0s(),e.j41(5,"button",38),e.bIt("click",function(h){e.eBV(l);const b=e.XpG(2);return e.Njj(b.clearSearch(h))}),e.nrm(6,"ion-icon",39),e.k0s()()()}if(2&d){const l=e.XpG(2);e.R7$(4),e.JRh(l.filter.search)}}function j(d,u){if(1&d&&(e.j41(0,"div",30)(1,"div",31)(2,"b"),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"div",32),e.DNE(6,V,8,3,"div",33)(7,M,8,3,"div",33)(8,t,8,3,"div",33)(9,B,8,3,"div",33)(10,y,8,3,"div",34)(11,$,7,1,"div",33),e.k0s()(),e.nrm(12,"hr")),2&d){let l;const r=e.XpG();e.R7$(3),e.Lme("",e.bMT(4,8,"AppliedFilters")," (",r.counter(),")"),e.R7$(3),e.Y8G("ngIf",r.filter.topic_id),e.R7$(),e.Y8G("ngIf",r.filter.category_id),e.R7$(),e.Y8G("ngIf",r.filter.tags_id),e.R7$(),e.Y8G("ngIf",r.filter.v_mediatype),e.R7$(),e.Y8G("ngForOf",null!==(l=r.filter.v_mediatypes)&&void 0!==l?l:e.lJ4(10,J)),e.R7$(),e.Y8G("ngIf",r.filter.search)}}function k(d,u){if(1&d){const l=e.RV6();e.qex(0),e.j41(1,"ion-item")(2,"ion-checkbox",47),e.bIt("ionChange",function(h){e.eBV(l);const b=e.XpG(2);return e.Njj(b.changeMediaType(h))}),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.k0s()(),e.bVm()}if(2&d){const l=u.$implicit,r=e.XpG(2);e.R7$(2),e.Y8G("value",l.lookup_value)("checked",r.checkedMediaType(l.lookup_value)),e.R7$(2),e.JRh(l.lookup_title)}}function I(d,u){if(1&d){const l=e.RV6();e.j41(0,"ion-list",44)(1,"ion-item")(2,"ion-checkbox",45),e.bIt("ionChange",function(h){e.eBV(l);const b=e.XpG();return e.Njj(b.changeMediaType(h))}),e.k0s(),e.j41(3,"ion-label"),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.DNE(6,k,5,3,"ng-container",46),e.k0s()}if(2&d){const l=e.XpG();e.R7$(2),e.Y8G("value",0),e.R7$(2),e.JRh(e.bMT(5,3,"All")),e.R7$(2),e.Y8G("ngForOf",l.v_mediatypes)}}function v(d,u){if(1&d){const l=e.RV6();e.qex(0),e.j41(1,"button",49),e.bIt("click",function(){const h=e.eBV(l).$implicit,b=e.XpG(2);return e.Njj(b.applyFilterTags({tags_id:h.tags_id,tags_key:h.tags_key}))}),e.EFF(2),e.k0s(),e.bVm()}if(2&d){const l=u.$implicit,r=e.XpG(2);e.R7$(),e.HbH(l.tags_id==r.filter.tags_id?"btn-warning":"btn-outline-secondary"),e.BMQ("data-id",l.tags_id),e.R7$(),e.JRh(l.tags_key)}}function p(d,u){if(1&d&&(e.j41(0,"div",48),e.DNE(1,v,3,4,"ng-container",46),e.k0s()),2&d){const l=e.XpG();e.R7$(),e.Y8G("ngForOf",l.filterTags(l.tagss))}}function o(d,u){if(1&d&&e.eu8(0,52),2&d){const l=u.$implicit;e.XpG(2);const r=e.sdS(34);e.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",e.eq3(2,X,l))}}function i(d,u){if(1&d&&(e.j41(0,"div",50)(1,"ion-list",44)(2,"ul"),e.DNE(3,o,1,4,"ng-container",51),e.k0s()()()),2&d){const l=e.XpG();e.R7$(3),e.Y8G("ngForOf",l.filterTopic(l.topics))}}function f(d,u){1&d&&e.nrm(0,"ion-icon",59)}function _(d,u){1&d&&e.nrm(0,"ion-icon",60)}function g(d,u){if(1&d&&e.eu8(0,52),2&d){const l=u.$implicit;e.XpG(3);const r=e.sdS(34);e.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",e.eq3(2,X,l))}}function P(d,u){if(1&d&&(e.qex(0),e.j41(1,"ul"),e.DNE(2,g,1,4,"ng-container",51),e.k0s(),e.bVm()),2&d){const l=e.XpG().$implicit,r=e.XpG();e.R7$(2),e.Y8G("ngForOf",r.filterTopic(r.topics,l.topic_id))}}function x(d,u){if(1&d){const l=e.RV6();e.j41(0,"li")(1,"ion-item",53),e.bIt("click",function(){const h=e.eBV(l).$implicit,b=e.XpG();return e.Njj(b.applyFilterTopic({topic_id:h.topic_id,topic_title:h.topic_title}))}),e.j41(2,"ion-button",54),e.bIt("click",function(h){const b=e.eBV(l).$implicit,T=e.XpG();return e.Njj(T.expandTopic(h,b.topic_id,b.isexpanded))}),e.DNE(3,f,1,0,"ion-icon",55)(4,_,1,0,"ion-icon",56),e.k0s(),e.j41(5,"ion-label",57),e.EFF(6),e.k0s()(),e.DNE(7,P,3,1,"ng-container",58),e.k0s()}if(2&d){const l=u.$implicit,r=e.XpG();e.R7$(),e.HbH(l.topic_id==r.filter.topic_id?"actived":""),e.R7$(),e.BMQ("style",l.ishaschild?"visibility:unset":"visibility:hidden",e.$dS),e.R7$(),e.Y8G("ngIf",!l.isexpanded),e.R7$(),e.Y8G("ngIf",l.isexpanded),e.R7$(),e.Y8G("title",l.topic_title),e.R7$(),e.JRh(l.topic_title),e.R7$(),e.Y8G("ngIf",l.isexpanded)}}function O(d,u){if(1&d&&e.eu8(0,52),2&d){const l=u.$implicit;e.XpG(2);const r=e.sdS(38);e.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",e.eq3(2,X,l))}}function A(d,u){if(1&d&&(e.j41(0,"div",61)(1,"ion-list",44)(2,"ul"),e.DNE(3,O,1,4,"ng-container",51),e.k0s()()()),2&d){const l=e.XpG();e.R7$(3),e.Y8G("ngForOf",l.filterCategory(l.categorys))}}function R(d,u){1&d&&e.nrm(0,"ion-icon",59)}function G(d,u){1&d&&e.nrm(0,"ion-icon",60)}function D(d,u){if(1&d&&e.eu8(0,52),2&d){const l=u.$implicit;e.XpG(3);const r=e.sdS(38);e.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",e.eq3(2,X,l))}}function c(d,u){if(1&d&&(e.qex(0),e.j41(1,"ul"),e.DNE(2,D,1,4,"ng-container",51),e.k0s(),e.bVm()),2&d){const l=e.XpG().$implicit,r=e.XpG();e.R7$(2),e.Y8G("ngForOf",r.filterCategory(r.categorys,l.category_id))}}function s(d,u){if(1&d){const l=e.RV6();e.j41(0,"li")(1,"ion-item",53),e.bIt("click",function(){const h=e.eBV(l).$implicit,b=e.XpG();return e.Njj(b.applyFilterCategory({category_id:h.category_id,category_title:h.category_title}))}),e.j41(2,"ion-button",54),e.bIt("click",function(h){const b=e.eBV(l).$implicit,T=e.XpG();return e.Njj(T.expandCategory(h,b.category_id,b.isexpanded))}),e.DNE(3,R,1,0,"ion-icon",55)(4,G,1,0,"ion-icon",56),e.k0s(),e.j41(5,"ion-label",57),e.EFF(6),e.k0s()(),e.DNE(7,c,3,1,"ng-container",58),e.k0s()}if(2&d){const l=u.$implicit,r=e.XpG();e.R7$(),e.HbH(l.category_id==r.filter.category_id?"actived":""),e.R7$(),e.BMQ("style",l.ishaschild?"visibility:unset":"visibility:hidden",e.$dS),e.R7$(),e.Y8G("ngIf",!l.isexpanded),e.R7$(),e.Y8G("ngIf",l.isexpanded),e.R7$(),e.Y8G("title",l.category_title),e.R7$(),e.JRh(l.category_title),e.R7$(),e.Y8G("ngIf",l.isexpanded)}}let m=(()=>{var d;class u{constructor(r){this.modalController=r,this.filter={},this.topics=[],this.categorys=[],this.tagss=[],this.v_mediatypes=[],this.accordionValue=[]}ngOnInit(){var r;null!==(r=this.filter.v_mediatypes)&&void 0!==r&&r.length&&this.accordionValue.push("accordion-mediatype"),this.filter.tags_id&&this.accordionValue.push("accordion-tags"),this.filter.topic_id&&this.accordionValue.push("accordion-topic"),this.filter.category_id&&this.accordionValue.push("accordion-category"),this.accordionValue.length||this.accordionValue.push("accordion-mediatype"),(0,S.$)({params:{lookup_key:"v_mediatype"},callback:h=>{this.v_mediatypes=h||[]}}),this.refreshDataTags(),this.refreshDataTopic(),this.refreshDataCategory()}clean(){this.filter={}}close(){this.modalController.dismiss(null,"cancel")}apply(){this.modalController.dismiss(this.filter,"confirm")}counter(){let r=0;return this.filter.search&&(r+=1),this.filter.topic_id&&(r+=1),this.filter.category_id&&(r+=1),this.filter.tags_id&&(r+=1),this.filter.v_mediatypes&&(r+=this.filter.v_mediatypes.length),r}changeMediaType(r){let{value:h,checked:b}=r.detail;if(0==h)return void(this.filter.v_mediatypes=b?this.v_mediatypes.map(q=>({v_mediatype:q.lookup_value,v_mediatype_title:q.lookup_title})):[]);let T=this.v_mediatypes.find(q=>q.lookup_value==h);var U;b?this.filter.v_mediatypes?this.filter.v_mediatypes.find(q=>q.v_mediatype==h)||this.filter.v_mediatypes.push({v_mediatype:null==T?void 0:T.lookup_value,v_mediatype_title:null==T?void 0:T.lookup_title}):this.filter.v_mediatypes=[{v_mediatype:null==T?void 0:T.lookup_value,v_mediatype_title:null==T?void 0:T.lookup_title}]:this.filter.v_mediatypes=null===(U=this.filter.v_mediatypes)||void 0===U?void 0:U.filter(q=>q.v_mediatype!=h)}checkedMediaType(r){var h;return!(null===(h=this.filter.v_mediatypes)||void 0===h||!h.find(b=>b.v_mediatype==r))}clearSearch(r){Object.assign(this.filter,{search:null})}clearFilterMediaType(r,h){this.changeMediaType({detail:{value:h,checked:!1}})}refreshDataTags(r){this.loadTags(void 0,r,!0)}loadTags(r,h,b){var T;(0,N.Wn)({params:{userid:null===(T=this.user)||void 0===T?void 0:T.userid,tags_pid:r,sortfield:"createddate",sorttype:"asc",page:1,limit:-1},callback:U=>{var q,ee;this.tagss=b?null!==(q=null==U?void 0:U.tags)&&void 0!==q?q:[]:this.tagss.concat(null!==(ee=null==U?void 0:U.tags)&&void 0!==ee?ee:[]),h&&h()}})}filterTags(r,h){return r.filter(h?b=>b.tags_pid==h:b=>null==b.tags_pid||0==b.tags_pid)}expandTags(r,h,b){r.preventDefault(),r.stopPropagation(),this.tagss.filter(T=>T.tags_id==h).forEach(T=>{T.isexpanded=!b,T.isloadedchild||(T.isloadedchild=!0,this.loadTags(T.tags_id))})}applyFilterTags(r){Object.assign(this.filter,this.filter.tags_id==r.tags_id?{tags_id:null,tags_key:null}:r)}clearFilterTags(r){Object.assign(this.filter,{tags_id:null,tags_key:null})}refreshDataTopic(r){this.loadTopic(void 0,r,!0)}loadTopic(r,h,b){var T;(0,a.At)({params:{userid:null===(T=this.user)||void 0===T?void 0:T.userid,topic_pid:r,page:1,limit:-1},callback:U=>{this.topics=b?null!=U?U:[]:this.topics.concat(null!=U?U:[]),h&&h()}})}filterTopic(r,h){return r.filter(h?b=>b.topic_pid==h:b=>null==b.topic_pid||0==b.topic_pid)}expandTopic(r,h,b){r.preventDefault(),r.stopPropagation(),this.topics.filter(T=>T.topic_id==h).forEach(T=>{T.isexpanded=!b,T.isloadedchild||(T.isloadedchild=!0,this.loadTopic(T.topic_id))})}applyFilterTopic(r){Object.assign(this.filter,this.filter.topic_id==r.topic_id?{topic_id:null,topic_title:null}:r)}clearFilterTopic(r){Object.assign(this.filter,{topic_id:null,topic_title:null})}refreshDataCategory(r){this.loadCategory(void 0,r,!0)}loadCategory(r,h,b){var T;(0,E.BI)({params:{userid:null===(T=this.user)||void 0===T?void 0:T.userid,category_pid:r,page:1,limit:-1},callback:U=>{this.categorys=b?null!=U?U:[]:this.categorys.concat(null!=U?U:[]),h&&h()}})}filterCategory(r,h){return r.filter(h?b=>b.category_pid==h:b=>null==b.category_pid||0==b.category_pid)}expandCategory(r,h,b){r.preventDefault(),r.stopPropagation(),this.categorys.filter(T=>T.category_id==h).forEach(T=>{T.isexpanded=!b,T.isloadedchild||(T.isloadedchild=!0,this.loadCategory(T.category_id))})}applyFilterCategory(r){Object.assign(this.filter,this.filter.category_id==r.category_id?{category_id:null,category_title:null}:r)}clearFilterCategory(r){Object.assign(this.filter,{category_id:null,category_title:null})}}return(d=u).\u0275fac=function(r){return new(r||d)(e.rXU(F.W3))},d.\u0275cmp=e.VBU({type:d,selectors:[["app-modal-media-filter"]],inputs:{user:"user",filter:"filter"},decls:39,vars:16,consts:[["filtered",""],["mediatype",""],["tags",""],["topic",""],["topicNode",""],["category",""],["categoryNode",""],["mode","md"],["slot","end","color","dark",1,"btn-clean",3,"click"],["slot","end"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"m-0"],[1,"ion-no-padding"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"multiple","value"],["value","accordion-mediatype",4,"ngIf"],["value","accordion-tags",4,"ngIf"],["value","accordion-topic",4,"ngIf"],["value","accordion-category",4,"ngIf"],["lines","none","color","tertiary","button","","detail","false",3,"click"],["slot","start"],["slot","end","src","../../../assets/icon-svg/arrow-right.svg"],[3,"ngTemplateOutlet"],["value","accordion-mediatype"],["slot","header"],["slot","content"],["value","accordion-tags"],["value","accordion-topic"],["value","accordion-category"],[1,"p-3"],[1,"mb-2"],[1,"list-filter","clearfix"],["class","item-filter float-left",4,"ngIf"],["class","item-filter float-left",4,"ngFor","ngForOf"],[1,"item-filter","float-left"],[1,"d-flex","align-items-center"],["src","../../../assets/icon-svg/dashboard/topic.svg"],[3,"click"],["name","close-outline"],["src","../../../assets/icon-svg/dashboard/category.svg"],["src","../../../assets/icon-svg/dashboard/tag.svg"],["name","ticket-outline"],["name","search-outline"],["lines","none"],["mode","md","slot","start",3,"ionChange","value"],[4,"ngFor","ngForOf"],["mode","md","slot","start",3,"ionChange","value","checked"],[1,"list-tags","px-3","mb-3"],[1,"btn",3,"click"],[1,"tree-topic"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline",4,"ngIf"],["name","caret-down-outline",4,"ngIf"],[3,"title"],[4,"ngIf"],["name","caret-forward-outline"],["name","caret-down-outline"],[1,"tree-category"]],template:function(r,h){if(1&r){const b=e.RV6();e.j41(0,"ion-header",7)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-label",8),e.bIt("click",function(){return e.eBV(b),e.Njj(h.clean())}),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"ion-buttons",9)(9,"ion-button",10),e.bIt("click",function(){return e.eBV(b),e.Njj(h.close())}),e.nrm(10,"ion-icon",11),e.k0s()()()(),e.nrm(11,"hr",12),e.j41(12,"ion-content",13),e.DNE(13,z,1,1,"ng-container",14),e.j41(14,"ion-accordion-group",15),e.DNE(15,n,7,4,"ion-accordion",16)(16,K,7,4,"ion-accordion",17)(17,L,7,4,"ion-accordion",18)(18,w,7,4,"ion-accordion",19),e.k0s()(),e.j41(19,"ion-footer")(20,"ion-item",20),e.bIt("click",function(){return e.eBV(b),e.Njj(h.apply())}),e.j41(21,"ion-label",21),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.nrm(24,"ion-icon",22),e.k0s()(),e.DNE(25,j,13,11,"ng-template",null,0,e.C5r)(27,I,7,5,"ng-template",null,1,e.C5r)(29,p,2,1,"ng-template",null,2,e.C5r)(31,i,4,1,"ng-template",null,3,e.C5r)(33,x,8,8,"ng-template",null,4,e.C5r)(35,A,4,1,"ng-template",null,5,e.C5r)(37,s,8,8,"ng-template",null,6,e.C5r)}2&r&&(e.R7$(3),e.JRh(e.bMT(4,10,"Filter")),e.R7$(3),e.JRh(e.bMT(7,12,"ClearAll")),e.R7$(7),e.Y8G("ngIf",h.filter.topic_id||h.filter.category_id||h.filter.tags_id||h.filter.v_mediatype||(null==h.filter.v_mediatypes?null:h.filter.v_mediatypes.length)||h.filter.search),e.R7$(),e.Y8G("multiple",!0)("value",h.accordionValue),e.R7$(),e.Y8G("ngIf",h.v_mediatypes.length),e.R7$(),e.Y8G("ngIf",h.tagss.length),e.R7$(),e.Y8G("ngIf",h.topics.length),e.R7$(),e.Y8G("ngIf",h.categorys.length),e.R7$(4),e.JRh(e.bMT(23,14,"Apply")))},dependencies:[Y.Sq,Y.bT,Y.T3,F.xk,F.YH,F.Jm,F.QW,F.eY,F.W9,F.M0,F.eU,F.iq,F.uz,F.he,F.nf,F.BC,F.ai,F.hB,W.D9],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}ion-header[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]:after{display:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:40px;margin-left:5px}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]{cursor:pointer;margin-right:1rem}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{margin:0}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 50px;text-transform:uppercase}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:27px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;line-height:20px}ion-accordion[_ngcontent-%COMP%]{font-size:14px}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{text-transform:uppercase}ion-accordion[_ngcontent-%COMP%]   [slot=content][_ngcontent-%COMP%]{padding:0}.tree-topic[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]{position:relative}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.list-filter[_ngcontent-%COMP%]   .item-filter[_ngcontent-%COMP%]{max-width:100%;height:36px;margin:4px 16px 4px 0;border-radius:18px;border:1px solid #E75969;color:#e75969}.list-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 .5rem 0 .75rem;stroke:#e75969}.list-filter[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{max-width:72%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;margin:0 2px;border-radius:50%;line-height:0;vertical-align:middle;text-align:center;outline:none;box-shadow:none;background-color:transparent;color:#1f1f39}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;font-size:20px}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eee}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-right:1rem;display:inline-block;vertical-align:middle}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;stroke:#1abdff}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;color:#4d4f60}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:24px;vertical-align:middle;line-height:0}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#1abdff}.list-tags[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;min-height:40px;padding:0 1rem;margin:.5rem 1rem .5rem 0;border-radius:8px;line-height:0;font-size:1rem;vertical-align:middle;text-align:center;outline:none;box-shadow:none!important}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]{color:var(--color-active, #333);background-color:var(--background-active, #E5F4FF);border-color:var(--background-active, #E5F4FF)}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]:hover{color:#000}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{padding:0;color:#000;background-color:#ececec;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ddd}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.list-tags[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;width:120px;vertical-align:middle;color:#333;background-color:#ececec;border-color:#ececec;outline:none;box-shadow:none!important}"]}),u})()},3355:(ie,Z,C)=>{C.d(Z,{j:()=>a});var E=C(4438),S=C(6637),N=C(31);let a=(()=>{var e;class F{constructor(W){this.popoverController=W,this.message={TitleConfirm:"",TextConfirm:"",TextCancel:""}}ngOnInit(){}cancel(){this.popoverController.dismiss(this.selectedId,"cancel")}confirm(){this.popoverController.dismiss(this.selectedId,"confirm")}}return(e=F).\u0275fac=function(W){return new(W||e)(E.rXU(S.IE))},e.\u0275cmp=E.VBU({type:e,selectors:[["app-popover-confirm"]],inputs:{selectedId:"selectedId",message:"message"},decls:12,vars:9,consts:[[1,"menu-confirm"],[1,"text-center","p-3"],["role","group",1,"w-100","btn-group","btn-group-sm"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(W,J){1&W&&(E.j41(0,"div",0)(1,"div",1)(2,"small"),E.EFF(3),E.nI1(4,"translate"),E.k0s()(),E.j41(5,"div",2)(6,"button",3),E.bIt("click",function(){return J.cancel()}),E.EFF(7),E.nI1(8,"translate"),E.k0s(),E.j41(9,"button",4),E.bIt("click",function(){return J.confirm()}),E.EFF(10),E.nI1(11,"translate"),E.k0s()()()),2&W&&(E.R7$(3),E.JRh(E.bMT(4,3,J.message.TitleConfirm)),E.R7$(4),E.JRh(E.bMT(8,5,J.message.TextCancel)),E.R7$(3),E.JRh(E.bMT(11,7,J.message.TextConfirm)))},dependencies:[N.D9],styles:[".menu-confirm[_ngcontent-%COMP%]{border-top:3px solid #5F6CE1}"]}),F})()},3675:(ie,Z,C)=>{C.d(Z,{_:()=>I});var E=C(467),S=C(9469),N=C(2635),a=C(4438),e=C(6637),F=C(177),Y=C(31);const W=v=>({$implicit:v});function J(v,p){1&v&&a.eu8(0)}function X(v,p){1&v&&(a.j41(0,"ion-content")(1,"div",6)(2,"div",7),a.nrm(3,"ion-spinner",8),a.k0s()()())}function z(v,p){1&v&&a.eu8(0)}function n(v,p){if(1&v&&a.DNE(0,z,1,0,"ng-container",5),2&v){const o=a.XpG(),i=a.sdS(6),f=a.sdS(8);a.Y8G("ngIf",!(null!=o.directorys&&o.directorys.length))("ngIfThen",i)("ngIfElse",f)}}function K(v,p){1&v&&(a.j41(0,"div",9)(1,"small",10),a.EFF(2),a.nI1(3,"translate"),a.k0s()()),2&v&&(a.R7$(2),a.JRh(a.bMT(3,1,"DataNotFound")))}function L(v,p){if(1&v&&a.eu8(0,13),2&v){const o=p.$implicit;a.XpG(2);const i=a.sdS(10);a.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",a.eq3(2,W,o))}}function w(v,p){if(1&v&&(a.j41(0,"div",11)(1,"ul"),a.DNE(2,L,1,4,"ng-container",12),a.k0s()()),2&v){const o=a.XpG();a.R7$(2),a.Y8G("ngForOf",o.filterDirectory(o.directorys))}}function V(v,p){1&v&&a.nrm(0,"ion-icon",16)}function M(v,p){1&v&&a.nrm(0,"ion-spinner",19)}function t(v,p){1&v&&a.nrm(0,"ion-icon",20)}function B(v,p){if(1&v&&(a.j41(0,"ion-badge",21),a.EFF(1),a.k0s()),2&v){const o=a.XpG().$implicit;a.R7$(),a.JRh(o.total_board)}}function y(v,p){if(1&v&&(a.j41(0,"ion-badge",21),a.EFF(1),a.k0s()),2&v){const o=a.XpG().$implicit;a.R7$(),a.JRh(o.total_media)}}function $(v,p){if(1&v&&a.eu8(0,13),2&v){const o=p.$implicit;a.XpG(3);const i=a.sdS(10);a.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",a.eq3(2,W,o))}}function j(v,p){if(1&v&&(a.qex(0),a.j41(1,"ul"),a.DNE(2,$,1,4,"ng-container",12),a.k0s(),a.bVm()),2&v){const o=a.XpG().$implicit,i=a.XpG();a.R7$(2),a.Y8G("ngForOf",i.filterDirectory(i.directorys,o.directory_id))}}function k(v,p){if(1&v){const o=a.RV6();a.j41(0,"li")(1,"ion-item",14),a.bIt("click",function(){const f=a.eBV(o).$implicit,_=a.XpG();return a.Njj(_.filterChange(f.directory_id))}),a.j41(2,"ion-button",15),a.bIt("click",function(f){const _=a.eBV(o).$implicit,g=a.XpG();return a.Njj(g.expandDirectory(f,_.directory_id,_.isexpanded))}),a.DNE(3,V,1,0,"ion-icon",16)(4,M,1,0)(5,t,1,0),a.k0s(),a.j41(6,"ion-label"),a.EFF(7),a.k0s(),a.DNE(8,B,2,1,"ion-badge",17)(9,y,2,1,"ion-badge",17),a.k0s(),a.DNE(10,j,3,1,"ng-container",18),a.k0s()}if(2&v){const o=p.$implicit,i=a.XpG();a.R7$(),a.BMQ("color",o.directory_id==i.selectedId?"primary":""),a.R7$(),a.BMQ("style",o.ishaschild?"visibility:unset":"visibility:hidden",a.$dS),a.R7$(),a.vxM(3,o.isexpanded?o.loading?4:5:3),a.R7$(4),a.JRh(o.directory_title),a.R7$(),a.Y8G("ngIf","board"==i.filter.for&&o.total_board),a.R7$(),a.Y8G("ngIf","media"==i.filter.for&&o.total_media),a.R7$(),a.Y8G("ngIf",o.isexpanded)}}let I=(()=>{var v;class p{constructor(i){this.popoverController=i,this.selectedId=0,this.filter={},this.response={loading:!0},this.directorys=[]}ngOnInit(){var i=this;(0,E.A)(function*(){i.user=yield(0,N.Nk)(),i.loadDirectory()})()}loadDirectory(i){var f;(0,S.o)({loading:_=>{this.response.loading=_,i&&(i.loading=_)},params:{userid:null===(f=this.user)||void 0===f?void 0:f.userid,directory_pid:null==i?void 0:i.directory_id,isdataowner:this.filter.isdataowner,page:1,limit:-1},callback:_=>{var g;this.directorys=this.directorys.concat(_||[]),this.selectedId&&!this.directorys.find(P=>P.directory_id==this.selectedId)&&(0,S.U)({params:{userid:null===(g=this.user)||void 0===g?void 0:g.userid,directory_id:this.selectedId,page:1,limit:-1},callback:P=>{let x=P||[];this.directorys=this.directorys.concat(x),x.map(O=>O.directory_pid).filter((O,A,R)=>R.indexOf(O)==A).forEach(O=>{this.directorys.filter(A=>A.directory_id==O).forEach(A=>{A.isexpanded=!0,A.isloadedchild=!0})})}})}})}filterDirectory(i,f){return i.filter(f?_=>_.directory_pid==f:_=>null==_.directory_pid||0==_.directory_pid)}expandDirectory(i,f,_){i.preventDefault(),i.stopPropagation(),this.directorys.filter(g=>g.directory_id==f).forEach(g=>{g.isexpanded=!_,g.isloadedchild||(g.isloadedchild=!0,this.loadDirectory(g))})}filterChange(i){this.popoverController.dismiss(this.directorys.find(f=>f.directory_id==i),"confirm")}}return(v=p).\u0275fac=function(i){return new(i||v)(a.rXU(e.IE))},v.\u0275cmp=a.VBU({type:v,selectors:[["app-popover-directory"]],inputs:{selectedId:"selectedId",filter:"filter"},decls:11,vars:3,consts:[["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[4,"ngIf","ngIfThen","ngIfElse"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-directory","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","chevron-down-outline"],["color","medium",4,"ngIf"],[4,"ngIf"],["color","dark"],["name","chevron-up-outline"],["color","medium"]],template:function(i,f){if(1&i&&a.DNE(0,J,1,0,"ng-container",5)(1,X,4,0,"ng-template",null,0,a.C5r)(3,n,1,3,"ng-template",null,1,a.C5r)(5,K,4,3,"ng-template",null,2,a.C5r)(7,w,3,1,"ng-template",null,3,a.C5r)(9,k,11,7,"ng-template",null,4,a.C5r),2&i){const _=a.sdS(2),g=a.sdS(4);a.Y8G("ngIf",!(null!=f.directorys&&f.directorys.length)&&!1!==f.response.loading)("ngIfThen",_)("ngIfElse",g)}},dependencies:[F.Sq,F.bT,F.T3,e.In,e.Jm,e.W9,e.iq,e.uz,e.he,e.w2,Y.D9],styles:["ion-content[_ngcontent-%COMP%]{width:320px;max-width:100%}.menu-directory[_ngcontent-%COMP%]{width:320px;max-height:480px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),p})()},7161:(ie,Z,C)=>{C.d(Z,{$e:()=>j,A0:()=>y,Cn:()=>p,KJ:()=>B,M7:()=>V,O0:()=>I,W1:()=>$,j7:()=>M,sA:()=>k,uD:()=>v,vO:()=>t});var E=C(467),S=C(2527),N=C.n(S),a=C(6611),e=C(4975),F=C(1038),Y=C(1312),W=C(2837),J=C(5120),X=C(5970),z=C(7873),n=C(1026),K=C(4552),L=C(8047),w=C(1171);const V=(o,i,f)=>{let _=null!=i?i:g=>console.log(g);(0,Y.oG)({accept:".lvb"},g=>{(0,F.v)({loadingController:f,params:{file:g[0],subFolder:"temp/import-lvb",fileType:"lvb"},callback:P=>{var x,O;0==(null==P?void 0:P.ReturnCode)?(x=x=>{var O;o.board_id?(0,e.kk)({loadingController:f,params:{userid:o.userid,board_id:o.board_id,filepath:P.path+"/"+(null===(O=P.file)||void 0===O?void 0:O.name)},callback:A=>{A&&(A.id=o.board_id),_(A)}}):_(x)},o.board_id?x():(0,e.R$)({loadingController:f,params:{userid:o.userid,board_title:(null===(O=P.name)||void 0===O?void 0:O.replace(/(.lvb)+$/,""))+` (${Math.floor(999*Math.random())})`},callback:A=>{0==(null==A?void 0:A.returncode)&&(o.board_id=null==A?void 0:A.id),x(A)}})):_({returncode:null==P?void 0:P.ReturnCode,returnmsg:null==P?void 0:P.ReturnName})}})})},M=(o,i,f)=>{(0,e.Dc)({params:{userid:o.userid,board_id:o.board_id},callback:(_,g)=>{0==(null==_?void 0:_.returncode)&&N()(`${null==g?void 0:g.readfileuploadurl}${null==_?void 0:_.token}`),i&&i(_)},loadingController:f})},t=(o,i,f)=>{(0,e.Re)({params:{userid:o.userid,board_id:o.board_id},callback:(_,g)=>{0==(null==_?void 0:_.returncode)&&N()(`${null==g?void 0:g.readfileuploadurl}${null==_?void 0:_.token}`),i&&i(_)},loadingController:f})},B=(o,i,f)=>{(0,e.wt)({params:{userid:o.userid,board_id:o.board_id},callback:(_,g)=>{0==(null==_?void 0:_.returncode)&&N()(`${null==g?void 0:g.readfileuploadurl}${null==_?void 0:_.token}`),i&&i(_)},loadingController:f})},y=(o,i)=>{let f=null!=i?i:_=>console.log(_);(0,Y.oG)({accept:".json, application/json"},_=>{var g=new FileReader;g.onload=()=>{if(g.result){let x,P=JSON.parse(g.result.toString());P&&!P.modules?x=(0,W.v)(P):"icdtV2"==(null==P?void 0:P.modules)&&(x=P),x&&(a.L.dataSource=x,a.L.data.openSlide())}f()},g.readAsText(_[0])})},$=(o,i)=>{let f=null!=i?i:_=>console.log(_);(0,Y.oG)({accept:".svg",multiple:o.multiple},_=>{let g=[];for(let x=0,O=_.length;x<O;x++)g.push(_[x]);let P=x=>{if(x){let O=new FileReader;O.onload=()=>{var A,R,G;const c=(new DOMParser).parseFromString(null!==(A=null===(R=O.result)||void 0===R?void 0:R.toString())&&void 0!==A?A:"","image/svg+xml");let s=(0,J.C)(c.documentElement,[]);s.name=null===(G=x.name)||void 0===G?void 0:G.replace(/\.[a-zA-Z0-9]+/,""),a.L.data.tryReplaceSlide(a.L.data.slideId,1,s),a.L.screen.zoomTo="fit",(0,w.U2)((0,L.d)(JSON.stringify(s))),P(g.shift())},O.onerror=()=>{P(g.shift())},O.readAsText(x)}else f()};P(g.shift())})},j=function(){var o=(0,E.A)(function*(i){var f,_,g,P,x,O,A,R;let G=1e12+i.slide.id,D=window.document.createElement("div");D.style.display="none",window.document.body.appendChild(D);let c=window.document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS(null,"viewBox",`${null===(f=i.slide.svg)||void 0===f?void 0:f.viewBox.x} ${null===(_=i.slide.svg)||void 0===_?void 0:_.viewBox.y} ${null===(g=i.slide.svg)||void 0===g?void 0:g.viewBox.width} ${null===(P=i.slide.svg)||void 0===P?void 0:P.viewBox.height}`),c.setAttribute("id",G.toString()),c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");let s=(0,X.RY)(z.F.BACKGROUND_GROUP,"g",void 0,c);(0,X.I6)(s,i.slide),D.appendChild(c),(0,n.t)(i.slide,G),((r,h,b,T)=>{let U=window.document.createElementNS("http://www.w3.org/2000/svg","g");U.setAttribute("clip-path","url(#clip0_0355_973_775)"),c.querySelectorAll(":scope > *").forEach(ee=>{U.appendChild(ee)}),c.appendChild(U);let q=window.document.createElementNS("http://www.w3.org/2000/svg","defs");q.innerHTML=`<clipPath id="clip0_0355_973_775"><rect x="${null===(r=i.slide.svg)||void 0===r?void 0:r.viewBox.x}" y="${null===(h=i.slide.svg)||void 0===h?void 0:h.viewBox.y}" width="${null===(b=i.slide.svg)||void 0===b?void 0:b.viewBox.width}" height="${null===(T=i.slide.svg)||void 0===T?void 0:T.viewBox.height}" fill="white"/></clipPath>`,c.appendChild(q)})(),c.querySelectorAll(".hide-on-viewer").forEach(r=>r.remove());let m=document.createElementNS("http://www.w3.org/2000/svg","style");m.type="text/css";let d="\n    svg {\n        font-family: 'Roboto';\n    }\n\n    svg foreignObject h1,\n    svg foreignObject h2,\n    svg foreignObject h3 {\n        margin: 20px 0 10px;\n    }\n\n    svg foreignObject h4,\n    svg foreignObject h5,\n    svg foreignObject h6 {\n        margin: 10px 0 10px;\n    }\n\n    svg foreignObject p {\n        margin: 0 0 10px;\n    }\n\n    svg .hide {\n        display: none;\n    }\n    ".replace(/\s+/g," "),u=["Roboto",...(0,L.d)(JSON.stringify(i.slide))];var r,h,b;d+=(yield(0,w._K)(u)),m.textContent=d,c.appendChild(m),r='<?xml version="1.0" encoding="utf-8"?>\n'+(null!==(x=c.outerHTML)&&void 0!==x?x:"").replace(/(<img|<img[^>]+)>/g,"$1/>").replace(/(<br|<br[^>]+)>/g,"$1/>").replace(/\&nbsp\;/g," "),h=`${null!==(O=(0,Y._Y)(null!==(A=null!==(R=i.slide.name)&&void 0!==R?R:i.slide.code)&&void 0!==A?A:i.slide.id))&&void 0!==O?O:G}.svg`,b="image/svg+xml",N()(new File([r],h,{type:b}),h,b),D.remove()});return function(f){return o.apply(this,arguments)}}(),k=(o,i,f)=>{},I=(o,i,f)=>{},v=(o,i)=>{let f=new FileReader;f.onload=()=>{var _,g,P,x,O,A,R,G,D;const s=(new DOMParser).parseFromString(null!==(_=null===(g=f.result)||void 0===g?void 0:g.toString())&&void 0!==_?_:"","image/svg+xml");let m=(0,J.C)(s.documentElement,[]),d=(null!==(P=null==i?void 0:i.x)&&void 0!==P?P:0)-(null!==(x=null===(O=m.svg)||void 0===O?void 0:O.viewBox.width)&&void 0!==x?x:0)/2,u=(null!==(A=null==i?void 0:i.y)&&void 0!==A?A:0)-(null!==(R=null===(G=m.svg)||void 0===G?void 0:G.viewBox.height)&&void 0!==R?R:0)/2;null===(D=m.svg)||void 0===D||D.nodes.forEach(l=>{l.size.x+=d,l.size.y+=u,a.L.data.node=l}),(0,w.U2)((0,L.d)(JSON.stringify(m)))},f.readAsText(o)},p=function(){var o=(0,E.A)(function*(i){var f,_,g,P,x,O,A,R,G,D,c,s;let m=JSON.parse(JSON.stringify(i.slide)),d=1e12+m.id,u=window.document.createElement("div");u.style.display="none",window.document.body.appendChild(u);let l=window.document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttributeNS(null,"viewBox",`${null===(f=m.svg)||void 0===f?void 0:f.viewBox.x} ${null===(_=m.svg)||void 0===_?void 0:_.viewBox.y} ${null===(g=m.svg)||void 0===g?void 0:g.viewBox.width} ${null===(P=m.svg)||void 0===P?void 0:P.viewBox.height}`),l.setAttributeNS(null,"width",(null!==(x=null===(O=m.svg)||void 0===O?void 0:O.viewBox.width)&&void 0!==x?x:1080).toString()),l.setAttributeNS(null,"height",(null!==(A=null===(R=m.svg)||void 0===R?void 0:R.viewBox.height)&&void 0!==A?A:1080).toString()),l.setAttribute("id",d.toString()),l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),(null!==(G=m.svg)&&void 0!==G&&null!==(G=G.background)&&void 0!==G&&G.path||null!==(D=m.svg)&&void 0!==D&&null!==(D=D.background)&&void 0!==D&&D.url)&&(m.svg.background.base64=yield new Promise((ee,oe)=>{var H,Q,te,ne;(0,K.W6)((null!==(H=m.svg)&&void 0!==H&&null!==(H=H.background)&&void 0!==H&&H.path?(null===(Q=a.L.config)||void 0===Q?void 0:Q.readfileuploadurl)+(null===(te=m.svg)||void 0===te||null===(te=te.background)||void 0===te?void 0:te.path):null===(ne=m.svg)||void 0===ne||null===(ne=ne.background)||void 0===ne?void 0:ne.url)||"",de=>{ee(de)})}));let r=function(){var ee=(0,E.A)(function*(oe){var H;let Q=null===(H=m.svg)||void 0===H?void 0:H.nodes[oe];var te,ne;Q&&((null!==(te=Q.source)&&void 0!==te&&null!==(te=te.image)&&void 0!==te&&te.path||null!==(ne=Q.source)&&void 0!==ne&&null!==(ne=ne.image)&&void 0!==ne&&ne.url)&&(Q.source.image.base64=yield new Promise((de,_e)=>{var le,ce,ae,re;(0,K.W6)((null!=Q&&null!==(le=Q.source)&&void 0!==le&&null!==(le=le.image)&&void 0!==le&&le.path?(null===(ce=a.L.config)||void 0===ce?void 0:ce.readfileuploadurl)+(null==Q||null===(ae=Q.source)||void 0===ae||null===(ae=ae.image)||void 0===ae?void 0:ae.path):null==Q||null===(re=Q.source)||void 0===re||null===(re=re.image)||void 0===re?void 0:re.url)||"",se=>{de(se)})})),yield r(oe+1))});return function(H){return ee.apply(this,arguments)}}();null!==(c=m.svg)&&void 0!==c&&null!==(c=c.nodes)&&void 0!==c&&c.length&&(yield r(0));let h=(0,X.RY)(z.F.BACKGROUND_GROUP,"g",void 0,l);(0,X.I6)(h,m),u.appendChild(l),(0,n.t)(m,d),((ee,oe,H,Q)=>{let te=window.document.createElementNS("http://www.w3.org/2000/svg","g");te.setAttribute("clip-path","url(#clip0_0355_973_775)"),l.querySelectorAll(":scope > *").forEach(de=>{te.appendChild(de)}),l.appendChild(te);let ne=window.document.createElementNS("http://www.w3.org/2000/svg","defs");ne.innerHTML=`<clipPath id="clip0_0355_973_775"><rect x="${null===(ee=i.slide.svg)||void 0===ee?void 0:ee.viewBox.x}" y="${null===(oe=i.slide.svg)||void 0===oe?void 0:oe.viewBox.y}" width="${null===(H=i.slide.svg)||void 0===H?void 0:H.viewBox.width}" height="${null===(Q=i.slide.svg)||void 0===Q?void 0:Q.viewBox.height}" fill="white"/></clipPath>`,l.appendChild(ne)})(),l.querySelectorAll(".hide-on-viewer").forEach(ee=>ee.remove());let b=document.createElementNS("http://www.w3.org/2000/svg","style");b.type="text/css";let T="\n    svg {\n        font-family: 'Roboto';\n    }\n\n    svg foreignObject h1,\n    svg foreignObject h2,\n    svg foreignObject h3 {\n        margin: 20px 0 10px;\n    }\n\n    svg foreignObject h4,\n    svg foreignObject h5,\n    svg foreignObject h6 {\n        margin: 10px 0 10px;\n    }\n\n    svg foreignObject p {\n        margin: 0 0 10px;\n    }\n\n    svg .hide {\n        display: none;\n    }\n    ".replace(/\s+/g," "),U=["Roboto",...(0,L.d)(JSON.stringify(m))];T+=(yield(0,w._K)(U)),b.textContent=T,l.appendChild(b);let q=(null!==(s=l.outerHTML)&&void 0!==s?s:"").replace(/(<img|<img[^>]+)>/g,"$1/>").replace(/(<br|<br[^>]+)>/g,"$1/>").replace(/\&nbsp\;/g," ");return u.remove(),'<?xml version="1.0" encoding="utf-8"?>\n'+q});return function(f){return o.apply(this,arguments)}}()}}]);