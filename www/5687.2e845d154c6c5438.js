"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5687],{8671:(D,B,d)=>{d.d(B,{$:()=>b});var h=d(5972);function b(g){g.params=g.params||{},(0,h.hm)({url:"api/Lookup/get",params:{lookup_key:g.params.lookup_key||null},success:n=>{"function"==typeof g.callback&&g.callback(null==n?void 0:n.data)},error:n=>{"function"==typeof g.callback&&g.callback(),console.error(g,n)},loading:g.loading,loadingController:g.loadingController})}},3181:(D,B,d)=>{d.d(B,{q:()=>w});var h=d(467),b=d(5972),g=d(6081),n=d(2635),P=d(3753),I=d(2806);function C(r){r.params=r.params||{},(0,b.Ll)({url:"api/BoardShareUser/AddUpdate",params:{board_id:r.params.board_id||null,emailaddr:r.params.emailaddr||null,v_sharepermission:r.params.v_sharepermission||null,createdby:r.params.userid||null,modifiedby:r.params.userid||null},success:u=>{"function"==typeof r.callback&&r.callback(u.data||null)},error:u=>{"function"==typeof r.callback&&r.callback(),console.error(u)},loading:r.loading,loadingController:r.loadingController})}var _=d(5414),E=d(8833),m=d(4552),c=d(4668),e=d(4438),i=d(6637),s=d(9417),f=d(31);function R(r,u){1&r&&e.nrm(0,"ion-icon",7)}function F(r,u){1&r&&e.nrm(0,"ion-icon",24)}function G(r,u){1&r&&e.nrm(0,"ion-icon",25)}function x(r,u){if(1&r){const L=e.RV6();e.j41(0,"ion-item",19)(1,"ion-avatar"),e.nrm(2,"img",26),e.k0s(),e.j41(3,"ion-label",27),e.EFF(4),e.k0s(),e.j41(5,"ion-button",28),e.bIt("click",function(o){const t=e.eBV(L).$implicit,l=e.XpG();return e.Njj(l.presentPopoverLookupSharePermission(o,t.emailaddr))}),e.j41(6,"ion-label"),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.nrm(9,"ion-icon",29),e.k0s()()}if(2&r){let L,a,o;const t=u.$implicit,l=e.XpG();e.Y8G("disabled",l.isDisabled4Only),e.R7$(2),e.Y8G("src",null!==(L=t.profilephoto?l.readfileuploadurl+t.profilephoto:null)&&void 0!==L?L:"../../../assets/image/user-avatar-default.png",e.B4B),e.R7$(2),e.JRh(null!==(a=t.fullname)&&void 0!==a?a:t.emailaddr),e.R7$(3),e.JRh(null!==(o=t.v_sharepermission_title)&&void 0!==o?o:e.bMT(8,4,"View"))}}let w=(()=>{var r;class u{constructor(a,o,t,l){this.modalController=a,this.popoverController=o,this.toastController=t,this.loadingController=l,this.b=0,this.v_share=c.z,this.dataForm={},this.board={},this.boardShare={},this.boardShareUsers=[],this.isfullscreen=!1,this.readfileuploadurl="",this.fileurl="",this.appsettings={}}ngOnInit(){var a=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,h.A)(function*(){a.appsettings=yield(0,b.AC)(),a.appsettings.madonvi&&(a.user=yield(0,n.Nk)(),a.readfileuploadurl=a.appsettings.readfileuploadurl||"",a.refreshData())})()}refreshData(){var a;(0,g.qU)({loadingController:this.loadingController,params:{userid:null===(a=this.user)||void 0===a?void 0:a.userid,board_id:this.b},callback:o=>{this.board=o||{},this.board.board_id&&(this.GetBoardShare(),this.GetBoardShareUser())}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}changeEmails(a){var o;this.dataForm.emailaddrs=((null==a||null===(o=a.target)||void 0===o?void 0:o.value)||"").replace(/[^a-zA-Z0-9\@\;\ \-\_\.]+/g,"").replace(/\s+/," ").trim().replace(/\ \;/g,";").replace(/\;\ /g,";").replace(/\ /g,";").replace(/\;+/g,";").split(";").map(t=>{let l=t.match(/^[a-zA-Z0-9\.\-\_]+@[a-zA-Z0-9\-\_]+\.[a-zA-Z0-9\-\_]+((\.[a-zA-Z0-9\-\_]+)+)?$/);return l?l[0]:null}).filter(t=>!!t).filter((t,l,p)=>p.indexOf(t)==l).join("; ")}keypressEmails(a){var o,l,t=a.keyCode||a.which||a.charCode||0;t!=I.r_.Enter&&t!=I.r_.Escape||(null===(l=a.target)||void 0===l||l.blur(),this.submitEmails()),null!==(o=a.key)&&void 0!==o&&o.match(/[^a-zA-Z0-9\@\;\ \-\_\.]/)&&(null==a||a.preventDefault(),null==a||a.stopPropagation())}submitEmails(a){this.dataForm.emailaddrs&&(this.AddUpdateBoardShareUser_Recursive(this.dataForm.emailaddrs.replace(/\s+/g,"").split(";")),this.dataForm.emailaddrs="")}presentPopoverLookupShare(a){var o=this;return(0,h.A)(function*(){const t=yield o.popoverController.create({component:P.t,componentProps:{selectedId:o.boardShare.v_share,lookup_key:"v_share"},event:a,dismissOnSelect:!1,animated:!1,side:"bottom",alignment:"start"});t.onDidDismiss().then(l=>{var p,k,M;"confirm"==l.role&&(Object.assign(o.boardShare,{v_share:null===(p=l.data)||void 0===p?void 0:p.lookup_value,v_share_title:null===(k=l.data)||void 0===k?void 0:k.lookup_title}),o.AddUpdateBoardShare(null===(M=l.data)||void 0===M?void 0:M.lookup_value))}),t.present()})()}presentPopoverLookupSharePermission(a,o){var t=this;return(0,h.A)(function*(){var l;const k=yield t.popoverController.create({component:P.t,componentProps:{selectedId:null===(l=t.boardShareUsers.find(M=>M.emailaddr==o))||void 0===l?void 0:l.v_sharepermission,lookup_key:"v_sharepermission",lookups_d2:[{lookup_value:-1,lookup_title:"X\xf3a",color:"danger"}]},event:a,dismissOnSelect:!1,animated:!1,alignment:"end",side:"bottom"});k.onDidDismiss().then(M=>{var U;"confirm"==M.role&&(t.boardShareUsers.filter($=>$.emailaddr==o).forEach($=>{var T,A;Object.assign($,{v_sharepermission:null===(T=M.data)||void 0===T?void 0:T.lookup_value,v_sharepermission_title:null===(A=M.data)||void 0===A?void 0:A.lookup_title})}),t.AddUpdateBoardShareUser(o,null===(U=M.data)||void 0===U?void 0:U.lookup_value))}),k.present()})()}GetBoardShare(){var a=this;return(0,h.A)(function*(){var o;!function v(r){r.params=r.params||{},(0,b.hm)({url:"api/BoardShare/Get",params:{getby:r.params.userid||null,boardshare_id:r.params.boardshare_id||null,board_id:r.params.board_id||null,v_share:r.params.v_share||null},success:u=>{"function"==typeof r.callback&&r.callback(u.data||null)},error:u=>{"function"==typeof r.callback&&r.callback(),console.error(u)},loading:r.loading,loadingController:r.loadingController})}({loadingController:a.loadingController,params:{userid:null===(o=a.user)||void 0===o?void 0:o.userid,board_id:a.b},callback:t=>{a.boardShare=t||{},a.isDisabled4Only=!a.boardShare.v_share||a.boardShare.v_share==c.z.ONLY_ME}})})()}AddUpdateBoardShare(a){var o=this;return(0,h.A)(function*(){var t;if(!a||a<=0)return o.DeleteBoardShare();!function O(r){r.params=r.params||{},(0,b.Ll)({url:"api/BoardShare/AddUpdate",params:{board_id:r.params.board_id||null,v_share:r.params.v_share||null,createdby:r.params.userid||null,modifiedby:r.params.userid||null},success:u=>{"function"==typeof r.callback&&r.callback(u.data||null)},error:u=>{"function"==typeof r.callback&&r.callback(),console.error(u)},loading:r.loading,loadingController:r.loadingController})}({loadingController:o.loadingController,params:{userid:null===(t=o.user)||void 0===t?void 0:t.userid,board_id:o.b,v_share:a},callback:l=>{0==(null==l?void 0:l.returncode)?o.GetBoardShare():(0,_.c)(o.toastController,{},l).then(p=>p.present())}})})()}DeleteBoardShare(){var a=this;return(0,h.A)(function*(){var o;!function S(r){r.params=r.params||{},(0,b.sj)({url:"api/BoardShare/Delete",params:{deleteby:r.params.userid||null,boardshare_id:r.params.boardshare_id||null,board_id:r.params.board_id||null},success:u=>{"function"==typeof r.callback&&r.callback(u.data||null)},error:u=>{"function"==typeof r.callback&&r.callback(),console.error(u)},loading:r.loading,loadingController:r.loadingController})}({loadingController:a.loadingController,params:{userid:null===(o=a.user)||void 0===o?void 0:o.userid,board_id:a.b},callback:t=>{0==(null==t?void 0:t.returncode)?a.GetBoardShare():(0,_.c)(a.toastController,{},t).then(l=>l.present())}})})()}GetBoardShareUser(){var a=this;return(0,h.A)(function*(){var o;!function j(r){r.params=r.params||{},(0,b.hm)({url:"api/BoardShareUser/Get",params:{getby:r.params.userid||null,boardshareuser_id:r.params.boardshareuser_id||null,board_id:r.params.board_id||null,emailaddr:r.params.emailaddr||null,v_sharepermission:r.params.v_sharepermission||null},success:u=>{"function"==typeof r.callback&&r.callback(u.data||null)},error:u=>{"function"==typeof r.callback&&r.callback(),console.error(u)},loading:r.loading,loadingController:r.loadingController})}({loadingController:a.loadingController,params:{userid:null===(o=a.user)||void 0===o?void 0:o.userid,board_id:a.b},callback:t=>{a.boardShareUsers=t||[]}})})()}AddUpdateBoardShareUser_Recursive(a){var o=this;return(0,h.A)(function*(){let t=l=>{var p;l&&C({loadingController:o.loadingController,params:{userid:null===(p=o.user)||void 0===p?void 0:p.userid,board_id:o.b,emailaddr:l,v_sharepermission:1},callback:k=>{a.length?t(null==a?void 0:a.shift()):0==(null==k?void 0:k.returncode)?o.GetBoardShareUser():(0,_.c)(o.toastController,{},k).then(M=>M.present())}})};t(a.shift())})()}AddUpdateBoardShareUser(a,o){var t=this;return(0,h.A)(function*(){var l;if(a){if(!o||o<=0)return t.DeleteBoardShareUser(a);C({loadingController:t.loadingController,params:{userid:null===(l=t.user)||void 0===l?void 0:l.userid,board_id:t.b,emailaddr:a,v_sharepermission:o},callback:p=>{0==(null==p?void 0:p.returncode)?t.GetBoardShareUser():(0,_.c)(t.toastController,{},p).then(k=>k.present())}})}})()}DeleteBoardShareUser(a){var o=this;return(0,h.A)(function*(){var t;a&&function y(r){r.params=r.params||{},(0,b.sj)({url:"api/BoardShareUser/Delete",params:{deleteby:r.params.userid||null,boardshareuser_id:r.params.boardshareuser_id||null,board_id:r.params.board_id||null,emailaddr:r.params.emailaddr||null},success:u=>{"function"==typeof r.callback&&r.callback(u.data||null)},error:u=>{"function"==typeof r.callback&&r.callback(),console.error(u)},loading:r.loading,loadingController:r.loadingController})}({loadingController:o.loadingController,params:{userid:null===(t=o.user)||void 0===t?void 0:t.userid,board_id:o.b,emailaddr:a},callback:l=>{0==(null==l?void 0:l.returncode)?o.GetBoardShareUser():(0,_.c)(o.toastController,{},l).then(p=>p.present())}})})()}copyLink(a){var o=this;return(0,h.A)(function*(){let t=o.appsettings.weburl+E._.VIEWER+"?"+jQuery.param({b:o.b});(0,m.lW)(t)?(o.isCopiedLink=!0,o.isCopiedEmbed=!1):(0,_.c)(o.toastController,{message:"Sao ch\xe9p l\u1ed7i!"}).then(l=>l.present())})()}copyEmbed(a){var o=this;return(0,h.A)(function*(){let l=`<iframe src="${o.appsettings.weburl+E._.EMBED+"?"+jQuery.param({b:o.b})}" width="${o.board.size_width||1280}" height="${o.board.size_height||720}" frameborder="0" allowfullscreen webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="display: block; margin: auto; border: 1px dashed rgba(0,0,0,0.1);"></iframe>`;(0,m.lW)(l)?(o.isCopiedLink=!1,o.isCopiedEmbed=!0):(0,_.c)(o.toastController,{message:"Sao ch\xe9p l\u1ed7i!"}).then(p=>p.present())})()}}return(r=u).\u0275fac=function(a){return new(a||r)(e.rXU(i.W3),e.rXU(i.IE),e.rXU(i.K_),e.rXU(i.Xi))},r.\u0275cmp=e.VBU({type:r,selectors:[["app-modal-board-share"]],inputs:{b:"b"},decls:51,vars:26,consts:[["color","primary"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],["lines","none","detail","false","button","",3,"click"],["slot","start","name","lock-closed-outline",1,"mr-3"],[1,"d-flex","align-items-center"],[1,"mr-2"],["src","../../../assets/icon/16x16/chevron-down.svg",1,"fs-12"],[1,"fs-12","mt-1"],[1,"px-3","pt-2","pb-3"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","email@example.com; email2@example.com; ...",1,"form-control",3,"change","keypress","disabled","ngModel"],[1,"input-group-append"],["type","button",1,"btn",3,"click","disabled"],[1,"mb-0","mt-3"],["button","","detail","false",3,"disabled"],[1,"p-2"],["shape","round","fill","outline",1,"m-1",3,"click"],["slot","start","src","../../../assets/icon/24x24/attach.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/24x24/embed.svg",1,"fs-24"],["slot","start","name","people-outline",1,"mr-3"],["slot","start","name","globe-outline",1,"mr-3"],["onerror","errorAvatar(this)",3,"src"],[1,"ml-3"],["slot","end","size","default","color","dark","fill","clear",1,"m-0",3,"click"],["slot","end","src","../../../assets/icon/16x16/chevron-down.svg",1,"fs-10"]],template:function(a,o){1&a&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.j41(5,"ion-text",0),e.EFF(6),e.k0s()(),e.j41(7,"ion-buttons",1)(8,"ion-button",2),e.bIt("click",function(){return o.toggleFullScreen()}),e.nrm(9,"ion-icon",3),e.k0s(),e.j41(10,"ion-button",4),e.bIt("click",function(){return o.close()}),e.nrm(11,"ion-icon",5),e.k0s()()(),e.j41(12,"ion-toolbar")(13,"ion-item",6),e.bIt("click",function(l){return o.presentPopoverLookupShare(l)}),e.DNE(14,R,1,0,"ion-icon",7)(15,F,1,0)(16,G,1,0),e.j41(17,"ion-label")(18,"div",8)(19,"b",9),e.EFF(20),e.k0s(),e.nrm(21,"ion-icon",10),e.k0s(),e.j41(22,"div",11),e.EFF(23),e.k0s()()(),e.j41(24,"div",12)(25,"div",13)(26,"div",14)(27,"input",15),e.bIt("change",function(l){return o.changeEmails(l)})("keypress",function(l){return o.keypressEmails(l)}),e.k0s(),e.j41(28,"div",16)(29,"button",17),e.bIt("click",function(l){return o.submitEmails(l)}),e.EFF(30),e.nI1(31,"translate"),e.k0s()()()(),e.nrm(32,"hr"),e.j41(33,"label",18),e.EFF(34),e.nI1(35,"translate"),e.k0s()()()(),e.j41(36,"ion-content")(37,"ion-list"),e.Z7z(38,x,10,6,"ion-item",19,e.fX1),e.k0s()(),e.j41(40,"ion-footer",20)(41,"ion-button",21),e.bIt("click",function(l){return o.copyLink(l)}),e.nrm(42,"ion-icon",22),e.j41(43,"ion-label"),e.EFF(44),e.nI1(45,"translate"),e.k0s()(),e.j41(46,"ion-button",21),e.bIt("click",function(l){return o.copyEmbed(l)}),e.nrm(47,"ion-icon",23),e.j41(48,"ion-label"),e.EFF(49),e.nI1(50,"translate"),e.k0s()()()),2&a&&(e.R7$(3),e.SpI("",e.bMT(4,16,"Share"),": "),e.R7$(3),e.JRh(o.board.board_title),e.R7$(3),e.Y8G("src",o.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),e.R7$(5),e.vxM(14,o.boardShare.v_share&&o.boardShare.v_share!=o.v_share.ONLY_ME?o.boardShare.v_share==o.v_share.ONLY_MEMBER?15:o.boardShare.v_share==o.v_share.EVERYONE_HAS_LINK?16:-1:14),e.R7$(6),e.JRh(o.boardShare.v_share_title),e.R7$(3),e.JRh(o.boardShare.v_share_note),e.R7$(4),e.Y8G("disabled",!!o.isDisabled4Only)("ngModel",o.dataForm.emailaddrs),e.R7$(2),e.Y8G("disabled",!!o.isDisabled4Only),e.R7$(),e.JRh(e.bMT(31,18,"Add")),e.R7$(3),e.HbH(o.isDisabled4Only?"disabled":""),e.R7$(),e.Lme("",e.bMT(35,20,"SharedMembership")," (",o.boardShareUsers.length,")"),e.R7$(4),e.Dyx(o.boardShareUsers),e.R7$(6),e.JRh(e.bMT(45,22,o.isCopiedLink?"Copied":"CopyLink")),e.R7$(5),e.JRh(e.bMT(50,24,o.isCopiedEmbed?"Copied":"CopyEmbed")))},dependencies:[s.me,s.BC,s.vS,i.mC,i.Jm,i.QW,i.W9,i.M0,i.eU,i.iq,i.uz,i.he,i.nf,i.IO,i.BC,i.ai,f.D9],styles:["ion-toolbar[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{border-radius:50%;padding:8px;margin:0 1rem 0 0;background-color:#faebd7;color:var(--ion-color-primary)}ion-toolbar[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5}ion-footer[_ngcontent-%COMP%]{box-shadow:none;border:0;--box-shadow: none;--border-width: 0}ion-footer[_ngcontent-%COMP%]:before{display:none}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:234px;--border-width: 1px;--border-color: #747775;--background: transparent;--color: var(--ion-color-primary);--background-hover: var(--ion-color-primary-tint);--background-hover-opacity: 1;--color-hover: #fff;--background-focused: var(--ion-color-primary-shade);--background-focused-opacity: 1;--color-focused: #fff;--background-activated: var(--ion-color-primary);--background-activated-opacity: 1;--color-activated: #fff}.disabled[_ngcontent-%COMP%]{opacity:.65}.input-group[_ngcontent-%COMP%]{--color: #eee}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]{margin-left:.5rem}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:3rem;min-height:3rem;padding:0 1rem;border:0;border-radius:.25rem;text-align:center;line-height:0;vertical-align:middle;background-color:var(--ion-color-tertiary);color:var(--ion-color-tertiary-contrast)}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-tertiary-shade)}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{height:3rem;padding:.25rem .5rem;border-color:var(--color, #4D4F60);color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5f6ce1}.btn-share[_ngcontent-%COMP%]{padding:.25rem 0;margin:0;border:0;font-size:1rem;background-color:transparent;color:var(--ion-text-color, #000);outline:none;box-shadow:none}.btn-share[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:1.5rem}.btn-share[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]:last-child{font-size:1rem}.btn-share[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:0 .5rem;vertical-align:middle}.share-member-action[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .share-member-action[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.share-member-action[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%] + ion-icon[_ngcontent-%COMP%]{margin-left:.5rem}hr[_ngcontent-%COMP%]{margin:0}"]}),u})()},3753:(D,B,d)=>{d.d(B,{t:()=>m});var h=d(467),b=d(8671),g=d(2635),n=d(4438),P=d(6637),I=d(177),j=d(31);function C(c,e){1&c&&(n.qex(0),n.j41(1,"ion-content")(2,"div",2)(3,"div",3),n.nrm(4,"ion-spinner",4),n.k0s()()(),n.bVm())}function y(c,e){if(1&c){const i=n.RV6();n.qex(0),n.j41(1,"ion-item",9),n.bIt("click",function(){const f=n.eBV(i).$implicit,R=n.XpG(3);return n.Njj(R.filterChange(f.lookup_value))}),n.j41(2,"ion-label"),n.EFF(3),n.k0s()(),n.bVm()}if(2&c){const i=e.$implicit,s=n.XpG(3);n.R7$(),n.BMQ("color",i.lookup_value==s.selectedId?"primary":""),n.R7$(2),n.JRh(i.lookup_title)}}function _(c,e){if(1&c&&(n.j41(0,"ion-list",7),n.DNE(1,y,4,2,"ng-container",8),n.k0s()),2&c){const i=n.XpG(2);n.R7$(),n.Y8G("ngForOf",i.lookups)}}function v(c,e){1&c&&(n.j41(0,"div",3)(1,"i"),n.EFF(2),n.nI1(3,"translate"),n.k0s()()),2&c&&(n.R7$(2),n.JRh(n.bMT(3,1,"DataNotFound")))}function O(c,e){if(1&c){const i=n.RV6();n.qex(0),n.j41(1,"ion-item",9),n.bIt("click",function(){const f=n.eBV(i).$implicit,R=n.XpG(3);return n.Njj(R.filterChange(f.lookup_value))}),n.j41(2,"ion-label",10),n.EFF(3),n.k0s()(),n.bVm()}if(2&c){const i=e.$implicit,s=n.XpG(3);n.R7$(),n.BMQ("color",i.lookup_value==s.selectedId?"primary":""),n.R7$(),n.Y8G("color",i.color),n.R7$(),n.JRh(i.lookup_title)}}function S(c,e){if(1&c&&(n.qex(0),n.nrm(1,"hr"),n.j41(2,"ion-list",7),n.DNE(3,O,4,3,"ng-container",8),n.k0s(),n.bVm()),2&c){const i=n.XpG(2);n.R7$(3),n.Y8G("ngForOf",i.lookups_d2)}}function E(c,e){if(1&c&&(n.qex(0),n.DNE(1,_,2,1,"ion-list",5)(2,v,4,3,"div",6)(3,S,4,1,"ng-container",1),n.bVm()),2&c){const i=n.XpG();n.R7$(),n.Y8G("ngIf",i.lookups.length),n.R7$(),n.Y8G("ngIf",!i.lookups.length),n.R7$(),n.Y8G("ngIf",i.lookups_d2.length)}}let m=(()=>{var c;class e{constructor(s){this.popoverController=s,this.selectedId=0,this.lookup_key="",this.lookups_d2=[],this.dataInit={loading:!0},this.lookups=[]}ngOnInit(){var s=this;(0,h.A)(function*(){s.user=yield(0,g.Nk)(),s.loadLookup()})()}loadLookup(){var s;(0,b.$)({loading:f=>{this.dataInit.loading=f},params:{userid:null===(s=this.user)||void 0===s?void 0:s.userid,lookup_key:this.lookup_key},callback:f=>{this.lookups=f||[]}})}filterChange(s){var f;this.popoverController.dismiss(null!==(f=this.lookups.find(R=>R.lookup_value==s))&&void 0!==f?f:this.lookups_d2.find(R=>R.lookup_value==s),"confirm")}}return(c=e).\u0275fac=function(s){return new(s||c)(n.rXU(P.IE))},c.\u0275cmp=n.VBU({type:c,selectors:[["app-popover-lookup"]],inputs:{selectedId:"selectedId",lookup_key:"lookup_key",lookups_d2:"lookups_d2"},decls:3,vars:2,consts:[[1,"menu-lookup","overflow-auto"],[4,"ngIf"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],["lines","full",4,"ngIf"],["class","px-3 py-1",4,"ngIf"],["lines","full"],[4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],[3,"color"]],template:function(s,f){1&s&&(n.j41(0,"div",0),n.DNE(1,C,5,0,"ng-container",1)(2,E,4,3,"ng-container",1),n.k0s()),2&s&&(n.R7$(),n.Y8G("ngIf",f.dataInit.loading),n.R7$(),n.Y8G("ngIf",!f.dataInit.loading))},dependencies:[I.Sq,I.bT,P.W9,P.uz,P.he,P.nf,P.w2,j.D9],styles:[".menu-lookup[_ngcontent-%COMP%]{width:240px;max-height:480px;border-top:3px solid #5F6CE1}hr[_ngcontent-%COMP%]{margin:0}"]}),e})()},8963:(D,B,d)=>{d.d(B,{L8:()=>n,jI:()=>g,rx:()=>P});var h=d(467),b=d(4393);const g=()=>{I([["assets/iframe/lib/kendoui.2022.1.301/js/kendo.all.min.js"],["assets/iframe/lib/kendoui.2022.1.301/js/jszip.min.js","assets/iframe/lib/kendoui.2022.1.301/js/cultures/kendo.culture.vi-VN.min.js","assets/iframe/lib/kendoui.2022.1.301/js/messages/kendo.messages.vi-VN.min.js"]])},n=()=>{j([["assets/iframe/lib/font-awesome-4.7.0/css/font-awesome.min.css"]])},P=function(){var C=(0,h.A)(function*(y,_){if(null==_||!_.length)return;let v="intro_"+y;if((yield(0,b.pJ)())[v])return;let S={};S[v]=!0;let m=[];_.forEach(i=>{let s={title:i.title,intro:""};if(i.etag){let f=document.querySelector(i.etag);f&&(s.element=f)}i.content&&i.image?s.intro=`<p>${i.content}</p><img src="${i.image}" />`:i.content?s.intro=`<div>${i.content}<div/>`:i.image&&(s.intro=`<img src="${i.image}" />`),m.push(s)});let c=2;I([["assets/lib/intro/intro.min.js"]],()=>{c-=1,c<=0&&e()}),j([["assets/lib/intro/intro.css"]],()=>{c-=1,c<=0&&e()});let e=()=>{let i=window.introJs;if(!i)return;const s=i();s.setOptions({steps:m,exitOnOverlayClick:!1,prevLabel:"\u2190",nextLabel:"\u2192",skipLabel:"\xd7",doneLabel:"\u2192"}),s.oncomplete(()=>{setTimeout(()=>{s.start()},300)}),s.onexit(()=>{(0,b.LK)({params:S})}),s.start()}});return function(_,v){return C.apply(this,arguments)}}(),I=(C,y)=>{let _=v=>{v?Promise.all(v.map(O=>new Promise((S,E)=>{let m=document.createElement("script");m.type="text/javascript",m.src=O,m.onload=()=>{S(m)},m.onerror=()=>{E(m)},window.document.body.append(m)}))).then(()=>{_(C.shift())}):y&&y()};_(C.shift())},j=(C,y)=>{let _=v=>{v?Promise.all(v.map(O=>new Promise((S,E)=>{let m=document.createElement("link");m.rel="stylesheet",m.href=O,m.onload=()=>{S(O)},m.onerror=()=>{E(O)},window.document.head.append(m)}))).then(()=>{_(C.shift())}):y&&y()};_(C.shift())}},4668:(D,B,d)=>{d.d(B,{z:()=>h});const h={ONLY_ME:10400,ONLY_MEMBER:10401,EVERYONE_HAS_LINK:10402}}}]);