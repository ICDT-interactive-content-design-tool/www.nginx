"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7102],{8779:(ue,jt,w)=>{w.d(jt,{$u:()=>M,IB:()=>gt,WR:()=>x,bf:()=>N,eD:()=>st,lq:()=>y,pZ:()=>T,u$:()=>E});const T={fill:"transparent",stroke:"#129bff",strokeWidth:1},E={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},st={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},N={fill:"transparent",stroke:"transparent",strokeWidth:1},gt={fill:"none",stroke:"#5F6CE1",strokeWidth:1},x={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},y={fill:"transparent"},M={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(ue,jt,w)=>{w.d(jt,{$N:()=>x,An:()=>y,CS:()=>E,Kf:()=>C,Lp:()=>I,j9:()=>M,lP:()=>N,n9:()=>f,nf:()=>gt});var T=w(2492);const E=p=>{var P;return null===(P=p.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===P?void 0:P.map(h=>{let L={type:h.substring(0,1)},D=(V=h.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?V.split(/\s/).map(Y=>(0,T.z)(parseFloat(Y),1e6)):[];var V;return D.length&&(L.points=D),L})},N=p=>{let P=[],h=[],L=[],D=[];return p.forEach(V=>{switch(["M","L","C","S","Q","T"].includes(V.type)&&V.points&&V.points.forEach((Bt,nt)=>{nt%2==0?P.push(Bt):h.push(Bt)}),V.type){case"A":var Y;7==(null===(Y=V.points)||void 0===Y?void 0:Y.length)&&(L.push(V.points[5]),D.push(V.points[6]));break;case"H":var tt;null!==(tt=V.points)&&void 0!==tt&&tt.length&&(P.push(V.points[0]),L.push(V.points[0]));break;case"V":var H;null!==(H=V.points)&&void 0!==H&&H.length&&(h.push(V.points[0]),D.push(V.points[0]));break;case"a":var G;if(7==(null===(G=V.points)||void 0===G?void 0:G.length)){let Bt=P[P.length-1];P.push(Bt+V.points[5]),L.push(Bt+V.points[5]);let nt=h[h.length-1];h.push(nt+V.points[6]),D.push(nt+V.points[6])}break;case"h":var Ct;if(null!==(Ct=V.points)&&void 0!==Ct&&Ct.length){let Bt=P[P.length-1];P.push(Bt+V.points[0]),L.push(Bt+V.points[0])}break;case"v":var Xt;if(null!==(Xt=V.points)&&void 0!==Xt&&Xt.length){let Bt=h[h.length-1];h.push(Bt+V.points[0]),D.push(Bt+V.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var Jt;null===(Jt=V.points)||void 0===Jt||Jt.forEach((Bt,nt)=>{nt%2==0?L.push(Bt):D.push(Bt)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Ht;null===(Ht=V.points)||void 0===Ht||Ht.forEach((Bt,nt)=>{if(nt%2==0){let bt=P[P.length-1];P.push(bt+Bt),L.push(bt+Bt)}else{let bt=h[h.length-1];h.push(bt+Bt),D.push(bt+Bt)}})}}),{minX:Math.min.apply(null,L),minY:Math.min.apply(null,D),maxX:Math.max.apply(null,L),maxY:Math.max.apply(null,D)}},gt=(p,P)=>P.map(h=>{let L=[];switch(h.type){case"a":var D;7==(null===(D=h.points)||void 0===D?void 0:D.length)&&L.push([(0,T.z)(h.points[0]/p.width,1e6),(0,T.z)(h.points[1]/p.height,1e6),h.points[2],h.points[3],h.points[4],(0,T.z)(h.points[5]/p.width,1e6),(0,T.z)(h.points[6]/p.height,1e6)]);break;case"A":var V;7==(null===(V=h.points)||void 0===V?void 0:V.length)&&L.push([(0,T.z)(h.points[0]/p.width,1e6),(0,T.z)(h.points[1]/p.height,1e6),h.points[2],h.points[3],h.points[4],(0,T.z)((h.points[5]-p.x)/p.width,1e6),(0,T.z)((h.points[6]-p.y)/p.height,1e6)]);break;case"h":var Y;null!==(Y=h.points)&&void 0!==Y&&Y.length&&L.push([(0,T.z)(h.points[0]/p.width,1e6)]);break;case"H":var tt;null!==(tt=h.points)&&void 0!==tt&&tt.length&&L.push([(0,T.z)((h.points[0]-p.x)/p.width,1e6)]);break;case"v":var H;null!==(H=h.points)&&void 0!==H&&H.length&&L.push([(0,T.z)(h.points[0]/p.height,1e6)]);break;case"V":var G;null!==(G=h.points)&&void 0!==G&&G.length&&L.push([(0,T.z)((h.points[0]-p.y)/p.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var Ct;if(null!==(Ct=h.points)&&void 0!==Ct&&Ct.length)for(let Jt=0,Ht=h.points.length-1;Jt<Ht;Jt+=2)L.push([(0,T.z)((h.points[Jt]-p.x)/p.width,1e6),(0,T.z)((h.points[Jt+1]-p.y)/p.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var Xt;if(null!==(Xt=h.points)&&void 0!==Xt&&Xt.length)for(let Jt=0,Ht=h.points.length-1;Jt<Ht;Jt+=2)L.push([(0,T.z)(h.points[Jt]/p.width,1e6),(0,T.z)(h.points[Jt+1]/p.height,1e6)])}return L.length?{type:h.type,ratios:L}:{type:h.type}}),x=(p,P)=>P.map(h=>{switch(h.type){case"a":var L,D;return`${h.type}${null!==(L=null===(D=h.ratios)||void 0===D||null===(D=D.map(St=>{var kt,mt,U,Q,d,at,xt;return[(0,T.z)(p.width*(null!==(kt=St[0])&&void 0!==kt?kt:0),1e6),(0,T.z)(p.height*(null!==(mt=St[1])&&void 0!==mt?mt:0),1e6),null!==(U=St[2])&&void 0!==U?U:0,null!==(Q=St[3])&&void 0!==Q?Q:0,null!==(d=St[4])&&void 0!==d?d:0,(0,T.z)(p.width*(null!==(at=St[5])&&void 0!==at?at:0),1e6),(0,T.z)(p.height*(null!==(xt=St[6])&&void 0!==xt?xt:0),1e6)]}))||void 0===D||null===(D=D.map(St=>St.join(" ")))||void 0===D?void 0:D.join(" "))&&void 0!==L?L:""}`;case"A":var V,Y;return`${h.type}${null!==(V=null===(Y=h.ratios)||void 0===Y||null===(Y=Y.map(St=>{var kt,mt,U,Q,d,at,xt;return[(0,T.z)(p.width*(null!==(kt=St[0])&&void 0!==kt?kt:0),1e6),(0,T.z)(p.height*(null!==(mt=St[1])&&void 0!==mt?mt:0),1e6),null!==(U=St[2])&&void 0!==U?U:0,null!==(Q=St[3])&&void 0!==Q?Q:0,null!==(d=St[4])&&void 0!==d?d:0,(0,T.z)(p.x+p.width*(null!==(at=St[5])&&void 0!==at?at:0),1e6),(0,T.z)(p.y+p.height*(null!==(xt=St[6])&&void 0!==xt?xt:0),1e6)]}))||void 0===Y||null===(Y=Y.map(St=>St.join(" ")))||void 0===Y?void 0:Y.join(" "))&&void 0!==V?V:""}`;case"h":var tt,H;return`${h.type}${null!==(tt=null===(H=h.ratios)||void 0===H||null===(H=H.map(St=>{var kt;return(0,T.z)(p.width*(null!==(kt=St[0])&&void 0!==kt?kt:0),1e6)}))||void 0===H?void 0:H.join(" "))&&void 0!==tt?tt:""}`;case"H":var G,Ct;return`${h.type}${null!==(G=null===(Ct=h.ratios)||void 0===Ct||null===(Ct=Ct.map(St=>{var kt;return(0,T.z)(p.x+p.width*(null!==(kt=St[0])&&void 0!==kt?kt:0),1e6)}))||void 0===Ct?void 0:Ct.join(" "))&&void 0!==G?G:""}`;case"v":var Xt,Jt;return`${h.type}${null!==(Xt=null===(Jt=h.ratios)||void 0===Jt||null===(Jt=Jt.map(St=>{var kt;return(0,T.z)(p.height*(null!==(kt=St[0])&&void 0!==kt?kt:0),1e6)}))||void 0===Jt?void 0:Jt.join(" "))&&void 0!==Xt?Xt:""}`;case"V":var Ht,Bt;return`${h.type}${null!==(Ht=null===(Bt=h.ratios)||void 0===Bt||null===(Bt=Bt.map(St=>{var kt;return(0,T.z)(p.y+p.height*(null!==(kt=St[0])&&void 0!==kt?kt:0),1e6)}))||void 0===Bt?void 0:Bt.join(" "))&&void 0!==Ht?Ht:""}`;case"z":case"Z":return h.type;case"M":case"L":case"C":case"S":case"Q":case"T":var nt,bt;return`${h.type}${null!==(nt=null===(bt=h.ratios)||void 0===bt||null===(bt=bt.map(St=>{var kt,mt;return[(0,T.z)(p.x+p.width*(null!==(kt=St[0])&&void 0!==kt?kt:0),1e6),(0,T.z)(p.y+p.height*(null!==(mt=St[1])&&void 0!==mt?mt:0),1e6)]}))||void 0===bt||null===(bt=bt.map(St=>St.join(" ")))||void 0===bt?void 0:bt.join(" "))&&void 0!==nt?nt:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var et,At;return`${h.type}${null!==(et=null===(At=h.ratios)||void 0===At||null===(At=At.map(St=>{var kt,mt;return[(0,T.z)(p.width*(null!==(kt=St[0])&&void 0!==kt?kt:0),1e6),(0,T.z)(p.height*(null!==(mt=St[1])&&void 0!==mt?mt:0),1e6)]}))||void 0===At||null===(At=At.map(St=>St.join(" ")))||void 0===At?void 0:At.join(" "))&&void 0!==et?et:""}`;default:return""}}).join(""),y=p=>{return(P=p.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?P.split(/\s/).map(h=>parseFloat(h)):[];var P},M=p=>{let P=[],h=[];return p.forEach((L,D)=>{D%2==0?P.push(L):h.push(L)}),{minX:Math.min.apply(null,P),minY:Math.min.apply(null,h),maxX:Math.max.apply(null,P),maxY:Math.max.apply(null,h)}},I=(p,P)=>{let h=[];for(let L=0,D=P.length-1;L<D;L+=2)h.push([(P[L]-p.x)/p.width,(P[L+1]-p.y)/p.height]);return h},f=(p,P)=>P.map(h=>[(0,T.z)(p.x+p.width*h[0],1e6),(0,T.z)(p.y+p.height*h[1],1e6)]).map(h=>h.join(" ")).join(" "),C=(p,P)=>{let h=(p=>{let P=p.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(h=>(0,T.z)(parseFloat(h),1e6));if(6==P.length)return{a:P[0],b:P[1],c:P[2],d:P[3],e:P[4],f:P[5]}})(P);return h?window.Snap.path.map(p,new window.Snap.Matrix(h.a,h.b,h.c,h.d,h.e,h.f)).toString():p}},2837:(ue,jt,w)=>{w.d(jt,{v:()=>ut,U:()=>C});var T=w(7102),E=w(1999),st=w(2492),N=/^#[a-fA-F0-9]+$/i,gt=/^rgb\((\d+),(\d+),(\d+)\)$/i,x=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const y=p=>{let P=null,h=null;if(p)if("transparent"==p)P="#000000",h=0;else if(p.match(N))P=p;else{let L=(p=p.replace(/\s+/g,"")).match(x);if(L)P="#"+(256|L[1]).toString(16).slice(1)+(256|L[2]).toString(16).slice(1)+(256|L[3]).toString(16).slice(1),h=(0,st.z)(parseFloat(L[4]),100);else{let D=p.match(gt);D&&(P="#"+(256|D[1]).toString(16).slice(1)+(256|D[2]).toString(16).slice(1)+(256|D[3]).toString(16).slice(1))}}return{hex:P,alpha:h}};var M=w(4896);const C=p=>O(null==p?void 0:p.url,null==p?void 0:p.path,null==p?void 0:p.src);var O=(p,P,h)=>{var L,D;let V,Y,tt,H;var G,Ct;return p&&(V=p.replace(/\\/g,"/")),P&&(Y=P.replace(/\\/g,"/")),h&&(tt=h.replace(/\\/g,"/")),Y&&!V&&(V=(null===(G=T.L.config)||void 0===G?void 0:G.readfileuploadurl)+Y),!tt||Y||V||(Y=tt.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),V=(null===(Ct=T.L.config)||void 0===Ct?void 0:Ct.readfileuploadurl)+Y),H=(null!==(L=V)&&void 0!==L?L:"").split("/").pop()||(null!==(D=Y)&&void 0!==D?D:"").split("/").pop()||"",{url:V,path:Y,name:H}};const ut=p=>{let P={x:0,y:0,width:p.screen.w,height:p.screen.h},h=[];return p.data.forEach((L,D)=>{var V,Y;let tt={id:"number"==typeof L.id?L.id:T.L.data.newSlideId,code:null===(V=L.id)||void 0===V?void 0:V.toString(),name:"string"==typeof L.id?L.id:`Trang ${D+1}`,svg:{viewBox:P,nodes:[]},test:(H=L.test2,H?(H.audiotrue&&(H.audiotrue=C({path:H.audiotrue.path})),H.audiofalse&&(H.audiofalse=C({path:H.audiofalse.path})),H.effecttrue&&(H.effecttrue=C({path:H.effecttrue.path})),H.effectfalse&&(H.effectfalse=C({path:H.effectfalse.path})),H.icontrue&&(H.icontrue=C({path:H.icontrue.path})),H.iconfalse&&(H.iconfalse=C({path:H.iconfalse.path})),H):{})};var H;L.background&&tt.svg&&(tt.svg.background=function(p){return p&&(null!==p.match(/#([a-zA-Z0-9]+)/)||null!==p.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==p.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(L.background)?{color:L.background}:function(p){return p&&null!==p.match(/data:[^;]+;base64,/)}(L.background)?{base64:L.background}:function(p){return p&&null!==p.match(/http(s)?:\/\//)}(L.background)?O(L.background):O(void 0,L.background)),jQuery(null!==(Y=L.svg)&&void 0!==Y?Y:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((H,G)=>{var Ct,Xt;let Jt=jQuery(G).parents(".indexs"),Ht=Jt.attr("data-index"),Bt=Jt.attr("data-time"),nt=null!==(Ct=G.getAttribute("id"))&&void 0!==Ct?Ct:(1e9*Math.random()).toFixed(),bt={id:parseInt(nt),code:`${G.nodeName}-${nt}`,name:G.nodeName,idx:Ht?parseInt(Ht):0,time:Bt?parseFloat(Bt):0,type:(()=>{switch(G.nodeName){case"polygon":return E.h.POLYGON;case"path":return E.h.PATH;case"circle":return E.h.CIRCLE;case"ellipse":return E.h.ELLIPSE;case"line":return E.h.LINE;case"rect":return E.h.RECT;case"foreignObject":return E.h.FOREIGNOBJECT}return 0})(),size:(et=>{let At={},St=0,kt=0,mt=0,U=0,Q=null,d=null,at=parseFloat((null===(et=G.getAttribute("transform"))||void 0===et?void 0:et.replace("rotate(","").replace(")",""))||"0")||null;switch(G.nodeName){case"polygon":{var xt,zt;let Dt=[],Gt=[],Kt=999999999,Vt=999999999,yt=0,Pt=0;Q=JSON.parse(G.getAttribute("ratios")||"[]"),d=null!==(xt=null===(zt=G.getAttribute("points"))||void 0===zt?void 0:zt.split(",").map(function(K){return K.split(" ").map(function(u){return parseFloat(u)})}))&&void 0!==xt?xt:[],d.forEach(function(K){Dt.push(K[0]),Gt.push(K[1])}),Kt=Math.min.apply(null,Dt),Vt=Math.min.apply(null,Gt),yt=Math.max.apply(null,Dt),Pt=Math.max.apply(null,Gt),St=Kt,kt=Vt,mt=yt-St,U=Pt-kt;break}case"path":{let Dt=G.getAttribute("d");if(Dt){let Gt=(0,M.CS)(Dt),{minX:Kt,minY:Vt,maxX:yt,maxY:Pt}=(0,M.lP)(Gt);St=Kt,kt=Vt,mt=yt-St||1,U=Pt-kt||1,Object.assign(At,{ratioMaps:(0,M.nf)({x:St,y:kt,width:mt,height:U},Gt)})}break}case"circle":{let Dt=parseFloat(G.getAttribute("cx")||"0"),Gt=parseFloat(G.getAttribute("cy")||"0"),Kt=parseFloat(G.getAttribute("r")||"0");St=Dt-Kt,kt=Gt-Kt,mt=2*Kt,U=2*Kt;break}case"ellipse":{let Dt=parseFloat(G.getAttribute("cx")||"0"),Gt=parseFloat(G.getAttribute("cy")||"0"),Kt=parseFloat(G.getAttribute("rx")||"0"),Vt=parseFloat(G.getAttribute("ry")||"0");St=Dt-Kt,kt=Gt-Vt,mt=2*Kt,U=2*Vt;break}case"line":{let Dt=parseFloat(G.getAttribute("x1")||"0"),Gt=parseFloat(G.getAttribute("y1")||"0"),Kt=parseFloat(G.getAttribute("x2")||"0"),Vt=parseFloat(G.getAttribute("y2")||"0"),yt=999999999,Pt=999999999,K=0,u=0;yt=Math.min(Dt,Kt),Pt=Math.min(Gt,Vt),K=Math.max(Dt,Kt),u=Math.max(Gt,Vt),St=yt,kt=Pt,mt=K-St,U=u-kt,Q=[[(Dt-St)/(mt||1),(Gt-kt)/(U||1)],[(Kt-St)/(mt||1),(Vt-kt)/(U||1)]];break}case"rect":case"foreignObject":St=parseFloat(G.getAttribute("x")||"0"),kt=parseFloat(G.getAttribute("y")||"0"),mt=parseFloat(G.getAttribute("width")||"0"),U=parseFloat(G.getAttribute("height")||"0")}return Object.assign(At,{x:St,y:kt,width:mt,height:U,ratios:Q,points:d,rotate:at})})(),attribute:(()=>{let et={};switch(G.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var At,St,kt,mt,U,Q,d,at;let K=null!==(At=G.getAttribute("fill"))&&void 0!==At?At:null,u=null!==(St=G.getAttribute("stroke"))&&void 0!==St?St:null,Z=null!==(kt=parseFloat(null!==(mt=G.getAttribute("stroke-opacity"))&&void 0!==mt?mt:"1"))&&void 0!==kt?kt:null,dt=null!==(U=parseFloat(G.getAttribute("stroke-width")||"0"))&&void 0!==U?U:null,it=null!==(Q=G.getAttribute("stroke-linecap"))&&void 0!==Q?Q:null,X=null!==(d=G.getAttribute("stroke-linejoin"))&&void 0!==d?d:null,J=null!==(at=parseFloat(G.getAttribute("stroke-dasharray")||"0"))&&void 0!==at?at:null;Object.assign(et,{fill:K,stroke:u,strokeOpacity:Z,strokeWidth:dt,strokeLinecap:it,strokeLinejoin:X,strokeDasharray:J});break}case"path":{let K=Jt.get(0);if(K){var xt,zt,Dt,Gt,Kt,Vt,yt,Pt;let u=null!==(xt=K.getAttribute("fill"))&&void 0!==xt?xt:null,Z=null!==(zt=K.getAttribute("stroke"))&&void 0!==zt?zt:null,dt=null!==(Dt=parseFloat(null!==(Gt=K.getAttribute("stroke-opacity"))&&void 0!==Gt?Gt:"1"))&&void 0!==Dt?Dt:null,it=null!==(Kt=parseFloat(K.getAttribute("stroke-width")||"0"))&&void 0!==Kt?Kt:null,X=null!==(Vt=K.getAttribute("stroke-linecap"))&&void 0!==Vt?Vt:null,J=null!==(yt=K.getAttribute("stroke-linejoin"))&&void 0!==yt?yt:null,rt=null!==(Pt=parseFloat(K.getAttribute("stroke-dasharray")||"0"))&&void 0!==Pt?Pt:null;Object.assign(et,{fill:u,stroke:Z,strokeOpacity:dt,strokeWidth:it,strokeLinecap:X,strokeLinejoin:J,strokeDasharray:rt})}break}}return et})(),style:(()=>{let et={};switch(G.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let kt=jQuery(G).find(".svg-container");if(kt.length){let U=parseFloat(kt.css("border-width")||"0")||null,Q=kt.css("border-style")||null,d=kt.css("border-color")||null,at=null,xt=kt.css("background-color")||null,zt=null;(()=>{let{hex:Dt,alpha:Gt}=y(d);d=Dt,at=Gt})(),(()=>{let{hex:Dt,alpha:Gt}=y(xt);xt=Dt,zt=Gt})(),Object.assign(et,{borderWidth:U,borderStyle:Q,borderColor:d,borderOpacity:at,backgroundColor:xt,backgroundOpacity:zt})}let mt=jQuery(G).find(".svg-editor-content");if(mt.length){var At,St;let U=JSON.parse((mt.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:Q,alpha:d}=y(U.TextColor);Object.assign(et,{fontFamily:null!==(At=U.FontFamily)&&void 0!==At?At:null,fontSize:null!==(St=U.FontSize)&&void 0!==St?St:null,color:Q,opacity:d})}break}}return et})(),source:(()=>{let et={};switch(G.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Jt.hasClass("editors")){let yt=jQuery(G).find(".svg-editor-content");if(yt.length){var At;let Pt=yt.html(),K=null!==(At=(null!=Pt?Pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==At?At:[];Object.assign(et,{type:"html",html:{htmlContent:Pt,variableKeywords:K}})}}else if(Jt.hasClass("inputs")||Jt.hasClass("textareas"))Object.assign(et,{type:"input",input:{input:!!jQuery(G).find("input").length,textarea:!!jQuery(G).find("textarea").length}});else if(Jt.hasClass("tests")){let yt=jQuery(G).find(".svg-test");if(Jt.hasClass("tests-truefalse")){var St,kt;let Pt=yt.find(".svg-editor-content").html(),K=null!==(St=(null!=Pt?Pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==St?St:[];Object.assign(et,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(kt=L.test2.truefalse)||void 0===kt?void 0:kt.includes(nt)}},html:{htmlContent:Pt,variableKeywords:K}})}else if(Jt.hasClass("tests-singlechoice")){var mt,U;let Pt=yt.find(".svg-editor-content").html(),K=null!==(mt=(null!=Pt?Pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==mt?mt:[];Object.assign(et,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(U=L.test2.singlechoice)||void 0===U?void 0:U.includes(nt)}},html:{htmlContent:Pt,variableKeywords:K}})}else if(Jt.hasClass("tests-multichoice")){var Q,d;let Pt=yt.find(".svg-editor-content").html(),K=null!==(Q=(null!=Pt?Pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Q?Q:[];Object.assign(et,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(d=L.test2.multichoice)||void 0===d?void 0:d.includes(nt)}},html:{htmlContent:Pt,variableKeywords:K}})}else if(Jt.hasClass("tests-fill")){var at,xt;let Pt=yt.find(".svg-editor-content").html(),K=null!==(at=(null!=Pt?Pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==at?at:[],u=null!==(xt=(null!=Pt?Pt:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==xt?xt:[];u=u.filter((Z,dt,it)=>it.indexOf(Z)==dt),Object.assign(et,{type:"test",test:{type:"fill",fill:u.map(Z=>{var dt;return{key:Z,value:null===(dt=L.test2.fill)||void 0===dt||null===(dt=dt.find(it=>it.id==nt))||void 0===dt||null===(dt=dt.vals)||void 0===dt?void 0:dt.map(it=>it.text).filter(it=>!["",null,void 0,NaN].includes(it))}})},html:{htmlContent:Pt,variableKeywords:K,fillKeywords:u}})}else if(Jt.hasClass("tests-matching")){if(yt.hasClass("svg-test-empty"))Object.assign(et,{type:"test",test:{type:"matching-empty",matching:{key:yt.attr("data-name")||null}}});else if(yt.hasClass("svg-test-content")){var zt;let Pt=yt.find(".svg-editor-content").html(),K=null!==(zt=(null!=Pt?Pt:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==zt?zt:[];Object.assign(et,{type:"test",test:{type:"matching-content",matching:{key:yt.attr("data-name")||null}},html:{htmlContent:Pt,variableKeywords:K}})}}else if(Jt.hasClass("tests-speech")){var Dt;Object.assign(et,{type:"speech",speech:{value:null===(Dt=L.test2.speech)||void 0===Dt||null===(Dt=Dt.find(Pt=>Pt.id==nt))||void 0===Dt||null===(Dt=Dt.vals)||void 0===Dt?void 0:Dt.map(Pt=>Pt.text).filter(Pt=>!["",null,void 0,NaN].includes(Pt))}})}else if(Jt.hasClass("tests-submit")){let Pt=jQuery(G).find(".svg-container img");Object.assign(et,{type:"test",test:{type:"submit"},image:O(Pt.attr("url"),Pt.attr("path"),Pt.attr("src"))})}}else if(Jt.hasClass("images")){let yt=jQuery(G).find(".svg-editor-content img");if(yt.length)Object.assign(et,{type:"image",image:O(yt.attr("url"),yt.attr("path"),yt.attr("src"))});else{let Pt=jQuery(G).find("iframe");Object.assign(et,{type:"iframe",iframe:O(Pt.attr("url"),Pt.attr("path"),Pt.attr("src"))})}}else if(Jt.hasClass("sounds")){let yt=jQuery(G).find(".svg-editor-content img");yt.length&&Object.assign(et,{type:"image",image:O(yt.attr("url"),yt.attr("path"),yt.attr("src"))})}else if(Jt.hasClass("htmls")){let yt=jQuery(G).find("iframe");yt.length&&Object.assign(et,{type:"iframe",iframe:O(yt.attr("url"),yt.attr("path"),yt.attr("src"))})}else if(Jt.hasClass("svgs")){let yt=jQuery(G).find("svg");var Gt,Kt;yt.length&&Object.assign(et,{type:"svg",svg:Object.assign(O(yt.attr("url"),yt.attr("path"),yt.attr("src")),{svgContent:null!==(Gt=null===(Kt=yt.get(0))||void 0===Kt?void 0:Kt.outerHTML)&&void 0!==Gt?Gt:null})})}else if(Jt.hasClass("medias")){let yt=jQuery(G).find(".media-item");if(yt.length)switch(yt.attr("type")){case"audio":Object.assign(et,{type:"audio",audio:O(yt.attr("url"),yt.attr("path"),yt.attr("src"))});break;case"video":Object.assign(et,{type:"video",video:O(yt.attr("url"),yt.attr("path"),yt.attr("src"))});break;case"file":Object.assign(et,{type:"file",file:O(yt.attr("url"),yt.attr("path"),yt.attr("src"))});break;default:var Vt;Object.assign(et,{type:"link",link:{url:null!==(Vt=yt.attr("url"))&&void 0!==Vt?Vt:null}})}let Pt=jQuery(G).find("img");Pt.length&&(Object.assign(et,{image:O(Pt.attr("url"),Pt.attr("path"),Pt.attr("src"))}),et.type||Object.assign(et,{type:"image"}))}}return et})(),animate:(et=>{let At={},St=null===(et=L.animates)||void 0===et?void 0:et.find(kt=>kt.elementId==nt);return St&&Object.assign(At,{value:St.value}),At})(),interactive:(()=>{let et={},At=L.actions.show.filter(kt=>kt.elementId==nt&&kt.active);At.length&&(et.show={},At.forEach(kt=>{let{source:mt}=kt;switch(null==mt?void 0:mt.type){case"work":var U,Q,d,at,xt;et.show.action={},Object.assign(et.show.action,{value:null!==(U=mt.value)&&void 0!==U?U:null,iteration:null!==(Q=mt.iteration)&&void 0!==Q?Q:null,finish:null!==(d=mt.end)&&void 0!==d?d:null,time:null!==(at=mt.time)&&void 0!==at?at:null,points:null!==(xt=mt.points)&&void 0!==xt?xt:null});break;case"audio":var zt,Dt,Gt;et.show.audio={},Object.assign(et.show.audio,{source:O(null,null,mt.url),iteration:null!==(zt=mt.iteration)&&void 0!==zt?zt:null,finish:null!==(Dt=mt.end)&&void 0!==Dt?Dt:null,time:null!==(Gt=mt.time)&&void 0!==Gt?Gt:null,async:-1==mt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Kt,Vt,yt,Pt,K,u,Z,dt,it,X,J,rt,z,q,Et;mt.options.includes("show")&&(et.show.triggershow={},Object.assign(et.show.triggershow,{id:null!==(Kt=parseInt(null!==(Vt=mt.id)&&void 0!==Vt?Vt:"0"))&&void 0!==Kt?Kt:null,ids:null===(yt=mt.ids)||void 0===yt?void 0:yt.map(Mt=>parseInt(Mt)),async:null!==(Pt=mt.async)&&void 0!==Pt?Pt:null,time:null!==(K=mt.time)&&void 0!==K?K:null})),mt.options.includes("run")&&(et.show.triggerrun={},Object.assign(et.show.triggerrun,{id:null!==(u=parseInt(null!==(Z=mt.id)&&void 0!==Z?Z:"0"))&&void 0!==u?u:null,ids:null===(dt=mt.ids)||void 0===dt?void 0:dt.map(Mt=>parseInt(Mt)),async:null!==(it=mt.async)&&void 0!==it?it:null,time:null!==(X=mt.time)&&void 0!==X?X:null})),mt.options.includes("hide")&&(et.show.triggerhide={},Object.assign(et.show.triggerhide,{id:null!==(J=parseInt(null!==(rt=mt.id)&&void 0!==rt?rt:"0"))&&void 0!==J?J:null,ids:null===(z=mt.ids)||void 0===z?void 0:z.map(Mt=>parseInt(Mt)),async:null!==(q=mt.async)&&void 0!==q?q:null,time:null!==(Et=mt.time)&&void 0!==Et?Et:null}))}}));let St=L.actions.click.filter(kt=>kt.elementId==nt&&kt.active);return St&&(et.click={},St.forEach(kt=>{let{source:mt}=kt;switch(null==mt?void 0:mt.type){case"work":var U,Q,d,at,xt;et.click.action={},Object.assign(et.click.action,{value:null!==(U=mt.value)&&void 0!==U?U:null,iteration:null!==(Q=mt.iteration)&&void 0!==Q?Q:null,finish:null!==(d=mt.end)&&void 0!==d?d:null,time:null!==(at=mt.time)&&void 0!==at?at:null,points:null!==(xt=mt.points)&&void 0!==xt?xt:null});break;case"audio":var zt,Dt,Gt;et.click.audio={},Object.assign(et.click.audio,{source:O(null,null,mt.url),iteration:null!==(zt=mt.iteration)&&void 0!==zt?zt:null,finish:null!==(Dt=mt.end)&&void 0!==Dt?Dt:null,time:null!==(Gt=mt.time)&&void 0!==Gt?Gt:null,async:-1==mt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Kt,Vt,yt,Pt,K,u,Z,dt,it,X,J,rt,z,q,Et;mt.options.includes("show")&&(et.click.triggershow={},Object.assign(et.click.triggershow,{id:null!==(Kt=parseInt(null!==(Vt=mt.id)&&void 0!==Vt?Vt:"0"))&&void 0!==Kt?Kt:null,ids:null===(yt=mt.ids)||void 0===yt?void 0:yt.map(pt=>parseInt(pt)),async:null!==(Pt=mt.async)&&void 0!==Pt?Pt:null,time:null!==(K=mt.time)&&void 0!==K?K:null})),mt.options.includes("run")&&(et.click.triggerrun={},Object.assign(et.click.triggerrun,{id:null!==(u=parseInt(null!==(Z=mt.id)&&void 0!==Z?Z:"0"))&&void 0!==u?u:null,ids:null===(dt=mt.ids)||void 0===dt?void 0:dt.map(pt=>parseInt(pt)),async:null!==(it=mt.async)&&void 0!==it?it:null,time:null!==(X=mt.time)&&void 0!==X?X:null})),mt.options.includes("hide")&&(et.click.triggerhide={},Object.assign(et.click.triggerhide,{id:null!==(J=parseInt(null!==(rt=mt.id)&&void 0!==rt?rt:"0"))&&void 0!==J?J:null,ids:null===(z=mt.ids)||void 0===z?void 0:z.map(pt=>parseInt(pt)),async:null!==(q=mt.async)&&void 0!==q?q:null,time:null!==(Et=mt.time)&&void 0!==Et?Et:null}));break;case"slide":var Mt;et.click.slide={},Object.assign(et.click.slide,{id:parseInt(null!==(Mt=mt.id)&&void 0!==Mt?Mt:"0")||mt.num||null,code:mt.id})}})),et})(),variable:(et=>{let At={};var St;G.getAttribute("data-variable")&&(At.input={},Object.assign(At.input,{variable:null!==(St=G.getAttribute("data-variable"))&&void 0!==St?St:null}));let kt=null===(et=L.nodes)||void 0===et||null===(et=et.find(at=>at.id==nt))||void 0===et?void 0:et.variable;var mt,U,Q,d;return kt&&(At.click={},Object.assign(At.click,{variable:null!==(mt=kt.variable)&&void 0!==mt?mt:null,operator:null!==(U=kt.operator)&&void 0!==U?U:null,valuetype:null!==(Q=kt.valuetype)&&void 0!==Q?Q:null,value:null!==(d=kt.value)&&void 0!==d?d:null})),At})()};null===(Xt=tt.svg)||void 0===Xt||Xt.nodes.push(bt)}),h.push(tt)}),{screen:{width:p.screen.w,height:p.screen.h},data:{slides:h},variable:p.variable}}},6195:(ue,jt,w)=>{w.d(jt,{A9:()=>I,IB:()=>f,_4:()=>M,_5:()=>gt,ar:()=>x,yW:()=>y});var T=w(467),E=w(119);E.config({driver:[E.INDEXEDDB,E.LOCALSTORAGE,E.WEBSQL],name:"_localDataDB",version:1});const N={create:(A=(0,T.A)(function*(){return E}),function(){return A.apply(this,arguments)}),get:function(){var A=(0,T.A)(function*(C){return E.getItem(C)});return function(O){return A.apply(this,arguments)}}(),set:function(){var A=(0,T.A)(function*(C,O){return E.setItem(C,O)});return function(O,ut){return A.apply(this,arguments)}}()},gt=function(){var A=(0,T.A)(function*(C){yield N.create();var O=(yield N.get("icdt-data"))||[];"function"==typeof C.callback&&C.callback(O)});return function(O){return A.apply(this,arguments)}}(),x=function(){var A=(0,T.A)(function*(C){yield N.create(),C.params=C.params||{};try{yield N.set("icdt-data",C.params),"function"==typeof C.callback&&C.callback(C.params)}catch(O){"function"==typeof C.callback&&C.callback(null),console.error(O)}});return function(O){return A.apply(this,arguments)}}(),y=function(){var A=(0,T.A)(function*(C){yield N.create();try{var O=(yield N.get("icdt-config"))||{};"function"==typeof C.callback&&C.callback(O)}catch(ut){"function"==typeof C.callback&&C.callback(null),console.error(ut)}});return function(O){return A.apply(this,arguments)}}(),M=function(){var A=(0,T.A)(function*(C){yield N.create(),C.params=C.params||{};try{yield N.set("icdt-config",C.params),"function"==typeof C.callback&&C.callback(C.params)}catch(O){"function"==typeof C.callback&&C.callback(null),console.error(O)}});return function(O){return A.apply(this,arguments)}}(),I=function(){var A=(0,T.A)(function*(C){yield N.create();try{var O=(yield N.get("icdt-clipboard"))||{};"function"==typeof C.callback&&C.callback(O)}catch(ut){"function"==typeof C.callback&&C.callback(null),console.error(ut)}});return function(O){return A.apply(this,arguments)}}(),f=function(){var A=(0,T.A)(function*(C){yield N.create(),C.params=C.params||{};try{yield N.set("icdt-clipboard",C.params),"function"==typeof C.callback&&C.callback(C.params)}catch(O){"function"==typeof C.callback&&C.callback(null),console.error(O)}});return function(O){return A.apply(this,arguments)}}();var A},6315:(ue,jt,w)=>{w.d(jt,{w:()=>T});const T=(E,st)=>{if(!E)return"";let N=E.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),gt=(N&&N[4]||"").trim(),x=N?(256|N[1]).toString(16).slice(1)+(256|N[2]).toString(16).slice(1)+(256|N[3]).toString(16).slice(1):E;if("0"==gt)return"transparent";if(st){let y;y=""!==gt?gt:"01",y=(255*y|256).toString(16).slice(1),x+=y}return console.log(`lib_rgba2hex: ${E} -> ${x}`),`#${x}`}},7873:(ue,jt,w)=>{w.d(jt,{F:()=>T});const T={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},2409:(ue,jt,w)=>{w.d(jt,{F:()=>T});const T={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(ue,jt,w)=>{w.d(jt,{P:()=>T});const T={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(ue,jt,w)=>{w.d(jt,{Q:()=>T});const T={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(ue,jt,w)=>{w.d(jt,{h:()=>T});const T={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},8338:(ue,jt,w)=>{w.d(jt,{S:()=>T});const T={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},7102:(ue,jt,w)=>{w.d(jt,{L:()=>wt});var T=w(3603),E=w(5970),st=w(7873),N=w(9506),gt=w(1308),x=w(6037),y=w(4333);const f=j=>{var i,r,o,n,l,g,m;let c=(null===(i=j.mouseEvent)||void 0===i?void 0:i.target)||(null===(r=j.touchEvent)||void 0===r?void 0:r.target),k=(null===(o=c)||void 0===o?void 0:o.getAttribute("id"))||"",_=null===(n=c)||void 0===n?void 0:n.nodeName;wt.dataSelect.nodeName.includes(_)||(c=jQuery(c).parents("foreignObject").get(0),c&&(k=c.getAttribute("id")||"",_=c.nodeName));let B=(null===(l=c)||void 0===l||null===(l=l.parentNode)||void 0===l?void 0:l.getAttribute("id"))||"";var R,ct;if([st.F.RESIZE_GROUP,st.F.SELECT_GROUP].includes(B))return null===(R=j.mouseEvent)||void 0===R||R.stopPropagation(),void(null===(ct=j.mouseEvent)||void 0===ct||ct.preventDefault());if(null!==(g=j.mouseEvent)&&void 0!==g&&g.altKey||null!==(m=j.touchEvent)&&void 0!==m&&m.altKey||!k||k.match(/[^0-9]/)||!wt.dataSelect.nodeName.includes(_)){var vt;wt.dataSelect.ids.length&&(wt.dataSelect.ids=[]),(0==(null===(vt=j.mouseEvent)||void 0===vt?void 0:vt.button)||j.touchEvent)&&(j=>{let l=(0,E.RY)(st.F.SCAN_GROUP,"g"),g=(0,N.CE)(0,0,1,1);(0,E.xJ)(l,g),((j,i,r)=>{(0,gt.I)(j,{start:l=>{},move:(l,g)=>{((l,g,m,c)=>{i=(0,N.CE)(l,g,m,c),(0,E.xJ)(r,i)})(g[0][0],g[0][1],l.x,l.y)},end:(l,g)=>{null==r||r.remove(),wt.dataSelect.ids=wt.data.getNodeInArea(Math.min(g[0][0],l.x),Math.min(g[0][1],l.y),Math.max(g[0][0],l.x),Math.max(g[0][1],l.y));let m=wt.dataSelect.nodes;1==m.length?(0,x.K)(m[0]):m.length>1&&(0,y.E)(m)}})})(j,g,l)})(j)}else{var _t,Rt;let qt=parseFloat(k||"0");wt.dataSelect.ids=null!==(_t=j.mouseEvent)&&void 0!==_t&&_t.shiftKey||null!==(Rt=j.touchEvent)&&void 0!==Rt&&Rt.shiftKey?[qt].concat(wt.dataSelect.ids).filter((ve,me,pe)=>pe.indexOf(ve)==me):[qt];let ye=wt.dataSelect.nodes;ye.length>1?(0,y.E)(ye):1==ye.length&&(0,x.K)(ye[0])}};class C{constructor(){let{x:i,y:r}=wt.screen.dislocation;var o=(n,l,g,m)=>{wt.screen.move({x:i,y:r},{x:g-n,y:m-l})};return{start:n=>{},move:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)},end:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)}}}}var O=w(1999),ut=w(4888);const p=[{name:"tam gi\xe1c vu\xf4ng",type:ut.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:ut.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:ut.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:ut.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:ut.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:ut.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:ut.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:ut.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:ut.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:ut.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:ut.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:ut.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:ut.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var P=w(1281),h=w(2492);class L{constructor(){let i=(0,E.RY)(st.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,P.K)(Math.ceil(1e9*Math.random())),g=(m,c,k,_)=>{l=(0,N.CE)(m,c,k,_,{ratio:1}),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,N.xW)(O.h.CIRCLE,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:m=>{g(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,c)=>{g(c[0][0],c[0][1],m.x,m.y)},end:(m,c)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,N.xW)(O.h.CIRCLE,l,n)),(0,E.tD)(o,n)),wt.data.node=Object.assign({id:r,type:O.h.CIRCLE,name:"Circle"},{size:l,attribute:n}),null==i||i.remove()}}}}var D=w(6153);class V{constructor(){let i=(0,E.RY)(st.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,D.W)(Math.ceil(1e9*Math.random()));var g=(m,c,k,_)=>{l=(0,N.CE)(m,c,k,_),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,N.xW)(O.h.ELLIPSE,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:m=>{g(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,c)=>{g(c[0][0],c[0][1],m.x,m.y)},end:(m,c)=>{(l.width<=16||l.height<=16)&&(l.width=90,l.height=60,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,N.xW)(O.h.ELLIPSE,l,n)),(0,E.tD)(o,n)),wt.data.node=Object.assign({id:r,type:O.h.ELLIPSE,name:"Ellipse"},{size:l,attribute:n}),null==i||i.remove()}}}}var Y=w(7945);class tt{constructor(){let i=(0,E.RY)(st.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,Y.a)(Math.ceil(1e9*Math.random()));var g=(m,c,k,_)=>{l=(0,N.CE)(m,c,k,_),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,N.xW)(O.h.RECT,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:m=>{g(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,c)=>{g(c[0][0],c[0][1],m.x,m.y)},end:(m,c)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,N.xW)(O.h.RECT,l,n)),(0,E.tD)(o,n)),wt.data.node=Object.assign({id:r,type:O.h.RECT,name:"Rect"},{size:l,attribute:n}),null==i||i.remove()}}}}var H=w(3477);class G{constructor(i){let r=(0,E.RY)(st.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:n,element:l,attribute:g,size:m}=(0,H.u)(Math.ceil(1e9*Math.random()));m.ratios=o;var c=(k,_,B,R)=>{m=(0,N.CE)(k,_,B,R,{ratios:o}),m.x=(0,h.z)(m.x),m.y=(0,h.z)(m.y),m.width=(0,h.z)(m.width),m.height=(0,h.z)(m.height),Object.assign(g,(0,N.xW)(O.h.POLYGON,m,g)),(0,E.tD)(l,g),(0,E.in)(r,m)};return{start:k=>{c(k.x,k.y,k.x+m.width,k.y+m.height)},move:(k,_)=>{c(_[0][0],_[0][1],k.x,k.y)},end:(k,_)=>{(m.width<=16||m.height<=16)&&(m.width=80,m.height=80,m.x=m.x-m.width/2,m.y=m.y-m.height/2,Object.assign(g,(0,N.xW)(O.h.POLYGON,m,g)),(0,E.tD)(l,g)),wt.data.node=Object.assign({id:n,type:O.h.POLYGON,name:"Polygon"},{size:m,attribute:g}),null==r||r.remove()}}}}var Ct=w(3069);class Xt{constructor(){let i=(0,E.RY)(st.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,Ct.q)(Math.ceil(1e9*Math.random()));return{start:m=>{},move:(m,c)=>{((m,c,k,_)=>{l=(0,N.CE)(m,c,k,_),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,N.xW)(O.h.LINE,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)})(c[0][0],c[0][1],m.x,m.y)},end:(m,c)=>{c.length>=2?((l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,N.xW)(O.h.LINE,l,n)),(0,E.tD)(o,n)),wt.data.node=Object.assign({id:r,type:O.h.LINE,name:"Line"},{size:l,attribute:n})):null==o||o.remove(),null==i||i.remove()}}}}var Jt=w(4896),Ht=w(6407);class Bt{constructor(){let{nodeId:i,element:r,attribute:o,size:n}=(0,Ht.X)(Math.ceil(1e9*Math.random())),g="";return{start:c=>{g=`M ${c.x} ${c.y} L ${c.x} ${c.y}`},move:(c,k)=>{((c,k)=>{g+=` ${c} ${k}`,r.setAttribute("d",g)})(c.x,c.y)},end:(c,k)=>{let _=(0,Jt.CS)(g),{minX:B,minY:R,maxX:ct,maxY:vt}=(0,Jt.lP)(_);n.x=B,n.y=R,n.width=ct-B||1,n.height=vt-R||1,n.ratioMaps=(0,Jt.nf)(n,_),wt.data.node=Object.assign({id:i,type:O.h.PATH,name:"Path"},{size:n,attribute:o})}}}}var nt=w(745);class bt{constructor(){let i=(0,E.RY)(st.F.CREATE_GROUP,"g"),{nodeId:r,element:o,size:n,attribute:l,style:g,source:m}=(0,nt.$)(Math.ceil(1e9*Math.random()));var c=(k,_,B,R)=>{n=(0,N.CE)(k,_,B,R),n.x=(0,h.z)(n.x),n.y=(0,h.z)(n.y),n.width=(0,h.z)(n.width),n.height=(0,h.z)(n.height),Object.assign(l,(0,N.xW)(O.h.FOREIGNOBJECT,n,l)),(0,E.tD)(o,l),(0,E.in)(i,n)};return{start:k=>{c(k.x,k.y,k.x+n.width,k.y+n.height)},move:(k,_)=>{c(_[0][0],_[0][1],k.x,k.y)},end:(k,_)=>{(n.width<=16||n.height<=16)&&(n.width=90,n.height=60,n.x=n.x-n.width/2,n.y=n.y-n.height/2,Object.assign(l,(0,N.xW)(O.h.FOREIGNOBJECT,n,l)),(0,E.tD)(o,l)),wt.data.node=Object.assign({id:r,type:O.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:g,source:m}),null==i||i.remove()}}}}var et=w(9173);class At{constructor(){var i,r;let o=(0,E.RY)(st.F.CREATE_GROUP,"g"),{nodeId:n,element:l,size:g,attribute:m,source:c}=(0,et.B)(Math.ceil(1e9*Math.random())),k=1;(B=>{if(!B)return;let R=new Image;R.onload=()=>{k=(0,h.z)(R.naturalWidth/R.naturalHeight,100)},R.onerror=ct=>{console.error(`ImgSrc load failed -> ${B}`,ct)},R.src=B})(null!==(i=null===(r=c.image)||void 0===r?void 0:r.url)&&void 0!==i?i:"");var _=(B,R,ct,vt)=>{g=(0,N.CE)(B,R,ct,vt,{ratio:k}),g.x=(0,h.z)(g.x),g.y=(0,h.z)(g.y),g.width=(0,h.z)(g.width),g.height=(0,h.z)(g.height),Object.assign(m,(0,N.xW)(O.h.IMAGE,g,m)),(0,E.tD)(l,m),(0,E.in)(o,g)};return{start:B=>{_(B.x,B.y,B.x+g.width,B.y+g.height)},move:(B,R)=>{_(R[0][0],R[0][1],B.x,B.y)},end:(B,R)=>{(g.width<=16||g.height<=16)&&(g.width=80,g.height=80,g.x=g.x-g.width/2,g.y=g.y-g.height/2,Object.assign(m,(0,N.xW)(O.h.IMAGE,g,m)),(0,E.tD)(l,m)),wt.data.node=Object.assign({id:n,type:O.h.IMAGE,name:"Image"},{size:g,attribute:m,source:c}),null==o||o.remove()}}}}var kt=w(7135),mt=w(4979);function d(j,i,r,o){return Math.sqrt(Math.pow(r-j,2)+Math.pow(o-i,2))}function at(j,i,r,o,n){return d(j,i,r,o)<n?1:0}function zt(j,i,r,o,n,l,g){var m=[];return m.push(at(j,i,r,o,g)),m.push(at(j,i,n,l,g)),m.push(function xt(j,i,r,o,n,l,g){var m=[n-r,l-o],c=[j-r,i-o],k=[-m[1],m[0]],_=Math.sqrt(Math.pow(k[0],2)+Math.pow(k[1],2)),B=[k[0]/_,k[1]/_],R=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)),ct=[m[0]/R,m[1]/R],vt=c[0]*ct[0]+c[1]*ct[1];if(vt<=0||vt>=R)return 0;var _t=c[0]*B[0]+c[1]*B[1];return _t>=g||_t<=-g?0:1}(j,i,r,o,n,l,g)),m}function Dt(j,i,r,o,n){var l=[r-j,o-i],g=[-l[1],l[0]],m=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)),c=[g[0]/m,g[1]/m];return[[j+n*c[0],i+n*c[1]],[j-n*c[0],i-n*c[1]],[r-n*c[0],o-n*c[1]],[r+n*c[0],o+n*c[1]]]}function Gt(j,i,r,o,n,l,g){var vt,m=[n-j,l-i],c=[r-j,o-i],k=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),_=[c[0]/k,c[1]/k],B=m[0]*_[0]+m[1]*_[1],R=[j+B*_[0],i+B*_[1]],ct=Math.sqrt(Math.pow(n-R[0],2)+Math.pow(l-R[1],2));vt=0===ct?g:Math.sqrt(Math.pow(g,2)-Math.pow(ct,2));var _t=[j+B*_[0]+vt*_[0],i+B*_[1]+vt*_[1]];return _t[0]===j&&_t[1]===i?null:_t}function Kt(j,i,r,o,n,l,g){var m=[n-j,l-i],c=[r-j,o-i],k=[-c[1],c[0]],_=Math.sqrt(Math.pow(k[0],2)+Math.pow(k[1],2)),B=[k[0]/_,k[1]/_],R=m[0]*B[0]+m[1]*B[1],ct=Z([j,i],[r,o],[n,l]);if(K([ct[0]-n,ct[1]-l])>=g)return null;var _t=Math.sqrt(Math.pow(g,2)-Math.pow(R,2)),Rt=[n-R*B[0],l-R*B[1]],qt=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),ye=[c[0]/qt,c[1]/qt],ve=[[Rt[0]-ye[0]*_t,Rt[1]-ye[1]*_t],[Rt[0]+ye[0]*_t,Rt[1]+ye[1]*_t]];return ve[0][0]===j&&ve[0][1]===i?null:ve}function Vt(j,i,r,o,n,l,g,m){var c,k,_,B,R,ct;return-(_=g-n)*(k=o-i)+(c=r-j)*(B=m-l)==0?null:(ct=(_*(i-l)-B*(j-n))/(-_*k+c*B),(R=(-k*(j-n)+c*(i-l))/(-_*k+c*B))>=0&&R<=1&&ct>=0&&ct<=1?[j+ct*c,i+ct*k]:null)}function yt(j,i,r,o,n,l,g,m,c,k){var _=Dt(l,g,m,c,k),B=[];if(r[0]&&!r[1])B.push(Gt(j,i,o,n,l,g,k)),B.push(Vt(j,i,o,n,_[0][0],_[0][1],_[3][0],_[3][1])),B.push(Vt(j,i,o,n,_[1][0],_[1][1],_[2][0],_[2][1])),(R=Kt(j,i,o,n,m,c,k))&&B.push(R[0],R[1]);else if(!r[0]&&r[1])B.push(Gt(j,i,o,n,m,c,k)),B.push(Vt(j,i,o,n,_[0][0],_[0][1],_[3][0],_[3][1])),B.push(Vt(j,i,o,n,_[1][0],_[1][1],_[2][0],_[2][1])),(R=Kt(j,i,o,n,l,g,k))&&B.push(R[0],R[1]);else if(r[0]&&r[1])B.push(Gt(j,i,o,n,l,g,k)),B.push(Vt(j,i,o,n,_[0][0],_[0][1],_[3][0],_[3][1])),B.push(Vt(j,i,o,n,_[1][0],_[1][1],_[2][0],_[2][1])),B.push(Gt(j,i,o,n,m,c,k));else{var R=Kt(j,i,o,n,m,c,k),ct=Kt(j,i,o,n,l,g,k);R&&B.push(R[0],R[1]),ct&&B.push(ct[0],ct[1]),B.push(Vt(j,i,o,n,_[0][0],_[0][1],_[3][0],_[3][1])),B.push(Vt(j,i,o,n,_[1][0],_[1][1],_[2][0],_[2][1]))}for(var vt=[j,i],_t=0;_t<B.length;_t++)B[_t]&&d(B[_t][0],B[_t][1],o,n)<d(vt[0],vt[1],o,n)&&(vt=B[_t]);return vt[0]===j&&vt[1]===i?null:vt}function Pt(j,i,r,o,n,l,g,m,c){var k=Dt(n,l,g,m,c),_=[],B=Kt(j,i,r,o,n,l,c);B&&_.push(B[0],B[1]),(B=Kt(j,i,r,o,g,m,c))&&_.push(B[0],B[1]),_.push(Vt(j,i,r,o,k[0][0],k[0][1],k[3][0],k[3][1])),_.push(Vt(j,i,r,o,k[1][0],k[1][1],k[2][0],k[2][1]));for(var R=[r,o],ct=[j,i],vt=0;vt<_.length;vt++)_[vt]&&d(_[vt][0],_[vt][1],j,i)<d(R[0],R[1],j,i)&&(R=_[vt]);for(var _t=0;_t<_.length;_t++)_[_t]&&d(_[_t][0],_[_t][1],r,o)<d(ct[0],ct[1],r,o)&&(ct=_[_t]);return R[0]===r&&R[1]===o||ct[0]===j&&ct[1]===i?null:[R,ct]}var K=function(j){return Math.sqrt(j[0]*j[0]+j[1]*j[1])},Z=function(j,i,r){var o=[i[0]-j[0],i[1]-j[1]],n=K(o);if(n<1e-6)return j;var l=[r[0]-j[0],r[1]-j[1]],g=(o[0]*l[0]+o[1]*l[1])/n;return g<0?j:g>n?i:[j[0]+o[0]*g/n,j[1]+o[1]*g/n]};class dt{constructor(){let{element:o,size:l}=(0,Ht.X)(Math.ceil(1e9*Math.random()));(0,E.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let g="";return{start:k=>{g=`M ${k.x} ${k.y} L ${k.x} ${k.y}`},move:(k,_)=>{((k,_)=>{g+=` ${k} ${_}`,o.setAttribute("d",g)})(k.x,k.y)},end:(k,_)=>{o.remove(),(k=>{let _=9999,B=9999,R=-9999,ct=-9999;k.forEach(_t=>{_=Math.min(_,_t[0]),B=Math.min(B,_t[1]),R=Math.max(R,_t[0]),ct=Math.max(ct,_t[1])}),l=(0,N.CE)(_,B,R,ct,{points:k}),wt.data.getNodeInArea(0,0,1920,1920,O.h.PATH).forEach(_t=>{let qt=((j,i,r)=>{r=r||20;var o=[],n=function(_){var B=i[0][0],R=i[0][1],ct=0,vt=0;if(1!==_.length||at(_[0][0],_[0][1],B,R,r)){for(var _t;ct<_.length-1;){var Rt=_[ct],qt=_[ct+1],ye=at(Rt[0],Rt[1],B,R,r),ve=at(qt[0],qt[1],B,R,r);if(ye&&ve)vt=++ct;else if(ye&&!ve)(me=Gt(Rt[0],Rt[1],qt[0],qt[1],B,R,r))?(_[ct]=me,vt=ct):ct++;else if(!ye&&ve){var me;(me=Gt(qt[0],qt[1],Rt[0],Rt[1],B,R,r))&&((_t=_.slice(vt,ct+1)).push(me),o.push(_t)),vt=++ct}else{var pe=Kt(Rt[0],Rt[1],qt[0],qt[1],B,R,r);pe?(((_t=_.slice(vt,ct+1))[_t.length-1][0]!==pe[0][0]||_t[_t.length-1][1]!==pe[0][1])&&_t.push(pe[0]),_t.length>1&&o.push(_t),_[ct]=pe[1],_[ct+1]&&_[ct+1][0]==pe[1][0]&&_[ct+1][1]==pe[1][1]&&ct++,vt=ct):ct++}}vt!==ct&&(_t=_.slice(vt,_.length))&&o.push(_t)}else o.push(_)},l=function(_,B){var qt,R=i[B],ct=i[B+1],vt=0,_t=0;if(1!==_.length||-1!==(Rt=zt(_[0][0],_[0][1],R[0],R[1],ct[0],ct[1],r)).indexOf(1)){for(;vt<_.length-1;){var ye=_[vt],ve=_[vt+1],Rt=zt(ye[0],ye[1],R[0],R[1],ct[0],ct[1],r),me=zt(ve[0],ve[1],R[0],R[1],ct[0],ct[1],r);if(-1!==Rt.indexOf(1)&&-1!==me.indexOf(1))_t=++vt;else if(-1!==Rt.indexOf(1)&&-1===me.indexOf(1))(pe=yt(ye[0],ye[1],Rt,ve[0],ve[1],R[0],R[1],ct[0],ct[1],r))?(_[vt]=pe,_t=vt):vt++;else if(-1===Rt.indexOf(1)&&-1!==me.indexOf(1)){var pe;(pe=yt(ve[0],ve[1],me,ye[0],ye[1],R[0],R[1],ct[0],ct[1],r))?((qt=_.slice(_t,vt+1)).push(pe),o.push(qt),_t=++vt):vt++}else{var be=Pt(ye[0],ye[1],ve[0],ve[1],R[0],R[1],ct[0],ct[1],r);be?(((qt=_.slice(_t,vt+1))[qt.length-1][0]!==be[0][0]||qt[qt.length-1][1]!==be[0][1])&&qt.push(be[0]),qt.length>1&&o.push(qt),_[vt]=be[1],_[vt+1]&&_[vt+1][0]==be[1][0]&&_[vt+1][1]==be[1][1]&&vt++,_t=vt):vt++}}_t!==vt&&(qt=_.slice(_t,_.length))&&o.push(qt)}else o.push(_)};if(i=function Q(j){var i=[];if(1===j.length)i=j;else{for(var r=0;r<j.length-1;)(j[r][0]!==j[r+1][0]||j[r][1]!==j[r+1][1])&&i.push(j[r]),r++;0!==j.length&&0===i.length&&i.push(j[0]),(j[j.length-1][0]!==j[i.length-1][0]||j[j.length-1][1]!==j[i.length-1][1])&&i.push(j[r])}return i}(i),1===i.length){for(var g=0;g<j.length;g++)n(j[g]);j=o}else for(var m=0;m<i.length-1;m++){for(g=0;g<j.length;g++)l(j[g],m);j=o,o=[]}for(var c=0;c<j.length;c++)for(var k=0;k<j[c].length;k++)j[c][k][0]=Math.round(j[c][k][0]),j[c][k][1]=Math.round(j[c][k][1]);return j})(wt.data.getNode(_t).size.points,k,2);console.log(qt)})})(_)}}}}var X=w(6847);class J{constructor(){let i=(0,E.RY)(st.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l,source:g}=(0,X.L)(Math.ceil(1e9*Math.random())),m=(c,k,_,B)=>{l=(0,N.CE)(c,k,_,B),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,N.xW)(O.h.TEXT,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:c=>{m(c.x,c.y,c.x+l.width,c.y+l.height)},move:(c,k)=>{m(k[0][0],k[0][1],c.x,c.y)},end:(c,k)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,N.xW)(O.h.TEXT,l,n)),(0,E.tD)(o,n)),wt.data.node=Object.assign({id:r,type:O.h.TEXT,name:"Text"},{size:l,attribute:n,source:g}),null==i||i.remove()}}}}var Et=w(4312),Mt=w(2409),pt=w(6078);var Lt=w(3073);class Ot{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>wt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var r,o,n,l,g;null===(r=window.document.getElementById(st.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(o=window.document.getElementById(st.F.SELECT_GROUP))||void 0===o||o.remove(),null===(n=window.document.getElementById(st.F.SCAN_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(st.F.CREATE_GROUP))||void 0===l||l.remove(),null===(g=window.document.getElementById(st.F.INTERACTIVE_GROUP))||void 0===g||g.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(m=>m(i))}deleteNode(){for(let i of this._selected_Ids){let r=wt.data.deleteNode(i);wt.history.push([{type:"delete",from:{id:r},to:{id:r}}])}wt.dataSelect.ids=[]}groupNode(){let i=[];if(wt.dataSelect.ids.length>=2){let r=wt.data.getNode(wt.dataSelect.ids[0]),{nodeId:o,attribute:n,size:l}=(0,Lt.v)(Math.ceil(1e9*Math.random()),void 0,r.pid?window.document.getElementById(r.pid):null);wt.data.node=Object.assign({id:o,type:O.h.GROUP,name:"G"},{size:l,attribute:n});for(let g of wt.dataSelect.ids)i.push(wt.data.addGroup(g,o))}if(i.length){wt.dataSelect.ids=i;let r=wt.dataSelect.nodes;1==r.length?(0,x.K)(r[0]):r.length>1&&(0,y.E)(r)}}ungroupNode(){let i=[];for(let r of wt.dataSelect.ids)i.push(wt.data.unGroup(r));if(i.length){wt.dataSelect.ids=i;let r=wt.dataSelect.nodes;1==r.length?(0,x.K)(r[0]):r.length>1&&(0,y.E)(r)}}}var ht=w(2837),Ut=w(8338);class ee{createNodeImage(i,r){var o,n,l,g;let{nodeId:c,element:k,size:_,attribute:B,source:R}=(0,et.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,ht.U)(i)}});(ct=>{if(!ct)return;let vt=new Image;vt.onload=()=>{let _t=(0,h.z)(vt.naturalWidth/vt.naturalHeight,100);_t>=1?(_.width=Math.min(vt.naturalWidth,512),_.height=(0,h.z)(_.width/_t,100)):(_.height=Math.min(vt.naturalHeight,512),_.width=(0,h.z)(_.height*_t,100)),_.x=(0,h.z)(_.x+50-_.width/2,100),_.y=(0,h.z)(_.y+50-_.height/2,100),Object.assign(B,(0,N.xW)(O.h.IMAGE,_,B)),(0,E.tD)(k,B),wt.data.node=Object.assign({id:c,type:O.h.IMAGE,name:"Image"},{size:_,attribute:B,source:R})},vt.onerror=_t=>{console.error(`ImgSrc load failed -> ${ct}`,_t),null==k||k.remove()},vt.src=ct})(null!==(l=null===(g=R.image)||void 0===g?void 0:g.url)&&void 0!==l?l:"")}createNodeIframe(i,r){var o,n;let{nodeId:g,element:m,size:c,attribute:k,style:_,source:B}=(0,nt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,ht.U)(i)}});(R=>{let ct=(null===(R=wt.data.slide)||void 0===R||null===(R=R.svg)||void 0===R?void 0:R.viewBox)||{x:0,y:0,width:100,height:100},vt=(0,h.z)(ct.width/ct.height,100);vt>=1?(c.width=Math.min(ct.width,512),c.height=(0,h.z)(c.width/vt,100)):(c.height=Math.min(ct.height,512),c.width=(0,h.z)(c.height*vt,100)),c.x=(0,h.z)(c.x+50-c.width/2,100),c.y=(0,h.z)(c.y+50-c.height/2,100),Object.assign(k,(0,N.xW)(O.h.IMAGE,c,k)),(0,E.tD)(m,k),wt.data.node=Object.assign({id:g,type:O.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:k,style:_,source:B})})()}createNodeEmbed(i,r){var o,n;let l={x:50,y:50,width:640,height:360};i.type==Ut.S.AUDIO&&(l.width=480,l.height=80);let{nodeId:g,element:m,size:c,attribute:k,style:_,source:B}=(0,nt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:l.x)-l.x,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:l.y)-l.y,width:l.width,height:l.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,ht.U)(i))}});(()=>{let R=(0,h.z)(l.width/l.height,100);R>=1?(c.width=Math.min(c.width,l.width),c.height=(0,h.z)(c.width/R,1)):(c.height=Math.min(c.height,l.height),c.width=(0,h.z)(c.height*R,1)),c.x=(0,h.z)(c.x+l.x-c.width/2,1),c.y=(0,h.z)(c.y+l.y-c.height/2,1),Object.assign(k,(0,N.xW)(O.h.FOREIGNOBJECT,c,k)),(0,E.tD)(m,k),wt.data.node=Object.assign({id:g,type:O.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:k,style:_,source:B})})()}createNodeMedia(i,r){var o,n,l,g;let{nodeId:c,element:k,size:_,attribute:B,source:R}=(0,et.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,ht.U)(i.cover)}}),ct={click:{media:i.media}};(vt=>{if(!vt)return;let _t=new Image;_t.onload=()=>{let Rt=(0,h.z)(_t.naturalWidth/_t.naturalHeight,100);Rt>=1?(_.width=Math.min(_t.naturalWidth,512),_.height=(0,h.z)(_.width/Rt,100)):(_.height=Math.min(_t.naturalHeight,512),_.width=(0,h.z)(_.height*Rt,100)),_.x=(0,h.z)(_.x+50-_.width/2,100),_.y=(0,h.z)(_.y+50-_.height/2,100),Object.assign(B,(0,N.xW)(O.h.IMAGE,_,B)),(0,E.tD)(k,B),wt.data.node=Object.assign({id:c,type:O.h.IMAGE,name:"Image"},{size:_,attribute:B,source:R,interactive:ct})},_t.onerror=Rt=>{console.error(`ImgSrc load failed -> ${vt}`,Rt),null==k||k.remove()},_t.src=vt})(null!==(l=null===(g=R.image)||void 0===g?void 0:g.url)&&void 0!==l?l:"")}createNodeText(i,r){var o,n;let{nodeId:g,element:m,size:c,attribute:k,style:_,source:B}=(0,nt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:0)-0,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let R=(0,h.z)(4,100);R>=1?(c.width=Math.min(c.width,320),c.height=(0,h.z)(c.width/R,1)):(c.height=Math.min(c.height,80),c.width=(0,h.z)(c.height*R,1)),c.x=(0,h.z)(c.x+0-c.width/2,1),c.y=(0,h.z)(c.y+0-c.height/2,1),Object.assign(k,(0,N.xW)(O.h.FOREIGNOBJECT,c,k)),(0,E.tD)(m,k),wt.data.node=Object.assign({id:g,type:O.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:k,style:_,source:B})})()}insert(i){var r;if(wt.data.insertSlide(wt.data.slideId,1),i.title){let{nodeId:o,size:n,attribute:l,style:g,source:m}=(0,nt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});wt.data.node=Object.assign({id:o,type:O.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:g,source:m})}if(i.description){let{nodeId:o,size:n,attribute:l,style:g,source:m}=(0,nt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});wt.data.node=Object.assign({id:o,type:O.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:g,source:m})}null!==(r=i.media)&&void 0!==r&&r.prompt&&((()=>{let{nodeId:o,size:n,attribute:l}=(0,Y.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});wt.data.node=Object.assign({id:o,type:O.h.RECT,name:"Rect"},{size:n,attribute:l})})(),(o=>{let{nodeId:n,size:l,attribute:g,style:m,source:c}=(0,nt.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});wt.data.node=Object.assign({id:n,type:O.h.FOREIGNOBJECT,name:"ForeignObject"},{size:l,attribute:g,style:m,source:c})})())}}var ae=w(1026);class ne{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:wt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let r=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,g)=>g==this._slideIdx),o=null==r?void 0:r.svg,n=l=>{let g=[];return l.filter(m=>!m.isdeleted).forEach(m=>{m.type==O.h.GROUP?g=g.concat(n(m.nodes||[])):g.push(m.id)}),g};return n((null==o?void 0:o.nodes)||[])}}get get(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(g=>g.type==O.h.GROUP).forEach(g=>{var m;g.nodes=r(null===(m=g.nodes)||void 0===m?void 0:m.filter(c=>!c.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(g=>{var m,c;return g.type!=O.h.GROUP||(null!==(m=null===(c=g.nodes)||void 0===c?void 0:c.length)&&void 0!==m?m:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource}get getResource(){var i;let r=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n,l,g,m,c,k,_,B;r.push(null===(n=o.svg)||void 0===n||null===(n=n.background)||void 0===n?void 0:n.path),null===(l=o.svg)||void 0===l||l.nodes.forEach(R=>{var ct,vt,_t,Rt,qt,ye,ve,me,pe,be;r.push(null===(ct=R.source)||void 0===ct||null===(ct=ct.image)||void 0===ct?void 0:ct.path),r.push(null===(vt=R.source)||void 0===vt||null===(vt=vt.audio)||void 0===vt?void 0:vt.path),r.push(null===(_t=R.source)||void 0===_t||null===(_t=_t.video)||void 0===_t?void 0:_t.path),r.push(null===(Rt=R.source)||void 0===Rt||null===(Rt=Rt.file)||void 0===Rt?void 0:Rt.path),r.push(null===(qt=R.source)||void 0===qt||null===(qt=qt.iframe)||void 0===qt?void 0:qt.path),r.push(null===(ye=R.source)||void 0===ye||null===(ye=ye.track)||void 0===ye?void 0:ye.path),r.push(null===(ve=R.interactive)||void 0===ve||null===(ve=ve.show)||void 0===ve||null===(ve=ve.audio)||void 0===ve||null===(ve=ve.source)||void 0===ve?void 0:ve.path),r.push(null===(me=R.interactive)||void 0===me||null===(me=me.click)||void 0===me||null===(me=me.audio)||void 0===me||null===(me=me.source)||void 0===me?void 0:me.path),r.push(null===(pe=R.interactive)||void 0===pe||null===(pe=pe.click)||void 0===pe||null===(pe=pe.image)||void 0===pe||null===(pe=pe.source)||void 0===pe?void 0:pe.path),r.push(null===(be=R.interactive)||void 0===be||null===(be=be.click)||void 0===be||null===(be=be.video)||void 0===be||null===(be=be.source)||void 0===be?void 0:be.path)}),r.push(null===(g=o.test)||void 0===g||null===(g=g.audiotrue)||void 0===g?void 0:g.path),r.push(null===(m=o.test)||void 0===m||null===(m=m.audiofalse)||void 0===m?void 0:m.path),r.push(null===(c=o.test)||void 0===c||null===(c=c.effecttrue)||void 0===c?void 0:c.path),r.push(null===(k=o.test)||void 0===k||null===(k=k.effectfalse)||void 0===k?void 0:k.path),r.push(null===(_=o.test)||void 0===_||null===(_=_.icontrue)||void 0===_?void 0:_.path),r.push(null===(B=o.test)||void 0===B||null===(B=B.iconfalse)||void 0===B?void 0:B.path)}),r.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,n,l)=>l.indexOf(o)==n)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(g=>g.type==O.h.GROUP).forEach(g=>{var m;g.nodes=r(null===(m=g.nodes)||void 0===m?void 0:m.filter(c=>!c.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(g=>{var m,c;return g.type!=O.h.GROUP||(null!==(m=null===(c=g.nodes)||void 0===c?void 0:c.length)&&void 0!==m?m:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,r;return null!==(i=null===(r=this.slide)||void 0===r?void 0:r.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((r,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,r;this._slideIdx<(null!==(i=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,E.rN)(),(0,ae.t)(this.slide)}openSlide(i,r){var o,n,l,g,m;if(i)for(let R=0,ct=null!==(c=null===(k=this._dataSource.slides)||void 0===k?void 0:k.length)&&void 0!==c?c:0;R<ct;R++){var c,k,_;if((null!==(_=this._dataSource.slides)&&void 0!==_?_:[])[R].id==i){this._slideIdx=R;break}}else if(r&&r>=0&&r<(null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==o?o:0))this._slideIdx=null!=r?r:0;else{var B;this._slideIdx=0,null!==(B=this._dataSource.slides)&&void 0!==B&&B.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,E.rN)(),null!==(l=this.slide)&&void 0!==l&&null!==(l=l.svg)&&void 0!==l&&l.viewBox&&(wt.screen.frameSize=this.slide.svg.viewBox),(0,ae.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(g=null===(m=this._dataSource.slides)||void 0===m?void 0:m.length)&&void 0!==g?g:0,this.slide)}addSlide(){var i,r,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==r?r:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,r,o){var n,l,g,m,c;let k=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(B=>B.id==i);if(!o||!k||null!=k&&null!==(l=k.svg)&&void 0!==l&&l.nodes.filter(B=>!B.isdeleted).length)return this.insertSlide(i,r,o);let _=null!==(g=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(k))&&void 0!==g?g:0;null===(c=this._dataSource.slides)||void 0===c||c.splice(_,1,o),this._slideIdx=_,this.openSlide(void 0,this._slideIdx)}insertSlide(i,r,o){var n,l,g,m,c;let k=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(R=>R.id==i))&&void 0!==n?n:this._defaultSlide,_=(null!==(g=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(k))&&void 0!==g?g:0)+r;var B;o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(B=o.svg)&&void 0!==B&&B.viewBox||o.svg&&(o.svg.viewBox=wt.screen.frameSize)):o=this._defaultSlide,null===(c=this._dataSource.slides)||void 0===c||c.splice(_,0,o),this._slideIdx=_,this.openSlide(void 0,this._slideIdx)}copySlide(i){var r,o,n,l,g,m,c;let k=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(R=>R.id==i))&&void 0!==r?r:this._defaultSlide,_=(null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(k))&&void 0!==n?n:0)+1,B=Object.assign(JSON.parse(JSON.stringify(k)),{id:this.newSlideId,code:void 0,name:`${k.name} + (Copy)`});null===(g=this._dataSource.slides)||void 0===g||g.splice(_,0,B),this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(c=this._dataSource.slides)||void 0===c?void 0:c.length)&&void 0!==m?m:0,this.slide)}moveSlide(i,r){var o,n,l,g,m,c;let k=null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(B=>B.id==i))&&void 0!==o?o:this._defaultSlide,_=null!==(l=null===(g=this._dataSource.slides)||void 0===g?void 0:g.indexOf(k))&&void 0!==l?l:0;null===(m=this._dataSource.slides)||void 0===m||m.splice(_+r,0,null===(c=this._dataSource.slides)||void 0===c?void 0:c.splice(_,1)[0])}deleteSlide(i){var r,o,n,l,g,m;let c=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(R=>R.id==i))&&void 0!==r?r:this._defaultSlide,k=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(c))&&void 0!==n?n:0;if(null===(g=this._dataSource.slides)||void 0===g||g.splice(k,1),null!==(m=this._dataSource.slides)&&void 0!==m&&m.length)if(k<this._slideIdx){var _,B;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(_=null===(B=this._dataSource.slides)||void 0===B?void 0:B.length)&&void 0!==_?_:0,this.slide)}else k==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var r,o,n,l,g;let m=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(k=>k.id==i))&&void 0!==r?r:this._defaultSlide,c=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(m))&&void 0!==n?n:0;if(m.isdeleted=!0,null!==(g=this._dataSource.slides)&&void 0!==g&&null!==(g=g.filter(k=>!k.isdeleted))&&void 0!==g&&g.length){let k=!0;for(;m.isdeleted;)k?c++:c--,this._dataSource.slides[c]?m=this._dataSource.slides[c]:k=!k;this.openSlide(m.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,r,o,n){this._fnChangeSlides.forEach(l=>l(i,r,o,n))}set node(i){var r,o;let n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((l,g)=>g==this._slideIdx);null!=n&&null!==(o=n.svg)&&void 0!==o&&o.nodes&&n.svg.nodes.push(i),wt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,ae.t)(n),(0,ae.t)(n,null==n?void 0:n.id)}findNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((R,ct)=>ct==this._slideIdx),n=null==o?void 0:o.svg,l=(R,ct)=>{let vt=null==R?void 0:R.find(qt=>qt.id==i);if(vt)return vt.pid=ct,vt;let _t=0,Rt=R.length||0;for(;_t<Rt&&!vt&&(vt=l(R[_t].nodes||[],R[_t].id),!vt);)_t++;return vt},g=l((null==n?void 0:n.nodes)||[]);var m,c,k,_,B;return g?(g.style=null!==(m=g.style)&&void 0!==m?m:{},g.source=null!==(c=g.source)&&void 0!==c?c:{},g.animate=null!==(k=g.animate)&&void 0!==k?k:{},g.interactive=null!==(_=g.interactive)&&void 0!==_?_:{},g.variable=null!==(B=g.variable)&&void 0!==B?B:{},g):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((m,c)=>c==this._slideIdx),n=null==o?void 0:o.svg,g=m=>{let c=(null==m?void 0:m.find(vt=>vt.id==i))||(m=>{let c=null,k=0,_=m.length||0;for(;k<_&&!c;){if(c=g(m[k].nodes),c){c.pid=m[k].id;break}k++}var B,R,ct,vt,_t;return c&&(c.style=null!==(B=c.style)&&void 0!==B?B:{},c.source=null!==(R=c.source)&&void 0!==R?R:{},c.animate=null!==(ct=c.animate)&&void 0!==ct?ct:{},c.interactive=null!==(vt=c.interactive)&&void 0!==vt?vt:{},c.variable=null!==(_t=c.variable)&&void 0!==_t?_t:{}),c})((null==m?void 0:m.filter(vt=>vt.type==O.h.GROUP))||[]);var k,_,B,R,ct;return c&&(c.style=null!==(k=c.style)&&void 0!==k?k:{},c.source=null!==(_=c.source)&&void 0!==_?_:{},c.animate=null!==(B=c.animate)&&void 0!==B?B:{},c.interactive=null!==(R=c.interactive)&&void 0!==R?R:{},c.variable=null!==(ct=c.variable)&&void 0!==ct?ct:{}),c};return g((null==n?void 0:n.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,r,o,n,l){var g;let m=null===(g=this._dataSource.slides)||void 0===g?void 0:g.find((_,B)=>B==this._slideIdx),c=null==m?void 0:m.svg,k=_=>{let B=[];return _.filter(R=>!R.isdeleted).forEach(R=>{R.type==O.h.GROUP?B=B.concat(k(R.nodes||[])):i>R.size.x||r>R.size.y||o<R.size.x+R.size.width||n<R.size.y+R.size.height||(l?R.type==l&&B.push(R.id):B.push(R.id))}),B};return k((null==c?void 0:c.nodes)||[])}getNodeOnArea(i,r,o,n,l){var g;let m=null===(g=this._dataSource.slides)||void 0===g?void 0:g.find((_,B)=>B==this._slideIdx),c=null==m?void 0:m.svg,k=_=>{let B=[];return _.filter(R=>!R.isdeleted).forEach(R=>{R.type==O.h.GROUP?B=B.concat(k(R.nodes||[])):R.size.x+R.size.width<i||R.size.y+R.size.height<r||R.size.x>o||R.size.y>n||(l?R.type==l&&B.push(R.id):B.push(R.id))}),B};return k((null==c?void 0:c.nodes)||[])}deleteNode(i,r){var o;return this.getNode(i).isdeleted=null==r||r,(0,ae.t)(this.slide),(0,ae.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var r,o;let n=this.getNode(i),l=Math.ceil(1e9*Math.random());return null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:l})),Object.assign(n,{isdeleted:!0}),(0,ae.t)(this.slide),(0,ae.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),l}addGroup(i,r){var o;let n=this.getNode(i),l=this.getNode(r);l.nodes=l.nodes||[];let g=Math.ceil(1e9*Math.random());return l.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:g})),Object.assign(n,{isdeleted:!0}),(0,ae.t)(this.slide),(0,ae.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),g}setNodeP(i,r){var o;let n=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(l=>l.id==i);n&&(n.pid=r||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,r){var o,n,l,g;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((_,B)=>{_.index=B+1});let m=(null!==(n=null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l?void 0:l.nodes.length)&&void 0!==n?n:0)+1;var c,k;i.map(_=>{var B,R;return{id:_,index:null!==(B=null===(R=this.slide)||void 0===R||null===(R=R.svg)||void 0===R||null===(R=R.nodes.find(ct=>ct.id==_))||void 0===R?void 0:R.index)&&void 0!==B?B:0}}).sort((_,B)=>_.index-B.index).forEach(_=>{var R,B;r?null===(R=this.slide)||void 0===R||null===(R=R.svg)||void 0===R||R.nodes.filter((ct,vt)=>ct.id==_.id).forEach(ct=>{ct.index=r+_.index+_.index/1e3}):null===(B=this.slide)||void 0===B||null===(B=B.svg)||void 0===B||B.nodes.filter(ct=>ct.id==_.id).forEach(ct=>{ct.index=m+_.index})}),null===(g=this.slide)||void 0===g||null===(g=g.svg)||void 0===g||g.nodes.sort((_,B)=>{var R,ct;return(null!==(R=_.index)&&void 0!==R?R:0)-(null!==(ct=B.index)&&void 0!==ct?ct:0)}),(0,ae.$)(this.slide),i.length<=1?(null===(c=window.document.getElementById(st.F.RESIZE_GROUP))||void 0===c||c.remove(),(0,x.K)(wt.dataSelect.nodes[0])):(null===(k=window.document.getElementById(st.F.SELECT_GROUP))||void 0===k||k.remove(),(0,y.E)(wt.dataSelect.nodes))}sendToBackStep(i,r){var o,n,l,g;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((m,c)=>{m.index=c+1}),i.map(m=>{var c,k;return{id:m,index:null!==(c=null===(k=this.slide)||void 0===k||null===(k=k.svg)||void 0===k||null===(k=k.nodes.find(_=>_.id==m))||void 0===k?void 0:k.index)&&void 0!==c?c:0}}).sort((m,c)=>m.index-c.index).forEach(m=>{var k,c;r?null===(k=this.slide)||void 0===k||null===(k=k.svg)||void 0===k||k.nodes.filter(_=>_.id==m.id).forEach(_=>{_.index=r+m.index+m.index/1e3}):null===(c=this.slide)||void 0===c||null===(c=c.svg)||void 0===c||c.nodes.filter(_=>_.id==m.id).forEach(_=>{_.index=m.index/100-1})}),null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.sort((m,c)=>{var k,_;return(null!==(k=m.index)&&void 0!==k?k:0)-(null!==(_=c.index)&&void 0!==_?_:0)}),(0,ae.$)(this.slide),i.length<=1?(null===(l=window.document.getElementById(st.F.RESIZE_GROUP))||void 0===l||l.remove(),(0,x.K)(wt.dataSelect.nodes[0])):(null===(g=window.document.getElementById(st.F.SELECT_GROUP))||void 0===g||g.remove(),(0,y.E)(wt.dataSelect.nodes))}bringToFrontArea(i){var r,o;let n=i.map(vt=>wt.data.getNode(vt)).filter(vt=>!vt.isfake),{x1:l,y1:g,x2:m,y2:c}=re(n),k=this.getNodeOnArea(l,g,m,c);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((vt,_t)=>{vt.index=_t+1});let _=k.map(vt=>{var _t,Rt;return null!==(_t=null===(Rt=this.slide)||void 0===Rt||null===(Rt=Rt.svg)||void 0===Rt||null===(Rt=Rt.nodes.find(qt=>qt.id==vt))||void 0===Rt?void 0:Rt.index)&&void 0!==_t?_t:0}),B=Math.max.apply(null,_);var R,ct;i.forEach((vt,_t)=>{var Rt;null===(Rt=this.slide)||void 0===Rt||null===(Rt=Rt.svg)||void 0===Rt||Rt.nodes.filter(qt=>qt.id==vt).forEach(qt=>{qt.index=B+(_t+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((vt,_t)=>{var Rt,qt;return(null!==(Rt=vt.index)&&void 0!==Rt?Rt:0)-(null!==(qt=_t.index)&&void 0!==qt?qt:0)}),(0,ae.$)(this.slide),i.length<=1?(null===(R=window.document.getElementById(st.F.RESIZE_GROUP))||void 0===R||R.remove(),(0,x.K)(wt.dataSelect.nodes[0])):(null===(ct=window.document.getElementById(st.F.SELECT_GROUP))||void 0===ct||ct.remove(),(0,y.E)(wt.dataSelect.nodes))}sendToBackArea(i){var r,o;let n=i.map(vt=>wt.data.getNode(vt)).filter(vt=>!vt.isfake),{x1:l,y1:g,x2:m,y2:c}=re(n),k=this.getNodeOnArea(l,g,m,c);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((vt,_t)=>{vt.index=_t+1});let _=k.map(vt=>{var _t,Rt;return null!==(_t=null===(Rt=this.slide)||void 0===Rt||null===(Rt=Rt.svg)||void 0===Rt||null===(Rt=Rt.nodes.find(qt=>qt.id==vt))||void 0===Rt?void 0:Rt.index)&&void 0!==_t?_t:0}),B=Math.min.apply(null,_)-1;var R,ct;i.forEach((vt,_t)=>{var Rt;null===(Rt=this.slide)||void 0===Rt||null===(Rt=Rt.svg)||void 0===Rt||Rt.nodes.filter(qt=>qt.id==vt).forEach(qt=>{qt.index=B+(_t+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((vt,_t)=>{var Rt,qt;return(null!==(Rt=vt.index)&&void 0!==Rt?Rt:0)-(null!==(qt=_t.index)&&void 0!==qt?qt:0)}),(0,ae.$)(this.slide),i.length<=1?(null===(R=window.document.getElementById(st.F.RESIZE_GROUP))||void 0===R||R.remove(),(0,x.K)(wt.dataSelect.nodes[0])):(null===(ct=window.document.getElementById(st.F.SELECT_GROUP))||void 0===ct||ct.remove(),(0,y.E)(wt.dataSelect.nodes))}}const re=j=>{let i=999999,r=999999,o=-999999,n=-999999;return j.forEach(l=>{i=Math.min(i,l.size.x),r=Math.min(r,l.size.y),o=Math.max(o,l.size.x+l.size.width),n=Math.max(n,l.size.y+l.size.height)}),{x1:i,y1:r,x2:o,y2:n}};class _e{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":wt.data.deleteNode(r.from.id);break;case"edit":break;case"delete":wt.data.deleteNode(r.from.id,!1);break;case"size":{let{id:o,type:n,size:l,attribute:g}=wt.data.getNode(r.from.id);Object.assign(l,r.from.size),Object.assign(g,(0,N.xW)(n,l,g)),(0,E.tD)(window.document.getElementById(o),g);break}case"attribute":{let{id:o,attribute:n}=wt.data.getNode(r.from.id);Object.assign(n,r.from.attribute),(0,E.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=wt.data.getNode(r.from.id);Object.assign(null!=n?n:{},r.from.style),(0,E.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=wt.data.getNode(r.from.id);Object.assign(null!=l?l:{},r.from.source),(0,E.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=wt.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.animate);break}case"interactive":{let{interactive:o}=wt.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.interactive);break}case"variable":{let{variable:o}=wt.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.variable);break}}}),wt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":wt.data.deleteNode(r.to.id,!1);break;case"edit":break;case"delete":wt.data.deleteNode(r.to.id,!0);break;case"size":{let{id:o,type:n,size:l,attribute:g}=wt.data.getNode(r.to.id);Object.assign(l,r.to.size),Object.assign(g,(0,N.xW)(n,l,g)),(0,E.tD)(window.document.getElementById(o),g);break}case"attribute":{let{id:o,attribute:n}=wt.data.getNode(r.to.id);Object.assign(n,r.to.attribute),(0,E.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=wt.data.getNode(r.to.id);Object.assign(null!=n?n:{},r.to.style),(0,E.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=wt.data.getNode(r.to.id);Object.assign(null!=l?l:{},r.to.source),(0,E.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=wt.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.animate);break}case"interactive":{let{interactive:o}=wt.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.interactive);break}case"variable":{let{variable:o}=wt.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.variable);break}}}),wt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class Ge{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var r,o;this._frameSize.width=null!==(r=null==i?void 0:i.width)&&void 0!==r?r:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,r,o){var n;if(!(i<.01||i>100)){if(r=null!==(n=r)&&void 0!==n?n:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-r.x,this._dislocation.y=this._height/i/2-r.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var l={x:Math.max(0,Math.min((0,h.z)(r.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,h.z)(r.y/this._height,1e3),1))},g={x:(this._width/i-this._width/this._scale)*l.x,y:(this._height/i-this._height/this._scale)*l.y};this._dislocation.x+=g.x,this._dislocation.y+=g.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,r){this._dislocation.x=i.x+r.x/this._scale,this._dislocation.y=i.y+r.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,E.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(r=>r(i))}}var Qe=w(6195);class Je{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,Qe.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,Qe._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(r=>r(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(r=>r(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(r=>r(i)),this.saveConfig()}}var Pe=w(5619),Ze=w(334),Xe=w(3591),Oe=function(j){return j&&JSON.parse(JSON.stringify(j))},De=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Fe=[],qe={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},He={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class Ve{constructor(){this._data_variables=Oe(De).concat(Oe(Fe)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(r=>{r(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(r=>{r(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var r of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))r.if&&r.if.length>0&&(this.checkValueConditions(r.if)?this.setValueOperators(r.then||[]):this.setValueOperators(r.else||[]))}}renew(){this._data_variables=Oe(De).concat(Oe(Fe)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let r={};"string"==typeof i?r=JSON.parse(i):"object"==typeof i&&(r=i),this._data_variables=r.variables||[],this._data_conditions=r.conditions||(o=>(this._data_variables.map(n=>n.change||[]).forEach(n=>{o=o.concat(n)}),o))([]),De.forEach(o=>{var n=this._data_variables.filter(l=>l.key==o.key);n.length?n.forEach(function(l,g,m){l.type=o.type,l.readonly=o.readonly,l.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return Oe(qe)}getConditionTemp(){return Oe(He)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,r){return i.localeCompare(r)})}getVariableAll(){return this._data_variables.length?Oe((j=this._data_variables,i="key",function(r){for(var o of j.map(function(n){return n[i]}).sort())j.filter(function(n){return n[i]==o}).forEach(function(n){r.push(n)}),j=j.filter(function(n){return n[i]!=o});return r}([]))):Oe(De).concat(Oe(Fe));var j,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),De.forEach(r=>{var o=this._data_variables.filter(n=>n.key==r.key);o.length?o.forEach((n,l,g)=>{n.type=r.type,n.readonly=r.readonly,n.system=r.system}):this._data_variables.push(r)}))}getVariable(i){return i?Oe(this._data_variables.filter(r=>r.key==i)[0]||{}):{}}setVariable(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(l=>l.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(l=>l.key==i);n.length?n.forEach(function(l,g,m){l.value=r,l.type=o}):this._data_variables.push({key:i,value:r,type:o})}}getValue(i,r){if(!i)return"";var o=this._data_variables.filter(function(g){return g.key==i});if(o.length){var l,n=o[0]||{};switch(this.OnGetActionExecuting(n),r||(r=n.type||null),r){case"string":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":"string"==typeof n.value?n.value||"":n.value.toString().trim();break;case"number":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?0:"number"==typeof n.value?n.value||0:parseFloat(n.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(n.value)>=0?l=!1:"boolean"==typeof n.value?l=n.value:(l=(n.value+"").toLowerCase(),l="1"==n.value||"true"==n.value||"yes"==n.value||"dung"==n.value);break;case"audio-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></audio>`:"";break;case"video-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></video>`:"";break;case"img-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<img style="width:100%;vertical-align:middle;" src="${n.value}"/>`:"";break;default:l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value}return this.OnGetActionExecuted(n),l}return null}setValue(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(function(g){return g.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(function(g){return g.key==i});if(n.length){var l=n[0];this.OnSetActionExecuting(l),l&&(l.value=r),this.OnSetActionExecuted(l)}}}getConditionAll(){return Oe(this._data_conditions.sort(function(i,r){return i.idx-r.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?Oe(this._data_conditions.filter(r=>r.variable==i||(r.variables||[]).indexOf(i)>=0).sort(function(r,o){return r.idx-o.idx})):{}}switchCondition(i,r,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})>0):r==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),0==o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})):r!=o;case">=":return r>=o;case"<=":return r<=o;case">":return r>o;case"<":return r<o;case"\u2208":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),0==o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l});default:return!1}}switchOperator(i,r,o){switch(i){case"+":return r+o;case"-":return r-o;case"*":return r*o;case"/":return r/o;case"=":return o;case"=!":return!o;case"==":return r==o;case"!=":return r!=o}}switchFormula(i,r){switch(i){case"sum":return r.reduce(function(n,l){return n+l});case"sub":return r.reduce(function(n,l){return n-l});case"pro":return r.reduce(function(n,l){return n*l});case"div":return r.reduce(function(n,l){return n/l});case"avg":var o=r.reduce(function(n,l){return n+l})/(r.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,r);case"max":return Math.max.apply(null,r);case"and":return r.reduce(function(n,l){return n&&l});case"or":return r.reduce(function(n,l){return n||l});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var r=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),r)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(r=>{switch(r.type){case"variable":return this.switchValueType_Condition(r)?0:1;case"variables":return 0==r.variables.map(o=>this.switchValueType_Condition(Object.assign(Oe(r),{variable:o}))?0:1).reduce(function(o,n){return o+n})?0:1;default:return 0}}).reduce((r,o)=>(null!=r?r:0)+(null!=o?o:0))}setValueOperators(i){for(var r of i)switch(r.type){case"variable":this.setValue(r.variable,this.getValueOperator(r));break;case"variables":for(var o of r.variables)this.setValue(o,this.getValueOperator(Object.assign(Oe(r),{variable:o})));break;case"slide":Pe.J.runSlide(void 0,void 0,r.slide);break;case"node":{var n;(0,Xe.GD)({id:r.node,nodeStatus:Pe.J.nodeStatus,slideStatus:Pe.J.slideStatus});let l=Pe.J.findNode(r.node);null!=l&&null!==(n=l.interactive)&&void 0!==n&&n.click&&(0,Ze.J)(l,Pe.J.nodeStatus,Pe.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(r=>{r(i)})}}class $e{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,r,o){if(this._pointer_type=i,r)switch(i){case T.P.PEN:this._pen_type=r;break;case T.P.SHAPE:this._shape_type=r,o&&r===O.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case T.P.PEN:this._pen_type||(this._pen_type=Mt.F.DRAW);break;case T.P.SHAPE:this._shape_type||(this._shape_type=O.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,r,o){this._fnChangePointerTypes.forEach(n=>n(i,r,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,r,o){this._fnChangePointerTypeTemps.forEach(n=>n(i,r,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,r,o){this._fnChangePenTypes.forEach(n=>n(i,r,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,r,o){this._fnChangeShapeTypes.forEach(n=>n(i,r,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,r,o){this._fnChangePolygonTypes.forEach(n=>n(i,r,o))}set onchange(i){this._fnChanges.push(i)}change(i,r,o){this._fnChanges.forEach(n=>n(i,r,o))}}const wt=new class hi{constructor(){this._container="",this._svg="",this._screen=Ge.prototype,this._data=ne.prototype,this._dataSelect=Ot.prototype,this._slide=ee.prototype,this._history=_e.prototype,this._attribute=Je.prototype,this._pointer=$e.prototype,this._variable=Ve.prototype,this._data=new ne,this._dataSelect=new Ot,this._slide=new ee,this._history=new _e,this._attribute=new Je,this._pointer=new $e,this._variable=new Ve,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,r,o,n,l;this._screen.screen=(i=jQuery(this._container).offset(),r=jQuery(this._container).width(),o=jQuery(this._container).height(),console.log("reloadView",JSON.stringify({offset:i,width:r,height:o})),{offset:{x:null!==(n=null==i?void 0:i.left)&&void 0!==n?n:0,y:null!==(l=null==i?void 0:i.top)&&void 0!==l?l:0},width:null!=r?r:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new Ge,(j=>{new E.cR(j.container,j.target);var i=(n,l,g,m)=>{switch(n){case T.P.POINTER:jQuery(j.target).css({cursor:"auto"});break;case T.P.HAND:m?jQuery(j.target).css({cursor:"grabbing"}):jQuery(j.target).css({cursor:"grab"});break;case T.P.PEN:switch(l){case Mt.F.DRAW:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case Mt.F.HIGHTLIGH:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case T.P.ERASER:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case T.P.SHAPE:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case T.P.TEXT:case T.P.FOREIGNOBJECT:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};wt.pointer.onchange=(n,l,g)=>{i(n,l)},jQuery(j.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",n=>{i(wt.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",n=>{i(wt.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",n=>{n.ctrlKey&&n.preventDefault()},{passive:!1}),jQuery(j.container).off("wheel.icdt-init").on("wheel.icdt-init",n=>{var l;n.preventDefault();let g=null!==(l=n.originalEvent)&&void 0!==l?l:n;if(!g.deltaX&&g.deltaY!=Math.floor(g.deltaY)||g.ctrlKey){var m=wt.screen.scale;wt.screen.scaleTo(m-.04*m*(g.deltaY>0?1:-1),(0,pt.D)({x:n.clientX,y:n.clientY},1,{x:0,y:0},wt.screen.offset))}else wt.screen.move(wt.screen.dislocation,{x:-g.deltaX,y:-g.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{wt.screen.actived=!!jQuery(n.target).parents(wt.container).length}),jQuery(j.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",n=>{wt.screen.actived=!0}),jQuery(j.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",n=>{wt.screen.actived=!1,wt.pointer.pointer_type_temp==T.P.HAND&&(wt.pointer.pointer_type_temp=T.P.POINTER)}),jQuery(j.container).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{0==n.button&&(j.container.includes("#")&&j.container.includes(n.target.getAttribute("id"))||j.container.includes(".")&&j.container.includes(n.target.getAttribute("class"))||j.container.includes(n.target.nodeName))&&(wt.pointer.pointer_type_temp||wt.pointer.pointer_type)===T.P.POINTER&&(wt.dataSelect.ids=[])}),jQuery(j.container).off("touchmove.icdt-init").on("touchmove.icdt-init",n=>{n.preventDefault()});const r=n=>{switch(wt.pointer.pointer_type_temp||wt.pointer.pointer_type){case T.P.POINTER:f(n);break;case T.P.HAND:(j=>{(0,gt.I)(j,new C,1,{x:0,y:0})})(n);break;case T.P.PEN:(0,mt.u)(n);break;case T.P.SHAPE:(j=>{var i=null;switch(wt.pointer.shape_type){case O.h.CIRCLE:i=new L;break;case O.h.ELLIPSE:i=new V;break;case O.h.LINE:i=new Xt;break;case O.h.RECT:i=new tt;break;case O.h.POLYGON:var r;i=new G(null===(r=p.find(o=>o.type==wt.pointer.polygon_type))||void 0===r?void 0:r.ratios);break;case O.h.FOREIGNOBJECT:i=new bt;break;case O.h.IMAGE:i=new At;break;case O.h.TEXT:case O.h.PATH:i=new Bt}i&&(0,gt.I)(j,i)})(n);break;case T.P.FOREIGNOBJECT:(j=>{(0,gt.I)(j,new bt)})(n);break;case T.P.IMAGE:(j=>{(0,gt.I)(j,new At)})(n);break;case T.P.TEXT:(j=>{(0,gt.I)(j,new J)})(n);break;case T.P.ERASER:(j=>{(0,gt.I)(j,new dt)})(n);break;case T.P.INDEX:(0,Et.h)(n)}};let o=!1;jQuery(j.target).off("touchstart.icdt-init").on("touchstart.icdt-init",n=>{o=!0,r({touchEvent:n})}),jQuery(j.target).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{if(1!=n.button){if(o)return void(o=!1);r({mouseEvent:n})}}),j.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",n=>{wt.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,kt.K)(n))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",n=>{wt.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,kt.K)(n))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(ue,jt,w)=>{w.d(jt,{h:()=>M,y:()=>f});var T=w(7873),E=w(7102),st=w(9506),N=w(1308),gt=w(5970);const M=A=>{var C,O,ut,p;let P=(null===(C=A.mouseEvent)||void 0===C?void 0:C.target)||(null===(O=A.touchEvent)||void 0===O?void 0:O.target),h=(null==P?void 0:P.getAttribute("id"))||"",L=null==P?void 0:P.nodeName,D=jQuery(P).parents("g[id]").attr("id")||"";if(![T.F.INDEX_GROUP].includes(D))if(null!==(ut=A.mouseEvent)&&void 0!==ut&&ut.altKey||null!==(p=A.touchEvent)&&void 0!==p&&p.altKey||!h||h.match(/[^0-9]/)||!E.L.dataSelect.nodeName.includes(L)){var V;E.L.dataSelect.ids.length&&(E.L.dataSelect.ids=[]),(0==(null===(V=A.mouseEvent)||void 0===V?void 0:V.button)||A.touchEvent)&&((A,C)=>{let h=(0,gt.RY)(T.F.SCAN_GROUP,"g"),L=(0,st.CE)(0,0,1,1);(0,gt.xJ)(h,L),((A,C,O,ut)=>{(0,N.I)(A,{start:h=>{},move:(h,L)=>{((h,L,D,V)=>{C=(0,st.CE)(h,L,D,V),(0,gt.xJ)(O,C)})(L[0][0],L[0][1],h.x,h.y)},end:(h,L)=>{null==O||O.remove(),E.L.dataSelect.ids=E.L.data.getNodeInArea(Math.min(L[0][0],h.x),Math.min(L[0][1],h.y),Math.max(L[0][0],h.x),Math.max(L[0][1],h.y)),ut(E.L.dataSelect.nodes)}})})(A,L,h,C)})(A,I)}else{var Y,tt;let H=parseFloat(h||"0");E.L.dataSelect.ids=null!==(Y=A.mouseEvent)&&void 0!==Y&&Y.shiftKey||null!==(tt=A.touchEvent)&&void 0!==tt&&tt.shiftKey?[H].concat(E.L.dataSelect.ids).filter((Ct,Xt,Jt)=>Jt.indexOf(Ct)==Xt):[H],I(E.L.dataSelect.nodes)}},I=A=>{var C,O;let ut=1;var p,P;if(A.length&&(ut=Math.max.apply(null,null!==(p=null===(P=E.L.data.slide)||void 0===P||null===(P=P.svg)||void 0===P?void 0:P.nodes.map(L=>{var D;return null!==(D=L.idx)&&void 0!==D?D:0}))&&void 0!==p?p:[0])+1),1==A.length)A[0].idx||(A[0].idx=ut,A[0].time=0);else if(A.length>=0){let L=A.map(V=>{var Y;return null!==(Y=V.idx)&&void 0!==Y?Y:0}).filter(V=>V>0),D=L.length?Math.min.apply(null,L):ut;A.forEach(V=>{var Y;V.idx=D,V.time=null!==(Y=V.time)&&void 0!==Y?Y:0})}let h=(0,gt.RY)(T.F.INDEX_GROUP,"g");(0,gt.IA)(h,null!==(C=null===(O=E.L.data.slide)||void 0===O||null===(O=O.svg)||void 0===O?void 0:O.nodes)&&void 0!==C?C:[])},f=A=>{var C,O,ut;null!=A&&null!==(C=A.svg)&&void 0!==C&&C.nodes&&A.svg.nodes.forEach(P=>{P.idx=0,P.time=null});let p=(0,gt.RY)(T.F.INDEX_GROUP,"g");(0,gt.IA)(p,null!==(O=null===(ut=E.L.data.slide)||void 0===ut||null===(ut=ut.svg)||void 0===ut?void 0:ut.nodes)&&void 0!==O?O:[])}},7135:(ue,jt,w)=>{w.d(jt,{K:()=>O,X:()=>C});var T=w(6195),E=w(1477),st=w(3603),N=w(7102),gt=w(6037),x=w(4333),y=w(1026),M=w(9841),I=w(2492),f=w(6752);const C=new class A{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:E.r.Escape,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:E.r.Delete,fn:()=>{N.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:E.r.Space,fn:()=>{N.L.pointer.pointer_type_temp=st.P.HAND}},this.onchange={type:"keyup",key:E.r.Space,fn:()=>{N.L.pointer.pointer_type_temp=st.P.POINTER}},this.onchange={type:"keydown",key:E.r.ArrowLeft,fn:()=>{N.L.dataSelect.ids.length||N.L.data.backSlide()}},this.onchange={type:"keydown",key:E.r.ArrowRight,fn:()=>{N.L.dataSelect.ids.length||N.L.data.nextSlide()}},this.onchange={type:"keydown",key:E.r.ArrowLeft,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(p=>{(0,f.ei)(p,(0,I.z)(p.size.x-(0,M.$)(1)))}),1==N.L.dataSelect.ids.length?(0,gt.K)(N.L.dataSelect.nodes[0]):(0,x.E)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowRight,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(p=>{(0,f.ei)(p,(0,I.z)(p.size.x+(0,M.$)(1)))}),1==N.L.dataSelect.ids.length?(0,gt.K)(N.L.dataSelect.nodes[0]):(0,x.E)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowUp,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(p=>{(0,f.ZF)(p,(0,I.z)(p.size.y-(0,M.$)(1)))}),1==N.L.dataSelect.ids.length?(0,gt.K)(N.L.dataSelect.nodes[0]):(0,x.E)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowDown,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(p=>{(0,f.ZF)(p,(0,I.z)(p.size.y+(0,M.$)(1)))}),1==N.L.dataSelect.ids.length?(0,gt.K)(N.L.dataSelect.nodes[0]):(0,x.E)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.Digit1,fn:p=>{p.shiftKey&&(N.L.reloadView(),N.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:E.r.KeyA,fn:p=>{if(p.ctrlKey){N.L.dataSelect.ids=N.L.data.getNodeAll();let P=N.L.dataSelect.nodes;1==P.length?(0,gt.K)(P[0]):P.length>1&&(0,x.E)(P)}}},this.onchange={type:"keydown",key:E.r.KeyC,fn:p=>{if(p.ctrlKey){let P=N.L.dataSelect.nodes;P&&(0,T.IB)({params:{type:"nodes",nodes:P}})}}},this.onchange={type:"keydown",key:E.r.KeyV,fn:p=>{p.ctrlKey&&(0,T.A9)({callback:P=>{var h,L;"nodes"==(null==P?void 0:P.type)&&null!=P&&null!==(h=P.nodes)&&void 0!==h&&h.length&&(null==P||null===(L=P.nodes)||void 0===L||L.forEach(D=>{p.shiftKey||N.L.data.findNode(D.id).id&&(D.size.x+=16,D.size.y+=16),D.id=Math.ceil(1e9*Math.random()),N.L.data.node=D}),(0,y.t)(N.L.data.slide))}})}},this.onchange={type:"keydown",key:E.r.KeyZ,fn:p=>{p.ctrlKey&&p.shiftKey?N.L.history.redo():p.ctrlKey&&N.L.history.undo()}},this.onchange={type:"keydown",key:E.r.BracketLeft,fn:p=>{p.ctrlKey&&p.shiftKey?N.L.data.sendToBack(N.L.dataSelect.ids):p.ctrlKey?N.L.data.sendToBackStep(N.L.dataSelect.ids,-2):N.L.data.sendToBackArea(N.L.dataSelect.ids)}},this.onchange={type:"keydown",key:E.r.BracketRight,fn:p=>{p.ctrlKey&&p.shiftKey?N.L.data.bringToFront(N.L.dataSelect.ids):p.ctrlKey?N.L.data.bringToFrontStep(N.L.dataSelect.ids,1):N.L.data.bringToFrontArea(N.L.dataSelect.ids)}}}set onchange(p){let P=this._fnChanges.find(h=>h.eventType==p.type&&h.eventKey==p.key);P?P.fns.push(p.fn):this._fnChanges.push({eventType:p.type,eventKey:p.key,fns:[p.fn]})}change(p,P,h){var L;null===(L=this._fnChanges.find(D=>D.eventType==p&&D.eventKey==P))||void 0===L||L.fns.forEach(D=>D(h))}},O=ut=>{C.change(ut.type,ut.keyCode||ut.which||ut.charCode||0,ut)}},669:(ue,jt,w)=>{w.d(jt,{O:()=>M});var T=w(6407),E=w(5970),st=w(1131),N=w(9841),gt=w(7873),x=w(7102),y=w(1281);class M{constructor(f,A){var C,O;let ut={stroke:"#FF0000",strokeWidth:(0,N.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,N.$)(8)},{element:p}=(0,T.X)(Math.ceil(1e9*Math.random()),{size:A});window.document.getElementById(gt.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(tt=>null==tt?void 0:tt.remove()),window.document.getElementById(gt.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(tt=>null==tt?void 0:tt.remove()),null===(C=window.document.getElementById(gt.F.INTERACTIVE_GROUP))||void 0===C||C.appendChild(p);var L=tt=>{if(!tt.length)return;let H=[];if(1==tt.length){var G;let{size:Ct}=null!==(G=null!=f?f:x.L.dataSelect.nodes[0])&&void 0!==G?G:{};if(!Ct)return;H=[[Ct.x+Ct.width/2,Ct.y+Ct.height/2],tt[0]]}else H=[...tt];V(H),D(H[0],"start"),D(H[H.length-1],"end")},D=(tt,H)=>{tt&&((G=>{let{element:Ct}=(0,y.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==H?"#FF0000":"#00BA00",strokeWidth:(0,N.$)(1)},size:{x:tt[0]-5,y:tt[1]-5,width:10,height:10}});null===(G=window.document.getElementById(gt.F.INTERACTIVE_GROUP))||void 0===G||G.prepend(Ct)})(),((G,Ct)=>{let{size:Xt}=null!==(G=null!=f?f:x.L.dataSelect.nodes[0])&&void 0!==G?G:{};if(!Xt)return;let Jt=[[tt[0]-Xt.width/2,tt[1]-Xt.height/2],[tt[0]+Xt.width/2,tt[1]-Xt.height/2],[tt[0]+Xt.width/2,tt[1]+Xt.height/2],[tt[0]-Xt.width/2,tt[1]+Xt.height/2],[tt[0]-Xt.width/2,tt[1]-Xt.height/2]],{element:Ht}=(0,T.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,N.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,N.$)(8)},size:{x:0,y:0,width:10,height:10,points:Jt}});null===(Ct=window.document.getElementById(gt.F.INTERACTIVE_GROUP))||void 0===Ct||Ct.prepend(Ht)})())},V=tt=>{let G=st.n8j().x(Ct=>Ct[0]).y(Ct=>Ct[1]).curve(st.qrM)(tt);p.setAttribute("d",G)};(0,E.tD)(p,ut),L(null!==(O=null==A?void 0:A.points)&&void 0!==O?O:[]);let Y="";return{start:tt=>{Y=`M ${tt.x} ${tt.y} L ${tt.x} ${tt.y}`},move:(tt,H)=>{Y+=` ${tt.x} ${tt.y}`,p.setAttribute("d",Y)},end:(tt,H)=>{L(H),H.length&&(window.interactivePoints=H)}}}}},4979:(ue,jt,w)=>{w.d(jt,{z:()=>ut,u:()=>O});var T=w(7873),E=w(2409),st=w(7102),N=w(1308),gt=w(5970),x=w(1131),y=w(6407),M=w(1999),I=w(4896);class f{constructor(){let P={stroke:st.L.attribute.stroke,strokeWidth:st.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:h,element:L,attribute:D,size:V}=(0,y.X)(Math.ceil(1e9*Math.random()),{attribute:P});(0,gt.tD)(L,D);let Y="",tt="";return{start:G=>{Y=`M ${G.x} ${G.y} L ${G.x} ${G.y}`},move:(G,Ct)=>{((G,Ct)=>{Y+=` ${G} ${Ct}`,L.setAttribute("d",Y)})(G.x,G.y)},end:(G,Ct)=>{var Xt;Ct.length>=3?(tt=null!==(Xt=x.n8j().x(At=>At[0]).y(At=>At[1]).curve(x.qrM)(Ct))&&void 0!==Xt?Xt:"",L.setAttribute("d",tt)):L.setAttribute("d",Y);let Jt=(0,I.CS)(tt||Y),{minX:Ht,minY:Bt,maxX:nt,maxY:bt}=(0,I.lP)(Jt);V.x=Ht,V.y=Bt,V.width=nt-Ht||1,V.height=bt-Bt||1,V.ratioMaps=(0,I.nf)(V,Jt),st.L.data.node=Object.assign({id:h,type:M.h.PATH,name:"Path"},{size:V,attribute:D})}}}}class A{constructor(){let P={stroke:st.L.attribute.stroke,strokeOpacity:.4,strokeWidth:st.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:h,element:L,attribute:D,size:V}=(0,y.X)(Math.ceil(1e9*Math.random()),{attribute:P});(0,gt.tD)(L,D);let Y="";return{start:G=>{Y=`M ${G.x} ${G.y} L ${G.x} ${G.y}`},move:(G,Ct)=>{((G,Ct)=>{Y+=` ${G} ${Ct}`,L.setAttribute("d",Y)})(G.x,G.y)},end:(G,Ct)=>{let Xt=(0,I.CS)(Y),{minX:Jt,minY:Ht,maxX:Bt,maxY:nt}=(0,I.lP)(Xt);V.x=Jt,V.y=Ht,V.width=Bt-Jt||1,V.height=nt-Ht||1,V.ratioMaps=(0,I.nf)(V,Xt),st.L.data.node=Object.assign({id:h,type:M.h.PATH,name:"Path"},{size:V,attribute:D})}}}}var C=w(669);const O=p=>{switch(st.L.pointer.pen_type){case E.F.DRAW:(0,N.I)(p,new f);break;case E.F.HIGHTLIGH:(0,N.I)(p,new A);break;case E.F.INTERACTIVE:ut(p)}},ut=p=>{var P,h;let L=(0,gt.RY)(T.F.INTERACTIVE_GROUP,"g"),D=null!==(P=null===(h=st.L.data.slide)||void 0===h||null===(h=h.svg)||void 0===h?void 0:h.viewBox)&&void 0!==P?P:(()=>{let{width:V,height:Y}=st.L.screen.get;return{x:0,y:0,width:V,height:Y}})();(0,gt.KP)(L,D),p&&(0,N.I)(p,new C.O)}},6037:(ue,jt,w)=>{w.d(jt,{K:()=>y});var T=w(7873),E=w(7102),st=w(9506),N=w(1308),gt=w(5970),x=w(2492);const y=f=>{let A=(0,gt.RY)(T.F.RESIZE_GROUP,"g");(0,gt.AE)(A,f).forEach(C=>{M(C.element,C.posType,f,A)})},M=(f,A,C,O)=>{let ut=!1;null==f||f.addEventListener("touchstart",p=>{ut=!0,I({touchEvent:p},A,C,O)}),null==f||f.addEventListener("mousedown",p=>{if(0==p.button){if(ut)return void(ut=!1);I({mouseEvent:p},A,C,O)}})},I=(f,A,C,O)=>{let H,{id:ut,type:p,size:P,attribute:h}=C,{x:L,y:D,width:V,height:Y}=P,tt=(V||1)/(Y||1),Ct=null,Ht=!1;(0,N.I)(f,{start:nt=>{Ct=JSON.parse(JSON.stringify({id:ut,size:P,attribute:h}))},move:(nt,bt)=>{((nt,bt,et,At)=>{let St=et-nt,kt=At-bt;switch(A){case"rect-center":var mt,U;H=null!==(mt=f.mouseEvent)&&void 0!==mt&&mt.shiftKey||null!==(U=f.touchEvent)&&void 0!==U&&U.shiftKey?Math.abs(et-nt)>=Math.abs(At-bt)?{x:L+et-nt,y:D,width:V,height:Y}:{x:L,y:D+At-bt,width:V,height:Y}:{x:L+et-nt,y:D+At-bt,width:V,height:Y};break;case"rect-top-left":var Q,d,at,xt,zt,Dt,Gt,Kt;H=(null!==(Q=f.mouseEvent)&&void 0!==Q&&Q.shiftKey||null!==(d=f.touchEvent)&&void 0!==d&&d.shiftKey)&&(null!==(at=f.mouseEvent)&&void 0!==at&&at.altKey||null!==(xt=f.touchEvent)&&void 0!==xt&&xt.altKey)?tt>=1?{x:L+(et-nt),y:D+(et-nt)/tt,width:V-2*(et-nt),height:Y-2*(et-nt)/tt}:{x:L+(At-bt)*tt,y:D+(At-bt),width:V-2*(At-bt)*tt,height:Y-2*(At-bt)}:null!==(zt=f.mouseEvent)&&void 0!==zt&&zt.shiftKey||null!==(Dt=f.touchEvent)&&void 0!==Dt&&Dt.shiftKey?tt>=1?{x:L+(et-nt),y:D+(et-nt)/tt,width:V-(et-nt),height:Y-(et-nt)/tt}:{x:L+(At-bt)*tt,y:D+(At-bt),width:V-(At-bt)*tt,height:Y-(At-bt)}:null!==(Gt=f.mouseEvent)&&void 0!==Gt&&Gt.altKey||null!==(Kt=f.touchEvent)&&void 0!==Kt&&Kt.altKey?{x:L+(et-nt),y:D+(At-bt),width:V-2*(et-nt),height:Y-2*(At-bt)}:{x:L+(et-nt),y:D+(At-bt),width:V-(et-nt),height:Y-(At-bt)};break;case"rect-top-right":var Vt,yt,Pt,K,u,Z,dt,it;H=(null!==(Vt=f.mouseEvent)&&void 0!==Vt&&Vt.shiftKey||null!==(yt=f.touchEvent)&&void 0!==yt&&yt.shiftKey)&&(null!==(Pt=f.mouseEvent)&&void 0!==Pt&&Pt.altKey||null!==(K=f.touchEvent)&&void 0!==K&&K.altKey)?tt>=1?{x:L-(et-nt),y:D-(et-nt)/tt,width:V+2*(et-nt),height:Y+2*(et-nt)/tt}:{x:L+(At-bt)*tt,y:D+(At-bt),width:V-2*(At-bt)*tt,height:Y-2*(At-bt)}:null!==(u=f.mouseEvent)&&void 0!==u&&u.shiftKey||null!==(Z=f.touchEvent)&&void 0!==Z&&Z.shiftKey?tt>=1?{x:L,y:D-(et-nt)/tt,width:V+(et-nt),height:Y+(et-nt)/tt}:{x:L,y:D+(At-bt),width:V-(At-bt)*tt,height:Y-(At-bt)}:null!==(dt=f.mouseEvent)&&void 0!==dt&&dt.altKey||null!==(it=f.touchEvent)&&void 0!==it&&it.altKey?{x:L-(et-nt),y:D+(At-bt),width:V+2*(et-nt),height:Y-2*(At-bt)}:{x:L,y:D+(At-bt),width:V+(et-nt),height:Y-(At-bt)};break;case"rect-bottom-left":var X,J,rt,z,q,Et,Mt,pt;H=(null!==(X=f.mouseEvent)&&void 0!==X&&X.shiftKey||null!==(J=f.touchEvent)&&void 0!==J&&J.shiftKey)&&(null!==(rt=f.mouseEvent)&&void 0!==rt&&rt.altKey||null!==(z=f.touchEvent)&&void 0!==z&&z.altKey)?tt>=1?{x:L+(et-nt),y:D+(et-nt)/tt,width:V-2*(et-nt),height:Y-2*(et-nt)/tt}:{x:L-(At-bt)*tt,y:D-(At-bt),width:V+2*(At-bt)*tt,height:Y+2*(At-bt)}:null!==(q=f.mouseEvent)&&void 0!==q&&q.shiftKey||null!==(Et=f.touchEvent)&&void 0!==Et&&Et.shiftKey?tt>=1?{x:L+(et-nt),y:D,width:V-(et-nt),height:Y-(et-nt)/tt}:{x:L-(At-bt)*tt,y:D,width:V+(At-bt)*tt,height:Y+(At-bt)}:null!==(Mt=f.mouseEvent)&&void 0!==Mt&&Mt.altKey||null!==(pt=f.touchEvent)&&void 0!==pt&&pt.altKey?{x:L+(et-nt),y:D-(At-bt),width:V-2*(et-nt),height:Y+2*(At-bt)}:{x:L+(et-nt),y:D,width:V-(et-nt),height:Y+(At-bt)};break;case"rect-bottom-right":var It,Lt,Ot,ht,Ut,ee,ae,ne;H=(null!==(It=f.mouseEvent)&&void 0!==It&&It.shiftKey||null!==(Lt=f.touchEvent)&&void 0!==Lt&&Lt.shiftKey)&&(null!==(Ot=f.mouseEvent)&&void 0!==Ot&&Ot.altKey||null!==(ht=f.touchEvent)&&void 0!==ht&&ht.altKey)?tt>=1?{x:L-(et-nt),y:D-(et-nt)/tt,width:V+2*(et-nt),height:Y+2*(et-nt)/tt}:{x:L-(At-bt)*tt,y:D-(At-bt),width:V+2*(At-bt)*tt,height:Y+2*(At-bt)}:null!==(Ut=f.mouseEvent)&&void 0!==Ut&&Ut.shiftKey||null!==(ee=f.touchEvent)&&void 0!==ee&&ee.shiftKey?tt>=1?{x:L,y:D,width:V+(et-nt),height:Y+(et-nt)/tt}:{x:L,y:D,width:V+(At-bt)*tt,height:Y+(At-bt)}:null!==(ae=f.mouseEvent)&&void 0!==ae&&ae.altKey||null!==(ne=f.touchEvent)&&void 0!==ne&&ne.altKey?{x:L-(et-nt),y:D-(At-bt),width:V+2*(et-nt),height:Y+2*(At-bt)}:{x:L,y:D,width:V+(et-nt),height:Y+(At-bt)};break;case"rect-top":var re,_e,Ge,Qe;H=null!==(re=f.mouseEvent)&&void 0!==re&&re.shiftKey||null!==(_e=f.touchEvent)&&void 0!==_e&&_e.shiftKey?{x:L+kt/2*tt,y:D+kt,width:V-kt*tt,height:Y-kt}:null!==(Ge=f.mouseEvent)&&void 0!==Ge&&Ge.altKey||null!==(Qe=f.touchEvent)&&void 0!==Qe&&Qe.altKey?{x:L,y:D+kt,width:V,height:Y-2*kt}:{x:L,y:D+kt,width:V,height:Y-kt};break;case"rect-bottom":var Je,Pe,Ze,Xe;H=null!==(Je=f.mouseEvent)&&void 0!==Je&&Je.shiftKey||null!==(Pe=f.touchEvent)&&void 0!==Pe&&Pe.shiftKey?{x:L-kt/2*tt,y:D,width:V+kt*tt,height:Y+kt}:null!==(Ze=f.mouseEvent)&&void 0!==Ze&&Ze.altKey||null!==(Xe=f.touchEvent)&&void 0!==Xe&&Xe.altKey?{x:L,y:D-kt,width:V,height:Y+2*kt}:{x:L,y:D,width:V,height:Y+kt};break;case"rect-left":var ii,Oe,Ye,De;H=null!==(ii=f.mouseEvent)&&void 0!==ii&&ii.shiftKey||null!==(Oe=f.touchEvent)&&void 0!==Oe&&Oe.shiftKey?{x:L+St,y:D+St/2/tt,width:V-St,height:Y-St/tt}:null!==(Ye=f.mouseEvent)&&void 0!==Ye&&Ye.altKey||null!==(De=f.touchEvent)&&void 0!==De&&De.altKey?{x:L+St,y:D,width:V-2*St,height:Y}:{x:L+St,y:D,width:V-St,height:Y};break;case"rect-right":var Fe,qe,He,Ve;H=null!==(Fe=f.mouseEvent)&&void 0!==Fe&&Fe.shiftKey||null!==(qe=f.touchEvent)&&void 0!==qe&&qe.shiftKey?{x:L,y:D-St/2/tt,width:V+St,height:Y+St/tt}:null!==(He=f.mouseEvent)&&void 0!==He&&He.altKey||null!==(Ve=f.touchEvent)&&void 0!==Ve&&Ve.altKey?{x:L-St,y:D,width:V+2*St,height:Y}:{x:L,y:D,width:V+St,height:Y};break;default:H={x:L+et-nt,y:D+At-bt,width:V,height:Y}}H.width<0&&(H.width=0),H.height<0&&(H.height=0),H.x=(0,x.z)(H.x),H.y=(0,x.z)(H.y),H.width=(0,x.z)(H.width),H.height=(0,x.z)(H.height),Object.assign(P,H),Object.assign(h,(0,st.xW)(p,P,h)),(0,gt.tD)(window.document.getElementById(ut),h),(0,gt.AE)(O,C)})(bt[0][0],bt[0][1],nt.x,nt.y),Ht=!0},end:(nt,bt)=>{Ht&&Ct&&E.L.history.push([{type:"size",from:Ct,to:JSON.parse(JSON.stringify({id:ut,size:P,attribute:h}))}])}})}},4333:(ue,jt,w)=>{w.d(jt,{E:()=>y});var T=w(7873),E=w(7102),st=w(9506),N=w(1308),gt=w(5970),x=w(2492);const y=f=>{let A=999999,C=999999,O=-999999,ut=-999999;null==f||f.forEach(h=>{A=Math.min(A,h.size.x),C=Math.min(C,h.size.y),O=Math.max(O,h.size.x+h.size.width),ut=Math.max(ut,h.size.y+h.size.height)});let p=(0,gt.RY)(T.F.SELECT_GROUP,"g"),P=(0,st.CE)(A,C,O,ut);(0,gt.Mo)(p,f,P).forEach(h=>{M(h.element,h.posType,P,f,p)})},M=(f,A,C,O,ut)=>{let p=!1;null==f||f.addEventListener("touchstart",P=>{p=!0,I({touchEvent:P},A,C,O,ut)}),null==f||f.addEventListener("mousedown",P=>{if(0==P.button){if(p)return void(p=!1);I({mouseEvent:P},A,C,O,ut)}})},I=(f,A,C,O,ut)=>{let{x:p,y:P,width:h,height:L}=C,D=O.map(Ct=>Object.assign({},Ct.size)),Y=[];(0,N.I)(f,{start:Ct=>{O.forEach((Ct,Xt)=>{let{id:Jt,size:Bt,attribute:nt}=Ct;Y.push(JSON.parse(JSON.stringify({id:Jt,size:Bt,attribute:nt})))})},move:(Ct,Xt)=>{((Ct,Xt,Jt,Ht)=>{(()=>{let Bt;Bt="rect-center"===A?{x:p+Jt-Ct,y:P+Ht-Xt,width:h,height:L}:{x:p,y:P,width:h,height:L},Bt.width<0&&(Bt.width=0),Bt.height<0&&(Bt.height=0),Object.assign(C,Bt),(0,gt.Mo)(ut,O,C)})(),O.forEach((Bt,nt)=>{let d,{x:bt,y:et,width:At,height:St}=D[nt],{id:kt,type:mt,size:U,attribute:Q}=Bt;d="rect-center"===A?{x:bt+Jt-Ct,y:et+Ht-Xt,width:At,height:St}:{x:bt,y:et,width:At,height:St},d.width<0&&(d.width=0),d.height<0&&(d.height=0),d.x=(0,x.z)(d.x),d.y=(0,x.z)(d.y),d.width=(0,x.z)(d.width),d.height=(0,x.z)(d.height),Object.assign(U,d),Object.assign(Q,(0,st.xW)(mt,U,Q)),(0,gt.tD)(window.document.getElementById(kt),Q)})})(Xt[0][0],Xt[0][1],Ct.x,Ct.y)},end:(Ct,Xt)=>{Y.length&&E.L.history.push(O.map((Ct,Xt)=>{let{id:Jt,size:Bt,attribute:nt}=Ct;return{type:"size",from:Y[Xt],to:JSON.parse(JSON.stringify({id:Jt,size:Bt,attribute:nt}))}}))}})}},1026:(ue,jt,w)=>{w.d(jt,{$:()=>P,t:()=>p});var T=w(7873),E=w(1281),st=w(6153),N=w(3477),gt=w(7945),x=w(3069),y=w(3073),M=w(1999),I=w(6407),f=w(6847),A=w(745),C=w(9173),O=w(7102),ut=w(5970);const p=(h,L,D)=>{var V;if(L&&!(null!=D?D:window).document.getElementById(L))return;if("localhost"==location.hostname&&console.log("\xe1\xe1\xe1\xe1\xe1\xe1 s\u1ee3 qu\xe1 \u0111iiiiiiiiiiiiiiiiiiiiiiiiiii!",L),L){let tt=(null!=D?D:window).document.getElementById(L);jQuery(tt).find("#"+T.F.BACKGROUND_GROUP).empty();let H=(0,ut.RY)(T.F.BACKGROUND_GROUP,"g",void 0,tt);(0,ut.I6)(H,h)}else{jQuery(O.L.target).find("#"+T.F.BACKGROUND_GROUP).empty();let tt=(0,ut.RY)(T.F.BACKGROUND_GROUP,"g",void 0,O.L.target);(0,ut.I6)(tt,h)}let Y=(tt,H)=>{H=L&&H?`${L}-${H}`:null!=L?L:H,null==tt||tt.forEach(G=>{let Ct=L?`${L}-${G.id}`:G.id;var Xt;if(G.isdeleted)null===(Xt=(null!=D?D:window).document.getElementById(Ct))||void 0===Xt||Xt.remove();else switch(G.type){case M.h.GROUP:(0,y.v)(Ct,{},H?(null!=D?D:window).document.getElementById(H):null),Y(G.nodes,G.id);break;case M.h.CIRCLE:(0,E.K)(Ct,{size:G.size,attribute:G.attribute},H?(null!=D?D:window).document.getElementById(H):null);break;case M.h.ELLIPSE:(0,st.W)(Ct,{size:G.size,attribute:G.attribute},H?(null!=D?D:window).document.getElementById(H):null);break;case M.h.LINE:(0,x.q)(Ct,{size:G.size,attribute:G.attribute},H?(null!=D?D:window).document.getElementById(H):null);break;case M.h.RECT:(0,gt.a)(Ct,{size:G.size,attribute:G.attribute},H?(null!=D?D:window).document.getElementById(H):null);break;case M.h.POLYGON:(0,N.u)(Ct,{size:G.size,attribute:G.attribute},H?(null!=D?D:window).document.getElementById(H):null);break;case M.h.FOREIGNOBJECT:(0,A.$)(Ct,{size:G.size,attribute:G.attribute,style:G.style,source:G.source},H?(null!=D?D:window).document.getElementById(H):null);break;case M.h.IMAGE:(0,C.B)(Ct,{size:G.size,attribute:G.attribute,source:G.source},H?(null!=D?D:window).document.getElementById(H):null);break;case M.h.TEXT:(0,f.L)(Ct,{size:G.size,attribute:G.attribute,source:G.source},H?(null!=D?D:window).document.getElementById(H):null);break;case M.h.PATH:(0,I.X)(Ct,{size:G.size,attribute:G.attribute},H?(null!=D?D:window).document.getElementById(H):null)}})};Y(null==h||null===(V=h.svg)||void 0===V?void 0:V.nodes)},P=(h,L)=>{var D;if(L&&!window.document.getElementById(L))return;let V=(Y,tt)=>{tt=tt?`${L}-${tt}`:L,null==Y||Y.forEach(H=>{jQuery("#"+(L?`${L}-${H.id}`:H.id)).appendTo(tt?window.document.getElementById(tt):O.L.target),H.type==M.h.GROUP&&V(H.nodes,H.id)})};V(null==h||null===(D=h.svg)||void 0===D?void 0:D.nodes)}},1281:(ue,jt,w)=>{w.d(jt,{K:()=>gt});var T=w(1999),E=w(7102),st=w(9506),N=w(5970);const gt=(x,y,M)=>{let I=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(f,(0,st.xW)(T.h.CIRCLE,I,f)),{nodeId:x,element:(0,N.fn)(x,T.h.CIRCLE,"circle",{size:I,attribute:f},M),size:I,attribute:f}}},6153:(ue,jt,w)=>{w.d(jt,{W:()=>gt});var T=w(1999),E=w(7102),st=w(9506),N=w(5970);const gt=(x,y,M)=>{let I=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(f,(0,st.xW)(T.h.ELLIPSE,I,f)),{nodeId:x,element:(0,N.fn)(x,T.h.ELLIPSE,"ellipse",{size:I,attribute:f},M),size:I,attribute:f}}},745:(ue,jt,w)=>{w.d(jt,{$:()=>N});var T=w(1999),E=w(9506),st=w(5970);const N=(gt,x,y)=>{let M=(null==x?void 0:x.size)||{x:0,y:0,width:320,height:80},I=(null==x?void 0:x.attribute)||{};Object.assign(I,(0,E.xW)(T.h.FOREIGNOBJECT,M,I));let f=(null==x?void 0:x.source)||{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>'}},A=(null==x?void 0:x.style)||{};return{nodeId:gt,element:(0,st.fn)(gt,T.h.FOREIGNOBJECT,"foreignObject",{size:M,attribute:I,style:A,source:f},y),size:M,attribute:I,style:A,source:f}}},3073:(ue,jt,w)=>{w.d(jt,{v:()=>N});var T=w(1999),E=w(9506),st=w(5970);const N=(x,y,M)=>{let I=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{};return Object.assign(f,(0,E.xW)(T.h.GROUP,I,f)),{nodeId:x,element:(0,st.fn)(x,T.h.GROUP,"g",{size:I,attribute:f},M),size:I,attribute:f}}},9173:(ue,jt,w)=>{w.d(jt,{B:()=>N});var T=w(1999),E=w(9506),st=w(5970);const N=(gt,x,y)=>{let M=(null==x?void 0:x.size)||{x:0,y:0,width:10,height:10},I=(null==x?void 0:x.attribute)||{preserveAspectRatio:"none"};Object.assign(I,(0,E.xW)(T.h.IMAGE,M,I));let f=(null==x?void 0:x.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:gt,element:(0,st.fn)(gt,T.h.IMAGE,"image",{size:M,attribute:I,source:f},y),size:M,attribute:I,source:f}}},3069:(ue,jt,w)=>{w.d(jt,{q:()=>gt});var T=w(1999),E=w(7102),st=w(9506),N=w(5970);const gt=(x,y,M)=>{let I=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth,strokeLinecap:E.L.attribute.strokeLinecap};return Object.assign(f,(0,st.xW)(T.h.LINE,I,f)),{nodeId:x,element:(0,N.fn)(x,T.h.LINE,"line",{size:I,attribute:f},M),size:I,attribute:f}}},6407:(ue,jt,w)=>{w.d(jt,{X:()=>gt});var T=w(1999),E=w(7102),st=w(9506),N=w(5970);const gt=(x,y,M)=>{let I=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(f,(0,st.xW)(T.h.PATH,I,f)),{nodeId:x,element:(0,N.fn)(x,T.h.PATH,"path",{size:I,attribute:f},M),size:I,attribute:f}}},3477:(ue,jt,w)=>{w.d(jt,{u:()=>gt});var T=w(1999),E=w(7102),st=w(9506),N=w(5970);const gt=(x,y,M)=>{let I=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(f,(0,st.xW)(T.h.POLYGON,I,f)),{nodeId:x,element:(0,N.fn)(x,T.h.POLYGON,"polygon",{size:I,attribute:f},M),size:I,attribute:f}}},7945:(ue,jt,w)=>{w.d(jt,{a:()=>gt});var T=w(1999),E=w(7102),st=w(9506),N=w(5970);const gt=(x,y,M)=>{let I=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(f,(0,st.xW)(T.h.RECT,I,f)),{nodeId:x,element:(0,N.fn)(x,T.h.RECT,"rect",{size:I,attribute:f},M),size:I,attribute:f}}},6847:(ue,jt,w)=>{w.d(jt,{L:()=>gt});var T=w(1999),E=w(7102),st=w(9506),N=w(5970);const gt=(x,y,M)=>{let I=(null==y?void 0:y.size)||{x:0,y:0,width:320,height:80},f=(null==y?void 0:y.attribute)||{fill:E.L.attribute.stroke,fontFamily:E.L.attribute.fontFamily,fontSize:E.L.attribute.fontSize,textLength:E.L.attribute.textLength};Object.assign(f,(0,st.xW)(T.h.TEXT,I,f));let A=(null==y?void 0:y.source)||{type:"text",text:{textContent:"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!"}};return{nodeId:x,element:(0,N.fn)(x,T.h.TEXT,"text",{size:I,attribute:f,source:A},M),size:I,attribute:f,source:A}}},9506:(ue,jt,w)=>{w.d(jt,{CE:()=>st,xW:()=>N});var T=w(1999),E=w(4896);const st=(x,y,M,I,f)=>{let A={x:Math.min(x,M),y:Math.min(y,I),width:Math.abs(M-x)||1,height:Math.abs(I-y)||1};return null!=f&&f.ratio&&(A.width<=A.height?A.height=A.width*(null==f?void 0:f.ratio):A.width=A.height/(null==f?void 0:f.ratio)),Object.assign(A,{ratios:(null==f?void 0:f.ratios)||[[(x-A.x)/(A.width||1),(y-A.y)/(A.height||1)],[(M-A.x)/(A.width||1),(I-A.y)/(A.height||1)]]}),null!=f&&f.points&&(A.points=null==f?void 0:f.points),A},N=(x,y,M)=>{var I,f=(()=>{switch(x){case T.h.CIRCLE:return{cx:y.x+y.width/2,cy:y.y+y.height/2,r:Math.min(y.width/2,y.height/2)};case T.h.ELLIPSE:return{cx:y.x+y.width/2,cy:y.y+y.height/2,rx:y.width/2,ry:y.height/2};case T.h.LINE:{var A;let P={};return null===(A=y.ratios)||void 0===A||A.forEach((h,L)=>{P[`x${L+1}`]=y.x+y.width*h[0],P[`y${L+1}`]=y.y+y.height*h[1]}),P}case T.h.RECT:case T.h.FOREIGNOBJECT:case T.h.IMAGE:return{x:y.x,y:y.y,width:y.width,height:y.height};case T.h.TEXT:var C;return{x:y.x,y:y.y+(null!==(C=M.fontSize)&&void 0!==C?C:16)};case T.h.POLYGON:var O;if(null!==(O=y.ratios)&&void 0!==O&&O.length)return{points:(0,E.n9)(y,y.ratios)};break;case T.h.PATH:var ut,p;if(null!==(ut=y.ratioMaps)&&void 0!==ut&&ut.length)return{d:(0,E.$N)(y,y.ratioMaps)};if(null!==(p=y.points)&&void 0!==p&&p.length)return{d:`M ${(P=y.points)[0][0]} ${P[0][1]} L ${(P.map(h=>[h[0],h[1]])||[]).map(h=>h.join(" ")).join(" ")}`}}var P;return{}})();return y.rotate?(f.transform=`rotate(${y.rotate})`,f.transformOrigin=`${y.x+y.width/2} ${y.y+y.height/2}`):null!==(I=M.transform)&&void 0!==I&&I.match(/^rotate/)&&(M.transform=null,M.transformOrigin=null),f}},9841:(ue,jt,w)=>{w.d(jt,{$:()=>st});var T=w(7102),E=w(2492);const st=N=>(0,E.z)(N/T.L.screen.scale)},6752:(ue,jt,w)=>{w.d(jt,{E$:()=>y,Nx:()=>I,ZF:()=>x,ei:()=>gt,fu:()=>M});var T=w(7102),E=w(5970),st=w(9506),N=w(2492);const gt=(f,A)=>{let{id:C,type:O,size:ut,attribute:p}=f,P=JSON.parse(JSON.stringify({id:C,size:ut,attribute:p}));ut.x=(0,N.z)(A),Object.assign(p,(0,st.xW)(O,ut,p)),(0,E.tD)(window.document.getElementById(C),p),T.L.history.push([{type:"size",from:P,to:JSON.parse(JSON.stringify({id:C,size:ut,attribute:p}))}])},x=(f,A)=>{let{id:C,type:O,size:ut,attribute:p}=f,P=JSON.parse(JSON.stringify({id:C,size:ut,attribute:p}));ut.y=(0,N.z)(A),Object.assign(p,(0,st.xW)(O,ut,p)),(0,E.tD)(window.document.getElementById(C),p),T.L.history.push([{type:"size",from:P,to:JSON.parse(JSON.stringify({id:C,size:ut,attribute:p}))}])},y=(f,A,C)=>{let{id:O,type:ut,size:p,attribute:P}=f,h=JSON.parse(JSON.stringify({id:O,size:p,attribute:P}));C&&(p.height=(0,N.z)(A*p.height/p.width)),p.width=(0,N.z)(A),Object.assign(P,(0,st.xW)(ut,p,P)),(0,E.tD)(window.document.getElementById(O),P),T.L.history.push([{type:"size",from:h,to:JSON.parse(JSON.stringify({id:O,size:p,attribute:P}))}])},M=(f,A,C)=>{let{id:O,type:ut,size:p,attribute:P}=f,h=JSON.parse(JSON.stringify({id:O,size:p,attribute:P}));C&&(p.width=(0,N.z)(A*p.width/p.height)),p.height=(0,N.z)(A),Object.assign(P,(0,st.xW)(ut,p,P)),(0,E.tD)(window.document.getElementById(O),P),T.L.history.push([{type:"size",from:h,to:JSON.parse(JSON.stringify({id:O,size:p,attribute:P}))}])},I=(f,A)=>{let{id:C,type:O,size:ut,attribute:p}=f,P=JSON.parse(JSON.stringify({id:C,size:ut,attribute:p}));ut.rotate="number"==typeof A?(0,N.z)(A,100):void 0,Object.assign(p,(0,st.xW)(O,ut,p)),(0,E.tD)(window.document.getElementById(C),p),T.L.history.push([{type:"size",from:P,to:JSON.parse(JSON.stringify({id:C,size:ut,attribute:p}))}])}},1308:(ue,jt,w)=>{w.d(jt,{I:()=>x});var T=w(3603),E=w(7102);class st{constructor(M){this._points=[],this._options=M}start(M){this._points.length=0,this._points.push([M.x,M.y]),this._options.start(M)}move(M){this._points.push([M.x,M.y]),this._options.move(M,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(M=this._points[0])[0],y:M[1]}:{x:0,y:0};var M}get offsetLast(){return this._points.length>=1?{x:(M=this._points[this._points.length-1])[0],y:M[1]}:{x:0,y:0};var M}}var N=w(6078);const x=(y,M,I,f,A)=>{var C,O,ut;let p=null,P=0,h=0;y.mouseEvent?(p=y.mouseEvent.target,P=y.mouseEvent.offsetX,h=y.mouseEvent.offsetY):y.touchEvent&&(p=y.touchEvent.target,y.touchEvent.touches.length&&(P=y.touchEvent.touches[0].clientX,h=y.touchEvent.touches[0].clientY));let L=null!=I?I:E.L.screen.scale,D=null!=f?f:E.L.screen.dislocation,V=null!=A?A:E.L.screen.offset,Y=()=>{};var tt=new st({start:null!==(C=null==M?void 0:M.start)&&void 0!==C?C:Y,move:null!==(O=null==M?void 0:M.move)&&void 0!==O?O:Y,end:null!==(ut=null==M?void 0:M.end)&&void 0!==ut?ut:Y});y.mouseEvent?tt.start((0,N.D)({x:P,y:h},L,D,{x:0,y:0})):y.touchEvent&&tt.start((0,N.D)({x:P,y:h},L,D,V));let H=nt=>{tt.move((0,N.D)({x:nt.clientX,y:nt.clientY},L,D,V))},G=nt=>{tt.end(),[T.P.SHAPE,T.P.FOREIGNOBJECT,T.P.IMAGE,T.P.TEXT].includes(E.L.pointer.pointer_type)&&(nt.shiftKey||(E.L.pointer.pointer_type=T.P.POINTER))},Ct=nt=>{nt.touches.length&&H({clientX:nt.touches[0].clientX,clientY:nt.touches[0].clientY})},Xt=nt=>{G({shiftKey:nt.shiftKey,ctrlKey:nt.ctrlKey,altKey:nt.altKey}),window.removeEventListener("touchmove",Ct,!1),window.removeEventListener("touchend",Xt,!1)},Jt=nt=>{0==nt.button&&H({clientX:nt.clientX,clientY:nt.clientY})},Ht=nt=>{0==nt.button&&(G({shiftKey:nt.shiftKey,ctrlKey:nt.ctrlKey,altKey:nt.altKey}),window.removeEventListener("mousemove",Jt,!1),window.removeEventListener("mouseup",Ht,!1))};if(y.mouseEvent)window.addEventListener("mousemove",Jt,!1),window.addEventListener("mouseup",Ht,!1);else if(y.touchEvent){var Bt;window.addEventListener("touchmove",Ct,!1),window.addEventListener("touchend",Xt,!1),null===(Bt=p)||void 0===Bt||Bt.addEventListener("touchmove",function(nt){nt.preventDefault()})}}},6078:(ue,jt,w)=>{w.d(jt,{D:()=>E});var T=w(2492);const E=(st,N,gt,x)=>(st.x-=x.x,st.y-=x.y,st.x/=N,st.y/=N,st.x-=gt.x,st.y-=gt.y,st.x=(0,T.z)(st.x),st.y=(0,T.z)(st.y),st)},5619:(ue,jt,w)=>{w.d(jt,{J:()=>yt,I:()=>Pt});var T=w(7873),E=w(7102),st=w(1999),N=w(334),gt=w(8946),x=w(7657),y=w(6769),M=w(3591),f=w(6847),A=w(3073);var P=w(7050),h=w(9173),L=w(2492);const D=(K,u,Z)=>{var dt,it,X,J;let rt=1,z=new Image;z.onload=()=>{var q,Et,Mt,pt;rt=(0,L.z)(z.naturalWidth/z.naturalHeight,100);let It=0,Lt=0,Ot=0,ht=0;var Ut,ee,ae,ne;rt>=1?(Ot=Math.min(z.naturalWidth,null!==(Ut=null===(ee=yt.slide.svg)||void 0===ee||null===(ee=ee.viewBox)||void 0===ee?void 0:ee.width)&&void 0!==Ut?Ut:0),ht=Ot/rt):(ht=Math.min(z.naturalHeight,null!==(ae=null===(ne=yt.slide.svg)||void 0===ne||null===(ne=ne.viewBox)||void 0===ne?void 0:ne.height)&&void 0!==ae?ae:0),Ot=ht/rt),It=((null!==(q=null===(Et=yt.slide.svg)||void 0===Et||null===(Et=Et.viewBox)||void 0===Et?void 0:Et.width)&&void 0!==q?q:0)-Ot)/2,Lt=((null!==(Mt=null===(pt=yt.slide.svg)||void 0===pt||null===(pt=pt.viewBox)||void 0===pt?void 0:pt.height)&&void 0!==Mt?Mt:0)-ht)/2,u.size={x:It,y:Lt,width:Ot,height:ht},V(u,Z)},z.onerror=q=>{console.error(`ImgSrc load failed -> ${JSON.stringify(u.source)}`,q)},z.src=(null!==(dt=u.source)&&void 0!==dt&&dt.path?(null===(it=E.L.config)||void 0===it?void 0:it.readfileuploadurl)+(null===(X=u.source)||void 0===X?void 0:X.path):null===(J=u.source)||void 0===J?void 0:J.url)||""},V=(K,u)=>{if(K.slideStatus!=yt.slideStatus)return void u();let{element:Z}=(0,h.B)(Math.ceil(1e9*Math.random()),{size:K.size,source:{type:"image",image:null==K?void 0:K.source}});setTimeout(()=>{null==Z||Z.remove(),u()},3e3)};var Y=w(5970);const tt=(K,u,Z)=>{var dt,it,X,J;let rt=new Image;rt.onload=()=>{H(K,{width:rt.naturalWidth,height:rt.naturalHeight},u,Z)},rt.onerror=z=>{console.error(`ImgSrc load failed -> ${JSON.stringify(u.source)}`,z),Z()},rt.src=(null!==(dt=u.source)&&void 0!==dt&&dt.path?(null===(it=E.L.config)||void 0===it?void 0:it.readfileuploadurl)+(null===(X=u.source)||void 0===X?void 0:X.path):null===(J=u.source)||void 0===J?void 0:J.url)||""},H=(K,u,Z,dt)=>{if(Z.slideStatus!=yt.slideStatus)return void dt();let it=(0,L.z)(u.width/u.height,100),X=0,J=0,rt=0,z=0;it>=1?(rt=u.width,rt=Math.max(rt,40),rt=Math.min(rt,40),z=rt/it):(z=u.height,z=Math.max(z,40),z=Math.min(z,40),rt=z/it);let{size:Mt}=K;X=Mt.x+Mt.width-rt/2,J=Mt.y-z/2;let pt=(0,Y.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,h.B)(`icon-${K.id}`,{size:{x:X,y:J,width:rt,height:z},source:{type:"image",image:null==Z?void 0:Z.source}},pt),setTimeout(()=>{dt()},3e3)},G=(K,u,Z)=>{var dt,it,X,J,rt,z,q;if(u.slideStatus!=yt.slideStatus)return void Z();if(!(null!==(dt=u.source)&&void 0!==dt&&dt.path||null!==(it=u.source)&&void 0!==it&&it.url))return console.warn(`${K.id} -> audio no source!`),void Z();var Et=jQuery("#"+K.id);let Mt=null!==(X=u.iteration)&&void 0!==X?X:0;if(Mt<0&&(Z(),Z=function(){}),!(Et.data("audio-running")&&Mt<0)){Et.data("audio-running",!0);var pt=new Audio;return pt.autoplay=!0,pt.loop=0!=Mt,pt.preload="auto",pt.controls=!0,pt.setAttributeNode(document.createAttribute("playsinline")),pt.addEventListener("canplay",function(){var It=pt.play();It&&It.then(function(Lt){Et.data("audio-running",!0)}).catch(function(Lt){Et.data("audio-running",!1),u.slideStatus===yt.slideStatus&&Z()})}),pt.addEventListener("timeupdate",function(){var Lt;u.slideStatus!==yt.slideStatus&&((Lt=this).pause(),Lt.remove(),Et.data("audio-running",!1))}),pt.addEventListener("canplaythrough",function(){this.loop&&(Mt>0?Mt--:0==Mt&&(this.loop=!1))}),pt.addEventListener("play",function(){}),pt.addEventListener("pause",function(){}),pt.addEventListener("ended",function(){this.remove(),Et.data("audio-running",!1),u.slideStatus===yt.slideStatus&&Z()}),pt.onerror=function(){this.remove(),Et.data("audio-running",!1),u.slideStatus===yt.slideStatus&&Z()},pt.src=(null!==(J=u.source)&&void 0!==J&&J.path?(null===(rt=E.L.config)||void 0===rt?void 0:rt.readfileuploadurl)+(null===(z=u.source)||void 0===z?void 0:z.path):null===(q=u.source)||void 0===q?void 0:q.url)||"",pt}};var Ct=w(2837);const et=(K,u)=>{var Z;null===(Z=u.test)||void 0===Z||null===(Z=Z.answer)||void 0===Z||null===(Z=Z.matching)||void 0===Z||Z.filter(dt=>dt.id==K.id).forEach(dt=>dt.value=""),jQuery(`#node-${K.id}`).remove()},St=(K,u,Z,dt,it,X)=>{var J,rt,z,q,Et,Mt,pt,It,Lt,Ot,ht,Ut;it.iscorrect?(null!==(J=u.test)&&void 0!==J&&null!==(J=J.audiotrue)&&void 0!==J&&J.path&&G(K,{source:(0,Ct.U)(null===(q=u.test)||void 0===q?void 0:q.audiotrue),iteration:0,nodeStatus:Z,slideStatus:dt},X),null!==(rt=u.test)&&void 0!==rt&&null!==(rt=rt.icontrue)&&void 0!==rt&&rt.path&&tt(K,{source:(0,Ct.U)(null===(Et=u.test)||void 0===Et?void 0:Et.icontrue),iteration:0,nodeStatus:Z,slideStatus:dt},X),null!==(z=u.test)&&void 0!==z&&null!==(z=z.effecttrue)&&void 0!==z&&z.path&&D(0,{source:(0,Ct.U)(null===(Mt=u.test)||void 0===Mt?void 0:Mt.effecttrue),iteration:0,nodeStatus:Z,slideStatus:dt},X)):(null!==(pt=u.test)&&void 0!==pt&&null!==(pt=pt.audiofalse)&&void 0!==pt&&pt.path&&G(K,{source:(0,Ct.U)(null===(Ot=u.test)||void 0===Ot?void 0:Ot.audiofalse),iteration:0,nodeStatus:Z,slideStatus:dt},X),null!==(It=u.test)&&void 0!==It&&null!==(It=It.iconfalse)&&void 0!==It&&It.path&&tt(K,{source:(0,Ct.U)(null===(ht=u.test)||void 0===ht?void 0:ht.iconfalse),iteration:0,nodeStatus:Z,slideStatus:dt},X),null!==(Lt=u.test)&&void 0!==Lt&&null!==(Lt=Lt.effectfalse)&&void 0!==Lt&&Lt.path&&D(0,{source:(0,Ct.U)(null===(Ut=u.test)||void 0===Ut?void 0:Ut.effectfalse),iteration:0,nodeStatus:Z,slideStatus:dt},X))},kt=(K,u,Z,dt)=>{var it,X,J,rt,z,q,Mt,It,pt;null!==(it=u.animate)&&void 0!==it&&it.value&&(0,P.a)(u,Z.nodeStatus,Z.slideStatus),null!==(X=u.interactive)&&void 0!==X&&X.show?(console.log(`node(${u.id}) | nodeStatus(${Z.nodeStatus}) | slideStatus(${Z.slideStatus}) | show`),((K,u,Z,dt)=>{var it,X,J;let rt={total:0,counter:0},{triggershow:z,triggerrun:q,triggerhide:Et,action:Mt,audio:pt}=null!==(it=null===(X=K.interactive)||void 0===X?void 0:X.show)&&void 0!==it?it:{};if(console.log(`node(${K.id}) | nodeStatus(${u}) | slideStatus(${Z}) | show`),z){let{id:Lt,ids:Ot,time:ht,async:Ut}=z;"asynctrue"==Ut?setTimeout(()=>{(0,M.GD)({id:Lt,ids:Ot,nodeStatus:u,slideStatus:Z})}):"time"==Ut&&setTimeout(()=>{(0,M.GD)({id:Lt,ids:Ot,nodeStatus:u,slideStatus:Z})},1e3*(null!=ht?ht:0))}if(q){let{id:Lt,ids:Ot,time:ht,async:Ut}=q;"asynctrue"==Ut?setTimeout(()=>{(0,M.MF)({id:Lt,ids:Ot,nodeStatus:u,slideStatus:Z})}):"time"==Ut&&setTimeout(()=>{(0,M.MF)({id:Lt,ids:Ot,nodeStatus:u,slideStatus:Z})},1e3*(null!=ht?ht:0))}if(Et){let{id:Lt,ids:Ot,time:ht,async:Ut}=Et;"asynctrue"==Ut?setTimeout(()=>{(0,M.vi)({id:Lt,ids:Ot,nodeStatus:u,slideStatus:Z})}):"time"==Ut&&setTimeout(()=>{(0,M.vi)({id:Lt,ids:Ot,nodeStatus:u,slideStatus:Z})},1e3*(null!=ht?ht:0))}let It=()=>{setTimeout(()=>{if(rt.counter>=rt.total){if(dt&&dt(),z){let{id:Lt,ids:Ot,async:ht}=z;(!ht||"asyncfalse"==ht)&&(0,M.GD)({id:Lt,ids:Ot,nodeStatus:u,slideStatus:Z})}if(q){let{id:Lt,ids:Ot,async:ht}=q;(!ht||"asyncfalse"==ht)&&(0,M.MF)({id:Lt,ids:Ot,nodeStatus:u,slideStatus:Z})}if(Et){let{id:Lt,ids:Ot,async:ht}=Et;(!ht||"asyncfalse"==ht)&&(0,M.vi)({id:Lt,ids:Ot,nodeStatus:u,slideStatus:Z})}}})};if(null!=Mt&&Mt.value){rt.total+=1;let Lt=()=>{rt.counter+=1,It()};switch(null==Mt?void 0:Mt.value){case"hide":jQuery("#"+K.id).addClass("hide"),Lt();break;case"points":{let{points:Ot,time:ht,iteration:Ut,finish:ee}=Mt;(0,x.c)(K.id,{node:K,points:Ot,time:ht,iteration:Ut,finish:ee,nodeStatus:u,slideStatus:Z},Lt);break}default:{let{value:Ot,time:ht,iteration:Ut,finish:ee}=Mt;(0,gt.h)(K.id,{node:K,value:Ot,time:ht,iteration:Ut,finish:ee,nodeStatus:u,slideStatus:Z},Lt);break}}}if(null!=pt&&null!==(J=pt.source)&&void 0!==J&&J.path){rt.total+=1;let Lt=()=>{rt.counter+=1,It()},Ot=(0,y.d)(K.id,pt,rt,{nodeStatus:u,slideStatus:Z},Lt);-1==(null==pt?void 0:pt.iteration)&&jQuery("#"+K.id).click(ht=>{ht.preventDefault(),Ot&&(Ot.volume=Ot.volume>=1?0:Ot.volume+.25),console.log(null==Ot?void 0:Ot.volume)})}rt.total||It()})(u,Z.nodeStatus,Z.slideStatus,dt)):dt&&dt(),null!==(J=u.interactive)&&void 0!==J&&J.click&&(It=null===(Mt=u.interactive)||void 0===Mt?void 0:Mt.click,Object.keys(null!=It?It:{}).map(Ot=>It[Ot]?1:0).includes(1)&&jQuery("#"+u.id).addClass("interactive-click"),jQuery("#"+u.id).click(It=>{It.preventDefault(),Z.nodeStatus=yt.refreshNodeStatus(),console.log(`node(${u.id}) | nodeStatus(${Z.nodeStatus}) | slideStatus(${Z.slideStatus}) | click`),(0,N.J)(u,Z.nodeStatus,Z.slideStatus)})),null!==(rt=u.variable)&&void 0!==rt&&rt.input&&jQuery("#"+u.id).on("change","input,textarea",It=>{It.preventDefault(),((K,u,Z)=>{var dt,it;E.L.variable.setValue(null!==(dt=null===(it=u.variable)||void 0===it||null===(it=it.input)||void 0===it?void 0:it.variable)&&void 0!==dt?dt:"",K),(K=>{var u;let Z=(dt,it)=>{null==dt||dt.forEach(X=>{switch(X.type){case st.h.GROUP:(0,A.v)(X.id,{},it?window.document.getElementById(it):null),Z(X.nodes,X.id);break;case st.h.POLYGON:break;case st.h.TEXT:(0,f.L)(X.id,{size:X.size,attribute:X.attribute,source:X.source},it?window.document.getElementById(it):null)}})};Z(null===(u=K.svg)||void 0===u?void 0:u.nodes)})(Z)})(It.target.value,u,K)}),null!==(z=u.variable)&&void 0!==z&&z.click&&(null!==(pt=u.variable)&&void 0!==pt&&null!==(pt=pt.click)&&void 0!==pt&&pt.variable&&jQuery("#"+u.id).addClass("variable-click"),jQuery("#"+u.id).click(It=>{It.preventDefault(),((K,u)=>{var Z;E.L.variable.setValueOperator(null===(Z=K.variable)||void 0===Z?void 0:Z.click),(K=>{var u;let Z=(dt,it)=>{null==dt||dt.forEach(X=>{switch(X.type){case st.h.GROUP:(0,A.v)(X.id,{},it?window.document.getElementById(it):null),Z(X.nodes,X.id);break;case st.h.POLYGON:break;case st.h.TEXT:(0,f.L)(X.id,{size:X.size,attribute:X.attribute,source:X.source},it?window.document.getElementById(it):null)}})};Z(null===(u=K.svg)||void 0===u?void 0:u.nodes)})(u)})(u,K)})),"test"==(null===(q=u.source)||void 0===q?void 0:q.type)&&((K,u)=>{var Z;let dt=()=>{};switch(null===(Z=K.source)||void 0===Z||null===(Z=Z.test)||void 0===Z?void 0:Z.type){case"truefalse":var it;if(jQuery("#"+K.id).click(z=>{z.preventDefault(),((K,u,Z,dt,it)=>{var X,J;let rt=null===(X=K.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.truefalse)||void 0===X?void 0:X.iscorrect;if(u.test?u.test.answer?u.test.answer.truefalse={value:K.id,iscorrect:rt}:u.test.answer={truefalse:{value:K.id,iscorrect:rt}}:u.test={answer:{truefalse:{value:K.id,iscorrect:rt}}},null!==(J=u.svg)&&void 0!==J&&J.nodes.find(z=>{var q;return"submit"==(null===(q=z.source)||void 0===q||null===(q=q.test)||void 0===q?void 0:q.type)})){if(u.test.showselection){let z=(0,Y.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,Y.kE)(z,u,K)}}else St(K,u,Z,dt,{iscorrect:rt},it)})(K,u,yt.nodeStatus,yt.slideStatus,dt)}),null!==(it=u.test)&&void 0!==it&&it.showselection){let z=(0,Y.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,Y.kE)(z,u,K)}break;case"singlechoice":var X;if(jQuery("#"+K.id).click(z=>{z.preventDefault(),((K,u,Z,dt,it)=>{var X,J;let rt=null===(X=K.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.singlechoice)||void 0===X?void 0:X.iscorrect;if(u.test?u.test.answer?u.test.answer.singlechoice={value:K.id,iscorrect:rt}:u.test.answer={singlechoice:{value:K.id,iscorrect:rt}}:u.test={answer:{singlechoice:{value:K.id,iscorrect:rt}}},null!==(J=u.svg)&&void 0!==J&&J.nodes.find(z=>{var q;return"submit"==(null===(q=z.source)||void 0===q||null===(q=q.test)||void 0===q?void 0:q.type)})){if(u.test.showselection){let z=(0,Y.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,Y.kE)(z,u,K)}}else St(K,u,Z,dt,{iscorrect:rt},it)})(K,u,yt.nodeStatus,yt.slideStatus,dt)}),null!==(X=u.test)&&void 0!==X&&X.showselection){let z=(0,Y.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,Y.kE)(z,u,K)}break;case"multichoice":var J;if(jQuery("#"+K.id).click(z=>{z.preventDefault(),((K,u,Z,dt,it)=>{var X,J;let z,rt=null===(X=K.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.multichoice)||void 0===X?void 0:X.iscorrect;if(u.test?u.test.answer?u.test.answer.multichoice?u.test.answer.multichoice.find(q=>q.value==K.id)?(u.test.answer.multichoice=u.test.answer.multichoice.filter(q=>q.value!=K.id),z=!0):u.test.answer.multichoice.push({value:K.id,iscorrect:rt}):u.test.answer.multichoice=[{value:K.id,iscorrect:rt}]:u.test.answer={multichoice:[{value:K.id,iscorrect:rt}]}:u.test={answer:{multichoice:[{value:K.id,iscorrect:rt}]}},null!==(J=u.svg)&&void 0!==J&&J.nodes.find(q=>{var Et;return"submit"==(null===(Et=q.source)||void 0===Et||null===(Et=Et.test)||void 0===Et?void 0:Et.type)})){if(u.test.showselection){let q=(0,Y.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,Y.kE)(q,u,K)}}else St(K,u,Z,dt,{iscorrect:rt},it)})(K,u,yt.nodeStatus,yt.slideStatus,dt)}),null!==(J=u.test)&&void 0!==J&&J.showselection){let z=(0,Y.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,Y.kE)(z,u,K)}break;case"fill":var rt;jQuery("#"+K.id).on("keyup",'input[type="text"]',z=>{var q;let Et=jQuery("<div/>").css({"font-size":jQuery(z.target).css("font-size"),visibility:"hidden",float:"left"}).text(z.target.value).appendTo(window.document.body);jQuery(z.target).css({width:(null!==(q=Et.width())&&void 0!==q?q:0)+30})}).on("keypress",'input[type="text"]',z=>{13===(z.keyCode||z.charCode||z.which)&&(z.preventDefault(),z.stopPropagation(),jQuery(z.target).blur())}).on("change",'input[type="text"]',z=>{var q,Et;let Mt=yt.nodeStatus,pt=yt.slideStatus,It=null===(q=z.target)||void 0===q?void 0:q.getAttribute("data-key"),Lt=null===(Et=z.target)||void 0===Et||null===(Et=Et.value)||void 0===Et?void 0:Et.trim();((K,u,Z,dt,it,X)=>{var J,rt,z,q;let{value:Et}=null!==(J=null===(rt=K.source)||void 0===rt||null===(rt=rt.test)||void 0===rt||null===(rt=rt.fill)||void 0===rt?void 0:rt.find(pt=>pt.key==`[[${it.key}]]`))&&void 0!==J?J:{},Mt=Et&&Et.map(pt=>null==pt?void 0:pt.toLocaleLowerCase()).includes(null===(z=it.value)||void 0===z?void 0:z.toLocaleLowerCase());null!==(q=u.svg)&&void 0!==q&&q.nodes.find(pt=>{var It;return"submit"==(null===(It=pt.source)||void 0===It||null===(It=It.test)||void 0===It?void 0:It.type)})||St(K,u,Z,dt,{iscorrect:Mt},X),it.iscorrect=Mt,u.test?u.test.answer?u.test.answer.fill?u.test.answer.fill.find(pt=>pt.key==it.key)?u.test.answer.fill.filter(pt=>pt.key==it.key).forEach(pt=>{pt.value=it.value,pt.iscorrect=it.iscorrect}):u.test.answer.fill.push(it):u.test.answer.fill=[it]:u.test.answer={fill:[it]}:u.test={answer:{fill:[it]}}})(K,u,Mt,pt,{key:It,value:Lt},dt),jQuery("#"+K.id).find(`input[type="text"][data-key="${It}"]`).val(Lt)}),null!==(rt=u.test)&&void 0!==rt&&rt.showselection||jQuery("#"+K.id).addClass("hide-selection"),(()=>{let z=(0,Y.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,Y.kE)(z,u,K)})();break;case"matching-empty":jQuery("#"+K.id).on("touchmove",".ondrag-item",function(z){z.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(z){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${K.size.height/K.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${z.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(z){var q;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(q=u.test)&&void 0!==q&&q.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),et(K,u)},drag:function(z){},dragend:function(z){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${K.id} .ondrop-here`).kendoDropTarget({dragenter:function(z){z.dropTarget.hasClass("actived")&&z.dropTarget.addClass("focused")},dragleave:function(z){z.dropTarget.hasClass("actived")&&z.dropTarget.removeClass("focused")},drop:function(z){if(!z.dropTarget.hasClass("actived"))return;z.dropTarget.removeClass("focused");let q=z.dropTarget,Et=z.draggable.currentTarget;q.is(":empty")||q.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),Et.appendTo(q),((K,u,Z,dt,it,X)=>{var J,rt,z;let{key:q}=null!==(J=null===(rt=K.source)||void 0===rt||null===(rt=rt.test)||void 0===rt?void 0:rt.matching)&&void 0!==J?J:{key:"KIEN"},Et=it.key==q;null!==(z=u.svg)&&void 0!==z&&z.nodes.find(pt=>{var It;return"submit"==(null===(It=pt.source)||void 0===It||null===(It=It.test)||void 0===It?void 0:It.type)})||St(K,u,Z,dt,{iscorrect:Et},X),et(K,u);let Mt={id:K.id,key:null!=q?q:"",value:it.key};u.test?u.test.answer?u.test.answer.matching?u.test.answer.matching.find(pt=>pt.id==Mt.id)?u.test.answer.matching.filter(pt=>pt.id==Mt.id).forEach(pt=>{pt.key=Mt.key,pt.value=Mt.value}):u.test.answer.matching.push(Mt):u.test.answer.matching=[Mt]:u.test.answer={matching:[Mt]}:u.test={answer:{matching:[Mt]}}})(K,u,yt.nodeStatus,yt.slideStatus,{key:Et.data("key")},dt)}}),(()=>{let z=(0,Y.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,Y.kE)(z,u,K)})();break;case"matching-content":jQuery("#"+K.id).on("touchmove",".ondrag-item",function(z){z.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(z){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${K.size.height/K.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${z.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(z){var q;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(q=u.test)&&void 0!==q&&q.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(z){},dragend:function(z){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${K.id} .ondrop-here`).kendoDropTarget({dragenter:function(z){z.dropTarget.hasClass("actived")&&z.dropTarget.addClass("focused")},dragleave:function(z){z.dropTarget.hasClass("actived")&&z.dropTarget.removeClass("focused")},drop:function(z){z.dropTarget.hasClass("actived")&&(z.dropTarget.removeClass("focused"),z.draggable.currentTarget.appendTo(z.dropTarget))}}),(()=>{let z=(0,Y.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,Y.kE)(z,u,K)})();break;case"speech":break;case"submit":jQuery("#"+K.id).click(z=>{z.preventDefault(),((K,u,Z,dt,it)=>{var X,J,rt,z,q;let Et;var Mt;if(null!=u&&null!==(X=u.test)&&void 0!==X&&null!==(X=X.answer)&&void 0!==X&&X.truefalse)Et=null==u||null===(Mt=u.test)||void 0===Mt||null===(Mt=Mt.answer)||void 0===Mt||null===(Mt=Mt.truefalse)||void 0===Mt?void 0:Mt.iscorrect;else if(null!=u&&null!==(J=u.test)&&void 0!==J&&null!==(J=J.answer)&&void 0!==J&&J.singlechoice){var pt;Et=null==u||null===(pt=u.test)||void 0===pt||null===(pt=pt.answer)||void 0===pt||null===(pt=pt.singlechoice)||void 0===pt?void 0:pt.iscorrect}else if(null!=u&&null!==(rt=u.test)&&void 0!==rt&&null!==(rt=rt.answer)&&void 0!==rt&&rt.multichoice){var It,Lt,Ot;Et=1==[null==u||null===(It=u.test)||void 0===It||null===(It=It.answer)||void 0===It||null===(It=It.multichoice)||void 0===It?void 0:It.length,null==u||null===(Lt=u.test)||void 0===Lt||null===(Lt=Lt.answer)||void 0===Lt||null===(Lt=Lt.multichoice)||void 0===Lt||null===(Lt=Lt.map(ne=>ne.iscorrect?1:0))||void 0===Lt?void 0:Lt.reduce((ne,re)=>ne+re),null==u||null===(Ot=u.svg)||void 0===Ot||null===(Ot=Ot.nodes)||void 0===Ot||null===(Ot=Ot.filter(ne=>{var re,_e;return"multichoice"==(null===(re=ne.source)||void 0===re||null===(re=re.test)||void 0===re?void 0:re.type)&&(null===(_e=ne.source)||void 0===_e||null===(_e=_e.test)||void 0===_e||null===(_e=_e.multichoice)||void 0===_e?void 0:_e.iscorrect)}))||void 0===Ot?void 0:Ot.length].filter((ne,re,_e)=>_e.indexOf(ne)==re).length}else if(null!=u&&null!==(z=u.test)&&void 0!==z&&null!==(z=z.answer)&&void 0!==z&&z.fill){var ht,Ut;Et=(null==u||null===(ht=u.test)||void 0===ht||null===(ht=ht.answer)||void 0===ht||null===(ht=ht.fill)||void 0===ht||null===(ht=ht.map(ne=>ne.iscorrect?1:0))||void 0===ht?void 0:ht.reduce((ne,re)=>ne+re))==(null===(Ut=u.svg)||void 0===Ut||null===(Ut=Ut.nodes)||void 0===Ut||null===(Ut=Ut.filter(ne=>{var re;return"fill"==(null===(re=ne.source)||void 0===re||null===(re=re.test)||void 0===re?void 0:re.type)}))||void 0===Ut?void 0:Ut.length)}else if(null!=u&&null!==(q=u.test)&&void 0!==q&&null!==(q=q.answer)&&void 0!==q&&q.matching){var ee,ae;Et=(null===(ee=u.svg)||void 0===ee||null===(ee=ee.nodes)||void 0===ee||null===(ee=ee.filter(ne=>{var re;return"matching-empty"==(null===(re=ne.source)||void 0===re||null===(re=re.test)||void 0===re?void 0:re.type)}))||void 0===ee?void 0:ee.length)==((null==u||null===(ae=u.test)||void 0===ae||null===(ae=ae.answer)||void 0===ae?void 0:ae.matching)||[]).map(ne=>ne.key==ne.value?1:0).reduce((ne,re)=>ne+re)}St(K,u,Z,dt,{iscorrect:Et},it)})(K,u,yt.nodeStatus,yt.slideStatus,dt)})}})(u,K)};var mt=w(1281),U=w(6153),Q=w(3069),d=w(7945),at=w(3477),xt=w(745),zt=w(6407);const Gt=(K,u,Z)=>{if(Z.slideStatus!=yt.slideStatus||!u.length)return;let dt=u.shift(),it=K.filter(z=>{var q;return(null!==(q=z.idx)&&void 0!==q?q:0)==dt});if(!it.length)return;let X=Math.max.apply(null,it.map(z=>{var q;return null!==(q=z.time)&&void 0!==q?q:0})),J=!1,rt=X<.5?0:setTimeout(()=>{J||(J=!0,Gt(K,u,Z))},1e3*X);Kt(K,u,it,0,Z,{idx:dt,total:it.length,counter:0,isRecursive:J,timeoutRecursive:rt,maxTimeCoundown:X,uid:Math.floor(1e9*Math.random())})},Kt=(K,u,Z,dt,it,X)=>{if(it.slideStatus!=yt.slideStatus)return;let J=Z[dt];if(J){switch(J.type){case st.h.GROUP:break;case st.h.CIRCLE:(0,mt.K)(J.id,{size:J.size,attribute:J.attribute},J.pid?window.document.getElementById(J.pid):null);break;case st.h.ELLIPSE:(0,U.W)(J.id,{size:J.size,attribute:J.attribute},J.pid?window.document.getElementById(J.pid):null);break;case st.h.LINE:(0,Q.q)(J.id,{size:J.size,attribute:J.attribute},J.pid?window.document.getElementById(J.pid):null);break;case st.h.RECT:(0,d.a)(J.id,{size:J.size,attribute:J.attribute},J.pid?window.document.getElementById(J.pid):null);break;case st.h.POLYGON:(0,at.u)(J.id,{size:J.size,attribute:J.attribute},J.pid?window.document.getElementById(J.pid):null);break;case st.h.FOREIGNOBJECT:(0,xt.$)(J.id,{size:J.size,attribute:J.attribute,style:J.style,source:J.source},J.pid?window.document.getElementById(J.pid):null);break;case st.h.IMAGE:(0,h.B)(J.id,{size:J.size,attribute:J.attribute,source:J.source},J.pid?window.document.getElementById(J.pid):null);break;case st.h.TEXT:(0,f.L)(J.id,{size:J.size,attribute:J.attribute,source:J.source},J.pid?window.document.getElementById(J.pid):null);break;case st.h.PATH:(0,zt.X)(J.id,{size:J.size,attribute:J.attribute},J.pid?window.document.getElementById(J.pid):null)}kt(it.slide,J,it,()=>{X.counter+=1,X.maxTimeCoundown<.5&&X.counter>=X.total&&(X.total=X.counter=0,X.isRecursive||(clearTimeout(X.timeoutRecursive),X.isRecursive=!0,setTimeout(()=>{Gt(K,u,it)},250)))}),Kt(K,u,Z,++dt,it,X)}},yt=new class Vt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(u){this._dataSource=u.data||{},E.L.variable.set=u.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var u,Z;return null!==(u=null===(Z=this._dataSource)||void 0===Z||null===(Z=Z.slides)||void 0===Z?void 0:Z.length)&&void 0!==u?u:0}get slides(){var u;return(null===(u=this._dataSource)||void 0===u?void 0:u.slides)||[]}get slide(){var u;return((null===(u=this._dataSource)||void 0===u?void 0:u.slides)||[])[this._slideIdx]||{}}findNode(u){var Z;let dt=null===(Z=this._dataSource)||void 0===Z||null===(Z=Z.slides)||void 0===Z?void 0:Z.find((pt,It)=>It==this._slideIdx),it=null==dt?void 0:dt.svg,X=(pt,It)=>{let Lt=null==pt?void 0:pt.find(Ut=>Ut.id==u);if(Lt)return Lt.pid=It,Lt;let Ot=0,ht=pt.length||0;for(;Ot<ht&&!Lt&&(Lt=X(pt[Ot].nodes||[],pt[Ot].id),!Lt);)Ot++;return Lt},J=X((null==it?void 0:it.nodes)||[]);var rt,z,q,Et,Mt;return J?(J.style=null!==(rt=J.style)&&void 0!==rt?rt:{},J.source=null!==(z=J.source)&&void 0!==z?z:{},J.animate=null!==(q=J.animate)&&void 0!==q?q:{},J.interactive=null!==(Et=J.interactive)&&void 0!==Et?Et:{},J.variable=null!==(Mt=J.variable)&&void 0!==Mt?Mt:{},J):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(u,Z,dt){var it;let X;var J,rt;if(this.refreshNodeStatus(),this.refreshSlideStatus(),dt)X=null===(J=this._dataSource)||void 0===J||null===(J=J.slides)||void 0===J?void 0:J.find(Mt=>Mt.code==dt||Mt.id==dt),X&&(this._slideIdx=(null===(rt=this._dataSource)||void 0===rt||null===(rt=rt.slides)||void 0===rt?void 0:rt.indexOf(X))||0);else if(Z){var z,q;X=null===(z=this._dataSource)||void 0===z||null===(z=z.slides)||void 0===z?void 0:z.find(Mt=>Mt.id==Z),X&&(this._slideIdx=(null===(q=this._dataSource)||void 0===q||null===(q=q.slides)||void 0===q?void 0:q.indexOf(X))||0)}else this._slideIdx=Math.min(Math.max(u||0,0),this.slideTotal-1),X=this.slide;if(X){var Et;Pt(E.L.container,E.L.svg,X,!0),null===(Et=jQuery(E.L.svg).find("#"+T.F.BACKGROUND_GROUP))||void 0===Et||Et.empty();let Mt=(0,Y.RY)(T.F.BACKGROUND_GROUP,"g",void 0,E.L.svg);(0,Y.I6)(Mt,X),(K=>{var u,Z,dt,it;let X=yt.nodeStatus,J=yt.slideStatus;null===(u=K.svg)||void 0===u||u.nodes.forEach(z=>{z.pid=Math.ceil(1e9*Math.random()),(0,A.v)(z.pid)});let rt=null===(Z=K.svg)||void 0===Z||null===(Z=Z.nodes)||void 0===Z?void 0:Z.map(z=>{var q;return null!==(q=z.idx)&&void 0!==q?q:0}).filter((z,q,Et)=>Et.indexOf(z)==q).sort((z,q)=>(null!=z?z:0)-(null!=q?q:0));Gt(null!==(dt=null===(it=K.svg)||void 0===it?void 0:it.nodes)&&void 0!==dt?dt:[],null!=rt?rt:[],{slide:K,nodeStatus:X,slideStatus:J})})(X)}this.changeSlide(this.slides,null===(it=this.slide)||void 0===it?void 0:it.id,this.slideIdx,this.slides.length,X)}set onChangeSlide(u){this._fnChangeSlides.push(u)}changeSlide(u,Z,dt,it,X){this._fnChangeSlides.forEach(J=>J(u,Z,dt,it,X))}},Pt=(K,u,Z,dt)=>{var it,X,J,rt;let z=window.document.querySelector(u);var q;z||(z=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(q=window.document.querySelector(K))||void 0===q||q.appendChild(z)),dt&&(z.textContent=null);let{x:Et,y:Mt,width:pt,height:It}=null!==(it=null==Z||null===(X=Z.svg)||void 0===X?void 0:X.viewBox)&&void 0!==it?it:E.L.screen.frameSize;z.setAttributeNS(null,"viewBox",Et+" "+Mt+" "+pt+" "+It),z.setAttribute("id",u.replace("#",""));var ee,ae,Lt=null!==(J=jQuery(K).width())&&void 0!==J?J:1080,Ot=null!==(rt=jQuery(K).height())&&void 0!==rt?rt:1080,Ut=pt/It;Ut>=Lt/Ot?ae=(ee=Lt)/Ut:ee=(ae=Ot)*Ut,z.setAttributeNS(null,"width",ee.toString()),z.setAttributeNS(null,"height",ae.toString())}},7050:(ue,jt,w)=>{w.d(jt,{M:()=>st,a:()=>E});var T=w(5619);const E=(gt,x,y)=>{var M;let{value:f}=null!==(M=gt.animate)&&void 0!==M?M:{};st(gt.id,{node:gt,value:f,nodeStatus:x,slideStatus:y},()=>{})},st=(gt,x,y)=>{var M;if(!x.value)return void y();let I=jQuery("#"+gt).parents("g");if(!I.length)return void y();let{size:f}=x.node;I.css("transform-origin",`${f.x+f.width/2}px ${f.y+f.height/2}px`);let A="",C=null!==(M=x.iteration)&&void 0!==M?M:0,O=[];(x.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?O.push(x.value):x.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(x.value)?(O.push("animation"),O.push(`animation-${x.value}`)):(O.push("animate__animated"),O.push(`animate__${x.value}`)):(O.push("animation"),O.push("animation-fadein")),C<0?(O.push("animation-iteration-infinite"),y(),y=function(){}):C>0&&O.push("animation-iteration-"+(C+1)),A=O.join(" "),function(p){let P=function(){I.data("animate-running")?I.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){I.data("animate-running",!1),setTimeout(function(){p()},100)}):p()};I.hasClass("animation")?setTimeout(function(){P()}):P()}(function(){var p;N(gt),(C>0||C<0)&&I.one("animationiteration",function(){x.slideStatus===T.J.slideStatus||(I.data("animate-running",!1),N(gt),x.slideStatus===T.J.slideStatus&&y())}),I.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(I.data("animate-running",!1),N(gt),x.finish){default:case 0:case 1:break;case 2:var P;st(gt,{node:x.node,value:null===(P=x.node.animate)||void 0===P?void 0:P.out,nodeStatus:x.nodeStatus,slideStatus:x.slideStatus},()=>{I.addClass("hide")})}x.slideStatus===T.J.slideStatus&&y()}),I.attr("data-class",null!==(p=I.attr("class"))&&void 0!==p?p:""),I.addClass(A),I.data("animate-running",!0)})},N=function(gt){var x,y,M=jQuery("#"+gt).parents("g"),I=null===(x=M.attr("class"))||void 0===x?void 0:x.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),f=null===(y=M.attr("class"))||void 0===y?void 0:y.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);I&&I.forEach(function(C){jQuery(M).removeClass(C)}),f&&f.forEach(function(C){jQuery(M).removeClass(C)});let A=M.attr("data-class");A&&(M.attr("class",A),M.removeAttr("data-class")),jQuery(M).data("animation-running",!1)}},8946:(ue,jt,w)=>{w.d(jt,{h:()=>st});var T=w(5619),E=w(7050);const st=(gt,x,y)=>{var M;if(!x.value)return void y();let I=jQuery("#"+gt).parents("g");if(!I.length)return void y();let{size:f}=x.node;I.css("transform-origin",`${f.x+f.width/2}px ${f.y+f.height/2}px`);let A="",C=null!==(M=x.iteration)&&void 0!==M?M:0,O=[];(x.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?O.push(x.value):(O.push("animation"),O.push(x.value?"animation-"+x.value:"animation-fadein")),C<0?(O.push("animation-iteration-infinite"),y(),y=function(){}):C>0&&O.push("animation-iteration-"+(C+1)),A=O.join(" "),function(p){let P=function(){I.data("animate-running")?I.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){I.data("animate-running",!1),setTimeout(function(){p()},100)}):p()};I.hasClass("animation")?setTimeout(function(){P()}):P()}(function(){var p;N(gt),(C>0||C<0)&&I.one("animationiteration",function(){x.slideStatus===T.J.slideStatus||(I.data("animate-running",!1),N(gt),x.slideStatus===T.J.slideStatus&&y())}),I.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(I.data("animate-running",!1),N(gt),x.finish){default:case 0:case 1:break;case 2:var P;(0,E.M)(gt,{node:x.node,value:null===(P=x.node.animate)||void 0===P?void 0:P.out,nodeStatus:x.nodeStatus,slideStatus:x.slideStatus},()=>{I.addClass("hide")})}x.slideStatus===T.J.slideStatus&&y()}),I.attr("data-class",null!==(p=I.attr("class"))&&void 0!==p?p:""),I.addClass(A),I.data("animate-running",!0)})},N=function(gt){var x,y=jQuery("#"+gt).parents("g"),M=null===(x=y.attr("class"))||void 0===x?void 0:x.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);M&&M.forEach(function(f){jQuery(y).removeClass(f)});let I=y.attr("data-class");I&&(y.attr("class",I),y.removeAttr("data-class")),jQuery(y).data("animation-running",!1)}},7657:(ue,jt,w)=>{w.d(jt,{c:()=>gt});var T=w(9506),E=w(5619),st=w(5970),N=w(7050);const gt=(y,M,I)=>{var f;if(!M.points||!M.points.length)return void I();let A=jQuery("#"+y),O=function x(y){let M=[];2===y.length&&y.splice(1,0,[(y[0][0]+y[1][0])/2,(y[0][1]+y[1][1])/2]);let O,ut,p,I=1,f=y.length;for(;I<f;){if(O=y[I-1],ut=y[I],p=y[I+1],(Math.abs(O[0]-ut[0])>=15||Math.abs(O[1]-ut[1])>=15)&&Math.pow(O[0]-ut[0],2)+Math.pow(O[1]-ut[1],2)>=Math.pow(15,2)&&p&&(Math.abs(O[0]-p[0])<=20||Math.abs(O[1]-p[1])<=20)&&Math.pow(O[0]-p[0],2)+Math.pow(O[1]-p[1],2)<=Math.pow(20,2))M.push(ut);else{let h=ut[0]-O[0],L=ut[1]-O[1],D=Math.max(Math.abs(h),Math.abs(L));for(var P=0;P<D;P+=15)M.push([O[0]+h*P/D,O[1]+L*P/D])}I++}return f>0&&(M.splice(0,0,y[0]),M.push(y[f-1])),M}((H=>{if(1==H.length){let{size:G}=M.node;return[[G.x+G.width/2,G.y+G.height/2],...H]}return[...H]})(M.points||[])),ut=null!==(f=M.iteration)&&void 0!==f?f:0;if(ut<0&&(I(),I=function(){}),A.data("work-running")&&ut<0)return;A.data("work-running",!0);let Y,p=O.length,P=Math.max(20,1e3*(M.time||3)/p),{id:h,type:L,size:D,attribute:V}=E.J.findNode(y),tt=function(H){if(M.slideStatus!==E.J.slideStatus)return A.data("work-running",!1),void(M.slideStatus===E.J.slideStatus&&I());if(H<p){let Ct=O[H];Ct&&(Y=Object.assign({},D,{x:Ct[0]-D.width/2,y:Ct[1]-D.height/2}),Object.assign(V,(0,T.xW)(L,Y,V)),(0,st.tD)(window.document.getElementById(h),V),setTimeout(function(){tt(++H)},P))}else if(ut>0)ut--,tt(1);else if(ut<0)tt(1);else switch(A.data("work-running",!1),M.slideStatus===E.J.slideStatus&&I(),M.finish){default:case 0:break;case 1:Object.assign(V,(0,T.xW)(L,D,V)),(0,st.tD)(window.document.getElementById(h),V);break;case 2:var G;(0,N.M)(M.node.id,{node:M.node,value:null===(G=M.node.animate)||void 0===G?void 0:G.out,nodeStatus:M.nodeStatus,slideStatus:M.slideStatus},()=>{A.addClass("hide")})}};tt(1)}},6769:(ue,jt,w)=>{w.d(jt,{d:()=>st});var T=w(7102),E=w(5619);const st=(gt,x,y,M,I)=>{var f,A,C,O,ut,p,P;if(M.slideStatus!=E.J.slideStatus)return x.async&&"change-slide"!=x.async?void 0:void I();if(M.nodeStatus!=E.J.nodeStatus&&(!x.async||"change-node"==x.async))return void I();if(!(null!==(f=x.source)&&void 0!==f&&f.path||null!==(A=x.source)&&void 0!==A&&A.url))return console.warn(`${gt} -> audio no source!`),I(),void(I=()=>{});var h=jQuery("#"+gt);let L=null!==(C=x.iteration)&&void 0!==C?C:0;if(L<0&&(I(),I=function(){}),!(h.data("audio-running")&&L<0)){h.data("audio-running",!0);var D=function(Y){Y.pause(),Y.remove(),h.data("audio-running",!1)},V=new Audio;return V.autoplay=!0,V.loop=0!=L,V.preload="auto",V.controls=!0,V.setAttributeNode(document.createAttribute("playsinline")),V.addEventListener("canplay",function(){var Y=V.play();Y&&Y.then(function(tt){var H;h.data("audio-running",!0),"time"==x.async?setTimeout(()=>{D(V),I(),I=()=>{}},1e3*(null!==(H=x.time)&&void 0!==H?H:1)):"non-stop"==x.async&&(I(),I=()=>{})}).catch(function(tt){h.data("audio-running",!1),M.slideStatus===E.J.slideStatus&&(I(),I=()=>{})})}),V.addEventListener("timeupdate",function(){switch(x.async){case"time":case"non-stop":break;case"finish-action":y.total>=2&&y.total-y.counter==1&&(D(this),I(),I=()=>{});break;default:case"change-node":M.nodeStatus!==E.J.nodeStatus&&(D(this),I(),I=()=>{});break;case"change-slide":M.slideStatus!==E.J.slideStatus&&(D(this),I(),I=()=>{})}}),V.addEventListener("canplaythrough",function(){this.loop&&(L>0?L--:0==L&&(this.loop=!1))}),V.addEventListener("play",function(){}),V.addEventListener("pause",function(){}),V.addEventListener("ended",function(){this.remove(),h.data("audio-running",!1),M.slideStatus===E.J.slideStatus&&(I(),I=()=>{})}),V.onerror=function(){this.remove(),h.data("audio-running",!1),M.slideStatus===E.J.slideStatus&&(I(),I=()=>{})},V.src=(null!==(O=x.source)&&void 0!==O&&O.path?(null===(ut=T.L.config)||void 0===ut?void 0:ut.readfileuploadurl)+(null===(p=x.source)||void 0===p?void 0:p.path):null===(P=x.source)||void 0===P?void 0:P.url)||"",V}}},334:(ue,jt,w)=>{w.d(jt,{J:()=>I});var T=w(7102),E=w(5619),st=w(8946),N=w(7657),gt=w(6769),x=w(3591),y=w(2241),M=w(7050);const I=(f,A,C,O)=>{var ut,p,P;let h={total:0,counter:0},{triggershow:L,triggerrun:D,triggerhide:V,action:Y,audio:tt,slide:H,media:G}=null!==(ut=null===(p=f.interactive)||void 0===p?void 0:p.click)&&void 0!==ut?ut:{};if(console.log(`node(${f.id}) | nodeStatus(${A}) | slideStatus(${C}) | click`),L){let{id:Bt,ids:nt,time:bt,async:et}=L;"asynctrue"==et?(0,x.GD)({id:Bt,ids:nt,nodeStatus:A,slideStatus:C}):"time"==et&&setTimeout(()=>{(0,x.GD)({id:Bt,ids:nt,nodeStatus:A,slideStatus:C})},1e3*(null!=bt?bt:0))}if(D){let{id:Bt,ids:nt,time:bt,async:et}=D;"asynctrue"==et?(0,x.MF)({id:Bt,ids:nt,nodeStatus:A,slideStatus:C}):"time"==et&&setTimeout(()=>{(0,x.MF)({id:Bt,ids:nt,nodeStatus:A,slideStatus:C})},1e3*(null!=bt?bt:0))}if(V){let{id:Bt,ids:nt,time:bt,async:et}=V;"asynctrue"==et?(0,x.vi)({id:Bt,ids:nt,nodeStatus:A,slideStatus:C}):"time"==et&&setTimeout(()=>{(0,x.vi)({id:Bt,ids:nt,nodeStatus:A,slideStatus:C})},1e3*(null!=bt?bt:0))}let Ct=()=>{setTimeout(()=>{if(h.counter>=h.total){if(O&&O(),L){let{id:Bt,ids:nt,async:bt}=L;(!bt||"asyncfalse"==bt)&&(0,x.GD)({id:Bt,ids:nt,nodeStatus:A,slideStatus:C})}if(D){let{id:Bt,ids:nt,async:bt}=D;(!bt||"asyncfalse"==bt)&&(0,x.MF)({id:Bt,ids:nt,nodeStatus:A,slideStatus:C})}if(V){let{id:Bt,ids:nt,async:bt}=V;(!bt||"asyncfalse"==bt)&&(0,x.vi)({id:Bt,ids:nt,nodeStatus:A,slideStatus:C})}}})};if(null!=Y&&Y.value){h.total+=1;let Bt=()=>{h.counter+=1,Ct()};switch(null==Y?void 0:Y.value){case"hide":var Xt;(0,M.M)(f.id,{node:f,value:null===(Xt=f.animate)||void 0===Xt?void 0:Xt.out,nodeStatus:A,slideStatus:C},()=>{jQuery("#"+f.id).addClass("hide"),Bt()});break;case"points":{let{points:nt,time:bt,iteration:et,finish:At}=Y;nt&&(0,N.c)(f.id,{node:f,points:nt,time:bt,iteration:et,finish:At,nodeStatus:A,slideStatus:C},Bt);break}default:{let{value:nt,time:bt,iteration:et,finish:At}=Y;(0,st.h)(f.id,{node:f,value:nt,time:bt,iteration:et,finish:At,nodeStatus:A,slideStatus:C},Bt);break}}}if(null!=tt&&null!==(P=tt.source)&&void 0!==P&&P.path){h.total+=1;let Bt=()=>{h.counter+=1,Ct()};(0,gt.d)(f.id,tt,h,{nodeStatus:A,slideStatus:C},Bt)}if(h.total||Ct(),null!=H&&H.id)switch(H.id){case-1:E.J.runSlide(E.J.slideIdx-1);break;case-2:E.J.runSlide(E.J.slideIdx+1);break;default:var Jt;E.J.runSlide(void 0,H.id,null===(Jt=H.code)||void 0===Jt?void 0:Jt.toString())}if(null!=G&&G.type){var Ht;let nt=`<div class="popup-media-viewer"><iframe src="${(0,y._)({readfileuploadurl:null===(Ht=T.L.config)||void 0===Ht?void 0:Ht.readfileuploadurl,type:null==G?void 0:G.type,oss:null==G?void 0:G.oss,path:null==G?void 0:G.path,url:null==G?void 0:G.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,bt=jQuery(nt).appendTo(window.document.body);bt.find(".btn-close").click(function(et){et.preventDefault(),bt.remove()})}}},3591:(ue,jt,w)=>{w.d(jt,{GD:()=>N,MF:()=>gt,vi:()=>x});var T=w(5619),E=w(334),st=w(7050);const N=y=>{y.id?jQuery("#"+y.id).removeClass("hide"):y.ids&&y.ids.forEach(M=>{jQuery("#"+M).removeClass("hide")})},gt=y=>{y.id?(jQuery("#"+y.id).removeClass("hide"),(0,E.J)(T.J.findNode(y.id),y.nodeStatus,y.slideStatus)):y.ids&&y.ids.forEach(M=>{jQuery("#"+M).removeClass("hide"),(0,E.J)(T.J.findNode(M),y.nodeStatus,y.slideStatus)})},x=y=>{if(y.id){var M;let I=T.J.findNode(y.id);(0,st.M)(y.id,{node:I,value:null===(M=I.animate)||void 0===M?void 0:M.out,nodeStatus:y.nodeStatus,slideStatus:y.slideStatus},()=>{jQuery("#"+y.id).addClass("hide")})}else y.ids&&y.ids.forEach(I=>{var f;let A=T.J.findNode(I);(0,st.M)(I,{node:A,value:null===(f=A.animate)||void 0===f?void 0:f.out,nodeStatus:y.nodeStatus,slideStatus:y.slideStatus},()=>{jQuery("#"+I).addClass("hide")})})}},5970:(ue,jt,w)=>{w.d(jt,{cR:()=>D,rN:()=>tt,t8:()=>V,fn:()=>H,RY:()=>Ht,tD:()=>G,KG:()=>Xt,c_:()=>Ct,s6:()=>Y,I6:()=>kt,in:()=>Bt,IA:()=>St,KP:()=>At,AE:()=>nt,xJ:()=>et,Mo:()=>bt,kE:()=>mt});var T=w(1999),E=w(7873),st=w(6315),gt=/^#?[a-fA-F0-9]+$/;const M=(U,Q)=>{var d;if("none"==(U=null!==(d=U)&&void 0!==d?d:""))return"none";if("transparent"==U)return"rgba(0,0,0,0)";if(U.includes("rgba("))return U;if(U.includes("rgb(")&&(U=(0,st.w)(U)),!(U=U.replace(/[^0-9a-fA-F]/g,"")))return"";if(!gt.test(U))return console.error(`hex2rgba -> ${U}: first argument has invalid hexadecimal characters`),"";if("#"===U[0]&&(U=U.slice(1)),3===U.length){let xt=U.split("");xt.splice(2,0,U[2]),xt.splice(1,0,U[1]),xt.splice(0,0,U[0]),U=xt.join("")}if(6!==U.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var at=[parseInt(U.slice(0,2),16),parseInt(U.slice(2,4),16),parseInt(U.slice(4,6),16)];return Q="number"==typeof Q?Q:parseFloat(Q),at.push(Q>=0&&Q<=1?Q:1),"rgba("+at.join(",")+")"};var I=w(2241),f=w(8779),A=w(7102),C=w(9841),O=w(7945),ut=w(9173),p=w(1281),P=w(5619),h=w(745),L=w(6847);class D{constructor(Q,d){let at=window.document.querySelector(d);var xt;at||(at=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(xt=window.document.querySelector(Q))||void 0===xt||xt.appendChild(at));let{svgViewBox:zt,svgSize:Dt}=A.L.screen.init();at.setAttributeNS(null,"viewBox",`${zt.x} ${zt.y} ${zt.width} ${zt.height}`),at.setAttribute("id",d.replace("#","")),at.style.display="block",at.style.width=`${Dt.width}px`,at.style.height=`${Dt.height}px`,at.style.backgroundColor="#fafafa",at.style.cursor="default"}}const V=U=>{jQuery(A.L.target).find("#"+E.F.BACKGROUND_GROUP).empty();let Q=Ht(E.F.BACKGROUND_GROUP,"g",void 0,A.L.target);kt(Q,U),(()=>{let d=window.document.getElementById(null==U?void 0:U.id);jQuery(d).find("#"+E.F.BACKGROUND_GROUP).empty();let at=Ht(E.F.BACKGROUND_GROUP,"g",void 0,d);kt(at,U)})()},Y=()=>{let U=A.L.screen.svgViewBox,Q=A.L.screen.svgSize;A.L.target&&(A.L.target.setAttributeNS(null,"viewBox",`${U.x} ${U.y} ${U.width} ${U.height}`),A.L.target.style.left=`${Q.x}px`,A.L.target.style.top=`${Q.y}px`,A.L.target.style.width=`${Q.width}px`,A.L.target.style.height=`${Q.height}px`)},tt=()=>{jQuery(A.L.target).find(">*:not(defs)").remove()},H=(U,Q,d,at,xt)=>{let zt;return U?(zt=jQuery(xt||A.L.target).find("#"+U).get(0),zt||(zt=window.document.createElementNS("http://www.w3.org/2000/svg",d),zt.setAttribute("id",U),Q==T.h.FOREIGNOBJECT&&zt.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(zt).appendTo(xt||A.L.target))):(zt=window.document.createElementNS("http://www.w3.org/2000/svg",d),jQuery(zt).appendTo(xt||A.L.target)),null!=at&&at.attribute&&G(zt,null==at?void 0:at.attribute),null!=at&&at.style&&Ct(zt,null==at?void 0:at.style),null!=at&&at.source&&Xt(zt,Q,null==at?void 0:at.source),zt},G=(U,Q)=>{return jQuery(U).attr((d=Object.assign({},Q||{}),null===(at=Object.keys(d))||void 0===at||at.forEach(Dt=>{switch(Dt){case"fill":break;case"fillRule":var Gt;Object.assign(d,{"fill-rule":null!==(Gt=d.fillRule)&&void 0!==Gt?Gt:null,fillRule:null});break;case"stroke":var Kt;Object.assign(d,{"stroke-width":null!==(Kt=d.strokeWidth)&&void 0!==Kt?Kt:null,strokeWidth:null});break;case"strokeLinecap":var Vt;Object.assign(d,{"stroke-linecap":null!==(Vt=d.strokeLinecap)&&void 0!==Vt?Vt:null,strokeLinecap:null});break;case"strokeLinejoin":var yt;Object.assign(d,{"stroke-linejoin":null!==(yt=d.strokeLinejoin)&&void 0!==yt?yt:null,strokeLinejoin:null});break;case"strokeMiterlimit":var Pt;Object.assign(d,{"stroke-miterlimit":null!==(Pt=d.strokeMiterlimit)&&void 0!==Pt?Pt:null,strokeMiterlimit:null});break;case"strokeDasharray":var K;Object.assign(d,{"stroke-dasharray":null!==(K=d.strokeDasharray)&&void 0!==K?K:null,strokeDasharray:null});break;case"strokeDasharrays":var u,Z;Object.assign(d,{"stroke-dasharray":null!==(u=null===(Z=d.strokeDasharrays)||void 0===Z?void 0:Z.join(" "))&&void 0!==u?u:null,strokeDasharrays:null});break;case"fontFamily":var dt;Object.assign(d,{"font-family":null!==(dt=d.fontFamily)&&void 0!==dt?dt:null,fontFamily:null});break;case"fontWeight":var it;Object.assign(d,{"font-weight":null!==(it=d.fontWeight)&&void 0!==it?it:null,fontWeight:null});break;case"fontSize":var X;Object.assign(d,{"font-size":null!==(X=d.fontSize)&&void 0!==X?X:null,fontSize:null});break;case"textLength":Object.assign(d,{textLength:d.textLength?`${d.textLength}px`:null});break;case"transformOrigin":var J;Object.assign(d,{"transform-origin":null!==(J=d.transformOrigin)&&void 0!==J?J:null,transformOrigin:null})}}),Object.assign({},null!=d?d:{},{fill:null!=d&&d.fill?M(d.fill,null!==(xt=null==d?void 0:d.fillOpacity)&&void 0!==xt?xt:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=d&&d.stroke?M(d.stroke,null!==(zt=null==d?void 0:d.strokeOpacity)&&void 0!==zt?zt:1):"rgba(0,0,0,0)",strokeOpacity:null}))),U;var d,at,xt,zt},Ct=(U,Q)=>{return jQuery(U).css((d=Object.assign({},Q||{}),null===(at=Object.keys(d))||void 0===at||at.forEach(xt=>{switch(xt){case"padding":Object.assign(d,{padding:d.padding?`${d.padding}px`:null});break;case"borderWidth":var zt;Object.assign(d,d.borderWidth&&d.borderColor?{"border-width":`${d.borderWidth}px`,"border-style":d.borderStyle||"solid","border-color":M(d.borderColor,null!==(zt=d.borderOpacity)&&void 0!==zt?zt:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(d,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(d,{"border-radius":d.borderRadius?`${d.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Dt;Object.assign(d,d.backgroundColor?{"background-color":M(d.backgroundColor,null!==(Dt=d.backgroundOpacity)&&void 0!==Dt?Dt:1)}:{"background-color":""}),Object.assign(d,{backgroundColor:null,backgroundOpacity:null})}}),d)),U;var d,at},Xt=(U,Q,d)=>{switch(Q){case T.h.TEXT:var at,xt;jQuery(U).text(null!==(at=null==d||null===(xt=d.text)||void 0===xt?void 0:xt.textContent)&&void 0!==at?at:"");break;case T.h.IMAGE:var zt,Dt,Gt,Kt,Vt;jQuery(U).attr("href",(null==d||null===(zt=d.image)||void 0===zt?void 0:zt.base64)||(null!=d&&null!==(Dt=d.image)&&void 0!==Dt&&Dt.path?(null===(Gt=A.L.config)||void 0===Gt?void 0:Gt.readfileuploadurl)+(null==d||null===(Kt=d.image)||void 0===Kt?void 0:Kt.path):null==d||null===(Vt=d.image)||void 0===Vt?void 0:Vt.url)||"");break;case T.h.FOREIGNOBJECT:switch(null==d?void 0:d.type){case"text":var yt,Pt;if(null!==(yt=d.text)&&void 0!==yt&&yt.variableKeywords&&null!==(Pt=d.text)&&void 0!==Pt&&Pt.variableKeywords.length){var K;let n=A.L.variable.getKeys(),l=(null===(K=d.text)||void 0===K?void 0:K.textContent)||"";d.text.variableKeywords.forEach(g=>{var m=g.replace(/[^a-zA-Z0-9_]/gm,"");if(n.indexOf(m)>=0){var c=A.L.variable.getValue(m);l=l.replace(g,c)}}),jQuery(U).text(l)}else{var u;jQuery(U).text((null===(u=d.text)||void 0===u?void 0:u.textContent)||"")}break;case"html":{var Z,dt,it;let n=(null==d||null===(Z=d.html)||void 0===Z?void 0:Z.htmlContent)||"";if(null!==(dt=d.html)&&void 0!==dt&&dt.variableKeywords&&null!==(it=d.html)&&void 0!==it&&it.variableKeywords.length){let l=A.L.variable.getKeys();d.html.variableKeywords.forEach(g=>{var m=g.replace(/[^a-zA-Z0-9_]/gm,"");if(l.indexOf(m)>=0){var c=A.L.variable.getValue(m);n=n.replace(g,c)}})}jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${n}</div>`).find("img[path],video[path],iframe[path]").each((l,g)=>{var m,c;g.setAttribute("src",(null!==(m=null===(c=A.L.config)||void 0===c?void 0:c.readfileuploadurl)&&void 0!==m?m:"")+g.getAttribute("path")),g.removeAttribute("path")});break}case"input":var X,J,rt,z;if(null!==(X=d.input)&&void 0!==X&&X.input)jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(rt=null===(z=d.input)||void 0===z?void 0:z.placeholder)&&void 0!==rt?rt:""}" maxlength="100" /></div>`);else if(null!==(J=d.input)&&void 0!==J&&J.textarea){var q,Et;jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(q=null===(Et=d.input)||void 0===Et?void 0:Et.placeholder)&&void 0!==q?q:""}" maxlength="1000"></textarea></div>`)}break;case"image":var Mt,pt,It,Lt,Ot;jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(Mt=d.image)||void 0===Mt?void 0:Mt.base64)||(null!==(pt=d.image)&&void 0!==pt&&pt.path?(null===(It=A.L.config)||void 0===It?void 0:It.readfileuploadurl)+(null===(Lt=d.image)||void 0===Lt?void 0:Lt.path):null===(Ot=d.image)||void 0===Ot?void 0:Ot.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var ht,Ut,ee,ae;jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(ht=d.iframe)&&void 0!==ht&&ht.path?(null===(Ut=A.L.config)||void 0===Ut?void 0:Ut.readfileuploadurl)+(null===(ee=d.iframe)||void 0===ee?void 0:ee.path):null===(ae=d.iframe)||void 0===ae?void 0:ae.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var ne,re,_e,Ge,Qe;let n=(0,I._)({readfileuploadurl:null===(ne=A.L.config)||void 0===ne?void 0:ne.readfileuploadurl,type:null===(re=d.embed)||void 0===re?void 0:re.type,oss:null===(_e=d.embed)||void 0===_e?void 0:_e.oss,path:null===(Ge=d.embed)||void 0===Ge?void 0:Ge.path,url:null===(Qe=d.embed)||void 0===Qe?void 0:Qe.url});jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${n}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var Je,Pe;jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(Je=null===(Pe=d.svg)||void 0===Pe?void 0:Pe.svgContent)&&void 0!==Je?Je:""}</div>`);break;case"test":{var Ze,Xe,ii,Oe;let n=(null==d||null===(Ze=d.html)||void 0===Ze?void 0:Ze.htmlContent)||"";if(null!==(Xe=d.html)&&void 0!==Xe&&Xe.variableKeywords&&null!==(ii=d.html)&&void 0!==ii&&ii.variableKeywords.length){let l=A.L.variable.getKeys();d.html.variableKeywords.forEach(g=>{var m=g.replace(/[^a-zA-Z0-9_]/gm,"");if(l.indexOf(m)>=0){var c=A.L.variable.getValue(m);n=n.replace(g,c)}})}switch(null==d||null===(Oe=d.test)||void 0===Oe?void 0:Oe.type){case"truefalse":var Ye;jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(Ye=d.test.truefalse)&&void 0!==Ye&&Ye.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"singlechoice":var De;jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(De=d.test.singlechoice)&&void 0!==De&&De.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"multichoice":var Fe;jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(Fe=d.test.multichoice)&&void 0!==Fe&&Fe.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"matching-empty":var qe;jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==d||null===(qe=d.test.matching)||void 0===qe?void 0:qe.key}"></div>`);break;case"matching-content":var He,Ve,$e;jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==d||null===(He=d.test.matching)||void 0===He?void 0:He.key}"><div class="ondrag-item" data-key="${null!==(Ve=null==d||null===($e=d.test)||void 0===$e||null===($e=$e.matching)||void 0===$e?void 0:$e.key)&&void 0!==Ve?Ve:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div></div>`);break;case"fill":var hi;((null===(hi=d.html)||void 0===hi?void 0:hi.fillKeywords)||[]).forEach(l=>{var g=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${l.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;n=n.replace(new RegExp(l.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),g)}),jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"speech":jQuery(U).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var wt,j,i,r,o;jQuery(U).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(wt=null!==(j=d.image)&&void 0!==j&&j.path?(null===(i=A.L.config)||void 0===i?void 0:i.readfileuploadurl)+(null===(r=d.image)||void 0===r?void 0:r.path):null===(o=d.image)||void 0===o?void 0:o.url)&&void 0!==wt?wt:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(U).find("img[path],video[path],iframe[path]").each((l,g)=>{var m,c;g.setAttribute("src",(null!==(m=null===(c=A.L.config)||void 0===c?void 0:c.readfileuploadurl)&&void 0!==m?m:"")+g.getAttribute("path")),g.removeAttribute("path")})}}}},Ht=(U,Q,d,at)=>{let xt=jQuery(at||A.L.target).find("#"+U).get(0);return xt||(xt=window.document.createElementNS("http://www.w3.org/2000/svg",Q),xt.setAttribute("id",U),jQuery(xt).appendTo(at||A.L.target)),jQuery(xt).attr((null==d?void 0:d.attribute)||{}),jQuery(xt).css((null==d?void 0:d.style)||{}),xt},Bt=(U,Q)=>{let d=(0,C.$)(2),at={fill:f.pZ.fill,stroke:f.pZ.stroke,"stroke-width":(0,C.$)(f.pZ.strokeWidth)};return[{element:Ht("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:Q.x-d,y:Q.y-d,width:Q.width+2*d,height:Q.height+2*d},at)},U),posType:"rect-center"}]},nt=(U,Q)=>{let{size:d}=Q,at=(0,C.$)(1),xt=(0,C.$)(2),zt=(0,C.$)(5),Dt={stroke:f.u$.stroke,"stroke-width":(0,C.$)(f.u$.strokeWidth),"stroke-linecap":f.u$.strokeLinecap},Gt={fill:f.bf.fill,stroke:f.bf.stroke,"stroke-width":(0,C.$)(f.bf.strokeWidth)},Kt={fill:f.eD.fill,stroke:f.eD.stroke,"stroke-width":(0,C.$)(f.eD.strokeWidth),width:(0,C.$)(f.eD.width),height:(0,C.$)(f.eD.height)};return Ht("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:d.x-at,y1:d.y,x2:d.x-at,y2:d.y+d.height},Dt)},U),Ht("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:d.x,y1:d.y-at,x2:d.x+d.width,y2:d.y-at},Dt)},U),Ht("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:d.x+d.width+at,y1:d.y,x2:d.x+d.width+at,y2:d.y+d.height},Dt)},U),Ht("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:d.x,y1:d.y+d.height+at,x2:d.x+d.width,y2:d.y+d.height+at},Dt)},U),[{element:Ht("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},Gt),style:{cursor:"move"}},U),posType:"rect-center"},{element:Ht("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:d.x-zt,y:d.y-zt},Kt),style:{cursor:"nw-resize"}},U),posType:"rect-top-left"},{element:Ht("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:d.x+d.width-xt,y:d.y-zt},Kt),style:{cursor:"ne-resize"}},U),posType:"rect-top-right"},{element:Ht("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:d.x-zt,y:d.y+d.height-xt},Kt),style:{cursor:"sw-resize"}},U),posType:"rect-bottom-left"},{element:Ht("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:d.x+d.width-xt,y:d.y+d.height-xt},Kt),style:{cursor:"se-resize"}},U),posType:"rect-bottom-right"},{element:Ht("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:d.x+d.width/2-xt-at,y:d.y-zt},Kt),style:{cursor:"n-resize"}},U),posType:"rect-top"},{element:Ht("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:d.x+d.width-xt,y:d.y+d.height/2-xt-at},Kt),style:{cursor:"e-resize"}},U),posType:"rect-right"},{element:Ht("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:d.x+d.width/2-xt-at,y:d.y+d.height-xt},Kt),style:{cursor:"s-resize"}},U),posType:"rect-bottom"},{element:Ht("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:d.x-zt,y:d.y+d.height/2-xt-at},Kt),style:{cursor:"w-resize"}},U),posType:"rect-left"}]},bt=(U,Q,d)=>{let at=(0,C.$)(1),xt={stroke:f.u$.stroke,"stroke-width":(0,C.$)(f.u$.strokeWidth),"stroke-linecap":f.u$.strokeLinecap},zt={fill:f.bf.fill,stroke:f.bf.stroke,"stroke-width":(0,C.$)(f.bf.strokeWidth)},Dt={fill:f.IB.fill,stroke:f.IB.stroke,"stroke-width":(0,C.$)(f.IB.strokeWidth)},Pt=(Ht("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:d.x-at,y1:d.y,x2:d.x-at,y2:d.y+d.height},xt)},U),Ht("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:d.x,y1:d.y-at,x2:d.x+d.width,y2:d.y-at},xt)},U),Ht("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:d.x+d.width+at,y1:d.y,x2:d.x+d.width+at,y2:d.y+d.height},xt)},U),Ht("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:d.x,y1:d.y+d.height+at,x2:d.x+d.width,y2:d.y+d.height+at},xt)},U),Ht("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},zt)},U));return Q.forEach(K=>{let{size:u}=K;Ht("icdt-temp-select-rect-node-"+K.id,"rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},Dt)},U)}),[{element:Pt,posType:"rect-center"}]},et=(U,Q)=>{let d=(0,C.$)(1),at={stroke:f.u$.stroke,"stroke-width":(0,C.$)(f.u$.strokeWidth),"stroke-linecap":f.u$.strokeLinecap},xt={fill:f.bf.fill,stroke:f.bf.stroke,"stroke-width":(0,C.$)(f.bf.strokeWidth)};return Ht("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:Q.x-d,y1:Q.y,x2:Q.x-d,y2:Q.y+Q.height},at)},U),Ht("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:Q.x,y1:Q.y-d,x2:Q.x+Q.width,y2:Q.y-d},at)},U),Ht("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:Q.x+Q.width+d,y1:Q.y,x2:Q.x+Q.width+d,y2:Q.y+Q.height},at)},U),Ht("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:Q.x,y1:Q.y+Q.height+d,x2:Q.x+Q.width,y2:Q.y+Q.height+d},at)},U),[{element:Ht("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:Q.x,y:Q.y,width:Q.width,height:Q.height},xt)},U),posType:"rect-center"}]},At=(U,Q)=>((0,C.$)(-1),(0,C.$)(f.WR.strokeWidth),(0,C.$)(f.WR.strokeDasharray),Ht("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:Q.x,y:Q.y,width:Q.width,height:Q.height,class:"cursor-draw"},{fill:f.lq.fill})},U),[]),St=(U,Q)=>{let d={fill:f.$u.fill,stroke:f.$u.stroke,"stroke-width":(0,C.$)(f.$u.strokeWidth),"stroke-dasharray":(0,C.$)(f.$u.strokeDasharray)};jQuery(U).empty(),Q.forEach(at=>{var xt,zt;let{size:Dt}=at;if(!at.idx)return;Ht("icdt-temp-index-rect-node-"+at.id,"rect",{attribute:Object.assign({x:Dt.x-5,y:Dt.y-5,width:Dt.width+10,height:Dt.height+10},d)},U);let{element:Gt}=(0,h.$)(Math.ceil(1e9*Math.random()),{size:{x:Dt.x-76,y:Dt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(xt=at.idx)&&void 0!==xt?xt:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(zt=at.time)&&void 0!==zt?zt:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},U);Gt.classList.add("node-input"),jQuery(Gt).on("change",'input[name="idx"]',Kt=>{var Vt;at.idx=parseInt(null!==(Vt=Kt.target.value)&&void 0!==Vt?Vt:"0")}).on("change",'input[name="time"]',Kt=>{var Vt;at.time=parseFloat(null!==(Vt=Kt.target.value)&&void 0!==Vt?Vt:"0")}).on("click",'button[name="remove"]',Kt=>{at.idx=0,at.time=null,St(U,Q)})})},kt=(U,Q)=>{var d,at,xt,zt,Dt,Gt;let{color:Kt,opacity:Vt,path:yt,url:Pt,base64:K}=null!==(d=null==Q||null===(at=Q.svg)||void 0===at?void 0:at.background)&&void 0!==d?d:{},{x:u,y:Z,width:dt,height:it}=null!==(xt=null==Q||null===(zt=Q.svg)||void 0===zt?void 0:zt.viewBox)&&void 0!==xt?xt:{x:0,y:0,width:0,height:0};(0,L.L)(void 0,{size:{x:0,y:(0,C.$)(-21),width:dt,height:it},attribute:{fill:"#999",fontSize:(0,C.$)(14),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(Dt=null!==(Gt=null==Q?void 0:Q.name)&&void 0!==Gt?Gt:null==Q?void 0:Q.code)&&void 0!==Dt?Dt:void 0}}},U),(0,O.a)(void 0,{size:{x:u,y:Z,width:dt,height:it},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,C.$)(1),strokeDasharray:(0,C.$)(10),class:"hide-on-viewer"}},U),Kt&&(0,O.a)(void 0,{size:{x:u,y:Z,width:dt,height:it},attribute:{fill:Kt,fillOpacity:Vt}},U),yt&&(0,ut.B)(void 0,{size:{x:u,y:Z,width:dt,height:it},source:{type:"image",image:{path:yt,url:Pt,base64:K}}},U)},mt=(U,Q,d)=>{var at;switch(jQuery(U).empty(),null===(at=Q.test)||void 0===at?void 0:at.type){case"truefalse":{var xt,zt,Dt,Gt;let It=null==Q||null===(xt=Q.test)||void 0===xt||null===(xt=xt.answer)||void 0===xt||null===(xt=xt.truefalse)||void 0===xt?void 0:xt.value,Lt=null===(zt=Q.svg)||void 0===zt?void 0:zt.nodes.find(Ot=>{var ht;return"submit"==(null===(ht=Ot.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)});null===(Dt=Q.svg)||void 0===Dt||Dt.nodes.filter(Ot=>{var ht;return"truefalse"==(null===(ht=Ot.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)&&(Ot.id!=It||!Lt)}).forEach(Ot=>{var ht;let{x:ee,y:ae,width:ne,height:re}=null!==(ht=null==Ot?void 0:Ot.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,p.K)(Math.ceil(1e9*Math.random()),{size:{x:ee-.5,y:ae-.5,width:ne+1,height:re+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},U)}),null!=Q&&null!==(Gt=Q.test)&&void 0!==Gt&&null!==(Gt=Gt.answer)&&void 0!==Gt&&Gt.truefalse&&It&&Lt&&(Ot=>{let ht=P.J.findNode(It),{x:ee,y:ae,width:ne,height:re}=null!==(Ot=null==ht?void 0:ht.size)&&void 0!==Ot?Ot:{x:0,y:0,width:0,height:0};(0,p.K)(Math.ceil(1e9*Math.random()),{size:{x:ee-2,y:ae-2,width:ne+4,height:re+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},U)})();break}case"singlechoice":{var Kt,Vt,yt,Pt;let It=null==Q||null===(Kt=Q.test)||void 0===Kt||null===(Kt=Kt.answer)||void 0===Kt||null===(Kt=Kt.singlechoice)||void 0===Kt?void 0:Kt.value,Lt=null===(Vt=Q.svg)||void 0===Vt?void 0:Vt.nodes.find(Ot=>{var ht;return"submit"==(null===(ht=Ot.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)});null===(yt=Q.svg)||void 0===yt||yt.nodes.filter(Ot=>{var ht;return"singlechoice"==(null===(ht=Ot.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)&&(Ot.id!=It||!Lt)}).forEach(Ot=>{var ht;let{x:ee,y:ae,width:ne,height:re}=null!==(ht=null==Ot?void 0:Ot.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,p.K)(Math.ceil(1e9*Math.random()),{size:{x:ee-.5,y:ae-.5,width:ne+1,height:re+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},U)}),null!=Q&&null!==(Pt=Q.test)&&void 0!==Pt&&null!==(Pt=Pt.answer)&&void 0!==Pt&&Pt.singlechoice&&It&&Lt&&(Ot=>{let ht=P.J.findNode(It),{x:ee,y:ae,width:ne,height:re}=null!==(Ot=null==ht?void 0:ht.size)&&void 0!==Ot?Ot:{x:0,y:0,width:0,height:0};(0,p.K)(Math.ceil(1e9*Math.random()),{size:{x:ee-2,y:ae-2,width:ne+4,height:re+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},U)})();break}case"multichoice":{var K,u,Z,dt,it;let It=null!==(K=null==Q||null===(u=Q.test)||void 0===u||null===(u=u.answer)||void 0===u||null===(u=u.multichoice)||void 0===u?void 0:u.map(Ot=>Ot.value))&&void 0!==K?K:[],Lt=null===(Z=Q.svg)||void 0===Z?void 0:Z.nodes.find(Ot=>{var ht;return"submit"==(null===(ht=Ot.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)});var X;null===(dt=Q.svg)||void 0===dt||dt.nodes.filter(Ot=>{var ht;return!("multichoice"!=(null===(ht=Ot.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)||It.includes(Ot.id)&&Lt)}).forEach(Ot=>{var ht;let{x:ee,y:ae,width:ne,height:re}=null!==(ht=null==Ot?void 0:Ot.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,O.a)(Math.ceil(1e9*Math.random()),{size:{x:ee-.5,y:ae-.5,width:ne+1,height:re+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},U)}),null!=Q&&null!==(it=Q.test)&&void 0!==it&&null!==(it=it.answer)&&void 0!==it&&it.multichoice&&It.length&&Lt&&(null==Q||null===(X=Q.test)||void 0===X||null===(X=X.answer)||void 0===X||X.multichoice.forEach(Ot=>{var ht;let Ut=P.J.findNode(Ot.value),{x:ae,y:ne,width:re,height:_e}=null!==(ht=null==Ut?void 0:Ut.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,O.a)(Math.ceil(1e9*Math.random()),{size:{x:ae-2,y:ne-2,width:re+4,height:_e+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},U)}));break}case"fill":var J,rt;null!=Q&&null!==(J=Q.test)&&void 0!==J&&null!==(J=J.answer)&&void 0!==J&&J.fill&&(null==Q||null===(rt=Q.test)||void 0===rt||null===(rt=rt.answer)||void 0===rt||rt.fill.forEach(It=>{jQuery("#"+d.id).find(`input[type="text"][data-key="${It.key}"]`).val(It.value)}));break;case"matching":var z,q,Et,Mt;if(null!=Q&&null!==(z=Q.test)&&void 0!==z&&null!==(z=z.answer)&&void 0!==z&&z.matching)if("matching-empty"==(null===(q=d.source)||void 0===q||null===(q=q.test)||void 0===q?void 0:q.type))null==Q||null===(Mt=Q.test)||void 0===Mt||null===(Mt=Mt.answer)||void 0===Mt||Mt.matching.filter(It=>{var Lt;return It.key==(null===(Lt=d.source)||void 0===Lt||null===(Lt=Lt.test)||void 0===Lt||null===(Lt=Lt.matching)||void 0===Lt?void 0:Lt.key)}).forEach(It=>{$(`foreignObject .ondrop-here[data-type2="matching-content"][data-key="${It.value}"] .ondrag-item`).appendTo($(`foreignObject#${d.id} .ondrop-here[data-type2="matching-empty"][data-key="${It.key}"]`))});else if("matching-content"==(null===(Et=d.source)||void 0===Et||null===(Et=Et.test)||void 0===Et?void 0:Et.type)){var pt;null==Q||null===(pt=Q.test)||void 0===pt||null===(pt=pt.answer)||void 0===pt||pt.matching.filter(It=>{var Lt;return It.value==(null===(Lt=d.source)||void 0===Lt||null===(Lt=Lt.test)||void 0===Lt||null===(Lt=Lt.matching)||void 0===Lt?void 0:Lt.key)}).forEach(It=>{$(`foreignObject#${d.id} .ondrop-here[data-type2="matching-content"][data-key="${It.value}"] .ondrag-item`).appendTo($(`foreignObject .ondrop-here[data-type2="matching-empty"][data-key="${It.key}"]:empty`))})}}}},2241:(ue,jt,w)=>{w.d(jt,{_:()=>st});var T=w(8338);const st=x=>{switch(null==x?void 0:x.type){case T.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+x.readfileuploadurl+x.path;case T.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+x.readfileuploadurl+x.path;case T.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+x.readfileuploadurl+x.path;case T.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+x.readfileuploadurl+x.path;case T.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+x.readfileuploadurl+x.path;case T.S.HTML:case T.S.IMAGE_ANIMATION:case T.S.PHET:return""+x.readfileuploadurl+x.path;case T.S.ZIP:case T.S.SCORM:var y;return"imsmanifest.xml"==(null===(y=x.path)||void 0===y||null===(y=y.split("/"))||void 0===y?void 0:y.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+x.readfileuploadurl+x.path:""+x.readfileuploadurl+x.path;case T.S.TRACK:case T.S.TEXT:return""+x.readfileuploadurl+x.path;case T.S.LINK:switch(x.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+x.url;case 1002:var M;return null!==(M=N(x.url))&&void 0!==M?M:"";case 1005:var I;return null!==(I=x.url)&&void 0!==I?I:"";default:var f;return null!==(f=x.url)&&void 0!==f?f:""}default:return""+x.readfileuploadurl+x.path}},N=x=>{let y=gt(x);return y?"https://www.youtube.com/embed/"+y+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},gt=x=>{let y=null==x?void 0:x.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return y&&y.length>=2?y[1]:null}},1131:(ue,jt,w)=>{function T(){}function E(t){return null==t?T:function(){return this.querySelector(t)}}function gt(){return[]}function x(t){return null==t?gt:function(){return this.querySelectorAll(t)}}function I(t){return function(){return this.matches(t)}}function f(t){return function(e){return e.matches(t)}}w.d(jt,{qrM:()=>aa,n8j:()=>la});var A=Array.prototype.find;function O(){return this.firstElementChild}var p=Array.prototype.filter;function P(){return Array.from(this.children)}function V(t){return new Array(t.length)}function tt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function G(t,e,a,s,v,b){for(var F,S=0,W=e.length,ot=b.length;S<ot;++S)(F=e[S])?(F.__data__=b[S],s[S]=F):a[S]=new tt(t,b[S]);for(;S<W;++S)(F=e[S])&&(v[S]=F)}function Ct(t,e,a,s,v,b,S){var F,W,$t,ot=new Map,ft=e.length,Wt=b.length,Qt=new Array(ft);for(F=0;F<ft;++F)(W=e[F])&&(Qt[F]=$t=S.call(W,W.__data__,F,e)+"",ot.has($t)?v[F]=W:ot.set($t,W));for(F=0;F<Wt;++F)$t=S.call(t,b[F],F,b)+"",(W=ot.get($t))?(s[F]=W,W.__data__=b[F],ot.delete($t)):a[F]=new tt(t,b[F]);for(F=0;F<ft;++F)(W=e[F])&&ot.get(Qt[F])===W&&(v[F]=W)}function Xt(t){return t.__data__}function Ht(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function St(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}tt.prototype={constructor:tt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var xt="http://www.w3.org/1999/xhtml";const zt={svg:"http://www.w3.org/2000/svg",xhtml:xt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dt(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),zt.hasOwnProperty(e)?{space:zt[e],local:t}:t}function Gt(t){return function(){this.removeAttribute(t)}}function Kt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Vt(t,e){return function(){this.setAttribute(t,e)}}function yt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Pt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function K(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function Z(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function dt(t){return function(){this.style.removeProperty(t)}}function it(t,e,a){return function(){this.style.setProperty(t,e,a)}}function X(t,e,a){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,a)}}function rt(t,e){return t.style.getPropertyValue(e)||Z(t).getComputedStyle(t,null).getPropertyValue(e)}function z(t){return function(){delete this[t]}}function q(t,e){return function(){this[t]=e}}function Et(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function pt(t){return t.trim().split(/^|\s+/)}function It(t){return t.classList||new Lt(t)}function Lt(t){this._node=t,this._names=pt(t.getAttribute("class")||"")}function Ot(t,e){for(var a=It(t),s=-1,v=e.length;++s<v;)a.add(e[s])}function ht(t,e){for(var a=It(t),s=-1,v=e.length;++s<v;)a.remove(e[s])}function Ut(t){return function(){Ot(this,t)}}function ee(t){return function(){ht(this,t)}}function ae(t,e){return function(){(e.apply(this,arguments)?Ot:ht)(this,t)}}function re(){this.textContent=""}function _e(t){return function(){this.textContent=t}}function Ge(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Je(){this.innerHTML=""}function Pe(t){return function(){this.innerHTML=t}}function Ze(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function ii(){this.nextSibling&&this.parentNode.appendChild(this)}function Ye(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fe(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===xt&&e.documentElement.namespaceURI===xt?e.createElement(t):e.createElementNS(a,t)}}function qe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function He(t){var e=Dt(t);return(e.local?qe:Fe)(e)}function $e(){return null}function wt(){var t=this.parentNode;t&&t.removeChild(this)}function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function m(t){return function(){var e=this.__on;if(e){for(var b,a=0,s=-1,v=e.length;a<v;++a)b=e[a],t.type&&b.type!==t.type||b.name!==t.name?e[++s]=b:this.removeEventListener(b.type,b.listener,b.options);++s?e.length=s:delete this.__on}}}function c(t,e,a){return function(){var v,s=this.__on,b=function l(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var S=0,F=s.length;S<F;++S)if((v=s[S]).type===t.type&&v.name===t.name)return this.removeEventListener(v.type,v.listener,v.options),this.addEventListener(v.type,v.listener=b,v.options=a),void(v.value=e);this.addEventListener(t.type,b,a),v={type:t.type,name:t.name,value:e,listener:b,options:a},s?s.push(v):this.__on=[v]}}function _(t,e,a){var s=Z(t),v=s.CustomEvent;"function"==typeof v?v=new v(e,a):(v=s.document.createEvent("Event"),a?(v.initEvent(e,a.bubbles,a.cancelable),v.detail=a.detail):v.initEvent(e,!1,!1)),t.dispatchEvent(v)}function B(t,e){return function(){return _(this,t,e)}}function R(t,e){return function(){return _(this,t,e.apply(this,arguments))}}Lt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var _t=[null];function Rt(t,e){this._groups=t,this._parents=e}function qt(){return new Rt([[document.documentElement]],_t)}Rt.prototype=qt.prototype={constructor:Rt,select:function st(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,a=e.length,s=new Array(a),v=0;v<a;++v)for(var W,ot,b=e[v],S=b.length,F=s[v]=new Array(S),ft=0;ft<S;++ft)(W=b[ft])&&(ot=t.call(W,W.__data__,ft,b))&&("__data__"in W&&(ot.__data__=W.__data__),F[ft]=ot);return new Rt(s,this._parents)},selectAll:function M(t){t="function"==typeof t?function y(t){return function(){return function N(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):x(t);for(var e=this._groups,a=e.length,s=[],v=[],b=0;b<a;++b)for(var W,S=e[b],F=S.length,ot=0;ot<F;++ot)(W=S[ot])&&(s.push(t.call(W,W.__data__,ot,S)),v.push(W));return new Rt(s,v)},selectChild:function ut(t){return this.select(null==t?O:function C(t){return function(){return A.call(this.children,t)}}("function"==typeof t?t:f(t)))},selectChildren:function L(t){return this.selectAll(null==t?P:function h(t){return function(){return p.call(this.children,t)}}("function"==typeof t?t:f(t)))},filter:function D(t){"function"!=typeof t&&(t=I(t));for(var e=this._groups,a=e.length,s=new Array(a),v=0;v<a;++v)for(var W,b=e[v],S=b.length,F=s[v]=[],ot=0;ot<S;++ot)(W=b[ot])&&t.call(W,W.__data__,ot,b)&&F.push(W);return new Rt(s,this._parents)},data:function Jt(t,e){if(!arguments.length)return Array.from(this,Xt);var a=e?Ct:G,s=this._parents,v=this._groups;"function"!=typeof t&&(t=function H(t){return function(){return t}}(t));for(var b=v.length,S=new Array(b),F=new Array(b),W=new Array(b),ot=0;ot<b;++ot){var ft=s[ot],Wt=v[ot],Qt=Wt.length,$t=Ht(t.call(ft,ft&&ft.__data__,ot,s)),we=$t.length,Se=F[ot]=new Array(we),Ft=S[ot]=new Array(we);a(ft,Wt,Se,Ft,W[ot]=new Array(Qt),$t,e);for(var he,ge,oe=0,te=0;oe<we;++oe)if(he=Se[oe]){for(oe>=te&&(te=oe+1);!(ge=Ft[te])&&++te<we;);he._next=ge||null}}return(S=new Rt(S,s))._enter=F,S._exit=W,S},enter:function Y(){return new Rt(this._enter||this._groups.map(V),this._parents)},exit:function Bt(){return new Rt(this._exit||this._groups.map(V),this._parents)},join:function nt(t,e,a){var s=this.enter(),v=this,b=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(v=e(v))&&(v=v.selection()),null==a?b.remove():a(b),s&&v?s.merge(v).order():v},merge:function bt(t){for(var e=t.selection?t.selection():t,a=this._groups,s=e._groups,v=a.length,S=Math.min(v,s.length),F=new Array(v),W=0;W<S;++W)for(var $t,ot=a[W],ft=s[W],Wt=ot.length,Qt=F[W]=new Array(Wt),we=0;we<Wt;++we)($t=ot[we]||ft[we])&&(Qt[we]=$t);for(;W<v;++W)F[W]=a[W];return new Rt(F,this._parents)},selection:function ye(){return this},order:function et(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var S,s=t[e],v=s.length-1,b=s[v];--v>=0;)(S=s[v])&&(b&&4^S.compareDocumentPosition(b)&&b.parentNode.insertBefore(S,b),b=S);return this},sort:function At(t){function e(Wt,Qt){return Wt&&Qt?t(Wt.__data__,Qt.__data__):!Wt-!Qt}t||(t=St);for(var a=this._groups,s=a.length,v=new Array(s),b=0;b<s;++b){for(var ot,S=a[b],F=S.length,W=v[b]=new Array(F),ft=0;ft<F;++ft)(ot=S[ft])&&(W[ft]=ot);W.sort(e)}return new Rt(v,this._parents).order()},call:function kt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function mt(){return Array.from(this)},node:function U(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var s=t[e],v=0,b=s.length;v<b;++v){var S=s[v];if(S)return S}return null},size:function Q(){let t=0;for(const e of this)++t;return t},empty:function d(){return!this.node()},each:function at(t){for(var e=this._groups,a=0,s=e.length;a<s;++a)for(var F,v=e[a],b=0,S=v.length;b<S;++b)(F=v[b])&&t.call(F,F.__data__,b,v);return this},attr:function u(t,e){var a=Dt(t);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((null==e?a.local?Kt:Gt:"function"==typeof e?a.local?K:Pt:a.local?yt:Vt)(a,e))},style:function J(t,e,a){return arguments.length>1?this.each((null==e?dt:"function"==typeof e?X:it)(t,e,null==a?"":a)):rt(this.node(),t)},property:function Mt(t,e){return arguments.length>1?this.each((null==e?z:"function"==typeof e?Et:q)(t,e)):this.node()[t]},classed:function ne(t,e){var a=pt(t+"");if(arguments.length<2){for(var s=It(this.node()),v=-1,b=a.length;++v<b;)if(!s.contains(a[v]))return!1;return!0}return this.each(("function"==typeof e?ae:e?Ut:ee)(a,e))},text:function Qe(t){return arguments.length?this.each(null==t?re:("function"==typeof t?Ge:_e)(t)):this.node().textContent},html:function Xe(t){return arguments.length?this.each(null==t?Je:("function"==typeof t?Ze:Pe)(t)):this.node().innerHTML},raise:function Oe(){return this.each(ii)},lower:function De(){return this.each(Ye)},append:function Ve(t){var e="function"==typeof t?t:He(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function hi(t,e){var a="function"==typeof t?t:He(t),s=null==e?$e:"function"==typeof e?e:E(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})},remove:function j(){return this.each(wt)},clone:function o(t){return this.select(t?r:i)},datum:function n(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function k(t,e,a){var v,S,s=function g(t){return t.trim().split(/^|\s+/).map(function(e){var a="",s=e.indexOf(".");return s>=0&&(a=e.slice(s+1),e=e.slice(0,s)),{type:e,name:a}})}(t+""),b=s.length;if(!(arguments.length<2)){for(F=e?c:m,v=0;v<b;++v)this.each(F(s[v],e,a));return this}var F=this.node().__on;if(F)for(var ft,W=0,ot=F.length;W<ot;++W)for(v=0,ft=F[W];v<b;++v)if((S=s[v]).type===ft.type&&S.name===ft.name)return ft.value},dispatch:function ct(t,e){return this.each(("function"==typeof e?R:B)(t,e))},[Symbol.iterator]:function*vt(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var S,s=t[e],v=0,b=s.length;v<b;++v)(S=s[v])&&(yield S)}};const ve=qt;var me={value:()=>{}};function pe(){for(var s,t=0,e=arguments.length,a={};t<e;++t){if(!(s=arguments[t]+"")||s in a||/[\s.]/.test(s))throw new Error("illegal type: "+s);a[s]=[]}return new be(a)}function be(t){this._=t}function ar(t,e){for(var v,a=0,s=t.length;a<s;++a)if((v=t[a]).name===e)return v.value}function gn(t,e,a){for(var s=0,v=t.length;s<v;++s)if(t[s].name===e){t[s]=me,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=a&&t.push({name:e,value:a}),t}be.prototype=pe.prototype={constructor:be,on:function(t,e){var v,a=this._,s=function lr(t,e){return t.trim().split(/^|\s+/).map(function(a){var s="",v=a.indexOf(".");if(v>=0&&(s=a.slice(v+1),a=a.slice(0,v)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}(t+"",a),b=-1,S=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++b<S;)if(v=(t=s[b]).type)a[v]=gn(a[v],t.name,e);else if(null==e)for(v in a)a[v]=gn(a[v],t.name,null);return this}for(;++b<S;)if((v=(t=s[b]).type)&&(v=ar(a[v],t.name)))return v},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new be(t)},call:function(t,e){if((v=arguments.length-2)>0)for(var v,b,a=new Array(v),s=0;s<v;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,v=(b=this._[t]).length;s<v;++s)b[s].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],v=0,b=s.length;v<b;++v)s[v].value.apply(e,a)}};const or=pe;var Ni,ki,pi=0,Oi=0,Si=0,yn=1e3,Di=0,ci=0,zi=0,Ti="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yi(){return ci||(pn(sr),ci=Ti.now()+zi)}function sr(){ci=0}function ji(){this._call=this._time=this._next=null}function mn(t,e,a){var s=new ji;return s.restart(t,e,a),s}function wn(){ci=(Di=Ti.now())+zi,pi=Oi=0;try{!function dr(){Yi(),++pi;for(var e,t=Ni;t;)(e=ci-t._time)>=0&&t._call.call(void 0,e),t=t._next;--pi}()}finally{pi=0,function hr(){for(var t,a,e=Ni,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);ki=t,qi(s)}(),ci=0}}function ur(){var t=Ti.now(),e=t-Di;e>yn&&(zi-=e,Di=t)}function qi(t){pi||(Oi&&(Oi=clearTimeout(Oi)),t-ci>24?(t<1/0&&(Oi=setTimeout(wn,t-Ti.now()-zi)),Si&&(Si=clearInterval(Si))):(Si||(Di=Ti.now(),Si=setInterval(ur,yn)),pi=1,pn(wn)))}function _n(t,e,a){var s=new ji;return s.restart(v=>{s.stop(),t(v+e)},e=null==e?0:+e,a),s}ji.prototype=mn.prototype={constructor:ji,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Yi():+a)+(null==e?0:+e),!this._next&&ki!==this&&(ki?ki._next=this:Ni=this,ki=this),this._call=t,this._time=a,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cr=or("start","end","cancel","interrupt"),fr=[],xn=0,Ki=3;function Fi(t,e,a,s,v,b){var S=t.__transition;if(S){if(a in S)return}else t.__transition={};!function vr(t,e,a){var v,s=t.__transition;function S(ot){var ft,Wt,Qt,$t;if(1!==a.state)return W();for(ft in s)if(($t=s[ft]).name===a.name){if($t.state===Ki)return _n(S);4===$t.state?($t.state=6,$t.timer.stop(),$t.on.call("interrupt",t,t.__data__,$t.index,$t.group),delete s[ft]):+ft<e&&($t.state=6,$t.timer.stop(),$t.on.call("cancel",t,t.__data__,$t.index,$t.group),delete s[ft])}if(_n(function(){a.state===Ki&&(a.state=4,a.timer.restart(F,a.delay,a.time),F(ot))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=Ki,v=new Array(Qt=a.tween.length),ft=0,Wt=-1;ft<Qt;++ft)($t=a.tween[ft].value.call(t,t.__data__,a.index,a.group))&&(v[++Wt]=$t);v.length=Wt+1}}function F(ot){for(var ft=ot<a.duration?a.ease.call(null,ot/a.duration):(a.timer.restart(W),a.state=5,1),Wt=-1,Qt=v.length;++Wt<Qt;)v[Wt].call(t,ft);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),W())}function W(){for(var ot in a.state=6,a.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=a,a.timer=mn(function b(ot){a.state=1,a.timer.restart(S,a.delay,a.time),a.delay<=ot&&S(ot-a.delay)},0,a.time)}(t,a,{name:e,index:s,group:v,on:cr,tween:fr,time:b.time,delay:b.delay,duration:b.duration,ease:b.ease,timer:null,state:xn})}function en(t,e){var a=ti(t,e);if(a.state>xn)throw new Error("too late; already scheduled");return a}function ni(t,e){var a=ti(t,e);if(a.state>Ki)throw new Error("too late; already running");return a}function ti(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function di(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,s,v,b){var S,F,W;return(S=Math.sqrt(t*t+e*e))&&(t/=S,e/=S),(W=t*a+e*s)&&(a-=t*W,s-=e*W),(F=Math.sqrt(a*a+s*s))&&(a/=F,s/=F,W/=F),t*s<e*a&&(t=-t,e=-e,W=-W,S=-S),{translateX:v,translateY:b,rotate:Math.atan2(e,t)*On,skewX:Math.atan(W)*On,scaleX:S,scaleY:F}}function kn(t,e,a,s){function v(ot){return ot.length?ot.pop()+" ":""}return function(ot,ft){var Wt=[],Qt=[];return ot=t(ot),ft=t(ft),function b(ot,ft,Wt,Qt,$t,we){if(ot!==Wt||ft!==Qt){var Se=$t.push("translate(",null,e,null,a);we.push({i:Se-4,x:di(ot,Wt)},{i:Se-2,x:di(ft,Qt)})}else(Wt||Qt)&&$t.push("translate("+Wt+e+Qt+a)}(ot.translateX,ot.translateY,ft.translateX,ft.translateY,Wt,Qt),function S(ot,ft,Wt,Qt){ot!==ft?(ot-ft>180?ft+=360:ft-ot>180&&(ot+=360),Qt.push({i:Wt.push(v(Wt)+"rotate(",null,s)-2,x:di(ot,ft)})):ft&&Wt.push(v(Wt)+"rotate("+ft+s)}(ot.rotate,ft.rotate,Wt,Qt),function F(ot,ft,Wt,Qt){ot!==ft?Qt.push({i:Wt.push(v(Wt)+"skewX(",null,s)-2,x:di(ot,ft)}):ft&&Wt.push(v(Wt)+"skewX("+ft+s)}(ot.skewX,ft.skewX,Wt,Qt),function W(ot,ft,Wt,Qt,$t,we){if(ot!==Wt||ft!==Qt){var Se=$t.push(v($t)+"scale(",null,",",null,")");we.push({i:Se-4,x:di(ot,Wt)},{i:Se-2,x:di(ft,Qt)})}else(1!==Wt||1!==Qt)&&$t.push(v($t)+"scale("+Wt+","+Qt+")")}(ot.scaleX,ot.scaleY,ft.scaleX,ft.scaleY,Wt,Qt),ot=ft=null,function($t){for(var Ft,we=-1,Se=Qt.length;++we<Se;)Wt[(Ft=Qt[we]).i]=Ft.x($t);return Wt.join("")}}}var wr=kn(function pr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),_r=kn(function mr(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function xr(t,e){var a,s;return function(){var v=ni(this,t),b=v.tween;if(b!==a)for(var S=0,F=(s=a=b).length;S<F;++S)if(s[S].name===e){(s=s.slice()).splice(S,1);break}v.tween=s}}function br(t,e,a){var s,v;if("function"!=typeof a)throw new Error;return function(){var b=ni(this,t),S=b.tween;if(S!==s){v=(s=S).slice();for(var F={name:e,value:a},W=0,ot=v.length;W<ot;++W)if(v[W].name===e){v[W]=F;break}W===ot&&v.push(F)}b.tween=v}}function rn(t,e,a){var s=t._id;return t.each(function(){var v=ni(this,s);(v.value||(v.value={}))[e]=a.apply(this,arguments)}),function(v){return ti(v,s).value[e]}}function ln(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function Tn(t,e){var a=Object.create(t.prototype);for(var s in e)a[s]=e[s];return a}function Ci(){}var Wi=1/.7,mi="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),kr=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),Tr=new RegExp(`^rgba\\(${mi},${mi},${mi},${Ai}\\)$`),Cr=new RegExp(`^rgba\\(${ri},${ri},${ri},${Ai}\\)$`),Lr=new RegExp(`^hsl\\(${Ai},${ri},${ri}\\)$`),Ar=new RegExp(`^hsla\\(${Ai},${ri},${ri},${Ai}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ii(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?In(e):3===a?new je(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new je(e[1],e[2],e[3],1):(e=kr.exec(t))?new je(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Lr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?In(Cn[t]):"transparent"===t?new je(NaN,NaN,NaN,0):null}function In(t){return new je(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,a,s){return s<=0&&(t=e=a=NaN),new je(t,e,a,s)}function Qi(t,e,a,s){return 1===arguments.length?function Mr(t){return t instanceof Ci||(t=Ii(t)),t?new je((t=t.rgb()).r,t.g,t.b,t.opacity):new je}(t):new je(t,e,a,null==s?1:s)}function je(t,e,a,s){this.r=+t,this.g=+e,this.b=+a,this.opacity=+s}function Pn(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}`}function Mn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${fi(this.r)}, ${fi(this.g)}, ${fi(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vi(t){return((t=fi(t))<16?"0":"")+t.toString(16)}function Rn(t,e,a,s){return s<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new ei(t,e,a,s)}function Nn(t){if(t instanceof ei)return new ei(t.h,t.s,t.l,t.opacity);if(t instanceof Ci||(t=Ii(t)),!t)return new ei;if(t instanceof ei)return t;var e=(t=t.rgb()).r/255,a=t.g/255,s=t.b/255,v=Math.min(e,a,s),b=Math.max(e,a,s),S=NaN,F=b-v,W=(b+v)/2;return F?(S=e===b?(a-s)/F+6*(a<s):a===b?(s-e)/F+2:(e-a)/F+4,F/=W<.5?b+v:2-b-v,S*=60):F=W>0&&W<1?0:S,new ei(S,F,W,t.opacity)}function ei(t,e,a,s){this.h=+t,this.s=+e,this.l=+a,this.opacity=+s}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function zn(t,e,a,s,v){var b=t*t,S=b*t;return((1-3*t+3*b-S)*e+(4-6*b+3*S)*a+(1+3*t+3*b-3*S)*s+S*v)/6}ln(Ci,Ii,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Ir(){return this.rgb().formatHex8()},formatHsl:function Pr(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),ln(je,Qi,Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new je(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new je(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new je(fi(this.r),fi(this.g),fi(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pn,formatHex:Pn,formatHex8:function Rr(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}${vi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Mn,toString:Mn})),ln(ei,function Nr(t,e,a,s){return 1===arguments.length?Nn(t):new ei(t,e,a,null==s?1:s)},Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new ei(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ei(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*e,v=2*a-s;return new je(an(t>=240?t-240:t+120,v,s),an(t,v,s),an(t<120?t+240:t-120,v,s),this.opacity)},clamp(){return new ei(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const jn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):jn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kr(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function jr(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(s){return Math.pow(t+s*e,a)}}(e,a,t):jn(isNaN(e)?a:e)}}(e);function s(v,b){var S=a((v=Qi(v)).r,(b=Qi(b)).r),F=a(v.g,b.g),W=a(v.b,b.b),ot=Bn(v.opacity,b.opacity);return function(ft){return v.r=S(ft),v.g=F(ft),v.b=W(ft),v.opacity=ot(ft),v+""}}return s.gamma=t,s}(1);function Un(t){return function(e){var S,F,a=e.length,s=new Array(a),v=new Array(a),b=new Array(a);for(S=0;S<a;++S)F=Qi(e[S]),s[S]=F.r||0,v[S]=F.g||0,b[S]=F.b||0;return s=t(s),v=t(v),b=t(b),F.opacity=1,function(W){return F.r=s(W),F.g=v(W),F.b=b(W),F+""}}}Un(function Dr(t){var e=t.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),v=t[s],b=t[s+1];return zn((a-s/e)*e,s>0?t[s-1]:2*v-b,v,b,s<e-1?t[s+2]:2*b-v)}}),Un(function zr(t){var e=t.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*e);return zn((a-s/e)*e,t[(s+e-1)%e],t[s%e],t[(s+1)%e],t[(s+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ur(t,e){var s,v,b,a=on.lastIndex=sn.lastIndex=0,S=-1,F=[],W=[];for(t+="",e+="";(s=on.exec(t))&&(v=sn.exec(e));)(b=v.index)>a&&(b=e.slice(a,b),F[S]?F[S]+=b:F[++S]=b),(s=s[0])===(v=v[0])?F[S]?F[S]+=v:F[++S]=v:(F[++S]=null,W.push({i:S,x:di(s,v)})),a=sn.lastIndex;return a<e.length&&(b=e.slice(a),F[S]?F[S]+=b:F[++S]=b),F.length<2?W[0]?function Fr(t){return function(e){return t(e)+""}}(W[0].x):function Br(t){return function(){return t}}(e):(e=W.length,function(ot){for(var Wt,ft=0;ft<e;++ft)F[(Wt=W[ft]).i]=Wt.x(ot);return F.join("")})}function Wn(t,e){var a;return("number"==typeof e?di:e instanceof Ii?Fn:(a=Ii(e))?(e=a,Fn):Ur)(t,e)}function Wr(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,a){var s,b,v=a+"";return function(){var S=this.getAttribute(t);return S===v?null:S===s?b:b=e(s=S,a)}}function Jr(t,e,a){var s,b,v=a+"";return function(){var S=this.getAttributeNS(t.space,t.local);return S===v?null:S===s?b:b=e(s=S,a)}}function Hr(t,e,a){var s,v,b;return function(){var S,W,F=a(this);return null==F?void this.removeAttribute(t):(S=this.getAttribute(t))===(W=F+"")?null:S===s&&W===v?b:(v=W,b=e(s=S,F))}}function Vr(t,e,a){var s,v,b;return function(){var S,W,F=a(this);return null==F?void this.removeAttributeNS(t.space,t.local):(S=this.getAttributeNS(t.space,t.local))===(W=F+"")?null:S===s&&W===v?b:(v=W,b=e(s=S,F))}}function qr(t,e){var a,s;function v(){var b=e.apply(this,arguments);return b!==s&&(a=(s=b)&&function Yr(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,b)),a}return v._value=e,v}function $r(t,e){var a,s;function v(){var b=e.apply(this,arguments);return b!==s&&(a=(s=b)&&function Xr(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,b)),a}return v._value=e,v}function el(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){en(this,t).delay=e}}function rl(t,e){return function(){ni(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){ni(this,t).duration=e}}var _l=ve.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var jl=0;function ai(t,e,a,s){this._groups=t,this._parents=e,this._name=a,this._id=s}function Qn(){return++jl}var oi=ve.prototype;ai.prototype=function Kl(t){return ve().transition(t)}.prototype={constructor:ai,select:function ml(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=E(t));for(var s=this._groups,v=s.length,b=new Array(v),S=0;S<v;++S)for(var ft,Wt,F=s[S],W=F.length,ot=b[S]=new Array(W),Qt=0;Qt<W;++Qt)(ft=F[Qt])&&(Wt=t.call(ft,ft.__data__,Qt,F))&&("__data__"in ft&&(Wt.__data__=ft.__data__),ot[Qt]=Wt,Fi(ot[Qt],e,a,Qt,ot,ti(ft,a)));return new ai(b,this._parents,e,a)},selectAll:function wl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=x(t));for(var s=this._groups,v=s.length,b=[],S=[],F=0;F<v;++F)for(var ft,W=s[F],ot=W.length,Wt=0;Wt<ot;++Wt)if(ft=W[Wt]){for(var $t,Qt=t.call(ft,ft.__data__,Wt,W),we=ti(ft,a),Se=0,Ft=Qt.length;Se<Ft;++Se)($t=Qt[Se])&&Fi($t,e,a,Se,Qt,we);b.push(Qt),S.push(ft)}return new ai(b,S,e,a)},selectChild:oi.selectChild,selectChildren:oi.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=I(t));for(var e=this._groups,a=e.length,s=new Array(a),v=0;v<a;++v)for(var W,b=e[v],S=b.length,F=s[v]=[],ot=0;ot<S;++ot)(W=b[ot])&&t.call(W,W.__data__,ot,b)&&F.push(W);return new ai(s,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,s=e.length,b=Math.min(s,a.length),S=new Array(s),F=0;F<b;++F)for(var Qt,W=e[F],ot=a[F],ft=W.length,Wt=S[F]=new Array(ft),$t=0;$t<ft;++$t)(Qt=W[$t]||ot[$t])&&(Wt[$t]=Qt);for(;F<s;++F)S[F]=e[F];return new ai(S,this._parents,this._name,this._id)},selection:function xl(){return new _l(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,a=Qn(),s=this._groups,v=s.length,b=0;b<v;++b)for(var W,S=s[b],F=S.length,ot=0;ot<F;++ot)if(W=S[ot]){var ft=ti(W,e);Fi(W,t,a,ot,S,{time:ft.time+ft.delay+ft.duration,delay:0,duration:ft.duration,ease:ft.ease})}return new ai(s,this._parents,t,a)},call:oi.call,nodes:oi.nodes,node:oi.node,size:oi.size,empty:oi.empty,each:oi.each,on:function gl(t,e){var a=this._id;return arguments.length<2?ti(this.node(),a).on.on(t):this.each(function vl(t,e,a){var s,v,b=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?en:ni;return function(){var S=b(this,t),F=S.on;F!==s&&(v=(s=F).copy()).on(e,a),S.on=v}}(a,t,e))},attr:function Zr(t,e){var a=Dt(t),s="transform"===a?_r:Wn;return this.attrTween(t,"function"==typeof e?(a.local?Vr:Hr)(a,s,rn(this,"attr."+t,e)):null==e?(a.local?Gr:Wr)(a):(a.local?Jr:Qr)(a,s,e))},attrTween:function tl(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var s=Dt(t);return this.tween(a,(s.local?qr:$r)(s,e))},style:function kl(t,e,a){var s="transform"==(t+="")?wr:Wn;return null==e?this.styleTween(t,function bl(t,e){var a,s,v;return function(){var b=rt(this,t),S=(this.style.removeProperty(t),rt(this,t));return b===S?null:b===a&&S===s?v:v=e(a=b,s=S)}}(t,s)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,a){var s,v,b;return function(){var S=rt(this,t),F=a(this),W=F+"";return null==F&&(this.style.removeProperty(t),W=F=rt(this,t)),S===W?null:S===s&&W===v?b:(v=W,b=e(s=S,F))}}(t,s,rn(this,"style."+t,e))).each(function Sl(t,e){var a,s,v,F,b="style."+e,S="end."+b;return function(){var W=ni(this,t),ot=W.on,ft=null==W.value[b]?F||(F=Gn(e)):void 0;(ot!==a||v!==ft)&&(s=(a=ot).copy()).on(S,v=ft),W.on=s}}(this._id,t)):this.styleTween(t,function El(t,e,a){var s,b,v=a+"";return function(){var S=rt(this,t);return S===v?null:S===s?b:b=e(s=S,a)}}(t,s,e),a).on("end.style."+t,null)},styleTween:function Ll(t,e,a){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,function Cl(t,e,a){var s,v;function b(){var S=e.apply(this,arguments);return S!==v&&(s=(v=S)&&function Tl(t,e,a){return function(s){this.style.setProperty(t,e.call(this,s),a)}}(t,S,a)),s}return b._value=e,b}(t,e,null==a?"":a))},text:function Pl(t){return this.tween("text","function"==typeof t?function Il(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,a;function s(){var v=t.apply(this,arguments);return v!==a&&(e=(a=v)&&function Ml(t){return function(e){this.textContent=t.call(this,e)}}(v)),e}return s._value=t,s}(t))},remove:function pl(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var a=this._id;if(t+="",arguments.length<2){for(var S,s=ti(this.node(),a).tween,v=0,b=s.length;v<b;++v)if((S=s[v]).name===t)return S.value;return null}return this.each((null==e?xr:br)(a,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):ti(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):ti(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){ni(this,t).ease=e}}(e,t)):ti(this.node(),e).ease},easeVarying:function ul(t){if("function"!=typeof t)throw new Error;return this.each(function dl(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;ni(this,t).ease=a}}(this._id,t))},end:function zl(){var t,e,a=this,s=a._id,v=a.size();return new Promise(function(b,S){var F={value:S},W={value:function(){0==--v&&b()}};a.each(function(){var ot=ni(this,s),ft=ot.on;ft!==t&&((e=(t=ft).copy())._.cancel.push(F),e._.interrupt.push(F),e._.end.push(W)),ot.on=e}),0===v&&b()})},[Symbol.iterator]:oi[Symbol.iterator]};var Fl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}ve.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var s,v,S,a=t.__transition,b=!0;if(a){for(S in e=null==e?null:e+"",a)(s=a[S]).name===e?(v=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(v?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete a[S]):b=!1;b&&delete t.__transition}}(this,t)})},ve.prototype.transition=function Wl(t){var e,a;t instanceof ai?(e=t._id,t=t._name):(e=Qn(),(a=Fl).time=Yi(),t=null==t?null:t+"");for(var s=this._groups,v=s.length,b=0;b<v;++b)for(var W,S=s[b],F=S.length,ot=0;ot<F;++ot)(W=S[ot])&&Fi(W,t,e,ot,S,a||Ul(W,e));return new ai(s,this._parents,t,e)};Math;function Pi(t){return{type:t}}function xi(t){return function(){return t}}function Yn(t){this._context=t}function ql(t){return new Yn(t)}["w","e"].map(Pi),["n","s"].map(Pi),["n","w","e","s","nw","ne","sw","se"].map(Pi),Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const fn=Math.PI,vn=2*fn,gi=1e-6,$l=vn-gi;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Xi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(s){this._+=s[0];for(let v=1,b=s.length;v<b;++v)this._+=Math.round(arguments[v]*a)/a+s[v]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,s,v){this._append`Q${+e},${+a},${this._x1=+s},${this._y1=+v}`}bezierCurveTo(e,a,s,v,b,S){this._append`C${+e},${+a},${+s},${+v},${this._x1=+b},${this._y1=+S}`}arcTo(e,a,s,v,b){if(e=+e,a=+a,s=+s,v=+v,(b=+b)<0)throw new Error(`negative radius: ${b}`);let S=this._x1,F=this._y1,W=s-e,ot=v-a,ft=S-e,Wt=F-a,Qt=ft*ft+Wt*Wt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Qt>gi)if(Math.abs(Wt*W-ot*ft)>gi&&b){let $t=s-S,we=v-F,Se=W*W+ot*ot,Ft=$t*$t+we*we,Nt=Math.sqrt(Se),oe=Math.sqrt(Qt),te=b*Math.tan((fn-Math.acos((Se+Qt-Ft)/(2*Nt*oe)))/2),he=te/oe,ge=te/Nt;Math.abs(he-1)>gi&&this._append`L${e+he*ft},${a+he*Wt}`,this._append`A${b},${b},0,0,${+(Wt*$t>ft*we)},${this._x1=e+ge*W},${this._y1=a+ge*ot}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,s,v,b,S){if(e=+e,a=+a,S=!!S,(s=+s)<0)throw new Error(`negative radius: ${s}`);let F=s*Math.cos(v),W=s*Math.sin(v),ot=e+F,ft=a+W,Wt=1^S,Qt=S?v-b:b-v;null===this._x1?this._append`M${ot},${ft}`:(Math.abs(this._x1-ot)>gi||Math.abs(this._y1-ft)>gi)&&this._append`L${ot},${ft}`,s&&(Qt<0&&(Qt=Qt%vn+vn),Qt>$l?this._append`A${s},${s},0,1,${Wt},${e-F},${a-W}A${s},${s},0,1,${Wt},${this._x1=ot},${this._y1=ft}`:Qt>gi&&this._append`A${s},${s},0,${+(Qt>=fn)},${Wt},${this._x1=e+s*Math.cos(b)},${this._y1=a+s*Math.sin(b)}`)}rect(e,a,s,v){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${s=+s}v${+v}h${-s}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var a=xi(!0),s=null,v=ql,b=null,S=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);e=s}return t},()=>new Xi(e)}(F);function F(W){var ot,Wt,$t,ft=(W=function Yl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(W)).length,Qt=!1;for(null==s&&(b=v($t=S())),ot=0;ot<=ft;++ot)!(ot<ft&&a(Wt=W[ot],ot,W))===Qt&&((Qt=!Qt)?b.lineStart():b.lineEnd()),Qt&&b.point(+t(Wt,ot,W),+e(Wt,ot,W));if($t)return b=null,$t+""||null}return t="function"==typeof t?t:void 0===t?na:xi(t),e="function"==typeof e?e:void 0===e?ra:xi(e),F.x=function(W){return arguments.length?(t="function"==typeof W?W:xi(+W),F):t},F.y=function(W){return arguments.length?(e="function"==typeof W?W:xi(+W),F):e},F.defined=function(W){return arguments.length?(a="function"==typeof W?W:xi(!!W),F):a},F.curve=function(W){return arguments.length?(v=W,null!=s&&(b=v(s)),F):v},F.context=function(W){return arguments.length?(null==W?s=b=null:b=v(s=W),F):s},F}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function bi(t,e,a){this.k=t,this.x=e,this.y=a}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},bi.prototype={constructor:bi,scale:function(t){return 1===t?this:new bi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new bi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new bi(1,0,0)}}]);