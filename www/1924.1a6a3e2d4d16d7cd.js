"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1924],{8671:(N,R,u)=>{u.d(R,{$:()=>y});var C=u(5972);function y(p){p.params=p.params||{},(0,C.hm)({url:"api/Lookup/get",params:{lookup_key:p.params.lookup_key||null},success:a=>{"function"==typeof p.callback&&p.callback(null==a?void 0:a.data)},error:a=>{"function"==typeof p.callback&&p.callback(),console.error(p,a)},loading:p.loading,loadingController:p.loadingController})}},1924:(N,R,u)=>{u.r(R),u.d(R,{KnowledgeQAPageModule:()=>wt});var C=u(177),y=u(9417),p=u(6637),a=u(3658),f=u(467),T=u(5972),I=u(2635),E=u(8405),F=u(7331),A=u(3753),w=u(1312),$=u(1038),j=u(5414);function g(e){var c,i,n,o,l,r,s,d;e.params=e.params||{},(0,T.Ll)({url:"api/TextBook/AddUpdate",params:{user_id:null!==(c=e.params.userid)&&void 0!==c?c:null,textbook_id:null!==(i=e.params.textbook_id)&&void 0!==i?i:null,textbook_title:null!==(n=e.params.textbook_title)&&void 0!==n?n:null,topic_id:null!==(o=e.params.topic_id)&&void 0!==o?o:null,category_id:null!==(l=e.params.category_id)&&void 0!==l?l:null,v_textbook_catg:null!==(r=e.params.v_textbook_catg)&&void 0!==r?r:null,v_publisher:null!==(s=e.params.v_publisher)&&void 0!==s?s:null,filepath:null!==(d=e.params.filepath)&&void 0!==d?d:null},success:_=>{var k;"function"==typeof e.callback&&e.callback(null!==(k=_.data)&&void 0!==k?k:null)},error:_=>{"function"==typeof e.callback&&e.callback(),console.error(_)},loading:e.loading,loadingController:e.loadingController})}var t=u(4438),h=u(31);function P(e,c){if(1&e){const i=t.RV6();t.j41(0,"button",18),t.bIt("click",function(o){t.eBV(i);const l=t.XpG();return t.Njj(l.clearTopic(o))}),t.nrm(1,"ion-icon",19),t.k0s()}}function L(e,c){if(1&e){const i=t.RV6();t.j41(0,"button",18),t.bIt("click",function(o){t.eBV(i);const l=t.XpG();return t.Njj(l.clearCategory(o))}),t.nrm(1,"ion-icon",19),t.k0s()}}function Y(e,c){if(1&e){const i=t.RV6();t.j41(0,"button",18),t.bIt("click",function(o){t.eBV(i);const l=t.XpG();return t.Njj(l.clearTextbookCatg(o))}),t.nrm(1,"ion-icon",19),t.k0s()}}function J(e,c){if(1&e){const i=t.RV6();t.j41(0,"button",18),t.bIt("click",function(o){t.eBV(i);const l=t.XpG();return t.Njj(l.clearPublisher(o))}),t.nrm(1,"ion-icon",19),t.k0s()}}let S=(()=>{var e;class c{constructor(n,o,l,r){this.modalController=n,this.toastController=o,this.loadingController=l,this.popoverController=r,this.textbook={},this.isfullscreen=!1,this.appsettings={}}ngOnInit(){var n=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,f.A)(function*(){n.appsettings=yield(0,T.AC)(),n.appsettings.madonvi&&(n.user=yield(0,I.Nk)(),n.refreshData())})()}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}refreshData(){}presentPopoverTopic(n){var o=this;return(0,f.A)(function*(){const l=yield o.popoverController.create({component:F.E,componentProps:{selectedId:o.textbook.topic_id,filter:{for:"textbook"}},event:n,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(r=>{var s,d;"confirm"==r.role&&Object.assign(o.textbook,{topic_id:null===(s=r.data)||void 0===s?void 0:s.topic_id,topic_title:null===(d=r.data)||void 0===d?void 0:d.topic_title})}),l.present()})()}clearTopic(n){Object.assign(this.textbook,{topic_id:null,topic_title:null})}changeTopic(n){var o;this.textbook.topic_id=null!==(o=parseInt(n))&&void 0!==o?o:0}presentPopoverCategory(n){var o=this;return(0,f.A)(function*(){const l=yield o.popoverController.create({component:E.P,componentProps:{selectedId:o.textbook.category_id,filter:{for:"textbook"}},event:n,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(r=>{var s,d;"confirm"==r.role&&Object.assign(o.textbook,{category_id:null===(s=r.data)||void 0===s?void 0:s.category_id,category_title:null===(d=r.data)||void 0===d?void 0:d.category_title})}),l.present()})()}clearCategory(n){Object.assign(this.textbook,{category_id:null,category_title:null})}changeCategory(n){var o;this.textbook.category_id=null!==(o=parseInt(n))&&void 0!==o?o:0}presentPopoverLookupTextbookCatg(n){var o=this;return(0,f.A)(function*(){const l=yield o.popoverController.create({component:A.t,componentProps:{selectedId:o.textbook.v_textbook_catg,lookup_key:"v_textbook_catg"},event:n,dismissOnSelect:!1,animated:!1});l.onDidDismiss().then(r=>{var s,d;"confirm"==r.role&&Object.assign(o.textbook,{v_textbook_catg:null===(s=r.data)||void 0===s?void 0:s.lookup_value,v_textbook_catg_title:null===(d=r.data)||void 0===d?void 0:d.lookup_title})}),l.present()})()}clearTextbookCatg(n){Object.assign(this.textbook,{v_textbook_catg:null,v_textbook_catg_title:null})}changeTextbookCatg(n){var o;this.textbook.v_textbook_catg=null!==(o=parseInt(n))&&void 0!==o?o:0}presentPopoverLookupPublisher(n){var o=this;return(0,f.A)(function*(){const l=yield o.popoverController.create({component:A.t,componentProps:{selectedId:o.textbook.v_publisher,lookup_key:"v_publisher"},event:n,dismissOnSelect:!1,animated:!1});l.onDidDismiss().then(r=>{var s,d;"confirm"==r.role&&Object.assign(o.textbook,{v_publisher:null===(s=r.data)||void 0===s?void 0:s.lookup_value,v_publisher_title:null===(d=r.data)||void 0===d?void 0:d.lookup_title})}),l.present()})()}clearPublisher(n){Object.assign(this.textbook,{v_publisher:null,v_publisher_title:null})}changePublisher(n){var o;this.textbook.v_publisher=null!==(o=parseInt(n))&&void 0!==o?o:0}selectFile(){(0,w.oG)({accept:".pdf,.doc,.docx",multiple:!1},n=>{var o,l;null!=n&&n.length&&(this.textbookFile=n[0],this.textbook.filename=n[0].name,this.textbook.textbook_title=null!==(o=this.textbook.textbook_title)&&void 0!==o?o:null===(l=n[0].name)||void 0===l?void 0:l.split(".").shift())})}changeTextBookTitle(n){var o;this.textbook.textbook_title=null==n||null===(o=n.target)||void 0===o?void 0:o.value}save(){var n=[];this.textbookFile&&n.push(new Promise((l,r)=>{(0,$.v)({loadingController:this.loadingController,params:{file:this.textbookFile,subFolder:"textbook",fileType:"pdf,office"},callback:s=>{0==(null==s?void 0:s.ReturnCode)?(this.textbook.filepath=s.path+"/"+s.file.name,this.textbookFile=void 0):(0,j.c)(this.toastController,{},{returncode:null==s?void 0:s.ReturnCode,returnmsg:null==s?void 0:s.ReturnName}).then(d=>{d.present()}),l(s)}})}));var o=()=>{var l;this.textbook.filepath?g({loadingController:this.loadingController,params:{userid:null===(l=this.user)||void 0===l?void 0:l.userid,textbook_title:this.textbook.textbook_title,filepath:this.textbook.filepath,topic_id:this.textbook.topic_id,category_id:this.textbook.category_id,v_textbook_catg:this.textbook.v_textbook_catg,v_publisher:this.textbook.v_publisher},callback:r=>{0==(null==r?void 0:r.returncode)?this.modalController.dismiss(r.id,"success"):(0,j.c)(this.toastController,{},r).then(s=>{s.present()})}}):(0,j.c)(this.toastController,{color:"danger",message:"Kh\xf4ng t\xecm th\u1ea5y \u0111\u01b0\u1eddng d\u1eabn t\u1eadp tin!"}).then(r=>{r.present()})};n.length?Promise.all(n).then(()=>{o()}):o()}}return(e=c).\u0275fac=function(n){return new(n||e)(t.rXU(p.W3),t.rXU(p.K_),t.rXU(p.Xi),t.rXU(p.IE))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-modal-textbook-add"]],inputs:{textbook:"textbook"},decls:77,vars:35,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"container-fluid","py-3"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","folder-open-outline"],["type","text",1,"form-control",3,"change","ngModel"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["name","chevron-down-outline"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"]],template:function(n,o){if(1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-button",0),t.bIt("click",function(){return o.save()}),t.j41(6,"ion-label"),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"ion-buttons",1)(10,"ion-button",2),t.bIt("click",function(){return o.toggleFullScreen()}),t.nrm(11,"ion-icon",3),t.k0s(),t.j41(12,"ion-button",4),t.bIt("click",function(){return o.close()}),t.nrm(13,"ion-icon",5),t.k0s()()()(),t.j41(14,"ion-content")(15,"div",6)(16,"div",7)(17,"div",8)(18,"div",9)(19,"label",10),t.EFF(20),t.nI1(21,"translate"),t.k0s()(),t.nrm(22,"input",11),t.j41(23,"div",12)(24,"button",13),t.bIt("click",function(){return o.selectFile()}),t.nrm(25,"ion-icon",14),t.k0s()()()(),t.j41(26,"div",7)(27,"div",8)(28,"div",9)(29,"label",10),t.EFF(30),t.nI1(31,"translate"),t.k0s()(),t.j41(32,"input",15),t.bIt("change",function(r){return o.changeTextBookTitle(r)}),t.k0s()()(),t.j41(33,"div",7)(34,"div",8)(35,"div",9)(36,"label",10),t.EFF(37),t.nI1(38,"translate"),t.k0s()(),t.nrm(39,"input",11),t.j41(40,"div",12),t.DNE(41,P,2,0,"button",16),t.j41(42,"button",13),t.bIt("click",function(r){return o.presentPopoverTopic(r)}),t.nrm(43,"ion-icon",17),t.k0s()()()(),t.j41(44,"div",7)(45,"div",8)(46,"div",9)(47,"label",10),t.EFF(48),t.nI1(49,"translate"),t.k0s()(),t.nrm(50,"input",11),t.j41(51,"div",12),t.DNE(52,L,2,0,"button",16),t.j41(53,"button",13),t.bIt("click",function(r){return o.presentPopoverCategory(r)}),t.nrm(54,"ion-icon",17),t.k0s()()()(),t.j41(55,"div",7)(56,"div",8)(57,"div",9)(58,"label",10),t.EFF(59),t.nI1(60,"translate"),t.k0s()(),t.nrm(61,"input",11),t.j41(62,"div",12),t.DNE(63,Y,2,0,"button",16),t.j41(64,"button",13),t.bIt("click",function(r){return o.presentPopoverLookupTextbookCatg(r)}),t.nrm(65,"ion-icon",17),t.k0s()()()(),t.j41(66,"div",7)(67,"div",8)(68,"div",9)(69,"label",10),t.EFF(70),t.nI1(71,"translate"),t.k0s()(),t.nrm(72,"input",11),t.j41(73,"div",12),t.DNE(74,J,2,0,"button",16),t.j41(75,"button",13),t.bIt("click",function(r){return o.presentPopoverLookupPublisher(r)}),t.nrm(76,"ion-icon",17),t.k0s()()()()()()),2&n){let l,r,s,d,_;t.R7$(3),t.JRh(t.bMT(4,19,"AddTextBook")),t.R7$(4),t.JRh(t.bMT(8,21,"Add")),t.R7$(4),t.Y8G("src",o.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.R7$(9),t.JRh(t.bMT(21,23,"File")),t.R7$(2),t.Y8G("value",null!==(l=o.textbook.filename)&&void 0!==l?l:""),t.R7$(8),t.JRh(t.bMT(31,25,"TextBookName")),t.R7$(2),t.Y8G("ngModel",o.textbook.textbook_title),t.R7$(5),t.JRh(t.bMT(38,27,"GradeLevel")),t.R7$(2),t.Y8G("value",null!==(r=o.textbook.topic_title)&&void 0!==r?r:""),t.R7$(2),t.Y8G("ngIf",o.textbook.topic_id),t.R7$(7),t.JRh(t.bMT(49,29,"Subject")),t.R7$(2),t.Y8G("value",null!==(s=o.textbook.category_title)&&void 0!==s?s:""),t.R7$(2),t.Y8G("ngIf",o.textbook.category_id),t.R7$(7),t.JRh(t.bMT(60,31,"Catalogue")),t.R7$(2),t.Y8G("value",null!==(d=o.textbook.v_textbook_catg_title)&&void 0!==d?d:""),t.R7$(2),t.Y8G("ngIf",o.textbook.v_textbook_catg),t.R7$(7),t.JRh(t.bMT(71,33,"Publisher")),t.R7$(2),t.Y8G("value",null!==(_=o.textbook.v_publisher_title)&&void 0!==_?_:""),t.R7$(2),t.Y8G("ngIf",o.textbook.v_publisher)}},dependencies:[C.bT,y.me,y.BC,y.vS,p.Jm,p.QW,p.W9,p.eU,p.iq,p.he,p.BC,p.ai,h.D9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}"]}),c})();var X=u(5312),U=u(8295),Q=u(5446),z=u(6539),V=u(2313);const W=JSON.parse('[{"title":"\u0110\u1eb7t c\xe2u h\u1ecfi cho AI nh\u01b0 th\u1ebf n\xe0o?","content":"B\u1ea1n c\xf3 th\u1ec3 tham kh\u1ea3o m\u1ed9t s\u1ed1 v\xed d\u1ee5 d\u01b0\u1edbi \u0111\xe2y:<br/><br/>T\xf3m t\u1eaft b\xe0i h\u1ecdc<br/><i>- T\xf3m t\u1eaft l\u1ea1i b\xe0i 10 v\u1edbi c\xe1c n\u1ed9i dung \u0111\u01b0\u1ee3c n\xeau r\xf5 chi ti\u1ebft v\xe0 v\xed d\u1ee5 c\u1ee5 th\u1ec3.</i><br/><br/>T\xecm hi\u1ec3u chi ti\u1ebft v\u1ec1 m\u1ed9t ch\u1ee7 \u0111\u1ec1 trong b\xe0i h\u1ecdc<br/><i>- Gi\u1ea3i th\xedch \xfd ngh\u0129a b\xe0i h\xe1t \\"Nh\u1edb \u01a1n th\u1ea7y c\xf4\\" v\xe0 n\xeau c\u1ea3m x\xfac c\u1ee7a t\xe1c gi\u1ea3 khi s\xe1ng t\xe1c b\xe0i h\xe1t n\xe0y.</i>"},{"title":"L\xe0m th\u1ebf n\xe0o \u0111\u1ec3 \u0111\u1eb7t c\xe2u h\u1ecfi hi\u1ec7u qu\u1ea3?","content":"H\xe3y \u0111\u1eb7t c\xe2u h\u1ecfi v\u1edbi ti\xeau ch\xed R\xd5 R\xc0NG, S\xdaC T\xcdCH, \u0110\xdaNG C\xda PH\xc1P \u0111\u1ec3 t\u1ed1i \u0111a h\xf3a kh\u1ea3 n\u0103ng c\u1ee7a c\xf4ng c\u1ee5 n\xe0y. \u0110i\u1ec1u n\xe0y kh\xf4ng ch\u1ec9 gi\xfap b\u1ea1n nh\u1eadn \u0111\u01b0\u1ee3c th\xf4ng tin ch\xednh x\xe1c m\xe0 c\xf2n n\xe2ng cao hi\u1ec7u qu\u1ea3 v\xe0 \u0111\u1eb7t \u0111\u01b0\u1ee3c c\xe2u tr\u1ea3 l\u1eddi mong mu\u1ed1n v\xe0 \u0111\u1ea7y \u0111\u1ee7 n\u1ed9i dung."},{"title":"T\xf4i n\xean l\xe0m g\xec n\u1ebfu AI kh\xf4ng tr\u1ea3 l\u1eddi \u0111\xfang nh\u01b0 t\xf4i mong \u0111\u1ee3i?","content":"N\u1ebfu AI kh\xf4ng tr\u1ea3 l\u1eddi nh\u01b0 mong \u0111\u1ee3i, b\u1ea1n n\xean xem x\xe9t l\u1ea1i c\xe1ch b\u1ea1n \u0111\xe3 \u0111\u1eb7t c\xe2u h\u1ecfi. Th\u1eed l\xe0m r\xf5 h\u01a1n b\u1eb1ng c\xe1ch cung c\u1ea5p th\xeam chi ti\u1ebft ho\u1eb7c \u0111\u1ecbnh h\u01b0\u1edbng c\xe2u h\u1ecfi theo c\xe1ch kh\xe1c. \u0110\xf4i khi, ph\u1ea3i th\u1eed nghi\u1ec7m v\u1edbi v\xe0i c\xe1ch di\u1ec5n \u0111\u1ea1t kh\xe1c nhau tr\u01b0\u1edbc khi t\xecm \u0111\u01b0\u1ee3c ph\u01b0\u01a1ng \xe1n ph\xf9 h\u1ee3p."}]');var H=u(7704),Z=u(2706);const q=(e,c)=>({item:c,$index:e}),B=e=>({$implicit:e});function tt(e,c){if(1&e&&(t.j41(0,"div",41),t.eu8(1,42),t.k0s()),2&e){const i=c.$implicit;t.XpG(3);const n=t.sdS(56);t.R7$(),t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,B,i))}}function et(e,c){if(1&e&&(t.j41(0,"ion-content",39)(1,"div",40),t.Z7z(2,tt,2,4,"div",41,t.fX1),t.k0s()()),2&e){const i=t.XpG(2);t.R7$(2),t.Dyx(i.textBooks)}}function ot(e,c){if(1&e&&(t.j41(0,"div",35)(1,"span",36),t.EFF(2),t.k0s(),t.nrm(3,"ion-icon",37),t.k0s(),t.j41(4,"ion-popover",38),t.DNE(5,et,4,0,"ng-template"),t.k0s()),2&e){const i=t.XpG();t.R7$(2),t.JRh(i.textBook.textbook_title)}}function nt(e,c){if(1&e){const i=t.RV6();t.j41(0,"iframe",43),t.nI1(1,"safe"),t.bIt("load",function(o){t.eBV(i);const l=t.XpG();return t.Njj(l.loadIframe(o))}),t.k0s()}if(2&e){const i=t.XpG();t.Y8G("src",t.i5U(1,1,i.iframeUrl,"resourceUrl"),t.f$h)}}function it(e,c){if(1&e&&(t.j41(0,"div",45)(1,"b"),t.EFF(2,"Ch\u01b0a hu\u1ea5n luy\u1ec7n AI"),t.k0s(),t.j41(3,"div")(4,"a",46),t.EFF(5),t.k0s()()()),2&e){const i=t.XpG(2);t.R7$(4),t.Y8G("href",i.readfileuploadurl+i.textBook.filepath,t.B4B),t.R7$(),t.JRh(i.readfileuploadurl+i.textBook.filepath)}}function lt(e,c){if(1&e&&(t.j41(0,"div",44),t.DNE(1,it,6,2,"div",45),t.k0s()),2&e){const i=t.XpG();t.R7$(),t.vxM(1,i.textBook.isaitrained?-1:1)}}function at(e,c){if(1&e&&(t.j41(0,"div",51),t.eu8(1,42),t.k0s()),2&e){const i=c.$implicit;t.XpG(2);const n=t.sdS(56);t.R7$(),t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,B,i))}}function rt(e,c){if(1&e&&(t.j41(0,"div",47)(1,"div",48),t.EFF(2,"Ch\u1ecdn ch\u01b0\u01a1ng tr\xecnh h\u1ecdc"),t.k0s(),t.j41(3,"div",21)(4,"ion-content")(5,"div",49)(6,"div",50),t.Z7z(7,at,2,4,"div",51,t.fX1),t.k0s()()()()()),2&e){const i=t.XpG();t.R7$(7),t.Dyx(i.textBooks)}}function ct(e,c){if(1&e&&t.eu8(0,20),2&e){t.XpG();const i=t.sdS(54);t.Y8G("ngTemplateOutlet",i)}}function st(e,c){if(1&e){const i=t.RV6();t.j41(0,"ion-button",56),t.bIt("click",function(){t.eBV(i);const o=t.XpG(2);return t.Njj(o.trainningAI())}),t.j41(1,"ion-label"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"ion-icon",57),t.k0s()}2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"TrainningAI")))}function dt(e,c){if(1&e){const i=t.RV6();t.j41(0,"ion-button",58),t.bIt("click",function(){t.eBV(i),t.XpG(2);const o=t.sdS(39);return t.Njj(null==o?null:o.present())}),t.j41(1,"ion-label"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"ion-icon",59),t.k0s()}2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"ViewTextBook")))}function pt(e,c){if(1&e){const i=t.RV6();t.j41(0,"div",24),t.DNE(1,st,5,3,"ion-button",52)(2,dt,5,3,"ion-button",53),t.j41(3,"ion-button",54),t.bIt("click",function(){t.eBV(i);const o=t.XpG();return t.Njj(o.presentModalTextbookAdd())}),t.j41(4,"ion-label"),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.nrm(7,"ion-icon",55),t.k0s()()}if(2&e){const i=t.XpG();t.R7$(),t.vxM(1,i.textBook&&!i.textBook.isaitrained?1:-1),t.R7$(),t.vxM(2,i.textBook&&i.textBook.filepath?2:-1),t.R7$(3),t.JRh(t.bMT(6,3,"Upload"))}}function ut(e,c){if(1&e&&(t.j41(0,"ion-accordion",28)(1,"ion-item",60)(2,"ion-label")(3,"div",61),t.EFF(4),t.k0s()()(),t.nrm(5,"div",62),t.k0s()),2&e){const i=c.$implicit;t.Mz_("value","accordion-ai-faq-",c.$index,""),t.R7$(4),t.JRh(i.title),t.R7$(),t.Y8G("innerHTML",i.content,t.npT)}}function _t(e,c){if(1&e){const i=t.RV6();t.j41(0,"iframe",43),t.nI1(1,"safe"),t.bIt("load",function(o){t.eBV(i);const l=t.XpG(2);return t.Njj(l.loadIframe(o))}),t.k0s()}if(2&e){const i=t.XpG(2);t.Y8G("src",t.i5U(1,1,"assets/iframe/lib/PDFReader/web/viewer.html?file="+(i.readfileuploadurl+(null==i.textBook?null:i.textBook.filepath)),"resourceUrl"),t.f$h)}}function gt(e,c){if(1&e){const i=t.RV6();t.j41(0,"iframe",43),t.nI1(1,"safe"),t.bIt("load",function(o){t.eBV(i);const l=t.XpG(2);return t.Njj(l.loadIframe(o))}),t.k0s()}if(2&e){const i=t.XpG(2);t.Y8G("src",t.i5U(1,1,"https://view.officeapps.live.com/op/view.aspx?src="+(i.readfileuploadurl+(null==i.textBook?null:i.textBook.filepath)),"resourceUrl"),t.f$h)}}function mt(e,c){if(1&e){const i=t.RV6();t.j41(0,"iframe",43),t.nI1(1,"safe"),t.bIt("load",function(o){t.eBV(i);const l=t.XpG(2);return t.Njj(l.loadIframe(o))}),t.k0s()}if(2&e){const i=t.XpG(2);t.Y8G("src",t.i5U(1,1,"https://view.officeapps.live.com/op/view.aspx?src="+(i.readfileuploadurl+(null==i.textBook?null:i.textBook.filepath)),"resourceUrl"),t.f$h)}}function ft(e,c){if(1&e){const i=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-buttons",63)(5,"ion-button",64),t.bIt("click",function(){t.eBV(i),t.XpG();const o=t.sdS(39);return t.Njj(null==o?null:o.dismiss())}),t.nrm(6,"ion-icon",65),t.k0s()()()(),t.j41(7,"ion-content",66),t.DNE(8,_t,2,4)(9,gt,2,4)(10,mt,2,4),t.k0s()}if(2&e){let i;const n=t.XpG();t.R7$(3),t.JRh(null==n.textBook?null:n.textBook.textbook_title),t.R7$(5),t.vxM(8,"pdf"===(i=null==n.textBook||null==n.textBook.filepath||null==(i=n.textBook.filepath.split("."))||null==(i=i.pop())?null:i.toLowerCase())?8:"doc"===i?9:"docx"===i?10:-1)}}function ht(e,c){if(1&e&&t.eu8(0,42),2&e){const i=c.$implicit;t.XpG(2);const n=t.sdS(52);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,B,i))}}function kt(e,c){if(1&e&&(t.j41(0,"ion-list",67)(1,"ul"),t.DNE(2,ht,1,4,"ng-container",68),t.k0s()()),2&e){const i=t.XpG();t.R7$(2),t.Y8G("ngForOf",i.filterTopic(i.topics))}}function vt(e,c){1&e&&t.nrm(0,"ion-icon",76)}function bt(e,c){1&e&&t.nrm(0,"ion-icon",77)}function xt(e,c){if(1&e&&(t.j41(0,"ion-badge",78),t.EFF(1),t.k0s()),2&e){const i=t.XpG().$implicit,n=t.XpG();t.R7$(),t.JRh(n.APP_FUNC_FormatNumber(i.total_textbook))}}function Ct(e,c){if(1&e&&t.eu8(0,42),2&e){const i=c.$implicit;t.XpG(3);const n=t.sdS(52);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,B,i))}}function Tt(e,c){if(1&e&&(t.qex(0),t.j41(1,"ul"),t.DNE(2,Ct,1,4,"ng-container",68),t.k0s(),t.bVm()),2&e){const i=t.XpG().$implicit,n=t.XpG();t.R7$(2),t.Y8G("ngForOf",n.filterTopic(n.topics,i.topic_id))}}function Pt(e,c){if(1&e){const i=t.RV6();t.j41(0,"li")(1,"ion-item",69),t.bIt("click",function(){const o=t.eBV(i).$implicit,l=t.XpG();return t.Njj(o.disabled?null:l.applyFilterTopic({topic_id:o.topic_id,topic_title:o.topic_title}))}),t.j41(2,"ion-button",70),t.bIt("click",function(o){const l=t.eBV(i).$implicit,r=t.XpG();return t.Njj(r.expandTopic(o,l.topic_id,l.isexpanded))}),t.DNE(3,vt,1,0,"ion-icon",71)(4,bt,1,0,"ion-icon",72),t.k0s(),t.j41(5,"ion-label",73),t.EFF(6),t.k0s(),t.DNE(7,xt,2,1,"ion-badge",74),t.k0s(),t.DNE(8,Tt,3,1,"ng-container",75),t.k0s()}if(2&e){const i=c.$implicit,n=t.XpG();t.R7$(),t.HbH(i.topic_id==n.filter.topic_id?"actived":""),t.R7$(),t.BMQ("style",i.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.Y8G("ngIf",!i.isexpanded),t.R7$(),t.Y8G("ngIf",i.isexpanded),t.R7$(),t.Y8G("title",i.topic_title),t.R7$(),t.JRh(i.topic_title),t.R7$(),t.Y8G("ngIf",i.total_textbook),t.R7$(),t.Y8G("ngIf",i.isexpanded)}}function Mt(e,c){1&e&&(t.j41(0,"div",79),t.nrm(1,"ion-img",80),t.j41(2,"div",81),t.EFF(3,"Ch\u1ecdn ch\u01b0\u01a1ng tr\xecnh h\u1ecdc b\u1ea1n c\u1ea7n gi\u1ea3i \u0111\xe1p!"),t.k0s(),t.nrm(4,"ion-img",82),t.k0s())}function yt(e,c){if(1&e){const i=t.RV6();t.j41(0,"div",83),t.bIt("click",function(){const o=t.eBV(i).$implicit,l=t.XpG();return t.Njj(l.detailTextBook(o.textbook_id))}),t.j41(1,"div",84)(2,"div",85),t.nrm(3,"ion-icon",86),t.k0s(),t.j41(4,"div",87)(5,"div",88),t.EFF(6),t.k0s(),t.j41(7,"div",89),t.EFF(8),t.k0s()()()()}if(2&e){let i,n;const o=c.$implicit;t.HbH(o.isaitrained?"bg-light bg-active-hover":"bg-secondary"),t.R7$(3),t.Mz_("src","../../../assets/icon/subject/",null!==(i=o.category_icon)&&void 0!==i?i:"none.svg",""),t.R7$(2),t.Y8G("title",o.textbook_title),t.R7$(),t.JRh(o.textbook_title),t.R7$(2),t.JRh(null!==(n=o.v_publisher_title)&&void 0!==n?n:o.v_textbook_catg_title)}}const jt=[{path:"",component:(()=>{var e;class c{constructor(n,o,l,r,s){this.router=n,this.activatedRoute=o,this.modalController=l,this.toastController=r,this.loadingController=s,this.APP_FUNC_FormatNumber=w.gs,this.envVersion=X.c.version,this.aiFaqs=W,this.appsettings={},this.readfileuploadurl="",this.filter={},this.topics=[],this.textBooks=[]}ngOnInit(){var n=this;this.filter.topic_id=parseInt(this.activatedRoute.snapshot.queryParamMap.get("topic")||"0"),(0,f.A)(function*(){var o;n.appsettings=yield(0,T.AC)(),n.appsettings.madonvi&&(n.user=yield(0,z.sx)(),n.readfileuploadurl=null!==(o=n.appsettings.readfileuploadurl)&&void 0!==o?o:"",n.refreshDataAll())})()}refreshDataAll(n){Promise.all([new Promise((o,l)=>{this.refreshDataTopic(r=>{o(r)})})]).finally(()=>{this.filter.topic_id&&this.refreshDataTextBook()})}filterChange(n){this.getRecursiveTopicTitle(this.filter.topic_id),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{topic:this.filter.topic_id||null},queryParamsHandling:"merge",replaceUrl:!0}),this.getRecursiveTopicTitle(this.filter.topic_id),this.refreshDataTextBook()}refreshDataTopic(n){this.loadTopic(void 0,()=>{if(n&&n(),this.filter.topic_id){var o;let{topic_id:r,topic_title:s}=null!==(o=this.topics.find(d=>d.topic_id==this.filter.topic_id))&&void 0!==o?o:{};var l;r&&s?(Object.assign(this.filter,{topic_id:r,topic_title:s}),this.getRecursiveTopicTitle(r)):(0,Q.Y5)({params:{userid:null===(l=this.user)||void 0===l?void 0:l.userid,topic_id:this.filter.topic_id,statistic:V.C.textbook,page:1,limit:-1},callback:d=>{var _;let k=d||[];k.forEach(x=>{let M=this.topics.find(K=>K.topic_id==x.topic_id);M?Object.assign(M,x):this.topics.push(x)}),k.map(x=>x.topic_pid).filter((x,M,K)=>K.indexOf(x)==M).forEach(x=>{this.topics.filter(M=>M.topic_id==x).forEach(M=>{M.isexpanded=!0,M.isloadedchild=!0})});let{topic_id:v,topic_title:O}=null!==(_=this.topics.find(x=>x.topic_id==this.filter.topic_id))&&void 0!==_?_:{};v&&O&&(Object.assign(this.filter,{topic_id:v,topic_title:O}),this.getRecursiveTopicTitle(v))}})}},!0)}loadTopic(n,o,l){var r;(0,Q.At)({loadingController:this.loadingController,params:{userid:null===(r=this.user)||void 0===r?void 0:r.userid,topic_pid:n,statistic:V.C.textbook,page:1,limit:-1},callback:s=>{if(this.topics=l?s||[]:this.topics.concat(s||[]),l){let d=[];this.topics.forEach(_=>{_.disabled=!0,_.isexpanded=!0,_.isloadedchild=!0,d.push(new Promise(k=>{this.loadTopic(_.topic_id,k)}))}),Promise.all(d).then(()=>{o&&o()})}else o&&o()}})}filterTopic(n,o){return n.filter(o?l=>l.topic_pid==o:l=>null==l.topic_pid||0==l.topic_pid)}expandTopic(n,o,l){n.preventDefault(),n.stopPropagation(),this.topics.filter(r=>r.topic_id==o).forEach(r=>{r.isexpanded=!l,r.isloadedchild||(r.isloadedchild=!0,this.loadTopic(r.topic_id))})}applyFilterTopic(n){this.filter.topic_id==n.topic_id||Object.assign(this.filter,n),this.filterChange()}clearFilterTopic(n){Object.assign(this.filter,{topic_id:null,topic_title:null}),this.filterChange()}getRecursiveTopicTitle(n,o){let l=this.topics.find(_=>_.topic_id==n);var r,s,d;l?((o=null!==(r=o)&&void 0!==r?r:[]).push(null!==(s=l.topic_title)&&void 0!==s?s:""),this.getRecursiveTopicTitle(l.topic_pid,o)):this.filter.topic_titles=null===(d=o)||void 0===d?void 0:d.reverse()}setFilterTopic(n){n&&(this.filter.topic_id=n,this.filterChange())}refreshDataTextBook(n){this.loadTextBook(o=>{1==o.length?this.detailTextBook(o[0].textbook_id,n):(this.textBook=void 0,this.iframeUrl=void 0,n&&n())},!0)}loadTextBook(n,o){var l;!function G(e){var c,i,n,o,l,r,s,d,_,k;e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,T.hm)({url:"api/TextBook/Search",params:{getby:null!==(c=e.params.userid)&&void 0!==c?c:null,textbook_id:null!==(i=e.params.textbook_id)&&void 0!==i?i:null,textbook_ids:null!==(n=e.params.textbook_ids)&&void 0!==n?n:null,textbook_title:null!==(o=e.params.textbook_title)&&void 0!==o?o:null,topic_id:null!==(l=e.params.topic_id)&&void 0!==l?l:null,category_id:null!==(r=e.params.category_id)&&void 0!==r?r:null,v_textbook_catg:null!==(s=e.params.v_textbook_catg)&&void 0!==s?s:null,v_publisher:null!==(d=e.params.v_publisher)&&void 0!==d?d:null,createdby:e.params.createdby||null,sortfield:null!==(_=e.params.sortfield)&&void 0!==_?_:null,sorttype:null!==(k=e.params.sorttype)&&void 0!==k?k:null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:v=>{var O;"function"==typeof e.callback&&e.callback(null!==(O=v.data)&&void 0!==O?O:null)},error:v=>{"function"==typeof e.callback&&e.callback(),console.error(v)},loading:e.loading,loadingController:e.loadingController})}({loadingController:this.loadingController,params:{userid:null===(l=this.user)||void 0===l?void 0:l.userid,topic_id:this.filter.topic_id,category_id:this.filter.category_id,v_textbook_catg:this.filter.v_textbook_catg,v_publisher:this.filter.v_publisher,page:1,limit:-1},callback:r=>{this.textBooks=o?r||[]:this.textBooks.concat(r||[]),n&&n(this.textBooks)}})}detailTextBook(n,o){var l;n?function D(e){var c,i;e.params=e.params||{},(0,T.hm)({url:"api/TextBook/Detail",params:{getby:null!==(c=e.params.userid)&&void 0!==c?c:null,textbook_id:null!==(i=e.params.textbook_id)&&void 0!==i?i:null},success:n=>{var o;"function"==typeof e.callback&&e.callback(null!==(o=n.data)&&void 0!==o?o:null)},error:n=>{"function"==typeof e.callback&&e.callback(),console.error(n)},loading:e.loading,loadingController:e.loadingController})}({loadingController:this.loadingController,params:{userid:null===(l=this.user)||void 0===l?void 0:l.userid,textbook_id:n,page:1,limit:-1},callback:r=>{this.textBook=null!=r?r:{},this.iframeUrl=this.textBook.textbook_id&&this.textBook.isaitrained?`https://ai.codx.vn/ChatBox/DocumentIFrame?k=${X.c.ai_key}&docIds=${this.textBook.textbook_id}`:void 0,o&&o()}}):o&&o()}addTextBook(n){var o;g({loadingController:this.loadingController,params:{userid:null===(o=this.user)||void 0===o?void 0:o.userid,textbook_title:n.fileName,filepath:n.filePath,topic_id:this.filter.topic_id,category_id:this.filter.category_id,v_textbook_catg:10801,v_publisher:10901},callback:l=>{0==(null==l?void 0:l.returncode)?this.detailTextBook(l.id):(0,j.c)(this.toastController,{},l).then(r=>{r.present()})}})}loadIframe(n){return(0,f.A)(function*(){})()}uploadTextBook(){var n=this;return(0,f.A)(function*(){(0,w.oG)({accept:".pdf,.doc,.docx",multiple:!1},o=>{null!=o&&o.length&&(0,$.v)({loadingController:n.loadingController,params:{file:o[0],subFolder:"textbook",fileType:"pdf,office"},callback:l=>{0==(null==l?void 0:l.ReturnCode)?n.addTextBook({fileName:l.name.replace(/.[a-zA-Z0-9]+$/,""),filePath:l.path+"/"+l.file.name}):(0,j.c)(n.toastController,{},{returncode:null==l?void 0:l.ReturnCode,returnmsg:null==l?void 0:l.ReturnName}).then(r=>{r.present()})}})})})()}trainningAI(){var n=this;return(0,f.A)(function*(){var o,l,r,s;null===(o=n.textBook)||void 0===o||!o.textbook_id||null===(l=n.textBook)||void 0===l||!l.filepath||(0,U.fA)({loadingController:n.loadingController,params:{DocumentExternalId:null===(r=n.textBook)||void 0===r?void 0:r.textbook_id,FileUrl:n.readfileuploadurl+(null===(s=n.textBook)||void 0===s?void 0:s.filepath)},callback:d=>{var _,k;null!=d&&d.Succeeded&&function m(e){var c,i,n;e.params=e.params||{},(0,T.Ll)({url:"api/TextBook/UpdateAiCode",params:{user_id:null!==(c=e.params.userid)&&void 0!==c?c:null,textbook_id:null!==(i=e.params.textbook_id)&&void 0!==i?i:null,ai_code:null!==(n=e.params.ai_code)&&void 0!==n?n:null},success:o=>{var l;"function"==typeof e.callback&&e.callback(null!==(l=o.data)&&void 0!==l?l:null)},error:o=>{"function"==typeof e.callback&&e.callback(),console.error(o)},loading:e.loading,loadingController:e.loadingController})}({params:{userid:null===(_=n.user)||void 0===_?void 0:_.userid,textbook_id:null===(k=n.textBook)||void 0===k?void 0:k.textbook_id,ai_code:"lamgicoaicode"},callback:v=>{0==(null==v?void 0:v.returncode)?n.detailTextBook(null==v?void 0:v.id):(0,j.c)(n.toastController,{},v).then(O=>{O.present()})}})}})})()}presentModalTextbookAdd(){var n=this;return(0,f.A)(function*(){let{topic_id:o,topic_title:l,category_id:r,category_title:s}=n.filter;const d=yield n.modalController.create({component:S,componentProps:{textbook:Object.assign({},{topic_id:o,topic_title:l,category_id:r,category_title:s,v_textbook_catg:10801,v_publisher:10901})}});d.onDidDismiss().then(_=>{"success"==_.role&&_.data&&n.detailTextBook(_.data)}),d.present()})()}}return(e=c).\u0275fac=function(n){return new(n||e)(t.rXU(a.Ix),t.rXU(a.nX),t.rXU(p.W3),t.rXU(p.K_),t.rXU(p.Xi))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-knowledge-qa"]],decls:57,vars:10,consts:[["modalViewTextBook",""],["treeTopic",""],["treeTopicNode",""],["templateBegin",""],["templateTextBook",""],[3,"isFullWidth"],["scroll-x","false","scroll-y","false"],[1,"w-100","h-100","d-flex"],[1,"flex-grow-1","d-flex","flex-column"],[1,"min-h-50","d-flex","align-items-center","bg-linear"],[1,"w-240","min-w-240","d-flex","align-items-center","justify-content-center"],[1,"fs-18"],[1,"flex-grow-1","d-flex","align-items-center","justify-content-between","px-3"],[1,"flex-grow-1","d-flex","align-items-center","justify-content-between"],[1,"flex-grow-1","d-flex","tree-topic"],[1,"w-240","min-w-240","h-100"],[1,"component-container"],["lines","none","detail","false"],["slot","start","src","../../../assets/icon-svg/dashboard/topic.svg",1,"mr-3"],[1,"fw-700"],[3,"ngTemplateOutlet"],[1,"flex-grow-1"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",1,"w-100","h-100",3,"src"],[1,"w-480","min-w-480","d-flex","flex-column"],[1,"min-h-50","d-flex","align-items-center","justify-content-end","bg-warning","px-3"],[1,"p-3"],[1,"px-3"],["value","accordion-ai-faq-0"],[3,"value"],[1,"ion-modal-lg","ion-modal-bottom"],[1,"px-3","py-1"],[1,"fs-14"],[1,"d-flex","align-items-center","line-height-0","mt-1"],["src","../../../assets/favicon/favicon-16x16.png","alt","Tabca-16x16"],[1,"text-muted","ml-1","fs-12"],["id","present-popover-select-textbook",1,"d-flex","align-items-center","justify-content-between","min-w-200","max-w-240","h-32","px-2","text-ellipsis","cursor-pointer","select-textbook"],[1,"fs-14","mr-2","text-ellipsis"],["name","chevron-down-outline",1,"fs-16"],["mode","ios","trigger","present-popover-select-textbook","triggerAction","click"],[1,"ion-padding"],[1,"w-320","max-h-240","row","align-items-start"],[1,"col-12","pb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",1,"w-100","h-100",3,"load","src"],[1,"w-100","h-100","d-flex","align-items-center","justify-content-center"],[1,"mw-100","p-3","text-center","text-wrap"],["target","_blank",3,"href"],[1,"w-100","h-100","d-flex","flex-column"],[1,"fs-30","fw-700","text-center","my-3"],[1,"px-4"],[1,"row","align-items-start"],[1,"col-12","col-xxl-6","mb-3"],["mode","ios","size","small","color","linear"],["mode","ios","size","small","color","medium"],["mode","ios","size","small","color","primary",3,"click"],["name","cloud-upload-outline",1,"ml-2"],["mode","ios","size","small","color","linear",3,"click"],["name","sparkles-outline",1,"ml-2"],["mode","ios","size","small","color","medium",3,"click"],["name","eye-outline",1,"ml-2"],["slot","header","lines","none"],[1,"fs-16","text-wrap"],["slot","content",1,"ion-padding","fs-14",3,"innerHTML"],["slot","end"],[3,"click"],["name","close-outline",1,"fs-24"],[1,"line-height-0"],["lines","none"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline",4,"ngIf"],["name","caret-down-outline",4,"ngIf"],[3,"title"],["class","fs-12","color","medium",4,"ngIf"],[4,"ngIf"],["name","caret-forward-outline"],["name","caret-down-outline"],["color","medium",1,"fs-12"],[1,"w-100","h-100","d-flex","flex-column","align-items-center","justify-content-center","p-3"],["src","../../../assets/image/ai/knowledge-qa.png",1,"w-200"],[1,"fs-28","fw-500","mt-2","mb-4",2,"color","#311A8C"],["src","../../../assets/image/ai/tabca-bot.png",1,"w-280"],[1,"mw-100","textbook-item","d-inline-block","cursor-pointer",3,"click"],[1,"min-w-200","mw-100","min-h-60","d-flex","align-items-center"],[1,"min-w-60","d-flex","align-items-center","justify-content-center"],[1,"fs-30",3,"src"],[1,"py-2","pr-3","text-ellipsis"],[1,"line-height-24","fs-18","fw-500","text-ellipsis",3,"title"],[1,"line-height-20","fs-14","text-muted"]],template:function(n,o){if(1&n&&(t.nrm(0,"app-header",5),t.j41(1,"ion-content",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"span",11),t.EFF(7,"AI-H\u1ecfi \u0111\xe1p ki\u1ebfn th\u1ee9c"),t.k0s()(),t.j41(8,"div",12)(9,"div",13)(10,"span",11),t.EFF(11),t.k0s(),t.DNE(12,ot,6,1),t.k0s()()(),t.j41(13,"div",14)(14,"div",15)(15,"ion-content",16)(16,"ion-item",17),t.nrm(17,"ion-icon",18),t.j41(18,"ion-label",19),t.EFF(19),t.nI1(20,"translate"),t.k0s()(),t.eu8(21,20),t.k0s()(),t.j41(22,"div",21),t.DNE(23,nt,2,4,"iframe",22)(24,lt,2,1)(25,rt,9,0)(26,ct,1,1),t.k0s()()(),t.j41(27,"div",23),t.DNE(28,pt,8,5,"div",24),t.j41(29,"div",21)(30,"ion-content")(31,"div",25)(32,"b"),t.EFF(33,"C\xe2u h\u1ecfi th\u01b0\u1eddng g\u1eb7p"),t.k0s()(),t.j41(34,"div",26)(35,"ion-accordion-group",27),t.Z7z(36,ut,6,4,"ion-accordion",28,q),t.k0s()()()()()(),t.j41(38,"ion-modal",29,0),t.DNE(40,ft,11,2,"ng-template"),t.k0s()(),t.j41(41,"ion-footer")(42,"div",30)(43,"div",31),t.EFF(44,"\xa9 Copyright 2024 by L\u1ea1c Vi\u1ec7t"),t.k0s(),t.j41(45,"div",32),t.nrm(46,"img",33),t.j41(47,"span",34),t.EFF(48),t.k0s()()()(),t.DNE(49,kt,3,1,"ng-template",null,1,t.C5r)(51,Pt,9,9,"ng-template",null,2,t.C5r)(53,Mt,5,0,"ng-template",null,3,t.C5r)(55,yt,9,7,"ng-template",null,4,t.C5r)),2&n){const l=t.sdS(50);t.Y8G("isFullWidth",!0),t.R7$(11),t.JRh(null==o.filter.topic_titles?null:o.filter.topic_titles.join(" / ")),t.R7$(),t.vxM(12,o.textBook&&o.textBooks.length>1?12:-1),t.R7$(7),t.JRh(t.bMT(20,8,"GradeLevel")),t.R7$(2),t.Y8G("ngTemplateOutlet",l),t.R7$(2),t.vxM(23,o.iframeUrl?23:o.textBook?24:o.textBooks.length>1?25:26),t.R7$(5),t.vxM(28,1300==(null==o.user?null:o.user.v_role)?28:-1),t.R7$(8),t.Dyx(o.aiFaqs),t.R7$(12),t.SpI("v",o.envVersion,"")}},dependencies:[C.Sq,C.bT,C.T3,p.xk,p.YH,p.In,p.Jm,p.QW,p.W9,p.M0,p.eU,p.iq,p.KW,p.uz,p.he,p.nf,p.BC,p.ai,p.Sb,p.CF,H.l,Z.m,h.D9],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}.container-grid[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.container-grid.grid-row[_ngcontent-%COMP%]{flex-flow:row}.container-grid.grid-column[_ngcontent-%COMP%]{flex-flow:column}.container-grid[_ngcontent-%COMP%]   .grid-grow[_ngcontent-%COMP%]{flex-grow:1}.container-body[_ngcontent-%COMP%]{position:relative;z-index:1}.container-body[_ngcontent-%COMP%]   .container-left[_ngcontent-%COMP%], .container-body[_ngcontent-%COMP%]   .container-right[_ngcontent-%COMP%]{position:relative;z-index:2}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]{position:relative;z-index:1;flex:auto}.tree-topic[_ngcontent-%COMP%]{position:relative;border-right:1px solid #ECECEC}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.select-textbook[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #444;background-color:#ffffff59;color:#000}.textbook-item[_ngcontent-%COMP%]{border:1px solid var(--ion-color-dark);border-radius:6px}.box-chat[_ngcontent-%COMP%]{position:relative;width:100%;max-width:1080px;height:100%;border-right:1px solid #ECECEC}.box-chat[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-weight:500;font-size:18px}.box-chat[_ngcontent-%COMP%]   .component-header[_ngcontent-%COMP%]{height:3rem}.box-chat[_ngcontent-%COMP%]   .component-header[_ngcontent-%COMP%] + .component-content[_ngcontent-%COMP%]{padding-top:3.5rem}.box-chat[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}.main-content[_ngcontent-%COMP%]{position:relative;min-width:240px}.main-content[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: #f5f5f5}.main-content[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}ion-accordion[_ngcontent-%COMP%]{border:0;margin-bottom:1rem;border-radius:.5rem;--ion-background-color: #f5f5f5}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{font-weight:400;white-space:wrap}ion-accordion.accordion-expanded[_ngcontent-%COMP%]{background:var(--ion-color-secondary);--ion-background-color: var(--ion-color-secondary)}ion-accordion.accordion-expanded[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{--background: var(--ion-color-secondary);font-weight:500}"]}),c})()}];let Ot=(()=>{var e;class c{}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[a.iI.forChild(jt),a.iI]}),c})();var Rt=u(3890);let wt=(()=>{var e;class c{}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[C.MD,y.YN,p.bv,Ot,Rt.x]}),c})()},3753:(N,R,u)=>{u.d(R,{t:()=>D});var C=u(467),y=u(8671),p=u(2635),a=u(4438),f=u(6637),T=u(177),I=u(31);function E(g,b){1&g&&(a.qex(0),a.j41(1,"ion-content")(2,"div",2)(3,"div",3),a.nrm(4,"ion-spinner",4),a.k0s()()(),a.bVm())}function F(g,b){if(1&g){const m=a.RV6();a.qex(0),a.j41(1,"ion-item",9),a.bIt("click",function(){const h=a.eBV(m).$implicit,P=a.XpG(3);return a.Njj(P.filterChange(h.lookup_value))}),a.j41(2,"ion-label"),a.EFF(3),a.k0s()(),a.bVm()}if(2&g){const m=b.$implicit,t=a.XpG(3);a.R7$(),a.BMQ("color",m.lookup_value==t.selectedId?"primary":""),a.R7$(2),a.JRh(m.lookup_title)}}function A(g,b){if(1&g&&(a.j41(0,"ion-list",7),a.DNE(1,F,4,2,"ng-container",8),a.k0s()),2&g){const m=a.XpG(2);a.R7$(),a.Y8G("ngForOf",m.lookups)}}function w(g,b){1&g&&(a.j41(0,"div",3)(1,"i"),a.EFF(2),a.nI1(3,"translate"),a.k0s()()),2&g&&(a.R7$(2),a.JRh(a.bMT(3,1,"DataNotFound")))}function $(g,b){if(1&g){const m=a.RV6();a.qex(0),a.j41(1,"ion-item",9),a.bIt("click",function(){const h=a.eBV(m).$implicit,P=a.XpG(3);return a.Njj(P.filterChange(h.lookup_value))}),a.j41(2,"ion-label",10),a.EFF(3),a.k0s()(),a.bVm()}if(2&g){const m=b.$implicit,t=a.XpG(3);a.R7$(),a.BMQ("color",m.lookup_value==t.selectedId?"primary":""),a.R7$(),a.Y8G("color",m.color),a.R7$(),a.JRh(m.lookup_title)}}function j(g,b){if(1&g&&(a.qex(0),a.nrm(1,"hr"),a.j41(2,"ion-list",7),a.DNE(3,$,4,3,"ng-container",8),a.k0s(),a.bVm()),2&g){const m=a.XpG(2);a.R7$(3),a.Y8G("ngForOf",m.lookups_d2)}}function G(g,b){if(1&g&&(a.qex(0),a.DNE(1,A,2,1,"ion-list",5)(2,w,4,3,"div",6)(3,j,4,1,"ng-container",1),a.bVm()),2&g){const m=a.XpG();a.R7$(),a.Y8G("ngIf",m.lookups.length),a.R7$(),a.Y8G("ngIf",!m.lookups.length),a.R7$(),a.Y8G("ngIf",m.lookups_d2.length)}}let D=(()=>{var g;class b{constructor(t){this.popoverController=t,this.selectedId=0,this.lookup_key="",this.lookups_d2=[],this.dataInit={loading:!0},this.lookups=[]}ngOnInit(){var t=this;(0,C.A)(function*(){t.user=yield(0,p.Nk)(),t.loadLookup()})()}loadLookup(){var t;(0,y.$)({loading:h=>{this.dataInit.loading=h},params:{userid:null===(t=this.user)||void 0===t?void 0:t.userid,lookup_key:this.lookup_key},callback:h=>{this.lookups=h||[]}})}filterChange(t){var h;this.popoverController.dismiss(null!==(h=this.lookups.find(P=>P.lookup_value==t))&&void 0!==h?h:this.lookups_d2.find(P=>P.lookup_value==t),"confirm")}}return(g=b).\u0275fac=function(t){return new(t||g)(a.rXU(f.IE))},g.\u0275cmp=a.VBU({type:g,selectors:[["app-popover-lookup"]],inputs:{selectedId:"selectedId",lookup_key:"lookup_key",lookups_d2:"lookups_d2"},decls:3,vars:2,consts:[[1,"menu-lookup","overflow-auto"],[4,"ngIf"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],["lines","full",4,"ngIf"],["class","px-3 py-1",4,"ngIf"],["lines","full"],[4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],[3,"color"]],template:function(t,h){1&t&&(a.j41(0,"div",0),a.DNE(1,E,5,0,"ng-container",1)(2,G,4,3,"ng-container",1),a.k0s()),2&t&&(a.R7$(),a.Y8G("ngIf",h.dataInit.loading),a.R7$(),a.Y8G("ngIf",!h.dataInit.loading))},dependencies:[T.Sq,T.bT,f.W9,f.uz,f.he,f.nf,f.w2,I.D9],styles:[".menu-lookup[_ngcontent-%COMP%]{width:240px;max-height:480px;border-top:3px solid #5F6CE1}hr[_ngcontent-%COMP%]{margin:0}"]}),b})()}}]);