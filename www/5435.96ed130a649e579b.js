"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5435],{8338:(T,_,t)=>{t.d(_,{S:()=>d});const d={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},2241:(T,_,t)=>{t.d(_,{_:()=>g});var d=t(8338);const g=e=>{switch(null==e?void 0:e.type){case d.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+e.readfileuploadurl+e.path;case d.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+e.readfileuploadurl+e.path;case d.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+e.readfileuploadurl+e.path;case d.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+e.readfileuploadurl+e.path;case d.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+e.readfileuploadurl+e.path;case d.S.HTML:case d.S.IMAGE_ANIMATION:case d.S.PHET:return""+e.readfileuploadurl+e.path;case d.S.ZIP:case d.S.SCORM:var l;return"imsmanifest.xml"==(null===(l=e.path)||void 0===l||null===(l=l.split("/"))||void 0===l?void 0:l.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+e.readfileuploadurl+e.path:""+e.readfileuploadurl+e.path;case d.S.TRACK:case d.S.TEXT:return""+e.readfileuploadurl+e.path;case d.S.LINK:switch(e.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+e.url;case 1002:var s;return null!==(s=y(e.url))&&void 0!==s?s:"";case 1005:var o;return null!==(o=e.url)&&void 0!==o?o:"";default:var n;return null!==(n=e.url)&&void 0!==n?n:""}default:return""+e.readfileuploadurl+e.path}},y=e=>{let l=E(e);return l?"https://www.youtube.com/embed/"+l+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},E=e=>{let l=null==e?void 0:e.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return l&&l.length>=2?l[1]:null}},5781:(T,_,t)=>{t.d(_,{Cr:()=>E,Rq:()=>y,br:()=>f,e6:()=>g});var d=t(5972);function f(e){var l,s,o,n,a,p,P,A,M,b,C,$;e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,d.hm)({url:"api/Media/Search",params:{getby:null!==(l=e.params.userid)&&void 0!==l?l:null,gettype:e.params.gettype||null,media_id:null!==(s=e.params.media_id)&&void 0!==s?s:null,media_title:null!==(o=e.params.media_title)&&void 0!==o?o:null,topic_id:null!==(n=e.params.topic_id)&&void 0!==n?n:null,category_id:null!==(a=e.params.category_id)&&void 0!==a?a:null,directory_id:null!==(p=e.params.directory_id)&&void 0!==p?p:null,v_mediatype:null!==(P=e.params.v_mediatype)&&void 0!==P?P:null,v_mediatypes:null!==(A=e.params.v_mediatypes)&&void 0!==A?A:null,v_osstype:null!==(M=e.params.v_osstype)&&void 0!==M?M:null,tags:null!==(b=e.params.tags)&&void 0!==b?b:null,sortfield:null!==(C=e.params.sortfield)&&void 0!==C?C:null,sorttype:null!==($=e.params.sorttype)&&void 0!==$?$:null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:i=>{var u;"function"==typeof e.callback&&e.callback(null!==(u=i.data)&&void 0!==u?u:null)},error:i=>{"function"==typeof e.callback&&e.callback(),console.error(i)},loading:e.loading,loadingController:e.loadingController})}function g(e){var l,s;e.params=e.params||{},(0,d.hm)({url:"api/Media/Detail",params:{getby:null!==(l=e.params.userid)&&void 0!==l?l:null,media_id:null!==(s=e.params.media_id)&&void 0!==s?s:null},success:o=>{var n;"function"==typeof e.callback&&e.callback(null!==(n=o.data)&&void 0!==n?n:null)},error:o=>{"function"==typeof e.callback&&e.callback(),console.error(o)},loading:e.loading,loadingController:e.loadingController})}function y(e){var l,s,o,n,a,p,P,A,M,b,C,$,i,u,m,r,c,v;e.params=e.params||{},(0,d.Ll)({url:"api/Media/AddUpdate",params:{media_id:null!==(l=e.params.media_id)&&void 0!==l?l:null,media_title:null!==(s=e.params.media_title)&&void 0!==s?s:null,media_description:null!==(o=e.params.media_description)&&void 0!==o?o:null,media_content:null!==(n=e.params.media_content)&&void 0!==n?n:null,filepath:null!==(a=e.params.filepath)&&void 0!==a?a:null,filepath_extract:null!==(p=e.params.filepath_extract)&&void 0!==p?p:null,link_file:null!==(P=e.params.link_file)&&void 0!==P?P:null,link_share:null!==(A=e.params.link_share)&&void 0!==A?A:null,cover:null!==(M=e.params.cover)&&void 0!==M?M:null,v_mediatype:null!==(b=e.params.v_mediatype)&&void 0!==b?b:null,v_osstype:null!==(C=e.params.v_osstype)&&void 0!==C?C:null,v_sharingmode:null!==($=e.params.v_sharingmode)&&void 0!==$?$:null,topic_id:null!==(i=e.params.topic_id)&&void 0!==i?i:null,category_id:null!==(u=e.params.category_id)&&void 0!==u?u:null,directory_id:null!==(m=e.params.directory_id)&&void 0!==m?m:null,tags:null!==(r=e.params.tags)&&void 0!==r?r:null,createdby:null!==(c=e.params.userid)&&void 0!==c?c:null,modifiedby:null!==(v=e.params.userid)&&void 0!==v?v:null},success:h=>{var O;"function"==typeof e.callback&&e.callback(null!==(O=h.data)&&void 0!==O?O:null)},error:h=>{"function"==typeof e.callback&&e.callback(),console.error(h)},loading:e.loading,loadingController:e.loadingController})}function E(e){var l,s,o;e.params=e.params||{},(0,d.sj)({url:"api/Media/Delete",params:{deletedby:null!==(l=e.params.userid)&&void 0!==l?l:null,media_id:null!==(s=e.params.media_id)&&void 0!==s?s:null,createdby:null!==(o=e.params.userid)&&void 0!==o?o:null},success:n=>{var a;"function"==typeof e.callback&&e.callback(null!==(a=n.data)&&void 0!==a?a:null)},error:n=>{"function"==typeof e.callback&&e.callback(),console.error(n)},loading:e.loading,loadingController:e.loadingController})}},5435:(T,_,t)=>{t.r(_),t.d(_,{MediaEmbedPageModule:()=>$});var d=t(177),f=t(9417),g=t(6637),y=t(3658),E=t(467),e=t(2241),l=t(5972),s=t(5781),o=t(6539),n=t(5414),a=t(4438),p=t(2706);function P(i,u){if(1&i){const m=a.RV6();a.j41(0,"iframe",13),a.nI1(1,"safe"),a.bIt("load",function(c){a.eBV(m);const v=a.XpG();return a.Njj(v.loadIframe(c))}),a.k0s()}if(2&i){const m=a.XpG();a.Y8G("src",a.i5U(1,1,m.iframeSrc,"resourceUrl"),a.f$h)}}const M=[{path:"",component:(()=>{var i;class u{constructor(r,c,v){this.activatedRoute=r,this.toastController=c,this.loadingController=v,this.appsettings={},this.readfileuploadurl="",this.iframeSrc=""}ngOnInit(){var r=this;(0,E.A)(function*(){var c,v;if(r.appsettings=yield(0,l.AC)(),!r.appsettings.madonvi)return;r.user=yield(0,o.sx)(),r.readfileuploadurl=null!==(c=r.appsettings.readfileuploadurl)&&void 0!==c?c:"";let h=null!==(v=r.activatedRoute.snapshot.params.id)&&void 0!==v?v:"";h&&(r.media_id=parseInt(h)),r.refreshData()})()}ngAfterViewInit(){}ngOnDestroy(){var r;null===(r=this.iframe)||void 0===r||r.removeAttribute("src")}refreshData(){var r=this;return(0,E.A)(function*(){var c;(0,s.e6)({loadingController:r.loadingController,params:{userid:null===(c=r.user)||void 0===c?void 0:c.userid,media_id:r.media_id},callback:v=>{var h,O,I,w,x,R,U,D;r.media=v||{},r.media.media_id?r.iframeSrc=(0,e._)({readfileuploadurl:r.appsettings.readfileuploadurl,type:null===(h=r.media)||void 0===h?void 0:h.v_mediatype,oss:null===(O=r.media)||void 0===O?void 0:O.v_osstype,path:null!==(I=null===(w=r.media)||void 0===w?void 0:w.filepath_extract)&&void 0!==I?I:null===(x=r.media)||void 0===x?void 0:x.filepath,url:null!==(R=null===(U=r.media)||void 0===U?void 0:U.link_file)&&void 0!==R?R:null===(D=r.media)||void 0===D?void 0:D.link_share}):(0,n.c)(r.toastController,{color:"danger",message:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u!"}).then(k=>k.present())}})})()}loadIframe(r){this.iframe=r.target}}return(i=u).\u0275fac=function(r){return new(r||i)(a.rXU(y.nX),a.rXU(g.K_),a.rXU(g.Xi))},i.\u0275cmp=a.VBU({type:i,selectors:[["app-media-embed"]],decls:14,vars:2,consts:[["scroll-x","false","scroll-y","false",3,"fullscreen"],[1,"container-grid","grid-column"],[1,"container-head","container-top"],[1,"container-body","grid-grow"],[1,"container-grid","grid-row"],[1,"container-left"],[1,"container-center"],[1,"grid-grow"],[1,"main-container","overflow-auto"],["scroll-x","false","scroll-y","false"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",3,"src","load",4,"ngIf"],[1,"container-bottom"],[1,"container-right"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",3,"load","src"]],template:function(r,c){1&r&&(a.j41(0,"ion-content",0)(1,"div",1),a.nrm(2,"div",2),a.j41(3,"div",3)(4,"div",4),a.nrm(5,"div",5),a.j41(6,"div",6)(7,"div",1)(8,"div",7)(9,"div",8)(10,"ion-content",9),a.DNE(11,P,2,4,"iframe",10),a.k0s()()(),a.nrm(12,"div",11),a.k0s()(),a.nrm(13,"div",12),a.k0s()()()()),2&r&&(a.Y8G("fullscreen",!0),a.R7$(11),a.Y8G("ngIf",c.iframeSrc))},dependencies:[d.bT,g.W9,p.m],styles:[".container-grid[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.container-grid.grid-row[_ngcontent-%COMP%]{flex-flow:row}.container-grid.grid-column[_ngcontent-%COMP%]{flex-flow:column}.container-grid[_ngcontent-%COMP%]   .grid-grow[_ngcontent-%COMP%]{flex-grow:1}.container-head[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:0 2px 2px #0000001a}.container-body[_ngcontent-%COMP%]{position:relative;z-index:1}.container-body[_ngcontent-%COMP%]   .container-left[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-right[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:-2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]{position:relative;z-index:1;flex:auto;width:calc(100% - 480px)}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .container-bottom[_ngcontent-%COMP%]{position:relative;z-index:2}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;z-index:1;-webkit-user-select:none;user-select:none;background-color:#fafafa}.group-action-paging[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:1rem;line-height:0;-webkit-user-select:none;user-select:none}.group-action-paging[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:0 1rem;vertical-align:middle;font-size:18px;color:#fab11d}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{vertical-align:middle}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:34px;width:34px}iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}"]}),u})()}];let b=(()=>{var i;class u{}return(i=u).\u0275fac=function(r){return new(r||i)},i.\u0275mod=a.$C({type:i}),i.\u0275inj=a.G2t({imports:[y.iI.forChild(M),y.iI]}),u})();var C=t(3890);let $=(()=>{var i;class u{}return(i=u).\u0275fac=function(r){return new(r||i)},i.\u0275mod=a.$C({type:i}),i.\u0275inj=a.G2t({imports:[d.MD,f.YN,g.bv,b,C.x]}),u})()},6539:(T,_,t)=>{t.d(_,{JD:()=>e,lJ:()=>l,sx:()=>E});var d=t(467),f=t(2635),g=t(8833),y=t(5972);const E=function(){var o=(0,d.A)(function*(){return yield(0,f.Nk)()});return function(){return o.apply(this,arguments)}}(),e=function(){var o=(0,d.A)(function*(n){let a=null!=n?n:yield(0,y.AC)(),p=yield(0,f.Nk)();return(!a.madonvi||!p.userid||a.madonvi!=(null==p?void 0:p.madonvi))&&window.location.replace(g._.LANDING_PAGE+`?require=signin&returnurl=${encodeURIComponent(window.location.href)}`),p});return function(a){return o.apply(this,arguments)}}(),l=function(){var o=(0,d.A)(function*(){return!!(yield(0,f.Nk)()).userid});return function(){return o.apply(this,arguments)}}()}}]);