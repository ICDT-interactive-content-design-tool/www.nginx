"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6611],{8779:(de,Kt,v)=>{v.d(Kt,{$u:()=>_,IB:()=>rt,T2:()=>h,WR:()=>C,bf:()=>R,eD:()=>lt,l6:()=>S,lq:()=>j,pZ:()=>T,u$:()=>y});const T={fill:"transparent",stroke:"#129bff",strokeWidth:1},y={stroke:"#0D99FF",strokeWidth:1,strokeLinecap:"square",strokeDasharrays:[2,5]},lt={fill:"#FFFFFF",stroke:"#0D99FF",strokeWidth:1,width:7,height:7},R={fill:"transparent",stroke:"transparent",strokeWidth:1},rt={fill:"none",stroke:"#2299F8",strokeWidth:1},S={fill:"#0D99FF",rx:4},h={fill:"#fff",alignmentBaseline:"central",textAnchor:"middle",fontSize:14},C={stroke:"#129bff",strokeWidth:1,strokeLinecap:"square",strokeDasharray:8},j={fill:"transparent"},_={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(de,Kt,v)=>{v.d(Kt,{$N:()=>S,An:()=>h,CS:()=>y,Kf:()=>nt,Lp:()=>j,j9:()=>C,lP:()=>R,ml:()=>K,n9:()=>_,nf:()=>rt});var T=v(2492);const y=f=>{var J;return null===(J=f.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===J?void 0:J.map(I=>{let q={type:I.substring(0,1)},at=(F=I.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?F.split(/\s/).map(Q=>(0,T.z)(parseFloat(Q),1e6)):[];var F;return at.length&&(q.points=at),q})},R=f=>{let J=[],I=[],q=[],at=[];return f.forEach(F=>{switch(["M","L","C","S","Q","T"].includes(F.type)&&F.points&&F.points.forEach((vt,xt)=>{xt%2==0?J.push(vt):I.push(vt)}),F.type){case"A":var Q;7==(null===(Q=F.points)||void 0===Q?void 0:Q.length)&&(q.push(F.points[5]),at.push(F.points[6]));break;case"H":var st;null!==(st=F.points)&&void 0!==st&&st.length&&(J.push(F.points[0]),q.push(F.points[0]));break;case"V":var U;null!==(U=F.points)&&void 0!==U&&U.length&&(I.push(F.points[0]),at.push(F.points[0]));break;case"a":var E;if(7==(null===(E=F.points)||void 0===E?void 0:E.length)){let vt=J[J.length-1];J.push(vt+F.points[5]),q.push(vt+F.points[5]);let xt=I[I.length-1];I.push(xt+F.points[6]),at.push(xt+F.points[6])}break;case"h":var mt;if(null!==(mt=F.points)&&void 0!==mt&&mt.length){let vt=J[J.length-1];J.push(vt+F.points[0]),q.push(vt+F.points[0])}break;case"v":var jt;if(null!==(jt=F.points)&&void 0!==jt&&jt.length){let vt=I[I.length-1];I.push(vt+F.points[0]),at.push(vt+F.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var Lt;null===(Lt=F.points)||void 0===Lt||Lt.forEach((vt,xt)=>{xt%2==0?q.push(vt):at.push(vt)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Pt;null===(Pt=F.points)||void 0===Pt||Pt.forEach((vt,xt)=>{if(xt%2==0){let ce=J[J.length-1];J.push(ce+vt),q.push(ce+vt)}else{let ce=I[I.length-1];I.push(ce+vt),at.push(ce+vt)}})}}),{minX:Math.min.apply(null,q),minY:Math.min.apply(null,at),maxX:Math.max.apply(null,q),maxY:Math.max.apply(null,at)}},rt=(f,J)=>J.map(I=>{let q=[];switch(I.type){case"a":var at;7==(null===(at=I.points)||void 0===at?void 0:at.length)&&q.push([(0,T.z)(I.points[0]/f.width,1e6),(0,T.z)(I.points[1]/f.height,1e6),I.points[2],I.points[3],I.points[4],(0,T.z)(I.points[5]/f.width,1e6),(0,T.z)(I.points[6]/f.height,1e6)]);break;case"A":var F;7==(null===(F=I.points)||void 0===F?void 0:F.length)&&q.push([(0,T.z)(I.points[0]/f.width,1e6),(0,T.z)(I.points[1]/f.height,1e6),I.points[2],I.points[3],I.points[4],(0,T.z)((I.points[5]-f.x)/f.width,1e6),(0,T.z)((I.points[6]-f.y)/f.height,1e6)]);break;case"h":var Q;null!==(Q=I.points)&&void 0!==Q&&Q.length&&q.push([(0,T.z)(I.points[0]/f.width,1e6)]);break;case"H":var st;null!==(st=I.points)&&void 0!==st&&st.length&&q.push([(0,T.z)((I.points[0]-f.x)/f.width,1e6)]);break;case"v":var U;null!==(U=I.points)&&void 0!==U&&U.length&&q.push([(0,T.z)(I.points[0]/f.height,1e6)]);break;case"V":var E;null!==(E=I.points)&&void 0!==E&&E.length&&q.push([(0,T.z)((I.points[0]-f.y)/f.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var mt;if(null!==(mt=I.points)&&void 0!==mt&&mt.length)for(let Lt=0,Pt=I.points.length-1;Lt<Pt;Lt+=2)q.push([(0,T.z)((I.points[Lt]-f.x)/f.width,1e6),(0,T.z)((I.points[Lt+1]-f.y)/f.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var jt;if(null!==(jt=I.points)&&void 0!==jt&&jt.length)for(let Lt=0,Pt=I.points.length-1;Lt<Pt;Lt+=2)q.push([(0,T.z)(I.points[Lt]/f.width,1e6),(0,T.z)(I.points[Lt+1]/f.height,1e6)])}return q.length?{type:I.type,ratios:q}:{type:I.type}}),S=(f,J)=>J.map(I=>{switch(I.type){case"a":var q,at;return`${I.type}${null!==(q=null===(at=I.ratios)||void 0===at||null===(at=at.map(wt=>{var gt,z,Gt,D,P,s,b;return[(0,T.z)(f.width*(null!==(gt=wt[0])&&void 0!==gt?gt:0),1e6),(0,T.z)(f.height*(null!==(z=wt[1])&&void 0!==z?z:0),1e6),null!==(Gt=wt[2])&&void 0!==Gt?Gt:0,null!==(D=wt[3])&&void 0!==D?D:0,null!==(P=wt[4])&&void 0!==P?P:0,(0,T.z)(f.width*(null!==(s=wt[5])&&void 0!==s?s:0),1e6),(0,T.z)(f.height*(null!==(b=wt[6])&&void 0!==b?b:0),1e6)]}))||void 0===at||null===(at=at.map(wt=>wt.join(" ")))||void 0===at?void 0:at.join(" "))&&void 0!==q?q:""}`;case"A":var F,Q;return`${I.type}${null!==(F=null===(Q=I.ratios)||void 0===Q||null===(Q=Q.map(wt=>{var gt,z,Gt,D,P,s,b;return[(0,T.z)(f.width*(null!==(gt=wt[0])&&void 0!==gt?gt:0),1e6),(0,T.z)(f.height*(null!==(z=wt[1])&&void 0!==z?z:0),1e6),null!==(Gt=wt[2])&&void 0!==Gt?Gt:0,null!==(D=wt[3])&&void 0!==D?D:0,null!==(P=wt[4])&&void 0!==P?P:0,(0,T.z)(f.x+f.width*(null!==(s=wt[5])&&void 0!==s?s:0),1e6),(0,T.z)(f.y+f.height*(null!==(b=wt[6])&&void 0!==b?b:0),1e6)]}))||void 0===Q||null===(Q=Q.map(wt=>wt.join(" ")))||void 0===Q?void 0:Q.join(" "))&&void 0!==F?F:""}`;case"h":var st,U;return`${I.type}${null!==(st=null===(U=I.ratios)||void 0===U||null===(U=U.map(wt=>{var gt;return(0,T.z)(f.width*(null!==(gt=wt[0])&&void 0!==gt?gt:0),1e6)}))||void 0===U?void 0:U.join(" "))&&void 0!==st?st:""}`;case"H":var E,mt;return`${I.type}${null!==(E=null===(mt=I.ratios)||void 0===mt||null===(mt=mt.map(wt=>{var gt;return(0,T.z)(f.x+f.width*(null!==(gt=wt[0])&&void 0!==gt?gt:0),1e6)}))||void 0===mt?void 0:mt.join(" "))&&void 0!==E?E:""}`;case"v":var jt,Lt;return`${I.type}${null!==(jt=null===(Lt=I.ratios)||void 0===Lt||null===(Lt=Lt.map(wt=>{var gt;return(0,T.z)(f.height*(null!==(gt=wt[0])&&void 0!==gt?gt:0),1e6)}))||void 0===Lt?void 0:Lt.join(" "))&&void 0!==jt?jt:""}`;case"V":var Pt,vt;return`${I.type}${null!==(Pt=null===(vt=I.ratios)||void 0===vt||null===(vt=vt.map(wt=>{var gt;return(0,T.z)(f.y+f.height*(null!==(gt=wt[0])&&void 0!==gt?gt:0),1e6)}))||void 0===vt?void 0:vt.join(" "))&&void 0!==Pt?Pt:""}`;case"z":case"Z":return I.type;case"M":case"L":case"C":case"S":case"Q":case"T":var xt,ce;return`${I.type}${null!==(xt=null===(ce=I.ratios)||void 0===ce||null===(ce=ce.map(wt=>{var gt,z;return[(0,T.z)(f.x+f.width*(null!==(gt=wt[0])&&void 0!==gt?gt:0),1e6),(0,T.z)(f.y+f.height*(null!==(z=wt[1])&&void 0!==z?z:0),1e6)]}))||void 0===ce||null===(ce=ce.map(wt=>wt.join(" ")))||void 0===ce?void 0:ce.join(" "))&&void 0!==xt?xt:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var et,It;return`${I.type}${null!==(et=null===(It=I.ratios)||void 0===It||null===(It=It.map(wt=>{var gt,z;return[(0,T.z)(f.width*(null!==(gt=wt[0])&&void 0!==gt?gt:0),1e6),(0,T.z)(f.height*(null!==(z=wt[1])&&void 0!==z?z:0),1e6)]}))||void 0===It||null===(It=It.map(wt=>wt.join(" ")))||void 0===It?void 0:It.join(" "))&&void 0!==et?et:""}`;default:return""}}).join(""),h=f=>{return(J=f.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?J.split(/\s/).map(I=>parseFloat(I)):[];var J},C=f=>{let J=[],I=[];return f.forEach((q,at)=>{at%2==0?J.push(q):I.push(q)}),{minX:Math.min.apply(null,J),minY:Math.min.apply(null,I),maxX:Math.max.apply(null,J),maxY:Math.max.apply(null,I)}},j=(f,J)=>{let I=[];for(let q=0,at=J.length-1;q<at;q+=2)I.push([(J[q]-f.x)/f.width,(J[q+1]-f.y)/f.height]);return I},_=(f,J)=>J.map(I=>[(0,T.z)(f.x+f.width*I[0],1e6),(0,T.z)(f.y+f.height*I[1],1e6)]).map(I=>I.join(" ")).join(" "),K=(f,J)=>{let I=x(J);if(I){let q=new window.Snap.Matrix(I.a,I.b,I.c,I.d,I.e,I.f);if(q){let{dx:at,dy:F,rotate:Q,scalex:st,scaley:U}=q.split();return{x:f.x+at,y:f.y+F,dx:at,dy:F,rotate:Q,scalex:st,scaley:U}}return{x:it(f.x,f.y,I),y:yt(f.x,f.y,I)}}return f},x=f=>{let J=f.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(I=>(0,T.z)(parseFloat(I),1e6));if(6==J.length)return{a:J[0],b:J[1],c:J[2],d:J[3],e:J[4],f:J[5]}},nt=(f,J)=>{let I=x(J);return I?window.Snap.path.map(f,new window.Snap.Matrix(I.a,I.b,I.c,I.d,I.e,I.f)).toString():f},it=function(f,J,I){return(0,T.z)(f*I.a+J*I.c+I.e,10)},yt=function(f,J,I){return(0,T.z)(f*I.b+J*I.d+I.f,10)}},8047:(de,Kt,v)=>{v.d(Kt,{d:()=>y});var T=v(14);const y=lt=>{let R=[];return[/font-family\s*:\s*([^;]+);/g,/"fontFamily":"([a-zA-Z0-9\-\_\'\s]+)"/g].forEach(rt=>{var S,h;R=[...R,...null!==(S=null===(h=lt.replace(/&quot;/g,"'").match(rt))||void 0===h?void 0:h.filter((C,j,_)=>_.indexOf(C)==j).map(C=>C.replace(rt,"$1").replace(/[^a-zA-Z0-9\-\_\s\,]/g,"").trim()).filter((C,j,_)=>C&&_.indexOf(C)==j))&&void 0!==S?S:[]]}),R.filter((rt,S,h)=>h.indexOf(rt)==S).map(rt=>(0,T.n)(rt).fontFamily).filter(rt=>!!rt).filter((rt,S,h)=>h.indexOf(rt)==S)}},14:(de,Kt,v)=>{v.d(Kt,{n:()=>T});const T=y=>{var lt,R,rt={};let S=/Italic$/,h=/Thin$/,C=/ExtraLight|UltraLight$/i,j=/Light$/,_=/Regular|Normal$/,K=/Medium$/,x=/SemiBold|DemiBold$/i,nt=/Bold$/,it=/ExtraBold|UltraBold$/i,yt=/Black|Heavy$/;return(y=null!==(lt=null===(R=y.split(","))||void 0===R||null===(R=R.shift())||void 0===R?void 0:R.trim().replace(/[^a-zA-Z_-\s]/g,""))&&void 0!==lt?lt:"").match(S)&&(rt.fontStyle="italic",y=y.replace(S,"").trim()),y.match(h)?(rt.fontWeight=100,y=y.replace(h,"").trim()):y.match(C)?(rt.fontWeight=200,y=y.replace(C,"").trim()):y.match(j)?(rt.fontWeight=300,y=y.replace(j,"").trim()):y.match(_)?(rt.fontWeight=400,y=y.replace(_,"").trim()):y.match(K)?(rt.fontWeight=500,y=y.replace(K,"").trim()):y.match(x)?(rt.fontWeight=600,y=y.replace(x,"").trim()):y.match(nt)?(rt.fontWeight=700,y=y.replace(nt,"").trim()):y.match(it)?(rt.fontWeight=800,y=y.replace(it,"").trim()):y.match(yt)&&(rt.fontWeight=900,y=y.replace(yt,"").trim()),rt.fontFamily=y.replace(/[\-\_\s]+$/,""),rt}},2837:(de,Kt,v)=>{v.d(Kt,{v:()=>yt,U:()=>nt});var T=v(6611),y=v(1999),lt=v(2492),R=/^#[a-fA-F0-9]+$/i,rt=/^rgb\((\d+),(\d+),(\d+)\)$/i,S=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const h=f=>{let J=null,I=null;if(f)if("transparent"==f)J="#000000",I=0;else if(f.match(R))J=f;else{let q=(f=f.replace(/\s+/g,"")).match(S);if(q)J="#"+(256|q[1]).toString(16).slice(1)+(256|q[2]).toString(16).slice(1)+(256|q[3]).toString(16).slice(1),I=(0,lt.z)(parseFloat(q[4]),100);else{let at=f.match(rt);at&&(J="#"+(256|at[1]).toString(16).slice(1)+(256|at[2]).toString(16).slice(1)+(256|at[3]).toString(16).slice(1))}}return{hex:J,alpha:I}};var C=v(4896),j=v(8338);const nt=f=>it(null==f?void 0:f.url,null==f?void 0:f.path,null==f?void 0:f.src,null==f?void 0:f.name);var it=(f,J,I,q)=>{var at,F;let Q,st,U,E;var mt,jt;return f&&(Q=f.replace(/\\/g,"/")),J&&(st=J.replace(/\\/g,"/")),I&&(U=I.replace(/\\/g,"/")),st&&!Q&&(Q=(null===(mt=T.L.config)||void 0===mt?void 0:mt.readfileuploadurl)+st),!U||st||Q||(st=U.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),Q=(null===(jt=T.L.config)||void 0===jt?void 0:jt.readfileuploadurl)+st),E=q||(null!==(at=Q)&&void 0!==at?at:"").split("/").pop()||(null!==(F=st)&&void 0!==F?F:"").split("/").pop()||"",{url:Q,path:st,name:E}};const yt=f=>{let J={x:0,y:0,width:f.screen.w,height:f.screen.h},I=[];return f.data.forEach((q,at)=>{var F,Q;let st={id:"number"==typeof q.id?q.id:T.L.data.newSlideId,code:null===(F=q.id)||void 0===F?void 0:F.toString(),name:"string"==typeof q.id?q.id:`Trang ${at+1}`,svg:{viewBox:J,nodes:[]},test:(U=q.test2,U?(U.audiotrue&&(U.audiotrue=nt({path:U.audiotrue.path})),U.audiofalse&&(U.audiofalse=nt({path:U.audiofalse.path})),U.effecttrue&&(U.effecttrue=nt({path:U.effecttrue.path})),U.effectfalse&&(U.effectfalse=nt({path:U.effectfalse.path})),U.icontrue&&(U.icontrue=nt({path:U.icontrue.path})),U.iconfalse&&(U.iconfalse=nt({path:U.iconfalse.path})),U):{})};var U;q.background&&st.svg&&(st.svg.background=function(f){return f&&(null!==f.match(/#([a-zA-Z0-9]+)/)||null!==f.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==f.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(q.background)?{color:q.background}:function(f){return f&&null!==f.match(/data:[^;]+;base64,/)}(q.background)?{base64:q.background}:function(f){return f&&null!==f.match(/http(s)?:\/\//)}(q.background)?it(q.background):it(void 0,q.background)),jQuery(null!==(Q=q.svg)&&void 0!==Q?Q:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((U,E)=>{var mt,jt;let Lt=jQuery(E).parents(".indexs"),Pt=(et=Lt.attr("data-index"))?parseInt(et):0,vt=(et=>Pt&&et?parseInt(et):0)(Lt.attr("data-time")),xt=null!==(mt=E.getAttribute("id"))&&void 0!==mt?mt:(1e9*Math.random()).toFixed(),ce={id:parseInt(xt),code:`${E.nodeName}-${xt}`,name:E.nodeName,idx:Pt,time:vt,type:(()=>{switch(E.nodeName){case"polygon":return y.h.POLYGON;case"path":return y.h.PATH;case"circle":return y.h.CIRCLE;case"ellipse":return y.h.ELLIPSE;case"line":return y.h.LINE;case"rect":return y.h.RECT;case"foreignObject":return y.h.FOREIGNOBJECT}return 0})(),size:(et=>{let It={},wt=0,gt=0,z=0,Gt=0,D=null,P=null,s=parseFloat((null===(et=E.getAttribute("transform"))||void 0===et?void 0:et.replace("rotate(","").replace(")",""))||"0")||null;switch(E.nodeName){case"polygon":{var b,H;let tt=[],zt=[],Zt=999999999,Yt=999999999,Qt=0,Nt=0;D=JSON.parse(E.getAttribute("ratios")||"[]"),P=null!==(b=null===(H=E.getAttribute("points"))||void 0===H?void 0:H.split(",").map(function(ct){return ct.split(" ").map(function(Xt){return parseFloat(Xt)})}))&&void 0!==b?b:[],P.forEach(function(ct){tt.push(ct[0]),zt.push(ct[1])}),Zt=Math.min.apply(null,tt),Yt=Math.min.apply(null,zt),Qt=Math.max.apply(null,tt),Nt=Math.max.apply(null,zt),wt=Zt,gt=Yt,z=Qt-wt,Gt=Nt-gt;break}case"path":{let tt=E.getAttribute("d");if(tt){let zt=(0,C.CS)(tt),{minX:Zt,minY:Yt,maxX:Qt,maxY:Nt}=(0,C.lP)(zt);wt=Zt,gt=Yt,z=Qt-wt||1,Gt=Nt-gt||1,Object.assign(It,{ratioMaps:(0,C.nf)({x:wt,y:gt,width:z,height:Gt},zt)})}break}case"circle":{let tt=parseFloat(E.getAttribute("cx")||"0"),zt=parseFloat(E.getAttribute("cy")||"0"),Zt=parseFloat(E.getAttribute("r")||"0");wt=tt-Zt,gt=zt-Zt,z=2*Zt,Gt=2*Zt;break}case"ellipse":{let tt=parseFloat(E.getAttribute("cx")||"0"),zt=parseFloat(E.getAttribute("cy")||"0"),Zt=parseFloat(E.getAttribute("rx")||"0"),Yt=parseFloat(E.getAttribute("ry")||"0");wt=tt-Zt,gt=zt-Yt,z=2*Zt,Gt=2*Yt;break}case"line":{let tt=parseFloat(E.getAttribute("x1")||"0"),zt=parseFloat(E.getAttribute("y1")||"0"),Zt=parseFloat(E.getAttribute("x2")||"0"),Yt=parseFloat(E.getAttribute("y2")||"0"),Qt=999999999,Nt=999999999,ct=0,Xt=0;Qt=Math.min(tt,Zt),Nt=Math.min(zt,Yt),ct=Math.max(tt,Zt),Xt=Math.max(zt,Yt),wt=Qt,gt=Nt,z=ct-wt,Gt=Xt-gt,D=[[(tt-wt)/(z||1),(zt-gt)/(Gt||1)],[(Zt-wt)/(z||1),(Yt-gt)/(Gt||1)]];break}case"rect":case"foreignObject":wt=parseFloat(E.getAttribute("x")||"0"),gt=parseFloat(E.getAttribute("y")||"0"),z=parseFloat(E.getAttribute("width")||"0"),Gt=parseFloat(E.getAttribute("height")||"0")}return Object.assign(It,{x:wt,y:gt,width:z,height:Gt,ratios:D,points:P,rotate:s})})(),attribute:(()=>{let et={};switch(E.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var It,wt,gt,z,Gt,D,P,s;let ct=null!==(It=E.getAttribute("fill"))&&void 0!==It?It:null,Xt=null!==(wt=E.getAttribute("stroke"))&&void 0!==wt?wt:null,M=null!==(gt=parseFloat(null!==(z=E.getAttribute("stroke-opacity"))&&void 0!==z?z:"1"))&&void 0!==gt?gt:null,d=null!==(Gt=parseFloat(E.getAttribute("stroke-width")||"0"))&&void 0!==Gt?Gt:null,B=null!==(D=E.getAttribute("stroke-linecap"))&&void 0!==D?D:null,ot=null!==(P=E.getAttribute("stroke-linejoin"))&&void 0!==P?P:null,dt=null!==(s=parseFloat(E.getAttribute("stroke-dasharray")||"0"))&&void 0!==s?s:null;Object.assign(et,{fill:ct,stroke:Xt,strokeOpacity:M,strokeWidth:d,strokeLinecap:B,strokeLinejoin:ot,strokeDasharray:dt});break}case"path":{let ct=Lt.get(0);if(ct){var b,H,tt,zt,Zt,Yt,Qt,Nt;let Xt=null!==(b=ct.getAttribute("fill"))&&void 0!==b?b:null,M=null!==(H=ct.getAttribute("stroke"))&&void 0!==H?H:null,d=null!==(tt=parseFloat(null!==(zt=ct.getAttribute("stroke-opacity"))&&void 0!==zt?zt:"1"))&&void 0!==tt?tt:null,B=null!==(Zt=parseFloat(ct.getAttribute("stroke-width")||"0"))&&void 0!==Zt?Zt:null,ot=null!==(Yt=ct.getAttribute("stroke-linecap"))&&void 0!==Yt?Yt:null,dt=null!==(Qt=ct.getAttribute("stroke-linejoin"))&&void 0!==Qt?Qt:null,X=null!==(Nt=parseFloat(ct.getAttribute("stroke-dasharray")||"0"))&&void 0!==Nt?Nt:null;Object.assign(et,{fill:Xt,stroke:M,strokeOpacity:d,strokeWidth:B,strokeLinecap:ot,strokeLinejoin:dt,strokeDasharray:X})}break}}return et})(),style:(()=>{let et={};switch(E.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let gt=jQuery(E).find(".svg-container");if(gt.length){let Gt=parseFloat(gt.css("border-width")||"0")||null,D=gt.css("border-style")||null,P=gt.css("border-color")||null,s=null,b=gt.css("background-color")||null,H=null;(()=>{let{hex:tt,alpha:zt}=h(P);P=tt,s=zt})(),(()=>{let{hex:tt,alpha:zt}=h(b);b=tt,H=zt})(),Object.assign(et,{borderWidth:Gt,borderStyle:D,borderColor:P,borderOpacity:s,backgroundColor:b,backgroundOpacity:H})}let z=jQuery(E).find(".svg-editor-content");if(z.length){var It,wt;let Gt=JSON.parse((z.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:D,alpha:P}=h(Gt.TextColor);Object.assign(et,{fontFamily:null!==(It=Gt.FontFamily)&&void 0!==It?It:null,fontSize:null!==(wt=Gt.FontSize)&&void 0!==wt?wt:null,color:D,opacity:P})}break}}return et})(),source:(()=>{let et={};switch(E.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Lt.hasClass("editors")){var It;let Nt="div,h1,h2,h3,h4,h5,h6,p,span,strong,b,i",ct=d=>{null==d||d.forEach(B=>{let ot=B.querySelectorAll(`:scope > ${Nt}`);ot.length&&ct(ot),!B.querySelectorAll(":scope > *").length&&""==B.textContent&&B.remove()})},Xt=d=>{let B=null==d?void 0:d.querySelectorAll(":scope > div,h1,h2,h3,h4,h5,h6,p,strong,span");if(null!=B&&B.length){var ot;let dt=B[B.length-1];if(""==(null===(ot=dt.textContent)||void 0===ot?void 0:ot.trim())){let X=dt.querySelectorAll(":scope > *");if(X.length){let O=X[X.length-1];["br","BR"].includes(null==O?void 0:O.nodeName)&&(O.remove(),Xt(d))}else dt.remove(),Xt(d)}}};ct(null===(It=jQuery(E).find(".svg-editor-content").get(0))||void 0===It?void 0:It.querySelectorAll(`:scope > ${Nt}`)),Xt(jQuery(E).find(".svg-editor-content").get(0));let M=jQuery(E).find(".svg-editor-content");if(M.length){var wt;let d=M.html(),B=null!==(wt=(null!=d?d:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==wt?wt:[];Object.assign(et,{type:"html",html:{htmlContent:d,variableKeywords:B}})}}else if(Lt.hasClass("inputs")||Lt.hasClass("textareas"))Object.assign(et,{type:"input",input:{input:!!jQuery(E).find("input").length,textarea:!!jQuery(E).find("textarea").length}});else if(Lt.hasClass("tests")){let Nt=jQuery(E).find(".svg-test");if(Lt.hasClass("tests-truefalse")){var gt,z;let ct=Nt.find(".svg-editor-content").html(),Xt=null!==(gt=(null!=ct?ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==gt?gt:[];Object.assign(et,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(z=q.test2.truefalse)||void 0===z?void 0:z.includes(xt)}},html:{htmlContent:ct,variableKeywords:Xt}})}else if(Lt.hasClass("tests-singlechoice")){var Gt,D;let ct=Nt.find(".svg-editor-content").html(),Xt=null!==(Gt=(null!=ct?ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Gt?Gt:[];Object.assign(et,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(D=q.test2.singlechoice)||void 0===D?void 0:D.includes(xt)}},html:{htmlContent:ct,variableKeywords:Xt}})}else if(Lt.hasClass("tests-multichoice")){var P,s;let ct=Nt.find(".svg-editor-content").html(),Xt=null!==(P=(null!=ct?ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==P?P:[];Object.assign(et,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(s=q.test2.multichoice)||void 0===s?void 0:s.includes(xt)}},html:{htmlContent:ct,variableKeywords:Xt}})}else if(Lt.hasClass("tests-fill")){var b,H;let ct=Nt.find(".svg-editor-content").html(),Xt=null!==(b=(null!=ct?ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==b?b:[],M=null!==(H=(null!=ct?ct:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==H?H:[];M=M.filter((d,B,ot)=>ot.indexOf(d)==B),Object.assign(et,{type:"test",test:{type:"fill",fill:M.map(d=>{var B;return{key:d,value:null===(B=q.test2.fill)||void 0===B||null===(B=B.find(ot=>ot.id==xt))||void 0===B||null===(B=B.vals)||void 0===B?void 0:B.map(ot=>ot.text).filter(ot=>!["",null,void 0,NaN].includes(ot))}})},html:{htmlContent:ct,variableKeywords:Xt,fillKeywords:M}})}else if(Lt.hasClass("tests-matching")){if(Nt.hasClass("svg-test-empty"))Object.assign(et,{type:"test",test:{type:"matching-empty",matching:{key:Nt.attr("data-name")||null}}});else if(Nt.hasClass("svg-test-content")){var tt;let ct=Nt.find(".svg-editor-content").html(),Xt=null!==(tt=(null!=ct?ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==tt?tt:[];Object.assign(et,{type:"test",test:{type:"matching-content",matching:{key:Nt.attr("data-name")||null}},html:{htmlContent:ct,variableKeywords:Xt}})}}else if(Lt.hasClass("tests-speech")){var zt;Object.assign(et,{type:"speech",speech:{value:null===(zt=q.test2.speech)||void 0===zt||null===(zt=zt.find(ct=>ct.id==xt))||void 0===zt||null===(zt=zt.vals)||void 0===zt?void 0:zt.map(ct=>ct.text).filter(ct=>!["",null,void 0,NaN].includes(ct))}})}else if(Lt.hasClass("tests-submit")){let ct=jQuery(E).find(".svg-container img");Object.assign(et,{type:"test",test:{type:"submit"},image:it(ct.attr("url"),ct.attr("path"),ct.attr("src"))})}}else if(Lt.hasClass("images")){let Nt=jQuery(E).find(".svg-editor-content img");if(Nt.length)Object.assign(et,{type:"image",image:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});else{let ct=jQuery(E).find("iframe");Object.assign(et,{type:"iframe",iframe:it(ct.attr("url"),ct.attr("path"),ct.attr("src"))})}}else if(Lt.hasClass("sounds")){let Nt=jQuery(E).find(".svg-editor-content img");Nt.length&&Object.assign(et,{type:"image",image:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))})}else if(Lt.hasClass("htmls")){let Nt=jQuery(E).find("iframe");Nt.length&&Object.assign(et,{type:"iframe",iframe:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))})}else if(Lt.hasClass("svgs")){let Nt=jQuery(E).find("svg");var Zt,Yt;Nt.length&&Object.assign(et,{type:"svg",svg:Object.assign(it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src")),{svgContent:null!==(Zt=null===(Yt=Nt.get(0))||void 0===Yt?void 0:Yt.outerHTML)&&void 0!==Zt?Zt:null})})}else if(Lt.hasClass("medias")){let Nt=jQuery(E).find(".media-item");if(Nt.length)switch(Nt.attr("type")){case"audio":Object.assign(et,{type:"audio",audio:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});break;case"video":Object.assign(et,{type:"video",video:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});break;case"file":Object.assign(et,{type:"file",file:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});break;default:var Qt;Object.assign(et,{type:"link",link:{url:null!==(Qt=Nt.attr("url"))&&void 0!==Qt?Qt:null}})}let ct=jQuery(E).find("img");ct.length&&(Object.assign(et,{image:it(ct.attr("url"),ct.attr("path"),ct.attr("src"))}),et.type||Object.assign(et,{type:"image"}))}}return et})(),animate:(et=>{let It={},wt=null===(et=q.animates)||void 0===et?void 0:et.find(gt=>gt.elementId==xt);return wt&&Object.assign(It,{value:wt.value}),It})(),interactive:(()=>{let et={},It=q.actions.show.filter(gt=>gt.elementId==xt&&gt.active);It.length&&(et.show={},It.forEach(gt=>{let{source:z}=gt;switch(null==z?void 0:z.type){case"work":var Gt,D,P,s,b;et.show.action={},Object.assign(et.show.action,{value:null!==(Gt=z.value)&&void 0!==Gt?Gt:null,iteration:null!==(D=z.iteration)&&void 0!==D?D:null,finish:null!==(P=z.end)&&void 0!==P?P:null,time:null!==(s=z.time)&&void 0!==s?s:null,points:null!==(b=z.points)&&void 0!==b?b:null});break;case"audio":var H,tt,zt;et.show.audio={},Object.assign(et.show.audio,{source:it(null,null,z.url),iteration:null!==(H=z.iteration)&&void 0!==H?H:null,finish:null!==(tt=z.end)&&void 0!==tt?tt:null,time:null!==(zt=z.time)&&void 0!==zt?zt:null,async:-1==z.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Zt,Yt,Qt,Nt,ct,Xt,M,d,B,ot,dt,X,O,Y,ut;z.options.includes("show")&&(et.show.triggershow={},Object.assign(et.show.triggershow,{id:null!==(Zt=parseInt(null!==(Yt=z.id)&&void 0!==Yt?Yt:"0"))&&void 0!==Zt?Zt:null,ids:null===(Qt=z.ids)||void 0===Qt?void 0:Qt.map(_t=>parseInt(_t)),async:null!==(Nt=z.async)&&void 0!==Nt?Nt:null,time:null!==(ct=z.time)&&void 0!==ct?ct:null})),z.options.includes("run")&&(et.show.triggerrun={},Object.assign(et.show.triggerrun,{id:null!==(Xt=parseInt(null!==(M=z.id)&&void 0!==M?M:"0"))&&void 0!==Xt?Xt:null,ids:null===(d=z.ids)||void 0===d?void 0:d.map(_t=>parseInt(_t)),async:null!==(B=z.async)&&void 0!==B?B:null,time:null!==(ot=z.time)&&void 0!==ot?ot:null})),z.options.includes("hide")&&(et.show.triggerhide={},Object.assign(et.show.triggerhide,{id:null!==(dt=parseInt(null!==(X=z.id)&&void 0!==X?X:"0"))&&void 0!==dt?dt:null,ids:null===(O=z.ids)||void 0===O?void 0:O.map(_t=>parseInt(_t)),async:null!==(Y=z.async)&&void 0!==Y?Y:null,time:null!==(ut=z.time)&&void 0!==ut?ut:null}))}}));let wt=q.actions.click.filter(gt=>gt.elementId==xt&&gt.active);return wt&&(et.click={},wt.forEach(gt=>{let{source:z}=gt;switch(null==z?void 0:z.type){case"work":var Gt,D,P,s,b;et.click.action={},Object.assign(et.click.action,{value:null!==(Gt=z.value)&&void 0!==Gt?Gt:null,iteration:null!==(D=z.iteration)&&void 0!==D?D:null,finish:null!==(P=z.end)&&void 0!==P?P:null,time:null!==(s=z.time)&&void 0!==s?s:null,points:null!==(b=z.points)&&void 0!==b?b:null});break;case"audio":var H,tt,zt;et.click.audio={},Object.assign(et.click.audio,{source:it(null,null,z.url),iteration:null!==(H=z.iteration)&&void 0!==H?H:null,finish:null!==(tt=z.end)&&void 0!==tt?tt:null,time:null!==(zt=z.time)&&void 0!==zt?zt:null,async:-1==z.iteration?"change-slide":"change-node"});break;case"video":{et.click.video={},Object.assign(et.click.video,{source:it(z.url,z.path)});let{url:Tt,path:Mt,name:Ot}=it(z.url,z.path);et.click.media={},Object.assign(et.click.media,{url:Tt,path:Mt,name:Ot,type:j.S.VIDEO});break}case"image":{et.click.image={},Object.assign(et.click.image,{source:it(z.url,z.path)});let{url:Tt,path:Mt,name:Ot}=it(z.url,z.path);et.click.media={},Object.assign(et.click.media,{url:Tt,path:Mt,name:Ot,type:j.S.IMAGE});break}case"link":{et.click.link={},Object.assign(et.click.link,{url:z.url,target:z.target});let{url:Tt,path:Mt,name:Ot}=it(z.url,z.path);et.click.media={},Object.assign(et.click.media,{url:Tt,path:Mt,name:Ot,type:j.S.LINK});break}case"text":et.click.text={},Object.assign(et.click.text,{content:z.content});break;case"node":case"node2":var Zt,Yt,Qt,Nt,ct,Xt,M,d,B,ot,dt,X,O,Y,ut;z.options.includes("show")&&(et.click.triggershow={},Object.assign(et.click.triggershow,{id:null!==(Zt=parseInt(null!==(Yt=z.id)&&void 0!==Yt?Yt:"0"))&&void 0!==Zt?Zt:null,ids:null===(Qt=z.ids)||void 0===Qt?void 0:Qt.map(Tt=>parseInt(Tt)),async:null!==(Nt=z.async)&&void 0!==Nt?Nt:null,time:null!==(ct=z.time)&&void 0!==ct?ct:null})),z.options.includes("run")&&(et.click.triggerrun={},Object.assign(et.click.triggerrun,{id:null!==(Xt=parseInt(null!==(M=z.id)&&void 0!==M?M:"0"))&&void 0!==Xt?Xt:null,ids:null===(d=z.ids)||void 0===d?void 0:d.map(Tt=>parseInt(Tt)),async:null!==(B=z.async)&&void 0!==B?B:null,time:null!==(ot=z.time)&&void 0!==ot?ot:null})),z.options.includes("hide")&&(et.click.triggerhide={},Object.assign(et.click.triggerhide,{id:null!==(dt=parseInt(null!==(X=z.id)&&void 0!==X?X:"0"))&&void 0!==dt?dt:null,ids:null===(O=z.ids)||void 0===O?void 0:O.map(Tt=>parseInt(Tt)),async:null!==(Y=z.async)&&void 0!==Y?Y:null,time:null!==(ut=z.time)&&void 0!==ut?ut:null}));break;case"slide":var _t;et.click.slide={},Object.assign(et.click.slide,{id:parseInt(null!==(_t=z.id)&&void 0!==_t?_t:"0")||z.num||null,code:z.id})}})),et})(),variable:(et=>{let It={};var wt;E.getAttribute("data-variable")&&(It.input={},Object.assign(It.input,{variable:null!==(wt=E.getAttribute("data-variable"))&&void 0!==wt?wt:null}));let gt=null===(et=q.nodes)||void 0===et||null===(et=et.find(s=>s.id==xt))||void 0===et?void 0:et.variable;var z,Gt,D,P;return gt&&(It.click={},Object.assign(It.click,{variable:null!==(z=gt.variable)&&void 0!==z?z:null,operator:null!==(Gt=gt.operator)&&void 0!==Gt?Gt:null,valuetype:null!==(D=gt.valuetype)&&void 0!==D?D:null,value:null!==(P=gt.value)&&void 0!==P?P:null})),It})()};var et;null===(jt=st.svg)||void 0===jt||jt.nodes.push(ce)}),I.push(st)}),{screen:{width:f.screen.w,height:f.screen.h},data:{slides:I},variable:f.variable,fonts:[]}}},6195:(de,Kt,v)=>{v.d(Kt,{A9:()=>j,IB:()=>_,_4:()=>C,_5:()=>rt,ar:()=>S,yW:()=>h});var T=v(467),y=v(119);y.config({driver:[y.INDEXEDDB,y.LOCALSTORAGE,y.WEBSQL],name:"_localDataDB",version:1});const R={create:(K=(0,T.A)(function*(){return y}),function(){return K.apply(this,arguments)}),get:function(){var K=(0,T.A)(function*(x){return y.getItem(x)});return function(nt){return K.apply(this,arguments)}}(),set:function(){var K=(0,T.A)(function*(x,nt){return y.setItem(x,nt)});return function(nt,it){return K.apply(this,arguments)}}()},rt=function(){var K=(0,T.A)(function*(x){yield R.create();var nt=(yield R.get("icdt-data"))||[];"function"==typeof x.callback&&x.callback(nt)});return function(nt){return K.apply(this,arguments)}}(),S=function(){var K=(0,T.A)(function*(x){yield R.create(),x.params=x.params||{};try{yield R.set("icdt-data",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(nt){"function"==typeof x.callback&&x.callback(null),console.error(nt)}});return function(nt){return K.apply(this,arguments)}}(),h=function(){var K=(0,T.A)(function*(x){yield R.create();try{var nt=(yield R.get("icdt-config"))||{};"function"==typeof x.callback&&x.callback(nt)}catch(it){"function"==typeof x.callback&&x.callback(null),console.error(it)}});return function(nt){return K.apply(this,arguments)}}(),C=function(){var K=(0,T.A)(function*(x){yield R.create(),x.params=x.params||{};try{yield R.set("icdt-config",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(nt){"function"==typeof x.callback&&x.callback(null),console.error(nt)}});return function(nt){return K.apply(this,arguments)}}(),j=function(){var K=(0,T.A)(function*(x){yield R.create();try{var nt=(yield R.get("icdt-clipboard"))||{};"function"==typeof x.callback&&x.callback(nt)}catch(it){"function"==typeof x.callback&&x.callback(null),console.error(it)}});return function(nt){return K.apply(this,arguments)}}(),_=function(){var K=(0,T.A)(function*(x){yield R.create(),x.params=x.params||{};try{yield R.set("icdt-clipboard",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(nt){"function"==typeof x.callback&&x.callback(null),console.error(nt)}});return function(nt){return K.apply(this,arguments)}}();var K},6315:(de,Kt,v)=>{v.d(Kt,{w:()=>T});const T=(y,lt)=>{if(!y)return"";let R=y.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),rt=(R&&R[4]||"").trim(),S=R?(256|R[1]).toString(16).slice(1)+(256|R[2]).toString(16).slice(1)+(256|R[3]).toString(16).slice(1):y;if("0"==rt)return"transparent";if(lt){let h;h=""!==rt?rt:"01",h=(255*h|256).toString(16).slice(1),S+=h}return`#${S}`}},7873:(de,Kt,v)=>{v.d(Kt,{F:()=>T});const T={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},1477:(de,Kt,v)=>{v.d(Kt,{r:()=>T});const T={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221,Minus:189,Equal:187}},2409:(de,Kt,v)=>{v.d(Kt,{F:()=>T});const T={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(de,Kt,v)=>{v.d(Kt,{P:()=>T});const T={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(de,Kt,v)=>{v.d(Kt,{Q:()=>T});const T={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(de,Kt,v)=>{v.d(Kt,{h:()=>T});const T={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,TSPAN:10,PATH:8,POLYLINE:11}},8338:(de,Kt,v)=>{v.d(Kt,{S:()=>T});const T={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},6611:(de,Kt,v)=>{v.d(Kt,{L:()=>Rt});var T=v(3603),y=v(5970),lt=v(7873),R=v(9506),rt=v(1308),S=v(5483);const j=G=>{var i,n,o,r,l,m,p;let c=(null===(i=G.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=G.touchEvent)||void 0===n?void 0:n.target),L=(null===(o=c)||void 0===o?void 0:o.getAttribute("id"))||"",w=null===(r=c)||void 0===r?void 0:r.nodeName;Rt.dataSelect.nodeName.includes(w)||(c=jQuery(c).parents("foreignObject").get(0),c&&(L=c.getAttribute("id")||"",w=c.nodeName));let W=(null===(l=c)||void 0===l||null===(l=l.parentNode)||void 0===l?void 0:l.getAttribute("id"))||"";var N,St;if([lt.F.RESIZE_GROUP,lt.F.SELECT_GROUP].includes(W))return null===(N=G.mouseEvent)||void 0===N||N.stopPropagation(),void(null===(St=G.mouseEvent)||void 0===St||St.preventDefault());if(null!==(m=G.mouseEvent)&&void 0!==m&&m.altKey||null!==(p=G.touchEvent)&&void 0!==p&&p.altKey||!L||L.match(/[^0-9]/)||!Rt.dataSelect.nodeName.includes(w)){var Et;Rt.dataSelect.ids.length&&(Rt.dataSelect.ids=[]),(0==(null===(Et=G.mouseEvent)||void 0===Et?void 0:Et.button)||G.touchEvent)&&(G=>{let l=(0,y.RY)(lt.F.SCAN_GROUP,"g"),m=(0,R.CE)(0,0,1,1);(0,y.xJ)(l,m),((G,i,n)=>{(0,rt.I)(G,{start:l=>{},move:(l,m)=>{((l,m,p,c)=>{i=(0,R.CE)(l,m,p,c),(0,y.xJ)(n,i)})(m[0][0],m[0][1],l.x,l.y)},end:(l,m)=>{null==n||n.remove(),Rt.dataSelect.ids=Rt.data.getNodeInArea(Math.min(m[0][0],l.x),Math.min(m[0][1],l.y),Math.max(m[0][0],l.x),Math.max(m[0][1],l.y)),(0,S.D)(Rt.dataSelect.nodes)}})})(G,m,l)})(G)}else{var At,Bt;let ee=parseFloat(L||"0");Rt.dataSelect.ids=null!==(At=G.mouseEvent)&&void 0!==At&&At.shiftKey||null!==(Bt=G.touchEvent)&&void 0!==Bt&&Bt.shiftKey?[ee].concat(Rt.dataSelect.ids).filter((_e,me,Ee)=>Ee.indexOf(_e)==me):[ee],(0,S.D)(Rt.dataSelect.nodes)}};class K{constructor(){let{x:i,y:n}=Rt.screen.dislocation;var o=(r,l,m,p)=>{Rt.screen.move({x:i,y:n},{x:m-r,y:p-l})};return{start:r=>{},move:(r,l)=>{o(l[0][0],l[0][1],r.x,r.y)},end:(r,l)=>{o(l[0][0],l[0][1],r.x,r.y)}}}}var x=v(1999),nt=v(4888);const it=[{name:"tam gi\xe1c vu\xf4ng",type:nt.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:nt.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:nt.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:nt.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:nt.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:nt.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:nt.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:nt.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:nt.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:nt.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:nt.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:nt.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:nt.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var yt=v(1281),f=v(2492);class J{constructor(){let i=(0,y.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,yt.K)(Math.ceil(1e9*Math.random())),m=(p,c,L,w)=>{l=(0,R.CE)(p,c,L,w,{ratio:1}),l.x=(0,f.z)(l.x),l.y=(0,f.z)(l.y),l.width=(0,f.z)(l.width),l.height=(0,f.z)(l.height),Object.assign(r,(0,R.xW)(x.h.CIRCLE,l,r)),(0,y.tD)(o,r),(0,y.in)(i,l)};return{start:p=>{m(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,c)=>{m(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{(l.width<=8||l.height<=8)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,R.xW)(x.h.CIRCLE,l,r)),(0,y.tD)(o,r)),Rt.data.node=Object.assign({id:n,type:x.h.CIRCLE,name:"Circle"},{size:l,attribute:r}),null==i||i.remove()}}}}var I=v(6153);class q{constructor(){let i=(0,y.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,I.W)(Math.ceil(1e9*Math.random()));var m=(p,c,L,w)=>{l=(0,R.CE)(p,c,L,w),l.x=(0,f.z)(l.x),l.y=(0,f.z)(l.y),l.width=(0,f.z)(l.width),l.height=(0,f.z)(l.height),Object.assign(r,(0,R.xW)(x.h.ELLIPSE,l,r)),(0,y.tD)(o,r),(0,y.in)(i,l)};return{start:p=>{m(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,c)=>{m(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{l.width<4&&(l.width=4),l.height<4&&(l.height=4),l.width+l.height<8&&(l.width=90,l.height=60,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,R.xW)(x.h.ELLIPSE,l,r)),(0,y.tD)(o,r)),Rt.data.node=Object.assign({id:n,type:x.h.ELLIPSE,name:"Ellipse"},{size:l,attribute:r}),null==i||i.remove()}}}}var at=v(7945);class F{constructor(){let i=(0,y.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,at.a)(Math.ceil(1e9*Math.random()));var m=(p,c,L,w)=>{l=(0,R.CE)(p,c,L,w),l.x=(0,f.z)(l.x),l.y=(0,f.z)(l.y),l.width=(0,f.z)(l.width),l.height=(0,f.z)(l.height),Object.assign(r,(0,R.xW)(x.h.RECT,l,r)),(0,y.tD)(o,r),(0,y.in)(i,l)};return{start:p=>{m(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,c)=>{m(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{l.width<1&&(l.width=1),l.height<1&&(l.height=1),l.width+l.height<8&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,R.xW)(x.h.RECT,l,r)),(0,y.tD)(o,r)),Rt.data.node=Object.assign({id:n,type:x.h.RECT,name:"Rect"},{size:l,attribute:r}),null==i||i.remove()}}}}var Q=v(3477);class st{constructor(i){let n=(0,y.RY)(lt.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:r,element:l,attribute:m,size:p}=(0,Q.u)(Math.ceil(1e9*Math.random()));p.ratios=o;var c=(L,w,W,N)=>{p=(0,R.CE)(L,w,W,N,{ratios:o}),p.x=(0,f.z)(p.x),p.y=(0,f.z)(p.y),p.width=(0,f.z)(p.width),p.height=(0,f.z)(p.height),Object.assign(m,(0,R.xW)(x.h.POLYGON,p,m)),(0,y.tD)(l,m),(0,y.in)(n,p)};return{start:L=>{c(L.x,L.y,L.x+p.width,L.y+p.height)},move:(L,w)=>{c(w[0][0],w[0][1],L.x,L.y)},end:(L,w)=>{p.width<1&&(p.width=1),p.height<1&&(p.height=1),p.width+p.height<8&&(p.width=80,p.height=80,p.x=p.x-p.width/2,p.y=p.y-p.height/2,Object.assign(m,(0,R.xW)(x.h.POLYGON,p,m)),(0,y.tD)(l,m)),Rt.data.node=Object.assign({id:r,type:x.h.POLYGON,name:"Polygon"},{size:p,attribute:m}),null==n||n.remove()}}}}var U=v(3069);class E{constructor(){let i=(0,y.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,U.q)(Math.ceil(1e9*Math.random()));return{start:p=>{},move:(p,c)=>{((p,c,L,w)=>{l=(0,R.CE)(p,c,L,w),l.x=(0,f.z)(l.x),l.y=(0,f.z)(l.y),l.width=(0,f.z)(l.width),l.height=(0,f.z)(l.height),Object.assign(r,(0,R.xW)(x.h.LINE,l,r)),(0,y.tD)(o,r),(0,y.in)(i,l)})(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{c.length>=2?(l.width<8&&(l.width=0),l.height<8&&(l.height=0),l.width+l.height<8&&(l.width=80,l.height=0,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,R.xW)(x.h.LINE,l,r)),(0,y.tD)(o,r)),Rt.data.node=Object.assign({id:n,type:x.h.LINE,name:"Line"},{size:l,attribute:r})):null==o||o.remove(),null==i||i.remove()}}}}var mt=v(4896),jt=v(6407);class Lt{constructor(){let{nodeId:i,element:n,attribute:o,size:r}=(0,jt.X)(Math.ceil(1e9*Math.random())),m="";return{start:c=>{m=`M ${c.x} ${c.y} L ${c.x} ${c.y}`},move:(c,L)=>{((c,L)=>{m+=` ${c} ${L}`,n.setAttribute("d",m)})(c.x,c.y)},end:(c,L)=>{let w=(0,mt.CS)(m),{minX:W,minY:N,maxX:St,maxY:Et}=(0,mt.lP)(w);r.x=W,r.y=N,r.width=St-W||1,r.height=Et-N||1,r.ratioMaps=(0,mt.nf)(r,w),Rt.data.node=Object.assign({id:i,type:x.h.PATH,name:"Path"},{size:r,attribute:o})}}}}var Pt=v(745);class vt{constructor(){let i=(0,y.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,size:r,attribute:l,style:m,source:p}=(0,Pt.$)(Math.ceil(1e9*Math.random()));var c=(L,w,W,N)=>{r=(0,R.CE)(L,w,W,N),r.x=(0,f.z)(r.x),r.y=(0,f.z)(r.y),r.width=(0,f.z)(r.width),r.height=(0,f.z)(r.height),Object.assign(l,(0,R.xW)(x.h.FOREIGNOBJECT,r,l)),(0,y.tD)(o,l),(0,y.in)(i,r)};return{start:L=>{c(L.x,L.y,L.x+r.width,L.y+r.height)},move:(L,w)=>{c(w[0][0],w[0][1],L.x,L.y)},end:(L,w)=>{(r.width<=16||r.height<=16)&&(r.width=90,r.height=60,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(l,(0,R.xW)(x.h.FOREIGNOBJECT,r,l)),(0,y.tD)(o,l)),Rt.data.node=Object.assign({id:n,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:l,style:m,source:p}),null==i||i.remove()}}}}var xt=v(9173);class ce{constructor(){var i,n;let o=(0,y.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:r,element:l,size:m,attribute:p,source:c}=(0,xt.B)(Math.ceil(1e9*Math.random())),L=1;(W=>{if(!W)return;let N=new Image;N.onload=()=>{L=(0,f.z)(N.naturalWidth/N.naturalHeight,100)},N.onerror=St=>{console.error(`ImgSrc load failed -> ${W}`,St)},N.src=W})(null!==(i=null===(n=c.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var w=(W,N,St,Et)=>{m=(0,R.CE)(W,N,St,Et,{ratio:L}),m.x=(0,f.z)(m.x),m.y=(0,f.z)(m.y),m.width=(0,f.z)(m.width),m.height=(0,f.z)(m.height),Object.assign(p,(0,R.xW)(x.h.IMAGE,m,p)),(0,y.tD)(l,p),(0,y.in)(o,m)};return{start:W=>{w(W.x,W.y,W.x+m.width,W.y+m.height)},move:(W,N)=>{w(N[0][0],N[0][1],W.x,W.y)},end:(W,N)=>{(m.width<=16||m.height<=16)&&(m.width=80,m.height=80,m.x=m.x-m.width/2,m.y=m.y-m.height/2,Object.assign(p,(0,R.xW)(x.h.IMAGE,m,p)),(0,y.tD)(l,p)),Rt.data.node=Object.assign({id:r,type:x.h.IMAGE,name:"Image"},{size:m,attribute:p,source:c}),null==o||o.remove()}}}}var It=v(7135),wt=v(4979);function Gt(G,i,n,o){return Math.sqrt(Math.pow(n-G,2)+Math.pow(o-i,2))}function D(G,i,n,o,r){return Gt(G,i,n,o)<r?1:0}function s(G,i,n,o,r,l,m){var p=[];return p.push(D(G,i,n,o,m)),p.push(D(G,i,r,l,m)),p.push(function P(G,i,n,o,r,l,m){var p=[r-n,l-o],c=[G-n,i-o],L=[-p[1],p[0]],w=Math.sqrt(Math.pow(L[0],2)+Math.pow(L[1],2)),W=[L[0]/w,L[1]/w],N=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),St=[p[0]/N,p[1]/N],Et=c[0]*St[0]+c[1]*St[1];if(Et<=0||Et>=N)return 0;var At=c[0]*W[0]+c[1]*W[1];return At>=m||At<=-m?0:1}(G,i,n,o,r,l,m)),p}function b(G,i,n,o,r){var l=[n-G,o-i],m=[-l[1],l[0]],p=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)),c=[m[0]/p,m[1]/p];return[[G+r*c[0],i+r*c[1]],[G-r*c[0],i-r*c[1]],[n-r*c[0],o-r*c[1]],[n+r*c[0],o+r*c[1]]]}function H(G,i,n,o,r,l,m){var Et,p=[r-G,l-i],c=[n-G,o-i],L=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),w=[c[0]/L,c[1]/L],W=p[0]*w[0]+p[1]*w[1],N=[G+W*w[0],i+W*w[1]],St=Math.sqrt(Math.pow(r-N[0],2)+Math.pow(l-N[1],2));Et=0===St?m:Math.sqrt(Math.pow(m,2)-Math.pow(St,2));var At=[G+W*w[0]+Et*w[0],i+W*w[1]+Et*w[1]];return At[0]===G&&At[1]===i?null:At}function tt(G,i,n,o,r,l,m){var p=[r-G,l-i],c=[n-G,o-i],L=[-c[1],c[0]],w=Math.sqrt(Math.pow(L[0],2)+Math.pow(L[1],2)),W=[L[0]/w,L[1]/w],N=p[0]*W[0]+p[1]*W[1],St=ct([G,i],[n,o],[r,l]);if(Qt([St[0]-r,St[1]-l])>=m)return null;var At=Math.sqrt(Math.pow(m,2)-Math.pow(N,2)),Bt=[r-N*W[0],l-N*W[1]],ee=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),_e=[c[0]/ee,c[1]/ee],me=[[Bt[0]-_e[0]*At,Bt[1]-_e[1]*At],[Bt[0]+_e[0]*At,Bt[1]+_e[1]*At]];return me[0][0]===G&&me[0][1]===i?null:me}function zt(G,i,n,o,r,l,m,p){var c,L,w,W,N,St;return-(w=m-r)*(L=o-i)+(c=n-G)*(W=p-l)==0?null:(St=(w*(i-l)-W*(G-r))/(-w*L+c*W),(N=(-L*(G-r)+c*(i-l))/(-w*L+c*W))>=0&&N<=1&&St>=0&&St<=1?[G+St*c,i+St*L]:null)}function Zt(G,i,n,o,r,l,m,p,c,L){var w=b(l,m,p,c,L),W=[];if(n[0]&&!n[1])W.push(H(G,i,o,r,l,m,L)),W.push(zt(G,i,o,r,w[0][0],w[0][1],w[3][0],w[3][1])),W.push(zt(G,i,o,r,w[1][0],w[1][1],w[2][0],w[2][1])),(N=tt(G,i,o,r,p,c,L))&&W.push(N[0],N[1]);else if(!n[0]&&n[1])W.push(H(G,i,o,r,p,c,L)),W.push(zt(G,i,o,r,w[0][0],w[0][1],w[3][0],w[3][1])),W.push(zt(G,i,o,r,w[1][0],w[1][1],w[2][0],w[2][1])),(N=tt(G,i,o,r,l,m,L))&&W.push(N[0],N[1]);else if(n[0]&&n[1])W.push(H(G,i,o,r,l,m,L)),W.push(zt(G,i,o,r,w[0][0],w[0][1],w[3][0],w[3][1])),W.push(zt(G,i,o,r,w[1][0],w[1][1],w[2][0],w[2][1])),W.push(H(G,i,o,r,p,c,L));else{var N=tt(G,i,o,r,p,c,L),St=tt(G,i,o,r,l,m,L);N&&W.push(N[0],N[1]),St&&W.push(St[0],St[1]),W.push(zt(G,i,o,r,w[0][0],w[0][1],w[3][0],w[3][1])),W.push(zt(G,i,o,r,w[1][0],w[1][1],w[2][0],w[2][1]))}for(var Et=[G,i],At=0;At<W.length;At++)W[At]&&Gt(W[At][0],W[At][1],o,r)<Gt(Et[0],Et[1],o,r)&&(Et=W[At]);return Et[0]===G&&Et[1]===i?null:Et}function Yt(G,i,n,o,r,l,m,p,c){var L=b(r,l,m,p,c),w=[],W=tt(G,i,n,o,r,l,c);W&&w.push(W[0],W[1]),(W=tt(G,i,n,o,m,p,c))&&w.push(W[0],W[1]),w.push(zt(G,i,n,o,L[0][0],L[0][1],L[3][0],L[3][1])),w.push(zt(G,i,n,o,L[1][0],L[1][1],L[2][0],L[2][1]));for(var N=[n,o],St=[G,i],Et=0;Et<w.length;Et++)w[Et]&&Gt(w[Et][0],w[Et][1],G,i)<Gt(N[0],N[1],G,i)&&(N=w[Et]);for(var At=0;At<w.length;At++)w[At]&&Gt(w[At][0],w[At][1],n,o)<Gt(St[0],St[1],n,o)&&(St=w[At]);return N[0]===n&&N[1]===o||St[0]===G&&St[1]===i?null:[N,St]}var Qt=function(G){return Math.sqrt(G[0]*G[0]+G[1]*G[1])},ct=function(G,i,n){var o=[i[0]-G[0],i[1]-G[1]],r=Qt(o);if(r<1e-6)return G;var l=[n[0]-G[0],n[1]-G[1]],m=(o[0]*l[0]+o[1]*l[1])/r;return m<0?G:m>r?i:[G[0]+o[0]*m/r,G[1]+o[1]*m/r]};class Xt{constructor(){let{element:o,size:l}=(0,jt.X)(Math.ceil(1e9*Math.random()));(0,y.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let m="";return{start:L=>{m=`M ${L.x} ${L.y} L ${L.x} ${L.y}`},move:(L,w)=>{((L,w)=>{m+=` ${L} ${w}`,o.setAttribute("d",m)})(L.x,L.y)},end:(L,w)=>{o.remove(),(L=>{let w=9999,W=9999,N=-9999,St=-9999;L.forEach(At=>{w=Math.min(w,At[0]),W=Math.min(W,At[1]),N=Math.max(N,At[0]),St=Math.max(St,At[1])}),l=(0,R.CE)(w,W,N,St,{points:L}),Rt.data.getNodeInArea(0,0,1920,1920,x.h.PATH).forEach(At=>{let ee=((G,i,n)=>{n=n||20;var o=[],r=function(w){var W=i[0][0],N=i[0][1],St=0,Et=0;if(1!==w.length||D(w[0][0],w[0][1],W,N,n)){for(var At;St<w.length-1;){var Bt=w[St],ee=w[St+1],_e=D(Bt[0],Bt[1],W,N,n),me=D(ee[0],ee[1],W,N,n);if(_e&&me)Et=++St;else if(_e&&!me)(Ee=H(Bt[0],Bt[1],ee[0],ee[1],W,N,n))?(w[St]=Ee,Et=St):St++;else if(!_e&&me){var Ee;(Ee=H(ee[0],ee[1],Bt[0],Bt[1],W,N,n))&&((At=w.slice(Et,St+1)).push(Ee),o.push(At)),Et=++St}else{var be=tt(Bt[0],Bt[1],ee[0],ee[1],W,N,n);be?(((At=w.slice(Et,St+1))[At.length-1][0]!==be[0][0]||At[At.length-1][1]!==be[0][1])&&At.push(be[0]),At.length>1&&o.push(At),w[St]=be[1],w[St+1]&&w[St+1][0]==be[1][0]&&w[St+1][1]==be[1][1]&&St++,Et=St):St++}}Et!==St&&(At=w.slice(Et,w.length))&&o.push(At)}else o.push(w)},l=function(w,W){var ee,N=i[W],St=i[W+1],Et=0,At=0;if(1!==w.length||-1!==(Bt=s(w[0][0],w[0][1],N[0],N[1],St[0],St[1],n)).indexOf(1)){for(;Et<w.length-1;){var _e=w[Et],me=w[Et+1],Bt=s(_e[0],_e[1],N[0],N[1],St[0],St[1],n),Ee=s(me[0],me[1],N[0],N[1],St[0],St[1],n);if(-1!==Bt.indexOf(1)&&-1!==Ee.indexOf(1))At=++Et;else if(-1!==Bt.indexOf(1)&&-1===Ee.indexOf(1))(be=Zt(_e[0],_e[1],Bt,me[0],me[1],N[0],N[1],St[0],St[1],n))?(w[Et]=be,At=Et):Et++;else if(-1===Bt.indexOf(1)&&-1!==Ee.indexOf(1)){var be;(be=Zt(me[0],me[1],Ee,_e[0],_e[1],N[0],N[1],St[0],St[1],n))?((ee=w.slice(At,Et+1)).push(be),o.push(ee),At=++Et):Et++}else{var ke=Yt(_e[0],_e[1],me[0],me[1],N[0],N[1],St[0],St[1],n);ke?(((ee=w.slice(At,Et+1))[ee.length-1][0]!==ke[0][0]||ee[ee.length-1][1]!==ke[0][1])&&ee.push(ke[0]),ee.length>1&&o.push(ee),w[Et]=ke[1],w[Et+1]&&w[Et+1][0]==ke[1][0]&&w[Et+1][1]==ke[1][1]&&Et++,At=Et):Et++}}At!==Et&&(ee=w.slice(At,w.length))&&o.push(ee)}else o.push(w)};if(i=function z(G){var i=[];if(1===G.length)i=G;else{for(var n=0;n<G.length-1;)(G[n][0]!==G[n+1][0]||G[n][1]!==G[n+1][1])&&i.push(G[n]),n++;0!==G.length&&0===i.length&&i.push(G[0]),(G[G.length-1][0]!==G[i.length-1][0]||G[G.length-1][1]!==G[i.length-1][1])&&i.push(G[n])}return i}(i),1===i.length){for(var m=0;m<G.length;m++)r(G[m]);G=o}else for(var p=0;p<i.length-1;p++){for(m=0;m<G.length;m++)l(G[m],p);G=o,o=[]}for(var c=0;c<G.length;c++)for(var L=0;L<G[c].length;L++)G[c][L][0]=Math.round(G[c][L][0]),G[c][L][1]=Math.round(G[c][L][1]);return G})(Rt.data.getNode(At).size.points,L,2);console.log(ee)})})(w)}}}}var d=v(6847);class B{constructor(){let i=(0,y.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l,source:m}=(0,d.L)(Math.ceil(1e9*Math.random())),p=(c,L,w,W)=>{l=(0,R.CE)(c,L,w,W),l.x=(0,f.z)(l.x),l.y=(0,f.z)(l.y),l.width=(0,f.z)(l.width),l.height=(0,f.z)(l.height),Object.assign(r,(0,R.xW)(x.h.TEXT,l,r)),(0,y.tD)(o,r),(0,y.in)(i,l)};return{start:c=>{p(c.x,c.y,c.x+l.width,c.y+l.height)},move:(c,L)=>{p(L[0][0],L[0][1],c.x,c.y)},end:(c,L)=>{l.width<100&&(l.width=100),l.height<20&&(l.height=20),l.width+l.height<8&&(l.width=100,l.height=20,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,R.xW)(x.h.TEXT,l,r)),(0,y.tD)(o,r)),Rt.data.node=Object.assign({id:n,type:x.h.TEXT,name:"Text"},{size:l,attribute:r,source:m}),null==i||i.remove()}}}}var O=v(4312),Y=v(2409),ut=v(6078);var Tt=v(3073);class Mt{constructor(){this._nodeName=["circle","ellipse","line","polygon","polyline","rect","text","tspan","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>Rt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,o,r,l,m;null===(n=window.document.getElementById(lt.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(o=window.document.getElementById(lt.F.SELECT_GROUP))||void 0===o||o.remove(),null===(r=window.document.getElementById(lt.F.SCAN_GROUP))||void 0===r||r.remove(),null===(l=window.document.getElementById(lt.F.CREATE_GROUP))||void 0===l||l.remove(),null===(m=window.document.getElementById(lt.F.INTERACTIVE_GROUP))||void 0===m||m.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(p=>p(i))}deleteNode(){for(let i of this._selected_Ids){let n=Rt.data.deleteNode(i);Rt.history.push([{type:"delete",from:{id:n},to:{id:n}}])}Rt.dataSelect.ids=[]}groupNode(){let i=[];if(Rt.dataSelect.ids.length>=2){let n=Rt.data.getNode(Rt.dataSelect.ids[0]),{nodeId:o,attribute:r,size:l}=(0,Tt.v)(Math.ceil(1e9*Math.random()),void 0,n.pid?window.document.getElementById(n.pid):null);Rt.data.node=Object.assign({id:o,type:x.h.GROUP,name:"G"},{size:l,attribute:r});for(let m of Rt.dataSelect.ids)i.push(Rt.data.addGroup(m,o))}i.length&&(Rt.dataSelect.ids=i,(0,S.D)(Rt.dataSelect.nodes))}ungroupNode(){let i=[];for(let n of Rt.dataSelect.ids)i.push(Rt.data.unGroup(n));i.length&&(Rt.dataSelect.ids=i,(0,S.D)(Rt.dataSelect.nodes))}}var Ot=v(2837),pt=v(8338);class kt{createNodeImage(i,n){var o,r,l,m;let{nodeId:c,element:L,size:w,attribute:W,source:N}=(0,xt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:50)-50,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:50)-50,width:100,height:100},source:{type:"image",image:(0,Ot.U)(i)}});(St=>{if(!St)return;let Et=new Image;Et.onload=()=>{let At=(0,f.z)(Et.naturalWidth/Et.naturalHeight,100);At>=1?(w.width=Math.min(Et.naturalWidth,512),w.height=(0,f.z)(w.width/At,100)):(w.height=Math.min(Et.naturalHeight,512),w.width=(0,f.z)(w.height*At,100)),w.x=(0,f.z)(w.x+50-w.width/2,100),w.y=(0,f.z)(w.y+50-w.height/2,100),Object.assign(W,(0,R.xW)(x.h.IMAGE,w,W)),(0,y.tD)(L,W),Rt.data.node=Object.assign({id:c,type:x.h.IMAGE,name:"Image"},{size:w,attribute:W,source:N})},Et.onerror=At=>{console.error(`ImgSrc load failed -> ${St}`,At),null==L||L.remove()},Et.src=St})(null!==(l=null===(m=N.image)||void 0===m?void 0:m.url)&&void 0!==l?l:"")}createNodeIframe(i,n){var o,r;let{nodeId:m,element:p,size:c,attribute:L,style:w,source:W}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:50)-50,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,Ot.U)(i)}});(N=>{let St=(null===(N=Rt.data.slide)||void 0===N||null===(N=N.svg)||void 0===N?void 0:N.viewBox)||{x:0,y:0,width:100,height:100},Et=(0,f.z)(St.width/St.height,100);Et>=1?(c.width=Math.min(St.width,512),c.height=(0,f.z)(c.width/Et,100)):(c.height=Math.min(St.height,512),c.width=(0,f.z)(c.height*Et,100)),c.x=(0,f.z)(c.x+50-c.width/2,100),c.y=(0,f.z)(c.y+50-c.height/2,100),Object.assign(L,(0,R.xW)(x.h.IMAGE,c,L)),(0,y.tD)(p,L),Rt.data.node=Object.assign({id:m,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:L,style:w,source:W})})()}createNodeEmbed(i,n){var o,r;let l={x:50,y:50,width:640,height:360};i.type==pt.S.AUDIO&&(l.width=480,l.height=80);let{nodeId:m,element:p,size:c,attribute:L,style:w,source:W}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:l.x)-l.x,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:l.y)-l.y,width:l.width,height:l.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,Ot.U)(i))}});(()=>{let N=(0,f.z)(l.width/l.height,100);N>=1?(c.width=Math.min(c.width,l.width),c.height=(0,f.z)(c.width/N,1)):(c.height=Math.min(c.height,l.height),c.width=(0,f.z)(c.height*N,1)),c.x=(0,f.z)(c.x+l.x-c.width/2,1),c.y=(0,f.z)(c.y+l.y-c.height/2,1),Object.assign(L,(0,R.xW)(x.h.FOREIGNOBJECT,c,L)),(0,y.tD)(p,L),Rt.data.node=Object.assign({id:m,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:L,style:w,source:W})})()}createNodeMedia(i,n){var o,r,l,m;let{nodeId:c,element:L,size:w,attribute:W,source:N}=(0,xt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:50)-50,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:50)-50,width:100,height:100},source:{type:"image",image:(0,Ot.U)(i.cover)}}),St={click:{media:i.media}};(Et=>{if(!Et)return;let At=new Image;At.onload=()=>{let Bt=(0,f.z)(At.naturalWidth/At.naturalHeight,100);Bt>=1?(w.width=Math.min(At.naturalWidth,512),w.height=(0,f.z)(w.width/Bt,100)):(w.height=Math.min(At.naturalHeight,512),w.width=(0,f.z)(w.height*Bt,100)),w.x=(0,f.z)(w.x+50-w.width/2,100),w.y=(0,f.z)(w.y+50-w.height/2,100),Object.assign(W,(0,R.xW)(x.h.IMAGE,w,W)),(0,y.tD)(L,W),Rt.data.node=Object.assign({id:c,type:x.h.IMAGE,name:"Image"},{size:w,attribute:W,source:N,interactive:St})},At.onerror=Bt=>{console.error(`ImgSrc load failed -> ${Et}`,Bt),null==L||L.remove()},At.src=Et})(null!==(l=null===(m=N.image)||void 0===m?void 0:m.url)&&void 0!==l?l:"")}createNodeText(i,n){var o,r;let{nodeId:m,element:p,size:c,attribute:L,style:w,source:W}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:0)-0,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let N=(0,f.z)(4,100);N>=1?(c.width=Math.min(c.width,320),c.height=(0,f.z)(c.width/N,1)):(c.height=Math.min(c.height,80),c.width=(0,f.z)(c.height*N,1)),c.x=(0,f.z)(c.x+0-c.width/2,1),c.y=(0,f.z)(c.y+0-c.height/2,1),Object.assign(L,(0,R.xW)(x.h.FOREIGNOBJECT,c,L)),(0,y.tD)(p,L),Rt.data.node=Object.assign({id:m,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:L,style:w,source:W})})()}insert(i){var n;if(Rt.data.insertSlide(Rt.data.slideId,1),i.title){let{nodeId:o,size:r,attribute:l,style:m,source:p}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});Rt.data.node=Object.assign({id:o,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:l,style:m,source:p})}if(i.description){let{nodeId:o,size:r,attribute:l,style:m,source:p}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});Rt.data.node=Object.assign({id:o,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:l,style:m,source:p})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:o,size:r,attribute:l}=(0,at.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});Rt.data.node=Object.assign({id:o,type:x.h.RECT,name:"Rect"},{size:r,attribute:l})})(),(o=>{let{nodeId:r,size:l,attribute:m,style:p,source:c}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});Rt.data.node=Object.assign({id:r,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:l,attribute:m,style:p,source:c})})())}}var Ct=v(1026),Ft=v(8047);class Vt{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:Rt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,m)=>m==this._slideIdx),o=null==n?void 0:n.svg,r=l=>{let m=[];return l.filter(p=>!p.isdeleted).forEach(p=>{p.type==x.h.GROUP?m=m.concat(r(p.nodes||[])):m.push(p.id)}),m};return r((null==o?void 0:o.nodes)||[])}}get get(){var i;let n=o=>{var r,l;return null===(r=o)||void 0===r||r.filter(m=>m.type==x.h.GROUP).forEach(m=>{var p;m.nodes=n(null===(p=m.nodes)||void 0===p?void 0:p.filter(c=>!c.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(m=>{var p,c;return m.type!=x.h.GROUP||(null!==(p=null===(c=m.nodes)||void 0===c?void 0:c.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var r;o.svg&&(o.svg.nodes=n(null===(r=o.svg)||void 0===r||null===(r=r.nodes)||void 0===r?void 0:r.filter(l=>!l.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var r,l,m,p,c,L,w,W;n.push(null===(r=o.svg)||void 0===r||null===(r=r.background)||void 0===r?void 0:r.path),null===(l=o.svg)||void 0===l||l.nodes.forEach(N=>{var St,Et,At,Bt,ee,_e,me,Ee,be,ke;n.push(null===(St=N.source)||void 0===St||null===(St=St.image)||void 0===St?void 0:St.path),n.push(null===(Et=N.source)||void 0===Et||null===(Et=Et.audio)||void 0===Et?void 0:Et.path),n.push(null===(At=N.source)||void 0===At||null===(At=At.video)||void 0===At?void 0:At.path),n.push(null===(Bt=N.source)||void 0===Bt||null===(Bt=Bt.file)||void 0===Bt?void 0:Bt.path),n.push(null===(ee=N.source)||void 0===ee||null===(ee=ee.iframe)||void 0===ee?void 0:ee.path),n.push(null===(_e=N.source)||void 0===_e||null===(_e=_e.track)||void 0===_e?void 0:_e.path),n.push(null===(me=N.interactive)||void 0===me||null===(me=me.show)||void 0===me||null===(me=me.audio)||void 0===me||null===(me=me.source)||void 0===me?void 0:me.path),n.push(null===(Ee=N.interactive)||void 0===Ee||null===(Ee=Ee.click)||void 0===Ee||null===(Ee=Ee.audio)||void 0===Ee||null===(Ee=Ee.source)||void 0===Ee?void 0:Ee.path),n.push(null===(be=N.interactive)||void 0===be||null===(be=be.click)||void 0===be||null===(be=be.image)||void 0===be||null===(be=be.source)||void 0===be?void 0:be.path),n.push(null===(ke=N.interactive)||void 0===ke||null===(ke=ke.click)||void 0===ke||null===(ke=ke.video)||void 0===ke||null===(ke=ke.source)||void 0===ke?void 0:ke.path)}),n.push(null===(m=o.test)||void 0===m||null===(m=m.audiotrue)||void 0===m?void 0:m.path),n.push(null===(p=o.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),n.push(null===(c=o.test)||void 0===c||null===(c=c.effecttrue)||void 0===c?void 0:c.path),n.push(null===(L=o.test)||void 0===L||null===(L=L.effectfalse)||void 0===L?void 0:L.path),n.push(null===(w=o.test)||void 0===w||null===(w=w.icontrue)||void 0===w?void 0:w.path),n.push(null===(W=o.test)||void 0===W||null===(W=W.iconfalse)||void 0===W?void 0:W.path)}),n.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,r,l)=>l.indexOf(o)==r)}get getFonts(){var i;return(0,Ft.d)(JSON.stringify(null!==(i=this._dataSource.slides)&&void 0!==i?i:[]))}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,y.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=o=>{var r,l;return null===(r=o)||void 0===r||r.filter(m=>m.type==x.h.GROUP).forEach(m=>{var p;m.nodes=n(null===(p=m.nodes)||void 0===p?void 0:p.filter(c=>!c.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(m=>{var p,c;return m.type!=x.h.GROUP||(null!==(p=null===(c=m.nodes)||void 0===c?void 0:c.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var r;o.svg&&(o.svg.nodes=n(null===(r=o.svg)||void 0===r||null===(r=r.nodes)||void 0===r?void 0:r.filter(l=>!l.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,y.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,y.rN)(),(0,Ct.t)(this.slide)}openSlide(i,n){var o,r,l,m,p;if(i)for(let N=0,St=null!==(c=null===(L=this._dataSource.slides)||void 0===L?void 0:L.length)&&void 0!==c?c:0;N<St;N++){var c,L,w;if((null!==(w=this._dataSource.slides)&&void 0!==w?w:[])[N].id==i){this._slideIdx=N;break}}else if(n&&n>=0&&n<(null!==(o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==o?o:0))this._slideIdx=null!=n?n:0;else{var W;this._slideIdx=0,null!==(W=this._dataSource.slides)&&void 0!==W&&W.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,y.rN)(),null!==(l=this.slide)&&void 0!==l&&null!==(l=l.svg)&&void 0!==l&&l.viewBox&&(Rt.screen.frameSize=this.slide.svg.viewBox),(0,Ct.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(p=this._dataSource.slides)||void 0===p?void 0:p.length)&&void 0!==m?m:0,this.slide)}addSlide(){var i,n,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}tryMergeSlide(i,n,o){var r,l,m;let p=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(c=>c.id==i);return p?null!==(l=p.test)&&void 0!==l&&l.type&&null!==(m=n.test)&&void 0!==m&&m.type?"boolean"!=typeof o?-1:o?this.mergeSlide(i,p,n):this.insertSlide(i,1,n):this.mergeSlide(i,p,n):this.insertSlide(i,1,n)}tryReplaceSlide(i,n){var o,r,l,m,p;let c=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(w=>w.id==i);if(!c||null!=c&&null!==(r=c.svg)&&void 0!==r&&r.nodes.filter(w=>!w.isdeleted).length)return this.insertSlide(i,1,n);let L=null!==(l=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(c))&&void 0!==l?l:0;return null===(p=this._dataSource.slides)||void 0===p||p.splice(L,1,n),this._slideIdx=L,this.openSlide(void 0,this._slideIdx),1}mergeSlide(i,n,o){var r,l,m,p;return n.test=null!==(r=o.test)&&void 0!==r?r:n.test,n.audio=null!==(l=o.audio)&&void 0!==l?l:n.audio,n.svg?n.svg.nodes=n.svg.nodes.concat(null!==(m=null===(p=o.svg)||void 0===p?void 0:p.nodes)&&void 0!==m?m:[]):n.svg=o.svg,this.openSlide(i),1}insertSlide(i,n,o){var r,l,m,p,c;let L=null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(N=>N.id==i))&&void 0!==r?r:this._defaultSlide,w=(null!==(m=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(L))&&void 0!==m?m:0)+n;var W;return o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(W=o.svg)&&void 0!==W&&W.viewBox||o.svg&&(o.svg.viewBox=Rt.screen.frameSize)):o=this._defaultSlide,null===(c=this._dataSource.slides)||void 0===c||c.splice(w,0,o),this._slideIdx=w,this.openSlide(void 0,this._slideIdx),1}copySlide(i){var n,o,r,l,m,p,c;let L=null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(N=>N.id==i))&&void 0!==n?n:this._defaultSlide,w=(null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(L))&&void 0!==r?r:0)+1,W=Object.assign(JSON.parse(JSON.stringify(L)),{id:this.newSlideId,code:void 0,name:`${L.name} + (Copy)`});null===(m=this._dataSource.slides)||void 0===m||m.splice(w,0,W),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(c=this._dataSource.slides)||void 0===c?void 0:c.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,n){var o,r,l,m,p,c;let L=null!==(o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(W=>W.id==i))&&void 0!==o?o:this._defaultSlide,w=null!==(l=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(L))&&void 0!==l?l:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(w+n,0,null===(c=this._dataSource.slides)||void 0===c?void 0:c.splice(w,1)[0])}deleteSlide(i){var n,o,r,l,m,p;let c=null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(N=>N.id==i))&&void 0!==n?n:this._defaultSlide,L=null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(c))&&void 0!==r?r:0;if(null===(m=this._dataSource.slides)||void 0===m||m.splice(L,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(L<this._slideIdx){var w,W;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(w=null===(W=this._dataSource.slides)||void 0===W?void 0:W.length)&&void 0!==w?w:0,this.slide)}else L==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,o,r,l,m;let p=null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(L=>L.id==i))&&void 0!==n?n:this._defaultSlide,c=null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(p))&&void 0!==r?r:0;if(p.isdeleted=!0,null!==(m=this._dataSource.slides)&&void 0!==m&&null!==(m=m.filter(L=>!L.isdeleted))&&void 0!==m&&m.length){let L=!0;for(;p.isdeleted;)L?c++:c--,this._dataSource.slides[c]?p=this._dataSource.slides[c]:L=!L;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,o,r){this._fnChangeSlides.forEach(l=>l(i,n,o,r))}set node(i){var n,o;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((l,m)=>m==this._slideIdx);null!=r&&null!==(o=r.svg)&&void 0!==o&&o.nodes&&r.svg.nodes.push(i),Rt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Ct.t)(r),(0,Ct.t)(r,null==r?void 0:r.id)}findNode(i){var n;let o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((N,St)=>St==this._slideIdx),r=null==o?void 0:o.svg,l=(N,St)=>{let Et=null==N?void 0:N.find(ee=>ee.id==i);if(Et)return Et.pid=St,Et;let At=0,Bt=N.length||0;for(;At<Bt&&!Et&&(Et=l(N[At].nodes||[],N[At].id),!Et);)At++;return Et},m=l((null==r?void 0:r.nodes)||[]);var p,c,L,w,W;return m?(m.style=null!==(p=m.style)&&void 0!==p?p:{},m.source=null!==(c=m.source)&&void 0!==c?c:{},m.animate=null!==(L=m.animate)&&void 0!==L?L:{},m.interactive=null!==(w=m.interactive)&&void 0!==w?w:{},m.variable=null!==(W=m.variable)&&void 0!==W?W:{},m):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((p,c)=>c==this._slideIdx),r=null==o?void 0:o.svg,m=p=>{let c=(null==p?void 0:p.find(Et=>Et.id==i))||(p=>{let c=null,L=0,w=p.length||0;for(;L<w&&!c;){if(c=m(p[L].nodes),c){c.pid=p[L].id;break}L++}var W,N,St,Et,At;return c&&(c.style=null!==(W=c.style)&&void 0!==W?W:{},c.source=null!==(N=c.source)&&void 0!==N?N:{},c.animate=null!==(St=c.animate)&&void 0!==St?St:{},c.interactive=null!==(Et=c.interactive)&&void 0!==Et?Et:{},c.variable=null!==(At=c.variable)&&void 0!==At?At:{}),c})((null==p?void 0:p.filter(Et=>Et.type==x.h.GROUP))||[]);var L,w,W,N,St;return c&&(c.style=null!==(L=c.style)&&void 0!==L?L:{},c.source=null!==(w=c.source)&&void 0!==w?w:{},c.animate=null!==(W=c.animate)&&void 0!==W?W:{},c.interactive=null!==(N=c.interactive)&&void 0!==N?N:{},c.variable=null!==(St=c.variable)&&void 0!==St?St:{}),c};return m((null==r?void 0:r.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,o,r,l){var m;let p=null===(m=this._dataSource.slides)||void 0===m?void 0:m.find((w,W)=>W==this._slideIdx),c=null==p?void 0:p.svg,L=w=>{let W=[];return w.filter(N=>!N.isdeleted).forEach(N=>{N.type==x.h.GROUP?W=W.concat(L(N.nodes||[])):i>N.size.x||n>N.size.y||o<N.size.x+N.size.width||r<N.size.y+N.size.height||(l?N.type==l&&W.push(N.id):W.push(N.id))}),W};return L((null==c?void 0:c.nodes)||[])}getNodeOnArea(i,n,o,r,l){var m;let p=null===(m=this._dataSource.slides)||void 0===m?void 0:m.find((w,W)=>W==this._slideIdx),c=null==p?void 0:p.svg,L=w=>{let W=[];return w.filter(N=>!N.isdeleted).forEach(N=>{N.type==x.h.GROUP?W=W.concat(L(N.nodes||[])):N.size.x+N.size.width<i||N.size.y+N.size.height<n||N.size.x>o||N.size.y>r||(l?N.type==l&&W.push(N.id):W.push(N.id))}),W};return L((null==c?void 0:c.nodes)||[])}deleteNode(i,n){var o;return this.getNode(i).isdeleted=null==n||n,(0,Ct.t)(this.slide),(0,Ct.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var n,o;let r=this.getNode(i),l=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(r)),{id:l})),Object.assign(r,{isdeleted:!0}),(0,Ct.t)(this.slide),(0,Ct.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),l}addGroup(i,n){var o;let r=this.getNode(i),l=this.getNode(n);l.nodes=l.nodes||[];let m=Math.ceil(1e9*Math.random());return l.nodes.push(Object.assign(JSON.parse(JSON.stringify(r)),{id:m})),Object.assign(r,{isdeleted:!0}),(0,Ct.t)(this.slide),(0,Ct.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),m}setNodeP(i,n){var o;let r=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(l=>l.id==i);r&&(r.pid=n||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,n){var o,r,l,m,p,c;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((w,W)=>{w.index=W+1});let L=(null!==(r=null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l?void 0:l.nodes.length)&&void 0!==r?r:0)+1;i.map(w=>{var W,N;return{id:w,index:null!==(W=null===(N=this.slide)||void 0===N||null===(N=N.svg)||void 0===N||null===(N=N.nodes.find(St=>St.id==w))||void 0===N?void 0:N.index)&&void 0!==W?W:0}}).sort((w,W)=>w.index-W.index).forEach(w=>{var N,W;n?null===(N=this.slide)||void 0===N||null===(N=N.svg)||void 0===N||N.nodes.filter((St,Et)=>St.id==w.id).forEach(St=>{St.index=n+w.index+w.index/1e3}):null===(W=this.slide)||void 0===W||null===(W=W.svg)||void 0===W||W.nodes.filter(St=>St.id==w.id).forEach(St=>{St.index=L+w.index})}),null===(m=this.slide)||void 0===m||null===(m=m.svg)||void 0===m||m.nodes.sort((w,W)=>{var N,St;return(null!==(N=w.index)&&void 0!==N?N:0)-(null!==(St=W.index)&&void 0!==St?St:0)}),(0,Ct.$)(this.slide),null===(p=window.document.getElementById(lt.F.RESIZE_GROUP))||void 0===p||p.remove(),null===(c=window.document.getElementById(lt.F.SELECT_GROUP))||void 0===c||c.remove(),(0,S.D)(Rt.dataSelect.nodes)}sendToBackStep(i,n){var o,r,l,m;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((p,c)=>{p.index=c+1}),i.map(p=>{var c,L;return{id:p,index:null!==(c=null===(L=this.slide)||void 0===L||null===(L=L.svg)||void 0===L||null===(L=L.nodes.find(w=>w.id==p))||void 0===L?void 0:L.index)&&void 0!==c?c:0}}).sort((p,c)=>p.index-c.index).forEach(p=>{var L,c;n?null===(L=this.slide)||void 0===L||null===(L=L.svg)||void 0===L||L.nodes.filter(w=>w.id==p.id).forEach(w=>{w.index=n+p.index+p.index/1e3}):null===(c=this.slide)||void 0===c||null===(c=c.svg)||void 0===c||c.nodes.filter(w=>w.id==p.id).forEach(w=>{w.index=p.index/100-1})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((p,c)=>{var L,w;return(null!==(L=p.index)&&void 0!==L?L:0)-(null!==(w=c.index)&&void 0!==w?w:0)}),(0,Ct.$)(this.slide),null===(l=window.document.getElementById(lt.F.RESIZE_GROUP))||void 0===l||l.remove(),null===(m=window.document.getElementById(lt.F.SELECT_GROUP))||void 0===m||m.remove(),(0,S.D)(Rt.dataSelect.nodes)}bringToFrontArea(i){var n,o,r,l;let m=i.map(Et=>Rt.data.getNode(Et)).filter(Et=>!Et.isfake),{x1:p,y1:c,x2:L,y2:w}=$t(m),W=this.getNodeOnArea(p,c,L,w);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((Et,At)=>{Et.index=At+1});let N=W.map(Et=>{var At,Bt;return null!==(At=null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||null===(Bt=Bt.nodes.find(ee=>ee.id==Et))||void 0===Bt?void 0:Bt.index)&&void 0!==At?At:0}),St=Math.max.apply(null,N);i.forEach((Et,At)=>{var Bt;null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||Bt.nodes.filter(ee=>ee.id==Et).forEach(ee=>{ee.index=St+(At+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((Et,At)=>{var Bt,ee;return(null!==(Bt=Et.index)&&void 0!==Bt?Bt:0)-(null!==(ee=At.index)&&void 0!==ee?ee:0)}),(0,Ct.$)(this.slide),null===(r=window.document.getElementById(lt.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(l=window.document.getElementById(lt.F.SELECT_GROUP))||void 0===l||l.remove(),(0,S.D)(Rt.dataSelect.nodes)}sendToBackArea(i){var n,o,r,l;let m=i.map(Et=>Rt.data.getNode(Et)).filter(Et=>!Et.isfake),{x1:p,y1:c,x2:L,y2:w}=$t(m),W=this.getNodeOnArea(p,c,L,w);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((Et,At)=>{Et.index=At+1});let N=W.map(Et=>{var At,Bt;return null!==(At=null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||null===(Bt=Bt.nodes.find(ee=>ee.id==Et))||void 0===Bt?void 0:Bt.index)&&void 0!==At?At:0}),St=Math.min.apply(null,N)-1;i.forEach((Et,At)=>{var Bt;null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||Bt.nodes.filter(ee=>ee.id==Et).forEach(ee=>{ee.index=St+(At+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((Et,At)=>{var Bt,ee;return(null!==(Bt=Et.index)&&void 0!==Bt?Bt:0)-(null!==(ee=At.index)&&void 0!==ee?ee:0)}),(0,Ct.$)(this.slide),null===(r=window.document.getElementById(lt.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(l=window.document.getElementById(lt.F.SELECT_GROUP))||void 0===l||l.remove(),(0,S.D)(Rt.dataSelect.nodes)}}const $t=G=>{let i=999999,n=999999,o=-999999,r=-999999;return G.forEach(l=>{i=Math.min(i,l.size.x),n=Math.min(n,l.size.y),o=Math.max(o,l.size.x+l.size.width),r=Math.max(r,l.size.y+l.size.height)}),{x1:i,y1:n,x2:o,y2:r}};class ae{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":Rt.data.deleteNode(n.from.id);break;case"edit":break;case"delete":Rt.data.deleteNode(n.from.id,!1);break;case"size":{let{id:o,type:r,size:l,attribute:m}=Rt.data.getNode(n.from.id);Object.assign(l,n.from.size),Object.assign(m,(0,R.xW)(r,l,m)),(0,y.tD)(window.document.getElementById(o),m);break}case"attribute":{let{id:o,attribute:r}=Rt.data.getNode(n.from.id);Object.assign(r,n.from.attribute),(0,y.tD)(window.document.getElementById(o),r);break}case"style":{let{id:o,style:r}=Rt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.style),(0,y.c_)(window.document.getElementById(o),r);break}case"source":{let{id:o,type:r,source:l}=Rt.data.getNode(n.from.id);Object.assign(null!=l?l:{},n.from.source),(0,y.KG)(window.document.getElementById(o),r,null!=l?l:{});break}case"animate":{let{animate:o}=Rt.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.animate);break}case"interactive":{let{interactive:o}=Rt.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.interactive);break}case"variable":{let{variable:o}=Rt.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.variable);break}}}),Rt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":Rt.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":Rt.data.deleteNode(n.to.id,!0);break;case"size":{let{id:o,type:r,size:l,attribute:m}=Rt.data.getNode(n.to.id);Object.assign(l,n.to.size),Object.assign(m,(0,R.xW)(r,l,m)),(0,y.tD)(window.document.getElementById(o),m);break}case"attribute":{let{id:o,attribute:r}=Rt.data.getNode(n.to.id);Object.assign(r,n.to.attribute),(0,y.tD)(window.document.getElementById(o),r);break}case"style":{let{id:o,style:r}=Rt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.style),(0,y.c_)(window.document.getElementById(o),r);break}case"source":{let{id:o,type:r,source:l}=Rt.data.getNode(n.to.id);Object.assign(null!=l?l:{},n.to.source),(0,y.KG)(window.document.getElementById(o),r,null!=l?l:{});break}case"animate":{let{animate:o}=Rt.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.animate);break}case"interactive":{let{interactive:o}=Rt.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.interactive);break}case"variable":{let{variable:o}=Rt.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.variable);break}}}),Rt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class se{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,o;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,o){var r;if(!(i<.01||i>100)){if(n=null!==(r=n)&&void 0!==r?r:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var l={x:Math.max(0,Math.min((0,f.z)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,f.z)(n.y/this._height,1e3),1))},m={x:(this._width/i-this._width/this._scale)*l.x,y:(this._height/i-this._height/this._scale)*l.y};this._dislocation.x+=m.x,this._dislocation.y+=m.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}zoomIn(){this.scaleTo(this._scale+.04*this._scale)}zoomOut(){this.scaleTo(this._scale-.04*this._scale)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,y.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var he=v(6195);class xe{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,he.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,he._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var Le=v(5619),Ne=v(334),Te=v(3591),we=function(G){return G&&JSON.parse(JSON.stringify(G))},Ge=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],ei=[],di={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},li={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class ai{constructor(){this._data_variables=we(Ge).concat(we(ei)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=we(Ge).concat(we(ei)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(o=>(this._data_variables.map(r=>r.change||[]).forEach(r=>{o=o.concat(r)}),o))([]),Ge.forEach(o=>{var r=this._data_variables.filter(l=>l.key==o.key);r.length?r.forEach(function(l,m,p){l.type=o.type,l.readonly=o.readonly,l.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return we(di)}getConditionTemp(){return we(li)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?we((G=this._data_variables,i="key",function(n){for(var o of G.map(function(r){return r[i]}).sort())G.filter(function(r){return r[i]==o}).forEach(function(r){n.push(r)}),G=G.filter(function(r){return r[i]!=o});return n}([]))):we(Ge).concat(we(ei));var G,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Ge.forEach(n=>{var o=this._data_variables.filter(r=>r.key==n.key);o.length?o.forEach((r,l,m)=>{r.type=n.type,r.readonly=n.readonly,r.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?we(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,o){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),o||(o=(this._data_variables.filter(l=>l.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var r=this._data_variables.filter(l=>l.key==i);r.length?r.forEach(function(l,m,p){l.value=n,l.type=o}):this._data_variables.push({key:i,value:n,type:o})}}getValue(i,n){if(!i)return"";var o=this._data_variables.filter(function(m){return m.key==i});if(o.length){var l,r=o[0]||{};switch(this.OnGetActionExecuting(r),n||(n=r.type||null),n){case"string":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":"string"==typeof r.value?r.value||"":r.value.toString().trim();break;case"number":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?0:"number"==typeof r.value?r.value||0:parseFloat(r.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(r.value)>=0?l=!1:"boolean"==typeof r.value?l=r.value:(l=(r.value+"").toLowerCase(),l="1"==r.value||"true"==r.value||"yes"==r.value||"dung"==r.value);break;case"audio-src":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${r.value}"></source></audio>`:"";break;case"video-src":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${r.value}"></source></video>`:"";break;case"img-src":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value?`<img style="width:100%;vertical-align:middle;" src="${r.value}"/>`:"";break;default:l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value}return this.OnGetActionExecuted(r),l}return null}setValue(i,n,o){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),o||(o=(this._data_variables.filter(function(m){return m.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var r=this._data_variables.filter(function(m){return m.key==i});if(r.length){var l=r[0];this.OnSetActionExecuting(l),l&&(l.value=n),this.OnSetActionExecuted(l)}}}getConditionAll(){return we(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?we(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,o){return n.idx-o.idx})):{}}switchCondition(i,n,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),o.split(";").map(function(r){return n==r.trim()?1:0}).reduce(function(r,l){return r+l})>0):n==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==o.split(";").map(function(r){return n==r.trim()?1:0}).reduce(function(r,l){return r+l})):n!=o;case">=":return n>=o;case"<=":return n<=o;case">":return n>o;case"<":return n<o;case"\u2208":return o=(o+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),o.split(";").map(function(r){return n.indexOf(r.trim())>=0?1:0}).reduce(function(r,l){return r+l})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==o.split(";").map(function(r){return n.indexOf(r.trim())>=0?1:0}).reduce(function(r,l){return r+l});default:return!1}}switchOperator(i,n,o){switch(i){case"+":return n+o;case"-":return n-o;case"*":return n*o;case"/":return n/o;case"=":return o;case"=!":return!o;case"==":return n==o;case"!=":return n!=o}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(r,l){return r+l});case"sub":return n.reduce(function(r,l){return r-l});case"pro":return n.reduce(function(r,l){return r*l});case"div":return n.reduce(function(r,l){return r/l});case"avg":var o=n.reduce(function(r,l){return r+l})/(n.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(r,l){return r&&l});case"or":return n.reduce(function(r,l){return r||l});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(o=>this.switchValueType_Condition(Object.assign(we(n),{variable:o}))?0:1).reduce(function(o,r){return o+r})?0:1;default:return 0}}).reduce((n,o)=>(null!=n?n:0)+(null!=o?o:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var o of n.variables)this.setValue(o,this.getValueOperator(Object.assign(we(n),{variable:o})));break;case"slide":Le.J.runSlide(void 0,void 0,n.slide);break;case"node":{var r;(0,Te.GD)({id:n.node,nodeStatus:Le.J.nodeStatus,slideStatus:Le.J.slideStatus});let l=Le.J.findNode(n.node);null!=l&&null!==(r=l.interactive)&&void 0!==r&&r.click&&(0,Ne.J)(l,Le.J.nodeStatus,Le.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class oi{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,o){if(this._pointer_type=i,n)switch(i){case T.P.PEN:this._pen_type=n;break;case T.P.SHAPE:this._shape_type=n,o&&n===x.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case T.P.PEN:this._pen_type||(this._pen_type=Y.F.DRAW);break;case T.P.SHAPE:this._shape_type||(this._shape_type=x.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,o){this._fnChangePointerTypes.forEach(r=>r(i,n,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,o){this._fnChangePointerTypeTemps.forEach(r=>r(i,n,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,o){this._fnChangePenTypes.forEach(r=>r(i,n,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,o){this._fnChangeShapeTypes.forEach(r=>r(i,n,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,o){this._fnChangePolygonTypes.forEach(r=>r(i,n,o))}set onchange(i){this._fnChanges.push(i)}change(i,n,o){this._fnChanges.forEach(r=>r(i,n,o))}}const Rt=new class hi{constructor(){this._container="",this._svg="",this._screen=se.prototype,this._data=Vt.prototype,this._dataSelect=Mt.prototype,this._slide=kt.prototype,this._history=ae.prototype,this._attribute=xe.prototype,this._pointer=oi.prototype,this._variable=ai.prototype,this._data=new Vt,this._dataSelect=new Mt,this._slide=new kt,this._history=new ae,this._attribute=new xe,this._pointer=new oi,this._variable=new ai,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,variable:this._variable.get,resources:this._data.getResource,fonts:this._data.getFonts,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,o,r,l;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(r=null==i?void 0:i.left)&&void 0!==r?r:0,y:null!==(l=null==i?void 0:i.top)&&void 0!==l?l:0},width:null!=n?n:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new se,(G=>{new y.cR(G.container,G.target);var i=(r,l,m,p)=>{switch(r){case T.P.POINTER:jQuery(G.target).css({cursor:"auto"});break;case T.P.HAND:p?jQuery(G.target).css({cursor:"grabbing"}):jQuery(G.target).css({cursor:"grab"});break;case T.P.PEN:switch(l){case Y.F.DRAW:jQuery(G.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case Y.F.HIGHTLIGH:jQuery(G.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case T.P.ERASER:jQuery(G.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case T.P.SHAPE:jQuery(G.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case T.P.TEXT:case T.P.FOREIGNOBJECT:jQuery(G.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};Rt.pointer.onchange=(r,l,m)=>{i(r,l)},jQuery(G.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",r=>{i(Rt.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",r=>{i(Rt.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",r=>{r.ctrlKey&&r.preventDefault()},{passive:!1}),jQuery(G.container).off("wheel.icdt-init").on("wheel.icdt-init",r=>{var l;r.preventDefault();let m=null!==(l=r.originalEvent)&&void 0!==l?l:r;if(!m.deltaX&&m.deltaY!=Math.floor(m.deltaY)||m.ctrlKey){var p=Rt.screen.scale;Rt.screen.scaleTo(p-.04*p*(m.deltaY>0?1:-1),(0,ut.D)({x:r.clientX,y:r.clientY},1,{x:0,y:0},Rt.screen.offset))}else Rt.screen.move(Rt.screen.dislocation,{x:-m.deltaX,y:-m.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{Rt.screen.actived=!!jQuery(r.target).parents(Rt.container).length}),jQuery(G.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",r=>{}),jQuery(G.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",r=>{Rt.pointer.pointer_type_temp==T.P.HAND&&(Rt.pointer.pointer_type_temp=T.P.POINTER)}),jQuery(G.container).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{0==r.button&&(G.container.includes("#")&&G.container.includes(r.target.getAttribute("id"))||G.container.includes(".")&&G.container.includes(r.target.getAttribute("class"))||G.container.includes(r.target.nodeName))&&(Rt.pointer.pointer_type_temp||Rt.pointer.pointer_type)===T.P.POINTER&&(Rt.dataSelect.ids=[])}),jQuery(G.container).off("touchmove.icdt-init").on("touchmove.icdt-init",r=>{r.preventDefault()});const n=r=>{switch(Rt.pointer.pointer_type_temp||Rt.pointer.pointer_type){case T.P.POINTER:j(r);break;case T.P.HAND:(G=>{(0,rt.I)(G,new K,1,{x:0,y:0})})(r);break;case T.P.PEN:(0,wt.u)(r);break;case T.P.SHAPE:(G=>{var i=null;switch(Rt.pointer.shape_type){case x.h.CIRCLE:i=new J;break;case x.h.ELLIPSE:i=new q;break;case x.h.LINE:i=new E;break;case x.h.RECT:i=new F;break;case x.h.POLYGON:var n;i=new st(null===(n=it.find(o=>o.type==Rt.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case x.h.FOREIGNOBJECT:i=new vt;break;case x.h.IMAGE:i=new ce;break;case x.h.TEXT:case x.h.PATH:i=new Lt}i&&(0,rt.I)(G,i)})(r);break;case T.P.FOREIGNOBJECT:(G=>{(0,rt.I)(G,new vt)})(r);break;case T.P.IMAGE:(G=>{(0,rt.I)(G,new ce)})(r);break;case T.P.TEXT:(G=>{(0,rt.I)(G,new B)})(r);break;case T.P.ERASER:(G=>{(0,rt.I)(G,new Xt)})(r);break;case T.P.INDEX:(0,O.h)(r)}};let o=!1;jQuery(G.target).off("touchstart.icdt-init").on("touchstart.icdt-init",r=>{o=!0,n({touchEvent:r})}),jQuery(G.target).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{if(1!=r.button){if(o)return void(o=!1);n({mouseEvent:r})}}),G.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",r=>{Rt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,It.K)(r))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",r=>{Rt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,It.K)(r))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(de,Kt,v)=>{v.d(Kt,{h:()=>C,y:()=>_});var T=v(7873),y=v(6611),lt=v(9506),R=v(1308),rt=v(5970);const C=K=>{var x,nt,it,yt;let f=(null===(x=K.mouseEvent)||void 0===x?void 0:x.target)||(null===(nt=K.touchEvent)||void 0===nt?void 0:nt.target),J=(null==f?void 0:f.getAttribute("id"))||"",I=null==f?void 0:f.nodeName,q=jQuery(f).parents("g[id]").attr("id")||"";if(![T.F.INDEX_GROUP].includes(q))if(null!==(it=K.mouseEvent)&&void 0!==it&&it.altKey||null!==(yt=K.touchEvent)&&void 0!==yt&&yt.altKey||!J||J.match(/[^0-9]/)||!y.L.dataSelect.nodeName.includes(I)){var at;y.L.dataSelect.ids.length&&(y.L.dataSelect.ids=[]),(0==(null===(at=K.mouseEvent)||void 0===at?void 0:at.button)||K.touchEvent)&&((K,x)=>{let J=(0,rt.RY)(T.F.SCAN_GROUP,"g"),I=(0,lt.CE)(0,0,1,1);(0,rt.xJ)(J,I),((K,x,nt,it)=>{(0,R.I)(K,{start:J=>{},move:(J,I)=>{((J,I,q,at)=>{x=(0,lt.CE)(J,I,q,at),(0,rt.xJ)(nt,x)})(I[0][0],I[0][1],J.x,J.y)},end:(J,I)=>{null==nt||nt.remove(),y.L.dataSelect.ids=y.L.data.getNodeInArea(Math.min(I[0][0],J.x),Math.min(I[0][1],J.y),Math.max(I[0][0],J.x),Math.max(I[0][1],J.y)),it(y.L.dataSelect.nodes)}})})(K,I,J,x)})(K,j)}else{var F,Q;let st=parseFloat(J||"0");y.L.dataSelect.ids=null!==(F=K.mouseEvent)&&void 0!==F&&F.shiftKey||null!==(Q=K.touchEvent)&&void 0!==Q&&Q.shiftKey?[st].concat(y.L.dataSelect.ids).filter((E,mt,jt)=>jt.indexOf(E)==mt):[st],j(y.L.dataSelect.nodes)}},j=K=>{var x,nt;let it=1;var yt,f;if(K.length&&(it=Math.max.apply(null,null!==(yt=null===(f=y.L.data.slide)||void 0===f||null===(f=f.svg)||void 0===f?void 0:f.nodes.map(I=>{var q;return null!==(q=I.idx)&&void 0!==q?q:0}))&&void 0!==yt?yt:[0])+1),1==K.length)K[0].idx||(K[0].idx=it,K[0].time=0);else if(K.length>=0){let I=K.map(at=>{var F;return null!==(F=at.idx)&&void 0!==F?F:0}).filter(at=>at>0),q=I.length?Math.min.apply(null,I):it;K.forEach(at=>{var F;at.idx=q,at.time=null!==(F=at.time)&&void 0!==F?F:0})}let J=(0,rt.RY)(T.F.INDEX_GROUP,"g");(0,rt.IA)(J,null!==(x=null===(nt=y.L.data.slide)||void 0===nt||null===(nt=nt.svg)||void 0===nt?void 0:nt.nodes)&&void 0!==x?x:[])},_=K=>{var x,nt,it;null!=K&&null!==(x=K.svg)&&void 0!==x&&x.nodes&&K.svg.nodes.forEach(f=>{f.idx=0,f.time=null});let yt=(0,rt.RY)(T.F.INDEX_GROUP,"g");(0,rt.IA)(yt,null!==(nt=null===(it=y.L.data.slide)||void 0===it||null===(it=it.svg)||void 0===it?void 0:it.nodes)&&void 0!==nt?nt:[])}},7135:(de,Kt,v)=>{v.d(Kt,{K:()=>x,X:()=>K});var T=v(6195),y=v(1477),lt=v(3603),R=v(6611),rt=v(1026),S=v(9841),h=v(2492),C=v(6752),j=v(5483);const K=new class _{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:y.r.Escape,fn:()=>{R.L.dataSelect.ids.length&&(R.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:y.r.Delete,fn:()=>{R.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:y.r.Space,fn:()=>{R.L.pointer.pointer_type_temp=lt.P.HAND}},this.onchange={type:"keyup",key:y.r.Space,fn:()=>{R.L.pointer.pointer_type_temp=lt.P.POINTER}},this.onchange={type:"keydown",key:y.r.ArrowLeft,fn:()=>{R.L.dataSelect.ids.length||R.L.data.backSlide()}},this.onchange={type:"keydown",key:y.r.ArrowRight,fn:()=>{R.L.dataSelect.ids.length||R.L.data.nextSlide()}},this.onchange={type:"keydown",key:y.r.PageDown,fn:()=>{R.L.dataSelect.ids.length||R.L.data.backSlide()}},this.onchange={type:"keydown",key:y.r.PageUp,fn:()=>{R.L.dataSelect.ids.length||R.L.data.nextSlide()}},this.onchange={type:"keydown",key:y.r.ArrowLeft,fn:()=>{R.L.dataSelect.ids.length&&(R.L.dataSelect.nodes.forEach(it=>{(0,C.ei)(it,(0,h.z)(it.size.x-(0,S.$)(1)))}),(0,j.D)(R.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:y.r.ArrowRight,fn:()=>{R.L.dataSelect.ids.length&&(R.L.dataSelect.nodes.forEach(it=>{(0,C.ei)(it,(0,h.z)(it.size.x+(0,S.$)(1)))}),(0,j.D)(R.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:y.r.ArrowUp,fn:()=>{R.L.dataSelect.ids.length&&(R.L.dataSelect.nodes.forEach(it=>{(0,C.ZF)(it,(0,h.z)(it.size.y-(0,S.$)(1)))}),(0,j.D)(R.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:y.r.ArrowDown,fn:()=>{R.L.dataSelect.ids.length&&(R.L.dataSelect.nodes.forEach(it=>{(0,C.ZF)(it,(0,h.z)(it.size.y+(0,S.$)(1)))}),(0,j.D)(R.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:y.r.Digit1,fn:it=>{it.shiftKey&&(R.L.reloadView(),R.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:y.r.Digit0,fn:it=>{it.ctrlKey&&(R.L.screen.zoomTo=100)}},this.onchange={type:"keydown",key:y.r.Equal,fn:it=>{it.ctrlKey&&R.L.screen.zoomIn()}},this.onchange={type:"keydown",key:y.r.Minus,fn:it=>{it.ctrlKey&&R.L.screen.zoomOut()}},this.onchange={type:"keydown",key:y.r.KeyA,fn:it=>{it.ctrlKey&&(R.L.dataSelect.ids=R.L.data.getNodeAll(),(0,j.D)(R.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:y.r.KeyC,fn:it=>{if(it.ctrlKey){let yt=R.L.dataSelect.nodes;yt&&(0,T.IB)({params:{type:"nodes",nodes:yt}})}}},this.onchange={type:"keydown",key:y.r.KeyV,fn:it=>{it.ctrlKey&&(0,T.A9)({callback:yt=>{var f,J;"nodes"==(null==yt?void 0:yt.type)&&null!=yt&&null!==(f=yt.nodes)&&void 0!==f&&f.length&&(null==yt||null===(J=yt.nodes)||void 0===J||J.forEach(I=>{it.shiftKey||R.L.data.findNode(I.id).id&&(I.size.x+=16,I.size.y+=16),I.id=Math.ceil(1e9*Math.random()),R.L.data.node=I}),(0,rt.t)(R.L.data.slide))}})}},this.onchange={type:"keydown",key:y.r.KeyZ,fn:it=>{it.ctrlKey&&it.shiftKey?R.L.history.redo():it.ctrlKey&&R.L.history.undo()}},this.onchange={type:"keydown",key:y.r.BracketLeft,fn:it=>{it.ctrlKey&&it.shiftKey?R.L.data.sendToBack(R.L.dataSelect.ids):it.ctrlKey?R.L.data.sendToBackStep(R.L.dataSelect.ids,-2):R.L.data.sendToBackArea(R.L.dataSelect.ids)}},this.onchange={type:"keydown",key:y.r.BracketRight,fn:it=>{it.ctrlKey&&it.shiftKey?R.L.data.bringToFront(R.L.dataSelect.ids):it.ctrlKey?R.L.data.bringToFrontStep(R.L.dataSelect.ids,1):R.L.data.bringToFrontArea(R.L.dataSelect.ids)}}}set onchange(it){let yt=this._fnChanges.find(f=>f.eventType==it.type&&f.eventKey==it.key);yt?yt.fns.push(it.fn):this._fnChanges.push({eventType:it.type,eventKey:it.key,fns:[it.fn]})}change(it,yt,f){var J;null===(J=this._fnChanges.find(I=>I.eventType==it&&I.eventKey==yt))||void 0===J||J.fns.forEach(I=>I(f))}},x=nt=>{K.change(nt.type,nt.keyCode||nt.which||nt.charCode||0,nt)}},669:(de,Kt,v)=>{v.d(Kt,{O:()=>C});var T=v(6407),y=v(5970),lt=v(1131),R=v(9841),rt=v(7873),S=v(6611),h=v(1281);class C{constructor(_,K){var x,nt;let it={stroke:"#FF0000",strokeWidth:(0,R.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,R.$)(8)},{element:yt}=(0,T.X)(Math.ceil(1e9*Math.random()),{size:K});window.document.getElementById(rt.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(Q=>null==Q?void 0:Q.remove()),window.document.getElementById(rt.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(Q=>null==Q?void 0:Q.remove()),null===(x=window.document.getElementById(rt.F.INTERACTIVE_GROUP))||void 0===x||x.appendChild(yt);var I=Q=>{if(!Q.length)return;let st=[];if(1==Q.length){var U;let{size:E}=null!==(U=null!=_?_:S.L.dataSelect.nodes[0])&&void 0!==U?U:{};if(!E)return;st=[[E.x+E.width/2,E.y+E.height/2],Q[0]]}else st=[...Q];at(st),q(st[0],"start"),q(st[st.length-1],"end")},q=(Q,st)=>{Q&&((U=>{let{element:E}=(0,h.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==st?"#FF0000":"#00BA00",strokeWidth:(0,R.$)(1)},size:{x:Q[0]-5,y:Q[1]-5,width:10,height:10}});null===(U=window.document.getElementById(rt.F.INTERACTIVE_GROUP))||void 0===U||U.prepend(E)})(),((U,E)=>{let{size:mt}=null!==(U=null!=_?_:S.L.dataSelect.nodes[0])&&void 0!==U?U:{};if(!mt)return;let jt=[[Q[0]-mt.width/2,Q[1]-mt.height/2],[Q[0]+mt.width/2,Q[1]-mt.height/2],[Q[0]+mt.width/2,Q[1]+mt.height/2],[Q[0]-mt.width/2,Q[1]+mt.height/2],[Q[0]-mt.width/2,Q[1]-mt.height/2]],{element:Lt}=(0,T.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,R.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,R.$)(8)},size:{x:0,y:0,width:10,height:10,points:jt}});null===(E=window.document.getElementById(rt.F.INTERACTIVE_GROUP))||void 0===E||E.prepend(Lt)})())},at=Q=>{let U=lt.n8j().x(E=>E[0]).y(E=>E[1]).curve(lt.qrM)(Q);yt.setAttribute("d",U)};(0,y.tD)(yt,it),I(null!==(nt=null==K?void 0:K.points)&&void 0!==nt?nt:[]);let F="";return{start:Q=>{F=`M ${Q.x} ${Q.y} L ${Q.x} ${Q.y}`},move:(Q,st)=>{F+=` ${Q.x} ${Q.y}`,yt.setAttribute("d",F)},end:(Q,st)=>{I(st),st.length&&(window.interactivePoints=st)}}}}},4979:(de,Kt,v)=>{v.d(Kt,{z:()=>it,u:()=>nt});var T=v(7873),y=v(2409),lt=v(6611),R=v(1308),rt=v(5970),S=v(1131),h=v(6407),C=v(1999),j=v(4896);class _{constructor(){let f={stroke:lt.L.attribute.stroke,strokeWidth:lt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:J,element:I,attribute:q,size:at}=(0,h.X)(Math.ceil(1e9*Math.random()),{attribute:f});(0,rt.tD)(I,q);let F="",Q="";return{start:U=>{F=`M ${U.x} ${U.y} L ${U.x} ${U.y}`},move:(U,E)=>{((U,E)=>{F+=` ${U} ${E}`,I.setAttribute("d",F)})(U.x,U.y)},end:(U,E)=>{var mt;E.length>=3?(Q=null!==(mt=S.n8j().x(et=>et[0]).y(et=>et[1]).curve(S.qrM)(E))&&void 0!==mt?mt:"",I.setAttribute("d",Q)):I.setAttribute("d",F);let jt=(0,j.CS)(Q||F),{minX:Lt,minY:Pt,maxX:vt,maxY:xt}=(0,j.lP)(jt);at.x=Lt,at.y=Pt,at.width=vt-Lt||1,at.height=xt-Pt||1,at.ratioMaps=(0,j.nf)(at,jt),lt.L.data.node=Object.assign({id:J,type:C.h.PATH,name:"Path"},{size:at,attribute:q})}}}}class K{constructor(){let f={stroke:lt.L.attribute.stroke,strokeOpacity:.4,strokeWidth:lt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:J,element:I,attribute:q,size:at}=(0,h.X)(Math.ceil(1e9*Math.random()),{attribute:f});(0,rt.tD)(I,q);let F="";return{start:U=>{F=`M ${U.x} ${U.y} L ${U.x} ${U.y}`},move:(U,E)=>{((U,E)=>{F+=` ${U} ${E}`,I.setAttribute("d",F)})(U.x,U.y)},end:(U,E)=>{let mt=(0,j.CS)(F),{minX:jt,minY:Lt,maxX:Pt,maxY:vt}=(0,j.lP)(mt);at.x=jt,at.y=Lt,at.width=Pt-jt||1,at.height=vt-Lt||1,at.ratioMaps=(0,j.nf)(at,mt),lt.L.data.node=Object.assign({id:J,type:C.h.PATH,name:"Path"},{size:at,attribute:q})}}}}var x=v(669);const nt=yt=>{switch(lt.L.pointer.pen_type){case y.F.DRAW:(0,R.I)(yt,new _);break;case y.F.HIGHTLIGH:(0,R.I)(yt,new K);break;case y.F.INTERACTIVE:it(yt)}},it=yt=>{var f,J;let I=(0,rt.RY)(T.F.INTERACTIVE_GROUP,"g"),q=null!==(f=null===(J=lt.L.data.slide)||void 0===J||null===(J=J.svg)||void 0===J?void 0:J.viewBox)&&void 0!==f?f:(()=>{let{width:at,height:F}=lt.L.screen.get;return{x:0,y:0,width:at,height:F}})();(0,rt.KP)(I,q),yt&&(0,R.I)(yt,new x.O)}},5483:(de,Kt,v)=>{v.d(Kt,{D:()=>f});var T=v(7873),y=v(6611),lt=v(9506),R=v(1308),rt=v(5970),S=v(2492);const j=(J,I,q,at,F)=>{let{x:Q,y:st,width:U,height:E}=q;0==U&&(U=1),0==E&&(E=1);let mt=at.map(et=>Object.assign({},et.size)),Lt=[],xt=!1;(0,R.I)(J,{start:et=>{at.forEach(et=>{let{id:It,size:wt,attribute:gt}=et;Lt.push({id:It,type:"size",from:JSON.parse(JSON.stringify({id:It,size:wt,attribute:gt}))})})},move:(et,It,wt)=>{((et,It,wt,gt,z)=>{let Gt=wt-et,D=gt-It;(()=>{let s,P=(U||1)/(E||1);switch(I){case"rect-center":s=null!=z&&z.shiftKey?Math.abs(wt-et)>=Math.abs(gt-It)?{x:Q+wt-et,y:st,width:U,height:E}:{x:Q,y:st+gt-It,width:U,height:E}:{x:Q+wt-et,y:st+gt-It,width:U,height:E};break;case"rect-top-left":s=null!=z&&z.shiftKey&&null!=z&&z.altKey?P>=1?{x:Q+(wt-et),y:st+(wt-et)/P,width:U-2*(wt-et),height:E-2*(wt-et)/P}:{x:Q+(gt-It)*P,y:st+(gt-It),width:U-2*(gt-It)*P,height:E-2*(gt-It)}:null!=z&&z.shiftKey?P>=1?{x:Q+(wt-et),y:st+(wt-et)/P,width:U-(wt-et),height:E-(wt-et)/P}:{x:Q+(gt-It)*P,y:st+(gt-It),width:U-(gt-It)*P,height:E-(gt-It)}:null!=z&&z.altKey?{x:Q+(wt-et),y:st+(gt-It),width:U-2*(wt-et),height:E-2*(gt-It)}:{x:Q+(wt-et),y:st+(gt-It),width:U-(wt-et),height:E-(gt-It)};break;case"rect-top-right":s=null!=z&&z.shiftKey&&null!=z&&z.altKey?P>=1?{x:Q-(wt-et),y:st-(wt-et)/P,width:U+2*(wt-et),height:E+2*(wt-et)/P}:{x:Q+(gt-It)*P,y:st+(gt-It),width:U-2*(gt-It)*P,height:E-2*(gt-It)}:null!=z&&z.shiftKey?P>=1?{x:Q,y:st-(wt-et)/P,width:U+(wt-et),height:E+(wt-et)/P}:{x:Q,y:st+(gt-It),width:U-(gt-It)*P,height:E-(gt-It)}:null!=z&&z.altKey?{x:Q-(wt-et),y:st+(gt-It),width:U+2*(wt-et),height:E-2*(gt-It)}:{x:Q,y:st+(gt-It),width:U+(wt-et),height:E-(gt-It)};break;case"rect-bottom-left":s=null!=z&&z.shiftKey&&null!=z&&z.altKey?P>=1?{x:Q+(wt-et),y:st+(wt-et)/P,width:U-2*(wt-et),height:E-2*(wt-et)/P}:{x:Q-(gt-It)*P,y:st-(gt-It),width:U+2*(gt-It)*P,height:E+2*(gt-It)}:null!=z&&z.shiftKey?P>=1?{x:Q+(wt-et),y:st,width:U-(wt-et),height:E-(wt-et)/P}:{x:Q-(gt-It)*P,y:st,width:U+(gt-It)*P,height:E+(gt-It)}:null!=z&&z.altKey?{x:Q+(wt-et),y:st-(gt-It),width:U-2*(wt-et),height:E+2*(gt-It)}:{x:Q+(wt-et),y:st,width:U-(wt-et),height:E+(gt-It)};break;case"rect-bottom-right":s=null!=z&&z.shiftKey&&null!=z&&z.altKey?P>=1?{x:Q-(wt-et),y:st-(wt-et)/P,width:U+2*(wt-et),height:E+2*(wt-et)/P}:{x:Q-(gt-It)*P,y:st-(gt-It),width:U+2*(gt-It)*P,height:E+2*(gt-It)}:null!=z&&z.shiftKey?P>=1?{x:Q,y:st,width:U+(wt-et),height:E+(wt-et)/P}:{x:Q,y:st,width:U+(gt-It)*P,height:E+(gt-It)}:null!=z&&z.altKey?{x:Q-(wt-et),y:st-(gt-It),width:U+2*(wt-et),height:E+2*(gt-It)}:{x:Q,y:st,width:U+(wt-et),height:E+(gt-It)};break;case"rect-top":s=null!=z&&z.shiftKey?{x:Q+D/2*P,y:st+D,width:U-D*P,height:E-D}:null!=z&&z.altKey?{x:Q,y:st+D,width:U,height:E-2*D}:{x:Q,y:st+D,width:U,height:E-D};break;case"rect-bottom":s=null!=z&&z.shiftKey?{x:Q-D/2*P,y:st,width:U+D*P,height:E+D}:null!=z&&z.altKey?{x:Q,y:st-D,width:U,height:E+2*D}:{x:Q,y:st,width:U,height:E+D};break;case"rect-left":s=null!=z&&z.shiftKey?{x:Q+Gt,y:st+Gt/2/P,width:U-Gt,height:E-Gt/P}:null!=z&&z.altKey?{x:Q+Gt,y:st,width:U-2*Gt,height:E}:{x:Q+Gt,y:st,width:U-Gt,height:E};break;case"rect-right":s=null!=z&&z.shiftKey?{x:Q,y:st-Gt/2/P,width:U+Gt,height:E+Gt/P}:null!=z&&z.altKey?{x:Q-Gt,y:st,width:U+2*Gt,height:E}:{x:Q,y:st,width:U+Gt,height:E};break;default:s={x:Q+wt-et,y:st+gt-It,width:U,height:E}}s.width<=0&&(s.width=1),s.height<=0&&(s.height=1),s.x=(0,S.z)(s.x,1),s.y=(0,S.z)(s.y,1),s.width=(0,S.z)(s.width,1),s.height=(0,S.z)(s.height,1),Object.assign(q,s),(0,rt.D_)(F,at,s),(()=>{let b=Q-s.x,H=st-s.y,tt=(s.width-U)/U,zt=(s.height-E)/E;at.forEach((Zt,Yt)=>{let Qt=mt[Yt],ct=st-Qt.y,Xt={x:(0,S.z)(Qt.x-(b+(Q-Qt.x)*tt),100),y:(0,S.z)(Qt.y-(H+ct*zt),100),width:(0,S.z)(Qt.width+Qt.width*tt,100),height:(0,S.z)(Qt.height+Qt.height*zt,100)},{id:M,type:d,size:B,attribute:ot}=Zt;Object.assign(B,Xt),Object.assign(ot,(0,lt.xW)(d,B,ot)),(0,rt.tD)(window.document.getElementById(M),ot)})})()})()})(It[0][0],It[0][1],et.x,et.y,wt),xt=!0},end:(et,It)=>{xt&&(at.forEach(et=>{let{id:It,size:wt,attribute:gt}=et,z=Lt.find(Gt=>Gt.id==It);z&&(z.to=JSON.parse(JSON.stringify({id:It,size:wt,attribute:gt})))}),y.L.history.push(Lt))}})},x=(J,I,q,at)=>{let xt,{id:F,type:Q,size:st,attribute:U}=q,{x:E,y:mt,width:jt,height:Lt,ratios:Pt}=st,vt=(jt||1)/(Lt||1),et=null,gt=!1;(0,R.I)(J,{start:Gt=>{et=JSON.parse(JSON.stringify({id:F,size:st,attribute:U}))},move:(Gt,D,P)=>{((Gt,D,P,s,b)=>{let H=P-Gt,tt=s-D;switch(I){case"rect-center":xt=null!=b&&b.shiftKey?Math.abs(H)>=Math.abs(tt)?{x:E+H,y:mt,width:jt,height:Lt}:{x:E,y:mt+tt,width:jt,height:Lt}:{x:E+H,y:mt+tt,width:jt,height:Lt};break;case"rect-top-left":xt=null!=b&&b.shiftKey&&null!=b&&b.altKey?vt>=1?{x:E+H,y:mt+H/vt,width:jt-2*H,height:Lt-2*H/vt}:{x:E+tt*vt,y:mt+tt,width:jt-2*tt*vt,height:Lt-2*tt}:null!=b&&b.shiftKey?vt>=1?{x:E+H,y:mt+H/vt,width:jt-H,height:Lt-H/vt}:{x:E+tt*vt,y:mt+tt,width:jt-tt*vt,height:Lt-tt}:null!=b&&b.altKey?{x:E+H,y:mt+tt,width:jt-2*H,height:Lt-2*tt}:{x:E+H,y:mt+tt,width:jt-H,height:Lt-tt};break;case"rect-top-right":xt=null!=b&&b.shiftKey&&null!=b&&b.altKey?vt>=1?{x:E-H,y:mt-H/vt,width:jt+2*H,height:Lt+2*H/vt}:{x:E+tt*vt,y:mt+tt,width:jt-2*tt*vt,height:Lt-2*tt}:null!=b&&b.shiftKey?vt>=1?{x:E,y:mt-H/vt,width:jt+H,height:Lt+H/vt}:{x:E,y:mt+tt,width:jt-tt*vt,height:Lt-tt}:null!=b&&b.altKey?{x:E-H,y:mt+tt,width:jt+2*H,height:Lt-2*tt}:{x:E,y:mt+tt,width:jt+H,height:Lt-tt};break;case"rect-bottom-left":xt=null!=b&&b.shiftKey&&null!=b&&b.altKey?vt>=1?{x:E+H,y:mt+H/vt,width:jt-2*H,height:Lt-2*H/vt}:{x:E-tt*vt,y:mt-tt,width:jt+2*tt*vt,height:Lt+2*tt}:null!=b&&b.shiftKey?vt>=1?{x:E+H,y:mt,width:jt-H,height:Lt-H/vt}:{x:E-tt*vt,y:mt,width:jt+tt*vt,height:Lt+tt}:null!=b&&b.altKey?{x:E+H,y:mt-tt,width:jt-2*H,height:Lt+2*tt}:{x:E+H,y:mt,width:jt-H,height:Lt+tt};break;case"rect-bottom-right":xt=null!=b&&b.shiftKey&&null!=b&&b.altKey?vt>=1?{x:E-H,y:mt-H/vt,width:jt+2*H,height:Lt+2*H/vt}:{x:E-tt*vt,y:mt-tt,width:jt+2*tt*vt,height:Lt+2*tt}:null!=b&&b.shiftKey?vt>=1?{x:E,y:mt,width:jt+H,height:Lt+H/vt}:{x:E,y:mt,width:jt+tt*vt,height:Lt+tt}:null!=b&&b.altKey?{x:E-H,y:mt-tt,width:jt+2*H,height:Lt+2*tt}:{x:E,y:mt,width:jt+H,height:Lt+tt};break;case"rect-top":xt=null!=b&&b.shiftKey?{x:E+tt/2*vt,y:mt+tt,width:jt-tt*vt,height:Lt-tt}:null!=b&&b.altKey?{x:E,y:mt+tt,width:jt,height:Lt-2*tt}:{x:E,y:mt+tt,width:jt,height:Lt-tt};break;case"rect-bottom":xt=null!=b&&b.shiftKey?{x:E-tt/2*vt,y:mt,width:jt+tt*vt,height:Lt+tt}:null!=b&&b.altKey?{x:E,y:mt-tt,width:jt,height:Lt+2*tt}:{x:E,y:mt,width:jt,height:Lt+tt};break;case"rect-left":xt=null!=b&&b.shiftKey?{x:E+H,y:mt+H/2/vt,width:jt-H,height:Lt-H/vt}:null!=b&&b.altKey?{x:E+H,y:mt,width:jt-2*H,height:Lt}:{x:E+H,y:mt,width:jt-H,height:Lt};break;case"rect-right":xt=null!=b&&b.shiftKey?{x:E,y:mt-H/2/vt,width:jt+H,height:Lt+H/vt}:null!=b&&b.altKey?{x:E-H,y:mt,width:jt+2*H,height:Lt}:{x:E,y:mt,width:jt+H,height:Lt};break;default:xt=I.match(/^point-(\d+)/)?{x:E,y:mt,width:jt,height:Lt}:{x:E+H,y:mt+tt,width:jt,height:Lt}}xt.width<=0&&(xt.width=1),xt.height<=0&&(xt.height=1);let zt=I.match(/^point-(\d+)/);if(zt){let Yt=parseInt(zt[1]);if("number"==typeof Yt){var Zt;xt.ratios=null==Pt?void 0:Pt.map((Xt,M)=>M==Yt?[(0,S.z)(Xt[0]+(0==xt.width?0:H/xt.width),100),(0,S.z)(Xt[1]+(0==xt.height?0:tt/xt.height),100)]:Xt);let Qt=nt(xt.x,xt.y,xt.width,xt.height,null!==(Zt=xt.ratios)&&void 0!==Zt?Zt:[]),Nt=yt(Qt),ct=it(Nt.x,Nt.y,Nt.width,Nt.height,Qt);xt={x:Nt.x,y:Nt.y,width:Nt.width,height:Nt.height,ratios:ct}}}xt.x=(0,S.z)(xt.x,1),xt.y=(0,S.z)(xt.y,1),xt.width=(0,S.z)(xt.width,1),xt.height=(0,S.z)(xt.height,1),Object.assign(st,xt),Object.assign(U,(0,lt.xW)(Q,st,U)),(0,rt.tD)(window.document.getElementById(F),U),(0,rt.AE)(at,q)})(D[0][0],D[0][1],Gt.x,Gt.y,P),gt=!0},end:(Gt,D)=>{gt&&et&&y.L.history.push([{type:"size",from:et,to:JSON.parse(JSON.stringify({id:F,size:st,attribute:U}))}])}})},nt=(J,I,q,at,F)=>F.map(Q=>[J+q*Q[0],I+at*Q[1]]),it=(J,I,q,at,F)=>F.map(Q=>[0==q?0:(0,S.z)((Q[0]-J)/q,100),0==at?0:(0,S.z)((Q[1]-I)/at,100)]),yt=J=>{let I=[],q=[];J.map(U=>{I.push(U[0]),q.push(U[1])});let at=Math.min.apply(null,I),F=Math.min.apply(null,q);return{x:at,y:F,width:Math.max.apply(null,I)-at||1,height:Math.max.apply(null,q)-F||1}},f=J=>{J.length>1?(J=>{let I=999999,q=999999,at=-999999,F=-999999;J.forEach(U=>{I=Math.min(I,U.size.x),q=Math.min(q,U.size.y),at=Math.max(at,U.size.x+U.size.width),F=Math.max(F,U.size.y+U.size.height)});let Q=(0,rt.RY)(T.F.RESIZE_GROUP,"g"),st=(0,lt.CE)(I,q,at,F);st.x=(0,S.z)(st.x,100),st.y=(0,S.z)(st.y,100),st.width=(0,S.z)(st.width,100),st.height=(0,S.z)(st.height,100),(0,rt.D_)(Q,J,st).forEach(U=>{((J,I,q,at,F)=>{let Q=!1;null==J||J.addEventListener("touchstart",st=>{Q=!0,j({touchEvent:st},I,q,at,F)}),null==J||J.addEventListener("mousedown",st=>{if(0==st.button){if(Q)return void(Q=!1);j({mouseEvent:st},I,q,at,F)}})})(U.element,U.posType,st,J,Q)})})(J):1==J.length&&(J=>{let I=(0,rt.RY)(T.F.RESIZE_GROUP,"g");if(J.length>0){let q=J[0];(0,rt.AE)(I,q).forEach(at=>{((J,I,q,at)=>{let F=!1;null==J||J.addEventListener("touchstart",Q=>{F=!0,x({touchEvent:Q},I,q,at)}),null==J||J.addEventListener("mousedown",Q=>{if(0==Q.button){if(F)return void(F=!1);x({mouseEvent:Q},I,q,at)}})})(at.element,at.posType,q,I)})}})(J)}},1026:(de,Kt,v)=>{v.d(Kt,{$:()=>I,t:()=>J});var T=v(7873),y=v(1281),lt=v(6153),R=v(3477),rt=v(7945),S=v(3069),h=v(3073),C=v(1999),j=v(6407),_=v(6847),K=v(745),x=v(9173),nt=v(6611),it=v(5970),yt=v(4669),f=v(3617);const J=(q,at,F)=>{var Q;if(at&&!(null!=F?F:window).document.getElementById(at))return;if(at){let U=(null!=F?F:window).document.getElementById(at);jQuery(U).find("#"+T.F.BACKGROUND_GROUP).empty();let E=(0,it.RY)(T.F.BACKGROUND_GROUP,"g",void 0,U);(0,it.I6)(E,q)}else{jQuery(nt.L.target).find("#"+T.F.BACKGROUND_GROUP).empty();let U=(0,it.RY)(T.F.BACKGROUND_GROUP,"g",void 0,nt.L.target);(0,it.I6)(U,q)}let st=(U,E)=>{E=at&&E?`${at}-${E}`:null!=at?at:E,null==U||U.forEach(mt=>{let jt=at?`${at}-${mt.id}`:mt.id;var Lt;if(mt.isdeleted)null===(Lt=(null!=F?F:window).document.getElementById(jt))||void 0===Lt||Lt.remove();else switch(mt.type){case C.h.GROUP:(0,h.v)(jt,{},E?(null!=F?F:window).document.getElementById(E):null),st(mt.nodes,mt.id);break;case C.h.CIRCLE:(0,y.K)(jt,{size:mt.size,attribute:mt.attribute},E?(null!=F?F:window).document.getElementById(E):null);break;case C.h.ELLIPSE:(0,lt.W)(jt,{size:mt.size,attribute:mt.attribute},E?(null!=F?F:window).document.getElementById(E):null);break;case C.h.LINE:(0,S.q)(jt,{size:mt.size,attribute:mt.attribute},E?(null!=F?F:window).document.getElementById(E):null);break;case C.h.RECT:(0,rt.a)(jt,{size:mt.size,attribute:mt.attribute},E?(null!=F?F:window).document.getElementById(E):null);break;case C.h.POLYGON:(0,R.u)(jt,{size:mt.size,attribute:mt.attribute},E?(null!=F?F:window).document.getElementById(E):null);break;case C.h.POLYLINE:(0,f.E)(jt,{size:mt.size,attribute:mt.attribute},E?(null!=F?F:window).document.getElementById(E):null);break;case C.h.FOREIGNOBJECT:(0,K.$)(jt,{size:mt.size,attribute:mt.attribute,style:mt.style,source:mt.source},E?(null!=F?F:window).document.getElementById(E):null);break;case C.h.IMAGE:(0,x.B)(jt,{size:mt.size,attribute:mt.attribute,source:mt.source},E?(null!=F?F:window).document.getElementById(E):null);break;case C.h.TEXT:(0,_.L)(jt,{size:mt.size,attribute:mt.attribute,source:mt.source},E?(null!=F?F:window).document.getElementById(E):null);break;case C.h.TSPAN:(0,yt.M)(jt,{size:mt.size,attribute:mt.attribute,source:mt.source},E?(null!=F?F:window).document.getElementById(E):null);break;case C.h.PATH:(0,j.X)(jt,{size:mt.size,attribute:mt.attribute},E?(null!=F?F:window).document.getElementById(E):null)}})};st(null==q||null===(Q=q.svg)||void 0===Q?void 0:Q.nodes)},I=(q,at)=>{var F;if(at&&!window.document.getElementById(at))return;let Q=(st,U)=>{U=U?`${at}-${U}`:at,null==st||st.forEach(E=>{jQuery("#"+(at?`${at}-${E.id}`:E.id)).appendTo(U?window.document.getElementById(U):nt.L.target),E.type==C.h.GROUP&&Q(E.nodes,E.id)})};Q(null==q||null===(F=q.svg)||void 0===F?void 0:F.nodes)}},1281:(de,Kt,v)=>{v.d(Kt,{K:()=>rt});var T=v(1999),y=v(6611),lt=v(9506),R=v(5970);const rt=(S,h,C)=>{let j=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},_=(null==h?void 0:h.attribute)||{fill:y.L.attribute.fill,stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return Object.assign(_,(0,lt.xW)(T.h.CIRCLE,j,_)),{nodeId:S,element:(0,R.fn)(S,T.h.CIRCLE,"circle",{size:j,attribute:_},C),size:j,attribute:_}}},6153:(de,Kt,v)=>{v.d(Kt,{W:()=>rt});var T=v(1999),y=v(6611),lt=v(9506),R=v(5970);const rt=(S,h,C)=>{let j=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},_=(null==h?void 0:h.attribute)||{fill:y.L.attribute.fill,stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return Object.assign(_,(0,lt.xW)(T.h.ELLIPSE,j,_)),{nodeId:S,element:(0,R.fn)(S,T.h.ELLIPSE,"ellipse",{size:j,attribute:_},C),size:j,attribute:_}}},745:(de,Kt,v)=>{v.d(Kt,{$:()=>R});var T=v(1999),y=v(9506),lt=v(5970);const R=(rt,S,h)=>{let C=(null==S?void 0:S.size)||{x:0,y:0,width:320,height:80},j=(null==S?void 0:S.attribute)||{};Object.assign(j,(0,y.xW)(T.h.FOREIGNOBJECT,C,j));let _=(null==S?void 0:S.source)||{type:"html",html:{htmlContent:""}},K=(null==S?void 0:S.style)||{};return{nodeId:rt,element:(0,lt.fn)(rt,T.h.FOREIGNOBJECT,"foreignObject",{size:C,attribute:j,style:K,source:_},h),size:C,attribute:j,style:K,source:_}}},3073:(de,Kt,v)=>{v.d(Kt,{v:()=>R});var T=v(1999),y=v(9506),lt=v(5970);const R=(S,h,C)=>{let j=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},_=(null==h?void 0:h.attribute)||{};return Object.assign(_,(0,y.xW)(T.h.GROUP,j,_)),{nodeId:S,element:(0,lt.fn)(S,T.h.GROUP,"g",{size:j,attribute:_},C),size:j,attribute:_}}},9173:(de,Kt,v)=>{v.d(Kt,{B:()=>R});var T=v(1999),y=v(9506),lt=v(5970);const R=(rt,S,h)=>{let C=(null==S?void 0:S.size)||{x:0,y:0,width:10,height:10},j=(null==S?void 0:S.attribute)||{preserveAspectRatio:"none"};Object.assign(j,(0,y.xW)(T.h.IMAGE,C,j));let _=(null==S?void 0:S.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:rt,element:(0,lt.fn)(rt,T.h.IMAGE,"image",{size:C,attribute:j,source:_},h),size:C,attribute:j,source:_}}},3069:(de,Kt,v)=>{v.d(Kt,{q:()=>rt});var T=v(1999),y=v(6611),lt=v(9506),R=v(5970);const rt=(S,h,C)=>{let j=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},_=(null==h?void 0:h.attribute)||{stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth,strokeLinecap:y.L.attribute.strokeLinecap};return Object.assign(_,(0,lt.xW)(T.h.LINE,j,_)),{nodeId:S,element:(0,R.fn)(S,T.h.LINE,"line",{size:j,attribute:_},C),size:j,attribute:_}}},6407:(de,Kt,v)=>{v.d(Kt,{X:()=>rt});var T=v(1999),y=v(6611),lt=v(9506),R=v(5970);const rt=(S,h,C)=>{let j=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},_=(null==h?void 0:h.attribute)||{stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return Object.assign(_,(0,lt.xW)(T.h.PATH,j,_)),{nodeId:S,element:(0,R.fn)(S,T.h.PATH,"path",{size:j,attribute:_},C),size:j,attribute:_}}},3477:(de,Kt,v)=>{v.d(Kt,{u:()=>rt});var T=v(1999),y=v(6611),lt=v(9506),R=v(5970);const rt=(S,h,C)=>{let j=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},_=(null==h?void 0:h.attribute)||{fill:y.L.attribute.fill,stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return Object.assign(_,(0,lt.xW)(T.h.POLYGON,j,_)),{nodeId:S,element:(0,R.fn)(S,T.h.POLYGON,"polygon",{size:j,attribute:_},C),size:j,attribute:_}}},3617:(de,Kt,v)=>{v.d(Kt,{E:()=>rt});var T=v(1999),y=v(6611),lt=v(9506),R=v(5970);const rt=(S,h,C)=>{let j=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},_=(null==h?void 0:h.attribute)||{fill:y.L.attribute.fill,stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return Object.assign(_,(0,lt.xW)(T.h.POLYLINE,j,_)),{nodeId:S,element:(0,R.fn)(S,T.h.POLYLINE,"polyline",{size:j,attribute:_},C),size:j,attribute:_}}},7945:(de,Kt,v)=>{v.d(Kt,{a:()=>rt});var T=v(1999),y=v(6611),lt=v(9506),R=v(5970);const rt=(S,h,C)=>{let j=(null==h?void 0:h.size)||{x:0,y:0,width:10,height:10},_=(null==h?void 0:h.attribute)||{fill:y.L.attribute.fill,stroke:y.L.attribute.stroke,strokeWidth:y.L.attribute.strokeWidth};return Object.assign(_,(0,lt.xW)(T.h.RECT,j,_)),{nodeId:S,element:(0,R.fn)(S,T.h.RECT,"rect",{size:j,attribute:_},C),size:j,attribute:_}}},6847:(de,Kt,v)=>{v.d(Kt,{L:()=>rt});var T=v(1999),y=v(6611),lt=v(9506),R=v(5970);const rt=(S,h,C)=>{let j=(null==h?void 0:h.size)||{x:0,y:0,width:320,height:80},_=(null==h?void 0:h.attribute)||{fill:y.L.attribute.stroke,fontFamily:y.L.attribute.fontFamily,fontSize:y.L.attribute.fontSize,textLength:y.L.attribute.textLength};Object.assign(_,(0,lt.xW)(T.h.TEXT,j,_));let K=(null==h?void 0:h.source)||{type:"text",text:{textContent:""}};return{nodeId:S,element:(0,R.fn)(S,T.h.TEXT,"text",{size:j,attribute:_,source:K},C),size:j,attribute:_,source:K}}},4669:(de,Kt,v)=>{v.d(Kt,{M:()=>rt});var T=v(1999),y=v(6611),lt=v(9506),R=v(5970);const rt=(S,h,C)=>{let j=(null==h?void 0:h.size)||{x:0,y:0,width:320,height:80},_=(null==h?void 0:h.attribute)||{fill:y.L.attribute.stroke,fontFamily:y.L.attribute.fontFamily,fontSize:y.L.attribute.fontSize,textLength:y.L.attribute.textLength};Object.assign(_,(0,lt.xW)(T.h.TSPAN,j,_));let K=(null==h?void 0:h.source)||{type:"text",text:{textContent:""}};return{nodeId:S,element:(0,R.fn)(S,T.h.TSPAN,"tspan",{size:j,attribute:_,source:K},C),size:j,attribute:_,source:K}}},9506:(de,Kt,v)=>{v.d(Kt,{CE:()=>lt,xW:()=>R});var T=v(1999),y=v(4896);const lt=(S,h,C,j,_)=>{let K={x:Math.min(S,C),y:Math.min(h,j),width:Math.abs(C-S)||1,height:Math.abs(j-h)||1};return null!=_&&_.ratio&&(K.width<=K.height?K.height=K.width*(null==_?void 0:_.ratio):K.width=K.height/(null==_?void 0:_.ratio)),Object.assign(K,{ratios:(null==_?void 0:_.ratios)||[[(S-K.x)/(K.width||1),(h-K.y)/(K.height||1)],[(C-K.x)/(K.width||1),(j-K.y)/(K.height||1)]]}),null!=_&&_.points&&(K.points=null==_?void 0:_.points),K},R=(S,h,C)=>{var j,_=(()=>{switch(S){case T.h.CIRCLE:return{cx:h.x+h.width/2,cy:h.y+h.height/2,r:Math.min(h.width/2,h.height/2)};case T.h.ELLIPSE:return{cx:h.x+h.width/2,cy:h.y+h.height/2,rx:h.width/2,ry:h.height/2};case T.h.LINE:{var K;let f={};return null===(K=h.ratios)||void 0===K||K.forEach((J,I)=>{f[`x${I+1}`]=h.x+h.width*J[0],f[`y${I+1}`]=h.y+h.height*J[1]}),f}case T.h.RECT:case T.h.FOREIGNOBJECT:case T.h.IMAGE:return{x:h.x,y:h.y,width:h.width,height:h.height};case T.h.TEXT:case T.h.TSPAN:var x;return{x:h.x,y:h.y+(C.alignmentBaseline||C.dominantBaseline?0:null!==(x=C.fontSize)&&void 0!==x?x:16)};case T.h.POLYGON:case T.h.POLYLINE:var nt;if(null!==(nt=h.ratios)&&void 0!==nt&&nt.length)return{points:(0,y.n9)(h,h.ratios)};break;case T.h.PATH:var it,yt;if(null!==(it=h.ratioMaps)&&void 0!==it&&it.length)return{d:(0,y.$N)(h,h.ratioMaps)};if(null!==(yt=h.points)&&void 0!==yt&&yt.length)return{d:`M ${(f=h.points)[0][0]} ${f[0][1]} L ${(f.map(J=>[J[0],J[1]])||[]).map(J=>J.join(" ")).join(" ")}`}}var f;return{}})();return h.rotate?(_.transform=`rotate(${h.rotate})`,_.transformOrigin=`${h.x+h.width/2} ${h.y+h.height/2}`):null!==(j=C.transform)&&void 0!==j&&j.match(/^rotate/)&&(C.transform=null,C.transformOrigin=null),_}},2492:(de,Kt,v)=>{v.d(Kt,{z:()=>T});const T=(y,lt)=>{var R;return lt=null!==(R=lt)&&void 0!==R?R:100,Math.round((y+Number.EPSILON)*lt)/lt}},9841:(de,Kt,v)=>{v.d(Kt,{$:()=>lt});var T=v(6611),y=v(2492);const lt=R=>(0,y.z)(R/T.L.screen.scale)},6752:(de,Kt,v)=>{v.d(Kt,{E$:()=>h,Nx:()=>j,ZF:()=>S,ei:()=>rt,fu:()=>C});var T=v(6611),y=v(5970),lt=v(9506),R=v(2492);const rt=(_,K)=>{let{id:x,type:nt,size:it,attribute:yt}=_,f=JSON.parse(JSON.stringify({id:x,size:it,attribute:yt}));it.x=(0,R.z)(K||0),Object.assign(yt,(0,lt.xW)(nt,it,yt)),(0,y.tD)(window.document.getElementById(x),yt),T.L.history.push([{type:"size",from:f,to:JSON.parse(JSON.stringify({id:x,size:it,attribute:yt}))}])},S=(_,K)=>{let{id:x,type:nt,size:it,attribute:yt}=_,f=JSON.parse(JSON.stringify({id:x,size:it,attribute:yt}));it.y=(0,R.z)(K||0),Object.assign(yt,(0,lt.xW)(nt,it,yt)),(0,y.tD)(window.document.getElementById(x),yt),T.L.history.push([{type:"size",from:f,to:JSON.parse(JSON.stringify({id:x,size:it,attribute:yt}))}])},h=(_,K,x)=>{let{id:nt,type:it,size:yt,attribute:f}=_;K<=0&&(K=1);let J=JSON.parse(JSON.stringify({id:nt,size:yt,attribute:f}));x&&(yt.height=(0,R.z)(K*yt.height/(yt.width||1))),yt.width=(0,R.z)(K),Object.assign(f,(0,lt.xW)(it,yt,f)),(0,y.tD)(window.document.getElementById(nt),f),T.L.history.push([{type:"size",from:J,to:JSON.parse(JSON.stringify({id:nt,size:yt,attribute:f}))}])},C=(_,K,x)=>{let{id:nt,type:it,size:yt,attribute:f}=_;K<=0&&(K=1);let J=JSON.parse(JSON.stringify({id:nt,size:yt,attribute:f}));x&&(yt.width=(0,R.z)(K*yt.width/(yt.height||1))),yt.height=(0,R.z)(K),Object.assign(f,(0,lt.xW)(it,yt,f)),(0,y.tD)(window.document.getElementById(nt),f),T.L.history.push([{type:"size",from:J,to:JSON.parse(JSON.stringify({id:nt,size:yt,attribute:f}))}])},j=(_,K)=>{let{id:x,type:nt,size:it,attribute:yt}=_,f=JSON.parse(JSON.stringify({id:x,size:it,attribute:yt}));it.rotate="number"==typeof K?(0,R.z)(K,100):void 0,Object.assign(yt,(0,lt.xW)(nt,it,yt)),(0,y.tD)(window.document.getElementById(x),yt),T.L.history.push([{type:"size",from:f,to:JSON.parse(JSON.stringify({id:x,size:it,attribute:yt}))}])}},1308:(de,Kt,v)=>{v.d(Kt,{I:()=>S});var T=v(3603),y=v(6611);class lt{constructor(C){this._points=[],this._options=C}start(C){this._points.length=0,this._points.push([C.x,C.y]),this._options.start(C)}move(C,j){this._points.push([C.x,C.y]),this._options.move(C,this._points,j)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(C=this._points[0])[0],y:C[1]}:{x:0,y:0};var C}get offsetLast(){return this._points.length>=1?{x:(C=this._points[this._points.length-1])[0],y:C[1]}:{x:0,y:0};var C}}var R=v(6078);const S=(h,C,j,_,K)=>{var x,nt,it;let yt=null,f=0,J=0;h.mouseEvent?(yt=h.mouseEvent.target,f=h.mouseEvent.offsetX,J=h.mouseEvent.offsetY):h.touchEvent&&(yt=h.touchEvent.target,h.touchEvent.touches.length&&(f=h.touchEvent.touches[0].clientX,J=h.touchEvent.touches[0].clientY));let I=null!=j?j:y.L.screen.scale,q=null!=_?_:y.L.screen.dislocation,at=null!=K?K:y.L.screen.offset,F=()=>{};var Q=new lt({start:null!==(x=null==C?void 0:C.start)&&void 0!==x?x:F,move:null!==(nt=null==C?void 0:C.move)&&void 0!==nt?nt:F,end:null!==(it=null==C?void 0:C.end)&&void 0!==it?it:F});h.mouseEvent?Q.start((0,R.D)({x:f,y:J},I,q,{x:0,y:0})):h.touchEvent&&Q.start((0,R.D)({x:f,y:J},I,q,at));let st=vt=>{Q.move((0,R.D)({x:vt.clientX,y:vt.clientY},I,q,at),{ctrlKey:vt.ctrlKey,shiftKey:vt.shiftKey,altKey:vt.altKey})},U=vt=>{Q.end(),[T.P.SHAPE,T.P.FOREIGNOBJECT,T.P.IMAGE,T.P.TEXT].includes(y.L.pointer.pointer_type)&&(vt.shiftKey||(y.L.pointer.pointer_type=T.P.POINTER))},E=vt=>{vt.touches.length&&st({clientX:vt.touches[0].clientX,clientY:vt.touches[0].clientY,ctrlKey:vt.ctrlKey,shiftKey:vt.shiftKey,altKey:vt.altKey})},mt=vt=>{U({ctrlKey:vt.ctrlKey,shiftKey:vt.shiftKey,altKey:vt.altKey}),window.removeEventListener("touchmove",E,!1),window.removeEventListener("touchend",mt,!1)},jt=vt=>{0==vt.button&&st({clientX:vt.clientX,clientY:vt.clientY,ctrlKey:vt.ctrlKey,shiftKey:vt.shiftKey,altKey:vt.altKey})},Lt=vt=>{0==vt.button&&(U({shiftKey:vt.shiftKey,ctrlKey:vt.ctrlKey,altKey:vt.altKey}),window.removeEventListener("mousemove",jt,!1),window.removeEventListener("mouseup",Lt,!1))};if(h.mouseEvent)window.addEventListener("mousemove",jt,!1),window.addEventListener("mouseup",Lt,!1);else if(h.touchEvent){var Pt;window.addEventListener("touchmove",E,!1),window.addEventListener("touchend",mt,!1),null===(Pt=yt)||void 0===Pt||Pt.addEventListener("touchmove",function(vt){vt.preventDefault()})}}},6078:(de,Kt,v)=>{v.d(Kt,{D:()=>y});var T=v(2492);const y=(lt,R,rt,S)=>(lt.x-=S.x,lt.y-=S.y,lt.x/=R,lt.y/=R,lt.x-=rt.x,lt.y-=rt.y,lt.x=(0,T.z)(lt.x),lt.y=(0,T.z)(lt.y),lt)},5619:(de,Kt,v)=>{v.d(Kt,{J:()=>ct,I:()=>Xt});var T=v(7873),y=v(6611),lt=v(1999),R=v(334),rt=v(8946),S=v(7657),h=v(6769),C=v(3591),_=v(6847),K=v(3073);var f=v(7050),J=v(9173),I=v(2492);const q=(M,d,B)=>{var ot,dt,X,O;let Y=1,ut=new Image;ut.onload=()=>{var _t,Tt,Mt,Ot;Y=(0,I.z)(ut.naturalWidth/ut.naturalHeight,100);let pt=0,kt=0,Ct=0,Ft=0;var Vt,$t,ae,se;Y>=1?(Ct=Math.min(ut.naturalWidth,null!==(Vt=null===($t=ct.slide.svg)||void 0===$t||null===($t=$t.viewBox)||void 0===$t?void 0:$t.width)&&void 0!==Vt?Vt:0),Ft=Ct/Y):(Ft=Math.min(ut.naturalHeight,null!==(ae=null===(se=ct.slide.svg)||void 0===se||null===(se=se.viewBox)||void 0===se?void 0:se.height)&&void 0!==ae?ae:0),Ct=Ft/Y),pt=((null!==(_t=null===(Tt=ct.slide.svg)||void 0===Tt||null===(Tt=Tt.viewBox)||void 0===Tt?void 0:Tt.width)&&void 0!==_t?_t:0)-Ct)/2,kt=((null!==(Mt=null===(Ot=ct.slide.svg)||void 0===Ot||null===(Ot=Ot.viewBox)||void 0===Ot?void 0:Ot.height)&&void 0!==Mt?Mt:0)-Ft)/2,d.size={x:pt,y:kt,width:Ct,height:Ft},at(d,B)},ut.onerror=_t=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,_t)},ut.src=(null!==(ot=d.source)&&void 0!==ot&&ot.path?(null===(dt=y.L.config)||void 0===dt?void 0:dt.readfileuploadurl)+(null===(X=d.source)||void 0===X?void 0:X.path):null===(O=d.source)||void 0===O?void 0:O.url)||""},at=(M,d)=>{if(M.slideStatus!=ct.slideStatus)return void d();let{element:B}=(0,J.B)(Math.ceil(1e9*Math.random()),{size:M.size,source:{type:"image",image:null==M?void 0:M.source}});setTimeout(()=>{null==B||B.remove(),d()},3e3)};var F=v(5970);const Q=(M,d,B)=>{var ot,dt,X,O;let Y=new Image;Y.onload=()=>{st(M,{width:Y.naturalWidth,height:Y.naturalHeight},d,B)},Y.onerror=ut=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,ut),B()},Y.src=(null!==(ot=d.source)&&void 0!==ot&&ot.path?(null===(dt=y.L.config)||void 0===dt?void 0:dt.readfileuploadurl)+(null===(X=d.source)||void 0===X?void 0:X.path):null===(O=d.source)||void 0===O?void 0:O.url)||""},st=(M,d,B,ot)=>{if(B.slideStatus!=ct.slideStatus)return void ot();let dt=(0,I.z)(d.width/d.height,100),X=0,O=0,Y=0,ut=0;dt>=1?(Y=d.width,Y=Math.max(Y,40),Y=Math.min(Y,40),ut=Y/dt):(ut=d.height,ut=Math.max(ut,40),ut=Math.min(ut,40),Y=ut/dt);let{size:Mt}=M;X=Mt.x+Mt.width-Y/2,O=Mt.y-ut/2;let Ot=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,J.B)(`icon-${M.id}`,{size:{x:X,y:O,width:Y,height:ut},source:{type:"image",image:null==B?void 0:B.source}},Ot),setTimeout(()=>{ot()},3e3)},U=(M,d,B)=>{var ot,dt,X,O,Y,ut,_t;if(d.slideStatus!=ct.slideStatus)return void B();if(!(null!==(ot=d.source)&&void 0!==ot&&ot.path||null!==(dt=d.source)&&void 0!==dt&&dt.url))return console.warn(`${M.id} -> audio no source!`),void B();var Tt=jQuery("#"+M.id);let Mt=null!==(X=d.iteration)&&void 0!==X?X:0;if(Mt<0&&(B(),B=function(){}),!(Tt.data("audio-running")&&Mt<0)){Tt.data("audio-running",!0);var Ot=new Audio;return Ot.autoplay=!0,Ot.loop=0!=Mt,Ot.preload="auto",Ot.controls=!0,Ot.setAttributeNode(document.createAttribute("playsinline")),Ot.addEventListener("canplay",function(){var pt=Ot.play();pt&&pt.then(function(kt){Tt.data("audio-running",!0)}).catch(function(kt){Tt.data("audio-running",!1),d.slideStatus===ct.slideStatus&&B()})}),Ot.addEventListener("timeupdate",function(){var kt;d.slideStatus!==ct.slideStatus&&((kt=this).pause(),kt.remove(),Tt.data("audio-running",!1))}),Ot.addEventListener("canplaythrough",function(){this.loop&&(Mt>0?Mt--:0==Mt&&(this.loop=!1))}),Ot.addEventListener("play",function(){}),Ot.addEventListener("pause",function(){}),Ot.addEventListener("ended",function(){this.remove(),Tt.data("audio-running",!1),d.slideStatus===ct.slideStatus&&B()}),Ot.onerror=function(){this.remove(),Tt.data("audio-running",!1),d.slideStatus===ct.slideStatus&&B()},Ot.src=(null!==(O=d.source)&&void 0!==O&&O.path?(null===(Y=y.L.config)||void 0===Y?void 0:Y.readfileuploadurl)+(null===(ut=d.source)||void 0===ut?void 0:ut.path):null===(_t=d.source)||void 0===_t?void 0:_t.url)||"",Ot}};var E=v(2837);const ce=(M,d)=>{var B;null===(B=d.test)||void 0===B||null===(B=B.answer)||void 0===B||null===(B=B.matching)||void 0===B||B.filter(ot=>ot.id==M.id).forEach(ot=>ot.value=""),jQuery(`#node-${M.id}`).remove()},It=(M,d,B,ot,dt,X)=>{var O,Y,ut,_t,Tt,Mt,Ot,pt;dt.iscorrect?(null!==(O=d.test)&&void 0!==O&&null!==(O=O.audiotrue)&&void 0!==O&&O.path&&U(M,{source:(0,E.U)(null===(ut=d.test)||void 0===ut?void 0:ut.audiotrue),iteration:0,nodeStatus:B,slideStatus:ot},X),null!==(Y=d.test)&&void 0!==Y&&null!==(Y=Y.effecttrue)&&void 0!==Y&&Y.path&&q(0,{source:(0,E.U)(null===(_t=d.test)||void 0===_t?void 0:_t.effecttrue),iteration:0,nodeStatus:B,slideStatus:ot},X)):(null!==(Tt=d.test)&&void 0!==Tt&&null!==(Tt=Tt.audiofalse)&&void 0!==Tt&&Tt.path&&U(M,{source:(0,E.U)(null===(Ot=d.test)||void 0===Ot?void 0:Ot.audiofalse),iteration:0,nodeStatus:B,slideStatus:ot},X),null!==(Mt=d.test)&&void 0!==Mt&&null!==(Mt=Mt.effectfalse)&&void 0!==Mt&&Mt.path&&q(0,{source:(0,E.U)(null===(pt=d.test)||void 0===pt?void 0:pt.effectfalse),iteration:0,nodeStatus:B,slideStatus:ot},X));wt(d,B,ot,X)},wt=(M,d,B,ot)=>{var dt;switch(null===(dt=M.test)||void 0===dt?void 0:dt.type){case"truefalse":{var X,O;let{value:se,iscorrect:he}=null!==(X=null==M||null===(O=M.test)||void 0===O||null===(O=O.answer)||void 0===O?void 0:O.truefalse)&&void 0!==X?X:{};if(se){let xe=ct.findNode(se);var Y,ut,_t,Tt;he?null!==(Y=M.test)&&void 0!==Y&&null!==(Y=Y.icontrue)&&void 0!==Y&&Y.path&&Q(xe,{source:(0,E.U)(null===(ut=M.test)||void 0===ut?void 0:ut.icontrue),iteration:0,nodeStatus:d,slideStatus:B},ot):null!==(_t=M.test)&&void 0!==_t&&null!==(_t=_t.iconfalse)&&void 0!==_t&&_t.path&&Q(xe,{source:(0,E.U)(null===(Tt=M.test)||void 0===Tt?void 0:Tt.iconfalse),iteration:0,nodeStatus:d,slideStatus:B},ot)}break}case"singlechoice":{var Mt,Ot;let{value:se,iscorrect:he}=null!==(Mt=null==M||null===(Ot=M.test)||void 0===Ot||null===(Ot=Ot.answer)||void 0===Ot?void 0:Ot.singlechoice)&&void 0!==Mt?Mt:{};if(se){let xe=ct.findNode(se);var pt,kt,Ct,Ft;he?null!==(pt=M.test)&&void 0!==pt&&null!==(pt=pt.icontrue)&&void 0!==pt&&pt.path&&Q(xe,{source:(0,E.U)(null===(kt=M.test)||void 0===kt?void 0:kt.icontrue),iteration:0,nodeStatus:d,slideStatus:B},ot):null!==(Ct=M.test)&&void 0!==Ct&&null!==(Ct=Ct.iconfalse)&&void 0!==Ct&&Ct.path&&Q(xe,{source:(0,E.U)(null===(Ft=M.test)||void 0===Ft?void 0:Ft.iconfalse),iteration:0,nodeStatus:d,slideStatus:B},ot)}break}case"multichoice":var Vt;null==M||null===(Vt=M.test)||void 0===Vt||null===(Vt=Vt.answer)||void 0===Vt||null===(Vt=Vt.multichoice)||void 0===Vt||Vt.forEach(se=>{let{value:he,iscorrect:xe}=se;if(he){let we=ct.findNode(he);var Le,Ne,Te,Me;xe?null!==(Le=M.test)&&void 0!==Le&&null!==(Le=Le.icontrue)&&void 0!==Le&&Le.path&&Q(we,{source:(0,E.U)(null===(Ne=M.test)||void 0===Ne?void 0:Ne.icontrue),iteration:0,nodeStatus:d,slideStatus:B},ot):null!==(Te=M.test)&&void 0!==Te&&null!==(Te=Te.iconfalse)&&void 0!==Te&&Te.path&&Q(we,{source:(0,E.U)(null===(Me=M.test)||void 0===Me?void 0:Me.iconfalse),iteration:0,nodeStatus:d,slideStatus:B},ot)}});break;case"fill":var $t;null==M||null===($t=M.test)||void 0===$t||null===($t=$t.answer)||void 0===$t||null===($t=$t.fill)||void 0===$t||$t.forEach(se=>{let{id:he,value:Le,iscorrect:Ne}=se;if(Le){let Ge=ct.findNode(he);var Te,Me,we,Ue;Ne?null!==(Te=M.test)&&void 0!==Te&&null!==(Te=Te.icontrue)&&void 0!==Te&&Te.path&&Q(Ge,{source:(0,E.U)(null===(Me=M.test)||void 0===Me?void 0:Me.icontrue),iteration:0,nodeStatus:d,slideStatus:B},ot):null!==(we=M.test)&&void 0!==we&&null!==(we=we.iconfalse)&&void 0!==we&&we.path&&Q(Ge,{source:(0,E.U)(null===(Ue=M.test)||void 0===Ue?void 0:Ue.iconfalse),iteration:0,nodeStatus:d,slideStatus:B},ot)}});break;case"matching":var ae;null==M||null===(ae=M.test)||void 0===ae||null===(ae=ae.answer)||void 0===ae||null===(ae=ae.matching)||void 0===ae||ae.forEach(se=>{let{id:he,key:xe,value:Le}=se;if(Le){let Ue=ct.findNode(he);var Ne,Te,Me,we;xe==Le?null!==(Ne=M.test)&&void 0!==Ne&&null!==(Ne=Ne.icontrue)&&void 0!==Ne&&Ne.path&&Q(Ue,{source:(0,E.U)(null===(Te=M.test)||void 0===Te?void 0:Te.icontrue),iteration:0,nodeStatus:d,slideStatus:B},ot):null!==(Me=M.test)&&void 0!==Me&&null!==(Me=Me.iconfalse)&&void 0!==Me&&Me.path&&Q(Ue,{source:(0,E.U)(null===(we=M.test)||void 0===we?void 0:we.iconfalse),iteration:0,nodeStatus:d,slideStatus:B},ot)}})}},gt=(M,d,B,ot)=>{var dt,X,O,Y,ut,_t,Mt,pt,Ot;null!==(dt=d.animate)&&void 0!==dt&&dt.value&&(0,f.a)(d,B.nodeStatus,B.slideStatus),null!==(X=d.interactive)&&void 0!==X&&X.show?(console.log(`node(${d.id}) | nodeStatus(${B.nodeStatus}) | slideStatus(${B.slideStatus}) | show`),((M,d,B,ot)=>{var dt,X,O;let Y={total:0,counter:0},{triggershow:ut,triggerrun:_t,triggerhide:Tt,action:Mt,audio:Ot}=null!==(dt=null===(X=M.interactive)||void 0===X?void 0:X.show)&&void 0!==dt?dt:{};if(console.log(`node(${M.id}) | nodeStatus(${d}) | slideStatus(${B}) | show`),ut){let{id:kt,ids:Ct,time:Ft,async:Vt}=ut;"asynctrue"==Vt?setTimeout(()=>{(0,C.GD)({id:kt,ids:Ct,nodeStatus:d,slideStatus:B})}):"time"==Vt&&setTimeout(()=>{(0,C.GD)({id:kt,ids:Ct,nodeStatus:d,slideStatus:B})},1e3*(null!=Ft?Ft:0))}if(_t){let{id:kt,ids:Ct,time:Ft,async:Vt}=_t;"asynctrue"==Vt?setTimeout(()=>{(0,C.MF)({id:kt,ids:Ct,nodeStatus:d,slideStatus:B})}):"time"==Vt&&setTimeout(()=>{(0,C.MF)({id:kt,ids:Ct,nodeStatus:d,slideStatus:B})},1e3*(null!=Ft?Ft:0))}if(Tt){let{id:kt,ids:Ct,time:Ft,async:Vt}=Tt;"asynctrue"==Vt?setTimeout(()=>{(0,C.vi)({id:kt,ids:Ct,nodeStatus:d,slideStatus:B})}):"time"==Vt&&setTimeout(()=>{(0,C.vi)({id:kt,ids:Ct,nodeStatus:d,slideStatus:B})},1e3*(null!=Ft?Ft:0))}let pt=()=>{setTimeout(()=>{if(Y.counter>=Y.total){if(ot&&ot(),ut){let{id:kt,ids:Ct,async:Ft}=ut;(!Ft||"asyncfalse"==Ft)&&(0,C.GD)({id:kt,ids:Ct,nodeStatus:d,slideStatus:B})}if(_t){let{id:kt,ids:Ct,async:Ft}=_t;(!Ft||"asyncfalse"==Ft)&&(0,C.MF)({id:kt,ids:Ct,nodeStatus:d,slideStatus:B})}if(Tt){let{id:kt,ids:Ct,async:Ft}=Tt;(!Ft||"asyncfalse"==Ft)&&(0,C.vi)({id:kt,ids:Ct,nodeStatus:d,slideStatus:B})}}})};if(null!=Mt&&Mt.value){Y.total+=1;let kt=()=>{Y.counter+=1,pt()};switch(null==Mt?void 0:Mt.value){case"hide":jQuery("#"+M.id).addClass("hide"),kt();break;case"points":{let{points:Ct,time:Ft,iteration:Vt,finish:$t}=Mt;(0,S.c)(M.id,{node:M,points:Ct,time:Ft,iteration:Vt,finish:$t,nodeStatus:d,slideStatus:B},kt);break}default:{let{value:Ct,time:Ft,iteration:Vt,finish:$t}=Mt;(0,rt.h)(M.id,{node:M,value:Ct,time:Ft,iteration:Vt,finish:$t,nodeStatus:d,slideStatus:B},kt);break}}}if(null!=Ot&&null!==(O=Ot.source)&&void 0!==O&&O.path){Y.total+=1;let kt=()=>{Y.counter+=1,pt()},Ct=(0,h.d)(M.id,Ot,Y,{nodeStatus:d,slideStatus:B},kt);-1==(null==Ot?void 0:Ot.iteration)&&jQuery("#"+M.id).click(Ft=>{Ft.preventDefault(),Ct&&(Ct.volume=Ct.volume>=1?0:Ct.volume+.25),console.log(null==Ct?void 0:Ct.volume)})}Y.total||pt()})(d,B.nodeStatus,B.slideStatus,ot)):ot&&ot(),null!==(O=d.interactive)&&void 0!==O&&O.click&&(pt=null===(Mt=d.interactive)||void 0===Mt?void 0:Mt.click,Object.keys(null!=pt?pt:{}).map(Ct=>pt[Ct]?1:0).includes(1)&&jQuery("#"+d.id).addClass("interactive-click"),jQuery("#"+d.id).click(pt=>{pt.preventDefault(),B.nodeStatus=ct.refreshNodeStatus(),console.log(`node(${d.id}) | nodeStatus(${B.nodeStatus}) | slideStatus(${B.slideStatus}) | click`),(0,R.J)(d,B.nodeStatus,B.slideStatus)})),null!==(Y=d.variable)&&void 0!==Y&&Y.input&&jQuery("#"+d.id).on("change","input,textarea",pt=>{pt.preventDefault(),((M,d,B)=>{var ot,dt;y.L.variable.setValue(null!==(ot=null===(dt=d.variable)||void 0===dt||null===(dt=dt.input)||void 0===dt?void 0:dt.variable)&&void 0!==ot?ot:"",M),(M=>{var d;let B=(ot,dt)=>{null==ot||ot.forEach(X=>{switch(X.type){case lt.h.GROUP:(0,K.v)(X.id,{},dt?window.document.getElementById(dt):null),B(X.nodes,X.id);break;case lt.h.POLYGON:break;case lt.h.TEXT:(0,_.L)(X.id,{size:X.size,attribute:X.attribute,source:X.source},dt?window.document.getElementById(dt):null)}})};B(null===(d=M.svg)||void 0===d?void 0:d.nodes)})(B)})(pt.target.value,d,M)}),null!==(ut=d.variable)&&void 0!==ut&&ut.click&&(null!==(Ot=d.variable)&&void 0!==Ot&&null!==(Ot=Ot.click)&&void 0!==Ot&&Ot.variable&&jQuery("#"+d.id).addClass("variable-click"),jQuery("#"+d.id).click(pt=>{pt.preventDefault(),((M,d)=>{var B;y.L.variable.setValueOperator(null===(B=M.variable)||void 0===B?void 0:B.click),(M=>{var d;let B=(ot,dt)=>{null==ot||ot.forEach(X=>{switch(X.type){case lt.h.GROUP:(0,K.v)(X.id,{},dt?window.document.getElementById(dt):null),B(X.nodes,X.id);break;case lt.h.POLYGON:break;case lt.h.TEXT:(0,_.L)(X.id,{size:X.size,attribute:X.attribute,source:X.source},dt?window.document.getElementById(dt):null)}})};B(null===(d=M.svg)||void 0===d?void 0:d.nodes)})(d)})(d,M)})),"test"==(null===(_t=d.source)||void 0===_t?void 0:_t.type)&&((M,d)=>{var B;let ot=()=>{};switch(null===(B=M.source)||void 0===B||null===(B=B.test)||void 0===B?void 0:B.type){case"truefalse":{jQuery("#"+M.id).click(O=>{O.preventDefault(),((M,d,B,ot,dt)=>{var X,O;let Y=null===(X=M.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.truefalse)||void 0===X?void 0:X.iscorrect;d.test?d.test.answer?d.test.answer.truefalse={value:M.id,iscorrect:Y}:d.test.answer={truefalse:{value:M.id,iscorrect:Y}}:d.test={answer:{truefalse:{value:M.id,iscorrect:Y}}},null!==(O=d.svg)&&void 0!==O&&O.nodes.find(_t=>{var Tt;return"submit"==(null===(Tt=_t.source)||void 0===Tt||null===(Tt=Tt.test)||void 0===Tt?void 0:Tt.type)})||It(M,d,B,ot,{iscorrect:Y},dt);let ut=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(ut,d,M)})(M,d,ct.nodeStatus,ct.slideStatus,ot)});let X=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(X,d,M);break}case"singlechoice":{jQuery("#"+M.id).click(O=>{O.preventDefault(),((M,d,B,ot,dt)=>{var X,O;let Y=null===(X=M.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.singlechoice)||void 0===X?void 0:X.iscorrect;d.test?d.test.answer?d.test.answer.singlechoice={value:M.id,iscorrect:Y}:d.test.answer={singlechoice:{value:M.id,iscorrect:Y}}:d.test={answer:{singlechoice:{value:M.id,iscorrect:Y}}},null!==(O=d.svg)&&void 0!==O&&O.nodes.find(_t=>{var Tt;return"submit"==(null===(Tt=_t.source)||void 0===Tt||null===(Tt=Tt.test)||void 0===Tt?void 0:Tt.type)})||It(M,d,B,ot,{iscorrect:Y},dt);let ut=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(ut,d,M)})(M,d,ct.nodeStatus,ct.slideStatus,ot)});let X=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(X,d,M);break}case"multichoice":{jQuery("#"+M.id).click(O=>{O.preventDefault(),((M,d,B,ot,dt)=>{var X,O;let Y=null===(X=M.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.multichoice)||void 0===X?void 0:X.iscorrect;d.test?d.test.answer?d.test.answer.multichoice?d.test.answer.multichoice.find(_t=>_t.value==M.id)?d.test.answer.multichoice=d.test.answer.multichoice.filter(_t=>_t.value!=M.id):d.test.answer.multichoice.push({value:M.id,iscorrect:Y}):d.test.answer.multichoice=[{value:M.id,iscorrect:Y}]:d.test.answer={multichoice:[{value:M.id,iscorrect:Y}]}:d.test={answer:{multichoice:[{value:M.id,iscorrect:Y}]}},null!==(O=d.svg)&&void 0!==O&&O.nodes.find(_t=>{var Tt;return"submit"==(null===(Tt=_t.source)||void 0===Tt||null===(Tt=Tt.test)||void 0===Tt?void 0:Tt.type)})||It(M,d,B,ot,{iscorrect:Y},dt);let ut=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(ut,d,M)})(M,d,ct.nodeStatus,ct.slideStatus,ot)});let X=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(X,d,M);break}case"fill":{var dt;jQuery("#"+M.id).on("keyup",'input[type="text"]',O=>{var Y;let ut=jQuery("<div/>").css({"font-size":jQuery(O.target).css("font-size"),visibility:"hidden",float:"left"}).text(O.target.value).appendTo(window.document.body);jQuery(O.target).css({width:(null!==(Y=ut.width())&&void 0!==Y?Y:0)+30})}).on("keypress",'input[type="text"]',O=>{13===(O.keyCode||O.charCode||O.which)&&(O.preventDefault(),O.stopPropagation(),jQuery(O.target).blur())}).on("change",'input[type="text"]',O=>{var Y,ut;let _t=null===(Y=O.target)||void 0===Y?void 0:Y.getAttribute("data-key"),Tt=null===(ut=O.target)||void 0===ut||null===(ut=ut.value)||void 0===ut?void 0:ut.trim();jQuery("#"+M.id).find(`input[type="text"][data-key="${_t}"]`).val(Tt),((M,d,B,ot,dt,X)=>{var O,Y,ut,_t;let{value:Tt}=null!==(O=null===(Y=M.source)||void 0===Y||null===(Y=Y.test)||void 0===Y||null===(Y=Y.fill)||void 0===Y?void 0:Y.find(pt=>pt.key==`[[${dt.key}]]`))&&void 0!==O?O:{},Mt=Tt&&Tt.map(pt=>null==pt?void 0:pt.toLocaleLowerCase()).includes(null===(ut=dt.value)||void 0===ut?void 0:ut.toLocaleLowerCase());dt.iscorrect=Mt,d.test?d.test.answer?d.test.answer.fill?d.test.answer.fill.find(pt=>pt.key==dt.key)?d.test.answer.fill.filter(pt=>pt.key==dt.key).forEach(pt=>{pt.value=dt.value,pt.iscorrect=dt.iscorrect}):d.test.answer.fill.push(dt):d.test.answer.fill=[dt]:d.test.answer={fill:[dt]}:d.test={answer:{fill:[dt]}};let Ot=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(Ot,d,M),null!==(_t=d.svg)&&void 0!==_t&&_t.nodes.find(pt=>{var kt;return"submit"==(null===(kt=pt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)})||It(M,d,B,ot,{iscorrect:Mt},X)})(M,d,ct.nodeStatus,ct.slideStatus,{id:M.id,key:_t,value:Tt},ot)}),null!==(dt=d.test)&&void 0!==dt&&dt.showselection||jQuery("#"+M.id).addClass("hide-selection");let X=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(X,d,M);break}case"matching-empty":{jQuery("#"+M.id).on("touchmove",".ondrag-item",function(O){O.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(O){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${M.size.height/M.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${O.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(O){var Y;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(Y=d.test)&&void 0!==Y&&Y.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),ce(M,d)},drag:function(O){},dragend:function(O){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${M.id} .ondrop-here`).kendoDropTarget({dragenter:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.addClass("focused")},dragleave:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.removeClass("focused")},drop:function(O){if(!O.dropTarget.hasClass("actived"))return;O.dropTarget.removeClass("focused");let Y=O.dropTarget,ut=O.draggable.currentTarget;Y.is(":empty")||Y.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),ut.appendTo(Y);let _t=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(_t,d,M),((M,d,B,ot,dt,X)=>{var O,Y,ut;let{key:_t}=null!==(O=null===(Y=M.source)||void 0===Y||null===(Y=Y.test)||void 0===Y?void 0:Y.matching)&&void 0!==O?O:{key:"KIEN"},Tt=dt.key==_t;ce(M,d);let Mt={id:M.id,key:null!=_t?_t:"",value:dt.key};d.test?d.test.answer?d.test.answer.matching?d.test.answer.matching.find(Ot=>Ot.id==Mt.id)?d.test.answer.matching.filter(Ot=>Ot.id==Mt.id).forEach(Ot=>{Ot.key=Mt.key,Ot.value=Mt.value}):d.test.answer.matching.push(Mt):d.test.answer.matching=[Mt]:d.test.answer={matching:[Mt]}:d.test={answer:{matching:[Mt]}},null!==(ut=d.svg)&&void 0!==ut&&ut.nodes.find(Ot=>{var pt;return"submit"==(null===(pt=Ot.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)})||It(M,d,B,ot,{iscorrect:Tt},X)})(M,d,ct.nodeStatus,ct.slideStatus,{key:ut.data("key")},ot)}});let X=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(X,d,M);break}case"matching-content":{jQuery("#"+M.id).on("touchmove",".ondrag-item",function(O){O.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(O){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${M.size.height/M.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${O.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(O){var Y;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(Y=d.test)&&void 0!==Y&&Y.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(O){},dragend:function(O){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${M.id} .ondrop-here`).kendoDropTarget({dragenter:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.addClass("focused")},dragleave:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.removeClass("focused")},drop:function(O){if(!O.dropTarget.hasClass("actived"))return;O.dropTarget.removeClass("focused");let Y=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(Y,d,M),O.draggable.currentTarget.appendTo(O.dropTarget),wt(d,ct.nodeStatus,ct.slideStatus,ot)}});let X=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,y.L.target);(0,F.kE)(X,d,M);break}case"speech":break;case"submit":jQuery("#"+M.id).click(X=>{X.preventDefault(),((M,d,B,ot,dt)=>{var X,O,Y,ut,_t;let Tt;var Mt;if(null!=d&&null!==(X=d.test)&&void 0!==X&&null!==(X=X.answer)&&void 0!==X&&X.truefalse)Tt=null==d||null===(Mt=d.test)||void 0===Mt||null===(Mt=Mt.answer)||void 0===Mt||null===(Mt=Mt.truefalse)||void 0===Mt?void 0:Mt.iscorrect;else if(null!=d&&null!==(O=d.test)&&void 0!==O&&null!==(O=O.answer)&&void 0!==O&&O.singlechoice){var Ot;Tt=null==d||null===(Ot=d.test)||void 0===Ot||null===(Ot=Ot.answer)||void 0===Ot||null===(Ot=Ot.singlechoice)||void 0===Ot?void 0:Ot.iscorrect}else if(null!=d&&null!==(Y=d.test)&&void 0!==Y&&null!==(Y=Y.answer)&&void 0!==Y&&Y.multichoice){var pt,kt,Ct;Tt=1==[null==d||null===(pt=d.test)||void 0===pt||null===(pt=pt.answer)||void 0===pt||null===(pt=pt.multichoice)||void 0===pt?void 0:pt.length,null==d||null===(kt=d.test)||void 0===kt||null===(kt=kt.answer)||void 0===kt||null===(kt=kt.multichoice)||void 0===kt||null===(kt=kt.map(se=>se.iscorrect?1:0))||void 0===kt?void 0:kt.reduce((se,he)=>se+he),null==d||null===(Ct=d.svg)||void 0===Ct||null===(Ct=Ct.nodes)||void 0===Ct||null===(Ct=Ct.filter(se=>{var he,xe;return"multichoice"==(null===(he=se.source)||void 0===he||null===(he=he.test)||void 0===he?void 0:he.type)&&(null===(xe=se.source)||void 0===xe||null===(xe=xe.test)||void 0===xe||null===(xe=xe.multichoice)||void 0===xe?void 0:xe.iscorrect)}))||void 0===Ct?void 0:Ct.length].filter((se,he,xe)=>xe.indexOf(se)==he).length}else if(null!=d&&null!==(ut=d.test)&&void 0!==ut&&null!==(ut=ut.answer)&&void 0!==ut&&ut.fill){var Ft,Vt;Tt=(null==d||null===(Ft=d.test)||void 0===Ft||null===(Ft=Ft.answer)||void 0===Ft||null===(Ft=Ft.fill)||void 0===Ft||null===(Ft=Ft.map(se=>se.iscorrect?1:0))||void 0===Ft?void 0:Ft.reduce((se,he)=>se+he))==(null===(Vt=d.svg)||void 0===Vt||null===(Vt=Vt.nodes)||void 0===Vt||null===(Vt=Vt.filter(se=>{var he;return"fill"==(null===(he=se.source)||void 0===he||null===(he=he.test)||void 0===he?void 0:he.type)}))||void 0===Vt?void 0:Vt.length)}else if(null!=d&&null!==(_t=d.test)&&void 0!==_t&&null!==(_t=_t.answer)&&void 0!==_t&&_t.matching){var $t,ae;Tt=(null===($t=d.svg)||void 0===$t||null===($t=$t.nodes)||void 0===$t||null===($t=$t.filter(se=>{var he;return"matching-empty"==(null===(he=se.source)||void 0===he||null===(he=he.test)||void 0===he?void 0:he.type)}))||void 0===$t?void 0:$t.length)==((null==d||null===(ae=d.test)||void 0===ae||null===(ae=ae.answer)||void 0===ae?void 0:ae.matching)||[]).map(se=>se.key==se.value?1:0).reduce((se,he)=>se+he)}It(M,d,B,ot,{iscorrect:Tt},dt)})(M,d,ct.nodeStatus,ct.slideStatus,ot)})}})(d,M)};var z=v(1281),Gt=v(6153),D=v(3069),P=v(7945),s=v(3477),b=v(745),H=v(6407),tt=v(3617),zt=v(4669);const Yt=(M,d,B)=>{if(B.slideStatus!=ct.slideStatus||!d.length)return;let ot=d.shift(),dt=M.filter(ut=>{var _t;return(null!==(_t=ut.idx)&&void 0!==_t?_t:0)==ot});if(!dt.length)return;let X=Math.max.apply(null,dt.map(ut=>{var _t;return null!==(_t=ut.time)&&void 0!==_t?_t:0})),O=!1,Y=X<.5?0:setTimeout(()=>{O||(O=!0,Yt(M,d,B))},1e3*X);Qt(M,d,dt,0,B,{idx:ot,total:dt.length,counter:0,isRecursive:O,timeoutRecursive:Y,maxTimeCoundown:X,uid:Math.floor(1e9*Math.random())})},Qt=(M,d,B,ot,dt,X)=>{if(dt.slideStatus!=ct.slideStatus)return;let O=B[ot];if(O){switch(O.type){case lt.h.GROUP:break;case lt.h.CIRCLE:(0,z.K)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case lt.h.ELLIPSE:(0,Gt.W)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case lt.h.LINE:(0,D.q)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case lt.h.RECT:(0,P.a)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case lt.h.POLYGON:(0,s.u)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case lt.h.POLYLINE:(0,tt.E)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case lt.h.FOREIGNOBJECT:(0,b.$)(O.id,{size:O.size,attribute:O.attribute,style:O.style,source:O.source},O.pid?window.document.getElementById(O.pid):null);break;case lt.h.IMAGE:(0,J.B)(O.id,{size:O.size,attribute:O.attribute,source:O.source},O.pid?window.document.getElementById(O.pid):null);break;case lt.h.TEXT:(0,_.L)(O.id,{size:O.size,attribute:O.attribute,source:O.source},O.pid?window.document.getElementById(O.pid):null);break;case lt.h.TSPAN:(0,zt.M)(O.id,{size:O.size,attribute:O.attribute,source:O.source},O.pid?window.document.getElementById(O.pid):null);break;case lt.h.PATH:(0,H.X)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null)}gt(dt.slide,O,dt,()=>{X.counter+=1,X.maxTimeCoundown<.5&&X.counter>=X.total&&(X.total=X.counter=0,X.isRecursive||(clearTimeout(X.timeoutRecursive),X.isRecursive=!0,setTimeout(()=>{Yt(M,d,dt)},250)))}),Qt(M,d,B,++ot,dt,X)}},ct=new class Nt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(d){this._dataSource=d.data||{},y.L.variable.set=d.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var d,B;return null!==(d=null===(B=this._dataSource)||void 0===B||null===(B=B.slides)||void 0===B?void 0:B.length)&&void 0!==d?d:0}get slides(){var d;return(null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[]}get slide(){var d;return((null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[])[this._slideIdx]||{}}findNode(d){var B;let ot=null===(B=this._dataSource)||void 0===B||null===(B=B.slides)||void 0===B?void 0:B.find((Ot,pt)=>pt==this._slideIdx),dt=null==ot?void 0:ot.svg,X=(Ot,pt)=>{let kt=null==Ot?void 0:Ot.find(Vt=>Vt.id==d);if(kt)return kt.pid=pt,kt;let Ct=0,Ft=Ot.length||0;for(;Ct<Ft&&!kt&&(kt=X(Ot[Ct].nodes||[],Ot[Ct].id),!kt);)Ct++;return kt},O=X((null==dt?void 0:dt.nodes)||[]);var Y,ut,_t,Tt,Mt;return O?(O.style=null!==(Y=O.style)&&void 0!==Y?Y:{},O.source=null!==(ut=O.source)&&void 0!==ut?ut:{},O.animate=null!==(_t=O.animate)&&void 0!==_t?_t:{},O.interactive=null!==(Tt=O.interactive)&&void 0!==Tt?Tt:{},O.variable=null!==(Mt=O.variable)&&void 0!==Mt?Mt:{},O):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(d,B,ot){var dt;let X;var O,Y;if(this.refreshNodeStatus(),this.refreshSlideStatus(),ot)X=null===(O=this._dataSource)||void 0===O||null===(O=O.slides)||void 0===O?void 0:O.find(Mt=>Mt.code==ot||Mt.id==ot),X&&(this._slideIdx=(null===(Y=this._dataSource)||void 0===Y||null===(Y=Y.slides)||void 0===Y?void 0:Y.indexOf(X))||0);else if(B){var ut,_t;X=null===(ut=this._dataSource)||void 0===ut||null===(ut=ut.slides)||void 0===ut?void 0:ut.find(Mt=>Mt.id==B),X&&(this._slideIdx=(null===(_t=this._dataSource)||void 0===_t||null===(_t=_t.slides)||void 0===_t?void 0:_t.indexOf(X))||0)}else this._slideIdx=Math.min(Math.max(d||0,0),this.slideTotal-1),X=this.slide;if(X){var Tt;Xt(y.L.container,y.L.svg,X,!0),null===(Tt=jQuery(y.L.svg).find("#"+T.F.BACKGROUND_GROUP))||void 0===Tt||Tt.empty();let Mt=(0,F.RY)(T.F.BACKGROUND_GROUP,"g",void 0,y.L.svg);(0,F.I6)(Mt,X),(M=>{var d,B,ot,dt;let X=ct.nodeStatus,O=ct.slideStatus;null===(d=M.svg)||void 0===d||d.nodes.forEach(ut=>{ut.pid=Math.ceil(1e9*Math.random()),(0,K.v)(ut.pid)});let Y=null===(B=M.svg)||void 0===B||null===(B=B.nodes)||void 0===B?void 0:B.map(ut=>{var _t;return null!==(_t=ut.idx)&&void 0!==_t?_t:0}).filter((ut,_t,Tt)=>Tt.indexOf(ut)==_t).sort((ut,_t)=>(null!=ut?ut:0)-(null!=_t?_t:0));Yt(null!==(ot=null===(dt=M.svg)||void 0===dt?void 0:dt.nodes)&&void 0!==ot?ot:[],null!=Y?Y:[],{slide:M,nodeStatus:X,slideStatus:O})})(X)}this.changeSlide(this.slides,null===(dt=this.slide)||void 0===dt?void 0:dt.id,this.slideIdx,this.slides.length,X)}set onChangeSlide(d){this._fnChangeSlides.push(d)}changeSlide(d,B,ot,dt,X){this._fnChangeSlides.forEach(O=>O(d,B,ot,dt,X))}},Xt=(M,d,B,ot)=>{var dt,X,O,Y;let ut=window.document.querySelector(d);var _t;ut||(ut=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(_t=window.document.querySelector(M))||void 0===_t||_t.appendChild(ut)),ot&&(ut.textContent=null);let{x:Tt,y:Mt,width:Ot,height:pt}=null!==(dt=null==B||null===(X=B.svg)||void 0===X?void 0:X.viewBox)&&void 0!==dt?dt:y.L.screen.frameSize;ut.setAttributeNS(null,"viewBox",Tt+" "+Mt+" "+Ot+" "+pt),ut.setAttribute("id",d.replace("#",""));var $t,ae,kt=null!==(O=jQuery(M).width())&&void 0!==O?O:1080,Ct=null!==(Y=jQuery(M).height())&&void 0!==Y?Y:1080,Vt=Ot/pt;Vt>=kt/Ct?ae=($t=kt)/Vt:$t=(ae=Ct)*Vt,ut.setAttributeNS(null,"width",$t.toString()),ut.setAttributeNS(null,"height",ae.toString())}},7050:(de,Kt,v)=>{v.d(Kt,{M:()=>lt,a:()=>y});var T=v(5619);const y=(rt,S,h)=>{var C;let{value:_}=null!==(C=rt.animate)&&void 0!==C?C:{};lt(rt.id,{node:rt,value:_,nodeStatus:S,slideStatus:h},()=>{})},lt=(rt,S,h)=>{var C;if(!S.value)return void h();let j=jQuery("#"+rt).parents("g");if(!j.length)return void h();let{size:_}=S.node;j.css("transform-origin",`${_.x+_.width/2}px ${_.y+_.height/2}px`);let K="",x=null!==(C=S.iteration)&&void 0!==C?C:0,nt=[];(S.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?nt.push(S.value):S.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(S.value)?(nt.push("animation"),nt.push(`animation-${S.value}`)):(nt.push("animate__animated"),nt.push(`animate__${S.value}`)):(nt.push("animation"),nt.push("animation-fadein")),x<0?(nt.push("animation-iteration-infinite"),h(),h=function(){}):x>0&&nt.push("animation-iteration-"+(x+1)),K=nt.join(" "),function(yt){let f=function(){j.data("animate-running")?j.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){j.data("animate-running",!1),setTimeout(function(){yt()},100)}):yt()};j.hasClass("animation")?setTimeout(function(){f()}):f()}(function(){var yt;R(rt),(x>0||x<0)&&j.one("animationiteration",function(){S.slideStatus===T.J.slideStatus||(j.data("animate-running",!1),R(rt),S.slideStatus===T.J.slideStatus&&h())}),j.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(j.data("animate-running",!1),R(rt),S.finish){default:case 0:case 1:break;case 2:var f;lt(rt,{node:S.node,value:null===(f=S.node.animate)||void 0===f?void 0:f.out,nodeStatus:S.nodeStatus,slideStatus:S.slideStatus},()=>{j.addClass("hide")})}S.slideStatus===T.J.slideStatus&&h()}),j.attr("data-class",null!==(yt=j.attr("class"))&&void 0!==yt?yt:""),j.addClass(K),j.data("animate-running",!0)})},R=function(rt){var S,h,C=jQuery("#"+rt).parents("g"),j=null===(S=C.attr("class"))||void 0===S?void 0:S.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),_=null===(h=C.attr("class"))||void 0===h?void 0:h.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);j&&j.forEach(function(x){jQuery(C).removeClass(x)}),_&&_.forEach(function(x){jQuery(C).removeClass(x)});let K=C.attr("data-class");K&&(C.attr("class",K),C.removeAttr("data-class")),jQuery(C).data("animation-running",!1)}},8946:(de,Kt,v)=>{v.d(Kt,{h:()=>lt});var T=v(5619),y=v(7050);const lt=(rt,S,h)=>{var C;if(!S.value)return void h();let j=jQuery("#"+rt).parents("g");if(!j.length)return void h();let{size:_}=S.node;j.css("transform-origin",`${_.x+_.width/2}px ${_.y+_.height/2}px`);let K="",x=null!==(C=S.iteration)&&void 0!==C?C:0,nt=[];(S.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?nt.push(S.value):(nt.push("animation"),nt.push(S.value?"animation-"+S.value:"animation-fadein")),x<0?(nt.push("animation-iteration-infinite"),h(),h=function(){}):x>0&&nt.push("animation-iteration-"+(x+1)),K=nt.join(" "),function(yt){let f=function(){j.data("animate-running")?j.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){j.data("animate-running",!1),setTimeout(function(){yt()},100)}):yt()};j.hasClass("animation")?setTimeout(function(){f()}):f()}(function(){var yt;R(rt),(x>0||x<0)&&j.one("animationiteration",function(){S.slideStatus===T.J.slideStatus||(j.data("animate-running",!1),R(rt),S.slideStatus===T.J.slideStatus&&h())}),j.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(j.data("animate-running",!1),R(rt),S.finish){default:case 0:case 1:break;case 2:var f;(0,y.M)(rt,{node:S.node,value:null===(f=S.node.animate)||void 0===f?void 0:f.out,nodeStatus:S.nodeStatus,slideStatus:S.slideStatus},()=>{j.addClass("hide")})}S.slideStatus===T.J.slideStatus&&h()}),j.attr("data-class",null!==(yt=j.attr("class"))&&void 0!==yt?yt:""),j.addClass(K),j.data("animate-running",!0)})},R=function(rt){var S,h=jQuery("#"+rt).parents("g"),C=null===(S=h.attr("class"))||void 0===S?void 0:S.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);C&&C.forEach(function(_){jQuery(h).removeClass(_)});let j=h.attr("data-class");j&&(h.attr("class",j),h.removeAttr("data-class")),jQuery(h).data("animation-running",!1)}},7657:(de,Kt,v)=>{v.d(Kt,{c:()=>rt});var T=v(9506),y=v(5619),lt=v(5970),R=v(7050);const rt=(h,C,j)=>{var _;if(!C.points||!C.points.length)return void j();let K=jQuery("#"+h),nt=function S(h){let C=[];2===h.length&&h.splice(1,0,[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]);let nt,it,yt,j=1,_=h.length;for(;j<_;){if(nt=h[j-1],it=h[j],yt=h[j+1],(Math.abs(nt[0]-it[0])>=15||Math.abs(nt[1]-it[1])>=15)&&Math.pow(nt[0]-it[0],2)+Math.pow(nt[1]-it[1],2)>=Math.pow(15,2)&&yt&&(Math.abs(nt[0]-yt[0])<=20||Math.abs(nt[1]-yt[1])<=20)&&Math.pow(nt[0]-yt[0],2)+Math.pow(nt[1]-yt[1],2)<=Math.pow(20,2))C.push(it);else{let J=it[0]-nt[0],I=it[1]-nt[1],q=Math.max(Math.abs(J),Math.abs(I));for(var f=0;f<q;f+=15)C.push([nt[0]+J*f/q,nt[1]+I*f/q])}j++}return _>0&&(C.splice(0,0,h[0]),C.push(h[_-1])),C}((st=>{if(1==st.length){let{size:U}=C.node;return[[U.x+U.width/2,U.y+U.height/2],...st]}return[...st]})(C.points||[])),it=null!==(_=C.iteration)&&void 0!==_?_:0;if(it<0&&(j(),j=function(){}),K.data("work-running")&&it<0)return;K.data("work-running",!0);let F,yt=nt.length,f=Math.max(20,1e3*(C.time||3)/yt),{id:J,type:I,size:q,attribute:at}=y.J.findNode(h),Q=function(st){if(C.slideStatus!==y.J.slideStatus)return K.data("work-running",!1),void(C.slideStatus===y.J.slideStatus&&j());if(st<yt){let E=nt[st];E&&(F=Object.assign({},q,{x:E[0]-q.width/2,y:E[1]-q.height/2}),Object.assign(at,(0,T.xW)(I,F,at)),(0,lt.tD)(window.document.getElementById(J),at),setTimeout(function(){Q(++st)},f))}else if(it>0)it--,Q(1);else if(it<0)Q(1);else switch(K.data("work-running",!1),C.slideStatus===y.J.slideStatus&&j(),C.finish){default:case 0:break;case 1:Object.assign(at,(0,T.xW)(I,q,at)),(0,lt.tD)(window.document.getElementById(J),at);break;case 2:var U;(0,R.M)(C.node.id,{node:C.node,value:null===(U=C.node.animate)||void 0===U?void 0:U.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{K.addClass("hide")})}};Q(1)}},6769:(de,Kt,v)=>{v.d(Kt,{d:()=>lt});var T=v(6611),y=v(5619);const lt=(R,rt,S,h,C)=>{var j,_,K,x,nt,it,yt;if(h.slideStatus!=y.J.slideStatus)return rt.async&&"change-slide"!=rt.async?void 0:void C();if(h.nodeStatus!=y.J.nodeStatus&&(!rt.async||"change-node"==rt.async))return void C();if(!(null!==(j=rt.source)&&void 0!==j&&j.path||null!==(_=rt.source)&&void 0!==_&&_.url))return console.warn(`${R} -> audio no source!`),C(),void(C=()=>{});var f=jQuery("#"+R);let J=null!==(K=rt.iteration)&&void 0!==K?K:0;if(J<0&&(C(),C=function(){}),!(f.data("audio-running")&&J<0)){f.data("audio-running",!0);var I=function(at){at.pause(),at.remove(),f.data("audio-running",!1)},q=new Audio;return q.autoplay=!0,q.loop=0!=J,q.preload="auto",q.controls=!0,q.setAttributeNode(document.createAttribute("playsinline")),q.addEventListener("canplay",function(){var at=q.play();at&&at.then(function(F){var Q;f.data("audio-running",!0),"time"==rt.async?setTimeout(()=>{h.slideStatus===y.J.slideStatus&&(I(q),C(),C=()=>{})},1e3*(null!==(Q=rt.time)&&void 0!==Q?Q:1)):"non-stop"==rt.async&&(C(),C=()=>{})}).catch(function(F){f.data("audio-running",!1),h.slideStatus===y.J.slideStatus&&(C(),C=()=>{})})}),q.addEventListener("timeupdate",function(){switch(rt.async){case"time":case"change-slide":h.slideStatus!==y.J.slideStatus&&(I(this),C(),C=()=>{});break;case"finish-action":S.total>=2&&S.total-S.counter==1&&(I(this),C(),C=()=>{});break;default:case"change-node":h.nodeStatus!==y.J.nodeStatus&&(I(this),C(),C=()=>{});case"non-stop":}}),q.addEventListener("canplaythrough",function(){this.loop&&(J>0?J--:0==J&&(this.loop=!1))}),q.addEventListener("play",function(){}),q.addEventListener("pause",function(){}),q.addEventListener("ended",function(){this.remove(),f.data("audio-running",!1),h.slideStatus===y.J.slideStatus&&(C(),C=()=>{})}),q.onerror=function(){this.remove(),f.data("audio-running",!1),h.slideStatus===y.J.slideStatus&&(C(),C=()=>{})},q.src=(null!==(x=rt.source)&&void 0!==x&&x.path?(null===(nt=T.L.config)||void 0===nt?void 0:nt.readfileuploadurl)+(null===(it=rt.source)||void 0===it?void 0:it.path):null===(yt=rt.source)||void 0===yt?void 0:yt.url)||"",q}}},334:(de,Kt,v)=>{v.d(Kt,{J:()=>j});var T=v(6611),y=v(5619),lt=v(8946),R=v(7657),rt=v(6769),S=v(3591),h=v(2241),C=v(7050);const j=(_,K,x,nt)=>{var it,yt,f;let J={total:0,counter:0},{triggershow:I,triggerrun:q,triggerhide:at,action:F,audio:Q,slide:st,media:U}=null!==(it=null===(yt=_.interactive)||void 0===yt?void 0:yt.click)&&void 0!==it?it:{};if(console.log(`node(${_.id}) | nodeStatus(${K}) | slideStatus(${x}) | click`),I){let{id:Pt,ids:vt,time:xt,async:ce}=I;"asynctrue"==ce?(0,S.GD)({id:Pt,ids:vt,nodeStatus:K,slideStatus:x}):"time"==ce&&setTimeout(()=>{(0,S.GD)({id:Pt,ids:vt,nodeStatus:K,slideStatus:x})},1e3*(null!=xt?xt:0))}if(q){let{id:Pt,ids:vt,time:xt,async:ce}=q;"asynctrue"==ce?(0,S.MF)({id:Pt,ids:vt,nodeStatus:K,slideStatus:x}):"time"==ce&&setTimeout(()=>{(0,S.MF)({id:Pt,ids:vt,nodeStatus:K,slideStatus:x})},1e3*(null!=xt?xt:0))}if(at){let{id:Pt,ids:vt,time:xt,async:ce}=at;"asynctrue"==ce?(0,S.vi)({id:Pt,ids:vt,nodeStatus:K,slideStatus:x}):"time"==ce&&setTimeout(()=>{(0,S.vi)({id:Pt,ids:vt,nodeStatus:K,slideStatus:x})},1e3*(null!=xt?xt:0))}let E=()=>{setTimeout(()=>{if(J.counter>=J.total){if(nt&&nt(),I){let{id:Pt,ids:vt,async:xt}=I;(!xt||"asyncfalse"==xt)&&(0,S.GD)({id:Pt,ids:vt,nodeStatus:K,slideStatus:x})}if(q){let{id:Pt,ids:vt,async:xt}=q;(!xt||"asyncfalse"==xt)&&(0,S.MF)({id:Pt,ids:vt,nodeStatus:K,slideStatus:x})}if(at){let{id:Pt,ids:vt,async:xt}=at;(!xt||"asyncfalse"==xt)&&(0,S.vi)({id:Pt,ids:vt,nodeStatus:K,slideStatus:x})}}})};if(null!=F&&F.value){J.total+=1;let Pt=()=>{J.counter+=1,E()};switch(null==F?void 0:F.value){case"hide":var mt;(0,C.M)(_.id,{node:_,value:null===(mt=_.animate)||void 0===mt?void 0:mt.out,nodeStatus:K,slideStatus:x},()=>{jQuery("#"+_.id).addClass("hide"),Pt()});break;case"points":{let{points:vt,time:xt,iteration:ce,finish:et}=F;vt&&(0,R.c)(_.id,{node:_,points:vt,time:xt,iteration:ce,finish:et,nodeStatus:K,slideStatus:x},Pt);break}default:{let{value:vt,time:xt,iteration:ce,finish:et}=F;(0,lt.h)(_.id,{node:_,value:vt,time:xt,iteration:ce,finish:et,nodeStatus:K,slideStatus:x},Pt);break}}}if(null!=Q&&null!==(f=Q.source)&&void 0!==f&&f.path){J.total+=1;let Pt=()=>{J.counter+=1,E()};(0,rt.d)(_.id,Q,J,{nodeStatus:K,slideStatus:x},Pt)}if(J.total||E(),null!=st&&st.id)switch(st.id){case-1:y.J.runSlide(y.J.slideIdx-1);break;case-2:y.J.runSlide(y.J.slideIdx+1);break;default:var jt;y.J.runSlide(void 0,st.id,null===(jt=st.code)||void 0===jt?void 0:jt.toString())}if(null!=U&&U.type){var Lt;let vt=`<div class="popup-media-viewer"><iframe src="${(0,h._)({readfileuploadurl:null===(Lt=T.L.config)||void 0===Lt?void 0:Lt.readfileuploadurl,type:null==U?void 0:U.type,oss:null==U?void 0:U.oss,path:null==U?void 0:U.path,url:null==U?void 0:U.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,xt=jQuery(vt).appendTo(window.document.body);xt.find(".btn-close").click(function(ce){ce.preventDefault(),xt.remove()})}}},3591:(de,Kt,v)=>{v.d(Kt,{GD:()=>R,MF:()=>rt,vi:()=>S});var T=v(5619),y=v(334),lt=v(7050);const R=h=>{h.id?jQuery("#"+h.id).removeClass("hide"):h.ids&&h.ids.forEach(C=>{jQuery("#"+C).removeClass("hide")})},rt=h=>{h.id?(jQuery("#"+h.id).removeClass("hide"),(0,y.J)(T.J.findNode(h.id),h.nodeStatus,h.slideStatus)):h.ids&&h.ids.forEach(C=>{jQuery("#"+C).removeClass("hide"),(0,y.J)(T.J.findNode(C),h.nodeStatus,h.slideStatus)})},S=h=>{if(h.id){var C;let j=T.J.findNode(h.id);(0,lt.M)(h.id,{node:j,value:null===(C=j.animate)||void 0===C?void 0:C.out,nodeStatus:h.nodeStatus,slideStatus:h.slideStatus},()=>{jQuery("#"+h.id).addClass("hide")})}else h.ids&&h.ids.forEach(j=>{var _;let K=T.J.findNode(j);(0,lt.M)(j,{node:K,value:null===(_=K.animate)||void 0===_?void 0:_.out,nodeStatus:h.nodeStatus,slideStatus:h.slideStatus},()=>{jQuery("#"+j).addClass("hide")})})}},5970:(de,Kt,v)=>{v.d(Kt,{cR:()=>at,rN:()=>st,t8:()=>F,fn:()=>U,RY:()=>Pt,tD:()=>E,KG:()=>jt,c_:()=>mt,s6:()=>Q,I6:()=>z,in:()=>vt,IA:()=>gt,KP:()=>wt,AE:()=>xt,xJ:()=>It,D_:()=>ce,kE:()=>Gt});var T=v(1999),y=v(7873),lt=v(6315),rt=/^#?[a-fA-F0-9]+$/;const C=(D,P)=>{var s;if("none"==(D=null!==(s=D)&&void 0!==s?s:""))return"none";if("transparent"==D)return"rgba(0,0,0,0)";if(D.includes("rgba("))return D;if(D.includes("rgb(")&&(D=(0,lt.w)(D)),!(D=D.replace(/[^0-9a-fA-F]/g,"")))return"";if(!rt.test(D))return console.error(`hex2rgba -> ${D}: first argument has invalid hexadecimal characters`),"";if("#"===D[0]&&(D=D.slice(1)),3===D.length){let H=D.split("");H.splice(2,0,D[2]),H.splice(1,0,D[1]),H.splice(0,0,D[0]),D=H.join("")}if(6!==D.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var b=[parseInt(D.slice(0,2),16),parseInt(D.slice(2,4),16),parseInt(D.slice(4,6),16)];return P="number"==typeof P?P:parseFloat(P),b.push(P>=0&&P<=1?P:1),"rgba("+b.join(",")+")"};var j=v(2241),_=v(8779),K=v(6611),x=v(9841),nt=v(7945),it=v(9173),yt=v(1281),f=v(5619),J=v(745),I=v(6847),q=v(9506);class at{constructor(P,s){let b=window.document.querySelector(s);var H;b||(b=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(H=window.document.querySelector(P))||void 0===H||H.appendChild(b));let{svgViewBox:tt,svgSize:zt}=K.L.screen.init();b.setAttributeNS(null,"viewBox",`${tt.x} ${tt.y} ${tt.width} ${tt.height}`),b.setAttribute("id",s.replace("#","")),b.style.display="block",b.style.width=`${zt.width}px`,b.style.height=`${zt.height}px`,b.style.backgroundColor="#fafafa",b.style.cursor="default"}}const F=D=>{jQuery(K.L.target).find("#"+y.F.BACKGROUND_GROUP).empty();let P=Pt(y.F.BACKGROUND_GROUP,"g",void 0,K.L.target);z(P,D),(()=>{let s=window.document.getElementById(null==D?void 0:D.id);jQuery(s).find("#"+y.F.BACKGROUND_GROUP).empty();let b=Pt(y.F.BACKGROUND_GROUP,"g",void 0,s);z(b,D)})()},Q=()=>{let D=K.L.screen.svgViewBox,P=K.L.screen.svgSize;K.L.target&&(K.L.target.setAttributeNS(null,"viewBox",`${D.x} ${D.y} ${D.width} ${D.height}`),K.L.target.style.left=`${P.x}px`,K.L.target.style.top=`${P.y}px`,K.L.target.style.width=`${P.width}px`,K.L.target.style.height=`${P.height}px`)},st=()=>{jQuery(K.L.target).find(">*:not(defs)").remove()},U=(D,P,s,b,H)=>{let tt;return D?(tt=jQuery(H||K.L.target).find("#"+D).get(0),tt||(tt=window.document.createElementNS("http://www.w3.org/2000/svg",s),tt.setAttribute("id",D),P==T.h.FOREIGNOBJECT&&tt.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(tt).appendTo(H||K.L.target))):(tt=window.document.createElementNS("http://www.w3.org/2000/svg",s),jQuery(tt).appendTo(H||K.L.target)),null!=b&&b.attribute&&E(tt,null==b?void 0:b.attribute),null!=b&&b.style&&mt(tt,null==b?void 0:b.style),null!=b&&b.source&&jt(tt,P,null==b?void 0:b.source),tt},E=(D,P)=>{return jQuery(D).attr((s=Object.assign({},P||{}),null===(b=Object.keys(s))||void 0===b||b.forEach(zt=>{switch(zt){case"fill":break;case"fillRule":var Zt;Object.assign(s,{"fill-rule":null!==(Zt=s.fillRule)&&void 0!==Zt?Zt:null,fillRule:null});break;case"stroke":var Yt;Object.assign(s,{"stroke-width":null!==(Yt=s.strokeWidth)&&void 0!==Yt?Yt:null,strokeWidth:null});break;case"strokeLinecap":var Qt;Object.assign(s,{"stroke-linecap":null!==(Qt=s.strokeLinecap)&&void 0!==Qt?Qt:null,strokeLinecap:null});break;case"strokeLinejoin":var Nt;Object.assign(s,{"stroke-linejoin":null!==(Nt=s.strokeLinejoin)&&void 0!==Nt?Nt:null,strokeLinejoin:null});break;case"strokeMiterlimit":var ct;Object.assign(s,{"stroke-miterlimit":null!==(ct=s.strokeMiterlimit)&&void 0!==ct?ct:null,strokeMiterlimit:null});break;case"strokeDasharray":var Xt;Object.assign(s,{"stroke-dasharray":null!==(Xt=s.strokeDasharray)&&void 0!==Xt?Xt:null,strokeDasharray:null});break;case"strokeDasharrays":var M,d;Object.assign(s,{"stroke-dasharray":null!==(M=null===(d=s.strokeDasharrays)||void 0===d?void 0:d.join(" "))&&void 0!==M?M:null,strokeDasharrays:null});break;case"fontFamily":var B;Object.assign(s,{"font-family":null!==(B=s.fontFamily)&&void 0!==B?B:null,fontFamily:null});break;case"fontWeight":var ot;Object.assign(s,{"font-weight":null!==(ot=s.fontWeight)&&void 0!==ot?ot:null,fontWeight:null});break;case"fontStyle":var dt;Object.assign(s,{"font-style":null!==(dt=s.fontStyle)&&void 0!==dt?dt:null,fontStyle:null});break;case"fontSize":var X;Object.assign(s,{"font-size":null!==(X=s.fontSize)&&void 0!==X?X:null,fontSize:null});break;case"textLength":Object.assign(s,{textLength:s.textLength?`${s.textLength}px`:null});break;case"letterSpacing":var O;Object.assign(s,{"letter-spacing":null!==(O=s.letterSpacing)&&void 0!==O?O:null,letterSpacing:null});break;case"wordSpacing":var Y;Object.assign(s,{"word-spacing":null!==(Y=s.wordSpacing)&&void 0!==Y?Y:null,wordSpacing:null});break;case"alignmentBaseline":var ut;Object.assign(s,{"alignment-baseline":null!==(ut=s.alignmentBaseline)&&void 0!==ut?ut:null,alignmentBaseline:null});break;case"dominantBaseline":var _t;Object.assign(s,{"dominant-baseline":null!==(_t=s.dominantBaseline)&&void 0!==_t?_t:null,dominantBaseline:null});break;case"textAnchor":var Tt;Object.assign(s,{"text-anchor":null!==(Tt=s.textAnchor)&&void 0!==Tt?Tt:null,textAnchor:null});break;case"textDecoration":var Mt;Object.assign(s,{"text-decoration":null!==(Mt=s.textDecoration)&&void 0!==Mt?Mt:null,textDecoration:null});break;case"transformOrigin":var Ot;Object.assign(s,{"transform-origin":null!==(Ot=s.transformOrigin)&&void 0!==Ot?Ot:null,transformOrigin:null})}}),Object.assign({},null!=s?s:{},{fill:null!=s&&s.fill?C(s.fill,null!==(H=null==s?void 0:s.fillOpacity)&&void 0!==H?H:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=s&&s.stroke?C(s.stroke,null!==(tt=null==s?void 0:s.strokeOpacity)&&void 0!==tt?tt:1):"rgba(0,0,0,0)",strokeOpacity:null}))),D;var s,b,H,tt},mt=(D,P)=>{return jQuery(D).css((s=Object.assign({},P||{}),null===(b=Object.keys(s))||void 0===b||b.forEach(H=>{switch(H){case"padding":Object.assign(s,{padding:s.padding?`${s.padding}px`:null});break;case"borderWidth":var tt;Object.assign(s,s.borderWidth&&s.borderColor?{"border-width":`${s.borderWidth}px`,"border-style":s.borderStyle||"solid","border-color":C(s.borderColor,null!==(tt=s.borderOpacity)&&void 0!==tt?tt:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(s,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(s,{"border-radius":s.borderRadius?`${s.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var zt;Object.assign(s,s.backgroundColor?{"background-color":C(s.backgroundColor,null!==(zt=s.backgroundOpacity)&&void 0!==zt?zt:1)}:{"background-color":""}),Object.assign(s,{backgroundColor:null,backgroundOpacity:null})}}),s)),D;var s,b},jt=(D,P,s)=>{switch(P){case T.h.TEXT:var b,H;jQuery(D).text(null!==(b=null==s||null===(H=s.text)||void 0===H?void 0:H.textContent)&&void 0!==b?b:"");break;case T.h.TSPAN:var tt,zt;jQuery(D).text(null!==(tt=null==s||null===(zt=s.text)||void 0===zt?void 0:zt.textContent)&&void 0!==tt?tt:"");break;case T.h.IMAGE:var Zt,Yt,Qt,Nt,ct;jQuery(D).attr("href",(null==s||null===(Zt=s.image)||void 0===Zt?void 0:Zt.base64)||(null!=s&&null!==(Yt=s.image)&&void 0!==Yt&&Yt.path?(null===(Qt=K.L.config)||void 0===Qt?void 0:Qt.readfileuploadurl)+(null==s||null===(Nt=s.image)||void 0===Nt?void 0:Nt.path):null==s||null===(ct=s.image)||void 0===ct?void 0:ct.url)||"");break;case T.h.FOREIGNOBJECT:switch(null==s?void 0:s.type){case"text":var Xt,M;if(null!==(Xt=s.text)&&void 0!==Xt&&Xt.variableKeywords&&null!==(M=s.text)&&void 0!==M&&M.variableKeywords.length){var d;let c=K.L.variable.getKeys(),L=(null===(d=s.text)||void 0===d?void 0:d.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";s.text.variableKeywords.forEach(w=>{var W=w.replace(/[^a-zA-Z0-9_]/gm,"");if(c.indexOf(W)>=0){var N=K.L.variable.getValue(W);L=L.replace(w,N)}}),jQuery(D).text(L)}else{var B;jQuery(D).text((null===(B=s.text)||void 0===B?void 0:B.textContent)||"")}break;case"html":{var ot,dt,X;let c=(null==s||null===(ot=s.html)||void 0===ot?void 0:ot.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>';if(null!==(dt=s.html)&&void 0!==dt&&dt.variableKeywords&&null!==(X=s.html)&&void 0!==X&&X.variableKeywords.length){let L=K.L.variable.getKeys();s.html.variableKeywords.forEach(w=>{var W=w.replace(/[^a-zA-Z0-9_]/gm,"");if(L.indexOf(W)>=0){var N=K.L.variable.getValue(W);c=c.replace(w,N)}})}jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${c}</div>`).find("img[path],video[path],iframe[path]").each((L,w)=>{var W,N;w.setAttribute("src",(null!==(W=null===(N=K.L.config)||void 0===N?void 0:N.readfileuploadurl)&&void 0!==W?W:"")+w.getAttribute("path")),w.removeAttribute("path")});break}case"input":var O,Y,ut,_t;if(null!==(O=s.input)&&void 0!==O&&O.input)jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(ut=null===(_t=s.input)||void 0===_t?void 0:_t.placeholder)&&void 0!==ut?ut:""}" maxlength="100" /></div>`);else if(null!==(Y=s.input)&&void 0!==Y&&Y.textarea){var Tt,Mt;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(Tt=null===(Mt=s.input)||void 0===Mt?void 0:Mt.placeholder)&&void 0!==Tt?Tt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var Ot,pt,kt,Ct,Ft;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(Ot=s.image)||void 0===Ot?void 0:Ot.base64)||(null!==(pt=s.image)&&void 0!==pt&&pt.path?(null===(kt=K.L.config)||void 0===kt?void 0:kt.readfileuploadurl)+(null===(Ct=s.image)||void 0===Ct?void 0:Ct.path):null===(Ft=s.image)||void 0===Ft?void 0:Ft.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Vt,$t,ae,se;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Vt=s.iframe)&&void 0!==Vt&&Vt.path?(null===($t=K.L.config)||void 0===$t?void 0:$t.readfileuploadurl)+(null===(ae=s.iframe)||void 0===ae?void 0:ae.path):null===(se=s.iframe)||void 0===se?void 0:se.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var he,xe,Le,Ne,Te;let c=(0,j._)({readfileuploadurl:null===(he=K.L.config)||void 0===he?void 0:he.readfileuploadurl,type:null===(xe=s.embed)||void 0===xe?void 0:xe.type,oss:null===(Le=s.embed)||void 0===Le?void 0:Le.oss,path:null===(Ne=s.embed)||void 0===Ne?void 0:Ne.path,url:null===(Te=s.embed)||void 0===Te?void 0:Te.url});jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${c}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var Me,we;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(Me=null===(we=s.svg)||void 0===we?void 0:we.svgContent)&&void 0!==Me?Me:""}</div>`);break;case"test":{var Ue,Ge,ei,di;let c=(null==s||null===(Ue=s.html)||void 0===Ue?void 0:Ue.htmlContent)||"";if(null!==(Ge=s.html)&&void 0!==Ge&&Ge.variableKeywords&&null!==(ei=s.html)&&void 0!==ei&&ei.variableKeywords.length){let L=K.L.variable.getKeys();s.html.variableKeywords.forEach(w=>{var W=w.replace(/[^a-zA-Z0-9_]/gm,"");if(L.indexOf(W)>=0){var N=K.L.variable.getValue(W);c=c.replace(w,N)}})}switch(null==s||null===(di=s.test)||void 0===di?void 0:di.type){case"truefalse":var li;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(li=s.test.truefalse)&&void 0!==li&&li.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"singlechoice":var ai;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(ai=s.test.singlechoice)&&void 0!==ai&&ai.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"multichoice":var oi;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(oi=s.test.multichoice)&&void 0!==oi&&oi.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"matching-empty":var hi;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==s||null===(hi=s.test.matching)||void 0===hi?void 0:hi.key}"></div>`);break;case"matching-content":var Rt,G,i;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==s||null===(Rt=s.test.matching)||void 0===Rt?void 0:Rt.key}"><div class="ondrag-item" data-key="${null!==(G=null==s||null===(i=s.test)||void 0===i||null===(i=i.matching)||void 0===i?void 0:i.key)&&void 0!==G?G:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div></div>`);break;case"fill":var n;((null===(n=s.html)||void 0===n?void 0:n.fillKeywords)||[]).forEach(L=>{var w=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${L.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;c=c.replace(new RegExp(L.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),w)}),jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"speech":jQuery(D).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var o,r,l,m,p;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(o=null!==(r=s.image)&&void 0!==r&&r.path?(null===(l=K.L.config)||void 0===l?void 0:l.readfileuploadurl)+(null===(m=s.image)||void 0===m?void 0:m.path):null===(p=s.image)||void 0===p?void 0:p.url)&&void 0!==o?o:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(D).find("img[path],video[path],iframe[path]").each((L,w)=>{var W,N;w.setAttribute("src",(null!==(W=null===(N=K.L.config)||void 0===N?void 0:N.readfileuploadurl)&&void 0!==W?W:"")+w.getAttribute("path")),w.removeAttribute("path")})}}}},Pt=(D,P,s,b)=>{let H=jQuery(b||K.L.target).find("#"+D).get(0);return H||(H=window.document.createElementNS("http://www.w3.org/2000/svg",P),H.setAttribute("id",D),jQuery(H).appendTo(b||K.L.target)),jQuery(H).attr((null==s?void 0:s.attribute)||{}),jQuery(H).css((null==s?void 0:s.style)||{}),H},vt=(D,P)=>{let s=(0,x.$)(2),b={fill:_.pZ.fill,stroke:_.pZ.stroke,"stroke-width":(0,x.$)(_.pZ.strokeWidth)};return[{element:Pt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:P.x-s,y:P.y-s,width:P.width+2*s,height:P.height+2*s},b)},D),posType:"rect-center"}]},xt=(D,P)=>{let s=[],{size:b}=P,H=(0,x.$)(1),tt=(0,x.$)(2),zt=(0,x.$)(3),Qt=((0,x.$)(5),(0,x.$)(7),(0,x.$)(10)),Nt={stroke:_.u$.stroke,"stroke-width":(0,x.$)(_.u$.strokeWidth),"stroke-linecap":_.u$.strokeLinecap,"stroke-dasharray":_.u$.strokeDasharrays.map(Ft=>(0,x.$)(Ft)).join(" ")},ct={fill:_.bf.fill,stroke:_.bf.stroke,"stroke-width":(0,x.$)(_.bf.strokeWidth)},Xt={fill:_.eD.fill,stroke:_.eD.stroke,"stroke-width":(0,x.$)(_.eD.strokeWidth),width:(0,x.$)(_.eD.width),height:(0,x.$)(_.eD.height)},M={fill:_.eD.fill,stroke:_.eD.stroke,"stroke-width":(0,x.$)(_.eD.strokeWidth),width:(0,x.$)(_.eD.width),height:(0,x.$)(_.eD.height)},d=Pt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:b.x,y:b.y,width:b.width,height:b.height},ct),style:{cursor:"move"}},D);if(Pt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:b.x-H,y1:b.y-H,x2:b.x-H,y2:b.y+b.height+H},Nt)},D),Pt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:b.x-H,y1:b.y-H,x2:b.x+b.width+H,y2:b.y-H},Nt)},D),Pt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:b.x+b.width+H,y1:b.y-H,x2:b.x+b.width+H,y2:b.y+b.height+H},Nt)},D),Pt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:b.x-H,y1:b.y+b.height+H,x2:b.x+b.width+H,y2:b.y+b.height+H},Nt)},D),P.type==T.h.LINE){var O;let{size:Ft}=P,Vt=[];return null===(O=Ft.ratios)||void 0===O||O.forEach(function($t){Vt.push([Ft.x+Ft.width*$t[0],Ft.y+Ft.height*$t[1]])}),Vt.forEach(($t,ae)=>{s.push({posType:`point-${ae}`,element:Pt(`icdt-temp-resize-point-${ae+1}`,"circle",{attribute:Object.assign((0,q.xW)(T.h.CIRCLE,{x:$t[0]-tt-H,y:$t[1]-tt-H,width:M.width,height:M.height},{}),M)},D)})}),s.concat([{element:d,posType:"rect-center"}])}if(P.type==T.h.POLYGON){var Y;let{size:Ft}=P,Vt=[];null===(Y=Ft.ratios)||void 0===Y||Y.forEach(function($t){Vt.push([Ft.x+Ft.width*$t[0],Ft.y+Ft.height*$t[1]])}),Vt.forEach(($t,ae)=>{s.push({posType:`point-${ae}`,element:Pt(`icdt-temp-resize-point-${ae+1}`,"circle",{attribute:Object.assign((0,q.xW)(T.h.CIRCLE,{x:$t[0]-tt-H,y:$t[1]-tt-H,width:M.width,height:M.height},{}),M)},D)})})}let ut=Pt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:b.x-Qt,y:b.y-Qt},Xt),style:{cursor:"nw-resize"}},D),_t=Pt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:b.x+b.width+zt,y:b.y-Qt},Xt),style:{cursor:"ne-resize"}},D),Tt=Pt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:b.x-Qt,y:b.y+b.height+zt},Xt),style:{cursor:"sw-resize"}},D),Mt=Pt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:b.x+b.width+zt,y:b.y+b.height+zt},Xt),style:{cursor:"se-resize"}},D),Ot=Pt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:b.x-Qt,y:b.y+b.height/2-tt-H},Xt),style:{cursor:"w-resize"}},D),pt=Pt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:b.x+b.width/2-tt-H,y:b.y-Qt},Xt),style:{cursor:"n-resize"}},D),kt=Pt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:b.x+b.width+zt,y:b.y+b.height/2-tt-H},Xt),style:{cursor:"e-resize"}},D),Ct=Pt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:b.x+b.width/2-tt-H,y:b.y+b.height+zt},Xt),style:{cursor:"s-resize"}},D);return s.concat([{element:d,posType:"rect-center"},{element:ut,posType:"rect-top-left"},{element:_t,posType:"rect-top-right"},{element:Tt,posType:"rect-bottom-left"},{element:Mt,posType:"rect-bottom-right"},{element:Ot,posType:"rect-left"},{element:pt,posType:"rect-top"},{element:kt,posType:"rect-right"},{element:Ct,posType:"rect-bottom"}])},ce=(D,P,s)=>{let b=(0,x.$)(1),H=(0,x.$)(2),tt=(0,x.$)(5),zt={stroke:_.u$.stroke,"stroke-width":(0,x.$)(_.u$.strokeWidth),"stroke-linecap":_.u$.strokeLinecap},Zt={fill:_.bf.fill,stroke:_.bf.stroke,"stroke-width":(0,x.$)(_.bf.strokeWidth)},Yt={fill:_.eD.fill,stroke:_.eD.stroke,"stroke-width":(0,x.$)(_.eD.strokeWidth),width:(0,x.$)(_.eD.width),height:(0,x.$)(_.eD.height)},Qt={fill:_.l6.fill,rx:(0,x.$)(_.l6.rx)},Nt={fill:_.T2.fill,"alignment-baseline":_.T2.alignmentBaseline,"text-anchor":_.T2.textAnchor,"font-size":(0,x.$)(_.T2.fontSize)},ct={fill:_.IB.fill,stroke:_.IB.stroke,"stroke-width":(0,x.$)(_.IB.strokeWidth)},ot=(Pt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:s.x-b,y1:s.y-b,x2:s.x-b,y2:s.y+s.height+b},zt)},D),Pt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:s.x-b,y1:s.y-b,x2:s.x+s.width+b,y2:s.y-b},zt)},D),Pt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:s.x+s.width+b,y1:s.y-b,x2:s.x+s.width+b,y2:s.y+s.height+b},zt)},D),Pt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:s.x-b,y1:s.y+s.height+b,x2:s.x+s.width+b,y2:s.y+s.height+b},zt)},D),Pt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:s.x,y:s.y,width:s.width,height:s.height},Zt)},D)),dt=`${s.width} x ${s.height}`,X=8*dt.length;return Pt("icdt-temp-select-rect-text","rect",{attribute:Object.assign({x:s.x+s.width/2-(0,x.$)(X/2),y:s.y+s.height+(0,x.$)(10),width:(0,x.$)(X),height:(0,x.$)(20)},Qt)},D),Pt("icdt-temp-select-text","text",{attribute:Object.assign({x:s.x+s.width/2,y:s.y+s.height+(0,x.$)(20)},Nt)},D).textContent=dt,P.length>1&&P.forEach(Ft=>{let{size:Vt}=Ft;Pt("icdt-temp-select-rect-node-"+Ft.id,"rect",{attribute:Object.assign({x:Vt.x,y:Vt.y,width:Vt.width,height:Vt.height},ct)},D)}),[{element:ot,posType:"rect-center"},{element:Pt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:s.x-tt,y:s.y-tt},Yt),style:{cursor:"nw-resize"}},D),posType:"rect-top-left"},{element:Pt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:s.x+s.width-H,y:s.y-tt},Yt),style:{cursor:"ne-resize"}},D),posType:"rect-top-right"},{element:Pt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:s.x-tt,y:s.y+s.height-H},Yt),style:{cursor:"sw-resize"}},D),posType:"rect-bottom-left"},{element:Pt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:s.x+s.width-H,y:s.y+s.height-H},Yt),style:{cursor:"se-resize"}},D),posType:"rect-bottom-right"},{element:Pt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:s.x-tt,y:s.y+s.height/2-H-b},Yt),style:{cursor:"w-resize"}},D),posType:"rect-left"},{element:Pt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:s.x+s.width/2-H-b,y:s.y-tt},Yt),style:{cursor:"n-resize"}},D),posType:"rect-top"},{element:Pt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:s.x+s.width-H,y:s.y+s.height/2-H-b},Yt),style:{cursor:"e-resize"}},D),posType:"rect-right"},{element:Pt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:s.x+s.width/2-H-b,y:s.y+s.height-H},Yt),style:{cursor:"s-resize"}},D),posType:"rect-bottom"}]},It=(D,P)=>{let s=(0,x.$)(1),b={stroke:_.u$.stroke,"stroke-width":(0,x.$)(_.u$.strokeWidth),"stroke-linecap":_.u$.strokeLinecap},H={fill:_.bf.fill,stroke:_.bf.stroke,"stroke-width":(0,x.$)(_.bf.strokeWidth)};return Pt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:P.x-s,y1:P.y,x2:P.x-s,y2:P.y+P.height},b)},D),Pt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:P.x,y1:P.y-s,x2:P.x+P.width,y2:P.y-s},b)},D),Pt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:P.x+P.width+s,y1:P.y,x2:P.x+P.width+s,y2:P.y+P.height},b)},D),Pt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:P.x,y1:P.y+P.height+s,x2:P.x+P.width,y2:P.y+P.height+s},b)},D),[{element:Pt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:P.x,y:P.y,width:P.width,height:P.height},H)},D),posType:"rect-center"}]},wt=(D,P)=>((0,x.$)(-1),(0,x.$)(_.WR.strokeWidth),(0,x.$)(_.WR.strokeDasharray),Pt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:P.x,y:P.y,width:P.width,height:P.height,class:"cursor-draw"},{fill:_.lq.fill})},D),[]),gt=(D,P)=>{let s={fill:_.$u.fill,stroke:_.$u.stroke,"stroke-width":(0,x.$)(_.$u.strokeWidth),"stroke-dasharray":(0,x.$)(_.$u.strokeDasharray)};jQuery(D).empty(),P.forEach(b=>{var H,tt;let{size:zt}=b;if(!b.idx)return;Pt("icdt-temp-index-rect-node-"+b.id,"rect",{attribute:Object.assign({x:zt.x-5,y:zt.y-5,width:zt.width+10,height:zt.height+10},s)},D);let{element:Zt}=(0,J.$)(Math.ceil(1e9*Math.random()),{size:{x:zt.x-76,y:zt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(H=b.idx)&&void 0!==H?H:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(tt=b.time)&&void 0!==tt?tt:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},D);Zt.classList.add("node-input"),jQuery(Zt).on("change",'input[name="idx"]',Yt=>{var Qt;b.idx=parseInt(null!==(Qt=Yt.target.value)&&void 0!==Qt?Qt:"0")}).on("change",'input[name="time"]',Yt=>{var Qt;b.time=parseFloat(null!==(Qt=Yt.target.value)&&void 0!==Qt?Qt:"0")}).on("click",'button[name="remove"]',Yt=>{b.idx=0,b.time=null,gt(D,P)})})},z=(D,P)=>{var s,b,H,tt,zt,Zt;let{color:Yt,opacity:Qt,path:Nt,url:ct,base64:Xt}=null!==(s=null==P||null===(b=P.svg)||void 0===b?void 0:b.background)&&void 0!==s?s:{},{x:M,y:d,width:B,height:ot}=null!==(H=null==P||null===(tt=P.svg)||void 0===tt?void 0:tt.viewBox)&&void 0!==H?H:{x:0,y:0,width:0,height:0};(0,I.L)(void 0,{size:{x:0,y:(0,x.$)(-10),width:100,height:20},attribute:{fill:"#999",textAnchor:"start",alignmentBaseline:"central",fontSize:(0,x.$)(12),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(zt=null!==(Zt=null==P?void 0:P.name)&&void 0!==Zt?Zt:null==P?void 0:P.code)&&void 0!==zt?zt:void 0}}},D),(0,nt.a)(void 0,{size:{x:M,y:d,width:B,height:ot},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,x.$)(1),strokeDasharray:(0,x.$)(10),class:"hide-on-viewer"}},D),Yt&&(0,nt.a)(void 0,{size:{x:M,y:d,width:B,height:ot},attribute:{fill:Yt,fillOpacity:Qt}},D),Nt&&(0,it.B)(void 0,{size:{x:M,y:d,width:B,height:ot},source:{type:"image",image:{path:Nt,url:ct,base64:Xt}}},D)},Gt=(D,P,s)=>{var b;switch(jQuery(D).empty(),null===(b=P.test)||void 0===b?void 0:b.type){case"truefalse":var H;if(null!==(H=P.test)&&void 0!==H&&H.showselection){var tt,zt,Zt;let Ot=null==P||null===(tt=P.test)||void 0===tt||null===(tt=tt.answer)||void 0===tt||null===(tt=tt.truefalse)||void 0===tt?void 0:tt.value;null===(zt=P.svg)||void 0===zt||zt.nodes.filter(pt=>{var kt;return"truefalse"==(null===(kt=pt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)&&pt.id!=Ot}).forEach(pt=>{var kt;let{x:Ft,y:Vt,width:$t,height:ae}=null!==(kt=null==pt?void 0:pt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,yt.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Vt-.5,width:$t+1,height:ae+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},D)}),null!=P&&null!==(Zt=P.test)&&void 0!==Zt&&null!==(Zt=Zt.answer)&&void 0!==Zt&&Zt.truefalse&&Ot&&(pt=>{let kt=f.J.findNode(Ot),{x:Ft,y:Vt,width:$t,height:ae}=null!==(pt=null==kt?void 0:kt.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,yt.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-2,y:Vt-2,width:$t+4,height:ae+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},D)})()}break;case"singlechoice":var Yt;if(null!==(Yt=P.test)&&void 0!==Yt&&Yt.showselection){var Qt,Nt,ct;let Ot=null==P||null===(Qt=P.test)||void 0===Qt||null===(Qt=Qt.answer)||void 0===Qt||null===(Qt=Qt.singlechoice)||void 0===Qt?void 0:Qt.value;null===(Nt=P.svg)||void 0===Nt||Nt.nodes.filter(pt=>{var kt;return"singlechoice"==(null===(kt=pt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)&&pt.id!=Ot}).forEach(pt=>{var kt;let{x:Ft,y:Vt,width:$t,height:ae}=null!==(kt=null==pt?void 0:pt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,yt.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Vt-.5,width:$t+1,height:ae+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},D)}),null!=P&&null!==(ct=P.test)&&void 0!==ct&&null!==(ct=ct.answer)&&void 0!==ct&&ct.singlechoice&&Ot&&(pt=>{let kt=f.J.findNode(Ot),{x:Ft,y:Vt,width:$t,height:ae}=null!==(pt=null==kt?void 0:kt.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,yt.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-2,y:Vt-2,width:$t+4,height:ae+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},D)})()}break;case"multichoice":var Xt;if(null!==(Xt=P.test)&&void 0!==Xt&&Xt.showselection){var M,d,B,ot;let Ot=null!==(M=null==P||null===(d=P.test)||void 0===d||null===(d=d.answer)||void 0===d||null===(d=d.multichoice)||void 0===d?void 0:d.map(pt=>pt.value))&&void 0!==M?M:[];var dt;null===(B=P.svg)||void 0===B||B.nodes.filter(pt=>{var kt;return"multichoice"==(null===(kt=pt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)&&!Ot.includes(pt.id)}).forEach(pt=>{var kt;let{x:Ft,y:Vt,width:$t,height:ae}=null!==(kt=null==pt?void 0:pt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,nt.a)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Vt-.5,width:$t+1,height:ae+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},D)}),null!=P&&null!==(ot=P.test)&&void 0!==ot&&null!==(ot=ot.answer)&&void 0!==ot&&ot.multichoice&&Ot.length&&(null==P||null===(dt=P.test)||void 0===dt||null===(dt=dt.answer)||void 0===dt||dt.multichoice.forEach(pt=>{var kt;let Ct=f.J.findNode(pt.value),{x:Vt,y:$t,width:ae,height:se}=null!==(kt=null==Ct?void 0:Ct.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,nt.a)(Math.ceil(1e9*Math.random()),{size:{x:Vt-2,y:$t-2,width:ae+4,height:se+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},D)}))}break;case"fill":var X,O;null!=P&&null!==(X=P.test)&&void 0!==X&&null!==(X=X.answer)&&void 0!==X&&X.fill&&(null==P||null===(O=P.test)||void 0===O||null===(O=O.answer)||void 0===O||O.fill.forEach(Ot=>{jQuery("#"+s.id).find(`input[type="text"][data-key="${Ot.key}"]`).val(Ot.value)}));break;case"matching":var Y,ut,_t,Tt;if(null!=P&&null!==(Y=P.test)&&void 0!==Y&&null!==(Y=Y.answer)&&void 0!==Y&&Y.matching)if("matching-empty"==(null===(ut=s.source)||void 0===ut||null===(ut=ut.test)||void 0===ut?void 0:ut.type))null==P||null===(Tt=P.test)||void 0===Tt||null===(Tt=Tt.answer)||void 0===Tt||Tt.matching.filter(Ot=>{var pt;return Ot.key==(null===(pt=s.source)||void 0===pt||null===(pt=pt.test)||void 0===pt||null===(pt=pt.matching)||void 0===pt?void 0:pt.key)}).forEach(Ot=>{});else if("matching-content"==(null===(_t=s.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)){var Mt;null==P||null===(Mt=P.test)||void 0===Mt||null===(Mt=Mt.answer)||void 0===Mt||Mt.matching.filter(Ot=>{var pt;return Ot.value==(null===(pt=s.source)||void 0===pt||null===(pt=pt.test)||void 0===pt||null===(pt=pt.matching)||void 0===pt?void 0:pt.key)}).forEach(Ot=>{})}}}},2241:(de,Kt,v)=>{v.d(Kt,{_:()=>lt});var T=v(8338);const lt=S=>{switch(null==S?void 0:S.type){case T.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+S.readfileuploadurl+S.path;case T.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+S.readfileuploadurl+S.path;case T.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+S.readfileuploadurl+S.path;case T.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+S.readfileuploadurl+S.path;case T.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+S.readfileuploadurl+S.path;case T.S.HTML:case T.S.IMAGE_ANIMATION:case T.S.PHET:return""+S.readfileuploadurl+S.path;case T.S.ZIP:case T.S.SCORM:var h;return"imsmanifest.xml"==(null===(h=S.path)||void 0===h||null===(h=h.split("/"))||void 0===h?void 0:h.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+S.readfileuploadurl+S.path:""+S.readfileuploadurl+S.path;case T.S.TRACK:case T.S.TEXT:return""+S.readfileuploadurl+S.path;case T.S.LINK:switch(S.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+S.url;case 1002:var C;return null!==(C=R(S.url))&&void 0!==C?C:"";case 1005:var j;return null!==(j=S.url)&&void 0!==j?j:"";default:var _;return null!==(_=S.url)&&void 0!==_?_:""}default:return""+S.readfileuploadurl+S.path}},R=S=>{let h=rt(S);return h?"https://www.youtube.com/embed/"+h+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},rt=S=>{let h=null==S?void 0:S.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return h&&h.length>=2?h[1]:null}},1131:(de,Kt,v)=>{function T(){}function y(t){return null==t?T:function(){return this.querySelector(t)}}function rt(){return[]}function S(t){return null==t?rt:function(){return this.querySelectorAll(t)}}function j(t){return function(){return this.matches(t)}}function _(t){return function(e){return e.matches(t)}}v.d(Kt,{qrM:()=>aa,n8j:()=>la});var K=Array.prototype.find;function nt(){return this.firstElementChild}var yt=Array.prototype.filter;function f(){return Array.from(this.children)}function at(t){return new Array(t.length)}function Q(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function U(t,e,a,u,g,k){for(var V,A=0,Z=e.length,ft=k.length;A<ft;++A)(V=e[A])?(V.__data__=k[A],u[A]=V):a[A]=new Q(t,k[A]);for(;A<Z;++A)(V=e[A])&&(g[A]=V)}function E(t,e,a,u,g,k,A){var V,Z,ie,ft=new Map,bt=e.length,Jt=k.length,Ht=new Array(bt);for(V=0;V<bt;++V)(Z=e[V])&&(Ht[V]=ie=A.call(Z,Z.__data__,V,e)+"",ft.has(ie)?g[V]=Z:ft.set(ie,Z));for(V=0;V<Jt;++V)ie=A.call(t,k[V],V,k)+"",(Z=ft.get(ie))?(u[V]=Z,Z.__data__=k[V],ft.delete(ie)):a[V]=new Q(t,k[V]);for(V=0;V<bt;++V)(Z=e[V])&&ft.get(Ht[V])===Z&&(g[V]=Z)}function mt(t){return t.__data__}function Lt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function It(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Q.prototype={constructor:Q,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var s="http://www.w3.org/1999/xhtml";const b={svg:"http://www.w3.org/2000/svg",xhtml:s,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function H(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),b.hasOwnProperty(e)?{space:b[e],local:t}:t}function tt(t){return function(){this.removeAttribute(t)}}function zt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zt(t,e){return function(){this.setAttribute(t,e)}}function Yt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Qt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function Nt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function Xt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function M(t){return function(){this.style.removeProperty(t)}}function d(t,e,a){return function(){this.style.setProperty(t,e,a)}}function B(t,e,a){return function(){var u=e.apply(this,arguments);null==u?this.style.removeProperty(t):this.style.setProperty(t,u,a)}}function dt(t,e){return t.style.getPropertyValue(e)||Xt(t).getComputedStyle(t,null).getPropertyValue(e)}function X(t){return function(){delete this[t]}}function O(t,e){return function(){this[t]=e}}function Y(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function _t(t){return t.trim().split(/^|\s+/)}function Tt(t){return t.classList||new Mt(t)}function Mt(t){this._node=t,this._names=_t(t.getAttribute("class")||"")}function Ot(t,e){for(var a=Tt(t),u=-1,g=e.length;++u<g;)a.add(e[u])}function pt(t,e){for(var a=Tt(t),u=-1,g=e.length;++u<g;)a.remove(e[u])}function kt(t){return function(){Ot(this,t)}}function Ct(t){return function(){pt(this,t)}}function Ft(t,e){return function(){(e.apply(this,arguments)?Ot:pt)(this,t)}}function $t(){this.textContent=""}function ae(t){return function(){this.textContent=t}}function se(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function xe(){this.innerHTML=""}function Le(t){return function(){this.innerHTML=t}}function Ne(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Me(){this.nextSibling&&this.parentNode.appendChild(this)}function Ue(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ei(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===s&&e.documentElement.namespaceURI===s?e.createElement(t):e.createElementNS(a,t)}}function di(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function li(t){var e=H(t);return(e.local?di:ei)(e)}function oi(){return null}function Rt(){var t=this.parentNode;t&&t.removeChild(this)}function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function n(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function p(t){return function(){var e=this.__on;if(e){for(var k,a=0,u=-1,g=e.length;a<g;++a)k=e[a],t.type&&k.type!==t.type||k.name!==t.name?e[++u]=k:this.removeEventListener(k.type,k.listener,k.options);++u?e.length=u:delete this.__on}}}function c(t,e,a){return function(){var g,u=this.__on,k=function l(t){return function(e){t.call(this,e,this.__data__)}}(e);if(u)for(var A=0,V=u.length;A<V;++A)if((g=u[A]).type===t.type&&g.name===t.name)return this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=k,g.options=a),void(g.value=e);this.addEventListener(t.type,k,a),g={type:t.type,name:t.name,value:e,listener:k,options:a},u?u.push(g):this.__on=[g]}}function w(t,e,a){var u=Xt(t),g=u.CustomEvent;"function"==typeof g?g=new g(e,a):(g=u.document.createEvent("Event"),a?(g.initEvent(e,a.bubbles,a.cancelable),g.detail=a.detail):g.initEvent(e,!1,!1)),t.dispatchEvent(g)}function W(t,e){return function(){return w(this,t,e)}}function N(t,e){return function(){return w(this,t,e.apply(this,arguments))}}Mt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var At=[null];function Bt(t,e){this._groups=t,this._parents=e}function ee(){return new Bt([[document.documentElement]],At)}Bt.prototype=ee.prototype={constructor:Bt,select:function lt(t){"function"!=typeof t&&(t=y(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Z,ft,k=e[g],A=k.length,V=u[g]=new Array(A),bt=0;bt<A;++bt)(Z=k[bt])&&(ft=t.call(Z,Z.__data__,bt,k))&&("__data__"in Z&&(ft.__data__=Z.__data__),V[bt]=ft);return new Bt(u,this._parents)},selectAll:function C(t){t="function"==typeof t?function h(t){return function(){return function R(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):S(t);for(var e=this._groups,a=e.length,u=[],g=[],k=0;k<a;++k)for(var Z,A=e[k],V=A.length,ft=0;ft<V;++ft)(Z=A[ft])&&(u.push(t.call(Z,Z.__data__,ft,A)),g.push(Z));return new Bt(u,g)},selectChild:function it(t){return this.select(null==t?nt:function x(t){return function(){return K.call(this.children,t)}}("function"==typeof t?t:_(t)))},selectChildren:function I(t){return this.selectAll(null==t?f:function J(t){return function(){return yt.call(this.children,t)}}("function"==typeof t?t:_(t)))},filter:function q(t){"function"!=typeof t&&(t=j(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Z,k=e[g],A=k.length,V=u[g]=[],ft=0;ft<A;++ft)(Z=k[ft])&&t.call(Z,Z.__data__,ft,k)&&V.push(Z);return new Bt(u,this._parents)},data:function jt(t,e){if(!arguments.length)return Array.from(this,mt);var a=e?E:U,u=this._parents,g=this._groups;"function"!=typeof t&&(t=function st(t){return function(){return t}}(t));for(var k=g.length,A=new Array(k),V=new Array(k),Z=new Array(k),ft=0;ft<k;++ft){var bt=u[ft],Jt=g[ft],Ht=Jt.length,ie=Lt(t.call(bt,bt&&bt.__data__,ft,u)),Oe=ie.length,Ae=V[ft]=new Array(Oe),Ut=A[ft]=new Array(Oe);a(bt,Jt,Ae,Ut,Z[ft]=new Array(Ht),ie,e);for(var fe,pe,oe=0,ne=0;oe<Oe;++oe)if(fe=Ae[oe]){for(oe>=ne&&(ne=oe+1);!(pe=Ut[ne])&&++ne<Oe;);fe._next=pe||null}}return(A=new Bt(A,u))._enter=V,A._exit=Z,A},enter:function F(){return new Bt(this._enter||this._groups.map(at),this._parents)},exit:function Pt(){return new Bt(this._exit||this._groups.map(at),this._parents)},join:function vt(t,e,a){var u=this.enter(),g=this,k=this.exit();return"function"==typeof t?(u=t(u))&&(u=u.selection()):u=u.append(t+""),null!=e&&(g=e(g))&&(g=g.selection()),null==a?k.remove():a(k),u&&g?u.merge(g).order():g},merge:function xt(t){for(var e=t.selection?t.selection():t,a=this._groups,u=e._groups,g=a.length,A=Math.min(g,u.length),V=new Array(g),Z=0;Z<A;++Z)for(var ie,ft=a[Z],bt=u[Z],Jt=ft.length,Ht=V[Z]=new Array(Jt),Oe=0;Oe<Jt;++Oe)(ie=ft[Oe]||bt[Oe])&&(Ht[Oe]=ie);for(;Z<g;++Z)V[Z]=a[Z];return new Bt(V,this._parents)},selection:function _e(){return this},order:function ce(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var A,u=t[e],g=u.length-1,k=u[g];--g>=0;)(A=u[g])&&(k&&4^A.compareDocumentPosition(k)&&k.parentNode.insertBefore(A,k),k=A);return this},sort:function et(t){function e(Jt,Ht){return Jt&&Ht?t(Jt.__data__,Ht.__data__):!Jt-!Ht}t||(t=It);for(var a=this._groups,u=a.length,g=new Array(u),k=0;k<u;++k){for(var ft,A=a[k],V=A.length,Z=g[k]=new Array(V),bt=0;bt<V;++bt)(ft=A[bt])&&(Z[bt]=ft);Z.sort(e)}return new Bt(g,this._parents).order()},call:function wt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function gt(){return Array.from(this)},node:function z(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var u=t[e],g=0,k=u.length;g<k;++g){var A=u[g];if(A)return A}return null},size:function Gt(){let t=0;for(const e of this)++t;return t},empty:function D(){return!this.node()},each:function P(t){for(var e=this._groups,a=0,u=e.length;a<u;++a)for(var V,g=e[a],k=0,A=g.length;k<A;++k)(V=g[k])&&t.call(V,V.__data__,k,g);return this},attr:function ct(t,e){var a=H(t);if(arguments.length<2){var u=this.node();return a.local?u.getAttributeNS(a.space,a.local):u.getAttribute(a)}return this.each((null==e?a.local?zt:tt:"function"==typeof e?a.local?Nt:Qt:a.local?Yt:Zt)(a,e))},style:function ot(t,e,a){return arguments.length>1?this.each((null==e?M:"function"==typeof e?B:d)(t,e,null==a?"":a)):dt(this.node(),t)},property:function ut(t,e){return arguments.length>1?this.each((null==e?X:"function"==typeof e?Y:O)(t,e)):this.node()[t]},classed:function Vt(t,e){var a=_t(t+"");if(arguments.length<2){for(var u=Tt(this.node()),g=-1,k=a.length;++g<k;)if(!u.contains(a[g]))return!1;return!0}return this.each(("function"==typeof e?Ft:e?kt:Ct)(a,e))},text:function he(t){return arguments.length?this.each(null==t?$t:("function"==typeof t?se:ae)(t)):this.node().textContent},html:function Te(t){return arguments.length?this.each(null==t?xe:("function"==typeof t?Ne:Le)(t)):this.node().innerHTML},raise:function we(){return this.each(Me)},lower:function Ge(){return this.each(Ue)},append:function ai(t){var e="function"==typeof t?t:li(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function hi(t,e){var a="function"==typeof t?t:li(t),u=null==e?oi:"function"==typeof e?e:y(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),u.apply(this,arguments)||null)})},remove:function G(){return this.each(Rt)},clone:function o(t){return this.select(t?n:i)},datum:function r(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function L(t,e,a){var g,A,u=function m(t){return t.trim().split(/^|\s+/).map(function(e){var a="",u=e.indexOf(".");return u>=0&&(a=e.slice(u+1),e=e.slice(0,u)),{type:e,name:a}})}(t+""),k=u.length;if(!(arguments.length<2)){for(V=e?c:p,g=0;g<k;++g)this.each(V(u[g],e,a));return this}var V=this.node().__on;if(V)for(var bt,Z=0,ft=V.length;Z<ft;++Z)for(g=0,bt=V[Z];g<k;++g)if((A=u[g]).type===bt.type&&A.name===bt.name)return bt.value},dispatch:function St(t,e){return this.each(("function"==typeof e?N:W)(t,e))},[Symbol.iterator]:function*Et(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var A,u=t[e],g=0,k=u.length;g<k;++g)(A=u[g])&&(yield A)}};const me=ee;var Ee={value:()=>{}};function be(){for(var u,t=0,e=arguments.length,a={};t<e;++t){if(!(u=arguments[t]+"")||u in a||/[\s.]/.test(u))throw new Error("illegal type: "+u);a[u]=[]}return new ke(a)}function ke(t){this._=t}function ar(t,e){for(var g,a=0,u=t.length;a<u;++a)if((g=t[a]).name===e)return g.value}function gn(t,e,a){for(var u=0,g=t.length;u<g;++u)if(t[u].name===e){t[u]=Ee,t=t.slice(0,u).concat(t.slice(u+1));break}return null!=a&&t.push({name:e,value:a}),t}ke.prototype=be.prototype={constructor:ke,on:function(t,e){var g,a=this._,u=function lr(t,e){return t.trim().split(/^|\s+/).map(function(a){var u="",g=a.indexOf(".");if(g>=0&&(u=a.slice(g+1),a=a.slice(0,g)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:u}})}(t+"",a),k=-1,A=u.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++k<A;)if(g=(t=u[k]).type)a[g]=gn(a[g],t.name,e);else if(null==e)for(g in a)a[g]=gn(a[g],t.name,null);return this}for(;++k<A;)if((g=(t=u[k]).type)&&(g=ar(a[g],t.name)))return g},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new ke(t)},call:function(t,e){if((g=arguments.length-2)>0)for(var g,k,a=new Array(g),u=0;u<g;++u)a[u]=arguments[u+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=0,g=(k=this._[t]).length;u<g;++u)k[u].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var u=this._[t],g=0,k=u.length;g<k;++g)u[g].value.apply(e,a)}};const or=be;var Ni,Ti,mi=0,Oi=0,Si=0,yn=1e3,Di=0,ci=0,ji=0,ki="object"==typeof performance&&performance.now?performance:Date,mn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return ci||(mn(sr),ci=ki.now()+ji)}function sr(){ci=0}function zi(){this._call=this._time=this._next=null}function pn(t,e,a){var u=new zi;return u.restart(t,e,a),u}function wn(){ci=(Di=ki.now())+ji,mi=Oi=0;try{!function ur(){Xi(),++mi;for(var e,t=Ni;t;)(e=ci-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mi}()}finally{mi=0,function hr(){for(var t,a,e=Ni,u=1/0;e;)e._call?(u>e._time&&(u=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);Ti=t,qi(u)}(),ci=0}}function dr(){var t=ki.now(),e=t-Di;e>yn&&(ji-=e,Di=t)}function qi(t){mi||(Oi&&(Oi=clearTimeout(Oi)),t-ci>24?(t<1/0&&(Oi=setTimeout(wn,t-ki.now()-ji)),Si&&(Si=clearInterval(Si))):(Si||(Di=ki.now(),Si=setInterval(dr,yn)),mi=1,mn(wn)))}function xn(t,e,a){var u=new zi;return u.restart(g=>{u.stop(),t(g+e)},e=null==e?0:+e,a),u}zi.prototype=pn.prototype={constructor:zi,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Xi():+a)+(null==e?0:+e),!this._next&&Ti!==this&&(Ti?Ti._next=this:Ni=this,Ti=this),this._call=t,this._time=a,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cr=or("start","end","cancel","interrupt"),vr=[],bn=0,Ki=3;function Fi(t,e,a,u,g,k){var A=t.__transition;if(A){if(a in A)return}else t.__transition={};!function fr(t,e,a){var g,u=t.__transition;function A(ft){var bt,Jt,Ht,ie;if(1!==a.state)return Z();for(bt in u)if((ie=u[bt]).name===a.name){if(ie.state===Ki)return xn(A);4===ie.state?(ie.state=6,ie.timer.stop(),ie.on.call("interrupt",t,t.__data__,ie.index,ie.group),delete u[bt]):+bt<e&&(ie.state=6,ie.timer.stop(),ie.on.call("cancel",t,t.__data__,ie.index,ie.group),delete u[bt])}if(xn(function(){a.state===Ki&&(a.state=4,a.timer.restart(V,a.delay,a.time),V(ft))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=Ki,g=new Array(Ht=a.tween.length),bt=0,Jt=-1;bt<Ht;++bt)(ie=a.tween[bt].value.call(t,t.__data__,a.index,a.group))&&(g[++Jt]=ie);g.length=Jt+1}}function V(ft){for(var bt=ft<a.duration?a.ease.call(null,ft/a.duration):(a.timer.restart(Z),a.state=5,1),Jt=-1,Ht=g.length;++Jt<Ht;)g[Jt].call(t,bt);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),Z())}function Z(){for(var ft in a.state=6,a.timer.stop(),delete u[e],u)return;delete t.__transition}u[e]=a,a.timer=pn(function k(ft){a.state=1,a.timer.restart(A,a.delay,a.time),a.delay<=ft&&A(ft-a.delay)},0,a.time)}(t,a,{name:e,index:u,group:g,on:cr,tween:vr,time:k.time,delay:k.delay,duration:k.duration,ease:k.ease,timer:null,state:bn})}function en(t,e){var a=Ze(t,e);if(a.state>bn)throw new Error("too late; already scheduled");return a}function qe(t,e){var a=Ze(t,e);if(a.state>Ki)throw new Error("too late; already running");return a}function Ze(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function si(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Wi,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,u,g,k){var A,V,Z;return(A=Math.sqrt(t*t+e*e))&&(t/=A,e/=A),(Z=t*a+e*u)&&(a-=t*Z,u-=e*Z),(V=Math.sqrt(a*a+u*u))&&(a/=V,u/=V,Z/=V),t*u<e*a&&(t=-t,e=-e,Z=-Z,A=-A),{translateX:g,translateY:k,rotate:Math.atan2(e,t)*On,skewX:Math.atan(Z)*On,scaleX:A,scaleY:V}}function Tn(t,e,a,u){function g(ft){return ft.length?ft.pop()+" ":""}return function(ft,bt){var Jt=[],Ht=[];return ft=t(ft),bt=t(bt),function k(ft,bt,Jt,Ht,ie,Oe){if(ft!==Jt||bt!==Ht){var Ae=ie.push("translate(",null,e,null,a);Oe.push({i:Ae-4,x:si(ft,Jt)},{i:Ae-2,x:si(bt,Ht)})}else(Jt||Ht)&&ie.push("translate("+Jt+e+Ht+a)}(ft.translateX,ft.translateY,bt.translateX,bt.translateY,Jt,Ht),function A(ft,bt,Jt,Ht){ft!==bt?(ft-bt>180?bt+=360:bt-ft>180&&(ft+=360),Ht.push({i:Jt.push(g(Jt)+"rotate(",null,u)-2,x:si(ft,bt)})):bt&&Jt.push(g(Jt)+"rotate("+bt+u)}(ft.rotate,bt.rotate,Jt,Ht),function V(ft,bt,Jt,Ht){ft!==bt?Ht.push({i:Jt.push(g(Jt)+"skewX(",null,u)-2,x:si(ft,bt)}):bt&&Jt.push(g(Jt)+"skewX("+bt+u)}(ft.skewX,bt.skewX,Jt,Ht),function Z(ft,bt,Jt,Ht,ie,Oe){if(ft!==Jt||bt!==Ht){var Ae=ie.push(g(ie)+"scale(",null,",",null,")");Oe.push({i:Ae-4,x:si(ft,Jt)},{i:Ae-2,x:si(bt,Ht)})}else(1!==Jt||1!==Ht)&&ie.push(g(ie)+"scale("+Jt+","+Ht+")")}(ft.scaleX,ft.scaleY,bt.scaleX,bt.scaleY,Jt,Ht),ft=bt=null,function(ie){for(var Ut,Oe=-1,Ae=Ht.length;++Oe<Ae;)Jt[(Ut=Ht[Oe]).i]=Ut.x(ie);return Jt.join("")}}}var wr=Tn(function mr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xr=Tn(function pr(t){return null!=t&&(Wi||(Wi=document.createElementNS("http://www.w3.org/2000/svg","g")),Wi.setAttribute("transform",t),t=Wi.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function br(t,e){var a,u;return function(){var g=qe(this,t),k=g.tween;if(k!==a)for(var A=0,V=(u=a=k).length;A<V;++A)if(u[A].name===e){(u=u.slice()).splice(A,1);break}g.tween=u}}function _r(t,e,a){var u,g;if("function"!=typeof a)throw new Error;return function(){var k=qe(this,t),A=k.tween;if(A!==u){g=(u=A).slice();for(var V={name:e,value:a},Z=0,ft=g.length;Z<ft;++Z)if(g[Z].name===e){g[Z]=V;break}Z===ft&&g.push(V)}k.tween=g}}function rn(t,e,a){var u=t._id;return t.each(function(){var g=qe(this,u);(g.value||(g.value={}))[e]=a.apply(this,arguments)}),function(g){return Ze(g,u).value[e]}}function ln(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function kn(t,e){var a=Object.create(t.prototype);for(var u in e)a[u]=e[u];return a}function Ci(){}var Ui=1/.7,pi="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),Tr=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),kr=new RegExp(`^rgba\\(${pi},${pi},${pi},${Ai}\\)$`),Cr=new RegExp(`^rgba\\(${$e},${$e},${$e},${Ai}\\)$`),Lr=new RegExp(`^hsl\\(${Ai},${$e},${$e}\\)$`),Ar=new RegExp(`^hsla\\(${Ai},${$e},${$e},${Ai}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Pi(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?Pn(e):3===a?new Qe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Qe(e[1],e[2],e[3],1):(e=Tr.exec(t))?new Qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=kr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Lr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?Pn(Cn[t]):"transparent"===t?new Qe(NaN,NaN,NaN,0):null}function Pn(t){return new Qe(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,a,u){return u<=0&&(t=e=a=NaN),new Qe(t,e,a,u)}function Qi(t,e,a,u){return 1===arguments.length?function Mr(t){return t instanceof Ci||(t=Pi(t)),t?new Qe((t=t.rgb()).r,t.g,t.b,t.opacity):new Qe}(t):new Qe(t,e,a,null==u?1:u)}function Qe(t,e,a,u){this.r=+t,this.g=+e,this.b=+a,this.opacity=+u}function In(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}`}function Mn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${vi(this.r)}, ${vi(this.g)}, ${vi(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fi(t){return((t=vi(t))<16?"0":"")+t.toString(16)}function Rn(t,e,a,u){return u<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new Xe(t,e,a,u)}function Nn(t){if(t instanceof Xe)return new Xe(t.h,t.s,t.l,t.opacity);if(t instanceof Ci||(t=Pi(t)),!t)return new Xe;if(t instanceof Xe)return t;var e=(t=t.rgb()).r/255,a=t.g/255,u=t.b/255,g=Math.min(e,a,u),k=Math.max(e,a,u),A=NaN,V=k-g,Z=(k+g)/2;return V?(A=e===k?(a-u)/V+6*(a<u):a===k?(u-e)/V+2:(e-a)/V+4,V/=Z<.5?k+g:2-k-g,A*=60):V=Z>0&&Z<1?0:A,new Xe(A,V,Z,t.opacity)}function Xe(t,e,a,u){this.h=+t,this.s=+e,this.l=+a,this.opacity=+u}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function jn(t,e,a,u,g){var k=t*t,A=k*t;return((1-3*t+3*k-A)*e+(4-6*k+3*A)*a+(1+3*t+3*k-3*A)*u+A*g)/6}ln(Ci,Pi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Pr(){return this.rgb().formatHex8()},formatHsl:function Ir(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),ln(Qe,Qi,kn(Ci,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qe(vi(this.r),vi(this.g),vi(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:In,formatHex:In,formatHex8:function Rr(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}${fi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Mn,toString:Mn})),ln(Xe,function Nr(t,e,a,u){return 1===arguments.length?Nn(t):new Xe(t,e,a,null==u?1:u)},kn(Ci,{brighter(t){return t=null==t?Ui:Math.pow(Ui,t),new Xe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Xe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,u=a+(a<.5?a:1-a)*e,g=2*a-u;return new Qe(an(t>=240?t-240:t+120,g,u),an(t,g,u),an(t<120?t+240:t-120,g,u),this.opacity)},clamp(){return new Xe(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const zn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):zn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kr(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function zr(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(u){return Math.pow(t+u*e,a)}}(e,a,t):zn(isNaN(e)?a:e)}}(e);function u(g,k){var A=a((g=Qi(g)).r,(k=Qi(k)).r),V=a(g.g,k.g),Z=a(g.b,k.b),ft=Bn(g.opacity,k.opacity);return function(bt){return g.r=A(bt),g.g=V(bt),g.b=Z(bt),g.opacity=ft(bt),g+""}}return u.gamma=t,u}(1);function Wn(t){return function(e){var A,V,a=e.length,u=new Array(a),g=new Array(a),k=new Array(a);for(A=0;A<a;++A)V=Qi(e[A]),u[A]=V.r||0,g[A]=V.g||0,k[A]=V.b||0;return u=t(u),g=t(g),k=t(k),V.opacity=1,function(Z){return V.r=u(Z),V.g=g(Z),V.b=k(Z),V+""}}}Wn(function Dr(t){var e=t.length-1;return function(a){var u=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),g=t[u],k=t[u+1];return jn((a-u/e)*e,u>0?t[u-1]:2*g-k,g,k,u<e-1?t[u+2]:2*k-g)}}),Wn(function jr(t){var e=t.length;return function(a){var u=Math.floor(((a%=1)<0?++a:a)*e);return jn((a-u/e)*e,t[(u+e-1)%e],t[u%e],t[(u+1)%e],t[(u+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Wr(t,e){var u,g,k,a=on.lastIndex=sn.lastIndex=0,A=-1,V=[],Z=[];for(t+="",e+="";(u=on.exec(t))&&(g=sn.exec(e));)(k=g.index)>a&&(k=e.slice(a,k),V[A]?V[A]+=k:V[++A]=k),(u=u[0])===(g=g[0])?V[A]?V[A]+=g:V[++A]=g:(V[++A]=null,Z.push({i:A,x:si(u,g)})),a=sn.lastIndex;return a<e.length&&(k=e.slice(a),V[A]?V[A]+=k:V[++A]=k),V.length<2?Z[0]?function Fr(t){return function(e){return t(e)+""}}(Z[0].x):function Br(t){return function(){return t}}(e):(e=Z.length,function(ft){for(var Jt,bt=0;bt<e;++bt)V[(Jt=Z[bt]).i]=Jt.x(ft);return V.join("")})}function Un(t,e){var a;return("number"==typeof e?si:e instanceof Pi?Fn:(a=Pi(e))?(e=a,Fn):Wr)(t,e)}function Ur(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,a){var u,k,g=a+"";return function(){var A=this.getAttribute(t);return A===g?null:A===u?k:k=e(u=A,a)}}function Jr(t,e,a){var u,k,g=a+"";return function(){var A=this.getAttributeNS(t.space,t.local);return A===g?null:A===u?k:k=e(u=A,a)}}function Hr(t,e,a){var u,g,k;return function(){var A,Z,V=a(this);return null==V?void this.removeAttribute(t):(A=this.getAttribute(t))===(Z=V+"")?null:A===u&&Z===g?k:(g=Z,k=e(u=A,V))}}function Vr(t,e,a){var u,g,k;return function(){var A,Z,V=a(this);return null==V?void this.removeAttributeNS(t.space,t.local):(A=this.getAttributeNS(t.space,t.local))===(Z=V+"")?null:A===u&&Z===g?k:(g=Z,k=e(u=A,V))}}function qr(t,e){var a,u;function g(){var k=e.apply(this,arguments);return k!==u&&(a=(u=k)&&function Xr(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,k)),a}return g._value=e,g}function $r(t,e){var a,u;function g(){var k=e.apply(this,arguments);return k!==u&&(a=(u=k)&&function Zr(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,k)),a}return g._value=e,g}function el(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){en(this,t).delay=e}}function rl(t,e){return function(){qe(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){qe(this,t).duration=e}}var xl=me.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var zl=0;function ii(t,e,a,u){this._groups=t,this._parents=e,this._name=a,this._id=u}function Qn(){return++zl}var ni=me.prototype;ii.prototype=function Kl(t){return me().transition(t)}.prototype={constructor:ii,select:function pl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=y(t));for(var u=this._groups,g=u.length,k=new Array(g),A=0;A<g;++A)for(var bt,Jt,V=u[A],Z=V.length,ft=k[A]=new Array(Z),Ht=0;Ht<Z;++Ht)(bt=V[Ht])&&(Jt=t.call(bt,bt.__data__,Ht,V))&&("__data__"in bt&&(Jt.__data__=bt.__data__),ft[Ht]=Jt,Fi(ft[Ht],e,a,Ht,ft,Ze(bt,a)));return new ii(k,this._parents,e,a)},selectAll:function wl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=S(t));for(var u=this._groups,g=u.length,k=[],A=[],V=0;V<g;++V)for(var bt,Z=u[V],ft=Z.length,Jt=0;Jt<ft;++Jt)if(bt=Z[Jt]){for(var ie,Ht=t.call(bt,bt.__data__,Jt,Z),Oe=Ze(bt,a),Ae=0,Ut=Ht.length;Ae<Ut;++Ae)(ie=Ht[Ae])&&Fi(ie,e,a,Ae,Ht,Oe);k.push(Ht),A.push(bt)}return new ii(k,A,e,a)},selectChild:ni.selectChild,selectChildren:ni.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=j(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Z,k=e[g],A=k.length,V=u[g]=[],ft=0;ft<A;++ft)(Z=k[ft])&&t.call(Z,Z.__data__,ft,k)&&V.push(Z);return new ii(u,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,u=e.length,k=Math.min(u,a.length),A=new Array(u),V=0;V<k;++V)for(var Ht,Z=e[V],ft=a[V],bt=Z.length,Jt=A[V]=new Array(bt),ie=0;ie<bt;++ie)(Ht=Z[ie]||ft[ie])&&(Jt[ie]=Ht);for(;V<u;++V)A[V]=e[V];return new ii(A,this._parents,this._name,this._id)},selection:function bl(){return new xl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,a=Qn(),u=this._groups,g=u.length,k=0;k<g;++k)for(var Z,A=u[k],V=A.length,ft=0;ft<V;++ft)if(Z=A[ft]){var bt=Ze(Z,e);Fi(Z,t,a,ft,A,{time:bt.time+bt.delay+bt.duration,delay:0,duration:bt.duration,ease:bt.ease})}return new ii(u,this._parents,t,a)},call:ni.call,nodes:ni.nodes,node:ni.node,size:ni.size,empty:ni.empty,each:ni.each,on:function gl(t,e){var a=this._id;return arguments.length<2?Ze(this.node(),a).on.on(t):this.each(function fl(t,e,a){var u,g,k=function vl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?en:qe;return function(){var A=k(this,t),V=A.on;V!==u&&(g=(u=V).copy()).on(e,a),A.on=g}}(a,t,e))},attr:function Yr(t,e){var a=H(t),u="transform"===a?xr:Un;return this.attrTween(t,"function"==typeof e?(a.local?Vr:Hr)(a,u,rn(this,"attr."+t,e)):null==e?(a.local?Gr:Ur)(a):(a.local?Jr:Qr)(a,u,e))},attrTween:function tl(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var u=H(t);return this.tween(a,(u.local?qr:$r)(u,e))},style:function Tl(t,e,a){var u="transform"==(t+="")?wr:Un;return null==e?this.styleTween(t,function _l(t,e){var a,u,g;return function(){var k=dt(this,t),A=(this.style.removeProperty(t),dt(this,t));return k===A?null:k===a&&A===u?g:g=e(a=k,u=A)}}(t,u)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,a){var u,g,k;return function(){var A=dt(this,t),V=a(this),Z=V+"";return null==V&&(this.style.removeProperty(t),Z=V=dt(this,t)),A===Z?null:A===u&&Z===g?k:(g=Z,k=e(u=A,V))}}(t,u,rn(this,"style."+t,e))).each(function Sl(t,e){var a,u,g,V,k="style."+e,A="end."+k;return function(){var Z=qe(this,t),ft=Z.on,bt=null==Z.value[k]?V||(V=Gn(e)):void 0;(ft!==a||g!==bt)&&(u=(a=ft).copy()).on(A,g=bt),Z.on=u}}(this._id,t)):this.styleTween(t,function El(t,e,a){var u,k,g=a+"";return function(){var A=dt(this,t);return A===g?null:A===u?k:k=e(u=A,a)}}(t,u,e),a).on("end.style."+t,null)},styleTween:function Ll(t,e,a){var u="style."+(t+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==e)return this.tween(u,null);if("function"!=typeof e)throw new Error;return this.tween(u,function Cl(t,e,a){var u,g;function k(){var A=e.apply(this,arguments);return A!==g&&(u=(g=A)&&function kl(t,e,a){return function(u){this.style.setProperty(t,e.call(this,u),a)}}(t,A,a)),u}return k._value=e,k}(t,e,null==a?"":a))},text:function Il(t){return this.tween("text","function"==typeof t?function Pl(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,a;function u(){var g=t.apply(this,arguments);return g!==a&&(e=(a=g)&&function Ml(t){return function(e){this.textContent=t.call(this,e)}}(g)),e}return u._value=t,u}(t))},remove:function ml(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var a=this._id;if(t+="",arguments.length<2){for(var A,u=Ze(this.node(),a).tween,g=0,k=u.length;g<k;++g)if((A=u[g]).name===t)return A.value;return null}return this.each((null==e?br:_r)(a,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):Ze(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):Ze(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){qe(this,t).ease=e}}(e,t)):Ze(this.node(),e).ease},easeVarying:function dl(t){if("function"!=typeof t)throw new Error;return this.each(function ul(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;qe(this,t).ease=a}}(this._id,t))},end:function jl(){var t,e,a=this,u=a._id,g=a.size();return new Promise(function(k,A){var V={value:A},Z={value:function(){0==--g&&k()}};a.each(function(){var ft=qe(this,u),bt=ft.on;bt!==t&&((e=(t=bt).copy())._.cancel.push(V),e._.interrupt.push(V),e._.end.push(Z)),ft.on=e}),0===g&&k()})},[Symbol.iterator]:ni[Symbol.iterator]};var Fl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Wl(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}me.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var u,g,A,a=t.__transition,k=!0;if(a){for(A in e=null==e?null:e+"",a)(u=a[A]).name===e?(g=u.state>2&&u.state<5,u.state=6,u.timer.stop(),u.on.call(g?"interrupt":"cancel",t,t.__data__,u.index,u.group),delete a[A]):k=!1;k&&delete t.__transition}}(this,t)})},me.prototype.transition=function Ul(t){var e,a;t instanceof ii?(e=t._id,t=t._name):(e=Qn(),(a=Fl).time=Xi(),t=null==t?null:t+"");for(var u=this._groups,g=u.length,k=0;k<g;++k)for(var Z,A=u[k],V=A.length,ft=0;ft<V;++ft)(Z=A[ft])&&Fi(Z,t,e,ft,A,a||Wl(Z,e));return new ii(u,this._parents,t,e)};Math;function Ii(t){return{type:t}}function bi(t){return function(){return t}}function Xn(t){this._context=t}function ql(t){return new Xn(t)}["w","e"].map(Ii),["n","s"].map(Ii),["n","w","e","s","nw","ne","sw","se"].map(Ii),Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const vn=Math.PI,fn=2*vn,gi=1e-6,$l=fn-gi;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Zi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(u){this._+=u[0];for(let g=1,k=u.length;g<k;++g)this._+=Math.round(arguments[g]*a)/a+u[g]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,u,g){this._append`Q${+e},${+a},${this._x1=+u},${this._y1=+g}`}bezierCurveTo(e,a,u,g,k,A){this._append`C${+e},${+a},${+u},${+g},${this._x1=+k},${this._y1=+A}`}arcTo(e,a,u,g,k){if(e=+e,a=+a,u=+u,g=+g,(k=+k)<0)throw new Error(`negative radius: ${k}`);let A=this._x1,V=this._y1,Z=u-e,ft=g-a,bt=A-e,Jt=V-a,Ht=bt*bt+Jt*Jt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Ht>gi)if(Math.abs(Jt*Z-ft*bt)>gi&&k){let ie=u-A,Oe=g-V,Ae=Z*Z+ft*ft,Ut=ie*ie+Oe*Oe,Wt=Math.sqrt(Ae),oe=Math.sqrt(Ht),ne=k*Math.tan((vn-Math.acos((Ae+Ht-Ut)/(2*Wt*oe)))/2),fe=ne/oe,pe=ne/Wt;Math.abs(fe-1)>gi&&this._append`L${e+fe*bt},${a+fe*Jt}`,this._append`A${k},${k},0,0,${+(Jt*ie>bt*Oe)},${this._x1=e+pe*Z},${this._y1=a+pe*ft}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,u,g,k,A){if(e=+e,a=+a,A=!!A,(u=+u)<0)throw new Error(`negative radius: ${u}`);let V=u*Math.cos(g),Z=u*Math.sin(g),ft=e+V,bt=a+Z,Jt=1^A,Ht=A?g-k:k-g;null===this._x1?this._append`M${ft},${bt}`:(Math.abs(this._x1-ft)>gi||Math.abs(this._y1-bt)>gi)&&this._append`L${ft},${bt}`,u&&(Ht<0&&(Ht=Ht%fn+fn),Ht>$l?this._append`A${u},${u},0,1,${Jt},${e-V},${a-Z}A${u},${u},0,1,${Jt},${this._x1=ft},${this._y1=bt}`:Ht>gi&&this._append`A${u},${u},0,${+(Ht>=vn)},${Jt},${this._x1=e+u*Math.cos(k)},${this._y1=a+u*Math.sin(k)}`)}rect(e,a,u,g){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${u=+u}v${+g}h${-u}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var a=bi(!0),u=null,g=ql,k=null,A=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);e=u}return t},()=>new Zi(e)}(V);function V(Z){var ft,Jt,ie,bt=(Z=function Xl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(Z)).length,Ht=!1;for(null==u&&(k=g(ie=A())),ft=0;ft<=bt;++ft)!(ft<bt&&a(Jt=Z[ft],ft,Z))===Ht&&((Ht=!Ht)?k.lineStart():k.lineEnd()),Ht&&k.point(+t(Jt,ft,Z),+e(Jt,ft,Z));if(ie)return k=null,ie+""||null}return t="function"==typeof t?t:void 0===t?na:bi(t),e="function"==typeof e?e:void 0===e?ra:bi(e),V.x=function(Z){return arguments.length?(t="function"==typeof Z?Z:bi(+Z),V):t},V.y=function(Z){return arguments.length?(e="function"==typeof Z?Z:bi(+Z),V):e},V.defined=function(Z){return arguments.length?(a="function"==typeof Z?Z:bi(!!Z),V):a},V.curve=function(Z){return arguments.length?(g=Z,null!=u&&(k=g(u)),V):g},V.context=function(Z){return arguments.length?(null==Z?u=k=null:k=g(u=Z),V):u},V}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function _i(t,e,a){this.k=t,this.x=e,this.y=a}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_i.prototype={constructor:_i,scale:function(t){return 1===t?this:new _i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new _i(1,0,0)}}]);