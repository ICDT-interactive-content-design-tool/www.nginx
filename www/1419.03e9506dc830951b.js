"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1419],{8671:(L,B,d)=>{d.d(B,{$:()=>b});var g=d(5972);function b(f){f.params=f.params||{},(0,g.hm)({url:"api/Lookup/get",params:{lookup_key:f.params.lookup_key||null},success:r=>{"function"==typeof f.callback&&f.callback(null==r?void 0:r.data)},error:r=>{"function"==typeof f.callback&&f.callback(),console.error(f,r)},loading:f.loading,loadingController:f.loadingController})}},1419:(L,B,d)=>{d.d(B,{q:()=>Z});var g=d(467),b=d(5972),f=d(6081),r=d(2635),k=d(3753),S=d(1477);function P(e){e.params=e.params||{},(0,b.Ll)({url:"api/BoardShareUser/AddUpdate",params:{board_id:e.params.board_id||null,emailaddr:e.params.emailaddr||null,v_sharepermission:e.params.v_sharepermission||null,createdby:e.params.userid||null,modifiedby:e.params.userid||null},success:s=>{"function"==typeof e.callback&&e.callback(s.data||null)},error:s=>{"function"==typeof e.callback&&e.callback(),console.error(s)},loading:e.loading,loadingController:e.loadingController})}var C=d(5414),y=d(8833),O=d(4552);const _={ONLY_ME:10400,ONLY_MEMBER:10401,EVERYONE_HAS_LINK:10402};var n=d(4438),l=d(6637),u=d(177),m=d(9417),M=d(31);function D(e,s){1&e&&(n.qex(0),n.j41(1,"ion-content")(2,"div",1)(3,"div"),n.nrm(4,"ion-spinner",2),n.k0s()()(),n.bVm())}function F(e,s){1&e&&(n.qex(0),n.j41(1,"div",1)(2,"div"),n.nrm(3,"ion-spinner",18),n.k0s()(),n.bVm())}function A(e,s){1&e&&(n.qex(0),n.nrm(1,"ion-icon",21),n.j41(2,"span"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.bVm()),2&e&&(n.R7$(3),n.JRh(n.bMT(4,1,"OnlyMe")))}function V(e,s){1&e&&(n.qex(0),n.nrm(1,"ion-icon",21),n.bVm())}function N(e,s){1&e&&(n.qex(0),n.nrm(1,"ion-icon",22),n.bVm())}function Y(e,s){1&e&&(n.qex(0),n.nrm(1,"ion-icon",23),n.bVm())}function X(e,s){if(1&e&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&e){const c=n.XpG(3);n.R7$(),n.JRh(c.boardShare.v_share_title)}}function z(e,s){if(1&e){const c=n.RV6();n.qex(0),n.j41(1,"button",19),n.bIt("click",function(o){n.eBV(c);const t=n.XpG(2);return n.Njj(t.presentPopoverLookupShare(o))}),n.DNE(2,A,5,3,"ng-container",0)(3,V,2,0,"ng-container",0)(4,N,2,0,"ng-container",0)(5,Y,2,0,"ng-container",0)(6,X,2,1,"span",0),n.nrm(7,"ion-icon",20),n.k0s(),n.bVm()}if(2&e){const c=n.XpG(2);n.R7$(2),n.Y8G("ngIf",!c.boardShare.v_share),n.R7$(),n.Y8G("ngIf",c.boardShare.v_share==c.v_share.ONLY_ME),n.R7$(),n.Y8G("ngIf",c.boardShare.v_share==c.v_share.ONLY_MEMBER),n.R7$(),n.Y8G("ngIf",c.boardShare.v_share==c.v_share.EVERYONE_HAS_LINK),n.R7$(),n.Y8G("ngIf",!!c.boardShare.v_share_title)}}function W(e,s){1&e&&(n.qex(0),n.j41(1,"div",1)(2,"div"),n.nrm(3,"ion-spinner",18),n.k0s()(),n.bVm())}function w(e,s){if(1&e){const c=n.RV6();n.qex(0),n.j41(1,"ion-item",26)(2,"ion-avatar"),n.nrm(3,"img",27),n.k0s(),n.j41(4,"ion-label",28),n.EFF(5),n.k0s(),n.j41(6,"ion-item",29),n.bIt("click",function(o){const t=n.eBV(c).$implicit,i=n.XpG(3);return n.Njj(i.presentPopoverLookupSharePermission(o,t.emailaddr))}),n.j41(7,"ion-label"),n.EFF(8),n.k0s(),n.nrm(9,"ion-icon",20),n.k0s()(),n.bVm()}if(2&e){let c,a;const o=s.$implicit,t=n.XpG(3);n.R7$(3),n.Y8G("src",null!==(c=o.profilephoto?t.readfileuploadurl+o.profilephoto:null)&&void 0!==c?c:"../../../assets/image/user-avatar-default.png",n.B4B),n.R7$(2),n.JRh(null!==(a=o.fullname)&&void 0!==a?a:o.emailaddr),n.R7$(3),n.JRh(o.v_sharepermission_title)}}function J(e,s){if(1&e&&(n.qex(0),n.j41(1,"ion-list",24),n.DNE(2,w,10,3,"ng-container",25),n.k0s(),n.bVm()),2&e){const c=n.XpG(2);n.R7$(2),n.Y8G("ngForOf",c.boardShareUsers)}}function K(e,s){if(1&e){const c=n.RV6();n.qex(0),n.j41(1,"ion-header")(2,"ion-toolbar")(3,"ion-title"),n.EFF(4),n.nI1(5,"translate"),n.k0s(),n.j41(6,"ion-buttons",3)(7,"ion-button",4),n.bIt("click",function(){n.eBV(c);const o=n.XpG();return n.Njj(o.toggleFullScreen())}),n.nrm(8,"ion-icon",5),n.k0s(),n.j41(9,"ion-button",6),n.bIt("click",function(){n.eBV(c);const o=n.XpG();return n.Njj(o.close())}),n.nrm(10,"ion-icon",7),n.k0s()()(),n.j41(11,"ion-toolbar")(12,"div",8)(13,"div",9)(14,"input",10),n.bIt("change",function(o){n.eBV(c);const t=n.XpG();return n.Njj(t.changeEmails(o))})("keypress",function(o){n.eBV(c);const t=n.XpG();return n.Njj(t.keypressEmails(o))}),n.k0s(),n.j41(15,"div",11)(16,"button",12),n.bIt("click",function(o){n.eBV(c);const t=n.XpG();return n.Njj(t.submitEmails(o))}),n.EFF(17),n.nI1(18,"translate"),n.k0s()()(),n.j41(19,"div",13),n.DNE(20,F,4,0,"ng-container",0)(21,z,8,5,"ng-container",0),n.k0s(),n.nrm(22,"hr"),n.j41(23,"label",14),n.EFF(24),n.nI1(25,"translate"),n.k0s()()()(),n.j41(26,"ion-content"),n.DNE(27,W,4,0,"ng-container",0)(28,J,3,1,"ng-container",0),n.k0s(),n.j41(29,"ion-footer")(30,"button",15),n.bIt("click",function(o){n.eBV(c);const t=n.XpG();return n.Njj(t.copyLink(o))}),n.nrm(31,"ion-icon",16),n.j41(32,"span"),n.EFF(33),n.nI1(34,"translate"),n.k0s()(),n.j41(35,"button",15),n.bIt("click",function(o){n.eBV(c);const t=n.XpG();return n.Njj(t.copyEmbed(o))}),n.nrm(36,"ion-icon",17),n.j41(37,"span"),n.EFF(38),n.nI1(39,"translate"),n.k0s()()(),n.bVm()}if(2&e){const c=n.XpG();n.R7$(4),n.JRh(n.bMT(5,12,"Share")),n.R7$(4),n.Y8G("src",c.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.R7$(6),n.Y8G("ngModel",c.dataForm.emailaddrs),n.R7$(3),n.JRh(n.bMT(18,14,"Add")),n.R7$(3),n.Y8G("ngIf",c.dataInit.loadingBoardShare),n.R7$(),n.Y8G("ngIf",!c.dataInit.loadingBoardShare),n.R7$(3),n.Lme("",n.bMT(25,16,"SharedMembership")," (",c.boardShareUsers.length,")"),n.R7$(3),n.Y8G("ngIf",c.dataInit.loadingBoardShareUser),n.R7$(),n.Y8G("ngIf",!c.dataInit.loadingBoardShareUser),n.R7$(5),n.JRh(n.bMT(34,18,"CopyLink")),n.R7$(5),n.JRh(n.bMT(39,20,"CopyEmbed"))}}let Z=(()=>{var e;class s{constructor(a,o,t,i){this.modalController=a,this.popoverController=o,this.toastController=t,this.loadingController=i,this.b=0,this.dataInit={loadingBoard:!0,loadingBoardShare:!0,loadingBoardShareUser:!0},this.v_share=_,this.dataForm={},this.board={},this.boardShare={},this.boardShareUsers=[],this.isfullscreen=!1,this.readfileuploadurl="",this.fileurl="",this.appsettings={}}ngOnInit(){var a=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,g.A)(function*(){a.appsettings=yield(0,b.AC)(),a.appsettings.madonvi&&(a.user=yield(0,r.Nk)(),a.readfileuploadurl=a.appsettings.readfileuploadurl||"",a.refreshData())})()}refreshData(){var a;(0,f.qU)({loading:o=>{this.dataInit.loadingBoard=o},params:{userid:null===(a=this.user)||void 0===a?void 0:a.userid,board_id:this.b},callback:o=>{this.board=o||{},this.board.board_id&&(this.GetBoardShare(),this.GetBoardShareUser())}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}changeEmails(a){var o;this.dataForm.emailaddrs=((null==a||null===(o=a.target)||void 0===o?void 0:o.value)||"").replace(/[^a-zA-Z0-9\@\;\ \-\_\.]+/g,"").replace(/\s+/," ").trim().replace(/\ \;/g,";").replace(/\;\ /g,";").replace(/\ /g,";").replace(/\;+/g,";").split(";").map(t=>{let i=t.match(/^[a-zA-Z0-9\.\-\_]+@[a-zA-Z0-9\-\_]+\.[a-zA-Z0-9\-\_]+((\.[a-zA-Z0-9\-\_]+)+)?$/);return i?i[0]:null}).filter(t=>!!t).filter((t,i,p)=>p.indexOf(t)==i).join("; ")}keypressEmails(a){var o,i,t=a.keyCode||a.which||a.charCode||0;t!=S.r.Enter&&t!=S.r.Escape||(null===(i=a.target)||void 0===i||i.blur(),this.submitEmails()),null!==(o=a.key)&&void 0!==o&&o.match(/[^a-zA-Z0-9\@\;\ \-\_\.]/)&&(null==a||a.preventDefault(),null==a||a.stopPropagation())}submitEmails(a){this.dataForm.emailaddrs&&(this.AddUpdateBoardShareUser_Recursive(this.dataForm.emailaddrs.replace(/\s+/g,"").split(";")),this.dataForm.emailaddrs="")}presentPopoverLookupShare(a){var o=this;return(0,g.A)(function*(){const t=yield o.popoverController.create({component:k.t,componentProps:{selectedId:o.boardShare.v_share,lookup_key:"v_share"},event:a,dismissOnSelect:!1,animated:!1});t.onDidDismiss().then(i=>{var p,h,v;"confirm"==i.role&&(Object.assign(o.boardShare,{v_share:null===(p=i.data)||void 0===p?void 0:p.lookup_value,v_share_title:null===(h=i.data)||void 0===h?void 0:h.lookup_title}),o.AddUpdateBoardShare(null===(v=i.data)||void 0===v?void 0:v.lookup_value))}),t.present()})()}presentPopoverLookupSharePermission(a,o){var t=this;return(0,g.A)(function*(){var i;const h=yield t.popoverController.create({component:k.t,componentProps:{selectedId:null===(i=t.boardShareUsers.find(v=>v.emailaddr==o))||void 0===i?void 0:i.v_sharepermission,lookup_key:"v_sharepermission",lookups_d2:[{lookup_value:-1,lookup_title:"X\xf3a",color:"danger"}]},event:a,dismissOnSelect:!1,animated:!1,alignment:"end",side:"bottom"});h.onDidDismiss().then(v=>{var G;"confirm"==v.role&&(t.boardShareUsers.filter(U=>U.emailaddr==o).forEach(U=>{var $,T;Object.assign(U,{v_sharepermission:null===($=v.data)||void 0===$?void 0:$.lookup_value,v_sharepermission_title:null===(T=v.data)||void 0===T?void 0:T.lookup_title})}),t.AddUpdateBoardShareUser(o,null===(G=v.data)||void 0===G?void 0:G.lookup_value))}),h.present()})()}GetBoardShare(){var a=this;return(0,g.A)(function*(){var o;!function E(e){e.params=e.params||{},(0,b.hm)({url:"api/BoardShare/Get",params:{getby:e.params.userid||null,boardshare_id:e.params.boardshare_id||null,board_id:e.params.board_id||null,v_share:e.params.v_share||null},success:s=>{"function"==typeof e.callback&&e.callback(s.data||null)},error:s=>{"function"==typeof e.callback&&e.callback(),console.error(s)},loading:e.loading,loadingController:e.loadingController})}({loading:t=>{a.dataInit.loadingBoardShare=t},params:{userid:null===(o=a.user)||void 0===o?void 0:o.userid,board_id:a.b},callback:t=>{a.boardShare=t||{}}})})()}AddUpdateBoardShare(a){var o=this;return(0,g.A)(function*(){var t;if(!a||a<=0)return o.DeleteBoardShare();!function R(e){e.params=e.params||{},(0,b.Ll)({url:"api/BoardShare/AddUpdate",params:{board_id:e.params.board_id||null,v_share:e.params.v_share||null,createdby:e.params.userid||null,modifiedby:e.params.userid||null},success:s=>{"function"==typeof e.callback&&e.callback(s.data||null)},error:s=>{"function"==typeof e.callback&&e.callback(),console.error(s)},loading:e.loading,loadingController:e.loadingController})}({loading:i=>{o.dataInit.loadingBoardShare=i},params:{userid:null===(t=o.user)||void 0===t?void 0:t.userid,board_id:o.b,v_share:a},callback:i=>{0==(null==i?void 0:i.returncode)?o.GetBoardShare():(0,C.c)(o.toastController,{},i).then(p=>p.present())}})})()}DeleteBoardShare(){var a=this;return(0,g.A)(function*(){var o;!function j(e){e.params=e.params||{},(0,b.sj)({url:"api/BoardShare/Delete",params:{deleteby:e.params.userid||null,boardshare_id:e.params.boardshare_id||null,board_id:e.params.board_id||null},success:s=>{"function"==typeof e.callback&&e.callback(s.data||null)},error:s=>{"function"==typeof e.callback&&e.callback(),console.error(s)},loading:e.loading,loadingController:e.loadingController})}({loading:t=>{a.dataInit.loadingBoardShare=t},params:{userid:null===(o=a.user)||void 0===o?void 0:o.userid,board_id:a.b},callback:t=>{0==(null==t?void 0:t.returncode)?a.GetBoardShare():(0,C.c)(a.toastController,{},t).then(i=>i.present())}})})()}GetBoardShareUser(){var a=this;return(0,g.A)(function*(){var o;!function I(e){e.params=e.params||{},(0,b.hm)({url:"api/BoardShareUser/Get",params:{getby:e.params.userid||null,boardshareuser_id:e.params.boardshareuser_id||null,board_id:e.params.board_id||null,emailaddr:e.params.emailaddr||null,v_sharepermission:e.params.v_sharepermission||null},success:s=>{"function"==typeof e.callback&&e.callback(s.data||null)},error:s=>{"function"==typeof e.callback&&e.callback(),console.error(s)},loading:e.loading,loadingController:e.loadingController})}({loading:t=>{a.dataInit.loadingBoardShareUser=t},params:{userid:null===(o=a.user)||void 0===o?void 0:o.userid,board_id:a.b},callback:t=>{a.boardShareUsers=t||[]}})})()}AddUpdateBoardShareUser_Recursive(a){var o=this;return(0,g.A)(function*(){let t=i=>{var p;i&&P({loading:h=>{o.dataInit.loadingBoardShareUser=h},params:{userid:null===(p=o.user)||void 0===p?void 0:p.userid,board_id:o.b,emailaddr:i,v_sharepermission:1},callback:h=>{a.length?t(null==a?void 0:a.shift()):0==(null==h?void 0:h.returncode)?o.GetBoardShareUser():(0,C.c)(o.toastController,{},h).then(v=>v.present())}})};t(a.shift())})()}AddUpdateBoardShareUser(a,o){var t=this;return(0,g.A)(function*(){var i;if(a){if(!o||o<=0)return t.DeleteBoardShareUser(a);P({loading:p=>{t.dataInit.loadingBoardShareUser=p},params:{userid:null===(i=t.user)||void 0===i?void 0:i.userid,board_id:t.b,emailaddr:a,v_sharepermission:o},callback:p=>{0==(null==p?void 0:p.returncode)?t.GetBoardShareUser():(0,C.c)(t.toastController,{},p).then(h=>h.present())}})}})()}DeleteBoardShareUser(a){var o=this;return(0,g.A)(function*(){var t;a&&function x(e){e.params=e.params||{},(0,b.sj)({url:"api/BoardShareUser/Delete",params:{deleteby:e.params.userid||null,boardshareuser_id:e.params.boardshareuser_id||null,board_id:e.params.board_id||null,emailaddr:e.params.emailaddr||null},success:s=>{"function"==typeof e.callback&&e.callback(s.data||null)},error:s=>{"function"==typeof e.callback&&e.callback(),console.error(s)},loading:e.loading,loadingController:e.loadingController})}({loading:i=>{o.dataInit.loadingBoardShareUser=i},params:{userid:null===(t=o.user)||void 0===t?void 0:t.userid,board_id:o.b,emailaddr:a},callback:i=>{0==(null==i?void 0:i.returncode)?o.GetBoardShareUser():(0,C.c)(o.toastController,{},i).then(p=>p.present())}})})()}copyLink(a){var o=this;return(0,g.A)(function*(){let t=o.appsettings.weburl+y._.VIEWER+"?"+jQuery.param({b:o.b});(0,C.c)(o.toastController,{message:(0,O.lW)(t)?"\u0110\xe3 sao ch\xe9p!":"Sao ch\xe9p l\u1ed7i!"}).then(i=>i.present())})()}copyEmbed(a){var o=this;return(0,g.A)(function*(){var t,i;let h=`<iframe src="${o.appsettings.weburl+y._.EMBED+"?"+jQuery.param({b:o.b})}" width="${null!==(t=o.board.size_width)&&void 0!==t?t:1080}" height="${null!==(i=o.board.size_height)&&void 0!==i?i:1080}" frameborder="0" allowfullscreen webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="display: block; margin: auto; border: 1px dashed rgba(0,0,0,0.1);"></iframe>`;(0,C.c)(o.toastController,{message:(0,O.lW)(h)?"\u0110\xe3 sao ch\xe9p!":"Sao ch\xe9p l\u1ed7i!"}).then(v=>v.present())})()}}return(e=s).\u0275fac=function(a){return new(a||e)(n.rXU(l.W3),n.rXU(l.IE),n.rXU(l.K_),n.rXU(l.Xi))},e.\u0275cmp=n.VBU({type:e,selectors:[["app-modal-board-share"]],inputs:{b:"b"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],["name","dots","color","dark",1,"align-middle"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"p-3"],[1,"input-group"],["type","text","placeholder","email@example.com; email2@example.com; ...",1,"form-control",3,"change","keypress","ngModel"],[1,"input-group-append"],[1,"btn",3,"click"],[1,"py-4"],[1,"mb-0","mt-3"],[1,"btn","btn-link",3,"click"],["src","../../../assets/icon/24x24/attach.svg"],["src","../../../assets/icon/24x24/embed.svg"],["name","circles","color","dark",1,"align-middle"],[1,"btn-share","btn-popover",3,"click"],["src","../../../assets/icon/16x16/chevron-down.svg"],["src","../../../assets/icon/16x16/private.svg"],["name","people-outline"],["name","globe-outline"],["lines","none"],[4,"ngFor","ngForOf"],["button","","detail","false"],["onerror","errorAvatar(this)",3,"src"],[1,"ml-3"],["slot","end","button","","detail","false",1,"share-member-action","btn-popover",3,"click"]],template:function(a,o){1&a&&n.DNE(0,D,5,0,"ng-container",0)(1,K,40,22,"ng-container",0),2&a&&(n.Y8G("ngIf",o.dataInit.loadingBoard),n.R7$(),n.Y8G("ngIf",!o.dataInit.loadingBoard))},dependencies:[u.Sq,u.bT,m.me,m.BC,m.vS,l.mC,l.Jm,l.QW,l.W9,l.M0,l.eU,l.iq,l.uz,l.he,l.nf,l.w2,l.BC,l.ai,M.D9],styles:[".input-group[_ngcontent-%COMP%]{--color: #eee}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]{margin-left:.5rem}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:3rem;min-height:3rem;padding:0 1rem;border:0;border-radius:.25rem;text-align:center;line-height:0;vertical-align:middle;background-color:var(--ion-color-tertiary);color:var(--ion-color-tertiary-contrast)}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-tertiary-shade)}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{height:3rem;padding:.25rem .5rem;border-color:var(--color, #4D4F60);color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5f6ce1}.btn-share[_ngcontent-%COMP%]{padding:.25rem 0;margin:0;border:0;font-size:1rem;background-color:transparent;color:var(--ion-text-color, #000);outline:none;box-shadow:none}.btn-share[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:1.5rem}.btn-share[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]:last-child{font-size:1rem}.btn-share[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:0 .5rem;vertical-align:middle}.share-member-action[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .share-member-action[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.share-member-action[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%] + ion-icon[_ngcontent-%COMP%]{margin-left:.5rem}hr[_ngcontent-%COMP%]{margin:0}ion-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:.5rem 0 .5rem 1rem;outline:none;box-shadow:none}ion-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem;vertical-align:middle}ion-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;vertical-align:middle}ion-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:.5rem}"]}),s})()},3753:(L,B,d)=>{d.d(B,{t:()=>O});var g=d(467),b=d(8671),f=d(2635),r=d(4438),k=d(6637),S=d(177),I=d(31);function P(_,n){1&_&&(r.qex(0),r.j41(1,"ion-content")(2,"div",2)(3,"div",3),r.nrm(4,"ion-spinner",4),r.k0s()()(),r.bVm())}function x(_,n){if(1&_){const l=r.RV6();r.qex(0),r.j41(1,"ion-item",9),r.bIt("click",function(){const m=r.eBV(l).$implicit,M=r.XpG(3);return r.Njj(M.filterChange(m.lookup_value))}),r.j41(2,"ion-label"),r.EFF(3),r.k0s()(),r.bVm()}if(2&_){const l=n.$implicit,u=r.XpG(3);r.R7$(),r.BMQ("color",l.lookup_value==u.selectedId?"primary":""),r.R7$(2),r.JRh(l.lookup_title)}}function C(_,n){if(1&_&&(r.j41(0,"ion-list",7),r.DNE(1,x,4,2,"ng-container",8),r.k0s()),2&_){const l=r.XpG(2);r.R7$(),r.Y8G("ngForOf",l.lookups)}}function E(_,n){1&_&&(r.j41(0,"div",3)(1,"i"),r.EFF(2),r.nI1(3,"translate"),r.k0s()()),2&_&&(r.R7$(2),r.JRh(r.bMT(3,1,"DataNotFound")))}function R(_,n){if(1&_){const l=r.RV6();r.qex(0),r.j41(1,"ion-item",9),r.bIt("click",function(){const m=r.eBV(l).$implicit,M=r.XpG(3);return r.Njj(M.filterChange(m.lookup_value))}),r.j41(2,"ion-label",10),r.EFF(3),r.k0s()(),r.bVm()}if(2&_){const l=n.$implicit,u=r.XpG(3);r.R7$(),r.BMQ("color",l.lookup_value==u.selectedId?"primary":""),r.R7$(),r.Y8G("color",l.color),r.R7$(),r.JRh(l.lookup_title)}}function j(_,n){if(1&_&&(r.qex(0),r.nrm(1,"hr"),r.j41(2,"ion-list",7),r.DNE(3,R,4,3,"ng-container",8),r.k0s(),r.bVm()),2&_){const l=r.XpG(2);r.R7$(3),r.Y8G("ngForOf",l.lookups_d2)}}function y(_,n){if(1&_&&(r.qex(0),r.DNE(1,C,2,1,"ion-list",5)(2,E,4,3,"div",6)(3,j,4,1,"ng-container",1),r.bVm()),2&_){const l=r.XpG();r.R7$(),r.Y8G("ngIf",l.lookups.length),r.R7$(),r.Y8G("ngIf",!l.lookups.length),r.R7$(),r.Y8G("ngIf",l.lookups_d2.length)}}let O=(()=>{var _;class n{constructor(u){this.popoverController=u,this.selectedId=0,this.lookup_key="",this.lookups_d2=[],this.dataInit={loading:!0},this.lookups=[]}ngOnInit(){var u=this;(0,g.A)(function*(){u.user=yield(0,f.Nk)(),u.loadLookup()})()}loadLookup(){var u;(0,b.$)({loading:m=>{this.dataInit.loading=m},params:{userid:null===(u=this.user)||void 0===u?void 0:u.userid,lookup_key:this.lookup_key},callback:m=>{this.lookups=m||[]}})}filterChange(u){var m;this.popoverController.dismiss(null!==(m=this.lookups.find(M=>M.lookup_value==u))&&void 0!==m?m:this.lookups_d2.find(M=>M.lookup_value==u),"confirm")}}return(_=n).\u0275fac=function(u){return new(u||_)(r.rXU(k.IE))},_.\u0275cmp=r.VBU({type:_,selectors:[["app-popover-lookup"]],inputs:{selectedId:"selectedId",lookup_key:"lookup_key",lookups_d2:"lookups_d2"},decls:3,vars:2,consts:[[1,"menu-lookup","overflow-auto"],[4,"ngIf"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],["lines","full",4,"ngIf"],["class","px-3 py-1",4,"ngIf"],["lines","full"],[4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],[3,"color"]],template:function(u,m){1&u&&(r.j41(0,"div",0),r.DNE(1,P,5,0,"ng-container",1)(2,y,4,3,"ng-container",1),r.k0s()),2&u&&(r.R7$(),r.Y8G("ngIf",m.dataInit.loading),r.R7$(),r.Y8G("ngIf",!m.dataInit.loading))},dependencies:[S.Sq,S.bT,k.W9,k.uz,k.he,k.nf,k.w2,I.D9],styles:[".menu-lookup[_ngcontent-%COMP%]{width:240px;max-height:480px;border-top:3px solid #5F6CE1}hr[_ngcontent-%COMP%]{margin:0}"]}),n})()}}]);