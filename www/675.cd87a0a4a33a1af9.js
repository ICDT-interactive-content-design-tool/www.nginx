"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[675],{9469:(it,J,v)=>{v.d(J,{K5:()=>X,Ur:()=>Y,Xs:()=>t,op:()=>V});var b=v(5972);const V=_=>{var k,P,R,E,$,o,j,I,A;_.params=_.params||{},_.params.page=_.params.page||1,_.params.limit=_.params.limit||1,(0,b.hm)({url:"api/Directory/SearchTreeList",params:{getby:null!==(k=_.params.userid)&&void 0!==k?k:null,directory_id:null!==(P=_.params.directory_id)&&void 0!==P?P:null,directory_pid:null!==(R=_.params.directory_pid)&&void 0!==R?R:null,directory_title:null!==(E=_.params.directory_title)&&void 0!==E?E:null,active:null!==($=_.params.active)&&void 0!==$?$:null,isdataowner:null!==(o=_.params.isdataowner)&&void 0!==o?o:null,statistic:null!==(j=_.params.statistic)&&void 0!==j?j:null,sortfield:null!==(I=_.params.sortfield)&&void 0!==I?I:null,sorttype:null!==(A=_.params.sorttype)&&void 0!==A?A:null,posstart:(_.params.page-1)*_.params.limit,numofrow:_.params.limit},success:K=>{"function"==typeof _.callback&&_.callback(K.data)},error:K=>{"function"==typeof _.callback&&_.callback(),console.error(K)},loading:_.loading,loadingController:_.loadingController})},Y=_=>{var k,P,R,E,$,o,j;_.params=_.params||{},_.params.page=_.params.page||1,_.params.limit=_.params.limit||1,(0,b.hm)({url:"api/Directory/SearchTreeNode",params:{getby:null!==(k=_.params.userid)&&void 0!==k?k:null,directory_id:null!==(P=_.params.directory_id)&&void 0!==P?P:null,active:null!==(R=_.params.active)&&void 0!==R?R:null,isdataowner:null!==(E=_.params.isdataowner)&&void 0!==E?E:null,statistic:null!==($=_.params.statistic)&&void 0!==$?$:null,sortfield:null!==(o=_.params.sortfield)&&void 0!==o?o:null,sorttype:null!==(j=_.params.sorttype)&&void 0!==j?j:null,posstart:(_.params.page-1)*_.params.limit,numofrow:_.params.limit},success:I=>{"function"==typeof _.callback&&_.callback(I.data)},error:I=>{"function"==typeof _.callback&&_.callback(),console.error(I)},loading:_.loading,loadingController:_.loadingController})},X=_=>{var k,P,R,E,$,o,j,I;_.params=_.params||{},_.params.page=_.params.page||1,_.params.limit=_.params.limit||1,(0,b.Ll)({url:"api/Directory/AddUpdate",params:{userid:null!==(k=_.params.userid)&&void 0!==k?k:null,directory_id:null!==(P=_.params.directory_id)&&void 0!==P?P:null,directory_pid:null!==(R=_.params.directory_pid)&&void 0!==R?R:null,directory_title:null!==(E=_.params.directory_title)&&void 0!==E?E:null,directory_description:null!==($=_.params.directory_description)&&void 0!==$?$:null,directory_icon:null!==(o=_.params.directory_icon)&&void 0!==o?o:null,directory_cover:null!==(j=_.params.directory_cover)&&void 0!==j?j:null,directory_color:null!==(I=_.params.directory_color)&&void 0!==I?I:null},success:A=>{"function"==typeof _.callback&&_.callback(A.data)},error:A=>{"function"==typeof _.callback&&_.callback(),console.error(A)},loading:_.loading,loadingController:_.loadingController})},t=_=>{var k,P;_.params=_.params||{},_.params.page=_.params.page||1,_.params.limit=_.params.limit||1,(0,b.sj)({url:"api/Directory/Delete",params:{deleteby:null!==(k=_.params.userid)&&void 0!==k?k:null,directory_id:null!==(P=_.params.directory_id)&&void 0!==P?P:null},success:R=>{"function"==typeof _.callback&&_.callback(R.data)},error:R=>{"function"==typeof _.callback&&_.callback(),console.error(R)},loading:_.loading,loadingController:_.loadingController})}},9957:(it,J,v)=>{v.d(J,{Y:()=>W});var b=v(467),V=v(5972),Y=v(6081),X=v(4975),t=v(2635),_=v(5414),k=v(7331),P=v(8405),R=v(1038),E=v(5807),$=v(2089),o=v(4438),j=v(6637),I=v(177),A=v(9417),K=v(9445),Z=v(31);function q(D,S){if(1&D){const T=o.RV6();o.j41(0,"button",32),o.bIt("click",function(s){o.eBV(T);const p=o.XpG(2);return o.Njj(p.clearTopic(s))}),o.nrm(1,"ion-icon",33),o.k0s()}}function e(D,S){if(1&D){const T=o.RV6();o.j41(0,"button",32),o.bIt("click",function(s){o.eBV(T);const p=o.XpG(2);return o.Njj(p.clearCategory(s))}),o.nrm(1,"ion-icon",33),o.k0s()}}function F(D,S){if(1&D){const T=o.RV6();o.j41(0,"button",32),o.bIt("click",function(s){o.eBV(T);const p=o.XpG(2);return o.Njj(p.clearTemplate(s))}),o.nrm(1,"ion-icon",33),o.k0s()}}function w(D,S){if(1&D){const T=o.RV6();o.j41(0,"ion-content",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13)(7,"b",14),o.EFF(8),o.nI1(9,"translate"),o.k0s()(),o.j41(10,"input",15),o.bIt("change",function(s){o.eBV(T);const p=o.XpG();return o.Njj(p.changeBoardTitle(s))}),o.k0s()(),o.j41(11,"div",12)(12,"div",13)(13,"b",14),o.EFF(14),o.nI1(15,"translate"),o.k0s()(),o.j41(16,"div",16),o.nrm(17,"input",17),o.j41(18,"div",18),o.DNE(19,q,2,0,"button",19),o.j41(20,"button",20),o.bIt("click",function(s){o.eBV(T);const p=o.XpG();return o.Njj(p.presentPopoverTopic(s))}),o.nrm(21,"ion-icon",21),o.k0s()()()(),o.j41(22,"div",12)(23,"div",13)(24,"b",14),o.EFF(25),o.nI1(26,"translate"),o.k0s()(),o.j41(27,"div",16),o.nrm(28,"input",17),o.j41(29,"div",18),o.DNE(30,e,2,0,"button",19),o.j41(31,"button",20),o.bIt("click",function(s){o.eBV(T);const p=o.XpG();return o.Njj(p.presentPopoverCategory(s))}),o.nrm(32,"ion-icon",21),o.k0s()()()(),o.j41(33,"div",12)(34,"div",13)(35,"b",14),o.EFF(36),o.nI1(37,"translate"),o.k0s()(),o.j41(38,"div",16),o.nrm(39,"input",17),o.j41(40,"div",18),o.DNE(41,F,2,0,"button",19),o.j41(42,"button",20),o.bIt("click",function(s){o.eBV(T);const p=o.XpG();return o.Njj(p.presentPopoverTemplate(s))}),o.nrm(43,"ion-icon",21),o.k0s()()()(),o.j41(44,"div",22)(45,"div",13)(46,"b",14),o.EFF(47),o.nI1(48,"translate"),o.k0s()(),o.j41(49,"div",16)(50,"div",23)(51,"input",24),o.bIt("change",function(s){o.eBV(T);const p=o.XpG();return o.Njj(p.changeBoardCover(s))}),o.k0s(),o.nrm(52,"label",25),o.k0s()()()(),o.j41(53,"div",26)(54,"div",12)(55,"div",13)(56,"b",14),o.EFF(57),o.nI1(58,"translate"),o.k0s()(),o.j41(59,"div",27)(60,"div",28),o.nrm(61,"ion-img",29),o.k0s()()()()(),o.j41(62,"div",30)(63,"div",13)(64,"b",14),o.EFF(65),o.nI1(66,"translate"),o.k0s()(),o.j41(67,"ckeditor",31),o.mxI("ngModelChange",function(s){o.eBV(T);const p=o.XpG();return o.DH7(p.board.board_description,s)||(p.board.board_description=s),o.Njj(s)}),o.k0s()(),o.j41(68,"div",30)(69,"div",13)(70,"b",14),o.EFF(71),o.nI1(72,"translate"),o.k0s()(),o.j41(73,"ckeditor",31),o.mxI("ngModelChange",function(s){o.eBV(T);const p=o.XpG();return o.DH7(p.board.board_content,s)||(p.board.board_content=s),o.Njj(s)}),o.k0s()()()()()}if(2&D){let T,r,s;const p=o.XpG();o.R7$(8),o.JRh(o.bMT(9,21,"LectureName")),o.R7$(2),o.Y8G("ngModel",p.board.board_title),o.R7$(4),o.JRh(o.bMT(15,23,"GradeLevel")),o.R7$(3),o.Y8G("value",null==(null!==(T=p.board.topic_titles)&&void 0!==T?T:p.board.topic_title)||null==(T=(null!=T?T:p.board.topic_title).split(";"))||null==(T=T.reverse())?null:T.join(" / ")),o.R7$(2),o.Y8G("ngIf",p.board.topic_id),o.R7$(6),o.JRh(o.bMT(26,25,"Subject")),o.R7$(3),o.Y8G("value",null==(null!==(r=p.board.category_title)&&void 0!==r?r:p.board.category_title)||null==(r=(null!=r?r:p.board.category_title).split(";"))||null==(r=r.reverse())?null:r.join(" / ")),o.R7$(2),o.Y8G("ngIf",p.board.category_id),o.R7$(6),o.JRh(o.bMT(37,27,"BoardTemplate")),o.R7$(3),o.Y8G("value",null==(null!==(s=p.board.template_titles)&&void 0!==s?s:p.board.template_title)||null==(s=(null!=s?s:p.board.template_title).split(";"))||null==(s=s.reverse())?null:s.join(" / ")),o.R7$(2),o.Y8G("ngIf",p.board.template_id),o.R7$(6),o.JRh(o.bMT(48,29,"Cover")),o.R7$(10),o.JRh(o.bMT(58,31,"Cover")),o.R7$(4),o.Y8G("src",p.fileurl||p.coverUrl||"assets/image/no-image.svg")("alt",p.board.board_title),o.R7$(4),o.JRh(o.bMT(66,33,"Introduce")),o.R7$(2),o.Y8G("editor",p.editorDescription),o.R50("ngModel",p.board.board_description),o.R7$(4),o.JRh(o.bMT(72,35,"Knowledge")),o.R7$(2),o.Y8G("editor",p.editorContent),o.R50("ngModel",p.board.board_content)}}let W=(()=>{var D;class S{constructor(r,s,p,g){this.modalController=r,this.popoverController=s,this.toastController=p,this.loadingController=g,this.b=0,this.editorDescription=E.m,this.editorContent=E.m,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var r=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,b.A)(function*(){r.appsettings=yield(0,V.AC)(),r.appsettings.madonvi&&(r.user=yield(0,t.Nk)(),r.readfileuploadurl=r.appsettings.readfileuploadurl||"",r.refreshData())})()}refreshData(){var r;(0,Y.qU)({params:{userid:null===(r=this.user)||void 0===r?void 0:r.userid,board_id:this.b},callback:s=>{if((null==s?void 0:s.board_id)==this.b)return this.board=s,this.board.board_title=this.board.board_title+` - Copy #${this.board.board_id} (${Math.floor(999*Math.random())})`,void this.coverLoad();this.modalController.dismiss()}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var r=this;return(0,b.A)(function*(){if(!r.board.board_title)return void(0,_.c)(r.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(p=>{p.present()});let s=[];r.boardCover&&s.push(new Promise((p,g)=>{var C;(0,R.v)({params:{file:r.boardCover,subFolder:`board-cover/${null!==(C=r.board.board_id)&&void 0!==C?C:0}`,fileType:"image"},callback:M=>{var y;0==(null==M?void 0:M.ReturnCode)?r.board.cover=M.path+"/"+(null===(y=M.file)||void 0===y?void 0:y.name):(0,_.c)(r.toastController,{},{returncode:null==M?void 0:M.ReturnCode,returnmsg:null==M?void 0:M.ReturnName}).then(L=>{L.present()}),p(!0)}})})),Promise.all(s).then(p=>{var g;(0,X.Wb)({loadingController:r.loadingController,params:Object.assign({},r.board,{userid:null===(g=r.user)||void 0===g?void 0:g.userid}),callback:C=>{(0,_.c)(r.toastController,{},C).then(M=>{M.present()}),0==(null==C?void 0:C.returncode)&&r.modalController.dismiss({id:null==C?void 0:C.id,title:r.board.board_title},"confirm")}})})})()}presentPopoverTopic(r){var s=this;return(0,b.A)(function*(){const p=yield s.popoverController.create({component:k.E,componentProps:{selectedId:s.board.topic_id,filter:{for:"board"}},event:r,dismissOnSelect:!1,animated:!1,side:"right"});p.onDidDismiss().then(g=>{var C,M,y,L,U,N,G;"confirm"==g.role&&(Object.assign(s.board,{topic_id:null===(C=g.data)||void 0===C?void 0:C.topic_id,topic_title:null===(M=g.data)||void 0===M?void 0:M.topic_title,topic_titles:null===(y=g.data)||void 0===y?void 0:y.topic_titles}),null!==(L=g.data)&&void 0!==L&&L.category_id&&Object.assign(s.board,{category_id:null===(U=g.data)||void 0===U?void 0:U.category_id,category_title:null===(N=g.data)||void 0===N?void 0:N.category_title,category_titles:null===(G=g.data)||void 0===G?void 0:G.category_titles}))}),p.present()})()}clearTopic(r){Object.assign(this.board,{topic_id:null,topic_title:null,topic_titles:null})}changeTopic(r){this.board.topic_id=r}presentPopoverCategory(r){var s=this;return(0,b.A)(function*(){const p=yield s.popoverController.create({component:P.P,componentProps:{selectedId:s.board.category_id,filter:{for:"board"}},event:r,dismissOnSelect:!1,animated:!1,side:"right"});p.onDidDismiss().then(g=>{var C,M,y;"confirm"==g.role&&Object.assign(s.board,{category_id:null===(C=g.data)||void 0===C?void 0:C.category_id,category_title:null===(M=g.data)||void 0===M?void 0:M.category_title,category_titles:null===(y=g.data)||void 0===y?void 0:y.category_titles})}),p.present()})()}clearCategory(r){Object.assign(this.board,{category_id:null,category_title:null,category_titles:null})}changeCategory(r){this.board.category_id=r}presentPopoverTemplate(r){var s=this;return(0,b.A)(function*(){const p=yield s.popoverController.create({component:$.B,componentProps:{selectedId:s.board.template_id,filter:{for:"board"}},event:r,dismissOnSelect:!1,animated:!1,side:"right"});p.onDidDismiss().then(g=>{var C,M,y;"confirm"==g.role&&Object.assign(s.board,{template_id:null===(C=g.data)||void 0===C?void 0:C.template_id,template_title:null===(M=g.data)||void 0===M?void 0:M.template_title,template_titles:null===(y=g.data)||void 0===y?void 0:y.template_titles})}),p.present()})()}clearTemplate(r){Object.assign(this.board,{template_id:null,template_title:null,template_titles:null})}changeTemplate(r){this.board.template_id=r}changeBoardTitle(r){var s;this.board.board_title=null==r||null===(s=r.target)||void 0===s?void 0:s.value}changeBoardDescription(r){var s;this.board.board_description=null==r||null===(s=r.target)||void 0===s?void 0:s.value}changeBoardContent(r){var s;this.board.board_content=null==r||null===(s=r.target)||void 0===s?void 0:s.value}changeBoardCover(r){this.boardCover=void 0,r.target.files.length&&(this.boardCover=r.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}coverLoad(){var r,s,p,g,C,M,y,L,U,N,G;let z=[null!==(r=this.board)&&void 0!==r&&r.cover?`${null!==(s=this.appsettings.readfileuploadurl)&&void 0!==s?s:""}${null===(p=this.board)||void 0===p?void 0:p.cover}`:void 0,null!==(g=this.board)&&void 0!==g&&g.board_id?`${null!==(C=this.appsettings.readfileuploadurl)&&void 0!==C?C:""}${null!==(M=this.appsettings.boardpath)&&void 0!==M?M:""}${null===(y=this.board)||void 0===y?void 0:y.board_id}/cover.svg`:void 0,null!==(L=this.board)&&void 0!==L&&L.board_id?`${null!==(U=this.appsettings.readfileuploadurl)&&void 0!==U?U:""}${null!==(N=this.appsettings.boardpathv1)&&void 0!==N?N:""}${null===(G=this.board)||void 0===G?void 0:G.board_id}/cover.png`:void 0].filter(H=>!!H),et=H=>{if(!H)return;let tt=new Image;tt.onload=()=>{this.coverUrl=H},tt.onerror=()=>{et(z.shift())},tt.src=H};z.length&&et(z.shift())}}return(D=S).\u0275fac=function(r){return new(r||D)(o.rXU(j.W3),o.rXU(j.IE),o.rXU(j.K_),o.rXU(j.Xi))},D.\u0275cmp=o.VBU({type:D,selectors:[["app-modal-board-copy"]],inputs:{b:"b"},decls:15,vars:8,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[1,"container-fluid","h-100"],[1,"d-flex","w-100","h-100","flex-column"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"line-height-24"],[1,"fs-14","fw-500"],["type","text",1,"form-control",3,"change","ngModel"],[1,"input-group"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","chevron-down-outline"],[1,"form-group","d-none"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"col-lg-6","col-cover"],["onClick","document.getElementById('inputGroupFile03').click()",1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[3,"src","alt"],[1,"pb-3"],[1,"w-100",3,"ngModelChange","editor","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"]],template:function(r,s){1&r&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o.EFF(3),o.nI1(4,"translate"),o.k0s(),o.j41(5,"ion-button",0),o.bIt("click",function(){return s.save()}),o.j41(6,"ion-label"),o.EFF(7),o.nI1(8,"translate"),o.k0s()(),o.j41(9,"ion-buttons",1)(10,"ion-button",2),o.bIt("click",function(){return s.toggleFullScreen()}),o.nrm(11,"ion-icon",3),o.k0s(),o.j41(12,"ion-button",4),o.bIt("click",function(){return s.close()}),o.nrm(13,"ion-icon",5),o.k0s()()()(),o.DNE(14,w,74,37,"ion-content",6)),2&r&&(o.R7$(3),o.JRh(o.bMT(4,4,"CopyLecture")),o.R7$(4),o.JRh(o.bMT(8,6,"Save")),o.R7$(4),o.Y8G("src",s.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),o.R7$(3),o.Y8G("ngIf",s.board.board_id))},dependencies:[I.bT,A.me,A.BC,A.vS,j.Jm,j.QW,j.W9,j.eU,j.iq,j.KW,j.he,j.BC,j.ai,K.h,Z.D9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.col-cover[_ngcontent-%COMP%]{max-width:485px}"]}),S})()},2807:(it,J,v)=>{v.d(J,{M:()=>lt});var b=v(467),V=v(5972),Y=v(8671),X=v(5781),t=v(1038),_=v(2635),k=v(4552),P=v(1607),R=v(4296),E=v(5414),$=v(8405),o=v(7331),j=v(7868),I=v(1400),A=v(1951),K=v(3675),Z=v(4835),q=v(1825),e=v(4438),F=v(6637),w=v(177),W=v(9417),D=v(31);const S=["inputSearchTag"],T=h=>({$implicit:h});function r(h,c){if(1&h){const u=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(u);const n=e.XpG();return e.Njj(n.switchModal("ai-image"))}),e.j41(1,"div",49)(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"ion-icon",50),e.k0s()()}2&h&&(e.HbH("btn-light btn-with-ai"),e.R7$(3),e.JRh(e.bMT(4,3,"CreativityWithAI")))}function s(h,c){if(1&h){const u=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(u);const n=e.XpG();return e.Njj(n.AI_recommend())}),e.j41(1,"div",49)(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"ion-icon",51),e.nI1(6,"translate"),e.k0s()()}2&h&&(e.HbH("btn-light"),e.R7$(3),e.JRh(e.bMT(4,4,"CreativityWithAI")),e.R7$(2),e.Y8G("title",e.bMT(6,6,"UpgradeTabcaProNow")))}function p(h,c){if(1&h&&e.eu8(0,52),2&h){e.XpG();const u=e.sdS(124);e.Y8G("ngTemplateOutlet",u)}}function g(h,c){if(1&h&&e.eu8(0,52),2&h){e.XpG();const u=e.sdS(126);e.Y8G("ngTemplateOutlet",u)}}function C(h,c){if(1&h){const u=e.RV6();e.j41(0,"button",53),e.bIt("click",function(n){e.eBV(u);const l=e.XpG();return e.Njj(l.clearTopic(n))}),e.nrm(1,"ion-icon",54),e.k0s()}}function M(h,c){if(1&h){const u=e.RV6();e.j41(0,"button",53),e.bIt("click",function(n){e.eBV(u);const l=e.XpG();return e.Njj(l.clearCategory(n))}),e.nrm(1,"ion-icon",54),e.k0s()}}function y(h,c){if(1&h){const u=e.RV6();e.j41(0,"button",53),e.bIt("click",function(n){e.eBV(u);const l=e.XpG();return e.Njj(l.clearDirectory(n))}),e.nrm(1,"ion-icon",54),e.k0s()}}function L(h,c){if(1&h){const u=e.RV6();e.j41(0,"ion-chip")(1,"ion-label"),e.EFF(2),e.k0s(),e.j41(3,"ion-icon",55),e.bIt("click",function(){const n=e.eBV(u).$implicit,l=e.XpG();return e.Njj(l.removeTag(n))}),e.k0s()()}if(2&h){const u=c.$implicit;e.R7$(2),e.JRh(u)}}function U(h,c){if(1&h&&e.eu8(0,57),2&h){const u=c.$implicit;e.XpG(2);const i=e.sdS(128);e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(2,T,u))}}function N(h,c){if(1&h&&(e.j41(0,"div",32)(1,"div",56)(2,"ul"),e.Z7z(3,U,1,4,"ng-container",57,e.fX1),e.k0s()()()),2&h){const u=e.XpG();e.R7$(3),e.Dyx(u.tags)}}function G(h,c){if(1&h&&(e.j41(0,"option",67),e.EFF(1),e.k0s()),2&h){const u=c.$implicit;e.Y8G("value",u.lookup_value),e.R7$(),e.JRh(u.lookup_title)}}function z(h,c){if(1&h&&(e.qex(0),e.j41(1,"option",65),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,G,2,2,"option",66),e.bVm()),2&h){const u=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"SelectMediaType")),e.R7$(2),e.Y8G("ngForOf",u.v_mediatypes)}}function et(h,c){if(1&h){const u=e.RV6();e.j41(0,"div",14)(1,"div",22)(2,"div",58)(3,"label",59),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"div",35)(7,"input",60),e.bIt("change",function(n){e.eBV(u);const l=e.XpG();return e.Njj(l.changeMediaFile(n))}),e.k0s(),e.j41(8,"label",61),e.EFF(9),e.nI1(10,"translate"),e.nI1(11,"translate"),e.k0s()()()(),e.j41(12,"div",14)(13,"div",22)(14,"div",58)(15,"label",59),e.EFF(16),e.nI1(17,"translate"),e.k0s()(),e.j41(18,"select",62),e.bIt("ngModelChange",function(n){e.eBV(u);const l=e.XpG();return e.Njj(l.changeMediaType(n))}),e.DNE(19,z,5,4,"ng-container",63),e.qex(20),e.j41(21,"option",64),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.bVm(),e.k0s()()()}if(2&h){let u,i;const n=e.XpG();e.R7$(4),e.JRh(e.bMT(5,6,"File")),e.R7$(5),e.JRh(n.mediaFiles.length?e.bMT(10,8,"Selected")+" "+n.mediaFiles.length+" "+e.bMT(11,10,"File"):(null!==(u=n.media.filepath)&&void 0!==u?u:"").split("/").pop()),e.R7$(7),e.JRh(e.bMT(17,12,"MediaType")),e.R7$(2),e.Y8G("ngModel",null!==(i=n.media.v_mediatype)&&void 0!==i?i:0),e.R7$(),e.Y8G("ngIf",n.mediaFiles.length<=1),e.R7$(3),e.JRh(e.bMT(23,14,"AutomaticallySelectsByFileType"))}}function H(h,c){if(1&h&&(e.j41(0,"option",67),e.EFF(1),e.k0s()),2&h){const u=c.$implicit;e.Y8G("value",u.lookup_value),e.R7$(),e.JRh(u.lookup_title)}}function tt(h,c){if(1&h){const u=e.RV6();e.j41(0,"div",14)(1,"div",22)(2,"div",58)(3,"label",59),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"input",68),e.bIt("ngModelChange",function(n){e.eBV(u);const l=e.XpG();return e.Njj(l.changeLinkShare(n))}),e.k0s()()(),e.j41(7,"div",14)(8,"div",22)(9,"div",58)(10,"label",59),e.EFF(11),e.nI1(12,"translate"),e.k0s()(),e.j41(13,"select",62),e.bIt("ngModelChange",function(n){e.eBV(u);const l=e.XpG();return e.Njj(l.changeOssType(n))}),e.j41(14,"option",65),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.DNE(17,H,2,2,"option",66),e.k0s()()()}if(2&h){let u;const i=e.XpG();e.R7$(4),e.JRh(e.bMT(5,6,"Url")),e.R7$(2),e.Y8G("ngModel",i.media.link_share),e.R7$(5),e.JRh(e.bMT(12,8,"OssType")),e.R7$(2),e.Y8G("ngModel",null!==(u=i.media.v_osstype)&&void 0!==u?u:0),e.R7$(2),e.JRh(e.bMT(16,10,"SelectOssType")),e.R7$(2),e.Y8G("ngForOf",i.v_osstypes)}}function ot(h,c){if(1&h){const u=e.RV6();e.j41(0,"li")(1,"ion-item",69),e.bIt("click",function(){const n=e.eBV(u).$implicit,l=e.XpG();return e.Njj(l.selectTag(n.tag_title))}),e.j41(2,"ion-label"),e.EFF(3),e.k0s()()()}if(2&h){const u=c.$implicit,i=e.XpG();e.R7$(),e.BMQ("color",null!=i.media.tag_arrs&&i.media.tag_arrs.includes(u.tag_title)?"primary":""),e.R7$(2),e.JRh(u.tag_title)}}let lt=(()=>{var h;class c{constructor(i,n,l,a){this.modalController=i,this.toastController=n,this.loadingController=l,this.popoverController=a,this.filter={},this.media={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.fileurl="",this.coverUrl="",this.v_mediatypes=[],this.v_osstypes=[],this.tags=[],this.mediaFiles=[],this.limitLoad=0}ngOnInit(){var i=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),Object.assign(this.media,this.filter),(0,b.A)(function*(){i.appsettings=yield(0,V.AC)(),i.appsettings.madonvi&&(i.user=yield(0,_.Nk)(),i.readfileuploadurl=i.appsettings.readfileuploadurl||"",i.refreshData())})()}refreshData(){var i;(0,Y.$)({params:{lookup_key:"v_mediatype"},callback:n=>{this.v_mediatypes=n||[]}}),(0,Y.$)({params:{lookup_key:"v_osstype"},callback:n=>{this.v_osstypes=n||[]}}),this.membership||(0,j.EW)({params:{userid:null===(i=this.user)||void 0===i?void 0:i.userid,v_functionlimit:I.r.GenAITaoHinhAnh},callback:n=>{var l;this.membership={GenAITaoHinhAnh:(0,A.j)(null==n||null===(l=n.contents)||void 0===l?void 0:l.find(a=>a.v_functionlimit==I.r.GenAITaoHinhAnh))}}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}switchModal(i){return this.modalController.dismiss({modalName:i},"switch")}save(){var i=this;return(0,b.A)(function*(){let n=[];if(i.mediaCover&&n.push(new Promise((l,a)=>{(0,t.v)({params:{file:i.mediaCover,subFolder:"material/tabca",fileType:"image"},callback:d=>{var m;0==(null==d?void 0:d.ReturnCode)?i.media.cover=d.path+"/"+(null===(m=d.file)||void 0===m?void 0:m.name):(0,E.c)(i.toastController,{},{returncode:null==d?void 0:d.ReturnCode,returnmsg:null==d?void 0:d.ReturnName}).then(f=>{f.present()}),l(!0)}})})),i.isLink){if(i.media.v_mediatype=P.S.LINK,!i.media.link_share)return void(0,E.c)(i.toastController,{message:"Nh\u1eadp \u0111\u01b0\u1eddng d\u1eabn!"}).then(l=>{l.present()})}else if(!i.media.link_file){if(i.mediaFiles.length>=2){const l=yield i.loadingController.create({message:"\u0110ang t\u1ea3i..."});return l.present(),void i.recursiveUpload(a=>{a||l.dismiss()})}if(1!=i.mediaFiles.length)return void(0,E.c)(i.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y t\u1eadp tin t\u1ea3i l\xean!"}).then(l=>{l.present()});n.push(new Promise((l,a)=>{let d=i.mediaFiles.pop();(0,t.v)({params:{file:d,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:m=>{var f,x;0==(null==m?void 0:m.ReturnCode)?(i.media.filepath=m.path+"/"+(null===(f=m.file)||void 0===f?void 0:f.name),i.media.link_file=i.readfileuploadurl+m.path+"/"+(null===(x=m.file)||void 0===x?void 0:x.name),i.media.media_title||(i.media.media_title=m.name.replace(/.[a-zA-Z0-9]+$/,"")),i.media.v_mediatype||i.v_mediatypes.every(O=>{var B,Q;return null===(B=O.lookup_note)||void 0===B||null===(B=B.replace(/\s+/g,""))||void 0===B||!B.split(",").includes(null===(Q=m.file)||void 0===Q?void 0:Q.extension)||(i.media.v_mediatype=O.lookup_value,!1)}),"zip"==(null==m?void 0:m.fileTye)&&i.media.v_mediatype==P.S.SCORM?(0,t.o)({loadingController:i.loadingController,params:{pathFile:i.media.filepath},callback:O=>{null!=O&&O.imsmanifest?i.media.filepath_extract=null==O?void 0:O.imsmanifest:i.media.v_mediatype=P.S.ZIP,l(!0)}}):l(!0)):((0,E.c)(i.toastController,{},{returncode:null==m?void 0:m.ReturnCode,returnmsg:null==m?void 0:m.ReturnName}).then(O=>{O.present()}),l(!0))}})}))}Promise.all(n).then(l=>{var a,d;!i.media.filepath||!i.media.link_share&&i.isLink||(0,X.Rq)({loadingController:i.loadingController,params:Object.assign({},i.media,{userid:null===(a=i.user)||void 0===a?void 0:a.userid,tags:null===(d=i.media.tag_arrs)||void 0===d||null===(d=d.filter((m,f,x)=>x.indexOf(m)==f))||void 0===d?void 0:d.join(";")}),callback:m=>{(0,E.c)(i.toastController,{},m).then(f=>{f.present()}),0==(null==m?void 0:m.returncode)&&i.modalController.dismiss(null==m?void 0:m.id,"confirm")}})})})()}recursiveUpload(i){if(this.mediaFiles.length){let n={topic_id:this.media.topic_id,category_id:this.media.category_id,directory_id:this.media.directory_id},l=this.mediaFiles.pop();(0,t.v)({params:{file:l,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:a=>{var d,m,f;0==(null==a?void 0:a.ReturnCode)?(n.filepath=a.path+"/"+(null===(d=a.file)||void 0===d?void 0:d.name),n.link_file=this.readfileuploadurl+a.path+"/"+(null===(m=a.file)||void 0===m?void 0:m.name),n.media_title=a.name.replace(/.[a-zA-Z0-9]+$/,""),this.v_mediatypes.every(x=>{var O,B;return null===(O=x.lookup_note)||void 0===O||null===(O=O.replace(/\s+/g,""))||void 0===O||!O.split(",").includes(null===(B=a.file)||void 0===B?void 0:B.extension)||(n.v_mediatype=x.lookup_value,!1)}),(0,X.Rq)({params:Object.assign(n,{userid:null===(f=this.user)||void 0===f?void 0:f.userid}),callback:x=>{this.recursiveUpload(i)}})):((0,E.c)(this.toastController,{},{returncode:null==a?void 0:a.ReturnCode,returnmsg:null==a?void 0:a.ReturnName}).then(x=>{x.present()}),this.recursiveUpload(i))}})}else i(!1),this.modalController.dismiss(null,"confirm")}presentPopoverTopic(i){var n=this;return(0,b.A)(function*(){const l=yield n.popoverController.create({component:o.E,componentProps:{selectedId:n.media.topic_id,filter:{for:"media"}},event:i,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(a=>{var d,m,f,x,O,B,Q;"confirm"==a.role&&(Object.assign(n.media,{topic_id:null===(d=a.data)||void 0===d?void 0:d.topic_id,topic_title:null===(m=a.data)||void 0===m?void 0:m.topic_title,topic_titles:null===(f=a.data)||void 0===f?void 0:f.topic_titles}),null!==(x=a.data)&&void 0!==x&&x.category_id&&Object.assign(n.media,{category_id:null===(O=a.data)||void 0===O?void 0:O.category_id,category_title:null===(B=a.data)||void 0===B?void 0:B.category_title,category_titles:null===(Q=a.data)||void 0===Q?void 0:Q.category_titles}))}),l.present()})()}clearTopic(i){Object.assign(this.media,{topic_id:null,topic_title:null,topic_titles:null})}changeTopic(i){var n;this.media.topic_id=null!==(n=parseInt(i))&&void 0!==n?n:0}presentPopoverCategory(i){var n=this;return(0,b.A)(function*(){const l=yield n.popoverController.create({component:$.P,componentProps:{selectedId:n.media.category_id,filter:{for:"media"}},event:i,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(a=>{var d,m,f;"confirm"==a.role&&Object.assign(n.media,{category_id:null===(d=a.data)||void 0===d?void 0:d.category_id,category_title:null===(m=a.data)||void 0===m?void 0:m.category_title,category_titles:null===(f=a.data)||void 0===f?void 0:f.category_titles})}),l.present()})()}clearCategory(i){Object.assign(this.media,{category_id:null,category_title:null,category_titles:null})}changeCategory(i){var n;this.media.category_id=null!==(n=parseInt(i))&&void 0!==n?n:0}presentPopoverDirectory(i){var n=this;return(0,b.A)(function*(){const l=yield n.popoverController.create({component:K._,componentProps:{selectedId:n.media.directory_id,filter:{for:"media"}},event:i,dismissOnSelect:!1,animated:!1,side:"right"});l.onDidDismiss().then(a=>{var d,m,f;"confirm"==a.role&&Object.assign(n.media,{directory_id:null===(d=a.data)||void 0===d?void 0:d.directory_id,directory_title:null===(m=a.data)||void 0===m?void 0:m.directory_title,directory_titles:null===(f=a.data)||void 0===f?void 0:f.directory_titles})}),l.present()})()}clearDirectory(i){Object.assign(this.media,{directory_id:null,directory_title:null,directory_titles:null})}changeDirectory(i){var n;this.media.directory_id=null!==(n=parseInt(i))&&void 0!==n?n:0}removeTag(i){var n;this.media.tag_arrs=null===(n=this.media.tag_arrs)||void 0===n?void 0:n.filter(l=>l!=i)}inputTag(i){i.detail.value||(clearInterval(this.intervalLimitLoad),this.limitLoad=0),this.loadTag_Limit()}selectTag(i){var n,l,a;(i=null!==(n=i)&&void 0!==n?n:null===(l=this.inputSearchTag)||void 0===l||null===(l=l.value)||void 0===l?void 0:l.toString())&&(this.media.tag_arrs||(this.media.tag_arrs=[]),null===(a=this.media.tag_arrs)||void 0===a||a.push(i),this.inputSearchTag&&(this.inputSearchTag.value=null,this.inputSearchTag.setFocus())),this.tags.length=0}loadTag_Limit(){var i=this;return(0,b.A)(function*(){i.limitLoad>0||(i.limitLoad=600,i.intervalLimitLoad=setInterval(()=>{i.limitLoad-=100,i.limitLoad<=0&&(clearInterval(i.intervalLimitLoad),i.loadTag())},100))})()}loadTag(){var i,n;let l=null===(i=this.inputSearchTag)||void 0===i?void 0:i.value;l&&(0,q.Tb)({params:{userid:null===(n=this.user)||void 0===n?void 0:n.userid,tag_title:l,page:1,limit:-1},callback:a=>{this.tags=a||[]}})}changeMediaTitle(i){var n;this.media.media_title=null==i||null===(n=i.target)||void 0===n?void 0:n.value}changeMediaDescription(i){var n;this.media.media_description=null==i||null===(n=i.target)||void 0===n?void 0:n.value}changeMediaContent(i){var n;this.media.media_content=null==i||null===(n=i.target)||void 0===n?void 0:n.value}changeMediaType(i){this.media.v_mediatype=i?parseInt(i):0}changeOssType(i){this.media.v_osstype=i?parseInt(i):0}changeLinkShare(i){this.media.link_share=i,(0,k.nh)(i)?this.media.v_osstype=R.N.YOUTUBE:(0,k.Ho)(i)&&(this.media.v_osstype=R.N.PHET)}changeMediaFile(i){this.mediaFiles.length=0;for(let a=0,d=null===(n=i.target)||void 0===n?void 0:n.files.length;a<d;a++){var n;this.mediaFiles.push(i.target.files[a])}if(1==this.mediaFiles.length){let{fileName:a,fileExtension:d}=(0,k.XG)(this.mediaFiles[0].name);var l;if(this.media.media_title=a,this.media.v_mediatype=void 0,this.v_mediatypes.every(m=>{var f;return null===(f=m.lookup_note)||void 0===f||null===(f=f.replace(/\s+/g,""))||void 0===f||!f.split(",").includes(d)||(this.media.v_mediatype=m.lookup_value,!1)}),!this.mediaCover)switch(null!==(l=this.media.v_mediatype)&&void 0!==l?l:0){case P.S.IMAGE:this.fileurl=URL.createObjectURL(this.mediaFiles[0]);break;case P.S.VIDEO:(()=>{let m=this.mediaFiles[0],f=new FileReader;f.onload=()=>{let x=document.createElement("canvas"),O=document.createElement("video");O.addEventListener("loadedmetadata",()=>{setTimeout(()=>{var B;x.width=O.videoWidth,x.height=O.videoHeight,null===(B=x.getContext("2d"))||void 0===B||B.drawImage(O,0,0,O.videoWidth,O.videoHeight),((at,rt)=>{let ct=(at.match(/^data:([^;]+);/)||"")[1];fetch(at).then(nt=>nt.arrayBuffer()).then(nt=>new File([nt],rt,{type:ct})).then(nt=>{this.mediaCover=nt,this.fileurl=URL.createObjectURL(nt)})})(x.toDataURL("image/png"),`${m.name}.png`),x.remove(),O.pause(),O.remove()},1e3)}),O.preload="metadata",O.muted=!0,O.playsInline=!0,O.src=f.result,O.play()},f.readAsDataURL(m)})()}}}changeMediaCover(i){var n;if(this.mediaCover=void 0,i.target.files.length&&(this.mediaCover=i.target.files[0]),!this.mediaCover)return;let d,{fileExtension:a}=(0,k.XG)(null===(n=this.mediaCover)||void 0===n?void 0:n.name);a&&(this.v_mediatypes.every(m=>{var f;return null===(f=m.lookup_note)||void 0===f||null===(f=f.replace(/\s+/g,""))||void 0===f||!f.split(",").includes(a)||(d=m.lookup_value,!1)}),this.mediaCover&&d==P.S.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaCover)))}changeIsLink(i){this.isLink=i}useDefaultCover(){var i=this;return(0,b.A)(function*(){i.mediaCover=void 0,i.fileurl="",i.media.cover=void 0,i.coverUrl="",i.coverLoad()})()}coverLoad(){var i,n,l;let a=[null!==(i=this.media)&&void 0!==i&&i.cover?`${null!==(n=this.appsettings.readfileuploadurl)&&void 0!==n?n:""}${null===(l=this.media)||void 0===l?void 0:l.cover}`:void 0].filter(m=>!!m),d=m=>{if(!m)return;let f=new Image;f.onload=()=>{this.coverUrl=m},f.onerror=()=>{d(a.shift())},f.src=m};a.length&&d(a.shift())}AI_recommend(){var i=this;return(0,b.A)(function*(){(0,Z.QB)(i.modalController,I.r.GenAITaoHinhAnh)})()}}return(h=c).\u0275fac=function(i){return new(i||h)(e.rXU(F.W3),e.rXU(F.K_),e.rXU(F.Xi),e.rXU(F.IE))},h.\u0275cmp=e.VBU({type:h,selectors:[["app-modal-media-add"]],viewQuery:function(i,n){if(1&i&&e.GBs(S,5),2&i){let l;e.mGM(l=e.lsd())&&(n.inputSearchTag=l.first)}},inputs:{filter:"filter",membership:"membership"},decls:129,vars:64,consts:[["inputSearchTag",""],["typefile",""],["typelink",""],["templateTagsTreeNode",""],["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"ion-padding"],[1,"container-fluid"],[1,"row"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"form-group"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["type","button",1,"btn",3,"class"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col"],[1,"line-height-24"],[1,"fs-14","fw-500"],[1,"input-group"],["type","text",1,"form-control",3,"change","ngModel"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","chevron-down-outline"],[1,"form-group","position-relative"],[1,"form-control","d-flex","flex-wrap","align-items-start","p-0"],[3,"ionInput","keyup.enter"],[1,"position-absolute","menu-tag-container"],[1,"col-auto"],[1,"form-group","d-none"],[1,"custom-file"],["type","file","id","inputGroupFile02",1,"custom-file-input",3,"change"],["for","inputGroupFile02",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[1,"placeholder"],[1,"d-flex","flex-wrap","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"placeholder-text"],["onClick","document.getElementById('inputGroupFile02').click()",1,"btn","btn-primary"],[1,"my-1"],[1,"text-lowercase"],[1,"btn","btn-outline-primary",3,"click"],[1,"pb-3"],["rows","6",1,"form-control",3,"change","ngModel"],[1,"d-flex","align-items-center","justify-content-center"],["src","../../../assets/icon-svg/magic.svg",1,"ml-2"],["src","../../../assets/image/tabca-pro-2.svg",1,"icon-tabca-pro","fs-22","ml-3","my-0",3,"title"],[3,"ngTemplateOutlet"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"],["name","close-outline",3,"click"],[1,"menu-tag","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"input-group-prepend"],[1,"input-group-text"],["type","file","id","inputGroupFile01","multiple","",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],[1,"custom-select",3,"ngModelChange","ngModel"],[4,"ngIf"],["value","","selected",""],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","https://",1,"form-control",3,"ngModelChange","ngModel"],["button","","detail","false",3,"click"]],template:function(i,n){if(1&i){const l=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-button",4),e.bIt("click",function(){return e.eBV(l),e.Njj(n.save())}),e.j41(6,"ion-label"),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"ion-buttons",5)(10,"ion-button",6),e.bIt("click",function(){return e.eBV(l),e.Njj(n.toggleFullScreen())}),e.nrm(11,"ion-icon",7),e.k0s(),e.j41(12,"ion-button",8),e.bIt("click",function(){return e.eBV(l),e.Njj(n.close())}),e.nrm(13,"ion-icon",9),e.k0s()()()(),e.j41(14,"ion-content",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"button",16),e.bIt("click",function(){return e.eBV(l),e.Njj(n.changeIsLink(!1))}),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"button",16),e.bIt("click",function(){return e.eBV(l),e.Njj(n.changeIsLink(!0))}),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.DNE(26,r,6,5,"button",17)(27,s,7,8),e.k0s()(),e.DNE(28,p,1,1,"ng-container",18)(29,g,1,1,"ng-container",18),e.k0s()(),e.j41(30,"div",12)(31,"div",19)(32,"div",14)(33,"div",20)(34,"b",21),e.EFF(35),e.nI1(36,"translate"),e.k0s()(),e.j41(37,"div",22)(38,"input",23),e.bIt("change",function(d){return e.eBV(l),e.Njj(n.changeMediaTitle(d))}),e.k0s()()(),e.j41(39,"div",14)(40,"div",20)(41,"b",21),e.EFF(42),e.nI1(43,"translate"),e.k0s()(),e.j41(44,"div",22),e.nrm(45,"input",24),e.j41(46,"div",25),e.DNE(47,C,2,0,"button",26),e.j41(48,"button",27),e.bIt("click",function(d){return e.eBV(l),e.Njj(n.presentPopoverTopic(d))}),e.nrm(49,"ion-icon",28),e.k0s()()()(),e.j41(50,"div",14)(51,"div",20)(52,"b",21),e.EFF(53),e.nI1(54,"translate"),e.k0s()(),e.j41(55,"div",22),e.nrm(56,"input",24),e.j41(57,"div",25),e.DNE(58,M,2,0,"button",26),e.j41(59,"button",27),e.bIt("click",function(d){return e.eBV(l),e.Njj(n.presentPopoverCategory(d))}),e.nrm(60,"ion-icon",28),e.k0s()()()(),e.j41(61,"div",14)(62,"div",20)(63,"b",21),e.EFF(64),e.nI1(65,"translate"),e.k0s()(),e.j41(66,"div",22),e.nrm(67,"input",24),e.j41(68,"div",25),e.DNE(69,y,2,0,"button",26),e.j41(70,"button",27),e.bIt("click",function(d){return e.eBV(l),e.Njj(n.presentPopoverDirectory(d))}),e.nrm(71,"ion-icon",28),e.k0s()()()(),e.j41(72,"div",29)(73,"div",20)(74,"b",21),e.EFF(75),e.nI1(76,"translate"),e.k0s()(),e.j41(77,"div",22)(78,"div",30),e.Z7z(79,L,4,1,"ion-chip",null,e.fX1),e.j41(81,"ion-input",31,0),e.bIt("ionInput",function(d){return e.eBV(l),e.Njj(n.inputTag(d))})("keyup.enter",function(){return e.eBV(l),e.Njj(n.selectTag())}),e.k0s()()(),e.DNE(83,N,5,0,"div",32),e.k0s()(),e.j41(84,"div",33)(85,"div",34)(86,"div",20)(87,"b",21),e.EFF(88),e.nI1(89,"translate"),e.k0s()(),e.j41(90,"div",22)(91,"div",35)(92,"input",36),e.bIt("change",function(d){return e.eBV(l),e.Njj(n.changeMediaCover(d))}),e.k0s(),e.j41(93,"label",37),e.EFF(94),e.k0s()()()(),e.j41(95,"div",14)(96,"div",20)(97,"b",21),e.EFF(98),e.nI1(99,"translate"),e.k0s()(),e.j41(100,"div",38)(101,"div",39),e.nrm(102,"img",7),e.j41(103,"div",40)(104,"div",41)(105,"div")(106,"div",42)(107,"button",43),e.EFF(108),e.nI1(109,"translate"),e.k0s(),e.j41(110,"div",44)(111,"small",45),e.EFF(112),e.nI1(113,"translate"),e.k0s()(),e.j41(114,"button",46),e.bIt("click",function(){return e.eBV(l),e.Njj(n.useDefaultCover())}),e.EFF(115),e.nI1(116,"translate"),e.k0s()()()()()()()()()(),e.j41(117,"div",47)(118,"div",20)(119,"b",21),e.EFF(120),e.nI1(121,"translate"),e.k0s()(),e.j41(122,"textarea",48),e.bIt("change",function(d){return e.eBV(l),e.Njj(n.changeMediaDescription(d))}),e.k0s()()()(),e.DNE(123,et,24,16,"ng-template",null,1,e.C5r)(125,tt,18,12,"ng-template",null,2,e.C5r)(127,ot,4,2,"ng-template",null,3,e.C5r)}if(2&i){let l,a,d;e.R7$(3),e.JRh(e.bMT(4,34,"AddMaterial")),e.R7$(4),e.JRh(e.bMT(8,36,"Add")),e.R7$(4),e.Y8G("src",n.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),e.R7$(9),e.HbH(n.isLink?"btn-light":"btn-primary"),e.R7$(),e.JRh(e.bMT(22,38,"File")),e.R7$(2),e.HbH(n.isLink?"btn-primary":"btn-light"),e.R7$(),e.JRh(e.bMT(25,40,"Link")),e.R7$(2),e.vxM(26,null!=n.membership&&n.membership.GenAITaoHinhAnh?26:27),e.R7$(2),e.Y8G("ngIf",!n.isLink),e.R7$(),e.Y8G("ngIf",n.isLink),e.R7$(6),e.JRh(e.bMT(36,42,"MaterialName")),e.R7$(3),e.Y8G("ngModel",n.media.media_title),e.R7$(4),e.JRh(e.bMT(43,44,"GradeLevel")),e.R7$(3),e.Y8G("value",null==(null!==(l=n.media.topic_titles)&&void 0!==l?l:n.media.topic_title)||null==(l=(null!=l?l:n.media.topic_title).split(";"))||null==(l=l.reverse())?null:l.join(" / ")),e.R7$(2),e.Y8G("ngIf",n.media.topic_id),e.R7$(6),e.JRh(e.bMT(54,46,"Subject")),e.R7$(3),e.Y8G("value",null==(null!==(a=n.media.category_titles)&&void 0!==a?a:n.media.category_title)||null==(a=(null!=a?a:n.media.category_title).split(";"))||null==(a=a.reverse())?null:a.join(" / ")),e.R7$(2),e.Y8G("ngIf",n.media.category_id),e.R7$(6),e.JRh(e.bMT(65,48,"Directory")),e.R7$(3),e.Y8G("value",null==(null!==(d=n.media.directory_titles)&&void 0!==d?d:n.media.directory_title)||null==(d=(null!=d?d:n.media.directory_title).split(";"))||null==(d=d.reverse())?null:d.join(" / ")),e.R7$(2),e.Y8G("ngIf",n.media.directory_id),e.R7$(6),e.JRh(e.bMT(76,50,"Tag")),e.R7$(4),e.Dyx(n.media.tag_arrs),e.R7$(4),e.vxM(83,n.tags.length?83:-1),e.R7$(5),e.JRh(e.bMT(89,52,"Cover")),e.R7$(6),e.JRh(null==n.mediaCover?null:n.mediaCover.name),e.R7$(4),e.JRh(e.bMT(99,54,"Cover")),e.R7$(4),e.Y8G("src",n.fileurl||n.coverUrl||"assets/image-png/media-default.jpg",e.B4B),e.R7$(6),e.JRh(e.bMT(109,56,"ChooseFile")),e.R7$(4),e.JRh(e.bMT(113,58,"Or")),e.R7$(3),e.JRh(e.bMT(116,60,"UseDefaultCover")),e.R7$(5),e.JRh(e.bMT(121,62,"Introduce")),e.R7$(2),e.Y8G("ngModel",n.media.media_description)}},dependencies:[w.Sq,w.bT,w.T3,W.xH,W.y7,W.me,W.wz,W.BC,W.vS,F.Jm,F.QW,F.ZB,F.W9,F.eU,F.iq,F.$w,F.uz,F.he,F.BC,F.ai,F.Gw,D.D9],styles:['.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[readonly][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[readonly][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[readonly][_ngcontent-%COMP%]{cursor:default}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.input-group[_ngcontent-%COMP%]   div.form-control[_ngcontent-%COMP%]{height:auto;min-height:38px}.input-group[_ngcontent-%COMP%]   div.form-control[_ngcontent-%COMP%] + .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:38px}.input-group[_ngcontent-%COMP%]   div.form-control[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{height:auto;min-height:28px;padding:3px 8px;margin:4px 0 0 4px;line-height:20px}.input-group[_ngcontent-%COMP%]   div.form-control[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{height:36px;min-width:160px;--padding-top: 0;--padding-bottom: 0}.btn-group[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;box-shadow:none}.btn-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff;border-color:#5359e6;background-color:#5359e6}.btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{color:#333;border-color:#ced4da;background-color:#e9f9ff}.embed-cover[_ngcontent-%COMP%]{width:424px;max-width:100%;border:1px dashed var(--ion-color-primary)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:none;width:100%;height:100%}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{line-height:0;font-size:40px}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{line-height:14px;font-size:12px;color:#333}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px;color:#333c}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:1.75rem;padding:0 .75rem;border-radius:4px;text-align:center;font-size:.8rem}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%] + .placeholder-text[_ngcontent-%COMP%]{margin-top:.25rem}.embed-cover[_ngcontent-%COMP%]:hover   img[src][_ngcontent-%COMP%]:not([src=""]) + .placeholder[_ngcontent-%COMP%]{display:block;position:absolute;top:0;left:0;background:#fffc}.menu-tag-container[_ngcontent-%COMP%]{z-index:1}.menu-tag[_ngcontent-%COMP%]{width:320px;max-height:200px;padding:.5rem 1rem;margin-top:1px;border-top:3px solid #5F6CE1;border-radius:4px;background:#fff;box-shadow:0 0 12px 4px #0000001a}.menu-tag[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}.menu-tag[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.menu-tag[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}.menu-tag[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.menu-tag[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}.menu-tag[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}.menu-tag[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.menu-tag[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}.menu-tag[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}']}),c})()},6103:(it,J,v)=>{v.d(J,{t:()=>h});var b=v(2505),V=v(8671),Y=v(1825),X=v(5446),t=v(4438),_=v(6637),k=v(177),P=v(31);const R=()=>[],E=c=>({$implicit:c});function $(c,u){if(1&c&&t.eu8(0,23),2&c){t.XpG();const i=t.sdS(26);t.Y8G("ngTemplateOutlet",i)}}function o(c,u){if(1&c&&(t.j41(0,"ion-accordion",24)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&c){t.XpG();const i=t.sdS(28);t.R7$(3),t.JRh(t.bMT(4,2,"MediaType")),t.R7$(3),t.Y8G("ngTemplateOutlet",i)}}function j(c,u){if(1&c&&(t.j41(0,"ion-accordion",27)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&c){t.XpG();const i=t.sdS(30);t.R7$(3),t.JRh(t.bMT(4,2,"Tag")),t.R7$(3),t.Y8G("ngTemplateOutlet",i)}}function I(c,u){if(1&c&&(t.j41(0,"ion-accordion",28)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&c){t.XpG();const i=t.sdS(32);t.R7$(3),t.JRh(t.bMT(4,2,"GradeLevel")),t.R7$(3),t.Y8G("ngTemplateOutlet",i)}}function A(c,u){if(1&c&&(t.j41(0,"ion-accordion",29)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&c){t.XpG();const i=t.sdS(36);t.R7$(3),t.JRh(t.bMT(4,2,"Subject")),t.R7$(3),t.Y8G("ngTemplateOutlet",i)}}function K(c,u){if(1&c){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",37),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(l){t.eBV(i);const a=t.XpG(2);return t.Njj(a.clearFilterTopic(l))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&c){let i;const n=t.XpG(2);t.R7$(4),t.JRh(null!==(i=n.filter.topic_title)&&void 0!==i?i:t.bMT(5,1,"GradeLevel"))}}function Z(c,u){if(1&c){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",40),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(l){t.eBV(i);const a=t.XpG(2);return t.Njj(a.clearFilterCategory(l))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&c){let i;const n=t.XpG(2);t.R7$(4),t.JRh(null!==(i=n.filter.category_title)&&void 0!==i?i:t.bMT(5,1,"Subject"))}}function q(c,u){if(1&c){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",41),t.j41(3,"ion-label"),t.EFF(4),t.k0s(),t.j41(5,"button",38),t.bIt("click",function(l){t.eBV(i);const a=t.XpG(2);return t.Njj(a.clearFilterTag(l))}),t.nrm(6,"ion-icon",39),t.k0s()()()}if(2&c){const i=t.XpG(2);t.R7$(4),t.JRh(i.filter.tag)}}function e(c,u){if(1&c){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",42),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(l){t.eBV(i);const a=t.XpG(2);return t.Njj(a.clearFilterMediaType(l,a.filter.v_mediatype))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&c){let i;const n=t.XpG(2);t.R7$(4),t.JRh(null!==(i=n.filter.v_mediatype_title)&&void 0!==i?i:t.bMT(5,1,"MediaType"))}}function F(c,u){if(1&c){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",42),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(l){const a=t.eBV(i).$implicit,d=t.XpG(2);return t.Njj(d.clearFilterMediaType(l,a.v_mediatype))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&c){let i;const n=u.$implicit;t.R7$(4),t.JRh(null!==(i=n.v_mediatype_title)&&void 0!==i?i:t.bMT(5,1,"MediaType"))}}function w(c,u){if(1&c){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",43),t.j41(3,"ion-label"),t.EFF(4),t.k0s(),t.j41(5,"button",38),t.bIt("click",function(l){t.eBV(i);const a=t.XpG(2);return t.Njj(a.clearSearch(l))}),t.nrm(6,"ion-icon",39),t.k0s()()()}if(2&c){const i=t.XpG(2);t.R7$(4),t.JRh(i.filter.search)}}function W(c,u){if(1&c&&(t.j41(0,"div",30)(1,"div",31)(2,"b"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",32),t.DNE(6,K,8,3,"div",33)(7,Z,8,3,"div",33)(8,q,7,1,"div",33)(9,e,8,3,"div",33)(10,F,8,3,"div",34)(11,w,7,1,"div",33),t.k0s()(),t.nrm(12,"hr")),2&c){let i;const n=t.XpG();t.R7$(3),t.Lme("",t.bMT(4,8,"AppliedFilters")," (",n.counter(),")"),t.R7$(3),t.Y8G("ngIf",n.filter.topic_id),t.R7$(),t.Y8G("ngIf",n.filter.category_id),t.R7$(),t.Y8G("ngIf",n.filter.tag),t.R7$(),t.Y8G("ngIf",n.filter.v_mediatype),t.R7$(),t.Y8G("ngForOf",null!==(i=n.filter.v_mediatypes)&&void 0!==i?i:t.lJ4(10,R)),t.R7$(),t.Y8G("ngIf",n.filter.search)}}function D(c,u){if(1&c){const i=t.RV6();t.qex(0),t.j41(1,"ion-item")(2,"ion-checkbox",47),t.bIt("ionChange",function(l){t.eBV(i);const a=t.XpG(2);return t.Njj(a.changeMediaType(l))}),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.k0s()(),t.bVm()}if(2&c){const i=u.$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("value",i.lookup_value)("checked",n.checkedMediaType(i.lookup_value)),t.R7$(2),t.JRh(i.lookup_title)}}function S(c,u){if(1&c){const i=t.RV6();t.j41(0,"ion-list",44)(1,"ion-item")(2,"ion-checkbox",45),t.bIt("ionChange",function(l){t.eBV(i);const a=t.XpG();return t.Njj(a.changeMediaType(l))}),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s()(),t.DNE(6,D,5,3,"ng-container",46),t.k0s()}if(2&c){const i=t.XpG();t.R7$(2),t.Y8G("value",0),t.R7$(2),t.JRh(t.bMT(5,3,"All")),t.R7$(2),t.Y8G("ngForOf",i.v_mediatypes)}}function T(c,u){if(1&c){const i=t.RV6();t.j41(0,"button",50),t.bIt("click",function(){const l=t.eBV(i).$implicit,a=t.XpG(2);return t.Njj(a.applyFilterTag({tag_id:l.tag_id,tag_title:l.tag_title}))}),t.EFF(1),t.k0s()}if(2&c){const i=u.$implicit,n=t.XpG(2);t.HbH(i.tag_title==n.filter.tag?"btn-warning":"btn-outline-secondary"),t.R7$(),t.JRh(i.tag_title)}}function r(c,u){if(1&c&&(t.j41(0,"div",48),t.Z7z(1,T,2,3,"button",49,t.fX1),t.k0s()),2&c){const i=t.XpG();t.R7$(),t.Dyx(i.tags)}}function s(c,u){if(1&c&&t.eu8(0,53),2&c){const i=u.$implicit;t.XpG(2);const n=t.sdS(34);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,E,i))}}function p(c,u){if(1&c&&(t.j41(0,"div",51)(1,"ion-list",44)(2,"ul"),t.DNE(3,s,1,4,"ng-container",52),t.k0s()()()),2&c){const i=t.XpG();t.R7$(3),t.Y8G("ngForOf",i.filterTopic(i.topics))}}function g(c,u){1&c&&t.nrm(0,"ion-icon",56)}function C(c,u){1&c&&t.nrm(0,"ion-spinner",58)}function M(c,u){1&c&&t.nrm(0,"ion-icon",59)}function y(c,u){if(1&c&&t.eu8(0,53),2&c){const i=u.$implicit;t.XpG(3);const n=t.sdS(34);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,E,i))}}function L(c,u){if(1&c&&(t.j41(0,"ul"),t.DNE(1,y,1,4,"ng-container",52),t.k0s()),2&c){const i=t.XpG().$implicit,n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.filterTopic(n.topics,i.topic_id))}}function U(c,u){if(1&c){const i=t.RV6();t.j41(0,"li")(1,"ion-item",54),t.bIt("click",function(){const l=t.eBV(i).$implicit,a=t.XpG();return t.Njj(a.applyFilterTopic({topic_id:l.topic_id,topic_title:l.topic_title}))}),t.j41(2,"ion-button",55),t.bIt("click",function(l){const a=t.eBV(i).$implicit,d=t.XpG();return t.Njj(d.expandTopic(l,a.topic_id,a.isexpanded))}),t.DNE(3,g,1,0,"ion-icon",56)(4,C,1,0)(5,M,1,0),t.k0s(),t.j41(6,"ion-label",57),t.EFF(7),t.k0s()(),t.DNE(8,L,2,1,"ul"),t.k0s()}if(2&c){const i=u.$implicit,n=t.XpG();t.R7$(),t.HbH(i.topic_id==n.filter.topic_id?"actived":""),t.R7$(),t.BMQ("style",i.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.vxM(3,i.isexpanded?i.loading?4:5:3),t.R7$(3),t.Y8G("title",i.topic_title),t.R7$(),t.JRh(i.topic_title),t.R7$(),t.vxM(8,i.isexpanded?8:-1)}}function N(c,u){if(1&c&&t.eu8(0,53),2&c){const i=u.$implicit;t.XpG(2);const n=t.sdS(38);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,E,i))}}function G(c,u){if(1&c&&(t.j41(0,"div",60)(1,"ion-list",44)(2,"ul"),t.DNE(3,N,1,4,"ng-container",52),t.k0s()()()),2&c){const i=t.XpG();t.R7$(3),t.Y8G("ngForOf",i.filterCategory(i.categorys))}}function z(c,u){1&c&&t.nrm(0,"ion-icon",56)}function et(c,u){1&c&&t.nrm(0,"ion-spinner",58)}function H(c,u){1&c&&t.nrm(0,"ion-icon",59)}function tt(c,u){if(1&c&&t.eu8(0,53),2&c){const i=u.$implicit;t.XpG(3);const n=t.sdS(38);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,E,i))}}function ot(c,u){if(1&c&&(t.j41(0,"ul"),t.DNE(1,tt,1,4,"ng-container",52),t.k0s()),2&c){const i=t.XpG().$implicit,n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.filterCategory(n.categorys,i.category_id))}}function lt(c,u){if(1&c){const i=t.RV6();t.j41(0,"li")(1,"ion-item",54),t.bIt("click",function(){const l=t.eBV(i).$implicit,a=t.XpG();return t.Njj(a.applyFilterCategory({category_id:l.category_id,category_title:l.category_title}))}),t.j41(2,"ion-button",55),t.bIt("click",function(l){const a=t.eBV(i).$implicit,d=t.XpG();return t.Njj(d.expandCategory(l,a.category_id,a.isexpanded))}),t.DNE(3,z,1,0,"ion-icon",56)(4,et,1,0)(5,H,1,0),t.k0s(),t.j41(6,"ion-label",57),t.EFF(7),t.k0s()(),t.DNE(8,ot,2,1,"ul"),t.k0s()}if(2&c){const i=u.$implicit,n=t.XpG();t.R7$(),t.HbH(i.category_id==n.filter.category_id?"actived":""),t.R7$(),t.BMQ("style",i.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.vxM(3,i.isexpanded?i.loading?4:5:3),t.R7$(3),t.Y8G("title",i.category_title),t.R7$(),t.JRh(i.category_title),t.R7$(),t.vxM(8,i.isexpanded?8:-1)}}let h=(()=>{var c;class u{constructor(n){this.modalController=n,this.filter={},this.topics=[],this.categorys=[],this.tags=[],this.v_mediatypes=[],this.accordionValue=[]}ngOnInit(){var n;null!==(n=this.filter.v_mediatypes)&&void 0!==n&&n.length&&this.accordionValue.push("accordion-mediatype"),this.filter.tag&&this.accordionValue.push("accordion-tag"),this.filter.topic_id&&this.accordionValue.push("accordion-topic"),this.filter.category_id&&this.accordionValue.push("accordion-category"),this.accordionValue.length||this.accordionValue.push("accordion-mediatype"),(0,V.$)({params:{lookup_key:"v_mediatype"},callback:l=>{this.v_mediatypes=l||[]}}),this.refreshDataTag(),this.refreshDataTopic(),this.refreshDataCategory()}clean(){this.filter={}}close(){this.modalController.dismiss(null,"cancel")}apply(){this.modalController.dismiss(this.filter,"confirm")}counter(){let n=0;return this.filter.search&&(n+=1),this.filter.topic_id&&(n+=1),this.filter.category_id&&(n+=1),this.filter.tag&&(n+=1),this.filter.v_mediatypes&&(n+=this.filter.v_mediatypes.length),n}changeMediaType(n){let{value:l,checked:a}=n.detail;if(0==l)return void(this.filter.v_mediatypes=a?this.v_mediatypes.map(f=>({v_mediatype:f.lookup_value,v_mediatype_title:f.lookup_title})):[]);let d=this.v_mediatypes.find(f=>f.lookup_value==l);var m;a?this.filter.v_mediatypes?this.filter.v_mediatypes.find(f=>f.v_mediatype==l)||this.filter.v_mediatypes.push({v_mediatype:null==d?void 0:d.lookup_value,v_mediatype_title:null==d?void 0:d.lookup_title}):this.filter.v_mediatypes=[{v_mediatype:null==d?void 0:d.lookup_value,v_mediatype_title:null==d?void 0:d.lookup_title}]:this.filter.v_mediatypes=null===(m=this.filter.v_mediatypes)||void 0===m?void 0:m.filter(f=>f.v_mediatype!=l)}checkedMediaType(n){var l;return!(null===(l=this.filter.v_mediatypes)||void 0===l||!l.find(a=>a.v_mediatype==n))}clearSearch(n){Object.assign(this.filter,{search:null})}clearFilterMediaType(n,l){this.changeMediaType({detail:{value:l,checked:!1}})}refreshDataTag(n){this.loadTag(void 0,n,!0)}loadTag(n,l,a){var d;(0,Y.Tb)({params:{userid:null===(d=this.user)||void 0===d?void 0:d.userid,tag_pid:n,isdataowner:!0,page:1,limit:-1},callback:m=>{this.tags=a?null!=m?m:[]:this.tags.concat(null!=m?m:[]),l&&l()}})}filterTag(n,l){return n.filter(l?a=>a.tag_pid==l:a=>null==a.tag_pid||0==a.tag_pid)}applyFilterTag(n){Object.assign(this.filter,this.filter.tag==n.tag_title?{tag:null}:{tag:n.tag_title})}clearFilterTag(n){Object.assign(this.filter,{tag:null})}refreshDataTopic(n){this.loadTopic(void 0,n,!0)}loadTopic(n,l,a){var d;(0,X.At)({loading:m=>{n&&(n.loading=m)},params:{userid:null===(d=this.user)||void 0===d?void 0:d.userid,topic_pid:null==n?void 0:n.topic_id,page:1,limit:-1},callback:m=>{this.topics=a?null!=m?m:[]:this.topics.concat(null!=m?m:[]),l&&l()}})}filterTopic(n,l){return n.filter(l?a=>a.topic_pid==l:a=>null==a.topic_pid||0==a.topic_pid)}expandTopic(n,l,a){n.preventDefault(),n.stopPropagation(),this.topics.filter(d=>d.topic_id==l).forEach(d=>{d.isexpanded=!a,d.isloadedchild||(d.isloadedchild=!0,this.loadTopic(d))})}applyFilterTopic(n){Object.assign(this.filter,this.filter.topic_id==n.topic_id?{topic_id:null,topic_title:null}:n)}clearFilterTopic(n){Object.assign(this.filter,{topic_id:null,topic_title:null})}refreshDataCategory(n){this.loadCategory(void 0,n,!0)}loadCategory(n,l,a){var d;(0,b.BI)({loading:m=>{n&&(n.loading=m)},params:{userid:null===(d=this.user)||void 0===d?void 0:d.userid,category_pid:null==n?void 0:n.category_pid,page:1,limit:-1},callback:m=>{this.categorys=a?null!=m?m:[]:this.categorys.concat(null!=m?m:[]),l&&l()}})}filterCategory(n,l){return n.filter(l?a=>a.category_pid==l:a=>null==a.category_pid||0==a.category_pid)}expandCategory(n,l,a){n.preventDefault(),n.stopPropagation(),this.categorys.filter(d=>d.category_id==l).forEach(d=>{d.isexpanded=!a,d.isloadedchild||(d.isloadedchild=!0,this.loadCategory(d))})}applyFilterCategory(n){Object.assign(this.filter,this.filter.category_id==n.category_id?{category_id:null,category_title:null}:n)}clearFilterCategory(n){Object.assign(this.filter,{category_id:null,category_title:null})}}return(c=u).\u0275fac=function(n){return new(n||c)(t.rXU(_.W3))},c.\u0275cmp=t.VBU({type:c,selectors:[["app-modal-media-filter"]],inputs:{user:"user",filter:"filter"},decls:39,vars:16,consts:[["templateFiltered",""],["templateMediatype",""],["templateTag",""],["templateTopic",""],["templateTopicNode",""],["templateCategory",""],["templateCategoryNode",""],["mode","md"],["slot","end","color","dark",1,"btn-clean",3,"click"],["slot","end"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"m-0"],[1,"ion-no-padding"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"multiple","value"],["value","accordion-mediatype",4,"ngIf"],["value","accordion-tags",4,"ngIf"],["value","accordion-topic",4,"ngIf"],["value","accordion-category",4,"ngIf"],["lines","none","color","tertiary","button","","detail","false",3,"click"],["slot","start"],["slot","end","src","../../../assets/icon-svg/arrow-right.svg"],[3,"ngTemplateOutlet"],["value","accordion-mediatype"],["slot","header"],["slot","content"],["value","accordion-tags"],["value","accordion-topic"],["value","accordion-category"],[1,"p-3"],[1,"mb-2"],[1,"list-filter","clearfix"],["class","item-filter float-left",4,"ngIf"],["class","item-filter float-left",4,"ngFor","ngForOf"],[1,"item-filter","float-left"],[1,"d-flex","align-items-center"],["src","../../../assets/icon-svg/dashboard/topic.svg"],[3,"click"],["name","close-outline"],["src","../../../assets/icon-svg/dashboard/category.svg"],["src","../../../assets/icon-svg/dashboard/tag.svg"],["name","ticket-outline"],["name","search-outline"],["lines","none"],["mode","md","slot","start",3,"ionChange","value"],[4,"ngFor","ngForOf"],["mode","md","slot","start",3,"ionChange","value","checked"],[1,"list-tags","px-3","pt-2","mb-3"],[1,"btn",3,"class"],[1,"btn",3,"click"],[1,"tree-topic"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline"],[3,"title"],["color","dark"],["name","caret-down-outline"],[1,"tree-category"]],template:function(n,l){if(1&n){const a=t.RV6();t.j41(0,"ion-header",7)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-label",8),t.bIt("click",function(){return t.eBV(a),t.Njj(l.clean())}),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"ion-buttons",9)(9,"ion-button",10),t.bIt("click",function(){return t.eBV(a),t.Njj(l.close())}),t.nrm(10,"ion-icon",11),t.k0s()()()(),t.nrm(11,"hr",12),t.j41(12,"ion-content",13),t.DNE(13,$,1,1,"ng-container",14),t.j41(14,"ion-accordion-group",15),t.DNE(15,o,7,4,"ion-accordion",16)(16,j,7,4,"ion-accordion",17)(17,I,7,4,"ion-accordion",18)(18,A,7,4,"ion-accordion",19),t.k0s()(),t.j41(19,"ion-footer")(20,"ion-item",20),t.bIt("click",function(){return t.eBV(a),t.Njj(l.apply())}),t.j41(21,"ion-label",21),t.EFF(22),t.nI1(23,"translate"),t.k0s(),t.nrm(24,"ion-icon",22),t.k0s()(),t.DNE(25,W,13,11,"ng-template",null,0,t.C5r)(27,S,7,5,"ng-template",null,1,t.C5r)(29,r,3,0,"ng-template",null,2,t.C5r)(31,p,4,1,"ng-template",null,3,t.C5r)(33,U,9,7,"ng-template",null,4,t.C5r)(35,G,4,1,"ng-template",null,5,t.C5r)(37,lt,9,7,"ng-template",null,6,t.C5r)}2&n&&(t.R7$(3),t.JRh(t.bMT(4,10,"Filter")),t.R7$(3),t.JRh(t.bMT(7,12,"ClearAll")),t.R7$(7),t.Y8G("ngIf",l.filter.topic_id||l.filter.category_id||l.filter.tag||l.filter.v_mediatype||(null==l.filter.v_mediatypes?null:l.filter.v_mediatypes.length)||l.filter.search),t.R7$(),t.Y8G("multiple",!0)("value",l.accordionValue),t.R7$(),t.Y8G("ngIf",l.v_mediatypes.length),t.R7$(),t.Y8G("ngIf",l.tags.length),t.R7$(),t.Y8G("ngIf",l.topics.length),t.R7$(),t.Y8G("ngIf",l.categorys.length),t.R7$(4),t.JRh(t.bMT(23,14,"Apply")))},dependencies:[k.Sq,k.bT,k.T3,_.xk,_.YH,_.Jm,_.QW,_.eY,_.W9,_.M0,_.eU,_.iq,_.uz,_.he,_.nf,_.w2,_.BC,_.ai,_.hB,P.D9],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}ion-header[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]:after{display:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:40px;margin-left:5px}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]{cursor:pointer;margin-right:1rem}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{margin:0}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 50px;text-transform:uppercase}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:27px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;line-height:20px}ion-accordion[_ngcontent-%COMP%]{font-size:14px}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{text-transform:uppercase}ion-accordion[_ngcontent-%COMP%]   [slot=content][_ngcontent-%COMP%]{padding:0}.tree-topic[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]{position:relative}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.list-filter[_ngcontent-%COMP%]   .item-filter[_ngcontent-%COMP%]{max-width:100%;height:36px;margin:4px 16px 4px 0;border-radius:18px;border:1px solid #E75969;color:#e75969}.list-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 .5rem 0 .75rem;stroke:#e75969}.list-filter[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{max-width:72%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;margin:0 2px;border-radius:50%;line-height:0;vertical-align:middle;text-align:center;outline:none;box-shadow:none;background-color:transparent;color:#1f1f39}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;font-size:20px}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eee}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-right:1rem;display:inline-block;vertical-align:middle}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;stroke:#1abdff}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;color:#4d4f60}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:24px;vertical-align:middle;line-height:0}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#1abdff}.list-tags[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;min-height:40px;padding:0 1rem;margin:.25rem .5rem .25rem 0;border-radius:8px;line-height:0;font-size:1rem;vertical-align:middle;text-align:center;outline:none;box-shadow:none!important}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]{color:var(--color-active, #333);background-color:var(--background-active, #E5F4FF);border-color:var(--background-active, #E5F4FF)}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]:hover{color:#000}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{padding:0;color:#000;background-color:#ececec;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ddd}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.list-tags[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;width:120px;vertical-align:middle;color:#333;background-color:#ececec;border-color:#ececec;outline:none;box-shadow:none!important}"]}),u})()},3355:(it,J,v)=>{v.d(J,{j:()=>X});var b=v(4438),V=v(6637),Y=v(31);let X=(()=>{var t;class _{constructor(P){this.popoverController=P,this.message={TitleConfirm:"",TextConfirm:"",TextCancel:""}}ngOnInit(){}cancel(){this.popoverController.dismiss(this.selectedId,"cancel")}confirm(){this.popoverController.dismiss(this.selectedId,"confirm")}}return(t=_).\u0275fac=function(P){return new(P||t)(b.rXU(V.IE))},t.\u0275cmp=b.VBU({type:t,selectors:[["app-popover-confirm"]],inputs:{selectedId:"selectedId",message:"message"},decls:12,vars:9,consts:[[1,"menu-confirm"],[1,"text-center","p-3"],["role","group",1,"w-100","btn-group","btn-group-sm"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(P,R){1&P&&(b.j41(0,"div",0)(1,"div",1)(2,"small"),b.EFF(3),b.nI1(4,"translate"),b.k0s()(),b.j41(5,"div",2)(6,"button",3),b.bIt("click",function(){return R.cancel()}),b.EFF(7),b.nI1(8,"translate"),b.k0s(),b.j41(9,"button",4),b.bIt("click",function(){return R.confirm()}),b.EFF(10),b.nI1(11,"translate"),b.k0s()()()),2&P&&(b.R7$(3),b.JRh(b.bMT(4,3,R.message.TitleConfirm)),b.R7$(4),b.JRh(b.bMT(8,5,R.message.TextCancel)),b.R7$(3),b.JRh(b.bMT(11,7,R.message.TextConfirm)))},dependencies:[Y.D9],styles:[".menu-confirm[_ngcontent-%COMP%]{border-top:3px solid #5F6CE1}"]}),_})()},3675:(it,J,v)=>{v.d(J,{_:()=>T});var b=v(467),V=v(9469),Y=v(2635),X=v(2313),t=v(4438),_=v(6637),k=v(177),P=v(31);const R=r=>({$implicit:r});function E(r,s){1&r&&t.eu8(0)}function $(r,s){1&r&&(t.j41(0,"ion-content")(1,"div",6)(2,"div",7),t.nrm(3,"ion-spinner",8),t.k0s()()())}function o(r,s){1&r&&t.eu8(0)}function j(r,s){if(1&r&&t.DNE(0,o,1,0,"ng-container",5),2&r){const p=t.XpG(),g=t.sdS(6),C=t.sdS(8);t.Y8G("ngIf",!(null!=p.directorys&&p.directorys.length))("ngIfThen",g)("ngIfElse",C)}}function I(r,s){1&r&&(t.j41(0,"div",9)(1,"small",10),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&r&&(t.R7$(2),t.JRh(t.bMT(3,1,"DataNotFound")))}function A(r,s){if(1&r&&t.eu8(0,13),2&r){const p=s.$implicit;t.XpG(2);const g=t.sdS(10);t.Y8G("ngTemplateOutlet",g)("ngTemplateOutletContext",t.eq3(2,R,p))}}function K(r,s){if(1&r&&(t.j41(0,"div",11)(1,"ul"),t.DNE(2,A,1,4,"ng-container",12),t.k0s()()),2&r){const p=t.XpG();t.R7$(2),t.Y8G("ngForOf",p.filterDirectory(p.directorys))}}function Z(r,s){1&r&&t.nrm(0,"ion-icon",16)}function q(r,s){1&r&&t.nrm(0,"ion-spinner",18)}function e(r,s){1&r&&t.nrm(0,"ion-icon",19)}function F(r,s){if(1&r&&(t.j41(0,"ion-badge",20),t.EFF(1),t.k0s()),2&r){const p=t.XpG().$implicit;t.R7$(),t.JRh(p.total_board)}}function w(r,s){if(1&r&&(t.j41(0,"ion-badge",20),t.EFF(1),t.k0s()),2&r){const p=t.XpG().$implicit;t.R7$(),t.JRh(p.total_media)}}function W(r,s){if(1&r&&t.eu8(0,13),2&r){const p=s.$implicit;t.XpG(3);const g=t.sdS(10);t.Y8G("ngTemplateOutlet",g)("ngTemplateOutletContext",t.eq3(2,R,p))}}function D(r,s){if(1&r&&(t.j41(0,"ul"),t.DNE(1,W,1,4,"ng-container",12),t.k0s()),2&r){const p=t.XpG().$implicit,g=t.XpG();t.R7$(),t.Y8G("ngForOf",g.filterDirectory(g.directorys,p.directory_id))}}function S(r,s){if(1&r){const p=t.RV6();t.j41(0,"li")(1,"ion-item",14),t.bIt("click",function(){const C=t.eBV(p).$implicit,M=t.XpG();return t.Njj(M.filterChange(C.directory_id))}),t.j41(2,"ion-button",15),t.bIt("click",function(C){const M=t.eBV(p).$implicit,y=t.XpG();return t.Njj(y.expandDirectory(C,M.directory_id,M.isexpanded))}),t.DNE(3,Z,1,0,"ion-icon",16)(4,q,1,0)(5,e,1,0),t.k0s(),t.j41(6,"ion-label"),t.EFF(7),t.k0s(),t.DNE(8,F,2,1,"ion-badge",17)(9,w,2,1,"ion-badge",17),t.k0s(),t.DNE(10,D,2,1,"ul"),t.k0s()}if(2&r){const p=s.$implicit,g=t.XpG();t.R7$(),t.BMQ("color",p.directory_id==g.selectedId?"primary":""),t.R7$(),t.BMQ("style",p.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.vxM(3,p.isexpanded?p.loading?4:5:3),t.R7$(4),t.JRh(p.directory_title),t.R7$(),t.Y8G("ngIf","board"==g.filter.for&&p.total_board),t.R7$(),t.Y8G("ngIf","media"==g.filter.for&&p.total_media),t.R7$(),t.vxM(10,p.isexpanded?10:-1)}}let T=(()=>{var r;class s{constructor(g){this.popoverController=g,this.selectedId=0,this.filter={},this.response={loading:!0},this.directorys=[]}ngOnInit(){var g=this;(0,b.A)(function*(){g.user=yield(0,Y.Nk)(),g.loadDirectory()})()}loadDirectory(g){var C;(0,V.op)({loading:M=>{this.response.loading=M,g&&(g.loading=M)},params:{userid:null===(C=this.user)||void 0===C?void 0:C.userid,directory_pid:null==g?void 0:g.directory_id,isdataowner:this.filter.isdataowner,statistic:this.filter.for?X.C[this.filter.for]:null,page:1,limit:-1},callback:M=>{var y;this.directorys=this.directorys.concat(M||[]),this.selectedId&&!this.directorys.find(L=>L.directory_id==this.selectedId)&&(0,V.Ur)({params:{userid:null===(y=this.user)||void 0===y?void 0:y.userid,directory_id:this.selectedId,statistic:this.filter.for?X.C[this.filter.for]:null,page:1,limit:-1},callback:L=>{let U=L||[];this.directorys=this.directorys.concat(U),U.map(N=>N.directory_pid).filter((N,G,z)=>z.indexOf(N)==G).forEach(N=>{this.directorys.filter(G=>G.directory_id==N).forEach(G=>{G.isexpanded=!0,G.isloadedchild=!0})})}})}})}filterDirectory(g,C){return g.filter(C?M=>M.directory_pid==C:M=>null==M.directory_pid||0==M.directory_pid)}expandDirectory(g,C,M){g.preventDefault(),g.stopPropagation(),this.directorys.filter(y=>y.directory_id==C).forEach(y=>{y.isexpanded=!M,y.isloadedchild||(y.isloadedchild=!0,this.loadDirectory(y))})}filterChange(g){this.popoverController.dismiss(this.directorys.find(C=>C.directory_id==g),"confirm")}}return(r=s).\u0275fac=function(g){return new(g||r)(t.rXU(_.IE))},r.\u0275cmp=t.VBU({type:r,selectors:[["app-popover-directory"]],inputs:{selectedId:"selectedId",filter:"filter"},decls:11,vars:3,consts:[["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[4,"ngIf","ngIfThen","ngIfElse"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-directory","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline"],["color","medium",4,"ngIf"],["color","dark"],["name","caret-down-outline"],["color","medium"]],template:function(g,C){if(1&g&&t.DNE(0,E,1,0,"ng-container",5)(1,$,4,0,"ng-template",null,0,t.C5r)(3,j,1,3,"ng-template",null,1,t.C5r)(5,I,4,3,"ng-template",null,2,t.C5r)(7,K,3,1,"ng-template",null,3,t.C5r)(9,S,11,7,"ng-template",null,4,t.C5r),2&g){const M=t.sdS(2),y=t.sdS(4);t.Y8G("ngIf",!(null!=C.directorys&&C.directorys.length)&&!1!==C.response.loading)("ngIfThen",M)("ngIfElse",y)}},dependencies:[k.Sq,k.bT,k.T3,_.In,_.Jm,_.W9,_.iq,_.uz,_.he,_.w2,P.D9],styles:["ion-content[_ngcontent-%COMP%]{width:320px;max-width:100%}.menu-directory[_ngcontent-%COMP%]{width:320px;max-height:240px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),s})()}}]);