"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3176],{3176:(He,Z,_)=>{_.r(Z),_.d(Z,{ViewerPageModule:()=>Le});var I=_(177),U=_(9417),c=_(6637),V=_(3658),u=_(467),N=_(5972),q=_(2635),R=_(8833),tt=_(6539),t=_(4438),dt=_(7704),st=_(9780),W=_(6081),Y=_(4975),F=_(5414),ct=_(7331),mt=_(8405),_t=_(1038),et=_(5807),pt=_(2089),ut=_(9445),J=_(31);function gt(o,r){if(1&o){const i=t.RV6();t.j41(0,"button",32),t.bIt("click",function(n){t.eBV(i);const a=t.XpG(2);return t.Njj(a.clearTopic(n))}),t.nrm(1,"ion-icon",33),t.k0s()}}function vt(o,r){if(1&o){const i=t.RV6();t.j41(0,"button",32),t.bIt("click",function(n){t.eBV(i);const a=t.XpG(2);return t.Njj(a.clearCategory(n))}),t.nrm(1,"ion-icon",33),t.k0s()}}function ht(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-content",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13)(7,"b",14),t.EFF(8),t.nI1(9,"translate"),t.k0s()(),t.j41(10,"input",15),t.bIt("change",function(n){t.eBV(i);const a=t.XpG();return t.Njj(a.changeBoardTitle(n))}),t.k0s()(),t.j41(11,"div",12)(12,"div",13)(13,"b",14),t.EFF(14),t.nI1(15,"translate"),t.k0s()(),t.j41(16,"div",16),t.nrm(17,"input",17),t.j41(18,"div",18),t.DNE(19,gt,2,0,"button",19),t.j41(20,"button",20),t.bIt("click",function(n){t.eBV(i);const a=t.XpG();return t.Njj(a.presentPopoverTopic(n))}),t.nrm(21,"ion-icon",21),t.k0s()()()(),t.j41(22,"div",12)(23,"div",13)(24,"b",14),t.EFF(25),t.nI1(26,"translate"),t.k0s()(),t.j41(27,"div",16),t.nrm(28,"input",17),t.j41(29,"div",18),t.DNE(30,vt,2,0,"button",19),t.j41(31,"button",20),t.bIt("click",function(n){t.eBV(i);const a=t.XpG();return t.Njj(a.presentPopoverCategory(n))}),t.nrm(32,"ion-icon",21),t.k0s()()()(),t.j41(33,"div",22)(34,"div",13)(35,"b",14),t.EFF(36),t.nI1(37,"translate"),t.k0s()(),t.j41(38,"div",16)(39,"div",23)(40,"input",24),t.bIt("change",function(n){t.eBV(i);const a=t.XpG();return t.Njj(a.changeBoardCover(n))}),t.k0s(),t.nrm(41,"label",25),t.k0s()()()(),t.j41(42,"div",26)(43,"div",12)(44,"div",13)(45,"b",14),t.EFF(46),t.nI1(47,"translate"),t.k0s()(),t.j41(48,"div",27)(49,"div",28),t.nrm(50,"ion-img",29),t.k0s()()()()(),t.j41(51,"div",30)(52,"div",13)(53,"b",14),t.EFF(54),t.nI1(55,"translate"),t.k0s()(),t.j41(56,"ckeditor",31),t.mxI("ngModelChange",function(n){t.eBV(i);const a=t.XpG();return t.DH7(a.board.board_description,n)||(a.board.board_description=n),t.Njj(n)}),t.k0s()(),t.j41(57,"div",30)(58,"div",13)(59,"b",14),t.EFF(60),t.nI1(61,"translate"),t.k0s()(),t.j41(62,"ckeditor",31),t.mxI("ngModelChange",function(n){t.eBV(i);const a=t.XpG();return t.DH7(a.board.board_content,n)||(a.board.board_content=n),t.Njj(n)}),t.k0s()()()()()}if(2&o){let i,e;const n=t.XpG();t.R7$(8),t.JRh(t.bMT(9,18,"LectureName")),t.R7$(2),t.Y8G("ngModel",n.board.board_title),t.R7$(4),t.JRh(t.bMT(15,20,"GradeLevel")),t.R7$(3),t.Y8G("value",null==(null!==(i=n.board.topic_titles)&&void 0!==i?i:n.board.topic_title)||null==(i=(null!=i?i:n.board.topic_title).split(";"))||null==(i=i.reverse())?null:i.join(" / ")),t.R7$(2),t.Y8G("ngIf",n.board.topic_id),t.R7$(6),t.JRh(t.bMT(26,22,"Subject")),t.R7$(3),t.Y8G("value",null==(null!==(e=n.board.category_title)&&void 0!==e?e:n.board.category_title)||null==(e=(null!=e?e:n.board.category_title).split(";"))||null==(e=e.reverse())?null:e.join(" / ")),t.R7$(2),t.Y8G("ngIf",n.board.category_id),t.R7$(6),t.JRh(t.bMT(37,24,"Cover")),t.R7$(10),t.JRh(t.bMT(47,26,"Cover")),t.R7$(4),t.Y8G("src",n.fileurl||n.coverUrl||"assets/image/no-image.svg")("alt",n.board.board_title),t.R7$(4),t.JRh(t.bMT(55,28,"Knowledge")),t.R7$(2),t.Y8G("editor",n.editorDescription),t.R50("ngModel",n.board.board_description),t.R7$(4),t.JRh(t.bMT(61,30,"ContentIntroduce")),t.R7$(2),t.Y8G("editor",n.editorContent),t.R50("ngModel",n.board.board_content)}}let bt=(()=>{var o;class r{constructor(e,n,a,l){this.modalController=e,this.popoverController=n,this.toastController=a,this.loadingController=l,this.b=0,this.editorDescription=et.m,this.editorContent=et.m,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var e=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,u.A)(function*(){e.appsettings=yield(0,N.AC)(),e.appsettings.madonvi&&(e.user=yield(0,q.Nk)(),e.readfileuploadurl=e.appsettings.readfileuploadurl||"",e.refreshData())})()}refreshData(){var e;(0,W.qU)({params:{userid:null===(e=this.user)||void 0===e?void 0:e.userid,board_id:this.b},callback:n=>{if((null==n?void 0:n.board_id)==this.b)return this.board=n,this.board.board_title=this.board.board_title+` (${Math.floor(999*Math.random())})`,void this.coverLoad();this.modalController.dismiss()}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var e=this;return(0,u.A)(function*(){if(!e.board.board_title)return void(0,F.c)(e.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(a=>{a.present()});let n=[];e.boardCover&&n.push(new Promise((a,l)=>{var d;(0,_t.v)({params:{file:e.boardCover,subFolder:`board-cover/${null!==(d=e.board.board_id)&&void 0!==d?d:0}`,fileType:"image"},callback:s=>{var p;0==(null==s?void 0:s.ReturnCode)?e.board.cover=s.path+"/"+(null===(p=s.file)||void 0===p?void 0:p.name):(0,F.c)(e.toastController,{},{returncode:null==s?void 0:s.ReturnCode,returnmsg:null==s?void 0:s.ReturnName}).then(m=>{m.present()}),a(!0)}})})),Promise.all(n).then(a=>{var l;(0,Y.Wb)({loadingController:e.loadingController,params:{board_id:e.board.board_id,board_title:e.board.board_title,board_description:e.board.board_description,board_content:e.board.board_content,cover:e.board.cover,topic_id:e.board.topic_id,category_id:e.board.category_id,size_width:e.board.size_width,size_height:e.board.size_height,userid:null===(l=e.user)||void 0===l?void 0:l.userid},callback:d=>{(0,F.c)(e.toastController,{},d).then(s=>{s.present()}),0==(null==d?void 0:d.returncode)&&e.modalController.dismiss({id:null==d?void 0:d.id,title:e.board.board_title},"confirm")}})})})()}presentPopoverTopic(e){var n=this;return(0,u.A)(function*(){const a=yield n.popoverController.create({component:ct.E,componentProps:{selectedId:n.board.topic_id,filter:{for:"board"}},event:e,dismissOnSelect:!1,animated:!1,side:"right"});a.onDidDismiss().then(l=>{var d,s,p,m,g,v,b;"confirm"==l.role&&(Object.assign(n.board,{topic_id:null===(d=l.data)||void 0===d?void 0:d.topic_id,topic_title:null===(s=l.data)||void 0===s?void 0:s.topic_title,topic_titles:null===(p=l.data)||void 0===p?void 0:p.topic_titles}),null!==(m=l.data)&&void 0!==m&&m.category_id&&Object.assign(n.board,{category_id:null===(g=l.data)||void 0===g?void 0:g.category_id,category_title:null===(v=l.data)||void 0===v?void 0:v.category_title,category_titles:null===(b=l.data)||void 0===b?void 0:b.category_titles}))}),a.present()})()}clearTopic(e){Object.assign(this.board,{topic_id:null,topic_title:null,topic_titles:null})}changeTopic(e){this.board.topic_id=e}presentPopoverCategory(e){var n=this;return(0,u.A)(function*(){const a=yield n.popoverController.create({component:mt.P,componentProps:{selectedId:n.board.category_id,filter:{for:"board"}},event:e,dismissOnSelect:!1,animated:!1,side:"right"});a.onDidDismiss().then(l=>{var d,s,p;"confirm"==l.role&&Object.assign(n.board,{category_id:null===(d=l.data)||void 0===d?void 0:d.category_id,category_title:null===(s=l.data)||void 0===s?void 0:s.category_title,category_titles:null===(p=l.data)||void 0===p?void 0:p.category_titles})}),a.present()})()}clearCategory(e){Object.assign(this.board,{category_id:null,category_title:null,category_titles:null})}changeCategory(e){this.board.category_id=e}presentPopoverTemplate(e){var n=this;return(0,u.A)(function*(){const a=yield n.popoverController.create({component:pt.B,componentProps:{selectedId:n.board.template_id,filter:{for:"board"}},event:e,dismissOnSelect:!1,animated:!1,side:"right"});a.onDidDismiss().then(l=>{var d,s,p;"confirm"==l.role&&Object.assign(n.board,{template_id:null===(d=l.data)||void 0===d?void 0:d.template_id,template_title:null===(s=l.data)||void 0===s?void 0:s.template_title,template_titles:null===(p=l.data)||void 0===p?void 0:p.template_titles})}),a.present()})()}clearTemplate(e){Object.assign(this.board,{template_id:null,template_title:null,template_titles:null})}changeTemplate(e){this.board.template_id=e}changeBoardTitle(e){var n;this.board.board_title=null==e||null===(n=e.target)||void 0===n?void 0:n.value}changeBoardDescription(e){var n;this.board.board_description=null==e||null===(n=e.target)||void 0===n?void 0:n.value}changeBoardContent(e){var n;this.board.board_content=null==e||null===(n=e.target)||void 0===n?void 0:n.value}changeBoardCover(e){this.boardCover=void 0,e.target.files.length&&(this.boardCover=e.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}coverLoad(){var e,n,a,l,d,s,p,m,g,v,b;let C=[null!==(e=this.board)&&void 0!==e&&e.cover?`${null!==(n=this.appsettings.readfileuploadurl)&&void 0!==n?n:""}${null===(a=this.board)||void 0===a?void 0:a.cover}`:void 0,null!==(l=this.board)&&void 0!==l&&l.board_id?`${null!==(d=this.appsettings.readfileuploadurl)&&void 0!==d?d:""}${null!==(s=this.appsettings.boardpath)&&void 0!==s?s:""}${null===(p=this.board)||void 0===p?void 0:p.board_id}/cover.svg`:void 0,null!==(m=this.board)&&void 0!==m&&m.board_id?`${null!==(g=this.appsettings.readfileuploadurl)&&void 0!==g?g:""}${null!==(v=this.appsettings.boardpathv1)&&void 0!==v?v:""}${null===(b=this.board)||void 0===b?void 0:b.board_id}/cover.png`:void 0].filter(M=>!!M),T=M=>{if(!M)return;let O=new Image;O.onload=()=>{this.coverUrl=M},O.onerror=()=>{T(C.shift())},O.src=M};C.length&&T(C.shift())}}return(o=r).\u0275fac=function(e){return new(e||o)(t.rXU(c.W3),t.rXU(c.IE),t.rXU(c.K_),t.rXU(c.Xi))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-modal-board-customize-template"]],inputs:{b:"b"},decls:15,vars:8,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[1,"container-fluid","h-100"],[1,"d-flex","w-100","h-100","flex-column"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"line-height-24"],[1,"fs-14","fw-500"],["type","text",1,"form-control",3,"change","ngModel"],[1,"input-group"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","chevron-down-outline"],[1,"form-group","d-none"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"col-lg-6","col-cover"],["onClick","document.getElementById('inputGroupFile03').click()",1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[3,"src","alt"],[1,"pb-3"],[1,"w-100",3,"ngModelChange","editor","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"]],template:function(e,n){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-button",0),t.bIt("click",function(){return n.save()}),t.j41(6,"ion-label"),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"ion-buttons",1)(10,"ion-button",2),t.bIt("click",function(){return n.toggleFullScreen()}),t.nrm(11,"ion-icon",3),t.k0s(),t.j41(12,"ion-button",4),t.bIt("click",function(){return n.close()}),t.nrm(13,"ion-icon",5),t.k0s()()()(),t.DNE(14,ht,63,32,"ion-content",6)),2&e&&(t.R7$(3),t.JRh(t.bMT(4,4,"CustomizeTemplate")),t.R7$(4),t.JRh(t.bMT(8,6,"UseThisTemplate")),t.R7$(4),t.Y8G("src",n.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.R7$(3),t.Y8G("ngIf",n.board.board_id))},dependencies:[I.bT,U.me,U.BC,U.vS,c.Jm,c.QW,c.W9,c.eU,c.iq,c.KW,c.he,c.BC,c.ai,ut.h,J.D9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.col-cover[_ngcontent-%COMP%]{max-width:485px}"]}),r})();var ft=_(3181),S=_(5312),h=_(8408),nt=_(1171),K=_(1312),Ct=_(8963),it=_(4552),L=_(345);function Mt(o,r){if(1&o&&(t.j41(0,"div",34),t.nrm(1,"ion-icon",35),t.j41(2,"span",36),t.EFF(3),t.k0s()()),2&o){const i=t.XpG(3);t.Y8G("title",i.board.topic_titles),t.R7$(3),t.JRh(i.board.topic_titles.split(";").reverse().join(" / "))}}function xt(o,r){if(1&o&&(t.j41(0,"div",34),t.nrm(1,"ion-icon",37),t.j41(2,"span",36),t.EFF(3),t.k0s()()),2&o){const i=t.XpG(3);t.Y8G("title",i.board.category_titles),t.R7$(3),t.JRh(i.board.category_titles.split(";").reverse().join(" / "))}}function kt(o,r){if(1&o&&(t.j41(0,"div",34),t.nrm(1,"ion-icon",38),t.j41(2,"span",36),t.EFF(3),t.k0s()()),2&o){const i=t.XpG(3);t.Y8G("title",i.board.template_titles),t.R7$(3),t.JRh(i.board.template_titles.split(";").reverse().join(" / "))}}function wt(o,r){if(1&o&&(t.j41(0,"div",9),t.DNE(1,Mt,4,2,"div",34)(2,xt,4,2,"div",34)(3,kt,4,2,"div",34),t.k0s()),2&o){const i=t.XpG(2);t.R7$(),t.vxM(1,i.board.topic_titles?1:-1),t.R7$(),t.vxM(2,i.board.category_titles?2:-1),t.R7$(),t.vxM(3,i.board.template_titles?3:-1)}}function Pt(o,r){if(1&o){const i=t.RV6();t.j41(0,"div",18)(1,"ion-button",39),t.bIt("click",function(){t.eBV(i);const n=t.XpG(2);return t.Njj(n.pageBack())}),t.nrm(2,"ion-img",40),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s(),t.j41(5,"ion-button",39),t.bIt("click",function(){t.eBV(i);const n=t.XpG(2);return t.Njj(n.pageNext())}),t.nrm(6,"ion-img",41),t.k0s()()}if(2&o){const i=t.XpG(2);t.R7$(),t.Y8G("disabled",i.slideIdx<1),t.R7$(3),t.Lme("",i.slideIdx+1,"/",i.slideTotal,""),t.R7$(),t.Y8G("disabled",i.slideIdx>=i.slideTotal-1)}}function yt(o,r){if(1&o){const i=t.RV6();t.j41(0,"div")(1,"ion-button",42),t.bIt("click",function(){t.eBV(i);const n=t.XpG(2);return t.Njj(n.renderSlide())}),t.nrm(2,"ion-img",43),t.k0s()()}}function Rt(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-button",42),t.bIt("click",function(){t.eBV(i);const n=t.XpG(3);return t.Njj(n.offFullScreen())}),t.nrm(1,"ion-img",45),t.k0s()}}function Tt(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-button",42),t.bIt("click",function(){t.eBV(i);const n=t.XpG(3);return t.Njj(n.onFullScreen())}),t.nrm(1,"ion-img",46),t.k0s()}}function Ot(o,r){if(1&o&&(t.j41(0,"div"),t.DNE(1,Rt,2,0,"ion-button",44)(2,Tt,2,0),t.k0s()),2&o){const i=t.XpG(2);t.R7$(),t.vxM(1,i.isfullscreen?1:2)}}function jt(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-button",47),t.bIt("click",function(){t.eBV(i);const n=t.XpG(2);return t.Njj(n.navigateToEditor(n.APP_ROUTE.EDITOR+"?b="+n.board.board_id))}),t.j41(1,"ion-label"),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}2&o&&(t.R7$(2),t.JRh(t.bMT(3,1,"Editor")))}function Vt(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-button",47),t.bIt("click",function(n){t.eBV(i);const a=t.XpG(2);return t.Njj(a.presentModalBoardCustomizeTemplate(n,a.board.board_id))}),t.j41(1,"ion-label"),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}2&o&&(t.R7$(2),t.JRh(t.bMT(3,1,"CustomizeThisTemplate")))}function $t(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-button",48),t.bIt("click",function(){t.eBV(i);const n=t.XpG(2);return t.Njj(n.navigateToEditor(n.APP_ROUTE.EDITOR+"?b="+n.board.board_id))}),t.j41(1,"ion-label"),t.EFF(2),t.nI1(3,"translate"),t.k0s()()}if(2&o){const i=t.XpG(2);t.Y8G("disabled",!i.board.chotausuabai),t.R7$(2),t.JRh(t.bMT(3,2,"Editor"))}}function It(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-button",49),t.nI1(1,"translate"),t.bIt("click",function(n){t.eBV(i);const a=t.XpG(2);return t.Njj(a.presentModalBoardShare(n))}),t.nrm(2,"ion-icon",50),t.k0s()}2&o&&t.Y8G("title",t.bMT(1,1,"Share"))}function Ft(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-chip",51),t.bIt("click",function(){const n=t.eBV(i).$implicit,a=t.XpG(2);return t.Njj(a.switchBoard(n.board_id))}),t.nrm(1,"ion-icon",52),t.j41(2,"ion-label"),t.EFF(3),t.k0s()()}if(2&o){const i=r.$implicit,e=t.XpG(2);t.HbH(e.board.board_id==i.board_id?"active":""),t.R7$(),t.Y8G("name",e.board.board_id==i.board_id?"ellipse":"ellipse-outline"),t.R7$(2),t.JRh(i.board_title)}}function Et(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-infinite-scroll",53),t.bIt("ionInfinite",function(n){t.eBV(i);const a=t.XpG(2);return t.Njj(a.onIonInfinite(n))}),t.nrm(1,"ion-infinite-scroll-content"),t.k0s()}}function Bt(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-chip",51),t.bIt("click",function(){const n=t.eBV(i).$implicit,a=t.XpG(2);return t.Njj(a.switchBoard(n.board_id))}),t.nrm(1,"ion-icon",52),t.j41(2,"ion-label"),t.EFF(3),t.k0s()()}if(2&o){const i=r.$implicit,e=t.XpG(2);t.HbH(e.board.board_id==i.board_id?"active":""),t.R7$(),t.Y8G("name",e.board.board_id==i.board_id?"ellipse":"ellipse-outline"),t.R7$(2),t.JRh(i.board_title)}}function Gt(o,r){1&o&&(t.j41(0,"div",57),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"NoData")))}function Dt(o,r){if(1&o&&(t.j41(0,"div",58),t.nrm(1,"div",59),t.k0s()),2&o){const i=t.XpG(3);t.R7$(),t.Y8G("innerHTML",i.board.board_description,t.npT)}}function Xt(o,r){if(1&o&&(t.j41(0,"div",32)(1,"h5",54),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",55)(5,"div",10),t.nrm(6,"div",56),t.DNE(7,Gt,3,3,"div",57),t.k0s(),t.DNE(8,Dt,2,1,"div",58),t.k0s()()),2&o){const i=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,4,"Introduce")),t.R7$(4),t.Y8G("innerHTML",i.board.board_content,t.npT),t.R7$(),t.vxM(7,i.board.board_content?-1:7),t.R7$(),t.vxM(8,i.board.board_description?8:-1)}}function At(o,r){if(1&o&&(t.j41(0,"div",61),t.nrm(1,"ion-icon",62),t.j41(2,"span",63),t.EFF(3),t.k0s()()),2&o){const i=r.$implicit;t.Y8G("title",i),t.R7$(3),t.JRh(i)}}function Nt(o,r){if(1&o&&(t.j41(0,"div",33)(1,"h5",54),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",55)(5,"div",10)(6,"div",60),t.Z7z(7,At,4,2,"div",61,t.fX1),t.k0s()()()()),2&o){const i=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,1,"Tag")),t.R7$(5),t.Dyx(i.board.tag_arrs)}}function St(o,r){if(1&o){const i=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5),t.k0s(),t.j41(6,"div",5)(7,"div",6)(8,"ion-chip")(9,"ion-avatar",7),t.nrm(10,"img",8),t.k0s(),t.j41(11,"ion-label"),t.EFF(12),t.k0s()()(),t.DNE(13,wt,4,3,"div",9),t.k0s()(),t.j41(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14),t.qSk(),t.nrm(19,"svg",15),t.k0s()(),t.joV(),t.j41(20,"div",16)(21,"div",17),t.DNE(22,Pt,7,4,"div",18)(23,yt,3,0,"div")(24,Ot,3,1,"div"),t.k0s()()()()(),t.j41(25,"div",19)(26,"div",20)(27,"div")(28,"div",21)(29,"div",22),t.DNE(30,jt,4,3,"ion-button",23)(31,Vt,4,3)(32,$t,4,4),t.k0s(),t.j41(33,"div",24),t.DNE(34,It,3,3,"ion-button",25),t.j41(35,"ion-button",26),t.bIt("click",function(n){t.eBV(i);const a=t.XpG();return t.Njj(a.toggleLike(n))}),t.nrm(36,"ion-icon",27),t.k0s()()()(),t.j41(37,"div",28)(38,"ion-content"),t.Z7z(39,Ft,4,4,"ion-chip",29,t.fX1),t.DNE(41,Et,2,0,"ion-infinite-scroll",30),t.k0s()(),t.j41(42,"div",31),t.Z7z(43,Bt,4,4,"ion-chip",29,t.fX1),t.k0s()()()()()(),t.DNE(45,Xt,9,6,"div",32)(46,Nt,9,3,"div",33)}if(2&o){const i=t.XpG();t.R7$(5),t.JRh(i.board.board_title),t.R7$(5),t.Y8G("src",i.board.createdby_avatar?i.readfileuploadurl+i.board.createdby_avatar:"assets/image/user-avatar-default.png",t.B4B),t.R7$(2),t.JRh(i.board.createdby_name),t.R7$(),t.vxM(13,i.board.topic_titles||i.board.category_titles||i.board.template_titles?13:-1),t.R7$(2),t.BMQ("style","padding-bottom:"+i.svgRatio+"%",t.$dS),t.R7$(7),t.vxM(22,null!=i.settings.buttons&&i.settings.buttons.paging?22:-1),t.R7$(),t.vxM(23,null!=i.settings.buttons&&i.settings.buttons.refresh?23:-1),t.R7$(),t.vxM(24,null!=i.settings.buttons&&i.settings.buttons.fullscreen?24:-1),t.R7$(6),t.vxM(30,i.board.chotausuabai?30:i.board.ispublic&&i.board.istemplate?31:32),t.R7$(4),t.vxM(34,i.board.isowner?34:-1),t.R7$(2),t.Mz_("src","../../../assets/image/viewer/",i.board.isliked?"star-2.svg":"star.svg",""),t.R7$(3),t.Dyx(i.boards),t.R7$(2),t.Y8G("ngIf",i.paging.active),t.R7$(2),t.Dyx(i.boards),t.R7$(2),t.vxM(45,i.board.board_description||i.board.board_content?45:-1),t.R7$(),t.vxM(46,null!=i.board.tag_arrs&&i.board.tag_arrs.length?46:-1)}}let zt=(()=>{var o;class r{constructor(e,n,a,l,d,s,p){this.titleService=e,this.metaService=n,this.router=a,this.activatedRoute=l,this.toastController=d,this.modalController=s,this.loadingController=p,this.appsettings={},this.user={},this.APP_ROUTE=R._,this.boards=[],this.paging={page:1,limit:10,active:!0},this.filter={},this.settings={},this.slides=[],this.slideIdx=0,this.slideTotal=0,this.svgRatio=56.25,this.readfileuploadurl="",this.isfullscreen=!1,this.pageBack=()=>{this.slideIdx>0&&(this.slideIdx--,this.renderSlide())},this.pageNext=()=>{this.slideIdx<this.slideTotal-1&&(this.slideIdx++,this.renderSlide())},this.onFullScreen=()=>{var m,g;(g=null!==(m=document.getElementById("sieunhangaoo"))&&void 0!==m?m:document.body).requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.webkitRequestFullscreen?g.webkitRequestFullscreen():g.msRequestFullscreen&&g.msRequestFullscreen(),setTimeout(()=>{this.isfullscreen=(g=>!!(g.fullscreen||g.fullscreenElement||g.webkitFullscreenElement||g.mozFullScreenElement||g.msFullscreenElement))(document)},600)},this.offFullScreen=()=>{var m;(m=document).exitFullscreen?m.exitFullscreen():m.mozCancelFullScreen?m.mozCancelFullScreen():m.webkitExitFullscreen?m.webkitExitFullscreen():m.msExitFullscreen&&m.msExitFullscreen(),setTimeout(()=>{this.isfullscreen=(m=>!!(m.fullscreen||m.fullscreenElement||m.webkitFullscreenElement||m.mozFullScreenElement||m.msFullscreenElement))(document)},600)}}ngOnInit(){var e;this.readfileuploadurl=null!==(e=this.appsettings.readfileuploadurl)&&void 0!==e?e:"",h.LVk.container="#mainContainer",h.LVk.svg="#mainSvg",h.LVk.config=this.appsettings,(0,Ct.j)(),this.loadBoard(()=>{var n,a,l;this.paging.page=1,this.paging.active=!0,this.filter={topic_id:null===(n=this.board)||void 0===n?void 0:n.topic_id,category_id:null===(a=this.board)||void 0===a?void 0:a.category_id,template_id:null===(l=this.board)||void 0===l?void 0:l.template_id},this.loadData_Paging()})}ngAfterViewInit(){window.addEventListener("resize",()=>{this.slide&&(0,h.I1Q)(h.LVk.container,h.LVk.svg,this.slide)})}onIonInfinite(e){this.loadMore(()=>{e.target.complete()})}loadMore(e){this.paging.page+=1,this.loadData_Paging(e)}loadData_Paging(e){var n=this;return(0,u.A)(function*(){var a;(0,W.dq)({params:{userid:null===(a=n.user)||void 0===a?void 0:a.userid,topic_id:n.filter.topic_id,category_id:n.filter.category_id,template_id:n.filter.template_id,sortfield:n.paging.sortfield,sorttype:n.paging.sorttype,page:n.paging.page,limit:n.paging.limit},callback:l=>{n.boards=n.boards.concat(null!=l?l:[]),(!(null!=l&&l.length)||(null==l?void 0:l.length)<n.paging.limit)&&(n.paging.active=!1),e&&e()}})})()}loadBoard(e){var n=this;return(0,u.A)(function*(){var a,l;(0,W.qU)({loadingController:n.loadingController,params:{userid:null===(a=n.user)||void 0===a?void 0:a.userid,board_id:n.board_id},callback:d=>{var s,p,m,g;null!=d&&d.board_id?(n.board=d,n.board.tag_arrs=null===(s=n.board.tags||null)||void 0===s?void 0:s.split(";"),e&&e(),d&&(0,K.Kd)(n.titleService,n.metaService,{title:d.board_title,description:(0,it.YW)(d.board_description),image:{url:`${n.appsettings.readfileuploadurl}${n.appsettings.boardpath}${d.board_id}/cover.svg`,type:"image/svg",width:d.size_width,height:d.size_height,alt:d.board_title},url:`${S.c.url}/${R._.VIEWER_ID.replace(":id",null!==(m=null===(g=d.board_id)||void 0===g?void 0:g.toString())&&void 0!==m?m:"")}`}),(0,Y.U5)({params:{userid:null===(p=n.user)||void 0===p?void 0:p.userid,board_id:n.board_id},callback:v=>{var b;let C;if(v&&!v.modules?C=(0,h.vmR)(v):"icdtV2"==(null==v?void 0:v.modules)&&(C=v),C)return h.JRt.data=C,h.JRt.changeSlide=(T,M,O,D,x)=>{var E,f,k,y;n.slideIdx=O,n.slideTotal=D,n.slide=x;let j=(0,h.zOM)((null!==(E=null==x||null===(f=x.svg)||void 0===f?void 0:f.viewBox.height)&&void 0!==E?E:1)/(null!==(k=null==x||null===(y=x.svg)||void 0===y?void 0:y.viewBox.width)&&void 0!==k?k:1)*100,100);n.svgRatio!=j&&(n.svgRatio=j)},n.slideTotal=h.JRt.slideTotal,n.renderSlide(),void(0,nt.U2)(C.fonts||[]);(0,Y.rH)({params:{userid:null===(b=n.user)||void 0===b?void 0:b.userid,board_id:n.board_id},callback:T=>{if(T){let M=(0,h.vmR)(T);h.JRt.data=M,h.JRt.changeSlide=(O,D,x,E,f)=>{var k,y,j,w;n.slideIdx=x,n.slideTotal=E,n.slide=f;let $=(0,h.zOM)((null!==(k=null==f||null===(y=f.svg)||void 0===y?void 0:y.viewBox.height)&&void 0!==k?k:1)/(null!==(j=null==f||null===(w=f.svg)||void 0===w?void 0:w.viewBox.width)&&void 0!==j?j:1)*100,100);n.svgRatio!=$&&(n.svgRatio=$)},n.slideTotal=h.JRt.slideTotal,n.renderSlide(),(0,nt.U2)(M.fonts||[])}}})}})):n.navigateToHome()}}),(0,Y.BS)({params:{board_id:n.board_id,userid:null===(l=n.user)||void 0===l?void 0:l.userid},callback:d=>{n.settings=d||{buttons:{paging:!0}}}})})()}switchBoard(e){var n=this;return(0,u.A)(function*(){n.board_id=null!=e?e:0,n.router.navigate([],{relativeTo:n.activatedRoute,queryParams:{b:n.board_id,n:null},queryParamsHandling:"merge",replaceUrl:!0}),n.loadBoard()})()}toggleLike(e){var n=this;return(0,u.A)(function*(){n.board&&(n.board.isliked=!n.board.isliked)})()}navigateByUrl(e){this.router.navigateByUrl(e)}navigateToHome(){var e=this;return(0,u.A)(function*(){(yield(0,tt.lJ)())?e.navigateByUrl(R._.DASHBOARD):e.navigateByUrl(R._.LANDING_PAGE)})()}navigateToEditor(e){return(0,u.A)(function*(){window.location.href=e})()}renderSlide(){h.JRt.runSlide(this.slideIdx)}presentModalBoardShare(e){var n=this;return(0,u.A)(function*(){var a;(yield n.modalController.create({component:ft.q,componentProps:{b:null===(a=n.board)||void 0===a?void 0:a.board_id},mode:"md",cssClass:"ion-modal",backdropDismiss:!0,keyboardClose:!0})).present()})()}presentModalBoardCustomizeTemplate(e,n){var a=this;return(0,u.A)(function*(){const l=yield a.modalController.create({component:bt,componentProps:{b:n},mode:"md",cssClass:"ion-modal-lg",backdropDismiss:!1,keyboardClose:!0});l.onDidDismiss().then(d=>{"confirm"==d.role&&d.data&&a.navigateToEditor(R._.EDITOR+`?b=${d.data.id}`)}),l.present()})()}}return(o=r).\u0275fac=function(e){return new(e||o)(t.rXU(L.hE),t.rXU(L.W8),t.rXU(V.Ix),t.rXU(V.nX),t.rXU(c.K_),t.rXU(c.W3),t.rXU(c.Xi))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-viewer-board"]],inputs:{appsettings:"appsettings",user:"user",board_id:"board_id",num:"num"},decls:1,vars:1,consts:[[1,"bg-cover","pb-5"],[1,"container","pt-3","pt-xxl-5","pb-5"],[1,"row","align-items-stretch"],[1,"col-12","col-lg-8","info"],[1,"mt-0","mb-2","mb-xxl-3"],[1,"d-flex","align-items-center","justify-content-between","mt-0","mb-2","mb-xxl-4"],[1,"flex-grow-1","mr-3","text-nowrap"],[1,"min-w-24"],["onerror","errorAvatar(this)",3,"src"],[1,"d-block","d-md-flex","flex-nowrap","align-items-center","text-ellipsis"],[1,"col-12","col-lg-8","mb-3"],[1,"position-relative","w-0","h-0","content"],["id","sieunhangaoo"],[1,"position-absolute","top-0","left-0","right-0","bottom-0"],["id","mainContainer",1,"svg-box"],["id","mainSvg","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"viewer"],[1,"position-absolute","left-0","right-0","bottom-0"],[1,"group-action"],[1,"group-action-paging"],[1,"col-12","col-lg-4","mb-3","playlist"],[1,"d-flex","flex-column","w-100","h-100"],[1,"d-flex","w-100","mb-3"],[1,"col","pl-0"],["mode","ios","expand","block"],[1,"col-auto","px-0"],["mode","ios","color","light",1,"mr-3",3,"title"],["mode","ios","color","light",3,"click"],[3,"src"],[1,"flex-grow-1","board-related-ion-content","d-none","d-lg-block"],["mode","ios",3,"class"],[3,"ionInfinite",4,"ngIf"],[1,"flex-grow-1","board-related","d-block","d-lg-none"],[1,"container","introduce","mb-4",2,"margin-top","-3rem"],[1,"container","introduce","mb-4"],[1,"text-ellipsis","d-flex","align-items-center","mr-2",3,"title"],["src","../../../assets/icon-svg/dashboard/topic.svg",1,"fs-20"],[1,"fs-12","text-ellipsis"],["src","../../../assets/icon-svg/dashboard/category.svg",1,"fs-20"],["src","../../../assets/icon-svg/dashboard/template.svg",1,"fs-20"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"click","disabled"],["src","../../../assets/icon-png/Back.png"],["src","../../../assets/icon-png/Next.png"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"click"],["src","../../../assets/images/viewer/RefreshButton_normal.png"],["fill","clear",1,"ion-no-margin","ion-no-padding"],["src","../../../assets/images/viewer/ExitFullButton_active.png"],["src","../../../assets/images/viewer/FullButton_normal.png"],["mode","ios","expand","block",3,"click"],["mode","ios","expand","block",3,"click","disabled"],["mode","ios","color","light",1,"mr-3",3,"click","title"],["name","share-social-outline"],["mode","ios",3,"click"],[3,"name"],[3,"ionInfinite"],[1,"mb-4"],[1,"row"],[3,"innerHTML"],[1,"text-muted"],[1,"col-12","col-lg-4","mb-3"],[1,"alert","mb-0",3,"innerHTML"],[1,"d-flex","flex-wrap"],[1,"text-ellipsis","d-flex","align-items-center","mr-3","mb-3",3,"title"],["src","../../../assets/icon-svg/dashboard/tag.svg",1,"fs-20"],[1,"fs-14","text-ellipsis"]],template:function(e,n){1&e&&t.DNE(0,St,47,15),2&e&&t.vxM(0,n.board?0:-1)},dependencies:[I.bT,c.mC,c.Jm,c.ZB,c.W9,c.iq,c.KW,c.Ax,c.Hp,c.he,J.D9],styles:[".bg-contain[_ngcontent-%COMP%]{background-image:url(bg.33cb60bd32718d53.svg);background-repeat:no-repeat;background-position:top center;background-size:contain}.bg-cover[_ngcontent-%COMP%]{background-image:url(bg.33cb60bd32718d53.svg);background-repeat:no-repeat;background-position:bottom center;background-size:cover}.info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:0;--background: transparent}.info[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}.content[_ngcontent-%COMP%]{border-radius:.75rem;overflow:hidden;box-shadow:4px 4px 12px #01010133}.nav-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;font-size:1.25rem}.nav-action[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] + a[_ngcontent-%COMP%]{margin-left:3rem}.introduce[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{border-radius:.75rem;background-color:#fff3b6;color:#000}.svg-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));display:flex;align-items:center;justify-content:center}.svg-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;margin:auto;background:#fff}.group-action[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:1rem;line-height:0;-webkit-user-select:none;user-select:none}.group-action[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap}.group-action[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-left:1rem}.group-action[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:0 1rem;vertical-align:middle;font-size:18px;color:#fab11d}.group-action[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{vertical-align:middle;width:34px;height:34px}.group-action[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:34px}.playlist[_ngcontent-%COMP%]   .board-related-ion-content[_ngcontent-%COMP%]{min-height:250px}.playlist[_ngcontent-%COMP%]   .board-related-ion-content[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--ion-background-color: transparent}.playlist[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius: .5rem;--padding-top: 0;--padding-bottom: 0;--padding-start: .75rem;--padding-end: .75rem;margin:0}.playlist[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([color]){--color: var(--ion-color-linear-contrast);--background: var(--ion-color-linear);--background-activated: var(--ion-color-linear-shade);--background-focused: var(--ion-color-linear-shade);--background-hover: var(--ion-color-linear-tint)}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.5rem;padding:.75rem 1.25rem;--background: transparent;--color: var(--ion-color-medium);-webkit-user-select:none;user-select:none}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.75rem;--color: var(--ion-color-medium-tint)}.playlist[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:hover{--background: rgba(var(--ion-text-color-rgb), .1)}.playlist[_ngcontent-%COMP%]   ion-chip.active[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-secondary-rgb), .4);--color: var(--ion-text-color);font-weight:500}.playlist[_ngcontent-%COMP%]   ion-chip.active[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}"]}),r})();var Ut=_(4569),Yt=_(1632),Jt=_(5178),Lt=_(2527),ot=_.n(Lt),Q=_(5781),at=_(7868),Ht=_(4835),rt=_(1951),z=_(1400),P=_(1607),Wt=_(2706);const Kt=["canvas"];function Qt(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-button",9),t.nI1(1,"translate"),t.bIt("click",function(n){t.eBV(i);const a=t.XpG(2);return t.Njj(a.presentModalAiImage(n))}),t.nrm(2,"ion-icon",10),t.k0s()}2&o&&t.Y8G("title",t.bMT(1,1,"CreatedWithAI"))}function Zt(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-button",9),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(i);const n=t.XpG(2);return t.Njj(n.AI_recommend(n.v_functionlimit.GenAITaoHinhAnh))}),t.nrm(2,"ion-icon",10),t.k0s()}2&o&&t.Y8G("title",t.bMT(1,1,"CreatedWithAI"))}function qt(o,r){if(1&o&&t.DNE(0,Qt,3,3,"ion-button",8)(1,Zt,3,3),2&o){const i=t.XpG();t.vxM(0,i.membership.GenAITaoHinhAnh?0:1)}}function te(o,r){if(1&o){const i=t.RV6();t.j41(0,"li",13)(1,"ion-card",14),t.bIt("click",function(){const n=t.eBV(i).$implicit,a=t.XpG(2);return t.Njj(a.switchMedia(n.media_id))}),t.nrm(2,"ion-img",15),t.j41(3,"ion-card-content")(4,"div",16),t.EFF(5),t.k0s()()(),t.j41(6,"div",17),t.EFF(7),t.k0s()()}if(2&o){let i;const e=r.$implicit,n=t.XpG(2);t.R7$(2),t.Y8G("src",e.cover?n.readfileuploadurl+e.cover:"assets/image/media/image.svg")("alt",e.media_title)("title",e.media_title),t.R7$(2),t.Y8G("title",e.media_title),t.R7$(),t.JRh(null!==(i=null!==(i=null!==(i=e.media_title)&&void 0!==i?i:e.v_osstype_title)&&void 0!==i?i:e.v_mediatype_title)&&void 0!==i?i:""),t.R7$(2),t.JRh(e.v_mediatype_title)}}function ee(o,r){if(1&o&&(t.j41(0,"div",7)(1,"div",11),t.EFF(2,"T\xecm th\u1ea5y "),t.j41(3,"b"),t.EFF(4),t.k0s(),t.EFF(5,' m\u1ee5c v\u1edbi t\u1eeb kh\xf3a "'),t.j41(6,"b"),t.EFF(7),t.k0s(),t.EFF(8,'"'),t.k0s(),t.j41(9,"ul",12),t.Z7z(10,te,8,6,"li",13,t.fX1),t.k0s()()),2&o){let i;const e=t.XpG();t.R7$(4),t.JRh((null!==(i=e.medias[0].total)&&void 0!==i?i:0)<=99?e.medias[0].total:"99+"),t.R7$(3),t.JRh(e.filter.search),t.R7$(3),t.Dyx(e.medias)}}function ne(o,r){if(1&o&&t.nrm(0,"img",43),2&o){const i=t.XpG(3);t.Y8G("src",i.viewOptions.url,t.B4B)("alt",i.media.media_title)}}function ie(o,r){if(1&o&&(t.j41(0,"div",41),t.DNE(1,ne,1,2,"img",42),t.k0s()),2&o){const i=t.XpG(2);t.BMQ("style",i.media.bigcover?"--bg-img:url("+i.readfileuploadurl+i.media.bigcover+")":"",t.$dS),t.R7$(),t.Y8G("ngIf",i.viewOptions.url)}}function oe(o,r){if(1&o&&(t.j41(0,"div",41),t.nrm(1,"canvas",null,0),t.k0s()),2&o){const i=t.XpG(2);t.BMQ("style",i.media.bigcover?"--bg-img:url("+i.readfileuploadurl+i.media.bigcover+")":"",t.$dS)}}function ae(o,r){if(1&o){const i=t.RV6();t.j41(0,"iframe",46),t.nI1(1,"safe"),t.bIt("load",function(n){t.eBV(i);const a=t.XpG(3);return t.Njj(a.loadIframe(n))}),t.k0s()}if(2&o){const i=t.XpG(3);t.Y8G("src",t.i5U(1,1,i.viewOptions.url,"resourceUrl"),t.f$h)}}function re(o,r){if(1&o&&(t.j41(0,"div",44),t.DNE(1,ae,2,4,"iframe",45),t.k0s()),2&o){const i=t.XpG(2);t.BMQ("style",i.media.bigcover?"--bg-img:url("+i.readfileuploadurl+i.media.bigcover+")":"",t.$dS),t.R7$(),t.Y8G("ngIf",i.viewOptions.url)}}function le(o,r){1&o&&(t.j41(0,"div",47),t.nrm(1,"ion-spinner",48),t.k0s())}function de(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-button",52),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(i);const n=t.XpG(3);return t.Njj(n.downloadMedia())}),t.nrm(2,"ion-icon",53),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()}2&o&&(t.Y8G("title",t.bMT(1,2,"Download")),t.R7$(4),t.JRh(t.bMT(5,4,"Download")))}function se(o,r){1&o&&(t.j41(0,"ion-button",54),t.nrm(1,"ion-icon",55),t.j41(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&o&&(t.Y8G("disabled",!0),t.R7$(3),t.JRh(t.bMT(4,2,"Download")))}function ce(o,r){if(1&o){const i=t.RV6();t.DNE(0,de,6,6,"ion-button",49)(1,se,5,4),t.j41(2,"ion-button",50),t.nI1(3,"translate"),t.bIt("click",function(n){t.eBV(i);const a=t.XpG(2);return t.Njj(a.presentModalMediaShare(n))}),t.nrm(4,"ion-icon",51),t.k0s()}if(2&o){const i=t.XpG(2);t.vxM(0,i.media.isdownload?0:1),t.R7$(2),t.Y8G("title",t.bMT(3,2,"Share"))}}function me(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-button",52),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(i);const n=t.XpG(3);return t.Njj(n.downloadMedia())}),t.nrm(2,"ion-icon",53),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()}2&o&&(t.Y8G("title",t.bMT(1,2,"Download")),t.R7$(4),t.JRh(t.bMT(5,4,"Download")))}function _e(o,r){if(1&o){const i=t.RV6();t.j41(0,"div",57)(1,"div",58),t.nrm(2,"ion-icon",59),t.j41(3,"b",60),t.EFF(4,"Tabca Pro"),t.k0s()(),t.j41(5,"div",61),t.EFF(6,"N\xe2ng c\u1ea5p t\xe0i kho\u1ea3n Pro \u0111\u1ec3 t\u1ea3i v\u1ec1 v\xe0 t\u1ea1o h\xecnh \u1ea3nh b\u1eb1ng AI."),t.k0s(),t.j41(7,"ion-button",62),t.nI1(8,"translate"),t.bIt("click",function(){t.eBV(i);const n=t.XpG(3);return t.Njj(n.AI_recommend(n.v_functionlimit.TaiVeCacHocLieuHeThongCungCap))}),t.j41(9,"ion-label"),t.EFF(10),t.nI1(11,"translate"),t.k0s()()()}2&o&&(t.R7$(7),t.Y8G("title",t.bMT(8,2,"UpgradeTabcaProNow")),t.R7$(3),t.JRh(t.bMT(11,4,"Upgrade")))}function pe(o,r){1&o&&(t.j41(0,"ion-button",54),t.nrm(1,"ion-icon",55),t.j41(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()()),2&o&&(t.Y8G("disabled",!0),t.R7$(3),t.JRh(t.bMT(4,2,"Download")))}function ue(o,r){if(1&o&&(t.DNE(0,me,6,6,"ion-button",49)(1,_e,12,6)(2,pe,5,4),t.j41(3,"ion-button",56),t.nI1(4,"translate"),t.nrm(5,"ion-icon",51),t.k0s()),2&o){const i=t.XpG(2);t.vxM(0,i.media.isdownload&&i.media.ispublic&&i.membership.TaiVeCacHocLieuHeThongCungCap?0:i.media.isdownload&&i.media.ispublic&&!i.membership.TaiVeCacHocLieuHeThongCungCap?1:2),t.R7$(3),t.Y8G("title",t.bMT(4,3,"Share"))("disabled",!0)}}function ge(o,r){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o){const i=t.XpG(2);t.R7$(),t.E5c("",t.bMT(2,3,"Size"),": ",i.media.width," x ",i.media.height," px")}}function ve(o,r){if(1&o&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o){const i=t.XpG(2);t.R7$(),t.Lme("",t.bMT(2,2,"MediaType"),": ",i.media.ext,"")}}function he(o,r){if(1&o&&(t.j41(0,"div",37),t.nrm(1,"ion-icon",63),t.j41(2,"span",64),t.EFF(3),t.k0s()()),2&o){const i=t.XpG(2);t.Y8G("title",i.media.topic_titles),t.R7$(3),t.JRh(i.media.topic_titles.split(";").reverse().join(" / "))}}function be(o,r){if(1&o&&(t.j41(0,"div",37),t.nrm(1,"ion-icon",65),t.j41(2,"span",64),t.EFF(3),t.k0s()()),2&o){const i=t.XpG(2);t.Y8G("title",i.media.category_titles),t.R7$(3),t.JRh(i.media.category_titles.split(";").reverse().join(" / "))}}function fe(o,r){if(1&o&&(t.j41(0,"div",37),t.nrm(1,"ion-icon",66),t.j41(2,"span",64),t.EFF(3),t.k0s()()),2&o){const i=t.XpG(2);t.Y8G("title",i.media.directory_titles),t.R7$(3),t.JRh(i.media.directory_titles.split(";").reverse().join(" / "))}}function Ce(o,r){if(1&o&&(t.j41(0,"ion-button",69),t.nrm(1,"ion-icon",70),t.j41(2,"ion-label",71),t.EFF(3),t.k0s()()),2&o){const i=r.$implicit;t.Y8G("title",i),t.R7$(3),t.JRh(i)}}function Me(o,r){if(1&o&&(t.j41(0,"ion-button",69),t.nrm(1,"ion-icon",72),t.j41(2,"ion-label",71),t.EFF(3),t.k0s()()),2&o){const i=r.$implicit;t.Y8G("title",i),t.R7$(3),t.JRh(i)}}function xe(o,r){if(1&o&&(t.j41(0,"ion-button",69),t.nrm(1,"ion-icon",73),t.j41(2,"ion-label",71),t.EFF(3),t.k0s()()),2&o){const i=r.$implicit;t.Y8G("title",i),t.R7$(3),t.JRh(i)}}function ke(o,r){if(1&o&&(t.j41(0,"ion-button",69),t.nrm(1,"ion-icon",74),t.j41(2,"ion-label",71),t.EFF(3),t.k0s()()),2&o){const i=r.$implicit;t.Y8G("title",i),t.R7$(3),t.JRh(i)}}function we(o,r){if(1&o&&(t.j41(0,"div",39)(1,"h5",67),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",30)(5,"div",31)(6,"div",68),t.Z7z(7,Ce,4,2,"ion-button",69,t.fX1),t.Z7z(9,Me,4,2,"ion-button",69,t.fX1),t.Z7z(11,xe,4,2,"ion-button",69,t.fX1),t.Z7z(13,ke,4,2,"ion-button",69,t.fX1),t.k0s()()()()),2&o){let i,e,n;const a=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,1,"Tag")),t.R7$(5),t.Dyx(null==a.media.tags?null:a.media.tags.split(";")),t.R7$(2),t.Dyx(null==a.media.topic_titles||null==(i=a.media.topic_titles.split(";"))?null:i.reverse()),t.R7$(2),t.Dyx(null==a.media.category_titles||null==(e=a.media.category_titles.split(";"))?null:e.reverse()),t.R7$(2),t.Dyx(null==a.media.directory_titles||null==(n=a.media.directory_titles.split(";"))?null:n.reverse())}}function Pe(o,r){if(1&o){const i=t.RV6();t.j41(0,"div",75)(1,"ion-item",76),t.bIt("click",function(){const n=t.eBV(i).$implicit,a=t.XpG(3);return t.Njj(a.switchMedia(n.media_id))}),t.j41(2,"ion-thumbnail"),t.nrm(3,"img",43),t.k0s()(),t.nrm(4,"a",77),t.k0s()}if(2&o){let i;const e=r.$implicit,n=t.XpG(3);t.R7$(3),t.Y8G("src",e.cover?n.readfileuploadurl+e.cover:"assets/image/media/image.svg",t.B4B)("alt",e.media_title),t.R7$(),t.Y8G("href",n.siteurl+"/"+n.APP_ROUTE.VIEWER_ID.replace(":id",null!==(i=null==n.media.media_id?null:n.media.media_id.toString())&&void 0!==i?i:""),t.B4B)("title",e.media_title)}}function ye(o,r){if(1&o&&(t.j41(0,"div",40)(1,"h5",67),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",68),t.Z7z(5,Pe,5,4,"div",75,t.fX1),t.k0s()()),2&o){const i=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,1,"MediaRelated")),t.R7$(3),t.Dyx(i.medias_related)}}function Re(o,r){if(1&o){const i=t.RV6();t.j41(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"div",22),t.DNE(5,ie,2,2)(6,oe,3,1)(7,re,2,2)(8,le,2,0),t.k0s()()(),t.j41(9,"div",23)(10,"div",24),t.DNE(11,ce,5,4,"ion-button",25)(12,ue,6,5),t.j41(13,"ion-button",26),t.nI1(14,"translate"),t.bIt("click",function(n){t.eBV(i);const a=t.XpG();return t.Njj(a.toggleBookmark(n))}),t.nrm(15,"ion-icon",27),t.k0s()(),t.j41(16,"div",28),t.DNE(17,ge,3,5,"p")(18,ve,3,4,"p"),t.j41(19,"p"),t.EFF(20),t.nI1(21,"translate"),t.nI1(22,"translate"),t.k0s()()()()(),t.j41(23,"div",29)(24,"div",30)(25,"div",31)(26,"div",32)(27,"div",33)(28,"ion-chip")(29,"ion-avatar",34),t.nrm(30,"img",35),t.k0s(),t.j41(31,"ion-label"),t.EFF(32),t.k0s()()(),t.j41(33,"div",36),t.DNE(34,he,4,2,"div",37)(35,be,4,2)(36,fe,4,2),t.k0s()(),t.j41(37,"h2",38),t.EFF(38),t.k0s()()()(),t.DNE(39,we,15,3,"div",39)(40,ye,7,3,"div",40)}if(2&o){let i;const e=t.XpG();t.R7$(3),t.BMQ("style","padding-bottom:"+e.viewOptions.ratio+"%",t.$dS),t.R7$(2),t.vxM(5,"img"===(i=e.viewOptions.type)?5:"canvas"===i?6:"iframe"===i?7:8),t.R7$(6),t.vxM(11,e.media.isowner?11:12),t.R7$(2),t.Y8G("color",e.media.isbookmark?"tertiary":"dark")("fill",e.media.isbookmark?"solid":"outline")("title",t.bMT(14,17,"Bookmark"))("disabled",!(null!=e.user&&e.user.userid)),t.R7$(4),t.vxM(17,e.media.width&&e.media.height?17:-1),t.R7$(),t.vxM(18,e.media.ext?18:-1),t.R7$(2),t.Lme("",t.bMT(21,19,"Use"),": ",e.media.ispublic?"Tabca Pro":t.bMT(22,21,"Private"),""),t.R7$(10),t.Y8G("src",e.media.createdby_avatar?e.readfileuploadurl+e.media.createdby_avatar:"assets/image/user-avatar-default.png",t.B4B),t.R7$(2),t.JRh(e.media.createdby_name),t.R7$(2),t.vxM(34,e.media.topic_titles?34:e.media.category_titles?35:e.media.directory_titles?36:-1),t.R7$(4),t.JRh(e.media.media_title),t.R7$(),t.vxM(39,e.media.tags||e.media.topic_titles||e.media.category_titles||e.media.directory_titles?39:-1),t.R7$(),t.vxM(40,e.medias_related.length?40:-1)}}let Te=(()=>{var o;class r{constructor(e,n,a,l,d,s,p){this.titleService=e,this.metaService=n,this.router=a,this.activatedRoute=l,this.toastController=d,this.modalController=s,this.loadingController=p,this.appsettings={},this.user={},this.APP_ROUTE=R._,this.APP_FUNC_FormatDate=K.Rv,this.v_functionlimit=z.r,this.envUI_Config=S.c.ui_config,this.siteurl=S.c.url,this.readfileuploadurl="",this.membership={},this.medias_related=[],this.filter={},this.paging={page:1,limit:50,active:!0},this.medias=[],this.viewOptions={ratio:66.67}}ngOnInit(){var e,n;this.readfileuploadurl=null!==(e=this.appsettings.readfileuploadurl)&&void 0!==e?e:"",null!==(n=this.user)&&void 0!==n&&n.userid?Promise.all([new Promise((a,l)=>{var d;(0,at.EW)({params:{userid:null===(d=this.user)||void 0===d?void 0:d.userid,v_functionlimit:z.r.GenAITaoHinhAnh},callback:s=>{var p;this.membership.GenAITaoHinhAnh=(0,rt.j)(null==s||null===(p=s.contents)||void 0===p?void 0:p.find(m=>m.v_functionlimit==z.r.GenAITaoHinhAnh)),a(s)}})}),new Promise((a,l)=>{var d;(0,at.EW)({params:{userid:null===(d=this.user)||void 0===d?void 0:d.userid,v_functionlimit:z.r.TaiVeCacHocLieuHeThongCungCap},callback:s=>{var p;this.membership.TaiVeCacHocLieuHeThongCungCap=(0,rt.j)(null==s||null===(p=s.contents)||void 0===p?void 0:p.find(m=>m.v_functionlimit==z.r.TaiVeCacHocLieuHeThongCungCap)),a(s)}})})]).then(()=>{this.loadMedia(()=>{this.loadMedia_Related()})}):this.loadMedia()}searchChange(e){var n;this.filter.search=null===(n=e.target.value)||void 0===n?void 0:n.replace(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\_\=\+\[\{\]\}\\\|\;\:\'\,\<\.\>\/\?]+/g," ").replace(/\s+/g," ").trim(),this.refreshData()}filterChange(){this.refreshData()}refreshData(e){this.filter.search?(this.paging.page=1,this.paging.active=!0,this.loadData_Paging(e)):this.closeSearch()}loadMore(e){this.paging.page+=1,this.loadData_Paging(e)}pushData(e){return 1==this.paging.page&&(this.medias.length=0),this.medias=this.medias.concat(e),this.medias}loadData_Paging(e){var n;(0,Q.br)({loadingController:1==this.paging.page?this.loadingController:void 0,params:{userid:null===(n=this.user)||void 0===n?void 0:n.userid,getfrom:1,media_title:this.filter.search,v_mediatypes:[P.S.IMAGE,P.S.IMAGE_ANIMATION,P.S.PHET,P.S.HTML,P.S.SCORM].join(","),topic_id:this.filter.topic_id,sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:this.paging.page,limit:this.paging.limit},callback:a=>{this.pushData(a||[]).length<this.paging.limit*this.paging.page&&(this.paging.active=!1),e&&e()}})}loadMedia(e){var n;(0,Q.e6)({loadingController:this.loadingController,params:{getby:null===(n=this.user)||void 0===n?void 0:n.userid,media_id:this.media_id},callback:a=>{var l,d,s,p,m,g,v,b,C,T,M,O,D,x;a&&a.media_id?(this.media=a||{},(0,K.Kd)(this.titleService,this.metaService,{title:this.media.media_title,description:(0,it.YW)(this.media.media_description),keywords:null===(l=this.media.tags)||void 0===l?void 0:l.replace(/\;/g,", "),image:{url:`${this.appsettings.readfileuploadurl}${this.media.bigcover}`,type:"image/jpge",width:800,height:800,alt:this.media.media_title},url:`${S.c.url}/${R._.MEDIA_VIEWER_ID.replace(":id",null!==(d=null===(s=this.media.media_id)||void 0===s?void 0:s.toString())&&void 0!==d?d:"")}`,author:{name:this.media.createdby_name,email:S.c.author.email},updated:null!==(p=this.media.modifieddate)&&void 0!==p?p:this.media.createddate}),this.media.isdownload=!(this.media.v_mediatype==P.S.LINK||!this.media.filepath),null!==(m=this.media)&&void 0!==m&&null!==(m=m.filepath)&&void 0!==m&&m.match(/.lvm$/)?(0,Jt.Q)(`${this.appsettings.readfileuploadurl}${null===(g=this.media)||void 0===g?void 0:g.filepath}`).then(E=>{let{ext:f,file:k}=E;switch(f){case"gif":case"apng":this.viewOptions.type="img",this.viewOptions.file=k,this.viewOptions.url=URL.createObjectURL(k);break;case"avif":case"jpg":case"jpe":case"jpeg":case"jif":case"jfif":case"pjp":case"pjpeg":case"png":case"ico":case"cur":case"tif":case"tiff":case"bmp":case"webp":case"svg":{this.viewOptions.type="canvas",this.viewOptions.file=k;let y=new FileReader;y.onload=j=>{let w=new Image;w.onload=()=>{var $;let B=w.width||1,G=w.height||1;if("svg"==f){let A=B/G;A>=1?(B=Math.max(B,800),G=B/A):(G=Math.max(G,800),B=G*A)}let X=null===($=this.canvas)||void 0===$?void 0:$.nativeElement;if(X){X.width=B,X.height=G,X.style.maxWidth="100%",X.style.maxHeight="100%";let A=X.getContext("2d");A&&A.drawImage(w,0,0,B,G)}},w.onerror=()=>{(0,F.c)(this.toastController,{color:"danger",message:"Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c th\xf4ng tin \u1ea3nh!"}).then($=>$.present())},w.src=j.target.result},y.onerror=j=>{(0,F.c)(this.toastController,{color:"danger",message:"Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c t\u1eadp tin!"}).then(w=>w.present())},y.readAsDataURL(k);break}}}):(this.viewOptions.type="iframe",this.viewOptions.url=(0,h._KM)({readfileuploadurl:this.appsettings.readfileuploadurl,type:null===(v=this.media)||void 0===v?void 0:v.v_mediatype,oss:null===(b=this.media)||void 0===b?void 0:b.v_osstype,path:null!==(C=null===(T=this.media)||void 0===T?void 0:T.filepath_extract)&&void 0!==C?C:null===(M=this.media)||void 0===M?void 0:M.filepath,url:null!==(O=null===(D=this.media)||void 0===D?void 0:D.link_file)&&void 0!==O?O:null===(x=this.media)||void 0===x?void 0:x.link_share})),e&&e()):this.router.navigateByUrl(R._.LANDING_PAGE)}})}loadMedia_Related(){var e;this.media&&(0,Q.br)({params:Object.assign({getby:null===(e=this.user)||void 0===e?void 0:e.userid,getfrom:1,v_mediatypes:[P.S.IMAGE,P.S.IMAGE_ANIMATION,P.S.PHET,P.S.HTML,P.S.SCORM].join(","),sortfield:this.paging.sortfield,sorttype:this.paging.sorttype,page:1,limit:100},this.media.tags?{tags:this.media.tags}:this.media.directory_id?{directory_id:this.media.directory_id}:this.media.topic_id?{topic_id:this.media.topic_id}:this.media.category_id?{category_id:this.media.category_id}:{}),callback:n=>{this.medias_related=n||[]}})}closeSearch(){this.filter={},this.medias.length=0}toggleBookmark(e){var n=this;return(0,u.A)(function*(){n.media&&(n.media.isbookmark=!n.media.isbookmark)})()}navigateByUrl(e){e&&this.router.navigateByUrl(e)}switchMedia(e){var n=this;return(0,u.A)(function*(){e&&(n.media_id=e,n.router.navigate([],{relativeTo:n.activatedRoute,queryParams:{m:e},queryParamsHandling:"merge",replaceUrl:!0}),n.loadMedia(()=>{var a;n.closeSearch(),null===(a=n.inherits)||void 0===a||null===(a=a.parentContent)||void 0===a||a.scrollToTop(500)}))})()}downloadMedia(){var e=this;return(0,u.A)(function*(){var n,a,l;null!==(n=e.media)&&void 0!==n&&n.isdownload&&(["img","canvas"].includes(null!==(a=e.viewOptions.type)&&void 0!==a?a:"")&&e.viewOptions.file?ot()(e.viewOptions.file,e.media.media_title+"."+e.viewOptions.file.name.split(".").pop(),e.viewOptions.file.type):null!==(l=e.media)&&void 0!==l&&l.filepath&&ot()(`${e.appsettings.readfileuploadurl}${e.media.filepath}`))})()}AI_recommend(e){var n=this;return(0,u.A)(function*(){(0,Ht.QB)(n.modalController,e)})()}loadIframe(e){this.iframe=e.target}presentModalAiImage(e){var n=this;return(0,u.A)(function*(){const a=yield n.modalController.create({component:Ut.K,mode:"md",cssClass:"ion-modal-lg modal-vip",backdropDismiss:!1,keyboardClose:!1});a.onDidDismiss().then(l=>{"confirm"==l.role&&n.switchMedia(l.data)}),a.present()})()}presentModalMediaShare(e){var n=this;return(0,u.A)(function*(){var a;(yield n.modalController.create({component:Yt.U,componentProps:{media_id:null===(a=n.media)||void 0===a?void 0:a.media_id},mode:"md",cssClass:"ion-modal",backdropDismiss:!0,keyboardClose:!0})).present()})()}}return(o=r).\u0275fac=function(e){return new(e||o)(t.rXU(L.hE),t.rXU(L.W8),t.rXU(V.Ix),t.rXU(V.nX),t.rXU(c.K_),t.rXU(c.W3),t.rXU(c.Xi))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-viewer-media"]],viewQuery:function(e,n){if(1&e&&t.GBs(Kt,5),2&e){let a;t.mGM(a=t.lsd())&&(n.canvas=a.first)}},inputs:{appsettings:"appsettings",user:"user",media_id:"media_id",inherits:"inherits"},decls:10,vars:4,consts:[["canvas",""],[1,"container","pt-2","mt-4","mb-5","max-w-800"],[1,"mt-0","mb-3","fw-500","text-center"],[1,"d-flex","align-items-center","searchbox"],["name","search-outline",1,"fs-24","ml-3"],[1,"flex-grow-1"],["mode","ios","placeholder","Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm","search-icon"," ",2,"padding","0",3,"ionChange","debounce","value"],[1,"container","mb-4","list-media"],["mode","ios","color","tabca-pro",1,"m-1","btn-ai-image",3,"title"],["mode","ios","color","tabca-pro",1,"m-1","btn-ai-image",3,"click","title"],["src","../../../assets/icon-svg/magic-ai-2.svg",1,"fs-24"],[1,"mb-2","fs-14"],[1,"d-flex","flex-wrap","p-2","m-0"],[1,"position-relative","d-block","p-0","m-2"],[3,"click"],[3,"src","alt","title"],[1,"text-center","text-ellipsis",3,"title"],[1,"position-absolute","top-2","left-2","media-type"],[1,"container"],[1,"row","align-items-stretch"],[1,"col-12","col-lg-8","mb-4","media-view"],[1,"position-relative","w-0","h-0"],[1,"position-absolute","top-0","left-0","right-0","bottom-0"],[1,"col-12","col-lg-4","mb-4","media-info"],[1,"d-flex"],["mode","ios","color","dark","fill","outline",1,"btn-share","ml-3",3,"title"],["mode","ios",1,"btn-bookmark","ml-3",3,"click","color","fill","title","disabled"],["name","bookmark-outline"],[1,"mt-4"],[1,"container","mb-4","media-introduce"],[1,"row"],[1,"col-12","col-lg-8"],[1,"d-flex","align-items-center","justify-content-between"],[1,"flex-grow-1","text-nowrap"],[1,"min-w-24"],["onerror","errorAvatar(this)",3,"src"],[1,"d-block","d-md-flex","flex-nowrap","align-items-center","text-ellipsis"],[1,"text-ellipsis","d-flex","align-items-center","ml-3",3,"title"],[1,"mt-2","mb-0","fw-400"],[1,"container","mb-4","media-tag"],[1,"container","mb-4","media-related"],["oncontextmenu","return false",1,"view-box","img-box"],[3,"src","alt",4,"ngIf"],[3,"src","alt"],["oncontextmenu","return false",1,"view-box","iframe-box"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen","oncontextmenu","return false",3,"src","load",4,"ngIf"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen","oncontextmenu","return false",3,"load","src"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center","line-height-0"],["color","tertiary","name","bubbles"],["mode","ios","color","linear","expand","block",1,"flex-grow-1","btn-download",3,"title"],["mode","ios","color","dark","fill","outline",1,"btn-share","ml-3",3,"click","title"],["name","share-social-outline"],["mode","ios","color","linear","expand","block",1,"flex-grow-1","btn-download",3,"click","title"],["slot","start","src","../../../assets/icon/viewer/download.svg"],["mode","ios","expand","block",1,"flex-grow-1","btn-download",3,"disabled"],["slot","start","name","download-outline"],["mode","ios","color","dark","fill","outline",1,"btn-share","ml-3",3,"title","disabled"],[1,"rounded","border","p-4"],[1,"d-flex","align-items-center"],["src","../../../assets/image/tabca-pro-2.svg",1,"fs-22","icon-tabca-pro"],[1,"fw-700","fs-16","ml-3"],[1,"my-3"],["mode","ios","color","linear","expand","block",3,"click","title"],["src","../../../assets/icon-svg/dashboard/topic.svg",1,"fs-20"],[1,"fs-12","text-ellipsis"],["src","../../../assets/icon-svg/dashboard/category.svg",1,"fs-20"],["src","../../../assets/icon-svg/dashboard/template.svg",1,"fs-20"],[1,"mt-0","mb-2"],[1,"d-flex","flex-wrap"],["mode","ios","size","small","color","dark","fill","outline",1,"mt-0","ml-0","mr-2","mb-2",3,"title"],["slot","start","src","../../../assets/icon/viewer/tag.svg",1,"fs-20"],[1,"fs-14"],["slot","start","src","../../../assets/icon/viewer/topic.svg",1,"fs-20"],["slot","start","src","../../../assets/icon/viewer/category.svg",1,"fs-20"],["slot","start","src","../../../assets/icon/viewer/directory.svg",1,"fs-20"],[1,"mr-2","mb-2"],["lines","none","detail","false","button","true",3,"click"],[3,"href","title"]],template:function(e,n){1&e&&(t.j41(0,"div",1)(1,"h4",2),t.EFF(2,"T\xe0i nguy\xean h\u1ecdc t\u1eadp trong t\u1ea7m tay"),t.k0s(),t.j41(3,"div",3),t.nrm(4,"ion-icon",4),t.j41(5,"div",5)(6,"ion-searchbar",6),t.bIt("ionChange",function(l){return n.searchChange(l)}),t.k0s()(),t.DNE(7,qt,2,1),t.k0s()(),t.DNE(8,ee,12,2,"div",7)(9,Re,41,23)),2&e&&(t.R7$(6),t.Y8G("debounce",1e3)("value",n.filter.search),t.R7$(),t.vxM(7,n.envUI_Config.is_ai_image?7:-1),t.R7$(),t.vxM(8,n.medias.length?8:n.media?9:-1))},dependencies:[I.bT,c.mC,c.Jm,c.b_,c.I9,c.ZB,c.iq,c.KW,c.uz,c.he,c.S1,c.w2,c.Zx,c.Gw,Wt.m,J.D9],styles:['.searchbox[_ngcontent-%COMP%]{overflow:hidden;border-radius:.75rem;border:1px solid #8F9BB3;background:#fff}.searchbox[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{width:100%;height:40px;--background: transparent;--box-shadow: none}.searchbox[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:2.5rem}.searchbox[_ngcontent-%COMP%]   ion-button.btn-ai-image[_ngcontent-%COMP%]{width:2.5rem;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0}.searchbox[_ngcontent-%COMP%]   ion-button.btn-search[_ngcontent-%COMP%]{width:2.5rem;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0}.media-view[_ngcontent-%COMP%]   .view-box[style][_ngcontent-%COMP%]:not([style=""]){border-radius:.75rem;background:var(--ion-background-color);box-shadow:4px 4px 12px #0101011a}.media-view[_ngcontent-%COMP%]   .view-box[style][_ngcontent-%COMP%]:not([style=""]):before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;z-index:1;opacity:.16;background-image:var(--bg-img);background-repeat:no-repeat;background-position:center center;background-size:cover}.media-view[_ngcontent-%COMP%]   .view-box[style][_ngcontent-%COMP%]:not([style=""]) > *[_ngcontent-%COMP%]{position:relative;z-index:2}.media-view[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;line-height:0;overflow:hidden;border-radius:.75rem;box-shadow:0 0 0 1px #fff;display:flex;align-items:center;justify-content:center}.media-view[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .media-view[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{border-radius:.25rem;overflow:hidden;box-shadow:0 0 12px #0101011a}.media-view[_ngcontent-%COMP%]   .img-box[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;z-index:2147483647;background:transparent;-webkit-user-select:none;user-select:none}.media-view[_ngcontent-%COMP%]   .iframe-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;line-height:0;overflow:hidden;border-radius:.75rem;background:var(--ion-background-color);box-shadow:4px 4px 12px #01010133}.media-view[_ngcontent-%COMP%]   .iframe-box[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}.media-info[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}.media-info[_ngcontent-%COMP%]   ion-button[color=dark][_ngcontent-%COMP%]::part(native){border-color:var(--ion-color-medium-tint)}.media-info[_ngcontent-%COMP%]   .btn-download[_ngcontent-%COMP%]{min-width:3rem;height:3rem;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0}.media-info[_ngcontent-%COMP%]   .btn-share[_ngcontent-%COMP%], .media-info[_ngcontent-%COMP%]   .btn-bookmark[_ngcontent-%COMP%]{min-width:3rem;width:3rem;height:3rem;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0}.media-introduce[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:0;--background: transparent}.media-introduce[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}.media-tag[_ngcontent-%COMP%]   ion-button[color=dark][_ngcontent-%COMP%]::part(native){border-color:var(--ion-color-medium-tint)}.media-related[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0;--inner-padding-top: 0;--inner-padding-bottom: 0;--inner-padding-start: 0;--inner-padding-end: 0;--border-width: 1px;--border-color: var(--ion-color-medium-tint);--border-radius: .5rem}.media-related[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 9rem;--border-radius: .375rem;margin:0}.list-media[_ngcontent-%COMP%]{min-height:200px}.list-media[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{width:156px;margin:0;box-shadow:none}.list-media[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{width:156px;height:156px;padding:5px;border-radius:6px;object-fit:contain;overflow:hidden;border:1px solid #E7F0EF;background:#fff;cursor:pointer;transition:padding .3s ease-in-out}.list-media[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-img.svgedit[_ngcontent-%COMP%]{padding:45px}.list-media[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{position:relative}.list-media[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-img.audio[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:42px;height:42px;top:50%;left:50%;transform:translate(-50%,-50%);background-image:url(video-2.54e0cad43aa51646.svg);background-repeat:no-repeat;background-position:center center;background-size:cover}.list-media[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-img.video[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:42px;height:42px;top:50%;left:50%;transform:translate(-50%,-50%);background-image:url(video-2.54e0cad43aa51646.svg);background-repeat:no-repeat;background-position:center center;background-size:cover}.list-media[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-img.animation[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;width:42px;height:42px;top:50%;left:50%;transform:translate(-50%,-50%);background-image:url(video-2.54e0cad43aa51646.svg);background-repeat:no-repeat;background-position:center center;background-size:cover}.list-media[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]:hover   ion-img[_ngcontent-%COMP%]{padding:0}.list-media[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:0;color:#333}.list-media[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:24px;line-height:24px}.list-media[_ngcontent-%COMP%]   .media-type[_ngcontent-%COMP%]{display:none;padding:2px 4px;border-radius:6px;background:#33333380;color:#fff;text-align:center;font-size:13px;font-style:normal;text-transform:uppercase;font-weight:700;line-height:22px}.list-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.list-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .media-type[_ngcontent-%COMP%]{display:block}']}),r})();var Oe=_(7586),H=_.n(Oe);const lt=o=>({$implicit:o});function Ie(o,r){if(1&o&&t.eu8(0,12),2&o){const i=r.$implicit;t.XpG();const e=t.sdS(18);t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(2,lt,i))}}function Fe(o,r){if(1&o){const i=t.RV6();t.j41(0,"div",11)(1,"ion-button",13),t.bIt("click",function(){t.eBV(i);const n=t.XpG();return t.Njj(n.loadMore())}),t.j41(2,"ion-label"),t.EFF(3,"T\u1ea3i th\xeam b\xecnh lu\u1eadn"),t.k0s()()()}}function Ee(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-item-options",23)(1,"ion-item-option",24),t.bIt("click",function(n){t.eBV(i);const a=t.XpG(2).$implicit,l=t.XpG();return t.Njj(l.editComment(n,a.comment_id))}),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"ion-item-option",25),t.bIt("click",function(n){t.eBV(i);const a=t.XpG(2).$implicit,l=t.XpG();return t.Njj(l.deleteComment(n,a.comment_id))}),t.EFF(5),t.nI1(6,"translate"),t.k0s()()}2&o&&(t.R7$(2),t.JRh(t.bMT(3,2,"Edit")),t.R7$(3),t.JRh(t.bMT(6,4,"Delete")))}function Be(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-item-sliding")(1,"ion-item")(2,"ion-thumbnail",16),t.nrm(3,"img",17),t.k0s(),t.j41(4,"ion-label")(5,"div",18),t.EFF(6),t.nI1(7,"translate"),t.j41(8,"small"),t.EFF(9),t.k0s()(),t.j41(10,"div",19),t.EFF(11),t.k0s(),t.j41(12,"div",20)(13,"small",21),t.bIt("click",function(n){t.eBV(i);const a=t.XpG().$implicit,l=t.XpG();return t.Njj(l.replyComment(n,a.comment_id))}),t.EFF(14),t.nI1(15,"translate"),t.k0s()()()(),t.DNE(16,Ee,7,6,"ion-item-options",22),t.k0s()}if(2&o){let i;const e=t.XpG().$implicit,n=t.XpG();t.R7$(3),t.Y8G("src",e.createdby_avatar?n.readfileuploadurl+e.createdby_avatar:"assets/image/user-avatar-default.png",t.B4B),t.R7$(3),t.JRh(null!==(i=e.createdby_name)&&void 0!==i?i:t.bMT(7,6,"Guest")),t.R7$(3),t.JRh(n.formatDatetime(e.createddate)),t.R7$(2),t.JRh(e.comment_content),t.R7$(3),t.JRh(t.bMT(15,8,"Reply")),t.R7$(2),t.Y8G("ngIf",(null==n.user?null:n.user.userid)==e.createdby)}}function Ge(o,r){if(1&o){const i=t.RV6();t.j41(0,"ion-item",26)(1,"ion-input",27),t.nI1(2,"translate"),t.bIt("ionChange",function(n){t.eBV(i);const a=t.XpG(2);return t.Njj(a.changeComment2(n))})("keyup",function(n){t.eBV(i);const a=t.XpG(2);return t.Njj(a.keyupComment2(n))}),t.k0s(),t.j41(3,"ion-button",28),t.bIt("click",function(n){t.eBV(i);const a=t.XpG(2);return t.Njj(a.sendComment(n,a.comment2))}),t.nrm(4,"ion-icon",7),t.k0s()()}if(2&o){let i;const e=t.XpG(2);t.R7$(),t.FS9("placeholder",t.bMT(2,3,"EnterReply")),t.Y8G("autofocus",!0)("value",null!==(i=e.comment2.comment_content)&&void 0!==i?i:"")}}function De(o,r){if(1&o&&t.eu8(0,12),2&o){const i=r.$implicit;t.XpG(2);const e=t.sdS(18);t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(2,lt,i))}}function Xe(o,r){if(1&o&&(t.j41(0,"li"),t.DNE(1,Be,17,10,"ion-item-sliding",14)(2,Ge,5,5,"ion-item",15),t.j41(3,"ul"),t.DNE(4,De,1,4,"ng-container",10),t.k0s()()),2&o){const i=r.$implicit,e=t.XpG();t.R7$(),t.Y8G("ngIf",e.comment2.comment_id!=i.comment_id),t.R7$(),t.Y8G("ngIf",e.comment2.comment_pid==i.comment_id),t.R7$(2),t.Y8G("ngForOf",e.filterComments(i.comment_id))}}let Ae=(()=>{var o;class r{constructor(e,n){this.toastController=e,this.loadingController=n,this.appsettings={},this.user={},this.paging={page:1,limit:10,active:!0},this.comment={},this.comment2={},this.comments=[],this.readfileuploadurl=""}ngOnInit(){var e;this.readfileuploadurl=null!==(e=this.appsettings.readfileuploadurl)&&void 0!==e?e:"",this.loadData()}loadData(e){this.paging.page=1,this.paging.active=!0,this.loadData_Paging(e)}loadMore(e){this.paging.page+=1,this.loadData_Paging(e)}loadData_Paging(e){var n,a,l;!function je(o){o.params=o.params||{},(0,N.hm)({url:"api/comment/get",params:{getby:o.params.userid||null,v_tabletype:o.params.doctype||null,table_id:o.params.docid||null},success:r=>{r=r||{},"function"==typeof o.callback&&o.callback(r.data)},error:r=>{"function"==typeof o.callback&&o.callback(),console.error(o,r)},loading:o.loading,loadingController:o.loadingController})}({loading:d=>{this.paging.loading=d},params:{userid:null===(n=this.user)||void 0===n?void 0:n.userid,doctype:null!==(a=this.doctype)&&void 0!==a?a:1105,docid:null!==(l=this.docid)&&void 0!==l?l:1,numchild:this.paging.limit,posstart:(this.paging.page-1)*this.paging.limit+1,numofrow:this.paging.limit,sortfield:234,sorttype:"desc"},callback:d=>{this.comments=this.comments.concat(d||[]),(!(null!=d&&d.length)||(null==d?void 0:d.length)<this.paging.limit)&&(this.paging.active=!1),e&&e()}})}filterComments(e){return e?this.comments.filter(n=>n.comment_pid==e).sort((n,a)=>{var l,d;return(null!==(l=a.comment_id)&&void 0!==l?l:0)-(null!==(d=n.comment_id)&&void 0!==d?d:0)}):this.comments.filter(n=>!n.comment_pid).sort((n,a)=>{var l,d;return(null!==(l=a.comment_id)&&void 0!==l?l:0)-(null!==(d=n.comment_id)&&void 0!==d?d:0)})}formatDatetime(e,n){return H()().diff(H()(e),"days")<1?H()(e).fromNow():H()(e).format(null!=n?n:"HH:mm, DD/MM/YYYY")}keyupComment(e){var n=this;return(0,u.A)(function*(){13==e.keyCode&&n.sendComment(e,n.comment)})()}changeComment(e){var n=this;return(0,u.A)(function*(){var a;n.comment.comment_content=null!==(a=e.detail.value)&&void 0!==a?a:""})()}keyupComment2(e){var n=this;return(0,u.A)(function*(){13==e.keyCode&&n.sendComment(e,n.comment2)})()}changeComment2(e){var n=this;return(0,u.A)(function*(){var a;n.comment2.comment_content=null!==(a=e.detail.value)&&void 0!==a?a:""})()}replyComment(e,n){var a=this;return(0,u.A)(function*(){a.comment2={comment_pid:n}})()}editComment(e,n){var a=this;return(0,u.A)(function*(){var l;a.comment2=null!==(l=a.comments.find(d=>d.comment_id==n))&&void 0!==l?l:{}})()}sendComment(e,n){var a=this;return(0,u.A)(function*(){var l,d,s;n.comment_content&&function Ve(o){o.params=o.params||{},(0,N.Ll)({url:"api/comment/addupdate",params:{v_tabletype:o.params.doctype||null,table_id:o.params.docid||null,comment_id:o.params.comment_id||null,comment_pid:o.params.comment_pid||null,comment_content:o.params.comment_content||null,createdby:o.params.userid||null},success:r=>{"function"==typeof o.callback&&o.callback(r.data||null)},error:r=>{"function"==typeof o.callback&&o.callback(),console.error(o,r)},loading:o.loading,loadingController:o.loadingController})}({loadingController:a.loadingController,params:{userid:null===(l=a.user)||void 0===l?void 0:l.userid,doctype:null!==(d=a.doctype)&&void 0!==d?d:1105,docid:null!==(s=a.docid)&&void 0!==s?s:1,comment_id:n.comment_id,comment_pid:n.comment_pid,comment_content:n.comment_content},callback:p=>{0==(null==p?void 0:p.returncode)?(n.comment_id?a.comments.filter(m=>m.comment_id!=n.comment_id).forEach(m=>n):(n.comment_id=null==p?void 0:p.id,a.comments.push(n)),a.comment={},a.comment2={}):(0,F.c)(a.toastController,{},p).then(m=>{m.present()})}})})()}deleteComment(e,n){var a=this;return(0,u.A)(function*(){var l;!function $e(o){o.params=o.params||{},(0,N.sj)({url:"api/comment/delete",params:{comment_id:o.params.comment_id||null,createdby:o.params.userid||null},success:r=>{"function"==typeof o.callback&&o.callback(r.data||null)},error:r=>{"function"==typeof o.callback&&o.callback(),console.error(o,r)},loading:o.loading,loadingController:o.loadingController})}({loadingController:a.loadingController,params:{userid:null===(l=a.user)||void 0===l?void 0:l.userid,comment_id:n},callback:d=>{0==(null==d?void 0:d.returncode)?a.comments=a.comments.filter(s=>s.comment_id!=n&&s.comment_pid!=n):(0,F.c)(a.toastController,{},d).then(s=>{s.present()})}})})()}}return(o=r).\u0275fac=function(e){return new(e||o)(t.rXU(c.K_),t.rXU(c.Xi))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-viewer-comment"]],inputs:{appsettings:"appsettings",user:"user",doctype:"doctype",docid:"docid"},decls:19,vars:10,consts:[["templateCommentLI",""],[1,"container","container-comment"],[1,"row","mb-4"],[1,"col-12","col-lg-8"],["lines","full","mode","ios"],[3,"ionChange","keyup","placeholder","value"],["slot","end","mode","ios","size","default","shape","clear",3,"click"],["name","paper-plane-outline"],[1,"col-12","col-lg-8","pl-0"],["lines","none"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[1,"text-center","mt-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["size","small","color","medium","fill","outline",3,"click"],[4,"ngIf"],["lines","full",4,"ngIf"],["slot","start"],["onerror","errorAvatar(this)",3,"src"],[1,"comment-name"],[1,"comment-content"],[1,"comment-action"],[3,"click"],["side","end",4,"ngIf"],["side","end"],["color","secondary",3,"click"],["color","danger",3,"click"],["lines","full"],[3,"ionChange","keyup","placeholder","autofocus","value"],["slot","end","mode","ios","size","large","shape","clear",3,"click"]],template:function(e,n){if(1&e){const a=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h5"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"ion-item",4)(7,"ion-input",5),t.nI1(8,"translate"),t.bIt("ionChange",function(d){return t.eBV(a),t.Njj(n.changeComment(d))})("keyup",function(d){return t.eBV(a),t.Njj(n.keyupComment(d))}),t.k0s(),t.j41(9,"ion-button",6),t.bIt("click",function(d){return t.eBV(a),t.Njj(n.sendComment(d,n.comment))}),t.nrm(10,"ion-icon",7),t.k0s()()()(),t.j41(11,"div",2)(12,"div",8)(13,"ion-list",9)(14,"ul"),t.DNE(15,Ie,1,4,"ng-container",10),t.k0s()()()()(),t.DNE(16,Fe,4,0,"div",11)(17,Xe,5,3,"ng-template",null,0,t.C5r)}if(2&e){let a;t.R7$(4),t.Lme("",t.bMT(5,6,"Comment")," (",n.comments.length,")"),t.R7$(3),t.FS9("placeholder",t.bMT(8,8,"EnterComment")),t.Y8G("value",null!==(a=n.comment.comment_content)&&void 0!==a?a:""),t.R7$(8),t.Y8G("ngForOf",n.filterComments()),t.R7$(),t.vxM(16,n.paging.active?16:-1)}},dependencies:[I.Sq,I.bT,I.T3,c.Jm,c.iq,c.$w,c.uz,c.LU,c.CE,c.A7,c.he,c.nf,c.Zx,c.Gw,J.D9],styles:[".container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0;margin:1rem 0}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:empty{display:none}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;margin:0 0 .5rem}.container-comment[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:4rem}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{--size: 3rem;--border-radius: 50%;margin-top:0;margin-bottom:0;align-self:flex-start}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-name[_ngcontent-%COMP%]{line-height:1.5rem;font-weight:500}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-name[_ngcontent-%COMP%] > small[_ngcontent-%COMP%]{margin-left:.5rem;font-size:.75rem;color:var(--ion-color-medium);vertical-align:top}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-content[_ngcontent-%COMP%]{line-height:1.5rem;white-space:wrap;text-align:justify}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-action[_ngcontent-%COMP%]{line-height:1.5rem}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .comment-action[_ngcontent-%COMP%] > small[_ngcontent-%COMP%]{line-height:1;vertical-align:middle;font-size:.75rem;color:var(--ion-color-primary);cursor:pointer}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;--padding-top: 0;--padding-bottom: 0;--padding-start: 0;--padding-end: 0;margin:0;--border-radius: .5rem;--background: var(--ion-color-secondary)}.container-comment[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.container-comment[_ngcontent-%COMP%]   ion-item-option[_ngcontent-%COMP%]{text-transform:initial}"]}),r})();const Ne=o=>({parentContent:o});function Se(o,r){if(1&o&&(t.nrm(0,"app-viewer-board",1),t.j41(1,"div",2),t.nrm(2,"app-viewer-comment",3),t.k0s()),2&o){const i=t.XpG();t.Y8G("appsettings",i.appsettings)("user",i.user)("board_id",i.board_id)("num",i.num),t.R7$(2),t.Y8G("appsettings",i.appsettings)("user",i.user)("doctype",1105)("docid",i.board_id)}}function ze(o,r){if(1&o&&t.nrm(0,"app-viewer-media",4),2&o){const i=t.XpG();t.Y8G("appsettings",i.appsettings)("user",i.user)("media_id",i.media_id)("inherits",t.eq3(4,Ne,i.content))}}const Ue=[{path:"",component:(()=>{var o;class r{constructor(e,n){this.router=e,this.activatedRoute=n,this.appsettings={}}ngOnInit(){var e=this;this.IsOnInit=!0,(0,u.A)(function*(){e.appsettings=yield(0,N.AC)(),e.user=yield(0,q.Nk)(),e.loadParams()})()}ionViewDidEnter(){this.IsOnInit?this.IsOnInit=!1:this.loadParams()}onIonRefresher(e){this.loadParams(()=>{e.target.complete()})}scrollToTop(){var e;null===(e=this.content)||void 0===e||e.scrollToTop(500)}loadParams(e){var n=this;return(0,u.A)(function*(){let a=n.activatedRoute.snapshot.queryParamMap.get("b")||"";if(a)n.board_id=parseInt(a),n.num=parseInt(n.activatedRoute.snapshot.queryParamMap.get("n")||"1")-1;else{let l=n.activatedRoute.snapshot.queryParamMap.get("m")||"";l&&(n.media_id=parseInt(l))}!n.board_id||!n.media_id||n.navigateToHome(),e&&e()})()}navigateByUrl(e){this.router.navigateByUrl(e)}navigateToHome(){var e=this;return(0,u.A)(function*(){(yield(0,tt.lJ)())?e.navigateByUrl(R._.DASHBOARD):e.navigateByUrl(R._.LANDING_PAGE)})()}}return(o=r).\u0275fac=function(e){return new(e||o)(t.rXU(V.Ix),t.rXU(V.nX))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-viewer"]],viewQuery:function(e,n){if(1&e&&t.GBs(c.W9,5),2&e){let a;t.mGM(a=t.lsd())&&(n.content=a.first)}},decls:7,vars:1,consts:[["slot","fixed",3,"ionRefresh"],[3,"appsettings","user","board_id","num"],[1,"pb-5","mb-5"],[3,"appsettings","user","doctype","docid"],[3,"appsettings","user","media_id","inherits"]],template:function(e,n){1&e&&(t.nrm(0,"app-header"),t.j41(1,"ion-content")(2,"ion-refresher",0),t.bIt("ionRefresh",function(l){return n.onIonRefresher(l)}),t.nrm(3,"ion-refresher-content"),t.k0s(),t.DNE(4,Se,3,8)(5,ze,1,6),t.nrm(6,"app-footer"),t.k0s()),2&e&&(t.R7$(4),t.vxM(4,n.board_id?4:n.media_id?5:-1))},dependencies:[c.W9,c.To,c.Ki,dt.l,st.n,zt,Te,Ae]}),r})()}];let Ye=(()=>{var o;class r{}return(o=r).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[V.iI.forChild(Ue),V.iI]}),r})();var Je=_(3890);let Le=(()=>{var o;class r{}return(o=r).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[I.MD,U.YN,c.bv,Ye,Je.x]}),r})()}}]);