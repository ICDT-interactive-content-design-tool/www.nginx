"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9530],{6081:(B,k,t)=>{t.d(k,{GR:()=>M,dq:()=>P,hL:()=>x,qU:()=>f});var u=t(5972);function P(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,u.hm)({url:"api/Board/Search",params:{getby:e.params.userid||null,board_id:e.params.board_id||null,board_ids:e.params.board_ids||null,board_title:e.params.board_title||null,size_width:e.params.size_width||null,size_height:e.params.size_height||null,topic_id:e.params.topic_id||null,category_id:e.params.category_id||null,template_id:e.params.template_id||null,createdby:e.params.createdby||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(),console.error(l)},loading:e.loading,loadingController:e.loadingController})}function x(e){e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,u.hm)({url:"api/Board/SearchTemplate",params:{getby:e.params.userid||null,board_id:e.params.board_id||null,board_title:e.params.board_title||null,size_width:e.params.size_width||null,size_height:e.params.size_height||null,topic_id:e.params.topic_id||null,category_id:e.params.category_id||null,template_id:e.params.template_id||null,createdby:e.params.createdby||null,sortfield:e.params.sortfield||null,sorttype:e.params.sorttype||null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(),console.error(l)},loading:e.loading,loadingController:e.loadingController})}function f(e){e.params=e.params||{},(0,u.hm)({url:"api/Board/Detail",params:{getby:e.params.userid||null,board_id:e.params.board_id||null,isfrom:e.params.isfrom||null},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(),console.error(l)},loading:e.loading,loadingController:e.loadingController})}function M(e){e.params=e.params||{},(0,u.Ll)({url:"api/Board/UpdateFromBoardIds",params:{board_id:e.params.board_id||null,from_board_ids:e.params.from_board_ids||null,createdby:e.params.userid||null,modifiedby:e.params.userid||null},success:l=>{"function"==typeof e.callback&&e.callback(l.data||null)},error:l=>{"function"==typeof e.callback&&e.callback(),console.error(l)},loading:e.loading,loadingController:e.loadingController})}},2635:(B,k,t)=>{t.d(k,{N$:()=>E,Nk:()=>M,kD:()=>l,xy:()=>e});var u=t(467),P=t(369),x=t(5972);const f=new P.w({name:"_userDB",driverOrder:[P.C.IndexedDB,P.C.LocalStorage]}),M=function(){var p=(0,u.A)(function*(r){yield f.create();try{var s=(yield f.get("user-local"))||{};return"function"==typeof(null==r?void 0:r.callback)&&r.callback(Object.assign({},s||{})),s}catch(o){"function"==typeof(null==r?void 0:r.callback)&&r.callback(),console.error(o)}return{}});return function(s){return p.apply(this,arguments)}}(),e=function(){var p=(0,u.A)(function*(r){yield f.create(),r.params=r.params||{};try{var s=Object.assign({},r.params);yield f.set("user-local",s),"function"==typeof r.callback&&r.callback(Object.assign({},s||{}))}catch(o){"function"==typeof r.callback&&r.callback(),console.error(o)}});return function(s){return p.apply(this,arguments)}}(),l=function(){var p=(0,u.A)(function*(r){return r&&(r.params={}),e(null!=r?r:{})});return function(s){return p.apply(this,arguments)}}(),E=function(){var p=(0,u.A)(function*(r,s){let o=yield(0,x.AC)();if(s){let a=[];r.params.profilephoto&&a.push(new Promise((m,_)=>{let g=new Image;g.onload=()=>{r.params.url_profilephoto=g.src,m(1)},g.onerror=()=>{r.params.url_profilephoto="assets/image/user-avatar-default.png",m(0)},g.src=o.readfileuploadurl+r.params.profilephoto})),r.params.banner&&a.push(new Promise((m,_)=>{let g=new Image;g.onload=()=>{r.params.url_banner=g.src,m(1)},g.onerror=()=>{r.params.url_banner="assets/image/user-banner-default.png",m(0)},g.src=o.readfileuploadurl+r.params.banner})),a.length>0?Promise.all(a).then(()=>{e(r)}):e(r)}else M({callback:a=>{if(a){let m=[];r.params.profilephoto&&m.push(new Promise((_,g)=>{let b=new Image;b.onload=()=>{r.params.url_profilephoto=b.src,_(1)},b.onerror=()=>{r.params.url_profilephoto="assets/image/user-avatar-default.png",_(0)},b.src=o.readfileuploadurl+r.params.profilephoto})),r.params.banner&&m.push(new Promise((_,g)=>{let b=new Image;b.onload=()=>{r.params.url_banner=b.src,_(1)},b.onerror=()=>{r.params.url_banner="assets/image/user-banner-default.png",_(0)},b.src=o.readfileuploadurl+r.params.banner})),m.length>0?Promise.all(m).then(()=>{e({params:Object.assign({},a,r.params),callback:r.callback})}):e({params:Object.assign({},a,r.params),callback:r.callback})}else"function"==typeof r.callback&&r.callback()}})});return function(s,o){return p.apply(this,arguments)}}()},9530:(B,k,t)=>{t.r(k),t.d(k,{EmbedPageModule:()=>G});var u=t(177),P=t(9417),x=t(6637),f=t(3658),M=t(467),e=t(6611),l=t(5972),E=t(6081),I=t(4975),h=t(5619),p=t(2635),r=t(2837),s=t(8963),o=t(1171),a=t(4438),m=t(345);function _(n,v){if(1&n){const c=a.RV6();a.qex(0),a.j41(1,"div",15)(2,"ion-button",16),a.bIt("click",function(){a.eBV(c);const d=a.XpG();return a.Njj(d.pageBack())}),a.nrm(3,"ion-img",17),a.k0s(),a.j41(4,"span"),a.EFF(5),a.k0s(),a.j41(6,"ion-button",16),a.bIt("click",function(){a.eBV(c);const d=a.XpG();return a.Njj(d.pageNext())}),a.nrm(7,"ion-img",18),a.k0s()(),a.bVm()}if(2&n){const c=a.XpG();a.R7$(2),a.Y8G("disabled",c.slideIdx<1),a.R7$(3),a.Lme("",c.slideIdx+1,"/",c.slideTotal,""),a.R7$(),a.Y8G("disabled",c.slideIdx>=c.slideTotal-1)}}const b=[{path:"",component:(()=>{var n;class v{constructor(i,d,y){this.router=i,this.activatedRoute=d,this.titleService=y,this.b=0,this.slides=[],this.slideIdx=0,this.slideTotal=0,this.settings={},this.pageBack=()=>{this.slideIdx>0&&(this.slideIdx--,this.renderSlide())},this.pageNext=()=>{this.slideIdx<this.slideTotal-1&&(this.slideIdx++,this.renderSlide())},this.slideIdx=parseInt(d.snapshot.queryParamMap.get("n")||"1")-1,this.pathfile=this.activatedRoute.snapshot.queryParamMap.get("pathfile")||void 0;let O=this.activatedRoute.snapshot.queryParamMap.get("b")||"";O?this.b=parseInt(O):window.location.replace("/")}ngOnInit(){var i=this;e.L.container="#mainContainer",e.L.svg="#mainSvg",(0,M.A)(function*(){e.L.config=yield(0,l.AC)(),i.user=yield(0,p.Nk)(),i.refreshData()})(),(0,s.j)()}refreshData(){var i,d;(0,E.qU)({params:{userid:null===(i=this.user)||void 0===i?void 0:i.userid,board_id:this.b},callback:y=>{var O;null!=y&&y.board_id?(this.titleService.setTitle(`${y.board_title}`),(0,I.U5)({params:{userid:null===(O=this.user)||void 0===O?void 0:O.userid,board_id:this.b,pathfile:this.pathfile},callback:C=>{var U;let w;if(C&&!C.modules?w=(0,r.v)(C):"icdtV2"==(null==C?void 0:C.modules)&&(w=C),w)return h.J.data=w,h.J.changeSlide=(j,T,S,R,L)=>{this.slideIdx=S,this.slideTotal=R,this.slide=L,this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{n:this.slideIdx+1},queryParamsHandling:"merge",replaceUrl:!0})},this.slideTotal=h.J.slideTotal,this.renderSlide(),void(0,o.U2)(w.fonts||[]);(0,I.rH)({params:{userid:null===(U=this.user)||void 0===U?void 0:U.userid,board_id:this.b},callback:j=>{if(j){let T=(0,r.v)(j);h.J.data=T,h.J.changeSlide=(S,R,L,z,A)=>{this.slideIdx=L,this.slideTotal=z,this.slide=A,this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{n:this.slideIdx+1},queryParamsHandling:"merge",replaceUrl:!0})},this.slideTotal=h.J.slideTotal,this.renderSlide(),(0,o.U2)(T.fonts||[])}}})}})):window.location.replace("/")}}),(0,I.BS)({params:{board_id:this.b,userid:null===(d=this.user)||void 0===d?void 0:d.userid},callback:y=>{this.settings=y||{buttons:{paging:!0}}}}),window.addEventListener("resize",()=>{console.log("preview window resize"),this.slide&&(0,h.I)(e.L.container,e.L.svg,this.slide)})}renderSlide(){h.J.runSlide(this.slideIdx)}}return(n=v).\u0275fac=function(i){return new(i||n)(a.rXU(f.Ix),a.rXU(f.nX),a.rXU(m.hE))},n.\u0275cmp=a.VBU({type:n,selectors:[["app-embed"]],decls:16,vars:2,consts:[["scroll-x","false","scroll-y","false",3,"fullscreen"],[1,"container-grid","grid-column"],[1,"container-head","container-top"],[1,"container-body","grid-grow"],[1,"container-grid","grid-row"],[1,"container-left"],[1,"container-center"],[1,"grid-grow"],[1,"main-container",2,"overflow","auto"],["scroll-x","false","scroll-y","false"],["id","mainContainer",1,"svg-box"],["id","mainSvg","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"viewer"],[1,"container-bottom"],[4,"ngIf"],[1,"container-right"],[1,"group-action-paging"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"click","disabled"],["src","../../../assets/icon-png/Back.png"],["src","../../../assets/icon-png/Next.png"]],template:function(i,d){1&i&&(a.j41(0,"ion-content",0)(1,"div",1),a.nrm(2,"div",2),a.j41(3,"div",3)(4,"div",4),a.nrm(5,"div",5),a.j41(6,"div",6)(7,"div",1)(8,"div",7)(9,"div",8)(10,"ion-content",9)(11,"div",10),a.qSk(),a.nrm(12,"svg",11),a.k0s()()()(),a.joV(),a.j41(13,"div",12),a.DNE(14,_,8,4,"ng-container",13),a.k0s()()(),a.nrm(15,"div",14),a.k0s()()()()),2&i&&(a.Y8G("fullscreen",!0),a.R7$(14),a.Y8G("ngIf",null==d.settings.buttons?null:d.settings.buttons.paging))},dependencies:[u.bT,x.Jm,x.W9,x.KW],styles:[".container-grid[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.container-grid.grid-row[_ngcontent-%COMP%]{flex-flow:row}.container-grid.grid-column[_ngcontent-%COMP%]{flex-flow:column}.container-grid[_ngcontent-%COMP%]   .grid-grow[_ngcontent-%COMP%]{flex-grow:1}.container-head[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:0 2px 2px #0000001a}.container-body[_ngcontent-%COMP%]{position:relative;z-index:1}.container-body[_ngcontent-%COMP%]   .container-left[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-right[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:-2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]{position:relative;z-index:1;flex:auto;width:calc(100% - 480px)}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .container-bottom[_ngcontent-%COMP%]{position:relative;z-index:2}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;z-index:1;-webkit-user-select:none;user-select:none;background-color:#fafafa}.group-action-paging[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:1rem;line-height:0;-webkit-user-select:none;user-select:none}.group-action-paging[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:0 1rem;vertical-align:middle;font-size:18px;color:#fab11d}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{vertical-align:middle}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:34px;width:34px}.svg-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));display:flex;align-items:center;justify-content:center}.svg-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;margin:auto;background:#fff}"]}),v})()}];let D=(()=>{var n;class v{}return(n=v).\u0275fac=function(i){return new(i||n)},n.\u0275mod=a.$C({type:n}),n.\u0275inj=a.G2t({imports:[f.iI.forChild(b),f.iI]}),v})(),G=(()=>{var n;class v{}return(n=v).\u0275fac=function(i){return new(i||n)},n.\u0275mod=a.$C({type:n}),n.\u0275inj=a.G2t({imports:[u.MD,P.YN,x.bv,D]}),v})()}}]);