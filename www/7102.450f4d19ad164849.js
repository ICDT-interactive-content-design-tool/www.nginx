"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7102],{8779:(he,zt,w)=>{w.d(zt,{$u:()=>N,IB:()=>gt,WR:()=>_,bf:()=>z,eD:()=>ot,lq:()=>y,pZ:()=>T,u$:()=>E});const T={fill:"transparent",stroke:"#129bff",strokeWidth:1},E={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},ot={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},z={fill:"transparent",stroke:"transparent",strokeWidth:1},gt={fill:"none",stroke:"#5F6CE1",strokeWidth:1},_={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},y={fill:"transparent"},N={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(he,zt,w)=>{w.d(zt,{$N:()=>_,An:()=>y,CS:()=>E,Kf:()=>A,Lp:()=>M,j9:()=>N,lP:()=>z,n9:()=>f,nf:()=>gt});var T=w(2492);const E=p=>{var R;return null===(R=p.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===R?void 0:R.map(h=>{let I={type:h.substring(0,1)},j=(Y=h.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?Y.split(/\s/).map(q=>(0,T.z)(parseFloat(q),1e6)):[];var Y;return j.length&&(I.points=j),I})},z=p=>{let R=[],h=[],I=[],j=[];return p.forEach(Y=>{switch(["M","L","C","S","Q","T"].includes(Y.type)&&Y.points&&Y.points.forEach((jt,it)=>{it%2==0?R.push(jt):h.push(jt)}),Y.type){case"A":var q;7==(null===(q=Y.points)||void 0===q?void 0:q.length)&&(I.push(Y.points[5]),j.push(Y.points[6]));break;case"H":var X;null!==(X=Y.points)&&void 0!==X&&X.length&&(R.push(Y.points[0]),I.push(Y.points[0]));break;case"V":var H;null!==(H=Y.points)&&void 0!==H&&H.length&&(h.push(Y.points[0]),j.push(Y.points[0]));break;case"a":var V;if(7==(null===(V=Y.points)||void 0===V?void 0:V.length)){let jt=R[R.length-1];R.push(jt+Y.points[5]),I.push(jt+Y.points[5]);let it=h[h.length-1];h.push(it+Y.points[6]),j.push(it+Y.points[6])}break;case"h":var Et;if(null!==(Et=Y.points)&&void 0!==Et&&Et.length){let jt=R[R.length-1];R.push(jt+Y.points[0]),I.push(jt+Y.points[0])}break;case"v":var Vt;if(null!==(Vt=Y.points)&&void 0!==Vt&&Vt.length){let jt=h[h.length-1];h.push(jt+Y.points[0]),j.push(jt+Y.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var Qt;null===(Qt=Y.points)||void 0===Qt||Qt.forEach((jt,it)=>{it%2==0?I.push(jt):j.push(jt)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Jt;null===(Jt=Y.points)||void 0===Jt||Jt.forEach((jt,it)=>{if(it%2==0){let Ot=R[R.length-1];R.push(Ot+jt),I.push(Ot+jt)}else{let Ot=h[h.length-1];h.push(Ot+jt),j.push(Ot+jt)}})}}),{minX:Math.min.apply(null,I),minY:Math.min.apply(null,j),maxX:Math.max.apply(null,I),maxY:Math.max.apply(null,j)}},gt=(p,R)=>R.map(h=>{let I=[];switch(h.type){case"a":var j;7==(null===(j=h.points)||void 0===j?void 0:j.length)&&I.push([(0,T.z)(h.points[0]/p.width,1e6),(0,T.z)(h.points[1]/p.height,1e6),h.points[2],h.points[3],h.points[4],(0,T.z)(h.points[5]/p.width,1e6),(0,T.z)(h.points[6]/p.height,1e6)]);break;case"A":var Y;7==(null===(Y=h.points)||void 0===Y?void 0:Y.length)&&I.push([(0,T.z)(h.points[0]/p.width,1e6),(0,T.z)(h.points[1]/p.height,1e6),h.points[2],h.points[3],h.points[4],(0,T.z)((h.points[5]-p.x)/p.width,1e6),(0,T.z)((h.points[6]-p.y)/p.height,1e6)]);break;case"h":var q;null!==(q=h.points)&&void 0!==q&&q.length&&I.push([(0,T.z)(h.points[0]/p.width,1e6)]);break;case"H":var X;null!==(X=h.points)&&void 0!==X&&X.length&&I.push([(0,T.z)((h.points[0]-p.x)/p.width,1e6)]);break;case"v":var H;null!==(H=h.points)&&void 0!==H&&H.length&&I.push([(0,T.z)(h.points[0]/p.height,1e6)]);break;case"V":var V;null!==(V=h.points)&&void 0!==V&&V.length&&I.push([(0,T.z)((h.points[0]-p.y)/p.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var Et;if(null!==(Et=h.points)&&void 0!==Et&&Et.length)for(let Qt=0,Jt=h.points.length-1;Qt<Jt;Qt+=2)I.push([(0,T.z)((h.points[Qt]-p.x)/p.width,1e6),(0,T.z)((h.points[Qt+1]-p.y)/p.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var Vt;if(null!==(Vt=h.points)&&void 0!==Vt&&Vt.length)for(let Qt=0,Jt=h.points.length-1;Qt<Jt;Qt+=2)I.push([(0,T.z)(h.points[Qt]/p.width,1e6),(0,T.z)(h.points[Qt+1]/p.height,1e6)])}return I.length?{type:h.type,ratios:I}:{type:h.type}}),_=(p,R)=>R.map(h=>{switch(h.type){case"a":var I,j;return`${h.type}${null!==(I=null===(j=h.ratios)||void 0===j||null===(j=j.map(Ct=>{var kt,xt,W,Q,u,lt,Tt;return[(0,T.z)(p.width*(null!==(kt=Ct[0])&&void 0!==kt?kt:0),1e6),(0,T.z)(p.height*(null!==(xt=Ct[1])&&void 0!==xt?xt:0),1e6),null!==(W=Ct[2])&&void 0!==W?W:0,null!==(Q=Ct[3])&&void 0!==Q?Q:0,null!==(u=Ct[4])&&void 0!==u?u:0,(0,T.z)(p.width*(null!==(lt=Ct[5])&&void 0!==lt?lt:0),1e6),(0,T.z)(p.height*(null!==(Tt=Ct[6])&&void 0!==Tt?Tt:0),1e6)]}))||void 0===j||null===(j=j.map(Ct=>Ct.join(" ")))||void 0===j?void 0:j.join(" "))&&void 0!==I?I:""}`;case"A":var Y,q;return`${h.type}${null!==(Y=null===(q=h.ratios)||void 0===q||null===(q=q.map(Ct=>{var kt,xt,W,Q,u,lt,Tt;return[(0,T.z)(p.width*(null!==(kt=Ct[0])&&void 0!==kt?kt:0),1e6),(0,T.z)(p.height*(null!==(xt=Ct[1])&&void 0!==xt?xt:0),1e6),null!==(W=Ct[2])&&void 0!==W?W:0,null!==(Q=Ct[3])&&void 0!==Q?Q:0,null!==(u=Ct[4])&&void 0!==u?u:0,(0,T.z)(p.x+p.width*(null!==(lt=Ct[5])&&void 0!==lt?lt:0),1e6),(0,T.z)(p.y+p.height*(null!==(Tt=Ct[6])&&void 0!==Tt?Tt:0),1e6)]}))||void 0===q||null===(q=q.map(Ct=>Ct.join(" ")))||void 0===q?void 0:q.join(" "))&&void 0!==Y?Y:""}`;case"h":var X,H;return`${h.type}${null!==(X=null===(H=h.ratios)||void 0===H||null===(H=H.map(Ct=>{var kt;return(0,T.z)(p.width*(null!==(kt=Ct[0])&&void 0!==kt?kt:0),1e6)}))||void 0===H?void 0:H.join(" "))&&void 0!==X?X:""}`;case"H":var V,Et;return`${h.type}${null!==(V=null===(Et=h.ratios)||void 0===Et||null===(Et=Et.map(Ct=>{var kt;return(0,T.z)(p.x+p.width*(null!==(kt=Ct[0])&&void 0!==kt?kt:0),1e6)}))||void 0===Et?void 0:Et.join(" "))&&void 0!==V?V:""}`;case"v":var Vt,Qt;return`${h.type}${null!==(Vt=null===(Qt=h.ratios)||void 0===Qt||null===(Qt=Qt.map(Ct=>{var kt;return(0,T.z)(p.height*(null!==(kt=Ct[0])&&void 0!==kt?kt:0),1e6)}))||void 0===Qt?void 0:Qt.join(" "))&&void 0!==Vt?Vt:""}`;case"V":var Jt,jt;return`${h.type}${null!==(Jt=null===(jt=h.ratios)||void 0===jt||null===(jt=jt.map(Ct=>{var kt;return(0,T.z)(p.y+p.height*(null!==(kt=Ct[0])&&void 0!==kt?kt:0),1e6)}))||void 0===jt?void 0:jt.join(" "))&&void 0!==Jt?Jt:""}`;case"z":case"Z":return h.type;case"M":case"L":case"C":case"S":case"Q":case"T":var it,Ot;return`${h.type}${null!==(it=null===(Ot=h.ratios)||void 0===Ot||null===(Ot=Ot.map(Ct=>{var kt,xt;return[(0,T.z)(p.x+p.width*(null!==(kt=Ct[0])&&void 0!==kt?kt:0),1e6),(0,T.z)(p.y+p.height*(null!==(xt=Ct[1])&&void 0!==xt?xt:0),1e6)]}))||void 0===Ot||null===(Ot=Ot.map(Ct=>Ct.join(" ")))||void 0===Ot?void 0:Ot.join(" "))&&void 0!==it?it:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var tt,It;return`${h.type}${null!==(tt=null===(It=h.ratios)||void 0===It||null===(It=It.map(Ct=>{var kt,xt;return[(0,T.z)(p.width*(null!==(kt=Ct[0])&&void 0!==kt?kt:0),1e6),(0,T.z)(p.height*(null!==(xt=Ct[1])&&void 0!==xt?xt:0),1e6)]}))||void 0===It||null===(It=It.map(Ct=>Ct.join(" ")))||void 0===It?void 0:It.join(" "))&&void 0!==tt?tt:""}`;default:return""}}).join(""),y=p=>{return(R=p.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?R.split(/\s/).map(h=>parseFloat(h)):[];var R},N=p=>{let R=[],h=[];return p.forEach((I,j)=>{j%2==0?R.push(I):h.push(I)}),{minX:Math.min.apply(null,R),minY:Math.min.apply(null,h),maxX:Math.max.apply(null,R),maxY:Math.max.apply(null,h)}},M=(p,R)=>{let h=[];for(let I=0,j=R.length-1;I<j;I+=2)h.push([(R[I]-p.x)/p.width,(R[I+1]-p.y)/p.height]);return h},f=(p,R)=>R.map(h=>[(0,T.z)(p.x+p.width*h[0],1e6),(0,T.z)(p.y+p.height*h[1],1e6)]).map(h=>h.join(" ")).join(" "),A=(p,R)=>{let h=(p=>{let R=p.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(h=>(0,T.z)(parseFloat(h),1e6));if(6==R.length)return{a:R[0],b:R[1],c:R[2],d:R[3],e:R[4],f:R[5]}})(R);return h?window.Snap.path.map(p,new window.Snap.Matrix(h.a,h.b,h.c,h.d,h.e,h.f)).toString():p}},2837:(he,zt,w)=>{w.d(zt,{v:()=>dt,U:()=>A});var T=w(7102),E=w(1999),ot=w(2492),z=/^#[a-fA-F0-9]+$/i,gt=/^rgb\((\d+),(\d+),(\d+)\)$/i,_=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const y=p=>{let R=null,h=null;if(p)if("transparent"==p)R="#000000",h=0;else if(p.match(z))R=p;else{let I=(p=p.replace(/\s+/g,"")).match(_);if(I)R="#"+(256|I[1]).toString(16).slice(1)+(256|I[2]).toString(16).slice(1)+(256|I[3]).toString(16).slice(1),h=(0,ot.z)(parseFloat(I[4]),100);else{let j=p.match(gt);j&&(R="#"+(256|j[1]).toString(16).slice(1)+(256|j[2]).toString(16).slice(1)+(256|j[3]).toString(16).slice(1))}}return{hex:R,alpha:h}};var N=w(4896);const A=p=>S(null==p?void 0:p.url,null==p?void 0:p.path,null==p?void 0:p.src,null==p?void 0:p.name);var S=(p,R,h,I)=>{var j,Y;let q,X,H,V;var Et,Vt;return p&&(q=p.replace(/\\/g,"/")),R&&(X=R.replace(/\\/g,"/")),h&&(H=h.replace(/\\/g,"/")),X&&!q&&(q=(null===(Et=T.L.config)||void 0===Et?void 0:Et.readfileuploadurl)+X),!H||X||q||(X=H.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),q=(null===(Vt=T.L.config)||void 0===Vt?void 0:Vt.readfileuploadurl)+X),V=I||(null!==(j=q)&&void 0!==j?j:"").split("/").pop()||(null!==(Y=X)&&void 0!==Y?Y:"").split("/").pop()||"",{url:q,path:X,name:V}};const dt=p=>{let R={x:0,y:0,width:p.screen.w,height:p.screen.h},h=[];return p.data.forEach((I,j)=>{var Y,q;let X={id:"number"==typeof I.id?I.id:T.L.data.newSlideId,code:null===(Y=I.id)||void 0===Y?void 0:Y.toString(),name:"string"==typeof I.id?I.id:`Trang ${j+1}`,svg:{viewBox:R,nodes:[]},test:(H=I.test2,H?(H.audiotrue&&(H.audiotrue=A({path:H.audiotrue.path})),H.audiofalse&&(H.audiofalse=A({path:H.audiofalse.path})),H.effecttrue&&(H.effecttrue=A({path:H.effecttrue.path})),H.effectfalse&&(H.effectfalse=A({path:H.effectfalse.path})),H.icontrue&&(H.icontrue=A({path:H.icontrue.path})),H.iconfalse&&(H.iconfalse=A({path:H.iconfalse.path})),H):{})};var H;I.background&&X.svg&&(X.svg.background=function(p){return p&&(null!==p.match(/#([a-zA-Z0-9]+)/)||null!==p.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==p.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(I.background)?{color:I.background}:function(p){return p&&null!==p.match(/data:[^;]+;base64,/)}(I.background)?{base64:I.background}:function(p){return p&&null!==p.match(/http(s)?:\/\//)}(I.background)?S(I.background):S(void 0,I.background)),jQuery(null!==(q=I.svg)&&void 0!==q?q:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((H,V)=>{var Et,Vt;let Qt=jQuery(V).parents(".indexs"),Jt=(tt=Qt.attr("data-index"))?parseInt(tt):0,jt=(tt=>Jt&&tt?parseInt(tt):0)(Qt.attr("data-time")),it=null!==(Et=V.getAttribute("id"))&&void 0!==Et?Et:(1e9*Math.random()).toFixed(),Ot={id:parseInt(it),code:`${V.nodeName}-${it}`,name:V.nodeName,idx:Jt,time:jt,type:(()=>{switch(V.nodeName){case"polygon":return E.h.POLYGON;case"path":return E.h.PATH;case"circle":return E.h.CIRCLE;case"ellipse":return E.h.ELLIPSE;case"line":return E.h.LINE;case"rect":return E.h.RECT;case"foreignObject":return E.h.FOREIGNOBJECT}return 0})(),size:(tt=>{let It={},Ct=0,kt=0,xt=0,W=0,Q=null,u=null,lt=parseFloat((null===(tt=V.getAttribute("transform"))||void 0===tt?void 0:tt.replace("rotate(","").replace(")",""))||"0")||null;switch(V.nodeName){case"polygon":{var Tt,Mt;let Dt=[],Ht=[],Bt=999999999,Wt=999999999,Rt=0,ct=0;Q=JSON.parse(V.getAttribute("ratios")||"[]"),u=null!==(Tt=null===(Mt=V.getAttribute("points"))||void 0===Mt?void 0:Mt.split(",").map(function(Yt){return Yt.split(" ").map(function(C){return parseFloat(C)})}))&&void 0!==Tt?Tt:[],u.forEach(function(Yt){Dt.push(Yt[0]),Ht.push(Yt[1])}),Bt=Math.min.apply(null,Dt),Wt=Math.min.apply(null,Ht),Rt=Math.max.apply(null,Dt),ct=Math.max.apply(null,Ht),Ct=Bt,kt=Wt,xt=Rt-Ct,W=ct-kt;break}case"path":{let Dt=V.getAttribute("d");if(Dt){let Ht=(0,N.CS)(Dt),{minX:Bt,minY:Wt,maxX:Rt,maxY:ct}=(0,N.lP)(Ht);Ct=Bt,kt=Wt,xt=Rt-Ct||1,W=ct-kt||1,Object.assign(It,{ratioMaps:(0,N.nf)({x:Ct,y:kt,width:xt,height:W},Ht)})}break}case"circle":{let Dt=parseFloat(V.getAttribute("cx")||"0"),Ht=parseFloat(V.getAttribute("cy")||"0"),Bt=parseFloat(V.getAttribute("r")||"0");Ct=Dt-Bt,kt=Ht-Bt,xt=2*Bt,W=2*Bt;break}case"ellipse":{let Dt=parseFloat(V.getAttribute("cx")||"0"),Ht=parseFloat(V.getAttribute("cy")||"0"),Bt=parseFloat(V.getAttribute("rx")||"0"),Wt=parseFloat(V.getAttribute("ry")||"0");Ct=Dt-Bt,kt=Ht-Wt,xt=2*Bt,W=2*Wt;break}case"line":{let Dt=parseFloat(V.getAttribute("x1")||"0"),Ht=parseFloat(V.getAttribute("y1")||"0"),Bt=parseFloat(V.getAttribute("x2")||"0"),Wt=parseFloat(V.getAttribute("y2")||"0"),Rt=999999999,ct=999999999,Yt=0,C=0;Rt=Math.min(Dt,Bt),ct=Math.min(Ht,Wt),Yt=Math.max(Dt,Bt),C=Math.max(Ht,Wt),Ct=Rt,kt=ct,xt=Yt-Ct,W=C-kt,Q=[[(Dt-Ct)/(xt||1),(Ht-kt)/(W||1)],[(Bt-Ct)/(xt||1),(Wt-kt)/(W||1)]];break}case"rect":case"foreignObject":Ct=parseFloat(V.getAttribute("x")||"0"),kt=parseFloat(V.getAttribute("y")||"0"),xt=parseFloat(V.getAttribute("width")||"0"),W=parseFloat(V.getAttribute("height")||"0")}return Object.assign(It,{x:Ct,y:kt,width:xt,height:W,ratios:Q,points:u,rotate:lt})})(),attribute:(()=>{let tt={};switch(V.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var It,Ct,kt,xt,W,Q,u,lt;let Yt=null!==(It=V.getAttribute("fill"))&&void 0!==It?It:null,C=null!==(Ct=V.getAttribute("stroke"))&&void 0!==Ct?Ct:null,d=null!==(kt=parseFloat(null!==(xt=V.getAttribute("stroke-opacity"))&&void 0!==xt?xt:"1"))&&void 0!==kt?kt:null,B=null!==(W=parseFloat(V.getAttribute("stroke-width")||"0"))&&void 0!==W?W:null,nt=null!==(Q=V.getAttribute("stroke-linecap"))&&void 0!==Q?Q:null,ut=null!==(u=V.getAttribute("stroke-linejoin"))&&void 0!==u?u:null,J=null!==(lt=parseFloat(V.getAttribute("stroke-dasharray")||"0"))&&void 0!==lt?lt:null;Object.assign(tt,{fill:Yt,stroke:C,strokeOpacity:d,strokeWidth:B,strokeLinecap:nt,strokeLinejoin:ut,strokeDasharray:J});break}case"path":{let Yt=Qt.get(0);if(Yt){var Tt,Mt,Dt,Ht,Bt,Wt,Rt,ct;let C=null!==(Tt=Yt.getAttribute("fill"))&&void 0!==Tt?Tt:null,d=null!==(Mt=Yt.getAttribute("stroke"))&&void 0!==Mt?Mt:null,B=null!==(Dt=parseFloat(null!==(Ht=Yt.getAttribute("stroke-opacity"))&&void 0!==Ht?Ht:"1"))&&void 0!==Dt?Dt:null,nt=null!==(Bt=parseFloat(Yt.getAttribute("stroke-width")||"0"))&&void 0!==Bt?Bt:null,ut=null!==(Wt=Yt.getAttribute("stroke-linecap"))&&void 0!==Wt?Wt:null,J=null!==(Rt=Yt.getAttribute("stroke-linejoin"))&&void 0!==Rt?Rt:null,O=null!==(ct=parseFloat(Yt.getAttribute("stroke-dasharray")||"0"))&&void 0!==ct?ct:null;Object.assign(tt,{fill:C,stroke:d,strokeOpacity:B,strokeWidth:nt,strokeLinecap:ut,strokeLinejoin:J,strokeDasharray:O})}break}}return tt})(),style:(()=>{let tt={};switch(V.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let kt=jQuery(V).find(".svg-container");if(kt.length){let W=parseFloat(kt.css("border-width")||"0")||null,Q=kt.css("border-style")||null,u=kt.css("border-color")||null,lt=null,Tt=kt.css("background-color")||null,Mt=null;(()=>{let{hex:Dt,alpha:Ht}=y(u);u=Dt,lt=Ht})(),(()=>{let{hex:Dt,alpha:Ht}=y(Tt);Tt=Dt,Mt=Ht})(),Object.assign(tt,{borderWidth:W,borderStyle:Q,borderColor:u,borderOpacity:lt,backgroundColor:Tt,backgroundOpacity:Mt})}let xt=jQuery(V).find(".svg-editor-content");if(xt.length){var It,Ct;let W=JSON.parse((xt.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:Q,alpha:u}=y(W.TextColor);Object.assign(tt,{fontFamily:null!==(It=W.FontFamily)&&void 0!==It?It:null,fontSize:null!==(Ct=W.FontSize)&&void 0!==Ct?Ct:null,color:Q,opacity:u})}break}}return tt})(),source:(()=>{let tt={};switch(V.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Qt.hasClass("editors")){let Yt=jQuery(V).find(".svg-editor-content");if(Yt.length){var It;let C=Yt.html(),d=null!==(It=(null!=C?C:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==It?It:[];Object.assign(tt,{type:"html",html:{htmlContent:C,variableKeywords:d}})}}else if(Qt.hasClass("inputs")||Qt.hasClass("textareas"))Object.assign(tt,{type:"input",input:{input:!!jQuery(V).find("input").length,textarea:!!jQuery(V).find("textarea").length}});else if(Qt.hasClass("tests")){let Rt=jQuery(V).find(".svg-test");if(Qt.hasClass("tests-truefalse")){var Ct,kt;let ct=Rt.find(".svg-editor-content").html(),Yt=null!==(Ct=(null!=ct?ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Ct?Ct:[];Object.assign(tt,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(kt=I.test2.truefalse)||void 0===kt?void 0:kt.includes(it)}},html:{htmlContent:ct,variableKeywords:Yt}})}else if(Qt.hasClass("tests-singlechoice")){var xt,W;let ct=Rt.find(".svg-editor-content").html(),Yt=null!==(xt=(null!=ct?ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==xt?xt:[];Object.assign(tt,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(W=I.test2.singlechoice)||void 0===W?void 0:W.includes(it)}},html:{htmlContent:ct,variableKeywords:Yt}})}else if(Qt.hasClass("tests-multichoice")){var Q,u;let ct=Rt.find(".svg-editor-content").html(),Yt=null!==(Q=(null!=ct?ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Q?Q:[];Object.assign(tt,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(u=I.test2.multichoice)||void 0===u?void 0:u.includes(it)}},html:{htmlContent:ct,variableKeywords:Yt}})}else if(Qt.hasClass("tests-fill")){var lt,Tt;let ct=Rt.find(".svg-editor-content").html(),Yt=null!==(lt=(null!=ct?ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==lt?lt:[],C=null!==(Tt=(null!=ct?ct:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==Tt?Tt:[];C=C.filter((d,B,nt)=>nt.indexOf(d)==B),Object.assign(tt,{type:"test",test:{type:"fill",fill:C.map(d=>{var B;return{key:d,value:null===(B=I.test2.fill)||void 0===B||null===(B=B.find(nt=>nt.id==it))||void 0===B||null===(B=B.vals)||void 0===B?void 0:B.map(nt=>nt.text).filter(nt=>!["",null,void 0,NaN].includes(nt))}})},html:{htmlContent:ct,variableKeywords:Yt,fillKeywords:C}})}else if(Qt.hasClass("tests-matching")){if(Rt.hasClass("svg-test-empty"))Object.assign(tt,{type:"test",test:{type:"matching-empty",matching:{key:Rt.attr("data-name")||null}}});else if(Rt.hasClass("svg-test-content")){var Mt;let ct=Rt.find(".svg-editor-content").html(),Yt=null!==(Mt=(null!=ct?ct:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Mt?Mt:[];Object.assign(tt,{type:"test",test:{type:"matching-content",matching:{key:Rt.attr("data-name")||null}},html:{htmlContent:ct,variableKeywords:Yt}})}}else if(Qt.hasClass("tests-speech")){var Dt;Object.assign(tt,{type:"speech",speech:{value:null===(Dt=I.test2.speech)||void 0===Dt||null===(Dt=Dt.find(ct=>ct.id==it))||void 0===Dt||null===(Dt=Dt.vals)||void 0===Dt?void 0:Dt.map(ct=>ct.text).filter(ct=>!["",null,void 0,NaN].includes(ct))}})}else if(Qt.hasClass("tests-submit")){let ct=jQuery(V).find(".svg-container img");Object.assign(tt,{type:"test",test:{type:"submit"},image:S(ct.attr("url"),ct.attr("path"),ct.attr("src"))})}}else if(Qt.hasClass("images")){let Rt=jQuery(V).find(".svg-editor-content img");if(Rt.length)Object.assign(tt,{type:"image",image:S(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});else{let ct=jQuery(V).find("iframe");Object.assign(tt,{type:"iframe",iframe:S(ct.attr("url"),ct.attr("path"),ct.attr("src"))})}}else if(Qt.hasClass("sounds")){let Rt=jQuery(V).find(".svg-editor-content img");Rt.length&&Object.assign(tt,{type:"image",image:S(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))})}else if(Qt.hasClass("htmls")){let Rt=jQuery(V).find("iframe");Rt.length&&Object.assign(tt,{type:"iframe",iframe:S(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))})}else if(Qt.hasClass("svgs")){let Rt=jQuery(V).find("svg");var Ht,Bt;Rt.length&&Object.assign(tt,{type:"svg",svg:Object.assign(S(Rt.attr("url"),Rt.attr("path"),Rt.attr("src")),{svgContent:null!==(Ht=null===(Bt=Rt.get(0))||void 0===Bt?void 0:Bt.outerHTML)&&void 0!==Ht?Ht:null})})}else if(Qt.hasClass("medias")){let Rt=jQuery(V).find(".media-item");if(Rt.length)switch(Rt.attr("type")){case"audio":Object.assign(tt,{type:"audio",audio:S(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});break;case"video":Object.assign(tt,{type:"video",video:S(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});break;case"file":Object.assign(tt,{type:"file",file:S(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});break;default:var Wt;Object.assign(tt,{type:"link",link:{url:null!==(Wt=Rt.attr("url"))&&void 0!==Wt?Wt:null}})}let ct=jQuery(V).find("img");ct.length&&(Object.assign(tt,{image:S(ct.attr("url"),ct.attr("path"),ct.attr("src"))}),tt.type||Object.assign(tt,{type:"image"}))}}return tt})(),animate:(tt=>{let It={},Ct=null===(tt=I.animates)||void 0===tt?void 0:tt.find(kt=>kt.elementId==it);return Ct&&Object.assign(It,{value:Ct.value}),It})(),interactive:(()=>{let tt={},It=I.actions.show.filter(kt=>kt.elementId==it&&kt.active);It.length&&(tt.show={},It.forEach(kt=>{let{source:xt}=kt;switch(null==xt?void 0:xt.type){case"work":var W,Q,u,lt,Tt;tt.show.action={},Object.assign(tt.show.action,{value:null!==(W=xt.value)&&void 0!==W?W:null,iteration:null!==(Q=xt.iteration)&&void 0!==Q?Q:null,finish:null!==(u=xt.end)&&void 0!==u?u:null,time:null!==(lt=xt.time)&&void 0!==lt?lt:null,points:null!==(Tt=xt.points)&&void 0!==Tt?Tt:null});break;case"audio":var Mt,Dt,Ht;tt.show.audio={},Object.assign(tt.show.audio,{source:S(null,null,xt.url),iteration:null!==(Mt=xt.iteration)&&void 0!==Mt?Mt:null,finish:null!==(Dt=xt.end)&&void 0!==Dt?Dt:null,time:null!==(Ht=xt.time)&&void 0!==Ht?Ht:null,async:-1==xt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Bt,Wt,Rt,ct,Yt,C,d,B,nt,ut,J,O,Z,et,yt;xt.options.includes("show")&&(tt.show.triggershow={},Object.assign(tt.show.triggershow,{id:null!==(Bt=parseInt(null!==(Wt=xt.id)&&void 0!==Wt?Wt:"0"))&&void 0!==Bt?Bt:null,ids:null===(Rt=xt.ids)||void 0===Rt?void 0:Rt.map(wt=>parseInt(wt)),async:null!==(ct=xt.async)&&void 0!==ct?ct:null,time:null!==(Yt=xt.time)&&void 0!==Yt?Yt:null})),xt.options.includes("run")&&(tt.show.triggerrun={},Object.assign(tt.show.triggerrun,{id:null!==(C=parseInt(null!==(d=xt.id)&&void 0!==d?d:"0"))&&void 0!==C?C:null,ids:null===(B=xt.ids)||void 0===B?void 0:B.map(wt=>parseInt(wt)),async:null!==(nt=xt.async)&&void 0!==nt?nt:null,time:null!==(ut=xt.time)&&void 0!==ut?ut:null})),xt.options.includes("hide")&&(tt.show.triggerhide={},Object.assign(tt.show.triggerhide,{id:null!==(J=parseInt(null!==(O=xt.id)&&void 0!==O?O:"0"))&&void 0!==J?J:null,ids:null===(Z=xt.ids)||void 0===Z?void 0:Z.map(wt=>parseInt(wt)),async:null!==(et=xt.async)&&void 0!==et?et:null,time:null!==(yt=xt.time)&&void 0!==yt?yt:null}))}}));let Ct=I.actions.click.filter(kt=>kt.elementId==it&&kt.active);return Ct&&(tt.click={},Ct.forEach(kt=>{let{source:xt}=kt;switch(null==xt?void 0:xt.type){case"work":var W,Q,u,lt,Tt;tt.click.action={},Object.assign(tt.click.action,{value:null!==(W=xt.value)&&void 0!==W?W:null,iteration:null!==(Q=xt.iteration)&&void 0!==Q?Q:null,finish:null!==(u=xt.end)&&void 0!==u?u:null,time:null!==(lt=xt.time)&&void 0!==lt?lt:null,points:null!==(Tt=xt.points)&&void 0!==Tt?Tt:null});break;case"audio":var Mt,Dt,Ht;tt.click.audio={},Object.assign(tt.click.audio,{source:S(null,null,xt.url),iteration:null!==(Mt=xt.iteration)&&void 0!==Mt?Mt:null,finish:null!==(Dt=xt.end)&&void 0!==Dt?Dt:null,time:null!==(Ht=xt.time)&&void 0!==Ht?Ht:null,async:-1==xt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Bt,Wt,Rt,ct,Yt,C,d,B,nt,ut,J,O,Z,et,yt;xt.options.includes("show")&&(tt.click.triggershow={},Object.assign(tt.click.triggershow,{id:null!==(Bt=parseInt(null!==(Wt=xt.id)&&void 0!==Wt?Wt:"0"))&&void 0!==Bt?Bt:null,ids:null===(Rt=xt.ids)||void 0===Rt?void 0:Rt.map(At=>parseInt(At)),async:null!==(ct=xt.async)&&void 0!==ct?ct:null,time:null!==(Yt=xt.time)&&void 0!==Yt?Yt:null})),xt.options.includes("run")&&(tt.click.triggerrun={},Object.assign(tt.click.triggerrun,{id:null!==(C=parseInt(null!==(d=xt.id)&&void 0!==d?d:"0"))&&void 0!==C?C:null,ids:null===(B=xt.ids)||void 0===B?void 0:B.map(At=>parseInt(At)),async:null!==(nt=xt.async)&&void 0!==nt?nt:null,time:null!==(ut=xt.time)&&void 0!==ut?ut:null})),xt.options.includes("hide")&&(tt.click.triggerhide={},Object.assign(tt.click.triggerhide,{id:null!==(J=parseInt(null!==(O=xt.id)&&void 0!==O?O:"0"))&&void 0!==J?J:null,ids:null===(Z=xt.ids)||void 0===Z?void 0:Z.map(At=>parseInt(At)),async:null!==(et=xt.async)&&void 0!==et?et:null,time:null!==(yt=xt.time)&&void 0!==yt?yt:null}));break;case"slide":var wt;tt.click.slide={},Object.assign(tt.click.slide,{id:parseInt(null!==(wt=xt.id)&&void 0!==wt?wt:"0")||xt.num||null,code:xt.id})}})),tt})(),variable:(tt=>{let It={};var Ct;V.getAttribute("data-variable")&&(It.input={},Object.assign(It.input,{variable:null!==(Ct=V.getAttribute("data-variable"))&&void 0!==Ct?Ct:null}));let kt=null===(tt=I.nodes)||void 0===tt||null===(tt=tt.find(lt=>lt.id==it))||void 0===tt?void 0:tt.variable;var xt,W,Q,u;return kt&&(It.click={},Object.assign(It.click,{variable:null!==(xt=kt.variable)&&void 0!==xt?xt:null,operator:null!==(W=kt.operator)&&void 0!==W?W:null,valuetype:null!==(Q=kt.valuetype)&&void 0!==Q?Q:null,value:null!==(u=kt.value)&&void 0!==u?u:null})),It})()};var tt;null===(Vt=X.svg)||void 0===Vt||Vt.nodes.push(Ot)}),h.push(X)}),{screen:{width:p.screen.w,height:p.screen.h},data:{slides:h},variable:p.variable}}},6195:(he,zt,w)=>{w.d(zt,{A9:()=>M,IB:()=>f,_4:()=>N,_5:()=>gt,ar:()=>_,yW:()=>y});var T=w(467),E=w(119);E.config({driver:[E.INDEXEDDB,E.LOCALSTORAGE,E.WEBSQL],name:"_localDataDB",version:1});const z={create:(P=(0,T.A)(function*(){return E}),function(){return P.apply(this,arguments)}),get:function(){var P=(0,T.A)(function*(A){return E.getItem(A)});return function(S){return P.apply(this,arguments)}}(),set:function(){var P=(0,T.A)(function*(A,S){return E.setItem(A,S)});return function(S,dt){return P.apply(this,arguments)}}()},gt=function(){var P=(0,T.A)(function*(A){yield z.create();var S=(yield z.get("icdt-data"))||[];"function"==typeof A.callback&&A.callback(S)});return function(S){return P.apply(this,arguments)}}(),_=function(){var P=(0,T.A)(function*(A){yield z.create(),A.params=A.params||{};try{yield z.set("icdt-data",A.params),"function"==typeof A.callback&&A.callback(A.params)}catch(S){"function"==typeof A.callback&&A.callback(null),console.error(S)}});return function(S){return P.apply(this,arguments)}}(),y=function(){var P=(0,T.A)(function*(A){yield z.create();try{var S=(yield z.get("icdt-config"))||{};"function"==typeof A.callback&&A.callback(S)}catch(dt){"function"==typeof A.callback&&A.callback(null),console.error(dt)}});return function(S){return P.apply(this,arguments)}}(),N=function(){var P=(0,T.A)(function*(A){yield z.create(),A.params=A.params||{};try{yield z.set("icdt-config",A.params),"function"==typeof A.callback&&A.callback(A.params)}catch(S){"function"==typeof A.callback&&A.callback(null),console.error(S)}});return function(S){return P.apply(this,arguments)}}(),M=function(){var P=(0,T.A)(function*(A){yield z.create();try{var S=(yield z.get("icdt-clipboard"))||{};"function"==typeof A.callback&&A.callback(S)}catch(dt){"function"==typeof A.callback&&A.callback(null),console.error(dt)}});return function(S){return P.apply(this,arguments)}}(),f=function(){var P=(0,T.A)(function*(A){yield z.create(),A.params=A.params||{};try{yield z.set("icdt-clipboard",A.params),"function"==typeof A.callback&&A.callback(A.params)}catch(S){"function"==typeof A.callback&&A.callback(null),console.error(S)}});return function(S){return P.apply(this,arguments)}}();var P},6315:(he,zt,w)=>{w.d(zt,{w:()=>T});const T=(E,ot)=>{if(!E)return"";let z=E.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),gt=(z&&z[4]||"").trim(),_=z?(256|z[1]).toString(16).slice(1)+(256|z[2]).toString(16).slice(1)+(256|z[3]).toString(16).slice(1):E;if("0"==gt)return"transparent";if(ot){let y;y=""!==gt?gt:"01",y=(255*y|256).toString(16).slice(1),_+=y}return`#${_}`}},7873:(he,zt,w)=>{w.d(zt,{F:()=>T});const T={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},2409:(he,zt,w)=>{w.d(zt,{F:()=>T});const T={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(he,zt,w)=>{w.d(zt,{P:()=>T});const T={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(he,zt,w)=>{w.d(zt,{Q:()=>T});const T={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(he,zt,w)=>{w.d(zt,{h:()=>T});const T={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,PATH:8}},8338:(he,zt,w)=>{w.d(zt,{S:()=>T});const T={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},7102:(he,zt,w)=>{w.d(zt,{L:()=>_t});var T=w(3603),E=w(5970),ot=w(7873),z=w(9506),gt=w(1308),_=w(6037),y=w(4333);const f=K=>{var i,r,o,n,l,g,m;let c=(null===(i=K.mouseEvent)||void 0===i?void 0:i.target)||(null===(r=K.touchEvent)||void 0===r?void 0:r.target),L=(null===(o=c)||void 0===o?void 0:o.getAttribute("id"))||"",x=null===(n=c)||void 0===n?void 0:n.nodeName;_t.dataSelect.nodeName.includes(x)||(c=jQuery(c).parents("foreignObject").get(0),c&&(L=c.getAttribute("id")||"",x=c.nodeName));let F=(null===(l=c)||void 0===l||null===(l=l.parentNode)||void 0===l?void 0:l.getAttribute("id"))||"";var D,ht;if([ot.F.RESIZE_GROUP,ot.F.SELECT_GROUP].includes(F))return null===(D=K.mouseEvent)||void 0===D||D.stopPropagation(),void(null===(ht=K.mouseEvent)||void 0===ht||ht.preventDefault());if(null!==(g=K.mouseEvent)&&void 0!==g&&g.altKey||null!==(m=K.touchEvent)&&void 0!==m&&m.altKey||!L||L.match(/[^0-9]/)||!_t.dataSelect.nodeName.includes(x)){var vt;_t.dataSelect.ids.length&&(_t.dataSelect.ids=[]),(0==(null===(vt=K.mouseEvent)||void 0===vt?void 0:vt.button)||K.touchEvent)&&(K=>{let l=(0,E.RY)(ot.F.SCAN_GROUP,"g"),g=(0,z.CE)(0,0,1,1);(0,E.xJ)(l,g),((K,i,r)=>{(0,gt.I)(K,{start:l=>{},move:(l,g)=>{((l,g,m,c)=>{i=(0,z.CE)(l,g,m,c),(0,E.xJ)(r,i)})(g[0][0],g[0][1],l.x,l.y)},end:(l,g)=>{null==r||r.remove(),_t.dataSelect.ids=_t.data.getNodeInArea(Math.min(g[0][0],l.x),Math.min(g[0][1],l.y),Math.max(g[0][0],l.x),Math.max(g[0][1],l.y));let m=_t.dataSelect.nodes;1==m.length?(0,_.K)(m[0]):m.length>1&&(0,y.E)(m)}})})(K,g,l)})(K)}else{var bt,Pt;let te=parseFloat(L||"0");_t.dataSelect.ids=null!==(bt=K.mouseEvent)&&void 0!==bt&&bt.shiftKey||null!==(Pt=K.touchEvent)&&void 0!==Pt&&Pt.shiftKey?[te].concat(_t.dataSelect.ids).filter((ge,be,xe)=>xe.indexOf(ge)==be):[te];let we=_t.dataSelect.nodes;we.length>1?(0,y.E)(we):1==we.length&&(0,_.K)(we[0])}};class A{constructor(){let{x:i,y:r}=_t.screen.dislocation;var o=(n,l,g,m)=>{_t.screen.move({x:i,y:r},{x:g-n,y:m-l})};return{start:n=>{},move:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)},end:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)}}}}var S=w(1999),dt=w(4888);const p=[{name:"tam gi\xe1c vu\xf4ng",type:dt.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:dt.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:dt.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:dt.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:dt.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:dt.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:dt.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:dt.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:dt.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:dt.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:dt.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:dt.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:dt.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var R=w(1281),h=w(2492);class I{constructor(){let i=(0,E.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,R.K)(Math.ceil(1e9*Math.random())),g=(m,c,L,x)=>{l=(0,z.CE)(m,c,L,x,{ratio:1}),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,z.xW)(S.h.CIRCLE,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:m=>{g(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,c)=>{g(c[0][0],c[0][1],m.x,m.y)},end:(m,c)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,z.xW)(S.h.CIRCLE,l,n)),(0,E.tD)(o,n)),_t.data.node=Object.assign({id:r,type:S.h.CIRCLE,name:"Circle"},{size:l,attribute:n}),null==i||i.remove()}}}}var j=w(6153);class Y{constructor(){let i=(0,E.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,j.W)(Math.ceil(1e9*Math.random()));var g=(m,c,L,x)=>{l=(0,z.CE)(m,c,L,x),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,z.xW)(S.h.ELLIPSE,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:m=>{g(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,c)=>{g(c[0][0],c[0][1],m.x,m.y)},end:(m,c)=>{(l.width<=16||l.height<=16)&&(l.width=90,l.height=60,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,z.xW)(S.h.ELLIPSE,l,n)),(0,E.tD)(o,n)),_t.data.node=Object.assign({id:r,type:S.h.ELLIPSE,name:"Ellipse"},{size:l,attribute:n}),null==i||i.remove()}}}}var q=w(7945);class X{constructor(){let i=(0,E.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,q.a)(Math.ceil(1e9*Math.random()));var g=(m,c,L,x)=>{l=(0,z.CE)(m,c,L,x),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,z.xW)(S.h.RECT,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:m=>{g(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,c)=>{g(c[0][0],c[0][1],m.x,m.y)},end:(m,c)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,z.xW)(S.h.RECT,l,n)),(0,E.tD)(o,n)),_t.data.node=Object.assign({id:r,type:S.h.RECT,name:"Rect"},{size:l,attribute:n}),null==i||i.remove()}}}}var H=w(3477);class V{constructor(i){let r=(0,E.RY)(ot.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:n,element:l,attribute:g,size:m}=(0,H.u)(Math.ceil(1e9*Math.random()));m.ratios=o;var c=(L,x,F,D)=>{m=(0,z.CE)(L,x,F,D,{ratios:o}),m.x=(0,h.z)(m.x),m.y=(0,h.z)(m.y),m.width=(0,h.z)(m.width),m.height=(0,h.z)(m.height),Object.assign(g,(0,z.xW)(S.h.POLYGON,m,g)),(0,E.tD)(l,g),(0,E.in)(r,m)};return{start:L=>{c(L.x,L.y,L.x+m.width,L.y+m.height)},move:(L,x)=>{c(x[0][0],x[0][1],L.x,L.y)},end:(L,x)=>{(m.width<=16||m.height<=16)&&(m.width=80,m.height=80,m.x=m.x-m.width/2,m.y=m.y-m.height/2,Object.assign(g,(0,z.xW)(S.h.POLYGON,m,g)),(0,E.tD)(l,g)),_t.data.node=Object.assign({id:n,type:S.h.POLYGON,name:"Polygon"},{size:m,attribute:g}),null==r||r.remove()}}}}var Et=w(3069);class Vt{constructor(){let i=(0,E.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,Et.q)(Math.ceil(1e9*Math.random()));return{start:m=>{},move:(m,c)=>{((m,c,L,x)=>{l=(0,z.CE)(m,c,L,x),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,z.xW)(S.h.LINE,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)})(c[0][0],c[0][1],m.x,m.y)},end:(m,c)=>{c.length>=2?((l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,z.xW)(S.h.LINE,l,n)),(0,E.tD)(o,n)),_t.data.node=Object.assign({id:r,type:S.h.LINE,name:"Line"},{size:l,attribute:n})):null==o||o.remove(),null==i||i.remove()}}}}var Qt=w(4896),Jt=w(6407);class jt{constructor(){let{nodeId:i,element:r,attribute:o,size:n}=(0,Jt.X)(Math.ceil(1e9*Math.random())),g="";return{start:c=>{g=`M ${c.x} ${c.y} L ${c.x} ${c.y}`},move:(c,L)=>{((c,L)=>{g+=` ${c} ${L}`,r.setAttribute("d",g)})(c.x,c.y)},end:(c,L)=>{let x=(0,Qt.CS)(g),{minX:F,minY:D,maxX:ht,maxY:vt}=(0,Qt.lP)(x);n.x=F,n.y=D,n.width=ht-F||1,n.height=vt-D||1,n.ratioMaps=(0,Qt.nf)(n,x),_t.data.node=Object.assign({id:i,type:S.h.PATH,name:"Path"},{size:n,attribute:o})}}}}var it=w(745);class Ot{constructor(){let i=(0,E.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,size:n,attribute:l,style:g,source:m}=(0,it.$)(Math.ceil(1e9*Math.random()));var c=(L,x,F,D)=>{n=(0,z.CE)(L,x,F,D),n.x=(0,h.z)(n.x),n.y=(0,h.z)(n.y),n.width=(0,h.z)(n.width),n.height=(0,h.z)(n.height),Object.assign(l,(0,z.xW)(S.h.FOREIGNOBJECT,n,l)),(0,E.tD)(o,l),(0,E.in)(i,n)};return{start:L=>{c(L.x,L.y,L.x+n.width,L.y+n.height)},move:(L,x)=>{c(x[0][0],x[0][1],L.x,L.y)},end:(L,x)=>{(n.width<=16||n.height<=16)&&(n.width=90,n.height=60,n.x=n.x-n.width/2,n.y=n.y-n.height/2,Object.assign(l,(0,z.xW)(S.h.FOREIGNOBJECT,n,l)),(0,E.tD)(o,l)),_t.data.node=Object.assign({id:r,type:S.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:g,source:m}),null==i||i.remove()}}}}var tt=w(9173);class It{constructor(){var i,r;let o=(0,E.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:n,element:l,size:g,attribute:m,source:c}=(0,tt.B)(Math.ceil(1e9*Math.random())),L=1;(F=>{if(!F)return;let D=new Image;D.onload=()=>{L=(0,h.z)(D.naturalWidth/D.naturalHeight,100)},D.onerror=ht=>{console.error(`ImgSrc load failed -> ${F}`,ht)},D.src=F})(null!==(i=null===(r=c.image)||void 0===r?void 0:r.url)&&void 0!==i?i:"");var x=(F,D,ht,vt)=>{g=(0,z.CE)(F,D,ht,vt,{ratio:L}),g.x=(0,h.z)(g.x),g.y=(0,h.z)(g.y),g.width=(0,h.z)(g.width),g.height=(0,h.z)(g.height),Object.assign(m,(0,z.xW)(S.h.IMAGE,g,m)),(0,E.tD)(l,m),(0,E.in)(o,g)};return{start:F=>{x(F.x,F.y,F.x+g.width,F.y+g.height)},move:(F,D)=>{x(D[0][0],D[0][1],F.x,F.y)},end:(F,D)=>{(g.width<=16||g.height<=16)&&(g.width=80,g.height=80,g.x=g.x-g.width/2,g.y=g.y-g.height/2,Object.assign(m,(0,z.xW)(S.h.IMAGE,g,m)),(0,E.tD)(l,m)),_t.data.node=Object.assign({id:n,type:S.h.IMAGE,name:"Image"},{size:g,attribute:m,source:c}),null==o||o.remove()}}}}var kt=w(7135),xt=w(4979);function u(K,i,r,o){return Math.sqrt(Math.pow(r-K,2)+Math.pow(o-i,2))}function lt(K,i,r,o,n){return u(K,i,r,o)<n?1:0}function Mt(K,i,r,o,n,l,g){var m=[];return m.push(lt(K,i,r,o,g)),m.push(lt(K,i,n,l,g)),m.push(function Tt(K,i,r,o,n,l,g){var m=[n-r,l-o],c=[K-r,i-o],L=[-m[1],m[0]],x=Math.sqrt(Math.pow(L[0],2)+Math.pow(L[1],2)),F=[L[0]/x,L[1]/x],D=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)),ht=[m[0]/D,m[1]/D],vt=c[0]*ht[0]+c[1]*ht[1];if(vt<=0||vt>=D)return 0;var bt=c[0]*F[0]+c[1]*F[1];return bt>=g||bt<=-g?0:1}(K,i,r,o,n,l,g)),m}function Dt(K,i,r,o,n){var l=[r-K,o-i],g=[-l[1],l[0]],m=Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2)),c=[g[0]/m,g[1]/m];return[[K+n*c[0],i+n*c[1]],[K-n*c[0],i-n*c[1]],[r-n*c[0],o-n*c[1]],[r+n*c[0],o+n*c[1]]]}function Ht(K,i,r,o,n,l,g){var vt,m=[n-K,l-i],c=[r-K,o-i],L=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),x=[c[0]/L,c[1]/L],F=m[0]*x[0]+m[1]*x[1],D=[K+F*x[0],i+F*x[1]],ht=Math.sqrt(Math.pow(n-D[0],2)+Math.pow(l-D[1],2));vt=0===ht?g:Math.sqrt(Math.pow(g,2)-Math.pow(ht,2));var bt=[K+F*x[0]+vt*x[0],i+F*x[1]+vt*x[1]];return bt[0]===K&&bt[1]===i?null:bt}function Bt(K,i,r,o,n,l,g){var m=[n-K,l-i],c=[r-K,o-i],L=[-c[1],c[0]],x=Math.sqrt(Math.pow(L[0],2)+Math.pow(L[1],2)),F=[L[0]/x,L[1]/x],D=m[0]*F[0]+m[1]*F[1],ht=d([K,i],[r,o],[n,l]);if(Yt([ht[0]-n,ht[1]-l])>=g)return null;var bt=Math.sqrt(Math.pow(g,2)-Math.pow(D,2)),Pt=[n-D*F[0],l-D*F[1]],te=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),we=[c[0]/te,c[1]/te],ge=[[Pt[0]-we[0]*bt,Pt[1]-we[1]*bt],[Pt[0]+we[0]*bt,Pt[1]+we[1]*bt]];return ge[0][0]===K&&ge[0][1]===i?null:ge}function Wt(K,i,r,o,n,l,g,m){var c,L,x,F,D,ht;return-(x=g-n)*(L=o-i)+(c=r-K)*(F=m-l)==0?null:(ht=(x*(i-l)-F*(K-n))/(-x*L+c*F),(D=(-L*(K-n)+c*(i-l))/(-x*L+c*F))>=0&&D<=1&&ht>=0&&ht<=1?[K+ht*c,i+ht*L]:null)}function Rt(K,i,r,o,n,l,g,m,c,L){var x=Dt(l,g,m,c,L),F=[];if(r[0]&&!r[1])F.push(Ht(K,i,o,n,l,g,L)),F.push(Wt(K,i,o,n,x[0][0],x[0][1],x[3][0],x[3][1])),F.push(Wt(K,i,o,n,x[1][0],x[1][1],x[2][0],x[2][1])),(D=Bt(K,i,o,n,m,c,L))&&F.push(D[0],D[1]);else if(!r[0]&&r[1])F.push(Ht(K,i,o,n,m,c,L)),F.push(Wt(K,i,o,n,x[0][0],x[0][1],x[3][0],x[3][1])),F.push(Wt(K,i,o,n,x[1][0],x[1][1],x[2][0],x[2][1])),(D=Bt(K,i,o,n,l,g,L))&&F.push(D[0],D[1]);else if(r[0]&&r[1])F.push(Ht(K,i,o,n,l,g,L)),F.push(Wt(K,i,o,n,x[0][0],x[0][1],x[3][0],x[3][1])),F.push(Wt(K,i,o,n,x[1][0],x[1][1],x[2][0],x[2][1])),F.push(Ht(K,i,o,n,m,c,L));else{var D=Bt(K,i,o,n,m,c,L),ht=Bt(K,i,o,n,l,g,L);D&&F.push(D[0],D[1]),ht&&F.push(ht[0],ht[1]),F.push(Wt(K,i,o,n,x[0][0],x[0][1],x[3][0],x[3][1])),F.push(Wt(K,i,o,n,x[1][0],x[1][1],x[2][0],x[2][1]))}for(var vt=[K,i],bt=0;bt<F.length;bt++)F[bt]&&u(F[bt][0],F[bt][1],o,n)<u(vt[0],vt[1],o,n)&&(vt=F[bt]);return vt[0]===K&&vt[1]===i?null:vt}function ct(K,i,r,o,n,l,g,m,c){var L=Dt(n,l,g,m,c),x=[],F=Bt(K,i,r,o,n,l,c);F&&x.push(F[0],F[1]),(F=Bt(K,i,r,o,g,m,c))&&x.push(F[0],F[1]),x.push(Wt(K,i,r,o,L[0][0],L[0][1],L[3][0],L[3][1])),x.push(Wt(K,i,r,o,L[1][0],L[1][1],L[2][0],L[2][1]));for(var D=[r,o],ht=[K,i],vt=0;vt<x.length;vt++)x[vt]&&u(x[vt][0],x[vt][1],K,i)<u(D[0],D[1],K,i)&&(D=x[vt]);for(var bt=0;bt<x.length;bt++)x[bt]&&u(x[bt][0],x[bt][1],r,o)<u(ht[0],ht[1],r,o)&&(ht=x[bt]);return D[0]===r&&D[1]===o||ht[0]===K&&ht[1]===i?null:[D,ht]}var Yt=function(K){return Math.sqrt(K[0]*K[0]+K[1]*K[1])},d=function(K,i,r){var o=[i[0]-K[0],i[1]-K[1]],n=Yt(o);if(n<1e-6)return K;var l=[r[0]-K[0],r[1]-K[1]],g=(o[0]*l[0]+o[1]*l[1])/n;return g<0?K:g>n?i:[K[0]+o[0]*g/n,K[1]+o[1]*g/n]};class B{constructor(){let{element:o,size:l}=(0,Jt.X)(Math.ceil(1e9*Math.random()));(0,E.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let g="";return{start:L=>{g=`M ${L.x} ${L.y} L ${L.x} ${L.y}`},move:(L,x)=>{((L,x)=>{g+=` ${L} ${x}`,o.setAttribute("d",g)})(L.x,L.y)},end:(L,x)=>{o.remove(),(L=>{let x=9999,F=9999,D=-9999,ht=-9999;L.forEach(bt=>{x=Math.min(x,bt[0]),F=Math.min(F,bt[1]),D=Math.max(D,bt[0]),ht=Math.max(ht,bt[1])}),l=(0,z.CE)(x,F,D,ht,{points:L}),_t.data.getNodeInArea(0,0,1920,1920,S.h.PATH).forEach(bt=>{let te=((K,i,r)=>{r=r||20;var o=[],n=function(x){var F=i[0][0],D=i[0][1],ht=0,vt=0;if(1!==x.length||lt(x[0][0],x[0][1],F,D,r)){for(var bt;ht<x.length-1;){var Pt=x[ht],te=x[ht+1],we=lt(Pt[0],Pt[1],F,D,r),ge=lt(te[0],te[1],F,D,r);if(we&&ge)vt=++ht;else if(we&&!ge)(be=Ht(Pt[0],Pt[1],te[0],te[1],F,D,r))?(x[ht]=be,vt=ht):ht++;else if(!we&&ge){var be;(be=Ht(te[0],te[1],Pt[0],Pt[1],F,D,r))&&((bt=x.slice(vt,ht+1)).push(be),o.push(bt)),vt=++ht}else{var xe=Bt(Pt[0],Pt[1],te[0],te[1],F,D,r);xe?(((bt=x.slice(vt,ht+1))[bt.length-1][0]!==xe[0][0]||bt[bt.length-1][1]!==xe[0][1])&&bt.push(xe[0]),bt.length>1&&o.push(bt),x[ht]=xe[1],x[ht+1]&&x[ht+1][0]==xe[1][0]&&x[ht+1][1]==xe[1][1]&&ht++,vt=ht):ht++}}vt!==ht&&(bt=x.slice(vt,x.length))&&o.push(bt)}else o.push(x)},l=function(x,F){var te,D=i[F],ht=i[F+1],vt=0,bt=0;if(1!==x.length||-1!==(Pt=Mt(x[0][0],x[0][1],D[0],D[1],ht[0],ht[1],r)).indexOf(1)){for(;vt<x.length-1;){var we=x[vt],ge=x[vt+1],Pt=Mt(we[0],we[1],D[0],D[1],ht[0],ht[1],r),be=Mt(ge[0],ge[1],D[0],D[1],ht[0],ht[1],r);if(-1!==Pt.indexOf(1)&&-1!==be.indexOf(1))bt=++vt;else if(-1!==Pt.indexOf(1)&&-1===be.indexOf(1))(xe=Rt(we[0],we[1],Pt,ge[0],ge[1],D[0],D[1],ht[0],ht[1],r))?(x[vt]=xe,bt=vt):vt++;else if(-1===Pt.indexOf(1)&&-1!==be.indexOf(1)){var xe;(xe=Rt(ge[0],ge[1],be,we[0],we[1],D[0],D[1],ht[0],ht[1],r))?((te=x.slice(bt,vt+1)).push(xe),o.push(te),bt=++vt):vt++}else{var Ce=ct(we[0],we[1],ge[0],ge[1],D[0],D[1],ht[0],ht[1],r);Ce?(((te=x.slice(bt,vt+1))[te.length-1][0]!==Ce[0][0]||te[te.length-1][1]!==Ce[0][1])&&te.push(Ce[0]),te.length>1&&o.push(te),x[vt]=Ce[1],x[vt+1]&&x[vt+1][0]==Ce[1][0]&&x[vt+1][1]==Ce[1][1]&&vt++,bt=vt):vt++}}bt!==vt&&(te=x.slice(bt,x.length))&&o.push(te)}else o.push(x)};if(i=function Q(K){var i=[];if(1===K.length)i=K;else{for(var r=0;r<K.length-1;)(K[r][0]!==K[r+1][0]||K[r][1]!==K[r+1][1])&&i.push(K[r]),r++;0!==K.length&&0===i.length&&i.push(K[0]),(K[K.length-1][0]!==K[i.length-1][0]||K[K.length-1][1]!==K[i.length-1][1])&&i.push(K[r])}return i}(i),1===i.length){for(var g=0;g<K.length;g++)n(K[g]);K=o}else for(var m=0;m<i.length-1;m++){for(g=0;g<K.length;g++)l(K[g],m);K=o,o=[]}for(var c=0;c<K.length;c++)for(var L=0;L<K[c].length;L++)K[c][L][0]=Math.round(K[c][L][0]),K[c][L][1]=Math.round(K[c][L][1]);return K})(_t.data.getNode(bt).size.points,L,2);console.log(te)})})(x)}}}}var ut=w(6847);class J{constructor(){let i=(0,E.RY)(ot.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l,source:g}=(0,ut.L)(Math.ceil(1e9*Math.random())),m=(c,L,x,F)=>{l=(0,z.CE)(c,L,x,F),l.x=(0,h.z)(l.x),l.y=(0,h.z)(l.y),l.width=(0,h.z)(l.width),l.height=(0,h.z)(l.height),Object.assign(n,(0,z.xW)(S.h.TEXT,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:c=>{m(c.x,c.y,c.x+l.width,c.y+l.height)},move:(c,L)=>{m(L[0][0],L[0][1],c.x,c.y)},end:(c,L)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,z.xW)(S.h.TEXT,l,n)),(0,E.tD)(o,n)),_t.data.node=Object.assign({id:r,type:S.h.TEXT,name:"Text"},{size:l,attribute:n,source:g}),null==i||i.remove()}}}}var yt=w(4312),wt=w(2409),At=w(6078);var st=w(3073);class pt{constructor(){this._nodeName=["circle","ellipse","line","polygon","rect","text","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>_t.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var r,o,n,l,g;null===(r=window.document.getElementById(ot.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(o=window.document.getElementById(ot.F.SELECT_GROUP))||void 0===o||o.remove(),null===(n=window.document.getElementById(ot.F.SCAN_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(ot.F.CREATE_GROUP))||void 0===l||l.remove(),null===(g=window.document.getElementById(ot.F.INTERACTIVE_GROUP))||void 0===g||g.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(m=>m(i))}deleteNode(){for(let i of this._selected_Ids){let r=_t.data.deleteNode(i);_t.history.push([{type:"delete",from:{id:r},to:{id:r}}])}_t.dataSelect.ids=[]}groupNode(){let i=[];if(_t.dataSelect.ids.length>=2){let r=_t.data.getNode(_t.dataSelect.ids[0]),{nodeId:o,attribute:n,size:l}=(0,st.v)(Math.ceil(1e9*Math.random()),void 0,r.pid?window.document.getElementById(r.pid):null);_t.data.node=Object.assign({id:o,type:S.h.GROUP,name:"G"},{size:l,attribute:n});for(let g of _t.dataSelect.ids)i.push(_t.data.addGroup(g,o))}if(i.length){_t.dataSelect.ids=i;let r=_t.dataSelect.nodes;1==r.length?(0,_.K)(r[0]):r.length>1&&(0,y.E)(r)}}ungroupNode(){let i=[];for(let r of _t.dataSelect.ids)i.push(_t.data.unGroup(r));if(i.length){_t.dataSelect.ids=i;let r=_t.dataSelect.nodes;1==r.length?(0,_.K)(r[0]):r.length>1&&(0,y.E)(r)}}}var St=w(2837),Ft=w(8338);class qt{createNodeImage(i,r){var o,n,l,g;let{nodeId:c,element:L,size:x,attribute:F,source:D}=(0,tt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,St.U)(i)}});(ht=>{if(!ht)return;let vt=new Image;vt.onload=()=>{let bt=(0,h.z)(vt.naturalWidth/vt.naturalHeight,100);bt>=1?(x.width=Math.min(vt.naturalWidth,512),x.height=(0,h.z)(x.width/bt,100)):(x.height=Math.min(vt.naturalHeight,512),x.width=(0,h.z)(x.height*bt,100)),x.x=(0,h.z)(x.x+50-x.width/2,100),x.y=(0,h.z)(x.y+50-x.height/2,100),Object.assign(F,(0,z.xW)(S.h.IMAGE,x,F)),(0,E.tD)(L,F),_t.data.node=Object.assign({id:c,type:S.h.IMAGE,name:"Image"},{size:x,attribute:F,source:D})},vt.onerror=bt=>{console.error(`ImgSrc load failed -> ${ht}`,bt),null==L||L.remove()},vt.src=ht})(null!==(l=null===(g=D.image)||void 0===g?void 0:g.url)&&void 0!==l?l:"")}createNodeIframe(i,r){var o,n;let{nodeId:g,element:m,size:c,attribute:L,style:x,source:F}=(0,it.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,St.U)(i)}});(D=>{let ht=(null===(D=_t.data.slide)||void 0===D||null===(D=D.svg)||void 0===D?void 0:D.viewBox)||{x:0,y:0,width:100,height:100},vt=(0,h.z)(ht.width/ht.height,100);vt>=1?(c.width=Math.min(ht.width,512),c.height=(0,h.z)(c.width/vt,100)):(c.height=Math.min(ht.height,512),c.width=(0,h.z)(c.height*vt,100)),c.x=(0,h.z)(c.x+50-c.width/2,100),c.y=(0,h.z)(c.y+50-c.height/2,100),Object.assign(L,(0,z.xW)(S.h.IMAGE,c,L)),(0,E.tD)(m,L),_t.data.node=Object.assign({id:g,type:S.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:L,style:x,source:F})})()}createNodeEmbed(i,r){var o,n;let l={x:50,y:50,width:640,height:360};i.type==Ft.S.AUDIO&&(l.width=480,l.height=80);let{nodeId:g,element:m,size:c,attribute:L,style:x,source:F}=(0,it.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:l.x)-l.x,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:l.y)-l.y,width:l.width,height:l.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,St.U)(i))}});(()=>{let D=(0,h.z)(l.width/l.height,100);D>=1?(c.width=Math.min(c.width,l.width),c.height=(0,h.z)(c.width/D,1)):(c.height=Math.min(c.height,l.height),c.width=(0,h.z)(c.height*D,1)),c.x=(0,h.z)(c.x+l.x-c.width/2,1),c.y=(0,h.z)(c.y+l.y-c.height/2,1),Object.assign(L,(0,z.xW)(S.h.FOREIGNOBJECT,c,L)),(0,E.tD)(m,L),_t.data.node=Object.assign({id:g,type:S.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:L,style:x,source:F})})()}createNodeMedia(i,r){var o,n,l,g;let{nodeId:c,element:L,size:x,attribute:F,source:D}=(0,tt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,St.U)(i.cover)}}),ht={click:{media:i.media}};(vt=>{if(!vt)return;let bt=new Image;bt.onload=()=>{let Pt=(0,h.z)(bt.naturalWidth/bt.naturalHeight,100);Pt>=1?(x.width=Math.min(bt.naturalWidth,512),x.height=(0,h.z)(x.width/Pt,100)):(x.height=Math.min(bt.naturalHeight,512),x.width=(0,h.z)(x.height*Pt,100)),x.x=(0,h.z)(x.x+50-x.width/2,100),x.y=(0,h.z)(x.y+50-x.height/2,100),Object.assign(F,(0,z.xW)(S.h.IMAGE,x,F)),(0,E.tD)(L,F),_t.data.node=Object.assign({id:c,type:S.h.IMAGE,name:"Image"},{size:x,attribute:F,source:D,interactive:ht})},bt.onerror=Pt=>{console.error(`ImgSrc load failed -> ${vt}`,Pt),null==L||L.remove()},bt.src=vt})(null!==(l=null===(g=D.image)||void 0===g?void 0:g.url)&&void 0!==l?l:"")}createNodeText(i,r){var o,n;let{nodeId:g,element:m,size:c,attribute:L,style:x,source:F}=(0,it.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:0)-0,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let D=(0,h.z)(4,100);D>=1?(c.width=Math.min(c.width,320),c.height=(0,h.z)(c.width/D,1)):(c.height=Math.min(c.height,80),c.width=(0,h.z)(c.height*D,1)),c.x=(0,h.z)(c.x+0-c.width/2,1),c.y=(0,h.z)(c.y+0-c.height/2,1),Object.assign(L,(0,z.xW)(S.h.FOREIGNOBJECT,c,L)),(0,E.tD)(m,L),_t.data.node=Object.assign({id:g,type:S.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:L,style:x,source:F})})()}insert(i){var r;if(_t.data.insertSlide(_t.data.slideId,1),i.title){let{nodeId:o,size:n,attribute:l,style:g,source:m}=(0,it.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});_t.data.node=Object.assign({id:o,type:S.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:g,source:m})}if(i.description){let{nodeId:o,size:n,attribute:l,style:g,source:m}=(0,it.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});_t.data.node=Object.assign({id:o,type:S.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:g,source:m})}null!==(r=i.media)&&void 0!==r&&r.prompt&&((()=>{let{nodeId:o,size:n,attribute:l}=(0,q.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});_t.data.node=Object.assign({id:o,type:S.h.RECT,name:"Rect"},{size:n,attribute:l})})(),(o=>{let{nodeId:n,size:l,attribute:g,style:m,source:c}=(0,it.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});_t.data.node=Object.assign({id:n,type:S.h.FOREIGNOBJECT,name:"ForeignObject"},{size:l,attribute:g,style:m,source:c})})())}}var Zt=w(1026);class se{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:_t.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let r=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,g)=>g==this._slideIdx),o=null==r?void 0:r.svg,n=l=>{let g=[];return l.filter(m=>!m.isdeleted).forEach(m=>{m.type==S.h.GROUP?g=g.concat(n(m.nodes||[])):g.push(m.id)}),g};return n((null==o?void 0:o.nodes)||[])}}get get(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(g=>g.type==S.h.GROUP).forEach(g=>{var m;g.nodes=r(null===(m=g.nodes)||void 0===m?void 0:m.filter(c=>!c.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(g=>{var m,c;return g.type!=S.h.GROUP||(null!==(m=null===(c=g.nodes)||void 0===c?void 0:c.length)&&void 0!==m?m:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource}get getResource(){var i;let r=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n,l,g,m,c,L,x,F;r.push(null===(n=o.svg)||void 0===n||null===(n=n.background)||void 0===n?void 0:n.path),null===(l=o.svg)||void 0===l||l.nodes.forEach(D=>{var ht,vt,bt,Pt,te,we,ge,be,xe,Ce;r.push(null===(ht=D.source)||void 0===ht||null===(ht=ht.image)||void 0===ht?void 0:ht.path),r.push(null===(vt=D.source)||void 0===vt||null===(vt=vt.audio)||void 0===vt?void 0:vt.path),r.push(null===(bt=D.source)||void 0===bt||null===(bt=bt.video)||void 0===bt?void 0:bt.path),r.push(null===(Pt=D.source)||void 0===Pt||null===(Pt=Pt.file)||void 0===Pt?void 0:Pt.path),r.push(null===(te=D.source)||void 0===te||null===(te=te.iframe)||void 0===te?void 0:te.path),r.push(null===(we=D.source)||void 0===we||null===(we=we.track)||void 0===we?void 0:we.path),r.push(null===(ge=D.interactive)||void 0===ge||null===(ge=ge.show)||void 0===ge||null===(ge=ge.audio)||void 0===ge||null===(ge=ge.source)||void 0===ge?void 0:ge.path),r.push(null===(be=D.interactive)||void 0===be||null===(be=be.click)||void 0===be||null===(be=be.audio)||void 0===be||null===(be=be.source)||void 0===be?void 0:be.path),r.push(null===(xe=D.interactive)||void 0===xe||null===(xe=xe.click)||void 0===xe||null===(xe=xe.image)||void 0===xe||null===(xe=xe.source)||void 0===xe?void 0:xe.path),r.push(null===(Ce=D.interactive)||void 0===Ce||null===(Ce=Ce.click)||void 0===Ce||null===(Ce=Ce.video)||void 0===Ce||null===(Ce=Ce.source)||void 0===Ce?void 0:Ce.path)}),r.push(null===(g=o.test)||void 0===g||null===(g=g.audiotrue)||void 0===g?void 0:g.path),r.push(null===(m=o.test)||void 0===m||null===(m=m.audiofalse)||void 0===m?void 0:m.path),r.push(null===(c=o.test)||void 0===c||null===(c=c.effecttrue)||void 0===c?void 0:c.path),r.push(null===(L=o.test)||void 0===L||null===(L=L.effectfalse)||void 0===L?void 0:L.path),r.push(null===(x=o.test)||void 0===x||null===(x=x.icontrue)||void 0===x?void 0:x.path),r.push(null===(F=o.test)||void 0===F||null===(F=F.iconfalse)||void 0===F?void 0:F.path)}),r.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,n,l)=>l.indexOf(o)==n)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(g=>g.type==S.h.GROUP).forEach(g=>{var m;g.nodes=r(null===(m=g.nodes)||void 0===m?void 0:m.filter(c=>!c.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(g=>{var m,c;return g.type!=S.h.GROUP||(null!==(m=null===(c=g.nodes)||void 0===c?void 0:c.length)&&void 0!==m?m:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,r;return null!==(i=null===(r=this.slide)||void 0===r?void 0:r.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((r,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,r;this._slideIdx<(null!==(i=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,E.rN)(),(0,Zt.t)(this.slide)}openSlide(i,r){var o,n,l,g,m;if(i)for(let D=0,ht=null!==(c=null===(L=this._dataSource.slides)||void 0===L?void 0:L.length)&&void 0!==c?c:0;D<ht;D++){var c,L,x;if((null!==(x=this._dataSource.slides)&&void 0!==x?x:[])[D].id==i){this._slideIdx=D;break}}else if(r&&r>=0&&r<(null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==o?o:0))this._slideIdx=null!=r?r:0;else{var F;this._slideIdx=0,null!==(F=this._dataSource.slides)&&void 0!==F&&F.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,E.rN)(),null!==(l=this.slide)&&void 0!==l&&null!==(l=l.svg)&&void 0!==l&&l.viewBox&&(_t.screen.frameSize=this.slide.svg.viewBox),(0,Zt.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(g=null===(m=this._dataSource.slides)||void 0===m?void 0:m.length)&&void 0!==g?g:0,this.slide)}addSlide(){var i,r,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==r?r:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,r,o){var n,l,g,m,c;let L=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(F=>F.id==i);if(!o||!L||null!=L&&null!==(l=L.svg)&&void 0!==l&&l.nodes.filter(F=>!F.isdeleted).length)return this.insertSlide(i,r,o);let x=null!==(g=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(L))&&void 0!==g?g:0;null===(c=this._dataSource.slides)||void 0===c||c.splice(x,1,o),this._slideIdx=x,this.openSlide(void 0,this._slideIdx)}insertSlide(i,r,o){var n,l,g,m,c;let L=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(D=>D.id==i))&&void 0!==n?n:this._defaultSlide,x=(null!==(g=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(L))&&void 0!==g?g:0)+r;var F;o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(F=o.svg)&&void 0!==F&&F.viewBox||o.svg&&(o.svg.viewBox=_t.screen.frameSize)):o=this._defaultSlide,null===(c=this._dataSource.slides)||void 0===c||c.splice(x,0,o),this._slideIdx=x,this.openSlide(void 0,this._slideIdx)}copySlide(i){var r,o,n,l,g,m,c;let L=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(D=>D.id==i))&&void 0!==r?r:this._defaultSlide,x=(null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(L))&&void 0!==n?n:0)+1,F=Object.assign(JSON.parse(JSON.stringify(L)),{id:this.newSlideId,code:void 0,name:`${L.name} + (Copy)`});null===(g=this._dataSource.slides)||void 0===g||g.splice(x,0,F),this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(c=this._dataSource.slides)||void 0===c?void 0:c.length)&&void 0!==m?m:0,this.slide)}moveSlide(i,r){var o,n,l,g,m,c;let L=null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(F=>F.id==i))&&void 0!==o?o:this._defaultSlide,x=null!==(l=null===(g=this._dataSource.slides)||void 0===g?void 0:g.indexOf(L))&&void 0!==l?l:0;null===(m=this._dataSource.slides)||void 0===m||m.splice(x+r,0,null===(c=this._dataSource.slides)||void 0===c?void 0:c.splice(x,1)[0])}deleteSlide(i){var r,o,n,l,g,m;let c=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(D=>D.id==i))&&void 0!==r?r:this._defaultSlide,L=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(c))&&void 0!==n?n:0;if(null===(g=this._dataSource.slides)||void 0===g||g.splice(L,1),null!==(m=this._dataSource.slides)&&void 0!==m&&m.length)if(L<this._slideIdx){var x,F;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(x=null===(F=this._dataSource.slides)||void 0===F?void 0:F.length)&&void 0!==x?x:0,this.slide)}else L==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var r,o,n,l,g;let m=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(L=>L.id==i))&&void 0!==r?r:this._defaultSlide,c=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(m))&&void 0!==n?n:0;if(m.isdeleted=!0,null!==(g=this._dataSource.slides)&&void 0!==g&&null!==(g=g.filter(L=>!L.isdeleted))&&void 0!==g&&g.length){let L=!0;for(;m.isdeleted;)L?c++:c--,this._dataSource.slides[c]?m=this._dataSource.slides[c]:L=!L;this.openSlide(m.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,r,o,n){this._fnChangeSlides.forEach(l=>l(i,r,o,n))}set node(i){var r,o;let n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((l,g)=>g==this._slideIdx);null!=n&&null!==(o=n.svg)&&void 0!==o&&o.nodes&&n.svg.nodes.push(i),_t.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Zt.t)(n),(0,Zt.t)(n,null==n?void 0:n.id)}findNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((D,ht)=>ht==this._slideIdx),n=null==o?void 0:o.svg,l=(D,ht)=>{let vt=null==D?void 0:D.find(te=>te.id==i);if(vt)return vt.pid=ht,vt;let bt=0,Pt=D.length||0;for(;bt<Pt&&!vt&&(vt=l(D[bt].nodes||[],D[bt].id),!vt);)bt++;return vt},g=l((null==n?void 0:n.nodes)||[]);var m,c,L,x,F;return g?(g.style=null!==(m=g.style)&&void 0!==m?m:{},g.source=null!==(c=g.source)&&void 0!==c?c:{},g.animate=null!==(L=g.animate)&&void 0!==L?L:{},g.interactive=null!==(x=g.interactive)&&void 0!==x?x:{},g.variable=null!==(F=g.variable)&&void 0!==F?F:{},g):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((m,c)=>c==this._slideIdx),n=null==o?void 0:o.svg,g=m=>{let c=(null==m?void 0:m.find(vt=>vt.id==i))||(m=>{let c=null,L=0,x=m.length||0;for(;L<x&&!c;){if(c=g(m[L].nodes),c){c.pid=m[L].id;break}L++}var F,D,ht,vt,bt;return c&&(c.style=null!==(F=c.style)&&void 0!==F?F:{},c.source=null!==(D=c.source)&&void 0!==D?D:{},c.animate=null!==(ht=c.animate)&&void 0!==ht?ht:{},c.interactive=null!==(vt=c.interactive)&&void 0!==vt?vt:{},c.variable=null!==(bt=c.variable)&&void 0!==bt?bt:{}),c})((null==m?void 0:m.filter(vt=>vt.type==S.h.GROUP))||[]);var L,x,F,D,ht;return c&&(c.style=null!==(L=c.style)&&void 0!==L?L:{},c.source=null!==(x=c.source)&&void 0!==x?x:{},c.animate=null!==(F=c.animate)&&void 0!==F?F:{},c.interactive=null!==(D=c.interactive)&&void 0!==D?D:{},c.variable=null!==(ht=c.variable)&&void 0!==ht?ht:{}),c};return g((null==n?void 0:n.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,r,o,n,l){var g;let m=null===(g=this._dataSource.slides)||void 0===g?void 0:g.find((x,F)=>F==this._slideIdx),c=null==m?void 0:m.svg,L=x=>{let F=[];return x.filter(D=>!D.isdeleted).forEach(D=>{D.type==S.h.GROUP?F=F.concat(L(D.nodes||[])):i>D.size.x||r>D.size.y||o<D.size.x+D.size.width||n<D.size.y+D.size.height||(l?D.type==l&&F.push(D.id):F.push(D.id))}),F};return L((null==c?void 0:c.nodes)||[])}getNodeOnArea(i,r,o,n,l){var g;let m=null===(g=this._dataSource.slides)||void 0===g?void 0:g.find((x,F)=>F==this._slideIdx),c=null==m?void 0:m.svg,L=x=>{let F=[];return x.filter(D=>!D.isdeleted).forEach(D=>{D.type==S.h.GROUP?F=F.concat(L(D.nodes||[])):D.size.x+D.size.width<i||D.size.y+D.size.height<r||D.size.x>o||D.size.y>n||(l?D.type==l&&F.push(D.id):F.push(D.id))}),F};return L((null==c?void 0:c.nodes)||[])}deleteNode(i,r){var o;return this.getNode(i).isdeleted=null==r||r,(0,Zt.t)(this.slide),(0,Zt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var r,o;let n=this.getNode(i),l=Math.ceil(1e9*Math.random());return null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:l})),Object.assign(n,{isdeleted:!0}),(0,Zt.t)(this.slide),(0,Zt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),l}addGroup(i,r){var o;let n=this.getNode(i),l=this.getNode(r);l.nodes=l.nodes||[];let g=Math.ceil(1e9*Math.random());return l.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:g})),Object.assign(n,{isdeleted:!0}),(0,Zt.t)(this.slide),(0,Zt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),g}setNodeP(i,r){var o;let n=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(l=>l.id==i);n&&(n.pid=r||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,r){var o,n,l,g;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((x,F)=>{x.index=F+1});let m=(null!==(n=null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l?void 0:l.nodes.length)&&void 0!==n?n:0)+1;var c,L;i.map(x=>{var F,D;return{id:x,index:null!==(F=null===(D=this.slide)||void 0===D||null===(D=D.svg)||void 0===D||null===(D=D.nodes.find(ht=>ht.id==x))||void 0===D?void 0:D.index)&&void 0!==F?F:0}}).sort((x,F)=>x.index-F.index).forEach(x=>{var D,F;r?null===(D=this.slide)||void 0===D||null===(D=D.svg)||void 0===D||D.nodes.filter((ht,vt)=>ht.id==x.id).forEach(ht=>{ht.index=r+x.index+x.index/1e3}):null===(F=this.slide)||void 0===F||null===(F=F.svg)||void 0===F||F.nodes.filter(ht=>ht.id==x.id).forEach(ht=>{ht.index=m+x.index})}),null===(g=this.slide)||void 0===g||null===(g=g.svg)||void 0===g||g.nodes.sort((x,F)=>{var D,ht;return(null!==(D=x.index)&&void 0!==D?D:0)-(null!==(ht=F.index)&&void 0!==ht?ht:0)}),(0,Zt.$)(this.slide),i.length<=1?(null===(c=window.document.getElementById(ot.F.RESIZE_GROUP))||void 0===c||c.remove(),(0,_.K)(_t.dataSelect.nodes[0])):(null===(L=window.document.getElementById(ot.F.SELECT_GROUP))||void 0===L||L.remove(),(0,y.E)(_t.dataSelect.nodes))}sendToBackStep(i,r){var o,n,l,g;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((m,c)=>{m.index=c+1}),i.map(m=>{var c,L;return{id:m,index:null!==(c=null===(L=this.slide)||void 0===L||null===(L=L.svg)||void 0===L||null===(L=L.nodes.find(x=>x.id==m))||void 0===L?void 0:L.index)&&void 0!==c?c:0}}).sort((m,c)=>m.index-c.index).forEach(m=>{var L,c;r?null===(L=this.slide)||void 0===L||null===(L=L.svg)||void 0===L||L.nodes.filter(x=>x.id==m.id).forEach(x=>{x.index=r+m.index+m.index/1e3}):null===(c=this.slide)||void 0===c||null===(c=c.svg)||void 0===c||c.nodes.filter(x=>x.id==m.id).forEach(x=>{x.index=m.index/100-1})}),null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.sort((m,c)=>{var L,x;return(null!==(L=m.index)&&void 0!==L?L:0)-(null!==(x=c.index)&&void 0!==x?x:0)}),(0,Zt.$)(this.slide),i.length<=1?(null===(l=window.document.getElementById(ot.F.RESIZE_GROUP))||void 0===l||l.remove(),(0,_.K)(_t.dataSelect.nodes[0])):(null===(g=window.document.getElementById(ot.F.SELECT_GROUP))||void 0===g||g.remove(),(0,y.E)(_t.dataSelect.nodes))}bringToFrontArea(i){var r,o;let n=i.map(vt=>_t.data.getNode(vt)).filter(vt=>!vt.isfake),{x1:l,y1:g,x2:m,y2:c}=ne(n),L=this.getNodeOnArea(l,g,m,c);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((vt,bt)=>{vt.index=bt+1});let x=L.map(vt=>{var bt,Pt;return null!==(bt=null===(Pt=this.slide)||void 0===Pt||null===(Pt=Pt.svg)||void 0===Pt||null===(Pt=Pt.nodes.find(te=>te.id==vt))||void 0===Pt?void 0:Pt.index)&&void 0!==bt?bt:0}),F=Math.max.apply(null,x);var D,ht;i.forEach((vt,bt)=>{var Pt;null===(Pt=this.slide)||void 0===Pt||null===(Pt=Pt.svg)||void 0===Pt||Pt.nodes.filter(te=>te.id==vt).forEach(te=>{te.index=F+(bt+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((vt,bt)=>{var Pt,te;return(null!==(Pt=vt.index)&&void 0!==Pt?Pt:0)-(null!==(te=bt.index)&&void 0!==te?te:0)}),(0,Zt.$)(this.slide),i.length<=1?(null===(D=window.document.getElementById(ot.F.RESIZE_GROUP))||void 0===D||D.remove(),(0,_.K)(_t.dataSelect.nodes[0])):(null===(ht=window.document.getElementById(ot.F.SELECT_GROUP))||void 0===ht||ht.remove(),(0,y.E)(_t.dataSelect.nodes))}sendToBackArea(i){var r,o;let n=i.map(vt=>_t.data.getNode(vt)).filter(vt=>!vt.isfake),{x1:l,y1:g,x2:m,y2:c}=ne(n),L=this.getNodeOnArea(l,g,m,c);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((vt,bt)=>{vt.index=bt+1});let x=L.map(vt=>{var bt,Pt;return null!==(bt=null===(Pt=this.slide)||void 0===Pt||null===(Pt=Pt.svg)||void 0===Pt||null===(Pt=Pt.nodes.find(te=>te.id==vt))||void 0===Pt?void 0:Pt.index)&&void 0!==bt?bt:0}),F=Math.min.apply(null,x)-1;var D,ht;i.forEach((vt,bt)=>{var Pt;null===(Pt=this.slide)||void 0===Pt||null===(Pt=Pt.svg)||void 0===Pt||Pt.nodes.filter(te=>te.id==vt).forEach(te=>{te.index=F+(bt+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((vt,bt)=>{var Pt,te;return(null!==(Pt=vt.index)&&void 0!==Pt?Pt:0)-(null!==(te=bt.index)&&void 0!==te?te:0)}),(0,Zt.$)(this.slide),i.length<=1?(null===(D=window.document.getElementById(ot.F.RESIZE_GROUP))||void 0===D||D.remove(),(0,_.K)(_t.dataSelect.nodes[0])):(null===(ht=window.document.getElementById(ot.F.SELECT_GROUP))||void 0===ht||ht.remove(),(0,y.E)(_t.dataSelect.nodes))}}const ne=K=>{let i=999999,r=999999,o=-999999,n=-999999;return K.forEach(l=>{i=Math.min(i,l.size.x),r=Math.min(r,l.size.y),o=Math.max(o,l.size.x+l.size.width),n=Math.max(n,l.size.y+l.size.height)}),{x1:i,y1:r,x2:o,y2:n}};class ae{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":_t.data.deleteNode(r.from.id);break;case"edit":break;case"delete":_t.data.deleteNode(r.from.id,!1);break;case"size":{let{id:o,type:n,size:l,attribute:g}=_t.data.getNode(r.from.id);Object.assign(l,r.from.size),Object.assign(g,(0,z.xW)(n,l,g)),(0,E.tD)(window.document.getElementById(o),g);break}case"attribute":{let{id:o,attribute:n}=_t.data.getNode(r.from.id);Object.assign(n,r.from.attribute),(0,E.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=_t.data.getNode(r.from.id);Object.assign(null!=n?n:{},r.from.style),(0,E.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=_t.data.getNode(r.from.id);Object.assign(null!=l?l:{},r.from.source),(0,E.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=_t.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.animate);break}case"interactive":{let{interactive:o}=_t.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.interactive);break}case"variable":{let{variable:o}=_t.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.variable);break}}}),_t.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":_t.data.deleteNode(r.to.id,!1);break;case"edit":break;case"delete":_t.data.deleteNode(r.to.id,!0);break;case"size":{let{id:o,type:n,size:l,attribute:g}=_t.data.getNode(r.to.id);Object.assign(l,r.to.size),Object.assign(g,(0,z.xW)(n,l,g)),(0,E.tD)(window.document.getElementById(o),g);break}case"attribute":{let{id:o,attribute:n}=_t.data.getNode(r.to.id);Object.assign(n,r.to.attribute),(0,E.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=_t.data.getNode(r.to.id);Object.assign(null!=n?n:{},r.to.style),(0,E.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=_t.data.getNode(r.to.id);Object.assign(null!=l?l:{},r.to.source),(0,E.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=_t.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.animate);break}case"interactive":{let{interactive:o}=_t.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.interactive);break}case"variable":{let{variable:o}=_t.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.variable);break}}}),_t.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class pe{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var r,o;this._frameSize.width=null!==(r=null==i?void 0:i.width)&&void 0!==r?r:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,r,o){var n;if(!(i<.01||i>100)){if(r=null!==(n=r)&&void 0!==n?n:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-r.x,this._dislocation.y=this._height/i/2-r.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var l={x:Math.max(0,Math.min((0,h.z)(r.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,h.z)(r.y/this._height,1e3),1))},g={x:(this._width/i-this._width/this._scale)*l.x,y:(this._height/i-this._height/this._scale)*l.y};this._dislocation.x+=g.x,this._dislocation.y+=g.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,r){this._dislocation.x=i.x+r.x/this._scale,this._dislocation.y=i.y+r.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,E.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(r=>r(i))}}var Ae=w(6195);class ke{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,Ae.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,Ae._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(r=>r(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(r=>r(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(r=>r(i)),this.saveConfig()}}var me=w(5619),Oe=w(334),Te=w(3591),_e=function(K){return K&&JSON.parse(JSON.stringify(K))},Ue=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],He=[],$e={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},Xe={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class Ye{constructor(){this._data_variables=_e(Ue).concat(_e(He)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(r=>{r(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(r=>{r(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var r of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))r.if&&r.if.length>0&&(this.checkValueConditions(r.if)?this.setValueOperators(r.then||[]):this.setValueOperators(r.else||[]))}}renew(){this._data_variables=_e(Ue).concat(_e(He)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let r={};"string"==typeof i?r=JSON.parse(i):"object"==typeof i&&(r=i),this._data_variables=r.variables||[],this._data_conditions=r.conditions||(o=>(this._data_variables.map(n=>n.change||[]).forEach(n=>{o=o.concat(n)}),o))([]),Ue.forEach(o=>{var n=this._data_variables.filter(l=>l.key==o.key);n.length?n.forEach(function(l,g,m){l.type=o.type,l.readonly=o.readonly,l.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return _e($e)}getConditionTemp(){return _e(Xe)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,r){return i.localeCompare(r)})}getVariableAll(){return this._data_variables.length?_e((K=this._data_variables,i="key",function(r){for(var o of K.map(function(n){return n[i]}).sort())K.filter(function(n){return n[i]==o}).forEach(function(n){r.push(n)}),K=K.filter(function(n){return n[i]!=o});return r}([]))):_e(Ue).concat(_e(He));var K,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Ue.forEach(r=>{var o=this._data_variables.filter(n=>n.key==r.key);o.length?o.forEach((n,l,g)=>{n.type=r.type,n.readonly=r.readonly,n.system=r.system}):this._data_variables.push(r)}))}getVariable(i){return i?_e(this._data_variables.filter(r=>r.key==i)[0]||{}):{}}setVariable(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(l=>l.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(l=>l.key==i);n.length?n.forEach(function(l,g,m){l.value=r,l.type=o}):this._data_variables.push({key:i,value:r,type:o})}}getValue(i,r){if(!i)return"";var o=this._data_variables.filter(function(g){return g.key==i});if(o.length){var l,n=o[0]||{};switch(this.OnGetActionExecuting(n),r||(r=n.type||null),r){case"string":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":"string"==typeof n.value?n.value||"":n.value.toString().trim();break;case"number":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?0:"number"==typeof n.value?n.value||0:parseFloat(n.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(n.value)>=0?l=!1:"boolean"==typeof n.value?l=n.value:(l=(n.value+"").toLowerCase(),l="1"==n.value||"true"==n.value||"yes"==n.value||"dung"==n.value);break;case"audio-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></audio>`:"";break;case"video-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></video>`:"";break;case"img-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<img style="width:100%;vertical-align:middle;" src="${n.value}"/>`:"";break;default:l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value}return this.OnGetActionExecuted(n),l}return null}setValue(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(function(g){return g.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(function(g){return g.key==i});if(n.length){var l=n[0];this.OnSetActionExecuting(l),l&&(l.value=r),this.OnSetActionExecuted(l)}}}getConditionAll(){return _e(this._data_conditions.sort(function(i,r){return i.idx-r.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?_e(this._data_conditions.filter(r=>r.variable==i||(r.variables||[]).indexOf(i)>=0).sort(function(r,o){return r.idx-o.idx})):{}}switchCondition(i,r,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})>0):r==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),0==o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})):r!=o;case">=":return r>=o;case"<=":return r<=o;case">":return r>o;case"<":return r<o;case"\u2208":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),0==o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l});default:return!1}}switchOperator(i,r,o){switch(i){case"+":return r+o;case"-":return r-o;case"*":return r*o;case"/":return r/o;case"=":return o;case"=!":return!o;case"==":return r==o;case"!=":return r!=o}}switchFormula(i,r){switch(i){case"sum":return r.reduce(function(n,l){return n+l});case"sub":return r.reduce(function(n,l){return n-l});case"pro":return r.reduce(function(n,l){return n*l});case"div":return r.reduce(function(n,l){return n/l});case"avg":var o=r.reduce(function(n,l){return n+l})/(r.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,r);case"max":return Math.max.apply(null,r);case"and":return r.reduce(function(n,l){return n&&l});case"or":return r.reduce(function(n,l){return n||l});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var r=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),r)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(r=>{switch(r.type){case"variable":return this.switchValueType_Condition(r)?0:1;case"variables":return 0==r.variables.map(o=>this.switchValueType_Condition(Object.assign(_e(r),{variable:o}))?0:1).reduce(function(o,n){return o+n})?0:1;default:return 0}}).reduce((r,o)=>(null!=r?r:0)+(null!=o?o:0))}setValueOperators(i){for(var r of i)switch(r.type){case"variable":this.setValue(r.variable,this.getValueOperator(r));break;case"variables":for(var o of r.variables)this.setValue(o,this.getValueOperator(Object.assign(_e(r),{variable:o})));break;case"slide":me.J.runSlide(void 0,void 0,r.slide);break;case"node":{var n;(0,Te.GD)({id:r.node,nodeStatus:me.J.nodeStatus,slideStatus:me.J.slideStatus});let l=me.J.findNode(r.node);null!=l&&null!==(n=l.interactive)&&void 0!==n&&n.click&&(0,Oe.J)(l,me.J.nodeStatus,me.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(r=>{r(i)})}}class ti{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,r,o){if(this._pointer_type=i,r)switch(i){case T.P.PEN:this._pen_type=r;break;case T.P.SHAPE:this._shape_type=r,o&&r===S.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case T.P.PEN:this._pen_type||(this._pen_type=wt.F.DRAW);break;case T.P.SHAPE:this._shape_type||(this._shape_type=S.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,r,o){this._fnChangePointerTypes.forEach(n=>n(i,r,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,r,o){this._fnChangePointerTypeTemps.forEach(n=>n(i,r,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,r,o){this._fnChangePenTypes.forEach(n=>n(i,r,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,r,o){this._fnChangeShapeTypes.forEach(n=>n(i,r,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,r,o){this._fnChangePolygonTypes.forEach(n=>n(i,r,o))}set onchange(i){this._fnChanges.push(i)}change(i,r,o){this._fnChanges.forEach(n=>n(i,r,o))}}const _t=new class hi{constructor(){this._container="",this._svg="",this._screen=pe.prototype,this._data=se.prototype,this._dataSelect=pt.prototype,this._slide=qt.prototype,this._history=ae.prototype,this._attribute=ke.prototype,this._pointer=ti.prototype,this._variable=Ye.prototype,this._data=new se,this._dataSelect=new pt,this._slide=new qt,this._history=new ae,this._attribute=new ke,this._pointer=new ti,this._variable=new Ye,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,r,o,n,l;this._screen.screen=(i=jQuery(this._container).offset(),r=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(n=null==i?void 0:i.left)&&void 0!==n?n:0,y:null!==(l=null==i?void 0:i.top)&&void 0!==l?l:0},width:null!=r?r:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new pe,(K=>{new E.cR(K.container,K.target);var i=(n,l,g,m)=>{switch(n){case T.P.POINTER:jQuery(K.target).css({cursor:"auto"});break;case T.P.HAND:m?jQuery(K.target).css({cursor:"grabbing"}):jQuery(K.target).css({cursor:"grab"});break;case T.P.PEN:switch(l){case wt.F.DRAW:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case wt.F.HIGHTLIGH:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case T.P.ERASER:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case T.P.SHAPE:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case T.P.TEXT:case T.P.FOREIGNOBJECT:jQuery(K.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};_t.pointer.onchange=(n,l,g)=>{i(n,l)},jQuery(K.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",n=>{i(_t.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",n=>{i(_t.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",n=>{n.ctrlKey&&n.preventDefault()},{passive:!1}),jQuery(K.container).off("wheel.icdt-init").on("wheel.icdt-init",n=>{var l;n.preventDefault();let g=null!==(l=n.originalEvent)&&void 0!==l?l:n;if(!g.deltaX&&g.deltaY!=Math.floor(g.deltaY)||g.ctrlKey){var m=_t.screen.scale;_t.screen.scaleTo(m-.04*m*(g.deltaY>0?1:-1),(0,At.D)({x:n.clientX,y:n.clientY},1,{x:0,y:0},_t.screen.offset))}else _t.screen.move(_t.screen.dislocation,{x:-g.deltaX,y:-g.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{_t.screen.actived=!!jQuery(n.target).parents(_t.container).length}),jQuery(K.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",n=>{_t.screen.actived=!0}),jQuery(K.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",n=>{_t.screen.actived=!1,_t.pointer.pointer_type_temp==T.P.HAND&&(_t.pointer.pointer_type_temp=T.P.POINTER)}),jQuery(K.container).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{0==n.button&&(K.container.includes("#")&&K.container.includes(n.target.getAttribute("id"))||K.container.includes(".")&&K.container.includes(n.target.getAttribute("class"))||K.container.includes(n.target.nodeName))&&(_t.pointer.pointer_type_temp||_t.pointer.pointer_type)===T.P.POINTER&&(_t.dataSelect.ids=[])}),jQuery(K.container).off("touchmove.icdt-init").on("touchmove.icdt-init",n=>{n.preventDefault()});const r=n=>{switch(_t.pointer.pointer_type_temp||_t.pointer.pointer_type){case T.P.POINTER:f(n);break;case T.P.HAND:(K=>{(0,gt.I)(K,new A,1,{x:0,y:0})})(n);break;case T.P.PEN:(0,xt.u)(n);break;case T.P.SHAPE:(K=>{var i=null;switch(_t.pointer.shape_type){case S.h.CIRCLE:i=new I;break;case S.h.ELLIPSE:i=new Y;break;case S.h.LINE:i=new Vt;break;case S.h.RECT:i=new X;break;case S.h.POLYGON:var r;i=new V(null===(r=p.find(o=>o.type==_t.pointer.polygon_type))||void 0===r?void 0:r.ratios);break;case S.h.FOREIGNOBJECT:i=new Ot;break;case S.h.IMAGE:i=new It;break;case S.h.TEXT:case S.h.PATH:i=new jt}i&&(0,gt.I)(K,i)})(n);break;case T.P.FOREIGNOBJECT:(K=>{(0,gt.I)(K,new Ot)})(n);break;case T.P.IMAGE:(K=>{(0,gt.I)(K,new It)})(n);break;case T.P.TEXT:(K=>{(0,gt.I)(K,new J)})(n);break;case T.P.ERASER:(K=>{(0,gt.I)(K,new B)})(n);break;case T.P.INDEX:(0,yt.h)(n)}};let o=!1;jQuery(K.target).off("touchstart.icdt-init").on("touchstart.icdt-init",n=>{o=!0,r({touchEvent:n})}),jQuery(K.target).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{if(1!=n.button){if(o)return void(o=!1);r({mouseEvent:n})}}),K.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",n=>{_t.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,kt.K)(n))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",n=>{_t.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,kt.K)(n))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(he,zt,w)=>{w.d(zt,{h:()=>N,y:()=>f});var T=w(7873),E=w(7102),ot=w(9506),z=w(1308),gt=w(5970);const N=P=>{var A,S,dt,p;let R=(null===(A=P.mouseEvent)||void 0===A?void 0:A.target)||(null===(S=P.touchEvent)||void 0===S?void 0:S.target),h=(null==R?void 0:R.getAttribute("id"))||"",I=null==R?void 0:R.nodeName,j=jQuery(R).parents("g[id]").attr("id")||"";if(![T.F.INDEX_GROUP].includes(j))if(null!==(dt=P.mouseEvent)&&void 0!==dt&&dt.altKey||null!==(p=P.touchEvent)&&void 0!==p&&p.altKey||!h||h.match(/[^0-9]/)||!E.L.dataSelect.nodeName.includes(I)){var Y;E.L.dataSelect.ids.length&&(E.L.dataSelect.ids=[]),(0==(null===(Y=P.mouseEvent)||void 0===Y?void 0:Y.button)||P.touchEvent)&&((P,A)=>{let h=(0,gt.RY)(T.F.SCAN_GROUP,"g"),I=(0,ot.CE)(0,0,1,1);(0,gt.xJ)(h,I),((P,A,S,dt)=>{(0,z.I)(P,{start:h=>{},move:(h,I)=>{((h,I,j,Y)=>{A=(0,ot.CE)(h,I,j,Y),(0,gt.xJ)(S,A)})(I[0][0],I[0][1],h.x,h.y)},end:(h,I)=>{null==S||S.remove(),E.L.dataSelect.ids=E.L.data.getNodeInArea(Math.min(I[0][0],h.x),Math.min(I[0][1],h.y),Math.max(I[0][0],h.x),Math.max(I[0][1],h.y)),dt(E.L.dataSelect.nodes)}})})(P,I,h,A)})(P,M)}else{var q,X;let H=parseFloat(h||"0");E.L.dataSelect.ids=null!==(q=P.mouseEvent)&&void 0!==q&&q.shiftKey||null!==(X=P.touchEvent)&&void 0!==X&&X.shiftKey?[H].concat(E.L.dataSelect.ids).filter((Et,Vt,Qt)=>Qt.indexOf(Et)==Vt):[H],M(E.L.dataSelect.nodes)}},M=P=>{var A,S;let dt=1;var p,R;if(P.length&&(dt=Math.max.apply(null,null!==(p=null===(R=E.L.data.slide)||void 0===R||null===(R=R.svg)||void 0===R?void 0:R.nodes.map(I=>{var j;return null!==(j=I.idx)&&void 0!==j?j:0}))&&void 0!==p?p:[0])+1),1==P.length)P[0].idx||(P[0].idx=dt,P[0].time=0);else if(P.length>=0){let I=P.map(Y=>{var q;return null!==(q=Y.idx)&&void 0!==q?q:0}).filter(Y=>Y>0),j=I.length?Math.min.apply(null,I):dt;P.forEach(Y=>{var q;Y.idx=j,Y.time=null!==(q=Y.time)&&void 0!==q?q:0})}let h=(0,gt.RY)(T.F.INDEX_GROUP,"g");(0,gt.IA)(h,null!==(A=null===(S=E.L.data.slide)||void 0===S||null===(S=S.svg)||void 0===S?void 0:S.nodes)&&void 0!==A?A:[])},f=P=>{var A,S,dt;null!=P&&null!==(A=P.svg)&&void 0!==A&&A.nodes&&P.svg.nodes.forEach(R=>{R.idx=0,R.time=null});let p=(0,gt.RY)(T.F.INDEX_GROUP,"g");(0,gt.IA)(p,null!==(S=null===(dt=E.L.data.slide)||void 0===dt||null===(dt=dt.svg)||void 0===dt?void 0:dt.nodes)&&void 0!==S?S:[])}},7135:(he,zt,w)=>{w.d(zt,{K:()=>S,X:()=>A});var T=w(6195),E=w(1477),ot=w(3603),z=w(7102),gt=w(6037),_=w(4333),y=w(1026),N=w(9841),M=w(2492),f=w(6752);const A=new class P{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:E.r.Escape,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:E.r.Delete,fn:()=>{z.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:E.r.Space,fn:()=>{z.L.pointer.pointer_type_temp=ot.P.HAND}},this.onchange={type:"keyup",key:E.r.Space,fn:()=>{z.L.pointer.pointer_type_temp=ot.P.POINTER}},this.onchange={type:"keydown",key:E.r.ArrowLeft,fn:()=>{z.L.dataSelect.ids.length||z.L.data.backSlide()}},this.onchange={type:"keydown",key:E.r.ArrowRight,fn:()=>{z.L.dataSelect.ids.length||z.L.data.nextSlide()}},this.onchange={type:"keydown",key:E.r.ArrowLeft,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(p=>{(0,f.ei)(p,(0,M.z)(p.size.x-(0,N.$)(1)))}),1==z.L.dataSelect.ids.length?(0,gt.K)(z.L.dataSelect.nodes[0]):(0,_.E)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowRight,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(p=>{(0,f.ei)(p,(0,M.z)(p.size.x+(0,N.$)(1)))}),1==z.L.dataSelect.ids.length?(0,gt.K)(z.L.dataSelect.nodes[0]):(0,_.E)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowUp,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(p=>{(0,f.ZF)(p,(0,M.z)(p.size.y-(0,N.$)(1)))}),1==z.L.dataSelect.ids.length?(0,gt.K)(z.L.dataSelect.nodes[0]):(0,_.E)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowDown,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(p=>{(0,f.ZF)(p,(0,M.z)(p.size.y+(0,N.$)(1)))}),1==z.L.dataSelect.ids.length?(0,gt.K)(z.L.dataSelect.nodes[0]):(0,_.E)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.Digit1,fn:p=>{p.shiftKey&&(z.L.reloadView(),z.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:E.r.KeyA,fn:p=>{if(p.ctrlKey){z.L.dataSelect.ids=z.L.data.getNodeAll();let R=z.L.dataSelect.nodes;1==R.length?(0,gt.K)(R[0]):R.length>1&&(0,_.E)(R)}}},this.onchange={type:"keydown",key:E.r.KeyC,fn:p=>{if(p.ctrlKey){let R=z.L.dataSelect.nodes;R&&(0,T.IB)({params:{type:"nodes",nodes:R}})}}},this.onchange={type:"keydown",key:E.r.KeyV,fn:p=>{p.ctrlKey&&(0,T.A9)({callback:R=>{var h,I;"nodes"==(null==R?void 0:R.type)&&null!=R&&null!==(h=R.nodes)&&void 0!==h&&h.length&&(null==R||null===(I=R.nodes)||void 0===I||I.forEach(j=>{p.shiftKey||z.L.data.findNode(j.id).id&&(j.size.x+=16,j.size.y+=16),j.id=Math.ceil(1e9*Math.random()),z.L.data.node=j}),(0,y.t)(z.L.data.slide))}})}},this.onchange={type:"keydown",key:E.r.KeyZ,fn:p=>{p.ctrlKey&&p.shiftKey?z.L.history.redo():p.ctrlKey&&z.L.history.undo()}},this.onchange={type:"keydown",key:E.r.BracketLeft,fn:p=>{p.ctrlKey&&p.shiftKey?z.L.data.sendToBack(z.L.dataSelect.ids):p.ctrlKey?z.L.data.sendToBackStep(z.L.dataSelect.ids,-2):z.L.data.sendToBackArea(z.L.dataSelect.ids)}},this.onchange={type:"keydown",key:E.r.BracketRight,fn:p=>{p.ctrlKey&&p.shiftKey?z.L.data.bringToFront(z.L.dataSelect.ids):p.ctrlKey?z.L.data.bringToFrontStep(z.L.dataSelect.ids,1):z.L.data.bringToFrontArea(z.L.dataSelect.ids)}}}set onchange(p){let R=this._fnChanges.find(h=>h.eventType==p.type&&h.eventKey==p.key);R?R.fns.push(p.fn):this._fnChanges.push({eventType:p.type,eventKey:p.key,fns:[p.fn]})}change(p,R,h){var I;null===(I=this._fnChanges.find(j=>j.eventType==p&&j.eventKey==R))||void 0===I||I.fns.forEach(j=>j(h))}},S=dt=>{A.change(dt.type,dt.keyCode||dt.which||dt.charCode||0,dt)}},669:(he,zt,w)=>{w.d(zt,{O:()=>N});var T=w(6407),E=w(5970),ot=w(1131),z=w(9841),gt=w(7873),_=w(7102),y=w(1281);class N{constructor(f,P){var A,S;let dt={stroke:"#FF0000",strokeWidth:(0,z.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,z.$)(8)},{element:p}=(0,T.X)(Math.ceil(1e9*Math.random()),{size:P});window.document.getElementById(gt.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(X=>null==X?void 0:X.remove()),window.document.getElementById(gt.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(X=>null==X?void 0:X.remove()),null===(A=window.document.getElementById(gt.F.INTERACTIVE_GROUP))||void 0===A||A.appendChild(p);var I=X=>{if(!X.length)return;let H=[];if(1==X.length){var V;let{size:Et}=null!==(V=null!=f?f:_.L.dataSelect.nodes[0])&&void 0!==V?V:{};if(!Et)return;H=[[Et.x+Et.width/2,Et.y+Et.height/2],X[0]]}else H=[...X];Y(H),j(H[0],"start"),j(H[H.length-1],"end")},j=(X,H)=>{X&&((V=>{let{element:Et}=(0,y.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==H?"#FF0000":"#00BA00",strokeWidth:(0,z.$)(1)},size:{x:X[0]-5,y:X[1]-5,width:10,height:10}});null===(V=window.document.getElementById(gt.F.INTERACTIVE_GROUP))||void 0===V||V.prepend(Et)})(),((V,Et)=>{let{size:Vt}=null!==(V=null!=f?f:_.L.dataSelect.nodes[0])&&void 0!==V?V:{};if(!Vt)return;let Qt=[[X[0]-Vt.width/2,X[1]-Vt.height/2],[X[0]+Vt.width/2,X[1]-Vt.height/2],[X[0]+Vt.width/2,X[1]+Vt.height/2],[X[0]-Vt.width/2,X[1]+Vt.height/2],[X[0]-Vt.width/2,X[1]-Vt.height/2]],{element:Jt}=(0,T.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,z.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,z.$)(8)},size:{x:0,y:0,width:10,height:10,points:Qt}});null===(Et=window.document.getElementById(gt.F.INTERACTIVE_GROUP))||void 0===Et||Et.prepend(Jt)})())},Y=X=>{let V=ot.n8j().x(Et=>Et[0]).y(Et=>Et[1]).curve(ot.qrM)(X);p.setAttribute("d",V)};(0,E.tD)(p,dt),I(null!==(S=null==P?void 0:P.points)&&void 0!==S?S:[]);let q="";return{start:X=>{q=`M ${X.x} ${X.y} L ${X.x} ${X.y}`},move:(X,H)=>{q+=` ${X.x} ${X.y}`,p.setAttribute("d",q)},end:(X,H)=>{I(H),H.length&&(window.interactivePoints=H)}}}}},4979:(he,zt,w)=>{w.d(zt,{z:()=>dt,u:()=>S});var T=w(7873),E=w(2409),ot=w(7102),z=w(1308),gt=w(5970),_=w(1131),y=w(6407),N=w(1999),M=w(4896);class f{constructor(){let R={stroke:ot.L.attribute.stroke,strokeWidth:ot.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:h,element:I,attribute:j,size:Y}=(0,y.X)(Math.ceil(1e9*Math.random()),{attribute:R});(0,gt.tD)(I,j);let q="",X="";return{start:V=>{q=`M ${V.x} ${V.y} L ${V.x} ${V.y}`},move:(V,Et)=>{((V,Et)=>{q+=` ${V} ${Et}`,I.setAttribute("d",q)})(V.x,V.y)},end:(V,Et)=>{var Vt;Et.length>=3?(X=null!==(Vt=_.n8j().x(It=>It[0]).y(It=>It[1]).curve(_.qrM)(Et))&&void 0!==Vt?Vt:"",I.setAttribute("d",X)):I.setAttribute("d",q);let Qt=(0,M.CS)(X||q),{minX:Jt,minY:jt,maxX:it,maxY:Ot}=(0,M.lP)(Qt);Y.x=Jt,Y.y=jt,Y.width=it-Jt||1,Y.height=Ot-jt||1,Y.ratioMaps=(0,M.nf)(Y,Qt),ot.L.data.node=Object.assign({id:h,type:N.h.PATH,name:"Path"},{size:Y,attribute:j})}}}}class P{constructor(){let R={stroke:ot.L.attribute.stroke,strokeOpacity:.4,strokeWidth:ot.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:h,element:I,attribute:j,size:Y}=(0,y.X)(Math.ceil(1e9*Math.random()),{attribute:R});(0,gt.tD)(I,j);let q="";return{start:V=>{q=`M ${V.x} ${V.y} L ${V.x} ${V.y}`},move:(V,Et)=>{((V,Et)=>{q+=` ${V} ${Et}`,I.setAttribute("d",q)})(V.x,V.y)},end:(V,Et)=>{let Vt=(0,M.CS)(q),{minX:Qt,minY:Jt,maxX:jt,maxY:it}=(0,M.lP)(Vt);Y.x=Qt,Y.y=Jt,Y.width=jt-Qt||1,Y.height=it-Jt||1,Y.ratioMaps=(0,M.nf)(Y,Vt),ot.L.data.node=Object.assign({id:h,type:N.h.PATH,name:"Path"},{size:Y,attribute:j})}}}}var A=w(669);const S=p=>{switch(ot.L.pointer.pen_type){case E.F.DRAW:(0,z.I)(p,new f);break;case E.F.HIGHTLIGH:(0,z.I)(p,new P);break;case E.F.INTERACTIVE:dt(p)}},dt=p=>{var R,h;let I=(0,gt.RY)(T.F.INTERACTIVE_GROUP,"g"),j=null!==(R=null===(h=ot.L.data.slide)||void 0===h||null===(h=h.svg)||void 0===h?void 0:h.viewBox)&&void 0!==R?R:(()=>{let{width:Y,height:q}=ot.L.screen.get;return{x:0,y:0,width:Y,height:q}})();(0,gt.KP)(I,j),p&&(0,z.I)(p,new A.O)}},6037:(he,zt,w)=>{w.d(zt,{K:()=>y});var T=w(7873),E=w(7102),ot=w(9506),z=w(1308),gt=w(5970),_=w(2492);const y=f=>{let P=(0,gt.RY)(T.F.RESIZE_GROUP,"g");(0,gt.AE)(P,f).forEach(A=>{N(A.element,A.posType,f,P)})},N=(f,P,A,S)=>{let dt=!1;null==f||f.addEventListener("touchstart",p=>{dt=!0,M({touchEvent:p},P,A,S)}),null==f||f.addEventListener("mousedown",p=>{if(0==p.button){if(dt)return void(dt=!1);M({mouseEvent:p},P,A,S)}})},M=(f,P,A,S)=>{let H,{id:dt,type:p,size:R,attribute:h}=A,{x:I,y:j,width:Y,height:q}=R,X=(Y||1)/(q||1),Et=null,Jt=!1;(0,z.I)(f,{start:it=>{Et=JSON.parse(JSON.stringify({id:dt,size:R,attribute:h}))},move:(it,Ot)=>{((it,Ot,tt,It)=>{let Ct=tt-it,kt=It-Ot;switch(P){case"rect-center":var xt,W;H=null!==(xt=f.mouseEvent)&&void 0!==xt&&xt.shiftKey||null!==(W=f.touchEvent)&&void 0!==W&&W.shiftKey?Math.abs(tt-it)>=Math.abs(It-Ot)?{x:I+tt-it,y:j,width:Y,height:q}:{x:I,y:j+It-Ot,width:Y,height:q}:{x:I+tt-it,y:j+It-Ot,width:Y,height:q};break;case"rect-top-left":var Q,u,lt,Tt,Mt,Dt,Ht,Bt;H=(null!==(Q=f.mouseEvent)&&void 0!==Q&&Q.shiftKey||null!==(u=f.touchEvent)&&void 0!==u&&u.shiftKey)&&(null!==(lt=f.mouseEvent)&&void 0!==lt&&lt.altKey||null!==(Tt=f.touchEvent)&&void 0!==Tt&&Tt.altKey)?X>=1?{x:I+(tt-it),y:j+(tt-it)/X,width:Y-2*(tt-it),height:q-2*(tt-it)/X}:{x:I+(It-Ot)*X,y:j+(It-Ot),width:Y-2*(It-Ot)*X,height:q-2*(It-Ot)}:null!==(Mt=f.mouseEvent)&&void 0!==Mt&&Mt.shiftKey||null!==(Dt=f.touchEvent)&&void 0!==Dt&&Dt.shiftKey?X>=1?{x:I+(tt-it),y:j+(tt-it)/X,width:Y-(tt-it),height:q-(tt-it)/X}:{x:I+(It-Ot)*X,y:j+(It-Ot),width:Y-(It-Ot)*X,height:q-(It-Ot)}:null!==(Ht=f.mouseEvent)&&void 0!==Ht&&Ht.altKey||null!==(Bt=f.touchEvent)&&void 0!==Bt&&Bt.altKey?{x:I+(tt-it),y:j+(It-Ot),width:Y-2*(tt-it),height:q-2*(It-Ot)}:{x:I+(tt-it),y:j+(It-Ot),width:Y-(tt-it),height:q-(It-Ot)};break;case"rect-top-right":var Wt,Rt,ct,Yt,C,d,B,nt;H=(null!==(Wt=f.mouseEvent)&&void 0!==Wt&&Wt.shiftKey||null!==(Rt=f.touchEvent)&&void 0!==Rt&&Rt.shiftKey)&&(null!==(ct=f.mouseEvent)&&void 0!==ct&&ct.altKey||null!==(Yt=f.touchEvent)&&void 0!==Yt&&Yt.altKey)?X>=1?{x:I-(tt-it),y:j-(tt-it)/X,width:Y+2*(tt-it),height:q+2*(tt-it)/X}:{x:I+(It-Ot)*X,y:j+(It-Ot),width:Y-2*(It-Ot)*X,height:q-2*(It-Ot)}:null!==(C=f.mouseEvent)&&void 0!==C&&C.shiftKey||null!==(d=f.touchEvent)&&void 0!==d&&d.shiftKey?X>=1?{x:I,y:j-(tt-it)/X,width:Y+(tt-it),height:q+(tt-it)/X}:{x:I,y:j+(It-Ot),width:Y-(It-Ot)*X,height:q-(It-Ot)}:null!==(B=f.mouseEvent)&&void 0!==B&&B.altKey||null!==(nt=f.touchEvent)&&void 0!==nt&&nt.altKey?{x:I-(tt-it),y:j+(It-Ot),width:Y+2*(tt-it),height:q-2*(It-Ot)}:{x:I,y:j+(It-Ot),width:Y+(tt-it),height:q-(It-Ot)};break;case"rect-bottom-left":var ut,J,O,Z,et,yt,wt,At;H=(null!==(ut=f.mouseEvent)&&void 0!==ut&&ut.shiftKey||null!==(J=f.touchEvent)&&void 0!==J&&J.shiftKey)&&(null!==(O=f.mouseEvent)&&void 0!==O&&O.altKey||null!==(Z=f.touchEvent)&&void 0!==Z&&Z.altKey)?X>=1?{x:I+(tt-it),y:j+(tt-it)/X,width:Y-2*(tt-it),height:q-2*(tt-it)/X}:{x:I-(It-Ot)*X,y:j-(It-Ot),width:Y+2*(It-Ot)*X,height:q+2*(It-Ot)}:null!==(et=f.mouseEvent)&&void 0!==et&&et.shiftKey||null!==(yt=f.touchEvent)&&void 0!==yt&&yt.shiftKey?X>=1?{x:I+(tt-it),y:j,width:Y-(tt-it),height:q-(tt-it)/X}:{x:I-(It-Ot)*X,y:j,width:Y+(It-Ot)*X,height:q+(It-Ot)}:null!==(wt=f.mouseEvent)&&void 0!==wt&&wt.altKey||null!==(At=f.touchEvent)&&void 0!==At&&At.altKey?{x:I+(tt-it),y:j-(It-Ot),width:Y-2*(tt-it),height:q+2*(It-Ot)}:{x:I+(tt-it),y:j,width:Y-(tt-it),height:q+(It-Ot)};break;case"rect-bottom-right":var mt,st,pt,St,Ft,qt,Zt,se;H=(null!==(mt=f.mouseEvent)&&void 0!==mt&&mt.shiftKey||null!==(st=f.touchEvent)&&void 0!==st&&st.shiftKey)&&(null!==(pt=f.mouseEvent)&&void 0!==pt&&pt.altKey||null!==(St=f.touchEvent)&&void 0!==St&&St.altKey)?X>=1?{x:I-(tt-it),y:j-(tt-it)/X,width:Y+2*(tt-it),height:q+2*(tt-it)/X}:{x:I-(It-Ot)*X,y:j-(It-Ot),width:Y+2*(It-Ot)*X,height:q+2*(It-Ot)}:null!==(Ft=f.mouseEvent)&&void 0!==Ft&&Ft.shiftKey||null!==(qt=f.touchEvent)&&void 0!==qt&&qt.shiftKey?X>=1?{x:I,y:j,width:Y+(tt-it),height:q+(tt-it)/X}:{x:I,y:j,width:Y+(It-Ot)*X,height:q+(It-Ot)}:null!==(Zt=f.mouseEvent)&&void 0!==Zt&&Zt.altKey||null!==(se=f.touchEvent)&&void 0!==se&&se.altKey?{x:I-(tt-it),y:j-(It-Ot),width:Y+2*(tt-it),height:q+2*(It-Ot)}:{x:I,y:j,width:Y+(tt-it),height:q+(It-Ot)};break;case"rect-top":var ne,ae,pe,Ae;H=null!==(ne=f.mouseEvent)&&void 0!==ne&&ne.shiftKey||null!==(ae=f.touchEvent)&&void 0!==ae&&ae.shiftKey?{x:I+kt/2*X,y:j+kt,width:Y-kt*X,height:q-kt}:null!==(pe=f.mouseEvent)&&void 0!==pe&&pe.altKey||null!==(Ae=f.touchEvent)&&void 0!==Ae&&Ae.altKey?{x:I,y:j+kt,width:Y,height:q-2*kt}:{x:I,y:j+kt,width:Y,height:q-kt};break;case"rect-bottom":var ke,me,Oe,Te;H=null!==(ke=f.mouseEvent)&&void 0!==ke&&ke.shiftKey||null!==(me=f.touchEvent)&&void 0!==me&&me.shiftKey?{x:I-kt/2*X,y:j,width:Y+kt*X,height:q+kt}:null!==(Oe=f.mouseEvent)&&void 0!==Oe&&Oe.altKey||null!==(Te=f.touchEvent)&&void 0!==Te&&Te.altKey?{x:I,y:j-kt,width:Y,height:q+2*kt}:{x:I,y:j,width:Y,height:q+kt};break;case"rect-left":var je,_e,qe,Ue;H=null!==(je=f.mouseEvent)&&void 0!==je&&je.shiftKey||null!==(_e=f.touchEvent)&&void 0!==_e&&_e.shiftKey?{x:I+Ct,y:j+Ct/2/X,width:Y-Ct,height:q-Ct/X}:null!==(qe=f.mouseEvent)&&void 0!==qe&&qe.altKey||null!==(Ue=f.touchEvent)&&void 0!==Ue&&Ue.altKey?{x:I+Ct,y:j,width:Y-2*Ct,height:q}:{x:I+Ct,y:j,width:Y-Ct,height:q};break;case"rect-right":var He,$e,Xe,Ye;H=null!==(He=f.mouseEvent)&&void 0!==He&&He.shiftKey||null!==($e=f.touchEvent)&&void 0!==$e&&$e.shiftKey?{x:I,y:j-Ct/2/X,width:Y+Ct,height:q+Ct/X}:null!==(Xe=f.mouseEvent)&&void 0!==Xe&&Xe.altKey||null!==(Ye=f.touchEvent)&&void 0!==Ye&&Ye.altKey?{x:I-Ct,y:j,width:Y+2*Ct,height:q}:{x:I,y:j,width:Y+Ct,height:q};break;default:H={x:I+tt-it,y:j+It-Ot,width:Y,height:q}}H.width<0&&(H.width=0),H.height<0&&(H.height=0),H.x=(0,_.z)(H.x),H.y=(0,_.z)(H.y),H.width=(0,_.z)(H.width),H.height=(0,_.z)(H.height),Object.assign(R,H),Object.assign(h,(0,ot.xW)(p,R,h)),(0,gt.tD)(window.document.getElementById(dt),h),(0,gt.AE)(S,A)})(Ot[0][0],Ot[0][1],it.x,it.y),Jt=!0},end:(it,Ot)=>{Jt&&Et&&E.L.history.push([{type:"size",from:Et,to:JSON.parse(JSON.stringify({id:dt,size:R,attribute:h}))}])}})}},4333:(he,zt,w)=>{w.d(zt,{E:()=>y});var T=w(7873),E=w(7102),ot=w(9506),z=w(1308),gt=w(5970),_=w(2492);const y=f=>{let P=999999,A=999999,S=-999999,dt=-999999;null==f||f.forEach(h=>{P=Math.min(P,h.size.x),A=Math.min(A,h.size.y),S=Math.max(S,h.size.x+h.size.width),dt=Math.max(dt,h.size.y+h.size.height)});let p=(0,gt.RY)(T.F.SELECT_GROUP,"g"),R=(0,ot.CE)(P,A,S,dt);(0,gt.Mo)(p,f,R).forEach(h=>{N(h.element,h.posType,R,f,p)})},N=(f,P,A,S,dt)=>{let p=!1;null==f||f.addEventListener("touchstart",R=>{p=!0,M({touchEvent:R},P,A,S,dt)}),null==f||f.addEventListener("mousedown",R=>{if(0==R.button){if(p)return void(p=!1);M({mouseEvent:R},P,A,S,dt)}})},M=(f,P,A,S,dt)=>{let{x:p,y:R,width:h,height:I}=A,j=S.map(Et=>Object.assign({},Et.size)),q=[];(0,z.I)(f,{start:Et=>{S.forEach((Et,Vt)=>{let{id:Qt,size:jt,attribute:it}=Et;q.push(JSON.parse(JSON.stringify({id:Qt,size:jt,attribute:it})))})},move:(Et,Vt)=>{((Et,Vt,Qt,Jt)=>{(()=>{let jt;jt="rect-center"===P?{x:p+Qt-Et,y:R+Jt-Vt,width:h,height:I}:{x:p,y:R,width:h,height:I},jt.width<0&&(jt.width=0),jt.height<0&&(jt.height=0),Object.assign(A,jt),(0,gt.Mo)(dt,S,A)})(),S.forEach((jt,it)=>{let u,{x:Ot,y:tt,width:It,height:Ct}=j[it],{id:kt,type:xt,size:W,attribute:Q}=jt;u="rect-center"===P?{x:Ot+Qt-Et,y:tt+Jt-Vt,width:It,height:Ct}:{x:Ot,y:tt,width:It,height:Ct},u.width<0&&(u.width=0),u.height<0&&(u.height=0),u.x=(0,_.z)(u.x),u.y=(0,_.z)(u.y),u.width=(0,_.z)(u.width),u.height=(0,_.z)(u.height),Object.assign(W,u),Object.assign(Q,(0,ot.xW)(xt,W,Q)),(0,gt.tD)(window.document.getElementById(kt),Q)})})(Vt[0][0],Vt[0][1],Et.x,Et.y)},end:(Et,Vt)=>{q.length&&E.L.history.push(S.map((Et,Vt)=>{let{id:Qt,size:jt,attribute:it}=Et;return{type:"size",from:q[Vt],to:JSON.parse(JSON.stringify({id:Qt,size:jt,attribute:it}))}}))}})}},1026:(he,zt,w)=>{w.d(zt,{$:()=>R,t:()=>p});var T=w(7873),E=w(1281),ot=w(6153),z=w(3477),gt=w(7945),_=w(3069),y=w(3073),N=w(1999),M=w(6407),f=w(6847),P=w(745),A=w(9173),S=w(7102),dt=w(5970);const p=(h,I,j)=>{var Y;if(I&&!(null!=j?j:window).document.getElementById(I))return;if(I){let X=(null!=j?j:window).document.getElementById(I);jQuery(X).find("#"+T.F.BACKGROUND_GROUP).empty();let H=(0,dt.RY)(T.F.BACKGROUND_GROUP,"g",void 0,X);(0,dt.I6)(H,h)}else{jQuery(S.L.target).find("#"+T.F.BACKGROUND_GROUP).empty();let X=(0,dt.RY)(T.F.BACKGROUND_GROUP,"g",void 0,S.L.target);(0,dt.I6)(X,h)}let q=(X,H)=>{H=I&&H?`${I}-${H}`:null!=I?I:H,null==X||X.forEach(V=>{let Et=I?`${I}-${V.id}`:V.id;var Vt;if(V.isdeleted)null===(Vt=(null!=j?j:window).document.getElementById(Et))||void 0===Vt||Vt.remove();else switch(V.type){case N.h.GROUP:(0,y.v)(Et,{},H?(null!=j?j:window).document.getElementById(H):null),q(V.nodes,V.id);break;case N.h.CIRCLE:(0,E.K)(Et,{size:V.size,attribute:V.attribute},H?(null!=j?j:window).document.getElementById(H):null);break;case N.h.ELLIPSE:(0,ot.W)(Et,{size:V.size,attribute:V.attribute},H?(null!=j?j:window).document.getElementById(H):null);break;case N.h.LINE:(0,_.q)(Et,{size:V.size,attribute:V.attribute},H?(null!=j?j:window).document.getElementById(H):null);break;case N.h.RECT:(0,gt.a)(Et,{size:V.size,attribute:V.attribute},H?(null!=j?j:window).document.getElementById(H):null);break;case N.h.POLYGON:(0,z.u)(Et,{size:V.size,attribute:V.attribute},H?(null!=j?j:window).document.getElementById(H):null);break;case N.h.FOREIGNOBJECT:(0,P.$)(Et,{size:V.size,attribute:V.attribute,style:V.style,source:V.source},H?(null!=j?j:window).document.getElementById(H):null);break;case N.h.IMAGE:(0,A.B)(Et,{size:V.size,attribute:V.attribute,source:V.source},H?(null!=j?j:window).document.getElementById(H):null);break;case N.h.TEXT:(0,f.L)(Et,{size:V.size,attribute:V.attribute,source:V.source},H?(null!=j?j:window).document.getElementById(H):null);break;case N.h.PATH:(0,M.X)(Et,{size:V.size,attribute:V.attribute},H?(null!=j?j:window).document.getElementById(H):null)}})};q(null==h||null===(Y=h.svg)||void 0===Y?void 0:Y.nodes)},R=(h,I)=>{var j;if(I&&!window.document.getElementById(I))return;let Y=(q,X)=>{X=X?`${I}-${X}`:I,null==q||q.forEach(H=>{jQuery("#"+(I?`${I}-${H.id}`:H.id)).appendTo(X?window.document.getElementById(X):S.L.target),H.type==N.h.GROUP&&Y(H.nodes,H.id)})};Y(null==h||null===(j=h.svg)||void 0===j?void 0:j.nodes)}},1281:(he,zt,w)=>{w.d(zt,{K:()=>gt});var T=w(1999),E=w(7102),ot=w(9506),z=w(5970);const gt=(_,y,N)=>{let M=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(f,(0,ot.xW)(T.h.CIRCLE,M,f)),{nodeId:_,element:(0,z.fn)(_,T.h.CIRCLE,"circle",{size:M,attribute:f},N),size:M,attribute:f}}},6153:(he,zt,w)=>{w.d(zt,{W:()=>gt});var T=w(1999),E=w(7102),ot=w(9506),z=w(5970);const gt=(_,y,N)=>{let M=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(f,(0,ot.xW)(T.h.ELLIPSE,M,f)),{nodeId:_,element:(0,z.fn)(_,T.h.ELLIPSE,"ellipse",{size:M,attribute:f},N),size:M,attribute:f}}},745:(he,zt,w)=>{w.d(zt,{$:()=>z});var T=w(1999),E=w(9506),ot=w(5970);const z=(gt,_,y)=>{let N=(null==_?void 0:_.size)||{x:0,y:0,width:320,height:80},M=(null==_?void 0:_.attribute)||{};Object.assign(M,(0,E.xW)(T.h.FOREIGNOBJECT,N,M));let f=(null==_?void 0:_.source)||{type:"html",html:{htmlContent:'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>'}},P=(null==_?void 0:_.style)||{};return{nodeId:gt,element:(0,ot.fn)(gt,T.h.FOREIGNOBJECT,"foreignObject",{size:N,attribute:M,style:P,source:f},y),size:N,attribute:M,style:P,source:f}}},3073:(he,zt,w)=>{w.d(zt,{v:()=>z});var T=w(1999),E=w(9506),ot=w(5970);const z=(_,y,N)=>{let M=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{};return Object.assign(f,(0,E.xW)(T.h.GROUP,M,f)),{nodeId:_,element:(0,ot.fn)(_,T.h.GROUP,"g",{size:M,attribute:f},N),size:M,attribute:f}}},9173:(he,zt,w)=>{w.d(zt,{B:()=>z});var T=w(1999),E=w(9506),ot=w(5970);const z=(gt,_,y)=>{let N=(null==_?void 0:_.size)||{x:0,y:0,width:10,height:10},M=(null==_?void 0:_.attribute)||{preserveAspectRatio:"none"};Object.assign(M,(0,E.xW)(T.h.IMAGE,N,M));let f=(null==_?void 0:_.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:gt,element:(0,ot.fn)(gt,T.h.IMAGE,"image",{size:N,attribute:M,source:f},y),size:N,attribute:M,source:f}}},3069:(he,zt,w)=>{w.d(zt,{q:()=>gt});var T=w(1999),E=w(7102),ot=w(9506),z=w(5970);const gt=(_,y,N)=>{let M=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth,strokeLinecap:E.L.attribute.strokeLinecap};return Object.assign(f,(0,ot.xW)(T.h.LINE,M,f)),{nodeId:_,element:(0,z.fn)(_,T.h.LINE,"line",{size:M,attribute:f},N),size:M,attribute:f}}},6407:(he,zt,w)=>{w.d(zt,{X:()=>gt});var T=w(1999),E=w(7102),ot=w(9506),z=w(5970);const gt=(_,y,N)=>{let M=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(f,(0,ot.xW)(T.h.PATH,M,f)),{nodeId:_,element:(0,z.fn)(_,T.h.PATH,"path",{size:M,attribute:f},N),size:M,attribute:f}}},3477:(he,zt,w)=>{w.d(zt,{u:()=>gt});var T=w(1999),E=w(7102),ot=w(9506),z=w(5970);const gt=(_,y,N)=>{let M=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(f,(0,ot.xW)(T.h.POLYGON,M,f)),{nodeId:_,element:(0,z.fn)(_,T.h.POLYGON,"polygon",{size:M,attribute:f},N),size:M,attribute:f}}},7945:(he,zt,w)=>{w.d(zt,{a:()=>gt});var T=w(1999),E=w(7102),ot=w(9506),z=w(5970);const gt=(_,y,N)=>{let M=(null==y?void 0:y.size)||{x:0,y:0,width:10,height:10},f=(null==y?void 0:y.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(f,(0,ot.xW)(T.h.RECT,M,f)),{nodeId:_,element:(0,z.fn)(_,T.h.RECT,"rect",{size:M,attribute:f},N),size:M,attribute:f}}},6847:(he,zt,w)=>{w.d(zt,{L:()=>gt});var T=w(1999),E=w(7102),ot=w(9506),z=w(5970);const gt=(_,y,N)=>{let M=(null==y?void 0:y.size)||{x:0,y:0,width:320,height:80},f=(null==y?void 0:y.attribute)||{fill:E.L.attribute.stroke,fontFamily:E.L.attribute.fontFamily,fontSize:E.L.attribute.fontSize,textLength:E.L.attribute.textLength};Object.assign(f,(0,ot.xW)(T.h.TEXT,M,f));let P=(null==y?void 0:y.source)||{type:"text",text:{textContent:"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!"}};return{nodeId:_,element:(0,z.fn)(_,T.h.TEXT,"text",{size:M,attribute:f,source:P},N),size:M,attribute:f,source:P}}},9506:(he,zt,w)=>{w.d(zt,{CE:()=>ot,xW:()=>z});var T=w(1999),E=w(4896);const ot=(_,y,N,M,f)=>{let P={x:Math.min(_,N),y:Math.min(y,M),width:Math.abs(N-_)||1,height:Math.abs(M-y)||1};return null!=f&&f.ratio&&(P.width<=P.height?P.height=P.width*(null==f?void 0:f.ratio):P.width=P.height/(null==f?void 0:f.ratio)),Object.assign(P,{ratios:(null==f?void 0:f.ratios)||[[(_-P.x)/(P.width||1),(y-P.y)/(P.height||1)],[(N-P.x)/(P.width||1),(M-P.y)/(P.height||1)]]}),null!=f&&f.points&&(P.points=null==f?void 0:f.points),P},z=(_,y,N)=>{var M,f=(()=>{switch(_){case T.h.CIRCLE:return{cx:y.x+y.width/2,cy:y.y+y.height/2,r:Math.min(y.width/2,y.height/2)};case T.h.ELLIPSE:return{cx:y.x+y.width/2,cy:y.y+y.height/2,rx:y.width/2,ry:y.height/2};case T.h.LINE:{var P;let R={};return null===(P=y.ratios)||void 0===P||P.forEach((h,I)=>{R[`x${I+1}`]=y.x+y.width*h[0],R[`y${I+1}`]=y.y+y.height*h[1]}),R}case T.h.RECT:case T.h.FOREIGNOBJECT:case T.h.IMAGE:return{x:y.x,y:y.y,width:y.width,height:y.height};case T.h.TEXT:var A;return{x:y.x,y:y.y+(null!==(A=N.fontSize)&&void 0!==A?A:16)};case T.h.POLYGON:var S;if(null!==(S=y.ratios)&&void 0!==S&&S.length)return{points:(0,E.n9)(y,y.ratios)};break;case T.h.PATH:var dt,p;if(null!==(dt=y.ratioMaps)&&void 0!==dt&&dt.length)return{d:(0,E.$N)(y,y.ratioMaps)};if(null!==(p=y.points)&&void 0!==p&&p.length)return{d:`M ${(R=y.points)[0][0]} ${R[0][1]} L ${(R.map(h=>[h[0],h[1]])||[]).map(h=>h.join(" ")).join(" ")}`}}var R;return{}})();return y.rotate?(f.transform=`rotate(${y.rotate})`,f.transformOrigin=`${y.x+y.width/2} ${y.y+y.height/2}`):null!==(M=N.transform)&&void 0!==M&&M.match(/^rotate/)&&(N.transform=null,N.transformOrigin=null),f}},9841:(he,zt,w)=>{w.d(zt,{$:()=>ot});var T=w(7102),E=w(2492);const ot=z=>(0,E.z)(z/T.L.screen.scale)},6752:(he,zt,w)=>{w.d(zt,{E$:()=>y,Nx:()=>M,ZF:()=>_,ei:()=>gt,fu:()=>N});var T=w(7102),E=w(5970),ot=w(9506),z=w(2492);const gt=(f,P)=>{let{id:A,type:S,size:dt,attribute:p}=f,R=JSON.parse(JSON.stringify({id:A,size:dt,attribute:p}));dt.x=(0,z.z)(P),Object.assign(p,(0,ot.xW)(S,dt,p)),(0,E.tD)(window.document.getElementById(A),p),T.L.history.push([{type:"size",from:R,to:JSON.parse(JSON.stringify({id:A,size:dt,attribute:p}))}])},_=(f,P)=>{let{id:A,type:S,size:dt,attribute:p}=f,R=JSON.parse(JSON.stringify({id:A,size:dt,attribute:p}));dt.y=(0,z.z)(P),Object.assign(p,(0,ot.xW)(S,dt,p)),(0,E.tD)(window.document.getElementById(A),p),T.L.history.push([{type:"size",from:R,to:JSON.parse(JSON.stringify({id:A,size:dt,attribute:p}))}])},y=(f,P,A)=>{let{id:S,type:dt,size:p,attribute:R}=f,h=JSON.parse(JSON.stringify({id:S,size:p,attribute:R}));A&&(p.height=(0,z.z)(P*p.height/p.width)),p.width=(0,z.z)(P),Object.assign(R,(0,ot.xW)(dt,p,R)),(0,E.tD)(window.document.getElementById(S),R),T.L.history.push([{type:"size",from:h,to:JSON.parse(JSON.stringify({id:S,size:p,attribute:R}))}])},N=(f,P,A)=>{let{id:S,type:dt,size:p,attribute:R}=f,h=JSON.parse(JSON.stringify({id:S,size:p,attribute:R}));A&&(p.width=(0,z.z)(P*p.width/p.height)),p.height=(0,z.z)(P),Object.assign(R,(0,ot.xW)(dt,p,R)),(0,E.tD)(window.document.getElementById(S),R),T.L.history.push([{type:"size",from:h,to:JSON.parse(JSON.stringify({id:S,size:p,attribute:R}))}])},M=(f,P)=>{let{id:A,type:S,size:dt,attribute:p}=f,R=JSON.parse(JSON.stringify({id:A,size:dt,attribute:p}));dt.rotate="number"==typeof P?(0,z.z)(P,100):void 0,Object.assign(p,(0,ot.xW)(S,dt,p)),(0,E.tD)(window.document.getElementById(A),p),T.L.history.push([{type:"size",from:R,to:JSON.parse(JSON.stringify({id:A,size:dt,attribute:p}))}])}},1308:(he,zt,w)=>{w.d(zt,{I:()=>_});var T=w(3603),E=w(7102);class ot{constructor(N){this._points=[],this._options=N}start(N){this._points.length=0,this._points.push([N.x,N.y]),this._options.start(N)}move(N){this._points.push([N.x,N.y]),this._options.move(N,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(N=this._points[0])[0],y:N[1]}:{x:0,y:0};var N}get offsetLast(){return this._points.length>=1?{x:(N=this._points[this._points.length-1])[0],y:N[1]}:{x:0,y:0};var N}}var z=w(6078);const _=(y,N,M,f,P)=>{var A,S,dt;let p=null,R=0,h=0;y.mouseEvent?(p=y.mouseEvent.target,R=y.mouseEvent.offsetX,h=y.mouseEvent.offsetY):y.touchEvent&&(p=y.touchEvent.target,y.touchEvent.touches.length&&(R=y.touchEvent.touches[0].clientX,h=y.touchEvent.touches[0].clientY));let I=null!=M?M:E.L.screen.scale,j=null!=f?f:E.L.screen.dislocation,Y=null!=P?P:E.L.screen.offset,q=()=>{};var X=new ot({start:null!==(A=null==N?void 0:N.start)&&void 0!==A?A:q,move:null!==(S=null==N?void 0:N.move)&&void 0!==S?S:q,end:null!==(dt=null==N?void 0:N.end)&&void 0!==dt?dt:q});y.mouseEvent?X.start((0,z.D)({x:R,y:h},I,j,{x:0,y:0})):y.touchEvent&&X.start((0,z.D)({x:R,y:h},I,j,Y));let H=it=>{X.move((0,z.D)({x:it.clientX,y:it.clientY},I,j,Y))},V=it=>{X.end(),[T.P.SHAPE,T.P.FOREIGNOBJECT,T.P.IMAGE,T.P.TEXT].includes(E.L.pointer.pointer_type)&&(it.shiftKey||(E.L.pointer.pointer_type=T.P.POINTER))},Et=it=>{it.touches.length&&H({clientX:it.touches[0].clientX,clientY:it.touches[0].clientY})},Vt=it=>{V({shiftKey:it.shiftKey,ctrlKey:it.ctrlKey,altKey:it.altKey}),window.removeEventListener("touchmove",Et,!1),window.removeEventListener("touchend",Vt,!1)},Qt=it=>{0==it.button&&H({clientX:it.clientX,clientY:it.clientY})},Jt=it=>{0==it.button&&(V({shiftKey:it.shiftKey,ctrlKey:it.ctrlKey,altKey:it.altKey}),window.removeEventListener("mousemove",Qt,!1),window.removeEventListener("mouseup",Jt,!1))};if(y.mouseEvent)window.addEventListener("mousemove",Qt,!1),window.addEventListener("mouseup",Jt,!1);else if(y.touchEvent){var jt;window.addEventListener("touchmove",Et,!1),window.addEventListener("touchend",Vt,!1),null===(jt=p)||void 0===jt||jt.addEventListener("touchmove",function(it){it.preventDefault()})}}},6078:(he,zt,w)=>{w.d(zt,{D:()=>E});var T=w(2492);const E=(ot,z,gt,_)=>(ot.x-=_.x,ot.y-=_.y,ot.x/=z,ot.y/=z,ot.x-=gt.x,ot.y-=gt.y,ot.x=(0,T.z)(ot.x),ot.y=(0,T.z)(ot.y),ot)},5619:(he,zt,w)=>{w.d(zt,{J:()=>ct,I:()=>Yt});var T=w(7873),E=w(7102),ot=w(1999),z=w(334),gt=w(8946),_=w(7657),y=w(6769),N=w(3591),f=w(6847),P=w(3073);var R=w(7050),h=w(9173),I=w(2492);const j=(C,d,B)=>{var nt,ut,J,O;let Z=1,et=new Image;et.onload=()=>{var yt,wt,At,mt;Z=(0,I.z)(et.naturalWidth/et.naturalHeight,100);let st=0,pt=0,St=0,Ft=0;var qt,Zt,se,ne;Z>=1?(St=Math.min(et.naturalWidth,null!==(qt=null===(Zt=ct.slide.svg)||void 0===Zt||null===(Zt=Zt.viewBox)||void 0===Zt?void 0:Zt.width)&&void 0!==qt?qt:0),Ft=St/Z):(Ft=Math.min(et.naturalHeight,null!==(se=null===(ne=ct.slide.svg)||void 0===ne||null===(ne=ne.viewBox)||void 0===ne?void 0:ne.height)&&void 0!==se?se:0),St=Ft/Z),st=((null!==(yt=null===(wt=ct.slide.svg)||void 0===wt||null===(wt=wt.viewBox)||void 0===wt?void 0:wt.width)&&void 0!==yt?yt:0)-St)/2,pt=((null!==(At=null===(mt=ct.slide.svg)||void 0===mt||null===(mt=mt.viewBox)||void 0===mt?void 0:mt.height)&&void 0!==At?At:0)-Ft)/2,d.size={x:st,y:pt,width:St,height:Ft},Y(d,B)},et.onerror=yt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,yt)},et.src=(null!==(nt=d.source)&&void 0!==nt&&nt.path?(null===(ut=E.L.config)||void 0===ut?void 0:ut.readfileuploadurl)+(null===(J=d.source)||void 0===J?void 0:J.path):null===(O=d.source)||void 0===O?void 0:O.url)||""},Y=(C,d)=>{if(C.slideStatus!=ct.slideStatus)return void d();let{element:B}=(0,h.B)(Math.ceil(1e9*Math.random()),{size:C.size,source:{type:"image",image:null==C?void 0:C.source}});setTimeout(()=>{null==B||B.remove(),d()},3e3)};var q=w(5970);const X=(C,d,B)=>{var nt,ut,J,O;let Z=new Image;Z.onload=()=>{H(C,{width:Z.naturalWidth,height:Z.naturalHeight},d,B)},Z.onerror=et=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,et),B()},Z.src=(null!==(nt=d.source)&&void 0!==nt&&nt.path?(null===(ut=E.L.config)||void 0===ut?void 0:ut.readfileuploadurl)+(null===(J=d.source)||void 0===J?void 0:J.path):null===(O=d.source)||void 0===O?void 0:O.url)||""},H=(C,d,B,nt)=>{if(B.slideStatus!=ct.slideStatus)return void nt();let ut=(0,I.z)(d.width/d.height,100),J=0,O=0,Z=0,et=0;ut>=1?(Z=d.width,Z=Math.max(Z,40),Z=Math.min(Z,40),et=Z/ut):(et=d.height,et=Math.max(et,40),et=Math.min(et,40),Z=et/ut);let{size:At}=C;J=At.x+At.width-Z/2,O=At.y-et/2;let mt=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,h.B)(`icon-${C.id}`,{size:{x:J,y:O,width:Z,height:et},source:{type:"image",image:null==B?void 0:B.source}},mt),setTimeout(()=>{nt()},3e3)},V=(C,d,B)=>{var nt,ut,J,O,Z,et,yt;if(d.slideStatus!=ct.slideStatus)return void B();if(!(null!==(nt=d.source)&&void 0!==nt&&nt.path||null!==(ut=d.source)&&void 0!==ut&&ut.url))return console.warn(`${C.id} -> audio no source!`),void B();var wt=jQuery("#"+C.id);let At=null!==(J=d.iteration)&&void 0!==J?J:0;if(At<0&&(B(),B=function(){}),!(wt.data("audio-running")&&At<0)){wt.data("audio-running",!0);var mt=new Audio;return mt.autoplay=!0,mt.loop=0!=At,mt.preload="auto",mt.controls=!0,mt.setAttributeNode(document.createAttribute("playsinline")),mt.addEventListener("canplay",function(){var st=mt.play();st&&st.then(function(pt){wt.data("audio-running",!0)}).catch(function(pt){wt.data("audio-running",!1),d.slideStatus===ct.slideStatus&&B()})}),mt.addEventListener("timeupdate",function(){var pt;d.slideStatus!==ct.slideStatus&&((pt=this).pause(),pt.remove(),wt.data("audio-running",!1))}),mt.addEventListener("canplaythrough",function(){this.loop&&(At>0?At--:0==At&&(this.loop=!1))}),mt.addEventListener("play",function(){}),mt.addEventListener("pause",function(){}),mt.addEventListener("ended",function(){this.remove(),wt.data("audio-running",!1),d.slideStatus===ct.slideStatus&&B()}),mt.onerror=function(){this.remove(),wt.data("audio-running",!1),d.slideStatus===ct.slideStatus&&B()},mt.src=(null!==(O=d.source)&&void 0!==O&&O.path?(null===(Z=E.L.config)||void 0===Z?void 0:Z.readfileuploadurl)+(null===(et=d.source)||void 0===et?void 0:et.path):null===(yt=d.source)||void 0===yt?void 0:yt.url)||"",mt}};var Et=w(2837);const tt=(C,d)=>{var B;null===(B=d.test)||void 0===B||null===(B=B.answer)||void 0===B||null===(B=B.matching)||void 0===B||B.filter(nt=>nt.id==C.id).forEach(nt=>nt.value=""),jQuery(`#node-${C.id}`).remove()},Ct=(C,d,B,nt,ut,J)=>{var O,Z,et,yt,wt,At,mt,st;ut.iscorrect?(null!==(O=d.test)&&void 0!==O&&null!==(O=O.audiotrue)&&void 0!==O&&O.path&&V(C,{source:(0,Et.U)(null===(et=d.test)||void 0===et?void 0:et.audiotrue),iteration:0,nodeStatus:B,slideStatus:nt},J),null!==(Z=d.test)&&void 0!==Z&&null!==(Z=Z.effecttrue)&&void 0!==Z&&Z.path&&j(0,{source:(0,Et.U)(null===(yt=d.test)||void 0===yt?void 0:yt.effecttrue),iteration:0,nodeStatus:B,slideStatus:nt},J)):(null!==(wt=d.test)&&void 0!==wt&&null!==(wt=wt.audiofalse)&&void 0!==wt&&wt.path&&V(C,{source:(0,Et.U)(null===(mt=d.test)||void 0===mt?void 0:mt.audiofalse),iteration:0,nodeStatus:B,slideStatus:nt},J),null!==(At=d.test)&&void 0!==At&&null!==(At=At.effectfalse)&&void 0!==At&&At.path&&j(0,{source:(0,Et.U)(null===(st=d.test)||void 0===st?void 0:st.effectfalse),iteration:0,nodeStatus:B,slideStatus:nt},J));kt(d,B,nt,J)},kt=(C,d,B,nt)=>{var ut;switch(null===(ut=C.test)||void 0===ut?void 0:ut.type){case"truefalse":{var J,O;let{value:ne,iscorrect:ae}=null!==(J=null==C||null===(O=C.test)||void 0===O||null===(O=O.answer)||void 0===O?void 0:O.truefalse)&&void 0!==J?J:{};if(ne){let pe=ct.findNode(ne);var Z,et,yt,wt;ae?null!==(Z=C.test)&&void 0!==Z&&null!==(Z=Z.icontrue)&&void 0!==Z&&Z.path&&X(pe,{source:(0,Et.U)(null===(et=C.test)||void 0===et?void 0:et.icontrue),iteration:0,nodeStatus:d,slideStatus:B},nt):null!==(yt=C.test)&&void 0!==yt&&null!==(yt=yt.iconfalse)&&void 0!==yt&&yt.path&&X(pe,{source:(0,Et.U)(null===(wt=C.test)||void 0===wt?void 0:wt.iconfalse),iteration:0,nodeStatus:d,slideStatus:B},nt)}break}case"singlechoice":{var At,mt;let{value:ne,iscorrect:ae}=null!==(At=null==C||null===(mt=C.test)||void 0===mt||null===(mt=mt.answer)||void 0===mt?void 0:mt.singlechoice)&&void 0!==At?At:{};if(ne){let pe=ct.findNode(ne);var st,pt,St,Ft;ae?null!==(st=C.test)&&void 0!==st&&null!==(st=st.icontrue)&&void 0!==st&&st.path&&X(pe,{source:(0,Et.U)(null===(pt=C.test)||void 0===pt?void 0:pt.icontrue),iteration:0,nodeStatus:d,slideStatus:B},nt):null!==(St=C.test)&&void 0!==St&&null!==(St=St.iconfalse)&&void 0!==St&&St.path&&X(pe,{source:(0,Et.U)(null===(Ft=C.test)||void 0===Ft?void 0:Ft.iconfalse),iteration:0,nodeStatus:d,slideStatus:B},nt)}break}case"multichoice":var qt;null==C||null===(qt=C.test)||void 0===qt||null===(qt=qt.answer)||void 0===qt||null===(qt=qt.multichoice)||void 0===qt||qt.forEach(ne=>{let{value:ae,iscorrect:pe}=ne;if(ae){let Te=ct.findNode(ae);var Ae,ke,me,Oe;pe?null!==(Ae=C.test)&&void 0!==Ae&&null!==(Ae=Ae.icontrue)&&void 0!==Ae&&Ae.path&&X(Te,{source:(0,Et.U)(null===(ke=C.test)||void 0===ke?void 0:ke.icontrue),iteration:0,nodeStatus:d,slideStatus:B},nt):null!==(me=C.test)&&void 0!==me&&null!==(me=me.iconfalse)&&void 0!==me&&me.path&&X(Te,{source:(0,Et.U)(null===(Oe=C.test)||void 0===Oe?void 0:Oe.iconfalse),iteration:0,nodeStatus:d,slideStatus:B},nt)}});break;case"fill":var Zt;null==C||null===(Zt=C.test)||void 0===Zt||null===(Zt=Zt.answer)||void 0===Zt||null===(Zt=Zt.fill)||void 0===Zt||Zt.forEach(ne=>{let{id:ae,value:Ae,iscorrect:ke}=ne;if(Ae){let _e=ct.findNode(ae);var me,Oe,Te,je;ke?null!==(me=C.test)&&void 0!==me&&null!==(me=me.icontrue)&&void 0!==me&&me.path&&X(_e,{source:(0,Et.U)(null===(Oe=C.test)||void 0===Oe?void 0:Oe.icontrue),iteration:0,nodeStatus:d,slideStatus:B},nt):null!==(Te=C.test)&&void 0!==Te&&null!==(Te=Te.iconfalse)&&void 0!==Te&&Te.path&&X(_e,{source:(0,Et.U)(null===(je=C.test)||void 0===je?void 0:je.iconfalse),iteration:0,nodeStatus:d,slideStatus:B},nt)}});break;case"matching":var se;null==C||null===(se=C.test)||void 0===se||null===(se=se.answer)||void 0===se||null===(se=se.matching)||void 0===se||se.forEach(ne=>{let{id:ae,key:pe,value:Ae}=ne;if(Ae){let je=ct.findNode(ae);var ke,me,Oe,Te;pe==Ae?null!==(ke=C.test)&&void 0!==ke&&null!==(ke=ke.icontrue)&&void 0!==ke&&ke.path&&X(je,{source:(0,Et.U)(null===(me=C.test)||void 0===me?void 0:me.icontrue),iteration:0,nodeStatus:d,slideStatus:B},nt):null!==(Oe=C.test)&&void 0!==Oe&&null!==(Oe=Oe.iconfalse)&&void 0!==Oe&&Oe.path&&X(je,{source:(0,Et.U)(null===(Te=C.test)||void 0===Te?void 0:Te.iconfalse),iteration:0,nodeStatus:d,slideStatus:B},nt)}})}},xt=(C,d,B,nt)=>{var ut,J,O,Z,et,yt,At,st,mt;null!==(ut=d.animate)&&void 0!==ut&&ut.value&&(0,R.a)(d,B.nodeStatus,B.slideStatus),null!==(J=d.interactive)&&void 0!==J&&J.show?(console.log(`node(${d.id}) | nodeStatus(${B.nodeStatus}) | slideStatus(${B.slideStatus}) | show`),((C,d,B,nt)=>{var ut,J,O;let Z={total:0,counter:0},{triggershow:et,triggerrun:yt,triggerhide:wt,action:At,audio:mt}=null!==(ut=null===(J=C.interactive)||void 0===J?void 0:J.show)&&void 0!==ut?ut:{};if(console.log(`node(${C.id}) | nodeStatus(${d}) | slideStatus(${B}) | show`),et){let{id:pt,ids:St,time:Ft,async:qt}=et;"asynctrue"==qt?setTimeout(()=>{(0,N.GD)({id:pt,ids:St,nodeStatus:d,slideStatus:B})}):"time"==qt&&setTimeout(()=>{(0,N.GD)({id:pt,ids:St,nodeStatus:d,slideStatus:B})},1e3*(null!=Ft?Ft:0))}if(yt){let{id:pt,ids:St,time:Ft,async:qt}=yt;"asynctrue"==qt?setTimeout(()=>{(0,N.MF)({id:pt,ids:St,nodeStatus:d,slideStatus:B})}):"time"==qt&&setTimeout(()=>{(0,N.MF)({id:pt,ids:St,nodeStatus:d,slideStatus:B})},1e3*(null!=Ft?Ft:0))}if(wt){let{id:pt,ids:St,time:Ft,async:qt}=wt;"asynctrue"==qt?setTimeout(()=>{(0,N.vi)({id:pt,ids:St,nodeStatus:d,slideStatus:B})}):"time"==qt&&setTimeout(()=>{(0,N.vi)({id:pt,ids:St,nodeStatus:d,slideStatus:B})},1e3*(null!=Ft?Ft:0))}let st=()=>{setTimeout(()=>{if(Z.counter>=Z.total){if(nt&&nt(),et){let{id:pt,ids:St,async:Ft}=et;(!Ft||"asyncfalse"==Ft)&&(0,N.GD)({id:pt,ids:St,nodeStatus:d,slideStatus:B})}if(yt){let{id:pt,ids:St,async:Ft}=yt;(!Ft||"asyncfalse"==Ft)&&(0,N.MF)({id:pt,ids:St,nodeStatus:d,slideStatus:B})}if(wt){let{id:pt,ids:St,async:Ft}=wt;(!Ft||"asyncfalse"==Ft)&&(0,N.vi)({id:pt,ids:St,nodeStatus:d,slideStatus:B})}}})};if(null!=At&&At.value){Z.total+=1;let pt=()=>{Z.counter+=1,st()};switch(null==At?void 0:At.value){case"hide":jQuery("#"+C.id).addClass("hide"),pt();break;case"points":{let{points:St,time:Ft,iteration:qt,finish:Zt}=At;(0,_.c)(C.id,{node:C,points:St,time:Ft,iteration:qt,finish:Zt,nodeStatus:d,slideStatus:B},pt);break}default:{let{value:St,time:Ft,iteration:qt,finish:Zt}=At;(0,gt.h)(C.id,{node:C,value:St,time:Ft,iteration:qt,finish:Zt,nodeStatus:d,slideStatus:B},pt);break}}}if(null!=mt&&null!==(O=mt.source)&&void 0!==O&&O.path){Z.total+=1;let pt=()=>{Z.counter+=1,st()},St=(0,y.d)(C.id,mt,Z,{nodeStatus:d,slideStatus:B},pt);-1==(null==mt?void 0:mt.iteration)&&jQuery("#"+C.id).click(Ft=>{Ft.preventDefault(),St&&(St.volume=St.volume>=1?0:St.volume+.25),console.log(null==St?void 0:St.volume)})}Z.total||st()})(d,B.nodeStatus,B.slideStatus,nt)):nt&&nt(),null!==(O=d.interactive)&&void 0!==O&&O.click&&(st=null===(At=d.interactive)||void 0===At?void 0:At.click,Object.keys(null!=st?st:{}).map(St=>st[St]?1:0).includes(1)&&jQuery("#"+d.id).addClass("interactive-click"),jQuery("#"+d.id).click(st=>{st.preventDefault(),B.nodeStatus=ct.refreshNodeStatus(),console.log(`node(${d.id}) | nodeStatus(${B.nodeStatus}) | slideStatus(${B.slideStatus}) | click`),(0,z.J)(d,B.nodeStatus,B.slideStatus)})),null!==(Z=d.variable)&&void 0!==Z&&Z.input&&jQuery("#"+d.id).on("change","input,textarea",st=>{st.preventDefault(),((C,d,B)=>{var nt,ut;E.L.variable.setValue(null!==(nt=null===(ut=d.variable)||void 0===ut||null===(ut=ut.input)||void 0===ut?void 0:ut.variable)&&void 0!==nt?nt:"",C),(C=>{var d;let B=(nt,ut)=>{null==nt||nt.forEach(J=>{switch(J.type){case ot.h.GROUP:(0,P.v)(J.id,{},ut?window.document.getElementById(ut):null),B(J.nodes,J.id);break;case ot.h.POLYGON:break;case ot.h.TEXT:(0,f.L)(J.id,{size:J.size,attribute:J.attribute,source:J.source},ut?window.document.getElementById(ut):null)}})};B(null===(d=C.svg)||void 0===d?void 0:d.nodes)})(B)})(st.target.value,d,C)}),null!==(et=d.variable)&&void 0!==et&&et.click&&(null!==(mt=d.variable)&&void 0!==mt&&null!==(mt=mt.click)&&void 0!==mt&&mt.variable&&jQuery("#"+d.id).addClass("variable-click"),jQuery("#"+d.id).click(st=>{st.preventDefault(),((C,d)=>{var B;E.L.variable.setValueOperator(null===(B=C.variable)||void 0===B?void 0:B.click),(C=>{var d;let B=(nt,ut)=>{null==nt||nt.forEach(J=>{switch(J.type){case ot.h.GROUP:(0,P.v)(J.id,{},ut?window.document.getElementById(ut):null),B(J.nodes,J.id);break;case ot.h.POLYGON:break;case ot.h.TEXT:(0,f.L)(J.id,{size:J.size,attribute:J.attribute,source:J.source},ut?window.document.getElementById(ut):null)}})};B(null===(d=C.svg)||void 0===d?void 0:d.nodes)})(d)})(d,C)})),"test"==(null===(yt=d.source)||void 0===yt?void 0:yt.type)&&((C,d)=>{var B;let nt=()=>{};switch(null===(B=C.source)||void 0===B||null===(B=B.test)||void 0===B?void 0:B.type){case"truefalse":{jQuery("#"+C.id).click(O=>{O.preventDefault(),((C,d,B,nt,ut)=>{var J,O;let Z=null===(J=C.source)||void 0===J||null===(J=J.test)||void 0===J||null===(J=J.truefalse)||void 0===J?void 0:J.iscorrect;d.test?d.test.answer?d.test.answer.truefalse={value:C.id,iscorrect:Z}:d.test.answer={truefalse:{value:C.id,iscorrect:Z}}:d.test={answer:{truefalse:{value:C.id,iscorrect:Z}}},null!==(O=d.svg)&&void 0!==O&&O.nodes.find(yt=>{var wt;return"submit"==(null===(wt=yt.source)||void 0===wt||null===(wt=wt.test)||void 0===wt?void 0:wt.type)})||Ct(C,d,B,nt,{iscorrect:Z},ut);let et=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(et,d,C)})(C,d,ct.nodeStatus,ct.slideStatus,nt)});let J=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(J,d,C);break}case"singlechoice":{jQuery("#"+C.id).click(O=>{O.preventDefault(),((C,d,B,nt,ut)=>{var J,O;let Z=null===(J=C.source)||void 0===J||null===(J=J.test)||void 0===J||null===(J=J.singlechoice)||void 0===J?void 0:J.iscorrect;d.test?d.test.answer?d.test.answer.singlechoice={value:C.id,iscorrect:Z}:d.test.answer={singlechoice:{value:C.id,iscorrect:Z}}:d.test={answer:{singlechoice:{value:C.id,iscorrect:Z}}},null!==(O=d.svg)&&void 0!==O&&O.nodes.find(yt=>{var wt;return"submit"==(null===(wt=yt.source)||void 0===wt||null===(wt=wt.test)||void 0===wt?void 0:wt.type)})||Ct(C,d,B,nt,{iscorrect:Z},ut);let et=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(et,d,C)})(C,d,ct.nodeStatus,ct.slideStatus,nt)});let J=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(J,d,C);break}case"multichoice":{jQuery("#"+C.id).click(O=>{O.preventDefault(),((C,d,B,nt,ut)=>{var J,O;let Z=null===(J=C.source)||void 0===J||null===(J=J.test)||void 0===J||null===(J=J.multichoice)||void 0===J?void 0:J.iscorrect;d.test?d.test.answer?d.test.answer.multichoice?d.test.answer.multichoice.find(yt=>yt.value==C.id)?d.test.answer.multichoice=d.test.answer.multichoice.filter(yt=>yt.value!=C.id):d.test.answer.multichoice.push({value:C.id,iscorrect:Z}):d.test.answer.multichoice=[{value:C.id,iscorrect:Z}]:d.test.answer={multichoice:[{value:C.id,iscorrect:Z}]}:d.test={answer:{multichoice:[{value:C.id,iscorrect:Z}]}},null!==(O=d.svg)&&void 0!==O&&O.nodes.find(yt=>{var wt;return"submit"==(null===(wt=yt.source)||void 0===wt||null===(wt=wt.test)||void 0===wt?void 0:wt.type)})||Ct(C,d,B,nt,{iscorrect:Z},ut);let et=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(et,d,C)})(C,d,ct.nodeStatus,ct.slideStatus,nt)});let J=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(J,d,C);break}case"fill":{var ut;jQuery("#"+C.id).on("keyup",'input[type="text"]',O=>{var Z;let et=jQuery("<div/>").css({"font-size":jQuery(O.target).css("font-size"),visibility:"hidden",float:"left"}).text(O.target.value).appendTo(window.document.body);jQuery(O.target).css({width:(null!==(Z=et.width())&&void 0!==Z?Z:0)+30})}).on("keypress",'input[type="text"]',O=>{13===(O.keyCode||O.charCode||O.which)&&(O.preventDefault(),O.stopPropagation(),jQuery(O.target).blur())}).on("change",'input[type="text"]',O=>{var Z,et;let yt=null===(Z=O.target)||void 0===Z?void 0:Z.getAttribute("data-key"),wt=null===(et=O.target)||void 0===et||null===(et=et.value)||void 0===et?void 0:et.trim();jQuery("#"+C.id).find(`input[type="text"][data-key="${yt}"]`).val(wt),((C,d,B,nt,ut,J)=>{var O,Z,et,yt;let{value:wt}=null!==(O=null===(Z=C.source)||void 0===Z||null===(Z=Z.test)||void 0===Z||null===(Z=Z.fill)||void 0===Z?void 0:Z.find(st=>st.key==`[[${ut.key}]]`))&&void 0!==O?O:{},At=wt&&wt.map(st=>null==st?void 0:st.toLocaleLowerCase()).includes(null===(et=ut.value)||void 0===et?void 0:et.toLocaleLowerCase());ut.iscorrect=At,d.test?d.test.answer?d.test.answer.fill?d.test.answer.fill.find(st=>st.key==ut.key)?d.test.answer.fill.filter(st=>st.key==ut.key).forEach(st=>{st.value=ut.value,st.iscorrect=ut.iscorrect}):d.test.answer.fill.push(ut):d.test.answer.fill=[ut]:d.test.answer={fill:[ut]}:d.test={answer:{fill:[ut]}};let mt=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(mt,d,C),null!==(yt=d.svg)&&void 0!==yt&&yt.nodes.find(st=>{var pt;return"submit"==(null===(pt=st.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)})||Ct(C,d,B,nt,{iscorrect:At},J)})(C,d,ct.nodeStatus,ct.slideStatus,{id:C.id,key:yt,value:wt},nt)}),null!==(ut=d.test)&&void 0!==ut&&ut.showselection||jQuery("#"+C.id).addClass("hide-selection");let J=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(J,d,C);break}case"matching-empty":{jQuery("#"+C.id).on("touchmove",".ondrag-item",function(O){O.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(O){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${C.size.height/C.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${O.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(O){var Z;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(Z=d.test)&&void 0!==Z&&Z.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),tt(C,d)},drag:function(O){},dragend:function(O){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${C.id} .ondrop-here`).kendoDropTarget({dragenter:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.addClass("focused")},dragleave:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.removeClass("focused")},drop:function(O){if(!O.dropTarget.hasClass("actived"))return;O.dropTarget.removeClass("focused");let Z=O.dropTarget,et=O.draggable.currentTarget;Z.is(":empty")||Z.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),et.appendTo(Z);let yt=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(yt,d,C),((C,d,B,nt,ut,J)=>{var O,Z,et;let{key:yt}=null!==(O=null===(Z=C.source)||void 0===Z||null===(Z=Z.test)||void 0===Z?void 0:Z.matching)&&void 0!==O?O:{key:"KIEN"},wt=ut.key==yt;tt(C,d);let At={id:C.id,key:null!=yt?yt:"",value:ut.key};d.test?d.test.answer?d.test.answer.matching?d.test.answer.matching.find(mt=>mt.id==At.id)?d.test.answer.matching.filter(mt=>mt.id==At.id).forEach(mt=>{mt.key=At.key,mt.value=At.value}):d.test.answer.matching.push(At):d.test.answer.matching=[At]:d.test.answer={matching:[At]}:d.test={answer:{matching:[At]}},null!==(et=d.svg)&&void 0!==et&&et.nodes.find(mt=>{var st;return"submit"==(null===(st=mt.source)||void 0===st||null===(st=st.test)||void 0===st?void 0:st.type)})||Ct(C,d,B,nt,{iscorrect:wt},J)})(C,d,ct.nodeStatus,ct.slideStatus,{key:et.data("key")},nt)}});let J=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(J,d,C);break}case"matching-content":{jQuery("#"+C.id).on("touchmove",".ondrag-item",function(O){O.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(O){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${C.size.height/C.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${O.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(O){var Z;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(Z=d.test)&&void 0!==Z&&Z.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(O){},dragend:function(O){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${C.id} .ondrop-here`).kendoDropTarget({dragenter:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.addClass("focused")},dragleave:function(O){O.dropTarget.hasClass("actived")&&O.dropTarget.removeClass("focused")},drop:function(O){if(!O.dropTarget.hasClass("actived"))return;O.dropTarget.removeClass("focused");let Z=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(Z,d,C),O.draggable.currentTarget.appendTo(O.dropTarget),kt(d,ct.nodeStatus,ct.slideStatus,nt)}});let J=(0,q.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,q.kE)(J,d,C);break}case"speech":break;case"submit":jQuery("#"+C.id).click(J=>{J.preventDefault(),((C,d,B,nt,ut)=>{var J,O,Z,et,yt;let wt;var At;if(null!=d&&null!==(J=d.test)&&void 0!==J&&null!==(J=J.answer)&&void 0!==J&&J.truefalse)wt=null==d||null===(At=d.test)||void 0===At||null===(At=At.answer)||void 0===At||null===(At=At.truefalse)||void 0===At?void 0:At.iscorrect;else if(null!=d&&null!==(O=d.test)&&void 0!==O&&null!==(O=O.answer)&&void 0!==O&&O.singlechoice){var mt;wt=null==d||null===(mt=d.test)||void 0===mt||null===(mt=mt.answer)||void 0===mt||null===(mt=mt.singlechoice)||void 0===mt?void 0:mt.iscorrect}else if(null!=d&&null!==(Z=d.test)&&void 0!==Z&&null!==(Z=Z.answer)&&void 0!==Z&&Z.multichoice){var st,pt,St;wt=1==[null==d||null===(st=d.test)||void 0===st||null===(st=st.answer)||void 0===st||null===(st=st.multichoice)||void 0===st?void 0:st.length,null==d||null===(pt=d.test)||void 0===pt||null===(pt=pt.answer)||void 0===pt||null===(pt=pt.multichoice)||void 0===pt||null===(pt=pt.map(ne=>ne.iscorrect?1:0))||void 0===pt?void 0:pt.reduce((ne,ae)=>ne+ae),null==d||null===(St=d.svg)||void 0===St||null===(St=St.nodes)||void 0===St||null===(St=St.filter(ne=>{var ae,pe;return"multichoice"==(null===(ae=ne.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)&&(null===(pe=ne.source)||void 0===pe||null===(pe=pe.test)||void 0===pe||null===(pe=pe.multichoice)||void 0===pe?void 0:pe.iscorrect)}))||void 0===St?void 0:St.length].filter((ne,ae,pe)=>pe.indexOf(ne)==ae).length}else if(null!=d&&null!==(et=d.test)&&void 0!==et&&null!==(et=et.answer)&&void 0!==et&&et.fill){var Ft,qt;wt=(null==d||null===(Ft=d.test)||void 0===Ft||null===(Ft=Ft.answer)||void 0===Ft||null===(Ft=Ft.fill)||void 0===Ft||null===(Ft=Ft.map(ne=>ne.iscorrect?1:0))||void 0===Ft?void 0:Ft.reduce((ne,ae)=>ne+ae))==(null===(qt=d.svg)||void 0===qt||null===(qt=qt.nodes)||void 0===qt||null===(qt=qt.filter(ne=>{var ae;return"fill"==(null===(ae=ne.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===qt?void 0:qt.length)}else if(null!=d&&null!==(yt=d.test)&&void 0!==yt&&null!==(yt=yt.answer)&&void 0!==yt&&yt.matching){var Zt,se;wt=(null===(Zt=d.svg)||void 0===Zt||null===(Zt=Zt.nodes)||void 0===Zt||null===(Zt=Zt.filter(ne=>{var ae;return"matching-empty"==(null===(ae=ne.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===Zt?void 0:Zt.length)==((null==d||null===(se=d.test)||void 0===se||null===(se=se.answer)||void 0===se?void 0:se.matching)||[]).map(ne=>ne.key==ne.value?1:0).reduce((ne,ae)=>ne+ae)}Ct(C,d,B,nt,{iscorrect:wt},ut)})(C,d,ct.nodeStatus,ct.slideStatus,nt)})}})(d,C)};var W=w(1281),Q=w(6153),u=w(3069),lt=w(7945),Tt=w(3477),Mt=w(745),Dt=w(6407);const Bt=(C,d,B)=>{if(B.slideStatus!=ct.slideStatus||!d.length)return;let nt=d.shift(),ut=C.filter(et=>{var yt;return(null!==(yt=et.idx)&&void 0!==yt?yt:0)==nt});if(!ut.length)return;let J=Math.max.apply(null,ut.map(et=>{var yt;return null!==(yt=et.time)&&void 0!==yt?yt:0})),O=!1,Z=J<.5?0:setTimeout(()=>{O||(O=!0,Bt(C,d,B))},1e3*J);Wt(C,d,ut,0,B,{idx:nt,total:ut.length,counter:0,isRecursive:O,timeoutRecursive:Z,maxTimeCoundown:J,uid:Math.floor(1e9*Math.random())})},Wt=(C,d,B,nt,ut,J)=>{if(ut.slideStatus!=ct.slideStatus)return;let O=B[nt];if(O){switch(O.type){case ot.h.GROUP:break;case ot.h.CIRCLE:(0,W.K)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case ot.h.ELLIPSE:(0,Q.W)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case ot.h.LINE:(0,u.q)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case ot.h.RECT:(0,lt.a)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case ot.h.POLYGON:(0,Tt.u)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null);break;case ot.h.FOREIGNOBJECT:(0,Mt.$)(O.id,{size:O.size,attribute:O.attribute,style:O.style,source:O.source},O.pid?window.document.getElementById(O.pid):null);break;case ot.h.IMAGE:(0,h.B)(O.id,{size:O.size,attribute:O.attribute,source:O.source},O.pid?window.document.getElementById(O.pid):null);break;case ot.h.TEXT:(0,f.L)(O.id,{size:O.size,attribute:O.attribute,source:O.source},O.pid?window.document.getElementById(O.pid):null);break;case ot.h.PATH:(0,Dt.X)(O.id,{size:O.size,attribute:O.attribute},O.pid?window.document.getElementById(O.pid):null)}xt(ut.slide,O,ut,()=>{J.counter+=1,J.maxTimeCoundown<.5&&J.counter>=J.total&&(J.total=J.counter=0,J.isRecursive||(clearTimeout(J.timeoutRecursive),J.isRecursive=!0,setTimeout(()=>{Bt(C,d,ut)},250)))}),Wt(C,d,B,++nt,ut,J)}},ct=new class Rt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(d){this._dataSource=d.data||{},E.L.variable.set=d.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var d,B;return null!==(d=null===(B=this._dataSource)||void 0===B||null===(B=B.slides)||void 0===B?void 0:B.length)&&void 0!==d?d:0}get slides(){var d;return(null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[]}get slide(){var d;return((null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[])[this._slideIdx]||{}}findNode(d){var B;let nt=null===(B=this._dataSource)||void 0===B||null===(B=B.slides)||void 0===B?void 0:B.find((mt,st)=>st==this._slideIdx),ut=null==nt?void 0:nt.svg,J=(mt,st)=>{let pt=null==mt?void 0:mt.find(qt=>qt.id==d);if(pt)return pt.pid=st,pt;let St=0,Ft=mt.length||0;for(;St<Ft&&!pt&&(pt=J(mt[St].nodes||[],mt[St].id),!pt);)St++;return pt},O=J((null==ut?void 0:ut.nodes)||[]);var Z,et,yt,wt,At;return O?(O.style=null!==(Z=O.style)&&void 0!==Z?Z:{},O.source=null!==(et=O.source)&&void 0!==et?et:{},O.animate=null!==(yt=O.animate)&&void 0!==yt?yt:{},O.interactive=null!==(wt=O.interactive)&&void 0!==wt?wt:{},O.variable=null!==(At=O.variable)&&void 0!==At?At:{},O):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(d,B,nt){var ut;let J;var O,Z;if(this.refreshNodeStatus(),this.refreshSlideStatus(),nt)J=null===(O=this._dataSource)||void 0===O||null===(O=O.slides)||void 0===O?void 0:O.find(At=>At.code==nt||At.id==nt),J&&(this._slideIdx=(null===(Z=this._dataSource)||void 0===Z||null===(Z=Z.slides)||void 0===Z?void 0:Z.indexOf(J))||0);else if(B){var et,yt;J=null===(et=this._dataSource)||void 0===et||null===(et=et.slides)||void 0===et?void 0:et.find(At=>At.id==B),J&&(this._slideIdx=(null===(yt=this._dataSource)||void 0===yt||null===(yt=yt.slides)||void 0===yt?void 0:yt.indexOf(J))||0)}else this._slideIdx=Math.min(Math.max(d||0,0),this.slideTotal-1),J=this.slide;if(J){var wt;Yt(E.L.container,E.L.svg,J,!0),null===(wt=jQuery(E.L.svg).find("#"+T.F.BACKGROUND_GROUP))||void 0===wt||wt.empty();let At=(0,q.RY)(T.F.BACKGROUND_GROUP,"g",void 0,E.L.svg);(0,q.I6)(At,J),(C=>{var d,B,nt,ut;let J=ct.nodeStatus,O=ct.slideStatus;null===(d=C.svg)||void 0===d||d.nodes.forEach(et=>{et.pid=Math.ceil(1e9*Math.random()),(0,P.v)(et.pid)});let Z=null===(B=C.svg)||void 0===B||null===(B=B.nodes)||void 0===B?void 0:B.map(et=>{var yt;return null!==(yt=et.idx)&&void 0!==yt?yt:0}).filter((et,yt,wt)=>wt.indexOf(et)==yt).sort((et,yt)=>(null!=et?et:0)-(null!=yt?yt:0));Bt(null!==(nt=null===(ut=C.svg)||void 0===ut?void 0:ut.nodes)&&void 0!==nt?nt:[],null!=Z?Z:[],{slide:C,nodeStatus:J,slideStatus:O})})(J)}this.changeSlide(this.slides,null===(ut=this.slide)||void 0===ut?void 0:ut.id,this.slideIdx,this.slides.length,J)}set onChangeSlide(d){this._fnChangeSlides.push(d)}changeSlide(d,B,nt,ut,J){this._fnChangeSlides.forEach(O=>O(d,B,nt,ut,J))}},Yt=(C,d,B,nt)=>{var ut,J,O,Z;let et=window.document.querySelector(d);var yt;et||(et=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(yt=window.document.querySelector(C))||void 0===yt||yt.appendChild(et)),nt&&(et.textContent=null);let{x:wt,y:At,width:mt,height:st}=null!==(ut=null==B||null===(J=B.svg)||void 0===J?void 0:J.viewBox)&&void 0!==ut?ut:E.L.screen.frameSize;et.setAttributeNS(null,"viewBox",wt+" "+At+" "+mt+" "+st),et.setAttribute("id",d.replace("#",""));var Zt,se,pt=null!==(O=jQuery(C).width())&&void 0!==O?O:1080,St=null!==(Z=jQuery(C).height())&&void 0!==Z?Z:1080,qt=mt/st;qt>=pt/St?se=(Zt=pt)/qt:Zt=(se=St)*qt,et.setAttributeNS(null,"width",Zt.toString()),et.setAttributeNS(null,"height",se.toString())}},7050:(he,zt,w)=>{w.d(zt,{M:()=>ot,a:()=>E});var T=w(5619);const E=(gt,_,y)=>{var N;let{value:f}=null!==(N=gt.animate)&&void 0!==N?N:{};ot(gt.id,{node:gt,value:f,nodeStatus:_,slideStatus:y},()=>{})},ot=(gt,_,y)=>{var N;if(!_.value)return void y();let M=jQuery("#"+gt).parents("g");if(!M.length)return void y();let{size:f}=_.node;M.css("transform-origin",`${f.x+f.width/2}px ${f.y+f.height/2}px`);let P="",A=null!==(N=_.iteration)&&void 0!==N?N:0,S=[];(_.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?S.push(_.value):_.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(_.value)?(S.push("animation"),S.push(`animation-${_.value}`)):(S.push("animate__animated"),S.push(`animate__${_.value}`)):(S.push("animation"),S.push("animation-fadein")),A<0?(S.push("animation-iteration-infinite"),y(),y=function(){}):A>0&&S.push("animation-iteration-"+(A+1)),P=S.join(" "),function(p){let R=function(){M.data("animate-running")?M.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){M.data("animate-running",!1),setTimeout(function(){p()},100)}):p()};M.hasClass("animation")?setTimeout(function(){R()}):R()}(function(){var p;z(gt),(A>0||A<0)&&M.one("animationiteration",function(){_.slideStatus===T.J.slideStatus||(M.data("animate-running",!1),z(gt),_.slideStatus===T.J.slideStatus&&y())}),M.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(M.data("animate-running",!1),z(gt),_.finish){default:case 0:case 1:break;case 2:var R;ot(gt,{node:_.node,value:null===(R=_.node.animate)||void 0===R?void 0:R.out,nodeStatus:_.nodeStatus,slideStatus:_.slideStatus},()=>{M.addClass("hide")})}_.slideStatus===T.J.slideStatus&&y()}),M.attr("data-class",null!==(p=M.attr("class"))&&void 0!==p?p:""),M.addClass(P),M.data("animate-running",!0)})},z=function(gt){var _,y,N=jQuery("#"+gt).parents("g"),M=null===(_=N.attr("class"))||void 0===_?void 0:_.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),f=null===(y=N.attr("class"))||void 0===y?void 0:y.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);M&&M.forEach(function(A){jQuery(N).removeClass(A)}),f&&f.forEach(function(A){jQuery(N).removeClass(A)});let P=N.attr("data-class");P&&(N.attr("class",P),N.removeAttr("data-class")),jQuery(N).data("animation-running",!1)}},8946:(he,zt,w)=>{w.d(zt,{h:()=>ot});var T=w(5619),E=w(7050);const ot=(gt,_,y)=>{var N;if(!_.value)return void y();let M=jQuery("#"+gt).parents("g");if(!M.length)return void y();let{size:f}=_.node;M.css("transform-origin",`${f.x+f.width/2}px ${f.y+f.height/2}px`);let P="",A=null!==(N=_.iteration)&&void 0!==N?N:0,S=[];(_.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?S.push(_.value):(S.push("animation"),S.push(_.value?"animation-"+_.value:"animation-fadein")),A<0?(S.push("animation-iteration-infinite"),y(),y=function(){}):A>0&&S.push("animation-iteration-"+(A+1)),P=S.join(" "),function(p){let R=function(){M.data("animate-running")?M.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){M.data("animate-running",!1),setTimeout(function(){p()},100)}):p()};M.hasClass("animation")?setTimeout(function(){R()}):R()}(function(){var p;z(gt),(A>0||A<0)&&M.one("animationiteration",function(){_.slideStatus===T.J.slideStatus||(M.data("animate-running",!1),z(gt),_.slideStatus===T.J.slideStatus&&y())}),M.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(M.data("animate-running",!1),z(gt),_.finish){default:case 0:case 1:break;case 2:var R;(0,E.M)(gt,{node:_.node,value:null===(R=_.node.animate)||void 0===R?void 0:R.out,nodeStatus:_.nodeStatus,slideStatus:_.slideStatus},()=>{M.addClass("hide")})}_.slideStatus===T.J.slideStatus&&y()}),M.attr("data-class",null!==(p=M.attr("class"))&&void 0!==p?p:""),M.addClass(P),M.data("animate-running",!0)})},z=function(gt){var _,y=jQuery("#"+gt).parents("g"),N=null===(_=y.attr("class"))||void 0===_?void 0:_.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);N&&N.forEach(function(f){jQuery(y).removeClass(f)});let M=y.attr("data-class");M&&(y.attr("class",M),y.removeAttr("data-class")),jQuery(y).data("animation-running",!1)}},7657:(he,zt,w)=>{w.d(zt,{c:()=>gt});var T=w(9506),E=w(5619),ot=w(5970),z=w(7050);const gt=(y,N,M)=>{var f;if(!N.points||!N.points.length)return void M();let P=jQuery("#"+y),S=function _(y){let N=[];2===y.length&&y.splice(1,0,[(y[0][0]+y[1][0])/2,(y[0][1]+y[1][1])/2]);let S,dt,p,M=1,f=y.length;for(;M<f;){if(S=y[M-1],dt=y[M],p=y[M+1],(Math.abs(S[0]-dt[0])>=15||Math.abs(S[1]-dt[1])>=15)&&Math.pow(S[0]-dt[0],2)+Math.pow(S[1]-dt[1],2)>=Math.pow(15,2)&&p&&(Math.abs(S[0]-p[0])<=20||Math.abs(S[1]-p[1])<=20)&&Math.pow(S[0]-p[0],2)+Math.pow(S[1]-p[1],2)<=Math.pow(20,2))N.push(dt);else{let h=dt[0]-S[0],I=dt[1]-S[1],j=Math.max(Math.abs(h),Math.abs(I));for(var R=0;R<j;R+=15)N.push([S[0]+h*R/j,S[1]+I*R/j])}M++}return f>0&&(N.splice(0,0,y[0]),N.push(y[f-1])),N}((H=>{if(1==H.length){let{size:V}=N.node;return[[V.x+V.width/2,V.y+V.height/2],...H]}return[...H]})(N.points||[])),dt=null!==(f=N.iteration)&&void 0!==f?f:0;if(dt<0&&(M(),M=function(){}),P.data("work-running")&&dt<0)return;P.data("work-running",!0);let q,p=S.length,R=Math.max(20,1e3*(N.time||3)/p),{id:h,type:I,size:j,attribute:Y}=E.J.findNode(y),X=function(H){if(N.slideStatus!==E.J.slideStatus)return P.data("work-running",!1),void(N.slideStatus===E.J.slideStatus&&M());if(H<p){let Et=S[H];Et&&(q=Object.assign({},j,{x:Et[0]-j.width/2,y:Et[1]-j.height/2}),Object.assign(Y,(0,T.xW)(I,q,Y)),(0,ot.tD)(window.document.getElementById(h),Y),setTimeout(function(){X(++H)},R))}else if(dt>0)dt--,X(1);else if(dt<0)X(1);else switch(P.data("work-running",!1),N.slideStatus===E.J.slideStatus&&M(),N.finish){default:case 0:break;case 1:Object.assign(Y,(0,T.xW)(I,j,Y)),(0,ot.tD)(window.document.getElementById(h),Y);break;case 2:var V;(0,z.M)(N.node.id,{node:N.node,value:null===(V=N.node.animate)||void 0===V?void 0:V.out,nodeStatus:N.nodeStatus,slideStatus:N.slideStatus},()=>{P.addClass("hide")})}};X(1)}},6769:(he,zt,w)=>{w.d(zt,{d:()=>ot});var T=w(7102),E=w(5619);const ot=(gt,_,y,N,M)=>{var f,P,A,S,dt,p,R;if(N.slideStatus!=E.J.slideStatus)return _.async&&"change-slide"!=_.async?void 0:void M();if(N.nodeStatus!=E.J.nodeStatus&&(!_.async||"change-node"==_.async))return void M();if(!(null!==(f=_.source)&&void 0!==f&&f.path||null!==(P=_.source)&&void 0!==P&&P.url))return console.warn(`${gt} -> audio no source!`),M(),void(M=()=>{});var h=jQuery("#"+gt);let I=null!==(A=_.iteration)&&void 0!==A?A:0;if(I<0&&(M(),M=function(){}),!(h.data("audio-running")&&I<0)){h.data("audio-running",!0);var j=function(q){q.pause(),q.remove(),h.data("audio-running",!1)},Y=new Audio;return Y.autoplay=!0,Y.loop=0!=I,Y.preload="auto",Y.controls=!0,Y.setAttributeNode(document.createAttribute("playsinline")),Y.addEventListener("canplay",function(){var q=Y.play();q&&q.then(function(X){var H;h.data("audio-running",!0),"time"==_.async?setTimeout(()=>{j(Y),M(),M=()=>{}},1e3*(null!==(H=_.time)&&void 0!==H?H:1)):"non-stop"==_.async&&(M(),M=()=>{})}).catch(function(X){h.data("audio-running",!1),N.slideStatus===E.J.slideStatus&&(M(),M=()=>{})})}),Y.addEventListener("timeupdate",function(){switch(_.async){case"time":case"non-stop":break;case"finish-action":y.total>=2&&y.total-y.counter==1&&(j(this),M(),M=()=>{});break;default:case"change-node":N.nodeStatus!==E.J.nodeStatus&&(j(this),M(),M=()=>{});break;case"change-slide":N.slideStatus!==E.J.slideStatus&&(j(this),M(),M=()=>{})}}),Y.addEventListener("canplaythrough",function(){this.loop&&(I>0?I--:0==I&&(this.loop=!1))}),Y.addEventListener("play",function(){}),Y.addEventListener("pause",function(){}),Y.addEventListener("ended",function(){this.remove(),h.data("audio-running",!1),N.slideStatus===E.J.slideStatus&&(M(),M=()=>{})}),Y.onerror=function(){this.remove(),h.data("audio-running",!1),N.slideStatus===E.J.slideStatus&&(M(),M=()=>{})},Y.src=(null!==(S=_.source)&&void 0!==S&&S.path?(null===(dt=T.L.config)||void 0===dt?void 0:dt.readfileuploadurl)+(null===(p=_.source)||void 0===p?void 0:p.path):null===(R=_.source)||void 0===R?void 0:R.url)||"",Y}}},334:(he,zt,w)=>{w.d(zt,{J:()=>M});var T=w(7102),E=w(5619),ot=w(8946),z=w(7657),gt=w(6769),_=w(3591),y=w(2241),N=w(7050);const M=(f,P,A,S)=>{var dt,p,R;let h={total:0,counter:0},{triggershow:I,triggerrun:j,triggerhide:Y,action:q,audio:X,slide:H,media:V}=null!==(dt=null===(p=f.interactive)||void 0===p?void 0:p.click)&&void 0!==dt?dt:{};if(console.log(`node(${f.id}) | nodeStatus(${P}) | slideStatus(${A}) | click`),I){let{id:jt,ids:it,time:Ot,async:tt}=I;"asynctrue"==tt?(0,_.GD)({id:jt,ids:it,nodeStatus:P,slideStatus:A}):"time"==tt&&setTimeout(()=>{(0,_.GD)({id:jt,ids:it,nodeStatus:P,slideStatus:A})},1e3*(null!=Ot?Ot:0))}if(j){let{id:jt,ids:it,time:Ot,async:tt}=j;"asynctrue"==tt?(0,_.MF)({id:jt,ids:it,nodeStatus:P,slideStatus:A}):"time"==tt&&setTimeout(()=>{(0,_.MF)({id:jt,ids:it,nodeStatus:P,slideStatus:A})},1e3*(null!=Ot?Ot:0))}if(Y){let{id:jt,ids:it,time:Ot,async:tt}=Y;"asynctrue"==tt?(0,_.vi)({id:jt,ids:it,nodeStatus:P,slideStatus:A}):"time"==tt&&setTimeout(()=>{(0,_.vi)({id:jt,ids:it,nodeStatus:P,slideStatus:A})},1e3*(null!=Ot?Ot:0))}let Et=()=>{setTimeout(()=>{if(h.counter>=h.total){if(S&&S(),I){let{id:jt,ids:it,async:Ot}=I;(!Ot||"asyncfalse"==Ot)&&(0,_.GD)({id:jt,ids:it,nodeStatus:P,slideStatus:A})}if(j){let{id:jt,ids:it,async:Ot}=j;(!Ot||"asyncfalse"==Ot)&&(0,_.MF)({id:jt,ids:it,nodeStatus:P,slideStatus:A})}if(Y){let{id:jt,ids:it,async:Ot}=Y;(!Ot||"asyncfalse"==Ot)&&(0,_.vi)({id:jt,ids:it,nodeStatus:P,slideStatus:A})}}})};if(null!=q&&q.value){h.total+=1;let jt=()=>{h.counter+=1,Et()};switch(null==q?void 0:q.value){case"hide":var Vt;(0,N.M)(f.id,{node:f,value:null===(Vt=f.animate)||void 0===Vt?void 0:Vt.out,nodeStatus:P,slideStatus:A},()=>{jQuery("#"+f.id).addClass("hide"),jt()});break;case"points":{let{points:it,time:Ot,iteration:tt,finish:It}=q;it&&(0,z.c)(f.id,{node:f,points:it,time:Ot,iteration:tt,finish:It,nodeStatus:P,slideStatus:A},jt);break}default:{let{value:it,time:Ot,iteration:tt,finish:It}=q;(0,ot.h)(f.id,{node:f,value:it,time:Ot,iteration:tt,finish:It,nodeStatus:P,slideStatus:A},jt);break}}}if(null!=X&&null!==(R=X.source)&&void 0!==R&&R.path){h.total+=1;let jt=()=>{h.counter+=1,Et()};(0,gt.d)(f.id,X,h,{nodeStatus:P,slideStatus:A},jt)}if(h.total||Et(),null!=H&&H.id)switch(H.id){case-1:E.J.runSlide(E.J.slideIdx-1);break;case-2:E.J.runSlide(E.J.slideIdx+1);break;default:var Qt;E.J.runSlide(void 0,H.id,null===(Qt=H.code)||void 0===Qt?void 0:Qt.toString())}if(null!=V&&V.type){var Jt;let it=`<div class="popup-media-viewer"><iframe src="${(0,y._)({readfileuploadurl:null===(Jt=T.L.config)||void 0===Jt?void 0:Jt.readfileuploadurl,type:null==V?void 0:V.type,oss:null==V?void 0:V.oss,path:null==V?void 0:V.path,url:null==V?void 0:V.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,Ot=jQuery(it).appendTo(window.document.body);Ot.find(".btn-close").click(function(tt){tt.preventDefault(),Ot.remove()})}}},3591:(he,zt,w)=>{w.d(zt,{GD:()=>z,MF:()=>gt,vi:()=>_});var T=w(5619),E=w(334),ot=w(7050);const z=y=>{y.id?jQuery("#"+y.id).removeClass("hide"):y.ids&&y.ids.forEach(N=>{jQuery("#"+N).removeClass("hide")})},gt=y=>{y.id?(jQuery("#"+y.id).removeClass("hide"),(0,E.J)(T.J.findNode(y.id),y.nodeStatus,y.slideStatus)):y.ids&&y.ids.forEach(N=>{jQuery("#"+N).removeClass("hide"),(0,E.J)(T.J.findNode(N),y.nodeStatus,y.slideStatus)})},_=y=>{if(y.id){var N;let M=T.J.findNode(y.id);(0,ot.M)(y.id,{node:M,value:null===(N=M.animate)||void 0===N?void 0:N.out,nodeStatus:y.nodeStatus,slideStatus:y.slideStatus},()=>{jQuery("#"+y.id).addClass("hide")})}else y.ids&&y.ids.forEach(M=>{var f;let P=T.J.findNode(M);(0,ot.M)(M,{node:P,value:null===(f=P.animate)||void 0===f?void 0:f.out,nodeStatus:y.nodeStatus,slideStatus:y.slideStatus},()=>{jQuery("#"+M).addClass("hide")})})}},5970:(he,zt,w)=>{w.d(zt,{cR:()=>j,rN:()=>X,t8:()=>Y,fn:()=>H,RY:()=>Jt,tD:()=>V,KG:()=>Vt,c_:()=>Et,s6:()=>q,I6:()=>kt,in:()=>jt,IA:()=>Ct,KP:()=>It,AE:()=>it,xJ:()=>tt,Mo:()=>Ot,kE:()=>xt});var T=w(1999),E=w(7873),ot=w(6315),gt=/^#?[a-fA-F0-9]+$/;const N=(W,Q)=>{var u;if("none"==(W=null!==(u=W)&&void 0!==u?u:""))return"none";if("transparent"==W)return"rgba(0,0,0,0)";if(W.includes("rgba("))return W;if(W.includes("rgb(")&&(W=(0,ot.w)(W)),!(W=W.replace(/[^0-9a-fA-F]/g,"")))return"";if(!gt.test(W))return console.error(`hex2rgba -> ${W}: first argument has invalid hexadecimal characters`),"";if("#"===W[0]&&(W=W.slice(1)),3===W.length){let Tt=W.split("");Tt.splice(2,0,W[2]),Tt.splice(1,0,W[1]),Tt.splice(0,0,W[0]),W=Tt.join("")}if(6!==W.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var lt=[parseInt(W.slice(0,2),16),parseInt(W.slice(2,4),16),parseInt(W.slice(4,6),16)];return Q="number"==typeof Q?Q:parseFloat(Q),lt.push(Q>=0&&Q<=1?Q:1),"rgba("+lt.join(",")+")"};var M=w(2241),f=w(8779),P=w(7102),A=w(9841),S=w(7945),dt=w(9173),p=w(1281),R=w(5619),h=w(745),I=w(6847);class j{constructor(Q,u){let lt=window.document.querySelector(u);var Tt;lt||(lt=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(Tt=window.document.querySelector(Q))||void 0===Tt||Tt.appendChild(lt));let{svgViewBox:Mt,svgSize:Dt}=P.L.screen.init();lt.setAttributeNS(null,"viewBox",`${Mt.x} ${Mt.y} ${Mt.width} ${Mt.height}`),lt.setAttribute("id",u.replace("#","")),lt.style.display="block",lt.style.width=`${Dt.width}px`,lt.style.height=`${Dt.height}px`,lt.style.backgroundColor="#fafafa",lt.style.cursor="default"}}const Y=W=>{jQuery(P.L.target).find("#"+E.F.BACKGROUND_GROUP).empty();let Q=Jt(E.F.BACKGROUND_GROUP,"g",void 0,P.L.target);kt(Q,W),(()=>{let u=window.document.getElementById(null==W?void 0:W.id);jQuery(u).find("#"+E.F.BACKGROUND_GROUP).empty();let lt=Jt(E.F.BACKGROUND_GROUP,"g",void 0,u);kt(lt,W)})()},q=()=>{let W=P.L.screen.svgViewBox,Q=P.L.screen.svgSize;P.L.target&&(P.L.target.setAttributeNS(null,"viewBox",`${W.x} ${W.y} ${W.width} ${W.height}`),P.L.target.style.left=`${Q.x}px`,P.L.target.style.top=`${Q.y}px`,P.L.target.style.width=`${Q.width}px`,P.L.target.style.height=`${Q.height}px`)},X=()=>{jQuery(P.L.target).find(">*:not(defs)").remove()},H=(W,Q,u,lt,Tt)=>{let Mt;return W?(Mt=jQuery(Tt||P.L.target).find("#"+W).get(0),Mt||(Mt=window.document.createElementNS("http://www.w3.org/2000/svg",u),Mt.setAttribute("id",W),Q==T.h.FOREIGNOBJECT&&Mt.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(Mt).appendTo(Tt||P.L.target))):(Mt=window.document.createElementNS("http://www.w3.org/2000/svg",u),jQuery(Mt).appendTo(Tt||P.L.target)),null!=lt&&lt.attribute&&V(Mt,null==lt?void 0:lt.attribute),null!=lt&&lt.style&&Et(Mt,null==lt?void 0:lt.style),null!=lt&&lt.source&&Vt(Mt,Q,null==lt?void 0:lt.source),Mt},V=(W,Q)=>{return jQuery(W).attr((u=Object.assign({},Q||{}),null===(lt=Object.keys(u))||void 0===lt||lt.forEach(Dt=>{switch(Dt){case"fill":break;case"fillRule":var Ht;Object.assign(u,{"fill-rule":null!==(Ht=u.fillRule)&&void 0!==Ht?Ht:null,fillRule:null});break;case"stroke":var Bt;Object.assign(u,{"stroke-width":null!==(Bt=u.strokeWidth)&&void 0!==Bt?Bt:null,strokeWidth:null});break;case"strokeLinecap":var Wt;Object.assign(u,{"stroke-linecap":null!==(Wt=u.strokeLinecap)&&void 0!==Wt?Wt:null,strokeLinecap:null});break;case"strokeLinejoin":var Rt;Object.assign(u,{"stroke-linejoin":null!==(Rt=u.strokeLinejoin)&&void 0!==Rt?Rt:null,strokeLinejoin:null});break;case"strokeMiterlimit":var ct;Object.assign(u,{"stroke-miterlimit":null!==(ct=u.strokeMiterlimit)&&void 0!==ct?ct:null,strokeMiterlimit:null});break;case"strokeDasharray":var Yt;Object.assign(u,{"stroke-dasharray":null!==(Yt=u.strokeDasharray)&&void 0!==Yt?Yt:null,strokeDasharray:null});break;case"strokeDasharrays":var C,d;Object.assign(u,{"stroke-dasharray":null!==(C=null===(d=u.strokeDasharrays)||void 0===d?void 0:d.join(" "))&&void 0!==C?C:null,strokeDasharrays:null});break;case"fontFamily":var B;Object.assign(u,{"font-family":null!==(B=u.fontFamily)&&void 0!==B?B:null,fontFamily:null});break;case"fontWeight":var nt;Object.assign(u,{"font-weight":null!==(nt=u.fontWeight)&&void 0!==nt?nt:null,fontWeight:null});break;case"fontSize":var ut;Object.assign(u,{"font-size":null!==(ut=u.fontSize)&&void 0!==ut?ut:null,fontSize:null});break;case"textLength":Object.assign(u,{textLength:u.textLength?`${u.textLength}px`:null});break;case"transformOrigin":var J;Object.assign(u,{"transform-origin":null!==(J=u.transformOrigin)&&void 0!==J?J:null,transformOrigin:null})}}),Object.assign({},null!=u?u:{},{fill:null!=u&&u.fill?N(u.fill,null!==(Tt=null==u?void 0:u.fillOpacity)&&void 0!==Tt?Tt:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=u&&u.stroke?N(u.stroke,null!==(Mt=null==u?void 0:u.strokeOpacity)&&void 0!==Mt?Mt:1):"rgba(0,0,0,0)",strokeOpacity:null}))),W;var u,lt,Tt,Mt},Et=(W,Q)=>{return jQuery(W).css((u=Object.assign({},Q||{}),null===(lt=Object.keys(u))||void 0===lt||lt.forEach(Tt=>{switch(Tt){case"padding":Object.assign(u,{padding:u.padding?`${u.padding}px`:null});break;case"borderWidth":var Mt;Object.assign(u,u.borderWidth&&u.borderColor?{"border-width":`${u.borderWidth}px`,"border-style":u.borderStyle||"solid","border-color":N(u.borderColor,null!==(Mt=u.borderOpacity)&&void 0!==Mt?Mt:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(u,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(u,{"border-radius":u.borderRadius?`${u.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Dt;Object.assign(u,u.backgroundColor?{"background-color":N(u.backgroundColor,null!==(Dt=u.backgroundOpacity)&&void 0!==Dt?Dt:1)}:{"background-color":""}),Object.assign(u,{backgroundColor:null,backgroundOpacity:null})}}),u)),W;var u,lt},Vt=(W,Q,u)=>{switch(Q){case T.h.TEXT:var lt,Tt;jQuery(W).text(null!==(lt=null==u||null===(Tt=u.text)||void 0===Tt?void 0:Tt.textContent)&&void 0!==lt?lt:"");break;case T.h.IMAGE:var Mt,Dt,Ht,Bt,Wt;jQuery(W).attr("href",(null==u||null===(Mt=u.image)||void 0===Mt?void 0:Mt.base64)||(null!=u&&null!==(Dt=u.image)&&void 0!==Dt&&Dt.path?(null===(Ht=P.L.config)||void 0===Ht?void 0:Ht.readfileuploadurl)+(null==u||null===(Bt=u.image)||void 0===Bt?void 0:Bt.path):null==u||null===(Wt=u.image)||void 0===Wt?void 0:Wt.url)||"");break;case T.h.FOREIGNOBJECT:switch(null==u?void 0:u.type){case"text":var Rt,ct;if(null!==(Rt=u.text)&&void 0!==Rt&&Rt.variableKeywords&&null!==(ct=u.text)&&void 0!==ct&&ct.variableKeywords.length){var Yt;let n=P.L.variable.getKeys(),l=(null===(Yt=u.text)||void 0===Yt?void 0:Yt.textContent)||"";u.text.variableKeywords.forEach(g=>{var m=g.replace(/[^a-zA-Z0-9_]/gm,"");if(n.indexOf(m)>=0){var c=P.L.variable.getValue(m);l=l.replace(g,c)}}),jQuery(W).text(l)}else{var C;jQuery(W).text((null===(C=u.text)||void 0===C?void 0:C.textContent)||"")}break;case"html":{var d,B,nt;let n=(null==u||null===(d=u.html)||void 0===d?void 0:d.htmlContent)||"";if(null!==(B=u.html)&&void 0!==B&&B.variableKeywords&&null!==(nt=u.html)&&void 0!==nt&&nt.variableKeywords.length){let l=P.L.variable.getKeys();u.html.variableKeywords.forEach(g=>{var m=g.replace(/[^a-zA-Z0-9_]/gm,"");if(l.indexOf(m)>=0){var c=P.L.variable.getValue(m);n=n.replace(g,c)}})}jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${n}</div>`).find("img[path],video[path],iframe[path]").each((l,g)=>{var m,c;g.setAttribute("src",(null!==(m=null===(c=P.L.config)||void 0===c?void 0:c.readfileuploadurl)&&void 0!==m?m:"")+g.getAttribute("path")),g.removeAttribute("path")});break}case"input":var ut,J,O,Z;if(null!==(ut=u.input)&&void 0!==ut&&ut.input)jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(O=null===(Z=u.input)||void 0===Z?void 0:Z.placeholder)&&void 0!==O?O:""}" maxlength="100" /></div>`);else if(null!==(J=u.input)&&void 0!==J&&J.textarea){var et,yt;jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(et=null===(yt=u.input)||void 0===yt?void 0:yt.placeholder)&&void 0!==et?et:""}" maxlength="1000"></textarea></div>`)}break;case"image":var wt,At,mt,st,pt;jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(wt=u.image)||void 0===wt?void 0:wt.base64)||(null!==(At=u.image)&&void 0!==At&&At.path?(null===(mt=P.L.config)||void 0===mt?void 0:mt.readfileuploadurl)+(null===(st=u.image)||void 0===st?void 0:st.path):null===(pt=u.image)||void 0===pt?void 0:pt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var St,Ft,qt,Zt;jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(St=u.iframe)&&void 0!==St&&St.path?(null===(Ft=P.L.config)||void 0===Ft?void 0:Ft.readfileuploadurl)+(null===(qt=u.iframe)||void 0===qt?void 0:qt.path):null===(Zt=u.iframe)||void 0===Zt?void 0:Zt.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var se,ne,ae,pe,Ae;let n=(0,M._)({readfileuploadurl:null===(se=P.L.config)||void 0===se?void 0:se.readfileuploadurl,type:null===(ne=u.embed)||void 0===ne?void 0:ne.type,oss:null===(ae=u.embed)||void 0===ae?void 0:ae.oss,path:null===(pe=u.embed)||void 0===pe?void 0:pe.path,url:null===(Ae=u.embed)||void 0===Ae?void 0:Ae.url});jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${n}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var ke,me;jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(ke=null===(me=u.svg)||void 0===me?void 0:me.svgContent)&&void 0!==ke?ke:""}</div>`);break;case"test":{var Oe,Te,je,_e;let n=(null==u||null===(Oe=u.html)||void 0===Oe?void 0:Oe.htmlContent)||"";if(null!==(Te=u.html)&&void 0!==Te&&Te.variableKeywords&&null!==(je=u.html)&&void 0!==je&&je.variableKeywords.length){let l=P.L.variable.getKeys();u.html.variableKeywords.forEach(g=>{var m=g.replace(/[^a-zA-Z0-9_]/gm,"");if(l.indexOf(m)>=0){var c=P.L.variable.getValue(m);n=n.replace(g,c)}})}switch(null==u||null===(_e=u.test)||void 0===_e?void 0:_e.type){case"truefalse":var qe;jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(qe=u.test.truefalse)&&void 0!==qe&&qe.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"singlechoice":var Ue;jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(Ue=u.test.singlechoice)&&void 0!==Ue&&Ue.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"multichoice":var He;jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==u?void 0:u.test.type}" data-correct="${null!=u&&null!==(He=u.test.multichoice)&&void 0!==He&&He.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"matching-empty":var $e;jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==u||null===($e=u.test.matching)||void 0===$e?void 0:$e.key}"></div>`);break;case"matching-content":var Xe,Ye,ti;jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==u||null===(Xe=u.test.matching)||void 0===Xe?void 0:Xe.key}"><div class="ondrag-item" data-key="${null!==(Ye=null==u||null===(ti=u.test)||void 0===ti||null===(ti=ti.matching)||void 0===ti?void 0:ti.key)&&void 0!==Ye?Ye:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div></div>`);break;case"fill":var hi;((null===(hi=u.html)||void 0===hi?void 0:hi.fillKeywords)||[]).forEach(l=>{var g=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${l.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;n=n.replace(new RegExp(l.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),g)}),jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${n}</div></div></div>`);break;case"speech":jQuery(W).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var _t,K,i,r,o;jQuery(W).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(_t=null!==(K=u.image)&&void 0!==K&&K.path?(null===(i=P.L.config)||void 0===i?void 0:i.readfileuploadurl)+(null===(r=u.image)||void 0===r?void 0:r.path):null===(o=u.image)||void 0===o?void 0:o.url)&&void 0!==_t?_t:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(W).find("img[path],video[path],iframe[path]").each((l,g)=>{var m,c;g.setAttribute("src",(null!==(m=null===(c=P.L.config)||void 0===c?void 0:c.readfileuploadurl)&&void 0!==m?m:"")+g.getAttribute("path")),g.removeAttribute("path")})}}}},Jt=(W,Q,u,lt)=>{let Tt=jQuery(lt||P.L.target).find("#"+W).get(0);return Tt||(Tt=window.document.createElementNS("http://www.w3.org/2000/svg",Q),Tt.setAttribute("id",W),jQuery(Tt).appendTo(lt||P.L.target)),jQuery(Tt).attr((null==u?void 0:u.attribute)||{}),jQuery(Tt).css((null==u?void 0:u.style)||{}),Tt},jt=(W,Q)=>{let u=(0,A.$)(2),lt={fill:f.pZ.fill,stroke:f.pZ.stroke,"stroke-width":(0,A.$)(f.pZ.strokeWidth)};return[{element:Jt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:Q.x-u,y:Q.y-u,width:Q.width+2*u,height:Q.height+2*u},lt)},W),posType:"rect-center"}]},it=(W,Q)=>{let{size:u}=Q,lt=(0,A.$)(1),Tt=(0,A.$)(2),Mt=(0,A.$)(5),Dt={stroke:f.u$.stroke,"stroke-width":(0,A.$)(f.u$.strokeWidth),"stroke-linecap":f.u$.strokeLinecap},Ht={fill:f.bf.fill,stroke:f.bf.stroke,"stroke-width":(0,A.$)(f.bf.strokeWidth)},Bt={fill:f.eD.fill,stroke:f.eD.stroke,"stroke-width":(0,A.$)(f.eD.strokeWidth),width:(0,A.$)(f.eD.width),height:(0,A.$)(f.eD.height)};return Jt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:u.x-lt,y1:u.y,x2:u.x-lt,y2:u.y+u.height},Dt)},W),Jt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-lt,x2:u.x+u.width,y2:u.y-lt},Dt)},W),Jt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:u.x+u.width+lt,y1:u.y,x2:u.x+u.width+lt,y2:u.y+u.height},Dt)},W),Jt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+lt,x2:u.x+u.width,y2:u.y+u.height+lt},Dt)},W),[{element:Jt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},Ht),style:{cursor:"move"}},W),posType:"rect-center"},{element:Jt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:u.x-Mt,y:u.y-Mt},Bt),style:{cursor:"nw-resize"}},W),posType:"rect-top-left"},{element:Jt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:u.x+u.width-Tt,y:u.y-Mt},Bt),style:{cursor:"ne-resize"}},W),posType:"rect-top-right"},{element:Jt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:u.x-Mt,y:u.y+u.height-Tt},Bt),style:{cursor:"sw-resize"}},W),posType:"rect-bottom-left"},{element:Jt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:u.x+u.width-Tt,y:u.y+u.height-Tt},Bt),style:{cursor:"se-resize"}},W),posType:"rect-bottom-right"},{element:Jt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:u.x+u.width/2-Tt-lt,y:u.y-Mt},Bt),style:{cursor:"n-resize"}},W),posType:"rect-top"},{element:Jt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:u.x+u.width-Tt,y:u.y+u.height/2-Tt-lt},Bt),style:{cursor:"e-resize"}},W),posType:"rect-right"},{element:Jt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:u.x+u.width/2-Tt-lt,y:u.y+u.height-Tt},Bt),style:{cursor:"s-resize"}},W),posType:"rect-bottom"},{element:Jt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:u.x-Mt,y:u.y+u.height/2-Tt-lt},Bt),style:{cursor:"w-resize"}},W),posType:"rect-left"}]},Ot=(W,Q,u)=>{let lt=(0,A.$)(1),Tt={stroke:f.u$.stroke,"stroke-width":(0,A.$)(f.u$.strokeWidth),"stroke-linecap":f.u$.strokeLinecap},Mt={fill:f.bf.fill,stroke:f.bf.stroke,"stroke-width":(0,A.$)(f.bf.strokeWidth)},Dt={fill:f.IB.fill,stroke:f.IB.stroke,"stroke-width":(0,A.$)(f.IB.strokeWidth)},ct=(Jt("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:u.x-lt,y1:u.y,x2:u.x-lt,y2:u.y+u.height},Tt)},W),Jt("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:u.x,y1:u.y-lt,x2:u.x+u.width,y2:u.y-lt},Tt)},W),Jt("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:u.x+u.width+lt,y1:u.y,x2:u.x+u.width+lt,y2:u.y+u.height},Tt)},W),Jt("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:u.x,y1:u.y+u.height+lt,x2:u.x+u.width,y2:u.y+u.height+lt},Tt)},W),Jt("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:u.x,y:u.y,width:u.width,height:u.height},Mt)},W));return Q.forEach(Yt=>{let{size:C}=Yt;Jt("icdt-temp-select-rect-node-"+Yt.id,"rect",{attribute:Object.assign({x:C.x,y:C.y,width:C.width,height:C.height},Dt)},W)}),[{element:ct,posType:"rect-center"}]},tt=(W,Q)=>{let u=(0,A.$)(1),lt={stroke:f.u$.stroke,"stroke-width":(0,A.$)(f.u$.strokeWidth),"stroke-linecap":f.u$.strokeLinecap},Tt={fill:f.bf.fill,stroke:f.bf.stroke,"stroke-width":(0,A.$)(f.bf.strokeWidth)};return Jt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:Q.x-u,y1:Q.y,x2:Q.x-u,y2:Q.y+Q.height},lt)},W),Jt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:Q.x,y1:Q.y-u,x2:Q.x+Q.width,y2:Q.y-u},lt)},W),Jt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:Q.x+Q.width+u,y1:Q.y,x2:Q.x+Q.width+u,y2:Q.y+Q.height},lt)},W),Jt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:Q.x,y1:Q.y+Q.height+u,x2:Q.x+Q.width,y2:Q.y+Q.height+u},lt)},W),[{element:Jt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:Q.x,y:Q.y,width:Q.width,height:Q.height},Tt)},W),posType:"rect-center"}]},It=(W,Q)=>((0,A.$)(-1),(0,A.$)(f.WR.strokeWidth),(0,A.$)(f.WR.strokeDasharray),Jt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:Q.x,y:Q.y,width:Q.width,height:Q.height,class:"cursor-draw"},{fill:f.lq.fill})},W),[]),Ct=(W,Q)=>{let u={fill:f.$u.fill,stroke:f.$u.stroke,"stroke-width":(0,A.$)(f.$u.strokeWidth),"stroke-dasharray":(0,A.$)(f.$u.strokeDasharray)};jQuery(W).empty(),Q.forEach(lt=>{var Tt,Mt;let{size:Dt}=lt;if(!lt.idx)return;Jt("icdt-temp-index-rect-node-"+lt.id,"rect",{attribute:Object.assign({x:Dt.x-5,y:Dt.y-5,width:Dt.width+10,height:Dt.height+10},u)},W);let{element:Ht}=(0,h.$)(Math.ceil(1e9*Math.random()),{size:{x:Dt.x-76,y:Dt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(Tt=lt.idx)&&void 0!==Tt?Tt:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(Mt=lt.time)&&void 0!==Mt?Mt:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},W);Ht.classList.add("node-input"),jQuery(Ht).on("change",'input[name="idx"]',Bt=>{var Wt;lt.idx=parseInt(null!==(Wt=Bt.target.value)&&void 0!==Wt?Wt:"0")}).on("change",'input[name="time"]',Bt=>{var Wt;lt.time=parseFloat(null!==(Wt=Bt.target.value)&&void 0!==Wt?Wt:"0")}).on("click",'button[name="remove"]',Bt=>{lt.idx=0,lt.time=null,Ct(W,Q)})})},kt=(W,Q)=>{var u,lt,Tt,Mt,Dt,Ht;let{color:Bt,opacity:Wt,path:Rt,url:ct,base64:Yt}=null!==(u=null==Q||null===(lt=Q.svg)||void 0===lt?void 0:lt.background)&&void 0!==u?u:{},{x:C,y:d,width:B,height:nt}=null!==(Tt=null==Q||null===(Mt=Q.svg)||void 0===Mt?void 0:Mt.viewBox)&&void 0!==Tt?Tt:{x:0,y:0,width:0,height:0};(0,I.L)(void 0,{size:{x:0,y:(0,A.$)(-21),width:B,height:nt},attribute:{fill:"#999",fontSize:(0,A.$)(14),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(Dt=null!==(Ht=null==Q?void 0:Q.name)&&void 0!==Ht?Ht:null==Q?void 0:Q.code)&&void 0!==Dt?Dt:void 0}}},W),(0,S.a)(void 0,{size:{x:C,y:d,width:B,height:nt},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,A.$)(1),strokeDasharray:(0,A.$)(10),class:"hide-on-viewer"}},W),Bt&&(0,S.a)(void 0,{size:{x:C,y:d,width:B,height:nt},attribute:{fill:Bt,fillOpacity:Wt}},W),Rt&&(0,dt.B)(void 0,{size:{x:C,y:d,width:B,height:nt},source:{type:"image",image:{path:Rt,url:ct,base64:Yt}}},W)},xt=(W,Q,u)=>{var lt;switch(jQuery(W).empty(),null===(lt=Q.test)||void 0===lt?void 0:lt.type){case"truefalse":var Tt;if(null!==(Tt=Q.test)&&void 0!==Tt&&Tt.showselection){var Mt,Dt,Ht;let mt=null==Q||null===(Mt=Q.test)||void 0===Mt||null===(Mt=Mt.answer)||void 0===Mt||null===(Mt=Mt.truefalse)||void 0===Mt?void 0:Mt.value;null===(Dt=Q.svg)||void 0===Dt||Dt.nodes.filter(st=>{var pt;return"truefalse"==(null===(pt=st.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)&&st.id!=mt}).forEach(st=>{var pt;let{x:Ft,y:qt,width:Zt,height:se}=null!==(pt=null==st?void 0:st.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,p.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:qt-.5,width:Zt+1,height:se+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},W)}),null!=Q&&null!==(Ht=Q.test)&&void 0!==Ht&&null!==(Ht=Ht.answer)&&void 0!==Ht&&Ht.truefalse&&mt&&(st=>{let pt=R.J.findNode(mt),{x:Ft,y:qt,width:Zt,height:se}=null!==(st=null==pt?void 0:pt.size)&&void 0!==st?st:{x:0,y:0,width:0,height:0};(0,p.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-2,y:qt-2,width:Zt+4,height:se+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},W)})()}break;case"singlechoice":var Bt;if(null!==(Bt=Q.test)&&void 0!==Bt&&Bt.showselection){var Wt,Rt,ct;let mt=null==Q||null===(Wt=Q.test)||void 0===Wt||null===(Wt=Wt.answer)||void 0===Wt||null===(Wt=Wt.singlechoice)||void 0===Wt?void 0:Wt.value;null===(Rt=Q.svg)||void 0===Rt||Rt.nodes.filter(st=>{var pt;return"singlechoice"==(null===(pt=st.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)&&st.id!=mt}).forEach(st=>{var pt;let{x:Ft,y:qt,width:Zt,height:se}=null!==(pt=null==st?void 0:st.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,p.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:qt-.5,width:Zt+1,height:se+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},W)}),null!=Q&&null!==(ct=Q.test)&&void 0!==ct&&null!==(ct=ct.answer)&&void 0!==ct&&ct.singlechoice&&mt&&(st=>{let pt=R.J.findNode(mt),{x:Ft,y:qt,width:Zt,height:se}=null!==(st=null==pt?void 0:pt.size)&&void 0!==st?st:{x:0,y:0,width:0,height:0};(0,p.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-2,y:qt-2,width:Zt+4,height:se+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},W)})()}break;case"multichoice":var Yt;if(null!==(Yt=Q.test)&&void 0!==Yt&&Yt.showselection){var C,d,B,nt;let mt=null!==(C=null==Q||null===(d=Q.test)||void 0===d||null===(d=d.answer)||void 0===d||null===(d=d.multichoice)||void 0===d?void 0:d.map(st=>st.value))&&void 0!==C?C:[];var ut;null===(B=Q.svg)||void 0===B||B.nodes.filter(st=>{var pt;return"multichoice"==(null===(pt=st.source)||void 0===pt||null===(pt=pt.test)||void 0===pt?void 0:pt.type)&&!mt.includes(st.id)}).forEach(st=>{var pt;let{x:Ft,y:qt,width:Zt,height:se}=null!==(pt=null==st?void 0:st.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,S.a)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:qt-.5,width:Zt+1,height:se+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},W)}),null!=Q&&null!==(nt=Q.test)&&void 0!==nt&&null!==(nt=nt.answer)&&void 0!==nt&&nt.multichoice&&mt.length&&(null==Q||null===(ut=Q.test)||void 0===ut||null===(ut=ut.answer)||void 0===ut||ut.multichoice.forEach(st=>{var pt;let St=R.J.findNode(st.value),{x:qt,y:Zt,width:se,height:ne}=null!==(pt=null==St?void 0:St.size)&&void 0!==pt?pt:{x:0,y:0,width:0,height:0};(0,S.a)(Math.ceil(1e9*Math.random()),{size:{x:qt-2,y:Zt-2,width:se+4,height:ne+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},W)}))}break;case"fill":var J,O;null!=Q&&null!==(J=Q.test)&&void 0!==J&&null!==(J=J.answer)&&void 0!==J&&J.fill&&(null==Q||null===(O=Q.test)||void 0===O||null===(O=O.answer)||void 0===O||O.fill.forEach(mt=>{jQuery("#"+u.id).find(`input[type="text"][data-key="${mt.key}"]`).val(mt.value)}));break;case"matching":var Z,et,yt,wt;if(null!=Q&&null!==(Z=Q.test)&&void 0!==Z&&null!==(Z=Z.answer)&&void 0!==Z&&Z.matching)if("matching-empty"==(null===(et=u.source)||void 0===et||null===(et=et.test)||void 0===et?void 0:et.type))null==Q||null===(wt=Q.test)||void 0===wt||null===(wt=wt.answer)||void 0===wt||wt.matching.filter(mt=>{var st;return mt.key==(null===(st=u.source)||void 0===st||null===(st=st.test)||void 0===st||null===(st=st.matching)||void 0===st?void 0:st.key)}).forEach(mt=>{$(`foreignObject .ondrop-here[data-type2="matching-content"][data-key="${mt.value}"] .ondrag-item`).appendTo($(`foreignObject#${u.id} .ondrop-here[data-type2="matching-empty"][data-key="${mt.key}"]`))});else if("matching-content"==(null===(yt=u.source)||void 0===yt||null===(yt=yt.test)||void 0===yt?void 0:yt.type)){var At;null==Q||null===(At=Q.test)||void 0===At||null===(At=At.answer)||void 0===At||At.matching.filter(mt=>{var st;return mt.value==(null===(st=u.source)||void 0===st||null===(st=st.test)||void 0===st||null===(st=st.matching)||void 0===st?void 0:st.key)}).forEach(mt=>{$(`foreignObject#${u.id} .ondrop-here[data-type2="matching-content"][data-key="${mt.value}"] .ondrag-item`).appendTo($(`foreignObject .ondrop-here[data-type2="matching-empty"][data-key="${mt.key}"]:empty`))})}}}},2241:(he,zt,w)=>{w.d(zt,{_:()=>ot});var T=w(8338);const ot=_=>{switch(null==_?void 0:_.type){case T.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+_.readfileuploadurl+_.path;case T.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+_.readfileuploadurl+_.path;case T.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+_.readfileuploadurl+_.path;case T.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+_.readfileuploadurl+_.path;case T.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+_.readfileuploadurl+_.path;case T.S.HTML:case T.S.IMAGE_ANIMATION:case T.S.PHET:return""+_.readfileuploadurl+_.path;case T.S.ZIP:case T.S.SCORM:var y;return"imsmanifest.xml"==(null===(y=_.path)||void 0===y||null===(y=y.split("/"))||void 0===y?void 0:y.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+_.readfileuploadurl+_.path:""+_.readfileuploadurl+_.path;case T.S.TRACK:case T.S.TEXT:return""+_.readfileuploadurl+_.path;case T.S.LINK:switch(_.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+_.url;case 1002:var N;return null!==(N=z(_.url))&&void 0!==N?N:"";case 1005:var M;return null!==(M=_.url)&&void 0!==M?M:"";default:var f;return null!==(f=_.url)&&void 0!==f?f:""}default:return""+_.readfileuploadurl+_.path}},z=_=>{let y=gt(_);return y?"https://www.youtube.com/embed/"+y+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},gt=_=>{let y=null==_?void 0:_.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return y&&y.length>=2?y[1]:null}},1131:(he,zt,w)=>{function T(){}function E(t){return null==t?T:function(){return this.querySelector(t)}}function gt(){return[]}function _(t){return null==t?gt:function(){return this.querySelectorAll(t)}}function M(t){return function(){return this.matches(t)}}function f(t){return function(e){return e.matches(t)}}w.d(zt,{qrM:()=>aa,n8j:()=>la});var P=Array.prototype.find;function S(){return this.firstElementChild}var p=Array.prototype.filter;function R(){return Array.from(this.children)}function Y(t){return new Array(t.length)}function X(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function V(t,e,a,s,v,b){for(var U,k=0,G=e.length,at=b.length;k<at;++k)(U=e[k])?(U.__data__=b[k],s[k]=U):a[k]=new X(t,b[k]);for(;k<G;++k)(U=e[k])&&(v[k]=U)}function Et(t,e,a,s,v,b,k){var U,G,ee,at=new Map,ft=e.length,Ut=b.length,Gt=new Array(ft);for(U=0;U<ft;++U)(G=e[U])&&(Gt[U]=ee=k.call(G,G.__data__,U,e)+"",at.has(ee)?v[U]=G:at.set(ee,G));for(U=0;U<Ut;++U)ee=k.call(t,b[U],U,b)+"",(G=at.get(ee))?(s[U]=G,G.__data__=b[U],at.delete(ee)):a[U]=new X(t,b[U]);for(U=0;U<ft;++U)(G=e[U])&&at.get(Gt[U])===G&&(v[U]=G)}function Vt(t){return t.__data__}function Jt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ct(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}X.prototype={constructor:X,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Tt="http://www.w3.org/1999/xhtml";const Mt={svg:"http://www.w3.org/2000/svg",xhtml:Tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dt(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),Mt.hasOwnProperty(e)?{space:Mt[e],local:t}:t}function Ht(t){return function(){this.removeAttribute(t)}}function Bt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wt(t,e){return function(){this.setAttribute(t,e)}}function Rt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ct(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function Yt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function d(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function B(t){return function(){this.style.removeProperty(t)}}function nt(t,e,a){return function(){this.style.setProperty(t,e,a)}}function ut(t,e,a){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,a)}}function O(t,e){return t.style.getPropertyValue(e)||d(t).getComputedStyle(t,null).getPropertyValue(e)}function Z(t){return function(){delete this[t]}}function et(t,e){return function(){this[t]=e}}function yt(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function At(t){return t.trim().split(/^|\s+/)}function mt(t){return t.classList||new st(t)}function st(t){this._node=t,this._names=At(t.getAttribute("class")||"")}function pt(t,e){for(var a=mt(t),s=-1,v=e.length;++s<v;)a.add(e[s])}function St(t,e){for(var a=mt(t),s=-1,v=e.length;++s<v;)a.remove(e[s])}function Ft(t){return function(){pt(this,t)}}function qt(t){return function(){St(this,t)}}function Zt(t,e){return function(){(e.apply(this,arguments)?pt:St)(this,t)}}function ne(){this.textContent=""}function ae(t){return function(){this.textContent=t}}function pe(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ke(){this.innerHTML=""}function me(t){return function(){this.innerHTML=t}}function Oe(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function je(){this.nextSibling&&this.parentNode.appendChild(this)}function qe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function He(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===Tt&&e.documentElement.namespaceURI===Tt?e.createElement(t):e.createElementNS(a,t)}}function $e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xe(t){var e=Dt(t);return(e.local?$e:He)(e)}function ti(){return null}function _t(){var t=this.parentNode;t&&t.removeChild(this)}function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function r(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function m(t){return function(){var e=this.__on;if(e){for(var b,a=0,s=-1,v=e.length;a<v;++a)b=e[a],t.type&&b.type!==t.type||b.name!==t.name?e[++s]=b:this.removeEventListener(b.type,b.listener,b.options);++s?e.length=s:delete this.__on}}}function c(t,e,a){return function(){var v,s=this.__on,b=function l(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var k=0,U=s.length;k<U;++k)if((v=s[k]).type===t.type&&v.name===t.name)return this.removeEventListener(v.type,v.listener,v.options),this.addEventListener(v.type,v.listener=b,v.options=a),void(v.value=e);this.addEventListener(t.type,b,a),v={type:t.type,name:t.name,value:e,listener:b,options:a},s?s.push(v):this.__on=[v]}}function x(t,e,a){var s=d(t),v=s.CustomEvent;"function"==typeof v?v=new v(e,a):(v=s.document.createEvent("Event"),a?(v.initEvent(e,a.bubbles,a.cancelable),v.detail=a.detail):v.initEvent(e,!1,!1)),t.dispatchEvent(v)}function F(t,e){return function(){return x(this,t,e)}}function D(t,e){return function(){return x(this,t,e.apply(this,arguments))}}st.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var bt=[null];function Pt(t,e){this._groups=t,this._parents=e}function te(){return new Pt([[document.documentElement]],bt)}Pt.prototype=te.prototype={constructor:Pt,select:function ot(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,a=e.length,s=new Array(a),v=0;v<a;++v)for(var G,at,b=e[v],k=b.length,U=s[v]=new Array(k),ft=0;ft<k;++ft)(G=b[ft])&&(at=t.call(G,G.__data__,ft,b))&&("__data__"in G&&(at.__data__=G.__data__),U[ft]=at);return new Pt(s,this._parents)},selectAll:function N(t){t="function"==typeof t?function y(t){return function(){return function z(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):_(t);for(var e=this._groups,a=e.length,s=[],v=[],b=0;b<a;++b)for(var G,k=e[b],U=k.length,at=0;at<U;++at)(G=k[at])&&(s.push(t.call(G,G.__data__,at,k)),v.push(G));return new Pt(s,v)},selectChild:function dt(t){return this.select(null==t?S:function A(t){return function(){return P.call(this.children,t)}}("function"==typeof t?t:f(t)))},selectChildren:function I(t){return this.selectAll(null==t?R:function h(t){return function(){return p.call(this.children,t)}}("function"==typeof t?t:f(t)))},filter:function j(t){"function"!=typeof t&&(t=M(t));for(var e=this._groups,a=e.length,s=new Array(a),v=0;v<a;++v)for(var G,b=e[v],k=b.length,U=s[v]=[],at=0;at<k;++at)(G=b[at])&&t.call(G,G.__data__,at,b)&&U.push(G);return new Pt(s,this._parents)},data:function Qt(t,e){if(!arguments.length)return Array.from(this,Vt);var a=e?Et:V,s=this._parents,v=this._groups;"function"!=typeof t&&(t=function H(t){return function(){return t}}(t));for(var b=v.length,k=new Array(b),U=new Array(b),G=new Array(b),at=0;at<b;++at){var ft=s[at],Ut=v[at],Gt=Ut.length,ee=Jt(t.call(ft,ft&&ft.__data__,at,s)),Ee=ee.length,Ie=U[at]=new Array(Ee),Kt=k[at]=new Array(Ee);a(ft,Ut,Ie,Kt,G[at]=new Array(Gt),ee,e);for(var ce,ye,oe=0,ie=0;oe<Ee;++oe)if(ce=Ie[oe]){for(oe>=ie&&(ie=oe+1);!(ye=Kt[ie])&&++ie<Ee;);ce._next=ye||null}}return(k=new Pt(k,s))._enter=U,k._exit=G,k},enter:function q(){return new Pt(this._enter||this._groups.map(Y),this._parents)},exit:function jt(){return new Pt(this._exit||this._groups.map(Y),this._parents)},join:function it(t,e,a){var s=this.enter(),v=this,b=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(v=e(v))&&(v=v.selection()),null==a?b.remove():a(b),s&&v?s.merge(v).order():v},merge:function Ot(t){for(var e=t.selection?t.selection():t,a=this._groups,s=e._groups,v=a.length,k=Math.min(v,s.length),U=new Array(v),G=0;G<k;++G)for(var ee,at=a[G],ft=s[G],Ut=at.length,Gt=U[G]=new Array(Ut),Ee=0;Ee<Ut;++Ee)(ee=at[Ee]||ft[Ee])&&(Gt[Ee]=ee);for(;G<v;++G)U[G]=a[G];return new Pt(U,this._parents)},selection:function we(){return this},order:function tt(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var k,s=t[e],v=s.length-1,b=s[v];--v>=0;)(k=s[v])&&(b&&4^k.compareDocumentPosition(b)&&b.parentNode.insertBefore(k,b),b=k);return this},sort:function It(t){function e(Ut,Gt){return Ut&&Gt?t(Ut.__data__,Gt.__data__):!Ut-!Gt}t||(t=Ct);for(var a=this._groups,s=a.length,v=new Array(s),b=0;b<s;++b){for(var at,k=a[b],U=k.length,G=v[b]=new Array(U),ft=0;ft<U;++ft)(at=k[ft])&&(G[ft]=at);G.sort(e)}return new Pt(v,this._parents).order()},call:function kt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function xt(){return Array.from(this)},node:function W(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var s=t[e],v=0,b=s.length;v<b;++v){var k=s[v];if(k)return k}return null},size:function Q(){let t=0;for(const e of this)++t;return t},empty:function u(){return!this.node()},each:function lt(t){for(var e=this._groups,a=0,s=e.length;a<s;++a)for(var U,v=e[a],b=0,k=v.length;b<k;++b)(U=v[b])&&t.call(U,U.__data__,b,v);return this},attr:function C(t,e){var a=Dt(t);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((null==e?a.local?Bt:Ht:"function"==typeof e?a.local?Yt:ct:a.local?Rt:Wt)(a,e))},style:function J(t,e,a){return arguments.length>1?this.each((null==e?B:"function"==typeof e?ut:nt)(t,e,null==a?"":a)):O(this.node(),t)},property:function wt(t,e){return arguments.length>1?this.each((null==e?Z:"function"==typeof e?yt:et)(t,e)):this.node()[t]},classed:function se(t,e){var a=At(t+"");if(arguments.length<2){for(var s=mt(this.node()),v=-1,b=a.length;++v<b;)if(!s.contains(a[v]))return!1;return!0}return this.each(("function"==typeof e?Zt:e?Ft:qt)(a,e))},text:function Ae(t){return arguments.length?this.each(null==t?ne:("function"==typeof t?pe:ae)(t)):this.node().textContent},html:function Te(t){return arguments.length?this.each(null==t?ke:("function"==typeof t?Oe:me)(t)):this.node().innerHTML},raise:function _e(){return this.each(je)},lower:function Ue(){return this.each(qe)},append:function Ye(t){var e="function"==typeof t?t:Xe(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function hi(t,e){var a="function"==typeof t?t:Xe(t),s=null==e?ti:"function"==typeof e?e:E(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})},remove:function K(){return this.each(_t)},clone:function o(t){return this.select(t?r:i)},datum:function n(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function L(t,e,a){var v,k,s=function g(t){return t.trim().split(/^|\s+/).map(function(e){var a="",s=e.indexOf(".");return s>=0&&(a=e.slice(s+1),e=e.slice(0,s)),{type:e,name:a}})}(t+""),b=s.length;if(!(arguments.length<2)){for(U=e?c:m,v=0;v<b;++v)this.each(U(s[v],e,a));return this}var U=this.node().__on;if(U)for(var ft,G=0,at=U.length;G<at;++G)for(v=0,ft=U[G];v<b;++v)if((k=s[v]).type===ft.type&&k.name===ft.name)return ft.value},dispatch:function ht(t,e){return this.each(("function"==typeof e?D:F)(t,e))},[Symbol.iterator]:function*vt(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var k,s=t[e],v=0,b=s.length;v<b;++v)(k=s[v])&&(yield k)}};const ge=te;var be={value:()=>{}};function xe(){for(var s,t=0,e=arguments.length,a={};t<e;++t){if(!(s=arguments[t]+"")||s in a||/[\s.]/.test(s))throw new Error("illegal type: "+s);a[s]=[]}return new Ce(a)}function Ce(t){this._=t}function ar(t,e){for(var v,a=0,s=t.length;a<s;++a)if((v=t[a]).name===e)return v.value}function gn(t,e,a){for(var s=0,v=t.length;s<v;++s)if(t[s].name===e){t[s]=be,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=a&&t.push({name:e,value:a}),t}Ce.prototype=xe.prototype={constructor:Ce,on:function(t,e){var v,a=this._,s=function lr(t,e){return t.trim().split(/^|\s+/).map(function(a){var s="",v=a.indexOf(".");if(v>=0&&(s=a.slice(v+1),a=a.slice(0,v)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}(t+"",a),b=-1,k=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++b<k;)if(v=(t=s[b]).type)a[v]=gn(a[v],t.name,e);else if(null==e)for(v in a)a[v]=gn(a[v],t.name,null);return this}for(;++b<k;)if((v=(t=s[b]).type)&&(v=ar(a[v],t.name)))return v},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new Ce(t)},call:function(t,e){if((v=arguments.length-2)>0)for(var v,b,a=new Array(v),s=0;s<v;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,v=(b=this._[t]).length;s<v;++s)b[s].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],v=0,b=s.length;v<b;++v)s[v].value.apply(e,a)}};const or=xe;var Ni,ki,pi=0,Oi=0,Si=0,yn=1e3,Di=0,ci=0,zi=0,Ti="object"==typeof performance&&performance.now?performance:Date,pn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yi(){return ci||(pn(sr),ci=Ti.now()+zi)}function sr(){ci=0}function ji(){this._call=this._time=this._next=null}function mn(t,e,a){var s=new ji;return s.restart(t,e,a),s}function wn(){ci=(Di=Ti.now())+zi,pi=Oi=0;try{!function ur(){Yi(),++pi;for(var e,t=Ni;t;)(e=ci-t._time)>=0&&t._call.call(void 0,e),t=t._next;--pi}()}finally{pi=0,function hr(){for(var t,a,e=Ni,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);ki=t,qi(s)}(),ci=0}}function dr(){var t=Ti.now(),e=t-Di;e>yn&&(zi-=e,Di=t)}function qi(t){pi||(Oi&&(Oi=clearTimeout(Oi)),t-ci>24?(t<1/0&&(Oi=setTimeout(wn,t-Ti.now()-zi)),Si&&(Si=clearInterval(Si))):(Si||(Di=Ti.now(),Si=setInterval(dr,yn)),pi=1,pn(wn)))}function xn(t,e,a){var s=new ji;return s.restart(v=>{s.stop(),t(v+e)},e=null==e?0:+e,a),s}ji.prototype=mn.prototype={constructor:ji,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Yi():+a)+(null==e?0:+e),!this._next&&ki!==this&&(ki?ki._next=this:Ni=this,ki=this),this._call=t,this._time=a,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cr=or("start","end","cancel","interrupt"),fr=[],_n=0,Ki=3;function Fi(t,e,a,s,v,b){var k=t.__transition;if(k){if(a in k)return}else t.__transition={};!function vr(t,e,a){var v,s=t.__transition;function k(at){var ft,Ut,Gt,ee;if(1!==a.state)return G();for(ft in s)if((ee=s[ft]).name===a.name){if(ee.state===Ki)return xn(k);4===ee.state?(ee.state=6,ee.timer.stop(),ee.on.call("interrupt",t,t.__data__,ee.index,ee.group),delete s[ft]):+ft<e&&(ee.state=6,ee.timer.stop(),ee.on.call("cancel",t,t.__data__,ee.index,ee.group),delete s[ft])}if(xn(function(){a.state===Ki&&(a.state=4,a.timer.restart(U,a.delay,a.time),U(at))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=Ki,v=new Array(Gt=a.tween.length),ft=0,Ut=-1;ft<Gt;++ft)(ee=a.tween[ft].value.call(t,t.__data__,a.index,a.group))&&(v[++Ut]=ee);v.length=Ut+1}}function U(at){for(var ft=at<a.duration?a.ease.call(null,at/a.duration):(a.timer.restart(G),a.state=5,1),Ut=-1,Gt=v.length;++Ut<Gt;)v[Ut].call(t,ft);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),G())}function G(){for(var at in a.state=6,a.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=a,a.timer=mn(function b(at){a.state=1,a.timer.restart(k,a.delay,a.time),a.delay<=at&&k(at-a.delay)},0,a.time)}(t,a,{name:e,index:s,group:v,on:cr,tween:fr,time:b.time,delay:b.delay,duration:b.duration,ease:b.ease,timer:null,state:_n})}function en(t,e){var a=ei(t,e);if(a.state>_n)throw new Error("too late; already scheduled");return a}function ni(t,e){var a=ei(t,e);if(a.state>Ki)throw new Error("too late; already running");return a}function ei(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function ui(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,s,v,b){var k,U,G;return(k=Math.sqrt(t*t+e*e))&&(t/=k,e/=k),(G=t*a+e*s)&&(a-=t*G,s-=e*G),(U=Math.sqrt(a*a+s*s))&&(a/=U,s/=U,G/=U),t*s<e*a&&(t=-t,e=-e,G=-G,k=-k),{translateX:v,translateY:b,rotate:Math.atan2(e,t)*On,skewX:Math.atan(G)*On,scaleX:k,scaleY:U}}function kn(t,e,a,s){function v(at){return at.length?at.pop()+" ":""}return function(at,ft){var Ut=[],Gt=[];return at=t(at),ft=t(ft),function b(at,ft,Ut,Gt,ee,Ee){if(at!==Ut||ft!==Gt){var Ie=ee.push("translate(",null,e,null,a);Ee.push({i:Ie-4,x:ui(at,Ut)},{i:Ie-2,x:ui(ft,Gt)})}else(Ut||Gt)&&ee.push("translate("+Ut+e+Gt+a)}(at.translateX,at.translateY,ft.translateX,ft.translateY,Ut,Gt),function k(at,ft,Ut,Gt){at!==ft?(at-ft>180?ft+=360:ft-at>180&&(at+=360),Gt.push({i:Ut.push(v(Ut)+"rotate(",null,s)-2,x:ui(at,ft)})):ft&&Ut.push(v(Ut)+"rotate("+ft+s)}(at.rotate,ft.rotate,Ut,Gt),function U(at,ft,Ut,Gt){at!==ft?Gt.push({i:Ut.push(v(Ut)+"skewX(",null,s)-2,x:ui(at,ft)}):ft&&Ut.push(v(Ut)+"skewX("+ft+s)}(at.skewX,ft.skewX,Ut,Gt),function G(at,ft,Ut,Gt,ee,Ee){if(at!==Ut||ft!==Gt){var Ie=ee.push(v(ee)+"scale(",null,",",null,")");Ee.push({i:Ie-4,x:ui(at,Ut)},{i:Ie-2,x:ui(ft,Gt)})}else(1!==Ut||1!==Gt)&&ee.push(v(ee)+"scale("+Ut+","+Gt+")")}(at.scaleX,at.scaleY,ft.scaleX,ft.scaleY,Ut,Gt),at=ft=null,function(ee){for(var Kt,Ee=-1,Ie=Gt.length;++Ee<Ie;)Ut[(Kt=Gt[Ee]).i]=Kt.x(ee);return Ut.join("")}}}var wr=kn(function pr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xr=kn(function mr(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function _r(t,e){var a,s;return function(){var v=ni(this,t),b=v.tween;if(b!==a)for(var k=0,U=(s=a=b).length;k<U;++k)if(s[k].name===e){(s=s.slice()).splice(k,1);break}v.tween=s}}function br(t,e,a){var s,v;if("function"!=typeof a)throw new Error;return function(){var b=ni(this,t),k=b.tween;if(k!==s){v=(s=k).slice();for(var U={name:e,value:a},G=0,at=v.length;G<at;++G)if(v[G].name===e){v[G]=U;break}G===at&&v.push(U)}b.tween=v}}function rn(t,e,a){var s=t._id;return t.each(function(){var v=ni(this,s);(v.value||(v.value={}))[e]=a.apply(this,arguments)}),function(v){return ei(v,s).value[e]}}function ln(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function Tn(t,e){var a=Object.create(t.prototype);for(var s in e)a[s]=e[s];return a}function Ci(){}var Wi=1/.7,mi="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),kr=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),Tr=new RegExp(`^rgba\\(${mi},${mi},${mi},${Ai}\\)$`),Cr=new RegExp(`^rgba\\(${ri},${ri},${ri},${Ai}\\)$`),Lr=new RegExp(`^hsl\\(${Ai},${ri},${ri}\\)$`),Ar=new RegExp(`^hsla\\(${Ai},${ri},${ri},${Ai}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ii(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?In(e):3===a?new Ge(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Ge(e[1],e[2],e[3],1):(e=kr.exec(t))?new Ge(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Lr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?In(Cn[t]):"transparent"===t?new Ge(NaN,NaN,NaN,0):null}function In(t){return new Ge(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,a,s){return s<=0&&(t=e=a=NaN),new Ge(t,e,a,s)}function Qi(t,e,a,s){return 1===arguments.length?function Mr(t){return t instanceof Ci||(t=Ii(t)),t?new Ge((t=t.rgb()).r,t.g,t.b,t.opacity):new Ge}(t):new Ge(t,e,a,null==s?1:s)}function Ge(t,e,a,s){this.r=+t,this.g=+e,this.b=+a,this.opacity=+s}function Pn(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}`}function Mn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${fi(this.r)}, ${fi(this.g)}, ${fi(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vi(t){return((t=fi(t))<16?"0":"")+t.toString(16)}function Rn(t,e,a,s){return s<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new ii(t,e,a,s)}function Nn(t){if(t instanceof ii)return new ii(t.h,t.s,t.l,t.opacity);if(t instanceof Ci||(t=Ii(t)),!t)return new ii;if(t instanceof ii)return t;var e=(t=t.rgb()).r/255,a=t.g/255,s=t.b/255,v=Math.min(e,a,s),b=Math.max(e,a,s),k=NaN,U=b-v,G=(b+v)/2;return U?(k=e===b?(a-s)/U+6*(a<s):a===b?(s-e)/U+2:(e-a)/U+4,U/=G<.5?b+v:2-b-v,k*=60):U=G>0&&G<1?0:k,new ii(k,U,G,t.opacity)}function ii(t,e,a,s){this.h=+t,this.s=+e,this.l=+a,this.opacity=+s}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function zn(t,e,a,s,v){var b=t*t,k=b*t;return((1-3*t+3*b-k)*e+(4-6*b+3*k)*a+(1+3*t+3*b-3*k)*s+k*v)/6}ln(Ci,Ii,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Ir(){return this.rgb().formatHex8()},formatHsl:function Pr(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),ln(Ge,Qi,Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Ge(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ge(fi(this.r),fi(this.g),fi(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pn,formatHex:Pn,formatHex8:function Rr(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}${vi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Mn,toString:Mn})),ln(ii,function Nr(t,e,a,s){return 1===arguments.length?Nn(t):new ii(t,e,a,null==s?1:s)},Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new ii(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ii(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*e,v=2*a-s;return new Ge(an(t>=240?t-240:t+120,v,s),an(t,v,s),an(t<120?t+240:t-120,v,s),this.opacity)},clamp(){return new ii(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const jn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):jn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kr(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function jr(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(s){return Math.pow(t+s*e,a)}}(e,a,t):jn(isNaN(e)?a:e)}}(e);function s(v,b){var k=a((v=Qi(v)).r,(b=Qi(b)).r),U=a(v.g,b.g),G=a(v.b,b.b),at=Bn(v.opacity,b.opacity);return function(ft){return v.r=k(ft),v.g=U(ft),v.b=G(ft),v.opacity=at(ft),v+""}}return s.gamma=t,s}(1);function Un(t){return function(e){var k,U,a=e.length,s=new Array(a),v=new Array(a),b=new Array(a);for(k=0;k<a;++k)U=Qi(e[k]),s[k]=U.r||0,v[k]=U.g||0,b[k]=U.b||0;return s=t(s),v=t(v),b=t(b),U.opacity=1,function(G){return U.r=s(G),U.g=v(G),U.b=b(G),U+""}}}Un(function Dr(t){var e=t.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),v=t[s],b=t[s+1];return zn((a-s/e)*e,s>0?t[s-1]:2*v-b,v,b,s<e-1?t[s+2]:2*b-v)}}),Un(function zr(t){var e=t.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*e);return zn((a-s/e)*e,t[(s+e-1)%e],t[s%e],t[(s+1)%e],t[(s+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ur(t,e){var s,v,b,a=on.lastIndex=sn.lastIndex=0,k=-1,U=[],G=[];for(t+="",e+="";(s=on.exec(t))&&(v=sn.exec(e));)(b=v.index)>a&&(b=e.slice(a,b),U[k]?U[k]+=b:U[++k]=b),(s=s[0])===(v=v[0])?U[k]?U[k]+=v:U[++k]=v:(U[++k]=null,G.push({i:k,x:ui(s,v)})),a=sn.lastIndex;return a<e.length&&(b=e.slice(a),U[k]?U[k]+=b:U[++k]=b),U.length<2?G[0]?function Fr(t){return function(e){return t(e)+""}}(G[0].x):function Br(t){return function(){return t}}(e):(e=G.length,function(at){for(var Ut,ft=0;ft<e;++ft)U[(Ut=G[ft]).i]=Ut.x(at);return U.join("")})}function Wn(t,e){var a;return("number"==typeof e?ui:e instanceof Ii?Fn:(a=Ii(e))?(e=a,Fn):Ur)(t,e)}function Wr(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,a){var s,b,v=a+"";return function(){var k=this.getAttribute(t);return k===v?null:k===s?b:b=e(s=k,a)}}function Jr(t,e,a){var s,b,v=a+"";return function(){var k=this.getAttributeNS(t.space,t.local);return k===v?null:k===s?b:b=e(s=k,a)}}function Hr(t,e,a){var s,v,b;return function(){var k,G,U=a(this);return null==U?void this.removeAttribute(t):(k=this.getAttribute(t))===(G=U+"")?null:k===s&&G===v?b:(v=G,b=e(s=k,U))}}function Vr(t,e,a){var s,v,b;return function(){var k,G,U=a(this);return null==U?void this.removeAttributeNS(t.space,t.local):(k=this.getAttributeNS(t.space,t.local))===(G=U+"")?null:k===s&&G===v?b:(v=G,b=e(s=k,U))}}function qr(t,e){var a,s;function v(){var b=e.apply(this,arguments);return b!==s&&(a=(s=b)&&function Yr(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,b)),a}return v._value=e,v}function $r(t,e){var a,s;function v(){var b=e.apply(this,arguments);return b!==s&&(a=(s=b)&&function Xr(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,b)),a}return v._value=e,v}function el(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){en(this,t).delay=e}}function rl(t,e){return function(){ni(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){ni(this,t).duration=e}}var xl=ge.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var jl=0;function ai(t,e,a,s){this._groups=t,this._parents=e,this._name=a,this._id=s}function Qn(){return++jl}var oi=ge.prototype;ai.prototype=function Kl(t){return ge().transition(t)}.prototype={constructor:ai,select:function ml(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=E(t));for(var s=this._groups,v=s.length,b=new Array(v),k=0;k<v;++k)for(var ft,Ut,U=s[k],G=U.length,at=b[k]=new Array(G),Gt=0;Gt<G;++Gt)(ft=U[Gt])&&(Ut=t.call(ft,ft.__data__,Gt,U))&&("__data__"in ft&&(Ut.__data__=ft.__data__),at[Gt]=Ut,Fi(at[Gt],e,a,Gt,at,ei(ft,a)));return new ai(b,this._parents,e,a)},selectAll:function wl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=_(t));for(var s=this._groups,v=s.length,b=[],k=[],U=0;U<v;++U)for(var ft,G=s[U],at=G.length,Ut=0;Ut<at;++Ut)if(ft=G[Ut]){for(var ee,Gt=t.call(ft,ft.__data__,Ut,G),Ee=ei(ft,a),Ie=0,Kt=Gt.length;Ie<Kt;++Ie)(ee=Gt[Ie])&&Fi(ee,e,a,Ie,Gt,Ee);b.push(Gt),k.push(ft)}return new ai(b,k,e,a)},selectChild:oi.selectChild,selectChildren:oi.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=M(t));for(var e=this._groups,a=e.length,s=new Array(a),v=0;v<a;++v)for(var G,b=e[v],k=b.length,U=s[v]=[],at=0;at<k;++at)(G=b[at])&&t.call(G,G.__data__,at,b)&&U.push(G);return new ai(s,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,s=e.length,b=Math.min(s,a.length),k=new Array(s),U=0;U<b;++U)for(var Gt,G=e[U],at=a[U],ft=G.length,Ut=k[U]=new Array(ft),ee=0;ee<ft;++ee)(Gt=G[ee]||at[ee])&&(Ut[ee]=Gt);for(;U<s;++U)k[U]=e[U];return new ai(k,this._parents,this._name,this._id)},selection:function _l(){return new xl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,a=Qn(),s=this._groups,v=s.length,b=0;b<v;++b)for(var G,k=s[b],U=k.length,at=0;at<U;++at)if(G=k[at]){var ft=ei(G,e);Fi(G,t,a,at,k,{time:ft.time+ft.delay+ft.duration,delay:0,duration:ft.duration,ease:ft.ease})}return new ai(s,this._parents,t,a)},call:oi.call,nodes:oi.nodes,node:oi.node,size:oi.size,empty:oi.empty,each:oi.each,on:function gl(t,e){var a=this._id;return arguments.length<2?ei(this.node(),a).on.on(t):this.each(function vl(t,e,a){var s,v,b=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?en:ni;return function(){var k=b(this,t),U=k.on;U!==s&&(v=(s=U).copy()).on(e,a),k.on=v}}(a,t,e))},attr:function Zr(t,e){var a=Dt(t),s="transform"===a?xr:Wn;return this.attrTween(t,"function"==typeof e?(a.local?Vr:Hr)(a,s,rn(this,"attr."+t,e)):null==e?(a.local?Gr:Wr)(a):(a.local?Jr:Qr)(a,s,e))},attrTween:function tl(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var s=Dt(t);return this.tween(a,(s.local?qr:$r)(s,e))},style:function kl(t,e,a){var s="transform"==(t+="")?wr:Wn;return null==e?this.styleTween(t,function bl(t,e){var a,s,v;return function(){var b=O(this,t),k=(this.style.removeProperty(t),O(this,t));return b===k?null:b===a&&k===s?v:v=e(a=b,s=k)}}(t,s)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,a){var s,v,b;return function(){var k=O(this,t),U=a(this),G=U+"";return null==U&&(this.style.removeProperty(t),G=U=O(this,t)),k===G?null:k===s&&G===v?b:(v=G,b=e(s=k,U))}}(t,s,rn(this,"style."+t,e))).each(function Sl(t,e){var a,s,v,U,b="style."+e,k="end."+b;return function(){var G=ni(this,t),at=G.on,ft=null==G.value[b]?U||(U=Gn(e)):void 0;(at!==a||v!==ft)&&(s=(a=at).copy()).on(k,v=ft),G.on=s}}(this._id,t)):this.styleTween(t,function El(t,e,a){var s,b,v=a+"";return function(){var k=O(this,t);return k===v?null:k===s?b:b=e(s=k,a)}}(t,s,e),a).on("end.style."+t,null)},styleTween:function Ll(t,e,a){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,function Cl(t,e,a){var s,v;function b(){var k=e.apply(this,arguments);return k!==v&&(s=(v=k)&&function Tl(t,e,a){return function(s){this.style.setProperty(t,e.call(this,s),a)}}(t,k,a)),s}return b._value=e,b}(t,e,null==a?"":a))},text:function Pl(t){return this.tween("text","function"==typeof t?function Il(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,a;function s(){var v=t.apply(this,arguments);return v!==a&&(e=(a=v)&&function Ml(t){return function(e){this.textContent=t.call(this,e)}}(v)),e}return s._value=t,s}(t))},remove:function pl(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var a=this._id;if(t+="",arguments.length<2){for(var k,s=ei(this.node(),a).tween,v=0,b=s.length;v<b;++v)if((k=s[v]).name===t)return k.value;return null}return this.each((null==e?_r:br)(a,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):ei(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):ei(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){ni(this,t).ease=e}}(e,t)):ei(this.node(),e).ease},easeVarying:function dl(t){if("function"!=typeof t)throw new Error;return this.each(function ul(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;ni(this,t).ease=a}}(this._id,t))},end:function zl(){var t,e,a=this,s=a._id,v=a.size();return new Promise(function(b,k){var U={value:k},G={value:function(){0==--v&&b()}};a.each(function(){var at=ni(this,s),ft=at.on;ft!==t&&((e=(t=ft).copy())._.cancel.push(U),e._.interrupt.push(U),e._.end.push(G)),at.on=e}),0===v&&b()})},[Symbol.iterator]:oi[Symbol.iterator]};var Fl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}ge.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var s,v,k,a=t.__transition,b=!0;if(a){for(k in e=null==e?null:e+"",a)(s=a[k]).name===e?(v=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(v?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete a[k]):b=!1;b&&delete t.__transition}}(this,t)})},ge.prototype.transition=function Wl(t){var e,a;t instanceof ai?(e=t._id,t=t._name):(e=Qn(),(a=Fl).time=Yi(),t=null==t?null:t+"");for(var s=this._groups,v=s.length,b=0;b<v;++b)for(var G,k=s[b],U=k.length,at=0;at<U;++at)(G=k[at])&&Fi(G,t,e,at,k,a||Ul(G,e));return new ai(s,this._parents,t,e)};Math;function Pi(t){return{type:t}}function _i(t){return function(){return t}}function Yn(t){this._context=t}function ql(t){return new Yn(t)}["w","e"].map(Pi),["n","s"].map(Pi),["n","w","e","s","nw","ne","sw","se"].map(Pi),Yn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const fn=Math.PI,vn=2*fn,gi=1e-6,$l=vn-gi;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Xi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(s){this._+=s[0];for(let v=1,b=s.length;v<b;++v)this._+=Math.round(arguments[v]*a)/a+s[v]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,s,v){this._append`Q${+e},${+a},${this._x1=+s},${this._y1=+v}`}bezierCurveTo(e,a,s,v,b,k){this._append`C${+e},${+a},${+s},${+v},${this._x1=+b},${this._y1=+k}`}arcTo(e,a,s,v,b){if(e=+e,a=+a,s=+s,v=+v,(b=+b)<0)throw new Error(`negative radius: ${b}`);let k=this._x1,U=this._y1,G=s-e,at=v-a,ft=k-e,Ut=U-a,Gt=ft*ft+Ut*Ut;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Gt>gi)if(Math.abs(Ut*G-at*ft)>gi&&b){let ee=s-k,Ee=v-U,Ie=G*G+at*at,Kt=ee*ee+Ee*Ee,Nt=Math.sqrt(Ie),oe=Math.sqrt(Gt),ie=b*Math.tan((fn-Math.acos((Ie+Gt-Kt)/(2*Nt*oe)))/2),ce=ie/oe,ye=ie/Nt;Math.abs(ce-1)>gi&&this._append`L${e+ce*ft},${a+ce*Ut}`,this._append`A${b},${b},0,0,${+(Ut*ee>ft*Ee)},${this._x1=e+ye*G},${this._y1=a+ye*at}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,s,v,b,k){if(e=+e,a=+a,k=!!k,(s=+s)<0)throw new Error(`negative radius: ${s}`);let U=s*Math.cos(v),G=s*Math.sin(v),at=e+U,ft=a+G,Ut=1^k,Gt=k?v-b:b-v;null===this._x1?this._append`M${at},${ft}`:(Math.abs(this._x1-at)>gi||Math.abs(this._y1-ft)>gi)&&this._append`L${at},${ft}`,s&&(Gt<0&&(Gt=Gt%vn+vn),Gt>$l?this._append`A${s},${s},0,1,${Ut},${e-U},${a-G}A${s},${s},0,1,${Ut},${this._x1=at},${this._y1=ft}`:Gt>gi&&this._append`A${s},${s},0,${+(Gt>=fn)},${Ut},${this._x1=e+s*Math.cos(b)},${this._y1=a+s*Math.sin(b)}`)}rect(e,a,s,v){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${s=+s}v${+v}h${-s}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var a=_i(!0),s=null,v=ql,b=null,k=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);e=s}return t},()=>new Xi(e)}(U);function U(G){var at,Ut,ee,ft=(G=function Yl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(G)).length,Gt=!1;for(null==s&&(b=v(ee=k())),at=0;at<=ft;++at)!(at<ft&&a(Ut=G[at],at,G))===Gt&&((Gt=!Gt)?b.lineStart():b.lineEnd()),Gt&&b.point(+t(Ut,at,G),+e(Ut,at,G));if(ee)return b=null,ee+""||null}return t="function"==typeof t?t:void 0===t?na:_i(t),e="function"==typeof e?e:void 0===e?ra:_i(e),U.x=function(G){return arguments.length?(t="function"==typeof G?G:_i(+G),U):t},U.y=function(G){return arguments.length?(e="function"==typeof G?G:_i(+G),U):e},U.defined=function(G){return arguments.length?(a="function"==typeof G?G:_i(!!G),U):a},U.curve=function(G){return arguments.length?(v=G,null!=s&&(b=v(s)),U):v},U.context=function(G){return arguments.length?(null==G?s=b=null:b=v(s=G),U):s},U}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function bi(t,e,a){this.k=t,this.x=e,this.y=a}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},bi.prototype={constructor:bi,scale:function(t){return 1===t?this:new bi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new bi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new bi(1,0,0)}}]);