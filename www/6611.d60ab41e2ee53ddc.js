"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6611],{8779:(he,Bt,f)=>{f.d(Bt,{$u:()=>S,IB:()=>vt,T2:()=>c,WR:()=>R,bf:()=>j,eD:()=>rt,l6:()=>k,lq:()=>U,pZ:()=>T,u$:()=>E});const T={fill:"transparent",stroke:"#129bff",strokeWidth:1},E={stroke:"#0D99FF",strokeWidth:1,strokeLinecap:"square",strokeDasharrays:[2,5]},rt={fill:"#FFFFFF",stroke:"#0D99FF",strokeWidth:1,width:7,height:7},j={fill:"transparent",stroke:"transparent",strokeWidth:1},vt={fill:"none",stroke:"#2299F8",strokeWidth:1},k={fill:"#0D99FF",rx:4},c={fill:"#fff",alignmentBaseline:"central",textAnchor:"middle",fontSize:14},R={stroke:"#129bff",strokeWidth:1,strokeLinecap:"square",strokeDasharray:8},U={fill:"transparent"},S={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(he,Bt,f)=>{f.d(Bt,{$N:()=>k,An:()=>c,CS:()=>E,Kf:()=>et,Lp:()=>U,j9:()=>R,lP:()=>j,ml:()=>W,n9:()=>S,nf:()=>vt});var T=f(2492);const E=v=>{var m;return null===(m=v.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===m?void 0:m.map(M=>{let X={type:M.substring(0,1)},lt=(F=M.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?F.split(/\s/).map(J=>(0,T.z)(parseFloat(J),1e6)):[];var F;return lt.length&&(X.points=lt),X})},j=v=>{let m=[],M=[],X=[],lt=[];return v.forEach(F=>{switch(["M","L","C","S","Q","T"].includes(F.type)&&F.points&&F.points.forEach((xt,_t)=>{_t%2==0?m.push(xt):M.push(xt)}),F.type){case"A":var J;7==(null===(J=F.points)||void 0===J?void 0:J.length)&&(X.push(F.points[5]),lt.push(F.points[6]));break;case"H":var ot;null!==(ot=F.points)&&void 0!==ot&&ot.length&&(m.push(F.points[0]),X.push(F.points[0]));break;case"V":var G;null!==(G=F.points)&&void 0!==G&&G.length&&(M.push(F.points[0]),lt.push(F.points[0]));break;case"a":var O;if(7==(null===(O=F.points)||void 0===O?void 0:O.length)){let xt=m[m.length-1];m.push(xt+F.points[5]),X.push(xt+F.points[5]);let _t=M[M.length-1];M.push(_t+F.points[6]),lt.push(_t+F.points[6])}break;case"h":var gt;if(null!==(gt=F.points)&&void 0!==gt&&gt.length){let xt=m[m.length-1];m.push(xt+F.points[0]),X.push(xt+F.points[0])}break;case"v":var jt;if(null!==(jt=F.points)&&void 0!==jt&&jt.length){let xt=M[M.length-1];M.push(xt+F.points[0]),lt.push(xt+F.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var It;null===(It=F.points)||void 0===It||It.forEach((xt,_t)=>{_t%2==0?X.push(xt):lt.push(xt)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Rt;null===(Rt=F.points)||void 0===Rt||Rt.forEach((xt,_t)=>{if(_t%2==0){let ce=m[m.length-1];m.push(ce+xt),X.push(ce+xt)}else{let ce=M[M.length-1];M.push(ce+xt),lt.push(ce+xt)}})}}),{minX:Math.min.apply(null,X),minY:Math.min.apply(null,lt),maxX:Math.max.apply(null,X),maxY:Math.max.apply(null,lt)}},vt=(v,m)=>m.map(M=>{let X=[];switch(M.type){case"a":var lt;7==(null===(lt=M.points)||void 0===lt?void 0:lt.length)&&X.push([(0,T.z)(M.points[0]/v.width,1e6),(0,T.z)(M.points[1]/v.height,1e6),M.points[2],M.points[3],M.points[4],(0,T.z)(M.points[5]/v.width,1e6),(0,T.z)(M.points[6]/v.height,1e6)]);break;case"A":var F;7==(null===(F=M.points)||void 0===F?void 0:F.length)&&X.push([(0,T.z)(M.points[0]/v.width,1e6),(0,T.z)(M.points[1]/v.height,1e6),M.points[2],M.points[3],M.points[4],(0,T.z)((M.points[5]-v.x)/v.width,1e6),(0,T.z)((M.points[6]-v.y)/v.height,1e6)]);break;case"h":var J;null!==(J=M.points)&&void 0!==J&&J.length&&X.push([(0,T.z)(M.points[0]/v.width,1e6)]);break;case"H":var ot;null!==(ot=M.points)&&void 0!==ot&&ot.length&&X.push([(0,T.z)((M.points[0]-v.x)/v.width,1e6)]);break;case"v":var G;null!==(G=M.points)&&void 0!==G&&G.length&&X.push([(0,T.z)(M.points[0]/v.height,1e6)]);break;case"V":var O;null!==(O=M.points)&&void 0!==O&&O.length&&X.push([(0,T.z)((M.points[0]-v.y)/v.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var gt;if(null!==(gt=M.points)&&void 0!==gt&&gt.length)for(let It=0,Rt=M.points.length-1;It<Rt;It+=2)X.push([(0,T.z)((M.points[It]-v.x)/v.width,1e6),(0,T.z)((M.points[It+1]-v.y)/v.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var jt;if(null!==(jt=M.points)&&void 0!==jt&&jt.length)for(let It=0,Rt=M.points.length-1;It<Rt;It+=2)X.push([(0,T.z)(M.points[It]/v.width,1e6),(0,T.z)(M.points[It+1]/v.height,1e6)])}return X.length?{type:M.type,ratios:X}:{type:M.type}}),k=(v,m)=>m.map(M=>{switch(M.type){case"a":var X,lt;return`${M.type}${null!==(X=null===(lt=M.ratios)||void 0===lt||null===(lt=lt.map(wt=>{var ft,ut,Gt,P,A,d,b;return[(0,T.z)(v.width*(null!==(ft=wt[0])&&void 0!==ft?ft:0),1e6),(0,T.z)(v.height*(null!==(ut=wt[1])&&void 0!==ut?ut:0),1e6),null!==(Gt=wt[2])&&void 0!==Gt?Gt:0,null!==(P=wt[3])&&void 0!==P?P:0,null!==(A=wt[4])&&void 0!==A?A:0,(0,T.z)(v.width*(null!==(d=wt[5])&&void 0!==d?d:0),1e6),(0,T.z)(v.height*(null!==(b=wt[6])&&void 0!==b?b:0),1e6)]}))||void 0===lt||null===(lt=lt.map(wt=>wt.join(" ")))||void 0===lt?void 0:lt.join(" "))&&void 0!==X?X:""}`;case"A":var F,J;return`${M.type}${null!==(F=null===(J=M.ratios)||void 0===J||null===(J=J.map(wt=>{var ft,ut,Gt,P,A,d,b;return[(0,T.z)(v.width*(null!==(ft=wt[0])&&void 0!==ft?ft:0),1e6),(0,T.z)(v.height*(null!==(ut=wt[1])&&void 0!==ut?ut:0),1e6),null!==(Gt=wt[2])&&void 0!==Gt?Gt:0,null!==(P=wt[3])&&void 0!==P?P:0,null!==(A=wt[4])&&void 0!==A?A:0,(0,T.z)(v.x+v.width*(null!==(d=wt[5])&&void 0!==d?d:0),1e6),(0,T.z)(v.y+v.height*(null!==(b=wt[6])&&void 0!==b?b:0),1e6)]}))||void 0===J||null===(J=J.map(wt=>wt.join(" ")))||void 0===J?void 0:J.join(" "))&&void 0!==F?F:""}`;case"h":var ot,G;return`${M.type}${null!==(ot=null===(G=M.ratios)||void 0===G||null===(G=G.map(wt=>{var ft;return(0,T.z)(v.width*(null!==(ft=wt[0])&&void 0!==ft?ft:0),1e6)}))||void 0===G?void 0:G.join(" "))&&void 0!==ot?ot:""}`;case"H":var O,gt;return`${M.type}${null!==(O=null===(gt=M.ratios)||void 0===gt||null===(gt=gt.map(wt=>{var ft;return(0,T.z)(v.x+v.width*(null!==(ft=wt[0])&&void 0!==ft?ft:0),1e6)}))||void 0===gt?void 0:gt.join(" "))&&void 0!==O?O:""}`;case"v":var jt,It;return`${M.type}${null!==(jt=null===(It=M.ratios)||void 0===It||null===(It=It.map(wt=>{var ft;return(0,T.z)(v.height*(null!==(ft=wt[0])&&void 0!==ft?ft:0),1e6)}))||void 0===It?void 0:It.join(" "))&&void 0!==jt?jt:""}`;case"V":var Rt,xt;return`${M.type}${null!==(Rt=null===(xt=M.ratios)||void 0===xt||null===(xt=xt.map(wt=>{var ft;return(0,T.z)(v.y+v.height*(null!==(ft=wt[0])&&void 0!==ft?ft:0),1e6)}))||void 0===xt?void 0:xt.join(" "))&&void 0!==Rt?Rt:""}`;case"z":case"Z":return M.type;case"M":case"L":case"C":case"S":case"Q":case"T":var _t,ce;return`${M.type}${null!==(_t=null===(ce=M.ratios)||void 0===ce||null===(ce=ce.map(wt=>{var ft,ut;return[(0,T.z)(v.x+v.width*(null!==(ft=wt[0])&&void 0!==ft?ft:0),1e6),(0,T.z)(v.y+v.height*(null!==(ut=wt[1])&&void 0!==ut?ut:0),1e6)]}))||void 0===ce||null===(ce=ce.map(wt=>wt.join(" ")))||void 0===ce?void 0:ce.join(" "))&&void 0!==_t?_t:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var q,Mt;return`${M.type}${null!==(q=null===(Mt=M.ratios)||void 0===Mt||null===(Mt=Mt.map(wt=>{var ft,ut;return[(0,T.z)(v.width*(null!==(ft=wt[0])&&void 0!==ft?ft:0),1e6),(0,T.z)(v.height*(null!==(ut=wt[1])&&void 0!==ut?ut:0),1e6)]}))||void 0===Mt||null===(Mt=Mt.map(wt=>wt.join(" ")))||void 0===Mt?void 0:Mt.join(" "))&&void 0!==q?q:""}`;default:return""}}).join(""),c=v=>{return(m=v.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?m.split(/\s/).map(M=>parseFloat(M)):[];var m},R=v=>{let m=[],M=[];return v.forEach((X,lt)=>{lt%2==0?m.push(X):M.push(X)}),{minX:Math.min.apply(null,m),minY:Math.min.apply(null,M),maxX:Math.max.apply(null,m),maxY:Math.max.apply(null,M)}},U=(v,m)=>{let M=[];for(let X=0,lt=m.length-1;X<lt;X+=2)M.push([(m[X]-v.x)/v.width,(m[X+1]-v.y)/v.height]);return M},S=(v,m)=>m.map(M=>[(0,T.z)(v.x+v.width*M[0],1e6),(0,T.z)(v.y+v.height*M[1],1e6)]).map(M=>M.join(" ")).join(" "),W=(v,m)=>{let M=x(m);if(M){let X=new window.Snap.Matrix(M.a,M.b,M.c,M.d,M.e,M.f);if(X){let{dx:lt,dy:F,rotate:J,scalex:ot,scaley:G}=X.split();return{x:v.x+lt,y:v.y+F,dx:lt,dy:F,rotate:J,scalex:ot,scaley:G}}return{x:tt(v.x,v.y,M),y:mt(v.x,v.y,M)}}return v},x=v=>{let m=v.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(M=>(0,T.z)(parseFloat(M),1e6));if(6==m.length)return{a:m[0],b:m[1],c:m[2],d:m[3],e:m[4],f:m[5]}},et=(v,m)=>{let M=x(m);return M?window.Snap.path.map(v,new window.Snap.Matrix(M.a,M.b,M.c,M.d,M.e,M.f)).toString():v},tt=function(v,m,M){return(0,T.z)(v*M.a+m*M.c+M.e,10)},mt=function(v,m,M){return(0,T.z)(v*M.b+m*M.d+M.f,10)}},8047:(he,Bt,f)=>{f.d(Bt,{d:()=>T});const T=E=>{let rt=[];return[/font-family:([a-zA-Z-_' ]+)/g,/"fontFamily":"([a-zA-Z-_' ]+)"/g].forEach(j=>{var vt,k;rt=[...rt,...null!==(vt=null===(k=E.replace(/&quot;/g,"'").match(j))||void 0===k?void 0:k.filter((c,R,U)=>U.indexOf(c)==R).map(c=>c.replace(j,"$1").replace(/[^a-zA-Z-_ ]/g,"").trim()).filter((c,R,U)=>c&&U.indexOf(c)==R))&&void 0!==vt?vt:[]]}),rt.filter((j,vt,k)=>k.indexOf(j)==vt)}},2837:(he,Bt,f)=>{f.d(Bt,{v:()=>mt,U:()=>et});var T=f(6611),E=f(1999),rt=f(2492),j=/^#[a-fA-F0-9]+$/i,vt=/^rgb\((\d+),(\d+),(\d+)\)$/i,k=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const c=v=>{let m=null,M=null;if(v)if("transparent"==v)m="#000000",M=0;else if(v.match(j))m=v;else{let X=(v=v.replace(/\s+/g,"")).match(k);if(X)m="#"+(256|X[1]).toString(16).slice(1)+(256|X[2]).toString(16).slice(1)+(256|X[3]).toString(16).slice(1),M=(0,rt.z)(parseFloat(X[4]),100);else{let lt=v.match(vt);lt&&(m="#"+(256|lt[1]).toString(16).slice(1)+(256|lt[2]).toString(16).slice(1)+(256|lt[3]).toString(16).slice(1))}}return{hex:m,alpha:M}};var R=f(4896),U=f(8338);const et=v=>tt(null==v?void 0:v.url,null==v?void 0:v.path,null==v?void 0:v.src,null==v?void 0:v.name);var tt=(v,m,M,X)=>{var lt,F;let J,ot,G,O;var gt,jt;return v&&(J=v.replace(/\\/g,"/")),m&&(ot=m.replace(/\\/g,"/")),M&&(G=M.replace(/\\/g,"/")),ot&&!J&&(J=(null===(gt=T.L.config)||void 0===gt?void 0:gt.readfileuploadurl)+ot),!G||ot||J||(ot=G.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),J=(null===(jt=T.L.config)||void 0===jt?void 0:jt.readfileuploadurl)+ot),O=X||(null!==(lt=J)&&void 0!==lt?lt:"").split("/").pop()||(null!==(F=ot)&&void 0!==F?F:"").split("/").pop()||"",{url:J,path:ot,name:O}};const mt=v=>{let m={x:0,y:0,width:v.screen.w,height:v.screen.h},M=[];return v.data.forEach((X,lt)=>{var F,J;let ot={id:"number"==typeof X.id?X.id:T.L.data.newSlideId,code:null===(F=X.id)||void 0===F?void 0:F.toString(),name:"string"==typeof X.id?X.id:`Trang ${lt+1}`,svg:{viewBox:m,nodes:[]},test:(G=X.test2,G?(G.audiotrue&&(G.audiotrue=et({path:G.audiotrue.path})),G.audiofalse&&(G.audiofalse=et({path:G.audiofalse.path})),G.effecttrue&&(G.effecttrue=et({path:G.effecttrue.path})),G.effectfalse&&(G.effectfalse=et({path:G.effectfalse.path})),G.icontrue&&(G.icontrue=et({path:G.icontrue.path})),G.iconfalse&&(G.iconfalse=et({path:G.iconfalse.path})),G):{})};var G;X.background&&ot.svg&&(ot.svg.background=function(v){return v&&(null!==v.match(/#([a-zA-Z0-9]+)/)||null!==v.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==v.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(X.background)?{color:X.background}:function(v){return v&&null!==v.match(/data:[^;]+;base64,/)}(X.background)?{base64:X.background}:function(v){return v&&null!==v.match(/http(s)?:\/\//)}(X.background)?tt(X.background):tt(void 0,X.background)),jQuery(null!==(J=X.svg)&&void 0!==J?J:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((G,O)=>{var gt,jt;let It=jQuery(O).parents(".indexs"),Rt=(q=It.attr("data-index"))?parseInt(q):0,xt=(q=>Rt&&q?parseInt(q):0)(It.attr("data-time")),_t=null!==(gt=O.getAttribute("id"))&&void 0!==gt?gt:(1e9*Math.random()).toFixed(),ce={id:parseInt(_t),code:`${O.nodeName}-${_t}`,name:O.nodeName,idx:Rt,time:xt,type:(()=>{switch(O.nodeName){case"polygon":return E.h.POLYGON;case"path":return E.h.PATH;case"circle":return E.h.CIRCLE;case"ellipse":return E.h.ELLIPSE;case"line":return E.h.LINE;case"rect":return E.h.RECT;case"foreignObject":return E.h.FOREIGNOBJECT}return 0})(),size:(q=>{let Mt={},wt=0,ft=0,ut=0,Gt=0,P=null,A=null,d=parseFloat((null===(q=O.getAttribute("transform"))||void 0===q?void 0:q.replace("rotate(","").replace(")",""))||"0")||null;switch(O.nodeName){case"polygon":{var b,H;let Ct=[],Nt=[],Xt=999999999,Zt=999999999,Ht=0,zt=0;P=JSON.parse(O.getAttribute("ratios")||"[]"),A=null!==(b=null===(H=O.getAttribute("points"))||void 0===H?void 0:H.split(",").map(function(st){return st.split(" ").map(function(qt){return parseFloat(qt)})}))&&void 0!==b?b:[],A.forEach(function(st){Ct.push(st[0]),Nt.push(st[1])}),Xt=Math.min.apply(null,Ct),Zt=Math.min.apply(null,Nt),Ht=Math.max.apply(null,Ct),zt=Math.max.apply(null,Nt),wt=Xt,ft=Zt,ut=Ht-wt,Gt=zt-ft;break}case"path":{let Ct=O.getAttribute("d");if(Ct){let Nt=(0,R.CS)(Ct),{minX:Xt,minY:Zt,maxX:Ht,maxY:zt}=(0,R.lP)(Nt);wt=Xt,ft=Zt,ut=Ht-wt||1,Gt=zt-ft||1,Object.assign(Mt,{ratioMaps:(0,R.nf)({x:wt,y:ft,width:ut,height:Gt},Nt)})}break}case"circle":{let Ct=parseFloat(O.getAttribute("cx")||"0"),Nt=parseFloat(O.getAttribute("cy")||"0"),Xt=parseFloat(O.getAttribute("r")||"0");wt=Ct-Xt,ft=Nt-Xt,ut=2*Xt,Gt=2*Xt;break}case"ellipse":{let Ct=parseFloat(O.getAttribute("cx")||"0"),Nt=parseFloat(O.getAttribute("cy")||"0"),Xt=parseFloat(O.getAttribute("rx")||"0"),Zt=parseFloat(O.getAttribute("ry")||"0");wt=Ct-Xt,ft=Nt-Zt,ut=2*Xt,Gt=2*Zt;break}case"line":{let Ct=parseFloat(O.getAttribute("x1")||"0"),Nt=parseFloat(O.getAttribute("y1")||"0"),Xt=parseFloat(O.getAttribute("x2")||"0"),Zt=parseFloat(O.getAttribute("y2")||"0"),Ht=999999999,zt=999999999,st=0,qt=0;Ht=Math.min(Ct,Xt),zt=Math.min(Nt,Zt),st=Math.max(Ct,Xt),qt=Math.max(Nt,Zt),wt=Ht,ft=zt,ut=st-wt,Gt=qt-ft,P=[[(Ct-wt)/(ut||1),(Nt-ft)/(Gt||1)],[(Xt-wt)/(ut||1),(Zt-ft)/(Gt||1)]];break}case"rect":case"foreignObject":wt=parseFloat(O.getAttribute("x")||"0"),ft=parseFloat(O.getAttribute("y")||"0"),ut=parseFloat(O.getAttribute("width")||"0"),Gt=parseFloat(O.getAttribute("height")||"0")}return Object.assign(Mt,{x:wt,y:ft,width:ut,height:Gt,ratios:P,points:A,rotate:d})})(),attribute:(()=>{let q={};switch(O.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var Mt,wt,ft,ut,Gt,P,A,d;let st=null!==(Mt=O.getAttribute("fill"))&&void 0!==Mt?Mt:null,qt=null!==(wt=O.getAttribute("stroke"))&&void 0!==wt?wt:null,N=null!==(ft=parseFloat(null!==(ut=O.getAttribute("stroke-opacity"))&&void 0!==ut?ut:"1"))&&void 0!==ft?ft:null,u=null!==(Gt=parseFloat(O.getAttribute("stroke-width")||"0"))&&void 0!==Gt?Gt:null,K=null!==(P=O.getAttribute("stroke-linecap"))&&void 0!==P?P:null,nt=null!==(A=O.getAttribute("stroke-linejoin"))&&void 0!==A?A:null,at=null!==(d=parseFloat(O.getAttribute("stroke-dasharray")||"0"))&&void 0!==d?d:null;Object.assign(q,{fill:st,stroke:qt,strokeOpacity:N,strokeWidth:u,strokeLinecap:K,strokeLinejoin:nt,strokeDasharray:at});break}case"path":{let st=It.get(0);if(st){var b,H,Ct,Nt,Xt,Zt,Ht,zt;let qt=null!==(b=st.getAttribute("fill"))&&void 0!==b?b:null,N=null!==(H=st.getAttribute("stroke"))&&void 0!==H?H:null,u=null!==(Ct=parseFloat(null!==(Nt=st.getAttribute("stroke-opacity"))&&void 0!==Nt?Nt:"1"))&&void 0!==Ct?Ct:null,K=null!==(Xt=parseFloat(st.getAttribute("stroke-width")||"0"))&&void 0!==Xt?Xt:null,nt=null!==(Zt=st.getAttribute("stroke-linecap"))&&void 0!==Zt?Zt:null,at=null!==(Ht=st.getAttribute("stroke-linejoin"))&&void 0!==Ht?Ht:null,V=null!==(zt=parseFloat(st.getAttribute("stroke-dasharray")||"0"))&&void 0!==zt?zt:null;Object.assign(q,{fill:qt,stroke:N,strokeOpacity:u,strokeWidth:K,strokeLinecap:nt,strokeLinejoin:at,strokeDasharray:V})}break}}return q})(),style:(()=>{let q={};switch(O.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let ft=jQuery(O).find(".svg-container");if(ft.length){let Gt=parseFloat(ft.css("border-width")||"0")||null,P=ft.css("border-style")||null,A=ft.css("border-color")||null,d=null,b=ft.css("background-color")||null,H=null;(()=>{let{hex:Ct,alpha:Nt}=c(A);A=Ct,d=Nt})(),(()=>{let{hex:Ct,alpha:Nt}=c(b);b=Ct,H=Nt})(),Object.assign(q,{borderWidth:Gt,borderStyle:P,borderColor:A,borderOpacity:d,backgroundColor:b,backgroundOpacity:H})}let ut=jQuery(O).find(".svg-editor-content");if(ut.length){var Mt,wt;let Gt=JSON.parse((ut.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:P,alpha:A}=c(Gt.TextColor);Object.assign(q,{fontFamily:null!==(Mt=Gt.FontFamily)&&void 0!==Mt?Mt:null,fontSize:null!==(wt=Gt.FontSize)&&void 0!==wt?wt:null,color:P,opacity:A})}break}}return q})(),source:(()=>{let q={};switch(O.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(It.hasClass("editors")){var Mt;let zt="div,h1,h2,h3,h4,h5,h6,p,span,strong,b,i",st=u=>{null==u||u.forEach(K=>{let nt=K.querySelectorAll(`:scope > ${zt}`);nt.length&&st(nt),!K.querySelectorAll(":scope > *").length&&""==K.textContent&&K.remove()})},qt=u=>{let K=null==u?void 0:u.querySelectorAll(":scope > div,h1,h2,h3,h4,h5,h6,p,strong,span");if(null!=K&&K.length){var nt;let at=K[K.length-1];if(""==(null===(nt=at.textContent)||void 0===nt?void 0:nt.trim())){let V=at.querySelectorAll(":scope > *");if(V.length){let _=V[V.length-1];["br","BR"].includes(null==_?void 0:_.nodeName)&&(_.remove(),qt(u))}else at.remove(),qt(u)}}};st(null===(Mt=jQuery(O).find(".svg-editor-content").get(0))||void 0===Mt?void 0:Mt.querySelectorAll(`:scope > ${zt}`)),qt(jQuery(O).find(".svg-editor-content").get(0));let N=jQuery(O).find(".svg-editor-content");if(N.length){var wt;let u=N.html(),K=null!==(wt=(null!=u?u:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==wt?wt:[];Object.assign(q,{type:"html",html:{htmlContent:u,variableKeywords:K}})}}else if(It.hasClass("inputs")||It.hasClass("textareas"))Object.assign(q,{type:"input",input:{input:!!jQuery(O).find("input").length,textarea:!!jQuery(O).find("textarea").length}});else if(It.hasClass("tests")){let zt=jQuery(O).find(".svg-test");if(It.hasClass("tests-truefalse")){var ft,ut;let st=zt.find(".svg-editor-content").html(),qt=null!==(ft=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==ft?ft:[];Object.assign(q,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(ut=X.test2.truefalse)||void 0===ut?void 0:ut.includes(_t)}},html:{htmlContent:st,variableKeywords:qt}})}else if(It.hasClass("tests-singlechoice")){var Gt,P;let st=zt.find(".svg-editor-content").html(),qt=null!==(Gt=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Gt?Gt:[];Object.assign(q,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(P=X.test2.singlechoice)||void 0===P?void 0:P.includes(_t)}},html:{htmlContent:st,variableKeywords:qt}})}else if(It.hasClass("tests-multichoice")){var A,d;let st=zt.find(".svg-editor-content").html(),qt=null!==(A=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==A?A:[];Object.assign(q,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(d=X.test2.multichoice)||void 0===d?void 0:d.includes(_t)}},html:{htmlContent:st,variableKeywords:qt}})}else if(It.hasClass("tests-fill")){var b,H;let st=zt.find(".svg-editor-content").html(),qt=null!==(b=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==b?b:[],N=null!==(H=(null!=st?st:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==H?H:[];N=N.filter((u,K,nt)=>nt.indexOf(u)==K),Object.assign(q,{type:"test",test:{type:"fill",fill:N.map(u=>{var K;return{key:u,value:null===(K=X.test2.fill)||void 0===K||null===(K=K.find(nt=>nt.id==_t))||void 0===K||null===(K=K.vals)||void 0===K?void 0:K.map(nt=>nt.text).filter(nt=>!["",null,void 0,NaN].includes(nt))}})},html:{htmlContent:st,variableKeywords:qt,fillKeywords:N}})}else if(It.hasClass("tests-matching")){if(zt.hasClass("svg-test-empty"))Object.assign(q,{type:"test",test:{type:"matching-empty",matching:{key:zt.attr("data-name")||null}}});else if(zt.hasClass("svg-test-content")){var Ct;let st=zt.find(".svg-editor-content").html(),qt=null!==(Ct=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Ct?Ct:[];Object.assign(q,{type:"test",test:{type:"matching-content",matching:{key:zt.attr("data-name")||null}},html:{htmlContent:st,variableKeywords:qt}})}}else if(It.hasClass("tests-speech")){var Nt;Object.assign(q,{type:"speech",speech:{value:null===(Nt=X.test2.speech)||void 0===Nt||null===(Nt=Nt.find(st=>st.id==_t))||void 0===Nt||null===(Nt=Nt.vals)||void 0===Nt?void 0:Nt.map(st=>st.text).filter(st=>!["",null,void 0,NaN].includes(st))}})}else if(It.hasClass("tests-submit")){let st=jQuery(O).find(".svg-container img");Object.assign(q,{type:"test",test:{type:"submit"},image:tt(st.attr("url"),st.attr("path"),st.attr("src"))})}}else if(It.hasClass("images")){let zt=jQuery(O).find(".svg-editor-content img");if(zt.length)Object.assign(q,{type:"image",image:tt(zt.attr("url"),zt.attr("path"),zt.attr("src"))});else{let st=jQuery(O).find("iframe");Object.assign(q,{type:"iframe",iframe:tt(st.attr("url"),st.attr("path"),st.attr("src"))})}}else if(It.hasClass("sounds")){let zt=jQuery(O).find(".svg-editor-content img");zt.length&&Object.assign(q,{type:"image",image:tt(zt.attr("url"),zt.attr("path"),zt.attr("src"))})}else if(It.hasClass("htmls")){let zt=jQuery(O).find("iframe");zt.length&&Object.assign(q,{type:"iframe",iframe:tt(zt.attr("url"),zt.attr("path"),zt.attr("src"))})}else if(It.hasClass("svgs")){let zt=jQuery(O).find("svg");var Xt,Zt;zt.length&&Object.assign(q,{type:"svg",svg:Object.assign(tt(zt.attr("url"),zt.attr("path"),zt.attr("src")),{svgContent:null!==(Xt=null===(Zt=zt.get(0))||void 0===Zt?void 0:Zt.outerHTML)&&void 0!==Xt?Xt:null})})}else if(It.hasClass("medias")){let zt=jQuery(O).find(".media-item");if(zt.length)switch(zt.attr("type")){case"audio":Object.assign(q,{type:"audio",audio:tt(zt.attr("url"),zt.attr("path"),zt.attr("src"))});break;case"video":Object.assign(q,{type:"video",video:tt(zt.attr("url"),zt.attr("path"),zt.attr("src"))});break;case"file":Object.assign(q,{type:"file",file:tt(zt.attr("url"),zt.attr("path"),zt.attr("src"))});break;default:var Ht;Object.assign(q,{type:"link",link:{url:null!==(Ht=zt.attr("url"))&&void 0!==Ht?Ht:null}})}let st=jQuery(O).find("img");st.length&&(Object.assign(q,{image:tt(st.attr("url"),st.attr("path"),st.attr("src"))}),q.type||Object.assign(q,{type:"image"}))}}return q})(),animate:(q=>{let Mt={},wt=null===(q=X.animates)||void 0===q?void 0:q.find(ft=>ft.elementId==_t);return wt&&Object.assign(Mt,{value:wt.value}),Mt})(),interactive:(()=>{let q={},Mt=X.actions.show.filter(ft=>ft.elementId==_t&&ft.active);Mt.length&&(q.show={},Mt.forEach(ft=>{let{source:ut}=ft;switch(null==ut?void 0:ut.type){case"work":var Gt,P,A,d,b;q.show.action={},Object.assign(q.show.action,{value:null!==(Gt=ut.value)&&void 0!==Gt?Gt:null,iteration:null!==(P=ut.iteration)&&void 0!==P?P:null,finish:null!==(A=ut.end)&&void 0!==A?A:null,time:null!==(d=ut.time)&&void 0!==d?d:null,points:null!==(b=ut.points)&&void 0!==b?b:null});break;case"audio":var H,Ct,Nt;q.show.audio={},Object.assign(q.show.audio,{source:tt(null,null,ut.url),iteration:null!==(H=ut.iteration)&&void 0!==H?H:null,finish:null!==(Ct=ut.end)&&void 0!==Ct?Ct:null,time:null!==(Nt=ut.time)&&void 0!==Nt?Nt:null,async:-1==ut.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Xt,Zt,Ht,zt,st,qt,N,u,K,nt,at,V,_,Q,it;ut.options.includes("show")&&(q.show.triggershow={},Object.assign(q.show.triggershow,{id:null!==(Xt=parseInt(null!==(Zt=ut.id)&&void 0!==Zt?Zt:"0"))&&void 0!==Xt?Xt:null,ids:null===(Ht=ut.ids)||void 0===Ht?void 0:Ht.map(yt=>parseInt(yt)),async:null!==(zt=ut.async)&&void 0!==zt?zt:null,time:null!==(st=ut.time)&&void 0!==st?st:null})),ut.options.includes("run")&&(q.show.triggerrun={},Object.assign(q.show.triggerrun,{id:null!==(qt=parseInt(null!==(N=ut.id)&&void 0!==N?N:"0"))&&void 0!==qt?qt:null,ids:null===(u=ut.ids)||void 0===u?void 0:u.map(yt=>parseInt(yt)),async:null!==(K=ut.async)&&void 0!==K?K:null,time:null!==(nt=ut.time)&&void 0!==nt?nt:null})),ut.options.includes("hide")&&(q.show.triggerhide={},Object.assign(q.show.triggerhide,{id:null!==(at=parseInt(null!==(V=ut.id)&&void 0!==V?V:"0"))&&void 0!==at?at:null,ids:null===(_=ut.ids)||void 0===_?void 0:_.map(yt=>parseInt(yt)),async:null!==(Q=ut.async)&&void 0!==Q?Q:null,time:null!==(it=ut.time)&&void 0!==it?it:null}))}}));let wt=X.actions.click.filter(ft=>ft.elementId==_t&&ft.active);return wt&&(q.click={},wt.forEach(ft=>{let{source:ut}=ft;switch(null==ut?void 0:ut.type){case"work":var Gt,P,A,d,b;q.click.action={},Object.assign(q.click.action,{value:null!==(Gt=ut.value)&&void 0!==Gt?Gt:null,iteration:null!==(P=ut.iteration)&&void 0!==P?P:null,finish:null!==(A=ut.end)&&void 0!==A?A:null,time:null!==(d=ut.time)&&void 0!==d?d:null,points:null!==(b=ut.points)&&void 0!==b?b:null});break;case"audio":var H,Ct,Nt;q.click.audio={},Object.assign(q.click.audio,{source:tt(null,null,ut.url),iteration:null!==(H=ut.iteration)&&void 0!==H?H:null,finish:null!==(Ct=ut.end)&&void 0!==Ct?Ct:null,time:null!==(Nt=ut.time)&&void 0!==Nt?Nt:null,async:-1==ut.iteration?"change-slide":"change-node"});break;case"video":{q.click.video={},Object.assign(q.click.video,{source:tt(ut.url,ut.path)});let{url:Ot,path:Lt,name:pt}=tt(ut.url,ut.path);q.click.media={},Object.assign(q.click.media,{url:Ot,path:Lt,name:pt,type:U.S.VIDEO});break}case"image":{q.click.image={},Object.assign(q.click.image,{source:tt(ut.url,ut.path)});let{url:Ot,path:Lt,name:pt}=tt(ut.url,ut.path);q.click.media={},Object.assign(q.click.media,{url:Ot,path:Lt,name:pt,type:U.S.IMAGE});break}case"link":{q.click.link={},Object.assign(q.click.link,{url:ut.url,target:ut.target});let{url:Ot,path:Lt,name:pt}=tt(ut.url,ut.path);q.click.media={},Object.assign(q.click.media,{url:Ot,path:Lt,name:pt,type:U.S.LINK});break}case"text":q.click.text={},Object.assign(q.click.text,{content:ut.content});break;case"node":case"node2":var Xt,Zt,Ht,zt,st,qt,N,u,K,nt,at,V,_,Q,it;ut.options.includes("show")&&(q.click.triggershow={},Object.assign(q.click.triggershow,{id:null!==(Xt=parseInt(null!==(Zt=ut.id)&&void 0!==Zt?Zt:"0"))&&void 0!==Xt?Xt:null,ids:null===(Ht=ut.ids)||void 0===Ht?void 0:Ht.map(Ot=>parseInt(Ot)),async:null!==(zt=ut.async)&&void 0!==zt?zt:null,time:null!==(st=ut.time)&&void 0!==st?st:null})),ut.options.includes("run")&&(q.click.triggerrun={},Object.assign(q.click.triggerrun,{id:null!==(qt=parseInt(null!==(N=ut.id)&&void 0!==N?N:"0"))&&void 0!==qt?qt:null,ids:null===(u=ut.ids)||void 0===u?void 0:u.map(Ot=>parseInt(Ot)),async:null!==(K=ut.async)&&void 0!==K?K:null,time:null!==(nt=ut.time)&&void 0!==nt?nt:null})),ut.options.includes("hide")&&(q.click.triggerhide={},Object.assign(q.click.triggerhide,{id:null!==(at=parseInt(null!==(V=ut.id)&&void 0!==V?V:"0"))&&void 0!==at?at:null,ids:null===(_=ut.ids)||void 0===_?void 0:_.map(Ot=>parseInt(Ot)),async:null!==(Q=ut.async)&&void 0!==Q?Q:null,time:null!==(it=ut.time)&&void 0!==it?it:null}));break;case"slide":var yt;q.click.slide={},Object.assign(q.click.slide,{id:parseInt(null!==(yt=ut.id)&&void 0!==yt?yt:"0")||ut.num||null,code:ut.id})}})),q})(),variable:(q=>{let Mt={};var wt;O.getAttribute("data-variable")&&(Mt.input={},Object.assign(Mt.input,{variable:null!==(wt=O.getAttribute("data-variable"))&&void 0!==wt?wt:null}));let ft=null===(q=X.nodes)||void 0===q||null===(q=q.find(d=>d.id==_t))||void 0===q?void 0:q.variable;var ut,Gt,P,A;return ft&&(Mt.click={},Object.assign(Mt.click,{variable:null!==(ut=ft.variable)&&void 0!==ut?ut:null,operator:null!==(Gt=ft.operator)&&void 0!==Gt?Gt:null,valuetype:null!==(P=ft.valuetype)&&void 0!==P?P:null,value:null!==(A=ft.value)&&void 0!==A?A:null})),Mt})()};var q;null===(jt=ot.svg)||void 0===jt||jt.nodes.push(ce)}),M.push(ot)}),{screen:{width:v.screen.w,height:v.screen.h},data:{slides:M},variable:v.variable,fonts:[]}}},6195:(he,Bt,f)=>{f.d(Bt,{A9:()=>U,IB:()=>S,_4:()=>R,_5:()=>vt,ar:()=>k,yW:()=>c});var T=f(467),E=f(119);E.config({driver:[E.INDEXEDDB,E.LOCALSTORAGE,E.WEBSQL],name:"_localDataDB",version:1});const j={create:(W=(0,T.A)(function*(){return E}),function(){return W.apply(this,arguments)}),get:function(){var W=(0,T.A)(function*(x){return E.getItem(x)});return function(et){return W.apply(this,arguments)}}(),set:function(){var W=(0,T.A)(function*(x,et){return E.setItem(x,et)});return function(et,tt){return W.apply(this,arguments)}}()},vt=function(){var W=(0,T.A)(function*(x){yield j.create();var et=(yield j.get("icdt-data"))||[];"function"==typeof x.callback&&x.callback(et)});return function(et){return W.apply(this,arguments)}}(),k=function(){var W=(0,T.A)(function*(x){yield j.create(),x.params=x.params||{};try{yield j.set("icdt-data",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(et){"function"==typeof x.callback&&x.callback(null),console.error(et)}});return function(et){return W.apply(this,arguments)}}(),c=function(){var W=(0,T.A)(function*(x){yield j.create();try{var et=(yield j.get("icdt-config"))||{};"function"==typeof x.callback&&x.callback(et)}catch(tt){"function"==typeof x.callback&&x.callback(null),console.error(tt)}});return function(et){return W.apply(this,arguments)}}(),R=function(){var W=(0,T.A)(function*(x){yield j.create(),x.params=x.params||{};try{yield j.set("icdt-config",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(et){"function"==typeof x.callback&&x.callback(null),console.error(et)}});return function(et){return W.apply(this,arguments)}}(),U=function(){var W=(0,T.A)(function*(x){yield j.create();try{var et=(yield j.get("icdt-clipboard"))||{};"function"==typeof x.callback&&x.callback(et)}catch(tt){"function"==typeof x.callback&&x.callback(null),console.error(tt)}});return function(et){return W.apply(this,arguments)}}(),S=function(){var W=(0,T.A)(function*(x){yield j.create(),x.params=x.params||{};try{yield j.set("icdt-clipboard",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(et){"function"==typeof x.callback&&x.callback(null),console.error(et)}});return function(et){return W.apply(this,arguments)}}();var W},6315:(he,Bt,f)=>{f.d(Bt,{w:()=>T});const T=(E,rt)=>{if(!E)return"";let j=E.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),vt=(j&&j[4]||"").trim(),k=j?(256|j[1]).toString(16).slice(1)+(256|j[2]).toString(16).slice(1)+(256|j[3]).toString(16).slice(1):E;if("0"==vt)return"transparent";if(rt){let c;c=""!==vt?vt:"01",c=(255*c|256).toString(16).slice(1),k+=c}return`#${k}`}},7873:(he,Bt,f)=>{f.d(Bt,{F:()=>T});const T={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},1477:(he,Bt,f)=>{f.d(Bt,{r:()=>T});const T={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221,Minus:189,Equal:187}},2409:(he,Bt,f)=>{f.d(Bt,{F:()=>T});const T={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(he,Bt,f)=>{f.d(Bt,{P:()=>T});const T={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(he,Bt,f)=>{f.d(Bt,{Q:()=>T});const T={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(he,Bt,f)=>{f.d(Bt,{h:()=>T});const T={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,TSPAN:10,PATH:8,POLYLINE:11}},8338:(he,Bt,f)=>{f.d(Bt,{S:()=>T});const T={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},6611:(he,Bt,f)=>{f.d(Bt,{L:()=>At});var T=f(3603),E=f(5970),rt=f(7873),j=f(9506),vt=f(1308),k=f(5483);const U=B=>{var i,l,o,n,r,y,p;let h=(null===(i=B.mouseEvent)||void 0===i?void 0:i.target)||(null===(l=B.touchEvent)||void 0===l?void 0:l.target),C=(null===(o=h)||void 0===o?void 0:o.getAttribute("id"))||"",w=null===(n=h)||void 0===n?void 0:n.nodeName;At.dataSelect.nodeName.includes(w)||(h=jQuery(h).parents("foreignObject").get(0),h&&(C=h.getAttribute("id")||"",w=h.nodeName));let z=(null===(r=h)||void 0===r||null===(r=r.parentNode)||void 0===r?void 0:r.getAttribute("id"))||"";var D,St;if([rt.F.RESIZE_GROUP,rt.F.SELECT_GROUP].includes(z))return null===(D=B.mouseEvent)||void 0===D||D.stopPropagation(),void(null===(St=B.mouseEvent)||void 0===St||St.preventDefault());if(null!==(y=B.mouseEvent)&&void 0!==y&&y.altKey||null!==(p=B.touchEvent)&&void 0!==p&&p.altKey||!C||C.match(/[^0-9]/)||!At.dataSelect.nodeName.includes(w)){var bt;At.dataSelect.ids.length&&(At.dataSelect.ids=[]),(0==(null===(bt=B.mouseEvent)||void 0===bt?void 0:bt.button)||B.touchEvent)&&(B=>{let r=(0,E.RY)(rt.F.SCAN_GROUP,"g"),y=(0,j.CE)(0,0,1,1);(0,E.xJ)(r,y),((B,i,l)=>{(0,vt.I)(B,{start:r=>{},move:(r,y)=>{((r,y,p,h)=>{i=(0,j.CE)(r,y,p,h),(0,E.xJ)(l,i)})(y[0][0],y[0][1],r.x,r.y)},end:(r,y)=>{null==l||l.remove(),At.dataSelect.ids=At.data.getNodeInArea(Math.min(y[0][0],r.x),Math.min(y[0][1],r.y),Math.max(y[0][0],r.x),Math.max(y[0][1],r.y)),(0,k.D)(At.dataSelect.nodes)}})})(B,y,r)})(B)}else{var Pt,Ft;let ee=parseFloat(C||"0");At.dataSelect.ids=null!==(Pt=B.mouseEvent)&&void 0!==Pt&&Pt.shiftKey||null!==(Ft=B.touchEvent)&&void 0!==Ft&&Ft.shiftKey?[ee].concat(At.dataSelect.ids).filter((ke,we,Te)=>Te.indexOf(ke)==we):[ee],(0,k.D)(At.dataSelect.nodes)}};class W{constructor(){let{x:i,y:l}=At.screen.dislocation;var o=(n,r,y,p)=>{At.screen.move({x:i,y:l},{x:y-n,y:p-r})};return{start:n=>{},move:(n,r)=>{o(r[0][0],r[0][1],n.x,n.y)},end:(n,r)=>{o(r[0][0],r[0][1],n.x,n.y)}}}}var x=f(1999),et=f(4888);const tt=[{name:"tam gi\xe1c vu\xf4ng",type:et.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:et.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:et.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:et.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:et.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:et.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:et.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:et.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:et.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:et.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:et.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:et.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:et.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var mt=f(1281),v=f(2492);class m{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,attribute:n,size:r}=(0,mt.K)(Math.ceil(1e9*Math.random())),y=(p,h,C,w)=>{r=(0,j.CE)(p,h,C,w,{ratio:1}),r.x=(0,v.z)(r.x),r.y=(0,v.z)(r.y),r.width=(0,v.z)(r.width),r.height=(0,v.z)(r.height),Object.assign(n,(0,j.xW)(x.h.CIRCLE,r,n)),(0,E.tD)(o,n),(0,E.in)(i,r)};return{start:p=>{y(p.x,p.y,p.x+r.width,p.y+r.height)},move:(p,h)=>{y(h[0][0],h[0][1],p.x,p.y)},end:(p,h)=>{(r.width<=8||r.height<=8)&&(r.width=80,r.height=80,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(n,(0,j.xW)(x.h.CIRCLE,r,n)),(0,E.tD)(o,n)),At.data.node=Object.assign({id:l,type:x.h.CIRCLE,name:"Circle"},{size:r,attribute:n}),null==i||i.remove()}}}}var M=f(6153);class X{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,attribute:n,size:r}=(0,M.W)(Math.ceil(1e9*Math.random()));var y=(p,h,C,w)=>{r=(0,j.CE)(p,h,C,w),r.x=(0,v.z)(r.x),r.y=(0,v.z)(r.y),r.width=(0,v.z)(r.width),r.height=(0,v.z)(r.height),Object.assign(n,(0,j.xW)(x.h.ELLIPSE,r,n)),(0,E.tD)(o,n),(0,E.in)(i,r)};return{start:p=>{y(p.x,p.y,p.x+r.width,p.y+r.height)},move:(p,h)=>{y(h[0][0],h[0][1],p.x,p.y)},end:(p,h)=>{r.width<4&&(r.width=4),r.height<4&&(r.height=4),r.width+r.height<8&&(r.width=90,r.height=60,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(n,(0,j.xW)(x.h.ELLIPSE,r,n)),(0,E.tD)(o,n)),At.data.node=Object.assign({id:l,type:x.h.ELLIPSE,name:"Ellipse"},{size:r,attribute:n}),null==i||i.remove()}}}}var lt=f(7945);class F{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,attribute:n,size:r}=(0,lt.a)(Math.ceil(1e9*Math.random()));var y=(p,h,C,w)=>{r=(0,j.CE)(p,h,C,w),r.x=(0,v.z)(r.x),r.y=(0,v.z)(r.y),r.width=(0,v.z)(r.width),r.height=(0,v.z)(r.height),Object.assign(n,(0,j.xW)(x.h.RECT,r,n)),(0,E.tD)(o,n),(0,E.in)(i,r)};return{start:p=>{y(p.x,p.y,p.x+r.width,p.y+r.height)},move:(p,h)=>{y(h[0][0],h[0][1],p.x,p.y)},end:(p,h)=>{r.width<1&&(r.width=1),r.height<1&&(r.height=1),r.width+r.height<8&&(r.width=80,r.height=80,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(n,(0,j.xW)(x.h.RECT,r,n)),(0,E.tD)(o,n)),At.data.node=Object.assign({id:l,type:x.h.RECT,name:"Rect"},{size:r,attribute:n}),null==i||i.remove()}}}}var J=f(3477);class ot{constructor(i){let l=(0,E.RY)(rt.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:n,element:r,attribute:y,size:p}=(0,J.u)(Math.ceil(1e9*Math.random()));p.ratios=o;var h=(C,w,z,D)=>{p=(0,j.CE)(C,w,z,D,{ratios:o}),p.x=(0,v.z)(p.x),p.y=(0,v.z)(p.y),p.width=(0,v.z)(p.width),p.height=(0,v.z)(p.height),Object.assign(y,(0,j.xW)(x.h.POLYGON,p,y)),(0,E.tD)(r,y),(0,E.in)(l,p)};return{start:C=>{h(C.x,C.y,C.x+p.width,C.y+p.height)},move:(C,w)=>{h(w[0][0],w[0][1],C.x,C.y)},end:(C,w)=>{p.width<1&&(p.width=1),p.height<1&&(p.height=1),p.width+p.height<8&&(p.width=80,p.height=80,p.x=p.x-p.width/2,p.y=p.y-p.height/2,Object.assign(y,(0,j.xW)(x.h.POLYGON,p,y)),(0,E.tD)(r,y)),At.data.node=Object.assign({id:n,type:x.h.POLYGON,name:"Polygon"},{size:p,attribute:y}),null==l||l.remove()}}}}var G=f(3069);class O{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,attribute:n,size:r}=(0,G.q)(Math.ceil(1e9*Math.random()));return{start:p=>{},move:(p,h)=>{((p,h,C,w)=>{r=(0,j.CE)(p,h,C,w),r.x=(0,v.z)(r.x),r.y=(0,v.z)(r.y),r.width=(0,v.z)(r.width),r.height=(0,v.z)(r.height),Object.assign(n,(0,j.xW)(x.h.LINE,r,n)),(0,E.tD)(o,n),(0,E.in)(i,r)})(h[0][0],h[0][1],p.x,p.y)},end:(p,h)=>{h.length>=2?(r.width<8&&(r.width=0),r.height<8&&(r.height=0),r.width+r.height<8&&(r.width=80,r.height=0,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(n,(0,j.xW)(x.h.LINE,r,n)),(0,E.tD)(o,n)),At.data.node=Object.assign({id:l,type:x.h.LINE,name:"Line"},{size:r,attribute:n})):null==o||o.remove(),null==i||i.remove()}}}}var gt=f(4896),jt=f(6407);class It{constructor(){let{nodeId:i,element:l,attribute:o,size:n}=(0,jt.X)(Math.ceil(1e9*Math.random())),y="";return{start:h=>{y=`M ${h.x} ${h.y} L ${h.x} ${h.y}`},move:(h,C)=>{((h,C)=>{y+=` ${h} ${C}`,l.setAttribute("d",y)})(h.x,h.y)},end:(h,C)=>{let w=(0,gt.CS)(y),{minX:z,minY:D,maxX:St,maxY:bt}=(0,gt.lP)(w);n.x=z,n.y=D,n.width=St-z||1,n.height=bt-D||1,n.ratioMaps=(0,gt.nf)(n,w),At.data.node=Object.assign({id:i,type:x.h.PATH,name:"Path"},{size:n,attribute:o})}}}}var Rt=f(745);class xt{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,size:n,attribute:r,style:y,source:p}=(0,Rt.$)(Math.ceil(1e9*Math.random()));var h=(C,w,z,D)=>{n=(0,j.CE)(C,w,z,D),n.x=(0,v.z)(n.x),n.y=(0,v.z)(n.y),n.width=(0,v.z)(n.width),n.height=(0,v.z)(n.height),Object.assign(r,(0,j.xW)(x.h.FOREIGNOBJECT,n,r)),(0,E.tD)(o,r),(0,E.in)(i,n)};return{start:C=>{h(C.x,C.y,C.x+n.width,C.y+n.height)},move:(C,w)=>{h(w[0][0],w[0][1],C.x,C.y)},end:(C,w)=>{(n.width<=16||n.height<=16)&&(n.width=90,n.height=60,n.x=n.x-n.width/2,n.y=n.y-n.height/2,Object.assign(r,(0,j.xW)(x.h.FOREIGNOBJECT,n,r)),(0,E.tD)(o,r)),At.data.node=Object.assign({id:l,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:r,style:y,source:p}),null==i||i.remove()}}}}var _t=f(9173);class ce{constructor(){var i,l;let o=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:n,element:r,size:y,attribute:p,source:h}=(0,_t.B)(Math.ceil(1e9*Math.random())),C=1;(z=>{if(!z)return;let D=new Image;D.onload=()=>{C=(0,v.z)(D.naturalWidth/D.naturalHeight,100)},D.onerror=St=>{console.error(`ImgSrc load failed -> ${z}`,St)},D.src=z})(null!==(i=null===(l=h.image)||void 0===l?void 0:l.url)&&void 0!==i?i:"");var w=(z,D,St,bt)=>{y=(0,j.CE)(z,D,St,bt,{ratio:C}),y.x=(0,v.z)(y.x),y.y=(0,v.z)(y.y),y.width=(0,v.z)(y.width),y.height=(0,v.z)(y.height),Object.assign(p,(0,j.xW)(x.h.IMAGE,y,p)),(0,E.tD)(r,p),(0,E.in)(o,y)};return{start:z=>{w(z.x,z.y,z.x+y.width,z.y+y.height)},move:(z,D)=>{w(D[0][0],D[0][1],z.x,z.y)},end:(z,D)=>{(y.width<=16||y.height<=16)&&(y.width=80,y.height=80,y.x=y.x-y.width/2,y.y=y.y-y.height/2,Object.assign(p,(0,j.xW)(x.h.IMAGE,y,p)),(0,E.tD)(r,p)),At.data.node=Object.assign({id:n,type:x.h.IMAGE,name:"Image"},{size:y,attribute:p,source:h}),null==o||o.remove()}}}}var Mt=f(7135),wt=f(4979);function Gt(B,i,l,o){return Math.sqrt(Math.pow(l-B,2)+Math.pow(o-i,2))}function P(B,i,l,o,n){return Gt(B,i,l,o)<n?1:0}function d(B,i,l,o,n,r,y){var p=[];return p.push(P(B,i,l,o,y)),p.push(P(B,i,n,r,y)),p.push(function A(B,i,l,o,n,r,y){var p=[n-l,r-o],h=[B-l,i-o],C=[-p[1],p[0]],w=Math.sqrt(Math.pow(C[0],2)+Math.pow(C[1],2)),z=[C[0]/w,C[1]/w],D=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),St=[p[0]/D,p[1]/D],bt=h[0]*St[0]+h[1]*St[1];if(bt<=0||bt>=D)return 0;var Pt=h[0]*z[0]+h[1]*z[1];return Pt>=y||Pt<=-y?0:1}(B,i,l,o,n,r,y)),p}function b(B,i,l,o,n){var r=[l-B,o-i],y=[-r[1],r[0]],p=Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)),h=[y[0]/p,y[1]/p];return[[B+n*h[0],i+n*h[1]],[B-n*h[0],i-n*h[1]],[l-n*h[0],o-n*h[1]],[l+n*h[0],o+n*h[1]]]}function H(B,i,l,o,n,r,y){var bt,p=[n-B,r-i],h=[l-B,o-i],C=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)),w=[h[0]/C,h[1]/C],z=p[0]*w[0]+p[1]*w[1],D=[B+z*w[0],i+z*w[1]],St=Math.sqrt(Math.pow(n-D[0],2)+Math.pow(r-D[1],2));bt=0===St?y:Math.sqrt(Math.pow(y,2)-Math.pow(St,2));var Pt=[B+z*w[0]+bt*w[0],i+z*w[1]+bt*w[1]];return Pt[0]===B&&Pt[1]===i?null:Pt}function Ct(B,i,l,o,n,r,y){var p=[n-B,r-i],h=[l-B,o-i],C=[-h[1],h[0]],w=Math.sqrt(Math.pow(C[0],2)+Math.pow(C[1],2)),z=[C[0]/w,C[1]/w],D=p[0]*z[0]+p[1]*z[1],St=st([B,i],[l,o],[n,r]);if(Ht([St[0]-n,St[1]-r])>=y)return null;var Pt=Math.sqrt(Math.pow(y,2)-Math.pow(D,2)),Ft=[n-D*z[0],r-D*z[1]],ee=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)),ke=[h[0]/ee,h[1]/ee],we=[[Ft[0]-ke[0]*Pt,Ft[1]-ke[1]*Pt],[Ft[0]+ke[0]*Pt,Ft[1]+ke[1]*Pt]];return we[0][0]===B&&we[0][1]===i?null:we}function Nt(B,i,l,o,n,r,y,p){var h,C,w,z,D,St;return-(w=y-n)*(C=o-i)+(h=l-B)*(z=p-r)==0?null:(St=(w*(i-r)-z*(B-n))/(-w*C+h*z),(D=(-C*(B-n)+h*(i-r))/(-w*C+h*z))>=0&&D<=1&&St>=0&&St<=1?[B+St*h,i+St*C]:null)}function Xt(B,i,l,o,n,r,y,p,h,C){var w=b(r,y,p,h,C),z=[];if(l[0]&&!l[1])z.push(H(B,i,o,n,r,y,C)),z.push(Nt(B,i,o,n,w[0][0],w[0][1],w[3][0],w[3][1])),z.push(Nt(B,i,o,n,w[1][0],w[1][1],w[2][0],w[2][1])),(D=Ct(B,i,o,n,p,h,C))&&z.push(D[0],D[1]);else if(!l[0]&&l[1])z.push(H(B,i,o,n,p,h,C)),z.push(Nt(B,i,o,n,w[0][0],w[0][1],w[3][0],w[3][1])),z.push(Nt(B,i,o,n,w[1][0],w[1][1],w[2][0],w[2][1])),(D=Ct(B,i,o,n,r,y,C))&&z.push(D[0],D[1]);else if(l[0]&&l[1])z.push(H(B,i,o,n,r,y,C)),z.push(Nt(B,i,o,n,w[0][0],w[0][1],w[3][0],w[3][1])),z.push(Nt(B,i,o,n,w[1][0],w[1][1],w[2][0],w[2][1])),z.push(H(B,i,o,n,p,h,C));else{var D=Ct(B,i,o,n,p,h,C),St=Ct(B,i,o,n,r,y,C);D&&z.push(D[0],D[1]),St&&z.push(St[0],St[1]),z.push(Nt(B,i,o,n,w[0][0],w[0][1],w[3][0],w[3][1])),z.push(Nt(B,i,o,n,w[1][0],w[1][1],w[2][0],w[2][1]))}for(var bt=[B,i],Pt=0;Pt<z.length;Pt++)z[Pt]&&Gt(z[Pt][0],z[Pt][1],o,n)<Gt(bt[0],bt[1],o,n)&&(bt=z[Pt]);return bt[0]===B&&bt[1]===i?null:bt}function Zt(B,i,l,o,n,r,y,p,h){var C=b(n,r,y,p,h),w=[],z=Ct(B,i,l,o,n,r,h);z&&w.push(z[0],z[1]),(z=Ct(B,i,l,o,y,p,h))&&w.push(z[0],z[1]),w.push(Nt(B,i,l,o,C[0][0],C[0][1],C[3][0],C[3][1])),w.push(Nt(B,i,l,o,C[1][0],C[1][1],C[2][0],C[2][1]));for(var D=[l,o],St=[B,i],bt=0;bt<w.length;bt++)w[bt]&&Gt(w[bt][0],w[bt][1],B,i)<Gt(D[0],D[1],B,i)&&(D=w[bt]);for(var Pt=0;Pt<w.length;Pt++)w[Pt]&&Gt(w[Pt][0],w[Pt][1],l,o)<Gt(St[0],St[1],l,o)&&(St=w[Pt]);return D[0]===l&&D[1]===o||St[0]===B&&St[1]===i?null:[D,St]}var Ht=function(B){return Math.sqrt(B[0]*B[0]+B[1]*B[1])},st=function(B,i,l){var o=[i[0]-B[0],i[1]-B[1]],n=Ht(o);if(n<1e-6)return B;var r=[l[0]-B[0],l[1]-B[1]],y=(o[0]*r[0]+o[1]*r[1])/n;return y<0?B:y>n?i:[B[0]+o[0]*y/n,B[1]+o[1]*y/n]};class qt{constructor(){let{element:o,size:r}=(0,jt.X)(Math.ceil(1e9*Math.random()));(0,E.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let y="";return{start:C=>{y=`M ${C.x} ${C.y} L ${C.x} ${C.y}`},move:(C,w)=>{((C,w)=>{y+=` ${C} ${w}`,o.setAttribute("d",y)})(C.x,C.y)},end:(C,w)=>{o.remove(),(C=>{let w=9999,z=9999,D=-9999,St=-9999;C.forEach(Pt=>{w=Math.min(w,Pt[0]),z=Math.min(z,Pt[1]),D=Math.max(D,Pt[0]),St=Math.max(St,Pt[1])}),r=(0,j.CE)(w,z,D,St,{points:C}),At.data.getNodeInArea(0,0,1920,1920,x.h.PATH).forEach(Pt=>{let ee=((B,i,l)=>{l=l||20;var o=[],n=function(w){var z=i[0][0],D=i[0][1],St=0,bt=0;if(1!==w.length||P(w[0][0],w[0][1],z,D,l)){for(var Pt;St<w.length-1;){var Ft=w[St],ee=w[St+1],ke=P(Ft[0],Ft[1],z,D,l),we=P(ee[0],ee[1],z,D,l);if(ke&&we)bt=++St;else if(ke&&!we)(Te=H(Ft[0],Ft[1],ee[0],ee[1],z,D,l))?(w[St]=Te,bt=St):St++;else if(!ke&&we){var Te;(Te=H(ee[0],ee[1],Ft[0],Ft[1],z,D,l))&&((Pt=w.slice(bt,St+1)).push(Te),o.push(Pt)),bt=++St}else{var Oe=Ct(Ft[0],Ft[1],ee[0],ee[1],z,D,l);Oe?(((Pt=w.slice(bt,St+1))[Pt.length-1][0]!==Oe[0][0]||Pt[Pt.length-1][1]!==Oe[0][1])&&Pt.push(Oe[0]),Pt.length>1&&o.push(Pt),w[St]=Oe[1],w[St+1]&&w[St+1][0]==Oe[1][0]&&w[St+1][1]==Oe[1][1]&&St++,bt=St):St++}}bt!==St&&(Pt=w.slice(bt,w.length))&&o.push(Pt)}else o.push(w)},r=function(w,z){var ee,D=i[z],St=i[z+1],bt=0,Pt=0;if(1!==w.length||-1!==(Ft=d(w[0][0],w[0][1],D[0],D[1],St[0],St[1],l)).indexOf(1)){for(;bt<w.length-1;){var ke=w[bt],we=w[bt+1],Ft=d(ke[0],ke[1],D[0],D[1],St[0],St[1],l),Te=d(we[0],we[1],D[0],D[1],St[0],St[1],l);if(-1!==Ft.indexOf(1)&&-1!==Te.indexOf(1))Pt=++bt;else if(-1!==Ft.indexOf(1)&&-1===Te.indexOf(1))(Oe=Xt(ke[0],ke[1],Ft,we[0],we[1],D[0],D[1],St[0],St[1],l))?(w[bt]=Oe,Pt=bt):bt++;else if(-1===Ft.indexOf(1)&&-1!==Te.indexOf(1)){var Oe;(Oe=Xt(we[0],we[1],Te,ke[0],ke[1],D[0],D[1],St[0],St[1],l))?((ee=w.slice(Pt,bt+1)).push(Oe),o.push(ee),Pt=++bt):bt++}else{var Ae=Zt(ke[0],ke[1],we[0],we[1],D[0],D[1],St[0],St[1],l);Ae?(((ee=w.slice(Pt,bt+1))[ee.length-1][0]!==Ae[0][0]||ee[ee.length-1][1]!==Ae[0][1])&&ee.push(Ae[0]),ee.length>1&&o.push(ee),w[bt]=Ae[1],w[bt+1]&&w[bt+1][0]==Ae[1][0]&&w[bt+1][1]==Ae[1][1]&&bt++,Pt=bt):bt++}}Pt!==bt&&(ee=w.slice(Pt,w.length))&&o.push(ee)}else o.push(w)};if(i=function ut(B){var i=[];if(1===B.length)i=B;else{for(var l=0;l<B.length-1;)(B[l][0]!==B[l+1][0]||B[l][1]!==B[l+1][1])&&i.push(B[l]),l++;0!==B.length&&0===i.length&&i.push(B[0]),(B[B.length-1][0]!==B[i.length-1][0]||B[B.length-1][1]!==B[i.length-1][1])&&i.push(B[l])}return i}(i),1===i.length){for(var y=0;y<B.length;y++)n(B[y]);B=o}else for(var p=0;p<i.length-1;p++){for(y=0;y<B.length;y++)r(B[y],p);B=o,o=[]}for(var h=0;h<B.length;h++)for(var C=0;C<B[h].length;C++)B[h][C][0]=Math.round(B[h][C][0]),B[h][C][1]=Math.round(B[h][C][1]);return B})(At.data.getNode(Pt).size.points,C,2);console.log(ee)})})(w)}}}}var u=f(6847);class K{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:l,element:o,attribute:n,size:r,source:y}=(0,u.L)(Math.ceil(1e9*Math.random())),p=(h,C,w,z)=>{r=(0,j.CE)(h,C,w,z),r.x=(0,v.z)(r.x),r.y=(0,v.z)(r.y),r.width=(0,v.z)(r.width),r.height=(0,v.z)(r.height),Object.assign(n,(0,j.xW)(x.h.TEXT,r,n)),(0,E.tD)(o,n),(0,E.in)(i,r)};return{start:h=>{p(h.x,h.y,h.x+r.width,h.y+r.height)},move:(h,C)=>{p(C[0][0],C[0][1],h.x,h.y)},end:(h,C)=>{r.width<100&&(r.width=100),r.height<20&&(r.height=20),r.width+r.height<8&&(r.width=100,r.height=20,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(n,(0,j.xW)(x.h.TEXT,r,n)),(0,E.tD)(o,n)),At.data.node=Object.assign({id:l,type:x.h.TEXT,name:"Text"},{size:r,attribute:n,source:y}),null==i||i.remove()}}}}var _=f(4312),Q=f(2409),it=f(6078);var Ot=f(3073);class Lt{constructor(){this._nodeName=["circle","ellipse","line","polygon","polyline","rect","text","tspan","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>At.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var l,o,n,r,y;null===(l=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===l||l.remove(),null===(o=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===o||o.remove(),null===(n=window.document.getElementById(rt.F.SCAN_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(rt.F.CREATE_GROUP))||void 0===r||r.remove(),null===(y=window.document.getElementById(rt.F.INTERACTIVE_GROUP))||void 0===y||y.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(p=>p(i))}deleteNode(){for(let i of this._selected_Ids){let l=At.data.deleteNode(i);At.history.push([{type:"delete",from:{id:l},to:{id:l}}])}At.dataSelect.ids=[]}groupNode(){let i=[];if(At.dataSelect.ids.length>=2){let l=At.data.getNode(At.dataSelect.ids[0]),{nodeId:o,attribute:n,size:r}=(0,Ot.v)(Math.ceil(1e9*Math.random()),void 0,l.pid?window.document.getElementById(l.pid):null);At.data.node=Object.assign({id:o,type:x.h.GROUP,name:"G"},{size:r,attribute:n});for(let y of At.dataSelect.ids)i.push(At.data.addGroup(y,o))}i.length&&(At.dataSelect.ids=i,(0,k.D)(At.dataSelect.nodes))}ungroupNode(){let i=[];for(let l of At.dataSelect.ids)i.push(At.data.unGroup(l));i.length&&(At.dataSelect.ids=i,(0,k.D)(At.dataSelect.nodes))}}var pt=f(2837),dt=f(8338);class kt{createNodeImage(i,l){var o,n,r,y;let{nodeId:h,element:C,size:w,attribute:z,source:D}=(0,_t.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==l?void 0:l.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==l?void 0:l.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,pt.U)(i)}});(St=>{if(!St)return;let bt=new Image;bt.onload=()=>{let Pt=(0,v.z)(bt.naturalWidth/bt.naturalHeight,100);Pt>=1?(w.width=Math.min(bt.naturalWidth,512),w.height=(0,v.z)(w.width/Pt,100)):(w.height=Math.min(bt.naturalHeight,512),w.width=(0,v.z)(w.height*Pt,100)),w.x=(0,v.z)(w.x+50-w.width/2,100),w.y=(0,v.z)(w.y+50-w.height/2,100),Object.assign(z,(0,j.xW)(x.h.IMAGE,w,z)),(0,E.tD)(C,z),At.data.node=Object.assign({id:h,type:x.h.IMAGE,name:"Image"},{size:w,attribute:z,source:D})},bt.onerror=Pt=>{console.error(`ImgSrc load failed -> ${St}`,Pt),null==C||C.remove()},bt.src=St})(null!==(r=null===(y=D.image)||void 0===y?void 0:y.url)&&void 0!==r?r:"")}createNodeIframe(i,l){var o,n;let{nodeId:y,element:p,size:h,attribute:C,style:w,source:z}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==l?void 0:l.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==l?void 0:l.y)&&void 0!==n?n:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,pt.U)(i)}});(D=>{let St=(null===(D=At.data.slide)||void 0===D||null===(D=D.svg)||void 0===D?void 0:D.viewBox)||{x:0,y:0,width:100,height:100},bt=(0,v.z)(St.width/St.height,100);bt>=1?(h.width=Math.min(St.width,512),h.height=(0,v.z)(h.width/bt,100)):(h.height=Math.min(St.height,512),h.width=(0,v.z)(h.height*bt,100)),h.x=(0,v.z)(h.x+50-h.width/2,100),h.y=(0,v.z)(h.y+50-h.height/2,100),Object.assign(C,(0,j.xW)(x.h.IMAGE,h,C)),(0,E.tD)(p,C),At.data.node=Object.assign({id:y,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:C,style:w,source:z})})()}createNodeEmbed(i,l){var o,n;let r={x:50,y:50,width:640,height:360};i.type==dt.S.AUDIO&&(r.width=480,r.height=80);let{nodeId:y,element:p,size:h,attribute:C,style:w,source:z}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==l?void 0:l.x)&&void 0!==o?o:r.x)-r.x,y:(null!==(n=null==l?void 0:l.y)&&void 0!==n?n:r.y)-r.y,width:r.width,height:r.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,pt.U)(i))}});(()=>{let D=(0,v.z)(r.width/r.height,100);D>=1?(h.width=Math.min(h.width,r.width),h.height=(0,v.z)(h.width/D,1)):(h.height=Math.min(h.height,r.height),h.width=(0,v.z)(h.height*D,1)),h.x=(0,v.z)(h.x+r.x-h.width/2,1),h.y=(0,v.z)(h.y+r.y-h.height/2,1),Object.assign(C,(0,j.xW)(x.h.FOREIGNOBJECT,h,C)),(0,E.tD)(p,C),At.data.node=Object.assign({id:y,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:C,style:w,source:z})})()}createNodeMedia(i,l){var o,n,r,y;let{nodeId:h,element:C,size:w,attribute:z,source:D}=(0,_t.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==l?void 0:l.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==l?void 0:l.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,pt.U)(i.cover)}}),St={click:{media:i.media}};(bt=>{if(!bt)return;let Pt=new Image;Pt.onload=()=>{let Ft=(0,v.z)(Pt.naturalWidth/Pt.naturalHeight,100);Ft>=1?(w.width=Math.min(Pt.naturalWidth,512),w.height=(0,v.z)(w.width/Ft,100)):(w.height=Math.min(Pt.naturalHeight,512),w.width=(0,v.z)(w.height*Ft,100)),w.x=(0,v.z)(w.x+50-w.width/2,100),w.y=(0,v.z)(w.y+50-w.height/2,100),Object.assign(z,(0,j.xW)(x.h.IMAGE,w,z)),(0,E.tD)(C,z),At.data.node=Object.assign({id:h,type:x.h.IMAGE,name:"Image"},{size:w,attribute:z,source:D,interactive:St})},Pt.onerror=Ft=>{console.error(`ImgSrc load failed -> ${bt}`,Ft),null==C||C.remove()},Pt.src=bt})(null!==(r=null===(y=D.image)||void 0===y?void 0:y.url)&&void 0!==r?r:"")}createNodeText(i,l){var o,n;let{nodeId:y,element:p,size:h,attribute:C,style:w,source:z}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==l?void 0:l.x)&&void 0!==o?o:0)-0,y:(null!==(n=null==l?void 0:l.y)&&void 0!==n?n:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let D=(0,v.z)(4,100);D>=1?(h.width=Math.min(h.width,320),h.height=(0,v.z)(h.width/D,1)):(h.height=Math.min(h.height,80),h.width=(0,v.z)(h.height*D,1)),h.x=(0,v.z)(h.x+0-h.width/2,1),h.y=(0,v.z)(h.y+0-h.height/2,1),Object.assign(C,(0,j.xW)(x.h.FOREIGNOBJECT,h,C)),(0,E.tD)(p,C),At.data.node=Object.assign({id:y,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:C,style:w,source:z})})()}insert(i){var l;if(At.data.insertSlide(At.data.slideId,1),i.title){let{nodeId:o,size:n,attribute:r,style:y,source:p}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});At.data.node=Object.assign({id:o,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:r,style:y,source:p})}if(i.description){let{nodeId:o,size:n,attribute:r,style:y,source:p}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});At.data.node=Object.assign({id:o,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:r,style:y,source:p})}null!==(l=i.media)&&void 0!==l&&l.prompt&&((()=>{let{nodeId:o,size:n,attribute:r}=(0,lt.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});At.data.node=Object.assign({id:o,type:x.h.RECT,name:"Rect"},{size:n,attribute:r})})(),(o=>{let{nodeId:n,size:r,attribute:y,style:p,source:h}=(0,Rt.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});At.data.node=Object.assign({id:n,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:y,style:p,source:h})})())}}var Tt=f(1026),Kt=f(8047);class Qt{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:At.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let l=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((r,y)=>y==this._slideIdx),o=null==l?void 0:l.svg,n=r=>{let y=[];return r.filter(p=>!p.isdeleted).forEach(p=>{p.type==x.h.GROUP?y=y.concat(n(p.nodes||[])):y.push(p.id)}),y};return n((null==o?void 0:o.nodes)||[])}}get get(){var i;let l=o=>{var n,r;return null===(n=o)||void 0===n||n.filter(y=>y.type==x.h.GROUP).forEach(y=>{var p;y.nodes=l(null===(p=y.nodes)||void 0===p?void 0:p.filter(h=>!h.isdeleted))}),(o=null===(r=o)||void 0===r?void 0:r.filter(y=>{var p,h;return y.type!=x.h.GROUP||(null!==(p=null===(h=y.nodes)||void 0===h?void 0:h.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=l(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(r=>!r.isdeleted)))}),this._dataSource}get getResource(){var i;let l=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n,r,y,p,h,C,w,z;l.push(null===(n=o.svg)||void 0===n||null===(n=n.background)||void 0===n?void 0:n.path),null===(r=o.svg)||void 0===r||r.nodes.forEach(D=>{var St,bt,Pt,Ft,ee,ke,we,Te,Oe,Ae;l.push(null===(St=D.source)||void 0===St||null===(St=St.image)||void 0===St?void 0:St.path),l.push(null===(bt=D.source)||void 0===bt||null===(bt=bt.audio)||void 0===bt?void 0:bt.path),l.push(null===(Pt=D.source)||void 0===Pt||null===(Pt=Pt.video)||void 0===Pt?void 0:Pt.path),l.push(null===(Ft=D.source)||void 0===Ft||null===(Ft=Ft.file)||void 0===Ft?void 0:Ft.path),l.push(null===(ee=D.source)||void 0===ee||null===(ee=ee.iframe)||void 0===ee?void 0:ee.path),l.push(null===(ke=D.source)||void 0===ke||null===(ke=ke.track)||void 0===ke?void 0:ke.path),l.push(null===(we=D.interactive)||void 0===we||null===(we=we.show)||void 0===we||null===(we=we.audio)||void 0===we||null===(we=we.source)||void 0===we?void 0:we.path),l.push(null===(Te=D.interactive)||void 0===Te||null===(Te=Te.click)||void 0===Te||null===(Te=Te.audio)||void 0===Te||null===(Te=Te.source)||void 0===Te?void 0:Te.path),l.push(null===(Oe=D.interactive)||void 0===Oe||null===(Oe=Oe.click)||void 0===Oe||null===(Oe=Oe.image)||void 0===Oe||null===(Oe=Oe.source)||void 0===Oe?void 0:Oe.path),l.push(null===(Ae=D.interactive)||void 0===Ae||null===(Ae=Ae.click)||void 0===Ae||null===(Ae=Ae.video)||void 0===Ae||null===(Ae=Ae.source)||void 0===Ae?void 0:Ae.path)}),l.push(null===(y=o.test)||void 0===y||null===(y=y.audiotrue)||void 0===y?void 0:y.path),l.push(null===(p=o.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),l.push(null===(h=o.test)||void 0===h||null===(h=h.effecttrue)||void 0===h?void 0:h.path),l.push(null===(C=o.test)||void 0===C||null===(C=C.effectfalse)||void 0===C?void 0:C.path),l.push(null===(w=o.test)||void 0===w||null===(w=w.icontrue)||void 0===w?void 0:w.path),l.push(null===(z=o.test)||void 0===z||null===(z=z.iconfalse)||void 0===z?void 0:z.path)}),l.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,n,r)=>r.indexOf(o)==n)}get getFonts(){var i;return(0,Kt.d)(JSON.stringify(null!==(i=this._dataSource.slides)&&void 0!==i?i:[]))}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let l=o=>{var n,r;return null===(n=o)||void 0===n||n.filter(y=>y.type==x.h.GROUP).forEach(y=>{var p;y.nodes=l(null===(p=y.nodes)||void 0===p?void 0:p.filter(h=>!h.isdeleted))}),(o=null===(r=o)||void 0===r?void 0:r.filter(y=>{var p,h;return y.type!=x.h.GROUP||(null!==(p=null===(h=y.nodes)||void 0===h?void 0:h.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=l(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(r=>!r.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,l;return null!==(i=null===(l=this.slide)||void 0===l?void 0:l.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,l;this._slideIdx<(null!==(i=null===(l=this._dataSource.slides)||void 0===l?void 0:l.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,E.rN)(),(0,Tt.t)(this.slide)}openSlide(i,l){var o,n,r,y,p;if(i)for(let D=0,St=null!==(h=null===(C=this._dataSource.slides)||void 0===C?void 0:C.length)&&void 0!==h?h:0;D<St;D++){var h,C,w;if((null!==(w=this._dataSource.slides)&&void 0!==w?w:[])[D].id==i){this._slideIdx=D;break}}else if(l&&l>=0&&l<(null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==o?o:0))this._slideIdx=null!=l?l:0;else{var z;this._slideIdx=0,null!==(z=this._dataSource.slides)&&void 0!==z&&z.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,E.rN)(),null!==(r=this.slide)&&void 0!==r&&null!==(r=r.svg)&&void 0!==r&&r.viewBox&&(At.screen.frameSize=this.slide.svg.viewBox),(0,Tt.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(y=null===(p=this._dataSource.slides)||void 0===p?void 0:p.length)&&void 0!==y?y:0,this.slide)}addSlide(){var i,l,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(l=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==l?l:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,l,o){var n,r,y,p,h;let C=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(z=>z.id==i);if(!o||!C||null!=C&&null!==(r=C.svg)&&void 0!==r&&r.nodes.filter(z=>!z.isdeleted).length)return this.insertSlide(i,l,o);let w=null!==(y=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(C))&&void 0!==y?y:0;null===(h=this._dataSource.slides)||void 0===h||h.splice(w,1,o),this._slideIdx=w,this.openSlide(void 0,this._slideIdx)}insertSlide(i,l,o){var n,r,y,p,h;let C=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(D=>D.id==i))&&void 0!==n?n:this._defaultSlide,w=(null!==(y=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(C))&&void 0!==y?y:0)+l;var z;o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(z=o.svg)&&void 0!==z&&z.viewBox||o.svg&&(o.svg.viewBox=At.screen.frameSize)):o=this._defaultSlide,null===(h=this._dataSource.slides)||void 0===h||h.splice(w,0,o),this._slideIdx=w,this.openSlide(void 0,this._slideIdx)}copySlide(i){var l,o,n,r,y,p,h;let C=null!==(l=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(D=>D.id==i))&&void 0!==l?l:this._defaultSlide,w=(null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.indexOf(C))&&void 0!==n?n:0)+1,z=Object.assign(JSON.parse(JSON.stringify(C)),{id:this.newSlideId,code:void 0,name:`${C.name} + (Copy)`});null===(y=this._dataSource.slides)||void 0===y||y.splice(w,0,z),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(h=this._dataSource.slides)||void 0===h?void 0:h.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,l){var o,n,r,y,p,h;let C=null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(z=>z.id==i))&&void 0!==o?o:this._defaultSlide,w=null!==(r=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(C))&&void 0!==r?r:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(w+l,0,null===(h=this._dataSource.slides)||void 0===h?void 0:h.splice(w,1)[0])}deleteSlide(i){var l,o,n,r,y,p;let h=null!==(l=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(D=>D.id==i))&&void 0!==l?l:this._defaultSlide,C=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.indexOf(h))&&void 0!==n?n:0;if(null===(y=this._dataSource.slides)||void 0===y||y.splice(C,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(C<this._slideIdx){var w,z;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(w=null===(z=this._dataSource.slides)||void 0===z?void 0:z.length)&&void 0!==w?w:0,this.slide)}else C==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var l,o,n,r,y;let p=null!==(l=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(C=>C.id==i))&&void 0!==l?l:this._defaultSlide,h=null!==(n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.indexOf(p))&&void 0!==n?n:0;if(p.isdeleted=!0,null!==(y=this._dataSource.slides)&&void 0!==y&&null!==(y=y.filter(C=>!C.isdeleted))&&void 0!==y&&y.length){let C=!0;for(;p.isdeleted;)C?h++:h--,this._dataSource.slides[h]?p=this._dataSource.slides[h]:C=!C;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,l,o,n){this._fnChangeSlides.forEach(r=>r(i,l,o,n))}set node(i){var l,o;let n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find((r,y)=>y==this._slideIdx);null!=n&&null!==(o=n.svg)&&void 0!==o&&o.nodes&&n.svg.nodes.push(i),At.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Tt.t)(n),(0,Tt.t)(n,null==n?void 0:n.id)}findNode(i){var l;let o=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find((D,St)=>St==this._slideIdx),n=null==o?void 0:o.svg,r=(D,St)=>{let bt=null==D?void 0:D.find(ee=>ee.id==i);if(bt)return bt.pid=St,bt;let Pt=0,Ft=D.length||0;for(;Pt<Ft&&!bt&&(bt=r(D[Pt].nodes||[],D[Pt].id),!bt);)Pt++;return bt},y=r((null==n?void 0:n.nodes)||[]);var p,h,C,w,z;return y?(y.style=null!==(p=y.style)&&void 0!==p?p:{},y.source=null!==(h=y.source)&&void 0!==h?h:{},y.animate=null!==(C=y.animate)&&void 0!==C?C:{},y.interactive=null!==(w=y.interactive)&&void 0!==w?w:{},y.variable=null!==(z=y.variable)&&void 0!==z?z:{},y):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var l;let o=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find((p,h)=>h==this._slideIdx),n=null==o?void 0:o.svg,y=p=>{let h=(null==p?void 0:p.find(bt=>bt.id==i))||(p=>{let h=null,C=0,w=p.length||0;for(;C<w&&!h;){if(h=y(p[C].nodes),h){h.pid=p[C].id;break}C++}var z,D,St,bt,Pt;return h&&(h.style=null!==(z=h.style)&&void 0!==z?z:{},h.source=null!==(D=h.source)&&void 0!==D?D:{},h.animate=null!==(St=h.animate)&&void 0!==St?St:{},h.interactive=null!==(bt=h.interactive)&&void 0!==bt?bt:{},h.variable=null!==(Pt=h.variable)&&void 0!==Pt?Pt:{}),h})((null==p?void 0:p.filter(bt=>bt.type==x.h.GROUP))||[]);var C,w,z,D,St;return h&&(h.style=null!==(C=h.style)&&void 0!==C?C:{},h.source=null!==(w=h.source)&&void 0!==w?w:{},h.animate=null!==(z=h.animate)&&void 0!==z?z:{},h.interactive=null!==(D=h.interactive)&&void 0!==D?D:{},h.variable=null!==(St=h.variable)&&void 0!==St?St:{}),h};return y((null==n?void 0:n.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,l,o,n,r){var y;let p=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((w,z)=>z==this._slideIdx),h=null==p?void 0:p.svg,C=w=>{let z=[];return w.filter(D=>!D.isdeleted).forEach(D=>{D.type==x.h.GROUP?z=z.concat(C(D.nodes||[])):i>D.size.x||l>D.size.y||o<D.size.x+D.size.width||n<D.size.y+D.size.height||(r?D.type==r&&z.push(D.id):z.push(D.id))}),z};return C((null==h?void 0:h.nodes)||[])}getNodeOnArea(i,l,o,n,r){var y;let p=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((w,z)=>z==this._slideIdx),h=null==p?void 0:p.svg,C=w=>{let z=[];return w.filter(D=>!D.isdeleted).forEach(D=>{D.type==x.h.GROUP?z=z.concat(C(D.nodes||[])):D.size.x+D.size.width<i||D.size.y+D.size.height<l||D.size.x>o||D.size.y>n||(r?D.type==r&&z.push(D.id):z.push(D.id))}),z};return C((null==h?void 0:h.nodes)||[])}deleteNode(i,l){var o;return this.getNode(i).isdeleted=null==l||l,(0,Tt.t)(this.slide),(0,Tt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var l,o;let n=this.getNode(i),r=Math.ceil(1e9*Math.random());return null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l||l.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:r})),Object.assign(n,{isdeleted:!0}),(0,Tt.t)(this.slide),(0,Tt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),r}addGroup(i,l){var o;let n=this.getNode(i),r=this.getNode(l);r.nodes=r.nodes||[];let y=Math.ceil(1e9*Math.random());return r.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:y})),Object.assign(n,{isdeleted:!0}),(0,Tt.t)(this.slide),(0,Tt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),y}setNodeP(i,l){var o;let n=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(r=>r.id==i);n&&(n.pid=l||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,l){var o,n,r,y,p,h;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((w,z)=>{w.index=z+1});let C=(null!==(n=null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r?void 0:r.nodes.length)&&void 0!==n?n:0)+1;i.map(w=>{var z,D;return{id:w,index:null!==(z=null===(D=this.slide)||void 0===D||null===(D=D.svg)||void 0===D||null===(D=D.nodes.find(St=>St.id==w))||void 0===D?void 0:D.index)&&void 0!==z?z:0}}).sort((w,z)=>w.index-z.index).forEach(w=>{var D,z;l?null===(D=this.slide)||void 0===D||null===(D=D.svg)||void 0===D||D.nodes.filter((St,bt)=>St.id==w.id).forEach(St=>{St.index=l+w.index+w.index/1e3}):null===(z=this.slide)||void 0===z||null===(z=z.svg)||void 0===z||z.nodes.filter(St=>St.id==w.id).forEach(St=>{St.index=C+w.index})}),null===(y=this.slide)||void 0===y||null===(y=y.svg)||void 0===y||y.nodes.sort((w,z)=>{var D,St;return(null!==(D=w.index)&&void 0!==D?D:0)-(null!==(St=z.index)&&void 0!==St?St:0)}),(0,Tt.$)(this.slide),null===(p=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===p||p.remove(),null===(h=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===h||h.remove(),(0,k.D)(At.dataSelect.nodes)}sendToBackStep(i,l){var o,n,r,y;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((p,h)=>{p.index=h+1}),i.map(p=>{var h,C;return{id:p,index:null!==(h=null===(C=this.slide)||void 0===C||null===(C=C.svg)||void 0===C||null===(C=C.nodes.find(w=>w.id==p))||void 0===C?void 0:C.index)&&void 0!==h?h:0}}).sort((p,h)=>p.index-h.index).forEach(p=>{var C,h;l?null===(C=this.slide)||void 0===C||null===(C=C.svg)||void 0===C||C.nodes.filter(w=>w.id==p.id).forEach(w=>{w.index=l+p.index+p.index/1e3}):null===(h=this.slide)||void 0===h||null===(h=h.svg)||void 0===h||h.nodes.filter(w=>w.id==p.id).forEach(w=>{w.index=p.index/100-1})}),null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.sort((p,h)=>{var C,w;return(null!==(C=p.index)&&void 0!==C?C:0)-(null!==(w=h.index)&&void 0!==w?w:0)}),(0,Tt.$)(this.slide),null===(r=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(y=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===y||y.remove(),(0,k.D)(At.dataSelect.nodes)}bringToFrontArea(i){var l,o,n,r;let y=i.map(bt=>At.data.getNode(bt)).filter(bt=>!bt.isfake),{x1:p,y1:h,x2:C,y2:w}=Yt(y),z=this.getNodeOnArea(p,h,C,w);null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l||l.nodes.forEach((bt,Pt)=>{bt.index=Pt+1});let D=z.map(bt=>{var Pt,Ft;return null!==(Pt=null===(Ft=this.slide)||void 0===Ft||null===(Ft=Ft.svg)||void 0===Ft||null===(Ft=Ft.nodes.find(ee=>ee.id==bt))||void 0===Ft?void 0:Ft.index)&&void 0!==Pt?Pt:0}),St=Math.max.apply(null,D);i.forEach((bt,Pt)=>{var Ft;null===(Ft=this.slide)||void 0===Ft||null===(Ft=Ft.svg)||void 0===Ft||Ft.nodes.filter(ee=>ee.id==bt).forEach(ee=>{ee.index=St+(Pt+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((bt,Pt)=>{var Ft,ee;return(null!==(Ft=bt.index)&&void 0!==Ft?Ft:0)-(null!==(ee=Pt.index)&&void 0!==ee?ee:0)}),(0,Tt.$)(this.slide),null===(n=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===r||r.remove(),(0,k.D)(At.dataSelect.nodes)}sendToBackArea(i){var l,o,n,r;let y=i.map(bt=>At.data.getNode(bt)).filter(bt=>!bt.isfake),{x1:p,y1:h,x2:C,y2:w}=Yt(y),z=this.getNodeOnArea(p,h,C,w);null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l||l.nodes.forEach((bt,Pt)=>{bt.index=Pt+1});let D=z.map(bt=>{var Pt,Ft;return null!==(Pt=null===(Ft=this.slide)||void 0===Ft||null===(Ft=Ft.svg)||void 0===Ft||null===(Ft=Ft.nodes.find(ee=>ee.id==bt))||void 0===Ft?void 0:Ft.index)&&void 0!==Pt?Pt:0}),St=Math.min.apply(null,D)-1;i.forEach((bt,Pt)=>{var Ft;null===(Ft=this.slide)||void 0===Ft||null===(Ft=Ft.svg)||void 0===Ft||Ft.nodes.filter(ee=>ee.id==bt).forEach(ee=>{ee.index=St+(Pt+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((bt,Pt)=>{var Ft,ee;return(null!==(Ft=bt.index)&&void 0!==Ft?Ft:0)-(null!==(ee=Pt.index)&&void 0!==ee?ee:0)}),(0,Tt.$)(this.slide),null===(n=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(r=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===r||r.remove(),(0,k.D)(At.dataSelect.nodes)}}const Yt=B=>{let i=999999,l=999999,o=-999999,n=-999999;return B.forEach(r=>{i=Math.min(i,r.size.x),l=Math.min(l,r.size.y),o=Math.max(o,r.size.x+r.size.width),n=Math.max(n,r.size.y+r.size.height)}),{x1:i,y1:l,x2:o,y2:n}};class le{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(l){switch(l.type){case"add":At.data.deleteNode(l.from.id);break;case"edit":break;case"delete":At.data.deleteNode(l.from.id,!1);break;case"size":{let{id:o,type:n,size:r,attribute:y}=At.data.getNode(l.from.id);Object.assign(r,l.from.size),Object.assign(y,(0,j.xW)(n,r,y)),(0,E.tD)(window.document.getElementById(o),y);break}case"attribute":{let{id:o,attribute:n}=At.data.getNode(l.from.id);Object.assign(n,l.from.attribute),(0,E.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=At.data.getNode(l.from.id);Object.assign(null!=n?n:{},l.from.style),(0,E.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:r}=At.data.getNode(l.from.id);Object.assign(null!=r?r:{},l.from.source),(0,E.KG)(window.document.getElementById(o),n,null!=r?r:{});break}case"animate":{let{animate:o}=At.data.getNode(l.from.id);Object.assign(null!=o?o:{},l.from.animate);break}case"interactive":{let{interactive:o}=At.data.getNode(l.from.id);Object.assign(null!=o?o:{},l.from.interactive);break}case"variable":{let{variable:o}=At.data.getNode(l.from.id);Object.assign(null!=o?o:{},l.from.variable);break}}}),At.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(l){switch(l.type){case"add":At.data.deleteNode(l.to.id,!1);break;case"edit":break;case"delete":At.data.deleteNode(l.to.id,!0);break;case"size":{let{id:o,type:n,size:r,attribute:y}=At.data.getNode(l.to.id);Object.assign(r,l.to.size),Object.assign(y,(0,j.xW)(n,r,y)),(0,E.tD)(window.document.getElementById(o),y);break}case"attribute":{let{id:o,attribute:n}=At.data.getNode(l.to.id);Object.assign(n,l.to.attribute),(0,E.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=At.data.getNode(l.to.id);Object.assign(null!=n?n:{},l.to.style),(0,E.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:r}=At.data.getNode(l.to.id);Object.assign(null!=r?r:{},l.to.source),(0,E.KG)(window.document.getElementById(o),n,null!=r?r:{});break}case"animate":{let{animate:o}=At.data.getNode(l.to.id);Object.assign(null!=o?o:{},l.to.animate);break}case"interactive":{let{interactive:o}=At.data.getNode(l.to.id);Object.assign(null!=o?o:{},l.to.interactive);break}case"variable":{let{variable:o}=At.data.getNode(l.to.id);Object.assign(null!=o?o:{},l.to.variable);break}}}),At.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class re{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var l,o;this._frameSize.width=null!==(l=null==i?void 0:i.width)&&void 0!==l?l:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,l,o){var n;if(!(i<.01||i>100)){if(l=null!==(n=l)&&void 0!==n?n:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-l.x,this._dislocation.y=this._height/i/2-l.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var r={x:Math.max(0,Math.min((0,v.z)(l.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,v.z)(l.y/this._height,1e3),1))},y={x:(this._width/i-this._width/this._scale)*r.x,y:(this._height/i-this._height/this._scale)*r.y};this._dislocation.x+=y.x,this._dislocation.y+=y.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}zoomIn(){this.scaleTo(this._scale+.04*this._scale)}zoomOut(){this.scaleTo(this._scale-.04*this._scale)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,l){this._dislocation.x=i.x+l.x/this._scale,this._dislocation.y=i.y+l.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,E.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(l=>l(i))}}var ae=f(6195);class pe{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,ae.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,ae._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(l=>l(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(l=>l(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(l=>l(i)),this.saveConfig()}}var _e=f(5619),Se=f(334),be=f(3591),ve=function(B){return B&&JSON.parse(JSON.stringify(B))},Me=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Fe=[],Ve={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},Ue={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class We{constructor(){this._data_variables=ve(Me).concat(ve(Fe)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(l=>{l(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(l=>{l(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var l of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))l.if&&l.if.length>0&&(this.checkValueConditions(l.if)?this.setValueOperators(l.then||[]):this.setValueOperators(l.else||[]))}}renew(){this._data_variables=ve(Me).concat(ve(Fe)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let l={};"string"==typeof i?l=JSON.parse(i):"object"==typeof i&&(l=i),this._data_variables=l.variables||[],this._data_conditions=l.conditions||(o=>(this._data_variables.map(n=>n.change||[]).forEach(n=>{o=o.concat(n)}),o))([]),Me.forEach(o=>{var n=this._data_variables.filter(r=>r.key==o.key);n.length?n.forEach(function(r,y,p){r.type=o.type,r.readonly=o.readonly,r.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return ve(Ve)}getConditionTemp(){return ve(Ue)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,l){return i.localeCompare(l)})}getVariableAll(){return this._data_variables.length?ve((B=this._data_variables,i="key",function(l){for(var o of B.map(function(n){return n[i]}).sort())B.filter(function(n){return n[i]==o}).forEach(function(n){l.push(n)}),B=B.filter(function(n){return n[i]!=o});return l}([]))):ve(Me).concat(ve(Fe));var B,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Me.forEach(l=>{var o=this._data_variables.filter(n=>n.key==l.key);o.length?o.forEach((n,r,y)=>{n.type=l.type,n.readonly=l.readonly,n.system=l.system}):this._data_variables.push(l)}))}getVariable(i){return i?ve(this._data_variables.filter(l=>l.key==i)[0]||{}):{}}setVariable(i,l,o){if(i){switch([null,void 0,NaN,1/0].indexOf(l)>=0&&(l=""),o||(o=(this._data_variables.filter(r=>r.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof l&&(l=l.toString().trim());break;case"number":"number"!=typeof l&&(l=parseFloat(l)||0);break;case"boolean":"string"==typeof l&&(l=l.toLowerCase()),"boolean"!=typeof l&&(l="1"==l||"true"==l||"yes"==l||"dung"==l)}var n=this._data_variables.filter(r=>r.key==i);n.length?n.forEach(function(r,y,p){r.value=l,r.type=o}):this._data_variables.push({key:i,value:l,type:o})}}getValue(i,l){if(!i)return"";var o=this._data_variables.filter(function(y){return y.key==i});if(o.length){var r,n=o[0]||{};switch(this.OnGetActionExecuting(n),l||(l=n.type||null),l){case"string":r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":"string"==typeof n.value?n.value||"":n.value.toString().trim();break;case"number":r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?0:"number"==typeof n.value?n.value||0:parseFloat(n.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(n.value)>=0?r=!1:"boolean"==typeof n.value?r=n.value:(r=(n.value+"").toLowerCase(),r="1"==n.value||"true"==n.value||"yes"==n.value||"dung"==n.value);break;case"audio-src":r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></audio>`:"";break;case"video-src":r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></video>`:"";break;case"img-src":r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<img style="width:100%;vertical-align:middle;" src="${n.value}"/>`:"";break;default:r=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value}return this.OnGetActionExecuted(n),r}return null}setValue(i,l,o){if(i){switch([null,void 0,NaN,1/0].indexOf(l)>=0&&(l=""),o||(o=(this._data_variables.filter(function(y){return y.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof l&&(l=l.toString().trim());break;case"number":"number"!=typeof l&&(l=parseFloat(l)||0);break;case"boolean":"string"==typeof l&&(l=l.toLowerCase()),"boolean"!=typeof l&&(l="1"==l||"true"==l||"yes"==l||"dung"==l)}var n=this._data_variables.filter(function(y){return y.key==i});if(n.length){var r=n[0];this.OnSetActionExecuting(r),r&&(r.value=l),this.OnSetActionExecuted(r)}}}getConditionAll(){return ve(this._data_conditions.sort(function(i,l){return i.idx-l.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?ve(this._data_conditions.filter(l=>l.variable==i||(l.variables||[]).indexOf(i)>=0).sort(function(l,o){return l.idx-o.idx})):{}}switchCondition(i,l,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof l&&(l=l.toLowerCase().trim()),o.split(";").map(function(n){return l==n.trim()?1:0}).reduce(function(n,r){return n+r})>0):l==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof l&&(l=l.toLowerCase().trim()),0==o.split(";").map(function(n){return l==n.trim()?1:0}).reduce(function(n,r){return n+r})):l!=o;case">=":return l>=o;case"<=":return l<=o;case">":return l>o;case"<":return l<o;case"\u2208":return o=(o+"").toLowerCase().trim(),l=(l+"").toLowerCase().trim(),o.split(";").map(function(n){return l.indexOf(n.trim())>=0?1:0}).reduce(function(n,r){return n+r})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),l=(l+"").toLowerCase().trim(),0==o.split(";").map(function(n){return l.indexOf(n.trim())>=0?1:0}).reduce(function(n,r){return n+r});default:return!1}}switchOperator(i,l,o){switch(i){case"+":return l+o;case"-":return l-o;case"*":return l*o;case"/":return l/o;case"=":return o;case"=!":return!o;case"==":return l==o;case"!=":return l!=o}}switchFormula(i,l){switch(i){case"sum":return l.reduce(function(n,r){return n+r});case"sub":return l.reduce(function(n,r){return n-r});case"pro":return l.reduce(function(n,r){return n*r});case"div":return l.reduce(function(n,r){return n/r});case"avg":var o=l.reduce(function(n,r){return n+r})/(l.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,l);case"max":return Math.max.apply(null,l);case"and":return l.reduce(function(n,r){return n&&r});case"or":return l.reduce(function(n,r){return n||r});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var l=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),l)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(l=>{switch(l.type){case"variable":return this.switchValueType_Condition(l)?0:1;case"variables":return 0==l.variables.map(o=>this.switchValueType_Condition(Object.assign(ve(l),{variable:o}))?0:1).reduce(function(o,n){return o+n})?0:1;default:return 0}}).reduce((l,o)=>(null!=l?l:0)+(null!=o?o:0))}setValueOperators(i){for(var l of i)switch(l.type){case"variable":this.setValue(l.variable,this.getValueOperator(l));break;case"variables":for(var o of l.variables)this.setValue(o,this.getValueOperator(Object.assign(ve(l),{variable:o})));break;case"slide":_e.J.runSlide(void 0,void 0,l.slide);break;case"node":{var n;(0,be.GD)({id:l.node,nodeStatus:_e.J.nodeStatus,slideStatus:_e.J.slideStatus});let r=_e.J.findNode(l.node);null!=r&&null!==(n=r.interactive)&&void 0!==n&&n.click&&(0,Se.J)(r,_e.J.nodeStatus,_e.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(l=>{l(i)})}}class Ge{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,l,o){if(this._pointer_type=i,l)switch(i){case T.P.PEN:this._pen_type=l;break;case T.P.SHAPE:this._shape_type=l,o&&l===x.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case T.P.PEN:this._pen_type||(this._pen_type=Q.F.DRAW);break;case T.P.SHAPE:this._shape_type||(this._shape_type=x.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,l,o){this._fnChangePointerTypes.forEach(n=>n(i,l,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,l,o){this._fnChangePointerTypeTemps.forEach(n=>n(i,l,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,l,o){this._fnChangePenTypes.forEach(n=>n(i,l,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,l,o){this._fnChangeShapeTypes.forEach(n=>n(i,l,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,l,o){this._fnChangePolygonTypes.forEach(n=>n(i,l,o))}set onchange(i){this._fnChanges.push(i)}change(i,l,o){this._fnChanges.forEach(n=>n(i,l,o))}}const At=new class Ye{constructor(){this._container="",this._svg="",this._screen=re.prototype,this._data=Qt.prototype,this._dataSelect=Lt.prototype,this._slide=kt.prototype,this._history=le.prototype,this._attribute=pe.prototype,this._pointer=Ge.prototype,this._variable=We.prototype,this._data=new Qt,this._dataSelect=new Lt,this._slide=new kt,this._history=new le,this._attribute=new pe,this._pointer=new Ge,this._variable=new We,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,variable:this._variable.get,resources:this._data.getResource,fonts:this._data.getFonts,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,l,o,n,r;this._screen.screen=(i=jQuery(this._container).offset(),l=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(n=null==i?void 0:i.left)&&void 0!==n?n:0,y:null!==(r=null==i?void 0:i.top)&&void 0!==r?r:0},width:null!=l?l:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new re,(B=>{new E.cR(B.container,B.target);var i=(n,r,y,p)=>{switch(n){case T.P.POINTER:jQuery(B.target).css({cursor:"auto"});break;case T.P.HAND:p?jQuery(B.target).css({cursor:"grabbing"}):jQuery(B.target).css({cursor:"grab"});break;case T.P.PEN:switch(r){case Q.F.DRAW:jQuery(B.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case Q.F.HIGHTLIGH:jQuery(B.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case T.P.ERASER:jQuery(B.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case T.P.SHAPE:jQuery(B.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case T.P.TEXT:case T.P.FOREIGNOBJECT:jQuery(B.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};At.pointer.onchange=(n,r,y)=>{i(n,r)},jQuery(B.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",n=>{i(At.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",n=>{i(At.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",n=>{n.ctrlKey&&n.preventDefault()},{passive:!1}),jQuery(B.container).off("wheel.icdt-init").on("wheel.icdt-init",n=>{var r;n.preventDefault();let y=null!==(r=n.originalEvent)&&void 0!==r?r:n;if(!y.deltaX&&y.deltaY!=Math.floor(y.deltaY)||y.ctrlKey){var p=At.screen.scale;At.screen.scaleTo(p-.04*p*(y.deltaY>0?1:-1),(0,it.D)({x:n.clientX,y:n.clientY},1,{x:0,y:0},At.screen.offset))}else At.screen.move(At.screen.dislocation,{x:-y.deltaX,y:-y.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{At.screen.actived=!!jQuery(n.target).parents(At.container).length}),jQuery(B.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",n=>{}),jQuery(B.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",n=>{At.pointer.pointer_type_temp==T.P.HAND&&(At.pointer.pointer_type_temp=T.P.POINTER)}),jQuery(B.container).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{0==n.button&&(B.container.includes("#")&&B.container.includes(n.target.getAttribute("id"))||B.container.includes(".")&&B.container.includes(n.target.getAttribute("class"))||B.container.includes(n.target.nodeName))&&(At.pointer.pointer_type_temp||At.pointer.pointer_type)===T.P.POINTER&&(At.dataSelect.ids=[])}),jQuery(B.container).off("touchmove.icdt-init").on("touchmove.icdt-init",n=>{n.preventDefault()});const l=n=>{switch(At.pointer.pointer_type_temp||At.pointer.pointer_type){case T.P.POINTER:U(n);break;case T.P.HAND:(B=>{(0,vt.I)(B,new W,1,{x:0,y:0})})(n);break;case T.P.PEN:(0,wt.u)(n);break;case T.P.SHAPE:(B=>{var i=null;switch(At.pointer.shape_type){case x.h.CIRCLE:i=new m;break;case x.h.ELLIPSE:i=new X;break;case x.h.LINE:i=new O;break;case x.h.RECT:i=new F;break;case x.h.POLYGON:var l;i=new ot(null===(l=tt.find(o=>o.type==At.pointer.polygon_type))||void 0===l?void 0:l.ratios);break;case x.h.FOREIGNOBJECT:i=new xt;break;case x.h.IMAGE:i=new ce;break;case x.h.TEXT:case x.h.PATH:i=new It}i&&(0,vt.I)(B,i)})(n);break;case T.P.FOREIGNOBJECT:(B=>{(0,vt.I)(B,new xt)})(n);break;case T.P.IMAGE:(B=>{(0,vt.I)(B,new ce)})(n);break;case T.P.TEXT:(B=>{(0,vt.I)(B,new K)})(n);break;case T.P.ERASER:(B=>{(0,vt.I)(B,new qt)})(n);break;case T.P.INDEX:(0,_.h)(n)}};let o=!1;jQuery(B.target).off("touchstart.icdt-init").on("touchstart.icdt-init",n=>{o=!0,l({touchEvent:n})}),jQuery(B.target).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{if(1!=n.button){if(o)return void(o=!1);l({mouseEvent:n})}}),B.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",n=>{At.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Mt.K)(n))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",n=>{At.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Mt.K)(n))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(he,Bt,f)=>{f.d(Bt,{h:()=>R,y:()=>S});var T=f(7873),E=f(6611),rt=f(9506),j=f(1308),vt=f(5970);const R=W=>{var x,et,tt,mt;let v=(null===(x=W.mouseEvent)||void 0===x?void 0:x.target)||(null===(et=W.touchEvent)||void 0===et?void 0:et.target),m=(null==v?void 0:v.getAttribute("id"))||"",M=null==v?void 0:v.nodeName,X=jQuery(v).parents("g[id]").attr("id")||"";if(![T.F.INDEX_GROUP].includes(X))if(null!==(tt=W.mouseEvent)&&void 0!==tt&&tt.altKey||null!==(mt=W.touchEvent)&&void 0!==mt&&mt.altKey||!m||m.match(/[^0-9]/)||!E.L.dataSelect.nodeName.includes(M)){var lt;E.L.dataSelect.ids.length&&(E.L.dataSelect.ids=[]),(0==(null===(lt=W.mouseEvent)||void 0===lt?void 0:lt.button)||W.touchEvent)&&((W,x)=>{let m=(0,vt.RY)(T.F.SCAN_GROUP,"g"),M=(0,rt.CE)(0,0,1,1);(0,vt.xJ)(m,M),((W,x,et,tt)=>{(0,j.I)(W,{start:m=>{},move:(m,M)=>{((m,M,X,lt)=>{x=(0,rt.CE)(m,M,X,lt),(0,vt.xJ)(et,x)})(M[0][0],M[0][1],m.x,m.y)},end:(m,M)=>{null==et||et.remove(),E.L.dataSelect.ids=E.L.data.getNodeInArea(Math.min(M[0][0],m.x),Math.min(M[0][1],m.y),Math.max(M[0][0],m.x),Math.max(M[0][1],m.y)),tt(E.L.dataSelect.nodes)}})})(W,M,m,x)})(W,U)}else{var F,J;let ot=parseFloat(m||"0");E.L.dataSelect.ids=null!==(F=W.mouseEvent)&&void 0!==F&&F.shiftKey||null!==(J=W.touchEvent)&&void 0!==J&&J.shiftKey?[ot].concat(E.L.dataSelect.ids).filter((O,gt,jt)=>jt.indexOf(O)==gt):[ot],U(E.L.dataSelect.nodes)}},U=W=>{var x,et;let tt=1;var mt,v;if(W.length&&(tt=Math.max.apply(null,null!==(mt=null===(v=E.L.data.slide)||void 0===v||null===(v=v.svg)||void 0===v?void 0:v.nodes.map(M=>{var X;return null!==(X=M.idx)&&void 0!==X?X:0}))&&void 0!==mt?mt:[0])+1),1==W.length)W[0].idx||(W[0].idx=tt,W[0].time=0);else if(W.length>=0){let M=W.map(lt=>{var F;return null!==(F=lt.idx)&&void 0!==F?F:0}).filter(lt=>lt>0),X=M.length?Math.min.apply(null,M):tt;W.forEach(lt=>{var F;lt.idx=X,lt.time=null!==(F=lt.time)&&void 0!==F?F:0})}let m=(0,vt.RY)(T.F.INDEX_GROUP,"g");(0,vt.IA)(m,null!==(x=null===(et=E.L.data.slide)||void 0===et||null===(et=et.svg)||void 0===et?void 0:et.nodes)&&void 0!==x?x:[])},S=W=>{var x,et,tt;null!=W&&null!==(x=W.svg)&&void 0!==x&&x.nodes&&W.svg.nodes.forEach(v=>{v.idx=0,v.time=null});let mt=(0,vt.RY)(T.F.INDEX_GROUP,"g");(0,vt.IA)(mt,null!==(et=null===(tt=E.L.data.slide)||void 0===tt||null===(tt=tt.svg)||void 0===tt?void 0:tt.nodes)&&void 0!==et?et:[])}},7135:(he,Bt,f)=>{f.d(Bt,{K:()=>x,X:()=>W});var T=f(6195),E=f(1477),rt=f(3603),j=f(6611),vt=f(1026),k=f(9841),c=f(2492),R=f(6752),U=f(5483);const W=new class S{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:E.r.Escape,fn:()=>{j.L.dataSelect.ids.length&&(j.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:E.r.Delete,fn:()=>{j.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:E.r.Space,fn:()=>{j.L.pointer.pointer_type_temp=rt.P.HAND}},this.onchange={type:"keyup",key:E.r.Space,fn:()=>{j.L.pointer.pointer_type_temp=rt.P.POINTER}},this.onchange={type:"keydown",key:E.r.ArrowLeft,fn:()=>{j.L.dataSelect.ids.length||j.L.data.backSlide()}},this.onchange={type:"keydown",key:E.r.ArrowRight,fn:()=>{j.L.dataSelect.ids.length||j.L.data.nextSlide()}},this.onchange={type:"keydown",key:E.r.PageDown,fn:()=>{j.L.dataSelect.ids.length||j.L.data.backSlide()}},this.onchange={type:"keydown",key:E.r.PageUp,fn:()=>{j.L.dataSelect.ids.length||j.L.data.nextSlide()}},this.onchange={type:"keydown",key:E.r.ArrowLeft,fn:()=>{j.L.dataSelect.ids.length&&(j.L.dataSelect.nodes.forEach(tt=>{(0,R.ei)(tt,(0,c.z)(tt.size.x-(0,k.$)(1)))}),(0,U.D)(j.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowRight,fn:()=>{j.L.dataSelect.ids.length&&(j.L.dataSelect.nodes.forEach(tt=>{(0,R.ei)(tt,(0,c.z)(tt.size.x+(0,k.$)(1)))}),(0,U.D)(j.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowUp,fn:()=>{j.L.dataSelect.ids.length&&(j.L.dataSelect.nodes.forEach(tt=>{(0,R.ZF)(tt,(0,c.z)(tt.size.y-(0,k.$)(1)))}),(0,U.D)(j.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowDown,fn:()=>{j.L.dataSelect.ids.length&&(j.L.dataSelect.nodes.forEach(tt=>{(0,R.ZF)(tt,(0,c.z)(tt.size.y+(0,k.$)(1)))}),(0,U.D)(j.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.Digit1,fn:tt=>{tt.shiftKey&&(j.L.reloadView(),j.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:E.r.Digit0,fn:tt=>{tt.ctrlKey&&(j.L.screen.zoomTo=100)}},this.onchange={type:"keydown",key:E.r.Equal,fn:tt=>{tt.ctrlKey&&j.L.screen.zoomIn()}},this.onchange={type:"keydown",key:E.r.Minus,fn:tt=>{tt.ctrlKey&&j.L.screen.zoomOut()}},this.onchange={type:"keydown",key:E.r.KeyA,fn:tt=>{tt.ctrlKey&&(j.L.dataSelect.ids=j.L.data.getNodeAll(),(0,U.D)(j.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.KeyC,fn:tt=>{if(tt.ctrlKey){let mt=j.L.dataSelect.nodes;mt&&(0,T.IB)({params:{type:"nodes",nodes:mt}})}}},this.onchange={type:"keydown",key:E.r.KeyV,fn:tt=>{tt.ctrlKey&&(0,T.A9)({callback:mt=>{var v,m;"nodes"==(null==mt?void 0:mt.type)&&null!=mt&&null!==(v=mt.nodes)&&void 0!==v&&v.length&&(null==mt||null===(m=mt.nodes)||void 0===m||m.forEach(M=>{tt.shiftKey||j.L.data.findNode(M.id).id&&(M.size.x+=16,M.size.y+=16),M.id=Math.ceil(1e9*Math.random()),j.L.data.node=M}),(0,vt.t)(j.L.data.slide))}})}},this.onchange={type:"keydown",key:E.r.KeyZ,fn:tt=>{tt.ctrlKey&&tt.shiftKey?j.L.history.redo():tt.ctrlKey&&j.L.history.undo()}},this.onchange={type:"keydown",key:E.r.BracketLeft,fn:tt=>{tt.ctrlKey&&tt.shiftKey?j.L.data.sendToBack(j.L.dataSelect.ids):tt.ctrlKey?j.L.data.sendToBackStep(j.L.dataSelect.ids,-2):j.L.data.sendToBackArea(j.L.dataSelect.ids)}},this.onchange={type:"keydown",key:E.r.BracketRight,fn:tt=>{tt.ctrlKey&&tt.shiftKey?j.L.data.bringToFront(j.L.dataSelect.ids):tt.ctrlKey?j.L.data.bringToFrontStep(j.L.dataSelect.ids,1):j.L.data.bringToFrontArea(j.L.dataSelect.ids)}}}set onchange(tt){let mt=this._fnChanges.find(v=>v.eventType==tt.type&&v.eventKey==tt.key);mt?mt.fns.push(tt.fn):this._fnChanges.push({eventType:tt.type,eventKey:tt.key,fns:[tt.fn]})}change(tt,mt,v){var m;null===(m=this._fnChanges.find(M=>M.eventType==tt&&M.eventKey==mt))||void 0===m||m.fns.forEach(M=>M(v))}},x=et=>{W.change(et.type,et.keyCode||et.which||et.charCode||0,et)}},669:(he,Bt,f)=>{f.d(Bt,{O:()=>R});var T=f(6407),E=f(5970),rt=f(1131),j=f(9841),vt=f(7873),k=f(6611),c=f(1281);class R{constructor(S,W){var x,et;let tt={stroke:"#FF0000",strokeWidth:(0,j.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,j.$)(8)},{element:mt}=(0,T.X)(Math.ceil(1e9*Math.random()),{size:W});window.document.getElementById(vt.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(J=>null==J?void 0:J.remove()),window.document.getElementById(vt.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(J=>null==J?void 0:J.remove()),null===(x=window.document.getElementById(vt.F.INTERACTIVE_GROUP))||void 0===x||x.appendChild(mt);var M=J=>{if(!J.length)return;let ot=[];if(1==J.length){var G;let{size:O}=null!==(G=null!=S?S:k.L.dataSelect.nodes[0])&&void 0!==G?G:{};if(!O)return;ot=[[O.x+O.width/2,O.y+O.height/2],J[0]]}else ot=[...J];lt(ot),X(ot[0],"start"),X(ot[ot.length-1],"end")},X=(J,ot)=>{J&&((G=>{let{element:O}=(0,c.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==ot?"#FF0000":"#00BA00",strokeWidth:(0,j.$)(1)},size:{x:J[0]-5,y:J[1]-5,width:10,height:10}});null===(G=window.document.getElementById(vt.F.INTERACTIVE_GROUP))||void 0===G||G.prepend(O)})(),((G,O)=>{let{size:gt}=null!==(G=null!=S?S:k.L.dataSelect.nodes[0])&&void 0!==G?G:{};if(!gt)return;let jt=[[J[0]-gt.width/2,J[1]-gt.height/2],[J[0]+gt.width/2,J[1]-gt.height/2],[J[0]+gt.width/2,J[1]+gt.height/2],[J[0]-gt.width/2,J[1]+gt.height/2],[J[0]-gt.width/2,J[1]-gt.height/2]],{element:It}=(0,T.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,j.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,j.$)(8)},size:{x:0,y:0,width:10,height:10,points:jt}});null===(O=window.document.getElementById(vt.F.INTERACTIVE_GROUP))||void 0===O||O.prepend(It)})())},lt=J=>{let G=rt.n8j().x(O=>O[0]).y(O=>O[1]).curve(rt.qrM)(J);mt.setAttribute("d",G)};(0,E.tD)(mt,tt),M(null!==(et=null==W?void 0:W.points)&&void 0!==et?et:[]);let F="";return{start:J=>{F=`M ${J.x} ${J.y} L ${J.x} ${J.y}`},move:(J,ot)=>{F+=` ${J.x} ${J.y}`,mt.setAttribute("d",F)},end:(J,ot)=>{M(ot),ot.length&&(window.interactivePoints=ot)}}}}},4979:(he,Bt,f)=>{f.d(Bt,{z:()=>tt,u:()=>et});var T=f(7873),E=f(2409),rt=f(6611),j=f(1308),vt=f(5970),k=f(1131),c=f(6407),R=f(1999),U=f(4896);class S{constructor(){let v={stroke:rt.L.attribute.stroke,strokeWidth:rt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:m,element:M,attribute:X,size:lt}=(0,c.X)(Math.ceil(1e9*Math.random()),{attribute:v});(0,vt.tD)(M,X);let F="",J="";return{start:G=>{F=`M ${G.x} ${G.y} L ${G.x} ${G.y}`},move:(G,O)=>{((G,O)=>{F+=` ${G} ${O}`,M.setAttribute("d",F)})(G.x,G.y)},end:(G,O)=>{var gt;O.length>=3?(J=null!==(gt=k.n8j().x(q=>q[0]).y(q=>q[1]).curve(k.qrM)(O))&&void 0!==gt?gt:"",M.setAttribute("d",J)):M.setAttribute("d",F);let jt=(0,U.CS)(J||F),{minX:It,minY:Rt,maxX:xt,maxY:_t}=(0,U.lP)(jt);lt.x=It,lt.y=Rt,lt.width=xt-It||1,lt.height=_t-Rt||1,lt.ratioMaps=(0,U.nf)(lt,jt),rt.L.data.node=Object.assign({id:m,type:R.h.PATH,name:"Path"},{size:lt,attribute:X})}}}}class W{constructor(){let v={stroke:rt.L.attribute.stroke,strokeOpacity:.4,strokeWidth:rt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:m,element:M,attribute:X,size:lt}=(0,c.X)(Math.ceil(1e9*Math.random()),{attribute:v});(0,vt.tD)(M,X);let F="";return{start:G=>{F=`M ${G.x} ${G.y} L ${G.x} ${G.y}`},move:(G,O)=>{((G,O)=>{F+=` ${G} ${O}`,M.setAttribute("d",F)})(G.x,G.y)},end:(G,O)=>{let gt=(0,U.CS)(F),{minX:jt,minY:It,maxX:Rt,maxY:xt}=(0,U.lP)(gt);lt.x=jt,lt.y=It,lt.width=Rt-jt||1,lt.height=xt-It||1,lt.ratioMaps=(0,U.nf)(lt,gt),rt.L.data.node=Object.assign({id:m,type:R.h.PATH,name:"Path"},{size:lt,attribute:X})}}}}var x=f(669);const et=mt=>{switch(rt.L.pointer.pen_type){case E.F.DRAW:(0,j.I)(mt,new S);break;case E.F.HIGHTLIGH:(0,j.I)(mt,new W);break;case E.F.INTERACTIVE:tt(mt)}},tt=mt=>{var v,m;let M=(0,vt.RY)(T.F.INTERACTIVE_GROUP,"g"),X=null!==(v=null===(m=rt.L.data.slide)||void 0===m||null===(m=m.svg)||void 0===m?void 0:m.viewBox)&&void 0!==v?v:(()=>{let{width:lt,height:F}=rt.L.screen.get;return{x:0,y:0,width:lt,height:F}})();(0,vt.KP)(M,X),mt&&(0,j.I)(mt,new x.O)}},5483:(he,Bt,f)=>{f.d(Bt,{D:()=>v});var T=f(7873),E=f(6611),rt=f(9506),j=f(1308),vt=f(5970),k=f(2492);const U=(m,M,X,lt,F)=>{let{x:J,y:ot,width:G,height:O}=X;0==G&&(G=1),0==O&&(O=1);let gt=lt.map(q=>Object.assign({},q.size)),It=[],_t=!1;(0,j.I)(m,{start:q=>{lt.forEach(q=>{let{id:Mt,size:wt,attribute:ft}=q;It.push({id:Mt,type:"size",from:JSON.parse(JSON.stringify({id:Mt,size:wt,attribute:ft}))})})},move:(q,Mt)=>{((q,Mt,wt,ft)=>{let ut=wt-q,Gt=ft-Mt;(()=>{let A,P=(G||1)/(O||1);switch(M){case"rect-center":var d,b;A=null!==(d=m.mouseEvent)&&void 0!==d&&d.shiftKey||null!==(b=m.touchEvent)&&void 0!==b&&b.shiftKey?Math.abs(wt-q)>=Math.abs(ft-Mt)?{x:J+wt-q,y:ot,width:G,height:O}:{x:J,y:ot+ft-Mt,width:G,height:O}:{x:J+wt-q,y:ot+ft-Mt,width:G,height:O};break;case"rect-top-left":var H,Ct,Nt,Xt,Zt,Ht,zt,st;A=(null!==(H=m.mouseEvent)&&void 0!==H&&H.shiftKey||null!==(Ct=m.touchEvent)&&void 0!==Ct&&Ct.shiftKey)&&(null!==(Nt=m.mouseEvent)&&void 0!==Nt&&Nt.altKey||null!==(Xt=m.touchEvent)&&void 0!==Xt&&Xt.altKey)?P>=1?{x:J+(wt-q),y:ot+(wt-q)/P,width:G-2*(wt-q),height:O-2*(wt-q)/P}:{x:J+(ft-Mt)*P,y:ot+(ft-Mt),width:G-2*(ft-Mt)*P,height:O-2*(ft-Mt)}:null!==(Zt=m.mouseEvent)&&void 0!==Zt&&Zt.shiftKey||null!==(Ht=m.touchEvent)&&void 0!==Ht&&Ht.shiftKey?P>=1?{x:J+(wt-q),y:ot+(wt-q)/P,width:G-(wt-q),height:O-(wt-q)/P}:{x:J+(ft-Mt)*P,y:ot+(ft-Mt),width:G-(ft-Mt)*P,height:O-(ft-Mt)}:null!==(zt=m.mouseEvent)&&void 0!==zt&&zt.altKey||null!==(st=m.touchEvent)&&void 0!==st&&st.altKey?{x:J+(wt-q),y:ot+(ft-Mt),width:G-2*(wt-q),height:O-2*(ft-Mt)}:{x:J+(wt-q),y:ot+(ft-Mt),width:G-(wt-q),height:O-(ft-Mt)};break;case"rect-top-right":var qt,N,u,K,nt,at,V,_;A=(null!==(qt=m.mouseEvent)&&void 0!==qt&&qt.shiftKey||null!==(N=m.touchEvent)&&void 0!==N&&N.shiftKey)&&(null!==(u=m.mouseEvent)&&void 0!==u&&u.altKey||null!==(K=m.touchEvent)&&void 0!==K&&K.altKey)?P>=1?{x:J-(wt-q),y:ot-(wt-q)/P,width:G+2*(wt-q),height:O+2*(wt-q)/P}:{x:J+(ft-Mt)*P,y:ot+(ft-Mt),width:G-2*(ft-Mt)*P,height:O-2*(ft-Mt)}:null!==(nt=m.mouseEvent)&&void 0!==nt&&nt.shiftKey||null!==(at=m.touchEvent)&&void 0!==at&&at.shiftKey?P>=1?{x:J,y:ot-(wt-q)/P,width:G+(wt-q),height:O+(wt-q)/P}:{x:J,y:ot+(ft-Mt),width:G-(ft-Mt)*P,height:O-(ft-Mt)}:null!==(V=m.mouseEvent)&&void 0!==V&&V.altKey||null!==(_=m.touchEvent)&&void 0!==_&&_.altKey?{x:J-(wt-q),y:ot+(ft-Mt),width:G+2*(wt-q),height:O-2*(ft-Mt)}:{x:J,y:ot+(ft-Mt),width:G+(wt-q),height:O-(ft-Mt)};break;case"rect-bottom-left":var Q,it,yt,Ot,Lt,pt,dt,kt;A=(null!==(Q=m.mouseEvent)&&void 0!==Q&&Q.shiftKey||null!==(it=m.touchEvent)&&void 0!==it&&it.shiftKey)&&(null!==(yt=m.mouseEvent)&&void 0!==yt&&yt.altKey||null!==(Ot=m.touchEvent)&&void 0!==Ot&&Ot.altKey)?P>=1?{x:J+(wt-q),y:ot+(wt-q)/P,width:G-2*(wt-q),height:O-2*(wt-q)/P}:{x:J-(ft-Mt)*P,y:ot-(ft-Mt),width:G+2*(ft-Mt)*P,height:O+2*(ft-Mt)}:null!==(Lt=m.mouseEvent)&&void 0!==Lt&&Lt.shiftKey||null!==(pt=m.touchEvent)&&void 0!==pt&&pt.shiftKey?P>=1?{x:J+(wt-q),y:ot,width:G-(wt-q),height:O-(wt-q)/P}:{x:J-(ft-Mt)*P,y:ot,width:G+(ft-Mt)*P,height:O+(ft-Mt)}:null!==(dt=m.mouseEvent)&&void 0!==dt&&dt.altKey||null!==(kt=m.touchEvent)&&void 0!==kt&&kt.altKey?{x:J+(wt-q),y:ot-(ft-Mt),width:G-2*(wt-q),height:O+2*(ft-Mt)}:{x:J+(wt-q),y:ot,width:G-(wt-q),height:O+(ft-Mt)};break;case"rect-bottom-right":var Tt,Kt,Qt,Yt,le,re,ae,pe;A=(null!==(Tt=m.mouseEvent)&&void 0!==Tt&&Tt.shiftKey||null!==(Kt=m.touchEvent)&&void 0!==Kt&&Kt.shiftKey)&&(null!==(Qt=m.mouseEvent)&&void 0!==Qt&&Qt.altKey||null!==(Yt=m.touchEvent)&&void 0!==Yt&&Yt.altKey)?P>=1?{x:J-(wt-q),y:ot-(wt-q)/P,width:G+2*(wt-q),height:O+2*(wt-q)/P}:{x:J-(ft-Mt)*P,y:ot-(ft-Mt),width:G+2*(ft-Mt)*P,height:O+2*(ft-Mt)}:null!==(le=m.mouseEvent)&&void 0!==le&&le.shiftKey||null!==(re=m.touchEvent)&&void 0!==re&&re.shiftKey?P>=1?{x:J,y:ot,width:G+(wt-q),height:O+(wt-q)/P}:{x:J,y:ot,width:G+(ft-Mt)*P,height:O+(ft-Mt)}:null!==(ae=m.mouseEvent)&&void 0!==ae&&ae.altKey||null!==(pe=m.touchEvent)&&void 0!==pe&&pe.altKey?{x:J-(wt-q),y:ot-(ft-Mt),width:G+2*(wt-q),height:O+2*(ft-Mt)}:{x:J,y:ot,width:G+(wt-q),height:O+(ft-Mt)};break;case"rect-top":var _e,Se,be,Ee;A=null!==(_e=m.mouseEvent)&&void 0!==_e&&_e.shiftKey||null!==(Se=m.touchEvent)&&void 0!==Se&&Se.shiftKey?{x:J+Gt/2*P,y:ot+Gt,width:G-Gt*P,height:O-Gt}:null!==(be=m.mouseEvent)&&void 0!==be&&be.altKey||null!==(Ee=m.touchEvent)&&void 0!==Ee&&Ee.altKey?{x:J,y:ot+Gt,width:G,height:O-2*Gt}:{x:J,y:ot+Gt,width:G,height:O-Gt};break;case"rect-bottom":var ve,Re,Me,Fe;A=null!==(ve=m.mouseEvent)&&void 0!==ve&&ve.shiftKey||null!==(Re=m.touchEvent)&&void 0!==Re&&Re.shiftKey?{x:J-Gt/2*P,y:ot,width:G+Gt*P,height:O+Gt}:null!==(Me=m.mouseEvent)&&void 0!==Me&&Me.altKey||null!==(Fe=m.touchEvent)&&void 0!==Fe&&Fe.altKey?{x:J,y:ot-Gt,width:G,height:O+2*Gt}:{x:J,y:ot,width:G,height:O+Gt};break;case"rect-left":var Ve,Ue,We,Ge;A=null!==(Ve=m.mouseEvent)&&void 0!==Ve&&Ve.shiftKey||null!==(Ue=m.touchEvent)&&void 0!==Ue&&Ue.shiftKey?{x:J+ut,y:ot+ut/2/P,width:G-ut,height:O-ut/P}:null!==(We=m.mouseEvent)&&void 0!==We&&We.altKey||null!==(Ge=m.touchEvent)&&void 0!==Ge&&Ge.altKey?{x:J+ut,y:ot,width:G-2*ut,height:O}:{x:J+ut,y:ot,width:G-ut,height:O};break;case"rect-right":var Ye,At,B,i;A=null!==(Ye=m.mouseEvent)&&void 0!==Ye&&Ye.shiftKey||null!==(At=m.touchEvent)&&void 0!==At&&At.shiftKey?{x:J,y:ot-ut/2/P,width:G+ut,height:O+ut/P}:null!==(B=m.mouseEvent)&&void 0!==B&&B.altKey||null!==(i=m.touchEvent)&&void 0!==i&&i.altKey?{x:J-ut,y:ot,width:G+2*ut,height:O}:{x:J,y:ot,width:G+ut,height:O};break;default:A={x:J+wt-q,y:ot+ft-Mt,width:G,height:O}}A.width<=0&&(A.width=1),A.height<=0&&(A.height=1),A.x=(0,k.z)(A.x,1),A.y=(0,k.z)(A.y,1),A.width=(0,k.z)(A.width,1),A.height=(0,k.z)(A.height,1),Object.assign(X,A),(0,vt.D_)(F,lt,A),(()=>{let l=J-A.x,o=ot-A.y,n=(A.width-G)/G,r=(A.height-O)/O;lt.forEach((y,p)=>{let h=gt[p],w=ot-h.y,z={x:(0,k.z)(h.x-(l+(J-h.x)*n),100),y:(0,k.z)(h.y-(o+w*r),100),width:(0,k.z)(h.width+h.width*n,100),height:(0,k.z)(h.height+h.height*r,100)},{id:D,type:St,size:bt,attribute:Pt}=y;Object.assign(bt,z),Object.assign(Pt,(0,rt.xW)(St,bt,Pt)),(0,vt.tD)(window.document.getElementById(D),Pt)})})()})()})(Mt[0][0],Mt[0][1],q.x,q.y),_t=!0},end:(q,Mt)=>{_t&&(lt.forEach(q=>{let{id:Mt,size:wt,attribute:ft}=q,ut=It.find(Gt=>Gt.id==Mt);ut&&(ut.to=JSON.parse(JSON.stringify({id:Mt,size:wt,attribute:ft})))}),E.L.history.push(It))}})},x=(m,M,X,lt)=>{let _t,{id:F,type:J,size:ot,attribute:G}=X,{x:O,y:gt,width:jt,height:It,ratios:Rt}=ot,xt=(jt||1)/(It||1),q=null,ft=!1;(0,j.I)(m,{start:Gt=>{q=JSON.parse(JSON.stringify({id:F,size:ot,attribute:G}))},move:(Gt,P)=>{((Gt,P,A,d)=>{let b=A-Gt,H=d-P;switch(M){case"rect-center":var Ct,Nt;_t=null!==(Ct=m.mouseEvent)&&void 0!==Ct&&Ct.shiftKey||null!==(Nt=m.touchEvent)&&void 0!==Nt&&Nt.shiftKey?Math.abs(b)>=Math.abs(H)?{x:O+b,y:gt,width:jt,height:It}:{x:O,y:gt+H,width:jt,height:It}:{x:O+b,y:gt+H,width:jt,height:It};break;case"rect-top-left":var Xt,Zt,Ht,zt,st,qt,N,u;_t=(null!==(Xt=m.mouseEvent)&&void 0!==Xt&&Xt.shiftKey||null!==(Zt=m.touchEvent)&&void 0!==Zt&&Zt.shiftKey)&&(null!==(Ht=m.mouseEvent)&&void 0!==Ht&&Ht.altKey||null!==(zt=m.touchEvent)&&void 0!==zt&&zt.altKey)?xt>=1?{x:O+b,y:gt+b/xt,width:jt-2*b,height:It-2*b/xt}:{x:O+H*xt,y:gt+H,width:jt-2*H*xt,height:It-2*H}:null!==(st=m.mouseEvent)&&void 0!==st&&st.shiftKey||null!==(qt=m.touchEvent)&&void 0!==qt&&qt.shiftKey?xt>=1?{x:O+b,y:gt+b/xt,width:jt-b,height:It-b/xt}:{x:O+H*xt,y:gt+H,width:jt-H*xt,height:It-H}:null!==(N=m.mouseEvent)&&void 0!==N&&N.altKey||null!==(u=m.touchEvent)&&void 0!==u&&u.altKey?{x:O+b,y:gt+H,width:jt-2*b,height:It-2*H}:{x:O+b,y:gt+H,width:jt-b,height:It-H};break;case"rect-top-right":var K,nt,at,V,_,Q,it,yt;_t=(null!==(K=m.mouseEvent)&&void 0!==K&&K.shiftKey||null!==(nt=m.touchEvent)&&void 0!==nt&&nt.shiftKey)&&(null!==(at=m.mouseEvent)&&void 0!==at&&at.altKey||null!==(V=m.touchEvent)&&void 0!==V&&V.altKey)?xt>=1?{x:O-b,y:gt-b/xt,width:jt+2*b,height:It+2*b/xt}:{x:O+H*xt,y:gt+H,width:jt-2*H*xt,height:It-2*H}:null!==(_=m.mouseEvent)&&void 0!==_&&_.shiftKey||null!==(Q=m.touchEvent)&&void 0!==Q&&Q.shiftKey?xt>=1?{x:O,y:gt-b/xt,width:jt+b,height:It+b/xt}:{x:O,y:gt+H,width:jt-H*xt,height:It-H}:null!==(it=m.mouseEvent)&&void 0!==it&&it.altKey||null!==(yt=m.touchEvent)&&void 0!==yt&&yt.altKey?{x:O-b,y:gt+H,width:jt+2*b,height:It-2*H}:{x:O,y:gt+H,width:jt+b,height:It-H};break;case"rect-bottom-left":var Ot,Lt,pt,dt,kt,Tt,Kt,Qt;_t=(null!==(Ot=m.mouseEvent)&&void 0!==Ot&&Ot.shiftKey||null!==(Lt=m.touchEvent)&&void 0!==Lt&&Lt.shiftKey)&&(null!==(pt=m.mouseEvent)&&void 0!==pt&&pt.altKey||null!==(dt=m.touchEvent)&&void 0!==dt&&dt.altKey)?xt>=1?{x:O+b,y:gt+b/xt,width:jt-2*b,height:It-2*b/xt}:{x:O-H*xt,y:gt-H,width:jt+2*H*xt,height:It+2*H}:null!==(kt=m.mouseEvent)&&void 0!==kt&&kt.shiftKey||null!==(Tt=m.touchEvent)&&void 0!==Tt&&Tt.shiftKey?xt>=1?{x:O+b,y:gt,width:jt-b,height:It-b/xt}:{x:O-H*xt,y:gt,width:jt+H*xt,height:It+H}:null!==(Kt=m.mouseEvent)&&void 0!==Kt&&Kt.altKey||null!==(Qt=m.touchEvent)&&void 0!==Qt&&Qt.altKey?{x:O+b,y:gt-H,width:jt-2*b,height:It+2*H}:{x:O+b,y:gt,width:jt-b,height:It+H};break;case"rect-bottom-right":var Yt,le,re,ae,pe,_e,Se,be;_t=(null!==(Yt=m.mouseEvent)&&void 0!==Yt&&Yt.shiftKey||null!==(le=m.touchEvent)&&void 0!==le&&le.shiftKey)&&(null!==(re=m.mouseEvent)&&void 0!==re&&re.altKey||null!==(ae=m.touchEvent)&&void 0!==ae&&ae.altKey)?xt>=1?{x:O-b,y:gt-b/xt,width:jt+2*b,height:It+2*b/xt}:{x:O-H*xt,y:gt-H,width:jt+2*H*xt,height:It+2*H}:null!==(pe=m.mouseEvent)&&void 0!==pe&&pe.shiftKey||null!==(_e=m.touchEvent)&&void 0!==_e&&_e.shiftKey?xt>=1?{x:O,y:gt,width:jt+b,height:It+b/xt}:{x:O,y:gt,width:jt+H*xt,height:It+H}:null!==(Se=m.mouseEvent)&&void 0!==Se&&Se.altKey||null!==(be=m.touchEvent)&&void 0!==be&&be.altKey?{x:O-b,y:gt-H,width:jt+2*b,height:It+2*H}:{x:O,y:gt,width:jt+b,height:It+H};break;case"rect-top":var Ee,ve,Re,Me;_t=null!==(Ee=m.mouseEvent)&&void 0!==Ee&&Ee.shiftKey||null!==(ve=m.touchEvent)&&void 0!==ve&&ve.shiftKey?{x:O+H/2*xt,y:gt+H,width:jt-H*xt,height:It-H}:null!==(Re=m.mouseEvent)&&void 0!==Re&&Re.altKey||null!==(Me=m.touchEvent)&&void 0!==Me&&Me.altKey?{x:O,y:gt+H,width:jt,height:It-2*H}:{x:O,y:gt+H,width:jt,height:It-H};break;case"rect-bottom":var Fe,Ve,Ue,We;_t=null!==(Fe=m.mouseEvent)&&void 0!==Fe&&Fe.shiftKey||null!==(Ve=m.touchEvent)&&void 0!==Ve&&Ve.shiftKey?{x:O-H/2*xt,y:gt,width:jt+H*xt,height:It+H}:null!==(Ue=m.mouseEvent)&&void 0!==Ue&&Ue.altKey||null!==(We=m.touchEvent)&&void 0!==We&&We.altKey?{x:O,y:gt-H,width:jt,height:It+2*H}:{x:O,y:gt,width:jt,height:It+H};break;case"rect-left":var Ge,Ye,At,B;_t=null!==(Ge=m.mouseEvent)&&void 0!==Ge&&Ge.shiftKey||null!==(Ye=m.touchEvent)&&void 0!==Ye&&Ye.shiftKey?{x:O+b,y:gt+b/2/xt,width:jt-b,height:It-b/xt}:null!==(At=m.mouseEvent)&&void 0!==At&&At.altKey||null!==(B=m.touchEvent)&&void 0!==B&&B.altKey?{x:O+b,y:gt,width:jt-2*b,height:It}:{x:O+b,y:gt,width:jt-b,height:It};break;case"rect-right":var i,l,o,n;_t=null!==(i=m.mouseEvent)&&void 0!==i&&i.shiftKey||null!==(l=m.touchEvent)&&void 0!==l&&l.shiftKey?{x:O,y:gt-b/2/xt,width:jt+b,height:It+b/xt}:null!==(o=m.mouseEvent)&&void 0!==o&&o.altKey||null!==(n=m.touchEvent)&&void 0!==n&&n.altKey?{x:O-b,y:gt,width:jt+2*b,height:It}:{x:O,y:gt,width:jt+b,height:It};break;default:_t=M.match(/^point-(\d+)/)?{x:O,y:gt,width:jt,height:It}:{x:O+b,y:gt+H,width:jt,height:It}}_t.width<=0&&(_t.width=1),_t.height<=0&&(_t.height=1);let r=M.match(/^point-(\d+)/);if(r){let p=parseInt(r[1]);if("number"==typeof p){var y;_t.ratios=null==Rt?void 0:Rt.map((z,D)=>D==p?[(0,k.z)(z[0]+(0==_t.width?0:b/_t.width),100),(0,k.z)(z[1]+(0==_t.height?0:H/_t.height),100)]:z);let h=et(_t.x,_t.y,_t.width,_t.height,null!==(y=_t.ratios)&&void 0!==y?y:[]),C=mt(h),w=tt(C.x,C.y,C.width,C.height,h);_t={x:(0,k.z)(C.x,1),y:(0,k.z)(C.y,1),width:(0,k.z)(C.width,1),height:(0,k.z)(C.height,1),ratios:w}}}_t.x=(0,k.z)(_t.x),_t.y=(0,k.z)(_t.y),_t.width=(0,k.z)(_t.width),_t.height=(0,k.z)(_t.height),Object.assign(ot,_t),Object.assign(G,(0,rt.xW)(J,ot,G)),(0,vt.tD)(window.document.getElementById(F),G),(0,vt.AE)(lt,X)})(P[0][0],P[0][1],Gt.x,Gt.y),ft=!0},end:(Gt,P)=>{ft&&q&&E.L.history.push([{type:"size",from:q,to:JSON.parse(JSON.stringify({id:F,size:ot,attribute:G}))}])}})},et=(m,M,X,lt,F)=>F.map(J=>[m+X*J[0],M+lt*J[1]]),tt=(m,M,X,lt,F)=>F.map(J=>[0==X?0:(0,k.z)((J[0]-m)/X,100),0==lt?0:(0,k.z)((J[1]-M)/lt,100)]),mt=m=>{let M=[],X=[];m.map(G=>{M.push(G[0]),X.push(G[1])});let lt=Math.min.apply(null,M),F=Math.min.apply(null,X);return{x:lt,y:F,width:Math.max.apply(null,M)-lt||1,height:Math.max.apply(null,X)-F||1}},v=m=>{m.length>1?(m=>{let M=999999,X=999999,lt=-999999,F=-999999;m.forEach(G=>{M=Math.min(M,G.size.x),X=Math.min(X,G.size.y),lt=Math.max(lt,G.size.x+G.size.width),F=Math.max(F,G.size.y+G.size.height)});let J=(0,vt.RY)(T.F.RESIZE_GROUP,"g"),ot=(0,rt.CE)(M,X,lt,F);ot.x=(0,k.z)(ot.x,100),ot.y=(0,k.z)(ot.y,100),ot.width=(0,k.z)(ot.width,100),ot.height=(0,k.z)(ot.height,100),(0,vt.D_)(J,m,ot).forEach(G=>{((m,M,X,lt,F)=>{let J=!1;null==m||m.addEventListener("touchstart",ot=>{J=!0,U({touchEvent:ot},M,X,lt,F)}),null==m||m.addEventListener("mousedown",ot=>{if(0==ot.button){if(J)return void(J=!1);U({mouseEvent:ot},M,X,lt,F)}})})(G.element,G.posType,ot,m,J)})})(m):1==m.length&&(m=>{let M=(0,vt.RY)(T.F.RESIZE_GROUP,"g");if(m.length>0){let X=m[0];(0,vt.AE)(M,X).forEach(lt=>{((m,M,X,lt)=>{let F=!1;null==m||m.addEventListener("touchstart",J=>{F=!0,x({touchEvent:J},M,X,lt)}),null==m||m.addEventListener("mousedown",J=>{if(0==J.button){if(F)return void(F=!1);x({mouseEvent:J},M,X,lt)}})})(lt.element,lt.posType,X,M)})}})(m)}},1026:(he,Bt,f)=>{f.d(Bt,{$:()=>M,t:()=>m});var T=f(7873),E=f(1281),rt=f(6153),j=f(3477),vt=f(7945),k=f(3069),c=f(3073),R=f(1999),U=f(6407),S=f(6847),W=f(745),x=f(9173),et=f(6611),tt=f(5970),mt=f(4669),v=f(3617);const m=(X,lt,F)=>{var J;if(lt&&!(null!=F?F:window).document.getElementById(lt))return;if(lt){let G=(null!=F?F:window).document.getElementById(lt);jQuery(G).find("#"+T.F.BACKGROUND_GROUP).empty();let O=(0,tt.RY)(T.F.BACKGROUND_GROUP,"g",void 0,G);(0,tt.I6)(O,X)}else{jQuery(et.L.target).find("#"+T.F.BACKGROUND_GROUP).empty();let G=(0,tt.RY)(T.F.BACKGROUND_GROUP,"g",void 0,et.L.target);(0,tt.I6)(G,X)}let ot=(G,O)=>{O=lt&&O?`${lt}-${O}`:null!=lt?lt:O,null==G||G.forEach(gt=>{let jt=lt?`${lt}-${gt.id}`:gt.id;var It;if(gt.isdeleted)null===(It=(null!=F?F:window).document.getElementById(jt))||void 0===It||It.remove();else switch(gt.type){case R.h.GROUP:(0,c.v)(jt,{},O?(null!=F?F:window).document.getElementById(O):null),ot(gt.nodes,gt.id);break;case R.h.CIRCLE:(0,E.K)(jt,{size:gt.size,attribute:gt.attribute},O?(null!=F?F:window).document.getElementById(O):null);break;case R.h.ELLIPSE:(0,rt.W)(jt,{size:gt.size,attribute:gt.attribute},O?(null!=F?F:window).document.getElementById(O):null);break;case R.h.LINE:(0,k.q)(jt,{size:gt.size,attribute:gt.attribute},O?(null!=F?F:window).document.getElementById(O):null);break;case R.h.RECT:(0,vt.a)(jt,{size:gt.size,attribute:gt.attribute},O?(null!=F?F:window).document.getElementById(O):null);break;case R.h.POLYGON:(0,j.u)(jt,{size:gt.size,attribute:gt.attribute},O?(null!=F?F:window).document.getElementById(O):null);break;case R.h.POLYLINE:(0,v.E)(jt,{size:gt.size,attribute:gt.attribute},O?(null!=F?F:window).document.getElementById(O):null);break;case R.h.FOREIGNOBJECT:(0,W.$)(jt,{size:gt.size,attribute:gt.attribute,style:gt.style,source:gt.source},O?(null!=F?F:window).document.getElementById(O):null);break;case R.h.IMAGE:(0,x.B)(jt,{size:gt.size,attribute:gt.attribute,source:gt.source},O?(null!=F?F:window).document.getElementById(O):null);break;case R.h.TEXT:(0,S.L)(jt,{size:gt.size,attribute:gt.attribute,source:gt.source},O?(null!=F?F:window).document.getElementById(O):null);break;case R.h.TSPAN:(0,mt.M)(jt,{size:gt.size,attribute:gt.attribute,source:gt.source},O?(null!=F?F:window).document.getElementById(O):null);break;case R.h.PATH:(0,U.X)(jt,{size:gt.size,attribute:gt.attribute},O?(null!=F?F:window).document.getElementById(O):null)}})};ot(null==X||null===(J=X.svg)||void 0===J?void 0:J.nodes)},M=(X,lt)=>{var F;if(lt&&!window.document.getElementById(lt))return;let J=(ot,G)=>{G=G?`${lt}-${G}`:lt,null==ot||ot.forEach(O=>{jQuery("#"+(lt?`${lt}-${O.id}`:O.id)).appendTo(G?window.document.getElementById(G):et.L.target),O.type==R.h.GROUP&&J(O.nodes,O.id)})};J(null==X||null===(F=X.svg)||void 0===F?void 0:F.nodes)}},1281:(he,Bt,f)=>{f.d(Bt,{K:()=>vt});var T=f(1999),E=f(6611),rt=f(9506),j=f(5970);const vt=(k,c,R)=>{let U=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,rt.xW)(T.h.CIRCLE,U,S)),{nodeId:k,element:(0,j.fn)(k,T.h.CIRCLE,"circle",{size:U,attribute:S},R),size:U,attribute:S}}},6153:(he,Bt,f)=>{f.d(Bt,{W:()=>vt});var T=f(1999),E=f(6611),rt=f(9506),j=f(5970);const vt=(k,c,R)=>{let U=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,rt.xW)(T.h.ELLIPSE,U,S)),{nodeId:k,element:(0,j.fn)(k,T.h.ELLIPSE,"ellipse",{size:U,attribute:S},R),size:U,attribute:S}}},745:(he,Bt,f)=>{f.d(Bt,{$:()=>j});var T=f(1999),E=f(9506),rt=f(5970);const j=(vt,k,c)=>{let R=(null==k?void 0:k.size)||{x:0,y:0,width:320,height:80},U=(null==k?void 0:k.attribute)||{};Object.assign(U,(0,E.xW)(T.h.FOREIGNOBJECT,R,U));let S=(null==k?void 0:k.source)||{type:"html",html:{htmlContent:""}},W=(null==k?void 0:k.style)||{};return{nodeId:vt,element:(0,rt.fn)(vt,T.h.FOREIGNOBJECT,"foreignObject",{size:R,attribute:U,style:W,source:S},c),size:R,attribute:U,style:W,source:S}}},3073:(he,Bt,f)=>{f.d(Bt,{v:()=>j});var T=f(1999),E=f(9506),rt=f(5970);const j=(k,c,R)=>{let U=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{};return Object.assign(S,(0,E.xW)(T.h.GROUP,U,S)),{nodeId:k,element:(0,rt.fn)(k,T.h.GROUP,"g",{size:U,attribute:S},R),size:U,attribute:S}}},9173:(he,Bt,f)=>{f.d(Bt,{B:()=>j});var T=f(1999),E=f(9506),rt=f(5970);const j=(vt,k,c)=>{let R=(null==k?void 0:k.size)||{x:0,y:0,width:10,height:10},U=(null==k?void 0:k.attribute)||{preserveAspectRatio:"none"};Object.assign(U,(0,E.xW)(T.h.IMAGE,R,U));let S=(null==k?void 0:k.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:vt,element:(0,rt.fn)(vt,T.h.IMAGE,"image",{size:R,attribute:U,source:S},c),size:R,attribute:U,source:S}}},3069:(he,Bt,f)=>{f.d(Bt,{q:()=>vt});var T=f(1999),E=f(6611),rt=f(9506),j=f(5970);const vt=(k,c,R)=>{let U=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth,strokeLinecap:E.L.attribute.strokeLinecap};return Object.assign(S,(0,rt.xW)(T.h.LINE,U,S)),{nodeId:k,element:(0,j.fn)(k,T.h.LINE,"line",{size:U,attribute:S},R),size:U,attribute:S}}},6407:(he,Bt,f)=>{f.d(Bt,{X:()=>vt});var T=f(1999),E=f(6611),rt=f(9506),j=f(5970);const vt=(k,c,R)=>{let U=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,rt.xW)(T.h.PATH,U,S)),{nodeId:k,element:(0,j.fn)(k,T.h.PATH,"path",{size:U,attribute:S},R),size:U,attribute:S}}},3477:(he,Bt,f)=>{f.d(Bt,{u:()=>vt});var T=f(1999),E=f(6611),rt=f(9506),j=f(5970);const vt=(k,c,R)=>{let U=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,rt.xW)(T.h.POLYGON,U,S)),{nodeId:k,element:(0,j.fn)(k,T.h.POLYGON,"polygon",{size:U,attribute:S},R),size:U,attribute:S}}},3617:(he,Bt,f)=>{f.d(Bt,{E:()=>vt});var T=f(1999),E=f(6611),rt=f(9506),j=f(5970);const vt=(k,c,R)=>{let U=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,rt.xW)(T.h.POLYLINE,U,S)),{nodeId:k,element:(0,j.fn)(k,T.h.POLYLINE,"polyline",{size:U,attribute:S},R),size:U,attribute:S}}},7945:(he,Bt,f)=>{f.d(Bt,{a:()=>vt});var T=f(1999),E=f(6611),rt=f(9506),j=f(5970);const vt=(k,c,R)=>{let U=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(S,(0,rt.xW)(T.h.RECT,U,S)),{nodeId:k,element:(0,j.fn)(k,T.h.RECT,"rect",{size:U,attribute:S},R),size:U,attribute:S}}},6847:(he,Bt,f)=>{f.d(Bt,{L:()=>vt});var T=f(1999),E=f(6611),rt=f(9506),j=f(5970);const vt=(k,c,R)=>{let U=(null==c?void 0:c.size)||{x:0,y:0,width:320,height:80},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.stroke,fontFamily:E.L.attribute.fontFamily,fontSize:E.L.attribute.fontSize,textLength:E.L.attribute.textLength};Object.assign(S,(0,rt.xW)(T.h.TEXT,U,S));let W=(null==c?void 0:c.source)||{type:"text",text:{textContent:""}};return{nodeId:k,element:(0,j.fn)(k,T.h.TEXT,"text",{size:U,attribute:S,source:W},R),size:U,attribute:S,source:W}}},4669:(he,Bt,f)=>{f.d(Bt,{M:()=>vt});var T=f(1999),E=f(6611),rt=f(9506),j=f(5970);const vt=(k,c,R)=>{let U=(null==c?void 0:c.size)||{x:0,y:0,width:320,height:80},S=(null==c?void 0:c.attribute)||{fill:E.L.attribute.stroke,fontFamily:E.L.attribute.fontFamily,fontSize:E.L.attribute.fontSize,textLength:E.L.attribute.textLength};Object.assign(S,(0,rt.xW)(T.h.TSPAN,U,S));let W=(null==c?void 0:c.source)||{type:"text",text:{textContent:""}};return{nodeId:k,element:(0,j.fn)(k,T.h.TSPAN,"tspan",{size:U,attribute:S,source:W},R),size:U,attribute:S,source:W}}},9506:(he,Bt,f)=>{f.d(Bt,{CE:()=>rt,xW:()=>j});var T=f(1999),E=f(4896);const rt=(k,c,R,U,S)=>{let W={x:Math.min(k,R),y:Math.min(c,U),width:Math.abs(R-k)||1,height:Math.abs(U-c)||1};return null!=S&&S.ratio&&(W.width<=W.height?W.height=W.width*(null==S?void 0:S.ratio):W.width=W.height/(null==S?void 0:S.ratio)),Object.assign(W,{ratios:(null==S?void 0:S.ratios)||[[(k-W.x)/(W.width||1),(c-W.y)/(W.height||1)],[(R-W.x)/(W.width||1),(U-W.y)/(W.height||1)]]}),null!=S&&S.points&&(W.points=null==S?void 0:S.points),W},j=(k,c,R)=>{var U,S=(()=>{switch(k){case T.h.CIRCLE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,r:Math.min(c.width/2,c.height/2)};case T.h.ELLIPSE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,rx:c.width/2,ry:c.height/2};case T.h.LINE:{var W;let v={};return null===(W=c.ratios)||void 0===W||W.forEach((m,M)=>{v[`x${M+1}`]=c.x+c.width*m[0],v[`y${M+1}`]=c.y+c.height*m[1]}),v}case T.h.RECT:case T.h.FOREIGNOBJECT:case T.h.IMAGE:return{x:c.x,y:c.y,width:c.width,height:c.height};case T.h.TEXT:case T.h.TSPAN:var x;return{x:c.x,y:c.y+(R.alignmentBaseline||R.dominantBaseline?0:null!==(x=R.fontSize)&&void 0!==x?x:16)};case T.h.POLYGON:case T.h.POLYLINE:var et;if(null!==(et=c.ratios)&&void 0!==et&&et.length)return{points:(0,E.n9)(c,c.ratios)};break;case T.h.PATH:var tt,mt;if(null!==(tt=c.ratioMaps)&&void 0!==tt&&tt.length)return{d:(0,E.$N)(c,c.ratioMaps)};if(null!==(mt=c.points)&&void 0!==mt&&mt.length)return{d:`M ${(v=c.points)[0][0]} ${v[0][1]} L ${(v.map(m=>[m[0],m[1]])||[]).map(m=>m.join(" ")).join(" ")}`}}var v;return{}})();return c.rotate?(S.transform=`rotate(${c.rotate})`,S.transformOrigin=`${c.x+c.width/2} ${c.y+c.height/2}`):null!==(U=R.transform)&&void 0!==U&&U.match(/^rotate/)&&(R.transform=null,R.transformOrigin=null),S}},2492:(he,Bt,f)=>{f.d(Bt,{z:()=>T});const T=(E,rt)=>{var j;return rt=null!==(j=rt)&&void 0!==j?j:100,Math.round((E+Number.EPSILON)*rt)/rt}},9841:(he,Bt,f)=>{f.d(Bt,{$:()=>rt});var T=f(6611),E=f(2492);const rt=j=>(0,E.z)(j/T.L.screen.scale)},6752:(he,Bt,f)=>{f.d(Bt,{E$:()=>c,Nx:()=>U,ZF:()=>k,ei:()=>vt,fu:()=>R});var T=f(6611),E=f(5970),rt=f(9506),j=f(2492);const vt=(S,W)=>{let{id:x,type:et,size:tt,attribute:mt}=S,v=JSON.parse(JSON.stringify({id:x,size:tt,attribute:mt}));tt.x=(0,j.z)(W||0),Object.assign(mt,(0,rt.xW)(et,tt,mt)),(0,E.tD)(window.document.getElementById(x),mt),T.L.history.push([{type:"size",from:v,to:JSON.parse(JSON.stringify({id:x,size:tt,attribute:mt}))}])},k=(S,W)=>{let{id:x,type:et,size:tt,attribute:mt}=S,v=JSON.parse(JSON.stringify({id:x,size:tt,attribute:mt}));tt.y=(0,j.z)(W||0),Object.assign(mt,(0,rt.xW)(et,tt,mt)),(0,E.tD)(window.document.getElementById(x),mt),T.L.history.push([{type:"size",from:v,to:JSON.parse(JSON.stringify({id:x,size:tt,attribute:mt}))}])},c=(S,W,x)=>{let{id:et,type:tt,size:mt,attribute:v}=S;W<=0&&(W=1);let m=JSON.parse(JSON.stringify({id:et,size:mt,attribute:v}));x&&(mt.height=(0,j.z)(W*mt.height/(mt.width||1))),mt.width=(0,j.z)(W),Object.assign(v,(0,rt.xW)(tt,mt,v)),(0,E.tD)(window.document.getElementById(et),v),T.L.history.push([{type:"size",from:m,to:JSON.parse(JSON.stringify({id:et,size:mt,attribute:v}))}])},R=(S,W,x)=>{let{id:et,type:tt,size:mt,attribute:v}=S;W<=0&&(W=1);let m=JSON.parse(JSON.stringify({id:et,size:mt,attribute:v}));x&&(mt.width=(0,j.z)(W*mt.width/(mt.height||1))),mt.height=(0,j.z)(W),Object.assign(v,(0,rt.xW)(tt,mt,v)),(0,E.tD)(window.document.getElementById(et),v),T.L.history.push([{type:"size",from:m,to:JSON.parse(JSON.stringify({id:et,size:mt,attribute:v}))}])},U=(S,W)=>{let{id:x,type:et,size:tt,attribute:mt}=S,v=JSON.parse(JSON.stringify({id:x,size:tt,attribute:mt}));tt.rotate="number"==typeof W?(0,j.z)(W,100):void 0,Object.assign(mt,(0,rt.xW)(et,tt,mt)),(0,E.tD)(window.document.getElementById(x),mt),T.L.history.push([{type:"size",from:v,to:JSON.parse(JSON.stringify({id:x,size:tt,attribute:mt}))}])}},1308:(he,Bt,f)=>{f.d(Bt,{I:()=>k});var T=f(3603),E=f(6611);class rt{constructor(R){this._points=[],this._options=R}start(R){this._points.length=0,this._points.push([R.x,R.y]),this._options.start(R)}move(R){this._points.push([R.x,R.y]),this._options.move(R,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(R=this._points[0])[0],y:R[1]}:{x:0,y:0};var R}get offsetLast(){return this._points.length>=1?{x:(R=this._points[this._points.length-1])[0],y:R[1]}:{x:0,y:0};var R}}var j=f(6078);const k=(c,R,U,S,W)=>{var x,et,tt;let mt=null,v=0,m=0;c.mouseEvent?(mt=c.mouseEvent.target,v=c.mouseEvent.offsetX,m=c.mouseEvent.offsetY):c.touchEvent&&(mt=c.touchEvent.target,c.touchEvent.touches.length&&(v=c.touchEvent.touches[0].clientX,m=c.touchEvent.touches[0].clientY));let M=null!=U?U:E.L.screen.scale,X=null!=S?S:E.L.screen.dislocation,lt=null!=W?W:E.L.screen.offset,F=()=>{};var J=new rt({start:null!==(x=null==R?void 0:R.start)&&void 0!==x?x:F,move:null!==(et=null==R?void 0:R.move)&&void 0!==et?et:F,end:null!==(tt=null==R?void 0:R.end)&&void 0!==tt?tt:F});c.mouseEvent?J.start((0,j.D)({x:v,y:m},M,X,{x:0,y:0})):c.touchEvent&&J.start((0,j.D)({x:v,y:m},M,X,lt));let ot=xt=>{J.move((0,j.D)({x:xt.clientX,y:xt.clientY},M,X,lt))},G=xt=>{J.end(),[T.P.SHAPE,T.P.FOREIGNOBJECT,T.P.IMAGE,T.P.TEXT].includes(E.L.pointer.pointer_type)&&(xt.shiftKey||(E.L.pointer.pointer_type=T.P.POINTER))},O=xt=>{xt.touches.length&&ot({clientX:xt.touches[0].clientX,clientY:xt.touches[0].clientY})},gt=xt=>{G({shiftKey:xt.shiftKey,ctrlKey:xt.ctrlKey,altKey:xt.altKey}),window.removeEventListener("touchmove",O,!1),window.removeEventListener("touchend",gt,!1)},jt=xt=>{0==xt.button&&ot({clientX:xt.clientX,clientY:xt.clientY})},It=xt=>{0==xt.button&&(G({shiftKey:xt.shiftKey,ctrlKey:xt.ctrlKey,altKey:xt.altKey}),window.removeEventListener("mousemove",jt,!1),window.removeEventListener("mouseup",It,!1))};if(c.mouseEvent)window.addEventListener("mousemove",jt,!1),window.addEventListener("mouseup",It,!1);else if(c.touchEvent){var Rt;window.addEventListener("touchmove",O,!1),window.addEventListener("touchend",gt,!1),null===(Rt=mt)||void 0===Rt||Rt.addEventListener("touchmove",function(xt){xt.preventDefault()})}}},6078:(he,Bt,f)=>{f.d(Bt,{D:()=>E});var T=f(2492);const E=(rt,j,vt,k)=>(rt.x-=k.x,rt.y-=k.y,rt.x/=j,rt.y/=j,rt.x-=vt.x,rt.y-=vt.y,rt.x=(0,T.z)(rt.x),rt.y=(0,T.z)(rt.y),rt)},5619:(he,Bt,f)=>{f.d(Bt,{J:()=>st,I:()=>qt});var T=f(7873),E=f(6611),rt=f(1999),j=f(334),vt=f(8946),k=f(7657),c=f(6769),R=f(3591),S=f(6847),W=f(3073);var v=f(7050),m=f(9173),M=f(2492);const X=(N,u,K)=>{var nt,at,V,_;let Q=1,it=new Image;it.onload=()=>{var yt,Ot,Lt,pt;Q=(0,M.z)(it.naturalWidth/it.naturalHeight,100);let dt=0,kt=0,Tt=0,Kt=0;var Qt,Yt,le,re;Q>=1?(Tt=Math.min(it.naturalWidth,null!==(Qt=null===(Yt=st.slide.svg)||void 0===Yt||null===(Yt=Yt.viewBox)||void 0===Yt?void 0:Yt.width)&&void 0!==Qt?Qt:0),Kt=Tt/Q):(Kt=Math.min(it.naturalHeight,null!==(le=null===(re=st.slide.svg)||void 0===re||null===(re=re.viewBox)||void 0===re?void 0:re.height)&&void 0!==le?le:0),Tt=Kt/Q),dt=((null!==(yt=null===(Ot=st.slide.svg)||void 0===Ot||null===(Ot=Ot.viewBox)||void 0===Ot?void 0:Ot.width)&&void 0!==yt?yt:0)-Tt)/2,kt=((null!==(Lt=null===(pt=st.slide.svg)||void 0===pt||null===(pt=pt.viewBox)||void 0===pt?void 0:pt.height)&&void 0!==Lt?Lt:0)-Kt)/2,u.size={x:dt,y:kt,width:Tt,height:Kt},lt(u,K)},it.onerror=yt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(u.source)}`,yt)},it.src=(null!==(nt=u.source)&&void 0!==nt&&nt.path?(null===(at=E.L.config)||void 0===at?void 0:at.readfileuploadurl)+(null===(V=u.source)||void 0===V?void 0:V.path):null===(_=u.source)||void 0===_?void 0:_.url)||""},lt=(N,u)=>{if(N.slideStatus!=st.slideStatus)return void u();let{element:K}=(0,m.B)(Math.ceil(1e9*Math.random()),{size:N.size,source:{type:"image",image:null==N?void 0:N.source}});setTimeout(()=>{null==K||K.remove(),u()},3e3)};var F=f(5970);const J=(N,u,K)=>{var nt,at,V,_;let Q=new Image;Q.onload=()=>{ot(N,{width:Q.naturalWidth,height:Q.naturalHeight},u,K)},Q.onerror=it=>{console.error(`ImgSrc load failed -> ${JSON.stringify(u.source)}`,it),K()},Q.src=(null!==(nt=u.source)&&void 0!==nt&&nt.path?(null===(at=E.L.config)||void 0===at?void 0:at.readfileuploadurl)+(null===(V=u.source)||void 0===V?void 0:V.path):null===(_=u.source)||void 0===_?void 0:_.url)||""},ot=(N,u,K,nt)=>{if(K.slideStatus!=st.slideStatus)return void nt();let at=(0,M.z)(u.width/u.height,100),V=0,_=0,Q=0,it=0;at>=1?(Q=u.width,Q=Math.max(Q,40),Q=Math.min(Q,40),it=Q/at):(it=u.height,it=Math.max(it,40),it=Math.min(it,40),Q=it/at);let{size:Lt}=N;V=Lt.x+Lt.width-Q/2,_=Lt.y-it/2;let pt=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,m.B)(`icon-${N.id}`,{size:{x:V,y:_,width:Q,height:it},source:{type:"image",image:null==K?void 0:K.source}},pt),setTimeout(()=>{nt()},3e3)},G=(N,u,K)=>{var nt,at,V,_,Q,it,yt;if(u.slideStatus!=st.slideStatus)return void K();if(!(null!==(nt=u.source)&&void 0!==nt&&nt.path||null!==(at=u.source)&&void 0!==at&&at.url))return console.warn(`${N.id} -> audio no source!`),void K();var Ot=jQuery("#"+N.id);let Lt=null!==(V=u.iteration)&&void 0!==V?V:0;if(Lt<0&&(K(),K=function(){}),!(Ot.data("audio-running")&&Lt<0)){Ot.data("audio-running",!0);var pt=new Audio;return pt.autoplay=!0,pt.loop=0!=Lt,pt.preload="auto",pt.controls=!0,pt.setAttributeNode(document.createAttribute("playsinline")),pt.addEventListener("canplay",function(){var dt=pt.play();dt&&dt.then(function(kt){Ot.data("audio-running",!0)}).catch(function(kt){Ot.data("audio-running",!1),u.slideStatus===st.slideStatus&&K()})}),pt.addEventListener("timeupdate",function(){var kt;u.slideStatus!==st.slideStatus&&((kt=this).pause(),kt.remove(),Ot.data("audio-running",!1))}),pt.addEventListener("canplaythrough",function(){this.loop&&(Lt>0?Lt--:0==Lt&&(this.loop=!1))}),pt.addEventListener("play",function(){}),pt.addEventListener("pause",function(){}),pt.addEventListener("ended",function(){this.remove(),Ot.data("audio-running",!1),u.slideStatus===st.slideStatus&&K()}),pt.onerror=function(){this.remove(),Ot.data("audio-running",!1),u.slideStatus===st.slideStatus&&K()},pt.src=(null!==(_=u.source)&&void 0!==_&&_.path?(null===(Q=E.L.config)||void 0===Q?void 0:Q.readfileuploadurl)+(null===(it=u.source)||void 0===it?void 0:it.path):null===(yt=u.source)||void 0===yt?void 0:yt.url)||"",pt}};var O=f(2837);const ce=(N,u)=>{var K;null===(K=u.test)||void 0===K||null===(K=K.answer)||void 0===K||null===(K=K.matching)||void 0===K||K.filter(nt=>nt.id==N.id).forEach(nt=>nt.value=""),jQuery(`#node-${N.id}`).remove()},Mt=(N,u,K,nt,at,V)=>{var _,Q,it,yt,Ot,Lt,pt,dt;at.iscorrect?(null!==(_=u.test)&&void 0!==_&&null!==(_=_.audiotrue)&&void 0!==_&&_.path&&G(N,{source:(0,O.U)(null===(it=u.test)||void 0===it?void 0:it.audiotrue),iteration:0,nodeStatus:K,slideStatus:nt},V),null!==(Q=u.test)&&void 0!==Q&&null!==(Q=Q.effecttrue)&&void 0!==Q&&Q.path&&X(0,{source:(0,O.U)(null===(yt=u.test)||void 0===yt?void 0:yt.effecttrue),iteration:0,nodeStatus:K,slideStatus:nt},V)):(null!==(Ot=u.test)&&void 0!==Ot&&null!==(Ot=Ot.audiofalse)&&void 0!==Ot&&Ot.path&&G(N,{source:(0,O.U)(null===(pt=u.test)||void 0===pt?void 0:pt.audiofalse),iteration:0,nodeStatus:K,slideStatus:nt},V),null!==(Lt=u.test)&&void 0!==Lt&&null!==(Lt=Lt.effectfalse)&&void 0!==Lt&&Lt.path&&X(0,{source:(0,O.U)(null===(dt=u.test)||void 0===dt?void 0:dt.effectfalse),iteration:0,nodeStatus:K,slideStatus:nt},V));wt(u,K,nt,V)},wt=(N,u,K,nt)=>{var at;switch(null===(at=N.test)||void 0===at?void 0:at.type){case"truefalse":{var V,_;let{value:re,iscorrect:ae}=null!==(V=null==N||null===(_=N.test)||void 0===_||null===(_=_.answer)||void 0===_?void 0:_.truefalse)&&void 0!==V?V:{};if(re){let pe=st.findNode(re);var Q,it,yt,Ot;ae?null!==(Q=N.test)&&void 0!==Q&&null!==(Q=Q.icontrue)&&void 0!==Q&&Q.path&&J(pe,{source:(0,O.U)(null===(it=N.test)||void 0===it?void 0:it.icontrue),iteration:0,nodeStatus:u,slideStatus:K},nt):null!==(yt=N.test)&&void 0!==yt&&null!==(yt=yt.iconfalse)&&void 0!==yt&&yt.path&&J(pe,{source:(0,O.U)(null===(Ot=N.test)||void 0===Ot?void 0:Ot.iconfalse),iteration:0,nodeStatus:u,slideStatus:K},nt)}break}case"singlechoice":{var Lt,pt;let{value:re,iscorrect:ae}=null!==(Lt=null==N||null===(pt=N.test)||void 0===pt||null===(pt=pt.answer)||void 0===pt?void 0:pt.singlechoice)&&void 0!==Lt?Lt:{};if(re){let pe=st.findNode(re);var dt,kt,Tt,Kt;ae?null!==(dt=N.test)&&void 0!==dt&&null!==(dt=dt.icontrue)&&void 0!==dt&&dt.path&&J(pe,{source:(0,O.U)(null===(kt=N.test)||void 0===kt?void 0:kt.icontrue),iteration:0,nodeStatus:u,slideStatus:K},nt):null!==(Tt=N.test)&&void 0!==Tt&&null!==(Tt=Tt.iconfalse)&&void 0!==Tt&&Tt.path&&J(pe,{source:(0,O.U)(null===(Kt=N.test)||void 0===Kt?void 0:Kt.iconfalse),iteration:0,nodeStatus:u,slideStatus:K},nt)}break}case"multichoice":var Qt;null==N||null===(Qt=N.test)||void 0===Qt||null===(Qt=Qt.answer)||void 0===Qt||null===(Qt=Qt.multichoice)||void 0===Qt||Qt.forEach(re=>{let{value:ae,iscorrect:pe}=re;if(ae){let ve=st.findNode(ae);var _e,Se,be,Ee;pe?null!==(_e=N.test)&&void 0!==_e&&null!==(_e=_e.icontrue)&&void 0!==_e&&_e.path&&J(ve,{source:(0,O.U)(null===(Se=N.test)||void 0===Se?void 0:Se.icontrue),iteration:0,nodeStatus:u,slideStatus:K},nt):null!==(be=N.test)&&void 0!==be&&null!==(be=be.iconfalse)&&void 0!==be&&be.path&&J(ve,{source:(0,O.U)(null===(Ee=N.test)||void 0===Ee?void 0:Ee.iconfalse),iteration:0,nodeStatus:u,slideStatus:K},nt)}});break;case"fill":var Yt;null==N||null===(Yt=N.test)||void 0===Yt||null===(Yt=Yt.answer)||void 0===Yt||null===(Yt=Yt.fill)||void 0===Yt||Yt.forEach(re=>{let{id:ae,value:_e,iscorrect:Se}=re;if(_e){let Me=st.findNode(ae);var be,Ee,ve,Re;Se?null!==(be=N.test)&&void 0!==be&&null!==(be=be.icontrue)&&void 0!==be&&be.path&&J(Me,{source:(0,O.U)(null===(Ee=N.test)||void 0===Ee?void 0:Ee.icontrue),iteration:0,nodeStatus:u,slideStatus:K},nt):null!==(ve=N.test)&&void 0!==ve&&null!==(ve=ve.iconfalse)&&void 0!==ve&&ve.path&&J(Me,{source:(0,O.U)(null===(Re=N.test)||void 0===Re?void 0:Re.iconfalse),iteration:0,nodeStatus:u,slideStatus:K},nt)}});break;case"matching":var le;null==N||null===(le=N.test)||void 0===le||null===(le=le.answer)||void 0===le||null===(le=le.matching)||void 0===le||le.forEach(re=>{let{id:ae,key:pe,value:_e}=re;if(_e){let Re=st.findNode(ae);var Se,be,Ee,ve;pe==_e?null!==(Se=N.test)&&void 0!==Se&&null!==(Se=Se.icontrue)&&void 0!==Se&&Se.path&&J(Re,{source:(0,O.U)(null===(be=N.test)||void 0===be?void 0:be.icontrue),iteration:0,nodeStatus:u,slideStatus:K},nt):null!==(Ee=N.test)&&void 0!==Ee&&null!==(Ee=Ee.iconfalse)&&void 0!==Ee&&Ee.path&&J(Re,{source:(0,O.U)(null===(ve=N.test)||void 0===ve?void 0:ve.iconfalse),iteration:0,nodeStatus:u,slideStatus:K},nt)}})}},ft=(N,u,K,nt)=>{var at,V,_,Q,it,yt,Lt,dt,pt;null!==(at=u.animate)&&void 0!==at&&at.value&&(0,v.a)(u,K.nodeStatus,K.slideStatus),null!==(V=u.interactive)&&void 0!==V&&V.show?(console.log(`node(${u.id}) | nodeStatus(${K.nodeStatus}) | slideStatus(${K.slideStatus}) | show`),((N,u,K,nt)=>{var at,V,_;let Q={total:0,counter:0},{triggershow:it,triggerrun:yt,triggerhide:Ot,action:Lt,audio:pt}=null!==(at=null===(V=N.interactive)||void 0===V?void 0:V.show)&&void 0!==at?at:{};if(console.log(`node(${N.id}) | nodeStatus(${u}) | slideStatus(${K}) | show`),it){let{id:kt,ids:Tt,time:Kt,async:Qt}=it;"asynctrue"==Qt?setTimeout(()=>{(0,R.GD)({id:kt,ids:Tt,nodeStatus:u,slideStatus:K})}):"time"==Qt&&setTimeout(()=>{(0,R.GD)({id:kt,ids:Tt,nodeStatus:u,slideStatus:K})},1e3*(null!=Kt?Kt:0))}if(yt){let{id:kt,ids:Tt,time:Kt,async:Qt}=yt;"asynctrue"==Qt?setTimeout(()=>{(0,R.MF)({id:kt,ids:Tt,nodeStatus:u,slideStatus:K})}):"time"==Qt&&setTimeout(()=>{(0,R.MF)({id:kt,ids:Tt,nodeStatus:u,slideStatus:K})},1e3*(null!=Kt?Kt:0))}if(Ot){let{id:kt,ids:Tt,time:Kt,async:Qt}=Ot;"asynctrue"==Qt?setTimeout(()=>{(0,R.vi)({id:kt,ids:Tt,nodeStatus:u,slideStatus:K})}):"time"==Qt&&setTimeout(()=>{(0,R.vi)({id:kt,ids:Tt,nodeStatus:u,slideStatus:K})},1e3*(null!=Kt?Kt:0))}let dt=()=>{setTimeout(()=>{if(Q.counter>=Q.total){if(nt&&nt(),it){let{id:kt,ids:Tt,async:Kt}=it;(!Kt||"asyncfalse"==Kt)&&(0,R.GD)({id:kt,ids:Tt,nodeStatus:u,slideStatus:K})}if(yt){let{id:kt,ids:Tt,async:Kt}=yt;(!Kt||"asyncfalse"==Kt)&&(0,R.MF)({id:kt,ids:Tt,nodeStatus:u,slideStatus:K})}if(Ot){let{id:kt,ids:Tt,async:Kt}=Ot;(!Kt||"asyncfalse"==Kt)&&(0,R.vi)({id:kt,ids:Tt,nodeStatus:u,slideStatus:K})}}})};if(null!=Lt&&Lt.value){Q.total+=1;let kt=()=>{Q.counter+=1,dt()};switch(null==Lt?void 0:Lt.value){case"hide":jQuery("#"+N.id).addClass("hide"),kt();break;case"points":{let{points:Tt,time:Kt,iteration:Qt,finish:Yt}=Lt;(0,k.c)(N.id,{node:N,points:Tt,time:Kt,iteration:Qt,finish:Yt,nodeStatus:u,slideStatus:K},kt);break}default:{let{value:Tt,time:Kt,iteration:Qt,finish:Yt}=Lt;(0,vt.h)(N.id,{node:N,value:Tt,time:Kt,iteration:Qt,finish:Yt,nodeStatus:u,slideStatus:K},kt);break}}}if(null!=pt&&null!==(_=pt.source)&&void 0!==_&&_.path){Q.total+=1;let kt=()=>{Q.counter+=1,dt()},Tt=(0,c.d)(N.id,pt,Q,{nodeStatus:u,slideStatus:K},kt);-1==(null==pt?void 0:pt.iteration)&&jQuery("#"+N.id).click(Kt=>{Kt.preventDefault(),Tt&&(Tt.volume=Tt.volume>=1?0:Tt.volume+.25),console.log(null==Tt?void 0:Tt.volume)})}Q.total||dt()})(u,K.nodeStatus,K.slideStatus,nt)):nt&&nt(),null!==(_=u.interactive)&&void 0!==_&&_.click&&(dt=null===(Lt=u.interactive)||void 0===Lt?void 0:Lt.click,Object.keys(null!=dt?dt:{}).map(Tt=>dt[Tt]?1:0).includes(1)&&jQuery("#"+u.id).addClass("interactive-click"),jQuery("#"+u.id).click(dt=>{dt.preventDefault(),K.nodeStatus=st.refreshNodeStatus(),console.log(`node(${u.id}) | nodeStatus(${K.nodeStatus}) | slideStatus(${K.slideStatus}) | click`),(0,j.J)(u,K.nodeStatus,K.slideStatus)})),null!==(Q=u.variable)&&void 0!==Q&&Q.input&&jQuery("#"+u.id).on("change","input,textarea",dt=>{dt.preventDefault(),((N,u,K)=>{var nt,at;E.L.variable.setValue(null!==(nt=null===(at=u.variable)||void 0===at||null===(at=at.input)||void 0===at?void 0:at.variable)&&void 0!==nt?nt:"",N),(N=>{var u;let K=(nt,at)=>{null==nt||nt.forEach(V=>{switch(V.type){case rt.h.GROUP:(0,W.v)(V.id,{},at?window.document.getElementById(at):null),K(V.nodes,V.id);break;case rt.h.POLYGON:break;case rt.h.TEXT:(0,S.L)(V.id,{size:V.size,attribute:V.attribute,source:V.source},at?window.document.getElementById(at):null)}})};K(null===(u=N.svg)||void 0===u?void 0:u.nodes)})(K)})(dt.target.value,u,N)}),null!==(it=u.variable)&&void 0!==it&&it.click&&(null!==(pt=u.variable)&&void 0!==pt&&null!==(pt=pt.click)&&void 0!==pt&&pt.variable&&jQuery("#"+u.id).addClass("variable-click"),jQuery("#"+u.id).click(dt=>{dt.preventDefault(),((N,u)=>{var K;E.L.variable.setValueOperator(null===(K=N.variable)||void 0===K?void 0:K.click),(N=>{var u;let K=(nt,at)=>{null==nt||nt.forEach(V=>{switch(V.type){case rt.h.GROUP:(0,W.v)(V.id,{},at?window.document.getElementById(at):null),K(V.nodes,V.id);break;case rt.h.POLYGON:break;case rt.h.TEXT:(0,S.L)(V.id,{size:V.size,attribute:V.attribute,source:V.source},at?window.document.getElementById(at):null)}})};K(null===(u=N.svg)||void 0===u?void 0:u.nodes)})(u)})(u,N)})),"test"==(null===(yt=u.source)||void 0===yt?void 0:yt.type)&&((N,u)=>{var K;let nt=()=>{};switch(null===(K=N.source)||void 0===K||null===(K=K.test)||void 0===K?void 0:K.type){case"truefalse":{jQuery("#"+N.id).click(_=>{_.preventDefault(),((N,u,K,nt,at)=>{var V,_;let Q=null===(V=N.source)||void 0===V||null===(V=V.test)||void 0===V||null===(V=V.truefalse)||void 0===V?void 0:V.iscorrect;u.test?u.test.answer?u.test.answer.truefalse={value:N.id,iscorrect:Q}:u.test.answer={truefalse:{value:N.id,iscorrect:Q}}:u.test={answer:{truefalse:{value:N.id,iscorrect:Q}}},null!==(_=u.svg)&&void 0!==_&&_.nodes.find(yt=>{var Ot;return"submit"==(null===(Ot=yt.source)||void 0===Ot||null===(Ot=Ot.test)||void 0===Ot?void 0:Ot.type)})||Mt(N,u,K,nt,{iscorrect:Q},at);let it=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(it,u,N)})(N,u,st.nodeStatus,st.slideStatus,nt)});let V=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(V,u,N);break}case"singlechoice":{jQuery("#"+N.id).click(_=>{_.preventDefault(),((N,u,K,nt,at)=>{var V,_;let Q=null===(V=N.source)||void 0===V||null===(V=V.test)||void 0===V||null===(V=V.singlechoice)||void 0===V?void 0:V.iscorrect;u.test?u.test.answer?u.test.answer.singlechoice={value:N.id,iscorrect:Q}:u.test.answer={singlechoice:{value:N.id,iscorrect:Q}}:u.test={answer:{singlechoice:{value:N.id,iscorrect:Q}}},null!==(_=u.svg)&&void 0!==_&&_.nodes.find(yt=>{var Ot;return"submit"==(null===(Ot=yt.source)||void 0===Ot||null===(Ot=Ot.test)||void 0===Ot?void 0:Ot.type)})||Mt(N,u,K,nt,{iscorrect:Q},at);let it=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(it,u,N)})(N,u,st.nodeStatus,st.slideStatus,nt)});let V=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(V,u,N);break}case"multichoice":{jQuery("#"+N.id).click(_=>{_.preventDefault(),((N,u,K,nt,at)=>{var V,_;let Q=null===(V=N.source)||void 0===V||null===(V=V.test)||void 0===V||null===(V=V.multichoice)||void 0===V?void 0:V.iscorrect;u.test?u.test.answer?u.test.answer.multichoice?u.test.answer.multichoice.find(yt=>yt.value==N.id)?u.test.answer.multichoice=u.test.answer.multichoice.filter(yt=>yt.value!=N.id):u.test.answer.multichoice.push({value:N.id,iscorrect:Q}):u.test.answer.multichoice=[{value:N.id,iscorrect:Q}]:u.test.answer={multichoice:[{value:N.id,iscorrect:Q}]}:u.test={answer:{multichoice:[{value:N.id,iscorrect:Q}]}},null!==(_=u.svg)&&void 0!==_&&_.nodes.find(yt=>{var Ot;return"submit"==(null===(Ot=yt.source)||void 0===Ot||null===(Ot=Ot.test)||void 0===Ot?void 0:Ot.type)})||Mt(N,u,K,nt,{iscorrect:Q},at);let it=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(it,u,N)})(N,u,st.nodeStatus,st.slideStatus,nt)});let V=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(V,u,N);break}case"fill":{var at;jQuery("#"+N.id).on("keyup",'input[type="text"]',_=>{var Q;let it=jQuery("<div/>").css({"font-size":jQuery(_.target).css("font-size"),visibility:"hidden",float:"left"}).text(_.target.value).appendTo(window.document.body);jQuery(_.target).css({width:(null!==(Q=it.width())&&void 0!==Q?Q:0)+30})}).on("keypress",'input[type="text"]',_=>{13===(_.keyCode||_.charCode||_.which)&&(_.preventDefault(),_.stopPropagation(),jQuery(_.target).blur())}).on("change",'input[type="text"]',_=>{var Q,it;let yt=null===(Q=_.target)||void 0===Q?void 0:Q.getAttribute("data-key"),Ot=null===(it=_.target)||void 0===it||null===(it=it.value)||void 0===it?void 0:it.trim();jQuery("#"+N.id).find(`input[type="text"][data-key="${yt}"]`).val(Ot),((N,u,K,nt,at,V)=>{var _,Q,it,yt;let{value:Ot}=null!==(_=null===(Q=N.source)||void 0===Q||null===(Q=Q.test)||void 0===Q||null===(Q=Q.fill)||void 0===Q?void 0:Q.find(dt=>dt.key==`[[${at.key}]]`))&&void 0!==_?_:{},Lt=Ot&&Ot.map(dt=>null==dt?void 0:dt.toLocaleLowerCase()).includes(null===(it=at.value)||void 0===it?void 0:it.toLocaleLowerCase());at.iscorrect=Lt,u.test?u.test.answer?u.test.answer.fill?u.test.answer.fill.find(dt=>dt.key==at.key)?u.test.answer.fill.filter(dt=>dt.key==at.key).forEach(dt=>{dt.value=at.value,dt.iscorrect=at.iscorrect}):u.test.answer.fill.push(at):u.test.answer.fill=[at]:u.test.answer={fill:[at]}:u.test={answer:{fill:[at]}};let pt=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(pt,u,N),null!==(yt=u.svg)&&void 0!==yt&&yt.nodes.find(dt=>{var kt;return"submit"==(null===(kt=dt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)})||Mt(N,u,K,nt,{iscorrect:Lt},V)})(N,u,st.nodeStatus,st.slideStatus,{id:N.id,key:yt,value:Ot},nt)}),null!==(at=u.test)&&void 0!==at&&at.showselection||jQuery("#"+N.id).addClass("hide-selection");let V=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(V,u,N);break}case"matching-empty":{jQuery("#"+N.id).on("touchmove",".ondrag-item",function(_){_.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(_){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${N.size.height/N.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${_.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(_){var Q;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(Q=u.test)&&void 0!==Q&&Q.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),ce(N,u)},drag:function(_){},dragend:function(_){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${N.id} .ondrop-here`).kendoDropTarget({dragenter:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.addClass("focused")},dragleave:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.removeClass("focused")},drop:function(_){if(!_.dropTarget.hasClass("actived"))return;_.dropTarget.removeClass("focused");let Q=_.dropTarget,it=_.draggable.currentTarget;Q.is(":empty")||Q.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),it.appendTo(Q);let yt=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(yt,u,N),((N,u,K,nt,at,V)=>{var _,Q,it;let{key:yt}=null!==(_=null===(Q=N.source)||void 0===Q||null===(Q=Q.test)||void 0===Q?void 0:Q.matching)&&void 0!==_?_:{key:"KIEN"},Ot=at.key==yt;ce(N,u);let Lt={id:N.id,key:null!=yt?yt:"",value:at.key};u.test?u.test.answer?u.test.answer.matching?u.test.answer.matching.find(pt=>pt.id==Lt.id)?u.test.answer.matching.filter(pt=>pt.id==Lt.id).forEach(pt=>{pt.key=Lt.key,pt.value=Lt.value}):u.test.answer.matching.push(Lt):u.test.answer.matching=[Lt]:u.test.answer={matching:[Lt]}:u.test={answer:{matching:[Lt]}},null!==(it=u.svg)&&void 0!==it&&it.nodes.find(pt=>{var dt;return"submit"==(null===(dt=pt.source)||void 0===dt||null===(dt=dt.test)||void 0===dt?void 0:dt.type)})||Mt(N,u,K,nt,{iscorrect:Ot},V)})(N,u,st.nodeStatus,st.slideStatus,{key:it.data("key")},nt)}});let V=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(V,u,N);break}case"matching-content":{jQuery("#"+N.id).on("touchmove",".ondrag-item",function(_){_.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(_){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${N.size.height/N.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${_.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(_){var Q;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(Q=u.test)&&void 0!==Q&&Q.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(_){},dragend:function(_){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${N.id} .ondrop-here`).kendoDropTarget({dragenter:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.addClass("focused")},dragleave:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.removeClass("focused")},drop:function(_){if(!_.dropTarget.hasClass("actived"))return;_.dropTarget.removeClass("focused");let Q=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(Q,u,N),_.draggable.currentTarget.appendTo(_.dropTarget),wt(u,st.nodeStatus,st.slideStatus,nt)}});let V=(0,F.RY)(T.F.TEST_GROUP,"g",void 0,E.L.target);(0,F.kE)(V,u,N);break}case"speech":break;case"submit":jQuery("#"+N.id).click(V=>{V.preventDefault(),((N,u,K,nt,at)=>{var V,_,Q,it,yt;let Ot;var Lt;if(null!=u&&null!==(V=u.test)&&void 0!==V&&null!==(V=V.answer)&&void 0!==V&&V.truefalse)Ot=null==u||null===(Lt=u.test)||void 0===Lt||null===(Lt=Lt.answer)||void 0===Lt||null===(Lt=Lt.truefalse)||void 0===Lt?void 0:Lt.iscorrect;else if(null!=u&&null!==(_=u.test)&&void 0!==_&&null!==(_=_.answer)&&void 0!==_&&_.singlechoice){var pt;Ot=null==u||null===(pt=u.test)||void 0===pt||null===(pt=pt.answer)||void 0===pt||null===(pt=pt.singlechoice)||void 0===pt?void 0:pt.iscorrect}else if(null!=u&&null!==(Q=u.test)&&void 0!==Q&&null!==(Q=Q.answer)&&void 0!==Q&&Q.multichoice){var dt,kt,Tt;Ot=1==[null==u||null===(dt=u.test)||void 0===dt||null===(dt=dt.answer)||void 0===dt||null===(dt=dt.multichoice)||void 0===dt?void 0:dt.length,null==u||null===(kt=u.test)||void 0===kt||null===(kt=kt.answer)||void 0===kt||null===(kt=kt.multichoice)||void 0===kt||null===(kt=kt.map(re=>re.iscorrect?1:0))||void 0===kt?void 0:kt.reduce((re,ae)=>re+ae),null==u||null===(Tt=u.svg)||void 0===Tt||null===(Tt=Tt.nodes)||void 0===Tt||null===(Tt=Tt.filter(re=>{var ae,pe;return"multichoice"==(null===(ae=re.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)&&(null===(pe=re.source)||void 0===pe||null===(pe=pe.test)||void 0===pe||null===(pe=pe.multichoice)||void 0===pe?void 0:pe.iscorrect)}))||void 0===Tt?void 0:Tt.length].filter((re,ae,pe)=>pe.indexOf(re)==ae).length}else if(null!=u&&null!==(it=u.test)&&void 0!==it&&null!==(it=it.answer)&&void 0!==it&&it.fill){var Kt,Qt;Ot=(null==u||null===(Kt=u.test)||void 0===Kt||null===(Kt=Kt.answer)||void 0===Kt||null===(Kt=Kt.fill)||void 0===Kt||null===(Kt=Kt.map(re=>re.iscorrect?1:0))||void 0===Kt?void 0:Kt.reduce((re,ae)=>re+ae))==(null===(Qt=u.svg)||void 0===Qt||null===(Qt=Qt.nodes)||void 0===Qt||null===(Qt=Qt.filter(re=>{var ae;return"fill"==(null===(ae=re.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===Qt?void 0:Qt.length)}else if(null!=u&&null!==(yt=u.test)&&void 0!==yt&&null!==(yt=yt.answer)&&void 0!==yt&&yt.matching){var Yt,le;Ot=(null===(Yt=u.svg)||void 0===Yt||null===(Yt=Yt.nodes)||void 0===Yt||null===(Yt=Yt.filter(re=>{var ae;return"matching-empty"==(null===(ae=re.source)||void 0===ae||null===(ae=ae.test)||void 0===ae?void 0:ae.type)}))||void 0===Yt?void 0:Yt.length)==((null==u||null===(le=u.test)||void 0===le||null===(le=le.answer)||void 0===le?void 0:le.matching)||[]).map(re=>re.key==re.value?1:0).reduce((re,ae)=>re+ae)}Mt(N,u,K,nt,{iscorrect:Ot},at)})(N,u,st.nodeStatus,st.slideStatus,nt)})}})(u,N)};var ut=f(1281),Gt=f(6153),P=f(3069),A=f(7945),d=f(3477),b=f(745),H=f(6407),Ct=f(3617),Nt=f(4669);const Zt=(N,u,K)=>{if(K.slideStatus!=st.slideStatus||!u.length)return;let nt=u.shift(),at=N.filter(it=>{var yt;return(null!==(yt=it.idx)&&void 0!==yt?yt:0)==nt});if(!at.length)return;let V=Math.max.apply(null,at.map(it=>{var yt;return null!==(yt=it.time)&&void 0!==yt?yt:0})),_=!1,Q=V<.5?0:setTimeout(()=>{_||(_=!0,Zt(N,u,K))},1e3*V);Ht(N,u,at,0,K,{idx:nt,total:at.length,counter:0,isRecursive:_,timeoutRecursive:Q,maxTimeCoundown:V,uid:Math.floor(1e9*Math.random())})},Ht=(N,u,K,nt,at,V)=>{if(at.slideStatus!=st.slideStatus)return;let _=K[nt];if(_){switch(_.type){case rt.h.GROUP:break;case rt.h.CIRCLE:(0,ut.K)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.ELLIPSE:(0,Gt.W)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.LINE:(0,P.q)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.RECT:(0,A.a)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.POLYGON:(0,d.u)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.POLYLINE:(0,Ct.E)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.FOREIGNOBJECT:(0,b.$)(_.id,{size:_.size,attribute:_.attribute,style:_.style,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.IMAGE:(0,m.B)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.TEXT:(0,S.L)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.TSPAN:(0,Nt.M)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.PATH:(0,H.X)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null)}ft(at.slide,_,at,()=>{V.counter+=1,V.maxTimeCoundown<.5&&V.counter>=V.total&&(V.total=V.counter=0,V.isRecursive||(clearTimeout(V.timeoutRecursive),V.isRecursive=!0,setTimeout(()=>{Zt(N,u,at)},250)))}),Ht(N,u,K,++nt,at,V)}},st=new class zt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(u){this._dataSource=u.data||{},E.L.variable.set=u.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var u,K;return null!==(u=null===(K=this._dataSource)||void 0===K||null===(K=K.slides)||void 0===K?void 0:K.length)&&void 0!==u?u:0}get slides(){var u;return(null===(u=this._dataSource)||void 0===u?void 0:u.slides)||[]}get slide(){var u;return((null===(u=this._dataSource)||void 0===u?void 0:u.slides)||[])[this._slideIdx]||{}}findNode(u){var K;let nt=null===(K=this._dataSource)||void 0===K||null===(K=K.slides)||void 0===K?void 0:K.find((pt,dt)=>dt==this._slideIdx),at=null==nt?void 0:nt.svg,V=(pt,dt)=>{let kt=null==pt?void 0:pt.find(Qt=>Qt.id==u);if(kt)return kt.pid=dt,kt;let Tt=0,Kt=pt.length||0;for(;Tt<Kt&&!kt&&(kt=V(pt[Tt].nodes||[],pt[Tt].id),!kt);)Tt++;return kt},_=V((null==at?void 0:at.nodes)||[]);var Q,it,yt,Ot,Lt;return _?(_.style=null!==(Q=_.style)&&void 0!==Q?Q:{},_.source=null!==(it=_.source)&&void 0!==it?it:{},_.animate=null!==(yt=_.animate)&&void 0!==yt?yt:{},_.interactive=null!==(Ot=_.interactive)&&void 0!==Ot?Ot:{},_.variable=null!==(Lt=_.variable)&&void 0!==Lt?Lt:{},_):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(u,K,nt){var at;let V;var _,Q;if(this.refreshNodeStatus(),this.refreshSlideStatus(),nt)V=null===(_=this._dataSource)||void 0===_||null===(_=_.slides)||void 0===_?void 0:_.find(Lt=>Lt.code==nt||Lt.id==nt),V&&(this._slideIdx=(null===(Q=this._dataSource)||void 0===Q||null===(Q=Q.slides)||void 0===Q?void 0:Q.indexOf(V))||0);else if(K){var it,yt;V=null===(it=this._dataSource)||void 0===it||null===(it=it.slides)||void 0===it?void 0:it.find(Lt=>Lt.id==K),V&&(this._slideIdx=(null===(yt=this._dataSource)||void 0===yt||null===(yt=yt.slides)||void 0===yt?void 0:yt.indexOf(V))||0)}else this._slideIdx=Math.min(Math.max(u||0,0),this.slideTotal-1),V=this.slide;if(V){var Ot;qt(E.L.container,E.L.svg,V,!0),null===(Ot=jQuery(E.L.svg).find("#"+T.F.BACKGROUND_GROUP))||void 0===Ot||Ot.empty();let Lt=(0,F.RY)(T.F.BACKGROUND_GROUP,"g",void 0,E.L.svg);(0,F.I6)(Lt,V),(N=>{var u,K,nt,at;let V=st.nodeStatus,_=st.slideStatus;null===(u=N.svg)||void 0===u||u.nodes.forEach(it=>{it.pid=Math.ceil(1e9*Math.random()),(0,W.v)(it.pid)});let Q=null===(K=N.svg)||void 0===K||null===(K=K.nodes)||void 0===K?void 0:K.map(it=>{var yt;return null!==(yt=it.idx)&&void 0!==yt?yt:0}).filter((it,yt,Ot)=>Ot.indexOf(it)==yt).sort((it,yt)=>(null!=it?it:0)-(null!=yt?yt:0));Zt(null!==(nt=null===(at=N.svg)||void 0===at?void 0:at.nodes)&&void 0!==nt?nt:[],null!=Q?Q:[],{slide:N,nodeStatus:V,slideStatus:_})})(V)}this.changeSlide(this.slides,null===(at=this.slide)||void 0===at?void 0:at.id,this.slideIdx,this.slides.length,V)}set onChangeSlide(u){this._fnChangeSlides.push(u)}changeSlide(u,K,nt,at,V){this._fnChangeSlides.forEach(_=>_(u,K,nt,at,V))}},qt=(N,u,K,nt)=>{var at,V,_,Q;let it=window.document.querySelector(u);var yt;it||(it=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(yt=window.document.querySelector(N))||void 0===yt||yt.appendChild(it)),nt&&(it.textContent=null);let{x:Ot,y:Lt,width:pt,height:dt}=null!==(at=null==K||null===(V=K.svg)||void 0===V?void 0:V.viewBox)&&void 0!==at?at:E.L.screen.frameSize;it.setAttributeNS(null,"viewBox",Ot+" "+Lt+" "+pt+" "+dt),it.setAttribute("id",u.replace("#",""));var Yt,le,kt=null!==(_=jQuery(N).width())&&void 0!==_?_:1080,Tt=null!==(Q=jQuery(N).height())&&void 0!==Q?Q:1080,Qt=pt/dt;Qt>=kt/Tt?le=(Yt=kt)/Qt:Yt=(le=Tt)*Qt,it.setAttributeNS(null,"width",Yt.toString()),it.setAttributeNS(null,"height",le.toString())}},7050:(he,Bt,f)=>{f.d(Bt,{M:()=>rt,a:()=>E});var T=f(5619);const E=(vt,k,c)=>{var R;let{value:S}=null!==(R=vt.animate)&&void 0!==R?R:{};rt(vt.id,{node:vt,value:S,nodeStatus:k,slideStatus:c},()=>{})},rt=(vt,k,c)=>{var R;if(!k.value)return void c();let U=jQuery("#"+vt).parents("g");if(!U.length)return void c();let{size:S}=k.node;U.css("transform-origin",`${S.x+S.width/2}px ${S.y+S.height/2}px`);let W="",x=null!==(R=k.iteration)&&void 0!==R?R:0,et=[];(k.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?et.push(k.value):k.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(k.value)?(et.push("animation"),et.push(`animation-${k.value}`)):(et.push("animate__animated"),et.push(`animate__${k.value}`)):(et.push("animation"),et.push("animation-fadein")),x<0?(et.push("animation-iteration-infinite"),c(),c=function(){}):x>0&&et.push("animation-iteration-"+(x+1)),W=et.join(" "),function(mt){let v=function(){U.data("animate-running")?U.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){U.data("animate-running",!1),setTimeout(function(){mt()},100)}):mt()};U.hasClass("animation")?setTimeout(function(){v()}):v()}(function(){var mt;j(vt),(x>0||x<0)&&U.one("animationiteration",function(){k.slideStatus===T.J.slideStatus||(U.data("animate-running",!1),j(vt),k.slideStatus===T.J.slideStatus&&c())}),U.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(U.data("animate-running",!1),j(vt),k.finish){default:case 0:case 1:break;case 2:var v;rt(vt,{node:k.node,value:null===(v=k.node.animate)||void 0===v?void 0:v.out,nodeStatus:k.nodeStatus,slideStatus:k.slideStatus},()=>{U.addClass("hide")})}k.slideStatus===T.J.slideStatus&&c()}),U.attr("data-class",null!==(mt=U.attr("class"))&&void 0!==mt?mt:""),U.addClass(W),U.data("animate-running",!0)})},j=function(vt){var k,c,R=jQuery("#"+vt).parents("g"),U=null===(k=R.attr("class"))||void 0===k?void 0:k.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),S=null===(c=R.attr("class"))||void 0===c?void 0:c.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);U&&U.forEach(function(x){jQuery(R).removeClass(x)}),S&&S.forEach(function(x){jQuery(R).removeClass(x)});let W=R.attr("data-class");W&&(R.attr("class",W),R.removeAttr("data-class")),jQuery(R).data("animation-running",!1)}},8946:(he,Bt,f)=>{f.d(Bt,{h:()=>rt});var T=f(5619),E=f(7050);const rt=(vt,k,c)=>{var R;if(!k.value)return void c();let U=jQuery("#"+vt).parents("g");if(!U.length)return void c();let{size:S}=k.node;U.css("transform-origin",`${S.x+S.width/2}px ${S.y+S.height/2}px`);let W="",x=null!==(R=k.iteration)&&void 0!==R?R:0,et=[];(k.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?et.push(k.value):(et.push("animation"),et.push(k.value?"animation-"+k.value:"animation-fadein")),x<0?(et.push("animation-iteration-infinite"),c(),c=function(){}):x>0&&et.push("animation-iteration-"+(x+1)),W=et.join(" "),function(mt){let v=function(){U.data("animate-running")?U.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){U.data("animate-running",!1),setTimeout(function(){mt()},100)}):mt()};U.hasClass("animation")?setTimeout(function(){v()}):v()}(function(){var mt;j(vt),(x>0||x<0)&&U.one("animationiteration",function(){k.slideStatus===T.J.slideStatus||(U.data("animate-running",!1),j(vt),k.slideStatus===T.J.slideStatus&&c())}),U.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(U.data("animate-running",!1),j(vt),k.finish){default:case 0:case 1:break;case 2:var v;(0,E.M)(vt,{node:k.node,value:null===(v=k.node.animate)||void 0===v?void 0:v.out,nodeStatus:k.nodeStatus,slideStatus:k.slideStatus},()=>{U.addClass("hide")})}k.slideStatus===T.J.slideStatus&&c()}),U.attr("data-class",null!==(mt=U.attr("class"))&&void 0!==mt?mt:""),U.addClass(W),U.data("animate-running",!0)})},j=function(vt){var k,c=jQuery("#"+vt).parents("g"),R=null===(k=c.attr("class"))||void 0===k?void 0:k.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);R&&R.forEach(function(S){jQuery(c).removeClass(S)});let U=c.attr("data-class");U&&(c.attr("class",U),c.removeAttr("data-class")),jQuery(c).data("animation-running",!1)}},7657:(he,Bt,f)=>{f.d(Bt,{c:()=>vt});var T=f(9506),E=f(5619),rt=f(5970),j=f(7050);const vt=(c,R,U)=>{var S;if(!R.points||!R.points.length)return void U();let W=jQuery("#"+c),et=function k(c){let R=[];2===c.length&&c.splice(1,0,[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]);let et,tt,mt,U=1,S=c.length;for(;U<S;){if(et=c[U-1],tt=c[U],mt=c[U+1],(Math.abs(et[0]-tt[0])>=15||Math.abs(et[1]-tt[1])>=15)&&Math.pow(et[0]-tt[0],2)+Math.pow(et[1]-tt[1],2)>=Math.pow(15,2)&&mt&&(Math.abs(et[0]-mt[0])<=20||Math.abs(et[1]-mt[1])<=20)&&Math.pow(et[0]-mt[0],2)+Math.pow(et[1]-mt[1],2)<=Math.pow(20,2))R.push(tt);else{let m=tt[0]-et[0],M=tt[1]-et[1],X=Math.max(Math.abs(m),Math.abs(M));for(var v=0;v<X;v+=15)R.push([et[0]+m*v/X,et[1]+M*v/X])}U++}return S>0&&(R.splice(0,0,c[0]),R.push(c[S-1])),R}((ot=>{if(1==ot.length){let{size:G}=R.node;return[[G.x+G.width/2,G.y+G.height/2],...ot]}return[...ot]})(R.points||[])),tt=null!==(S=R.iteration)&&void 0!==S?S:0;if(tt<0&&(U(),U=function(){}),W.data("work-running")&&tt<0)return;W.data("work-running",!0);let F,mt=et.length,v=Math.max(20,1e3*(R.time||3)/mt),{id:m,type:M,size:X,attribute:lt}=E.J.findNode(c),J=function(ot){if(R.slideStatus!==E.J.slideStatus)return W.data("work-running",!1),void(R.slideStatus===E.J.slideStatus&&U());if(ot<mt){let O=et[ot];O&&(F=Object.assign({},X,{x:O[0]-X.width/2,y:O[1]-X.height/2}),Object.assign(lt,(0,T.xW)(M,F,lt)),(0,rt.tD)(window.document.getElementById(m),lt),setTimeout(function(){J(++ot)},v))}else if(tt>0)tt--,J(1);else if(tt<0)J(1);else switch(W.data("work-running",!1),R.slideStatus===E.J.slideStatus&&U(),R.finish){default:case 0:break;case 1:Object.assign(lt,(0,T.xW)(M,X,lt)),(0,rt.tD)(window.document.getElementById(m),lt);break;case 2:var G;(0,j.M)(R.node.id,{node:R.node,value:null===(G=R.node.animate)||void 0===G?void 0:G.out,nodeStatus:R.nodeStatus,slideStatus:R.slideStatus},()=>{W.addClass("hide")})}};J(1)}},6769:(he,Bt,f)=>{f.d(Bt,{d:()=>rt});var T=f(6611),E=f(5619);const rt=(j,vt,k,c,R)=>{var U,S,W,x,et,tt,mt;if(c.slideStatus!=E.J.slideStatus)return vt.async&&"change-slide"!=vt.async?void 0:void R();if(c.nodeStatus!=E.J.nodeStatus&&(!vt.async||"change-node"==vt.async))return void R();if(!(null!==(U=vt.source)&&void 0!==U&&U.path||null!==(S=vt.source)&&void 0!==S&&S.url))return console.warn(`${j} -> audio no source!`),R(),void(R=()=>{});var v=jQuery("#"+j);let m=null!==(W=vt.iteration)&&void 0!==W?W:0;if(m<0&&(R(),R=function(){}),!(v.data("audio-running")&&m<0)){v.data("audio-running",!0);var M=function(lt){lt.pause(),lt.remove(),v.data("audio-running",!1)},X=new Audio;return X.autoplay=!0,X.loop=0!=m,X.preload="auto",X.controls=!0,X.setAttributeNode(document.createAttribute("playsinline")),X.addEventListener("canplay",function(){var lt=X.play();lt&&lt.then(function(F){var J;v.data("audio-running",!0),"time"==vt.async?setTimeout(()=>{c.slideStatus===E.J.slideStatus&&(M(X),R(),R=()=>{})},1e3*(null!==(J=vt.time)&&void 0!==J?J:1)):"non-stop"==vt.async&&(R(),R=()=>{})}).catch(function(F){v.data("audio-running",!1),c.slideStatus===E.J.slideStatus&&(R(),R=()=>{})})}),X.addEventListener("timeupdate",function(){switch(vt.async){case"time":case"change-slide":c.slideStatus!==E.J.slideStatus&&(M(this),R(),R=()=>{});break;case"finish-action":k.total>=2&&k.total-k.counter==1&&(M(this),R(),R=()=>{});break;default:case"change-node":c.nodeStatus!==E.J.nodeStatus&&(M(this),R(),R=()=>{});case"non-stop":}}),X.addEventListener("canplaythrough",function(){this.loop&&(m>0?m--:0==m&&(this.loop=!1))}),X.addEventListener("play",function(){}),X.addEventListener("pause",function(){}),X.addEventListener("ended",function(){this.remove(),v.data("audio-running",!1),c.slideStatus===E.J.slideStatus&&(R(),R=()=>{})}),X.onerror=function(){this.remove(),v.data("audio-running",!1),c.slideStatus===E.J.slideStatus&&(R(),R=()=>{})},X.src=(null!==(x=vt.source)&&void 0!==x&&x.path?(null===(et=T.L.config)||void 0===et?void 0:et.readfileuploadurl)+(null===(tt=vt.source)||void 0===tt?void 0:tt.path):null===(mt=vt.source)||void 0===mt?void 0:mt.url)||"",X}}},334:(he,Bt,f)=>{f.d(Bt,{J:()=>U});var T=f(6611),E=f(5619),rt=f(8946),j=f(7657),vt=f(6769),k=f(3591),c=f(2241),R=f(7050);const U=(S,W,x,et)=>{var tt,mt,v;let m={total:0,counter:0},{triggershow:M,triggerrun:X,triggerhide:lt,action:F,audio:J,slide:ot,media:G}=null!==(tt=null===(mt=S.interactive)||void 0===mt?void 0:mt.click)&&void 0!==tt?tt:{};if(console.log(`node(${S.id}) | nodeStatus(${W}) | slideStatus(${x}) | click`),M){let{id:Rt,ids:xt,time:_t,async:ce}=M;"asynctrue"==ce?(0,k.GD)({id:Rt,ids:xt,nodeStatus:W,slideStatus:x}):"time"==ce&&setTimeout(()=>{(0,k.GD)({id:Rt,ids:xt,nodeStatus:W,slideStatus:x})},1e3*(null!=_t?_t:0))}if(X){let{id:Rt,ids:xt,time:_t,async:ce}=X;"asynctrue"==ce?(0,k.MF)({id:Rt,ids:xt,nodeStatus:W,slideStatus:x}):"time"==ce&&setTimeout(()=>{(0,k.MF)({id:Rt,ids:xt,nodeStatus:W,slideStatus:x})},1e3*(null!=_t?_t:0))}if(lt){let{id:Rt,ids:xt,time:_t,async:ce}=lt;"asynctrue"==ce?(0,k.vi)({id:Rt,ids:xt,nodeStatus:W,slideStatus:x}):"time"==ce&&setTimeout(()=>{(0,k.vi)({id:Rt,ids:xt,nodeStatus:W,slideStatus:x})},1e3*(null!=_t?_t:0))}let O=()=>{setTimeout(()=>{if(m.counter>=m.total){if(et&&et(),M){let{id:Rt,ids:xt,async:_t}=M;(!_t||"asyncfalse"==_t)&&(0,k.GD)({id:Rt,ids:xt,nodeStatus:W,slideStatus:x})}if(X){let{id:Rt,ids:xt,async:_t}=X;(!_t||"asyncfalse"==_t)&&(0,k.MF)({id:Rt,ids:xt,nodeStatus:W,slideStatus:x})}if(lt){let{id:Rt,ids:xt,async:_t}=lt;(!_t||"asyncfalse"==_t)&&(0,k.vi)({id:Rt,ids:xt,nodeStatus:W,slideStatus:x})}}})};if(null!=F&&F.value){m.total+=1;let Rt=()=>{m.counter+=1,O()};switch(null==F?void 0:F.value){case"hide":var gt;(0,R.M)(S.id,{node:S,value:null===(gt=S.animate)||void 0===gt?void 0:gt.out,nodeStatus:W,slideStatus:x},()=>{jQuery("#"+S.id).addClass("hide"),Rt()});break;case"points":{let{points:xt,time:_t,iteration:ce,finish:q}=F;xt&&(0,j.c)(S.id,{node:S,points:xt,time:_t,iteration:ce,finish:q,nodeStatus:W,slideStatus:x},Rt);break}default:{let{value:xt,time:_t,iteration:ce,finish:q}=F;(0,rt.h)(S.id,{node:S,value:xt,time:_t,iteration:ce,finish:q,nodeStatus:W,slideStatus:x},Rt);break}}}if(null!=J&&null!==(v=J.source)&&void 0!==v&&v.path){m.total+=1;let Rt=()=>{m.counter+=1,O()};(0,vt.d)(S.id,J,m,{nodeStatus:W,slideStatus:x},Rt)}if(m.total||O(),null!=ot&&ot.id)switch(ot.id){case-1:E.J.runSlide(E.J.slideIdx-1);break;case-2:E.J.runSlide(E.J.slideIdx+1);break;default:var jt;E.J.runSlide(void 0,ot.id,null===(jt=ot.code)||void 0===jt?void 0:jt.toString())}if(null!=G&&G.type){var It;let xt=`<div class="popup-media-viewer"><iframe src="${(0,c._)({readfileuploadurl:null===(It=T.L.config)||void 0===It?void 0:It.readfileuploadurl,type:null==G?void 0:G.type,oss:null==G?void 0:G.oss,path:null==G?void 0:G.path,url:null==G?void 0:G.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,_t=jQuery(xt).appendTo(window.document.body);_t.find(".btn-close").click(function(ce){ce.preventDefault(),_t.remove()})}}},3591:(he,Bt,f)=>{f.d(Bt,{GD:()=>j,MF:()=>vt,vi:()=>k});var T=f(5619),E=f(334),rt=f(7050);const j=c=>{c.id?jQuery("#"+c.id).removeClass("hide"):c.ids&&c.ids.forEach(R=>{jQuery("#"+R).removeClass("hide")})},vt=c=>{c.id?(jQuery("#"+c.id).removeClass("hide"),(0,E.J)(T.J.findNode(c.id),c.nodeStatus,c.slideStatus)):c.ids&&c.ids.forEach(R=>{jQuery("#"+R).removeClass("hide"),(0,E.J)(T.J.findNode(R),c.nodeStatus,c.slideStatus)})},k=c=>{if(c.id){var R;let U=T.J.findNode(c.id);(0,rt.M)(c.id,{node:U,value:null===(R=U.animate)||void 0===R?void 0:R.out,nodeStatus:c.nodeStatus,slideStatus:c.slideStatus},()=>{jQuery("#"+c.id).addClass("hide")})}else c.ids&&c.ids.forEach(U=>{var S;let W=T.J.findNode(U);(0,rt.M)(U,{node:W,value:null===(S=W.animate)||void 0===S?void 0:S.out,nodeStatus:c.nodeStatus,slideStatus:c.slideStatus},()=>{jQuery("#"+U).addClass("hide")})})}},5970:(he,Bt,f)=>{f.d(Bt,{cR:()=>lt,rN:()=>ot,t8:()=>F,fn:()=>G,RY:()=>Rt,tD:()=>O,KG:()=>jt,c_:()=>gt,s6:()=>J,I6:()=>ut,in:()=>xt,IA:()=>ft,KP:()=>wt,AE:()=>_t,xJ:()=>Mt,D_:()=>ce,kE:()=>Gt});var T=f(1999),E=f(7873),rt=f(6315),vt=/^#?[a-fA-F0-9]+$/;const R=(P,A)=>{var d;if("none"==(P=null!==(d=P)&&void 0!==d?d:""))return"none";if("transparent"==P)return"rgba(0,0,0,0)";if(P.includes("rgba("))return P;if(P.includes("rgb(")&&(P=(0,rt.w)(P)),!(P=P.replace(/[^0-9a-fA-F]/g,"")))return"";if(!vt.test(P))return console.error(`hex2rgba -> ${P}: first argument has invalid hexadecimal characters`),"";if("#"===P[0]&&(P=P.slice(1)),3===P.length){let H=P.split("");H.splice(2,0,P[2]),H.splice(1,0,P[1]),H.splice(0,0,P[0]),P=H.join("")}if(6!==P.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var b=[parseInt(P.slice(0,2),16),parseInt(P.slice(2,4),16),parseInt(P.slice(4,6),16)];return A="number"==typeof A?A:parseFloat(A),b.push(A>=0&&A<=1?A:1),"rgba("+b.join(",")+")"};var U=f(2241),S=f(8779),W=f(6611),x=f(9841),et=f(7945),tt=f(9173),mt=f(1281),v=f(5619),m=f(745),M=f(6847),X=f(9506);class lt{constructor(A,d){let b=window.document.querySelector(d);var H;b||(b=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(H=window.document.querySelector(A))||void 0===H||H.appendChild(b));let{svgViewBox:Ct,svgSize:Nt}=W.L.screen.init();b.setAttributeNS(null,"viewBox",`${Ct.x} ${Ct.y} ${Ct.width} ${Ct.height}`),b.setAttribute("id",d.replace("#","")),b.style.display="block",b.style.width=`${Nt.width}px`,b.style.height=`${Nt.height}px`,b.style.backgroundColor="#fafafa",b.style.cursor="default"}}const F=P=>{jQuery(W.L.target).find("#"+E.F.BACKGROUND_GROUP).empty();let A=Rt(E.F.BACKGROUND_GROUP,"g",void 0,W.L.target);ut(A,P),(()=>{let d=window.document.getElementById(null==P?void 0:P.id);jQuery(d).find("#"+E.F.BACKGROUND_GROUP).empty();let b=Rt(E.F.BACKGROUND_GROUP,"g",void 0,d);ut(b,P)})()},J=()=>{let P=W.L.screen.svgViewBox,A=W.L.screen.svgSize;W.L.target&&(W.L.target.setAttributeNS(null,"viewBox",`${P.x} ${P.y} ${P.width} ${P.height}`),W.L.target.style.left=`${A.x}px`,W.L.target.style.top=`${A.y}px`,W.L.target.style.width=`${A.width}px`,W.L.target.style.height=`${A.height}px`)},ot=()=>{jQuery(W.L.target).find(">*:not(defs)").remove()},G=(P,A,d,b,H)=>{let Ct;return P?(Ct=jQuery(H||W.L.target).find("#"+P).get(0),Ct||(Ct=window.document.createElementNS("http://www.w3.org/2000/svg",d),Ct.setAttribute("id",P),A==T.h.FOREIGNOBJECT&&Ct.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(Ct).appendTo(H||W.L.target))):(Ct=window.document.createElementNS("http://www.w3.org/2000/svg",d),jQuery(Ct).appendTo(H||W.L.target)),null!=b&&b.attribute&&O(Ct,null==b?void 0:b.attribute),null!=b&&b.style&&gt(Ct,null==b?void 0:b.style),null!=b&&b.source&&jt(Ct,A,null==b?void 0:b.source),Ct},O=(P,A)=>{return jQuery(P).attr((d=Object.assign({},A||{}),null===(b=Object.keys(d))||void 0===b||b.forEach(Nt=>{switch(Nt){case"fill":break;case"fillRule":var Xt;Object.assign(d,{"fill-rule":null!==(Xt=d.fillRule)&&void 0!==Xt?Xt:null,fillRule:null});break;case"stroke":var Zt;Object.assign(d,{"stroke-width":null!==(Zt=d.strokeWidth)&&void 0!==Zt?Zt:null,strokeWidth:null});break;case"strokeLinecap":var Ht;Object.assign(d,{"stroke-linecap":null!==(Ht=d.strokeLinecap)&&void 0!==Ht?Ht:null,strokeLinecap:null});break;case"strokeLinejoin":var zt;Object.assign(d,{"stroke-linejoin":null!==(zt=d.strokeLinejoin)&&void 0!==zt?zt:null,strokeLinejoin:null});break;case"strokeMiterlimit":var st;Object.assign(d,{"stroke-miterlimit":null!==(st=d.strokeMiterlimit)&&void 0!==st?st:null,strokeMiterlimit:null});break;case"strokeDasharray":var qt;Object.assign(d,{"stroke-dasharray":null!==(qt=d.strokeDasharray)&&void 0!==qt?qt:null,strokeDasharray:null});break;case"strokeDasharrays":var N,u;Object.assign(d,{"stroke-dasharray":null!==(N=null===(u=d.strokeDasharrays)||void 0===u?void 0:u.join(" "))&&void 0!==N?N:null,strokeDasharrays:null});break;case"fontFamily":var K;Object.assign(d,{"font-family":null!==(K=d.fontFamily)&&void 0!==K?K:null,fontFamily:null});break;case"fontWeight":var nt;Object.assign(d,{"font-weight":null!==(nt=d.fontWeight)&&void 0!==nt?nt:null,fontWeight:null});break;case"fontStyle":var at;Object.assign(d,{"font-style":null!==(at=d.fontStyle)&&void 0!==at?at:null,fontStyle:null});break;case"fontSize":var V;Object.assign(d,{"font-size":null!==(V=d.fontSize)&&void 0!==V?V:null,fontSize:null});break;case"textLength":Object.assign(d,{textLength:d.textLength?`${d.textLength}px`:null});break;case"letterSpacing":var _;Object.assign(d,{"letter-spacing":null!==(_=d.letterSpacing)&&void 0!==_?_:null,letterSpacing:null});break;case"wordSpacing":var Q;Object.assign(d,{"word-spacing":null!==(Q=d.wordSpacing)&&void 0!==Q?Q:null,wordSpacing:null});break;case"alignmentBaseline":var it;Object.assign(d,{"alignment-baseline":null!==(it=d.alignmentBaseline)&&void 0!==it?it:null,alignmentBaseline:null});break;case"dominantBaseline":var yt;Object.assign(d,{"dominant-baseline":null!==(yt=d.dominantBaseline)&&void 0!==yt?yt:null,dominantBaseline:null});break;case"textAnchor":var Ot;Object.assign(d,{"text-anchor":null!==(Ot=d.textAnchor)&&void 0!==Ot?Ot:null,textAnchor:null});break;case"textDecoration":var Lt;Object.assign(d,{"text-decoration":null!==(Lt=d.textDecoration)&&void 0!==Lt?Lt:null,textDecoration:null});break;case"transformOrigin":var pt;Object.assign(d,{"transform-origin":null!==(pt=d.transformOrigin)&&void 0!==pt?pt:null,transformOrigin:null})}}),Object.assign({},null!=d?d:{},{fill:null!=d&&d.fill?R(d.fill,null!==(H=null==d?void 0:d.fillOpacity)&&void 0!==H?H:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=d&&d.stroke?R(d.stroke,null!==(Ct=null==d?void 0:d.strokeOpacity)&&void 0!==Ct?Ct:1):"rgba(0,0,0,0)",strokeOpacity:null}))),P;var d,b,H,Ct},gt=(P,A)=>{return jQuery(P).css((d=Object.assign({},A||{}),null===(b=Object.keys(d))||void 0===b||b.forEach(H=>{switch(H){case"padding":Object.assign(d,{padding:d.padding?`${d.padding}px`:null});break;case"borderWidth":var Ct;Object.assign(d,d.borderWidth&&d.borderColor?{"border-width":`${d.borderWidth}px`,"border-style":d.borderStyle||"solid","border-color":R(d.borderColor,null!==(Ct=d.borderOpacity)&&void 0!==Ct?Ct:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(d,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(d,{"border-radius":d.borderRadius?`${d.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Nt;Object.assign(d,d.backgroundColor?{"background-color":R(d.backgroundColor,null!==(Nt=d.backgroundOpacity)&&void 0!==Nt?Nt:1)}:{"background-color":""}),Object.assign(d,{backgroundColor:null,backgroundOpacity:null})}}),d)),P;var d,b},jt=(P,A,d)=>{switch(A){case T.h.TEXT:var b,H;jQuery(P).text(null!==(b=null==d||null===(H=d.text)||void 0===H?void 0:H.textContent)&&void 0!==b?b:"");break;case T.h.TSPAN:var Ct,Nt;jQuery(P).text(null!==(Ct=null==d||null===(Nt=d.text)||void 0===Nt?void 0:Nt.textContent)&&void 0!==Ct?Ct:"");break;case T.h.IMAGE:var Xt,Zt,Ht,zt,st;jQuery(P).attr("href",(null==d||null===(Xt=d.image)||void 0===Xt?void 0:Xt.base64)||(null!=d&&null!==(Zt=d.image)&&void 0!==Zt&&Zt.path?(null===(Ht=W.L.config)||void 0===Ht?void 0:Ht.readfileuploadurl)+(null==d||null===(zt=d.image)||void 0===zt?void 0:zt.path):null==d||null===(st=d.image)||void 0===st?void 0:st.url)||"");break;case T.h.FOREIGNOBJECT:switch(null==d?void 0:d.type){case"text":var qt,N;if(null!==(qt=d.text)&&void 0!==qt&&qt.variableKeywords&&null!==(N=d.text)&&void 0!==N&&N.variableKeywords.length){var u;let h=W.L.variable.getKeys(),C=(null===(u=d.text)||void 0===u?void 0:u.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";d.text.variableKeywords.forEach(w=>{var z=w.replace(/[^a-zA-Z0-9_]/gm,"");if(h.indexOf(z)>=0){var D=W.L.variable.getValue(z);C=C.replace(w,D)}}),jQuery(P).text(C)}else{var K;jQuery(P).text((null===(K=d.text)||void 0===K?void 0:K.textContent)||"")}break;case"html":{var nt,at,V;let h=(null==d||null===(nt=d.html)||void 0===nt?void 0:nt.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>';if(null!==(at=d.html)&&void 0!==at&&at.variableKeywords&&null!==(V=d.html)&&void 0!==V&&V.variableKeywords.length){let C=W.L.variable.getKeys();d.html.variableKeywords.forEach(w=>{var z=w.replace(/[^a-zA-Z0-9_]/gm,"");if(C.indexOf(z)>=0){var D=W.L.variable.getValue(z);h=h.replace(w,D)}})}jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${h}</div>`).find("img[path],video[path],iframe[path]").each((C,w)=>{var z,D;w.setAttribute("src",(null!==(z=null===(D=W.L.config)||void 0===D?void 0:D.readfileuploadurl)&&void 0!==z?z:"")+w.getAttribute("path")),w.removeAttribute("path")});break}case"input":var _,Q,it,yt;if(null!==(_=d.input)&&void 0!==_&&_.input)jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(it=null===(yt=d.input)||void 0===yt?void 0:yt.placeholder)&&void 0!==it?it:""}" maxlength="100" /></div>`);else if(null!==(Q=d.input)&&void 0!==Q&&Q.textarea){var Ot,Lt;jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(Ot=null===(Lt=d.input)||void 0===Lt?void 0:Lt.placeholder)&&void 0!==Ot?Ot:""}" maxlength="1000"></textarea></div>`)}break;case"image":var pt,dt,kt,Tt,Kt;jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(pt=d.image)||void 0===pt?void 0:pt.base64)||(null!==(dt=d.image)&&void 0!==dt&&dt.path?(null===(kt=W.L.config)||void 0===kt?void 0:kt.readfileuploadurl)+(null===(Tt=d.image)||void 0===Tt?void 0:Tt.path):null===(Kt=d.image)||void 0===Kt?void 0:Kt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Qt,Yt,le,re;jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Qt=d.iframe)&&void 0!==Qt&&Qt.path?(null===(Yt=W.L.config)||void 0===Yt?void 0:Yt.readfileuploadurl)+(null===(le=d.iframe)||void 0===le?void 0:le.path):null===(re=d.iframe)||void 0===re?void 0:re.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var ae,pe,_e,Se,be;let h=(0,U._)({readfileuploadurl:null===(ae=W.L.config)||void 0===ae?void 0:ae.readfileuploadurl,type:null===(pe=d.embed)||void 0===pe?void 0:pe.type,oss:null===(_e=d.embed)||void 0===_e?void 0:_e.oss,path:null===(Se=d.embed)||void 0===Se?void 0:Se.path,url:null===(be=d.embed)||void 0===be?void 0:be.url});jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${h}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var Ee,ve;jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(Ee=null===(ve=d.svg)||void 0===ve?void 0:ve.svgContent)&&void 0!==Ee?Ee:""}</div>`);break;case"test":{var Re,Me,Fe,Ve;let h=(null==d||null===(Re=d.html)||void 0===Re?void 0:Re.htmlContent)||"";if(null!==(Me=d.html)&&void 0!==Me&&Me.variableKeywords&&null!==(Fe=d.html)&&void 0!==Fe&&Fe.variableKeywords.length){let C=W.L.variable.getKeys();d.html.variableKeywords.forEach(w=>{var z=w.replace(/[^a-zA-Z0-9_]/gm,"");if(C.indexOf(z)>=0){var D=W.L.variable.getValue(z);h=h.replace(w,D)}})}switch(null==d||null===(Ve=d.test)||void 0===Ve?void 0:Ve.type){case"truefalse":var Ue;jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(Ue=d.test.truefalse)&&void 0!==Ue&&Ue.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"singlechoice":var We;jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(We=d.test.singlechoice)&&void 0!==We&&We.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"multichoice":var Ge;jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==d?void 0:d.test.type}" data-correct="${null!=d&&null!==(Ge=d.test.multichoice)&&void 0!==Ge&&Ge.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"matching-empty":var Ye;jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==d||null===(Ye=d.test.matching)||void 0===Ye?void 0:Ye.key}"></div>`);break;case"matching-content":var At,B,i;jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==d||null===(At=d.test.matching)||void 0===At?void 0:At.key}"><div class="ondrag-item" data-key="${null!==(B=null==d||null===(i=d.test)||void 0===i||null===(i=i.matching)||void 0===i?void 0:i.key)&&void 0!==B?B:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div></div>`);break;case"fill":var l;((null===(l=d.html)||void 0===l?void 0:l.fillKeywords)||[]).forEach(C=>{var w=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${C.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;h=h.replace(new RegExp(C.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),w)}),jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"speech":jQuery(P).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var o,n,r,y,p;jQuery(P).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(o=null!==(n=d.image)&&void 0!==n&&n.path?(null===(r=W.L.config)||void 0===r?void 0:r.readfileuploadurl)+(null===(y=d.image)||void 0===y?void 0:y.path):null===(p=d.image)||void 0===p?void 0:p.url)&&void 0!==o?o:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(P).find("img[path],video[path],iframe[path]").each((C,w)=>{var z,D;w.setAttribute("src",(null!==(z=null===(D=W.L.config)||void 0===D?void 0:D.readfileuploadurl)&&void 0!==z?z:"")+w.getAttribute("path")),w.removeAttribute("path")})}}}},Rt=(P,A,d,b)=>{let H=jQuery(b||W.L.target).find("#"+P).get(0);return H||(H=window.document.createElementNS("http://www.w3.org/2000/svg",A),H.setAttribute("id",P),jQuery(H).appendTo(b||W.L.target)),jQuery(H).attr((null==d?void 0:d.attribute)||{}),jQuery(H).css((null==d?void 0:d.style)||{}),H},xt=(P,A)=>{let d=(0,x.$)(2),b={fill:S.pZ.fill,stroke:S.pZ.stroke,"stroke-width":(0,x.$)(S.pZ.strokeWidth)};return[{element:Rt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:A.x-d,y:A.y-d,width:A.width+2*d,height:A.height+2*d},b)},P),posType:"rect-center"}]},_t=(P,A)=>{let d=[],{size:b}=A,H=(0,x.$)(1),Ct=(0,x.$)(2),Nt=(0,x.$)(3),Ht=((0,x.$)(5),(0,x.$)(7),(0,x.$)(10)),zt={stroke:S.u$.stroke,"stroke-width":(0,x.$)(S.u$.strokeWidth),"stroke-linecap":S.u$.strokeLinecap,"stroke-dasharray":S.u$.strokeDasharrays.map(Kt=>(0,x.$)(Kt)).join(" ")},st={fill:S.bf.fill,stroke:S.bf.stroke,"stroke-width":(0,x.$)(S.bf.strokeWidth)},qt={fill:S.eD.fill,stroke:S.eD.stroke,"stroke-width":(0,x.$)(S.eD.strokeWidth),width:(0,x.$)(S.eD.width),height:(0,x.$)(S.eD.height)},N={fill:S.eD.fill,stroke:S.eD.stroke,"stroke-width":(0,x.$)(S.eD.strokeWidth),width:(0,x.$)(S.eD.width),height:(0,x.$)(S.eD.height)},u=Rt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:b.x,y:b.y,width:b.width,height:b.height},st),style:{cursor:"move"}},P);if(Rt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:b.x-H,y1:b.y-H,x2:b.x-H,y2:b.y+b.height+H},zt)},P),Rt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:b.x-H,y1:b.y-H,x2:b.x+b.width+H,y2:b.y-H},zt)},P),Rt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:b.x+b.width+H,y1:b.y-H,x2:b.x+b.width+H,y2:b.y+b.height+H},zt)},P),Rt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:b.x-H,y1:b.y+b.height+H,x2:b.x+b.width+H,y2:b.y+b.height+H},zt)},P),A.type==T.h.LINE){var _;let{size:Kt}=A,Qt=[];return null===(_=Kt.ratios)||void 0===_||_.forEach(function(Yt){Qt.push([Kt.x+Kt.width*Yt[0],Kt.y+Kt.height*Yt[1]])}),Qt.forEach((Yt,le)=>{d.push({posType:`point-${le}`,element:Rt(`icdt-temp-resize-point-${le+1}`,"circle",{attribute:Object.assign((0,X.xW)(T.h.CIRCLE,{x:Yt[0]-Ct-H,y:Yt[1]-Ct-H,width:N.width,height:N.height},{}),N)},P)})}),d.concat([{element:u,posType:"rect-center"}])}if(A.type==T.h.POLYGON){var Q;let{size:Kt}=A,Qt=[];null===(Q=Kt.ratios)||void 0===Q||Q.forEach(function(Yt){Qt.push([Kt.x+Kt.width*Yt[0],Kt.y+Kt.height*Yt[1]])}),Qt.forEach((Yt,le)=>{d.push({posType:`point-${le}`,element:Rt(`icdt-temp-resize-point-${le+1}`,"circle",{attribute:Object.assign((0,X.xW)(T.h.CIRCLE,{x:Yt[0]-Ct-H,y:Yt[1]-Ct-H,width:N.width,height:N.height},{}),N)},P)})})}let it=Rt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:b.x-Ht,y:b.y-Ht},qt),style:{cursor:"nw-resize"}},P),yt=Rt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:b.x+b.width+Nt,y:b.y-Ht},qt),style:{cursor:"ne-resize"}},P),Ot=Rt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:b.x-Ht,y:b.y+b.height+Nt},qt),style:{cursor:"sw-resize"}},P),Lt=Rt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:b.x+b.width+Nt,y:b.y+b.height+Nt},qt),style:{cursor:"se-resize"}},P),pt=Rt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:b.x-Ht,y:b.y+b.height/2-Ct-H},qt),style:{cursor:"w-resize"}},P),dt=Rt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:b.x+b.width/2-Ct-H,y:b.y-Ht},qt),style:{cursor:"n-resize"}},P),kt=Rt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:b.x+b.width+Nt,y:b.y+b.height/2-Ct-H},qt),style:{cursor:"e-resize"}},P),Tt=Rt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:b.x+b.width/2-Ct-H,y:b.y+b.height+Nt},qt),style:{cursor:"s-resize"}},P);return d.concat([{element:u,posType:"rect-center"},{element:it,posType:"rect-top-left"},{element:yt,posType:"rect-top-right"},{element:Ot,posType:"rect-bottom-left"},{element:Lt,posType:"rect-bottom-right"},{element:pt,posType:"rect-left"},{element:dt,posType:"rect-top"},{element:kt,posType:"rect-right"},{element:Tt,posType:"rect-bottom"}])},ce=(P,A,d)=>{let b=(0,x.$)(1),H=(0,x.$)(2),Ct=(0,x.$)(5),Nt={stroke:S.u$.stroke,"stroke-width":(0,x.$)(S.u$.strokeWidth),"stroke-linecap":S.u$.strokeLinecap},Xt={fill:S.bf.fill,stroke:S.bf.stroke,"stroke-width":(0,x.$)(S.bf.strokeWidth)},Zt={fill:S.eD.fill,stroke:S.eD.stroke,"stroke-width":(0,x.$)(S.eD.strokeWidth),width:(0,x.$)(S.eD.width),height:(0,x.$)(S.eD.height)},Ht={fill:S.l6.fill,rx:(0,x.$)(S.l6.rx)},zt={fill:S.T2.fill,"alignment-baseline":S.T2.alignmentBaseline,"text-anchor":S.T2.textAnchor,"font-size":(0,x.$)(S.T2.fontSize)},st={fill:S.IB.fill,stroke:S.IB.stroke,"stroke-width":(0,x.$)(S.IB.strokeWidth)},nt=(Rt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:d.x-b,y1:d.y-b,x2:d.x-b,y2:d.y+d.height+b},Nt)},P),Rt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:d.x-b,y1:d.y-b,x2:d.x+d.width+b,y2:d.y-b},Nt)},P),Rt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:d.x+d.width+b,y1:d.y-b,x2:d.x+d.width+b,y2:d.y+d.height+b},Nt)},P),Rt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:d.x-b,y1:d.y+d.height+b,x2:d.x+d.width+b,y2:d.y+d.height+b},Nt)},P),Rt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:d.x,y:d.y,width:d.width,height:d.height},Xt)},P)),at=`${d.width} x ${d.height}`,V=8*at.length;return Rt("icdt-temp-select-rect-text","rect",{attribute:Object.assign({x:d.x+d.width/2-(0,x.$)(V/2),y:d.y+d.height+(0,x.$)(10),width:(0,x.$)(V),height:(0,x.$)(20)},Ht)},P),Rt("icdt-temp-select-text","text",{attribute:Object.assign({x:d.x+d.width/2,y:d.y+d.height+(0,x.$)(20)},zt)},P).textContent=at,A.length>1&&A.forEach(Kt=>{let{size:Qt}=Kt;Rt("icdt-temp-select-rect-node-"+Kt.id,"rect",{attribute:Object.assign({x:Qt.x,y:Qt.y,width:Qt.width,height:Qt.height},st)},P)}),[{element:nt,posType:"rect-center"},{element:Rt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:d.x-Ct,y:d.y-Ct},Zt),style:{cursor:"nw-resize"}},P),posType:"rect-top-left"},{element:Rt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:d.x+d.width-H,y:d.y-Ct},Zt),style:{cursor:"ne-resize"}},P),posType:"rect-top-right"},{element:Rt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:d.x-Ct,y:d.y+d.height-H},Zt),style:{cursor:"sw-resize"}},P),posType:"rect-bottom-left"},{element:Rt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:d.x+d.width-H,y:d.y+d.height-H},Zt),style:{cursor:"se-resize"}},P),posType:"rect-bottom-right"},{element:Rt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:d.x-Ct,y:d.y+d.height/2-H-b},Zt),style:{cursor:"w-resize"}},P),posType:"rect-left"},{element:Rt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:d.x+d.width/2-H-b,y:d.y-Ct},Zt),style:{cursor:"n-resize"}},P),posType:"rect-top"},{element:Rt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:d.x+d.width-H,y:d.y+d.height/2-H-b},Zt),style:{cursor:"e-resize"}},P),posType:"rect-right"},{element:Rt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:d.x+d.width/2-H-b,y:d.y+d.height-H},Zt),style:{cursor:"s-resize"}},P),posType:"rect-bottom"}]},Mt=(P,A)=>{let d=(0,x.$)(1),b={stroke:S.u$.stroke,"stroke-width":(0,x.$)(S.u$.strokeWidth),"stroke-linecap":S.u$.strokeLinecap},H={fill:S.bf.fill,stroke:S.bf.stroke,"stroke-width":(0,x.$)(S.bf.strokeWidth)};return Rt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:A.x-d,y1:A.y,x2:A.x-d,y2:A.y+A.height},b)},P),Rt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:A.x,y1:A.y-d,x2:A.x+A.width,y2:A.y-d},b)},P),Rt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:A.x+A.width+d,y1:A.y,x2:A.x+A.width+d,y2:A.y+A.height},b)},P),Rt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:A.x,y1:A.y+A.height+d,x2:A.x+A.width,y2:A.y+A.height+d},b)},P),[{element:Rt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:A.x,y:A.y,width:A.width,height:A.height},H)},P),posType:"rect-center"}]},wt=(P,A)=>((0,x.$)(-1),(0,x.$)(S.WR.strokeWidth),(0,x.$)(S.WR.strokeDasharray),Rt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:A.x,y:A.y,width:A.width,height:A.height,class:"cursor-draw"},{fill:S.lq.fill})},P),[]),ft=(P,A)=>{let d={fill:S.$u.fill,stroke:S.$u.stroke,"stroke-width":(0,x.$)(S.$u.strokeWidth),"stroke-dasharray":(0,x.$)(S.$u.strokeDasharray)};jQuery(P).empty(),A.forEach(b=>{var H,Ct;let{size:Nt}=b;if(!b.idx)return;Rt("icdt-temp-index-rect-node-"+b.id,"rect",{attribute:Object.assign({x:Nt.x-5,y:Nt.y-5,width:Nt.width+10,height:Nt.height+10},d)},P);let{element:Xt}=(0,m.$)(Math.ceil(1e9*Math.random()),{size:{x:Nt.x-76,y:Nt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(H=b.idx)&&void 0!==H?H:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(Ct=b.time)&&void 0!==Ct?Ct:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},P);Xt.classList.add("node-input"),jQuery(Xt).on("change",'input[name="idx"]',Zt=>{var Ht;b.idx=parseInt(null!==(Ht=Zt.target.value)&&void 0!==Ht?Ht:"0")}).on("change",'input[name="time"]',Zt=>{var Ht;b.time=parseFloat(null!==(Ht=Zt.target.value)&&void 0!==Ht?Ht:"0")}).on("click",'button[name="remove"]',Zt=>{b.idx=0,b.time=null,ft(P,A)})})},ut=(P,A)=>{var d,b,H,Ct,Nt,Xt;let{color:Zt,opacity:Ht,path:zt,url:st,base64:qt}=null!==(d=null==A||null===(b=A.svg)||void 0===b?void 0:b.background)&&void 0!==d?d:{},{x:N,y:u,width:K,height:nt}=null!==(H=null==A||null===(Ct=A.svg)||void 0===Ct?void 0:Ct.viewBox)&&void 0!==H?H:{x:0,y:0,width:0,height:0};(0,M.L)(void 0,{size:{x:0,y:(0,x.$)(-10),width:100,height:20},attribute:{fill:"#999",textAnchor:"start",alignmentBaseline:"central",fontSize:(0,x.$)(12),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(Nt=null!==(Xt=null==A?void 0:A.name)&&void 0!==Xt?Xt:null==A?void 0:A.code)&&void 0!==Nt?Nt:void 0}}},P),(0,et.a)(void 0,{size:{x:N,y:u,width:K,height:nt},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,x.$)(1),strokeDasharray:(0,x.$)(10),class:"hide-on-viewer"}},P),Zt&&(0,et.a)(void 0,{size:{x:N,y:u,width:K,height:nt},attribute:{fill:Zt,fillOpacity:Ht}},P),zt&&(0,tt.B)(void 0,{size:{x:N,y:u,width:K,height:nt},source:{type:"image",image:{path:zt,url:st,base64:qt}}},P)},Gt=(P,A,d)=>{var b;switch(jQuery(P).empty(),null===(b=A.test)||void 0===b?void 0:b.type){case"truefalse":var H;if(null!==(H=A.test)&&void 0!==H&&H.showselection){var Ct,Nt,Xt;let pt=null==A||null===(Ct=A.test)||void 0===Ct||null===(Ct=Ct.answer)||void 0===Ct||null===(Ct=Ct.truefalse)||void 0===Ct?void 0:Ct.value;null===(Nt=A.svg)||void 0===Nt||Nt.nodes.filter(dt=>{var kt;return"truefalse"==(null===(kt=dt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)&&dt.id!=pt}).forEach(dt=>{var kt;let{x:Kt,y:Qt,width:Yt,height:le}=null!==(kt=null==dt?void 0:dt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,mt.K)(Math.ceil(1e9*Math.random()),{size:{x:Kt-.5,y:Qt-.5,width:Yt+1,height:le+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},P)}),null!=A&&null!==(Xt=A.test)&&void 0!==Xt&&null!==(Xt=Xt.answer)&&void 0!==Xt&&Xt.truefalse&&pt&&(dt=>{let kt=v.J.findNode(pt),{x:Kt,y:Qt,width:Yt,height:le}=null!==(dt=null==kt?void 0:kt.size)&&void 0!==dt?dt:{x:0,y:0,width:0,height:0};(0,mt.K)(Math.ceil(1e9*Math.random()),{size:{x:Kt-2,y:Qt-2,width:Yt+4,height:le+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},P)})()}break;case"singlechoice":var Zt;if(null!==(Zt=A.test)&&void 0!==Zt&&Zt.showselection){var Ht,zt,st;let pt=null==A||null===(Ht=A.test)||void 0===Ht||null===(Ht=Ht.answer)||void 0===Ht||null===(Ht=Ht.singlechoice)||void 0===Ht?void 0:Ht.value;null===(zt=A.svg)||void 0===zt||zt.nodes.filter(dt=>{var kt;return"singlechoice"==(null===(kt=dt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)&&dt.id!=pt}).forEach(dt=>{var kt;let{x:Kt,y:Qt,width:Yt,height:le}=null!==(kt=null==dt?void 0:dt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,mt.K)(Math.ceil(1e9*Math.random()),{size:{x:Kt-.5,y:Qt-.5,width:Yt+1,height:le+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},P)}),null!=A&&null!==(st=A.test)&&void 0!==st&&null!==(st=st.answer)&&void 0!==st&&st.singlechoice&&pt&&(dt=>{let kt=v.J.findNode(pt),{x:Kt,y:Qt,width:Yt,height:le}=null!==(dt=null==kt?void 0:kt.size)&&void 0!==dt?dt:{x:0,y:0,width:0,height:0};(0,mt.K)(Math.ceil(1e9*Math.random()),{size:{x:Kt-2,y:Qt-2,width:Yt+4,height:le+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},P)})()}break;case"multichoice":var qt;if(null!==(qt=A.test)&&void 0!==qt&&qt.showselection){var N,u,K,nt;let pt=null!==(N=null==A||null===(u=A.test)||void 0===u||null===(u=u.answer)||void 0===u||null===(u=u.multichoice)||void 0===u?void 0:u.map(dt=>dt.value))&&void 0!==N?N:[];var at;null===(K=A.svg)||void 0===K||K.nodes.filter(dt=>{var kt;return"multichoice"==(null===(kt=dt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)&&!pt.includes(dt.id)}).forEach(dt=>{var kt;let{x:Kt,y:Qt,width:Yt,height:le}=null!==(kt=null==dt?void 0:dt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,et.a)(Math.ceil(1e9*Math.random()),{size:{x:Kt-.5,y:Qt-.5,width:Yt+1,height:le+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},P)}),null!=A&&null!==(nt=A.test)&&void 0!==nt&&null!==(nt=nt.answer)&&void 0!==nt&&nt.multichoice&&pt.length&&(null==A||null===(at=A.test)||void 0===at||null===(at=at.answer)||void 0===at||at.multichoice.forEach(dt=>{var kt;let Tt=v.J.findNode(dt.value),{x:Qt,y:Yt,width:le,height:re}=null!==(kt=null==Tt?void 0:Tt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,et.a)(Math.ceil(1e9*Math.random()),{size:{x:Qt-2,y:Yt-2,width:le+4,height:re+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},P)}))}break;case"fill":var V,_;null!=A&&null!==(V=A.test)&&void 0!==V&&null!==(V=V.answer)&&void 0!==V&&V.fill&&(null==A||null===(_=A.test)||void 0===_||null===(_=_.answer)||void 0===_||_.fill.forEach(pt=>{jQuery("#"+d.id).find(`input[type="text"][data-key="${pt.key}"]`).val(pt.value)}));break;case"matching":var Q,it,yt,Ot;if(null!=A&&null!==(Q=A.test)&&void 0!==Q&&null!==(Q=Q.answer)&&void 0!==Q&&Q.matching)if("matching-empty"==(null===(it=d.source)||void 0===it||null===(it=it.test)||void 0===it?void 0:it.type))null==A||null===(Ot=A.test)||void 0===Ot||null===(Ot=Ot.answer)||void 0===Ot||Ot.matching.filter(pt=>{var dt;return pt.key==(null===(dt=d.source)||void 0===dt||null===(dt=dt.test)||void 0===dt||null===(dt=dt.matching)||void 0===dt?void 0:dt.key)}).forEach(pt=>{});else if("matching-content"==(null===(yt=d.source)||void 0===yt||null===(yt=yt.test)||void 0===yt?void 0:yt.type)){var Lt;null==A||null===(Lt=A.test)||void 0===Lt||null===(Lt=Lt.answer)||void 0===Lt||Lt.matching.filter(pt=>{var dt;return pt.value==(null===(dt=d.source)||void 0===dt||null===(dt=dt.test)||void 0===dt||null===(dt=dt.matching)||void 0===dt?void 0:dt.key)}).forEach(pt=>{})}}}},2241:(he,Bt,f)=>{f.d(Bt,{_:()=>rt});var T=f(8338);const rt=k=>{switch(null==k?void 0:k.type){case T.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+k.readfileuploadurl+k.path;case T.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+k.readfileuploadurl+k.path;case T.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+k.readfileuploadurl+k.path;case T.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+k.readfileuploadurl+k.path;case T.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+k.readfileuploadurl+k.path;case T.S.HTML:case T.S.IMAGE_ANIMATION:case T.S.PHET:return""+k.readfileuploadurl+k.path;case T.S.ZIP:case T.S.SCORM:var c;return"imsmanifest.xml"==(null===(c=k.path)||void 0===c||null===(c=c.split("/"))||void 0===c?void 0:c.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+k.readfileuploadurl+k.path:""+k.readfileuploadurl+k.path;case T.S.TRACK:case T.S.TEXT:return""+k.readfileuploadurl+k.path;case T.S.LINK:switch(k.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+k.url;case 1002:var R;return null!==(R=j(k.url))&&void 0!==R?R:"";case 1005:var U;return null!==(U=k.url)&&void 0!==U?U:"";default:var S;return null!==(S=k.url)&&void 0!==S?S:""}default:return""+k.readfileuploadurl+k.path}},j=k=>{let c=vt(k);return c?"https://www.youtube.com/embed/"+c+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},vt=k=>{let c=null==k?void 0:k.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return c&&c.length>=2?c[1]:null}},1131:(he,Bt,f)=>{function T(){}function E(t){return null==t?T:function(){return this.querySelector(t)}}function vt(){return[]}function k(t){return null==t?vt:function(){return this.querySelectorAll(t)}}function U(t){return function(){return this.matches(t)}}function S(t){return function(e){return e.matches(t)}}f.d(Bt,{qrM:()=>aa,n8j:()=>ra});var W=Array.prototype.find;function et(){return this.firstElementChild}var mt=Array.prototype.filter;function v(){return Array.from(this.children)}function lt(t){return new Array(t.length)}function J(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function G(t,e,a,s,g,L){for(var Y,I=0,Z=e.length,ct=L.length;I<ct;++I)(Y=e[I])?(Y.__data__=L[I],s[I]=Y):a[I]=new J(t,L[I]);for(;I<Z;++I)(Y=e[I])&&(g[I]=Y)}function O(t,e,a,s,g,L,I){var Y,Z,ie,ct=new Map,Et=e.length,Jt=L.length,Vt=new Array(Et);for(Y=0;Y<Et;++Y)(Z=e[Y])&&(Vt[Y]=ie=I.call(Z,Z.__data__,Y,e)+"",ct.has(ie)?g[Y]=Z:ct.set(ie,Z));for(Y=0;Y<Jt;++Y)ie=I.call(t,L[Y],Y,L)+"",(Z=ct.get(ie))?(s[Y]=Z,Z.__data__=L[Y],ct.delete(ie)):a[Y]=new J(t,L[Y]);for(Y=0;Y<Et;++Y)(Z=e[Y])&&ct.get(Vt[Y])===Z&&(g[Y]=Z)}function gt(t){return t.__data__}function It(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Mt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}J.prototype={constructor:J,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var d="http://www.w3.org/1999/xhtml";const b={svg:"http://www.w3.org/2000/svg",xhtml:d,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function H(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),b.hasOwnProperty(e)?{space:b[e],local:t}:t}function Ct(t){return function(){this.removeAttribute(t)}}function Nt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xt(t,e){return function(){this.setAttribute(t,e)}}function Zt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ht(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function zt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function qt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function N(t){return function(){this.style.removeProperty(t)}}function u(t,e,a){return function(){this.style.setProperty(t,e,a)}}function K(t,e,a){return function(){var s=e.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,a)}}function at(t,e){return t.style.getPropertyValue(e)||qt(t).getComputedStyle(t,null).getPropertyValue(e)}function V(t){return function(){delete this[t]}}function _(t,e){return function(){this[t]=e}}function Q(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function yt(t){return t.trim().split(/^|\s+/)}function Ot(t){return t.classList||new Lt(t)}function Lt(t){this._node=t,this._names=yt(t.getAttribute("class")||"")}function pt(t,e){for(var a=Ot(t),s=-1,g=e.length;++s<g;)a.add(e[s])}function dt(t,e){for(var a=Ot(t),s=-1,g=e.length;++s<g;)a.remove(e[s])}function kt(t){return function(){pt(this,t)}}function Tt(t){return function(){dt(this,t)}}function Kt(t,e){return function(){(e.apply(this,arguments)?pt:dt)(this,t)}}function Yt(){this.textContent=""}function le(t){return function(){this.textContent=t}}function re(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function pe(){this.innerHTML=""}function _e(t){return function(){this.innerHTML=t}}function Se(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Ee(){this.nextSibling&&this.parentNode.appendChild(this)}function Re(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fe(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===d&&e.documentElement.namespaceURI===d?e.createElement(t):e.createElementNS(a,t)}}function Ve(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ue(t){var e=H(t);return(e.local?Ve:Fe)(e)}function Ge(){return null}function At(){var t=this.parentNode;t&&t.removeChild(this)}function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function l(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function p(t){return function(){var e=this.__on;if(e){for(var L,a=0,s=-1,g=e.length;a<g;++a)L=e[a],t.type&&L.type!==t.type||L.name!==t.name?e[++s]=L:this.removeEventListener(L.type,L.listener,L.options);++s?e.length=s:delete this.__on}}}function h(t,e,a){return function(){var g,s=this.__on,L=function r(t){return function(e){t.call(this,e,this.__data__)}}(e);if(s)for(var I=0,Y=s.length;I<Y;++I)if((g=s[I]).type===t.type&&g.name===t.name)return this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=L,g.options=a),void(g.value=e);this.addEventListener(t.type,L,a),g={type:t.type,name:t.name,value:e,listener:L,options:a},s?s.push(g):this.__on=[g]}}function w(t,e,a){var s=qt(t),g=s.CustomEvent;"function"==typeof g?g=new g(e,a):(g=s.document.createEvent("Event"),a?(g.initEvent(e,a.bubbles,a.cancelable),g.detail=a.detail):g.initEvent(e,!1,!1)),t.dispatchEvent(g)}function z(t,e){return function(){return w(this,t,e)}}function D(t,e){return function(){return w(this,t,e.apply(this,arguments))}}Lt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Pt=[null];function Ft(t,e){this._groups=t,this._parents=e}function ee(){return new Ft([[document.documentElement]],Pt)}Ft.prototype=ee.prototype={constructor:Ft,select:function rt(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,a=e.length,s=new Array(a),g=0;g<a;++g)for(var Z,ct,L=e[g],I=L.length,Y=s[g]=new Array(I),Et=0;Et<I;++Et)(Z=L[Et])&&(ct=t.call(Z,Z.__data__,Et,L))&&("__data__"in Z&&(ct.__data__=Z.__data__),Y[Et]=ct);return new Ft(s,this._parents)},selectAll:function R(t){t="function"==typeof t?function c(t){return function(){return function j(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):k(t);for(var e=this._groups,a=e.length,s=[],g=[],L=0;L<a;++L)for(var Z,I=e[L],Y=I.length,ct=0;ct<Y;++ct)(Z=I[ct])&&(s.push(t.call(Z,Z.__data__,ct,I)),g.push(Z));return new Ft(s,g)},selectChild:function tt(t){return this.select(null==t?et:function x(t){return function(){return W.call(this.children,t)}}("function"==typeof t?t:S(t)))},selectChildren:function M(t){return this.selectAll(null==t?v:function m(t){return function(){return mt.call(this.children,t)}}("function"==typeof t?t:S(t)))},filter:function X(t){"function"!=typeof t&&(t=U(t));for(var e=this._groups,a=e.length,s=new Array(a),g=0;g<a;++g)for(var Z,L=e[g],I=L.length,Y=s[g]=[],ct=0;ct<I;++ct)(Z=L[ct])&&t.call(Z,Z.__data__,ct,L)&&Y.push(Z);return new Ft(s,this._parents)},data:function jt(t,e){if(!arguments.length)return Array.from(this,gt);var a=e?O:G,s=this._parents,g=this._groups;"function"!=typeof t&&(t=function ot(t){return function(){return t}}(t));for(var L=g.length,I=new Array(L),Y=new Array(L),Z=new Array(L),ct=0;ct<L;++ct){var Et=s[ct],Jt=g[ct],Vt=Jt.length,ie=It(t.call(Et,Et&&Et.__data__,ct,s)),Ce=ie.length,Ie=Y[ct]=new Array(Ce),Wt=I[ct]=new Array(Ce);a(Et,Jt,Ie,Wt,Z[ct]=new Array(Vt),ie,e);for(var ge,xe,de=0,ne=0;de<Ce;++de)if(ge=Ie[de]){for(de>=ne&&(ne=de+1);!(xe=Wt[ne])&&++ne<Ce;);ge._next=xe||null}}return(I=new Ft(I,s))._enter=Y,I._exit=Z,I},enter:function F(){return new Ft(this._enter||this._groups.map(lt),this._parents)},exit:function Rt(){return new Ft(this._exit||this._groups.map(lt),this._parents)},join:function xt(t,e,a){var s=this.enter(),g=this,L=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=e&&(g=e(g))&&(g=g.selection()),null==a?L.remove():a(L),s&&g?s.merge(g).order():g},merge:function _t(t){for(var e=t.selection?t.selection():t,a=this._groups,s=e._groups,g=a.length,I=Math.min(g,s.length),Y=new Array(g),Z=0;Z<I;++Z)for(var ie,ct=a[Z],Et=s[Z],Jt=ct.length,Vt=Y[Z]=new Array(Jt),Ce=0;Ce<Jt;++Ce)(ie=ct[Ce]||Et[Ce])&&(Vt[Ce]=ie);for(;Z<g;++Z)Y[Z]=a[Z];return new Ft(Y,this._parents)},selection:function ke(){return this},order:function ce(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var I,s=t[e],g=s.length-1,L=s[g];--g>=0;)(I=s[g])&&(L&&4^I.compareDocumentPosition(L)&&L.parentNode.insertBefore(I,L),L=I);return this},sort:function q(t){function e(Jt,Vt){return Jt&&Vt?t(Jt.__data__,Vt.__data__):!Jt-!Vt}t||(t=Mt);for(var a=this._groups,s=a.length,g=new Array(s),L=0;L<s;++L){for(var ct,I=a[L],Y=I.length,Z=g[L]=new Array(Y),Et=0;Et<Y;++Et)(ct=I[Et])&&(Z[Et]=ct);Z.sort(e)}return new Ft(g,this._parents).order()},call:function wt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function ft(){return Array.from(this)},node:function ut(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var s=t[e],g=0,L=s.length;g<L;++g){var I=s[g];if(I)return I}return null},size:function Gt(){let t=0;for(const e of this)++t;return t},empty:function P(){return!this.node()},each:function A(t){for(var e=this._groups,a=0,s=e.length;a<s;++a)for(var Y,g=e[a],L=0,I=g.length;L<I;++L)(Y=g[L])&&t.call(Y,Y.__data__,L,g);return this},attr:function st(t,e){var a=H(t);if(arguments.length<2){var s=this.node();return a.local?s.getAttributeNS(a.space,a.local):s.getAttribute(a)}return this.each((null==e?a.local?Nt:Ct:"function"==typeof e?a.local?zt:Ht:a.local?Zt:Xt)(a,e))},style:function nt(t,e,a){return arguments.length>1?this.each((null==e?N:"function"==typeof e?K:u)(t,e,null==a?"":a)):at(this.node(),t)},property:function it(t,e){return arguments.length>1?this.each((null==e?V:"function"==typeof e?Q:_)(t,e)):this.node()[t]},classed:function Qt(t,e){var a=yt(t+"");if(arguments.length<2){for(var s=Ot(this.node()),g=-1,L=a.length;++g<L;)if(!s.contains(a[g]))return!1;return!0}return this.each(("function"==typeof e?Kt:e?kt:Tt)(a,e))},text:function ae(t){return arguments.length?this.each(null==t?Yt:("function"==typeof t?re:le)(t)):this.node().textContent},html:function be(t){return arguments.length?this.each(null==t?pe:("function"==typeof t?Se:_e)(t)):this.node().innerHTML},raise:function ve(){return this.each(Ee)},lower:function Me(){return this.each(Re)},append:function We(t){var e="function"==typeof t?t:Ue(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function Ye(t,e){var a="function"==typeof t?t:Ue(t),s=null==e?Ge:"function"==typeof e?e:E(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),s.apply(this,arguments)||null)})},remove:function B(){return this.each(At)},clone:function o(t){return this.select(t?l:i)},datum:function n(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function C(t,e,a){var g,I,s=function y(t){return t.trim().split(/^|\s+/).map(function(e){var a="",s=e.indexOf(".");return s>=0&&(a=e.slice(s+1),e=e.slice(0,s)),{type:e,name:a}})}(t+""),L=s.length;if(!(arguments.length<2)){for(Y=e?h:p,g=0;g<L;++g)this.each(Y(s[g],e,a));return this}var Y=this.node().__on;if(Y)for(var Et,Z=0,ct=Y.length;Z<ct;++Z)for(g=0,Et=Y[Z];g<L;++g)if((I=s[g]).type===Et.type&&I.name===Et.name)return Et.value},dispatch:function St(t,e){return this.each(("function"==typeof e?D:z)(t,e))},[Symbol.iterator]:function*bt(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var I,s=t[e],g=0,L=s.length;g<L;++g)(I=s[g])&&(yield I)}};const we=ee;var Te={value:()=>{}};function Oe(){for(var s,t=0,e=arguments.length,a={};t<e;++t){if(!(s=arguments[t]+"")||s in a||/[\s.]/.test(s))throw new Error("illegal type: "+s);a[s]=[]}return new Ae(a)}function Ae(t){this._=t}function al(t,e){for(var g,a=0,s=t.length;a<s;++a)if((g=t[a]).name===e)return g.value}function gn(t,e,a){for(var s=0,g=t.length;s<g;++s)if(t[s].name===e){t[s]=Te,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=a&&t.push({name:e,value:a}),t}Ae.prototype=Oe.prototype={constructor:Ae,on:function(t,e){var g,a=this._,s=function rl(t,e){return t.trim().split(/^|\s+/).map(function(a){var s="",g=a.indexOf(".");if(g>=0&&(s=a.slice(g+1),a=a.slice(0,g)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:s}})}(t+"",a),L=-1,I=s.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++L<I;)if(g=(t=s[L]).type)a[g]=gn(a[g],t.name,e);else if(null==e)for(g in a)a[g]=gn(a[g],t.name,null);return this}for(;++L<I;)if((g=(t=s[L]).type)&&(g=al(a[g],t.name)))return g},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new Ae(t)},call:function(t,e){if((g=arguments.length-2)>0)for(var g,L,a=new Array(g),s=0;s<g;++s)a[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,g=(L=this._[t]).length;s<g;++s)L[s].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],g=0,L=s.length;g<L;++g)s[g].value.apply(e,a)}};const ol=Oe;var Ni,ki,mi=0,Oi=0,Si=0,yn=1e3,Di=0,ci=0,ji=0,Ti="object"==typeof performance&&performance.now?performance:Date,mn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return ci||(mn(sl),ci=Ti.now()+ji)}function sl(){ci=0}function zi(){this._call=this._time=this._next=null}function pn(t,e,a){var s=new zi;return s.restart(t,e,a),s}function wn(){ci=(Di=Ti.now())+ji,mi=Oi=0;try{!function dl(){Xi(),++mi;for(var e,t=Ni;t;)(e=ci-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mi}()}finally{mi=0,function hl(){for(var t,a,e=Ni,s=1/0;e;)e._call?(s>e._time&&(s=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);ki=t,qi(s)}(),ci=0}}function ul(){var t=Ti.now(),e=t-Di;e>yn&&(ji-=e,Di=t)}function qi(t){mi||(Oi&&(Oi=clearTimeout(Oi)),t-ci>24?(t<1/0&&(Oi=setTimeout(wn,t-Ti.now()-ji)),Si&&(Si=clearInterval(Si))):(Si||(Di=Ti.now(),Si=setInterval(ul,yn)),mi=1,mn(wn)))}function xn(t,e,a){var s=new zi;return s.restart(g=>{s.stop(),t(g+e)},e=null==e?0:+e,a),s}zi.prototype=pn.prototype={constructor:zi,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Xi():+a)+(null==e?0:+e),!this._next&&ki!==this&&(ki?ki._next=this:Ni=this,ki=this),this._call=t,this._time=a,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cl=ol("start","end","cancel","interrupt"),fl=[],bn=0,Ki=3;function Fi(t,e,a,s,g,L){var I=t.__transition;if(I){if(a in I)return}else t.__transition={};!function vl(t,e,a){var g,s=t.__transition;function I(ct){var Et,Jt,Vt,ie;if(1!==a.state)return Z();for(Et in s)if((ie=s[Et]).name===a.name){if(ie.state===Ki)return xn(I);4===ie.state?(ie.state=6,ie.timer.stop(),ie.on.call("interrupt",t,t.__data__,ie.index,ie.group),delete s[Et]):+Et<e&&(ie.state=6,ie.timer.stop(),ie.on.call("cancel",t,t.__data__,ie.index,ie.group),delete s[Et])}if(xn(function(){a.state===Ki&&(a.state=4,a.timer.restart(Y,a.delay,a.time),Y(ct))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=Ki,g=new Array(Vt=a.tween.length),Et=0,Jt=-1;Et<Vt;++Et)(ie=a.tween[Et].value.call(t,t.__data__,a.index,a.group))&&(g[++Jt]=ie);g.length=Jt+1}}function Y(ct){for(var Et=ct<a.duration?a.ease.call(null,ct/a.duration):(a.timer.restart(Z),a.state=5,1),Jt=-1,Vt=g.length;++Jt<Vt;)g[Jt].call(t,Et);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),Z())}function Z(){for(var ct in a.state=6,a.timer.stop(),delete s[e],s)return;delete t.__transition}s[e]=a,a.timer=pn(function L(ct){a.state=1,a.timer.restart(I,a.delay,a.time),a.delay<=ct&&I(ct-a.delay)},0,a.time)}(t,a,{name:e,index:s,group:g,on:cl,tween:fl,time:L.time,delay:L.delay,duration:L.duration,ease:L.ease,timer:null,state:bn})}function en(t,e){var a=ii(t,e);if(a.state>bn)throw new Error("too late; already scheduled");return a}function li(t,e){var a=ii(t,e);if(a.state>Ki)throw new Error("too late; already running");return a}function ii(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function ui(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,s,g,L){var I,Y,Z;return(I=Math.sqrt(t*t+e*e))&&(t/=I,e/=I),(Z=t*a+e*s)&&(a-=t*Z,s-=e*Z),(Y=Math.sqrt(a*a+s*s))&&(a/=Y,s/=Y,Z/=Y),t*s<e*a&&(t=-t,e=-e,Z=-Z,I=-I),{translateX:g,translateY:L,rotate:Math.atan2(e,t)*On,skewX:Math.atan(Z)*On,scaleX:I,scaleY:Y}}function kn(t,e,a,s){function g(ct){return ct.length?ct.pop()+" ":""}return function(ct,Et){var Jt=[],Vt=[];return ct=t(ct),Et=t(Et),function L(ct,Et,Jt,Vt,ie,Ce){if(ct!==Jt||Et!==Vt){var Ie=ie.push("translate(",null,e,null,a);Ce.push({i:Ie-4,x:ui(ct,Jt)},{i:Ie-2,x:ui(Et,Vt)})}else(Jt||Vt)&&ie.push("translate("+Jt+e+Vt+a)}(ct.translateX,ct.translateY,Et.translateX,Et.translateY,Jt,Vt),function I(ct,Et,Jt,Vt){ct!==Et?(ct-Et>180?Et+=360:Et-ct>180&&(ct+=360),Vt.push({i:Jt.push(g(Jt)+"rotate(",null,s)-2,x:ui(ct,Et)})):Et&&Jt.push(g(Jt)+"rotate("+Et+s)}(ct.rotate,Et.rotate,Jt,Vt),function Y(ct,Et,Jt,Vt){ct!==Et?Vt.push({i:Jt.push(g(Jt)+"skewX(",null,s)-2,x:ui(ct,Et)}):Et&&Jt.push(g(Jt)+"skewX("+Et+s)}(ct.skewX,Et.skewX,Jt,Vt),function Z(ct,Et,Jt,Vt,ie,Ce){if(ct!==Jt||Et!==Vt){var Ie=ie.push(g(ie)+"scale(",null,",",null,")");Ce.push({i:Ie-4,x:ui(ct,Jt)},{i:Ie-2,x:ui(Et,Vt)})}else(1!==Jt||1!==Vt)&&ie.push(g(ie)+"scale("+Jt+","+Vt+")")}(ct.scaleX,ct.scaleY,Et.scaleX,Et.scaleY,Jt,Vt),ct=Et=null,function(ie){for(var Wt,Ce=-1,Ie=Vt.length;++Ce<Ie;)Jt[(Wt=Vt[Ce]).i]=Wt.x(ie);return Jt.join("")}}}var wl=kn(function ml(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xl=kn(function pl(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function bl(t,e){var a,s;return function(){var g=li(this,t),L=g.tween;if(L!==a)for(var I=0,Y=(s=a=L).length;I<Y;++I)if(s[I].name===e){(s=s.slice()).splice(I,1);break}g.tween=s}}function _l(t,e,a){var s,g;if("function"!=typeof a)throw new Error;return function(){var L=li(this,t),I=L.tween;if(I!==s){g=(s=I).slice();for(var Y={name:e,value:a},Z=0,ct=g.length;Z<ct;++Z)if(g[Z].name===e){g[Z]=Y;break}Z===ct&&g.push(Y)}L.tween=g}}function ln(t,e,a){var s=t._id;return t.each(function(){var g=li(this,s);(g.value||(g.value={}))[e]=a.apply(this,arguments)}),function(g){return ii(g,s).value[e]}}function rn(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function Tn(t,e){var a=Object.create(t.prototype);for(var s in e)a[s]=e[s];return a}function Ci(){}var Wi=1/.7,pi="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ol=/^#([0-9a-f]{3,8})$/,Sl=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),kl=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),Tl=new RegExp(`^rgba\\(${pi},${pi},${pi},${Ai}\\)$`),Cl=new RegExp(`^rgba\\(${ri},${ri},${ri},${Ai}\\)$`),Ll=new RegExp(`^hsl\\(${Ai},${ri},${ri}\\)$`),Al=new RegExp(`^hsla\\(${Ai},${ri},${ri},${Ai}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Pi(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Ol.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?Pn(e):3===a?new Xe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sl.exec(t))?new Xe(e[1],e[2],e[3],1):(e=kl.exec(t))?new Xe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tl.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cl.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ll.exec(t))?Mn(e[1],e[2]/100,e[3]/100,1):(e=Al.exec(t))?Mn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?Pn(Cn[t]):"transparent"===t?new Xe(NaN,NaN,NaN,0):null}function Pn(t){return new Xe(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,a,s){return s<=0&&(t=e=a=NaN),new Xe(t,e,a,s)}function Qi(t,e,a,s){return 1===arguments.length?function Rl(t){return t instanceof Ci||(t=Pi(t)),t?new Xe((t=t.rgb()).r,t.g,t.b,t.opacity):new Xe}(t):new Xe(t,e,a,null==s?1:s)}function Xe(t,e,a,s){this.r=+t,this.g=+e,this.b=+a,this.opacity=+s}function In(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}`}function Rn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${fi(this.r)}, ${fi(this.g)}, ${fi(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vi(t){return((t=fi(t))<16?"0":"")+t.toString(16)}function Mn(t,e,a,s){return s<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new ni(t,e,a,s)}function Nn(t){if(t instanceof ni)return new ni(t.h,t.s,t.l,t.opacity);if(t instanceof Ci||(t=Pi(t)),!t)return new ni;if(t instanceof ni)return t;var e=(t=t.rgb()).r/255,a=t.g/255,s=t.b/255,g=Math.min(e,a,s),L=Math.max(e,a,s),I=NaN,Y=L-g,Z=(L+g)/2;return Y?(I=e===L?(a-s)/Y+6*(a<s):a===L?(s-e)/Y+2:(e-a)/Y+4,Y/=Z<.5?L+g:2-L-g,I*=60):Y=Z>0&&Z<1?0:I,new ni(I,Y,Z,t.opacity)}function ni(t,e,a,s){this.h=+t,this.s=+e,this.l=+a,this.opacity=+s}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function jn(t,e,a,s,g){var L=t*t,I=L*t;return((1-3*t+3*L-I)*e+(4-6*L+3*I)*a+(1+3*t+3*L-3*I)*s+I*g)/6}rn(Ci,Pi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Pl(){return this.rgb().formatHex8()},formatHsl:function Il(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),rn(Xe,Qi,Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Xe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Xe(fi(this.r),fi(this.g),fi(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:In,formatHex:In,formatHex8:function Ml(){return`#${vi(this.r)}${vi(this.g)}${vi(this.b)}${vi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Rn,toString:Rn})),rn(ni,function Nl(t,e,a,s){return 1===arguments.length?Nn(t):new ni(t,e,a,null==s?1:s)},Tn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new ni(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ni(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*e,g=2*a-s;return new Xe(an(t>=240?t-240:t+120,g,s),an(t,g,s),an(t<120?t+240:t-120,g,s),this.opacity)},clamp(){return new ni(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const zn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):zn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kl(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function zl(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(s){return Math.pow(t+s*e,a)}}(e,a,t):zn(isNaN(e)?a:e)}}(e);function s(g,L){var I=a((g=Qi(g)).r,(L=Qi(L)).r),Y=a(g.g,L.g),Z=a(g.b,L.b),ct=Bn(g.opacity,L.opacity);return function(Et){return g.r=I(Et),g.g=Y(Et),g.b=Z(Et),g.opacity=ct(Et),g+""}}return s.gamma=t,s}(1);function Un(t){return function(e){var I,Y,a=e.length,s=new Array(a),g=new Array(a),L=new Array(a);for(I=0;I<a;++I)Y=Qi(e[I]),s[I]=Y.r||0,g[I]=Y.g||0,L[I]=Y.b||0;return s=t(s),g=t(g),L=t(L),Y.opacity=1,function(Z){return Y.r=s(Z),Y.g=g(Z),Y.b=L(Z),Y+""}}}Un(function Dl(t){var e=t.length-1;return function(a){var s=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),g=t[s],L=t[s+1];return jn((a-s/e)*e,s>0?t[s-1]:2*g-L,g,L,s<e-1?t[s+2]:2*L-g)}}),Un(function jl(t){var e=t.length;return function(a){var s=Math.floor(((a%=1)<0?++a:a)*e);return jn((a-s/e)*e,t[(s+e-1)%e],t[s%e],t[(s+1)%e],t[(s+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ul(t,e){var s,g,L,a=on.lastIndex=sn.lastIndex=0,I=-1,Y=[],Z=[];for(t+="",e+="";(s=on.exec(t))&&(g=sn.exec(e));)(L=g.index)>a&&(L=e.slice(a,L),Y[I]?Y[I]+=L:Y[++I]=L),(s=s[0])===(g=g[0])?Y[I]?Y[I]+=g:Y[++I]=g:(Y[++I]=null,Z.push({i:I,x:ui(s,g)})),a=sn.lastIndex;return a<e.length&&(L=e.slice(a),Y[I]?Y[I]+=L:Y[++I]=L),Y.length<2?Z[0]?function Fl(t){return function(e){return t(e)+""}}(Z[0].x):function Bl(t){return function(){return t}}(e):(e=Z.length,function(ct){for(var Jt,Et=0;Et<e;++Et)Y[(Jt=Z[Et]).i]=Jt.x(ct);return Y.join("")})}function Wn(t,e){var a;return("number"==typeof e?ui:e instanceof Pi?Fn:(a=Pi(e))?(e=a,Fn):Ul)(t,e)}function Wl(t){return function(){this.removeAttribute(t)}}function Gl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ql(t,e,a){var s,L,g=a+"";return function(){var I=this.getAttribute(t);return I===g?null:I===s?L:L=e(s=I,a)}}function Jl(t,e,a){var s,L,g=a+"";return function(){var I=this.getAttributeNS(t.space,t.local);return I===g?null:I===s?L:L=e(s=I,a)}}function Hl(t,e,a){var s,g,L;return function(){var I,Z,Y=a(this);return null==Y?void this.removeAttribute(t):(I=this.getAttribute(t))===(Z=Y+"")?null:I===s&&Z===g?L:(g=Z,L=e(s=I,Y))}}function Vl(t,e,a){var s,g,L;return function(){var I,Z,Y=a(this);return null==Y?void this.removeAttributeNS(t.space,t.local):(I=this.getAttributeNS(t.space,t.local))===(Z=Y+"")?null:I===s&&Z===g?L:(g=Z,L=e(s=I,Y))}}function ql(t,e){var a,s;function g(){var L=e.apply(this,arguments);return L!==s&&(a=(s=L)&&function Xl(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,L)),a}return g._value=e,g}function $l(t,e){var a,s;function g(){var L=e.apply(this,arguments);return L!==s&&(a=(s=L)&&function Zl(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,L)),a}return g._value=e,g}function er(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function ir(t,e){return e=+e,function(){en(this,t).delay=e}}function lr(t,e){return function(){li(this,t).duration=+e.apply(this,arguments)}}function rr(t,e){return e=+e,function(){li(this,t).duration=e}}var xr=we.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var zr=0;function oi(t,e,a,s){this._groups=t,this._parents=e,this._name=a,this._id=s}function Qn(){return++zr}var si=we.prototype;oi.prototype=function Kr(t){return we().transition(t)}.prototype={constructor:oi,select:function pr(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=E(t));for(var s=this._groups,g=s.length,L=new Array(g),I=0;I<g;++I)for(var Et,Jt,Y=s[I],Z=Y.length,ct=L[I]=new Array(Z),Vt=0;Vt<Z;++Vt)(Et=Y[Vt])&&(Jt=t.call(Et,Et.__data__,Vt,Y))&&("__data__"in Et&&(Jt.__data__=Et.__data__),ct[Vt]=Jt,Fi(ct[Vt],e,a,Vt,ct,ii(Et,a)));return new oi(L,this._parents,e,a)},selectAll:function wr(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=k(t));for(var s=this._groups,g=s.length,L=[],I=[],Y=0;Y<g;++Y)for(var Et,Z=s[Y],ct=Z.length,Jt=0;Jt<ct;++Jt)if(Et=Z[Jt]){for(var ie,Vt=t.call(Et,Et.__data__,Jt,Z),Ce=ii(Et,a),Ie=0,Wt=Vt.length;Ie<Wt;++Ie)(ie=Vt[Ie])&&Fi(ie,e,a,Ie,Vt,Ce);L.push(Vt),I.push(Et)}return new oi(L,I,e,a)},selectChild:si.selectChild,selectChildren:si.selectChildren,filter:function hr(t){"function"!=typeof t&&(t=U(t));for(var e=this._groups,a=e.length,s=new Array(a),g=0;g<a;++g)for(var Z,L=e[g],I=L.length,Y=s[g]=[],ct=0;ct<I;++ct)(Z=L[ct])&&t.call(Z,Z.__data__,ct,L)&&Y.push(Z);return new oi(s,this._parents,this._name,this._id)},merge:function cr(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,s=e.length,L=Math.min(s,a.length),I=new Array(s),Y=0;Y<L;++Y)for(var Vt,Z=e[Y],ct=a[Y],Et=Z.length,Jt=I[Y]=new Array(Et),ie=0;ie<Et;++ie)(Vt=Z[ie]||ct[ie])&&(Jt[ie]=Vt);for(;Y<s;++Y)I[Y]=e[Y];return new oi(I,this._parents,this._name,this._id)},selection:function br(){return new xr(this._groups,this._parents)},transition:function Dr(){for(var t=this._name,e=this._id,a=Qn(),s=this._groups,g=s.length,L=0;L<g;++L)for(var Z,I=s[L],Y=I.length,ct=0;ct<Y;++ct)if(Z=I[ct]){var Et=ii(Z,e);Fi(Z,t,a,ct,I,{time:Et.time+Et.delay+Et.duration,delay:0,duration:Et.duration,ease:Et.ease})}return new oi(s,this._parents,t,a)},call:si.call,nodes:si.nodes,node:si.node,size:si.size,empty:si.empty,each:si.each,on:function gr(t,e){var a=this._id;return arguments.length<2?ii(this.node(),a).on.on(t):this.each(function vr(t,e,a){var s,g,L=function fr(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?en:li;return function(){var I=L(this,t),Y=I.on;Y!==s&&(g=(s=Y).copy()).on(e,a),I.on=g}}(a,t,e))},attr:function Yl(t,e){var a=H(t),s="transform"===a?xl:Wn;return this.attrTween(t,"function"==typeof e?(a.local?Vl:Hl)(a,s,ln(this,"attr."+t,e)):null==e?(a.local?Gl:Wl)(a):(a.local?Jl:Ql)(a,s,e))},attrTween:function tr(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var s=H(t);return this.tween(a,(s.local?ql:$l)(s,e))},style:function kr(t,e,a){var s="transform"==(t+="")?wl:Wn;return null==e?this.styleTween(t,function _r(t,e){var a,s,g;return function(){var L=at(this,t),I=(this.style.removeProperty(t),at(this,t));return L===I?null:L===a&&I===s?g:g=e(a=L,s=I)}}(t,s)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Or(t,e,a){var s,g,L;return function(){var I=at(this,t),Y=a(this),Z=Y+"";return null==Y&&(this.style.removeProperty(t),Z=Y=at(this,t)),I===Z?null:I===s&&Z===g?L:(g=Z,L=e(s=I,Y))}}(t,s,ln(this,"style."+t,e))).each(function Sr(t,e){var a,s,g,Y,L="style."+e,I="end."+L;return function(){var Z=li(this,t),ct=Z.on,Et=null==Z.value[L]?Y||(Y=Gn(e)):void 0;(ct!==a||g!==Et)&&(s=(a=ct).copy()).on(I,g=Et),Z.on=s}}(this._id,t)):this.styleTween(t,function Er(t,e,a){var s,L,g=a+"";return function(){var I=at(this,t);return I===g?null:I===s?L:L=e(s=I,a)}}(t,s,e),a).on("end.style."+t,null)},styleTween:function Lr(t,e,a){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==e)return this.tween(s,null);if("function"!=typeof e)throw new Error;return this.tween(s,function Cr(t,e,a){var s,g;function L(){var I=e.apply(this,arguments);return I!==g&&(s=(g=I)&&function Tr(t,e,a){return function(s){this.style.setProperty(t,e.call(this,s),a)}}(t,I,a)),s}return L._value=e,L}(t,e,null==a?"":a))},text:function Ir(t){return this.tween("text","function"==typeof t?function Pr(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(ln(this,"text",t)):function Ar(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nr(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Mr(t){var e,a;function s(){var g=t.apply(this,arguments);return g!==a&&(e=(a=g)&&function Rr(t){return function(e){this.textContent=t.call(this,e)}}(g)),e}return s._value=t,s}(t))},remove:function mr(){return this.on("end.remove",function yr(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function El(t,e){var a=this._id;if(t+="",arguments.length<2){for(var I,s=ii(this.node(),a).tween,g=0,L=s.length;g<L;++g)if((I=s[g]).name===t)return I.value;return null}return this.each((null==e?bl:_l)(a,t,e))},delay:function nr(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?er:ir)(e,t)):ii(this.node(),e).delay},duration:function ar(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?lr:rr)(e,t)):ii(this.node(),e).duration},ease:function sr(t){var e=this._id;return arguments.length?this.each(function or(t,e){if("function"!=typeof e)throw new Error;return function(){li(this,t).ease=e}}(e,t)):ii(this.node(),e).ease},easeVarying:function ur(t){if("function"!=typeof t)throw new Error;return this.each(function dr(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;li(this,t).ease=a}}(this._id,t))},end:function jr(){var t,e,a=this,s=a._id,g=a.size();return new Promise(function(L,I){var Y={value:I},Z={value:function(){0==--g&&L()}};a.each(function(){var ct=li(this,s),Et=ct.on;Et!==t&&((e=(t=Et).copy())._.cancel.push(Y),e._.interrupt.push(Y),e._.end.push(Z)),ct.on=e}),0===g&&L()})},[Symbol.iterator]:si[Symbol.iterator]};var Fr={time:null,delay:0,duration:250,ease:function Br(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ur(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}we.prototype.interrupt=function yl(t){return this.each(function(){!function gl(t,e){var s,g,I,a=t.__transition,L=!0;if(a){for(I in e=null==e?null:e+"",a)(s=a[I]).name===e?(g=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(g?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete a[I]):L=!1;L&&delete t.__transition}}(this,t)})},we.prototype.transition=function Wr(t){var e,a;t instanceof oi?(e=t._id,t=t._name):(e=Qn(),(a=Fr).time=Xi(),t=null==t?null:t+"");for(var s=this._groups,g=s.length,L=0;L<g;++L)for(var Z,I=s[L],Y=I.length,ct=0;ct<Y;++ct)(Z=I[ct])&&Fi(Z,t,e,ct,I,a||Ur(Z,e));return new oi(s,this._parents,t,e)};Math;function Ii(t){return{type:t}}function bi(t){return function(){return t}}function Xn(t){this._context=t}function qr(t){return new Xn(t)}["w","e"].map(Ii),["n","s"].map(Ii),["n","w","e","s","nw","ne","sw","se"].map(Ii),Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const fn=Math.PI,vn=2*fn,gi=1e-6,$r=vn-gi;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Zi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(s){this._+=s[0];for(let g=1,L=s.length;g<L;++g)this._+=Math.round(arguments[g]*a)/a+s[g]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,s,g){this._append`Q${+e},${+a},${this._x1=+s},${this._y1=+g}`}bezierCurveTo(e,a,s,g,L,I){this._append`C${+e},${+a},${+s},${+g},${this._x1=+L},${this._y1=+I}`}arcTo(e,a,s,g,L){if(e=+e,a=+a,s=+s,g=+g,(L=+L)<0)throw new Error(`negative radius: ${L}`);let I=this._x1,Y=this._y1,Z=s-e,ct=g-a,Et=I-e,Jt=Y-a,Vt=Et*Et+Jt*Jt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Vt>gi)if(Math.abs(Jt*Z-ct*Et)>gi&&L){let ie=s-I,Ce=g-Y,Ie=Z*Z+ct*ct,Wt=ie*ie+Ce*Ce,Ut=Math.sqrt(Ie),de=Math.sqrt(Vt),ne=L*Math.tan((fn-Math.acos((Ie+Vt-Wt)/(2*Ut*de)))/2),ge=ne/de,xe=ne/Ut;Math.abs(ge-1)>gi&&this._append`L${e+ge*Et},${a+ge*Jt}`,this._append`A${L},${L},0,0,${+(Jt*ie>Et*Ce)},${this._x1=e+xe*Z},${this._y1=a+xe*ct}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,s,g,L,I){if(e=+e,a=+a,I=!!I,(s=+s)<0)throw new Error(`negative radius: ${s}`);let Y=s*Math.cos(g),Z=s*Math.sin(g),ct=e+Y,Et=a+Z,Jt=1^I,Vt=I?g-L:L-g;null===this._x1?this._append`M${ct},${Et}`:(Math.abs(this._x1-ct)>gi||Math.abs(this._y1-Et)>gi)&&this._append`L${ct},${Et}`,s&&(Vt<0&&(Vt=Vt%vn+vn),Vt>$r?this._append`A${s},${s},0,1,${Jt},${e-Y},${a-Z}A${s},${s},0,1,${Jt},${this._x1=ct},${this._y1=Et}`:Vt>gi&&this._append`A${s},${s},0,${+(Vt>=fn)},${Jt},${this._x1=e+s*Math.cos(L)},${this._y1=a+s*Math.sin(L)}`)}rect(e,a,s,g){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${s=+s}v${+g}h${-s}Z`}toString(){return this._}}function na(t){return t[0]}function la(t){return t[1]}function ra(t,e){var a=bi(!0),s=null,g=qr,L=null,I=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);e=s}return t},()=>new Zi(e)}(Y);function Y(Z){var ct,Jt,ie,Et=(Z=function Xr(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(Z)).length,Vt=!1;for(null==s&&(L=g(ie=I())),ct=0;ct<=Et;++ct)!(ct<Et&&a(Jt=Z[ct],ct,Z))===Vt&&((Vt=!Vt)?L.lineStart():L.lineEnd()),Vt&&L.point(+t(Jt,ct,Z),+e(Jt,ct,Z));if(ie)return L=null,ie+""||null}return t="function"==typeof t?t:void 0===t?na:bi(t),e="function"==typeof e?e:void 0===e?la:bi(e),Y.x=function(Z){return arguments.length?(t="function"==typeof Z?Z:bi(+Z),Y):t},Y.y=function(Z){return arguments.length?(e="function"==typeof Z?Z:bi(+Z),Y):e},Y.defined=function(Z){return arguments.length?(a="function"==typeof Z?Z:bi(!!Z),Y):a},Y.curve=function(Z){return arguments.length?(g=Z,null!=s&&(L=g(s)),Y):g},Y.context=function(Z){return arguments.length?(null==Z?s=L=null:L=g(s=Z),Y):s},Y}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tl(t){this._context=t}function aa(t){return new tl(t)}function _i(t,e,a){this.k=t,this.x=e,this.y=a}tl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_i.prototype={constructor:_i,scale:function(t){return 1===t?this:new _i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new _i(1,0,0)}}]);