"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9530],{6081:(E,b,i)=>{i.d(b,{GR:()=>x,dq:()=>v,hL:()=>m,qU:()=>h});var g=i(5972);function v(a){a.params=a.params||{},a.params.page=a.params.page||1,a.params.limit=a.params.limit||1,(0,g.hm)({url:"api/Board/Search",params:{getby:a.params.userid||null,board_id:a.params.board_id||null,board_ids:a.params.board_ids||null,board_title:a.params.board_title||null,size_width:a.params.size_width||null,size_height:a.params.size_height||null,topic_id:a.params.topic_id||null,category_id:a.params.category_id||null,template_id:a.params.template_id||null,createdby:a.params.createdby||null,sortfield:a.params.sortfield||null,sorttype:a.params.sorttype||null,posstart:(a.params.page-1)*a.params.limit,numofrow:a.params.limit},success:r=>{"function"==typeof a.callback&&a.callback(r.data||null)},error:r=>{"function"==typeof a.callback&&a.callback(),console.error(r)},loading:a.loading,loadingController:a.loadingController})}function m(a){a.params=a.params||{},a.params.page=a.params.page||1,a.params.limit=a.params.limit||1,(0,g.hm)({url:"api/Board/SearchTemplate",params:{getby:a.params.userid||null,board_id:a.params.board_id||null,board_title:a.params.board_title||null,size_width:a.params.size_width||null,size_height:a.params.size_height||null,topic_id:a.params.topic_id||null,category_id:a.params.category_id||null,template_id:a.params.template_id||null,createdby:a.params.createdby||null,sortfield:a.params.sortfield||null,sorttype:a.params.sorttype||null,posstart:(a.params.page-1)*a.params.limit,numofrow:a.params.limit},success:r=>{"function"==typeof a.callback&&a.callback(r.data||null)},error:r=>{"function"==typeof a.callback&&a.callback(),console.error(r)},loading:a.loading,loadingController:a.loadingController})}function h(a){a.params=a.params||{},(0,g.hm)({url:"api/Board/Detail",params:{getby:a.params.userid||null,board_id:a.params.board_id||null,isfrom:a.params.isfrom||null},success:r=>{"function"==typeof a.callback&&a.callback(r.data||null)},error:r=>{"function"==typeof a.callback&&a.callback(),console.error(r)},loading:a.loading,loadingController:a.loadingController})}function x(a){a.params=a.params||{},(0,g.Ll)({url:"api/Board/UpdateFromBoardIds",params:{board_id:a.params.board_id||null,from_board_ids:a.params.from_board_ids||null,createdby:a.params.userid||null,modifiedby:a.params.userid||null},success:r=>{"function"==typeof a.callback&&a.callback(r.data||null)},error:r=>{"function"==typeof a.callback&&a.callback(),console.error(r)},loading:a.loading,loadingController:a.loadingController})}},9530:(E,b,i)=>{i.r(b),i.d(b,{EmbedPageModule:()=>L});var g=i(177),v=i(9417),m=i(6637),h=i(3658),x=i(467),a=i(6611),r=i(5972),T=i(6081),P=i(4975),c=i(5619),B=i(2635),w=i(2837),S=i(8963),k=i(1171),e=i(4438),R=i(345);function z(t,o){if(1&t){const l=e.RV6();e.qex(0),e.j41(1,"div",15)(2,"ion-button",16),e.bIt("click",function(){e.eBV(l);const d=e.XpG();return e.Njj(d.pageBack())}),e.nrm(3,"ion-img",17),e.k0s(),e.j41(4,"span"),e.EFF(5),e.k0s(),e.j41(6,"ion-button",16),e.bIt("click",function(){e.eBV(l);const d=e.XpG();return e.Njj(d.pageNext())}),e.nrm(7,"ion-img",18),e.k0s()(),e.bVm()}if(2&t){const l=e.XpG();e.R7$(2),e.Y8G("disabled",l.slideIdx<1),e.R7$(3),e.Lme("",l.slideIdx+1,"/",l.slideTotal,""),e.R7$(),e.Y8G("disabled",l.slideIdx>=l.slideTotal-1)}}const j=[{path:"",component:(()=>{var t;class o{constructor(n,d,s){this.router=n,this.activatedRoute=d,this.titleService=s,this.b=0,this.slides=[],this.slideIdx=0,this.slideTotal=0,this.settings={},this.pageBack=()=>{this.slideIdx>0&&(this.slideIdx--,this.renderSlide())},this.pageNext=()=>{this.slideIdx<this.slideTotal-1&&(this.slideIdx++,this.renderSlide())},this.slideIdx=parseInt(d.snapshot.queryParamMap.get("n")||"1")-1,this.pathfile=this.activatedRoute.snapshot.queryParamMap.get("pathfile")||void 0;let p=this.activatedRoute.snapshot.queryParamMap.get("b")||"";p?this.b=parseInt(p):window.location.replace("/")}ngOnInit(){var n=this;a.L.container="#mainContainer",a.L.svg="#mainSvg",(0,x.A)(function*(){a.L.config=yield(0,r.AC)(),n.user=yield(0,B.Nk)(),n.refreshData()})(),(0,S.j)()}refreshData(){var n,d;(0,T.qU)({params:{userid:null===(n=this.user)||void 0===n?void 0:n.userid,board_id:this.b},callback:s=>{var p;null!=s&&s.board_id?(this.titleService.setTitle(`${s.board_title}`),(0,P.U5)({params:{userid:null===(p=this.user)||void 0===p?void 0:p.userid,board_id:this.b,pathfile:this.pathfile},callback:u=>{var y;let f;if(u&&!u.modules?f=(0,w.v)(u):"icdtV2"==(null==u?void 0:u.modules)&&(f=u),f)return c.J.data=f,c.J.changeSlide=(C,M,O,I,_)=>{this.slideIdx=O,this.slideTotal=I,this.slide=_,this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{n:this.slideIdx+1},queryParamsHandling:"merge",replaceUrl:!0})},this.slideTotal=c.J.slideTotal,this.renderSlide(),void(0,k.U)(f.fonts||[]);(0,P.rH)({params:{userid:null===(y=this.user)||void 0===y?void 0:y.userid,board_id:this.b},callback:C=>{if(C){let M=(0,w.v)(C);c.J.data=M,c.J.changeSlide=(O,I,_,G,$)=>{this.slideIdx=_,this.slideTotal=G,this.slide=$,this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{n:this.slideIdx+1},queryParamsHandling:"merge",replaceUrl:!0})},this.slideTotal=c.J.slideTotal,this.renderSlide(),(0,k.U)(M.fonts||[])}}})}})):window.location.replace("/")}}),(0,P.BS)({params:{board_id:this.b,userid:null===(d=this.user)||void 0===d?void 0:d.userid},callback:s=>{this.settings=s||{buttons:{paging:!0}}}}),window.addEventListener("resize",()=>{console.log("preview window resize"),this.slide&&(0,c.I)(a.L.container,a.L.svg,this.slide)})}renderSlide(){c.J.runSlide(this.slideIdx)}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(h.Ix),e.rXU(h.nX),e.rXU(R.hE))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-embed"]],decls:16,vars:2,consts:[["scroll-x","false","scroll-y","false",3,"fullscreen"],[1,"container-grid","grid-column"],[1,"container-head","container-top"],[1,"container-body","grid-grow"],[1,"container-grid","grid-row"],[1,"container-left"],[1,"container-center"],[1,"grid-grow"],[1,"main-container",2,"overflow","auto"],["scroll-x","false","scroll-y","false"],["id","mainContainer",1,"svg-box"],["id","mainSvg","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"viewer"],[1,"container-bottom"],[4,"ngIf"],[1,"container-right"],[1,"group-action-paging"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"click","disabled"],["src","../../../assets/icon-png/Back.png"],["src","../../../assets/icon-png/Next.png"]],template:function(n,d){1&n&&(e.j41(0,"ion-content",0)(1,"div",1),e.nrm(2,"div",2),e.j41(3,"div",3)(4,"div",4),e.nrm(5,"div",5),e.j41(6,"div",6)(7,"div",1)(8,"div",7)(9,"div",8)(10,"ion-content",9)(11,"div",10),e.qSk(),e.nrm(12,"svg",11),e.k0s()()()(),e.joV(),e.j41(13,"div",12),e.DNE(14,z,8,4,"ng-container",13),e.k0s()()(),e.nrm(15,"div",14),e.k0s()()()()),2&n&&(e.Y8G("fullscreen",!0),e.R7$(14),e.Y8G("ngIf",null==d.settings.buttons?null:d.settings.buttons.paging))},dependencies:[g.bT,m.Jm,m.W9,m.KW],styles:[".container-grid[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.container-grid.grid-row[_ngcontent-%COMP%]{flex-flow:row}.container-grid.grid-column[_ngcontent-%COMP%]{flex-flow:column}.container-grid[_ngcontent-%COMP%]   .grid-grow[_ngcontent-%COMP%]{flex-grow:1}.container-head[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:0 2px 2px #0000001a}.container-body[_ngcontent-%COMP%]{position:relative;z-index:1}.container-body[_ngcontent-%COMP%]   .container-left[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-right[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:-2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]{position:relative;z-index:1;flex:auto;width:calc(100% - 480px)}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .container-bottom[_ngcontent-%COMP%]{position:relative;z-index:2}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;z-index:1;-webkit-user-select:none;user-select:none;background-color:#fafafa}.group-action-paging[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:1rem;line-height:0;-webkit-user-select:none;user-select:none}.group-action-paging[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:0 1rem;vertical-align:middle;font-size:18px;color:#fab11d}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{vertical-align:middle}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:34px;width:34px}.svg-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));display:flex;align-items:center;justify-content:center}.svg-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;margin:auto;background:#fff}"]}),o})()}];let U=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.iI.forChild(j),h.iI]}),o})(),L=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.MD,v.YN,m.bv,U]}),o})()}}]);