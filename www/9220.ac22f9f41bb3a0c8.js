"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9220],{9316:(F,h,n)=>{n.d(h,{p:()=>s});const s=(0,n(5083).F3)("Device",{web:()=>n.e(8622).then(n.bind(n,8622)).then(m=>new m.DeviceWeb)})},1477:(F,h,n)=>{n.d(h,{r:()=>u});const u={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221}},9946:(F,h,n)=>{n.d(h,{LZ:()=>U,NS:()=>s,Wm:()=>M,_5:()=>m,bI:()=>l,il:()=>_,qi:()=>g,wQ:()=>c});var u=n(5972);function s(e){e.params=e.params||{},(0,u.hm)({url:"api/User/Detail",params:{userid:e.params.userid||null},success:r=>{"function"==typeof e.callback&&e.callback(r.data||null)},error:r=>{"function"==typeof e.callback&&e.callback(),console.error(r)},loading:e.loading,loadingController:e.loadingController})}function m(e){e.params=e.params||{},(0,u.Ll)({url:"api/User/SignIn",params:{emailaddr:e.params.emailaddr||null,pwd:e.params.pwd||null},success:r=>{"function"==typeof e.callback&&e.callback(r.data||null)},error:r=>{"function"==typeof e.callback&&e.callback(),console.error(e,r)},loading:e.loading,loadingController:e.loadingController})}function g(e){e.params=e.params||{},(0,u.Ll)({url:"api/User/SignUp",params:{firstname:e.params.firstname||null,lastname:e.params.lastname||null,emailaddr:e.params.emailaddr||null,pwd:e.params.pwd||null},success:r=>{"function"==typeof e.callback&&e.callback(r.data||null)},error:r=>{"function"==typeof e.callback&&e.callback(),console.error(e,r)},loading:e.loading,loadingController:e.loadingController})}function c(e){e.params=e.params||{},(0,u.Ll)({url:"api/User/Active",params:{emailaddr:e.params.emailaddr||null,activationcode:e.params.activationcode||null},success:r=>{"function"==typeof e.callback&&e.callback(r.data||null)},error:r=>{"function"==typeof e.callback&&e.callback(),console.error(e,r)},loading:e.loading,loadingController:e.loadingController})}function l(e){e.params=e.params||{},(0,u.Ll)({url:"api/User/ChangePassword",params:{emailaddr:e.params.emailaddr||null,pwd:e.params.pwd||null,forgotpwdcode:e.params.forgotpwdcode||null,newpwd:e.params.newpwd||null},success:r=>{"function"==typeof e.callback&&e.callback(r.data||null)},error:r=>{"function"==typeof e.callback&&e.callback(),console.error(e,r)},loading:e.loading,loadingController:e.loadingController})}function M(e){e.params=e.params||{},(0,u.Ll)({url:"api/User/UpdateInfo",params:{userid:e.params.userid||null,firstname:e.params.firstname||null,lastname:e.params.lastname||null,emailaddr:e.params.emailaddr||null,mobilecountrycode:e.params.mobilecountrycode||null,mobile:e.params.mobile||null,introduce:e.params.introduce||null},success:r=>{"function"==typeof e.callback&&e.callback(r.data||null)},error:r=>{"function"==typeof e.callback&&e.callback(),console.error(e,r)},loading:e.loading,loadingController:e.loadingController})}function _(e){e.params=e.params||{},(0,u.Ll)({url:"api/users/forgotpassword",params:{emailaddr:e.params.emailaddr||null},success:r=>{if("function"==typeof e.callback){var i=r.data||{};i.returncode=null!=i.returncode?i.returncode:i.ReturnCode,i.returnmsg=null!=i.returnmsg?i.returnmsg:i.ReturnMsg,i.id=null!=i.id?i.id:i.AccountID,e.callback(i)}},error:r=>{"function"==typeof e.callback&&e.callback(),console.error(e,r)},loading:e.loading,loadingController:e.loadingController})}function U(e){e.params=e.params||{},(0,u.Ll)({url:"api/User/UpdatePhoto",params:{userid:e.params.userid||null,profilephoto:e.params.avatar||null},success:r=>{"function"==typeof e.callback&&e.callback(r.data||null)},error:r=>{"function"==typeof e.callback&&e.callback(),console.error(e,r)},loading:e.loading,loadingController:e.loadingController})}},2635:(F,h,n)=>{n.d(h,{N$:()=>_,Nk:()=>c,kD:()=>M,xy:()=>l});var u=n(467),s=n(369),m=n(5972);const g=new s.w({name:"_userDB",driverOrder:[s.C.IndexedDB,s.C.LocalStorage]}),c=function(){var e=(0,u.A)(function*(r){yield g.create();try{var i=(yield g.get("user-local"))||{};return"function"==typeof(null==r?void 0:r.callback)&&r.callback(Object.assign({},i||{})),i}catch(a){"function"==typeof(null==r?void 0:r.callback)&&r.callback(),console.error(a)}return{}});return function(i){return e.apply(this,arguments)}}(),l=function(){var e=(0,u.A)(function*(r){yield g.create(),r.params=r.params||{};try{var i=Object.assign({},r.params);yield g.set("user-local",i),"function"==typeof r.callback&&r.callback(Object.assign({},i||{}))}catch(a){"function"==typeof r.callback&&r.callback(),console.error(a)}});return function(i){return e.apply(this,arguments)}}(),M=function(){var e=(0,u.A)(function*(r){return r&&(r.params={}),l(null!=r?r:{})});return function(i){return e.apply(this,arguments)}}(),_=function(){var e=(0,u.A)(function*(r,i){let a=yield(0,m.AC)();if(i){let k=[];r.params.profilephoto&&k.push(new Promise((P,v)=>{let b=new Image;b.onload=()=>{r.params.url_profilephoto=b.src,P(1)},b.onerror=()=>{r.params.url_profilephoto="assets/image/user-avatar-default.png",P(0)},b.src=a.readfileuploadurl+r.params.profilephoto})),r.params.banner&&k.push(new Promise((P,v)=>{let b=new Image;b.onload=()=>{r.params.url_banner=b.src,P(1)},b.onerror=()=>{r.params.url_banner="assets/image/user-banner-default.png",P(0)},b.src=a.readfileuploadurl+r.params.banner})),k.length>0?Promise.all(k).then(()=>{l(r)}):l(r)}else c({callback:k=>{if(k){let P=[];r.params.profilephoto&&P.push(new Promise((v,b)=>{let y=new Image;y.onload=()=>{r.params.url_profilephoto=y.src,v(1)},y.onerror=()=>{r.params.url_profilephoto="assets/image/user-avatar-default.png",v(0)},y.src=a.readfileuploadurl+r.params.profilephoto})),r.params.banner&&P.push(new Promise((v,b)=>{let y=new Image;y.onload=()=>{r.params.url_banner=y.src,v(1)},y.onerror=()=>{r.params.url_banner="assets/image/user-banner-default.png",v(0)},y.src=a.readfileuploadurl+r.params.banner})),P.length>0?Promise.all(P).then(()=>{l({params:Object.assign({},k,r.params),callback:r.callback})}):l({params:Object.assign({},k,r.params),callback:r.callback})}else"function"==typeof r.callback&&r.callback()}})});return function(i,a){return e.apply(this,arguments)}}()},9220:(F,h,n)=>{n.r(h),n.d(h,{UserSetPwdPageModule:()=>R});var u=n(177),s=n(9417),m=n(6637),g=n(3658),c=n(467),l=n(9316),M=n(1477),_=n(5972),U=n(9946),O=n(2635),e=n(8833),r=n(5414),i=n(5312),a=n(4438),k=n(345),P=n(31);const v=()=>({standalone:!0});function b(d,w){if(1&d&&(a.j41(0,"option",17),a.EFF(1),a.k0s()),2&d){const f=w.$implicit;a.Y8G("value",f.madonvi),a.R7$(),a.JRh(f.tendv)}}function y(d,w){if(1&d){const f=a.RV6();a.j41(0,"div",9)(1,"label"),a.EFF(2),a.nI1(3,"translate"),a.j41(4,"span"),a.EFF(5,"*"),a.k0s()(),a.j41(6,"select",15),a.bIt("ngModelChange",function(o){a.eBV(f);const p=a.XpG();return a.Njj(p.changeDonVi(o))}),a.DNE(7,b,2,2,"option",16),a.k0s()()}if(2&d){const f=a.XpG();a.R7$(2),a.SpI("",a.bMT(3,4,"Unit")," "),a.R7$(4),a.Y8G("ngModel",f.dataForm.madonvi)("ngModelOptions",a.lJ4(6,v)),a.R7$(),a.Y8G("ngForOf",f.configs)}}const D=[{path:"",component:(()=>{var d;class w{constructor(t,o,p,C){this.router=t,this.activatedRoute=o,this.titleService=p,this.toastController=C,this.appsettings={},this.configs=[],this.dataForm={},this.inputPwdType="password",p.setTitle("\u0110\u1eb7t m\u1eadt kh\u1ea9u m\u1edbi")}ngOnInit(){var t=this;if(this.dataForm.emailaddr=this.activatedRoute.snapshot.queryParamMap.get("email")||"",this.dataForm.forgotpwdcode=this.activatedRoute.snapshot.queryParamMap.get("code")||"",!this.dataForm.emailaddr||!this.dataForm.forgotpwdcode)return this.backToHome();(0,c.A)(function*(){(0,O.kD)({}),yield(0,_.jQ)(),t.appsettings=yield(0,_.AC)(),t.dataForm.madonvi=t.appsettings.madonvi;let o=yield l.p.getId();t.dataForm.devicekey=null==o?void 0:o.identifier,t.configs=(yield(0,_.zu)())||[],t.configs&&t.configs.length?1==t.configs.length&&(t.dataForm.madonvi=t.configs[0].madonvi):t.dataForm.madonvi=i.c.default_donvi})()}backToHome(){window.location.replace(e._.LANDING_PAGE)}changeDonVi(t){var o=this;return(0,c.A)(function*(){o.dataForm.madonvi=t})()}changeNewPwd(t){this.dataForm.newpwd=t}changeNewPwd2(t){this.dataForm.newpwd2=t}keypressPwd(t){(t.keyCode||t.which||t.charCode||0)==M.r.Enter&&this.formSubmit(t)}formSubmit(t){var o=this;return(0,c.A)(function*(){t.preventDefault(),o.dataForm.emailaddr&&o.dataForm.forgotpwdcode&&o.dataForm.newpwd&&o.dataForm.newpwd==o.dataForm.newpwd2&&(yield(0,_.MS)(o.dataForm.madonvi),(0,U.bI)({params:o.dataForm,callback:p=>{(0,r.c)(o.toastController,{},p).then(C=>C.present()),0==(null==p?void 0:p.returncode)&&setTimeout(()=>{window.location.replace(e._.LANDING_PAGE+"?require=signin")},3e3)}}))})()}}return(d=w).\u0275fac=function(t){return new(t||d)(a.rXU(g.Ix),a.rXU(g.nX),a.rXU(k.hE),a.rXU(m.K_))},d.\u0275cmp=a.VBU({type:d,selectors:[["app-user-set-pwd"]],decls:37,vars:25,consts:[["scroll-x","false","scroll-y","false"],["slot","fixed","vertical","top","horizontal","start"],["size","small",3,"click"],["name","arrow-back-outline"],[1,"container-main","overflow-auto","d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"container-form"],["src","../../../assets/image/logo.svg","alt","Tabca"],[3,"submit"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","email","name","emailaddr","minlength","{6}","maxlength","{32}","required","","autofocus","","placeholder","your-email@email.com","readonly","",1,"form-control",3,"ngModel"],["type","password","name","newpwd","minlength","{6}","maxlength","{32}","required","","placeholder","******",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["type","password","name","newpwd2","minlength","{6}","maxlength","{32}","required","","placeholder","******",1,"form-control",3,"keypress","ngModelChange","ngModel","ngModelOptions"],[1,"form-group","mt-5"],["type","submit",1,"btn"],["interface","popover","justify","end",1,"custom-select",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,o){1&t&&(a.j41(0,"ion-content",0)(1,"ion-fab",1)(2,"ion-fab-button",2),a.bIt("click",function(){return o.backToHome()}),a.nrm(3,"ion-icon",3),a.k0s()(),a.j41(4,"div",4)(5,"div",5),a.nrm(6,"img",6),a.j41(7,"h1"),a.EFF(8),a.nI1(9,"translate"),a.k0s(),a.j41(10,"form",7),a.bIt("submit",function(C){return o.formSubmit(C)}),a.DNE(11,y,8,7,"div",8),a.j41(12,"div",9)(13,"label"),a.EFF(14),a.nI1(15,"translate"),a.j41(16,"span"),a.EFF(17,"*"),a.k0s()(),a.nrm(18,"input",10),a.k0s(),a.j41(19,"div",9)(20,"label"),a.EFF(21),a.nI1(22,"translate"),a.j41(23,"span"),a.EFF(24,"*"),a.k0s()(),a.j41(25,"input",11),a.bIt("ngModelChange",function(C){return o.changeNewPwd(C)}),a.k0s()(),a.j41(26,"div",9)(27,"label"),a.EFF(28),a.nI1(29,"translate"),a.j41(30,"span"),a.EFF(31,"*"),a.k0s()(),a.j41(32,"input",12),a.bIt("keypress",function(C){return o.keypressPwd(C)})("ngModelChange",function(C){return o.changeNewPwd2(C)}),a.k0s()(),a.j41(33,"div",13)(34,"button",14),a.EFF(35),a.nI1(36,"translate"),a.k0s()()()()()()),2&t&&(a.R7$(8),a.JRh(a.bMT(9,13,"UpdatePassword")),a.R7$(3),a.Y8G("ngIf",o.configs.length>1),a.R7$(3),a.SpI("",a.bMT(15,15,"Email")," "),a.R7$(4),a.Y8G("ngModel",o.dataForm.emailaddr),a.R7$(3),a.SpI("",a.bMT(22,17,"NewPassword")," "),a.R7$(4),a.Y8G("ngModel",o.dataForm.newpwd)("ngModelOptions",a.lJ4(23,v)),a.R7$(3),a.SpI("",a.bMT(29,19,"ConfirmPassword")," "),a.R7$(4),a.HbH(o.dataForm.newpwd&&o.dataForm.newpwd2?o.dataForm.newpwd==o.dataForm.newpwd2?"is-valid":"is-invalid":""),a.Y8G("ngModel",o.dataForm.newpwd2)("ngModelOptions",a.lJ4(24,v)),a.R7$(3),a.JRh(a.bMT(36,21,"SetNewPassword")))},dependencies:[u.Sq,u.bT,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.YS,s.xh,s.tU,s.vS,s.cV,m.W9,m.Q8,m.YW,m.iq,P.D9],styles:[".container-main[_ngcontent-%COMP%]{padding:.5rem;background-image:url(bg-join-and-share.d53a3207da518edb.png);background-repeat:no-repeat;background-size:cover;background-position:center center}.container-form[_ngcontent-%COMP%]{width:420px;padding:2rem 2rem 1rem;margin:auto;border-radius:10px;background:#fff;box-shadow:0 0 20px #00000026}.container-form[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:60px}.container-form[_ngcontent-%COMP%] > h1[_ngcontent-%COMP%]{margin:1rem 0 2rem;font-size:32px;font-weight:700;line-height:40px}.container-form[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{color:#1f1f39;font-size:14px}.container-form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center}.container-form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#858597}.container-form[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3243c7;cursor:pointer}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{margin-bottom:5px;color:#333}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff3131}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%] > select[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:12px;border:.5px solid #B8B8D2;background-color:#e8f0fe;outline:none;box-shadow:none}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:12px;color:#fff;background:#3243c7;background:linear-gradient(90deg,#6d42e7 4.11%,#ea5fc1);border:0;outline:none;box-shadow:none}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{vertical-align:sub}form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3243c7;cursor:pointer}form[_ngcontent-%COMP%]   .for-got-pwd[_ngcontent-%COMP%]{margin-top:-.5rem;text-align:right}"]}),w})()}];let I=(()=>{var d;class w{}return(d=w).\u0275fac=function(t){return new(t||d)},d.\u0275mod=a.$C({type:d}),d.\u0275inj=a.G2t({imports:[g.iI.forChild(D),g.iI]}),w})();var S=n(3890);let R=(()=>{var d;class w{}return(d=w).\u0275fac=function(t){return new(t||d)},d.\u0275mod=a.$C({type:d}),d.\u0275inj=a.G2t({imports:[u.MD,s.YN,m.bv,I,S.x]}),w})()},5414:(F,h,n)=>{n.d(h,{c:()=>s});var u=n(467);const s=function(){var m=(0,u.A)(function*(g,c,l){var M,_,U;l&&(c.message||(c.message=null!==(U=null==l?void 0:l.returnmsg)&&void 0!==U?U:0==(null==l?void 0:l.returncode)?"Th\xe0nh c\xf4ng!":null!=l&&l.returncode?`L\u1ed7i: #${null==l?void 0:l.returncode}`:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!"),c.icon||(c.icon=0==(null==l?void 0:l.returncode)?"checkmark-circle-sharp":null!=l&&l.returncode?"alert-circle-outline":"close-circle-sharp"),c.color||(c.color=0==(null==l?void 0:l.returncode)?"success":null!=l&&l.returncode?"warning":"danger"));return c.position||(c.position="bottom"),c.icon||(c.icon="bulb-outline"),c.color||(c.color="secondary"),c.duration=null!==(M=c.duration)&&void 0!==M?M:3e3,c.animated=null===(_=c.animated)||void 0===_||_,c.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield g.create(c)});return function(c,l,M){return m.apply(this,arguments)}}()}}]);