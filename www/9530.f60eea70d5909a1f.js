"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9530],{6081:(E,k,l)=>{l.d(k,{GR:()=>t,dq:()=>C,hL:()=>f,qU:()=>u});var s=l(5972);function C(a){var n;a.params=a.params||{},a.params.page=a.params.page||1,a.params.limit=a.params.limit||1,(0,s.hm)({url:"api/Board/Search",params:{getby:a.params.userid||null,gettype:a.params.gettype||null,getfrom:a.params.getfrom||null,board_id:a.params.board_id||null,board_ids:a.params.board_ids||null,board_title:a.params.board_title||null,size_width:a.params.size_width||null,size_height:a.params.size_height||null,topic_id:a.params.topic_id||null,category_id:a.params.category_id||null,template_id:a.params.template_id||null,tags:null!==(n=a.params.tags)&&void 0!==n?n:null,createdby:a.params.createdby||null,sortfield:a.params.sortfield||null,sorttype:a.params.sorttype||null,posstart:(a.params.page-1)*a.params.limit,numofrow:a.params.limit},success:b=>{"function"==typeof a.callback&&a.callback(b.data||null)},error:b=>{"function"==typeof a.callback&&a.callback(),console.error(b)},loading:a.loading,loadingController:a.loadingController})}function f(a){a.params=a.params||{},a.params.page=a.params.page||1,a.params.limit=a.params.limit||1,(0,s.hm)({url:"api/Board/SearchTemplate",params:{getby:a.params.userid||null,board_id:a.params.board_id||null,board_title:a.params.board_title||null,size_width:a.params.size_width||null,size_height:a.params.size_height||null,topic_id:a.params.topic_id||null,category_id:a.params.category_id||null,template_id:a.params.template_id||null,createdby:a.params.createdby||null,sortfield:a.params.sortfield||null,sorttype:a.params.sorttype||null,posstart:(a.params.page-1)*a.params.limit,numofrow:a.params.limit},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{"function"==typeof a.callback&&a.callback(),console.error(n)},loading:a.loading,loadingController:a.loadingController})}function u(a){a.params=a.params||{},(0,s.hm)({url:"api/Board/Detail",params:{getby:a.params.userid||null,board_id:a.params.board_id||null,isfrom:a.params.isfrom||null},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{"function"==typeof a.callback&&a.callback(),console.error(n)},loading:a.loading,loadingController:a.loadingController})}function t(a){a.params=a.params||{},(0,s.Ll)({url:"api/Board/UpdateFromBoardIds",params:{board_id:a.params.board_id||null,from_board_ids:a.params.from_board_ids||null,createdby:a.params.userid||null,modifiedby:a.params.userid||null},success:n=>{"function"==typeof a.callback&&a.callback(n.data||null)},error:n=>{"function"==typeof a.callback&&a.callback(),console.error(n)},loading:a.loading,loadingController:a.loadingController})}},2635:(E,k,l)=>{l.d(k,{N$:()=>b,Nk:()=>t,kD:()=>n,xy:()=>a});var s=l(467),C=l(369),f=l(5972);const u=new C.w({name:"_userDB",driverOrder:[C.C.IndexedDB,C.C.LocalStorage]}),t=function(){var p=(0,s.A)(function*(r){yield u.create();try{var o=(yield u.get("user-local"))||{};return"function"==typeof(null==r?void 0:r.callback)&&r.callback(Object.assign({},o||{})),o}catch(e){"function"==typeof(null==r?void 0:r.callback)&&r.callback(),console.error(e)}return{}});return function(o){return p.apply(this,arguments)}}(),a=function(){var p=(0,s.A)(function*(r){yield u.create(),r.params=r.params||{};try{var o=Object.assign({},r.params);yield u.set("user-local",o),"function"==typeof r.callback&&r.callback(Object.assign({},o||{}))}catch(e){"function"==typeof r.callback&&r.callback(),console.error(e)}});return function(o){return p.apply(this,arguments)}}(),n=function(){var p=(0,s.A)(function*(r){return r&&(r.params={}),a(null!=r?r:{})});return function(o){return p.apply(this,arguments)}}(),b=function(){var p=(0,s.A)(function*(r,o){let e=yield(0,f.AC)();if(o){let y=[];r.params.profilephoto&&y.push(new Promise((h,O)=>{let g=new Image;g.onload=()=>{r.params.url_profilephoto=g.src,h(1)},g.onerror=()=>{r.params.url_profilephoto="assets/image/user-avatar-default.png",h(0)},g.src=e.readfileuploadurl+r.params.profilephoto})),r.params.banner&&y.push(new Promise((h,O)=>{let g=new Image;g.onload=()=>{r.params.url_banner=g.src,h(1)},g.onerror=()=>{r.params.url_banner="assets/image/user-banner-default.png",h(0)},g.src=e.readfileuploadurl+r.params.banner})),y.length>0?Promise.all(y).then(()=>{a(r)}):a(r)}else t({callback:y=>{if(y){let h=[];r.params.profilephoto&&h.push(new Promise((O,g)=>{let _=new Image;_.onload=()=>{r.params.url_profilephoto=_.src,O(1)},_.onerror=()=>{r.params.url_profilephoto="assets/image/user-avatar-default.png",O(0)},_.src=e.readfileuploadurl+r.params.profilephoto})),r.params.banner&&h.push(new Promise((O,g)=>{let _=new Image;_.onload=()=>{r.params.url_banner=_.src,O(1)},_.onerror=()=>{r.params.url_banner="assets/image/user-banner-default.png",O(0)},_.src=e.readfileuploadurl+r.params.banner})),h.length>0?Promise.all(h).then(()=>{a({params:Object.assign({},y,r.params),callback:r.callback})}):a({params:Object.assign({},y,r.params),callback:r.callback})}else"function"==typeof r.callback&&r.callback()}})});return function(o,e){return p.apply(this,arguments)}}()},9530:(E,k,l)=>{l.r(k),l.d(k,{EmbedPageModule:()=>D});var s=l(177),C=l(9417),f=l(6637),u=l(3658),t=l(467),a=l(8408),n=l(5972),b=l(6081),M=l(4975),L=l(2635),p=l(8963),r=l(1171),o=l(5414),e=l(4438),y=l(345);function h(i,x){if(1&i){const d=e.RV6();e.qex(0),e.j41(1,"div",15)(2,"ion-button",16),e.bIt("click",function(){e.eBV(d);const m=e.XpG();return e.Njj(m.pageBack())}),e.nrm(3,"ion-img",17),e.k0s(),e.j41(4,"span"),e.EFF(5),e.k0s(),e.j41(6,"ion-button",16),e.bIt("click",function(){e.eBV(d);const m=e.XpG();return e.Njj(m.pageNext())}),e.nrm(7,"ion-img",18),e.k0s()(),e.bVm()}if(2&i){const d=e.XpG();e.R7$(2),e.Y8G("disabled",d.slideIdx<1),e.R7$(3),e.Lme("",d.slideIdx+1,"/",d.slideTotal,""),e.R7$(),e.Y8G("disabled",d.slideIdx>=d.slideTotal-1)}}const g=[{path:"",component:(()=>{var i;class x{constructor(c,m,P,I,v){this.router=c,this.activatedRoute=m,this.titleService=P,this.loadingController=I,this.toastController=v,this.b=0,this.slides=[],this.slideIdx=0,this.slideTotal=0,this.settings={},this.pageBack=()=>{this.slideIdx>0&&(this.slideIdx--,this.renderSlide())},this.pageNext=()=>{this.slideIdx<this.slideTotal-1&&(this.slideIdx++,this.renderSlide())},this.slideIdx=parseInt(m.snapshot.queryParamMap.get("n")||"1")-1,this.pathfile=this.activatedRoute.snapshot.queryParamMap.get("pathfile")||void 0;let w=this.activatedRoute.snapshot.queryParamMap.get("b")||"";w?this.b=parseInt(w):window.location.replace("/")}ngOnInit(){var c=this;a.LVk.container="#mainContainer",a.LVk.svg="#mainSvg",(0,t.A)(function*(){a.LVk.config=yield(0,n.AC)(),c.user=yield(0,L.Nk)(),c.refreshData()})(),(0,p.j)()}refreshData(){var c,m;(0,b.qU)({loadingController:this.loadingController,params:{userid:null===(c=this.user)||void 0===c?void 0:c.userid,board_id:this.b},callback:P=>{var I;null!=P&&P.board_id?(this.titleService.setTitle(`${P.board_title}`),(0,M.U5)({loadingController:this.loadingController,params:{userid:null===(I=this.user)||void 0===I?void 0:I.userid,board_id:this.b,pathfile:this.pathfile},callback:v=>{var w;let T;if(v&&!v.modules?T=(0,a.vmR)(v):"icdtV2"==(null==v?void 0:v.modules)&&(T=v),T)return a.JRt.data=T,a.JRt.changeSlide=(U,j,B,S,R)=>{this.slideIdx=B,this.slideTotal=S,this.slide=R,this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{n:this.slideIdx+1},queryParamsHandling:"merge",replaceUrl:!0})},this.slideTotal=a.JRt.slideTotal,this.renderSlide(),void(0,r.U2)(T.fonts||[]);(0,M.rH)({loadingController:this.loadingController,params:{userid:null===(w=this.user)||void 0===w?void 0:w.userid,board_id:this.b},callback:U=>{if(U){let j=(0,a.vmR)(U);a.JRt.data=j,a.JRt.changeSlide=(B,S,R,G,z)=>{this.slideIdx=R,this.slideTotal=G,this.slide=z,this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{n:this.slideIdx+1},queryParamsHandling:"merge",replaceUrl:!0})},this.slideTotal=a.JRt.slideTotal,this.renderSlide(),(0,r.U2)(j.fonts||[])}}})}})):(0,o.c)(this.toastController,{color:"danger",message:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u!"}).then(v=>v.present())}}),(0,M.BS)({params:{board_id:this.b,userid:null===(m=this.user)||void 0===m?void 0:m.userid},callback:P=>{this.settings=P||{buttons:{paging:!0}}}}),window.addEventListener("resize",()=>{console.log("preview window resize"),this.slide&&(0,a.I1Q)(a.LVk.container,a.LVk.svg,this.slide)})}renderSlide(){a.JRt.runSlide(this.slideIdx)}}return(i=x).\u0275fac=function(c){return new(c||i)(e.rXU(u.Ix),e.rXU(u.nX),e.rXU(y.hE),e.rXU(f.Xi),e.rXU(f.K_))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-embed"]],decls:16,vars:2,consts:[["scroll-x","false","scroll-y","false",3,"fullscreen"],[1,"container-grid","grid-column"],[1,"container-head","container-top"],[1,"container-body","grid-grow"],[1,"container-grid","grid-row"],[1,"container-left"],[1,"container-center"],[1,"grid-grow"],[1,"main-container","overflow-auto"],["scroll-x","false","scroll-y","false"],["id","mainContainer",1,"svg-box"],["id","mainSvg","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"viewer"],[1,"container-bottom"],[4,"ngIf"],[1,"container-right"],[1,"group-action-paging"],["fill","clear",1,"ion-no-margin","ion-no-padding",3,"click","disabled"],["src","../../../assets/icon-png/Back.png"],["src","../../../assets/icon-png/Next.png"]],template:function(c,m){1&c&&(e.j41(0,"ion-content",0)(1,"div",1),e.nrm(2,"div",2),e.j41(3,"div",3)(4,"div",4),e.nrm(5,"div",5),e.j41(6,"div",6)(7,"div",1)(8,"div",7)(9,"div",8)(10,"ion-content",9)(11,"div",10),e.qSk(),e.nrm(12,"svg",11),e.k0s()()()(),e.joV(),e.j41(13,"div",12),e.DNE(14,h,8,4,"ng-container",13),e.k0s()()(),e.nrm(15,"div",14),e.k0s()()()()),2&c&&(e.Y8G("fullscreen",!0),e.R7$(14),e.Y8G("ngIf",null==m.settings.buttons?null:m.settings.buttons.paging))},dependencies:[s.bT,f.Jm,f.W9,f.KW],styles:[".container-grid[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.container-grid.grid-row[_ngcontent-%COMP%]{flex-flow:row}.container-grid.grid-column[_ngcontent-%COMP%]{flex-flow:column}.container-grid[_ngcontent-%COMP%]   .grid-grow[_ngcontent-%COMP%]{flex-grow:1}.container-head[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:0 2px 2px #0000001a}.container-body[_ngcontent-%COMP%]{position:relative;z-index:1}.container-body[_ngcontent-%COMP%]   .container-left[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-right[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:-2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]{position:relative;z-index:1;flex:auto;width:calc(100% - 480px)}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .container-bottom[_ngcontent-%COMP%]{position:relative;z-index:2}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;z-index:1;-webkit-user-select:none;user-select:none;background-color:#fafafa}.group-action-paging[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:1rem;line-height:0;-webkit-user-select:none;user-select:none}.group-action-paging[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:0 1rem;vertical-align:middle;font-size:18px;color:#fab11d}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{vertical-align:middle}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:34px;width:34px}.svg-box[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:var(--ion-toolbar-background, var(--ion-color-step-50, #f7f7f7));display:flex;align-items:center;justify-content:center}.svg-box[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;margin:auto;background:#fff}"]}),x})()}];let _=(()=>{var i;class x{}return(i=x).\u0275fac=function(c){return new(c||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.iI.forChild(g),u.iI]}),x})(),D=(()=>{var i;class x{}return(i=x).\u0275fac=function(c){return new(c||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[s.MD,C.YN,f.bv,_]}),x})()},5414:(E,k,l)=>{l.d(k,{c:()=>C});var s=l(467);const C=function(){var f=(0,s.A)(function*(u,t,a){var n,b,M;a&&(t.message||(t.message=null!==(M=null==a?void 0:a.returnmsg)&&void 0!==M?M:0==(null==a?void 0:a.returncode)?"Th\xe0nh c\xf4ng!":null!=a&&a.returncode?`L\u1ed7i: #${null==a?void 0:a.returncode}`:"H\u1ec7 th\u1ed1ng kh\xf4ng c\xf3 ph\u1ea3n h\u1ed3i!"),t.icon||(t.icon=0==(null==a?void 0:a.returncode)?"checkmark-circle-sharp":null!=a&&a.returncode?"alert-circle-outline":"close-circle-sharp"),t.color||(t.color=0==(null==a?void 0:a.returncode)?"success":null!=a&&a.returncode?"warning":"danger"));return t.position||(t.position="bottom"),t.icon||(t.icon="bulb-outline"),t.color||(t.color="secondary"),t.duration=null!==(n=t.duration)&&void 0!==n?n:3e3,t.animated=null===(b=t.animated)||void 0===b||b,t.buttons=[{icon:"close-outline",side:"end",role:"cancel"}],yield u.create(t)});return function(t,a,n){return f.apply(this,arguments)}}()}}]);