"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[675],{9469:(et,H,h)=>{h.d(H,{K5:()=>W,Ur:()=>J,Xs:()=>t,op:()=>K});var y=h(5972);const K=d=>{var E,k,F,j,B,n,I,x,N;d.params=d.params||{},d.params.page=d.params.page||1,d.params.limit=d.params.limit||1,(0,y.hm)({url:"api/Directory/SearchTreeList",params:{getby:null!==(E=d.params.userid)&&void 0!==E?E:null,directory_id:null!==(k=d.params.directory_id)&&void 0!==k?k:null,directory_pid:null!==(F=d.params.directory_pid)&&void 0!==F?F:null,directory_title:null!==(j=d.params.directory_title)&&void 0!==j?j:null,active:null!==(B=d.params.active)&&void 0!==B?B:null,isdataowner:null!==(n=d.params.isdataowner)&&void 0!==n?n:null,statistic:null!==(I=d.params.statistic)&&void 0!==I?I:null,sortfield:null!==(x=d.params.sortfield)&&void 0!==x?x:null,sorttype:null!==(N=d.params.sorttype)&&void 0!==N?N:null,posstart:(d.params.page-1)*d.params.limit,numofrow:d.params.limit},success:z=>{"function"==typeof d.callback&&d.callback(z.data)},error:z=>{"function"==typeof d.callback&&d.callback(),console.error(z)},loading:d.loading,loadingController:d.loadingController})},J=d=>{var E,k,F,j,B,n,I;d.params=d.params||{},d.params.page=d.params.page||1,d.params.limit=d.params.limit||1,(0,y.hm)({url:"api/Directory/SearchTreeNode",params:{getby:null!==(E=d.params.userid)&&void 0!==E?E:null,directory_id:null!==(k=d.params.directory_id)&&void 0!==k?k:null,active:null!==(F=d.params.active)&&void 0!==F?F:null,isdataowner:null!==(j=d.params.isdataowner)&&void 0!==j?j:null,statistic:null!==(B=d.params.statistic)&&void 0!==B?B:null,sortfield:null!==(n=d.params.sortfield)&&void 0!==n?n:null,sorttype:null!==(I=d.params.sorttype)&&void 0!==I?I:null,posstart:(d.params.page-1)*d.params.limit,numofrow:d.params.limit},success:x=>{"function"==typeof d.callback&&d.callback(x.data)},error:x=>{"function"==typeof d.callback&&d.callback(),console.error(x)},loading:d.loading,loadingController:d.loadingController})},W=d=>{var E,k,F,j,B,n,I,x;d.params=d.params||{},d.params.page=d.params.page||1,d.params.limit=d.params.limit||1,(0,y.Ll)({url:"api/Directory/AddUpdate",params:{userid:null!==(E=d.params.userid)&&void 0!==E?E:null,directory_id:null!==(k=d.params.directory_id)&&void 0!==k?k:null,directory_pid:null!==(F=d.params.directory_pid)&&void 0!==F?F:null,directory_title:null!==(j=d.params.directory_title)&&void 0!==j?j:null,directory_description:null!==(B=d.params.directory_description)&&void 0!==B?B:null,directory_icon:null!==(n=d.params.directory_icon)&&void 0!==n?n:null,directory_cover:null!==(I=d.params.directory_cover)&&void 0!==I?I:null,directory_color:null!==(x=d.params.directory_color)&&void 0!==x?x:null},success:N=>{"function"==typeof d.callback&&d.callback(N.data)},error:N=>{"function"==typeof d.callback&&d.callback(),console.error(N)},loading:d.loading,loadingController:d.loadingController})},t=d=>{var E,k;d.params=d.params||{},d.params.page=d.params.page||1,d.params.limit=d.params.limit||1,(0,y.sj)({url:"api/Directory/Delete",params:{deleteby:null!==(E=d.params.userid)&&void 0!==E?E:null,directory_id:null!==(k=d.params.directory_id)&&void 0!==k?k:null},success:F=>{"function"==typeof d.callback&&d.callback(F.data)},error:F=>{"function"==typeof d.callback&&d.callback(),console.error(F)},loading:d.loading,loadingController:d.loadingController})}},9957:(et,H,h)=>{h.d(H,{Y:()=>S});var y=h(467),K=h(5972),J=h(6081),W=h(4975),t=h(2635),d=h(5414),E=h(7331),k=h(8405),F=h(1038),j=h(5807),B=h(2089),n=h(4438),I=h(6637),x=h(177),N=h(9417),z=h(9445),Z=h(31);function q(G,w){if(1&G){const R=n.RV6();n.j41(0,"button",32),n.bIt("click",function(p){n.eBV(R);const u=n.XpG(2);return n.Njj(u.clearTopic(p))}),n.nrm(1,"ion-icon",33),n.k0s()}}function e(G,w){if(1&G){const R=n.RV6();n.j41(0,"button",32),n.bIt("click",function(p){n.eBV(R);const u=n.XpG(2);return n.Njj(u.clearCategory(p))}),n.nrm(1,"ion-icon",33),n.k0s()}}function A(G,w){if(1&G){const R=n.RV6();n.j41(0,"button",32),n.bIt("click",function(p){n.eBV(R);const u=n.XpG(2);return n.Njj(u.clearTemplate(p))}),n.nrm(1,"ion-icon",33),n.k0s()}}function Q(G,w){if(1&G){const R=n.RV6();n.j41(0,"ion-content",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13)(7,"b",14),n.EFF(8),n.nI1(9,"translate"),n.k0s()(),n.j41(10,"input",15),n.bIt("change",function(p){n.eBV(R);const u=n.XpG();return n.Njj(u.changeBoardTitle(p))}),n.k0s()(),n.j41(11,"div",12)(12,"div",13)(13,"b",14),n.EFF(14),n.nI1(15,"translate"),n.k0s()(),n.j41(16,"div",16),n.nrm(17,"input",17),n.j41(18,"div",18),n.DNE(19,q,2,0,"button",19),n.j41(20,"button",20),n.bIt("click",function(p){n.eBV(R);const u=n.XpG();return n.Njj(u.presentPopoverTopic(p))}),n.nrm(21,"ion-icon",21),n.k0s()()()(),n.j41(22,"div",12)(23,"div",13)(24,"b",14),n.EFF(25),n.nI1(26,"translate"),n.k0s()(),n.j41(27,"div",16),n.nrm(28,"input",17),n.j41(29,"div",18),n.DNE(30,e,2,0,"button",19),n.j41(31,"button",20),n.bIt("click",function(p){n.eBV(R);const u=n.XpG();return n.Njj(u.presentPopoverCategory(p))}),n.nrm(32,"ion-icon",21),n.k0s()()()(),n.j41(33,"div",12)(34,"div",13)(35,"b",14),n.EFF(36),n.nI1(37,"translate"),n.k0s()(),n.j41(38,"div",16),n.nrm(39,"input",17),n.j41(40,"div",18),n.DNE(41,A,2,0,"button",19),n.j41(42,"button",20),n.bIt("click",function(p){n.eBV(R);const u=n.XpG();return n.Njj(u.presentPopoverTemplate(p))}),n.nrm(43,"ion-icon",21),n.k0s()()()(),n.j41(44,"div",22)(45,"div",13)(46,"b",14),n.EFF(47),n.nI1(48,"translate"),n.k0s()(),n.j41(49,"div",16)(50,"div",23)(51,"input",24),n.bIt("change",function(p){n.eBV(R);const u=n.XpG();return n.Njj(u.changeBoardCover(p))}),n.k0s(),n.nrm(52,"label",25),n.k0s()()()(),n.j41(53,"div",26)(54,"div",12)(55,"div",13)(56,"b",14),n.EFF(57),n.nI1(58,"translate"),n.k0s()(),n.j41(59,"div",27)(60,"div",28),n.nrm(61,"ion-img",29),n.k0s()()()()(),n.j41(62,"div",30)(63,"div",13)(64,"b",14),n.EFF(65),n.nI1(66,"translate"),n.k0s()(),n.j41(67,"ckeditor",31),n.mxI("ngModelChange",function(p){n.eBV(R);const u=n.XpG();return n.DH7(u.board.board_description,p)||(u.board.board_description=p),n.Njj(p)}),n.k0s()(),n.j41(68,"div",30)(69,"div",13)(70,"b",14),n.EFF(71),n.nI1(72,"translate"),n.k0s()(),n.j41(73,"ckeditor",31),n.mxI("ngModelChange",function(p){n.eBV(R);const u=n.XpG();return n.DH7(u.board.board_content,p)||(u.board.board_content=p),n.Njj(p)}),n.k0s()()()()()}if(2&G){let R,c,p;const u=n.XpG();n.R7$(8),n.JRh(n.bMT(9,21,"LectureName")),n.R7$(2),n.Y8G("ngModel",u.board.board_title),n.R7$(4),n.JRh(n.bMT(15,23,"GradeLevel")),n.R7$(3),n.Y8G("value",null==(null!==(R=u.board.topic_titles)&&void 0!==R?R:u.board.topic_title)||null==(R=(null!=R?R:u.board.topic_title).split(";"))||null==(R=R.reverse())?null:R.join(" / ")),n.R7$(2),n.Y8G("ngIf",u.board.topic_id),n.R7$(6),n.JRh(n.bMT(26,25,"Subject")),n.R7$(3),n.Y8G("value",null==(null!==(c=u.board.category_title)&&void 0!==c?c:u.board.category_title)||null==(c=(null!=c?c:u.board.category_title).split(";"))||null==(c=c.reverse())?null:c.join(" / ")),n.R7$(2),n.Y8G("ngIf",u.board.category_id),n.R7$(6),n.JRh(n.bMT(37,27,"BoardTemplate")),n.R7$(3),n.Y8G("value",null==(null!==(p=u.board.template_titles)&&void 0!==p?p:u.board.template_title)||null==(p=(null!=p?p:u.board.template_title).split(";"))||null==(p=p.reverse())?null:p.join(" / ")),n.R7$(2),n.Y8G("ngIf",u.board.template_id),n.R7$(6),n.JRh(n.bMT(48,29,"Cover")),n.R7$(10),n.JRh(n.bMT(58,31,"Cover")),n.R7$(4),n.Y8G("src",u.fileurl||u.coverUrl||"assets/image/no-image.svg")("alt",u.board.board_title),n.R7$(4),n.JRh(n.bMT(66,33,"Introduce")),n.R7$(2),n.Y8G("editor",u.editorDescription),n.R50("ngModel",u.board.board_description),n.R7$(4),n.JRh(n.bMT(72,35,"Knowledge")),n.R7$(2),n.Y8G("editor",u.editorContent),n.R50("ngModel",u.board.board_content)}}let S=(()=>{var G;class w{constructor(c,p,u,f){this.modalController=c,this.popoverController=p,this.toastController=u,this.loadingController=f,this.b=0,this.editorDescription=j.m,this.editorContent=j.m,this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.coverUrl="",this.coverv1Url="",this.board={}}ngOnInit(){var c=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,y.A)(function*(){c.appsettings=yield(0,K.AC)(),c.appsettings.madonvi&&(c.user=yield(0,t.Nk)(),c.readfileuploadurl=c.appsettings.readfileuploadurl||"",c.refreshData())})()}refreshData(){var c;(0,J.qU)({params:{userid:null===(c=this.user)||void 0===c?void 0:c.userid,board_id:this.b},callback:p=>{if((null==p?void 0:p.board_id)==this.b)return this.board=p,this.board.board_title=this.board.board_title+` - Copy #${this.board.board_id} (${Math.floor(999*Math.random())})`,void this.coverLoad();this.modalController.dismiss()}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}save(){var c=this;return(0,y.A)(function*(){if(!c.board.board_title)return void(0,d.c)(c.toastController,{message:"Nh\u1eadp t\xean b\xe0i gi\u1ea3ng!"}).then(u=>{u.present()});let p=[];c.boardCover&&p.push(new Promise((u,f)=>{var M;(0,F.v)({params:{file:c.boardCover,subFolder:`board-cover/${null!==(M=c.board.board_id)&&void 0!==M?M:0}`,fileType:"image"},callback:b=>{var T;0==(null==b?void 0:b.ReturnCode)?c.board.cover=b.path+"/"+(null===(T=b.file)||void 0===T?void 0:T.name):(0,d.c)(c.toastController,{},{returncode:null==b?void 0:b.ReturnCode,returnmsg:null==b?void 0:b.ReturnName}).then(L=>{L.present()}),u(!0)}})})),Promise.all(p).then(u=>{var f;(0,W.Wb)({loadingController:c.loadingController,params:Object.assign({},c.board,{userid:null===(f=c.user)||void 0===f?void 0:f.userid}),callback:M=>{(0,d.c)(c.toastController,{},M).then(b=>{b.present()}),0==(null==M?void 0:M.returncode)&&c.modalController.dismiss({id:null==M?void 0:M.id,title:c.board.board_title},"confirm")}})})})()}presentPopoverTopic(c){var p=this;return(0,y.A)(function*(){const u=yield p.popoverController.create({component:E.E,componentProps:{selectedId:p.board.topic_id,filter:{for:"board"}},event:c,dismissOnSelect:!1,animated:!1,side:"right"});u.onDidDismiss().then(f=>{var M,b,T,L,X,V,U;"confirm"==f.role&&(Object.assign(p.board,{topic_id:null===(M=f.data)||void 0===M?void 0:M.topic_id,topic_title:null===(b=f.data)||void 0===b?void 0:b.topic_title,topic_titles:null===(T=f.data)||void 0===T?void 0:T.topic_titles}),null!==(L=f.data)&&void 0!==L&&L.category_id&&Object.assign(p.board,{category_id:null===(X=f.data)||void 0===X?void 0:X.category_id,category_title:null===(V=f.data)||void 0===V?void 0:V.category_title,category_titles:null===(U=f.data)||void 0===U?void 0:U.category_titles}))}),u.present()})()}clearTopic(c){Object.assign(this.board,{topic_id:null,topic_title:null,topic_titles:null})}changeTopic(c){this.board.topic_id=c}presentPopoverCategory(c){var p=this;return(0,y.A)(function*(){const u=yield p.popoverController.create({component:k.P,componentProps:{selectedId:p.board.category_id,filter:{for:"board"}},event:c,dismissOnSelect:!1,animated:!1,side:"right"});u.onDidDismiss().then(f=>{var M,b,T;"confirm"==f.role&&Object.assign(p.board,{category_id:null===(M=f.data)||void 0===M?void 0:M.category_id,category_title:null===(b=f.data)||void 0===b?void 0:b.category_title,category_titles:null===(T=f.data)||void 0===T?void 0:T.category_titles})}),u.present()})()}clearCategory(c){Object.assign(this.board,{category_id:null,category_title:null,category_titles:null})}changeCategory(c){this.board.category_id=c}presentPopoverTemplate(c){var p=this;return(0,y.A)(function*(){const u=yield p.popoverController.create({component:B.B,componentProps:{selectedId:p.board.template_id,filter:{for:"board"}},event:c,dismissOnSelect:!1,animated:!1,side:"right"});u.onDidDismiss().then(f=>{var M,b,T;"confirm"==f.role&&Object.assign(p.board,{template_id:null===(M=f.data)||void 0===M?void 0:M.template_id,template_title:null===(b=f.data)||void 0===b?void 0:b.template_title,template_titles:null===(T=f.data)||void 0===T?void 0:T.template_titles})}),u.present()})()}clearTemplate(c){Object.assign(this.board,{template_id:null,template_title:null,template_titles:null})}changeTemplate(c){this.board.template_id=c}changeBoardTitle(c){var p;this.board.board_title=null==c||null===(p=c.target)||void 0===p?void 0:p.value}changeBoardDescription(c){var p;this.board.board_description=null==c||null===(p=c.target)||void 0===p?void 0:p.value}changeBoardContent(c){var p;this.board.board_content=null==c||null===(p=c.target)||void 0===p?void 0:p.value}changeBoardCover(c){this.boardCover=void 0,c.target.files.length&&(this.boardCover=c.target.files[0]),this.boardCover&&(this.fileurl=URL.createObjectURL(this.boardCover))}coverLoad(){var c,p,u,f,M,b,T,L,X,V,U;let O=[null!==(c=this.board)&&void 0!==c&&c.cover?`${null!==(p=this.appsettings.readfileuploadurl)&&void 0!==p?p:""}${null===(u=this.board)||void 0===u?void 0:u.cover}`:void 0,null!==(f=this.board)&&void 0!==f&&f.board_id?`${null!==(M=this.appsettings.readfileuploadurl)&&void 0!==M?M:""}${null!==(b=this.appsettings.boardpath)&&void 0!==b?b:""}${null===(T=this.board)||void 0===T?void 0:T.board_id}/cover.svg`:void 0,null!==(L=this.board)&&void 0!==L&&L.board_id?`${null!==(X=this.appsettings.readfileuploadurl)&&void 0!==X?X:""}${null!==(V=this.appsettings.boardpathv1)&&void 0!==V?V:""}${null===(U=this.board)||void 0===U?void 0:U.board_id}/cover.png`:void 0].filter(P=>!!P),$=P=>{if(!P)return;let l=new Image;l.onload=()=>{this.coverUrl=P},l.onerror=()=>{$(O.shift())},l.src=P};O.length&&$(O.shift())}}return(G=w).\u0275fac=function(c){return new(c||G)(n.rXU(I.W3),n.rXU(I.IE),n.rXU(I.K_),n.rXU(I.Xi))},G.\u0275cmp=n.VBU({type:G,selectors:[["app-modal-board-copy"]],inputs:{b:"b"},decls:15,vars:8,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[1,"container-fluid","h-100"],[1,"d-flex","w-100","h-100","flex-column"],[1,"row"],[1,"col-lg-6"],[1,"form-group"],[1,"line-height-24"],[1,"fs-14","fw-500"],["type","text",1,"form-control",3,"change","ngModel"],[1,"input-group"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","chevron-down-outline"],[1,"form-group","d-none"],[1,"custom-file"],["type","file","id","inputGroupFile03",1,"custom-file-input",3,"change"],["for","inputGroupFile03",1,"custom-file-label"],[1,"col-lg-6","col-cover"],["onClick","document.getElementById('inputGroupFile03').click()",1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[3,"src","alt"],[1,"pb-3"],[1,"w-100",3,"ngModelChange","editor","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"]],template:function(c,p){1&c&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n.EFF(3),n.nI1(4,"translate"),n.k0s(),n.j41(5,"ion-button",0),n.bIt("click",function(){return p.save()}),n.j41(6,"ion-label"),n.EFF(7),n.nI1(8,"translate"),n.k0s()(),n.j41(9,"ion-buttons",1)(10,"ion-button",2),n.bIt("click",function(){return p.toggleFullScreen()}),n.nrm(11,"ion-icon",3),n.k0s(),n.j41(12,"ion-button",4),n.bIt("click",function(){return p.close()}),n.nrm(13,"ion-icon",5),n.k0s()()()(),n.DNE(14,Q,74,37,"ion-content",6)),2&c&&(n.R7$(3),n.JRh(n.bMT(4,4,"CopyLecture")),n.R7$(4),n.JRh(n.bMT(8,6,"Save")),n.R7$(4),n.Y8G("src",p.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),n.R7$(3),n.Y8G("ngIf",p.board.board_id))},dependencies:[x.bT,N.me,N.BC,N.vS,I.Jm,I.QW,I.W9,I.eU,I.iq,I.KW,I.he,I.BC,I.ai,z.h,Z.D9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.embed-cover[_ngcontent-%COMP%]{max-width:100%;border:1px dashed var(--ion-color-primary)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.col-cover[_ngcontent-%COMP%]{max-width:485px}"]}),w})()},2807:(et,H,h)=>{h.d(H,{M:()=>U});var y=h(467),K=h(5972),J=h(8671),W=h(5781),t=h(1038),d=h(2635),E=h(4552),k=h(1607),F=h(4296),j=h(5414),B=h(8405),n=h(7331),I=h(7868),x=h(1400),N=h(1951),z=h(3675),Z=h(4835),q=h(1799),e=h(4438),A=h(6637),Q=h(177),S=h(9417),G=h(31);function w(O,$){if(1&O){const P=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(P);const a=e.XpG();return e.Njj(a.switchModal("ai-image"))}),e.j41(1,"div",43)(2,"ion-label"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"ion-icon",44),e.k0s()()}2&O&&(e.HbH("btn-light btn-with-ai"),e.R7$(3),e.JRh(e.bMT(4,3,"CreativityWithAI")))}function R(O,$){if(1&O){const P=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(P);const a=e.XpG();return e.Njj(a.AI_recommend())}),e.j41(1,"div",43)(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.nrm(5,"ion-icon",45),e.nI1(6,"translate"),e.k0s()()}2&O&&(e.HbH("btn-light"),e.R7$(3),e.JRh(e.bMT(4,4,"CreativityWithAI")),e.R7$(2),e.Y8G("title",e.bMT(6,6,"UpgradeTabcaProNow")))}function c(O,$){if(1&O&&e.eu8(0,46),2&O){e.XpG();const P=e.sdS(112);e.Y8G("ngTemplateOutlet",P)}}function p(O,$){if(1&O&&e.eu8(0,46),2&O){e.XpG();const P=e.sdS(114);e.Y8G("ngTemplateOutlet",P)}}function u(O,$){if(1&O){const P=e.RV6();e.j41(0,"button",47),e.bIt("click",function(a){e.eBV(P);const g=e.XpG();return e.Njj(g.clearTopic(a))}),e.nrm(1,"ion-icon",48),e.k0s()}}function f(O,$){if(1&O){const P=e.RV6();e.j41(0,"button",47),e.bIt("click",function(a){e.eBV(P);const g=e.XpG();return e.Njj(g.clearCategory(a))}),e.nrm(1,"ion-icon",48),e.k0s()}}function M(O,$){if(1&O){const P=e.RV6();e.j41(0,"button",47),e.bIt("click",function(a){e.eBV(P);const g=e.XpG();return e.Njj(g.clearDirectory(a))}),e.nrm(1,"ion-icon",48),e.k0s()}}function b(O,$){if(1&O&&(e.j41(0,"option",58),e.EFF(1),e.k0s()),2&O){const P=$.$implicit;e.Y8G("value",P.lookup_value),e.R7$(),e.JRh(P.lookup_title)}}function T(O,$){if(1&O&&(e.qex(0),e.j41(1,"option",56),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,b,2,2,"option",57),e.bVm()),2&O){const P=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,2,"SelectMediaType")),e.R7$(2),e.Y8G("ngForOf",P.v_mediatypes)}}function L(O,$){if(1&O){const P=e.RV6();e.j41(0,"div",12)(1,"div",20)(2,"div",49)(3,"label",50),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"div",29)(7,"input",51),e.bIt("change",function(a){e.eBV(P);const g=e.XpG();return e.Njj(g.changeMediaFile(a))}),e.k0s(),e.j41(8,"label",52),e.EFF(9),e.nI1(10,"translate"),e.nI1(11,"translate"),e.k0s()()()(),e.j41(12,"div",12)(13,"div",20)(14,"div",49)(15,"label",50),e.EFF(16),e.nI1(17,"translate"),e.k0s()(),e.j41(18,"select",53),e.bIt("ngModelChange",function(a){e.eBV(P);const g=e.XpG();return e.Njj(g.changeMediaType(a))}),e.DNE(19,T,5,4,"ng-container",54),e.qex(20),e.j41(21,"option",55),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.bVm(),e.k0s()()()}if(2&O){let P,l;const a=e.XpG();e.R7$(4),e.JRh(e.bMT(5,6,"File")),e.R7$(5),e.JRh(a.mediaFiles.length?e.bMT(10,8,"Selected")+" "+a.mediaFiles.length+" "+e.bMT(11,10,"File"):(null!==(P=a.media.filepath)&&void 0!==P?P:"").split("/").pop()),e.R7$(7),e.JRh(e.bMT(17,12,"MediaType")),e.R7$(2),e.Y8G("ngModel",null!==(l=a.media.v_mediatype)&&void 0!==l?l:0),e.R7$(),e.Y8G("ngIf",a.mediaFiles.length<=1),e.R7$(3),e.JRh(e.bMT(23,14,"AutomaticallySelectsByFileType"))}}function X(O,$){if(1&O&&(e.j41(0,"option",58),e.EFF(1),e.k0s()),2&O){const P=$.$implicit;e.Y8G("value",P.lookup_value),e.R7$(),e.JRh(P.lookup_title)}}function V(O,$){if(1&O){const P=e.RV6();e.j41(0,"div",12)(1,"div",20)(2,"div",49)(3,"label",50),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"input",59),e.bIt("ngModelChange",function(a){e.eBV(P);const g=e.XpG();return e.Njj(g.changeLinkShare(a))}),e.k0s()()(),e.j41(7,"div",12)(8,"div",20)(9,"div",49)(10,"label",50),e.EFF(11),e.nI1(12,"translate"),e.k0s()(),e.j41(13,"select",53),e.bIt("ngModelChange",function(a){e.eBV(P);const g=e.XpG();return e.Njj(g.changeOssType(a))}),e.j41(14,"option",56),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.DNE(17,X,2,2,"option",57),e.k0s()()()}if(2&O){let P;const l=e.XpG();e.R7$(4),e.JRh(e.bMT(5,6,"Url")),e.R7$(2),e.Y8G("ngModel",l.media.link_share),e.R7$(5),e.JRh(e.bMT(12,8,"OssType")),e.R7$(2),e.Y8G("ngModel",null!==(P=l.media.v_osstype)&&void 0!==P?P:0),e.R7$(2),e.JRh(e.bMT(16,10,"SelectOssType")),e.R7$(2),e.Y8G("ngForOf",l.v_osstypes)}}let U=(()=>{var O;class ${constructor(l,a,g,m){this.modalController=l,this.toastController=a,this.loadingController=g,this.popoverController=m,this.filter={},this.media={},this.isfullscreen=!1,this.appsettings={},this.readfileuploadurl="",this.fileurl="",this.coverUrl="",this.v_mediatypes=[],this.v_osstypes=[],this.mediaFiles=[]}ngOnInit(){var l=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),Object.assign(this.media,this.filter),(0,y.A)(function*(){l.appsettings=yield(0,K.AC)(),l.appsettings.madonvi&&(l.user=yield(0,d.Nk)(),l.readfileuploadurl=l.appsettings.readfileuploadurl||"",l.refreshData())})()}refreshData(){var l;(0,J.$)({params:{lookup_key:"v_mediatype"},callback:a=>{this.v_mediatypes=a||[]}}),(0,J.$)({params:{lookup_key:"v_osstype"},callback:a=>{this.v_osstypes=a||[]}}),this.membership||(0,I.EW)({params:{userid:null===(l=this.user)||void 0===l?void 0:l.userid,v_functionlimit:x.r.GenAITaoHinhAnh},callback:a=>{var g;this.membership={GenAITaoHinhAnh:(0,N.j)(null==a||null===(g=a.contents)||void 0===g?void 0:g.find(m=>m.v_functionlimit==x.r.GenAITaoHinhAnh))}}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}switchModal(l){return this.modalController.dismiss({modalName:l},"switch")}save(){var l=this;return(0,y.A)(function*(){let a=[];if(l.mediaCover&&a.push(new Promise((g,m)=>{(0,t.v)({params:{file:l.mediaCover,subFolder:"material/tabca",fileType:"image"},callback:o=>{var _;0==(null==o?void 0:o.ReturnCode)?l.media.cover=o.path+"/"+(null===(_=o.file)||void 0===_?void 0:_.name):(0,j.c)(l.toastController,{},{returncode:null==o?void 0:o.ReturnCode,returnmsg:null==o?void 0:o.ReturnName}).then(i=>{i.present()}),g(!0)}})})),l.isLink){if(l.media.v_mediatype=k.S.LINK,!l.media.link_share)return void(0,j.c)(l.toastController,{message:"Nh\u1eadp \u0111\u01b0\u1eddng d\u1eabn!"}).then(g=>{g.present()})}else if(!l.media.link_file){if(l.mediaFiles.length>=2){const g=yield l.loadingController.create({message:"\u0110ang t\u1ea3i..."});return g.present(),void l.recursiveUpload(m=>{m||g.dismiss()})}if(1!=l.mediaFiles.length)return void(0,j.c)(l.toastController,{message:"Kh\xf4ng t\xecm th\u1ea5y t\u1eadp tin t\u1ea3i l\xean!"}).then(g=>{g.present()});a.push(new Promise((g,m)=>{let o=l.mediaFiles.pop();(0,t.v)({params:{file:o,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:_=>{var i,r;0==(null==_?void 0:_.ReturnCode)?(l.media.filepath=_.path+"/"+(null===(i=_.file)||void 0===i?void 0:i.name),l.media.link_file=l.readfileuploadurl+_.path+"/"+(null===(r=_.file)||void 0===r?void 0:r.name),l.media.media_title||(l.media.media_title=_.name.replace(/.[a-zA-Z0-9]+$/,"")),l.media.v_mediatype||l.v_mediatypes.every(s=>{var v,C;return null===(v=s.lookup_note)||void 0===v||null===(v=v.replace(/\s+/g,""))||void 0===v||!v.split(",").includes(null===(C=_.file)||void 0===C?void 0:C.extension)||(l.media.v_mediatype=s.lookup_value,!1)}),"zip"==(null==_?void 0:_.fileTye)&&l.media.v_mediatype==k.S.SCORM?(0,t.o)({loadingController:l.loadingController,params:{pathFile:l.media.filepath},callback:s=>{null!=s&&s.imsmanifest?l.media.filepath_extract=null==s?void 0:s.imsmanifest:l.media.v_mediatype=k.S.ZIP,g(!0)}}):g(!0)):((0,j.c)(l.toastController,{},{returncode:null==_?void 0:_.ReturnCode,returnmsg:null==_?void 0:_.ReturnName}).then(s=>{s.present()}),g(!0))}})}))}Promise.all(a).then(g=>{var m,o;!l.isLink||l.media.link_share?l.media.filepath?(0,W.Rq)({loadingController:l.loadingController,params:Object.assign({},l.media,{userid:null===(m=l.user)||void 0===m?void 0:m.userid,tags:null===(o=l.media.tag_arrs)||void 0===o||null===(o=o.filter((_,i,r)=>r.indexOf(_)==i))||void 0===o?void 0:o.join(";")}),callback:_=>{(0,j.c)(l.toastController,{},_).then(i=>{i.present()}),0==(null==_?void 0:_.returncode)&&l.modalController.dismiss(null==_?void 0:_.id,"confirm")}}):(0,j.c)(l.toastController,{color:"danger",message:"Kh\xf4ng t\xecm th\u1ea5y t\u1eadp tin t\u1ea3i l\xean!"}).then(_=>{_.present()}):(0,j.c)(l.toastController,{color:"danger",message:"Kh\xf4ng t\xecm th\u1ea5y \u0111\u01b0\u1eddng d\u1eabn!"}).then(_=>{_.present()})})})()}recursiveUpload(l){if(this.mediaFiles.length){let a={topic_id:this.media.topic_id,category_id:this.media.category_id,directory_id:this.media.directory_id},g=this.mediaFiles.pop();(0,t.v)({params:{file:g,subFolder:"material/tabca",fileType:"image,audio,video,office,pdf,html,zip,track"},callback:m=>{var o,_,i;0==(null==m?void 0:m.ReturnCode)?(a.filepath=m.path+"/"+(null===(o=m.file)||void 0===o?void 0:o.name),a.link_file=this.readfileuploadurl+m.path+"/"+(null===(_=m.file)||void 0===_?void 0:_.name),a.media_title=m.name.replace(/.[a-zA-Z0-9]+$/,""),this.v_mediatypes.every(r=>{var s,v;return null===(s=r.lookup_note)||void 0===s||null===(s=s.replace(/\s+/g,""))||void 0===s||!s.split(",").includes(null===(v=m.file)||void 0===v?void 0:v.extension)||(a.v_mediatype=r.lookup_value,!1)}),(0,W.Rq)({params:Object.assign(a,{userid:null===(i=this.user)||void 0===i?void 0:i.userid}),callback:r=>{this.recursiveUpload(l)}})):((0,j.c)(this.toastController,{},{returncode:null==m?void 0:m.ReturnCode,returnmsg:null==m?void 0:m.ReturnName}).then(r=>{r.present()}),this.recursiveUpload(l))}})}else l(!1),this.modalController.dismiss(null,"confirm")}presentPopoverTopic(l){var a=this;return(0,y.A)(function*(){const g=yield a.popoverController.create({component:n.E,componentProps:{selectedId:a.media.topic_id,filter:{for:"media"}},event:l,dismissOnSelect:!1,animated:!1,side:"right"});g.onDidDismiss().then(m=>{var o,_,i,r,s,v,C;"confirm"==m.role&&(Object.assign(a.media,{topic_id:null===(o=m.data)||void 0===o?void 0:o.topic_id,topic_title:null===(_=m.data)||void 0===_?void 0:_.topic_title,topic_titles:null===(i=m.data)||void 0===i?void 0:i.topic_titles}),null!==(r=m.data)&&void 0!==r&&r.category_id&&Object.assign(a.media,{category_id:null===(s=m.data)||void 0===s?void 0:s.category_id,category_title:null===(v=m.data)||void 0===v?void 0:v.category_title,category_titles:null===(C=m.data)||void 0===C?void 0:C.category_titles}))}),g.present()})()}clearTopic(l){Object.assign(this.media,{topic_id:null,topic_title:null,topic_titles:null})}changeTopic(l){var a;this.media.topic_id=null!==(a=parseInt(l))&&void 0!==a?a:0}presentPopoverCategory(l){var a=this;return(0,y.A)(function*(){const g=yield a.popoverController.create({component:B.P,componentProps:{selectedId:a.media.category_id,filter:{for:"media"}},event:l,dismissOnSelect:!1,animated:!1,side:"right"});g.onDidDismiss().then(m=>{var o,_,i;"confirm"==m.role&&Object.assign(a.media,{category_id:null===(o=m.data)||void 0===o?void 0:o.category_id,category_title:null===(_=m.data)||void 0===_?void 0:_.category_title,category_titles:null===(i=m.data)||void 0===i?void 0:i.category_titles})}),g.present()})()}clearCategory(l){Object.assign(this.media,{category_id:null,category_title:null,category_titles:null})}changeCategory(l){var a;this.media.category_id=null!==(a=parseInt(l))&&void 0!==a?a:0}presentPopoverDirectory(l){var a=this;return(0,y.A)(function*(){const g=yield a.popoverController.create({component:z._,componentProps:{selectedId:a.media.directory_id,filter:{for:"media"}},event:l,dismissOnSelect:!1,animated:!1,side:"right"});g.onDidDismiss().then(m=>{var o,_,i;"confirm"==m.role&&Object.assign(a.media,{directory_id:null===(o=m.data)||void 0===o?void 0:o.directory_id,directory_title:null===(_=m.data)||void 0===_?void 0:_.directory_title,directory_titles:null===(i=m.data)||void 0===i?void 0:i.directory_titles})}),g.present()})()}clearDirectory(l){Object.assign(this.media,{directory_id:null,directory_title:null,directory_titles:null})}changeDirectory(l){var a;this.media.directory_id=null!==(a=parseInt(l))&&void 0!==a?a:0}presentPopoverTags(l){var a=this;return(0,y.A)(function*(){var g;const m=yield a.popoverController.create({component:q.M,componentProps:{selected_Arrs:[...null!==(g=a.media.tag_arrs)&&void 0!==g?g:[]]},event:l,dismissOnSelect:!1,animated:!1,side:"right"});m.onDidDismiss().then(o=>{"confirm"==o.role&&Object.assign(a.media,{tag_arrs:o.data})}),m.present()})()}removeTags(l){var a;this.media.tag_arrs=null===(a=this.media.tag_arrs)||void 0===a?void 0:a.filter(g=>g!=l)}changeMediaTitle(l){var a;this.media.media_title=null==l||null===(a=l.target)||void 0===a?void 0:a.value}changeMediaDescription(l){var a;this.media.media_description=null==l||null===(a=l.target)||void 0===a?void 0:a.value}changeMediaContent(l){var a;this.media.media_content=null==l||null===(a=l.target)||void 0===a?void 0:a.value}changeMediaType(l){this.media.v_mediatype=l?parseInt(l):0}changeOssType(l){this.media.v_osstype=l?parseInt(l):0}changeLinkShare(l){this.media.link_share=l,(0,E.nh)(l)?this.media.v_osstype=F.N.YOUTUBE:(0,E.Ho)(l)&&(this.media.v_osstype=F.N.PHET)}changeMediaFile(l){this.mediaFiles.length=0;for(let m=0,o=null===(a=l.target)||void 0===a?void 0:a.files.length;m<o;m++){var a;this.mediaFiles.push(l.target.files[m])}if(1==this.mediaFiles.length){let{fileName:m,fileExtension:o}=(0,E.XG)(this.mediaFiles[0].name);var g;if(this.media.media_title=m,this.media.v_mediatype=void 0,this.v_mediatypes.every(_=>{var i;return null===(i=_.lookup_note)||void 0===i||null===(i=i.replace(/\s+/g,""))||void 0===i||!i.split(",").includes(o)||(this.media.v_mediatype=_.lookup_value,!1)}),!this.mediaCover)switch(null!==(g=this.media.v_mediatype)&&void 0!==g?g:0){case k.S.IMAGE:this.fileurl=URL.createObjectURL(this.mediaFiles[0]);break;case k.S.VIDEO:(()=>{let _=this.mediaFiles[0],i=new FileReader;i.onload=()=>{let r=document.createElement("canvas"),s=document.createElement("video");s.addEventListener("loadedmetadata",()=>{setTimeout(()=>{var v;r.width=s.videoWidth,r.height=s.videoHeight,null===(v=r.getContext("2d"))||void 0===v||v.drawImage(s,0,0,s.videoWidth,s.videoHeight),((D,Y)=>{let nt=(D.match(/^data:([^;]+);/)||"")[1];fetch(D).then(tt=>tt.arrayBuffer()).then(tt=>new File([tt],Y,{type:nt})).then(tt=>{this.mediaCover=tt,this.fileurl=URL.createObjectURL(tt)})})(r.toDataURL("image/png"),`${_.name}.png`),r.remove(),s.pause(),s.remove()},1e3)}),s.preload="metadata",s.muted=!0,s.playsInline=!0,s.src=i.result,s.play()},i.readAsDataURL(_)})()}}}changeMediaCover(l){var a;if(this.mediaCover=void 0,l.target.files.length&&(this.mediaCover=l.target.files[0]),!this.mediaCover)return;let o,{fileExtension:m}=(0,E.XG)(null===(a=this.mediaCover)||void 0===a?void 0:a.name);m&&(this.v_mediatypes.every(_=>{var i;return null===(i=_.lookup_note)||void 0===i||null===(i=i.replace(/\s+/g,""))||void 0===i||!i.split(",").includes(m)||(o=_.lookup_value,!1)}),this.mediaCover&&o==k.S.IMAGE&&(this.fileurl=URL.createObjectURL(this.mediaCover)))}changeIsLink(l){this.isLink=l}useDefaultCover(){var l=this;return(0,y.A)(function*(){l.mediaCover=void 0,l.fileurl="",l.media.cover=void 0,l.coverUrl="",l.coverLoad()})()}coverLoad(){var l,a,g;let m=[null!==(l=this.media)&&void 0!==l&&l.cover?`${null!==(a=this.appsettings.readfileuploadurl)&&void 0!==a?a:""}${null===(g=this.media)||void 0===g?void 0:g.cover}`:void 0].filter(_=>!!_),o=_=>{if(!_)return;let i=new Image;i.onload=()=>{this.coverUrl=_},i.onerror=()=>{o(m.shift())},i.src=_};m.length&&o(m.shift())}AI_recommend(){var l=this;return(0,y.A)(function*(){(0,Z.QB)(l.modalController,x.r.GenAITaoHinhAnh)})()}}return(O=$).\u0275fac=function(l){return new(l||O)(e.rXU(A.W3),e.rXU(A.K_),e.rXU(A.Xi),e.rXU(A.IE))},O.\u0275cmp=e.VBU({type:O,selectors:[["app-modal-media-add"]],inputs:{filter:"filter",membership:"membership"},decls:115,vars:60,consts:[["typefile",""],["typelink",""],["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"ion-padding"],[1,"container-fluid"],[1,"row"],[1,"col-12","col-lg-6","offset-lg-3"],[1,"form-group"],["role","group",1,"btn-group"],["type","button",1,"btn",3,"click"],["type","button",1,"btn",3,"class"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"col"],[1,"line-height-24"],[1,"fs-14","fw-500"],[1,"input-group"],["type","text",1,"form-control",3,"change","ngModel"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","chevron-down-outline"],[1,"col-auto"],[1,"form-group","d-none"],[1,"custom-file"],["type","file","id","inputGroupFile02",1,"custom-file-input",3,"change"],["for","inputGroupFile02",1,"custom-file-label"],[1,"embed-responsive","embed-responsive-16by9","embed-cover"],[1,"embed-responsive-item"],[1,"placeholder"],[1,"d-flex","flex-wrap","w-100","h-100","align-items-center","justify-content-center","text-center"],[1,"placeholder-text"],["onClick","document.getElementById('inputGroupFile02').click()",1,"btn","btn-primary"],[1,"my-1"],[1,"text-lowercase"],[1,"btn","btn-outline-primary",3,"click"],[1,"pb-3"],["rows","6",1,"form-control",3,"change","ngModel"],[1,"d-flex","align-items-center","justify-content-center"],["src","../../../assets/icon-svg/magic.svg",1,"ml-2"],["src","../../../assets/image/tabca-pro-2.svg",1,"icon-tabca-pro","fs-22","ml-3","my-0",3,"title"],[3,"ngTemplateOutlet"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"],[1,"input-group-prepend"],[1,"input-group-text"],["type","file","id","inputGroupFile01","multiple","",1,"custom-file-input",3,"change"],["for","inputGroupFile01",1,"custom-file-label"],[1,"custom-select",3,"ngModelChange","ngModel"],[4,"ngIf"],["value","","selected",""],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","https://",1,"form-control",3,"ngModelChange","ngModel"]],template:function(l,a){if(1&l){const g=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"ion-button",2),e.bIt("click",function(){return e.eBV(g),e.Njj(a.save())}),e.j41(6,"ion-label"),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"ion-buttons",3)(10,"ion-button",4),e.bIt("click",function(){return e.eBV(g),e.Njj(a.toggleFullScreen())}),e.nrm(11,"ion-icon",5),e.k0s(),e.j41(12,"ion-button",6),e.bIt("click",function(){return e.eBV(g),e.Njj(a.close())}),e.nrm(13,"ion-icon",7),e.k0s()()()(),e.j41(14,"ion-content",8)(15,"div",9)(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13)(20,"button",14),e.bIt("click",function(){return e.eBV(g),e.Njj(a.changeIsLink(!1))}),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"button",14),e.bIt("click",function(){return e.eBV(g),e.Njj(a.changeIsLink(!0))}),e.EFF(24),e.nI1(25,"translate"),e.k0s(),e.DNE(26,w,6,5,"button",15)(27,R,7,8),e.k0s()(),e.DNE(28,c,1,1,"ng-container",16)(29,p,1,1,"ng-container",16),e.k0s()(),e.j41(30,"div",10)(31,"div",17)(32,"div",12)(33,"div",18)(34,"b",19),e.EFF(35),e.nI1(36,"translate"),e.k0s()(),e.j41(37,"div",20)(38,"input",21),e.bIt("change",function(o){return e.eBV(g),e.Njj(a.changeMediaTitle(o))}),e.k0s()()(),e.j41(39,"div",12)(40,"div",18)(41,"b",19),e.EFF(42),e.nI1(43,"translate"),e.k0s()(),e.j41(44,"div",20),e.nrm(45,"input",22),e.j41(46,"div",23),e.DNE(47,u,2,0,"button",24),e.j41(48,"button",25),e.bIt("click",function(o){return e.eBV(g),e.Njj(a.presentPopoverTopic(o))}),e.nrm(49,"ion-icon",26),e.k0s()()()(),e.j41(50,"div",12)(51,"div",18)(52,"b",19),e.EFF(53),e.nI1(54,"translate"),e.k0s()(),e.j41(55,"div",20),e.nrm(56,"input",22),e.j41(57,"div",23),e.DNE(58,f,2,0,"button",24),e.j41(59,"button",25),e.bIt("click",function(o){return e.eBV(g),e.Njj(a.presentPopoverCategory(o))}),e.nrm(60,"ion-icon",26),e.k0s()()()(),e.j41(61,"div",12)(62,"div",18)(63,"b",19),e.EFF(64),e.nI1(65,"translate"),e.k0s()(),e.j41(66,"div",20),e.nrm(67,"input",22),e.j41(68,"div",23),e.DNE(69,M,2,0,"button",24),e.j41(70,"button",25),e.bIt("click",function(o){return e.eBV(g),e.Njj(a.presentPopoverDirectory(o))}),e.nrm(71,"ion-icon",26),e.k0s()()()()(),e.j41(72,"div",27)(73,"div",28)(74,"div",18)(75,"b",19),e.EFF(76),e.nI1(77,"translate"),e.k0s()(),e.j41(78,"div",20)(79,"div",29)(80,"input",30),e.bIt("change",function(o){return e.eBV(g),e.Njj(a.changeMediaCover(o))}),e.k0s(),e.j41(81,"label",31),e.EFF(82),e.k0s()()()(),e.j41(83,"div",12)(84,"div",18)(85,"b",19),e.EFF(86),e.nI1(87,"translate"),e.k0s()(),e.j41(88,"div",32)(89,"div",33),e.nrm(90,"img",5),e.j41(91,"div",34)(92,"div",35)(93,"div")(94,"div",36)(95,"button",37),e.EFF(96),e.nI1(97,"translate"),e.k0s(),e.j41(98,"div",38)(99,"small",39),e.EFF(100),e.nI1(101,"translate"),e.k0s()(),e.j41(102,"button",40),e.bIt("click",function(){return e.eBV(g),e.Njj(a.useDefaultCover())}),e.EFF(103),e.nI1(104,"translate"),e.k0s()()()()()()()()()(),e.j41(105,"div",41)(106,"div",18)(107,"b",19),e.EFF(108),e.nI1(109,"translate"),e.k0s()(),e.j41(110,"textarea",42),e.bIt("change",function(o){return e.eBV(g),e.Njj(a.changeMediaDescription(o))}),e.k0s()()()(),e.DNE(111,L,24,16,"ng-template",null,0,e.C5r)(113,V,18,12,"ng-template",null,1,e.C5r)}if(2&l){let g,m,o;e.R7$(3),e.JRh(e.bMT(4,32,"AddMaterial")),e.R7$(4),e.JRh(e.bMT(8,34,"Add")),e.R7$(4),e.Y8G("src",a.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),e.R7$(9),e.HbH(a.isLink?"btn-light":"btn-primary"),e.R7$(),e.JRh(e.bMT(22,36,"File")),e.R7$(2),e.HbH(a.isLink?"btn-primary":"btn-light"),e.R7$(),e.JRh(e.bMT(25,38,"Link")),e.R7$(2),e.vxM(26,null!=a.membership&&a.membership.GenAITaoHinhAnh?26:27),e.R7$(2),e.Y8G("ngIf",!a.isLink),e.R7$(),e.Y8G("ngIf",a.isLink),e.R7$(6),e.JRh(e.bMT(36,40,"MaterialName")),e.R7$(3),e.Y8G("ngModel",a.media.media_title),e.R7$(4),e.JRh(e.bMT(43,42,"GradeLevel")),e.R7$(3),e.Y8G("value",null==(null!==(g=a.media.topic_titles)&&void 0!==g?g:a.media.topic_title)||null==(g=(null!=g?g:a.media.topic_title).split(";"))||null==(g=g.reverse())?null:g.join(" / ")),e.R7$(2),e.Y8G("ngIf",a.media.topic_id),e.R7$(6),e.JRh(e.bMT(54,44,"Subject")),e.R7$(3),e.Y8G("value",null==(null!==(m=a.media.category_titles)&&void 0!==m?m:a.media.category_title)||null==(m=(null!=m?m:a.media.category_title).split(";"))||null==(m=m.reverse())?null:m.join(" / ")),e.R7$(2),e.Y8G("ngIf",a.media.category_id),e.R7$(6),e.JRh(e.bMT(65,46,"Directory")),e.R7$(3),e.Y8G("value",null==(null!==(o=a.media.directory_titles)&&void 0!==o?o:a.media.directory_title)||null==(o=(null!=o?o:a.media.directory_title).split(";"))||null==(o=o.reverse())?null:o.join(" / ")),e.R7$(2),e.Y8G("ngIf",a.media.directory_id),e.R7$(7),e.JRh(e.bMT(77,48,"Cover")),e.R7$(6),e.JRh(null==a.mediaCover?null:a.mediaCover.name),e.R7$(4),e.JRh(e.bMT(87,50,"Cover")),e.R7$(4),e.Y8G("src",a.fileurl||a.coverUrl||"assets/image-png/media-default.jpg",e.B4B),e.R7$(6),e.JRh(e.bMT(97,52,"ChooseFile")),e.R7$(4),e.JRh(e.bMT(101,54,"Or")),e.R7$(3),e.JRh(e.bMT(104,56,"UseDefaultCover")),e.R7$(5),e.JRh(e.bMT(109,58,"Introduce")),e.R7$(2),e.Y8G("ngModel",a.media.media_description)}},dependencies:[Q.Sq,Q.bT,Q.T3,S.xH,S.y7,S.me,S.wz,S.BC,S.vS,A.Jm,A.QW,A.W9,A.eU,A.iq,A.he,A.BC,A.ai,G.D9],styles:['.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[readonly][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[readonly][_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[readonly][_ngcontent-%COMP%]{cursor:default}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}.input-group[_ngcontent-%COMP%]   div.form-control[_ngcontent-%COMP%]{height:auto;min-height:38px;padding-top:4px;padding-bottom:0}.input-group[_ngcontent-%COMP%]   div.form-control[_ngcontent-%COMP%] + .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:38px}.input-group[_ngcontent-%COMP%]   div.form-control[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{height:auto;min-height:28px;padding:3px 8px;margin:0 4px 4px 0;line-height:20px}.btn-group[_ngcontent-%COMP%]{width:100%}.btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none;box-shadow:none}.btn-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{color:#fff;border-color:#5359e6;background-color:#5359e6}.btn-group[_ngcontent-%COMP%]   .btn-light[_ngcontent-%COMP%]{color:#333;border-color:#ced4da;background-color:#e9f9ff}.embed-cover[_ngcontent-%COMP%]{width:424px;max-width:100%;border:1px dashed var(--ion-color-primary)}.embed-cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;background-image:url(transparent-small.e8bc20e2391ee295.png);background-repeat:repeat}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:none;width:100%;height:100%}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{line-height:0;font-size:40px}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]{line-height:14px;font-size:12px;color:#333}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px;color:#333c}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-text[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:1.75rem;padding:0 .75rem;border-radius:4px;text-align:center;font-size:.8rem}.embed-cover[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%] + .placeholder-text[_ngcontent-%COMP%]{margin-top:.25rem}.embed-cover[_ngcontent-%COMP%]:hover   img[src][_ngcontent-%COMP%]:not([src=""]) + .placeholder[_ngcontent-%COMP%]{display:block;position:absolute;top:0;left:0;background:#fffc}']}),$})()},6103:(et,H,h)=>{h.d(H,{t:()=>m});var y=h(2505),K=h(8671),J=h(6128),W=h(5446),t=h(4438),d=h(6637),E=h(177),k=h(31);const F=()=>[],j=o=>({$implicit:o});function B(o,_){if(1&o&&t.eu8(0,23),2&o){t.XpG();const i=t.sdS(26);t.Y8G("ngTemplateOutlet",i)}}function n(o,_){if(1&o&&(t.j41(0,"ion-accordion",24)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&o){t.XpG();const i=t.sdS(28);t.R7$(3),t.JRh(t.bMT(4,2,"MediaType")),t.R7$(3),t.Y8G("ngTemplateOutlet",i)}}function I(o,_){if(1&o&&(t.j41(0,"ion-accordion",27)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&o){t.XpG();const i=t.sdS(30);t.R7$(3),t.JRh(t.bMT(4,2,"Tag")),t.R7$(3),t.Y8G("ngTemplateOutlet",i)}}function x(o,_){if(1&o&&(t.j41(0,"ion-accordion",28)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&o){t.XpG();const i=t.sdS(32);t.R7$(3),t.JRh(t.bMT(4,2,"GradeLevel")),t.R7$(3),t.Y8G("ngTemplateOutlet",i)}}function N(o,_){if(1&o&&(t.j41(0,"ion-accordion",29)(1,"ion-item",25)(2,"ion-label"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",26),t.eu8(6,23),t.k0s()()),2&o){t.XpG();const i=t.sdS(36);t.R7$(3),t.JRh(t.bMT(4,2,"Subject")),t.R7$(3),t.Y8G("ngTemplateOutlet",i)}}function z(o,_){if(1&o){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",37),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(s){t.eBV(i);const v=t.XpG(2);return t.Njj(v.clearFilterTopic(s))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&o){let i;const r=t.XpG(2);t.R7$(4),t.JRh(null!==(i=r.filter.topic_title)&&void 0!==i?i:t.bMT(5,1,"GradeLevel"))}}function Z(o,_){if(1&o){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",40),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(s){t.eBV(i);const v=t.XpG(2);return t.Njj(v.clearFilterCategory(s))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&o){let i;const r=t.XpG(2);t.R7$(4),t.JRh(null!==(i=r.filter.category_title)&&void 0!==i?i:t.bMT(5,1,"Subject"))}}function q(o,_){if(1&o){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",41),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(s){t.eBV(i);const v=t.XpG(2);return t.Njj(v.clearFilterTags(s))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&o){let i;const r=t.XpG(2);t.R7$(4),t.JRh(null!==(i=r.filter.tags_key)&&void 0!==i?i:t.bMT(5,1,"Tag"))}}function e(o,_){if(1&o){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",42),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(s){t.eBV(i);const v=t.XpG(2);return t.Njj(v.clearFilterMediaType(s,v.filter.v_mediatype))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&o){let i;const r=t.XpG(2);t.R7$(4),t.JRh(null!==(i=r.filter.v_mediatype_title)&&void 0!==i?i:t.bMT(5,1,"MediaType"))}}function A(o,_){if(1&o){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",42),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"button",38),t.bIt("click",function(s){const v=t.eBV(i).$implicit,C=t.XpG(2);return t.Njj(C.clearFilterMediaType(s,v.v_mediatype))}),t.nrm(7,"ion-icon",39),t.k0s()()()}if(2&o){let i;const r=_.$implicit;t.R7$(4),t.JRh(null!==(i=r.v_mediatype_title)&&void 0!==i?i:t.bMT(5,1,"MediaType"))}}function Q(o,_){if(1&o){const i=t.RV6();t.j41(0,"div",35)(1,"div",36),t.nrm(2,"ion-icon",43),t.j41(3,"ion-label"),t.EFF(4),t.k0s(),t.j41(5,"button",38),t.bIt("click",function(s){t.eBV(i);const v=t.XpG(2);return t.Njj(v.clearSearch(s))}),t.nrm(6,"ion-icon",39),t.k0s()()()}if(2&o){const i=t.XpG(2);t.R7$(4),t.JRh(i.filter.search)}}function S(o,_){if(1&o&&(t.j41(0,"div",30)(1,"div",31)(2,"b"),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",32),t.DNE(6,z,8,3,"div",33)(7,Z,8,3,"div",33)(8,q,8,3,"div",33)(9,e,8,3,"div",33)(10,A,8,3,"div",34)(11,Q,7,1,"div",33),t.k0s()(),t.nrm(12,"hr")),2&o){let i;const r=t.XpG();t.R7$(3),t.Lme("",t.bMT(4,8,"AppliedFilters")," (",r.counter(),")"),t.R7$(3),t.Y8G("ngIf",r.filter.topic_id),t.R7$(),t.Y8G("ngIf",r.filter.category_id),t.R7$(),t.Y8G("ngIf",r.filter.tags_id),t.R7$(),t.Y8G("ngIf",r.filter.v_mediatype),t.R7$(),t.Y8G("ngForOf",null!==(i=r.filter.v_mediatypes)&&void 0!==i?i:t.lJ4(10,F)),t.R7$(),t.Y8G("ngIf",r.filter.search)}}function G(o,_){if(1&o){const i=t.RV6();t.qex(0),t.j41(1,"ion-item")(2,"ion-checkbox",47),t.bIt("ionChange",function(s){t.eBV(i);const v=t.XpG(2);return t.Njj(v.changeMediaType(s))}),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.k0s()(),t.bVm()}if(2&o){const i=_.$implicit,r=t.XpG(2);t.R7$(2),t.Y8G("value",i.lookup_value)("checked",r.checkedMediaType(i.lookup_value)),t.R7$(2),t.JRh(i.lookup_title)}}function w(o,_){if(1&o){const i=t.RV6();t.j41(0,"ion-list",44)(1,"ion-item")(2,"ion-checkbox",45),t.bIt("ionChange",function(s){t.eBV(i);const v=t.XpG();return t.Njj(v.changeMediaType(s))}),t.k0s(),t.j41(3,"ion-label"),t.EFF(4),t.nI1(5,"translate"),t.k0s()(),t.DNE(6,G,5,3,"ng-container",46),t.k0s()}if(2&o){const i=t.XpG();t.R7$(2),t.Y8G("value",0),t.R7$(2),t.JRh(t.bMT(5,3,"All")),t.R7$(2),t.Y8G("ngForOf",i.v_mediatypes)}}function R(o,_){if(1&o){const i=t.RV6();t.qex(0),t.j41(1,"button",49),t.bIt("click",function(){const s=t.eBV(i).$implicit,v=t.XpG(2);return t.Njj(v.applyFilterTags({tags_id:s.tags_id,tags_key:s.tags_key}))}),t.EFF(2),t.k0s(),t.bVm()}if(2&o){const i=_.$implicit,r=t.XpG(2);t.R7$(),t.HbH(i.tags_id==r.filter.tags_id?"btn-warning":"btn-outline-secondary"),t.BMQ("data-id",i.tags_id),t.R7$(),t.JRh(i.tags_key)}}function c(o,_){if(1&o&&(t.j41(0,"div",48),t.DNE(1,R,3,4,"ng-container",46),t.k0s()),2&o){const i=t.XpG();t.R7$(),t.Y8G("ngForOf",i.filterTags(i.tagss))}}function p(o,_){if(1&o&&t.eu8(0,52),2&o){const i=_.$implicit;t.XpG(2);const r=t.sdS(34);t.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",t.eq3(2,j,i))}}function u(o,_){if(1&o&&(t.j41(0,"div",50)(1,"ion-list",44)(2,"ul"),t.DNE(3,p,1,4,"ng-container",51),t.k0s()()()),2&o){const i=t.XpG();t.R7$(3),t.Y8G("ngForOf",i.filterTopic(i.topics))}}function f(o,_){1&o&&t.nrm(0,"ion-icon",55)}function M(o,_){1&o&&t.nrm(0,"ion-spinner",57)}function b(o,_){1&o&&t.nrm(0,"ion-icon",58)}function T(o,_){if(1&o&&t.eu8(0,52),2&o){const i=_.$implicit;t.XpG(3);const r=t.sdS(34);t.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",t.eq3(2,j,i))}}function L(o,_){if(1&o&&(t.j41(0,"ul"),t.DNE(1,T,1,4,"ng-container",51),t.k0s()),2&o){const i=t.XpG().$implicit,r=t.XpG();t.R7$(),t.Y8G("ngForOf",r.filterTopic(r.topics,i.topic_id))}}function X(o,_){if(1&o){const i=t.RV6();t.j41(0,"li")(1,"ion-item",53),t.bIt("click",function(){const s=t.eBV(i).$implicit,v=t.XpG();return t.Njj(v.applyFilterTopic({topic_id:s.topic_id,topic_title:s.topic_title}))}),t.j41(2,"ion-button",54),t.bIt("click",function(s){const v=t.eBV(i).$implicit,C=t.XpG();return t.Njj(C.expandTopic(s,v.topic_id,v.isexpanded))}),t.DNE(3,f,1,0,"ion-icon",55)(4,M,1,0)(5,b,1,0),t.k0s(),t.j41(6,"ion-label",56),t.EFF(7),t.k0s()(),t.DNE(8,L,2,1,"ul"),t.k0s()}if(2&o){const i=_.$implicit,r=t.XpG();t.R7$(),t.HbH(i.topic_id==r.filter.topic_id?"actived":""),t.R7$(),t.BMQ("style",i.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.vxM(3,i.isexpanded?i.loading?4:5:3),t.R7$(3),t.Y8G("title",i.topic_title),t.R7$(),t.JRh(i.topic_title),t.R7$(),t.vxM(8,i.isexpanded?8:-1)}}function V(o,_){if(1&o&&t.eu8(0,52),2&o){const i=_.$implicit;t.XpG(2);const r=t.sdS(38);t.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",t.eq3(2,j,i))}}function U(o,_){if(1&o&&(t.j41(0,"div",59)(1,"ion-list",44)(2,"ul"),t.DNE(3,V,1,4,"ng-container",51),t.k0s()()()),2&o){const i=t.XpG();t.R7$(3),t.Y8G("ngForOf",i.filterCategory(i.categorys))}}function O(o,_){1&o&&t.nrm(0,"ion-icon",55)}function $(o,_){1&o&&t.nrm(0,"ion-spinner",57)}function P(o,_){1&o&&t.nrm(0,"ion-icon",58)}function l(o,_){if(1&o&&t.eu8(0,52),2&o){const i=_.$implicit;t.XpG(3);const r=t.sdS(38);t.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",t.eq3(2,j,i))}}function a(o,_){if(1&o&&(t.j41(0,"ul"),t.DNE(1,l,1,4,"ng-container",51),t.k0s()),2&o){const i=t.XpG().$implicit,r=t.XpG();t.R7$(),t.Y8G("ngForOf",r.filterCategory(r.categorys,i.category_id))}}function g(o,_){if(1&o){const i=t.RV6();t.j41(0,"li")(1,"ion-item",53),t.bIt("click",function(){const s=t.eBV(i).$implicit,v=t.XpG();return t.Njj(v.applyFilterCategory({category_id:s.category_id,category_title:s.category_title}))}),t.j41(2,"ion-button",54),t.bIt("click",function(s){const v=t.eBV(i).$implicit,C=t.XpG();return t.Njj(C.expandCategory(s,v.category_id,v.isexpanded))}),t.DNE(3,O,1,0,"ion-icon",55)(4,$,1,0)(5,P,1,0),t.k0s(),t.j41(6,"ion-label",56),t.EFF(7),t.k0s()(),t.DNE(8,a,2,1,"ul"),t.k0s()}if(2&o){const i=_.$implicit,r=t.XpG();t.R7$(),t.HbH(i.category_id==r.filter.category_id?"actived":""),t.R7$(),t.BMQ("style",i.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.vxM(3,i.isexpanded?i.loading?4:5:3),t.R7$(3),t.Y8G("title",i.category_title),t.R7$(),t.JRh(i.category_title),t.R7$(),t.vxM(8,i.isexpanded?8:-1)}}let m=(()=>{var o;class _{constructor(r){this.modalController=r,this.filter={},this.topics=[],this.categorys=[],this.tagss=[],this.v_mediatypes=[],this.accordionValue=[]}ngOnInit(){var r;null!==(r=this.filter.v_mediatypes)&&void 0!==r&&r.length&&this.accordionValue.push("accordion-mediatype"),this.filter.tags_id&&this.accordionValue.push("accordion-tags"),this.filter.topic_id&&this.accordionValue.push("accordion-topic"),this.filter.category_id&&this.accordionValue.push("accordion-category"),this.accordionValue.length||this.accordionValue.push("accordion-mediatype"),(0,K.$)({params:{lookup_key:"v_mediatype"},callback:s=>{this.v_mediatypes=s||[]}}),this.refreshDataTags(),this.refreshDataTopic(),this.refreshDataCategory()}clean(){this.filter={}}close(){this.modalController.dismiss(null,"cancel")}apply(){this.modalController.dismiss(this.filter,"confirm")}counter(){let r=0;return this.filter.search&&(r+=1),this.filter.topic_id&&(r+=1),this.filter.category_id&&(r+=1),this.filter.tags_id&&(r+=1),this.filter.v_mediatypes&&(r+=this.filter.v_mediatypes.length),r}changeMediaType(r){let{value:s,checked:v}=r.detail;if(0==s)return void(this.filter.v_mediatypes=v?this.v_mediatypes.map(Y=>({v_mediatype:Y.lookup_value,v_mediatype_title:Y.lookup_title})):[]);let C=this.v_mediatypes.find(Y=>Y.lookup_value==s);var D;v?this.filter.v_mediatypes?this.filter.v_mediatypes.find(Y=>Y.v_mediatype==s)||this.filter.v_mediatypes.push({v_mediatype:null==C?void 0:C.lookup_value,v_mediatype_title:null==C?void 0:C.lookup_title}):this.filter.v_mediatypes=[{v_mediatype:null==C?void 0:C.lookup_value,v_mediatype_title:null==C?void 0:C.lookup_title}]:this.filter.v_mediatypes=null===(D=this.filter.v_mediatypes)||void 0===D?void 0:D.filter(Y=>Y.v_mediatype!=s)}checkedMediaType(r){var s;return!(null===(s=this.filter.v_mediatypes)||void 0===s||!s.find(v=>v.v_mediatype==r))}clearSearch(r){Object.assign(this.filter,{search:null})}clearFilterMediaType(r,s){this.changeMediaType({detail:{value:s,checked:!1}})}refreshDataTags(r){this.loadTags(void 0,r,!0)}loadTags(r,s,v){var C;(0,J.Wn)({params:{userid:null===(C=this.user)||void 0===C?void 0:C.userid,tags_pid:r,sortfield:"createddate",sorttype:"asc",page:1,limit:-1},callback:D=>{var Y,nt;this.tagss=v?null!==(Y=null==D?void 0:D.tags)&&void 0!==Y?Y:[]:this.tagss.concat(null!==(nt=null==D?void 0:D.tags)&&void 0!==nt?nt:[]),s&&s()}})}filterTags(r,s){return r.filter(s?v=>v.tags_pid==s:v=>null==v.tags_pid||0==v.tags_pid)}expandTags(r,s,v){r.preventDefault(),r.stopPropagation(),this.tagss.filter(C=>C.tags_id==s).forEach(C=>{C.isexpanded=!v,C.isloadedchild||(C.isloadedchild=!0,this.loadTags(C.tags_id))})}applyFilterTags(r){Object.assign(this.filter,this.filter.tags_id==r.tags_id?{tags_id:null,tags_key:null}:r)}clearFilterTags(r){Object.assign(this.filter,{tags_id:null,tags_key:null})}refreshDataTopic(r){this.loadTopic(void 0,r,!0)}loadTopic(r,s,v){var C;(0,W.At)({loading:D=>{r&&(r.loading=D)},params:{userid:null===(C=this.user)||void 0===C?void 0:C.userid,topic_pid:null==r?void 0:r.topic_id,page:1,limit:-1},callback:D=>{this.topics=v?null!=D?D:[]:this.topics.concat(null!=D?D:[]),s&&s()}})}filterTopic(r,s){return r.filter(s?v=>v.topic_pid==s:v=>null==v.topic_pid||0==v.topic_pid)}expandTopic(r,s,v){r.preventDefault(),r.stopPropagation(),this.topics.filter(C=>C.topic_id==s).forEach(C=>{C.isexpanded=!v,C.isloadedchild||(C.isloadedchild=!0,this.loadTopic(C))})}applyFilterTopic(r){Object.assign(this.filter,this.filter.topic_id==r.topic_id?{topic_id:null,topic_title:null}:r)}clearFilterTopic(r){Object.assign(this.filter,{topic_id:null,topic_title:null})}refreshDataCategory(r){this.loadCategory(void 0,r,!0)}loadCategory(r,s,v){var C;(0,y.BI)({loading:D=>{r&&(r.loading=D)},params:{userid:null===(C=this.user)||void 0===C?void 0:C.userid,category_pid:null==r?void 0:r.category_pid,page:1,limit:-1},callback:D=>{this.categorys=v?null!=D?D:[]:this.categorys.concat(null!=D?D:[]),s&&s()}})}filterCategory(r,s){return r.filter(s?v=>v.category_pid==s:v=>null==v.category_pid||0==v.category_pid)}expandCategory(r,s,v){r.preventDefault(),r.stopPropagation(),this.categorys.filter(C=>C.category_id==s).forEach(C=>{C.isexpanded=!v,C.isloadedchild||(C.isloadedchild=!0,this.loadCategory(C))})}applyFilterCategory(r){Object.assign(this.filter,this.filter.category_id==r.category_id?{category_id:null,category_title:null}:r)}clearFilterCategory(r){Object.assign(this.filter,{category_id:null,category_title:null})}}return(o=_).\u0275fac=function(r){return new(r||o)(t.rXU(d.W3))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-modal-media-filter"]],inputs:{user:"user",filter:"filter"},decls:39,vars:16,consts:[["filtered",""],["mediatype",""],["tags",""],["topic",""],["topicNode",""],["category",""],["categoryNode",""],["mode","md"],["slot","end","color","dark",1,"btn-clean",3,"click"],["slot","end"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"m-0"],[1,"ion-no-padding"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"multiple","value"],["value","accordion-mediatype",4,"ngIf"],["value","accordion-tags",4,"ngIf"],["value","accordion-topic",4,"ngIf"],["value","accordion-category",4,"ngIf"],["lines","none","color","tertiary","button","","detail","false",3,"click"],["slot","start"],["slot","end","src","../../../assets/icon-svg/arrow-right.svg"],[3,"ngTemplateOutlet"],["value","accordion-mediatype"],["slot","header"],["slot","content"],["value","accordion-tags"],["value","accordion-topic"],["value","accordion-category"],[1,"p-3"],[1,"mb-2"],[1,"list-filter","clearfix"],["class","item-filter float-left",4,"ngIf"],["class","item-filter float-left",4,"ngFor","ngForOf"],[1,"item-filter","float-left"],[1,"d-flex","align-items-center"],["src","../../../assets/icon-svg/dashboard/topic.svg"],[3,"click"],["name","close-outline"],["src","../../../assets/icon-svg/dashboard/category.svg"],["src","../../../assets/icon-svg/dashboard/tag.svg"],["name","ticket-outline"],["name","search-outline"],["lines","none"],["mode","md","slot","start",3,"ionChange","value"],[4,"ngFor","ngForOf"],["mode","md","slot","start",3,"ionChange","value","checked"],[1,"list-tags","px-3","pt-2","mb-3"],[1,"btn",3,"click"],[1,"tree-topic"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline"],[3,"title"],["color","dark"],["name","caret-down-outline"],[1,"tree-category"]],template:function(r,s){if(1&r){const v=t.RV6();t.j41(0,"ion-header",7)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-label",8),t.bIt("click",function(){return t.eBV(v),t.Njj(s.clean())}),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"ion-buttons",9)(9,"ion-button",10),t.bIt("click",function(){return t.eBV(v),t.Njj(s.close())}),t.nrm(10,"ion-icon",11),t.k0s()()()(),t.nrm(11,"hr",12),t.j41(12,"ion-content",13),t.DNE(13,B,1,1,"ng-container",14),t.j41(14,"ion-accordion-group",15),t.DNE(15,n,7,4,"ion-accordion",16)(16,I,7,4,"ion-accordion",17)(17,x,7,4,"ion-accordion",18)(18,N,7,4,"ion-accordion",19),t.k0s()(),t.j41(19,"ion-footer")(20,"ion-item",20),t.bIt("click",function(){return t.eBV(v),t.Njj(s.apply())}),t.j41(21,"ion-label",21),t.EFF(22),t.nI1(23,"translate"),t.k0s(),t.nrm(24,"ion-icon",22),t.k0s()(),t.DNE(25,S,13,11,"ng-template",null,0,t.C5r)(27,w,7,5,"ng-template",null,1,t.C5r)(29,c,2,1,"ng-template",null,2,t.C5r)(31,u,4,1,"ng-template",null,3,t.C5r)(33,X,9,7,"ng-template",null,4,t.C5r)(35,U,4,1,"ng-template",null,5,t.C5r)(37,g,9,7,"ng-template",null,6,t.C5r)}2&r&&(t.R7$(3),t.JRh(t.bMT(4,10,"Filter")),t.R7$(3),t.JRh(t.bMT(7,12,"ClearAll")),t.R7$(7),t.Y8G("ngIf",s.filter.topic_id||s.filter.category_id||s.filter.tags_id||s.filter.v_mediatype||(null==s.filter.v_mediatypes?null:s.filter.v_mediatypes.length)||s.filter.search),t.R7$(),t.Y8G("multiple",!0)("value",s.accordionValue),t.R7$(),t.Y8G("ngIf",s.v_mediatypes.length),t.R7$(),t.Y8G("ngIf",s.tagss.length),t.R7$(),t.Y8G("ngIf",s.topics.length),t.R7$(),t.Y8G("ngIf",s.categorys.length),t.R7$(4),t.JRh(t.bMT(23,14,"Apply")))},dependencies:[E.Sq,E.bT,E.T3,d.xk,d.YH,d.Jm,d.QW,d.eY,d.W9,d.M0,d.eU,d.iq,d.uz,d.he,d.nf,d.w2,d.BC,d.ai,d.hB,k.D9],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}ion-header[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]:after{display:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{box-shadow:none}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:40px;margin-left:5px}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]{cursor:pointer;margin-right:1rem}ion-header[_ngcontent-%COMP%]   .btn-clean[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{margin:0}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 50px;text-transform:uppercase}ion-footer[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:27px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:50px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}ion-item[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{margin-top:.5rem;margin-bottom:.5rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0;line-height:20px}ion-accordion[_ngcontent-%COMP%]{font-size:14px}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{text-transform:uppercase}ion-accordion[_ngcontent-%COMP%]   [slot=content][_ngcontent-%COMP%]{padding:0}.tree-topic[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]{position:relative}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%], .tree-category[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.list-filter[_ngcontent-%COMP%]   .item-filter[_ngcontent-%COMP%]{max-width:100%;height:36px;margin:4px 16px 4px 0;border-radius:18px;border:1px solid #E75969;color:#e75969}.list-filter[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 .5rem 0 .75rem;stroke:#e75969}.list-filter[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{max-width:72%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:34px;height:34px;margin:0 2px;border-radius:50%;line-height:0;vertical-align:middle;text-align:center;outline:none;box-shadow:none;background-color:transparent;color:#1f1f39}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0;font-size:20px}.list-filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#eee}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-right:1rem;display:inline-block;vertical-align:middle}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;stroke:#1abdff}.list-tags[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:700;color:#4d4f60}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;font-size:24px;vertical-align:middle;line-height:0}.list-tags[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem;color:#1abdff}.list-tags[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;min-height:40px;padding:0 1rem;margin:.25rem .5rem .25rem 0;border-radius:8px;line-height:0;font-size:1rem;vertical-align:middle;text-align:center;outline:none;box-shadow:none!important}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]{color:var(--color-active, #333);background-color:var(--background-active, #E5F4FF);border-color:var(--background-active, #E5F4FF)}.list-tags[_ngcontent-%COMP%]   button.btn-warning[_ngcontent-%COMP%]:hover{color:#000}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]{color:#000;background-color:#fff;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]{padding:0;color:#000;background-color:#ececec;border-color:#ececec}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]:hover{color:#000;background-color:#ddd}.list-tags[_ngcontent-%COMP%]   button.btn-secondary[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.list-tags[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:inline-block;width:120px;vertical-align:middle;color:#333;background-color:#ececec;border-color:#ececec;outline:none;box-shadow:none!important}"]}),_})()},3355:(et,H,h)=>{h.d(H,{j:()=>W});var y=h(4438),K=h(6637),J=h(31);let W=(()=>{var t;class d{constructor(k){this.popoverController=k,this.message={TitleConfirm:"",TextConfirm:"",TextCancel:""}}ngOnInit(){}cancel(){this.popoverController.dismiss(this.selectedId,"cancel")}confirm(){this.popoverController.dismiss(this.selectedId,"confirm")}}return(t=d).\u0275fac=function(k){return new(k||t)(y.rXU(K.IE))},t.\u0275cmp=y.VBU({type:t,selectors:[["app-popover-confirm"]],inputs:{selectedId:"selectedId",message:"message"},decls:12,vars:9,consts:[[1,"menu-confirm"],[1,"text-center","p-3"],["role","group",1,"w-100","btn-group","btn-group-sm"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(k,F){1&k&&(y.j41(0,"div",0)(1,"div",1)(2,"small"),y.EFF(3),y.nI1(4,"translate"),y.k0s()(),y.j41(5,"div",2)(6,"button",3),y.bIt("click",function(){return F.cancel()}),y.EFF(7),y.nI1(8,"translate"),y.k0s(),y.j41(9,"button",4),y.bIt("click",function(){return F.confirm()}),y.EFF(10),y.nI1(11,"translate"),y.k0s()()()),2&k&&(y.R7$(3),y.JRh(y.bMT(4,3,F.message.TitleConfirm)),y.R7$(4),y.JRh(y.bMT(8,5,F.message.TextCancel)),y.R7$(3),y.JRh(y.bMT(11,7,F.message.TextConfirm)))},dependencies:[J.D9],styles:[".menu-confirm[_ngcontent-%COMP%]{border-top:3px solid #5F6CE1}"]}),d})()},3675:(et,H,h)=>{h.d(H,{_:()=>R});var y=h(467),K=h(9469),J=h(2635),W=h(2313),t=h(4438),d=h(6637),E=h(177),k=h(31);const F=c=>({$implicit:c});function j(c,p){1&c&&t.eu8(0)}function B(c,p){1&c&&(t.j41(0,"ion-content")(1,"div",6)(2,"div",7),t.nrm(3,"ion-spinner",8),t.k0s()()())}function n(c,p){1&c&&t.eu8(0)}function I(c,p){if(1&c&&t.DNE(0,n,1,0,"ng-container",5),2&c){const u=t.XpG(),f=t.sdS(6),M=t.sdS(8);t.Y8G("ngIf",!(null!=u.directorys&&u.directorys.length))("ngIfThen",f)("ngIfElse",M)}}function x(c,p){1&c&&(t.j41(0,"div",9)(1,"small",10),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&c&&(t.R7$(2),t.JRh(t.bMT(3,1,"DataNotFound")))}function N(c,p){if(1&c&&t.eu8(0,13),2&c){const u=p.$implicit;t.XpG(2);const f=t.sdS(10);t.Y8G("ngTemplateOutlet",f)("ngTemplateOutletContext",t.eq3(2,F,u))}}function z(c,p){if(1&c&&(t.j41(0,"div",11)(1,"ul"),t.DNE(2,N,1,4,"ng-container",12),t.k0s()()),2&c){const u=t.XpG();t.R7$(2),t.Y8G("ngForOf",u.filterDirectory(u.directorys))}}function Z(c,p){1&c&&t.nrm(0,"ion-icon",16)}function q(c,p){1&c&&t.nrm(0,"ion-spinner",18)}function e(c,p){1&c&&t.nrm(0,"ion-icon",19)}function A(c,p){if(1&c&&(t.j41(0,"ion-badge",20),t.EFF(1),t.k0s()),2&c){const u=t.XpG().$implicit;t.R7$(),t.JRh(u.total_board)}}function Q(c,p){if(1&c&&(t.j41(0,"ion-badge",20),t.EFF(1),t.k0s()),2&c){const u=t.XpG().$implicit;t.R7$(),t.JRh(u.total_media)}}function S(c,p){if(1&c&&t.eu8(0,13),2&c){const u=p.$implicit;t.XpG(3);const f=t.sdS(10);t.Y8G("ngTemplateOutlet",f)("ngTemplateOutletContext",t.eq3(2,F,u))}}function G(c,p){if(1&c&&(t.j41(0,"ul"),t.DNE(1,S,1,4,"ng-container",12),t.k0s()),2&c){const u=t.XpG().$implicit,f=t.XpG();t.R7$(),t.Y8G("ngForOf",f.filterDirectory(f.directorys,u.directory_id))}}function w(c,p){if(1&c){const u=t.RV6();t.j41(0,"li")(1,"ion-item",14),t.bIt("click",function(){const M=t.eBV(u).$implicit,b=t.XpG();return t.Njj(b.filterChange(M.directory_id))}),t.j41(2,"ion-button",15),t.bIt("click",function(M){const b=t.eBV(u).$implicit,T=t.XpG();return t.Njj(T.expandDirectory(M,b.directory_id,b.isexpanded))}),t.DNE(3,Z,1,0,"ion-icon",16)(4,q,1,0)(5,e,1,0),t.k0s(),t.j41(6,"ion-label"),t.EFF(7),t.k0s(),t.DNE(8,A,2,1,"ion-badge",17)(9,Q,2,1,"ion-badge",17),t.k0s(),t.DNE(10,G,2,1,"ul"),t.k0s()}if(2&c){const u=p.$implicit,f=t.XpG();t.R7$(),t.BMQ("color",u.directory_id==f.selectedId?"primary":""),t.R7$(),t.BMQ("style",u.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.vxM(3,u.isexpanded?u.loading?4:5:3),t.R7$(4),t.JRh(u.directory_title),t.R7$(),t.Y8G("ngIf","board"==f.filter.for&&u.total_board),t.R7$(),t.Y8G("ngIf","media"==f.filter.for&&u.total_media),t.R7$(),t.vxM(10,u.isexpanded?10:-1)}}let R=(()=>{var c;class p{constructor(f){this.popoverController=f,this.selectedId=0,this.filter={},this.response={loading:!0},this.directorys=[]}ngOnInit(){var f=this;(0,y.A)(function*(){f.user=yield(0,J.Nk)(),f.loadDirectory()})()}loadDirectory(f){var M;(0,K.op)({loading:b=>{this.response.loading=b,f&&(f.loading=b)},params:{userid:null===(M=this.user)||void 0===M?void 0:M.userid,directory_pid:null==f?void 0:f.directory_id,isdataowner:this.filter.isdataowner,statistic:this.filter.for?W.C[this.filter.for]:null,page:1,limit:-1},callback:b=>{var T;this.directorys=this.directorys.concat(b||[]),this.selectedId&&!this.directorys.find(L=>L.directory_id==this.selectedId)&&(0,K.Ur)({params:{userid:null===(T=this.user)||void 0===T?void 0:T.userid,directory_id:this.selectedId,statistic:this.filter.for?W.C[this.filter.for]:null,page:1,limit:-1},callback:L=>{let X=L||[];this.directorys=this.directorys.concat(X),X.map(V=>V.directory_pid).filter((V,U,O)=>O.indexOf(V)==U).forEach(V=>{this.directorys.filter(U=>U.directory_id==V).forEach(U=>{U.isexpanded=!0,U.isloadedchild=!0})})}})}})}filterDirectory(f,M){return f.filter(M?b=>b.directory_pid==M:b=>null==b.directory_pid||0==b.directory_pid)}expandDirectory(f,M,b){f.preventDefault(),f.stopPropagation(),this.directorys.filter(T=>T.directory_id==M).forEach(T=>{T.isexpanded=!b,T.isloadedchild||(T.isloadedchild=!0,this.loadDirectory(T))})}filterChange(f){this.popoverController.dismiss(this.directorys.find(M=>M.directory_id==f),"confirm")}}return(c=p).\u0275fac=function(f){return new(f||c)(t.rXU(d.IE))},c.\u0275cmp=t.VBU({type:c,selectors:[["app-popover-directory"]],inputs:{selectedId:"selectedId",filter:"filter"},decls:11,vars:3,consts:[["templateLoading",""],["templateData",""],["templateNoData",""],["templateYesData",""],["treeNode",""],[4,"ngIf","ngIfThen","ngIfElse"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],[1,"px-3","py-2"],[1,"text-muted"],[1,"menu-directory","overflow-auto"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["button","","detail","false",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline"],["color","medium",4,"ngIf"],["color","dark"],["name","caret-down-outline"],["color","medium"]],template:function(f,M){if(1&f&&t.DNE(0,j,1,0,"ng-container",5)(1,B,4,0,"ng-template",null,0,t.C5r)(3,I,1,3,"ng-template",null,1,t.C5r)(5,x,4,3,"ng-template",null,2,t.C5r)(7,z,3,1,"ng-template",null,3,t.C5r)(9,w,11,7,"ng-template",null,4,t.C5r),2&f){const b=t.sdS(2),T=t.sdS(4);t.Y8G("ngIf",!(null!=M.directorys&&M.directorys.length)&&!1!==M.response.loading)("ngIfThen",b)("ngIfElse",T)}},dependencies:[E.Sq,E.bT,E.T3,d.In,d.Jm,d.W9,d.iq,d.uz,d.he,d.w2,k.D9],styles:["ion-content[_ngcontent-%COMP%]{width:320px;max-width:100%}.menu-directory[_ngcontent-%COMP%]{width:320px;max-height:240px;border-top:3px solid #5F6CE1}ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--min-height: 34px;--padding-start: 0;font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-item[color=primary][_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary-contrast)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:9px}ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}"]}),p})()}}]);