"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6611],{8779:(he,Mt,v)=>{v.d(Mt,{$u:()=>O,IB:()=>vt,T2:()=>f,WR:()=>A,bf:()=>z,eD:()=>rt,l6:()=>C,lq:()=>K,pZ:()=>k,u$:()=>E});const k={fill:"transparent",stroke:"#129bff",strokeWidth:1},E={stroke:"#0D99FF",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},rt={fill:"#FFFFFF",stroke:"#0D99FF",strokeWidth:1,width:7,height:7},z={fill:"transparent",stroke:"transparent",strokeWidth:1},vt={fill:"none",stroke:"#2299F8",strokeWidth:1},C={fill:"#0D99FF",rx:4},f={fill:"#fff",alignmentBaseline:"central",textAnchor:"middle",fontSize:14},A={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},K={fill:"transparent"},O={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(he,Mt,v)=>{v.d(Mt,{$N:()=>C,An:()=>f,CS:()=>E,Kf:()=>H,Lp:()=>K,j9:()=>A,lP:()=>z,ml:()=>x,n9:()=>O,nf:()=>vt});var k=v(2492);const E=d=>{var R;return null===(R=d.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===R?void 0:R.map(b=>{let B={type:b.substring(0,1)},pt=(J=b.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?J.split(/\s/).map(gt=>(0,k.z)(parseFloat(gt),1e6)):[];var J;return pt.length&&(B.points=pt),B})},z=d=>{let R=[],b=[],B=[],pt=[];return d.forEach(J=>{switch(["M","L","C","S","Q","T"].includes(J.type)&&J.points&&J.points.forEach((ut,Qt)=>{Qt%2==0?R.push(ut):b.push(ut)}),J.type){case"A":var gt;7==(null===(gt=J.points)||void 0===gt?void 0:gt.length)&&(B.push(J.points[5]),pt.push(J.points[6]));break;case"H":var Kt;null!==(Kt=J.points)&&void 0!==Kt&&Kt.length&&(R.push(J.points[0]),B.push(J.points[0]));break;case"V":var dt;null!==(dt=J.points)&&void 0!==dt&&dt.length&&(b.push(J.points[0]),pt.push(J.points[0]));break;case"a":var V;if(7==(null===(V=J.points)||void 0===V?void 0:V.length)){let ut=R[R.length-1];R.push(ut+J.points[5]),B.push(ut+J.points[5]);let Qt=b[b.length-1];b.push(Qt+J.points[6]),pt.push(Qt+J.points[6])}break;case"h":var It;if(null!==(It=J.points)&&void 0!==It&&It.length){let ut=R[R.length-1];R.push(ut+J.points[0]),B.push(ut+J.points[0])}break;case"v":var Et;if(null!==(Et=J.points)&&void 0!==Et&&Et.length){let ut=b[b.length-1];b.push(ut+J.points[0]),pt.push(ut+J.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var Y;null===(Y=J.points)||void 0===Y||Y.forEach((ut,Qt)=>{Qt%2==0?B.push(ut):pt.push(ut)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Tt;null===(Tt=J.points)||void 0===Tt||Tt.forEach((ut,Qt)=>{if(Qt%2==0){let ne=R[R.length-1];R.push(ne+ut),B.push(ne+ut)}else{let ne=b[b.length-1];b.push(ne+ut),pt.push(ne+ut)}})}}),{minX:Math.min.apply(null,B),minY:Math.min.apply(null,pt),maxX:Math.max.apply(null,B),maxY:Math.max.apply(null,pt)}},vt=(d,R)=>R.map(b=>{let B=[];switch(b.type){case"a":var pt;7==(null===(pt=b.points)||void 0===pt?void 0:pt.length)&&B.push([(0,k.z)(b.points[0]/d.width,1e6),(0,k.z)(b.points[1]/d.height,1e6),b.points[2],b.points[3],b.points[4],(0,k.z)(b.points[5]/d.width,1e6),(0,k.z)(b.points[6]/d.height,1e6)]);break;case"A":var J;7==(null===(J=b.points)||void 0===J?void 0:J.length)&&B.push([(0,k.z)(b.points[0]/d.width,1e6),(0,k.z)(b.points[1]/d.height,1e6),b.points[2],b.points[3],b.points[4],(0,k.z)((b.points[5]-d.x)/d.width,1e6),(0,k.z)((b.points[6]-d.y)/d.height,1e6)]);break;case"h":var gt;null!==(gt=b.points)&&void 0!==gt&&gt.length&&B.push([(0,k.z)(b.points[0]/d.width,1e6)]);break;case"H":var Kt;null!==(Kt=b.points)&&void 0!==Kt&&Kt.length&&B.push([(0,k.z)((b.points[0]-d.x)/d.width,1e6)]);break;case"v":var dt;null!==(dt=b.points)&&void 0!==dt&&dt.length&&B.push([(0,k.z)(b.points[0]/d.height,1e6)]);break;case"V":var V;null!==(V=b.points)&&void 0!==V&&V.length&&B.push([(0,k.z)((b.points[0]-d.y)/d.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var It;if(null!==(It=b.points)&&void 0!==It&&It.length)for(let Y=0,Tt=b.points.length-1;Y<Tt;Y+=2)B.push([(0,k.z)((b.points[Y]-d.x)/d.width,1e6),(0,k.z)((b.points[Y+1]-d.y)/d.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var Et;if(null!==(Et=b.points)&&void 0!==Et&&Et.length)for(let Y=0,Tt=b.points.length-1;Y<Tt;Y+=2)B.push([(0,k.z)(b.points[Y]/d.width,1e6),(0,k.z)(b.points[Y+1]/d.height,1e6)])}return B.length?{type:b.type,ratios:B}:{type:b.type}}),C=(d,R)=>R.map(b=>{switch(b.type){case"a":var B,pt;return`${b.type}${null!==(B=null===(pt=b.ratios)||void 0===pt||null===(pt=pt.map(zt=>{var Nt,wt,D,W,s,tt,_t;return[(0,k.z)(d.width*(null!==(Nt=zt[0])&&void 0!==Nt?Nt:0),1e6),(0,k.z)(d.height*(null!==(wt=zt[1])&&void 0!==wt?wt:0),1e6),null!==(D=zt[2])&&void 0!==D?D:0,null!==(W=zt[3])&&void 0!==W?W:0,null!==(s=zt[4])&&void 0!==s?s:0,(0,k.z)(d.width*(null!==(tt=zt[5])&&void 0!==tt?tt:0),1e6),(0,k.z)(d.height*(null!==(_t=zt[6])&&void 0!==_t?_t:0),1e6)]}))||void 0===pt||null===(pt=pt.map(zt=>zt.join(" ")))||void 0===pt?void 0:pt.join(" "))&&void 0!==B?B:""}`;case"A":var J,gt;return`${b.type}${null!==(J=null===(gt=b.ratios)||void 0===gt||null===(gt=gt.map(zt=>{var Nt,wt,D,W,s,tt,_t;return[(0,k.z)(d.width*(null!==(Nt=zt[0])&&void 0!==Nt?Nt:0),1e6),(0,k.z)(d.height*(null!==(wt=zt[1])&&void 0!==wt?wt:0),1e6),null!==(D=zt[2])&&void 0!==D?D:0,null!==(W=zt[3])&&void 0!==W?W:0,null!==(s=zt[4])&&void 0!==s?s:0,(0,k.z)(d.x+d.width*(null!==(tt=zt[5])&&void 0!==tt?tt:0),1e6),(0,k.z)(d.y+d.height*(null!==(_t=zt[6])&&void 0!==_t?_t:0),1e6)]}))||void 0===gt||null===(gt=gt.map(zt=>zt.join(" ")))||void 0===gt?void 0:gt.join(" "))&&void 0!==J?J:""}`;case"h":var Kt,dt;return`${b.type}${null!==(Kt=null===(dt=b.ratios)||void 0===dt||null===(dt=dt.map(zt=>{var Nt;return(0,k.z)(d.width*(null!==(Nt=zt[0])&&void 0!==Nt?Nt:0),1e6)}))||void 0===dt?void 0:dt.join(" "))&&void 0!==Kt?Kt:""}`;case"H":var V,It;return`${b.type}${null!==(V=null===(It=b.ratios)||void 0===It||null===(It=It.map(zt=>{var Nt;return(0,k.z)(d.x+d.width*(null!==(Nt=zt[0])&&void 0!==Nt?Nt:0),1e6)}))||void 0===It?void 0:It.join(" "))&&void 0!==V?V:""}`;case"v":var Et,Y;return`${b.type}${null!==(Et=null===(Y=b.ratios)||void 0===Y||null===(Y=Y.map(zt=>{var Nt;return(0,k.z)(d.height*(null!==(Nt=zt[0])&&void 0!==Nt?Nt:0),1e6)}))||void 0===Y?void 0:Y.join(" "))&&void 0!==Et?Et:""}`;case"V":var Tt,ut;return`${b.type}${null!==(Tt=null===(ut=b.ratios)||void 0===ut||null===(ut=ut.map(zt=>{var Nt;return(0,k.z)(d.y+d.height*(null!==(Nt=zt[0])&&void 0!==Nt?Nt:0),1e6)}))||void 0===ut?void 0:ut.join(" "))&&void 0!==Tt?Tt:""}`;case"z":case"Z":return b.type;case"M":case"L":case"C":case"S":case"Q":case"T":var Qt,ne;return`${b.type}${null!==(Qt=null===(ne=b.ratios)||void 0===ne||null===(ne=ne.map(zt=>{var Nt,wt;return[(0,k.z)(d.x+d.width*(null!==(Nt=zt[0])&&void 0!==Nt?Nt:0),1e6),(0,k.z)(d.y+d.height*(null!==(wt=zt[1])&&void 0!==wt?wt:0),1e6)]}))||void 0===ne||null===(ne=ne.map(zt=>zt.join(" ")))||void 0===ne?void 0:ne.join(" "))&&void 0!==Qt?Qt:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var q,Ct;return`${b.type}${null!==(q=null===(Ct=b.ratios)||void 0===Ct||null===(Ct=Ct.map(zt=>{var Nt,wt;return[(0,k.z)(d.width*(null!==(Nt=zt[0])&&void 0!==Nt?Nt:0),1e6),(0,k.z)(d.height*(null!==(wt=zt[1])&&void 0!==wt?wt:0),1e6)]}))||void 0===Ct||null===(Ct=Ct.map(zt=>zt.join(" ")))||void 0===Ct?void 0:Ct.join(" "))&&void 0!==q?q:""}`;default:return""}}).join(""),f=d=>{return(R=d.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?R.split(/\s/).map(b=>parseFloat(b)):[];var R},A=d=>{let R=[],b=[];return d.forEach((B,pt)=>{pt%2==0?R.push(B):b.push(B)}),{minX:Math.min.apply(null,R),minY:Math.min.apply(null,b),maxX:Math.max.apply(null,R),maxY:Math.max.apply(null,b)}},K=(d,R)=>{let b=[];for(let B=0,pt=R.length-1;B<pt;B+=2)b.push([(R[B]-d.x)/d.width,(R[B+1]-d.y)/d.height]);return b},O=(d,R)=>R.map(b=>[(0,k.z)(d.x+d.width*b[0],1e6),(0,k.z)(d.y+d.height*b[1],1e6)]).map(b=>b.join(" ")).join(" "),x=(d,R)=>{let b=w(R);if(b){let B=new window.Snap.Matrix(b.a,b.b,b.c,b.d,b.e,b.f);if(B){let{dx:pt,dy:J,rotate:gt,scalex:Kt,scaley:dt}=B.split();return{x:d.x+pt,y:d.y+J,dx:pt,dy:J,rotate:gt,scalex:Kt,scaley:dt}}return{x:Z(d.x,d.y,b),y:lt(d.x,d.y,b)}}return d},w=d=>{let R=d.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(b=>(0,k.z)(parseFloat(b),1e6));if(6==R.length)return{a:R[0],b:R[1],c:R[2],d:R[3],e:R[4],f:R[5]}},H=(d,R)=>{let b=w(R);return b?window.Snap.path.map(d,new window.Snap.Matrix(b.a,b.b,b.c,b.d,b.e,b.f)).toString():d},Z=function(d,R,b){return(0,k.z)(d*b.a+R*b.c+b.e,10)},lt=function(d,R,b){return(0,k.z)(d*b.b+R*b.d+b.f,10)}},2837:(he,Mt,v)=>{v.d(Mt,{v:()=>lt,U:()=>H});var k=v(6611),E=v(1999),rt=v(2492),z=/^#[a-fA-F0-9]+$/i,vt=/^rgb\((\d+),(\d+),(\d+)\)$/i,C=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const f=d=>{let R=null,b=null;if(d)if("transparent"==d)R="#000000",b=0;else if(d.match(z))R=d;else{let B=(d=d.replace(/\s+/g,"")).match(C);if(B)R="#"+(256|B[1]).toString(16).slice(1)+(256|B[2]).toString(16).slice(1)+(256|B[3]).toString(16).slice(1),b=(0,rt.z)(parseFloat(B[4]),100);else{let pt=d.match(vt);pt&&(R="#"+(256|pt[1]).toString(16).slice(1)+(256|pt[2]).toString(16).slice(1)+(256|pt[3]).toString(16).slice(1))}}return{hex:R,alpha:b}};var A=v(4896),K=v(8338);const H=d=>Z(null==d?void 0:d.url,null==d?void 0:d.path,null==d?void 0:d.src,null==d?void 0:d.name);var Z=(d,R,b,B)=>{var pt,J;let gt,Kt,dt,V;var It,Et;return d&&(gt=d.replace(/\\/g,"/")),R&&(Kt=R.replace(/\\/g,"/")),b&&(dt=b.replace(/\\/g,"/")),Kt&&!gt&&(gt=(null===(It=k.L.config)||void 0===It?void 0:It.readfileuploadurl)+Kt),!dt||Kt||gt||(Kt=dt.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),gt=(null===(Et=k.L.config)||void 0===Et?void 0:Et.readfileuploadurl)+Kt),V=B||(null!==(pt=gt)&&void 0!==pt?pt:"").split("/").pop()||(null!==(J=Kt)&&void 0!==J?J:"").split("/").pop()||"",{url:gt,path:Kt,name:V}};const lt=d=>{let R={x:0,y:0,width:d.screen.w,height:d.screen.h},b=[];return d.data.forEach((B,pt)=>{var J,gt;let Kt={id:"number"==typeof B.id?B.id:k.L.data.newSlideId,code:null===(J=B.id)||void 0===J?void 0:J.toString(),name:"string"==typeof B.id?B.id:`Trang ${pt+1}`,svg:{viewBox:R,nodes:[]},test:(dt=B.test2,dt?(dt.audiotrue&&(dt.audiotrue=H({path:dt.audiotrue.path})),dt.audiofalse&&(dt.audiofalse=H({path:dt.audiofalse.path})),dt.effecttrue&&(dt.effecttrue=H({path:dt.effecttrue.path})),dt.effectfalse&&(dt.effectfalse=H({path:dt.effectfalse.path})),dt.icontrue&&(dt.icontrue=H({path:dt.icontrue.path})),dt.iconfalse&&(dt.iconfalse=H({path:dt.iconfalse.path})),dt):{})};var dt;B.background&&Kt.svg&&(Kt.svg.background=function(d){return d&&(null!==d.match(/#([a-zA-Z0-9]+)/)||null!==d.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==d.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(B.background)?{color:B.background}:function(d){return d&&null!==d.match(/data:[^;]+;base64,/)}(B.background)?{base64:B.background}:function(d){return d&&null!==d.match(/http(s)?:\/\//)}(B.background)?Z(B.background):Z(void 0,B.background)),jQuery(null!==(gt=B.svg)&&void 0!==gt?gt:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((dt,V)=>{var It,Et;let Y=jQuery(V).parents(".indexs"),Tt=(q=Y.attr("data-index"))?parseInt(q):0,ut=(q=>Tt&&q?parseInt(q):0)(Y.attr("data-time")),Qt=null!==(It=V.getAttribute("id"))&&void 0!==It?It:(1e9*Math.random()).toFixed(),ne={id:parseInt(Qt),code:`${V.nodeName}-${Qt}`,name:V.nodeName,idx:Tt,time:ut,type:(()=>{switch(V.nodeName){case"polygon":return E.h.POLYGON;case"path":return E.h.PATH;case"circle":return E.h.CIRCLE;case"ellipse":return E.h.ELLIPSE;case"line":return E.h.LINE;case"rect":return E.h.RECT;case"foreignObject":return E.h.FOREIGNOBJECT}return 0})(),size:(q=>{let Ct={},zt=0,Nt=0,wt=0,D=0,W=null,s=null,tt=parseFloat((null===(q=V.getAttribute("transform"))||void 0===q?void 0:q.replace("rotate(","").replace(")",""))||"0")||null;switch(V.nodeName){case"polygon":{var _t,Lt;let Dt=[],Bt=[],Wt=999999999,Vt=999999999,re=0,Rt=0;W=JSON.parse(V.getAttribute("ratios")||"[]"),s=null!==(_t=null===(Lt=V.getAttribute("points"))||void 0===Lt?void 0:Lt.split(",").map(function(st){return st.split(" ").map(function(Xt){return parseFloat(Xt)})}))&&void 0!==_t?_t:[],s.forEach(function(st){Dt.push(st[0]),Bt.push(st[1])}),Wt=Math.min.apply(null,Dt),Vt=Math.min.apply(null,Bt),re=Math.max.apply(null,Dt),Rt=Math.max.apply(null,Bt),zt=Wt,Nt=Vt,wt=re-zt,D=Rt-Nt;break}case"path":{let Dt=V.getAttribute("d");if(Dt){let Bt=(0,A.CS)(Dt),{minX:Wt,minY:Vt,maxX:re,maxY:Rt}=(0,A.lP)(Bt);zt=Wt,Nt=Vt,wt=re-zt||1,D=Rt-Nt||1,Object.assign(Ct,{ratioMaps:(0,A.nf)({x:zt,y:Nt,width:wt,height:D},Bt)})}break}case"circle":{let Dt=parseFloat(V.getAttribute("cx")||"0"),Bt=parseFloat(V.getAttribute("cy")||"0"),Wt=parseFloat(V.getAttribute("r")||"0");zt=Dt-Wt,Nt=Bt-Wt,wt=2*Wt,D=2*Wt;break}case"ellipse":{let Dt=parseFloat(V.getAttribute("cx")||"0"),Bt=parseFloat(V.getAttribute("cy")||"0"),Wt=parseFloat(V.getAttribute("rx")||"0"),Vt=parseFloat(V.getAttribute("ry")||"0");zt=Dt-Wt,Nt=Bt-Vt,wt=2*Wt,D=2*Vt;break}case"line":{let Dt=parseFloat(V.getAttribute("x1")||"0"),Bt=parseFloat(V.getAttribute("y1")||"0"),Wt=parseFloat(V.getAttribute("x2")||"0"),Vt=parseFloat(V.getAttribute("y2")||"0"),re=999999999,Rt=999999999,st=0,Xt=0;re=Math.min(Dt,Wt),Rt=Math.min(Bt,Vt),st=Math.max(Dt,Wt),Xt=Math.max(Bt,Vt),zt=re,Nt=Rt,wt=st-zt,D=Xt-Nt,W=[[(Dt-zt)/(wt||1),(Bt-Nt)/(D||1)],[(Wt-zt)/(wt||1),(Vt-Nt)/(D||1)]];break}case"rect":case"foreignObject":zt=parseFloat(V.getAttribute("x")||"0"),Nt=parseFloat(V.getAttribute("y")||"0"),wt=parseFloat(V.getAttribute("width")||"0"),D=parseFloat(V.getAttribute("height")||"0")}return Object.assign(Ct,{x:zt,y:Nt,width:wt,height:D,ratios:W,points:s,rotate:tt})})(),attribute:(()=>{let q={};switch(V.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var Ct,zt,Nt,wt,D,W,s,tt;let st=null!==(Ct=V.getAttribute("fill"))&&void 0!==Ct?Ct:null,Xt=null!==(zt=V.getAttribute("stroke"))&&void 0!==zt?zt:null,P=null!==(Nt=parseFloat(null!==(wt=V.getAttribute("stroke-opacity"))&&void 0!==wt?wt:"1"))&&void 0!==Nt?Nt:null,c=null!==(D=parseFloat(V.getAttribute("stroke-width")||"0"))&&void 0!==D?D:null,M=null!==(W=V.getAttribute("stroke-linecap"))&&void 0!==W?W:null,it=null!==(s=V.getAttribute("stroke-linejoin"))&&void 0!==s?s:null,nt=null!==(tt=parseFloat(V.getAttribute("stroke-dasharray")||"0"))&&void 0!==tt?tt:null;Object.assign(q,{fill:st,stroke:Xt,strokeOpacity:P,strokeWidth:c,strokeLinecap:M,strokeLinejoin:it,strokeDasharray:nt});break}case"path":{let st=Y.get(0);if(st){var _t,Lt,Dt,Bt,Wt,Vt,re,Rt;let Xt=null!==(_t=st.getAttribute("fill"))&&void 0!==_t?_t:null,P=null!==(Lt=st.getAttribute("stroke"))&&void 0!==Lt?Lt:null,c=null!==(Dt=parseFloat(null!==(Bt=st.getAttribute("stroke-opacity"))&&void 0!==Bt?Bt:"1"))&&void 0!==Dt?Dt:null,M=null!==(Wt=parseFloat(st.getAttribute("stroke-width")||"0"))&&void 0!==Wt?Wt:null,it=null!==(Vt=st.getAttribute("stroke-linecap"))&&void 0!==Vt?Vt:null,nt=null!==(re=st.getAttribute("stroke-linejoin"))&&void 0!==re?re:null,G=null!==(Rt=parseFloat(st.getAttribute("stroke-dasharray")||"0"))&&void 0!==Rt?Rt:null;Object.assign(q,{fill:Xt,stroke:P,strokeOpacity:c,strokeWidth:M,strokeLinecap:it,strokeLinejoin:nt,strokeDasharray:G})}break}}return q})(),style:(()=>{let q={};switch(V.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let Nt=jQuery(V).find(".svg-container");if(Nt.length){let D=parseFloat(Nt.css("border-width")||"0")||null,W=Nt.css("border-style")||null,s=Nt.css("border-color")||null,tt=null,_t=Nt.css("background-color")||null,Lt=null;(()=>{let{hex:Dt,alpha:Bt}=f(s);s=Dt,tt=Bt})(),(()=>{let{hex:Dt,alpha:Bt}=f(_t);_t=Dt,Lt=Bt})(),Object.assign(q,{borderWidth:D,borderStyle:W,borderColor:s,borderOpacity:tt,backgroundColor:_t,backgroundOpacity:Lt})}let wt=jQuery(V).find(".svg-editor-content");if(wt.length){var Ct,zt;let D=JSON.parse((wt.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:W,alpha:s}=f(D.TextColor);Object.assign(q,{fontFamily:null!==(Ct=D.FontFamily)&&void 0!==Ct?Ct:null,fontSize:null!==(zt=D.FontSize)&&void 0!==zt?zt:null,color:W,opacity:s})}break}}return q})(),source:(()=>{let q={};switch(V.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Y.hasClass("editors")){var Ct;let Rt="div,h1,h2,h3,h4,h5,h6,p,span,strong,b,i",st=c=>{null==c||c.forEach(M=>{let it=M.querySelectorAll(`:scope > ${Rt}`);it.length&&st(it),!M.querySelectorAll(":scope > *").length&&""==M.textContent&&M.remove()})},Xt=c=>{let M=null==c?void 0:c.querySelectorAll(":scope > div,h1,h2,h3,h4,h5,h6,p,strong,span");if(null!=M&&M.length){var it;let nt=M[M.length-1];if(""==(null===(it=nt.textContent)||void 0===it?void 0:it.trim())){let G=nt.querySelectorAll(":scope > *");if(G.length){let _=G[G.length-1];["br","BR"].includes(null==_?void 0:_.nodeName)&&(_.remove(),Xt(c))}else nt.remove(),Xt(c)}}};st(null===(Ct=jQuery(V).find(".svg-editor-content").get(0))||void 0===Ct?void 0:Ct.querySelectorAll(`:scope > ${Rt}`)),Xt(jQuery(V).find(".svg-editor-content").get(0));let P=jQuery(V).find(".svg-editor-content");if(P.length){var zt;let c=P.html(),M=null!==(zt=(null!=c?c:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==zt?zt:[];Object.assign(q,{type:"html",html:{htmlContent:c,variableKeywords:M}})}}else if(Y.hasClass("inputs")||Y.hasClass("textareas"))Object.assign(q,{type:"input",input:{input:!!jQuery(V).find("input").length,textarea:!!jQuery(V).find("textarea").length}});else if(Y.hasClass("tests")){let Rt=jQuery(V).find(".svg-test");if(Y.hasClass("tests-truefalse")){var Nt,wt;let st=Rt.find(".svg-editor-content").html(),Xt=null!==(Nt=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Nt?Nt:[];Object.assign(q,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(wt=B.test2.truefalse)||void 0===wt?void 0:wt.includes(Qt)}},html:{htmlContent:st,variableKeywords:Xt}})}else if(Y.hasClass("tests-singlechoice")){var D,W;let st=Rt.find(".svg-editor-content").html(),Xt=null!==(D=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==D?D:[];Object.assign(q,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(W=B.test2.singlechoice)||void 0===W?void 0:W.includes(Qt)}},html:{htmlContent:st,variableKeywords:Xt}})}else if(Y.hasClass("tests-multichoice")){var s,tt;let st=Rt.find(".svg-editor-content").html(),Xt=null!==(s=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==s?s:[];Object.assign(q,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(tt=B.test2.multichoice)||void 0===tt?void 0:tt.includes(Qt)}},html:{htmlContent:st,variableKeywords:Xt}})}else if(Y.hasClass("tests-fill")){var _t,Lt;let st=Rt.find(".svg-editor-content").html(),Xt=null!==(_t=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==_t?_t:[],P=null!==(Lt=(null!=st?st:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==Lt?Lt:[];P=P.filter((c,M,it)=>it.indexOf(c)==M),Object.assign(q,{type:"test",test:{type:"fill",fill:P.map(c=>{var M;return{key:c,value:null===(M=B.test2.fill)||void 0===M||null===(M=M.find(it=>it.id==Qt))||void 0===M||null===(M=M.vals)||void 0===M?void 0:M.map(it=>it.text).filter(it=>!["",null,void 0,NaN].includes(it))}})},html:{htmlContent:st,variableKeywords:Xt,fillKeywords:P}})}else if(Y.hasClass("tests-matching")){if(Rt.hasClass("svg-test-empty"))Object.assign(q,{type:"test",test:{type:"matching-empty",matching:{key:Rt.attr("data-name")||null}}});else if(Rt.hasClass("svg-test-content")){var Dt;let st=Rt.find(".svg-editor-content").html(),Xt=null!==(Dt=(null!=st?st:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Dt?Dt:[];Object.assign(q,{type:"test",test:{type:"matching-content",matching:{key:Rt.attr("data-name")||null}},html:{htmlContent:st,variableKeywords:Xt}})}}else if(Y.hasClass("tests-speech")){var Bt;Object.assign(q,{type:"speech",speech:{value:null===(Bt=B.test2.speech)||void 0===Bt||null===(Bt=Bt.find(st=>st.id==Qt))||void 0===Bt||null===(Bt=Bt.vals)||void 0===Bt?void 0:Bt.map(st=>st.text).filter(st=>!["",null,void 0,NaN].includes(st))}})}else if(Y.hasClass("tests-submit")){let st=jQuery(V).find(".svg-container img");Object.assign(q,{type:"test",test:{type:"submit"},image:Z(st.attr("url"),st.attr("path"),st.attr("src"))})}}else if(Y.hasClass("images")){let Rt=jQuery(V).find(".svg-editor-content img");if(Rt.length)Object.assign(q,{type:"image",image:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});else{let st=jQuery(V).find("iframe");Object.assign(q,{type:"iframe",iframe:Z(st.attr("url"),st.attr("path"),st.attr("src"))})}}else if(Y.hasClass("sounds")){let Rt=jQuery(V).find(".svg-editor-content img");Rt.length&&Object.assign(q,{type:"image",image:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))})}else if(Y.hasClass("htmls")){let Rt=jQuery(V).find("iframe");Rt.length&&Object.assign(q,{type:"iframe",iframe:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))})}else if(Y.hasClass("svgs")){let Rt=jQuery(V).find("svg");var Wt,Vt;Rt.length&&Object.assign(q,{type:"svg",svg:Object.assign(Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src")),{svgContent:null!==(Wt=null===(Vt=Rt.get(0))||void 0===Vt?void 0:Vt.outerHTML)&&void 0!==Wt?Wt:null})})}else if(Y.hasClass("medias")){let Rt=jQuery(V).find(".media-item");if(Rt.length)switch(Rt.attr("type")){case"audio":Object.assign(q,{type:"audio",audio:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});break;case"video":Object.assign(q,{type:"video",video:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});break;case"file":Object.assign(q,{type:"file",file:Z(Rt.attr("url"),Rt.attr("path"),Rt.attr("src"))});break;default:var re;Object.assign(q,{type:"link",link:{url:null!==(re=Rt.attr("url"))&&void 0!==re?re:null}})}let st=jQuery(V).find("img");st.length&&(Object.assign(q,{image:Z(st.attr("url"),st.attr("path"),st.attr("src"))}),q.type||Object.assign(q,{type:"image"}))}}return q})(),animate:(q=>{let Ct={},zt=null===(q=B.animates)||void 0===q?void 0:q.find(Nt=>Nt.elementId==Qt);return zt&&Object.assign(Ct,{value:zt.value}),Ct})(),interactive:(()=>{let q={},Ct=B.actions.show.filter(Nt=>Nt.elementId==Qt&&Nt.active);Ct.length&&(q.show={},Ct.forEach(Nt=>{let{source:wt}=Nt;switch(null==wt?void 0:wt.type){case"work":var D,W,s,tt,_t;q.show.action={},Object.assign(q.show.action,{value:null!==(D=wt.value)&&void 0!==D?D:null,iteration:null!==(W=wt.iteration)&&void 0!==W?W:null,finish:null!==(s=wt.end)&&void 0!==s?s:null,time:null!==(tt=wt.time)&&void 0!==tt?tt:null,points:null!==(_t=wt.points)&&void 0!==_t?_t:null});break;case"audio":var Lt,Dt,Bt;q.show.audio={},Object.assign(q.show.audio,{source:Z(null,null,wt.url),iteration:null!==(Lt=wt.iteration)&&void 0!==Lt?Lt:null,finish:null!==(Dt=wt.end)&&void 0!==Dt?Dt:null,time:null!==(Bt=wt.time)&&void 0!==Bt?Bt:null,async:-1==wt.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Wt,Vt,re,Rt,st,Xt,P,c,M,it,nt,G,_,F,et;wt.options.includes("show")&&(q.show.triggershow={},Object.assign(q.show.triggershow,{id:null!==(Wt=parseInt(null!==(Vt=wt.id)&&void 0!==Vt?Vt:"0"))&&void 0!==Wt?Wt:null,ids:null===(re=wt.ids)||void 0===re?void 0:re.map(ct=>parseInt(ct)),async:null!==(Rt=wt.async)&&void 0!==Rt?Rt:null,time:null!==(st=wt.time)&&void 0!==st?st:null})),wt.options.includes("run")&&(q.show.triggerrun={},Object.assign(q.show.triggerrun,{id:null!==(Xt=parseInt(null!==(P=wt.id)&&void 0!==P?P:"0"))&&void 0!==Xt?Xt:null,ids:null===(c=wt.ids)||void 0===c?void 0:c.map(ct=>parseInt(ct)),async:null!==(M=wt.async)&&void 0!==M?M:null,time:null!==(it=wt.time)&&void 0!==it?it:null})),wt.options.includes("hide")&&(q.show.triggerhide={},Object.assign(q.show.triggerhide,{id:null!==(nt=parseInt(null!==(G=wt.id)&&void 0!==G?G:"0"))&&void 0!==nt?nt:null,ids:null===(_=wt.ids)||void 0===_?void 0:_.map(ct=>parseInt(ct)),async:null!==(F=wt.async)&&void 0!==F?F:null,time:null!==(et=wt.time)&&void 0!==et?et:null}))}}));let zt=B.actions.click.filter(Nt=>Nt.elementId==Qt&&Nt.active);return zt&&(q.click={},zt.forEach(Nt=>{let{source:wt}=Nt;switch(null==wt?void 0:wt.type){case"work":var D,W,s,tt,_t;q.click.action={},Object.assign(q.click.action,{value:null!==(D=wt.value)&&void 0!==D?D:null,iteration:null!==(W=wt.iteration)&&void 0!==W?W:null,finish:null!==(s=wt.end)&&void 0!==s?s:null,time:null!==(tt=wt.time)&&void 0!==tt?tt:null,points:null!==(_t=wt.points)&&void 0!==_t?_t:null});break;case"audio":var Lt,Dt,Bt;q.click.audio={},Object.assign(q.click.audio,{source:Z(null,null,wt.url),iteration:null!==(Lt=wt.iteration)&&void 0!==Lt?Lt:null,finish:null!==(Dt=wt.end)&&void 0!==Dt?Dt:null,time:null!==(Bt=wt.time)&&void 0!==Bt?Bt:null,async:-1==wt.iteration?"change-slide":"change-node"});break;case"video":{q.click.video={},Object.assign(q.click.video,{source:Z(wt.url,wt.path)});let{url:xt,path:bt,name:X}=Z(wt.url,wt.path);q.click.media={},Object.assign(q.click.media,{url:xt,path:bt,name:X,type:K.S.VIDEO});break}case"image":{q.click.image={},Object.assign(q.click.image,{source:Z(wt.url,wt.path)});let{url:xt,path:bt,name:X}=Z(wt.url,wt.path);q.click.media={},Object.assign(q.click.media,{url:xt,path:bt,name:X,type:K.S.IMAGE});break}case"link":{q.click.link={},Object.assign(q.click.link,{url:wt.url,target:wt.target});let{url:xt,path:bt,name:X}=Z(wt.url,wt.path);q.click.media={},Object.assign(q.click.media,{url:xt,path:bt,name:X,type:K.S.LINK});break}case"text":q.click.text={},Object.assign(q.click.text,{content:wt.content});break;case"node":case"node2":var Wt,Vt,re,Rt,st,Xt,P,c,M,it,nt,G,_,F,et;wt.options.includes("show")&&(q.click.triggershow={},Object.assign(q.click.triggershow,{id:null!==(Wt=parseInt(null!==(Vt=wt.id)&&void 0!==Vt?Vt:"0"))&&void 0!==Wt?Wt:null,ids:null===(re=wt.ids)||void 0===re?void 0:re.map(xt=>parseInt(xt)),async:null!==(Rt=wt.async)&&void 0!==Rt?Rt:null,time:null!==(st=wt.time)&&void 0!==st?st:null})),wt.options.includes("run")&&(q.click.triggerrun={},Object.assign(q.click.triggerrun,{id:null!==(Xt=parseInt(null!==(P=wt.id)&&void 0!==P?P:"0"))&&void 0!==Xt?Xt:null,ids:null===(c=wt.ids)||void 0===c?void 0:c.map(xt=>parseInt(xt)),async:null!==(M=wt.async)&&void 0!==M?M:null,time:null!==(it=wt.time)&&void 0!==it?it:null})),wt.options.includes("hide")&&(q.click.triggerhide={},Object.assign(q.click.triggerhide,{id:null!==(nt=parseInt(null!==(G=wt.id)&&void 0!==G?G:"0"))&&void 0!==nt?nt:null,ids:null===(_=wt.ids)||void 0===_?void 0:_.map(xt=>parseInt(xt)),async:null!==(F=wt.async)&&void 0!==F?F:null,time:null!==(et=wt.time)&&void 0!==et?et:null}));break;case"slide":var ct;q.click.slide={},Object.assign(q.click.slide,{id:parseInt(null!==(ct=wt.id)&&void 0!==ct?ct:"0")||wt.num||null,code:wt.id})}})),q})(),variable:(q=>{let Ct={};var zt;V.getAttribute("data-variable")&&(Ct.input={},Object.assign(Ct.input,{variable:null!==(zt=V.getAttribute("data-variable"))&&void 0!==zt?zt:null}));let Nt=null===(q=B.nodes)||void 0===q||null===(q=q.find(tt=>tt.id==Qt))||void 0===q?void 0:q.variable;var wt,D,W,s;return Nt&&(Ct.click={},Object.assign(Ct.click,{variable:null!==(wt=Nt.variable)&&void 0!==wt?wt:null,operator:null!==(D=Nt.operator)&&void 0!==D?D:null,valuetype:null!==(W=Nt.valuetype)&&void 0!==W?W:null,value:null!==(s=Nt.value)&&void 0!==s?s:null})),Ct})()};var q;null===(Et=Kt.svg)||void 0===Et||Et.nodes.push(ne)}),b.push(Kt)}),{screen:{width:d.screen.w,height:d.screen.h},data:{slides:b},variable:d.variable,fonts:[]}}},6195:(he,Mt,v)=>{v.d(Mt,{A9:()=>K,IB:()=>O,_4:()=>A,_5:()=>vt,ar:()=>C,yW:()=>f});var k=v(467),E=v(119);E.config({driver:[E.INDEXEDDB,E.LOCALSTORAGE,E.WEBSQL],name:"_localDataDB",version:1});const z={create:(x=(0,k.A)(function*(){return E}),function(){return x.apply(this,arguments)}),get:function(){var x=(0,k.A)(function*(w){return E.getItem(w)});return function(H){return x.apply(this,arguments)}}(),set:function(){var x=(0,k.A)(function*(w,H){return E.setItem(w,H)});return function(H,Z){return x.apply(this,arguments)}}()},vt=function(){var x=(0,k.A)(function*(w){yield z.create();var H=(yield z.get("icdt-data"))||[];"function"==typeof w.callback&&w.callback(H)});return function(H){return x.apply(this,arguments)}}(),C=function(){var x=(0,k.A)(function*(w){yield z.create(),w.params=w.params||{};try{yield z.set("icdt-data",w.params),"function"==typeof w.callback&&w.callback(w.params)}catch(H){"function"==typeof w.callback&&w.callback(null),console.error(H)}});return function(H){return x.apply(this,arguments)}}(),f=function(){var x=(0,k.A)(function*(w){yield z.create();try{var H=(yield z.get("icdt-config"))||{};"function"==typeof w.callback&&w.callback(H)}catch(Z){"function"==typeof w.callback&&w.callback(null),console.error(Z)}});return function(H){return x.apply(this,arguments)}}(),A=function(){var x=(0,k.A)(function*(w){yield z.create(),w.params=w.params||{};try{yield z.set("icdt-config",w.params),"function"==typeof w.callback&&w.callback(w.params)}catch(H){"function"==typeof w.callback&&w.callback(null),console.error(H)}});return function(H){return x.apply(this,arguments)}}(),K=function(){var x=(0,k.A)(function*(w){yield z.create();try{var H=(yield z.get("icdt-clipboard"))||{};"function"==typeof w.callback&&w.callback(H)}catch(Z){"function"==typeof w.callback&&w.callback(null),console.error(Z)}});return function(H){return x.apply(this,arguments)}}(),O=function(){var x=(0,k.A)(function*(w){yield z.create(),w.params=w.params||{};try{yield z.set("icdt-clipboard",w.params),"function"==typeof w.callback&&w.callback(w.params)}catch(H){"function"==typeof w.callback&&w.callback(null),console.error(H)}});return function(H){return x.apply(this,arguments)}}();var x},6315:(he,Mt,v)=>{v.d(Mt,{w:()=>k});const k=(E,rt)=>{if(!E)return"";let z=E.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),vt=(z&&z[4]||"").trim(),C=z?(256|z[1]).toString(16).slice(1)+(256|z[2]).toString(16).slice(1)+(256|z[3]).toString(16).slice(1):E;if("0"==vt)return"transparent";if(rt){let f;f=""!==vt?vt:"01",f=(255*f|256).toString(16).slice(1),C+=f}return`#${C}`}},7873:(he,Mt,v)=>{v.d(Mt,{F:()=>k});const k={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},1477:(he,Mt,v)=>{v.d(Mt,{r:()=>k});const k={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221}},2409:(he,Mt,v)=>{v.d(Mt,{F:()=>k});const k={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(he,Mt,v)=>{v.d(Mt,{P:()=>k});const k={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(he,Mt,v)=>{v.d(Mt,{Q:()=>k});const k={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(he,Mt,v)=>{v.d(Mt,{h:()=>k});const k={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,TSPAN:10,PATH:8,POLYLINE:11}},8338:(he,Mt,v)=>{v.d(Mt,{S:()=>k});const k={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},6611:(he,Mt,v)=>{v.d(Mt,{L:()=>Ot});var k=v(3603),E=v(5970),rt=v(7873),z=v(9506),vt=v(1308),C=v(3138);const K=j=>{var i,r,o,n,l,y,p;let h=(null===(i=j.mouseEvent)||void 0===i?void 0:i.target)||(null===(r=j.touchEvent)||void 0===r?void 0:r.target),T=(null===(o=h)||void 0===o?void 0:o.getAttribute("id"))||"",m=null===(n=h)||void 0===n?void 0:n.nodeName;Ot.dataSelect.nodeName.includes(m)||(h=jQuery(h).parents("foreignObject").get(0),h&&(T=h.getAttribute("id")||"",m=h.nodeName));let N=(null===(l=h)||void 0===l||null===(l=l.parentNode)||void 0===l?void 0:l.getAttribute("id"))||"";var I,mt;if([rt.F.RESIZE_GROUP,rt.F.SELECT_GROUP].includes(N))return null===(I=j.mouseEvent)||void 0===I||I.stopPropagation(),void(null===(mt=j.mouseEvent)||void 0===mt||mt.preventDefault());if(null!==(y=j.mouseEvent)&&void 0!==y&&y.altKey||null!==(p=j.touchEvent)&&void 0!==p&&p.altKey||!T||T.match(/[^0-9]/)||!Ot.dataSelect.nodeName.includes(m)){var yt;Ot.dataSelect.ids.length&&(Ot.dataSelect.ids=[]),(0==(null===(yt=j.mouseEvent)||void 0===yt?void 0:yt.button)||j.touchEvent)&&(j=>{let l=(0,E.RY)(rt.F.SCAN_GROUP,"g"),y=(0,z.CE)(0,0,1,1);(0,E.xJ)(l,y),((j,i,r)=>{(0,vt.I)(j,{start:l=>{},move:(l,y)=>{((l,y,p,h)=>{i=(0,z.CE)(l,y,p,h),(0,E.xJ)(r,i)})(y[0][0],y[0][1],l.x,l.y)},end:(l,y)=>{null==r||r.remove(),Ot.dataSelect.ids=Ot.data.getNodeInArea(Math.min(y[0][0],l.x),Math.min(y[0][1],l.y),Math.max(y[0][0],l.x),Math.max(y[0][1],l.y)),(0,C.D)(Ot.dataSelect.nodes)}})})(j,y,l)})(j)}else{var St,Ft;let Zt=parseFloat(T||"0");Ot.dataSelect.ids=null!==(St=j.mouseEvent)&&void 0!==St&&St.shiftKey||null!==(Ft=j.touchEvent)&&void 0!==Ft&&Ft.shiftKey?[Zt].concat(Ot.dataSelect.ids).filter((_e,xe,be)=>be.indexOf(_e)==xe):[Zt],(0,C.D)(Ot.dataSelect.nodes)}};class x{constructor(){let{x:i,y:r}=Ot.screen.dislocation;var o=(n,l,y,p)=>{Ot.screen.move({x:i,y:r},{x:y-n,y:p-l})};return{start:n=>{},move:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)},end:(n,l)=>{o(l[0][0],l[0][1],n.x,n.y)}}}}var w=v(1999),H=v(4888);const Z=[{name:"tam gi\xe1c vu\xf4ng",type:H.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:H.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:H.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:H.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:H.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:H.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:H.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:H.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:H.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:H.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:H.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:H.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:H.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var lt=v(1281),d=v(2492);class R{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,lt.K)(Math.ceil(1e9*Math.random())),y=(p,h,T,m)=>{l=(0,z.CE)(p,h,T,m,{ratio:1}),l.x=(0,d.z)(l.x),l.y=(0,d.z)(l.y),l.width=(0,d.z)(l.width),l.height=(0,d.z)(l.height),Object.assign(n,(0,z.xW)(w.h.CIRCLE,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:p=>{y(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,h)=>{y(h[0][0],h[0][1],p.x,p.y)},end:(p,h)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,z.xW)(w.h.CIRCLE,l,n)),(0,E.tD)(o,n)),Ot.data.node=Object.assign({id:r,type:w.h.CIRCLE,name:"Circle"},{size:l,attribute:n}),null==i||i.remove()}}}}var b=v(6153);class B{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,b.W)(Math.ceil(1e9*Math.random()));var y=(p,h,T,m)=>{l=(0,z.CE)(p,h,T,m),l.x=(0,d.z)(l.x),l.y=(0,d.z)(l.y),l.width=(0,d.z)(l.width),l.height=(0,d.z)(l.height),Object.assign(n,(0,z.xW)(w.h.ELLIPSE,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:p=>{y(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,h)=>{y(h[0][0],h[0][1],p.x,p.y)},end:(p,h)=>{(l.width<=16||l.height<=16)&&(l.width=90,l.height=60,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,z.xW)(w.h.ELLIPSE,l,n)),(0,E.tD)(o,n)),Ot.data.node=Object.assign({id:r,type:w.h.ELLIPSE,name:"Ellipse"},{size:l,attribute:n}),null==i||i.remove()}}}}var pt=v(7945);class J{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,pt.a)(Math.ceil(1e9*Math.random()));var y=(p,h,T,m)=>{l=(0,z.CE)(p,h,T,m),l.x=(0,d.z)(l.x),l.y=(0,d.z)(l.y),l.width=(0,d.z)(l.width),l.height=(0,d.z)(l.height),Object.assign(n,(0,z.xW)(w.h.RECT,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:p=>{y(p.x,p.y,p.x+l.width,p.y+l.height)},move:(p,h)=>{y(h[0][0],h[0][1],p.x,p.y)},end:(p,h)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,z.xW)(w.h.RECT,l,n)),(0,E.tD)(o,n)),Ot.data.node=Object.assign({id:r,type:w.h.RECT,name:"Rect"},{size:l,attribute:n}),null==i||i.remove()}}}}var gt=v(3477);class Kt{constructor(i){let r=(0,E.RY)(rt.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:n,element:l,attribute:y,size:p}=(0,gt.u)(Math.ceil(1e9*Math.random()));p.ratios=o;var h=(T,m,N,I)=>{p=(0,z.CE)(T,m,N,I,{ratios:o}),p.x=(0,d.z)(p.x),p.y=(0,d.z)(p.y),p.width=(0,d.z)(p.width),p.height=(0,d.z)(p.height),Object.assign(y,(0,z.xW)(w.h.POLYGON,p,y)),(0,E.tD)(l,y),(0,E.in)(r,p)};return{start:T=>{h(T.x,T.y,T.x+p.width,T.y+p.height)},move:(T,m)=>{h(m[0][0],m[0][1],T.x,T.y)},end:(T,m)=>{(p.width<=16||p.height<=16)&&(p.width=80,p.height=80,p.x=p.x-p.width/2,p.y=p.y-p.height/2,Object.assign(y,(0,z.xW)(w.h.POLYGON,p,y)),(0,E.tD)(l,y)),Ot.data.node=Object.assign({id:n,type:w.h.POLYGON,name:"Polygon"},{size:p,attribute:y}),null==r||r.remove()}}}}var dt=v(3069);class V{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l}=(0,dt.q)(Math.ceil(1e9*Math.random()));return{start:p=>{},move:(p,h)=>{((p,h,T,m)=>{l=(0,z.CE)(p,h,T,m),l.x=(0,d.z)(l.x),l.y=(0,d.z)(l.y),l.width=(0,d.z)(l.width),l.height=(0,d.z)(l.height),Object.assign(n,(0,z.xW)(w.h.LINE,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)})(h[0][0],h[0][1],p.x,p.y)},end:(p,h)=>{h.length>=2?((l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,z.xW)(w.h.LINE,l,n)),(0,E.tD)(o,n)),Ot.data.node=Object.assign({id:r,type:w.h.LINE,name:"Line"},{size:l,attribute:n})):null==o||o.remove(),null==i||i.remove()}}}}var It=v(4896),Et=v(6407);class Y{constructor(){let{nodeId:i,element:r,attribute:o,size:n}=(0,Et.X)(Math.ceil(1e9*Math.random())),y="";return{start:h=>{y=`M ${h.x} ${h.y} L ${h.x} ${h.y}`},move:(h,T)=>{((h,T)=>{y+=` ${h} ${T}`,r.setAttribute("d",y)})(h.x,h.y)},end:(h,T)=>{let m=(0,It.CS)(y),{minX:N,minY:I,maxX:mt,maxY:yt}=(0,It.lP)(m);n.x=N,n.y=I,n.width=mt-N||1,n.height=yt-I||1,n.ratioMaps=(0,It.nf)(n,m),Ot.data.node=Object.assign({id:i,type:w.h.PATH,name:"Path"},{size:n,attribute:o})}}}}var Tt=v(745);class ut{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,size:n,attribute:l,style:y,source:p}=(0,Tt.$)(Math.ceil(1e9*Math.random()));var h=(T,m,N,I)=>{n=(0,z.CE)(T,m,N,I),n.x=(0,d.z)(n.x),n.y=(0,d.z)(n.y),n.width=(0,d.z)(n.width),n.height=(0,d.z)(n.height),Object.assign(l,(0,z.xW)(w.h.FOREIGNOBJECT,n,l)),(0,E.tD)(o,l),(0,E.in)(i,n)};return{start:T=>{h(T.x,T.y,T.x+n.width,T.y+n.height)},move:(T,m)=>{h(m[0][0],m[0][1],T.x,T.y)},end:(T,m)=>{(n.width<=16||n.height<=16)&&(n.width=90,n.height=60,n.x=n.x-n.width/2,n.y=n.y-n.height/2,Object.assign(l,(0,z.xW)(w.h.FOREIGNOBJECT,n,l)),(0,E.tD)(o,l)),Ot.data.node=Object.assign({id:r,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:y,source:p}),null==i||i.remove()}}}}var Qt=v(9173);class ne{constructor(){var i,r;let o=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:n,element:l,size:y,attribute:p,source:h}=(0,Qt.B)(Math.ceil(1e9*Math.random())),T=1;(N=>{if(!N)return;let I=new Image;I.onload=()=>{T=(0,d.z)(I.naturalWidth/I.naturalHeight,100)},I.onerror=mt=>{console.error(`ImgSrc load failed -> ${N}`,mt)},I.src=N})(null!==(i=null===(r=h.image)||void 0===r?void 0:r.url)&&void 0!==i?i:"");var m=(N,I,mt,yt)=>{y=(0,z.CE)(N,I,mt,yt,{ratio:T}),y.x=(0,d.z)(y.x),y.y=(0,d.z)(y.y),y.width=(0,d.z)(y.width),y.height=(0,d.z)(y.height),Object.assign(p,(0,z.xW)(w.h.IMAGE,y,p)),(0,E.tD)(l,p),(0,E.in)(o,y)};return{start:N=>{m(N.x,N.y,N.x+y.width,N.y+y.height)},move:(N,I)=>{m(I[0][0],I[0][1],N.x,N.y)},end:(N,I)=>{(y.width<=16||y.height<=16)&&(y.width=80,y.height=80,y.x=y.x-y.width/2,y.y=y.y-y.height/2,Object.assign(p,(0,z.xW)(w.h.IMAGE,y,p)),(0,E.tD)(l,p)),Ot.data.node=Object.assign({id:n,type:w.h.IMAGE,name:"Image"},{size:y,attribute:p,source:h}),null==o||o.remove()}}}}var Ct=v(7135),zt=v(4979);function D(j,i,r,o){return Math.sqrt(Math.pow(r-j,2)+Math.pow(o-i,2))}function W(j,i,r,o,n){return D(j,i,r,o)<n?1:0}function tt(j,i,r,o,n,l,y){var p=[];return p.push(W(j,i,r,o,y)),p.push(W(j,i,n,l,y)),p.push(function s(j,i,r,o,n,l,y){var p=[n-r,l-o],h=[j-r,i-o],T=[-p[1],p[0]],m=Math.sqrt(Math.pow(T[0],2)+Math.pow(T[1],2)),N=[T[0]/m,T[1]/m],I=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),mt=[p[0]/I,p[1]/I],yt=h[0]*mt[0]+h[1]*mt[1];if(yt<=0||yt>=I)return 0;var St=h[0]*N[0]+h[1]*N[1];return St>=y||St<=-y?0:1}(j,i,r,o,n,l,y)),p}function _t(j,i,r,o,n){var l=[r-j,o-i],y=[-l[1],l[0]],p=Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)),h=[y[0]/p,y[1]/p];return[[j+n*h[0],i+n*h[1]],[j-n*h[0],i-n*h[1]],[r-n*h[0],o-n*h[1]],[r+n*h[0],o+n*h[1]]]}function Lt(j,i,r,o,n,l,y){var yt,p=[n-j,l-i],h=[r-j,o-i],T=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)),m=[h[0]/T,h[1]/T],N=p[0]*m[0]+p[1]*m[1],I=[j+N*m[0],i+N*m[1]],mt=Math.sqrt(Math.pow(n-I[0],2)+Math.pow(l-I[1],2));yt=0===mt?y:Math.sqrt(Math.pow(y,2)-Math.pow(mt,2));var St=[j+N*m[0]+yt*m[0],i+N*m[1]+yt*m[1]];return St[0]===j&&St[1]===i?null:St}function Dt(j,i,r,o,n,l,y){var p=[n-j,l-i],h=[r-j,o-i],T=[-h[1],h[0]],m=Math.sqrt(Math.pow(T[0],2)+Math.pow(T[1],2)),N=[T[0]/m,T[1]/m],I=p[0]*N[0]+p[1]*N[1],mt=st([j,i],[r,o],[n,l]);if(re([mt[0]-n,mt[1]-l])>=y)return null;var St=Math.sqrt(Math.pow(y,2)-Math.pow(I,2)),Ft=[n-I*N[0],l-I*N[1]],Zt=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)),_e=[h[0]/Zt,h[1]/Zt],xe=[[Ft[0]-_e[0]*St,Ft[1]-_e[1]*St],[Ft[0]+_e[0]*St,Ft[1]+_e[1]*St]];return xe[0][0]===j&&xe[0][1]===i?null:xe}function Bt(j,i,r,o,n,l,y,p){var h,T,m,N,I,mt;return-(m=y-n)*(T=o-i)+(h=r-j)*(N=p-l)==0?null:(mt=(m*(i-l)-N*(j-n))/(-m*T+h*N),(I=(-T*(j-n)+h*(i-l))/(-m*T+h*N))>=0&&I<=1&&mt>=0&&mt<=1?[j+mt*h,i+mt*T]:null)}function Wt(j,i,r,o,n,l,y,p,h,T){var m=_t(l,y,p,h,T),N=[];if(r[0]&&!r[1])N.push(Lt(j,i,o,n,l,y,T)),N.push(Bt(j,i,o,n,m[0][0],m[0][1],m[3][0],m[3][1])),N.push(Bt(j,i,o,n,m[1][0],m[1][1],m[2][0],m[2][1])),(I=Dt(j,i,o,n,p,h,T))&&N.push(I[0],I[1]);else if(!r[0]&&r[1])N.push(Lt(j,i,o,n,p,h,T)),N.push(Bt(j,i,o,n,m[0][0],m[0][1],m[3][0],m[3][1])),N.push(Bt(j,i,o,n,m[1][0],m[1][1],m[2][0],m[2][1])),(I=Dt(j,i,o,n,l,y,T))&&N.push(I[0],I[1]);else if(r[0]&&r[1])N.push(Lt(j,i,o,n,l,y,T)),N.push(Bt(j,i,o,n,m[0][0],m[0][1],m[3][0],m[3][1])),N.push(Bt(j,i,o,n,m[1][0],m[1][1],m[2][0],m[2][1])),N.push(Lt(j,i,o,n,p,h,T));else{var I=Dt(j,i,o,n,p,h,T),mt=Dt(j,i,o,n,l,y,T);I&&N.push(I[0],I[1]),mt&&N.push(mt[0],mt[1]),N.push(Bt(j,i,o,n,m[0][0],m[0][1],m[3][0],m[3][1])),N.push(Bt(j,i,o,n,m[1][0],m[1][1],m[2][0],m[2][1]))}for(var yt=[j,i],St=0;St<N.length;St++)N[St]&&D(N[St][0],N[St][1],o,n)<D(yt[0],yt[1],o,n)&&(yt=N[St]);return yt[0]===j&&yt[1]===i?null:yt}function Vt(j,i,r,o,n,l,y,p,h){var T=_t(n,l,y,p,h),m=[],N=Dt(j,i,r,o,n,l,h);N&&m.push(N[0],N[1]),(N=Dt(j,i,r,o,y,p,h))&&m.push(N[0],N[1]),m.push(Bt(j,i,r,o,T[0][0],T[0][1],T[3][0],T[3][1])),m.push(Bt(j,i,r,o,T[1][0],T[1][1],T[2][0],T[2][1]));for(var I=[r,o],mt=[j,i],yt=0;yt<m.length;yt++)m[yt]&&D(m[yt][0],m[yt][1],j,i)<D(I[0],I[1],j,i)&&(I=m[yt]);for(var St=0;St<m.length;St++)m[St]&&D(m[St][0],m[St][1],r,o)<D(mt[0],mt[1],r,o)&&(mt=m[St]);return I[0]===r&&I[1]===o||mt[0]===j&&mt[1]===i?null:[I,mt]}var re=function(j){return Math.sqrt(j[0]*j[0]+j[1]*j[1])},st=function(j,i,r){var o=[i[0]-j[0],i[1]-j[1]],n=re(o);if(n<1e-6)return j;var l=[r[0]-j[0],r[1]-j[1]],y=(o[0]*l[0]+o[1]*l[1])/n;return y<0?j:y>n?i:[j[0]+o[0]*y/n,j[1]+o[1]*y/n]};class Xt{constructor(){let{element:o,size:l}=(0,Et.X)(Math.ceil(1e9*Math.random()));(0,E.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let y="";return{start:T=>{y=`M ${T.x} ${T.y} L ${T.x} ${T.y}`},move:(T,m)=>{((T,m)=>{y+=` ${T} ${m}`,o.setAttribute("d",y)})(T.x,T.y)},end:(T,m)=>{o.remove(),(T=>{let m=9999,N=9999,I=-9999,mt=-9999;T.forEach(St=>{m=Math.min(m,St[0]),N=Math.min(N,St[1]),I=Math.max(I,St[0]),mt=Math.max(mt,St[1])}),l=(0,z.CE)(m,N,I,mt,{points:T}),Ot.data.getNodeInArea(0,0,1920,1920,w.h.PATH).forEach(St=>{let Zt=((j,i,r)=>{r=r||20;var o=[],n=function(m){var N=i[0][0],I=i[0][1],mt=0,yt=0;if(1!==m.length||W(m[0][0],m[0][1],N,I,r)){for(var St;mt<m.length-1;){var Ft=m[mt],Zt=m[mt+1],_e=W(Ft[0],Ft[1],N,I,r),xe=W(Zt[0],Zt[1],N,I,r);if(_e&&xe)yt=++mt;else if(_e&&!xe)(be=Lt(Ft[0],Ft[1],Zt[0],Zt[1],N,I,r))?(m[mt]=be,yt=mt):mt++;else if(!_e&&xe){var be;(be=Lt(Zt[0],Zt[1],Ft[0],Ft[1],N,I,r))&&((St=m.slice(yt,mt+1)).push(be),o.push(St)),yt=++mt}else{var Oe=Dt(Ft[0],Ft[1],Zt[0],Zt[1],N,I,r);Oe?(((St=m.slice(yt,mt+1))[St.length-1][0]!==Oe[0][0]||St[St.length-1][1]!==Oe[0][1])&&St.push(Oe[0]),St.length>1&&o.push(St),m[mt]=Oe[1],m[mt+1]&&m[mt+1][0]==Oe[1][0]&&m[mt+1][1]==Oe[1][1]&&mt++,yt=mt):mt++}}yt!==mt&&(St=m.slice(yt,m.length))&&o.push(St)}else o.push(m)},l=function(m,N){var Zt,I=i[N],mt=i[N+1],yt=0,St=0;if(1!==m.length||-1!==(Ft=tt(m[0][0],m[0][1],I[0],I[1],mt[0],mt[1],r)).indexOf(1)){for(;yt<m.length-1;){var _e=m[yt],xe=m[yt+1],Ft=tt(_e[0],_e[1],I[0],I[1],mt[0],mt[1],r),be=tt(xe[0],xe[1],I[0],I[1],mt[0],mt[1],r);if(-1!==Ft.indexOf(1)&&-1!==be.indexOf(1))St=++yt;else if(-1!==Ft.indexOf(1)&&-1===be.indexOf(1))(Oe=Wt(_e[0],_e[1],Ft,xe[0],xe[1],I[0],I[1],mt[0],mt[1],r))?(m[yt]=Oe,St=yt):yt++;else if(-1===Ft.indexOf(1)&&-1!==be.indexOf(1)){var Oe;(Oe=Wt(xe[0],xe[1],be,_e[0],_e[1],I[0],I[1],mt[0],mt[1],r))?((Zt=m.slice(St,yt+1)).push(Oe),o.push(Zt),St=++yt):yt++}else{var Ie=Vt(_e[0],_e[1],xe[0],xe[1],I[0],I[1],mt[0],mt[1],r);Ie?(((Zt=m.slice(St,yt+1))[Zt.length-1][0]!==Ie[0][0]||Zt[Zt.length-1][1]!==Ie[0][1])&&Zt.push(Ie[0]),Zt.length>1&&o.push(Zt),m[yt]=Ie[1],m[yt+1]&&m[yt+1][0]==Ie[1][0]&&m[yt+1][1]==Ie[1][1]&&yt++,St=yt):yt++}}St!==yt&&(Zt=m.slice(St,m.length))&&o.push(Zt)}else o.push(m)};if(i=function wt(j){var i=[];if(1===j.length)i=j;else{for(var r=0;r<j.length-1;)(j[r][0]!==j[r+1][0]||j[r][1]!==j[r+1][1])&&i.push(j[r]),r++;0!==j.length&&0===i.length&&i.push(j[0]),(j[j.length-1][0]!==j[i.length-1][0]||j[j.length-1][1]!==j[i.length-1][1])&&i.push(j[r])}return i}(i),1===i.length){for(var y=0;y<j.length;y++)n(j[y]);j=o}else for(var p=0;p<i.length-1;p++){for(y=0;y<j.length;y++)l(j[y],p);j=o,o=[]}for(var h=0;h<j.length;h++)for(var T=0;T<j[h].length;T++)j[h][T][0]=Math.round(j[h][T][0]),j[h][T][1]=Math.round(j[h][T][1]);return j})(Ot.data.getNode(St).size.points,T,2);console.log(Zt)})})(m)}}}}var c=v(6847);class M{constructor(){let i=(0,E.RY)(rt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:l,source:y}=(0,c.L)(Math.ceil(1e9*Math.random())),p=(h,T,m,N)=>{l=(0,z.CE)(h,T,m,N),l.x=(0,d.z)(l.x),l.y=(0,d.z)(l.y),l.width=(0,d.z)(l.width),l.height=(0,d.z)(l.height),Object.assign(n,(0,z.xW)(w.h.TEXT,l,n)),(0,E.tD)(o,n),(0,E.in)(i,l)};return{start:h=>{p(h.x,h.y,h.x+l.width,h.y+l.height)},move:(h,T)=>{p(T[0][0],T[0][1],h.x,h.y)},end:(h,T)=>{(l.width<=16||l.height<=16)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(n,(0,z.xW)(w.h.TEXT,l,n)),(0,E.tD)(o,n)),Ot.data.node=Object.assign({id:r,type:w.h.TEXT,name:"Text"},{size:l,attribute:n,source:y}),null==i||i.remove()}}}}var _=v(4312),F=v(2409),et=v(6078);var xt=v(3073);class bt{constructor(){this._nodeName=["circle","ellipse","line","polygon","polyline","rect","text","tspan","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>Ot.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var r,o,n,l,y;null===(r=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(o=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===o||o.remove(),null===(n=window.document.getElementById(rt.F.SCAN_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(rt.F.CREATE_GROUP))||void 0===l||l.remove(),null===(y=window.document.getElementById(rt.F.INTERACTIVE_GROUP))||void 0===y||y.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(p=>p(i))}deleteNode(){for(let i of this._selected_Ids){let r=Ot.data.deleteNode(i);Ot.history.push([{type:"delete",from:{id:r},to:{id:r}}])}Ot.dataSelect.ids=[]}groupNode(){let i=[];if(Ot.dataSelect.ids.length>=2){let r=Ot.data.getNode(Ot.dataSelect.ids[0]),{nodeId:o,attribute:n,size:l}=(0,xt.v)(Math.ceil(1e9*Math.random()),void 0,r.pid?window.document.getElementById(r.pid):null);Ot.data.node=Object.assign({id:o,type:w.h.GROUP,name:"G"},{size:l,attribute:n});for(let y of Ot.dataSelect.ids)i.push(Ot.data.addGroup(y,o))}i.length&&(Ot.dataSelect.ids=i,(0,C.D)(Ot.dataSelect.nodes))}ungroupNode(){let i=[];for(let r of Ot.dataSelect.ids)i.push(Ot.data.unGroup(r));i.length&&(Ot.dataSelect.ids=i,(0,C.D)(Ot.dataSelect.nodes))}}var X=v(2837),ht=v(8338);class kt{createNodeImage(i,r){var o,n,l,y;let{nodeId:h,element:T,size:m,attribute:N,source:I}=(0,Qt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,X.U)(i)}});(mt=>{if(!mt)return;let yt=new Image;yt.onload=()=>{let St=(0,d.z)(yt.naturalWidth/yt.naturalHeight,100);St>=1?(m.width=Math.min(yt.naturalWidth,512),m.height=(0,d.z)(m.width/St,100)):(m.height=Math.min(yt.naturalHeight,512),m.width=(0,d.z)(m.height*St,100)),m.x=(0,d.z)(m.x+50-m.width/2,100),m.y=(0,d.z)(m.y+50-m.height/2,100),Object.assign(N,(0,z.xW)(w.h.IMAGE,m,N)),(0,E.tD)(T,N),Ot.data.node=Object.assign({id:h,type:w.h.IMAGE,name:"Image"},{size:m,attribute:N,source:I})},yt.onerror=St=>{console.error(`ImgSrc load failed -> ${mt}`,St),null==T||T.remove()},yt.src=mt})(null!==(l=null===(y=I.image)||void 0===y?void 0:y.url)&&void 0!==l?l:"")}createNodeIframe(i,r){var o,n;let{nodeId:y,element:p,size:h,attribute:T,style:m,source:N}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,X.U)(i)}});(I=>{let mt=(null===(I=Ot.data.slide)||void 0===I||null===(I=I.svg)||void 0===I?void 0:I.viewBox)||{x:0,y:0,width:100,height:100},yt=(0,d.z)(mt.width/mt.height,100);yt>=1?(h.width=Math.min(mt.width,512),h.height=(0,d.z)(h.width/yt,100)):(h.height=Math.min(mt.height,512),h.width=(0,d.z)(h.height*yt,100)),h.x=(0,d.z)(h.x+50-h.width/2,100),h.y=(0,d.z)(h.y+50-h.height/2,100),Object.assign(T,(0,z.xW)(w.h.IMAGE,h,T)),(0,E.tD)(p,T),Ot.data.node=Object.assign({id:y,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:T,style:m,source:N})})()}createNodeEmbed(i,r){var o,n;let l={x:50,y:50,width:640,height:360};i.type==ht.S.AUDIO&&(l.width=480,l.height=80);let{nodeId:y,element:p,size:h,attribute:T,style:m,source:N}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:l.x)-l.x,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:l.y)-l.y,width:l.width,height:l.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,X.U)(i))}});(()=>{let I=(0,d.z)(l.width/l.height,100);I>=1?(h.width=Math.min(h.width,l.width),h.height=(0,d.z)(h.width/I,1)):(h.height=Math.min(h.height,l.height),h.width=(0,d.z)(h.height*I,1)),h.x=(0,d.z)(h.x+l.x-h.width/2,1),h.y=(0,d.z)(h.y+l.y-h.height/2,1),Object.assign(T,(0,z.xW)(w.h.FOREIGNOBJECT,h,T)),(0,E.tD)(p,T),Ot.data.node=Object.assign({id:y,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:T,style:m,source:N})})()}createNodeMedia(i,r){var o,n,l,y;let{nodeId:h,element:T,size:m,attribute:N,source:I}=(0,Qt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,X.U)(i.cover)}}),mt={click:{media:i.media}};(yt=>{if(!yt)return;let St=new Image;St.onload=()=>{let Ft=(0,d.z)(St.naturalWidth/St.naturalHeight,100);Ft>=1?(m.width=Math.min(St.naturalWidth,512),m.height=(0,d.z)(m.width/Ft,100)):(m.height=Math.min(St.naturalHeight,512),m.width=(0,d.z)(m.height*Ft,100)),m.x=(0,d.z)(m.x+50-m.width/2,100),m.y=(0,d.z)(m.y+50-m.height/2,100),Object.assign(N,(0,z.xW)(w.h.IMAGE,m,N)),(0,E.tD)(T,N),Ot.data.node=Object.assign({id:h,type:w.h.IMAGE,name:"Image"},{size:m,attribute:N,source:I,interactive:mt})},St.onerror=Ft=>{console.error(`ImgSrc load failed -> ${yt}`,Ft),null==T||T.remove()},St.src=yt})(null!==(l=null===(y=I.image)||void 0===y?void 0:y.url)&&void 0!==l?l:"")}createNodeText(i,r){var o,n;let{nodeId:y,element:p,size:h,attribute:T,style:m,source:N}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:0)-0,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let I=(0,d.z)(4,100);I>=1?(h.width=Math.min(h.width,320),h.height=(0,d.z)(h.width/I,1)):(h.height=Math.min(h.height,80),h.width=(0,d.z)(h.height*I,1)),h.x=(0,d.z)(h.x+0-h.width/2,1),h.y=(0,d.z)(h.y+0-h.height/2,1),Object.assign(T,(0,z.xW)(w.h.FOREIGNOBJECT,h,T)),(0,E.tD)(p,T),Ot.data.node=Object.assign({id:y,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:T,style:m,source:N})})()}insert(i){var r;if(Ot.data.insertSlide(Ot.data.slideId,1),i.title){let{nodeId:o,size:n,attribute:l,style:y,source:p}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});Ot.data.node=Object.assign({id:o,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:y,source:p})}if(i.description){let{nodeId:o,size:n,attribute:l,style:y,source:p}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});Ot.data.node=Object.assign({id:o,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:l,style:y,source:p})}null!==(r=i.media)&&void 0!==r&&r.prompt&&((()=>{let{nodeId:o,size:n,attribute:l}=(0,pt.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});Ot.data.node=Object.assign({id:o,type:w.h.RECT,name:"Rect"},{size:n,attribute:l})})(),(o=>{let{nodeId:n,size:l,attribute:y,style:p,source:h}=(0,Tt.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});Ot.data.node=Object.assign({id:n,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:l,attribute:y,style:p,source:h})})())}}var Pt=v(1026);class Gt{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:Ot.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let r=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,y)=>y==this._slideIdx),o=null==r?void 0:r.svg,n=l=>{let y=[];return l.filter(p=>!p.isdeleted).forEach(p=>{p.type==w.h.GROUP?y=y.concat(n(p.nodes||[])):y.push(p.id)}),y};return n((null==o?void 0:o.nodes)||[])}}get get(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(y=>y.type==w.h.GROUP).forEach(y=>{var p;y.nodes=r(null===(p=y.nodes)||void 0===p?void 0:p.filter(h=>!h.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(y=>{var p,h;return y.type!=w.h.GROUP||(null!==(p=null===(h=y.nodes)||void 0===h?void 0:h.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource}get getResource(){var i;let r=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n,l,y,p,h,T,m,N;r.push(null===(n=o.svg)||void 0===n||null===(n=n.background)||void 0===n?void 0:n.path),null===(l=o.svg)||void 0===l||l.nodes.forEach(I=>{var mt,yt,St,Ft,Zt,_e,xe,be,Oe,Ie;r.push(null===(mt=I.source)||void 0===mt||null===(mt=mt.image)||void 0===mt?void 0:mt.path),r.push(null===(yt=I.source)||void 0===yt||null===(yt=yt.audio)||void 0===yt?void 0:yt.path),r.push(null===(St=I.source)||void 0===St||null===(St=St.video)||void 0===St?void 0:St.path),r.push(null===(Ft=I.source)||void 0===Ft||null===(Ft=Ft.file)||void 0===Ft?void 0:Ft.path),r.push(null===(Zt=I.source)||void 0===Zt||null===(Zt=Zt.iframe)||void 0===Zt?void 0:Zt.path),r.push(null===(_e=I.source)||void 0===_e||null===(_e=_e.track)||void 0===_e?void 0:_e.path),r.push(null===(xe=I.interactive)||void 0===xe||null===(xe=xe.show)||void 0===xe||null===(xe=xe.audio)||void 0===xe||null===(xe=xe.source)||void 0===xe?void 0:xe.path),r.push(null===(be=I.interactive)||void 0===be||null===(be=be.click)||void 0===be||null===(be=be.audio)||void 0===be||null===(be=be.source)||void 0===be?void 0:be.path),r.push(null===(Oe=I.interactive)||void 0===Oe||null===(Oe=Oe.click)||void 0===Oe||null===(Oe=Oe.image)||void 0===Oe||null===(Oe=Oe.source)||void 0===Oe?void 0:Oe.path),r.push(null===(Ie=I.interactive)||void 0===Ie||null===(Ie=Ie.click)||void 0===Ie||null===(Ie=Ie.video)||void 0===Ie||null===(Ie=Ie.source)||void 0===Ie?void 0:Ie.path)}),r.push(null===(y=o.test)||void 0===y||null===(y=y.audiotrue)||void 0===y?void 0:y.path),r.push(null===(p=o.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),r.push(null===(h=o.test)||void 0===h||null===(h=h.effecttrue)||void 0===h?void 0:h.path),r.push(null===(T=o.test)||void 0===T||null===(T=T.effectfalse)||void 0===T?void 0:T.path),r.push(null===(m=o.test)||void 0===m||null===(m=m.icontrue)||void 0===m?void 0:m.path),r.push(null===(N=o.test)||void 0===N||null===(N=N.iconfalse)||void 0===N?void 0:N.path)}),r.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,n,l)=>l.indexOf(o)==n)}get getFonts(){let i=[];return[/font-family:([a-zA-Z-_' ]+)/g,/"fontFamily":"([a-zA-Z-_']+)"/g].forEach(r=>{i=[...i,...((o,n,l)=>null!==(o=null===(n=JSON.stringify(null!==(l=this._dataSource.slides)&&void 0!==l?l:[]).match(r))||void 0===n?void 0:n.filter((y,p,h)=>h.indexOf(y)==p).map(y=>y.replace(r,"$1").replace(/[^a-zA-Z-_ ]/g,"").trim()).filter((y,p,h)=>y&&h.indexOf(y)==p))&&void 0!==o?o:[])()]}),i.filter((r,o,n)=>n.indexOf(r)==o)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let r=o=>{var n,l;return null===(n=o)||void 0===n||n.filter(y=>y.type==w.h.GROUP).forEach(y=>{var p;y.nodes=r(null===(p=y.nodes)||void 0===p?void 0:p.filter(h=>!h.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(y=>{var p,h;return y.type!=w.h.GROUP||(null!==(p=null===(h=y.nodes)||void 0===h?void 0:h.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(l=>!l.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,E.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,r;return null!==(i=null===(r=this.slide)||void 0===r?void 0:r.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((r,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,r;this._slideIdx<(null!==(i=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,E.rN)(),(0,Pt.t)(this.slide)}openSlide(i,r){var o,n,l,y,p;if(i)for(let I=0,mt=null!==(h=null===(T=this._dataSource.slides)||void 0===T?void 0:T.length)&&void 0!==h?h:0;I<mt;I++){var h,T,m;if((null!==(m=this._dataSource.slides)&&void 0!==m?m:[])[I].id==i){this._slideIdx=I;break}}else if(r&&r>=0&&r<(null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==o?o:0))this._slideIdx=null!=r?r:0;else{var N;this._slideIdx=0,null!==(N=this._dataSource.slides)&&void 0!==N&&N.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,E.rN)(),null!==(l=this.slide)&&void 0!==l&&null!==(l=l.svg)&&void 0!==l&&l.viewBox&&(Ot.screen.frameSize=this.slide.svg.viewBox),(0,Pt.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(y=null===(p=this._dataSource.slides)||void 0===p?void 0:p.length)&&void 0!==y?y:0,this.slide)}addSlide(){var i,r,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==r?r:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,r,o){var n,l,y,p,h;let T=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(N=>N.id==i);if(!o||!T||null!=T&&null!==(l=T.svg)&&void 0!==l&&l.nodes.filter(N=>!N.isdeleted).length)return this.insertSlide(i,r,o);let m=null!==(y=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(T))&&void 0!==y?y:0;null===(h=this._dataSource.slides)||void 0===h||h.splice(m,1,o),this._slideIdx=m,this.openSlide(void 0,this._slideIdx)}insertSlide(i,r,o){var n,l,y,p,h;let T=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(I=>I.id==i))&&void 0!==n?n:this._defaultSlide,m=(null!==(y=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(T))&&void 0!==y?y:0)+r;var N;o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(N=o.svg)&&void 0!==N&&N.viewBox||o.svg&&(o.svg.viewBox=Ot.screen.frameSize)):o=this._defaultSlide,null===(h=this._dataSource.slides)||void 0===h||h.splice(m,0,o),this._slideIdx=m,this.openSlide(void 0,this._slideIdx)}copySlide(i){var r,o,n,l,y,p,h;let T=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(I=>I.id==i))&&void 0!==r?r:this._defaultSlide,m=(null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(T))&&void 0!==n?n:0)+1,N=Object.assign(JSON.parse(JSON.stringify(T)),{id:this.newSlideId,code:void 0,name:`${T.name} + (Copy)`});null===(y=this._dataSource.slides)||void 0===y||y.splice(m,0,N),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(h=this._dataSource.slides)||void 0===h?void 0:h.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,r){var o,n,l,y,p,h;let T=null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(N=>N.id==i))&&void 0!==o?o:this._defaultSlide,m=null!==(l=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(T))&&void 0!==l?l:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(m+r,0,null===(h=this._dataSource.slides)||void 0===h?void 0:h.splice(m,1)[0])}deleteSlide(i){var r,o,n,l,y,p;let h=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(I=>I.id==i))&&void 0!==r?r:this._defaultSlide,T=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(h))&&void 0!==n?n:0;if(null===(y=this._dataSource.slides)||void 0===y||y.splice(T,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(T<this._slideIdx){var m,N;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(N=this._dataSource.slides)||void 0===N?void 0:N.length)&&void 0!==m?m:0,this.slide)}else T==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var r,o,n,l,y;let p=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(T=>T.id==i))&&void 0!==r?r:this._defaultSlide,h=null!==(n=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(p))&&void 0!==n?n:0;if(p.isdeleted=!0,null!==(y=this._dataSource.slides)&&void 0!==y&&null!==(y=y.filter(T=>!T.isdeleted))&&void 0!==y&&y.length){let T=!0;for(;p.isdeleted;)T?h++:h--,this._dataSource.slides[h]?p=this._dataSource.slides[h]:T=!T;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,r,o,n){this._fnChangeSlides.forEach(l=>l(i,r,o,n))}set node(i){var r,o;let n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((l,y)=>y==this._slideIdx);null!=n&&null!==(o=n.svg)&&void 0!==o&&o.nodes&&n.svg.nodes.push(i),Ot.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Pt.t)(n),(0,Pt.t)(n,null==n?void 0:n.id)}findNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((I,mt)=>mt==this._slideIdx),n=null==o?void 0:o.svg,l=(I,mt)=>{let yt=null==I?void 0:I.find(Zt=>Zt.id==i);if(yt)return yt.pid=mt,yt;let St=0,Ft=I.length||0;for(;St<Ft&&!yt&&(yt=l(I[St].nodes||[],I[St].id),!yt);)St++;return yt},y=l((null==n?void 0:n.nodes)||[]);var p,h,T,m,N;return y?(y.style=null!==(p=y.style)&&void 0!==p?p:{},y.source=null!==(h=y.source)&&void 0!==h?h:{},y.animate=null!==(T=y.animate)&&void 0!==T?T:{},y.interactive=null!==(m=y.interactive)&&void 0!==m?m:{},y.variable=null!==(N=y.variable)&&void 0!==N?N:{},y):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((p,h)=>h==this._slideIdx),n=null==o?void 0:o.svg,y=p=>{let h=(null==p?void 0:p.find(yt=>yt.id==i))||(p=>{let h=null,T=0,m=p.length||0;for(;T<m&&!h;){if(h=y(p[T].nodes),h){h.pid=p[T].id;break}T++}var N,I,mt,yt,St;return h&&(h.style=null!==(N=h.style)&&void 0!==N?N:{},h.source=null!==(I=h.source)&&void 0!==I?I:{},h.animate=null!==(mt=h.animate)&&void 0!==mt?mt:{},h.interactive=null!==(yt=h.interactive)&&void 0!==yt?yt:{},h.variable=null!==(St=h.variable)&&void 0!==St?St:{}),h})((null==p?void 0:p.filter(yt=>yt.type==w.h.GROUP))||[]);var T,m,N,I,mt;return h&&(h.style=null!==(T=h.style)&&void 0!==T?T:{},h.source=null!==(m=h.source)&&void 0!==m?m:{},h.animate=null!==(N=h.animate)&&void 0!==N?N:{},h.interactive=null!==(I=h.interactive)&&void 0!==I?I:{},h.variable=null!==(mt=h.variable)&&void 0!==mt?mt:{}),h};return y((null==n?void 0:n.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,r,o,n,l){var y;let p=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((m,N)=>N==this._slideIdx),h=null==p?void 0:p.svg,T=m=>{let N=[];return m.filter(I=>!I.isdeleted).forEach(I=>{I.type==w.h.GROUP?N=N.concat(T(I.nodes||[])):i>I.size.x||r>I.size.y||o<I.size.x+I.size.width||n<I.size.y+I.size.height||(l?I.type==l&&N.push(I.id):N.push(I.id))}),N};return T((null==h?void 0:h.nodes)||[])}getNodeOnArea(i,r,o,n,l){var y;let p=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((m,N)=>N==this._slideIdx),h=null==p?void 0:p.svg,T=m=>{let N=[];return m.filter(I=>!I.isdeleted).forEach(I=>{I.type==w.h.GROUP?N=N.concat(T(I.nodes||[])):I.size.x+I.size.width<i||I.size.y+I.size.height<r||I.size.x>o||I.size.y>n||(l?I.type==l&&N.push(I.id):N.push(I.id))}),N};return T((null==h?void 0:h.nodes)||[])}deleteNode(i,r){var o;return this.getNode(i).isdeleted=null==r||r,(0,Pt.t)(this.slide),(0,Pt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var r,o;let n=this.getNode(i),l=Math.ceil(1e9*Math.random());return null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:l})),Object.assign(n,{isdeleted:!0}),(0,Pt.t)(this.slide),(0,Pt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),l}addGroup(i,r){var o;let n=this.getNode(i),l=this.getNode(r);l.nodes=l.nodes||[];let y=Math.ceil(1e9*Math.random());return l.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:y})),Object.assign(n,{isdeleted:!0}),(0,Pt.t)(this.slide),(0,Pt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),y}setNodeP(i,r){var o;let n=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(l=>l.id==i);n&&(n.pid=r||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,r){var o,n,l,y,p,h;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((m,N)=>{m.index=N+1});let T=(null!==(n=null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l?void 0:l.nodes.length)&&void 0!==n?n:0)+1;i.map(m=>{var N,I;return{id:m,index:null!==(N=null===(I=this.slide)||void 0===I||null===(I=I.svg)||void 0===I||null===(I=I.nodes.find(mt=>mt.id==m))||void 0===I?void 0:I.index)&&void 0!==N?N:0}}).sort((m,N)=>m.index-N.index).forEach(m=>{var I,N;r?null===(I=this.slide)||void 0===I||null===(I=I.svg)||void 0===I||I.nodes.filter((mt,yt)=>mt.id==m.id).forEach(mt=>{mt.index=r+m.index+m.index/1e3}):null===(N=this.slide)||void 0===N||null===(N=N.svg)||void 0===N||N.nodes.filter(mt=>mt.id==m.id).forEach(mt=>{mt.index=T+m.index})}),null===(y=this.slide)||void 0===y||null===(y=y.svg)||void 0===y||y.nodes.sort((m,N)=>{var I,mt;return(null!==(I=m.index)&&void 0!==I?I:0)-(null!==(mt=N.index)&&void 0!==mt?mt:0)}),(0,Pt.$)(this.slide),null===(p=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===p||p.remove(),null===(h=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===h||h.remove(),(0,C.D)(Ot.dataSelect.nodes)}sendToBackStep(i,r){var o,n,l,y;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((p,h)=>{p.index=h+1}),i.map(p=>{var h,T;return{id:p,index:null!==(h=null===(T=this.slide)||void 0===T||null===(T=T.svg)||void 0===T||null===(T=T.nodes.find(m=>m.id==p))||void 0===T?void 0:T.index)&&void 0!==h?h:0}}).sort((p,h)=>p.index-h.index).forEach(p=>{var T,h;r?null===(T=this.slide)||void 0===T||null===(T=T.svg)||void 0===T||T.nodes.filter(m=>m.id==p.id).forEach(m=>{m.index=r+p.index+p.index/1e3}):null===(h=this.slide)||void 0===h||null===(h=h.svg)||void 0===h||h.nodes.filter(m=>m.id==p.id).forEach(m=>{m.index=p.index/100-1})}),null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.sort((p,h)=>{var T,m;return(null!==(T=p.index)&&void 0!==T?T:0)-(null!==(m=h.index)&&void 0!==m?m:0)}),(0,Pt.$)(this.slide),null===(l=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===l||l.remove(),null===(y=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===y||y.remove(),(0,C.D)(Ot.dataSelect.nodes)}bringToFrontArea(i){var r,o,n,l;let y=i.map(yt=>Ot.data.getNode(yt)).filter(yt=>!yt.isfake),{x1:p,y1:h,x2:T,y2:m}=qt(y),N=this.getNodeOnArea(p,h,T,m);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((yt,St)=>{yt.index=St+1});let I=N.map(yt=>{var St,Ft;return null!==(St=null===(Ft=this.slide)||void 0===Ft||null===(Ft=Ft.svg)||void 0===Ft||null===(Ft=Ft.nodes.find(Zt=>Zt.id==yt))||void 0===Ft?void 0:Ft.index)&&void 0!==St?St:0}),mt=Math.max.apply(null,I);i.forEach((yt,St)=>{var Ft;null===(Ft=this.slide)||void 0===Ft||null===(Ft=Ft.svg)||void 0===Ft||Ft.nodes.filter(Zt=>Zt.id==yt).forEach(Zt=>{Zt.index=mt+(St+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((yt,St)=>{var Ft,Zt;return(null!==(Ft=yt.index)&&void 0!==Ft?Ft:0)-(null!==(Zt=St.index)&&void 0!==Zt?Zt:0)}),(0,Pt.$)(this.slide),null===(n=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===l||l.remove(),(0,C.D)(Ot.dataSelect.nodes)}sendToBackArea(i){var r,o,n,l;let y=i.map(yt=>Ot.data.getNode(yt)).filter(yt=>!yt.isfake),{x1:p,y1:h,x2:T,y2:m}=qt(y),N=this.getNodeOnArea(p,h,T,m);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((yt,St)=>{yt.index=St+1});let I=N.map(yt=>{var St,Ft;return null!==(St=null===(Ft=this.slide)||void 0===Ft||null===(Ft=Ft.svg)||void 0===Ft||null===(Ft=Ft.nodes.find(Zt=>Zt.id==yt))||void 0===Ft?void 0:Ft.index)&&void 0!==St?St:0}),mt=Math.min.apply(null,I)-1;i.forEach((yt,St)=>{var Ft;null===(Ft=this.slide)||void 0===Ft||null===(Ft=Ft.svg)||void 0===Ft||Ft.nodes.filter(Zt=>Zt.id==yt).forEach(Zt=>{Zt.index=mt+(St+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((yt,St)=>{var Ft,Zt;return(null!==(Ft=yt.index)&&void 0!==Ft?Ft:0)-(null!==(Zt=St.index)&&void 0!==Zt?Zt:0)}),(0,Pt.$)(this.slide),null===(n=window.document.getElementById(rt.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(l=window.document.getElementById(rt.F.SELECT_GROUP))||void 0===l||l.remove(),(0,C.D)(Ot.dataSelect.nodes)}}const qt=j=>{let i=999999,r=999999,o=-999999,n=-999999;return j.forEach(l=>{i=Math.min(i,l.size.x),r=Math.min(r,l.size.y),o=Math.max(o,l.size.x+l.size.width),n=Math.max(n,l.size.y+l.size.height)}),{x1:i,y1:r,x2:o,y2:n}};class ie{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":Ot.data.deleteNode(r.from.id);break;case"edit":break;case"delete":Ot.data.deleteNode(r.from.id,!1);break;case"size":{let{id:o,type:n,size:l,attribute:y}=Ot.data.getNode(r.from.id);Object.assign(l,r.from.size),Object.assign(y,(0,z.xW)(n,l,y)),(0,E.tD)(window.document.getElementById(o),y);break}case"attribute":{let{id:o,attribute:n}=Ot.data.getNode(r.from.id);Object.assign(n,r.from.attribute),(0,E.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=Ot.data.getNode(r.from.id);Object.assign(null!=n?n:{},r.from.style),(0,E.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=Ot.data.getNode(r.from.id);Object.assign(null!=l?l:{},r.from.source),(0,E.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=Ot.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.animate);break}case"interactive":{let{interactive:o}=Ot.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.interactive);break}case"variable":{let{variable:o}=Ot.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.variable);break}}}),Ot.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":Ot.data.deleteNode(r.to.id,!1);break;case"edit":break;case"delete":Ot.data.deleteNode(r.to.id,!0);break;case"size":{let{id:o,type:n,size:l,attribute:y}=Ot.data.getNode(r.to.id);Object.assign(l,r.to.size),Object.assign(y,(0,z.xW)(n,l,y)),(0,E.tD)(window.document.getElementById(o),y);break}case"attribute":{let{id:o,attribute:n}=Ot.data.getNode(r.to.id);Object.assign(n,r.to.attribute),(0,E.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=Ot.data.getNode(r.to.id);Object.assign(null!=n?n:{},r.to.style),(0,E.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:l}=Ot.data.getNode(r.to.id);Object.assign(null!=l?l:{},r.to.source),(0,E.KG)(window.document.getElementById(o),n,null!=l?l:{});break}case"animate":{let{animate:o}=Ot.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.animate);break}case"interactive":{let{interactive:o}=Ot.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.interactive);break}case"variable":{let{variable:o}=Ot.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.variable);break}}}),Ot.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class ye{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var r,o;this._frameSize.width=null!==(r=null==i?void 0:i.width)&&void 0!==r?r:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,r,o){var n;if(!(i<.01||i>100)){if(r=null!==(n=r)&&void 0!==n?n:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-r.x,this._dislocation.y=this._height/i/2-r.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var l={x:Math.max(0,Math.min((0,d.z)(r.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,d.z)(r.y/this._height,1e3),1))},y={x:(this._width/i-this._width/this._scale)*l.x,y:(this._height/i-this._height/this._scale)*l.y};this._dislocation.x+=y.x,this._dislocation.y+=y.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,r){this._dislocation.x=i.x+r.x/this._scale,this._dislocation.y=i.y+r.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,E.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(r=>r(i))}}var ae=v(6195);class se{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,ae.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,ae._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(r=>r(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(r=>r(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(r=>r(i)),this.saveConfig()}}var me=v(5619),Pe=v(334),Le=v(3591),pe=function(j){return j&&JSON.parse(JSON.stringify(j))},Re=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Be=[],Xe={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},qe={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class Ve{constructor(){this._data_variables=pe(Re).concat(pe(Be)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(r=>{r(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(r=>{r(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var r of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))r.if&&r.if.length>0&&(this.checkValueConditions(r.if)?this.setValueOperators(r.then||[]):this.setValueOperators(r.else||[]))}}renew(){this._data_variables=pe(Re).concat(pe(Be)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let r={};"string"==typeof i?r=JSON.parse(i):"object"==typeof i&&(r=i),this._data_variables=r.variables||[],this._data_conditions=r.conditions||(o=>(this._data_variables.map(n=>n.change||[]).forEach(n=>{o=o.concat(n)}),o))([]),Re.forEach(o=>{var n=this._data_variables.filter(l=>l.key==o.key);n.length?n.forEach(function(l,y,p){l.type=o.type,l.readonly=o.readonly,l.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return pe(Xe)}getConditionTemp(){return pe(qe)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,r){return i.localeCompare(r)})}getVariableAll(){return this._data_variables.length?pe((j=this._data_variables,i="key",function(r){for(var o of j.map(function(n){return n[i]}).sort())j.filter(function(n){return n[i]==o}).forEach(function(n){r.push(n)}),j=j.filter(function(n){return n[i]!=o});return r}([]))):pe(Re).concat(pe(Be));var j,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Re.forEach(r=>{var o=this._data_variables.filter(n=>n.key==r.key);o.length?o.forEach((n,l,y)=>{n.type=r.type,n.readonly=r.readonly,n.system=r.system}):this._data_variables.push(r)}))}getVariable(i){return i?pe(this._data_variables.filter(r=>r.key==i)[0]||{}):{}}setVariable(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(l=>l.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(l=>l.key==i);n.length?n.forEach(function(l,y,p){l.value=r,l.type=o}):this._data_variables.push({key:i,value:r,type:o})}}getValue(i,r){if(!i)return"";var o=this._data_variables.filter(function(y){return y.key==i});if(o.length){var l,n=o[0]||{};switch(this.OnGetActionExecuting(n),r||(r=n.type||null),r){case"string":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":"string"==typeof n.value?n.value||"":n.value.toString().trim();break;case"number":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?0:"number"==typeof n.value?n.value||0:parseFloat(n.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(n.value)>=0?l=!1:"boolean"==typeof n.value?l=n.value:(l=(n.value+"").toLowerCase(),l="1"==n.value||"true"==n.value||"yes"==n.value||"dung"==n.value);break;case"audio-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></audio>`:"";break;case"video-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></video>`:"";break;case"img-src":l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<img style="width:100%;vertical-align:middle;" src="${n.value}"/>`:"";break;default:l=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value}return this.OnGetActionExecuted(n),l}return null}setValue(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(function(y){return y.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(function(y){return y.key==i});if(n.length){var l=n[0];this.OnSetActionExecuting(l),l&&(l.value=r),this.OnSetActionExecuted(l)}}}getConditionAll(){return pe(this._data_conditions.sort(function(i,r){return i.idx-r.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?pe(this._data_conditions.filter(r=>r.variable==i||(r.variables||[]).indexOf(i)>=0).sort(function(r,o){return r.idx-o.idx})):{}}switchCondition(i,r,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})>0):r==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),0==o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,l){return n+l})):r!=o;case">=":return r>=o;case"<=":return r<=o;case">":return r>o;case"<":return r<o;case"\u2208":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),0==o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,l){return n+l});default:return!1}}switchOperator(i,r,o){switch(i){case"+":return r+o;case"-":return r-o;case"*":return r*o;case"/":return r/o;case"=":return o;case"=!":return!o;case"==":return r==o;case"!=":return r!=o}}switchFormula(i,r){switch(i){case"sum":return r.reduce(function(n,l){return n+l});case"sub":return r.reduce(function(n,l){return n-l});case"pro":return r.reduce(function(n,l){return n*l});case"div":return r.reduce(function(n,l){return n/l});case"avg":var o=r.reduce(function(n,l){return n+l})/(r.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,r);case"max":return Math.max.apply(null,r);case"and":return r.reduce(function(n,l){return n&&l});case"or":return r.reduce(function(n,l){return n||l});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var r=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),r)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(r=>{switch(r.type){case"variable":return this.switchValueType_Condition(r)?0:1;case"variables":return 0==r.variables.map(o=>this.switchValueType_Condition(Object.assign(pe(r),{variable:o}))?0:1).reduce(function(o,n){return o+n})?0:1;default:return 0}}).reduce((r,o)=>(null!=r?r:0)+(null!=o?o:0))}setValueOperators(i){for(var r of i)switch(r.type){case"variable":this.setValue(r.variable,this.getValueOperator(r));break;case"variables":for(var o of r.variables)this.setValue(o,this.getValueOperator(Object.assign(pe(r),{variable:o})));break;case"slide":me.J.runSlide(void 0,void 0,r.slide);break;case"node":{var n;(0,Le.GD)({id:r.node,nodeStatus:me.J.nodeStatus,slideStatus:me.J.slideStatus});let l=me.J.findNode(r.node);null!=l&&null!==(n=l.interactive)&&void 0!==n&&n.click&&(0,Pe.J)(l,me.J.nodeStatus,me.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(r=>{r(i)})}}class ei{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,r,o){if(this._pointer_type=i,r)switch(i){case k.P.PEN:this._pen_type=r;break;case k.P.SHAPE:this._shape_type=r,o&&r===w.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case k.P.PEN:this._pen_type||(this._pen_type=F.F.DRAW);break;case k.P.SHAPE:this._shape_type||(this._shape_type=w.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,r,o){this._fnChangePointerTypes.forEach(n=>n(i,r,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,r,o){this._fnChangePointerTypeTemps.forEach(n=>n(i,r,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,r,o){this._fnChangePenTypes.forEach(n=>n(i,r,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,r,o){this._fnChangeShapeTypes.forEach(n=>n(i,r,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,r,o){this._fnChangePolygonTypes.forEach(n=>n(i,r,o))}set onchange(i){this._fnChanges.push(i)}change(i,r,o){this._fnChanges.forEach(n=>n(i,r,o))}}const Ot=new class li{constructor(){this._container="",this._svg="",this._screen=ye.prototype,this._data=Gt.prototype,this._dataSelect=bt.prototype,this._slide=kt.prototype,this._history=ie.prototype,this._attribute=se.prototype,this._pointer=ei.prototype,this._variable=Ve.prototype,this._data=new Gt,this._dataSelect=new bt,this._slide=new kt,this._history=new ie,this._attribute=new se,this._pointer=new ei,this._variable=new Ve,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,variable:this._variable.get,resources:this._data.getResource,fonts:this._data.getFonts,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,r,o,n,l;this._screen.screen=(i=jQuery(this._container).offset(),r=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(n=null==i?void 0:i.left)&&void 0!==n?n:0,y:null!==(l=null==i?void 0:i.top)&&void 0!==l?l:0},width:null!=r?r:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new ye,(j=>{new E.cR(j.container,j.target);var i=(n,l,y,p)=>{switch(n){case k.P.POINTER:jQuery(j.target).css({cursor:"auto"});break;case k.P.HAND:p?jQuery(j.target).css({cursor:"grabbing"}):jQuery(j.target).css({cursor:"grab"});break;case k.P.PEN:switch(l){case F.F.DRAW:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case F.F.HIGHTLIGH:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case k.P.ERASER:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case k.P.SHAPE:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case k.P.TEXT:case k.P.FOREIGNOBJECT:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};Ot.pointer.onchange=(n,l,y)=>{i(n,l)},jQuery(j.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",n=>{i(Ot.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",n=>{i(Ot.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",n=>{n.ctrlKey&&n.preventDefault()},{passive:!1}),jQuery(j.container).off("wheel.icdt-init").on("wheel.icdt-init",n=>{var l;n.preventDefault();let y=null!==(l=n.originalEvent)&&void 0!==l?l:n;if(!y.deltaX&&y.deltaY!=Math.floor(y.deltaY)||y.ctrlKey){var p=Ot.screen.scale;Ot.screen.scaleTo(p-.04*p*(y.deltaY>0?1:-1),(0,et.D)({x:n.clientX,y:n.clientY},1,{x:0,y:0},Ot.screen.offset))}else Ot.screen.move(Ot.screen.dislocation,{x:-y.deltaX,y:-y.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{Ot.screen.actived=!!jQuery(n.target).parents(Ot.container).length}),jQuery(j.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",n=>{Ot.screen.actived=!0}),jQuery(j.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",n=>{Ot.screen.actived=!1,Ot.pointer.pointer_type_temp==k.P.HAND&&(Ot.pointer.pointer_type_temp=k.P.POINTER)}),jQuery(j.container).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{0==n.button&&(j.container.includes("#")&&j.container.includes(n.target.getAttribute("id"))||j.container.includes(".")&&j.container.includes(n.target.getAttribute("class"))||j.container.includes(n.target.nodeName))&&(Ot.pointer.pointer_type_temp||Ot.pointer.pointer_type)===k.P.POINTER&&(Ot.dataSelect.ids=[])}),jQuery(j.container).off("touchmove.icdt-init").on("touchmove.icdt-init",n=>{n.preventDefault()});const r=n=>{switch(Ot.pointer.pointer_type_temp||Ot.pointer.pointer_type){case k.P.POINTER:K(n);break;case k.P.HAND:(j=>{(0,vt.I)(j,new x,1,{x:0,y:0})})(n);break;case k.P.PEN:(0,zt.u)(n);break;case k.P.SHAPE:(j=>{var i=null;switch(Ot.pointer.shape_type){case w.h.CIRCLE:i=new R;break;case w.h.ELLIPSE:i=new B;break;case w.h.LINE:i=new V;break;case w.h.RECT:i=new J;break;case w.h.POLYGON:var r;i=new Kt(null===(r=Z.find(o=>o.type==Ot.pointer.polygon_type))||void 0===r?void 0:r.ratios);break;case w.h.FOREIGNOBJECT:i=new ut;break;case w.h.IMAGE:i=new ne;break;case w.h.TEXT:case w.h.PATH:i=new Y}i&&(0,vt.I)(j,i)})(n);break;case k.P.FOREIGNOBJECT:(j=>{(0,vt.I)(j,new ut)})(n);break;case k.P.IMAGE:(j=>{(0,vt.I)(j,new ne)})(n);break;case k.P.TEXT:(j=>{(0,vt.I)(j,new M)})(n);break;case k.P.ERASER:(j=>{(0,vt.I)(j,new Xt)})(n);break;case k.P.INDEX:(0,_.h)(n)}};let o=!1;jQuery(j.target).off("touchstart.icdt-init").on("touchstart.icdt-init",n=>{o=!0,r({touchEvent:n})}),jQuery(j.target).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{if(1!=n.button){if(o)return void(o=!1);r({mouseEvent:n})}}),j.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",n=>{Ot.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Ct.K)(n))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",n=>{Ot.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Ct.K)(n))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(he,Mt,v)=>{v.d(Mt,{h:()=>A,y:()=>O});var k=v(7873),E=v(6611),rt=v(9506),z=v(1308),vt=v(5970);const A=x=>{var w,H,Z,lt;let d=(null===(w=x.mouseEvent)||void 0===w?void 0:w.target)||(null===(H=x.touchEvent)||void 0===H?void 0:H.target),R=(null==d?void 0:d.getAttribute("id"))||"",b=null==d?void 0:d.nodeName,B=jQuery(d).parents("g[id]").attr("id")||"";if(![k.F.INDEX_GROUP].includes(B))if(null!==(Z=x.mouseEvent)&&void 0!==Z&&Z.altKey||null!==(lt=x.touchEvent)&&void 0!==lt&&lt.altKey||!R||R.match(/[^0-9]/)||!E.L.dataSelect.nodeName.includes(b)){var pt;E.L.dataSelect.ids.length&&(E.L.dataSelect.ids=[]),(0==(null===(pt=x.mouseEvent)||void 0===pt?void 0:pt.button)||x.touchEvent)&&((x,w)=>{let R=(0,vt.RY)(k.F.SCAN_GROUP,"g"),b=(0,rt.CE)(0,0,1,1);(0,vt.xJ)(R,b),((x,w,H,Z)=>{(0,z.I)(x,{start:R=>{},move:(R,b)=>{((R,b,B,pt)=>{w=(0,rt.CE)(R,b,B,pt),(0,vt.xJ)(H,w)})(b[0][0],b[0][1],R.x,R.y)},end:(R,b)=>{null==H||H.remove(),E.L.dataSelect.ids=E.L.data.getNodeInArea(Math.min(b[0][0],R.x),Math.min(b[0][1],R.y),Math.max(b[0][0],R.x),Math.max(b[0][1],R.y)),Z(E.L.dataSelect.nodes)}})})(x,b,R,w)})(x,K)}else{var J,gt;let Kt=parseFloat(R||"0");E.L.dataSelect.ids=null!==(J=x.mouseEvent)&&void 0!==J&&J.shiftKey||null!==(gt=x.touchEvent)&&void 0!==gt&&gt.shiftKey?[Kt].concat(E.L.dataSelect.ids).filter((V,It,Et)=>Et.indexOf(V)==It):[Kt],K(E.L.dataSelect.nodes)}},K=x=>{var w,H;let Z=1;var lt,d;if(x.length&&(Z=Math.max.apply(null,null!==(lt=null===(d=E.L.data.slide)||void 0===d||null===(d=d.svg)||void 0===d?void 0:d.nodes.map(b=>{var B;return null!==(B=b.idx)&&void 0!==B?B:0}))&&void 0!==lt?lt:[0])+1),1==x.length)x[0].idx||(x[0].idx=Z,x[0].time=0);else if(x.length>=0){let b=x.map(pt=>{var J;return null!==(J=pt.idx)&&void 0!==J?J:0}).filter(pt=>pt>0),B=b.length?Math.min.apply(null,b):Z;x.forEach(pt=>{var J;pt.idx=B,pt.time=null!==(J=pt.time)&&void 0!==J?J:0})}let R=(0,vt.RY)(k.F.INDEX_GROUP,"g");(0,vt.IA)(R,null!==(w=null===(H=E.L.data.slide)||void 0===H||null===(H=H.svg)||void 0===H?void 0:H.nodes)&&void 0!==w?w:[])},O=x=>{var w,H,Z;null!=x&&null!==(w=x.svg)&&void 0!==w&&w.nodes&&x.svg.nodes.forEach(d=>{d.idx=0,d.time=null});let lt=(0,vt.RY)(k.F.INDEX_GROUP,"g");(0,vt.IA)(lt,null!==(H=null===(Z=E.L.data.slide)||void 0===Z||null===(Z=Z.svg)||void 0===Z?void 0:Z.nodes)&&void 0!==H?H:[])}},7135:(he,Mt,v)=>{v.d(Mt,{K:()=>w,X:()=>x});var k=v(6195),E=v(1477),rt=v(3603),z=v(6611),vt=v(1026),C=v(9841),f=v(2492),A=v(6752),K=v(3138);const x=new class O{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:E.r.Escape,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:E.r.Delete,fn:()=>{z.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:E.r.Space,fn:()=>{z.L.pointer.pointer_type_temp=rt.P.HAND}},this.onchange={type:"keyup",key:E.r.Space,fn:()=>{z.L.pointer.pointer_type_temp=rt.P.POINTER}},this.onchange={type:"keydown",key:E.r.ArrowLeft,fn:()=>{z.L.dataSelect.ids.length||z.L.data.backSlide()}},this.onchange={type:"keydown",key:E.r.ArrowRight,fn:()=>{z.L.dataSelect.ids.length||z.L.data.nextSlide()}},this.onchange={type:"keydown",key:E.r.ArrowLeft,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(Z=>{(0,A.ei)(Z,(0,f.z)(Z.size.x-(0,C.$)(1)))}),(0,K.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowRight,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(Z=>{(0,A.ei)(Z,(0,f.z)(Z.size.x+(0,C.$)(1)))}),(0,K.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowUp,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(Z=>{(0,A.ZF)(Z,(0,f.z)(Z.size.y-(0,C.$)(1)))}),(0,K.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.ArrowDown,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(Z=>{(0,A.ZF)(Z,(0,f.z)(Z.size.y+(0,C.$)(1)))}),(0,K.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.Digit1,fn:Z=>{Z.shiftKey&&(z.L.reloadView(),z.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:E.r.KeyA,fn:Z=>{Z.ctrlKey&&(z.L.dataSelect.ids=z.L.data.getNodeAll(),(0,K.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:E.r.KeyC,fn:Z=>{if(Z.ctrlKey){let lt=z.L.dataSelect.nodes;lt&&(0,k.IB)({params:{type:"nodes",nodes:lt}})}}},this.onchange={type:"keydown",key:E.r.KeyV,fn:Z=>{Z.ctrlKey&&(0,k.A9)({callback:lt=>{var d,R;"nodes"==(null==lt?void 0:lt.type)&&null!=lt&&null!==(d=lt.nodes)&&void 0!==d&&d.length&&(null==lt||null===(R=lt.nodes)||void 0===R||R.forEach(b=>{Z.shiftKey||z.L.data.findNode(b.id).id&&(b.size.x+=16,b.size.y+=16),b.id=Math.ceil(1e9*Math.random()),z.L.data.node=b}),(0,vt.t)(z.L.data.slide))}})}},this.onchange={type:"keydown",key:E.r.KeyZ,fn:Z=>{Z.ctrlKey&&Z.shiftKey?z.L.history.redo():Z.ctrlKey&&z.L.history.undo()}},this.onchange={type:"keydown",key:E.r.BracketLeft,fn:Z=>{Z.ctrlKey&&Z.shiftKey?z.L.data.sendToBack(z.L.dataSelect.ids):Z.ctrlKey?z.L.data.sendToBackStep(z.L.dataSelect.ids,-2):z.L.data.sendToBackArea(z.L.dataSelect.ids)}},this.onchange={type:"keydown",key:E.r.BracketRight,fn:Z=>{Z.ctrlKey&&Z.shiftKey?z.L.data.bringToFront(z.L.dataSelect.ids):Z.ctrlKey?z.L.data.bringToFrontStep(z.L.dataSelect.ids,1):z.L.data.bringToFrontArea(z.L.dataSelect.ids)}}}set onchange(Z){let lt=this._fnChanges.find(d=>d.eventType==Z.type&&d.eventKey==Z.key);lt?lt.fns.push(Z.fn):this._fnChanges.push({eventType:Z.type,eventKey:Z.key,fns:[Z.fn]})}change(Z,lt,d){var R;null===(R=this._fnChanges.find(b=>b.eventType==Z&&b.eventKey==lt))||void 0===R||R.fns.forEach(b=>b(d))}},w=H=>{x.change(H.type,H.keyCode||H.which||H.charCode||0,H)}},669:(he,Mt,v)=>{v.d(Mt,{O:()=>A});var k=v(6407),E=v(5970),rt=v(1131),z=v(9841),vt=v(7873),C=v(6611),f=v(1281);class A{constructor(O,x){var w,H;let Z={stroke:"#FF0000",strokeWidth:(0,z.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,z.$)(8)},{element:lt}=(0,k.X)(Math.ceil(1e9*Math.random()),{size:x});window.document.getElementById(vt.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(gt=>null==gt?void 0:gt.remove()),window.document.getElementById(vt.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(gt=>null==gt?void 0:gt.remove()),null===(w=window.document.getElementById(vt.F.INTERACTIVE_GROUP))||void 0===w||w.appendChild(lt);var b=gt=>{if(!gt.length)return;let Kt=[];if(1==gt.length){var dt;let{size:V}=null!==(dt=null!=O?O:C.L.dataSelect.nodes[0])&&void 0!==dt?dt:{};if(!V)return;Kt=[[V.x+V.width/2,V.y+V.height/2],gt[0]]}else Kt=[...gt];pt(Kt),B(Kt[0],"start"),B(Kt[Kt.length-1],"end")},B=(gt,Kt)=>{gt&&((dt=>{let{element:V}=(0,f.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==Kt?"#FF0000":"#00BA00",strokeWidth:(0,z.$)(1)},size:{x:gt[0]-5,y:gt[1]-5,width:10,height:10}});null===(dt=window.document.getElementById(vt.F.INTERACTIVE_GROUP))||void 0===dt||dt.prepend(V)})(),((dt,V)=>{let{size:It}=null!==(dt=null!=O?O:C.L.dataSelect.nodes[0])&&void 0!==dt?dt:{};if(!It)return;let Et=[[gt[0]-It.width/2,gt[1]-It.height/2],[gt[0]+It.width/2,gt[1]-It.height/2],[gt[0]+It.width/2,gt[1]+It.height/2],[gt[0]-It.width/2,gt[1]+It.height/2],[gt[0]-It.width/2,gt[1]-It.height/2]],{element:Y}=(0,k.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,z.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,z.$)(8)},size:{x:0,y:0,width:10,height:10,points:Et}});null===(V=window.document.getElementById(vt.F.INTERACTIVE_GROUP))||void 0===V||V.prepend(Y)})())},pt=gt=>{let dt=rt.n8j().x(V=>V[0]).y(V=>V[1]).curve(rt.qrM)(gt);lt.setAttribute("d",dt)};(0,E.tD)(lt,Z),b(null!==(H=null==x?void 0:x.points)&&void 0!==H?H:[]);let J="";return{start:gt=>{J=`M ${gt.x} ${gt.y} L ${gt.x} ${gt.y}`},move:(gt,Kt)=>{J+=` ${gt.x} ${gt.y}`,lt.setAttribute("d",J)},end:(gt,Kt)=>{b(Kt),Kt.length&&(window.interactivePoints=Kt)}}}}},4979:(he,Mt,v)=>{v.d(Mt,{z:()=>Z,u:()=>H});var k=v(7873),E=v(2409),rt=v(6611),z=v(1308),vt=v(5970),C=v(1131),f=v(6407),A=v(1999),K=v(4896);class O{constructor(){let d={stroke:rt.L.attribute.stroke,strokeWidth:rt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:R,element:b,attribute:B,size:pt}=(0,f.X)(Math.ceil(1e9*Math.random()),{attribute:d});(0,vt.tD)(b,B);let J="",gt="";return{start:dt=>{J=`M ${dt.x} ${dt.y} L ${dt.x} ${dt.y}`},move:(dt,V)=>{((dt,V)=>{J+=` ${dt} ${V}`,b.setAttribute("d",J)})(dt.x,dt.y)},end:(dt,V)=>{var It;V.length>=3?(gt=null!==(It=C.n8j().x(q=>q[0]).y(q=>q[1]).curve(C.qrM)(V))&&void 0!==It?It:"",b.setAttribute("d",gt)):b.setAttribute("d",J);let Et=(0,K.CS)(gt||J),{minX:Y,minY:Tt,maxX:ut,maxY:Qt}=(0,K.lP)(Et);pt.x=Y,pt.y=Tt,pt.width=ut-Y||1,pt.height=Qt-Tt||1,pt.ratioMaps=(0,K.nf)(pt,Et),rt.L.data.node=Object.assign({id:R,type:A.h.PATH,name:"Path"},{size:pt,attribute:B})}}}}class x{constructor(){let d={stroke:rt.L.attribute.stroke,strokeOpacity:.4,strokeWidth:rt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:R,element:b,attribute:B,size:pt}=(0,f.X)(Math.ceil(1e9*Math.random()),{attribute:d});(0,vt.tD)(b,B);let J="";return{start:dt=>{J=`M ${dt.x} ${dt.y} L ${dt.x} ${dt.y}`},move:(dt,V)=>{((dt,V)=>{J+=` ${dt} ${V}`,b.setAttribute("d",J)})(dt.x,dt.y)},end:(dt,V)=>{let It=(0,K.CS)(J),{minX:Et,minY:Y,maxX:Tt,maxY:ut}=(0,K.lP)(It);pt.x=Et,pt.y=Y,pt.width=Tt-Et||1,pt.height=ut-Y||1,pt.ratioMaps=(0,K.nf)(pt,It),rt.L.data.node=Object.assign({id:R,type:A.h.PATH,name:"Path"},{size:pt,attribute:B})}}}}var w=v(669);const H=lt=>{switch(rt.L.pointer.pen_type){case E.F.DRAW:(0,z.I)(lt,new O);break;case E.F.HIGHTLIGH:(0,z.I)(lt,new x);break;case E.F.INTERACTIVE:Z(lt)}},Z=lt=>{var d,R;let b=(0,vt.RY)(k.F.INTERACTIVE_GROUP,"g"),B=null!==(d=null===(R=rt.L.data.slide)||void 0===R||null===(R=R.svg)||void 0===R?void 0:R.viewBox)&&void 0!==d?d:(()=>{let{width:pt,height:J}=rt.L.screen.get;return{x:0,y:0,width:pt,height:J}})();(0,vt.KP)(b,B),lt&&(0,z.I)(lt,new w.O)}},3138:(he,Mt,v)=>{v.d(Mt,{D:()=>O});var k=v(7873),E=v(6611),rt=v(9506),z=v(1308),vt=v(5970),C=v(2492);const K=(x,w,H,Z,lt)=>{let{x:d,y:R,width:b,height:B}=H;0==b&&(b=1),0==B&&(B=1);let pt=Z.map(Et=>Object.assign({},Et.size)),gt=[],V=!1;(0,z.I)(x,{start:Et=>{Z.forEach(Et=>{let{id:Y,size:Tt,attribute:ut}=Et;gt.push({id:Y,type:"size",from:JSON.parse(JSON.stringify({id:Y,size:Tt,attribute:ut}))})})},move:(Et,Y)=>{((Et,Y,Tt,ut)=>{let Qt=Tt-Et,ne=ut-Y;(()=>{let Ct,q=(b||1)/(B||1);switch(w){case"rect-center":var zt,Nt;Ct=null!==(zt=x.mouseEvent)&&void 0!==zt&&zt.shiftKey||null!==(Nt=x.touchEvent)&&void 0!==Nt&&Nt.shiftKey?Math.abs(Tt-Et)>=Math.abs(ut-Y)?{x:d+Tt-Et,y:R,width:b,height:B}:{x:d,y:R+ut-Y,width:b,height:B}:{x:d+Tt-Et,y:R+ut-Y,width:b,height:B};break;case"rect-top-left":var wt,D,W,s,tt,_t,Lt,Dt;Ct=(null!==(wt=x.mouseEvent)&&void 0!==wt&&wt.shiftKey||null!==(D=x.touchEvent)&&void 0!==D&&D.shiftKey)&&(null!==(W=x.mouseEvent)&&void 0!==W&&W.altKey||null!==(s=x.touchEvent)&&void 0!==s&&s.altKey)?q>=1?{x:d+(Tt-Et),y:R+(Tt-Et)/q,width:b-2*(Tt-Et),height:B-2*(Tt-Et)/q}:{x:d+(ut-Y)*q,y:R+(ut-Y),width:b-2*(ut-Y)*q,height:B-2*(ut-Y)}:null!==(tt=x.mouseEvent)&&void 0!==tt&&tt.shiftKey||null!==(_t=x.touchEvent)&&void 0!==_t&&_t.shiftKey?q>=1?{x:d+(Tt-Et),y:R+(Tt-Et)/q,width:b-(Tt-Et),height:B-(Tt-Et)/q}:{x:d+(ut-Y)*q,y:R+(ut-Y),width:b-(ut-Y)*q,height:B-(ut-Y)}:null!==(Lt=x.mouseEvent)&&void 0!==Lt&&Lt.altKey||null!==(Dt=x.touchEvent)&&void 0!==Dt&&Dt.altKey?{x:d+(Tt-Et),y:R+(ut-Y),width:b-2*(Tt-Et),height:B-2*(ut-Y)}:{x:d+(Tt-Et),y:R+(ut-Y),width:b-(Tt-Et),height:B-(ut-Y)};break;case"rect-top-right":var Bt,Wt,Vt,re,Rt,st,Xt,P;Ct=(null!==(Bt=x.mouseEvent)&&void 0!==Bt&&Bt.shiftKey||null!==(Wt=x.touchEvent)&&void 0!==Wt&&Wt.shiftKey)&&(null!==(Vt=x.mouseEvent)&&void 0!==Vt&&Vt.altKey||null!==(re=x.touchEvent)&&void 0!==re&&re.altKey)?q>=1?{x:d-(Tt-Et),y:R-(Tt-Et)/q,width:b+2*(Tt-Et),height:B+2*(Tt-Et)/q}:{x:d+(ut-Y)*q,y:R+(ut-Y),width:b-2*(ut-Y)*q,height:B-2*(ut-Y)}:null!==(Rt=x.mouseEvent)&&void 0!==Rt&&Rt.shiftKey||null!==(st=x.touchEvent)&&void 0!==st&&st.shiftKey?q>=1?{x:d,y:R-(Tt-Et)/q,width:b+(Tt-Et),height:B+(Tt-Et)/q}:{x:d,y:R+(ut-Y),width:b-(ut-Y)*q,height:B-(ut-Y)}:null!==(Xt=x.mouseEvent)&&void 0!==Xt&&Xt.altKey||null!==(P=x.touchEvent)&&void 0!==P&&P.altKey?{x:d-(Tt-Et),y:R+(ut-Y),width:b+2*(Tt-Et),height:B-2*(ut-Y)}:{x:d,y:R+(ut-Y),width:b+(Tt-Et),height:B-(ut-Y)};break;case"rect-bottom-left":var c,M,it,nt,G,_,F,et;Ct=(null!==(c=x.mouseEvent)&&void 0!==c&&c.shiftKey||null!==(M=x.touchEvent)&&void 0!==M&&M.shiftKey)&&(null!==(it=x.mouseEvent)&&void 0!==it&&it.altKey||null!==(nt=x.touchEvent)&&void 0!==nt&&nt.altKey)?q>=1?{x:d+(Tt-Et),y:R+(Tt-Et)/q,width:b-2*(Tt-Et),height:B-2*(Tt-Et)/q}:{x:d-(ut-Y)*q,y:R-(ut-Y),width:b+2*(ut-Y)*q,height:B+2*(ut-Y)}:null!==(G=x.mouseEvent)&&void 0!==G&&G.shiftKey||null!==(_=x.touchEvent)&&void 0!==_&&_.shiftKey?q>=1?{x:d+(Tt-Et),y:R,width:b-(Tt-Et),height:B-(Tt-Et)/q}:{x:d-(ut-Y)*q,y:R,width:b+(ut-Y)*q,height:B+(ut-Y)}:null!==(F=x.mouseEvent)&&void 0!==F&&F.altKey||null!==(et=x.touchEvent)&&void 0!==et&&et.altKey?{x:d+(Tt-Et),y:R-(ut-Y),width:b-2*(Tt-Et),height:B+2*(ut-Y)}:{x:d+(Tt-Et),y:R,width:b-(Tt-Et),height:B+(ut-Y)};break;case"rect-bottom-right":var ct,xt,bt,X,ht,kt,Pt,Gt;Ct=(null!==(ct=x.mouseEvent)&&void 0!==ct&&ct.shiftKey||null!==(xt=x.touchEvent)&&void 0!==xt&&xt.shiftKey)&&(null!==(bt=x.mouseEvent)&&void 0!==bt&&bt.altKey||null!==(X=x.touchEvent)&&void 0!==X&&X.altKey)?q>=1?{x:d-(Tt-Et),y:R-(Tt-Et)/q,width:b+2*(Tt-Et),height:B+2*(Tt-Et)/q}:{x:d-(ut-Y)*q,y:R-(ut-Y),width:b+2*(ut-Y)*q,height:B+2*(ut-Y)}:null!==(ht=x.mouseEvent)&&void 0!==ht&&ht.shiftKey||null!==(kt=x.touchEvent)&&void 0!==kt&&kt.shiftKey?q>=1?{x:d,y:R,width:b+(Tt-Et),height:B+(Tt-Et)/q}:{x:d,y:R,width:b+(ut-Y)*q,height:B+(ut-Y)}:null!==(Pt=x.mouseEvent)&&void 0!==Pt&&Pt.altKey||null!==(Gt=x.touchEvent)&&void 0!==Gt&&Gt.altKey?{x:d-(Tt-Et),y:R-(ut-Y),width:b+2*(Tt-Et),height:B+2*(ut-Y)}:{x:d,y:R,width:b+(Tt-Et),height:B+(ut-Y)};break;case"rect-top":var qt,ie,ye,ae;Ct=null!==(qt=x.mouseEvent)&&void 0!==qt&&qt.shiftKey||null!==(ie=x.touchEvent)&&void 0!==ie&&ie.shiftKey?{x:d+ne/2*q,y:R+ne,width:b-ne*q,height:B-ne}:null!==(ye=x.mouseEvent)&&void 0!==ye&&ye.altKey||null!==(ae=x.touchEvent)&&void 0!==ae&&ae.altKey?{x:d,y:R+ne,width:b,height:B-2*ne}:{x:d,y:R+ne,width:b,height:B-ne};break;case"rect-bottom":var se,me,Pe,Le;Ct=null!==(se=x.mouseEvent)&&void 0!==se&&se.shiftKey||null!==(me=x.touchEvent)&&void 0!==me&&me.shiftKey?{x:d-ne/2*q,y:R,width:b+ne*q,height:B+ne}:null!==(Pe=x.mouseEvent)&&void 0!==Pe&&Pe.altKey||null!==(Le=x.touchEvent)&&void 0!==Le&&Le.altKey?{x:d,y:R-ne,width:b,height:B+2*ne}:{x:d,y:R,width:b,height:B+ne};break;case"rect-left":var Ee,pe,Te,Re;Ct=null!==(Ee=x.mouseEvent)&&void 0!==Ee&&Ee.shiftKey||null!==(pe=x.touchEvent)&&void 0!==pe&&pe.shiftKey?{x:d+Qt,y:R+Qt/2/q,width:b-Qt,height:B-Qt/q}:null!==(Te=x.mouseEvent)&&void 0!==Te&&Te.altKey||null!==(Re=x.touchEvent)&&void 0!==Re&&Re.altKey?{x:d+Qt,y:R,width:b-2*Qt,height:B}:{x:d+Qt,y:R,width:b-Qt,height:B};break;case"rect-right":var Be,Xe,qe,Ve;Ct=null!==(Be=x.mouseEvent)&&void 0!==Be&&Be.shiftKey||null!==(Xe=x.touchEvent)&&void 0!==Xe&&Xe.shiftKey?{x:d,y:R-Qt/2/q,width:b+Qt,height:B+Qt/q}:null!==(qe=x.mouseEvent)&&void 0!==qe&&qe.altKey||null!==(Ve=x.touchEvent)&&void 0!==Ve&&Ve.altKey?{x:d-Qt,y:R,width:b+2*Qt,height:B}:{x:d,y:R,width:b+Qt,height:B};break;default:Ct={x:d+Tt-Et,y:R+ut-Y,width:b,height:B}}Ct.width<0&&(Ct.width=0),Ct.height<0&&(Ct.height=0),Ct.x=(0,C.z)(Ct.x,1),Ct.y=(0,C.z)(Ct.y,1),Ct.width=(0,C.z)(Ct.width,1),Ct.height=(0,C.z)(Ct.height,1),Object.assign(H,Ct),(0,vt.D_)(lt,Z,Ct),(()=>{let ei=d-Ct.x,li=R-Ct.y,Ot=(Ct.width-b)/b,j=(Ct.height-B)/B;Z.forEach((i,r)=>{let o=pt[r],l=R-o.y,y={x:(0,C.z)(o.x-(ei+(d-o.x)*Ot),100),y:(0,C.z)(o.y-(li+l*j),100),width:(0,C.z)(o.width+o.width*Ot,100),height:(0,C.z)(o.height+o.height*j,100)},{id:p,type:h,size:T,attribute:m}=i;Object.assign(T,y),Object.assign(m,(0,rt.xW)(h,T,m)),(0,vt.tD)(window.document.getElementById(p),m)})})()})()})(Y[0][0],Y[0][1],Et.x,Et.y),V=!0},end:(Et,Y)=>{V&&(Z.forEach(Et=>{let{id:Y,size:Tt,attribute:ut}=Et,Qt=gt.find(ne=>ne.id==Y);Qt&&(Qt.to=JSON.parse(JSON.stringify({id:Y,size:Tt,attribute:ut})))}),E.L.history.push(gt))}})},O=x=>{x.length>=1&&(x=>{let w=999999,H=999999,Z=-999999,lt=-999999;x.forEach(b=>{w=Math.min(w,b.size.x),H=Math.min(H,b.size.y),Z=Math.max(Z,b.size.x+b.size.width),lt=Math.max(lt,b.size.y+b.size.height)});let d=(0,vt.RY)(k.F.RESIZE_GROUP,"g"),R=(0,rt.CE)(w,H,Z,lt);R.x=(0,C.z)(R.x,100),R.y=(0,C.z)(R.y,100),R.width=(0,C.z)(R.width,100),R.height=(0,C.z)(R.height,100),(0,vt.D_)(d,x,R).forEach(b=>{((x,w,H,Z,lt)=>{let d=!1;null==x||x.addEventListener("touchstart",R=>{d=!0,K({touchEvent:R},w,H,Z,lt)}),null==x||x.addEventListener("mousedown",R=>{if(0==R.button){if(d)return void(d=!1);K({mouseEvent:R},w,H,Z,lt)}})})(b.element,b.posType,R,x,d)})})(x)}},1026:(he,Mt,v)=>{v.d(Mt,{$:()=>b,t:()=>R});var k=v(7873),E=v(1281),rt=v(6153),z=v(3477),vt=v(7945),C=v(3069),f=v(3073),A=v(1999),K=v(6407),O=v(6847),x=v(745),w=v(9173),H=v(6611),Z=v(5970),lt=v(4669),d=v(3617);const R=(B,pt,J)=>{var gt;if(pt&&!(null!=J?J:window).document.getElementById(pt))return;if(pt){let dt=(null!=J?J:window).document.getElementById(pt);jQuery(dt).find("#"+k.F.BACKGROUND_GROUP).empty();let V=(0,Z.RY)(k.F.BACKGROUND_GROUP,"g",void 0,dt);(0,Z.I6)(V,B)}else{jQuery(H.L.target).find("#"+k.F.BACKGROUND_GROUP).empty();let dt=(0,Z.RY)(k.F.BACKGROUND_GROUP,"g",void 0,H.L.target);(0,Z.I6)(dt,B)}let Kt=(dt,V)=>{V=pt&&V?`${pt}-${V}`:null!=pt?pt:V,null==dt||dt.forEach(It=>{let Et=pt?`${pt}-${It.id}`:It.id;var Y;if(It.isdeleted)null===(Y=(null!=J?J:window).document.getElementById(Et))||void 0===Y||Y.remove();else switch(It.type){case A.h.GROUP:(0,f.v)(Et,{},V?(null!=J?J:window).document.getElementById(V):null),Kt(It.nodes,It.id);break;case A.h.CIRCLE:(0,E.K)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.ELLIPSE:(0,rt.W)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.LINE:(0,C.q)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.RECT:(0,vt.a)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.POLYGON:(0,z.u)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.POLYLINE:(0,d.E)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.FOREIGNOBJECT:(0,x.$)(Et,{size:It.size,attribute:It.attribute,style:It.style,source:It.source},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.IMAGE:(0,w.B)(Et,{size:It.size,attribute:It.attribute,source:It.source},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.TEXT:(0,O.L)(Et,{size:It.size,attribute:It.attribute,source:It.source},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.TSPAN:(0,lt.M)(Et,{size:It.size,attribute:It.attribute,source:It.source},V?(null!=J?J:window).document.getElementById(V):null);break;case A.h.PATH:(0,K.X)(Et,{size:It.size,attribute:It.attribute},V?(null!=J?J:window).document.getElementById(V):null)}})};Kt(null==B||null===(gt=B.svg)||void 0===gt?void 0:gt.nodes)},b=(B,pt)=>{var J;if(pt&&!window.document.getElementById(pt))return;let gt=(Kt,dt)=>{dt=dt?`${pt}-${dt}`:pt,null==Kt||Kt.forEach(V=>{jQuery("#"+(pt?`${pt}-${V.id}`:V.id)).appendTo(dt?window.document.getElementById(dt):H.L.target),V.type==A.h.GROUP&&gt(V.nodes,V.id)})};gt(null==B||null===(J=B.svg)||void 0===J?void 0:J.nodes)}},1281:(he,Mt,v)=>{v.d(Mt,{K:()=>vt});var k=v(1999),E=v(6611),rt=v(9506),z=v(5970);const vt=(C,f,A)=>{let K=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(k.h.CIRCLE,K,O)),{nodeId:C,element:(0,z.fn)(C,k.h.CIRCLE,"circle",{size:K,attribute:O},A),size:K,attribute:O}}},6153:(he,Mt,v)=>{v.d(Mt,{W:()=>vt});var k=v(1999),E=v(6611),rt=v(9506),z=v(5970);const vt=(C,f,A)=>{let K=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(k.h.ELLIPSE,K,O)),{nodeId:C,element:(0,z.fn)(C,k.h.ELLIPSE,"ellipse",{size:K,attribute:O},A),size:K,attribute:O}}},745:(he,Mt,v)=>{v.d(Mt,{$:()=>z});var k=v(1999),E=v(9506),rt=v(5970);const z=(vt,C,f)=>{let A=(null==C?void 0:C.size)||{x:0,y:0,width:320,height:80},K=(null==C?void 0:C.attribute)||{};Object.assign(K,(0,E.xW)(k.h.FOREIGNOBJECT,A,K));let O=(null==C?void 0:C.source)||{type:"html",html:{htmlContent:""}},x=(null==C?void 0:C.style)||{};return{nodeId:vt,element:(0,rt.fn)(vt,k.h.FOREIGNOBJECT,"foreignObject",{size:A,attribute:K,style:x,source:O},f),size:A,attribute:K,style:x,source:O}}},3073:(he,Mt,v)=>{v.d(Mt,{v:()=>z});var k=v(1999),E=v(9506),rt=v(5970);const z=(C,f,A)=>{let K=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{};return Object.assign(O,(0,E.xW)(k.h.GROUP,K,O)),{nodeId:C,element:(0,rt.fn)(C,k.h.GROUP,"g",{size:K,attribute:O},A),size:K,attribute:O}}},9173:(he,Mt,v)=>{v.d(Mt,{B:()=>z});var k=v(1999),E=v(9506),rt=v(5970);const z=(vt,C,f)=>{let A=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},K=(null==C?void 0:C.attribute)||{preserveAspectRatio:"none"};Object.assign(K,(0,E.xW)(k.h.IMAGE,A,K));let O=(null==C?void 0:C.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:vt,element:(0,rt.fn)(vt,k.h.IMAGE,"image",{size:A,attribute:K,source:O},f),size:A,attribute:K,source:O}}},3069:(he,Mt,v)=>{v.d(Mt,{q:()=>vt});var k=v(1999),E=v(6611),rt=v(9506),z=v(5970);const vt=(C,f,A)=>{let K=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth,strokeLinecap:E.L.attribute.strokeLinecap};return Object.assign(O,(0,rt.xW)(k.h.LINE,K,O)),{nodeId:C,element:(0,z.fn)(C,k.h.LINE,"line",{size:K,attribute:O},A),size:K,attribute:O}}},6407:(he,Mt,v)=>{v.d(Mt,{X:()=>vt});var k=v(1999),E=v(6611),rt=v(9506),z=v(5970);const vt=(C,f,A)=>{let K=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(k.h.PATH,K,O)),{nodeId:C,element:(0,z.fn)(C,k.h.PATH,"path",{size:K,attribute:O},A),size:K,attribute:O}}},3477:(he,Mt,v)=>{v.d(Mt,{u:()=>vt});var k=v(1999),E=v(6611),rt=v(9506),z=v(5970);const vt=(C,f,A)=>{let K=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(k.h.POLYGON,K,O)),{nodeId:C,element:(0,z.fn)(C,k.h.POLYGON,"polygon",{size:K,attribute:O},A),size:K,attribute:O}}},3617:(he,Mt,v)=>{v.d(Mt,{E:()=>vt});var k=v(1999),E=v(6611),rt=v(9506),z=v(5970);const vt=(C,f,A)=>{let K=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(k.h.POLYLINE,K,O)),{nodeId:C,element:(0,z.fn)(C,k.h.POLYLINE,"polyline",{size:K,attribute:O},A),size:K,attribute:O}}},7945:(he,Mt,v)=>{v.d(Mt,{a:()=>vt});var k=v(1999),E=v(6611),rt=v(9506),z=v(5970);const vt=(C,f,A)=>{let K=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},O=(null==f?void 0:f.attribute)||{fill:E.L.attribute.fill,stroke:E.L.attribute.stroke,strokeWidth:E.L.attribute.strokeWidth};return Object.assign(O,(0,rt.xW)(k.h.RECT,K,O)),{nodeId:C,element:(0,z.fn)(C,k.h.RECT,"rect",{size:K,attribute:O},A),size:K,attribute:O}}},6847:(he,Mt,v)=>{v.d(Mt,{L:()=>vt});var k=v(1999),E=v(6611),rt=v(9506),z=v(5970);const vt=(C,f,A)=>{let K=(null==f?void 0:f.size)||{x:0,y:0,width:320,height:80},O=(null==f?void 0:f.attribute)||{fill:E.L.attribute.stroke,fontFamily:E.L.attribute.fontFamily,fontSize:E.L.attribute.fontSize,textLength:E.L.attribute.textLength};Object.assign(O,(0,rt.xW)(k.h.TEXT,K,O));let x=(null==f?void 0:f.source)||{type:"text",text:{textContent:""}};return{nodeId:C,element:(0,z.fn)(C,k.h.TEXT,"text",{size:K,attribute:O,source:x},A),size:K,attribute:O,source:x}}},4669:(he,Mt,v)=>{v.d(Mt,{M:()=>vt});var k=v(1999),E=v(6611),rt=v(9506),z=v(5970);const vt=(C,f,A)=>{let K=(null==f?void 0:f.size)||{x:0,y:0,width:320,height:80},O=(null==f?void 0:f.attribute)||{fill:E.L.attribute.stroke,fontFamily:E.L.attribute.fontFamily,fontSize:E.L.attribute.fontSize,textLength:E.L.attribute.textLength};Object.assign(O,(0,rt.xW)(k.h.TSPAN,K,O));let x=(null==f?void 0:f.source)||{type:"text",text:{textContent:""}};return{nodeId:C,element:(0,z.fn)(C,k.h.TSPAN,"tspan",{size:K,attribute:O,source:x},A),size:K,attribute:O,source:x}}},9506:(he,Mt,v)=>{v.d(Mt,{CE:()=>rt,xW:()=>z});var k=v(1999),E=v(4896);const rt=(C,f,A,K,O)=>{let x={x:Math.min(C,A),y:Math.min(f,K),width:Math.abs(A-C)||1,height:Math.abs(K-f)||1};return null!=O&&O.ratio&&(x.width<=x.height?x.height=x.width*(null==O?void 0:O.ratio):x.width=x.height/(null==O?void 0:O.ratio)),Object.assign(x,{ratios:(null==O?void 0:O.ratios)||[[(C-x.x)/(x.width||1),(f-x.y)/(x.height||1)],[(A-x.x)/(x.width||1),(K-x.y)/(x.height||1)]]}),null!=O&&O.points&&(x.points=null==O?void 0:O.points),x},z=(C,f,A)=>{var K,O=(()=>{switch(C){case k.h.CIRCLE:return{cx:f.x+f.width/2,cy:f.y+f.height/2,r:Math.min(f.width/2,f.height/2)};case k.h.ELLIPSE:return{cx:f.x+f.width/2,cy:f.y+f.height/2,rx:f.width/2,ry:f.height/2};case k.h.LINE:{var x;let d={};return null===(x=f.ratios)||void 0===x||x.forEach((R,b)=>{d[`x${b+1}`]=f.x+f.width*R[0],d[`y${b+1}`]=f.y+f.height*R[1]}),d}case k.h.RECT:case k.h.FOREIGNOBJECT:case k.h.IMAGE:return{x:f.x,y:f.y,width:f.width,height:f.height};case k.h.TEXT:case k.h.TSPAN:var w;return{x:f.x,y:f.y+(A.alignmentBaseline||A.dominantBaseline?0:null!==(w=A.fontSize)&&void 0!==w?w:16)};case k.h.POLYGON:case k.h.POLYLINE:var H;if(null!==(H=f.ratios)&&void 0!==H&&H.length)return{points:(0,E.n9)(f,f.ratios)};break;case k.h.PATH:var Z,lt;if(null!==(Z=f.ratioMaps)&&void 0!==Z&&Z.length)return{d:(0,E.$N)(f,f.ratioMaps)};if(null!==(lt=f.points)&&void 0!==lt&&lt.length)return{d:`M ${(d=f.points)[0][0]} ${d[0][1]} L ${(d.map(R=>[R[0],R[1]])||[]).map(R=>R.join(" ")).join(" ")}`}}var d;return{}})();return f.rotate?(O.transform=`rotate(${f.rotate})`,O.transformOrigin=`${f.x+f.width/2} ${f.y+f.height/2}`):null!==(K=A.transform)&&void 0!==K&&K.match(/^rotate/)&&(A.transform=null,A.transformOrigin=null),O}},2492:(he,Mt,v)=>{v.d(Mt,{z:()=>k});const k=(E,rt)=>{var z;return rt=null!==(z=rt)&&void 0!==z?z:100,Math.round((E+Number.EPSILON)*rt)/rt}},9841:(he,Mt,v)=>{v.d(Mt,{$:()=>rt});var k=v(6611),E=v(2492);const rt=z=>(0,E.z)(z/k.L.screen.scale)},6752:(he,Mt,v)=>{v.d(Mt,{E$:()=>f,Nx:()=>K,ZF:()=>C,ei:()=>vt,fu:()=>A});var k=v(6611),E=v(5970),rt=v(9506),z=v(2492);const vt=(O,x)=>{let{id:w,type:H,size:Z,attribute:lt}=O,d=JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}));Z.x=(0,z.z)(x),Object.assign(lt,(0,rt.xW)(H,Z,lt)),(0,E.tD)(window.document.getElementById(w),lt),k.L.history.push([{type:"size",from:d,to:JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}))}])},C=(O,x)=>{let{id:w,type:H,size:Z,attribute:lt}=O,d=JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}));Z.y=(0,z.z)(x),Object.assign(lt,(0,rt.xW)(H,Z,lt)),(0,E.tD)(window.document.getElementById(w),lt),k.L.history.push([{type:"size",from:d,to:JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}))}])},f=(O,x,w)=>{let{id:H,type:Z,size:lt,attribute:d}=O,R=JSON.parse(JSON.stringify({id:H,size:lt,attribute:d}));w&&(lt.height=(0,z.z)(x*lt.height/lt.width)),lt.width=(0,z.z)(x),Object.assign(d,(0,rt.xW)(Z,lt,d)),(0,E.tD)(window.document.getElementById(H),d),k.L.history.push([{type:"size",from:R,to:JSON.parse(JSON.stringify({id:H,size:lt,attribute:d}))}])},A=(O,x,w)=>{let{id:H,type:Z,size:lt,attribute:d}=O,R=JSON.parse(JSON.stringify({id:H,size:lt,attribute:d}));w&&(lt.width=(0,z.z)(x*lt.width/lt.height)),lt.height=(0,z.z)(x),Object.assign(d,(0,rt.xW)(Z,lt,d)),(0,E.tD)(window.document.getElementById(H),d),k.L.history.push([{type:"size",from:R,to:JSON.parse(JSON.stringify({id:H,size:lt,attribute:d}))}])},K=(O,x)=>{let{id:w,type:H,size:Z,attribute:lt}=O,d=JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}));Z.rotate="number"==typeof x?(0,z.z)(x,100):void 0,Object.assign(lt,(0,rt.xW)(H,Z,lt)),(0,E.tD)(window.document.getElementById(w),lt),k.L.history.push([{type:"size",from:d,to:JSON.parse(JSON.stringify({id:w,size:Z,attribute:lt}))}])}},1308:(he,Mt,v)=>{v.d(Mt,{I:()=>C});var k=v(3603),E=v(6611);class rt{constructor(A){this._points=[],this._options=A}start(A){this._points.length=0,this._points.push([A.x,A.y]),this._options.start(A)}move(A){this._points.push([A.x,A.y]),this._options.move(A,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(A=this._points[0])[0],y:A[1]}:{x:0,y:0};var A}get offsetLast(){return this._points.length>=1?{x:(A=this._points[this._points.length-1])[0],y:A[1]}:{x:0,y:0};var A}}var z=v(6078);const C=(f,A,K,O,x)=>{var w,H,Z;let lt=null,d=0,R=0;f.mouseEvent?(lt=f.mouseEvent.target,d=f.mouseEvent.offsetX,R=f.mouseEvent.offsetY):f.touchEvent&&(lt=f.touchEvent.target,f.touchEvent.touches.length&&(d=f.touchEvent.touches[0].clientX,R=f.touchEvent.touches[0].clientY));let b=null!=K?K:E.L.screen.scale,B=null!=O?O:E.L.screen.dislocation,pt=null!=x?x:E.L.screen.offset,J=()=>{};var gt=new rt({start:null!==(w=null==A?void 0:A.start)&&void 0!==w?w:J,move:null!==(H=null==A?void 0:A.move)&&void 0!==H?H:J,end:null!==(Z=null==A?void 0:A.end)&&void 0!==Z?Z:J});f.mouseEvent?gt.start((0,z.D)({x:d,y:R},b,B,{x:0,y:0})):f.touchEvent&&gt.start((0,z.D)({x:d,y:R},b,B,pt));let Kt=ut=>{gt.move((0,z.D)({x:ut.clientX,y:ut.clientY},b,B,pt))},dt=ut=>{gt.end(),[k.P.SHAPE,k.P.FOREIGNOBJECT,k.P.IMAGE,k.P.TEXT].includes(E.L.pointer.pointer_type)&&(ut.shiftKey||(E.L.pointer.pointer_type=k.P.POINTER))},V=ut=>{ut.touches.length&&Kt({clientX:ut.touches[0].clientX,clientY:ut.touches[0].clientY})},It=ut=>{dt({shiftKey:ut.shiftKey,ctrlKey:ut.ctrlKey,altKey:ut.altKey}),window.removeEventListener("touchmove",V,!1),window.removeEventListener("touchend",It,!1)},Et=ut=>{0==ut.button&&Kt({clientX:ut.clientX,clientY:ut.clientY})},Y=ut=>{0==ut.button&&(dt({shiftKey:ut.shiftKey,ctrlKey:ut.ctrlKey,altKey:ut.altKey}),window.removeEventListener("mousemove",Et,!1),window.removeEventListener("mouseup",Y,!1))};if(f.mouseEvent)window.addEventListener("mousemove",Et,!1),window.addEventListener("mouseup",Y,!1);else if(f.touchEvent){var Tt;window.addEventListener("touchmove",V,!1),window.addEventListener("touchend",It,!1),null===(Tt=lt)||void 0===Tt||Tt.addEventListener("touchmove",function(ut){ut.preventDefault()})}}},6078:(he,Mt,v)=>{v.d(Mt,{D:()=>E});var k=v(2492);const E=(rt,z,vt,C)=>(rt.x-=C.x,rt.y-=C.y,rt.x/=z,rt.y/=z,rt.x-=vt.x,rt.y-=vt.y,rt.x=(0,k.z)(rt.x),rt.y=(0,k.z)(rt.y),rt)},5619:(he,Mt,v)=>{v.d(Mt,{J:()=>st,I:()=>Xt});var k=v(7873),E=v(6611),rt=v(1999),z=v(334),vt=v(8946),C=v(7657),f=v(6769),A=v(3591),O=v(6847),x=v(3073);var d=v(7050),R=v(9173),b=v(2492);const B=(P,c,M)=>{var it,nt,G,_;let F=1,et=new Image;et.onload=()=>{var ct,xt,bt,X;F=(0,b.z)(et.naturalWidth/et.naturalHeight,100);let ht=0,kt=0,Pt=0,Gt=0;var qt,ie,ye,ae;F>=1?(Pt=Math.min(et.naturalWidth,null!==(qt=null===(ie=st.slide.svg)||void 0===ie||null===(ie=ie.viewBox)||void 0===ie?void 0:ie.width)&&void 0!==qt?qt:0),Gt=Pt/F):(Gt=Math.min(et.naturalHeight,null!==(ye=null===(ae=st.slide.svg)||void 0===ae||null===(ae=ae.viewBox)||void 0===ae?void 0:ae.height)&&void 0!==ye?ye:0),Pt=Gt/F),ht=((null!==(ct=null===(xt=st.slide.svg)||void 0===xt||null===(xt=xt.viewBox)||void 0===xt?void 0:xt.width)&&void 0!==ct?ct:0)-Pt)/2,kt=((null!==(bt=null===(X=st.slide.svg)||void 0===X||null===(X=X.viewBox)||void 0===X?void 0:X.height)&&void 0!==bt?bt:0)-Gt)/2,c.size={x:ht,y:kt,width:Pt,height:Gt},pt(c,M)},et.onerror=ct=>{console.error(`ImgSrc load failed -> ${JSON.stringify(c.source)}`,ct)},et.src=(null!==(it=c.source)&&void 0!==it&&it.path?(null===(nt=E.L.config)||void 0===nt?void 0:nt.readfileuploadurl)+(null===(G=c.source)||void 0===G?void 0:G.path):null===(_=c.source)||void 0===_?void 0:_.url)||""},pt=(P,c)=>{if(P.slideStatus!=st.slideStatus)return void c();let{element:M}=(0,R.B)(Math.ceil(1e9*Math.random()),{size:P.size,source:{type:"image",image:null==P?void 0:P.source}});setTimeout(()=>{null==M||M.remove(),c()},3e3)};var J=v(5970);const gt=(P,c,M)=>{var it,nt,G,_;let F=new Image;F.onload=()=>{Kt(P,{width:F.naturalWidth,height:F.naturalHeight},c,M)},F.onerror=et=>{console.error(`ImgSrc load failed -> ${JSON.stringify(c.source)}`,et),M()},F.src=(null!==(it=c.source)&&void 0!==it&&it.path?(null===(nt=E.L.config)||void 0===nt?void 0:nt.readfileuploadurl)+(null===(G=c.source)||void 0===G?void 0:G.path):null===(_=c.source)||void 0===_?void 0:_.url)||""},Kt=(P,c,M,it)=>{if(M.slideStatus!=st.slideStatus)return void it();let nt=(0,b.z)(c.width/c.height,100),G=0,_=0,F=0,et=0;nt>=1?(F=c.width,F=Math.max(F,40),F=Math.min(F,40),et=F/nt):(et=c.height,et=Math.max(et,40),et=Math.min(et,40),F=et/nt);let{size:bt}=P;G=bt.x+bt.width-F/2,_=bt.y-et/2;let X=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,R.B)(`icon-${P.id}`,{size:{x:G,y:_,width:F,height:et},source:{type:"image",image:null==M?void 0:M.source}},X),setTimeout(()=>{it()},3e3)},dt=(P,c,M)=>{var it,nt,G,_,F,et,ct;if(c.slideStatus!=st.slideStatus)return void M();if(!(null!==(it=c.source)&&void 0!==it&&it.path||null!==(nt=c.source)&&void 0!==nt&&nt.url))return console.warn(`${P.id} -> audio no source!`),void M();var xt=jQuery("#"+P.id);let bt=null!==(G=c.iteration)&&void 0!==G?G:0;if(bt<0&&(M(),M=function(){}),!(xt.data("audio-running")&&bt<0)){xt.data("audio-running",!0);var X=new Audio;return X.autoplay=!0,X.loop=0!=bt,X.preload="auto",X.controls=!0,X.setAttributeNode(document.createAttribute("playsinline")),X.addEventListener("canplay",function(){var ht=X.play();ht&&ht.then(function(kt){xt.data("audio-running",!0)}).catch(function(kt){xt.data("audio-running",!1),c.slideStatus===st.slideStatus&&M()})}),X.addEventListener("timeupdate",function(){var kt;c.slideStatus!==st.slideStatus&&((kt=this).pause(),kt.remove(),xt.data("audio-running",!1))}),X.addEventListener("canplaythrough",function(){this.loop&&(bt>0?bt--:0==bt&&(this.loop=!1))}),X.addEventListener("play",function(){}),X.addEventListener("pause",function(){}),X.addEventListener("ended",function(){this.remove(),xt.data("audio-running",!1),c.slideStatus===st.slideStatus&&M()}),X.onerror=function(){this.remove(),xt.data("audio-running",!1),c.slideStatus===st.slideStatus&&M()},X.src=(null!==(_=c.source)&&void 0!==_&&_.path?(null===(F=E.L.config)||void 0===F?void 0:F.readfileuploadurl)+(null===(et=c.source)||void 0===et?void 0:et.path):null===(ct=c.source)||void 0===ct?void 0:ct.url)||"",X}};var V=v(2837);const ne=(P,c)=>{var M;null===(M=c.test)||void 0===M||null===(M=M.answer)||void 0===M||null===(M=M.matching)||void 0===M||M.filter(it=>it.id==P.id).forEach(it=>it.value=""),jQuery(`#node-${P.id}`).remove()},Ct=(P,c,M,it,nt,G)=>{var _,F,et,ct,xt,bt,X,ht;nt.iscorrect?(null!==(_=c.test)&&void 0!==_&&null!==(_=_.audiotrue)&&void 0!==_&&_.path&&dt(P,{source:(0,V.U)(null===(et=c.test)||void 0===et?void 0:et.audiotrue),iteration:0,nodeStatus:M,slideStatus:it},G),null!==(F=c.test)&&void 0!==F&&null!==(F=F.effecttrue)&&void 0!==F&&F.path&&B(0,{source:(0,V.U)(null===(ct=c.test)||void 0===ct?void 0:ct.effecttrue),iteration:0,nodeStatus:M,slideStatus:it},G)):(null!==(xt=c.test)&&void 0!==xt&&null!==(xt=xt.audiofalse)&&void 0!==xt&&xt.path&&dt(P,{source:(0,V.U)(null===(X=c.test)||void 0===X?void 0:X.audiofalse),iteration:0,nodeStatus:M,slideStatus:it},G),null!==(bt=c.test)&&void 0!==bt&&null!==(bt=bt.effectfalse)&&void 0!==bt&&bt.path&&B(0,{source:(0,V.U)(null===(ht=c.test)||void 0===ht?void 0:ht.effectfalse),iteration:0,nodeStatus:M,slideStatus:it},G));zt(c,M,it,G)},zt=(P,c,M,it)=>{var nt;switch(null===(nt=P.test)||void 0===nt?void 0:nt.type){case"truefalse":{var G,_;let{value:ae,iscorrect:se}=null!==(G=null==P||null===(_=P.test)||void 0===_||null===(_=_.answer)||void 0===_?void 0:_.truefalse)&&void 0!==G?G:{};if(ae){let me=st.findNode(ae);var F,et,ct,xt;se?null!==(F=P.test)&&void 0!==F&&null!==(F=F.icontrue)&&void 0!==F&&F.path&&gt(me,{source:(0,V.U)(null===(et=P.test)||void 0===et?void 0:et.icontrue),iteration:0,nodeStatus:c,slideStatus:M},it):null!==(ct=P.test)&&void 0!==ct&&null!==(ct=ct.iconfalse)&&void 0!==ct&&ct.path&&gt(me,{source:(0,V.U)(null===(xt=P.test)||void 0===xt?void 0:xt.iconfalse),iteration:0,nodeStatus:c,slideStatus:M},it)}break}case"singlechoice":{var bt,X;let{value:ae,iscorrect:se}=null!==(bt=null==P||null===(X=P.test)||void 0===X||null===(X=X.answer)||void 0===X?void 0:X.singlechoice)&&void 0!==bt?bt:{};if(ae){let me=st.findNode(ae);var ht,kt,Pt,Gt;se?null!==(ht=P.test)&&void 0!==ht&&null!==(ht=ht.icontrue)&&void 0!==ht&&ht.path&&gt(me,{source:(0,V.U)(null===(kt=P.test)||void 0===kt?void 0:kt.icontrue),iteration:0,nodeStatus:c,slideStatus:M},it):null!==(Pt=P.test)&&void 0!==Pt&&null!==(Pt=Pt.iconfalse)&&void 0!==Pt&&Pt.path&&gt(me,{source:(0,V.U)(null===(Gt=P.test)||void 0===Gt?void 0:Gt.iconfalse),iteration:0,nodeStatus:c,slideStatus:M},it)}break}case"multichoice":var qt;null==P||null===(qt=P.test)||void 0===qt||null===(qt=qt.answer)||void 0===qt||null===(qt=qt.multichoice)||void 0===qt||qt.forEach(ae=>{let{value:se,iscorrect:me}=ae;if(se){let Te=st.findNode(se);var Pe,Le,Ee,pe;me?null!==(Pe=P.test)&&void 0!==Pe&&null!==(Pe=Pe.icontrue)&&void 0!==Pe&&Pe.path&&gt(Te,{source:(0,V.U)(null===(Le=P.test)||void 0===Le?void 0:Le.icontrue),iteration:0,nodeStatus:c,slideStatus:M},it):null!==(Ee=P.test)&&void 0!==Ee&&null!==(Ee=Ee.iconfalse)&&void 0!==Ee&&Ee.path&&gt(Te,{source:(0,V.U)(null===(pe=P.test)||void 0===pe?void 0:pe.iconfalse),iteration:0,nodeStatus:c,slideStatus:M},it)}});break;case"fill":var ie;null==P||null===(ie=P.test)||void 0===ie||null===(ie=ie.answer)||void 0===ie||null===(ie=ie.fill)||void 0===ie||ie.forEach(ae=>{let{id:se,value:Pe,iscorrect:Le}=ae;if(Pe){let Be=st.findNode(se);var Ee,pe,Te,Re;Le?null!==(Ee=P.test)&&void 0!==Ee&&null!==(Ee=Ee.icontrue)&&void 0!==Ee&&Ee.path&&gt(Be,{source:(0,V.U)(null===(pe=P.test)||void 0===pe?void 0:pe.icontrue),iteration:0,nodeStatus:c,slideStatus:M},it):null!==(Te=P.test)&&void 0!==Te&&null!==(Te=Te.iconfalse)&&void 0!==Te&&Te.path&&gt(Be,{source:(0,V.U)(null===(Re=P.test)||void 0===Re?void 0:Re.iconfalse),iteration:0,nodeStatus:c,slideStatus:M},it)}});break;case"matching":var ye;null==P||null===(ye=P.test)||void 0===ye||null===(ye=ye.answer)||void 0===ye||null===(ye=ye.matching)||void 0===ye||ye.forEach(ae=>{let{id:se,key:me,value:Pe}=ae;if(Pe){let Re=st.findNode(se);var Le,Ee,pe,Te;me==Pe?null!==(Le=P.test)&&void 0!==Le&&null!==(Le=Le.icontrue)&&void 0!==Le&&Le.path&&gt(Re,{source:(0,V.U)(null===(Ee=P.test)||void 0===Ee?void 0:Ee.icontrue),iteration:0,nodeStatus:c,slideStatus:M},it):null!==(pe=P.test)&&void 0!==pe&&null!==(pe=pe.iconfalse)&&void 0!==pe&&pe.path&&gt(Re,{source:(0,V.U)(null===(Te=P.test)||void 0===Te?void 0:Te.iconfalse),iteration:0,nodeStatus:c,slideStatus:M},it)}})}},Nt=(P,c,M,it)=>{var nt,G,_,F,et,ct,bt,ht,X;null!==(nt=c.animate)&&void 0!==nt&&nt.value&&(0,d.a)(c,M.nodeStatus,M.slideStatus),null!==(G=c.interactive)&&void 0!==G&&G.show?(console.log(`node(${c.id}) | nodeStatus(${M.nodeStatus}) | slideStatus(${M.slideStatus}) | show`),((P,c,M,it)=>{var nt,G,_;let F={total:0,counter:0},{triggershow:et,triggerrun:ct,triggerhide:xt,action:bt,audio:X}=null!==(nt=null===(G=P.interactive)||void 0===G?void 0:G.show)&&void 0!==nt?nt:{};if(console.log(`node(${P.id}) | nodeStatus(${c}) | slideStatus(${M}) | show`),et){let{id:kt,ids:Pt,time:Gt,async:qt}=et;"asynctrue"==qt?setTimeout(()=>{(0,A.GD)({id:kt,ids:Pt,nodeStatus:c,slideStatus:M})}):"time"==qt&&setTimeout(()=>{(0,A.GD)({id:kt,ids:Pt,nodeStatus:c,slideStatus:M})},1e3*(null!=Gt?Gt:0))}if(ct){let{id:kt,ids:Pt,time:Gt,async:qt}=ct;"asynctrue"==qt?setTimeout(()=>{(0,A.MF)({id:kt,ids:Pt,nodeStatus:c,slideStatus:M})}):"time"==qt&&setTimeout(()=>{(0,A.MF)({id:kt,ids:Pt,nodeStatus:c,slideStatus:M})},1e3*(null!=Gt?Gt:0))}if(xt){let{id:kt,ids:Pt,time:Gt,async:qt}=xt;"asynctrue"==qt?setTimeout(()=>{(0,A.vi)({id:kt,ids:Pt,nodeStatus:c,slideStatus:M})}):"time"==qt&&setTimeout(()=>{(0,A.vi)({id:kt,ids:Pt,nodeStatus:c,slideStatus:M})},1e3*(null!=Gt?Gt:0))}let ht=()=>{setTimeout(()=>{if(F.counter>=F.total){if(it&&it(),et){let{id:kt,ids:Pt,async:Gt}=et;(!Gt||"asyncfalse"==Gt)&&(0,A.GD)({id:kt,ids:Pt,nodeStatus:c,slideStatus:M})}if(ct){let{id:kt,ids:Pt,async:Gt}=ct;(!Gt||"asyncfalse"==Gt)&&(0,A.MF)({id:kt,ids:Pt,nodeStatus:c,slideStatus:M})}if(xt){let{id:kt,ids:Pt,async:Gt}=xt;(!Gt||"asyncfalse"==Gt)&&(0,A.vi)({id:kt,ids:Pt,nodeStatus:c,slideStatus:M})}}})};if(null!=bt&&bt.value){F.total+=1;let kt=()=>{F.counter+=1,ht()};switch(null==bt?void 0:bt.value){case"hide":jQuery("#"+P.id).addClass("hide"),kt();break;case"points":{let{points:Pt,time:Gt,iteration:qt,finish:ie}=bt;(0,C.c)(P.id,{node:P,points:Pt,time:Gt,iteration:qt,finish:ie,nodeStatus:c,slideStatus:M},kt);break}default:{let{value:Pt,time:Gt,iteration:qt,finish:ie}=bt;(0,vt.h)(P.id,{node:P,value:Pt,time:Gt,iteration:qt,finish:ie,nodeStatus:c,slideStatus:M},kt);break}}}if(null!=X&&null!==(_=X.source)&&void 0!==_&&_.path){F.total+=1;let kt=()=>{F.counter+=1,ht()},Pt=(0,f.d)(P.id,X,F,{nodeStatus:c,slideStatus:M},kt);-1==(null==X?void 0:X.iteration)&&jQuery("#"+P.id).click(Gt=>{Gt.preventDefault(),Pt&&(Pt.volume=Pt.volume>=1?0:Pt.volume+.25),console.log(null==Pt?void 0:Pt.volume)})}F.total||ht()})(c,M.nodeStatus,M.slideStatus,it)):it&&it(),null!==(_=c.interactive)&&void 0!==_&&_.click&&(ht=null===(bt=c.interactive)||void 0===bt?void 0:bt.click,Object.keys(null!=ht?ht:{}).map(Pt=>ht[Pt]?1:0).includes(1)&&jQuery("#"+c.id).addClass("interactive-click"),jQuery("#"+c.id).click(ht=>{ht.preventDefault(),M.nodeStatus=st.refreshNodeStatus(),console.log(`node(${c.id}) | nodeStatus(${M.nodeStatus}) | slideStatus(${M.slideStatus}) | click`),(0,z.J)(c,M.nodeStatus,M.slideStatus)})),null!==(F=c.variable)&&void 0!==F&&F.input&&jQuery("#"+c.id).on("change","input,textarea",ht=>{ht.preventDefault(),((P,c,M)=>{var it,nt;E.L.variable.setValue(null!==(it=null===(nt=c.variable)||void 0===nt||null===(nt=nt.input)||void 0===nt?void 0:nt.variable)&&void 0!==it?it:"",P),(P=>{var c;let M=(it,nt)=>{null==it||it.forEach(G=>{switch(G.type){case rt.h.GROUP:(0,x.v)(G.id,{},nt?window.document.getElementById(nt):null),M(G.nodes,G.id);break;case rt.h.POLYGON:break;case rt.h.TEXT:(0,O.L)(G.id,{size:G.size,attribute:G.attribute,source:G.source},nt?window.document.getElementById(nt):null)}})};M(null===(c=P.svg)||void 0===c?void 0:c.nodes)})(M)})(ht.target.value,c,P)}),null!==(et=c.variable)&&void 0!==et&&et.click&&(null!==(X=c.variable)&&void 0!==X&&null!==(X=X.click)&&void 0!==X&&X.variable&&jQuery("#"+c.id).addClass("variable-click"),jQuery("#"+c.id).click(ht=>{ht.preventDefault(),((P,c)=>{var M;E.L.variable.setValueOperator(null===(M=P.variable)||void 0===M?void 0:M.click),(P=>{var c;let M=(it,nt)=>{null==it||it.forEach(G=>{switch(G.type){case rt.h.GROUP:(0,x.v)(G.id,{},nt?window.document.getElementById(nt):null),M(G.nodes,G.id);break;case rt.h.POLYGON:break;case rt.h.TEXT:(0,O.L)(G.id,{size:G.size,attribute:G.attribute,source:G.source},nt?window.document.getElementById(nt):null)}})};M(null===(c=P.svg)||void 0===c?void 0:c.nodes)})(c)})(c,P)})),"test"==(null===(ct=c.source)||void 0===ct?void 0:ct.type)&&((P,c)=>{var M;let it=()=>{};switch(null===(M=P.source)||void 0===M||null===(M=M.test)||void 0===M?void 0:M.type){case"truefalse":{jQuery("#"+P.id).click(_=>{_.preventDefault(),((P,c,M,it,nt)=>{var G,_;let F=null===(G=P.source)||void 0===G||null===(G=G.test)||void 0===G||null===(G=G.truefalse)||void 0===G?void 0:G.iscorrect;c.test?c.test.answer?c.test.answer.truefalse={value:P.id,iscorrect:F}:c.test.answer={truefalse:{value:P.id,iscorrect:F}}:c.test={answer:{truefalse:{value:P.id,iscorrect:F}}},null!==(_=c.svg)&&void 0!==_&&_.nodes.find(ct=>{var xt;return"submit"==(null===(xt=ct.source)||void 0===xt||null===(xt=xt.test)||void 0===xt?void 0:xt.type)})||Ct(P,c,M,it,{iscorrect:F},nt);let et=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(et,c,P)})(P,c,st.nodeStatus,st.slideStatus,it)});let G=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,c,P);break}case"singlechoice":{jQuery("#"+P.id).click(_=>{_.preventDefault(),((P,c,M,it,nt)=>{var G,_;let F=null===(G=P.source)||void 0===G||null===(G=G.test)||void 0===G||null===(G=G.singlechoice)||void 0===G?void 0:G.iscorrect;c.test?c.test.answer?c.test.answer.singlechoice={value:P.id,iscorrect:F}:c.test.answer={singlechoice:{value:P.id,iscorrect:F}}:c.test={answer:{singlechoice:{value:P.id,iscorrect:F}}},null!==(_=c.svg)&&void 0!==_&&_.nodes.find(ct=>{var xt;return"submit"==(null===(xt=ct.source)||void 0===xt||null===(xt=xt.test)||void 0===xt?void 0:xt.type)})||Ct(P,c,M,it,{iscorrect:F},nt);let et=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(et,c,P)})(P,c,st.nodeStatus,st.slideStatus,it)});let G=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,c,P);break}case"multichoice":{jQuery("#"+P.id).click(_=>{_.preventDefault(),((P,c,M,it,nt)=>{var G,_;let F=null===(G=P.source)||void 0===G||null===(G=G.test)||void 0===G||null===(G=G.multichoice)||void 0===G?void 0:G.iscorrect;c.test?c.test.answer?c.test.answer.multichoice?c.test.answer.multichoice.find(ct=>ct.value==P.id)?c.test.answer.multichoice=c.test.answer.multichoice.filter(ct=>ct.value!=P.id):c.test.answer.multichoice.push({value:P.id,iscorrect:F}):c.test.answer.multichoice=[{value:P.id,iscorrect:F}]:c.test.answer={multichoice:[{value:P.id,iscorrect:F}]}:c.test={answer:{multichoice:[{value:P.id,iscorrect:F}]}},null!==(_=c.svg)&&void 0!==_&&_.nodes.find(ct=>{var xt;return"submit"==(null===(xt=ct.source)||void 0===xt||null===(xt=xt.test)||void 0===xt?void 0:xt.type)})||Ct(P,c,M,it,{iscorrect:F},nt);let et=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(et,c,P)})(P,c,st.nodeStatus,st.slideStatus,it)});let G=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,c,P);break}case"fill":{var nt;jQuery("#"+P.id).on("keyup",'input[type="text"]',_=>{var F;let et=jQuery("<div/>").css({"font-size":jQuery(_.target).css("font-size"),visibility:"hidden",float:"left"}).text(_.target.value).appendTo(window.document.body);jQuery(_.target).css({width:(null!==(F=et.width())&&void 0!==F?F:0)+30})}).on("keypress",'input[type="text"]',_=>{13===(_.keyCode||_.charCode||_.which)&&(_.preventDefault(),_.stopPropagation(),jQuery(_.target).blur())}).on("change",'input[type="text"]',_=>{var F,et;let ct=null===(F=_.target)||void 0===F?void 0:F.getAttribute("data-key"),xt=null===(et=_.target)||void 0===et||null===(et=et.value)||void 0===et?void 0:et.trim();jQuery("#"+P.id).find(`input[type="text"][data-key="${ct}"]`).val(xt),((P,c,M,it,nt,G)=>{var _,F,et,ct;let{value:xt}=null!==(_=null===(F=P.source)||void 0===F||null===(F=F.test)||void 0===F||null===(F=F.fill)||void 0===F?void 0:F.find(ht=>ht.key==`[[${nt.key}]]`))&&void 0!==_?_:{},bt=xt&&xt.map(ht=>null==ht?void 0:ht.toLocaleLowerCase()).includes(null===(et=nt.value)||void 0===et?void 0:et.toLocaleLowerCase());nt.iscorrect=bt,c.test?c.test.answer?c.test.answer.fill?c.test.answer.fill.find(ht=>ht.key==nt.key)?c.test.answer.fill.filter(ht=>ht.key==nt.key).forEach(ht=>{ht.value=nt.value,ht.iscorrect=nt.iscorrect}):c.test.answer.fill.push(nt):c.test.answer.fill=[nt]:c.test.answer={fill:[nt]}:c.test={answer:{fill:[nt]}};let X=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(X,c,P),null!==(ct=c.svg)&&void 0!==ct&&ct.nodes.find(ht=>{var kt;return"submit"==(null===(kt=ht.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)})||Ct(P,c,M,it,{iscorrect:bt},G)})(P,c,st.nodeStatus,st.slideStatus,{id:P.id,key:ct,value:xt},it)}),null!==(nt=c.test)&&void 0!==nt&&nt.showselection||jQuery("#"+P.id).addClass("hide-selection");let G=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,c,P);break}case"matching-empty":{jQuery("#"+P.id).on("touchmove",".ondrag-item",function(_){_.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(_){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${P.size.height/P.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${_.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(_){var F;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(F=c.test)&&void 0!==F&&F.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),ne(P,c)},drag:function(_){},dragend:function(_){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${P.id} .ondrop-here`).kendoDropTarget({dragenter:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.addClass("focused")},dragleave:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.removeClass("focused")},drop:function(_){if(!_.dropTarget.hasClass("actived"))return;_.dropTarget.removeClass("focused");let F=_.dropTarget,et=_.draggable.currentTarget;F.is(":empty")||F.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),et.appendTo(F);let ct=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(ct,c,P),((P,c,M,it,nt,G)=>{var _,F,et;let{key:ct}=null!==(_=null===(F=P.source)||void 0===F||null===(F=F.test)||void 0===F?void 0:F.matching)&&void 0!==_?_:{key:"KIEN"},xt=nt.key==ct;ne(P,c);let bt={id:P.id,key:null!=ct?ct:"",value:nt.key};c.test?c.test.answer?c.test.answer.matching?c.test.answer.matching.find(X=>X.id==bt.id)?c.test.answer.matching.filter(X=>X.id==bt.id).forEach(X=>{X.key=bt.key,X.value=bt.value}):c.test.answer.matching.push(bt):c.test.answer.matching=[bt]:c.test.answer={matching:[bt]}:c.test={answer:{matching:[bt]}},null!==(et=c.svg)&&void 0!==et&&et.nodes.find(X=>{var ht;return"submit"==(null===(ht=X.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)})||Ct(P,c,M,it,{iscorrect:xt},G)})(P,c,st.nodeStatus,st.slideStatus,{key:et.data("key")},it)}});let G=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,c,P);break}case"matching-content":{jQuery("#"+P.id).on("touchmove",".ondrag-item",function(_){_.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(_){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${P.size.height/P.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${_.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(_){var F;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(F=c.test)&&void 0!==F&&F.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(_){},dragend:function(_){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${P.id} .ondrop-here`).kendoDropTarget({dragenter:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.addClass("focused")},dragleave:function(_){_.dropTarget.hasClass("actived")&&_.dropTarget.removeClass("focused")},drop:function(_){if(!_.dropTarget.hasClass("actived"))return;_.dropTarget.removeClass("focused");let F=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(F,c,P),_.draggable.currentTarget.appendTo(_.dropTarget),zt(c,st.nodeStatus,st.slideStatus,it)}});let G=(0,J.RY)(k.F.TEST_GROUP,"g",void 0,E.L.target);(0,J.kE)(G,c,P);break}case"speech":break;case"submit":jQuery("#"+P.id).click(G=>{G.preventDefault(),((P,c,M,it,nt)=>{var G,_,F,et,ct;let xt;var bt;if(null!=c&&null!==(G=c.test)&&void 0!==G&&null!==(G=G.answer)&&void 0!==G&&G.truefalse)xt=null==c||null===(bt=c.test)||void 0===bt||null===(bt=bt.answer)||void 0===bt||null===(bt=bt.truefalse)||void 0===bt?void 0:bt.iscorrect;else if(null!=c&&null!==(_=c.test)&&void 0!==_&&null!==(_=_.answer)&&void 0!==_&&_.singlechoice){var X;xt=null==c||null===(X=c.test)||void 0===X||null===(X=X.answer)||void 0===X||null===(X=X.singlechoice)||void 0===X?void 0:X.iscorrect}else if(null!=c&&null!==(F=c.test)&&void 0!==F&&null!==(F=F.answer)&&void 0!==F&&F.multichoice){var ht,kt,Pt;xt=1==[null==c||null===(ht=c.test)||void 0===ht||null===(ht=ht.answer)||void 0===ht||null===(ht=ht.multichoice)||void 0===ht?void 0:ht.length,null==c||null===(kt=c.test)||void 0===kt||null===(kt=kt.answer)||void 0===kt||null===(kt=kt.multichoice)||void 0===kt||null===(kt=kt.map(ae=>ae.iscorrect?1:0))||void 0===kt?void 0:kt.reduce((ae,se)=>ae+se),null==c||null===(Pt=c.svg)||void 0===Pt||null===(Pt=Pt.nodes)||void 0===Pt||null===(Pt=Pt.filter(ae=>{var se,me;return"multichoice"==(null===(se=ae.source)||void 0===se||null===(se=se.test)||void 0===se?void 0:se.type)&&(null===(me=ae.source)||void 0===me||null===(me=me.test)||void 0===me||null===(me=me.multichoice)||void 0===me?void 0:me.iscorrect)}))||void 0===Pt?void 0:Pt.length].filter((ae,se,me)=>me.indexOf(ae)==se).length}else if(null!=c&&null!==(et=c.test)&&void 0!==et&&null!==(et=et.answer)&&void 0!==et&&et.fill){var Gt,qt;xt=(null==c||null===(Gt=c.test)||void 0===Gt||null===(Gt=Gt.answer)||void 0===Gt||null===(Gt=Gt.fill)||void 0===Gt||null===(Gt=Gt.map(ae=>ae.iscorrect?1:0))||void 0===Gt?void 0:Gt.reduce((ae,se)=>ae+se))==(null===(qt=c.svg)||void 0===qt||null===(qt=qt.nodes)||void 0===qt||null===(qt=qt.filter(ae=>{var se;return"fill"==(null===(se=ae.source)||void 0===se||null===(se=se.test)||void 0===se?void 0:se.type)}))||void 0===qt?void 0:qt.length)}else if(null!=c&&null!==(ct=c.test)&&void 0!==ct&&null!==(ct=ct.answer)&&void 0!==ct&&ct.matching){var ie,ye;xt=(null===(ie=c.svg)||void 0===ie||null===(ie=ie.nodes)||void 0===ie||null===(ie=ie.filter(ae=>{var se;return"matching-empty"==(null===(se=ae.source)||void 0===se||null===(se=se.test)||void 0===se?void 0:se.type)}))||void 0===ie?void 0:ie.length)==((null==c||null===(ye=c.test)||void 0===ye||null===(ye=ye.answer)||void 0===ye?void 0:ye.matching)||[]).map(ae=>ae.key==ae.value?1:0).reduce((ae,se)=>ae+se)}Ct(P,c,M,it,{iscorrect:xt},nt)})(P,c,st.nodeStatus,st.slideStatus,it)})}})(c,P)};var wt=v(1281),D=v(6153),W=v(3069),s=v(7945),tt=v(3477),_t=v(745),Lt=v(6407),Dt=v(3617),Bt=v(4669);const Vt=(P,c,M)=>{if(M.slideStatus!=st.slideStatus||!c.length)return;let it=c.shift(),nt=P.filter(et=>{var ct;return(null!==(ct=et.idx)&&void 0!==ct?ct:0)==it});if(!nt.length)return;let G=Math.max.apply(null,nt.map(et=>{var ct;return null!==(ct=et.time)&&void 0!==ct?ct:0})),_=!1,F=G<.5?0:setTimeout(()=>{_||(_=!0,Vt(P,c,M))},1e3*G);re(P,c,nt,0,M,{idx:it,total:nt.length,counter:0,isRecursive:_,timeoutRecursive:F,maxTimeCoundown:G,uid:Math.floor(1e9*Math.random())})},re=(P,c,M,it,nt,G)=>{if(nt.slideStatus!=st.slideStatus)return;let _=M[it];if(_){switch(_.type){case rt.h.GROUP:break;case rt.h.CIRCLE:(0,wt.K)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.ELLIPSE:(0,D.W)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.LINE:(0,W.q)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.RECT:(0,s.a)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.POLYGON:(0,tt.u)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.POLYLINE:(0,Dt.E)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.FOREIGNOBJECT:(0,_t.$)(_.id,{size:_.size,attribute:_.attribute,style:_.style,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.IMAGE:(0,R.B)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.TEXT:(0,O.L)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.TSPAN:(0,Bt.M)(_.id,{size:_.size,attribute:_.attribute,source:_.source},_.pid?window.document.getElementById(_.pid):null);break;case rt.h.PATH:(0,Lt.X)(_.id,{size:_.size,attribute:_.attribute},_.pid?window.document.getElementById(_.pid):null)}Nt(nt.slide,_,nt,()=>{G.counter+=1,G.maxTimeCoundown<.5&&G.counter>=G.total&&(G.total=G.counter=0,G.isRecursive||(clearTimeout(G.timeoutRecursive),G.isRecursive=!0,setTimeout(()=>{Vt(P,c,nt)},250)))}),re(P,c,M,++it,nt,G)}},st=new class Rt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(c){this._dataSource=c.data||{},E.L.variable.set=c.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var c,M;return null!==(c=null===(M=this._dataSource)||void 0===M||null===(M=M.slides)||void 0===M?void 0:M.length)&&void 0!==c?c:0}get slides(){var c;return(null===(c=this._dataSource)||void 0===c?void 0:c.slides)||[]}get slide(){var c;return((null===(c=this._dataSource)||void 0===c?void 0:c.slides)||[])[this._slideIdx]||{}}findNode(c){var M;let it=null===(M=this._dataSource)||void 0===M||null===(M=M.slides)||void 0===M?void 0:M.find((X,ht)=>ht==this._slideIdx),nt=null==it?void 0:it.svg,G=(X,ht)=>{let kt=null==X?void 0:X.find(qt=>qt.id==c);if(kt)return kt.pid=ht,kt;let Pt=0,Gt=X.length||0;for(;Pt<Gt&&!kt&&(kt=G(X[Pt].nodes||[],X[Pt].id),!kt);)Pt++;return kt},_=G((null==nt?void 0:nt.nodes)||[]);var F,et,ct,xt,bt;return _?(_.style=null!==(F=_.style)&&void 0!==F?F:{},_.source=null!==(et=_.source)&&void 0!==et?et:{},_.animate=null!==(ct=_.animate)&&void 0!==ct?ct:{},_.interactive=null!==(xt=_.interactive)&&void 0!==xt?xt:{},_.variable=null!==(bt=_.variable)&&void 0!==bt?bt:{},_):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(c,M,it){var nt;let G;var _,F;if(this.refreshNodeStatus(),this.refreshSlideStatus(),it)G=null===(_=this._dataSource)||void 0===_||null===(_=_.slides)||void 0===_?void 0:_.find(bt=>bt.code==it||bt.id==it),G&&(this._slideIdx=(null===(F=this._dataSource)||void 0===F||null===(F=F.slides)||void 0===F?void 0:F.indexOf(G))||0);else if(M){var et,ct;G=null===(et=this._dataSource)||void 0===et||null===(et=et.slides)||void 0===et?void 0:et.find(bt=>bt.id==M),G&&(this._slideIdx=(null===(ct=this._dataSource)||void 0===ct||null===(ct=ct.slides)||void 0===ct?void 0:ct.indexOf(G))||0)}else this._slideIdx=Math.min(Math.max(c||0,0),this.slideTotal-1),G=this.slide;if(G){var xt;Xt(E.L.container,E.L.svg,G,!0),null===(xt=jQuery(E.L.svg).find("#"+k.F.BACKGROUND_GROUP))||void 0===xt||xt.empty();let bt=(0,J.RY)(k.F.BACKGROUND_GROUP,"g",void 0,E.L.svg);(0,J.I6)(bt,G),(P=>{var c,M,it,nt;let G=st.nodeStatus,_=st.slideStatus;null===(c=P.svg)||void 0===c||c.nodes.forEach(et=>{et.pid=Math.ceil(1e9*Math.random()),(0,x.v)(et.pid)});let F=null===(M=P.svg)||void 0===M||null===(M=M.nodes)||void 0===M?void 0:M.map(et=>{var ct;return null!==(ct=et.idx)&&void 0!==ct?ct:0}).filter((et,ct,xt)=>xt.indexOf(et)==ct).sort((et,ct)=>(null!=et?et:0)-(null!=ct?ct:0));Vt(null!==(it=null===(nt=P.svg)||void 0===nt?void 0:nt.nodes)&&void 0!==it?it:[],null!=F?F:[],{slide:P,nodeStatus:G,slideStatus:_})})(G)}this.changeSlide(this.slides,null===(nt=this.slide)||void 0===nt?void 0:nt.id,this.slideIdx,this.slides.length,G)}set onChangeSlide(c){this._fnChangeSlides.push(c)}changeSlide(c,M,it,nt,G){this._fnChangeSlides.forEach(_=>_(c,M,it,nt,G))}},Xt=(P,c,M,it)=>{var nt,G,_,F;let et=window.document.querySelector(c);var ct;et||(et=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(ct=window.document.querySelector(P))||void 0===ct||ct.appendChild(et)),it&&(et.textContent=null);let{x:xt,y:bt,width:X,height:ht}=null!==(nt=null==M||null===(G=M.svg)||void 0===G?void 0:G.viewBox)&&void 0!==nt?nt:E.L.screen.frameSize;et.setAttributeNS(null,"viewBox",xt+" "+bt+" "+X+" "+ht),et.setAttribute("id",c.replace("#",""));var ie,ye,kt=null!==(_=jQuery(P).width())&&void 0!==_?_:1080,Pt=null!==(F=jQuery(P).height())&&void 0!==F?F:1080,qt=X/ht;qt>=kt/Pt?ye=(ie=kt)/qt:ie=(ye=Pt)*qt,et.setAttributeNS(null,"width",ie.toString()),et.setAttributeNS(null,"height",ye.toString())}},7050:(he,Mt,v)=>{v.d(Mt,{M:()=>rt,a:()=>E});var k=v(5619);const E=(vt,C,f)=>{var A;let{value:O}=null!==(A=vt.animate)&&void 0!==A?A:{};rt(vt.id,{node:vt,value:O,nodeStatus:C,slideStatus:f},()=>{})},rt=(vt,C,f)=>{var A;if(!C.value)return void f();let K=jQuery("#"+vt).parents("g");if(!K.length)return void f();let{size:O}=C.node;K.css("transform-origin",`${O.x+O.width/2}px ${O.y+O.height/2}px`);let x="",w=null!==(A=C.iteration)&&void 0!==A?A:0,H=[];(C.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?H.push(C.value):C.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(C.value)?(H.push("animation"),H.push(`animation-${C.value}`)):(H.push("animate__animated"),H.push(`animate__${C.value}`)):(H.push("animation"),H.push("animation-fadein")),w<0?(H.push("animation-iteration-infinite"),f(),f=function(){}):w>0&&H.push("animation-iteration-"+(w+1)),x=H.join(" "),function(lt){let d=function(){K.data("animate-running")?K.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){K.data("animate-running",!1),setTimeout(function(){lt()},100)}):lt()};K.hasClass("animation")?setTimeout(function(){d()}):d()}(function(){var lt;z(vt),(w>0||w<0)&&K.one("animationiteration",function(){C.slideStatus===k.J.slideStatus||(K.data("animate-running",!1),z(vt),C.slideStatus===k.J.slideStatus&&f())}),K.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(K.data("animate-running",!1),z(vt),C.finish){default:case 0:case 1:break;case 2:var d;rt(vt,{node:C.node,value:null===(d=C.node.animate)||void 0===d?void 0:d.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{K.addClass("hide")})}C.slideStatus===k.J.slideStatus&&f()}),K.attr("data-class",null!==(lt=K.attr("class"))&&void 0!==lt?lt:""),K.addClass(x),K.data("animate-running",!0)})},z=function(vt){var C,f,A=jQuery("#"+vt).parents("g"),K=null===(C=A.attr("class"))||void 0===C?void 0:C.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),O=null===(f=A.attr("class"))||void 0===f?void 0:f.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);K&&K.forEach(function(w){jQuery(A).removeClass(w)}),O&&O.forEach(function(w){jQuery(A).removeClass(w)});let x=A.attr("data-class");x&&(A.attr("class",x),A.removeAttr("data-class")),jQuery(A).data("animation-running",!1)}},8946:(he,Mt,v)=>{v.d(Mt,{h:()=>rt});var k=v(5619),E=v(7050);const rt=(vt,C,f)=>{var A;if(!C.value)return void f();let K=jQuery("#"+vt).parents("g");if(!K.length)return void f();let{size:O}=C.node;K.css("transform-origin",`${O.x+O.width/2}px ${O.y+O.height/2}px`);let x="",w=null!==(A=C.iteration)&&void 0!==A?A:0,H=[];(C.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?H.push(C.value):(H.push("animation"),H.push(C.value?"animation-"+C.value:"animation-fadein")),w<0?(H.push("animation-iteration-infinite"),f(),f=function(){}):w>0&&H.push("animation-iteration-"+(w+1)),x=H.join(" "),function(lt){let d=function(){K.data("animate-running")?K.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){K.data("animate-running",!1),setTimeout(function(){lt()},100)}):lt()};K.hasClass("animation")?setTimeout(function(){d()}):d()}(function(){var lt;z(vt),(w>0||w<0)&&K.one("animationiteration",function(){C.slideStatus===k.J.slideStatus||(K.data("animate-running",!1),z(vt),C.slideStatus===k.J.slideStatus&&f())}),K.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(K.data("animate-running",!1),z(vt),C.finish){default:case 0:case 1:break;case 2:var d;(0,E.M)(vt,{node:C.node,value:null===(d=C.node.animate)||void 0===d?void 0:d.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{K.addClass("hide")})}C.slideStatus===k.J.slideStatus&&f()}),K.attr("data-class",null!==(lt=K.attr("class"))&&void 0!==lt?lt:""),K.addClass(x),K.data("animate-running",!0)})},z=function(vt){var C,f=jQuery("#"+vt).parents("g"),A=null===(C=f.attr("class"))||void 0===C?void 0:C.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);A&&A.forEach(function(O){jQuery(f).removeClass(O)});let K=f.attr("data-class");K&&(f.attr("class",K),f.removeAttr("data-class")),jQuery(f).data("animation-running",!1)}},7657:(he,Mt,v)=>{v.d(Mt,{c:()=>vt});var k=v(9506),E=v(5619),rt=v(5970),z=v(7050);const vt=(f,A,K)=>{var O;if(!A.points||!A.points.length)return void K();let x=jQuery("#"+f),H=function C(f){let A=[];2===f.length&&f.splice(1,0,[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]);let H,Z,lt,K=1,O=f.length;for(;K<O;){if(H=f[K-1],Z=f[K],lt=f[K+1],(Math.abs(H[0]-Z[0])>=15||Math.abs(H[1]-Z[1])>=15)&&Math.pow(H[0]-Z[0],2)+Math.pow(H[1]-Z[1],2)>=Math.pow(15,2)&&lt&&(Math.abs(H[0]-lt[0])<=20||Math.abs(H[1]-lt[1])<=20)&&Math.pow(H[0]-lt[0],2)+Math.pow(H[1]-lt[1],2)<=Math.pow(20,2))A.push(Z);else{let R=Z[0]-H[0],b=Z[1]-H[1],B=Math.max(Math.abs(R),Math.abs(b));for(var d=0;d<B;d+=15)A.push([H[0]+R*d/B,H[1]+b*d/B])}K++}return O>0&&(A.splice(0,0,f[0]),A.push(f[O-1])),A}((Kt=>{if(1==Kt.length){let{size:dt}=A.node;return[[dt.x+dt.width/2,dt.y+dt.height/2],...Kt]}return[...Kt]})(A.points||[])),Z=null!==(O=A.iteration)&&void 0!==O?O:0;if(Z<0&&(K(),K=function(){}),x.data("work-running")&&Z<0)return;x.data("work-running",!0);let J,lt=H.length,d=Math.max(20,1e3*(A.time||3)/lt),{id:R,type:b,size:B,attribute:pt}=E.J.findNode(f),gt=function(Kt){if(A.slideStatus!==E.J.slideStatus)return x.data("work-running",!1),void(A.slideStatus===E.J.slideStatus&&K());if(Kt<lt){let V=H[Kt];V&&(J=Object.assign({},B,{x:V[0]-B.width/2,y:V[1]-B.height/2}),Object.assign(pt,(0,k.xW)(b,J,pt)),(0,rt.tD)(window.document.getElementById(R),pt),setTimeout(function(){gt(++Kt)},d))}else if(Z>0)Z--,gt(1);else if(Z<0)gt(1);else switch(x.data("work-running",!1),A.slideStatus===E.J.slideStatus&&K(),A.finish){default:case 0:break;case 1:Object.assign(pt,(0,k.xW)(b,B,pt)),(0,rt.tD)(window.document.getElementById(R),pt);break;case 2:var dt;(0,z.M)(A.node.id,{node:A.node,value:null===(dt=A.node.animate)||void 0===dt?void 0:dt.out,nodeStatus:A.nodeStatus,slideStatus:A.slideStatus},()=>{x.addClass("hide")})}};gt(1)}},6769:(he,Mt,v)=>{v.d(Mt,{d:()=>rt});var k=v(6611),E=v(5619);const rt=(z,vt,C,f,A)=>{var K,O,x,w,H,Z,lt;if(f.slideStatus!=E.J.slideStatus)return vt.async&&"change-slide"!=vt.async?void 0:void A();if(f.nodeStatus!=E.J.nodeStatus&&(!vt.async||"change-node"==vt.async))return void A();if(!(null!==(K=vt.source)&&void 0!==K&&K.path||null!==(O=vt.source)&&void 0!==O&&O.url))return console.warn(`${z} -> audio no source!`),A(),void(A=()=>{});var d=jQuery("#"+z);let R=null!==(x=vt.iteration)&&void 0!==x?x:0;if(R<0&&(A(),A=function(){}),!(d.data("audio-running")&&R<0)){d.data("audio-running",!0);var b=function(pt){pt.pause(),pt.remove(),d.data("audio-running",!1)},B=new Audio;return B.autoplay=!0,B.loop=0!=R,B.preload="auto",B.controls=!0,B.setAttributeNode(document.createAttribute("playsinline")),B.addEventListener("canplay",function(){var pt=B.play();pt&&pt.then(function(J){var gt;d.data("audio-running",!0),"time"==vt.async?setTimeout(()=>{f.slideStatus===E.J.slideStatus&&(b(B),A(),A=()=>{})},1e3*(null!==(gt=vt.time)&&void 0!==gt?gt:1)):"non-stop"==vt.async&&(A(),A=()=>{})}).catch(function(J){d.data("audio-running",!1),f.slideStatus===E.J.slideStatus&&(A(),A=()=>{})})}),B.addEventListener("timeupdate",function(){switch(vt.async){case"time":case"change-slide":f.slideStatus!==E.J.slideStatus&&(b(this),A(),A=()=>{});break;case"finish-action":C.total>=2&&C.total-C.counter==1&&(b(this),A(),A=()=>{});break;default:case"change-node":f.nodeStatus!==E.J.nodeStatus&&(b(this),A(),A=()=>{});case"non-stop":}}),B.addEventListener("canplaythrough",function(){this.loop&&(R>0?R--:0==R&&(this.loop=!1))}),B.addEventListener("play",function(){}),B.addEventListener("pause",function(){}),B.addEventListener("ended",function(){this.remove(),d.data("audio-running",!1),f.slideStatus===E.J.slideStatus&&(A(),A=()=>{})}),B.onerror=function(){this.remove(),d.data("audio-running",!1),f.slideStatus===E.J.slideStatus&&(A(),A=()=>{})},B.src=(null!==(w=vt.source)&&void 0!==w&&w.path?(null===(H=k.L.config)||void 0===H?void 0:H.readfileuploadurl)+(null===(Z=vt.source)||void 0===Z?void 0:Z.path):null===(lt=vt.source)||void 0===lt?void 0:lt.url)||"",B}}},334:(he,Mt,v)=>{v.d(Mt,{J:()=>K});var k=v(6611),E=v(5619),rt=v(8946),z=v(7657),vt=v(6769),C=v(3591),f=v(2241),A=v(7050);const K=(O,x,w,H)=>{var Z,lt,d;let R={total:0,counter:0},{triggershow:b,triggerrun:B,triggerhide:pt,action:J,audio:gt,slide:Kt,media:dt}=null!==(Z=null===(lt=O.interactive)||void 0===lt?void 0:lt.click)&&void 0!==Z?Z:{};if(console.log(`node(${O.id}) | nodeStatus(${x}) | slideStatus(${w}) | click`),b){let{id:Tt,ids:ut,time:Qt,async:ne}=b;"asynctrue"==ne?(0,C.GD)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w}):"time"==ne&&setTimeout(()=>{(0,C.GD)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})},1e3*(null!=Qt?Qt:0))}if(B){let{id:Tt,ids:ut,time:Qt,async:ne}=B;"asynctrue"==ne?(0,C.MF)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w}):"time"==ne&&setTimeout(()=>{(0,C.MF)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})},1e3*(null!=Qt?Qt:0))}if(pt){let{id:Tt,ids:ut,time:Qt,async:ne}=pt;"asynctrue"==ne?(0,C.vi)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w}):"time"==ne&&setTimeout(()=>{(0,C.vi)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})},1e3*(null!=Qt?Qt:0))}let V=()=>{setTimeout(()=>{if(R.counter>=R.total){if(H&&H(),b){let{id:Tt,ids:ut,async:Qt}=b;(!Qt||"asyncfalse"==Qt)&&(0,C.GD)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})}if(B){let{id:Tt,ids:ut,async:Qt}=B;(!Qt||"asyncfalse"==Qt)&&(0,C.MF)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})}if(pt){let{id:Tt,ids:ut,async:Qt}=pt;(!Qt||"asyncfalse"==Qt)&&(0,C.vi)({id:Tt,ids:ut,nodeStatus:x,slideStatus:w})}}})};if(null!=J&&J.value){R.total+=1;let Tt=()=>{R.counter+=1,V()};switch(null==J?void 0:J.value){case"hide":var It;(0,A.M)(O.id,{node:O,value:null===(It=O.animate)||void 0===It?void 0:It.out,nodeStatus:x,slideStatus:w},()=>{jQuery("#"+O.id).addClass("hide"),Tt()});break;case"points":{let{points:ut,time:Qt,iteration:ne,finish:q}=J;ut&&(0,z.c)(O.id,{node:O,points:ut,time:Qt,iteration:ne,finish:q,nodeStatus:x,slideStatus:w},Tt);break}default:{let{value:ut,time:Qt,iteration:ne,finish:q}=J;(0,rt.h)(O.id,{node:O,value:ut,time:Qt,iteration:ne,finish:q,nodeStatus:x,slideStatus:w},Tt);break}}}if(null!=gt&&null!==(d=gt.source)&&void 0!==d&&d.path){R.total+=1;let Tt=()=>{R.counter+=1,V()};(0,vt.d)(O.id,gt,R,{nodeStatus:x,slideStatus:w},Tt)}if(R.total||V(),null!=Kt&&Kt.id)switch(Kt.id){case-1:E.J.runSlide(E.J.slideIdx-1);break;case-2:E.J.runSlide(E.J.slideIdx+1);break;default:var Et;E.J.runSlide(void 0,Kt.id,null===(Et=Kt.code)||void 0===Et?void 0:Et.toString())}if(null!=dt&&dt.type){var Y;let ut=`<div class="popup-media-viewer"><iframe src="${(0,f._)({readfileuploadurl:null===(Y=k.L.config)||void 0===Y?void 0:Y.readfileuploadurl,type:null==dt?void 0:dt.type,oss:null==dt?void 0:dt.oss,path:null==dt?void 0:dt.path,url:null==dt?void 0:dt.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,Qt=jQuery(ut).appendTo(window.document.body);Qt.find(".btn-close").click(function(ne){ne.preventDefault(),Qt.remove()})}}},3591:(he,Mt,v)=>{v.d(Mt,{GD:()=>z,MF:()=>vt,vi:()=>C});var k=v(5619),E=v(334),rt=v(7050);const z=f=>{f.id?jQuery("#"+f.id).removeClass("hide"):f.ids&&f.ids.forEach(A=>{jQuery("#"+A).removeClass("hide")})},vt=f=>{f.id?(jQuery("#"+f.id).removeClass("hide"),(0,E.J)(k.J.findNode(f.id),f.nodeStatus,f.slideStatus)):f.ids&&f.ids.forEach(A=>{jQuery("#"+A).removeClass("hide"),(0,E.J)(k.J.findNode(A),f.nodeStatus,f.slideStatus)})},C=f=>{if(f.id){var A;let K=k.J.findNode(f.id);(0,rt.M)(f.id,{node:K,value:null===(A=K.animate)||void 0===A?void 0:A.out,nodeStatus:f.nodeStatus,slideStatus:f.slideStatus},()=>{jQuery("#"+f.id).addClass("hide")})}else f.ids&&f.ids.forEach(K=>{var O;let x=k.J.findNode(K);(0,rt.M)(K,{node:x,value:null===(O=x.animate)||void 0===O?void 0:O.out,nodeStatus:f.nodeStatus,slideStatus:f.slideStatus},()=>{jQuery("#"+K).addClass("hide")})})}},5970:(he,Mt,v)=>{v.d(Mt,{cR:()=>B,rN:()=>gt,t8:()=>pt,fn:()=>Kt,RY:()=>Y,tD:()=>dt,KG:()=>It,c_:()=>V,s6:()=>J,I6:()=>Nt,in:()=>Tt,IA:()=>zt,KP:()=>Ct,AE:()=>ut,xJ:()=>q,D_:()=>Qt,kE:()=>wt});var k=v(1999),E=v(7873),rt=v(6315),vt=/^#?[a-fA-F0-9]+$/;const A=(D,W)=>{var s;if("none"==(D=null!==(s=D)&&void 0!==s?s:""))return"none";if("transparent"==D)return"rgba(0,0,0,0)";if(D.includes("rgba("))return D;if(D.includes("rgb(")&&(D=(0,rt.w)(D)),!(D=D.replace(/[^0-9a-fA-F]/g,"")))return"";if(!vt.test(D))return console.error(`hex2rgba -> ${D}: first argument has invalid hexadecimal characters`),"";if("#"===D[0]&&(D=D.slice(1)),3===D.length){let _t=D.split("");_t.splice(2,0,D[2]),_t.splice(1,0,D[1]),_t.splice(0,0,D[0]),D=_t.join("")}if(6!==D.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var tt=[parseInt(D.slice(0,2),16),parseInt(D.slice(2,4),16),parseInt(D.slice(4,6),16)];return W="number"==typeof W?W:parseFloat(W),tt.push(W>=0&&W<=1?W:1),"rgba("+tt.join(",")+")"};var K=v(2241),O=v(8779),x=v(6611),w=v(9841),H=v(7945),Z=v(9173),lt=v(1281),d=v(5619),R=v(745),b=v(6847);class B{constructor(W,s){let tt=window.document.querySelector(s);var _t;tt||(tt=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(_t=window.document.querySelector(W))||void 0===_t||_t.appendChild(tt));let{svgViewBox:Lt,svgSize:Dt}=x.L.screen.init();tt.setAttributeNS(null,"viewBox",`${Lt.x} ${Lt.y} ${Lt.width} ${Lt.height}`),tt.setAttribute("id",s.replace("#","")),tt.style.display="block",tt.style.width=`${Dt.width}px`,tt.style.height=`${Dt.height}px`,tt.style.backgroundColor="#fafafa",tt.style.cursor="default"}}const pt=D=>{jQuery(x.L.target).find("#"+E.F.BACKGROUND_GROUP).empty();let W=Y(E.F.BACKGROUND_GROUP,"g",void 0,x.L.target);Nt(W,D),(()=>{let s=window.document.getElementById(null==D?void 0:D.id);jQuery(s).find("#"+E.F.BACKGROUND_GROUP).empty();let tt=Y(E.F.BACKGROUND_GROUP,"g",void 0,s);Nt(tt,D)})()},J=()=>{let D=x.L.screen.svgViewBox,W=x.L.screen.svgSize;x.L.target&&(x.L.target.setAttributeNS(null,"viewBox",`${D.x} ${D.y} ${D.width} ${D.height}`),x.L.target.style.left=`${W.x}px`,x.L.target.style.top=`${W.y}px`,x.L.target.style.width=`${W.width}px`,x.L.target.style.height=`${W.height}px`)},gt=()=>{jQuery(x.L.target).find(">*:not(defs)").remove()},Kt=(D,W,s,tt,_t)=>{let Lt;return D?(Lt=jQuery(_t||x.L.target).find("#"+D).get(0),Lt||(Lt=window.document.createElementNS("http://www.w3.org/2000/svg",s),Lt.setAttribute("id",D),W==k.h.FOREIGNOBJECT&&Lt.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(Lt).appendTo(_t||x.L.target))):(Lt=window.document.createElementNS("http://www.w3.org/2000/svg",s),jQuery(Lt).appendTo(_t||x.L.target)),null!=tt&&tt.attribute&&dt(Lt,null==tt?void 0:tt.attribute),null!=tt&&tt.style&&V(Lt,null==tt?void 0:tt.style),null!=tt&&tt.source&&It(Lt,W,null==tt?void 0:tt.source),Lt},dt=(D,W)=>{return jQuery(D).attr((s=Object.assign({},W||{}),null===(tt=Object.keys(s))||void 0===tt||tt.forEach(Dt=>{switch(Dt){case"fill":break;case"fillRule":var Bt;Object.assign(s,{"fill-rule":null!==(Bt=s.fillRule)&&void 0!==Bt?Bt:null,fillRule:null});break;case"stroke":var Wt;Object.assign(s,{"stroke-width":null!==(Wt=s.strokeWidth)&&void 0!==Wt?Wt:null,strokeWidth:null});break;case"strokeLinecap":var Vt;Object.assign(s,{"stroke-linecap":null!==(Vt=s.strokeLinecap)&&void 0!==Vt?Vt:null,strokeLinecap:null});break;case"strokeLinejoin":var re;Object.assign(s,{"stroke-linejoin":null!==(re=s.strokeLinejoin)&&void 0!==re?re:null,strokeLinejoin:null});break;case"strokeMiterlimit":var Rt;Object.assign(s,{"stroke-miterlimit":null!==(Rt=s.strokeMiterlimit)&&void 0!==Rt?Rt:null,strokeMiterlimit:null});break;case"strokeDasharray":var st;Object.assign(s,{"stroke-dasharray":null!==(st=s.strokeDasharray)&&void 0!==st?st:null,strokeDasharray:null});break;case"strokeDasharrays":var Xt,P;Object.assign(s,{"stroke-dasharray":null!==(Xt=null===(P=s.strokeDasharrays)||void 0===P?void 0:P.join(" "))&&void 0!==Xt?Xt:null,strokeDasharrays:null});break;case"fontFamily":var c;Object.assign(s,{"font-family":null!==(c=s.fontFamily)&&void 0!==c?c:null,fontFamily:null});break;case"fontWeight":var M;Object.assign(s,{"font-weight":null!==(M=s.fontWeight)&&void 0!==M?M:null,fontWeight:null});break;case"fontStyle":var it;Object.assign(s,{"font-style":null!==(it=s.fontStyle)&&void 0!==it?it:null,fontStyle:null});break;case"fontSize":var nt;Object.assign(s,{"font-size":null!==(nt=s.fontSize)&&void 0!==nt?nt:null,fontSize:null});break;case"textLength":Object.assign(s,{textLength:s.textLength?`${s.textLength}px`:null});break;case"letterSpacing":var G;Object.assign(s,{"letter-spacing":null!==(G=s.letterSpacing)&&void 0!==G?G:null,letterSpacing:null});break;case"wordSpacing":var _;Object.assign(s,{"word-spacing":null!==(_=s.wordSpacing)&&void 0!==_?_:null,wordSpacing:null});break;case"alignmentBaseline":var F;Object.assign(s,{"alignment-baseline":null!==(F=s.alignmentBaseline)&&void 0!==F?F:null,alignmentBaseline:null});break;case"dominantBaseline":var et;Object.assign(s,{"dominant-baseline":null!==(et=s.dominantBaseline)&&void 0!==et?et:null,dominantBaseline:null});break;case"textAnchor":var ct;Object.assign(s,{"text-anchor":null!==(ct=s.textAnchor)&&void 0!==ct?ct:null,textAnchor:null});break;case"textDecoration":var xt;Object.assign(s,{"text-decoration":null!==(xt=s.textDecoration)&&void 0!==xt?xt:null,textDecoration:null});break;case"transformOrigin":var bt;Object.assign(s,{"transform-origin":null!==(bt=s.transformOrigin)&&void 0!==bt?bt:null,transformOrigin:null})}}),Object.assign({},null!=s?s:{},{fill:null!=s&&s.fill?A(s.fill,null!==(_t=null==s?void 0:s.fillOpacity)&&void 0!==_t?_t:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=s&&s.stroke?A(s.stroke,null!==(Lt=null==s?void 0:s.strokeOpacity)&&void 0!==Lt?Lt:1):"rgba(0,0,0,0)",strokeOpacity:null}))),D;var s,tt,_t,Lt},V=(D,W)=>{return jQuery(D).css((s=Object.assign({},W||{}),null===(tt=Object.keys(s))||void 0===tt||tt.forEach(_t=>{switch(_t){case"padding":Object.assign(s,{padding:s.padding?`${s.padding}px`:null});break;case"borderWidth":var Lt;Object.assign(s,s.borderWidth&&s.borderColor?{"border-width":`${s.borderWidth}px`,"border-style":s.borderStyle||"solid","border-color":A(s.borderColor,null!==(Lt=s.borderOpacity)&&void 0!==Lt?Lt:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(s,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(s,{"border-radius":s.borderRadius?`${s.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var Dt;Object.assign(s,s.backgroundColor?{"background-color":A(s.backgroundColor,null!==(Dt=s.backgroundOpacity)&&void 0!==Dt?Dt:1)}:{"background-color":""}),Object.assign(s,{backgroundColor:null,backgroundOpacity:null})}}),s)),D;var s,tt},It=(D,W,s)=>{switch(W){case k.h.TEXT:var tt,_t;jQuery(D).text(null!==(tt=null==s||null===(_t=s.text)||void 0===_t?void 0:_t.textContent)&&void 0!==tt?tt:"");break;case k.h.TSPAN:var Lt,Dt;jQuery(D).text(null!==(Lt=null==s||null===(Dt=s.text)||void 0===Dt?void 0:Dt.textContent)&&void 0!==Lt?Lt:"");break;case k.h.IMAGE:var Bt,Wt,Vt,re,Rt;jQuery(D).attr("href",(null==s||null===(Bt=s.image)||void 0===Bt?void 0:Bt.base64)||(null!=s&&null!==(Wt=s.image)&&void 0!==Wt&&Wt.path?(null===(Vt=x.L.config)||void 0===Vt?void 0:Vt.readfileuploadurl)+(null==s||null===(re=s.image)||void 0===re?void 0:re.path):null==s||null===(Rt=s.image)||void 0===Rt?void 0:Rt.url)||"");break;case k.h.FOREIGNOBJECT:switch(null==s?void 0:s.type){case"text":var st,Xt;if(null!==(st=s.text)&&void 0!==st&&st.variableKeywords&&null!==(Xt=s.text)&&void 0!==Xt&&Xt.variableKeywords.length){var P;let h=x.L.variable.getKeys(),T=(null===(P=s.text)||void 0===P?void 0:P.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";s.text.variableKeywords.forEach(m=>{var N=m.replace(/[^a-zA-Z0-9_]/gm,"");if(h.indexOf(N)>=0){var I=x.L.variable.getValue(N);T=T.replace(m,I)}}),jQuery(D).text(T)}else{var c;jQuery(D).text((null===(c=s.text)||void 0===c?void 0:c.textContent)||"")}break;case"html":{var M,it,nt;let h=(null==s||null===(M=s.html)||void 0===M?void 0:M.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>';if(null!==(it=s.html)&&void 0!==it&&it.variableKeywords&&null!==(nt=s.html)&&void 0!==nt&&nt.variableKeywords.length){let T=x.L.variable.getKeys();s.html.variableKeywords.forEach(m=>{var N=m.replace(/[^a-zA-Z0-9_]/gm,"");if(T.indexOf(N)>=0){var I=x.L.variable.getValue(N);h=h.replace(m,I)}})}jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${h}</div>`).find("img[path],video[path],iframe[path]").each((T,m)=>{var N,I;m.setAttribute("src",(null!==(N=null===(I=x.L.config)||void 0===I?void 0:I.readfileuploadurl)&&void 0!==N?N:"")+m.getAttribute("path")),m.removeAttribute("path")});break}case"input":var G,_,F,et;if(null!==(G=s.input)&&void 0!==G&&G.input)jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(F=null===(et=s.input)||void 0===et?void 0:et.placeholder)&&void 0!==F?F:""}" maxlength="100" /></div>`);else if(null!==(_=s.input)&&void 0!==_&&_.textarea){var ct,xt;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(ct=null===(xt=s.input)||void 0===xt?void 0:xt.placeholder)&&void 0!==ct?ct:""}" maxlength="1000"></textarea></div>`)}break;case"image":var bt,X,ht,kt,Pt;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(bt=s.image)||void 0===bt?void 0:bt.base64)||(null!==(X=s.image)&&void 0!==X&&X.path?(null===(ht=x.L.config)||void 0===ht?void 0:ht.readfileuploadurl)+(null===(kt=s.image)||void 0===kt?void 0:kt.path):null===(Pt=s.image)||void 0===Pt?void 0:Pt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Gt,qt,ie,ye;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Gt=s.iframe)&&void 0!==Gt&&Gt.path?(null===(qt=x.L.config)||void 0===qt?void 0:qt.readfileuploadurl)+(null===(ie=s.iframe)||void 0===ie?void 0:ie.path):null===(ye=s.iframe)||void 0===ye?void 0:ye.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var ae,se,me,Pe,Le;let h=(0,K._)({readfileuploadurl:null===(ae=x.L.config)||void 0===ae?void 0:ae.readfileuploadurl,type:null===(se=s.embed)||void 0===se?void 0:se.type,oss:null===(me=s.embed)||void 0===me?void 0:me.oss,path:null===(Pe=s.embed)||void 0===Pe?void 0:Pe.path,url:null===(Le=s.embed)||void 0===Le?void 0:Le.url});jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${h}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var Ee,pe;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(Ee=null===(pe=s.svg)||void 0===pe?void 0:pe.svgContent)&&void 0!==Ee?Ee:""}</div>`);break;case"test":{var Te,Re,Be,Xe;let h=(null==s||null===(Te=s.html)||void 0===Te?void 0:Te.htmlContent)||"";if(null!==(Re=s.html)&&void 0!==Re&&Re.variableKeywords&&null!==(Be=s.html)&&void 0!==Be&&Be.variableKeywords.length){let T=x.L.variable.getKeys();s.html.variableKeywords.forEach(m=>{var N=m.replace(/[^a-zA-Z0-9_]/gm,"");if(T.indexOf(N)>=0){var I=x.L.variable.getValue(N);h=h.replace(m,I)}})}switch(null==s||null===(Xe=s.test)||void 0===Xe?void 0:Xe.type){case"truefalse":var qe;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(qe=s.test.truefalse)&&void 0!==qe&&qe.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"singlechoice":var Ve;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(Ve=s.test.singlechoice)&&void 0!==Ve&&Ve.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"multichoice":var ei;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(ei=s.test.multichoice)&&void 0!==ei&&ei.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"matching-empty":var li;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==s||null===(li=s.test.matching)||void 0===li?void 0:li.key}"></div>`);break;case"matching-content":var Ot,j,i;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==s||null===(Ot=s.test.matching)||void 0===Ot?void 0:Ot.key}"><div class="ondrag-item" data-key="${null!==(j=null==s||null===(i=s.test)||void 0===i||null===(i=i.matching)||void 0===i?void 0:i.key)&&void 0!==j?j:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div></div>`);break;case"fill":var r;((null===(r=s.html)||void 0===r?void 0:r.fillKeywords)||[]).forEach(T=>{var m=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${T.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;h=h.replace(new RegExp(T.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),m)}),jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"speech":jQuery(D).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var o,n,l,y,p;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(o=null!==(n=s.image)&&void 0!==n&&n.path?(null===(l=x.L.config)||void 0===l?void 0:l.readfileuploadurl)+(null===(y=s.image)||void 0===y?void 0:y.path):null===(p=s.image)||void 0===p?void 0:p.url)&&void 0!==o?o:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(D).find("img[path],video[path],iframe[path]").each((T,m)=>{var N,I;m.setAttribute("src",(null!==(N=null===(I=x.L.config)||void 0===I?void 0:I.readfileuploadurl)&&void 0!==N?N:"")+m.getAttribute("path")),m.removeAttribute("path")})}}}},Y=(D,W,s,tt)=>{let _t=jQuery(tt||x.L.target).find("#"+D).get(0);return _t||(_t=window.document.createElementNS("http://www.w3.org/2000/svg",W),_t.setAttribute("id",D),jQuery(_t).appendTo(tt||x.L.target)),jQuery(_t).attr((null==s?void 0:s.attribute)||{}),jQuery(_t).css((null==s?void 0:s.style)||{}),_t},Tt=(D,W)=>{let s=(0,w.$)(2),tt={fill:O.pZ.fill,stroke:O.pZ.stroke,"stroke-width":(0,w.$)(O.pZ.strokeWidth)};return[{element:Y("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:W.x-s,y:W.y-s,width:W.width+2*s,height:W.height+2*s},tt)},D),posType:"rect-center"}]},ut=(D,W)=>{let{size:s}=W,tt=(0,w.$)(1),_t=(0,w.$)(2),Lt=(0,w.$)(5),Dt={stroke:O.u$.stroke,"stroke-width":(0,w.$)(O.u$.strokeWidth),"stroke-linecap":O.u$.strokeLinecap},Bt={fill:O.bf.fill,stroke:O.bf.stroke,"stroke-width":(0,w.$)(O.bf.strokeWidth)},Wt={fill:O.eD.fill,stroke:O.eD.stroke,"stroke-width":(0,w.$)(O.eD.strokeWidth),width:(0,w.$)(O.eD.width),height:(0,w.$)(O.eD.height)};return Y("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:s.x-tt,y1:s.y,x2:s.x-tt,y2:s.y+s.height},Dt)},D),Y("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:s.x,y1:s.y-tt,x2:s.x+s.width,y2:s.y-tt},Dt)},D),Y("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:s.x+s.width+tt,y1:s.y,x2:s.x+s.width+tt,y2:s.y+s.height},Dt)},D),Y("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:s.x,y1:s.y+s.height+tt,x2:s.x+s.width,y2:s.y+s.height+tt},Dt)},D),[{element:Y("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:s.x,y:s.y,width:s.width,height:s.height},Bt),style:{cursor:"move"}},D),posType:"rect-center"},{element:Y("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y-Lt},Wt),style:{cursor:"nw-resize"}},D),posType:"rect-top-left"},{element:Y("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y-Lt},Wt),style:{cursor:"ne-resize"}},D),posType:"rect-top-right"},{element:Y("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y+s.height-_t},Wt),style:{cursor:"sw-resize"}},D),posType:"rect-bottom-left"},{element:Y("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y+s.height-_t},Wt),style:{cursor:"se-resize"}},D),posType:"rect-bottom-right"},{element:Y("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:s.x+s.width/2-_t-tt,y:s.y-Lt},Wt),style:{cursor:"n-resize"}},D),posType:"rect-top"},{element:Y("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y+s.height/2-_t-tt},Wt),style:{cursor:"e-resize"}},D),posType:"rect-right"},{element:Y("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:s.x+s.width/2-_t-tt,y:s.y+s.height-_t},Wt),style:{cursor:"s-resize"}},D),posType:"rect-bottom"},{element:Y("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y+s.height/2-_t-tt},Wt),style:{cursor:"w-resize"}},D),posType:"rect-left"}]},Qt=(D,W,s)=>{let tt=(0,w.$)(1),_t=(0,w.$)(2),Lt=(0,w.$)(5),Dt={stroke:O.u$.stroke,"stroke-width":(0,w.$)(O.u$.strokeWidth),"stroke-linecap":O.u$.strokeLinecap},Bt={fill:O.bf.fill,stroke:O.bf.stroke,"stroke-width":(0,w.$)(O.bf.strokeWidth)},Wt={fill:O.eD.fill,stroke:O.eD.stroke,"stroke-width":(0,w.$)(O.eD.strokeWidth),width:(0,w.$)(O.eD.width),height:(0,w.$)(O.eD.height)},Vt={fill:O.l6.fill,rx:(0,w.$)(O.l6.rx)},re={fill:O.T2.fill,"alignment-baseline":O.T2.alignmentBaseline,"text-anchor":O.T2.textAnchor,"font-size":(0,w.$)(O.T2.fontSize)},Rt={fill:O.IB.fill,stroke:O.IB.stroke,"stroke-width":(0,w.$)(O.IB.strokeWidth)},M=(Y("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:s.x-tt,y1:s.y,x2:s.x-tt,y2:s.y+s.height},Dt)},D),Y("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:s.x,y1:s.y-tt,x2:s.x+s.width,y2:s.y-tt},Dt)},D),Y("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:s.x+s.width+tt,y1:s.y,x2:s.x+s.width+tt,y2:s.y+s.height},Dt)},D),Y("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:s.x,y1:s.y+s.height+tt,x2:s.x+s.width,y2:s.y+s.height+tt},Dt)},D),Y("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:s.x,y:s.y,width:s.width,height:s.height},Bt)},D)),it=`${s.width} x ${s.height}`,nt=8*it.length;return Y("icdt-temp-select-rect-text","rect",{attribute:Object.assign({x:s.x+s.width/2-(0,w.$)(nt/2),y:s.y+s.height+(0,w.$)(10),width:(0,w.$)(nt),height:(0,w.$)(20)},Vt)},D),Y("icdt-temp-select-text","text",{attribute:Object.assign({x:s.x+s.width/2,y:s.y+s.height+(0,w.$)(20)},re)},D).textContent=it,W.length>1&&W.forEach(Pt=>{let{size:Gt}=Pt;Y("icdt-temp-select-rect-node-"+Pt.id,"rect",{attribute:Object.assign({x:Gt.x,y:Gt.y,width:Gt.width,height:Gt.height},Rt)},D)}),[{element:M,posType:"rect-center"},{element:Y("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y-Lt},Wt),style:{cursor:"nw-resize"}},D),posType:"rect-top-left"},{element:Y("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y-Lt},Wt),style:{cursor:"ne-resize"}},D),posType:"rect-top-right"},{element:Y("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y+s.height-_t},Wt),style:{cursor:"sw-resize"}},D),posType:"rect-bottom-left"},{element:Y("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y+s.height-_t},Wt),style:{cursor:"se-resize"}},D),posType:"rect-bottom-right"},{element:Y("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:s.x+s.width/2-_t-tt,y:s.y-Lt},Wt),style:{cursor:"n-resize"}},D),posType:"rect-top"},{element:Y("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:s.x+s.width-_t,y:s.y+s.height/2-_t-tt},Wt),style:{cursor:"e-resize"}},D),posType:"rect-right"},{element:Y("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:s.x+s.width/2-_t-tt,y:s.y+s.height-_t},Wt),style:{cursor:"s-resize"}},D),posType:"rect-bottom"},{element:Y("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:s.x-Lt,y:s.y+s.height/2-_t-tt},Wt),style:{cursor:"w-resize"}},D),posType:"rect-left"}]},q=(D,W)=>{let s=(0,w.$)(1),tt={stroke:O.u$.stroke,"stroke-width":(0,w.$)(O.u$.strokeWidth),"stroke-linecap":O.u$.strokeLinecap},_t={fill:O.bf.fill,stroke:O.bf.stroke,"stroke-width":(0,w.$)(O.bf.strokeWidth)};return Y("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:W.x-s,y1:W.y,x2:W.x-s,y2:W.y+W.height},tt)},D),Y("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:W.x,y1:W.y-s,x2:W.x+W.width,y2:W.y-s},tt)},D),Y("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:W.x+W.width+s,y1:W.y,x2:W.x+W.width+s,y2:W.y+W.height},tt)},D),Y("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:W.x,y1:W.y+W.height+s,x2:W.x+W.width,y2:W.y+W.height+s},tt)},D),[{element:Y("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:W.x,y:W.y,width:W.width,height:W.height},_t)},D),posType:"rect-center"}]},Ct=(D,W)=>((0,w.$)(-1),(0,w.$)(O.WR.strokeWidth),(0,w.$)(O.WR.strokeDasharray),Y("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:W.x,y:W.y,width:W.width,height:W.height,class:"cursor-draw"},{fill:O.lq.fill})},D),[]),zt=(D,W)=>{let s={fill:O.$u.fill,stroke:O.$u.stroke,"stroke-width":(0,w.$)(O.$u.strokeWidth),"stroke-dasharray":(0,w.$)(O.$u.strokeDasharray)};jQuery(D).empty(),W.forEach(tt=>{var _t,Lt;let{size:Dt}=tt;if(!tt.idx)return;Y("icdt-temp-index-rect-node-"+tt.id,"rect",{attribute:Object.assign({x:Dt.x-5,y:Dt.y-5,width:Dt.width+10,height:Dt.height+10},s)},D);let{element:Bt}=(0,R.$)(Math.ceil(1e9*Math.random()),{size:{x:Dt.x-76,y:Dt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(_t=tt.idx)&&void 0!==_t?_t:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(Lt=tt.time)&&void 0!==Lt?Lt:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},D);Bt.classList.add("node-input"),jQuery(Bt).on("change",'input[name="idx"]',Wt=>{var Vt;tt.idx=parseInt(null!==(Vt=Wt.target.value)&&void 0!==Vt?Vt:"0")}).on("change",'input[name="time"]',Wt=>{var Vt;tt.time=parseFloat(null!==(Vt=Wt.target.value)&&void 0!==Vt?Vt:"0")}).on("click",'button[name="remove"]',Wt=>{tt.idx=0,tt.time=null,zt(D,W)})})},Nt=(D,W)=>{var s,tt,_t,Lt,Dt,Bt;let{color:Wt,opacity:Vt,path:re,url:Rt,base64:st}=null!==(s=null==W||null===(tt=W.svg)||void 0===tt?void 0:tt.background)&&void 0!==s?s:{},{x:Xt,y:P,width:c,height:M}=null!==(_t=null==W||null===(Lt=W.svg)||void 0===Lt?void 0:Lt.viewBox)&&void 0!==_t?_t:{x:0,y:0,width:0,height:0};(0,b.L)(void 0,{size:{x:0,y:(0,w.$)(-10),width:100,height:20},attribute:{fill:"#999",textAnchor:"start",alignmentBaseline:"central",fontSize:(0,w.$)(12),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(Dt=null!==(Bt=null==W?void 0:W.name)&&void 0!==Bt?Bt:null==W?void 0:W.code)&&void 0!==Dt?Dt:void 0}}},D),(0,H.a)(void 0,{size:{x:Xt,y:P,width:c,height:M},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,w.$)(1),strokeDasharray:(0,w.$)(10),class:"hide-on-viewer"}},D),Wt&&(0,H.a)(void 0,{size:{x:Xt,y:P,width:c,height:M},attribute:{fill:Wt,fillOpacity:Vt}},D),re&&(0,Z.B)(void 0,{size:{x:Xt,y:P,width:c,height:M},source:{type:"image",image:{path:re,url:Rt,base64:st}}},D)},wt=(D,W,s)=>{var tt;switch(jQuery(D).empty(),null===(tt=W.test)||void 0===tt?void 0:tt.type){case"truefalse":var _t;if(null!==(_t=W.test)&&void 0!==_t&&_t.showselection){var Lt,Dt,Bt;let bt=null==W||null===(Lt=W.test)||void 0===Lt||null===(Lt=Lt.answer)||void 0===Lt||null===(Lt=Lt.truefalse)||void 0===Lt?void 0:Lt.value;null===(Dt=W.svg)||void 0===Dt||Dt.nodes.filter(X=>{var ht;return"truefalse"==(null===(ht=X.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)&&X.id!=bt}).forEach(X=>{var ht;let{x:Pt,y:Gt,width:qt,height:ie}=null!==(ht=null==X?void 0:X.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,lt.K)(Math.ceil(1e9*Math.random()),{size:{x:Pt-.5,y:Gt-.5,width:qt+1,height:ie+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},D)}),null!=W&&null!==(Bt=W.test)&&void 0!==Bt&&null!==(Bt=Bt.answer)&&void 0!==Bt&&Bt.truefalse&&bt&&(X=>{let ht=d.J.findNode(bt),{x:Pt,y:Gt,width:qt,height:ie}=null!==(X=null==ht?void 0:ht.size)&&void 0!==X?X:{x:0,y:0,width:0,height:0};(0,lt.K)(Math.ceil(1e9*Math.random()),{size:{x:Pt-2,y:Gt-2,width:qt+4,height:ie+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},D)})()}break;case"singlechoice":var Wt;if(null!==(Wt=W.test)&&void 0!==Wt&&Wt.showselection){var Vt,re,Rt;let bt=null==W||null===(Vt=W.test)||void 0===Vt||null===(Vt=Vt.answer)||void 0===Vt||null===(Vt=Vt.singlechoice)||void 0===Vt?void 0:Vt.value;null===(re=W.svg)||void 0===re||re.nodes.filter(X=>{var ht;return"singlechoice"==(null===(ht=X.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)&&X.id!=bt}).forEach(X=>{var ht;let{x:Pt,y:Gt,width:qt,height:ie}=null!==(ht=null==X?void 0:X.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,lt.K)(Math.ceil(1e9*Math.random()),{size:{x:Pt-.5,y:Gt-.5,width:qt+1,height:ie+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},D)}),null!=W&&null!==(Rt=W.test)&&void 0!==Rt&&null!==(Rt=Rt.answer)&&void 0!==Rt&&Rt.singlechoice&&bt&&(X=>{let ht=d.J.findNode(bt),{x:Pt,y:Gt,width:qt,height:ie}=null!==(X=null==ht?void 0:ht.size)&&void 0!==X?X:{x:0,y:0,width:0,height:0};(0,lt.K)(Math.ceil(1e9*Math.random()),{size:{x:Pt-2,y:Gt-2,width:qt+4,height:ie+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},D)})()}break;case"multichoice":var st;if(null!==(st=W.test)&&void 0!==st&&st.showselection){var Xt,P,c,M;let bt=null!==(Xt=null==W||null===(P=W.test)||void 0===P||null===(P=P.answer)||void 0===P||null===(P=P.multichoice)||void 0===P?void 0:P.map(X=>X.value))&&void 0!==Xt?Xt:[];var it;null===(c=W.svg)||void 0===c||c.nodes.filter(X=>{var ht;return"multichoice"==(null===(ht=X.source)||void 0===ht||null===(ht=ht.test)||void 0===ht?void 0:ht.type)&&!bt.includes(X.id)}).forEach(X=>{var ht;let{x:Pt,y:Gt,width:qt,height:ie}=null!==(ht=null==X?void 0:X.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,H.a)(Math.ceil(1e9*Math.random()),{size:{x:Pt-.5,y:Gt-.5,width:qt+1,height:ie+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},D)}),null!=W&&null!==(M=W.test)&&void 0!==M&&null!==(M=M.answer)&&void 0!==M&&M.multichoice&&bt.length&&(null==W||null===(it=W.test)||void 0===it||null===(it=it.answer)||void 0===it||it.multichoice.forEach(X=>{var ht;let kt=d.J.findNode(X.value),{x:Gt,y:qt,width:ie,height:ye}=null!==(ht=null==kt?void 0:kt.size)&&void 0!==ht?ht:{x:0,y:0,width:0,height:0};(0,H.a)(Math.ceil(1e9*Math.random()),{size:{x:Gt-2,y:qt-2,width:ie+4,height:ye+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},D)}))}break;case"fill":var nt,G;null!=W&&null!==(nt=W.test)&&void 0!==nt&&null!==(nt=nt.answer)&&void 0!==nt&&nt.fill&&(null==W||null===(G=W.test)||void 0===G||null===(G=G.answer)||void 0===G||G.fill.forEach(bt=>{jQuery("#"+s.id).find(`input[type="text"][data-key="${bt.key}"]`).val(bt.value)}));break;case"matching":var _,F,et,ct;if(null!=W&&null!==(_=W.test)&&void 0!==_&&null!==(_=_.answer)&&void 0!==_&&_.matching)if("matching-empty"==(null===(F=s.source)||void 0===F||null===(F=F.test)||void 0===F?void 0:F.type))null==W||null===(ct=W.test)||void 0===ct||null===(ct=ct.answer)||void 0===ct||ct.matching.filter(bt=>{var X;return bt.key==(null===(X=s.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.matching)||void 0===X?void 0:X.key)}).forEach(bt=>{});else if("matching-content"==(null===(et=s.source)||void 0===et||null===(et=et.test)||void 0===et?void 0:et.type)){var xt;null==W||null===(xt=W.test)||void 0===xt||null===(xt=xt.answer)||void 0===xt||xt.matching.filter(bt=>{var X;return bt.value==(null===(X=s.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.matching)||void 0===X?void 0:X.key)}).forEach(bt=>{})}}}},2241:(he,Mt,v)=>{v.d(Mt,{_:()=>rt});var k=v(8338);const rt=C=>{switch(null==C?void 0:C.type){case k.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+C.readfileuploadurl+C.path;case k.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+C.readfileuploadurl+C.path;case k.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+C.readfileuploadurl+C.path;case k.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+C.readfileuploadurl+C.path;case k.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+C.readfileuploadurl+C.path;case k.S.HTML:case k.S.IMAGE_ANIMATION:case k.S.PHET:return""+C.readfileuploadurl+C.path;case k.S.ZIP:case k.S.SCORM:var f;return"imsmanifest.xml"==(null===(f=C.path)||void 0===f||null===(f=f.split("/"))||void 0===f?void 0:f.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+C.readfileuploadurl+C.path:""+C.readfileuploadurl+C.path;case k.S.TRACK:case k.S.TEXT:return""+C.readfileuploadurl+C.path;case k.S.LINK:switch(C.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+C.url;case 1002:var A;return null!==(A=z(C.url))&&void 0!==A?A:"";case 1005:var K;return null!==(K=C.url)&&void 0!==K?K:"";default:var O;return null!==(O=C.url)&&void 0!==O?O:""}default:return""+C.readfileuploadurl+C.path}},z=C=>{let f=vt(C);return f?"https://www.youtube.com/embed/"+f+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},vt=C=>{let f=null==C?void 0:C.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return f&&f.length>=2?f[1]:null}},1131:(he,Mt,v)=>{function k(){}function E(t){return null==t?k:function(){return this.querySelector(t)}}function vt(){return[]}function C(t){return null==t?vt:function(){return this.querySelectorAll(t)}}function K(t){return function(){return this.matches(t)}}function O(t){return function(e){return e.matches(t)}}v.d(Mt,{qrM:()=>aa,n8j:()=>la});var x=Array.prototype.find;function H(){return this.firstElementChild}var lt=Array.prototype.filter;function d(){return Array.from(this.children)}function pt(t){return new Array(t.length)}function gt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function dt(t,e,a,u,g,S){for(var U,L=0,Q=e.length,ot=S.length;L<ot;++L)(U=e[L])?(U.__data__=S[L],u[L]=U):a[L]=new gt(t,S[L]);for(;L<Q;++L)(U=e[L])&&(g[L]=U)}function V(t,e,a,u,g,S,L){var U,Q,te,ot=new Map,ft=e.length,Jt=S.length,Ht=new Array(ft);for(U=0;U<ft;++U)(Q=e[U])&&(Ht[U]=te=L.call(Q,Q.__data__,U,e)+"",ot.has(te)?g[U]=Q:ot.set(te,Q));for(U=0;U<Jt;++U)te=L.call(t,S[U],U,S)+"",(Q=ot.get(te))?(u[U]=Q,Q.__data__=S[U],ot.delete(te)):a[U]=new gt(t,S[U]);for(U=0;U<ft;++U)(Q=e[U])&&ot.get(Ht[U])===Q&&(g[U]=Q)}function It(t){return t.__data__}function Y(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Ct(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}gt.prototype={constructor:gt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var tt="http://www.w3.org/1999/xhtml";const _t={svg:"http://www.w3.org/2000/svg",xhtml:tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lt(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),_t.hasOwnProperty(e)?{space:_t[e],local:t}:t}function Dt(t){return function(){this.removeAttribute(t)}}function Bt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Wt(t,e){return function(){this.setAttribute(t,e)}}function Vt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function re(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function Rt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function Xt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function P(t){return function(){this.style.removeProperty(t)}}function c(t,e,a){return function(){this.style.setProperty(t,e,a)}}function M(t,e,a){return function(){var u=e.apply(this,arguments);null==u?this.style.removeProperty(t):this.style.setProperty(t,u,a)}}function nt(t,e){return t.style.getPropertyValue(e)||Xt(t).getComputedStyle(t,null).getPropertyValue(e)}function G(t){return function(){delete this[t]}}function _(t,e){return function(){this[t]=e}}function F(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function ct(t){return t.trim().split(/^|\s+/)}function xt(t){return t.classList||new bt(t)}function bt(t){this._node=t,this._names=ct(t.getAttribute("class")||"")}function X(t,e){for(var a=xt(t),u=-1,g=e.length;++u<g;)a.add(e[u])}function ht(t,e){for(var a=xt(t),u=-1,g=e.length;++u<g;)a.remove(e[u])}function kt(t){return function(){X(this,t)}}function Pt(t){return function(){ht(this,t)}}function Gt(t,e){return function(){(e.apply(this,arguments)?X:ht)(this,t)}}function ie(){this.textContent=""}function ye(t){return function(){this.textContent=t}}function ae(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function me(){this.innerHTML=""}function Pe(t){return function(){this.innerHTML=t}}function Le(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function pe(){this.nextSibling&&this.parentNode.appendChild(this)}function Re(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xe(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===tt&&e.documentElement.namespaceURI===tt?e.createElement(t):e.createElementNS(a,t)}}function qe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ve(t){var e=Lt(t);return(e.local?qe:Xe)(e)}function li(){return null}function j(){var t=this.parentNode;t&&t.removeChild(this)}function r(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function o(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function h(t){return function(){var e=this.__on;if(e){for(var S,a=0,u=-1,g=e.length;a<g;++a)S=e[a],t.type&&S.type!==t.type||S.name!==t.name?e[++u]=S:this.removeEventListener(S.type,S.listener,S.options);++u?e.length=u:delete this.__on}}}function T(t,e,a){return function(){var g,u=this.__on,S=function y(t){return function(e){t.call(this,e,this.__data__)}}(e);if(u)for(var L=0,U=u.length;L<U;++L)if((g=u[L]).type===t.type&&g.name===t.name)return this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=S,g.options=a),void(g.value=e);this.addEventListener(t.type,S,a),g={type:t.type,name:t.name,value:e,listener:S,options:a},u?u.push(g):this.__on=[g]}}function N(t,e,a){var u=Xt(t),g=u.CustomEvent;"function"==typeof g?g=new g(e,a):(g=u.document.createEvent("Event"),a?(g.initEvent(e,a.bubbles,a.cancelable),g.detail=a.detail):g.initEvent(e,!1,!1)),t.dispatchEvent(g)}function I(t,e){return function(){return N(this,t,e)}}function mt(t,e){return function(){return N(this,t,e.apply(this,arguments))}}bt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Ft=[null];function Zt(t,e){this._groups=t,this._parents=e}function _e(){return new Zt([[document.documentElement]],Ft)}Zt.prototype=_e.prototype={constructor:Zt,select:function rt(t){"function"!=typeof t&&(t=E(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Q,ot,S=e[g],L=S.length,U=u[g]=new Array(L),ft=0;ft<L;++ft)(Q=S[ft])&&(ot=t.call(Q,Q.__data__,ft,S))&&("__data__"in Q&&(ot.__data__=Q.__data__),U[ft]=ot);return new Zt(u,this._parents)},selectAll:function A(t){t="function"==typeof t?function f(t){return function(){return function z(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):C(t);for(var e=this._groups,a=e.length,u=[],g=[],S=0;S<a;++S)for(var Q,L=e[S],U=L.length,ot=0;ot<U;++ot)(Q=L[ot])&&(u.push(t.call(Q,Q.__data__,ot,L)),g.push(Q));return new Zt(u,g)},selectChild:function Z(t){return this.select(null==t?H:function w(t){return function(){return x.call(this.children,t)}}("function"==typeof t?t:O(t)))},selectChildren:function b(t){return this.selectAll(null==t?d:function R(t){return function(){return lt.call(this.children,t)}}("function"==typeof t?t:O(t)))},filter:function B(t){"function"!=typeof t&&(t=K(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Q,S=e[g],L=S.length,U=u[g]=[],ot=0;ot<L;++ot)(Q=S[ot])&&t.call(Q,Q.__data__,ot,S)&&U.push(Q);return new Zt(u,this._parents)},data:function Et(t,e){if(!arguments.length)return Array.from(this,It);var a=e?V:dt,u=this._parents,g=this._groups;"function"!=typeof t&&(t=function Kt(t){return function(){return t}}(t));for(var S=g.length,L=new Array(S),U=new Array(S),Q=new Array(S),ot=0;ot<S;++ot){var ft=u[ot],Jt=g[ot],Ht=Jt.length,te=Y(t.call(ft,ft&&ft.__data__,ot,u)),Se=te.length,Ae=U[ot]=new Array(Se),Ut=L[ot]=new Array(Se);a(ft,Jt,Ae,Ut,Q[ot]=new Array(Ht),te,e);for(var fe,we,ue=0,ee=0;ue<Se;++ue)if(fe=Ae[ue]){for(ue>=ee&&(ee=ue+1);!(we=Ut[ee])&&++ee<Se;);fe._next=we||null}}return(L=new Zt(L,u))._enter=U,L._exit=Q,L},enter:function J(){return new Zt(this._enter||this._groups.map(pt),this._parents)},exit:function Tt(){return new Zt(this._exit||this._groups.map(pt),this._parents)},join:function ut(t,e,a){var u=this.enter(),g=this,S=this.exit();return"function"==typeof t?(u=t(u))&&(u=u.selection()):u=u.append(t+""),null!=e&&(g=e(g))&&(g=g.selection()),null==a?S.remove():a(S),u&&g?u.merge(g).order():g},merge:function Qt(t){for(var e=t.selection?t.selection():t,a=this._groups,u=e._groups,g=a.length,L=Math.min(g,u.length),U=new Array(g),Q=0;Q<L;++Q)for(var te,ot=a[Q],ft=u[Q],Jt=ot.length,Ht=U[Q]=new Array(Jt),Se=0;Se<Jt;++Se)(te=ot[Se]||ft[Se])&&(Ht[Se]=te);for(;Q<g;++Q)U[Q]=a[Q];return new Zt(U,this._parents)},selection:function xe(){return this},order:function ne(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var L,u=t[e],g=u.length-1,S=u[g];--g>=0;)(L=u[g])&&(S&&4^L.compareDocumentPosition(S)&&S.parentNode.insertBefore(L,S),S=L);return this},sort:function q(t){function e(Jt,Ht){return Jt&&Ht?t(Jt.__data__,Ht.__data__):!Jt-!Ht}t||(t=Ct);for(var a=this._groups,u=a.length,g=new Array(u),S=0;S<u;++S){for(var ot,L=a[S],U=L.length,Q=g[S]=new Array(U),ft=0;ft<U;++ft)(ot=L[ft])&&(Q[ft]=ot);Q.sort(e)}return new Zt(g,this._parents).order()},call:function zt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function Nt(){return Array.from(this)},node:function wt(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var u=t[e],g=0,S=u.length;g<S;++g){var L=u[g];if(L)return L}return null},size:function D(){let t=0;for(const e of this)++t;return t},empty:function W(){return!this.node()},each:function s(t){for(var e=this._groups,a=0,u=e.length;a<u;++a)for(var U,g=e[a],S=0,L=g.length;S<L;++S)(U=g[S])&&t.call(U,U.__data__,S,g);return this},attr:function st(t,e){var a=Lt(t);if(arguments.length<2){var u=this.node();return a.local?u.getAttributeNS(a.space,a.local):u.getAttribute(a)}return this.each((null==e?a.local?Bt:Dt:"function"==typeof e?a.local?Rt:re:a.local?Vt:Wt)(a,e))},style:function it(t,e,a){return arguments.length>1?this.each((null==e?P:"function"==typeof e?M:c)(t,e,null==a?"":a)):nt(this.node(),t)},property:function et(t,e){return arguments.length>1?this.each((null==e?G:"function"==typeof e?F:_)(t,e)):this.node()[t]},classed:function qt(t,e){var a=ct(t+"");if(arguments.length<2){for(var u=xt(this.node()),g=-1,S=a.length;++g<S;)if(!u.contains(a[g]))return!1;return!0}return this.each(("function"==typeof e?Gt:e?kt:Pt)(a,e))},text:function se(t){return arguments.length?this.each(null==t?ie:("function"==typeof t?ae:ye)(t)):this.node().textContent},html:function Ee(t){return arguments.length?this.each(null==t?me:("function"==typeof t?Le:Pe)(t)):this.node().innerHTML},raise:function Te(){return this.each(pe)},lower:function Be(){return this.each(Re)},append:function ei(t){var e="function"==typeof t?t:Ve(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function Ot(t,e){var a="function"==typeof t?t:Ve(t),u=null==e?li:"function"==typeof e?e:E(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),u.apply(this,arguments)||null)})},remove:function i(){return this.each(j)},clone:function n(t){return this.select(t?o:r)},datum:function l(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function m(t,e,a){var g,L,u=function p(t){return t.trim().split(/^|\s+/).map(function(e){var a="",u=e.indexOf(".");return u>=0&&(a=e.slice(u+1),e=e.slice(0,u)),{type:e,name:a}})}(t+""),S=u.length;if(!(arguments.length<2)){for(U=e?T:h,g=0;g<S;++g)this.each(U(u[g],e,a));return this}var U=this.node().__on;if(U)for(var ft,Q=0,ot=U.length;Q<ot;++Q)for(g=0,ft=U[Q];g<S;++g)if((L=u[g]).type===ft.type&&L.name===ft.name)return ft.value},dispatch:function yt(t,e){return this.each(("function"==typeof e?mt:I)(t,e))},[Symbol.iterator]:function*St(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var L,u=t[e],g=0,S=u.length;g<S;++g)(L=u[g])&&(yield L)}};const be=_e;var Oe={value:()=>{}};function Ie(){for(var u,t=0,e=arguments.length,a={};t<e;++t){if(!(u=arguments[t]+"")||u in a||/[\s.]/.test(u))throw new Error("illegal type: "+u);a[u]=[]}return new Mi(a)}function Mi(t){this._=t}function ar(t,e){for(var g,a=0,u=t.length;a<u;++a)if((g=t[a]).name===e)return g.value}function gn(t,e,a){for(var u=0,g=t.length;u<g;++u)if(t[u].name===e){t[u]=Oe,t=t.slice(0,u).concat(t.slice(u+1));break}return null!=a&&t.push({name:e,value:a}),t}Mi.prototype=Ie.prototype={constructor:Mi,on:function(t,e){var g,a=this._,u=function lr(t,e){return t.trim().split(/^|\s+/).map(function(a){var u="",g=a.indexOf(".");if(g>=0&&(u=a.slice(g+1),a=a.slice(0,g)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:u}})}(t+"",a),S=-1,L=u.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++S<L;)if(g=(t=u[S]).type)a[g]=gn(a[g],t.name,e);else if(null==e)for(g in a)a[g]=gn(a[g],t.name,null);return this}for(;++S<L;)if((g=(t=u[S]).type)&&(g=ar(a[g],t.name)))return g},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new Mi(t)},call:function(t,e){if((g=arguments.length-2)>0)for(var g,S,a=new Array(g),u=0;u<g;++u)a[u]=arguments[u+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=0,g=(S=this._[t]).length;u<g;++u)S[u].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var u=this._[t],g=0,S=u.length;g<S;++g)u[g].value.apply(e,a)}};const or=Ie;var Ni,Si,yi=0,Ei=0,Oi=0,yn=1e3,Di=0,hi=0,ji=0,ki="object"==typeof performance&&performance.now?performance:Date,mn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return hi||(mn(sr),hi=ki.now()+ji)}function sr(){hi=0}function zi(){this._call=this._time=this._next=null}function pn(t,e,a){var u=new zi;return u.restart(t,e,a),u}function wn(){hi=(Di=ki.now())+ji,yi=Ei=0;try{!function ur(){Xi(),++yi;for(var e,t=Ni;t;)(e=hi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--yi}()}finally{yi=0,function hr(){for(var t,a,e=Ni,u=1/0;e;)e._call?(u>e._time&&(u=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);Si=t,qi(u)}(),hi=0}}function dr(){var t=ki.now(),e=t-Di;e>yn&&(ji-=e,Di=t)}function qi(t){yi||(Ei&&(Ei=clearTimeout(Ei)),t-hi>24?(t<1/0&&(Ei=setTimeout(wn,t-ki.now()-ji)),Oi&&(Oi=clearInterval(Oi))):(Oi||(Di=ki.now(),Oi=setInterval(dr,yn)),yi=1,mn(wn)))}function xn(t,e,a){var u=new zi;return u.restart(g=>{u.stop(),t(g+e)},e=null==e?0:+e,a),u}zi.prototype=pn.prototype={constructor:zi,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Xi():+a)+(null==e?0:+e),!this._next&&Si!==this&&(Si?Si._next=this:Ni=this,Si=this),this._call=t,this._time=a,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,Ki=3;function Fi(t,e,a,u,g,S){var L=t.__transition;if(L){if(a in L)return}else t.__transition={};!function vr(t,e,a){var g,u=t.__transition;function L(ot){var ft,Jt,Ht,te;if(1!==a.state)return Q();for(ft in u)if((te=u[ft]).name===a.name){if(te.state===Ki)return xn(L);4===te.state?(te.state=6,te.timer.stop(),te.on.call("interrupt",t,t.__data__,te.index,te.group),delete u[ft]):+ft<e&&(te.state=6,te.timer.stop(),te.on.call("cancel",t,t.__data__,te.index,te.group),delete u[ft])}if(xn(function(){a.state===Ki&&(a.state=4,a.timer.restart(U,a.delay,a.time),U(ot))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=Ki,g=new Array(Ht=a.tween.length),ft=0,Jt=-1;ft<Ht;++ft)(te=a.tween[ft].value.call(t,t.__data__,a.index,a.group))&&(g[++Jt]=te);g.length=Jt+1}}function U(ot){for(var ft=ot<a.duration?a.ease.call(null,ot/a.duration):(a.timer.restart(Q),a.state=5,1),Jt=-1,Ht=g.length;++Jt<Ht;)g[Jt].call(t,ft);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),Q())}function Q(){for(var ot in a.state=6,a.timer.stop(),delete u[e],u)return;delete t.__transition}u[e]=a,a.timer=pn(function S(ot){a.state=1,a.timer.restart(L,a.delay,a.time),a.delay<=ot&&L(ot-a.delay)},0,a.time)}(t,a,{name:e,index:u,group:g,on:cr,tween:fr,time:S.time,delay:S.delay,duration:S.duration,ease:S.ease,timer:null,state:bn})}function en(t,e){var a=$e(t,e);if(a.state>bn)throw new Error("too late; already scheduled");return a}function ii(t,e){var a=$e(t,e);if(a.state>Ki)throw new Error("too late; already running");return a}function $e(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function ui(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,u,g,S){var L,U,Q;return(L=Math.sqrt(t*t+e*e))&&(t/=L,e/=L),(Q=t*a+e*u)&&(a-=t*Q,u-=e*Q),(U=Math.sqrt(a*a+u*u))&&(a/=U,u/=U,Q/=U),t*u<e*a&&(t=-t,e=-e,Q=-Q,L=-L),{translateX:g,translateY:S,rotate:Math.atan2(e,t)*On,skewX:Math.atan(Q)*On,scaleX:L,scaleY:U}}function kn(t,e,a,u){function g(ot){return ot.length?ot.pop()+" ":""}return function(ot,ft){var Jt=[],Ht=[];return ot=t(ot),ft=t(ft),function S(ot,ft,Jt,Ht,te,Se){if(ot!==Jt||ft!==Ht){var Ae=te.push("translate(",null,e,null,a);Se.push({i:Ae-4,x:ui(ot,Jt)},{i:Ae-2,x:ui(ft,Ht)})}else(Jt||Ht)&&te.push("translate("+Jt+e+Ht+a)}(ot.translateX,ot.translateY,ft.translateX,ft.translateY,Jt,Ht),function L(ot,ft,Jt,Ht){ot!==ft?(ot-ft>180?ft+=360:ft-ot>180&&(ot+=360),Ht.push({i:Jt.push(g(Jt)+"rotate(",null,u)-2,x:ui(ot,ft)})):ft&&Jt.push(g(Jt)+"rotate("+ft+u)}(ot.rotate,ft.rotate,Jt,Ht),function U(ot,ft,Jt,Ht){ot!==ft?Ht.push({i:Jt.push(g(Jt)+"skewX(",null,u)-2,x:ui(ot,ft)}):ft&&Jt.push(g(Jt)+"skewX("+ft+u)}(ot.skewX,ft.skewX,Jt,Ht),function Q(ot,ft,Jt,Ht,te,Se){if(ot!==Jt||ft!==Ht){var Ae=te.push(g(te)+"scale(",null,",",null,")");Se.push({i:Ae-4,x:ui(ot,Jt)},{i:Ae-2,x:ui(ft,Ht)})}else(1!==Jt||1!==Ht)&&te.push(g(te)+"scale("+Jt+","+Ht+")")}(ot.scaleX,ot.scaleY,ft.scaleX,ft.scaleY,Jt,Ht),ot=ft=null,function(te){for(var Ut,Se=-1,Ae=Ht.length;++Se<Ae;)Jt[(Ut=Ht[Se]).i]=Ut.x(te);return Jt.join("")}}}var wr=kn(function mr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xr=kn(function pr(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function br(t,e){var a,u;return function(){var g=ii(this,t),S=g.tween;if(S!==a)for(var L=0,U=(u=a=S).length;L<U;++L)if(u[L].name===e){(u=u.slice()).splice(L,1);break}g.tween=u}}function _r(t,e,a){var u,g;if("function"!=typeof a)throw new Error;return function(){var S=ii(this,t),L=S.tween;if(L!==u){g=(u=L).slice();for(var U={name:e,value:a},Q=0,ot=g.length;Q<ot;++Q)if(g[Q].name===e){g[Q]=U;break}Q===ot&&g.push(U)}S.tween=g}}function rn(t,e,a){var u=t._id;return t.each(function(){var g=ii(this,u);(g.value||(g.value={}))[e]=a.apply(this,arguments)}),function(g){return $e(g,u).value[e]}}function ln(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function Tn(t,e){var a=Object.create(t.prototype);for(var u in e)a[u]=e[u];return a}function Ti(){}var Wi=1/.7,mi="\\s*([+-]?\\d+)\\s*",Li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),kr=new RegExp(`^rgb\\(${ni},${ni},${ni}\\)$`),Tr=new RegExp(`^rgba\\(${mi},${mi},${mi},${Li}\\)$`),Cr=new RegExp(`^rgba\\(${ni},${ni},${ni},${Li}\\)$`),Lr=new RegExp(`^hsl\\(${Li},${ni},${ni}\\)$`),Ar=new RegExp(`^hsla\\(${Li},${ni},${ni},${Li}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ai(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?Pn(e):3===a?new Qe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Qe(e[1],e[2],e[3],1):(e=kr.exec(t))?new Qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Lr.exec(t))?Mn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Mn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?Pn(Cn[t]):"transparent"===t?new Qe(NaN,NaN,NaN,0):null}function Pn(t){return new Qe(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,a,u){return u<=0&&(t=e=a=NaN),new Qe(t,e,a,u)}function Qi(t,e,a,u){return 1===arguments.length?function Rr(t){return t instanceof Ti||(t=Ai(t)),t?new Qe((t=t.rgb()).r,t.g,t.b,t.opacity):new Qe}(t):new Qe(t,e,a,null==u?1:u)}function Qe(t,e,a,u){this.r=+t,this.g=+e,this.b=+a,this.opacity=+u}function In(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}`}function Rn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${ci(this.r)}, ${ci(this.g)}, ${ci(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ci(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fi(t){return((t=ci(t))<16?"0":"")+t.toString(16)}function Mn(t,e,a,u){return u<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new ti(t,e,a,u)}function Nn(t){if(t instanceof ti)return new ti(t.h,t.s,t.l,t.opacity);if(t instanceof Ti||(t=Ai(t)),!t)return new ti;if(t instanceof ti)return t;var e=(t=t.rgb()).r/255,a=t.g/255,u=t.b/255,g=Math.min(e,a,u),S=Math.max(e,a,u),L=NaN,U=S-g,Q=(S+g)/2;return U?(L=e===S?(a-u)/U+6*(a<u):a===S?(u-e)/U+2:(e-a)/U+4,U/=Q<.5?S+g:2-S-g,L*=60):U=Q>0&&Q<1?0:L,new ti(L,U,Q,t.opacity)}function ti(t,e,a,u){this.h=+t,this.s=+e,this.l=+a,this.opacity=+u}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function jn(t,e,a,u,g){var S=t*t,L=S*t;return((1-3*t+3*S-L)*e+(4-6*S+3*L)*a+(1+3*t+3*S-3*L)*u+L*g)/6}ln(Ti,Ai,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Pr(){return this.rgb().formatHex8()},formatHsl:function Ir(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),ln(Qe,Qi,Tn(Ti,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qe(ci(this.r),ci(this.g),ci(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:In,formatHex:In,formatHex8:function Mr(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}${fi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Rn,toString:Rn})),ln(ti,function Nr(t,e,a,u){return 1===arguments.length?Nn(t):new ti(t,e,a,null==u?1:u)},Tn(Ti,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new ti(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ti(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,u=a+(a<.5?a:1-a)*e,g=2*a-u;return new Qe(an(t>=240?t-240:t+120,g,u),an(t,g,u),an(t<120?t+240:t-120,g,u),this.opacity)},clamp(){return new ti(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const zn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):zn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kr(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function zr(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(u){return Math.pow(t+u*e,a)}}(e,a,t):zn(isNaN(e)?a:e)}}(e);function u(g,S){var L=a((g=Qi(g)).r,(S=Qi(S)).r),U=a(g.g,S.g),Q=a(g.b,S.b),ot=Bn(g.opacity,S.opacity);return function(ft){return g.r=L(ft),g.g=U(ft),g.b=Q(ft),g.opacity=ot(ft),g+""}}return u.gamma=t,u}(1);function Un(t){return function(e){var L,U,a=e.length,u=new Array(a),g=new Array(a),S=new Array(a);for(L=0;L<a;++L)U=Qi(e[L]),u[L]=U.r||0,g[L]=U.g||0,S[L]=U.b||0;return u=t(u),g=t(g),S=t(S),U.opacity=1,function(Q){return U.r=u(Q),U.g=g(Q),U.b=S(Q),U+""}}}Un(function Dr(t){var e=t.length-1;return function(a){var u=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),g=t[u],S=t[u+1];return jn((a-u/e)*e,u>0?t[u-1]:2*g-S,g,S,u<e-1?t[u+2]:2*S-g)}}),Un(function jr(t){var e=t.length;return function(a){var u=Math.floor(((a%=1)<0?++a:a)*e);return jn((a-u/e)*e,t[(u+e-1)%e],t[u%e],t[(u+1)%e],t[(u+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ur(t,e){var u,g,S,a=on.lastIndex=sn.lastIndex=0,L=-1,U=[],Q=[];for(t+="",e+="";(u=on.exec(t))&&(g=sn.exec(e));)(S=g.index)>a&&(S=e.slice(a,S),U[L]?U[L]+=S:U[++L]=S),(u=u[0])===(g=g[0])?U[L]?U[L]+=g:U[++L]=g:(U[++L]=null,Q.push({i:L,x:ui(u,g)})),a=sn.lastIndex;return a<e.length&&(S=e.slice(a),U[L]?U[L]+=S:U[++L]=S),U.length<2?Q[0]?function Fr(t){return function(e){return t(e)+""}}(Q[0].x):function Br(t){return function(){return t}}(e):(e=Q.length,function(ot){for(var Jt,ft=0;ft<e;++ft)U[(Jt=Q[ft]).i]=Jt.x(ot);return U.join("")})}function Wn(t,e){var a;return("number"==typeof e?ui:e instanceof Ai?Fn:(a=Ai(e))?(e=a,Fn):Ur)(t,e)}function Wr(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,a){var u,S,g=a+"";return function(){var L=this.getAttribute(t);return L===g?null:L===u?S:S=e(u=L,a)}}function Jr(t,e,a){var u,S,g=a+"";return function(){var L=this.getAttributeNS(t.space,t.local);return L===g?null:L===u?S:S=e(u=L,a)}}function Hr(t,e,a){var u,g,S;return function(){var L,Q,U=a(this);return null==U?void this.removeAttribute(t):(L=this.getAttribute(t))===(Q=U+"")?null:L===u&&Q===g?S:(g=Q,S=e(u=L,U))}}function Vr(t,e,a){var u,g,S;return function(){var L,Q,U=a(this);return null==U?void this.removeAttributeNS(t.space,t.local):(L=this.getAttributeNS(t.space,t.local))===(Q=U+"")?null:L===u&&Q===g?S:(g=Q,S=e(u=L,U))}}function qr(t,e){var a,u;function g(){var S=e.apply(this,arguments);return S!==u&&(a=(u=S)&&function Xr(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,S)),a}return g._value=e,g}function $r(t,e){var a,u;function g(){var S=e.apply(this,arguments);return S!==u&&(a=(u=S)&&function Yr(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,S)),a}return g._value=e,g}function el(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){en(this,t).delay=e}}function rl(t,e){return function(){ii(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){ii(this,t).duration=e}}var xl=be.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var zl=0;function ai(t,e,a,u){this._groups=t,this._parents=e,this._name=a,this._id=u}function Qn(){return++zl}var oi=be.prototype;ai.prototype=function Kl(t){return be().transition(t)}.prototype={constructor:ai,select:function pl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=E(t));for(var u=this._groups,g=u.length,S=new Array(g),L=0;L<g;++L)for(var ft,Jt,U=u[L],Q=U.length,ot=S[L]=new Array(Q),Ht=0;Ht<Q;++Ht)(ft=U[Ht])&&(Jt=t.call(ft,ft.__data__,Ht,U))&&("__data__"in ft&&(Jt.__data__=ft.__data__),ot[Ht]=Jt,Fi(ot[Ht],e,a,Ht,ot,$e(ft,a)));return new ai(S,this._parents,e,a)},selectAll:function wl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=C(t));for(var u=this._groups,g=u.length,S=[],L=[],U=0;U<g;++U)for(var ft,Q=u[U],ot=Q.length,Jt=0;Jt<ot;++Jt)if(ft=Q[Jt]){for(var te,Ht=t.call(ft,ft.__data__,Jt,Q),Se=$e(ft,a),Ae=0,Ut=Ht.length;Ae<Ut;++Ae)(te=Ht[Ae])&&Fi(te,e,a,Ae,Ht,Se);S.push(Ht),L.push(ft)}return new ai(S,L,e,a)},selectChild:oi.selectChild,selectChildren:oi.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=K(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Q,S=e[g],L=S.length,U=u[g]=[],ot=0;ot<L;++ot)(Q=S[ot])&&t.call(Q,Q.__data__,ot,S)&&U.push(Q);return new ai(u,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,u=e.length,S=Math.min(u,a.length),L=new Array(u),U=0;U<S;++U)for(var Ht,Q=e[U],ot=a[U],ft=Q.length,Jt=L[U]=new Array(ft),te=0;te<ft;++te)(Ht=Q[te]||ot[te])&&(Jt[te]=Ht);for(;U<u;++U)L[U]=e[U];return new ai(L,this._parents,this._name,this._id)},selection:function bl(){return new xl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,a=Qn(),u=this._groups,g=u.length,S=0;S<g;++S)for(var Q,L=u[S],U=L.length,ot=0;ot<U;++ot)if(Q=L[ot]){var ft=$e(Q,e);Fi(Q,t,a,ot,L,{time:ft.time+ft.delay+ft.duration,delay:0,duration:ft.duration,ease:ft.ease})}return new ai(u,this._parents,t,a)},call:oi.call,nodes:oi.nodes,node:oi.node,size:oi.size,empty:oi.empty,each:oi.each,on:function gl(t,e){var a=this._id;return arguments.length<2?$e(this.node(),a).on.on(t):this.each(function vl(t,e,a){var u,g,S=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?en:ii;return function(){var L=S(this,t),U=L.on;U!==u&&(g=(u=U).copy()).on(e,a),L.on=g}}(a,t,e))},attr:function Zr(t,e){var a=Lt(t),u="transform"===a?xr:Wn;return this.attrTween(t,"function"==typeof e?(a.local?Vr:Hr)(a,u,rn(this,"attr."+t,e)):null==e?(a.local?Gr:Wr)(a):(a.local?Jr:Qr)(a,u,e))},attrTween:function tl(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var u=Lt(t);return this.tween(a,(u.local?qr:$r)(u,e))},style:function kl(t,e,a){var u="transform"==(t+="")?wr:Wn;return null==e?this.styleTween(t,function _l(t,e){var a,u,g;return function(){var S=nt(this,t),L=(this.style.removeProperty(t),nt(this,t));return S===L?null:S===a&&L===u?g:g=e(a=S,u=L)}}(t,u)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,a){var u,g,S;return function(){var L=nt(this,t),U=a(this),Q=U+"";return null==U&&(this.style.removeProperty(t),Q=U=nt(this,t)),L===Q?null:L===u&&Q===g?S:(g=Q,S=e(u=L,U))}}(t,u,rn(this,"style."+t,e))).each(function Sl(t,e){var a,u,g,U,S="style."+e,L="end."+S;return function(){var Q=ii(this,t),ot=Q.on,ft=null==Q.value[S]?U||(U=Gn(e)):void 0;(ot!==a||g!==ft)&&(u=(a=ot).copy()).on(L,g=ft),Q.on=u}}(this._id,t)):this.styleTween(t,function El(t,e,a){var u,S,g=a+"";return function(){var L=nt(this,t);return L===g?null:L===u?S:S=e(u=L,a)}}(t,u,e),a).on("end.style."+t,null)},styleTween:function Ll(t,e,a){var u="style."+(t+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==e)return this.tween(u,null);if("function"!=typeof e)throw new Error;return this.tween(u,function Cl(t,e,a){var u,g;function S(){var L=e.apply(this,arguments);return L!==g&&(u=(g=L)&&function Tl(t,e,a){return function(u){this.style.setProperty(t,e.call(this,u),a)}}(t,L,a)),u}return S._value=e,S}(t,e,null==a?"":a))},text:function Il(t){return this.tween("text","function"==typeof t?function Pl(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Ml(t){var e,a;function u(){var g=t.apply(this,arguments);return g!==a&&(e=(a=g)&&function Rl(t){return function(e){this.textContent=t.call(this,e)}}(g)),e}return u._value=t,u}(t))},remove:function ml(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var a=this._id;if(t+="",arguments.length<2){for(var L,u=$e(this.node(),a).tween,g=0,S=u.length;g<S;++g)if((L=u[g]).name===t)return L.value;return null}return this.each((null==e?br:_r)(a,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):$e(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):$e(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){ii(this,t).ease=e}}(e,t)):$e(this.node(),e).ease},easeVarying:function dl(t){if("function"!=typeof t)throw new Error;return this.each(function ul(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;ii(this,t).ease=a}}(this._id,t))},end:function jl(){var t,e,a=this,u=a._id,g=a.size();return new Promise(function(S,L){var U={value:L},Q={value:function(){0==--g&&S()}};a.each(function(){var ot=ii(this,u),ft=ot.on;ft!==t&&((e=(t=ft).copy())._.cancel.push(U),e._.interrupt.push(U),e._.end.push(Q)),ot.on=e}),0===g&&S()})},[Symbol.iterator]:oi[Symbol.iterator]};var Fl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}be.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var u,g,L,a=t.__transition,S=!0;if(a){for(L in e=null==e?null:e+"",a)(u=a[L]).name===e?(g=u.state>2&&u.state<5,u.state=6,u.timer.stop(),u.on.call(g?"interrupt":"cancel",t,t.__data__,u.index,u.group),delete a[L]):S=!1;S&&delete t.__transition}}(this,t)})},be.prototype.transition=function Wl(t){var e,a;t instanceof ai?(e=t._id,t=t._name):(e=Qn(),(a=Fl).time=Xi(),t=null==t?null:t+"");for(var u=this._groups,g=u.length,S=0;S<g;++S)for(var Q,L=u[S],U=L.length,ot=0;ot<U;++ot)(Q=L[ot])&&Fi(Q,t,e,ot,L,a||Ul(Q,e));return new ai(u,this._parents,t,e)};Math;function Pi(t){return{type:t}}function xi(t){return function(){return t}}function Xn(t){this._context=t}function ql(t){return new Xn(t)}["w","e"].map(Pi),["n","s"].map(Pi),["n","w","e","s","nw","ne","sw","se"].map(Pi),Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const fn=Math.PI,vn=2*fn,vi=1e-6,$l=vn-vi;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Yi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(u){this._+=u[0];for(let g=1,S=u.length;g<S;++g)this._+=Math.round(arguments[g]*a)/a+u[g]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,u,g){this._append`Q${+e},${+a},${this._x1=+u},${this._y1=+g}`}bezierCurveTo(e,a,u,g,S,L){this._append`C${+e},${+a},${+u},${+g},${this._x1=+S},${this._y1=+L}`}arcTo(e,a,u,g,S){if(e=+e,a=+a,u=+u,g=+g,(S=+S)<0)throw new Error(`negative radius: ${S}`);let L=this._x1,U=this._y1,Q=u-e,ot=g-a,ft=L-e,Jt=U-a,Ht=ft*ft+Jt*Jt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Ht>vi)if(Math.abs(Jt*Q-ot*ft)>vi&&S){let te=u-L,Se=g-U,Ae=Q*Q+ot*ot,Ut=te*te+Se*Se,jt=Math.sqrt(Ae),ue=Math.sqrt(Ht),ee=S*Math.tan((fn-Math.acos((Ae+Ht-Ut)/(2*jt*ue)))/2),fe=ee/ue,we=ee/jt;Math.abs(fe-1)>vi&&this._append`L${e+fe*ft},${a+fe*Jt}`,this._append`A${S},${S},0,0,${+(Jt*te>ft*Se)},${this._x1=e+we*Q},${this._y1=a+we*ot}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,u,g,S,L){if(e=+e,a=+a,L=!!L,(u=+u)<0)throw new Error(`negative radius: ${u}`);let U=u*Math.cos(g),Q=u*Math.sin(g),ot=e+U,ft=a+Q,Jt=1^L,Ht=L?g-S:S-g;null===this._x1?this._append`M${ot},${ft}`:(Math.abs(this._x1-ot)>vi||Math.abs(this._y1-ft)>vi)&&this._append`L${ot},${ft}`,u&&(Ht<0&&(Ht=Ht%vn+vn),Ht>$l?this._append`A${u},${u},0,1,${Jt},${e-U},${a-Q}A${u},${u},0,1,${Jt},${this._x1=ot},${this._y1=ft}`:Ht>vi&&this._append`A${u},${u},0,${+(Ht>=fn)},${Jt},${this._x1=e+u*Math.cos(S)},${this._y1=a+u*Math.sin(S)}`)}rect(e,a,u,g){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${u=+u}v${+g}h${-u}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var a=xi(!0),u=null,g=ql,S=null,L=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);e=u}return t},()=>new Yi(e)}(U);function U(Q){var ot,Jt,te,ft=(Q=function Xl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(Q)).length,Ht=!1;for(null==u&&(S=g(te=L())),ot=0;ot<=ft;++ot)!(ot<ft&&a(Jt=Q[ot],ot,Q))===Ht&&((Ht=!Ht)?S.lineStart():S.lineEnd()),Ht&&S.point(+t(Jt,ot,Q),+e(Jt,ot,Q));if(te)return S=null,te+""||null}return t="function"==typeof t?t:void 0===t?na:xi(t),e="function"==typeof e?e:void 0===e?ra:xi(e),U.x=function(Q){return arguments.length?(t="function"==typeof Q?Q:xi(+Q),U):t},U.y=function(Q){return arguments.length?(e="function"==typeof Q?Q:xi(+Q),U):e},U.defined=function(Q){return arguments.length?(a="function"==typeof Q?Q:xi(!!Q),U):a},U.curve=function(Q){return arguments.length?(g=Q,null!=u&&(S=g(u)),U):g},U.context=function(Q){return arguments.length?(null==Q?u=S=null:S=g(u=Q),U):u},U}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function bi(t,e,a){this.k=t,this.x=e,this.y=a}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},bi.prototype={constructor:bi,scale:function(t){return 1===t?this:new bi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new bi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new bi(1,0,0)}}]);