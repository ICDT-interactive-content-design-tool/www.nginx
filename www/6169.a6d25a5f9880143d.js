"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6169],{5178:(U,M,s)=>{s.d(M,{Q:()=>_});const p=[null,"jpg","lvb","svg","lvm","zip",null,"m4a","xlsx","jpe","bmp","ppt","pptx","js","jif",null,null,null,null,null,"jpeg",null,null,null,"jfif",null,null,null,null,null,"pdf","json",null,null,null,"apng",null,null,null,null,"gif","png","pjp",null,null,null,"ico",null,"webp",null,"mp3","mp4","xls","avif",null,null,null,"cur",null,null,null,null,null,null,null,null,null,null,"tif",null,"doc","docx",null,null,null,null,null,null,null,"tiff","pjpeg",null,null,null,null,null,null,null,null,null,"wav","htm","html"];var g=s(6348);const _=a=>new Promise((C,S)=>{fetch(a).then(v=>v.arrayBuffer()).then(v=>{for(var f=new Uint8Array(v),E=f[f.length-1],P=p[E]||"",y=0,I=f.length-1;y<I;y++)y%E==0&&(f[y]=Math.abs(255-f[y]));f=f.slice(0,f.length-1),C({ext:P,file:new File([f],(a.split("/").pop()||"anhbaluntit.lvm").replace(new RegExp(".lvm$"),`.${P}`),{type:g.lookup(P)||"application/octet-stream"})})}).catch(()=>{S()})})},8671:(U,M,s)=>{s.d(M,{$:()=>g});var p=s(5972);function g(_){_.params=_.params||{},(0,p.hm)({url:"api/Lookup/get",params:{lookup_key:_.params.lookup_key||null},success:a=>{"function"==typeof _.callback&&_.callback(null==a?void 0:a.data)},error:a=>{"function"==typeof _.callback&&_.callback(),console.error(_,a)},loading:_.loading,loadingController:_.loadingController})}},1632:(U,M,s)=>{s.d(M,{U:()=>w});var p=s(467),g=s(5972),_=s(5781),a=s(2635),C=s(3753),S=s(8408),v=s(5414),f=s(8833),E=s(4552),P=s(4668);function L(o){o.params=o.params||{},(0,g.Ll)({url:"api/MediaShareUser/AddUpdate",params:{media_id:o.params.media_id||null,emailaddr:o.params.emailaddr||null,v_sharepermission:o.params.v_sharepermission||null,createdby:o.params.userid||null,modifiedby:o.params.userid||null},success:d=>{"function"==typeof o.callback&&o.callback(d.data||null)},error:d=>{"function"==typeof o.callback&&o.callback(),console.error(d)},loading:o.loading,loadingController:o.loadingController})}var e=s(4438),t=s(6637),u=s(9417),h=s(31);function O(o,d){1&o&&e.nrm(0,"ion-icon",7)}function x(o,d){1&o&&e.nrm(0,"ion-icon",24)}function G(o,d){1&o&&e.nrm(0,"ion-icon",25)}function B(o,d){if(1&o&&(e.j41(0,"ion-item",19)(1,"ion-avatar"),e.nrm(2,"img",26),e.k0s(),e.j41(3,"ion-label",27),e.EFF(4),e.k0s()()),2&o){let R,l;const n=d.$implicit,r=e.XpG();e.Y8G("disabled",r.isDisabled4Only),e.R7$(2),e.Y8G("src",null!==(R=n.profilephoto?r.readfileuploadurl+n.profilephoto:null)&&void 0!==R?R:"../../../assets/image/user-avatar-default.png",e.B4B),e.R7$(2),e.JRh(null!==(l=n.fullname)&&void 0!==l?l:n.emailaddr)}}let w=(()=>{var o;class d{constructor(l,n,r,i){this.modalController=l,this.popoverController=n,this.toastController=r,this.loadingController=i,this.media_id=0,this.v_share=P.z,this.dataForm={},this.media={},this.mediaShare={},this.mediaShareUsers=[],this.isfullscreen=!1,this.readfileuploadurl="",this.fileurl="",this.appsettings={}}ngOnInit(){var l=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,p.A)(function*(){l.appsettings=yield(0,g.AC)(),l.appsettings.madonvi&&(l.user=yield(0,a.Nk)(),l.readfileuploadurl=l.appsettings.readfileuploadurl||"",l.refreshData())})()}refreshData(){var l;(0,_.e6)({loadingController:this.loadingController,params:{userid:null===(l=this.user)||void 0===l?void 0:l.userid,media_id:this.media_id},callback:n=>{this.media=n||{},this.media.media_id&&(this.GetMediaShare(),this.GetMediaShareUser())}})}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}changeEmails(l){var n;this.dataForm.emailaddrs=((null==l||null===(n=l.target)||void 0===n?void 0:n.value)||"").replace(/[^a-zA-Z0-9\@\;\ \-\_\.]+/g,"").replace(/\s+/," ").trim().replace(/\ \;/g,";").replace(/\;\ /g,";").replace(/\ /g,";").replace(/\;+/g,";").split(";").map(r=>{let i=r.match(/^[a-zA-Z0-9\.\-\_]+@[a-zA-Z0-9\-\_]+\.[a-zA-Z0-9\-\_]+((\.[a-zA-Z0-9\-\_]+)+)?$/);return i?i[0]:null}).filter(r=>!!r).filter((r,i,m)=>m.indexOf(r)==i).join("; ")}keypressEmails(l){var n,i,r=l.keyCode||l.which||l.charCode||0;r!=S.r_I.Enter&&r!=S.r_I.Escape||(null===(i=l.target)||void 0===i||i.blur(),this.submitEmails()),null!==(n=l.key)&&void 0!==n&&n.match(/[^a-zA-Z0-9\@\;\ \-\_\.]/)&&(null==l||l.preventDefault(),null==l||l.stopPropagation())}submitEmails(l){this.dataForm.emailaddrs&&(this.AddUpdateMediaShareUser_Recursive(this.dataForm.emailaddrs.replace(/\s+/g,"").split(";")),this.dataForm.emailaddrs="")}presentPopoverLookupShare(l){var n=this;return(0,p.A)(function*(){const r=yield n.popoverController.create({component:C.t,componentProps:{selectedId:n.mediaShare.v_share,lookup_key:"v_share"},event:l,dismissOnSelect:!1,animated:!1,side:"bottom",alignment:"start"});r.onDidDismiss().then(i=>{var m,k,b;"confirm"==i.role&&(Object.assign(n.mediaShare,{v_share:null===(m=i.data)||void 0===m?void 0:m.lookup_value,v_share_title:null===(k=i.data)||void 0===k?void 0:k.lookup_title}),n.AddUpdateMediaShare(null===(b=i.data)||void 0===b?void 0:b.lookup_value))}),r.present()})()}presentPopoverLookupSharePermission(l,n){var r=this;return(0,p.A)(function*(){var i;const k=yield r.popoverController.create({component:C.t,componentProps:{selectedId:null===(i=r.mediaShareUsers.find(b=>b.emailaddr==n))||void 0===i?void 0:i.v_sharepermission,lookup_key:"v_sharepermission",lookups_d2:[{lookup_value:-1,lookup_title:"X\xf3a",color:"danger"}]},event:l,dismissOnSelect:!1,animated:!1,alignment:"end",side:"bottom"});k.onDidDismiss().then(b=>{var j;"confirm"==b.role&&(r.mediaShareUsers.filter(F=>F.emailaddr==n).forEach(F=>{var A,T;Object.assign(F,{v_sharepermission:null===(A=b.data)||void 0===A?void 0:A.lookup_value,v_sharepermission_title:null===(T=b.data)||void 0===T?void 0:T.lookup_title})}),r.AddUpdateMediaShareUser(n,null===(j=b.data)||void 0===j?void 0:j.lookup_value))}),k.present()})()}GetMediaShare(){var l=this;return(0,p.A)(function*(){var n;!function y(o){o.params=o.params||{},(0,g.hm)({url:"api/MediaShare/Get",params:{getby:o.params.userid||null,mediashare_id:o.params.mediashare_id||null,media_id:o.params.media_id||null,v_share:o.params.v_share||null},success:d=>{"function"==typeof o.callback&&o.callback(d.data||null)},error:d=>{"function"==typeof o.callback&&o.callback(),console.error(d)},loading:o.loading,loadingController:o.loadingController})}({loadingController:l.loadingController,params:{userid:null===(n=l.user)||void 0===n?void 0:n.userid,media_id:l.media_id},callback:r=>{l.mediaShare=r||{},l.isDisabled4Only=!l.mediaShare.v_share||l.mediaShare.v_share==P.z.ONLY_ME}})})()}AddUpdateMediaShare(l){var n=this;return(0,p.A)(function*(){var r;if(!l||l<=0)return n.DeleteMediaShare();!function I(o){o.params=o.params||{},(0,g.Ll)({url:"api/MediaShare/AddUpdate",params:{media_id:o.params.media_id||null,v_share:o.params.v_share||null,createdby:o.params.userid||null,modifiedby:o.params.userid||null},success:d=>{"function"==typeof o.callback&&o.callback(d.data||null)},error:d=>{"function"==typeof o.callback&&o.callback(),console.error(d)},loading:o.loading,loadingController:o.loadingController})}({loadingController:n.loadingController,params:{userid:null===(r=n.user)||void 0===r?void 0:r.userid,media_id:n.media_id,v_share:l},callback:i=>{0==(null==i?void 0:i.returncode)?n.GetMediaShare():(0,v.c)(n.toastController,{},i).then(m=>m.present())}})})()}DeleteMediaShare(){var l=this;return(0,p.A)(function*(){var n;!function D(o){o.params=o.params||{},(0,g.sj)({url:"api/MediaShare/Delete",params:{deleteby:o.params.userid||null,mediashare_id:o.params.mediashare_id||null,media_id:o.params.media_id||null},success:d=>{"function"==typeof o.callback&&o.callback(d.data||null)},error:d=>{"function"==typeof o.callback&&o.callback(),console.error(d)},loading:o.loading,loadingController:o.loadingController})}({loadingController:l.loadingController,params:{userid:null===(n=l.user)||void 0===n?void 0:n.userid,media_id:l.media_id},callback:r=>{0==(null==r?void 0:r.returncode)?l.GetMediaShare():(0,v.c)(l.toastController,{},r).then(i=>i.present())}})})()}GetMediaShareUser(){var l=this;return(0,p.A)(function*(){var n;!function $(o){o.params=o.params||{},(0,g.hm)({url:"api/MediaShareUser/Get",params:{getby:o.params.userid||null,mediashareuser_id:o.params.mediashareuser_id||null,media_id:o.params.media_id||null,emailaddr:o.params.emailaddr||null,v_sharepermission:o.params.v_sharepermission||null},success:d=>{"function"==typeof o.callback&&o.callback(d.data||null)},error:d=>{"function"==typeof o.callback&&o.callback(),console.error(d)},loading:o.loading,loadingController:o.loadingController})}({loadingController:l.loadingController,params:{userid:null===(n=l.user)||void 0===n?void 0:n.userid,media_id:l.media_id},callback:r=>{l.mediaShareUsers=r||[]}})})()}AddUpdateMediaShareUser_Recursive(l){var n=this;return(0,p.A)(function*(){let r=i=>{var m;i&&L({loadingController:n.loadingController,params:{userid:null===(m=n.user)||void 0===m?void 0:m.userid,media_id:n.media_id,emailaddr:i,v_sharepermission:1},callback:k=>{l.length?r(null==l?void 0:l.shift()):0==(null==k?void 0:k.returncode)?n.GetMediaShareUser():(0,v.c)(n.toastController,{},k).then(b=>b.present())}})};r(l.shift())})()}AddUpdateMediaShareUser(l,n){var r=this;return(0,p.A)(function*(){var i;if(l){if(!n||n<=0)return r.DeleteMediaShareUser(l);L({loadingController:r.loadingController,params:{userid:null===(i=r.user)||void 0===i?void 0:i.userid,media_id:r.media_id,emailaddr:l,v_sharepermission:n},callback:m=>{0==(null==m?void 0:m.returncode)?r.GetMediaShareUser():(0,v.c)(r.toastController,{},m).then(k=>k.present())}})}})()}DeleteMediaShareUser(l){var n=this;return(0,p.A)(function*(){var r;l&&function c(o){o.params=o.params||{},(0,g.sj)({url:"api/MediaShareUser/Delete",params:{deleteby:o.params.userid||null,mediashareuser_id:o.params.mediashareuser_id||null,media_id:o.params.media_id||null,emailaddr:o.params.emailaddr||null},success:d=>{"function"==typeof o.callback&&o.callback(d.data||null)},error:d=>{"function"==typeof o.callback&&o.callback(),console.error(d)},loading:o.loading,loadingController:o.loadingController})}({loadingController:n.loadingController,params:{userid:null===(r=n.user)||void 0===r?void 0:r.userid,media_id:n.media_id,emailaddr:l},callback:i=>{0==(null==i?void 0:i.returncode)?n.GetMediaShareUser():(0,v.c)(n.toastController,{},i).then(m=>m.present())}})})()}copyLink(l){var n=this;return(0,p.A)(function*(){(0,E.lW)(n.appsettings.weburl+f._.VIEWER+`?m=${n.media_id}`)?(n.isCopiedLink=!0,n.isCopiedEmbed=!1):(0,v.c)(n.toastController,{message:"Sao ch\xe9p l\u1ed7i!"}).then(i=>i.present())})()}copyEmbed(l){var n=this;return(0,p.A)(function*(){let i=`<iframe src="${n.appsettings.weburl+f._.MEDIA_EMBED.replace(":id",n.media_id.toString())}" width="${n.media.width||768}" height="${n.media.height||432}" frameborder="0" allowfullscreen webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="display: block; margin: auto; border: 1px dashed rgba(0,0,0,0.1);"></iframe>`;(0,E.lW)(i)?(n.isCopiedLink=!1,n.isCopiedEmbed=!0):(0,v.c)(n.toastController,{message:"Sao ch\xe9p l\u1ed7i!"}).then(m=>m.present())})()}}return(o=d).\u0275fac=function(l){return new(l||o)(e.rXU(t.W3),e.rXU(t.IE),e.rXU(t.K_),e.rXU(t.Xi))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-modal-media-share"]],inputs:{media_id:"media_id"},decls:51,vars:26,consts:[["color","primary"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],["lines","none","detail","false","button","",3,"click"],["slot","start","name","lock-closed-outline",1,"mr-3"],[1,"d-flex","align-items-center"],[1,"mr-2"],["src","../../../assets/icon/16x16/chevron-down.svg",1,"fs-12"],[1,"fs-12","mt-1"],[1,"px-3","pt-2","pb-3"],[1,"form-group"],[1,"input-group"],["type","text","placeholder","email@example.com; email2@example.com; ...",1,"form-control",3,"change","keypress","disabled","ngModel"],[1,"input-group-append"],["type","button",1,"btn",3,"click","disabled"],[1,"mb-0","mt-3"],["button","","detail","false",3,"disabled"],[1,"p-2"],["shape","round","fill","outline",1,"m-1",3,"click"],["slot","start","src","../../../assets/icon/24x24/attach.svg",1,"fs-24"],["slot","start","src","../../../assets/icon/24x24/embed.svg",1,"fs-24"],["slot","start","name","people-outline",1,"mr-3"],["slot","start","name","globe-outline",1,"mr-3"],["onerror","errorAvatar(this)",3,"src"],[1,"ml-3"]],template:function(l,n){1&l&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"translate"),e.j41(5,"ion-text",0),e.EFF(6),e.k0s()(),e.j41(7,"ion-buttons",1)(8,"ion-button",2),e.bIt("click",function(){return n.toggleFullScreen()}),e.nrm(9,"ion-icon",3),e.k0s(),e.j41(10,"ion-button",4),e.bIt("click",function(){return n.close()}),e.nrm(11,"ion-icon",5),e.k0s()()(),e.j41(12,"ion-toolbar")(13,"ion-item",6),e.bIt("click",function(i){return n.presentPopoverLookupShare(i)}),e.DNE(14,O,1,0,"ion-icon",7)(15,x,1,0)(16,G,1,0),e.j41(17,"ion-label")(18,"div",8)(19,"b",9),e.EFF(20),e.k0s(),e.nrm(21,"ion-icon",10),e.k0s(),e.j41(22,"div",11),e.EFF(23),e.k0s()()(),e.j41(24,"div",12)(25,"div",13)(26,"div",14)(27,"input",15),e.bIt("change",function(i){return n.changeEmails(i)})("keypress",function(i){return n.keypressEmails(i)}),e.k0s(),e.j41(28,"div",16)(29,"button",17),e.bIt("click",function(i){return n.submitEmails(i)}),e.EFF(30),e.nI1(31,"translate"),e.k0s()()()(),e.nrm(32,"hr"),e.j41(33,"label",18),e.EFF(34),e.nI1(35,"translate"),e.k0s()()()(),e.j41(36,"ion-content")(37,"ion-list"),e.Z7z(38,B,5,3,"ion-item",19,e.fX1),e.k0s()(),e.j41(40,"ion-footer",20)(41,"ion-button",21),e.bIt("click",function(i){return n.copyLink(i)}),e.nrm(42,"ion-icon",22),e.j41(43,"ion-label"),e.EFF(44),e.nI1(45,"translate"),e.k0s()(),e.j41(46,"ion-button",21),e.bIt("click",function(i){return n.copyEmbed(i)}),e.nrm(47,"ion-icon",23),e.j41(48,"ion-label"),e.EFF(49),e.nI1(50,"translate"),e.k0s()()()),2&l&&(e.R7$(3),e.SpI("",e.bMT(4,16,"Share"),": "),e.R7$(3),e.JRh(n.media.media_title),e.R7$(3),e.Y8G("src",n.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),e.R7$(5),e.vxM(14,n.mediaShare.v_share&&n.mediaShare.v_share!=n.v_share.ONLY_ME?n.mediaShare.v_share==n.v_share.ONLY_MEMBER?15:n.mediaShare.v_share==n.v_share.EVERYONE_HAS_LINK?16:-1:14),e.R7$(6),e.JRh(n.mediaShare.v_share_title),e.R7$(3),e.JRh(n.mediaShare.v_share_note),e.R7$(4),e.Y8G("disabled",!!n.isDisabled4Only)("ngModel",n.dataForm.emailaddrs),e.R7$(2),e.Y8G("disabled",!!n.isDisabled4Only),e.R7$(),e.JRh(e.bMT(31,18,"Add")),e.R7$(3),e.HbH(n.isDisabled4Only?"disabled":""),e.R7$(),e.Lme("",e.bMT(35,20,"SharedMembership")," (",n.mediaShareUsers.length,")"),e.R7$(4),e.Dyx(n.mediaShareUsers),e.R7$(6),e.JRh(e.bMT(45,22,n.isCopiedLink?"Copied":"CopyLink")),e.R7$(5),e.JRh(e.bMT(50,24,n.isCopiedEmbed?"Copied":"CopyEmbed")))},dependencies:[u.me,u.BC,u.vS,t.mC,t.Jm,t.QW,t.W9,t.M0,t.eU,t.iq,t.uz,t.he,t.nf,t.IO,t.BC,t.ai,h.D9],styles:["ion-toolbar[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{border-radius:50%;padding:8px;margin:0 1rem 0 0;background-color:#faebd7;color:var(--ion-color-primary)}ion-toolbar[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5}ion-footer[_ngcontent-%COMP%]{box-shadow:none;border:0;--box-shadow: none;--border-width: 0}ion-footer[_ngcontent-%COMP%]:before{display:none}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{min-width:234px;--border-width: 1px;--border-color: #747775;--background: transparent;--color: var(--ion-color-primary);--background-hover: var(--ion-color-primary-tint);--background-hover-opacity: 1;--color-hover: #fff;--background-focused: var(--ion-color-primary-shade);--background-focused-opacity: 1;--color-focused: #fff;--background-activated: var(--ion-color-primary);--background-activated-opacity: 1;--color-activated: #fff}.disabled[_ngcontent-%COMP%]{opacity:.65}.input-group[_ngcontent-%COMP%]{--color: #eee}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]{margin-left:.5rem}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:3rem;min-height:3rem;padding:0 1rem;border:0;border-radius:.25rem;text-align:center;line-height:0;vertical-align:middle;background-color:var(--ion-color-tertiary);color:var(--ion-color-tertiary-contrast)}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-tertiary-shade)}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]{height:3rem;padding:.25rem .5rem;border-color:var(--color, #4D4F60);color:var(--ion-text-color, #000);background-color:var(--ion-background-color, #fff)}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   .custom-select[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5f6ce1}.btn-share[_ngcontent-%COMP%]{padding:.25rem 0;margin:0;border:0;font-size:1rem;background-color:transparent;color:var(--ion-text-color, #000);outline:none;box-shadow:none}.btn-share[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{vertical-align:middle;font-size:1.5rem}.btn-share[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]:last-child{font-size:1rem}.btn-share[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin:0 .5rem;vertical-align:middle}.share-member-action[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .share-member-action[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem}.share-member-action[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%] + ion-icon[_ngcontent-%COMP%]{margin-left:.5rem}hr[_ngcontent-%COMP%]{margin:0}"]}),d})()},3753:(U,M,s)=>{s.d(M,{t:()=>L});var p=s(467),g=s(8671),_=s(2635),a=s(4438),C=s(6637),S=s(177),v=s(31);function f(c,e){1&c&&(a.qex(0),a.j41(1,"ion-content")(2,"div",2)(3,"div",3),a.nrm(4,"ion-spinner",4),a.k0s()()(),a.bVm())}function E(c,e){if(1&c){const t=a.RV6();a.qex(0),a.j41(1,"ion-item",9),a.bIt("click",function(){const h=a.eBV(t).$implicit,O=a.XpG(3);return a.Njj(O.filterChange(h.lookup_value))}),a.j41(2,"ion-label"),a.EFF(3),a.k0s()(),a.bVm()}if(2&c){const t=e.$implicit,u=a.XpG(3);a.R7$(),a.BMQ("color",t.lookup_value==u.selectedId?"primary":""),a.R7$(2),a.JRh(t.lookup_title)}}function P(c,e){if(1&c&&(a.j41(0,"ion-list",7),a.DNE(1,E,4,2,"ng-container",8),a.k0s()),2&c){const t=a.XpG(2);a.R7$(),a.Y8G("ngForOf",t.lookups)}}function y(c,e){1&c&&(a.j41(0,"div",3)(1,"i"),a.EFF(2),a.nI1(3,"translate"),a.k0s()()),2&c&&(a.R7$(2),a.JRh(a.bMT(3,1,"DataNotFound")))}function I(c,e){if(1&c){const t=a.RV6();a.qex(0),a.j41(1,"ion-item",9),a.bIt("click",function(){const h=a.eBV(t).$implicit,O=a.XpG(3);return a.Njj(O.filterChange(h.lookup_value))}),a.j41(2,"ion-label",10),a.EFF(3),a.k0s()(),a.bVm()}if(2&c){const t=e.$implicit,u=a.XpG(3);a.R7$(),a.BMQ("color",t.lookup_value==u.selectedId?"primary":""),a.R7$(),a.Y8G("color",t.color),a.R7$(),a.JRh(t.lookup_title)}}function D(c,e){if(1&c&&(a.qex(0),a.nrm(1,"hr"),a.j41(2,"ion-list",7),a.DNE(3,I,4,3,"ng-container",8),a.k0s(),a.bVm()),2&c){const t=a.XpG(2);a.R7$(3),a.Y8G("ngForOf",t.lookups_d2)}}function $(c,e){if(1&c&&(a.qex(0),a.DNE(1,P,2,1,"ion-list",5)(2,y,4,3,"div",6)(3,D,4,1,"ng-container",1),a.bVm()),2&c){const t=a.XpG();a.R7$(),a.Y8G("ngIf",t.lookups.length),a.R7$(),a.Y8G("ngIf",!t.lookups.length),a.R7$(),a.Y8G("ngIf",t.lookups_d2.length)}}let L=(()=>{var c;class e{constructor(u){this.popoverController=u,this.selectedId=0,this.lookup_key="",this.lookups_d2=[],this.dataInit={loading:!0},this.lookups=[]}ngOnInit(){var u=this;(0,p.A)(function*(){u.user=yield(0,_.Nk)(),u.loadLookup()})()}loadLookup(){var u;(0,g.$)({loading:h=>{this.dataInit.loading=h},params:{userid:null===(u=this.user)||void 0===u?void 0:u.userid,lookup_key:this.lookup_key},callback:h=>{this.lookups=h||[]}})}filterChange(u){var h;this.popoverController.dismiss(null!==(h=this.lookups.find(O=>O.lookup_value==u))&&void 0!==h?h:this.lookups_d2.find(O=>O.lookup_value==u),"confirm")}}return(c=e).\u0275fac=function(u){return new(u||c)(a.rXU(C.IE))},c.\u0275cmp=a.VBU({type:c,selectors:[["app-popover-lookup"]],inputs:{selectedId:"selectedId",lookup_key:"lookup_key",lookups_d2:"lookups_d2"},decls:3,vars:2,consts:[[1,"menu-lookup","overflow-auto"],[4,"ngIf"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],["lines","full",4,"ngIf"],["class","px-3 py-1",4,"ngIf"],["lines","full"],[4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],[3,"color"]],template:function(u,h){1&u&&(a.j41(0,"div",0),a.DNE(1,f,5,0,"ng-container",1)(2,$,4,3,"ng-container",1),a.k0s()),2&u&&(a.R7$(),a.Y8G("ngIf",h.dataInit.loading),a.R7$(),a.Y8G("ngIf",!h.dataInit.loading))},dependencies:[S.Sq,S.bT,C.W9,C.uz,C.he,C.nf,C.w2,v.D9],styles:[".menu-lookup[_ngcontent-%COMP%]{width:240px;max-height:480px;border-top:3px solid #5F6CE1}hr[_ngcontent-%COMP%]{margin:0}"]}),e})()},4668:(U,M,s)=>{s.d(M,{z:()=>p});const p={ONLY_ME:10400,ONLY_MEMBER:10401,EVERYONE_HAS_LINK:10402}}}]);