"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4850],{8671:(N,R,p)=>{p.d(R,{$:()=>j});var M=p(5972);function j(d){d.params=d.params||{},(0,M.hm)({url:"api/Lookup/get",params:{lookup_key:d.params.lookup_key||null},success:a=>{"function"==typeof d.callback&&d.callback(null==a?void 0:a.data)},error:a=>{"function"==typeof d.callback&&d.callback(),console.error(d,a)},loading:d.loading,loadingController:d.loadingController})}},4850:(N,R,p)=>{p.r(R),p.d(R,{KnowledgeMgmtPageModule:()=>It});var M=p(177),j=p(9417),d=p(6637),a=p(3658),v=p(467),F=p(5972),$=p(2635),A=p(8405),K=p(7331),B=p(3753),I=p(1312),G=p(1038),y=p(5414),O=p(523),t=p(4438),u=p(31);function x(n,s){if(1&n){const l=t.RV6();t.j41(0,"button",18),t.bIt("click",function(e){t.eBV(l);const i=t.XpG();return t.Njj(i.clearTopic(e))}),t.nrm(1,"ion-icon",19),t.k0s()}}function m(n,s){if(1&n){const l=t.RV6();t.j41(0,"button",18),t.bIt("click",function(e){t.eBV(l);const i=t.XpG();return t.Njj(i.clearCategory(e))}),t.nrm(1,"ion-icon",19),t.k0s()}}function g(n,s){if(1&n){const l=t.RV6();t.j41(0,"button",18),t.bIt("click",function(e){t.eBV(l);const i=t.XpG();return t.Njj(i.clearTextbookCatg(e))}),t.nrm(1,"ion-icon",19),t.k0s()}}function k(n,s){if(1&n){const l=t.RV6();t.j41(0,"button",18),t.bIt("click",function(e){t.eBV(l);const i=t.XpG();return t.Njj(i.clearPublisher(e))}),t.nrm(1,"ion-icon",19),t.k0s()}}let P=(()=>{var n;class s{constructor(o,e,i,r){this.modalController=o,this.toastController=e,this.loadingController=i,this.popoverController=r,this.textbook={},this.isfullscreen=!1,this.appsettings={}}ngOnInit(){var o=this;this.isfullscreen=window.document.body.classList.contains("modal-fullscreen"),(0,v.A)(function*(){o.appsettings=yield(0,F.AC)(),o.appsettings.madonvi&&(o.user=yield(0,$.Nk)(),o.refreshData())})()}toggleFullScreen(){this.isfullscreen?window.document.body.classList.remove("modal-fullscreen"):window.document.body.classList.add("modal-fullscreen"),this.isfullscreen=window.document.body.classList.contains("modal-fullscreen")}close(){return this.modalController.dismiss(null,"cancel")}refreshData(){}presentPopoverTopic(o){var e=this;return(0,v.A)(function*(){const i=yield e.popoverController.create({component:K.E,componentProps:{selectedId:e.textbook.topic_id,filter:{for:"textbook"}},event:o,dismissOnSelect:!1,animated:!1,side:"right"});i.onDidDismiss().then(r=>{var c,_,f,h,b,w,E;"confirm"==r.role&&(Object.assign(e.textbook,{topic_id:null===(c=r.data)||void 0===c?void 0:c.topic_id,topic_title:null===(_=r.data)||void 0===_?void 0:_.topic_title,topic_titles:null===(f=r.data)||void 0===f?void 0:f.topic_titles}),null!==(h=r.data)&&void 0!==h&&h.category_id&&Object.assign(e.textbook,{category_id:null===(b=r.data)||void 0===b?void 0:b.category_id,category_title:null===(w=r.data)||void 0===w?void 0:w.category_title,category_titles:null===(E=r.data)||void 0===E?void 0:E.category_titles}))}),i.present()})()}clearTopic(o){Object.assign(this.textbook,{topic_id:null,topic_title:null,topic_titles:null})}changeTopic(o){var e;this.textbook.topic_id=null!==(e=parseInt(o))&&void 0!==e?e:0}presentPopoverCategory(o){var e=this;return(0,v.A)(function*(){const i=yield e.popoverController.create({component:A.P,componentProps:{selectedId:e.textbook.category_id,filter:{for:"textbook"}},event:o,dismissOnSelect:!1,animated:!1,side:"right"});i.onDidDismiss().then(r=>{var c,_;"confirm"==r.role&&Object.assign(e.textbook,{category_id:null===(c=r.data)||void 0===c?void 0:c.category_id,category_title:null===(_=r.data)||void 0===_?void 0:_.category_title})}),i.present()})()}clearCategory(o){Object.assign(this.textbook,{category_id:null,category_title:null})}changeCategory(o){var e;this.textbook.category_id=null!==(e=parseInt(o))&&void 0!==e?e:0}presentPopoverLookupTextbookCatg(o){var e=this;return(0,v.A)(function*(){const i=yield e.popoverController.create({component:B.t,componentProps:{selectedId:e.textbook.v_textbook_catg,lookup_key:"v_textbook_catg"},event:o,dismissOnSelect:!1,animated:!1});i.onDidDismiss().then(r=>{var c,_;"confirm"==r.role&&Object.assign(e.textbook,{v_textbook_catg:null===(c=r.data)||void 0===c?void 0:c.lookup_value,v_textbook_catg_title:null===(_=r.data)||void 0===_?void 0:_.lookup_title})}),i.present()})()}clearTextbookCatg(o){Object.assign(this.textbook,{v_textbook_catg:null,v_textbook_catg_title:null})}changeTextbookCatg(o){var e;this.textbook.v_textbook_catg=null!==(e=parseInt(o))&&void 0!==e?e:0}presentPopoverLookupPublisher(o){var e=this;return(0,v.A)(function*(){const i=yield e.popoverController.create({component:B.t,componentProps:{selectedId:e.textbook.v_publisher,lookup_key:"v_publisher"},event:o,dismissOnSelect:!1,animated:!1});i.onDidDismiss().then(r=>{var c,_;"confirm"==r.role&&Object.assign(e.textbook,{v_publisher:null===(c=r.data)||void 0===c?void 0:c.lookup_value,v_publisher_title:null===(_=r.data)||void 0===_?void 0:_.lookup_title})}),i.present()})()}clearPublisher(o){Object.assign(this.textbook,{v_publisher:null,v_publisher_title:null})}changePublisher(o){var e;this.textbook.v_publisher=null!==(e=parseInt(o))&&void 0!==e?e:0}selectFile(){(0,I.oG)({accept:".pdf,.doc,.docx",multiple:!1},o=>{var e,i;null!=o&&o.length&&(this.textbookFile=o[0],this.textbook.filename=o[0].name,this.textbook.textbook_title=null!==(e=this.textbook.textbook_title)&&void 0!==e?e:null===(i=o[0].name)||void 0===i?void 0:i.split(".").shift())})}changeTextBookTitle(o){var e;this.textbook.textbook_title=null==o||null===(e=o.target)||void 0===e?void 0:e.value}save(){var o=[];this.textbookFile&&o.push(new Promise((i,r)=>{(0,G.v)({loadingController:this.loadingController,params:{file:this.textbookFile,subFolder:"textbook",fileType:"pdf,office"},callback:c=>{0==(null==c?void 0:c.ReturnCode)?(this.textbook.filepath=c.path+"/"+c.file.name,this.textbookFile=void 0):(0,y.c)(this.toastController,{},{returncode:null==c?void 0:c.ReturnCode,returnmsg:null==c?void 0:c.ReturnName}).then(_=>{_.present()}),i(c)}})}));var e=()=>{var i;this.textbook.filepath?(0,O.b)({loadingController:this.loadingController,params:{userid:null===(i=this.user)||void 0===i?void 0:i.userid,textbook_title:this.textbook.textbook_title,filepath:this.textbook.filepath,topic_id:this.textbook.topic_id,category_id:this.textbook.category_id,v_textbook_catg:this.textbook.v_textbook_catg,v_publisher:this.textbook.v_publisher},callback:r=>{0==(null==r?void 0:r.returncode)?this.modalController.dismiss(r.id,"success"):(0,y.c)(this.toastController,{},r).then(c=>{c.present()})}}):(0,y.c)(this.toastController,{color:"danger",message:"Kh\xf4ng t\xecm th\u1ea5y \u0111\u01b0\u1eddng d\u1eabn t\u1eadp tin!"}).then(r=>{r.present()})};o.length?Promise.all(o).then(()=>{e()}):e()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.rXU(d.W3),t.rXU(d.K_),t.rXU(d.Xi),t.rXU(d.IE))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-modal-textbook-add"]],inputs:{textbook:"textbook"},decls:77,vars:35,consts:[["slot","end","mode","ios","color","tertiary",3,"click"],["slot","end"],["color","dark",1,"d-none","d-md-block",3,"click"],[3,"src"],["color","dark",3,"click"],["src","../../../assets/icon/16x16/close.svg"],[1,"container-fluid","py-3"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","readonly","",1,"form-control",3,"value"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","btn-popover",3,"click"],["name","folder-open-outline"],["type","text",1,"form-control",3,"change","ngModel"],["type","button","class","btn btn-outline-secondary",3,"click",4,"ngIf"],["name","chevron-down-outline"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["name","close-outline"]],template:function(o,e){if(1&o&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.j41(5,"ion-button",0),t.bIt("click",function(){return e.save()}),t.j41(6,"ion-label"),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"ion-buttons",1)(10,"ion-button",2),t.bIt("click",function(){return e.toggleFullScreen()}),t.nrm(11,"ion-icon",3),t.k0s(),t.j41(12,"ion-button",4),t.bIt("click",function(){return e.close()}),t.nrm(13,"ion-icon",5),t.k0s()()()(),t.j41(14,"ion-content")(15,"div",6)(16,"div",7)(17,"div",8)(18,"div",9)(19,"label",10),t.EFF(20),t.nI1(21,"translate"),t.k0s()(),t.nrm(22,"input",11),t.j41(23,"div",12)(24,"button",13),t.bIt("click",function(){return e.selectFile()}),t.nrm(25,"ion-icon",14),t.k0s()()()(),t.j41(26,"div",7)(27,"div",8)(28,"div",9)(29,"label",10),t.EFF(30),t.nI1(31,"translate"),t.k0s()(),t.j41(32,"input",15),t.bIt("change",function(r){return e.changeTextBookTitle(r)}),t.k0s()()(),t.j41(33,"div",7)(34,"div",8)(35,"div",9)(36,"label",10),t.EFF(37),t.nI1(38,"translate"),t.k0s()(),t.nrm(39,"input",11),t.j41(40,"div",12),t.DNE(41,x,2,0,"button",16),t.j41(42,"button",13),t.bIt("click",function(r){return e.presentPopoverTopic(r)}),t.nrm(43,"ion-icon",17),t.k0s()()()(),t.j41(44,"div",7)(45,"div",8)(46,"div",9)(47,"label",10),t.EFF(48),t.nI1(49,"translate"),t.k0s()(),t.nrm(50,"input",11),t.j41(51,"div",12),t.DNE(52,m,2,0,"button",16),t.j41(53,"button",13),t.bIt("click",function(r){return e.presentPopoverCategory(r)}),t.nrm(54,"ion-icon",17),t.k0s()()()(),t.j41(55,"div",7)(56,"div",8)(57,"div",9)(58,"label",10),t.EFF(59),t.nI1(60,"translate"),t.k0s()(),t.nrm(61,"input",11),t.j41(62,"div",12),t.DNE(63,g,2,0,"button",16),t.j41(64,"button",13),t.bIt("click",function(r){return e.presentPopoverLookupTextbookCatg(r)}),t.nrm(65,"ion-icon",17),t.k0s()()()(),t.j41(66,"div",7)(67,"div",8)(68,"div",9)(69,"label",10),t.EFF(70),t.nI1(71,"translate"),t.k0s()(),t.nrm(72,"input",11),t.j41(73,"div",12),t.DNE(74,k,2,0,"button",16),t.j41(75,"button",13),t.bIt("click",function(r){return e.presentPopoverLookupPublisher(r)}),t.nrm(76,"ion-icon",17),t.k0s()()()()()()),2&o){let i,r,c,_,f;t.R7$(3),t.JRh(t.bMT(4,19,"AddTextBook")),t.R7$(4),t.JRh(t.bMT(8,21,"Add")),t.R7$(4),t.Y8G("src",e.isfullscreen?"assets/icon/16x16/fullscreen-exit.svg":"assets/icon/16x16/fullscreen.svg"),t.R7$(9),t.JRh(t.bMT(21,23,"File")),t.R7$(2),t.Y8G("value",null!==(i=e.textbook.filename)&&void 0!==i?i:""),t.R7$(8),t.JRh(t.bMT(31,25,"TextBookName")),t.R7$(2),t.Y8G("ngModel",e.textbook.textbook_title),t.R7$(5),t.JRh(t.bMT(38,27,"GradeLevel")),t.R7$(2),t.Y8G("value",null==(null!==(r=e.textbook.topic_titles)&&void 0!==r?r:e.textbook.topic_title)||null==(r=(null!=r?r:e.textbook.topic_title).split(";"))||null==(r=r.reverse())?null:r.join(" / ")),t.R7$(2),t.Y8G("ngIf",e.textbook.topic_id),t.R7$(7),t.JRh(t.bMT(49,29,"Subject")),t.R7$(2),t.Y8G("value",null==(null!==(c=e.textbook.category_titles)&&void 0!==c?c:e.textbook.category_title)||null==(c=(null!=c?c:e.textbook.category_title).split(";"))||null==(c=c.reverse())?null:c.join(" / ")),t.R7$(2),t.Y8G("ngIf",e.textbook.category_id),t.R7$(7),t.JRh(t.bMT(60,31,"Catalogue")),t.R7$(2),t.Y8G("value",null!==(_=e.textbook.v_textbook_catg_title)&&void 0!==_?_:""),t.R7$(2),t.Y8G("ngIf",e.textbook.v_textbook_catg),t.R7$(7),t.JRh(t.bMT(71,33,"Publisher")),t.R7$(2),t.Y8G("value",null!==(f=e.textbook.v_publisher_title)&&void 0!==f?f:""),t.R7$(2),t.Y8G("ngIf",e.textbook.v_publisher)}},dependencies:[M.bT,j.me,j.BC,j.vS,d.Jm,d.QW,d.W9,d.eU,d.iq,d.he,d.BC,d.ai,u.D9],styles:[".input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{outline:none!important;box-shadow:none!important}.input-group[_ngcontent-%COMP%]   .input-group-prepend[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{min-width:120px}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{line-height:0}.input-group[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem;border:1px solid #ddd;border-radius:4px}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group[_ngcontent-%COMP%]   .form-control-plaintext[_ngcontent-%COMP%]:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#fff}"]}),s})();var V=p(5312),S=p(8295),L=p(5446),U=p(6539),Y=p(2313),z=p(7375),J=p(4393),W=p(7704),H=p(2706);const Q=(n,s)=>({item:s,$index:n}),D=n=>({$implicit:n});function Z(n,s){if(1&n&&(t.j41(0,"div",36),t.eu8(1,37),t.k0s()),2&n){const l=s.$implicit;t.XpG(3);const o=t.sdS(48);t.R7$(),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.eq3(2,D,l))}}function q(n,s){if(1&n&&(t.j41(0,"ion-content",34)(1,"div",35),t.Z7z(2,Z,2,4,"div",36,t.fX1),t.k0s()()),2&n){const l=t.XpG(2);t.R7$(2),t.Dyx(l.textBooks)}}function tt(n,s){if(1&n&&(t.j41(0,"div",30)(1,"span",31),t.EFF(2),t.k0s(),t.nrm(3,"ion-icon",32),t.k0s(),t.j41(4,"ion-popover",33),t.DNE(5,q,4,0,"ng-template"),t.k0s()),2&n){const l=t.XpG();t.R7$(2),t.JRh(l.textBook.textbook_title)}}function et(n,s){if(1&n){const l=t.RV6();t.j41(0,"iframe",38),t.nI1(1,"safe"),t.bIt("load",function(e){t.eBV(l);const i=t.XpG();return t.Njj(i.loadIframe(e))}),t.k0s()}if(2&n){const l=t.XpG();t.Y8G("src",t.i5U(1,1,l.iframeUrl,"resourceUrl"),t.f$h)}}function ot(n,s){if(1&n&&(t.j41(0,"div",40)(1,"b"),t.EFF(2,"Ch\u01b0a hu\u1ea5n luy\u1ec7n AI"),t.k0s(),t.j41(3,"div")(4,"a",41),t.EFF(5),t.k0s()()()),2&n){const l=t.XpG(2);t.R7$(4),t.Y8G("href",l.readfileuploadurl+l.textBook.filepath,t.B4B),t.R7$(),t.JRh(l.readfileuploadurl+l.textBook.filepath)}}function nt(n,s){if(1&n&&(t.j41(0,"div",39),t.DNE(1,ot,6,2,"div",40),t.k0s()),2&n){const l=t.XpG();t.R7$(),t.vxM(1,l.textBook.isaitrained?-1:1)}}function it(n,s){if(1&n&&(t.j41(0,"div",46),t.eu8(1,37),t.k0s()),2&n){const l=s.$implicit;t.XpG(2);const o=t.sdS(48);t.R7$(),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.eq3(2,D,l))}}function lt(n,s){if(1&n&&(t.j41(0,"div",42)(1,"div",43),t.EFF(2,"Ch\u1ecdn ch\u01b0\u01a1ng tr\xecnh h\u1ecdc"),t.k0s(),t.j41(3,"div",21)(4,"ion-content")(5,"div",44)(6,"div",45),t.Z7z(7,it,2,4,"div",46,t.fX1),t.k0s()()()()()),2&n){const l=t.XpG();t.R7$(7),t.Dyx(l.textBooks)}}function rt(n,s){if(1&n&&t.eu8(0,20),2&n){t.XpG();const l=t.sdS(46);t.Y8G("ngTemplateOutlet",l)}}function at(n,s){if(1&n){const l=t.RV6();t.j41(0,"ion-button",58),t.bIt("click",function(){t.eBV(l);const e=t.XpG(3);return t.Njj(e.trainningAI())}),t.j41(1,"ion-label"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"ion-icon",59),t.k0s()}2&n&&(t.R7$(2),t.JRh(t.bMT(3,1,"TrainningAI")))}function ct(n,s){if(1&n){const l=t.RV6();t.j41(0,"ion-button",60),t.bIt("click",function(){t.eBV(l),t.XpG(3);const e=t.sdS(31);return t.Njj(null==e?null:e.present())}),t.j41(1,"ion-label"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.nrm(4,"ion-icon",61),t.k0s()}2&n&&(t.R7$(2),t.JRh(t.bMT(3,1,"ViewTextBook")))}function st(n,s){if(1&n){const l=t.RV6();t.j41(0,"div",47),t.DNE(1,at,5,3,"ion-button",54)(2,ct,5,3,"ion-button",55),t.j41(3,"ion-button",56),t.bIt("click",function(){t.eBV(l);const e=t.XpG(2);return t.Njj(e.presentModalTextbookAdd())}),t.j41(4,"ion-label"),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.nrm(7,"ion-icon",57),t.k0s()()}if(2&n){const l=t.XpG(2);t.R7$(),t.vxM(1,l.textBook&&!l.textBook.isaitrained?1:-1),t.R7$(),t.vxM(2,l.textBook&&l.textBook.filepath?2:-1),t.R7$(3),t.JRh(t.bMT(6,3,"Upload"))}}function dt(n,s){if(1&n&&(t.j41(0,"ion-accordion",53)(1,"ion-item",62)(2,"ion-label")(3,"div",63),t.EFF(4),t.k0s()()(),t.nrm(5,"div",64),t.k0s()),2&n){const l=s.$implicit;t.Mz_("value","accordion-ai-faq-",s.$index,""),t.R7$(4),t.JRh(l.title),t.R7$(),t.Y8G("innerHTML",l.content,t.npT)}}function pt(n,s){if(1&n){const l=t.RV6();t.j41(0,"div",23),t.DNE(1,st,8,5,"div",47),t.j41(2,"div",48)(3,"b"),t.EFF(4,"C\xe2u h\u1ecfi th\u01b0\u1eddng g\u1eb7p"),t.k0s(),t.j41(5,"ion-button",49),t.bIt("click",function(){t.eBV(l);const e=t.XpG();return t.Njj(e.setTabDocument())}),t.nrm(6,"ion-icon",50),t.k0s()(),t.j41(7,"div",21)(8,"ion-content")(9,"div",51)(10,"ion-accordion-group",52),t.Z7z(11,dt,6,4,"ion-accordion",53,Q),t.k0s()()()()()}if(2&n){const l=t.XpG();t.R7$(),t.vxM(1,1300==(null==l.user?null:l.user.v_role)?1:-1),t.R7$(10),t.Dyx(l.aiFaqs)}}function _t(n,s){if(1&n){const l=t.RV6();t.j41(0,"div",65)(1,"div",66),t.bIt("click",function(){t.eBV(l);const e=t.XpG();return t.Njj(e.setTabDocument("faq"))}),t.nrm(2,"ion-icon",67),t.k0s()()}if(2&n){const l=t.XpG();t.R7$(),t.HbH("faq"==l.tabDocument?"bg-primary":"")}}function ut(n,s){if(1&n){const l=t.RV6();t.j41(0,"iframe",71),t.nI1(1,"safe"),t.bIt("load",function(e){t.eBV(l);const i=t.XpG(2);return t.Njj(i.loadIframe(e))}),t.k0s()}if(2&n){const l=t.XpG(2);t.Y8G("src",t.i5U(1,1,"assets/iframe/lib/PDFReader/web/viewer.html?file="+(l.readfileuploadurl+(null==l.textBook?null:l.textBook.filepath)),"resourceUrl"),t.f$h)}}function gt(n,s){if(1&n){const l=t.RV6();t.j41(0,"iframe",71),t.nI1(1,"safe"),t.bIt("load",function(e){t.eBV(l);const i=t.XpG(2);return t.Njj(i.loadIframe(e))}),t.k0s()}if(2&n){const l=t.XpG(2);t.Y8G("src",t.i5U(1,1,"https://view.officeapps.live.com/op/view.aspx?src="+(l.readfileuploadurl+(null==l.textBook?null:l.textBook.filepath)),"resourceUrl"),t.f$h)}}function mt(n,s){if(1&n){const l=t.RV6();t.j41(0,"iframe",71),t.nI1(1,"safe"),t.bIt("load",function(e){t.eBV(l);const i=t.XpG(2);return t.Njj(i.loadIframe(e))}),t.k0s()}if(2&n){const l=t.XpG(2);t.Y8G("src",t.i5U(1,1,"https://view.officeapps.live.com/op/view.aspx?src="+(l.readfileuploadurl+(null==l.textBook?null:l.textBook.filepath)),"resourceUrl"),t.f$h)}}function ft(n,s){if(1&n){const l=t.RV6();t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3),t.k0s(),t.j41(4,"ion-buttons",68)(5,"ion-button",69),t.bIt("click",function(){t.eBV(l),t.XpG();const e=t.sdS(31);return t.Njj(null==e?null:e.dismiss())}),t.nrm(6,"ion-icon",50),t.k0s()()()(),t.j41(7,"ion-content",70),t.DNE(8,ut,2,4)(9,gt,2,4)(10,mt,2,4),t.k0s()}if(2&n){let l;const o=t.XpG();t.R7$(3),t.JRh(null==o.textBook?null:o.textBook.textbook_title),t.R7$(5),t.vxM(8,"pdf"===(l=null==o.textBook||null==o.textBook.filepath||null==(l=o.textBook.filepath.split("."))||null==(l=l.pop())?null:l.toLowerCase())?8:"doc"===l?9:"docx"===l?10:-1)}}function vt(n,s){if(1&n&&t.eu8(0,37),2&n){const l=s.$implicit;t.XpG(2);const o=t.sdS(44);t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.eq3(2,D,l))}}function kt(n,s){if(1&n&&(t.j41(0,"ion-list",72)(1,"ul"),t.DNE(2,vt,1,4,"ng-container",73),t.k0s()()),2&n){const l=t.XpG();t.R7$(2),t.Y8G("ngForOf",l.filterTopic(l.topics))}}function ht(n,s){1&n&&t.nrm(0,"ion-icon",76)}function bt(n,s){1&n&&t.nrm(0,"ion-spinner",79)}function xt(n,s){1&n&&t.nrm(0,"ion-icon",80)}function Ct(n,s){if(1&n&&(t.j41(0,"ion-badge",81),t.EFF(1),t.k0s()),2&n){const l=t.XpG(2).$implicit,o=t.XpG();t.R7$(),t.JRh(o.APP_FUNC_FormatNumber(l.total_textbook))}}function Mt(n,s){if(1&n&&t.eu8(0,37),2&n){const l=s.$implicit;t.XpG(4);const o=t.sdS(44);t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.eq3(2,D,l))}}function Pt(n,s){if(1&n&&(t.j41(0,"ul"),t.DNE(1,Mt,1,4,"ng-container",73),t.k0s()),2&n){const l=t.XpG(2).$implicit,o=t.XpG();t.R7$(),t.Y8G("ngForOf",o.filterTopic(o.topics,l.topic_id))}}function Tt(n,s){if(1&n){const l=t.RV6();t.j41(0,"li")(1,"ion-item",74),t.bIt("click",function(){t.eBV(l);const e=t.XpG().$implicit,i=t.XpG();return t.Njj(e.disabled?null:i.applyFilterTopic({topic_id:e.topic_id,topic_title:e.topic_title,topic_titles:e.topic_titles,category_id:e.category_id,category_title:e.category_title,category_titles:e.category_titles}))}),t.j41(2,"ion-button",75),t.bIt("click",function(e){t.eBV(l);const i=t.XpG().$implicit,r=t.XpG();return t.Njj(r.expandTopic(e,i.topic_id,i.isexpanded))}),t.DNE(3,ht,1,0,"ion-icon",76)(4,bt,1,0)(5,xt,1,0),t.k0s(),t.j41(6,"ion-label",77),t.EFF(7),t.k0s(),t.DNE(8,Ct,2,1,"ion-badge",78),t.k0s(),t.DNE(9,Pt,2,1,"ul"),t.k0s()}if(2&n){const l=t.XpG().$implicit,o=t.XpG();t.R7$(),t.HbH(l.topic_id==o.filter.topic_id?"actived":""),t.R7$(),t.BMQ("style",l.ishaschild?"visibility:unset":"visibility:hidden",t.$dS),t.R7$(),t.vxM(3,l.isexpanded?l.loading?4:5:3),t.R7$(3),t.Y8G("title",l.topic_title),t.R7$(),t.JRh(l.topic_title),t.R7$(),t.Y8G("ngIf",l.total_textbook),t.R7$(),t.vxM(9,l.isexpanded?9:-1)}}function jt(n,s){if(1&n&&t.DNE(0,Tt,10,8,"li"),2&n){const l=s.$implicit,o=t.XpG();t.vxM(0,1300==(null==o.user?null:o.user.v_role)||l.total_textbook?0:-1)}}function yt(n,s){1&n&&(t.j41(0,"div",82)(1,"div",83),t.EFF(2,"Ch\u1ecdn ch\u01b0\u01a1ng tr\xecnh h\u1ecdc "),t.j41(3,"span",84),t.EFF(4,"b\u1ea1n c\u1ea7n gi\u1ea3i \u0111\xe1p!"),t.k0s()(),t.j41(5,"div",85),t.nrm(6,"ion-img",86)(7,"ion-img",87),t.k0s()())}function wt(n,s){if(1&n){const l=t.RV6();t.j41(0,"div",88),t.bIt("click",function(){const e=t.eBV(l).$implicit,i=t.XpG();return t.Njj(i.detailTextBook(e.textbook_id))}),t.j41(1,"div",89)(2,"div",90),t.nrm(3,"ion-icon",91),t.k0s(),t.j41(4,"div",92)(5,"div",93),t.EFF(6),t.k0s(),t.j41(7,"div",94),t.EFF(8),t.k0s()()()()}if(2&n){let l,o;const e=s.$implicit;t.HbH(e.isaitrained?"bg-light bg-active-hover":"bg-secondary"),t.R7$(3),t.Mz_("src","../../../assets/icon/subject/",null!==(l=e.category_icon)&&void 0!==l?l:"none.svg",""),t.R7$(2),t.Y8G("title",e.textbook_title),t.R7$(),t.JRh(e.textbook_title),t.R7$(2),t.JRh(null!==(o=e.v_publisher_title)&&void 0!==o?o:e.v_textbook_catg_title)}}const Ot=[{path:"",component:(()=>{var n;class s{constructor(o,e,i,r,c){this.router=o,this.activatedRoute=e,this.modalController=i,this.toastController=r,this.loadingController=c,this.APP_FUNC_FormatNumber=I.gs,this.envVersion=V.c.version,this.aiFaqs=z,this.appsettings={},this.readfileuploadurl="",this.filter={},this.topics=[],this.textBooks=[]}ngOnInit(){var o=this;this.filter.topic_id=parseInt(this.activatedRoute.snapshot.queryParamMap.get("topic")||"0"),(0,v.A)(function*(){var e;o.appsettings=yield(0,F.AC)(),o.appsettings.madonvi&&(o.user=yield(0,U.sx)(),o.readfileuploadurl=null!==(e=o.appsettings.readfileuploadurl)&&void 0!==e?e:"",o.refreshDataAll())})(),window.innerWidth>=1200&&(0,J.pJ)({callback:e=>{var i;this.tabDocument=null!==(i=e.tabDocument)&&void 0!==i?i:"faq"}})}refreshDataAll(o){Promise.all([new Promise((e,i)=>{this.refreshDataTopic(r=>{e(r)})})]).finally(()=>{this.filter.topic_id&&this.refreshDataTextBook()})}filterChange(o){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{topic:this.filter.topic_id||null},queryParamsHandling:"merge",replaceUrl:!0}),this.refreshDataTextBook()}refreshDataTopic(o){this.loadTopic(void 0,()=>{if(o&&o(),this.filter.topic_id){var e;let{topic_id:r,topic_title:c,topic_titles:_}=null!==(e=this.topics.find(f=>f.topic_id==this.filter.topic_id))&&void 0!==e?e:{};var i;r?Object.assign(this.filter,{topic_id:r,topic_title:c,topic_titles:_}):(0,L.Y5)({params:{userid:null===(i=this.user)||void 0===i?void 0:i.userid,topic_id:this.filter.topic_id,statistic:Y.C.textbook,page:1,limit:-1},callback:f=>{var h;let b=f||[];b.forEach(C=>{let T=this.topics.find(X=>X.topic_id==C.topic_id);T?Object.assign(T,C):this.topics.push(C)}),b.map(C=>C.topic_pid).filter((C,T,X)=>X.indexOf(C)==T).forEach(C=>{this.topics.filter(T=>T.topic_id==C).forEach(T=>{T.isexpanded=!0,T.isloadedchild=!0})});let{topic_id:w,topic_title:E,topic_titles:Et}=null!==(h=this.topics.find(C=>C.topic_id==this.filter.topic_id))&&void 0!==h?h:{};w&&Object.assign(this.filter,{topic_id:w,topic_title:E,topic_titles:Et})}})}},!0)}loadTopic(o,e,i){var r;(0,L.At)({loading:c=>{o&&(o.loading=c)},params:{userid:null===(r=this.user)||void 0===r?void 0:r.userid,topic_pid:null==o?void 0:o.topic_id,statistic:Y.C.textbook,page:1,limit:-1},callback:c=>{if(this.topics=i?c||[]:this.topics.concat(c||[]),i){let _=[];this.topics.forEach(f=>{f.isexpanded=!0,f.isloadedchild=!0,_.push(new Promise(h=>{this.loadTopic(f,h)}))}),Promise.all(_).then(()=>{e&&e()})}else e&&e()}})}filterTopic(o,e){return o.filter(e?i=>i.topic_pid==e:i=>null==i.topic_pid||0==i.topic_pid)}expandTopic(o,e,i){o.preventDefault(),o.stopPropagation(),this.topics.filter(r=>r.topic_id==e).forEach(r=>{r.isexpanded=!i,r.isloadedchild||(r.isloadedchild=!0,this.loadTopic(r))})}applyFilterTopic(o){this.filter.topic_id==o.topic_id||Object.assign(this.filter,o),this.filterChange()}clearFilterTopic(o){Object.assign(this.filter,{topic_id:null,topic_title:null,topic_titles:null}),this.filterChange()}setFilterTopic(o){o&&(this.filter.topic_id=o,this.filterChange())}refreshDataTextBook(o){this.loadTextBook(e=>{1==e.length?this.detailTextBook(e[0].textbook_id,o):(this.textBook=void 0,this.iframeUrl=void 0,o&&o())},!0)}loadTextBook(o,e){var i;(0,O.tZ)({loadingController:this.loadingController,params:{userid:null===(i=this.user)||void 0===i?void 0:i.userid,topic_id:this.filter.topic_id,category_id:this.filter.category_id,v_textbook_catg:this.filter.v_textbook_catg,v_publisher:this.filter.v_publisher,page:1,limit:-1},callback:r=>{this.textBooks=e?r||[]:this.textBooks.concat(r||[]),o&&o(this.textBooks)}})}detailTextBook(o,e){var i;o?(0,O._v)({loadingController:this.loadingController,params:{userid:null===(i=this.user)||void 0===i?void 0:i.userid,textbook_id:o,page:1,limit:-1},callback:r=>{this.textBook=null!=r?r:{},this.iframeUrl=this.textBook.textbook_id&&this.textBook.isaitrained?`https://ai.codx.vn/ChatBox/DocumentIFrame?k=${V.c.ai_key}&docIds=${this.textBook.textbook_id}`:void 0,e&&e()}}):e&&e()}addTextBook(o){var e;(0,O.b)({loadingController:this.loadingController,params:{userid:null===(e=this.user)||void 0===e?void 0:e.userid,textbook_title:o.fileName,filepath:o.filePath,topic_id:this.filter.topic_id,category_id:this.filter.category_id,v_textbook_catg:10801,v_publisher:10901},callback:i=>{0==(null==i?void 0:i.returncode)?this.refreshDataAll():(0,y.c)(this.toastController,{},i).then(r=>{r.present()})}})}loadIframe(o){return(0,v.A)(function*(){})()}setTabDocument(o){var e=this;return(0,v.A)(function*(){e.tabDocument=e.tabDocument==o?void 0:o,(0,J.LK)({params:{tabDocument:e.tabDocument}})})()}uploadTextBook(){var o=this;return(0,v.A)(function*(){(0,I.oG)({accept:".pdf,.doc,.docx",multiple:!1},e=>{null!=e&&e.length&&(0,G.v)({loadingController:o.loadingController,params:{file:e[0],subFolder:"textbook",fileType:"pdf,office"},callback:i=>{0==(null==i?void 0:i.ReturnCode)?o.addTextBook({fileName:i.name.replace(/.[a-zA-Z0-9]+$/,""),filePath:i.path+"/"+i.file.name}):(0,y.c)(o.toastController,{},{returncode:null==i?void 0:i.ReturnCode,returnmsg:null==i?void 0:i.ReturnName}).then(r=>{r.present()})}})})})()}trainningAI(){var o=this;return(0,v.A)(function*(){var e,i,r,c;null===(e=o.textBook)||void 0===e||!e.textbook_id||null===(i=o.textBook)||void 0===i||!i.filepath||(0,S.fA)({loadingController:o.loadingController,params:{DocumentExternalId:null===(r=o.textBook)||void 0===r?void 0:r.textbook_id,FileUrl:o.readfileuploadurl+(null===(c=o.textBook)||void 0===c?void 0:c.filepath)},callback:_=>{var f,h;null!=_&&_.Succeeded&&(0,O.$1)({params:{userid:null===(f=o.user)||void 0===f?void 0:f.userid,textbook_id:null===(h=o.textBook)||void 0===h?void 0:h.textbook_id,ai_code:"lamgicoaicode"},callback:b=>{0==(null==b?void 0:b.returncode)?o.refreshDataAll():(0,y.c)(o.toastController,{},b).then(w=>{w.present()})}})}})})()}presentModalTextbookAdd(){var o=this;return(0,v.A)(function*(){let{topic_id:e,topic_title:i,topic_titles:r,category_id:c,category_title:_,category_titles:f}=o.filter;const h=yield o.modalController.create({component:P,componentProps:{textbook:Object.assign({},{topic_id:e,topic_title:i,topic_titles:r,category_id:c,category_title:_,category_titles:f,v_textbook_catg:10801,v_publisher:10901})}});h.onDidDismiss().then(b=>{"success"==b.role&&b.data&&o.refreshDataAll()}),h.present()})()}}return(n=s).\u0275fac=function(o){return new(o||n)(t.rXU(a.Ix),t.rXU(a.nX),t.rXU(d.W3),t.rXU(d.K_),t.rXU(d.Xi))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-Knowledge-mgmt"]],decls:49,vars:13,consts:[["modalViewTextBook",""],["treeTopic",""],["treeTopicNode",""],["templateBegin",""],["templateTextBook",""],[3,"isFullWidth"],["scroll-x","false","scroll-y","false"],[1,"w-100","h-100","d-flex"],[1,"flex-grow-1","d-flex","flex-column"],[1,"min-h-50","d-flex","align-items-center","bg-linear"],[1,"w-240","min-w-240","d-flex","align-items-center","justify-content-center"],[1,"fs-18"],[1,"flex-grow-1","d-flex","align-items-center","justify-content-between","px-3"],[1,"flex-grow-1","d-flex","align-items-center","justify-content-between"],[1,"flex-grow-1","d-flex","tree-topic"],[1,"w-240","min-w-240","h-100"],[1,"component-container"],["lines","none","detail","false"],["slot","start","src","../../../assets/icon-svg/dashboard/topic.svg",1,"mr-3"],[1,"fw-700"],[3,"ngTemplateOutlet"],[1,"flex-grow-1"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",1,"w-100","h-100","min-w-480",3,"src"],[1,"w-480","min-w-280","max-w-480","d-flex","flex-column"],[1,"ion-modal-lg","ion-modal-bottom"],[1,"px-3","py-1"],[1,"fs-14"],[1,"d-flex","align-items-center","line-height-0","mt-1"],["src","../../../assets/favicon/favicon-16x16.png","alt","Tabca-16x16"],[1,"text-muted","ml-1","fs-12"],["id","present-popover-select-textbook",1,"d-flex","align-items-center","justify-content-between","min-w-200","max-w-240","h-32","px-2","text-ellipsis","cursor-pointer","select-textbook"],[1,"fs-14","mr-2","text-ellipsis"],["name","chevron-down-outline",1,"fs-16"],["mode","ios","trigger","present-popover-select-textbook","trigger-action","click","dismiss-on-select","true"],[1,"ion-padding"],[1,"w-320","max-h-240","row","align-items-start"],[1,"col-12","pb-3"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",1,"w-100","h-100","min-w-480",3,"load","src"],[1,"w-100","h-100","d-flex","align-items-center","justify-content-center"],[1,"mw-100","p-3","text-center","text-wrap"],["target","_blank",3,"href"],[1,"w-100","h-100","min-w-480","d-flex","flex-column"],[1,"fs-30","fw-700","text-center","mt-4","mb-5"],[1,"px-4"],[1,"row","align-items-start"],[1,"col-12","col-xxl-6","mb-3"],[1,"d-flex","align-items-center","justify-content-end","bg-warning","min-h-50","px-3"],[1,"d-flex","align-items-center","justify-content-between","bg-f5","min-h-50","pl-3"],["color","medium","fill","clear",1,"btn-close",3,"click"],["name","close-outline",1,"fs-24"],[1,"p-3"],["value","accordion-ai-faq-0"],[3,"value"],["mode","ios","size","small","color","linear"],["mode","ios","size","small","color","medium"],["mode","ios","size","small","color","primary",3,"click"],["name","cloud-upload-outline",1,"ml-2"],["mode","ios","size","small","color","linear",3,"click"],["name","sparkles-outline",1,"ml-2"],["mode","ios","size","small","color","medium",3,"click"],["name","eye-outline",1,"ml-2"],["slot","header","lines","none"],[1,"fs-16","text-wrap"],["slot","content",1,"ion-padding","fs-14",3,"innerHTML"],[1,"min-w-50px","w-50px","d-flex","flex-column","overflow-auto"],[1,"min-h-50px","d-flex","align-items-center","justify-content-center","border-bottom","cursor-pointer",3,"click"],["name","chatbubbles-outline",1,"fs-24"],["slot","end"],[3,"click"],[1,"line-height-0"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","autoplay; fullscreen",1,"w-100","h-100",3,"load","src"],["lines","none"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],["button","","detail","false",1,"ion-no-padding",3,"click"],["slot","start","color","medium","fill","clear",3,"click"],["name","caret-forward-outline"],[3,"title"],["class","fs-12","color","medium",4,"ngIf"],["color","dark"],["name","caret-down-outline"],["color","medium",1,"fs-12"],[1,"w-100","h-100","min-w-480","d-flex","flex-column","align-items-center","justify-content-center","p-3"],[1,"fs-28","fw-500","mb-3","text-center",2,"color","#311A8C"],[1,"d-inline-block"],[1,"d-flex","align-items-center","justify-content-center"],["src","../../../assets/image/ai/Knowledge-mgmt.svg",1,"max-h-100px","mr-3"],["src","../../../assets/image/ai/tabca-bot.gif",1,"w-280","min-w-280"],[1,"mw-100","textbook-item","d-inline-block","cursor-pointer",3,"click"],[1,"min-w-200","mw-100","min-h-60","d-flex","align-items-center"],[1,"min-w-60","d-flex","align-items-center","justify-content-center"],[1,"fs-30",3,"src"],[1,"py-2","pr-3","text-ellipsis"],[1,"line-height-24","fs-18","fw-500","text-ellipsis",3,"title"],[1,"line-height-20","fs-14","text-muted"]],template:function(o,e){if(1&o&&(t.nrm(0,"app-header",5),t.j41(1,"ion-content",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"div",10)(6,"span",11),t.EFF(7),t.nI1(8,"translate"),t.k0s()(),t.j41(9,"div",12)(10,"div",13)(11,"span",11),t.EFF(12),t.k0s(),t.DNE(13,tt,6,1),t.k0s()()(),t.j41(14,"div",14)(15,"div",15)(16,"ion-content",16)(17,"ion-item",17),t.nrm(18,"ion-icon",18),t.j41(19,"ion-label",19),t.EFF(20),t.nI1(21,"translate"),t.k0s()(),t.eu8(22,20),t.k0s()(),t.j41(23,"div",21),t.DNE(24,et,2,4,"iframe",22)(25,nt,2,1)(26,lt,9,0)(27,rt,1,1),t.k0s()()(),t.DNE(28,pt,13,1,"div",23)(29,_t,3,2),t.k0s(),t.j41(30,"ion-modal",24,0),t.DNE(32,ft,11,2,"ng-template"),t.k0s()(),t.j41(33,"ion-footer")(34,"div",25)(35,"div",26),t.EFF(36,"\xa9 Copyright 2024 by L\u1ea1c Vi\u1ec7t"),t.k0s(),t.j41(37,"div",27),t.nrm(38,"img",28),t.j41(39,"span",29),t.EFF(40),t.k0s()()()(),t.DNE(41,kt,3,1,"ng-template",null,1,t.C5r)(43,jt,1,1,"ng-template",null,2,t.C5r)(45,yt,8,0,"ng-template",null,3,t.C5r)(47,wt,9,7,"ng-template",null,4,t.C5r)),2&o){let i;const r=t.sdS(42);t.Y8G("isFullWidth",!0),t.R7$(7),t.SpI("AI-",t.bMT(8,9,"KnowledgeQnA"),""),t.R7$(5),t.JRh(null==(null!==(i=e.filter.topic_titles)&&void 0!==i?i:e.filter.topic_title)||null==(i=(null!=i?i:e.filter.topic_title).split(";"))||null==(i=i.reverse())?null:i.join(" / ")),t.R7$(),t.vxM(13,e.textBook&&e.textBooks.length>1?13:-1),t.R7$(7),t.JRh(t.bMT(21,11,"GradeLevel")),t.R7$(2),t.Y8G("ngTemplateOutlet",r),t.R7$(2),t.vxM(24,e.iframeUrl?24:e.textBook?25:e.textBooks.length>1?26:27),t.R7$(4),t.vxM(28,"faq"==e.tabDocument?28:29),t.R7$(12),t.SpI("v",e.envVersion,"")}},dependencies:[M.Sq,M.bT,M.T3,d.xk,d.YH,d.In,d.Jm,d.QW,d.W9,d.M0,d.eU,d.iq,d.KW,d.uz,d.he,d.nf,d.w2,d.BC,d.ai,d.Sb,d.CF,W.l,H.m,u.D9],styles:["[_nghost-%COMP%]{--color-active: #333333;--background-active: #FFDB59}.container-grid[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.container-grid.grid-row[_ngcontent-%COMP%]{flex-flow:row}.container-grid.grid-column[_ngcontent-%COMP%]{flex-flow:column}.container-grid[_ngcontent-%COMP%]   .grid-grow[_ngcontent-%COMP%]{flex-grow:1}.container-body[_ngcontent-%COMP%]{position:relative;z-index:1}.container-body[_ngcontent-%COMP%]   .container-left[_ngcontent-%COMP%], .container-body[_ngcontent-%COMP%]   .container-right[_ngcontent-%COMP%]{position:relative;z-index:2}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]{position:relative;z-index:1;flex:auto}.tree-topic[_ngcontent-%COMP%]{position:relative;border-right:1px solid #ECECEC}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding:0;margin:0}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.tree-topic[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;padding-left:1rem}.tree-topic[_ngcontent-%COMP%]   ion-button[slot=start][_ngcontent-%COMP%]{margin-right:2px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: .5rem;font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item.actived[_ngcontent-%COMP%]{--color: var(--color-active, #333);--background: var(--background-active, #E5F4FF)}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:14px;height:14px}.tree-topic[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background:transparent;color:#999}.select-textbook[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #444;background-color:#ffffff59;color:#000}.textbook-item[_ngcontent-%COMP%]{border:1px solid var(--ion-color-dark);border-radius:6px}.box-chat[_ngcontent-%COMP%]{position:relative;width:100%;max-width:1080px;height:100%;border-right:1px solid #ECECEC}.box-chat[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-weight:500;font-size:18px}.box-chat[_ngcontent-%COMP%]   .component-header[_ngcontent-%COMP%]{height:3rem}.box-chat[_ngcontent-%COMP%]   .component-header[_ngcontent-%COMP%] + .component-content[_ngcontent-%COMP%]{padding-top:3.5rem}.box-chat[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}.main-content[_ngcontent-%COMP%]{position:relative;min-width:240px}.main-content[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: #f5f5f5}.main-content[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}ion-accordion[_ngcontent-%COMP%]{border:0;margin-bottom:1rem;border-radius:.5rem;--ion-background-color: #f5f5f5}ion-accordion[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{font-weight:400;white-space:wrap}ion-accordion.accordion-expanded[_ngcontent-%COMP%]{background:var(--ion-color-secondary);--ion-background-color: var(--ion-color-secondary)}ion-accordion.accordion-expanded[_ngcontent-%COMP%]   [slot=header][_ngcontent-%COMP%]{--background: var(--ion-color-secondary);color:#5f6ce1;font-weight:500}ion-button.btn-close[_ngcontent-%COMP%]{--padding-start: 1rem;--padding-end: 1rem;margin:0}"]}),s})()}];let Rt=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[a.iI.forChild(Ot),a.iI]}),s})();var Ft=p(3890);let It=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[M.MD,j.YN,d.bv,Rt,Ft.x]}),s})()},3753:(N,R,p)=>{p.d(R,{t:()=>t});var M=p(467),j=p(8671),d=p(2635),a=p(4438),v=p(6637),F=p(177),$=p(31);function A(u,x){1&u&&(a.qex(0),a.j41(1,"ion-content")(2,"div",2)(3,"div",3),a.nrm(4,"ion-spinner",4),a.k0s()()(),a.bVm())}function K(u,x){if(1&u){const m=a.RV6();a.qex(0),a.j41(1,"ion-item",9),a.bIt("click",function(){const k=a.eBV(m).$implicit,P=a.XpG(3);return a.Njj(P.filterChange(k.lookup_value))}),a.j41(2,"ion-label"),a.EFF(3),a.k0s()(),a.bVm()}if(2&u){const m=x.$implicit,g=a.XpG(3);a.R7$(),a.BMQ("color",m.lookup_value==g.selectedId?"primary":""),a.R7$(2),a.JRh(m.lookup_title)}}function B(u,x){if(1&u&&(a.j41(0,"ion-list",7),a.DNE(1,K,4,2,"ng-container",8),a.k0s()),2&u){const m=a.XpG(2);a.R7$(),a.Y8G("ngForOf",m.lookups)}}function I(u,x){1&u&&(a.j41(0,"div",3)(1,"i"),a.EFF(2),a.nI1(3,"translate"),a.k0s()()),2&u&&(a.R7$(2),a.JRh(a.bMT(3,1,"DataNotFound")))}function G(u,x){if(1&u){const m=a.RV6();a.qex(0),a.j41(1,"ion-item",9),a.bIt("click",function(){const k=a.eBV(m).$implicit,P=a.XpG(3);return a.Njj(P.filterChange(k.lookup_value))}),a.j41(2,"ion-label",10),a.EFF(3),a.k0s()(),a.bVm()}if(2&u){const m=x.$implicit,g=a.XpG(3);a.R7$(),a.BMQ("color",m.lookup_value==g.selectedId?"primary":""),a.R7$(),a.Y8G("color",m.color),a.R7$(),a.JRh(m.lookup_title)}}function y(u,x){if(1&u&&(a.qex(0),a.nrm(1,"hr"),a.j41(2,"ion-list",7),a.DNE(3,G,4,3,"ng-container",8),a.k0s(),a.bVm()),2&u){const m=a.XpG(2);a.R7$(3),a.Y8G("ngForOf",m.lookups_d2)}}function O(u,x){if(1&u&&(a.qex(0),a.DNE(1,B,2,1,"ion-list",5)(2,I,4,3,"div",6)(3,y,4,1,"ng-container",1),a.bVm()),2&u){const m=a.XpG();a.R7$(),a.Y8G("ngIf",m.lookups.length),a.R7$(),a.Y8G("ngIf",!m.lookups.length),a.R7$(),a.Y8G("ngIf",m.lookups_d2.length)}}let t=(()=>{var u;class x{constructor(g){this.popoverController=g,this.selectedId=0,this.lookup_key="",this.lookups_d2=[],this.dataInit={loading:!0},this.lookups=[]}ngOnInit(){var g=this;(0,M.A)(function*(){g.user=yield(0,d.Nk)(),g.loadLookup()})()}loadLookup(){var g;(0,j.$)({loading:k=>{this.dataInit.loading=k},params:{userid:null===(g=this.user)||void 0===g?void 0:g.userid,lookup_key:this.lookup_key},callback:k=>{this.lookups=k||[]}})}filterChange(g){var k;this.popoverController.dismiss(null!==(k=this.lookups.find(P=>P.lookup_value==g))&&void 0!==k?k:this.lookups_d2.find(P=>P.lookup_value==g),"confirm")}}return(u=x).\u0275fac=function(g){return new(g||u)(a.rXU(v.IE))},u.\u0275cmp=a.VBU({type:u,selectors:[["app-popover-lookup"]],inputs:{selectedId:"selectedId",lookup_key:"lookup_key",lookups_d2:"lookups_d2"},decls:3,vars:2,consts:[[1,"menu-lookup","overflow-auto"],[4,"ngIf"],[1,"d-flex","w-100","h-100","align-items-center","justify-content-center"],[1,"px-3","py-1"],["name","dots","color","dark",1,"align-middle"],["lines","full",4,"ngIf"],["class","px-3 py-1",4,"ngIf"],["lines","full"],[4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],[3,"color"]],template:function(g,k){1&g&&(a.j41(0,"div",0),a.DNE(1,A,5,0,"ng-container",1)(2,O,4,3,"ng-container",1),a.k0s()),2&g&&(a.R7$(),a.Y8G("ngIf",k.dataInit.loading),a.R7$(),a.Y8G("ngIf",!k.dataInit.loading))},dependencies:[F.Sq,F.bT,v.W9,v.uz,v.he,v.nf,v.w2,$.D9],styles:[".menu-lookup[_ngcontent-%COMP%]{width:240px;max-height:480px;border-top:3px solid #5F6CE1}hr[_ngcontent-%COMP%]{margin:0}"]}),x})()}}]);