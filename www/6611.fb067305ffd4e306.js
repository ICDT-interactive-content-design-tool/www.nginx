"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6611],{8779:(he,Kt,v)=>{v.d(Kt,{$u:()=>O,IB:()=>gt,T2:()=>c,WR:()=>A,bf:()=>N,eD:()=>lt,l6:()=>T,lq:()=>z,pZ:()=>S,u$:()=>b});const S={fill:"transparent",stroke:"#129bff",strokeWidth:1},b={stroke:"#0D99FF",strokeWidth:1,strokeLinecap:"square",strokeDasharrays:[2,5]},lt={fill:"#FFFFFF",stroke:"#0D99FF",strokeWidth:1,width:7,height:7},N={fill:"transparent",stroke:"transparent",strokeWidth:1},gt={fill:"none",stroke:"#2299F8",strokeWidth:1},T={fill:"#0D99FF",rx:4},c={fill:"#fff",alignmentBaseline:"central",textAnchor:"middle",fontSize:14},A={stroke:"#129bff",strokeWidth:1,strokeLinecap:"square",strokeDasharray:8},z={fill:"transparent"},O={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(he,Kt,v)=>{v.d(Kt,{$N:()=>T,An:()=>c,CS:()=>b,Kf:()=>nt,Lp:()=>z,j9:()=>A,lP:()=>N,ml:()=>F,n9:()=>O,nf:()=>gt});var S=v(2492);const b=f=>{var J;return null===(J=f.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===J?void 0:J.map(I=>{let q={type:I.substring(0,1)},rt=(B=I.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?B.split(/\s/).map(Q=>(0,S.z)(parseFloat(Q),1e6)):[];var B;return rt.length&&(q.points=rt),q})},N=f=>{let J=[],I=[],q=[],rt=[];return f.forEach(B=>{switch(["M","L","C","S","Q","T"].includes(B.type)&&B.points&&B.points.forEach((ct,xt)=>{xt%2==0?J.push(ct):I.push(ct)}),B.type){case"A":var Q;7==(null===(Q=B.points)||void 0===Q?void 0:Q.length)&&(q.push(B.points[5]),rt.push(B.points[6]));break;case"H":var ot;null!==(ot=B.points)&&void 0!==ot&&ot.length&&(J.push(B.points[0]),q.push(B.points[0]));break;case"V":var W;null!==(W=B.points)&&void 0!==W&&W.length&&(I.push(B.points[0]),rt.push(B.points[0]));break;case"a":var _;if(7==(null===(_=B.points)||void 0===_?void 0:_.length)){let ct=J[J.length-1];J.push(ct+B.points[5]),q.push(ct+B.points[5]);let xt=I[I.length-1];I.push(xt+B.points[6]),rt.push(xt+B.points[6])}break;case"h":var yt;if(null!==(yt=B.points)&&void 0!==yt&&yt.length){let ct=J[J.length-1];J.push(ct+B.points[0]),q.push(ct+B.points[0])}break;case"v":var jt;if(null!==(jt=B.points)&&void 0!==jt&&jt.length){let ct=I[I.length-1];I.push(ct+B.points[0]),rt.push(ct+B.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var Lt;null===(Lt=B.points)||void 0===Lt||Lt.forEach((ct,xt)=>{xt%2==0?q.push(ct):rt.push(ct)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Pt;null===(Pt=B.points)||void 0===Pt||Pt.forEach((ct,xt)=>{if(xt%2==0){let ce=J[J.length-1];J.push(ce+ct),q.push(ce+ct)}else{let ce=I[I.length-1];I.push(ce+ct),rt.push(ce+ct)}})}}),{minX:Math.min.apply(null,q),minY:Math.min.apply(null,rt),maxX:Math.max.apply(null,q),maxY:Math.max.apply(null,rt)}},gt=(f,J)=>J.map(I=>{let q=[];switch(I.type){case"a":var rt;7==(null===(rt=I.points)||void 0===rt?void 0:rt.length)&&q.push([(0,S.z)(I.points[0]/f.width,1e6),(0,S.z)(I.points[1]/f.height,1e6),I.points[2],I.points[3],I.points[4],(0,S.z)(I.points[5]/f.width,1e6),(0,S.z)(I.points[6]/f.height,1e6)]);break;case"A":var B;7==(null===(B=I.points)||void 0===B?void 0:B.length)&&q.push([(0,S.z)(I.points[0]/f.width,1e6),(0,S.z)(I.points[1]/f.height,1e6),I.points[2],I.points[3],I.points[4],(0,S.z)((I.points[5]-f.x)/f.width,1e6),(0,S.z)((I.points[6]-f.y)/f.height,1e6)]);break;case"h":var Q;null!==(Q=I.points)&&void 0!==Q&&Q.length&&q.push([(0,S.z)(I.points[0]/f.width,1e6)]);break;case"H":var ot;null!==(ot=I.points)&&void 0!==ot&&ot.length&&q.push([(0,S.z)((I.points[0]-f.x)/f.width,1e6)]);break;case"v":var W;null!==(W=I.points)&&void 0!==W&&W.length&&q.push([(0,S.z)(I.points[0]/f.height,1e6)]);break;case"V":var _;null!==(_=I.points)&&void 0!==_&&_.length&&q.push([(0,S.z)((I.points[0]-f.y)/f.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var yt;if(null!==(yt=I.points)&&void 0!==yt&&yt.length)for(let Lt=0,Pt=I.points.length-1;Lt<Pt;Lt+=2)q.push([(0,S.z)((I.points[Lt]-f.x)/f.width,1e6),(0,S.z)((I.points[Lt+1]-f.y)/f.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var jt;if(null!==(jt=I.points)&&void 0!==jt&&jt.length)for(let Lt=0,Pt=I.points.length-1;Lt<Pt;Lt+=2)q.push([(0,S.z)(I.points[Lt]/f.width,1e6),(0,S.z)(I.points[Lt+1]/f.height,1e6)])}return q.length?{type:I.type,ratios:q}:{type:I.type}}),T=(f,J)=>J.map(I=>{switch(I.type){case"a":var q,rt;return`${I.type}${null!==(q=null===(rt=I.ratios)||void 0===rt||null===(rt=rt.map(pt=>{var ft,j,Gt,D,P,s,w;return[(0,S.z)(f.width*(null!==(ft=pt[0])&&void 0!==ft?ft:0),1e6),(0,S.z)(f.height*(null!==(j=pt[1])&&void 0!==j?j:0),1e6),null!==(Gt=pt[2])&&void 0!==Gt?Gt:0,null!==(D=pt[3])&&void 0!==D?D:0,null!==(P=pt[4])&&void 0!==P?P:0,(0,S.z)(f.width*(null!==(s=pt[5])&&void 0!==s?s:0),1e6),(0,S.z)(f.height*(null!==(w=pt[6])&&void 0!==w?w:0),1e6)]}))||void 0===rt||null===(rt=rt.map(pt=>pt.join(" ")))||void 0===rt?void 0:rt.join(" "))&&void 0!==q?q:""}`;case"A":var B,Q;return`${I.type}${null!==(B=null===(Q=I.ratios)||void 0===Q||null===(Q=Q.map(pt=>{var ft,j,Gt,D,P,s,w;return[(0,S.z)(f.width*(null!==(ft=pt[0])&&void 0!==ft?ft:0),1e6),(0,S.z)(f.height*(null!==(j=pt[1])&&void 0!==j?j:0),1e6),null!==(Gt=pt[2])&&void 0!==Gt?Gt:0,null!==(D=pt[3])&&void 0!==D?D:0,null!==(P=pt[4])&&void 0!==P?P:0,(0,S.z)(f.x+f.width*(null!==(s=pt[5])&&void 0!==s?s:0),1e6),(0,S.z)(f.y+f.height*(null!==(w=pt[6])&&void 0!==w?w:0),1e6)]}))||void 0===Q||null===(Q=Q.map(pt=>pt.join(" ")))||void 0===Q?void 0:Q.join(" "))&&void 0!==B?B:""}`;case"h":var ot,W;return`${I.type}${null!==(ot=null===(W=I.ratios)||void 0===W||null===(W=W.map(pt=>{var ft;return(0,S.z)(f.width*(null!==(ft=pt[0])&&void 0!==ft?ft:0),1e6)}))||void 0===W?void 0:W.join(" "))&&void 0!==ot?ot:""}`;case"H":var _,yt;return`${I.type}${null!==(_=null===(yt=I.ratios)||void 0===yt||null===(yt=yt.map(pt=>{var ft;return(0,S.z)(f.x+f.width*(null!==(ft=pt[0])&&void 0!==ft?ft:0),1e6)}))||void 0===yt?void 0:yt.join(" "))&&void 0!==_?_:""}`;case"v":var jt,Lt;return`${I.type}${null!==(jt=null===(Lt=I.ratios)||void 0===Lt||null===(Lt=Lt.map(pt=>{var ft;return(0,S.z)(f.height*(null!==(ft=pt[0])&&void 0!==ft?ft:0),1e6)}))||void 0===Lt?void 0:Lt.join(" "))&&void 0!==jt?jt:""}`;case"V":var Pt,ct;return`${I.type}${null!==(Pt=null===(ct=I.ratios)||void 0===ct||null===(ct=ct.map(pt=>{var ft;return(0,S.z)(f.y+f.height*(null!==(ft=pt[0])&&void 0!==ft?ft:0),1e6)}))||void 0===ct?void 0:ct.join(" "))&&void 0!==Pt?Pt:""}`;case"z":case"Z":return I.type;case"M":case"L":case"C":case"S":case"Q":case"T":var xt,ce;return`${I.type}${null!==(xt=null===(ce=I.ratios)||void 0===ce||null===(ce=ce.map(pt=>{var ft,j;return[(0,S.z)(f.x+f.width*(null!==(ft=pt[0])&&void 0!==ft?ft:0),1e6),(0,S.z)(f.y+f.height*(null!==(j=pt[1])&&void 0!==j?j:0),1e6)]}))||void 0===ce||null===(ce=ce.map(pt=>pt.join(" ")))||void 0===ce?void 0:ce.join(" "))&&void 0!==xt?xt:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var et,It;return`${I.type}${null!==(et=null===(It=I.ratios)||void 0===It||null===(It=It.map(pt=>{var ft,j;return[(0,S.z)(f.width*(null!==(ft=pt[0])&&void 0!==ft?ft:0),1e6),(0,S.z)(f.height*(null!==(j=pt[1])&&void 0!==j?j:0),1e6)]}))||void 0===It||null===(It=It.map(pt=>pt.join(" ")))||void 0===It?void 0:It.join(" "))&&void 0!==et?et:""}`;default:return""}}).join(""),c=f=>{return(J=f.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?J.split(/\s/).map(I=>parseFloat(I)):[];var J},A=f=>{let J=[],I=[];return f.forEach((q,rt)=>{rt%2==0?J.push(q):I.push(q)}),{minX:Math.min.apply(null,J),minY:Math.min.apply(null,I),maxX:Math.max.apply(null,J),maxY:Math.max.apply(null,I)}},z=(f,J)=>{let I=[];for(let q=0,rt=J.length-1;q<rt;q+=2)I.push([(J[q]-f.x)/f.width,(J[q+1]-f.y)/f.height]);return I},O=(f,J)=>J.map(I=>[(0,S.z)(f.x+f.width*I[0],1e6),(0,S.z)(f.y+f.height*I[1],1e6)]).map(I=>I.join(" ")).join(" "),F=(f,J)=>{let I=x(J);if(I){let q=new window.Snap.Matrix(I.a,I.b,I.c,I.d,I.e,I.f);if(q){let{dx:rt,dy:B,rotate:Q,scalex:ot,scaley:W}=q.split();return{x:f.x+rt,y:f.y+B,dx:rt,dy:B,rotate:Q,scalex:ot,scaley:W}}return{x:it(f.x,f.y,I),y:wt(f.x,f.y,I)}}return f},x=f=>{let J=f.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(I=>(0,S.z)(parseFloat(I),1e6));if(6==J.length)return{a:J[0],b:J[1],c:J[2],d:J[3],e:J[4],f:J[5]}},nt=(f,J)=>{let I=x(J);return I?window.Snap.path.map(f,new window.Snap.Matrix(I.a,I.b,I.c,I.d,I.e,I.f)).toString():f},it=function(f,J,I){return(0,S.z)(f*I.a+J*I.c+I.e,10)},wt=function(f,J,I){return(0,S.z)(f*I.b+J*I.d+I.f,10)}},8047:(he,Kt,v)=>{v.d(Kt,{d:()=>S});const S=b=>{let lt=[];return[/font-family:([a-zA-Z-_' ]+)/g,/"fontFamily":"([a-zA-Z-_' ]+)"/g].forEach(N=>{var gt,T;lt=[...lt,...null!==(gt=null===(T=b.replace(/&quot;/g,"'").match(N))||void 0===T?void 0:T.filter((c,A,z)=>z.indexOf(c)==A).map(c=>c.replace(N,"$1").replace(/[^a-zA-Z-_ ]/g,"").trim()).filter((c,A,z)=>c&&z.indexOf(c)==A))&&void 0!==gt?gt:[]]}),lt.filter((N,gt,T)=>T.indexOf(N)==gt)}},2837:(he,Kt,v)=>{v.d(Kt,{v:()=>wt,U:()=>nt});var S=v(6611),b=v(1999),lt=v(2492),N=/^#[a-fA-F0-9]+$/i,gt=/^rgb\((\d+),(\d+),(\d+)\)$/i,T=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const c=f=>{let J=null,I=null;if(f)if("transparent"==f)J="#000000",I=0;else if(f.match(N))J=f;else{let q=(f=f.replace(/\s+/g,"")).match(T);if(q)J="#"+(256|q[1]).toString(16).slice(1)+(256|q[2]).toString(16).slice(1)+(256|q[3]).toString(16).slice(1),I=(0,lt.z)(parseFloat(q[4]),100);else{let rt=f.match(gt);rt&&(J="#"+(256|rt[1]).toString(16).slice(1)+(256|rt[2]).toString(16).slice(1)+(256|rt[3]).toString(16).slice(1))}}return{hex:J,alpha:I}};var A=v(4896),z=v(8338);const nt=f=>it(null==f?void 0:f.url,null==f?void 0:f.path,null==f?void 0:f.src,null==f?void 0:f.name);var it=(f,J,I,q)=>{var rt,B;let Q,ot,W,_;var yt,jt;return f&&(Q=f.replace(/\\/g,"/")),J&&(ot=J.replace(/\\/g,"/")),I&&(W=I.replace(/\\/g,"/")),ot&&!Q&&(Q=(null===(yt=S.L.config)||void 0===yt?void 0:yt.readfileuploadurl)+ot),!W||ot||Q||(ot=W.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),Q=(null===(jt=S.L.config)||void 0===jt?void 0:jt.readfileuploadurl)+ot),_=q||(null!==(rt=Q)&&void 0!==rt?rt:"").split("/").pop()||(null!==(B=ot)&&void 0!==B?B:"").split("/").pop()||"",{url:Q,path:ot,name:_}};const wt=f=>{let J={x:0,y:0,width:f.screen.w,height:f.screen.h},I=[];return f.data.forEach((q,rt)=>{var B,Q;let ot={id:"number"==typeof q.id?q.id:S.L.data.newSlideId,code:null===(B=q.id)||void 0===B?void 0:B.toString(),name:"string"==typeof q.id?q.id:`Trang ${rt+1}`,svg:{viewBox:J,nodes:[]},test:(W=q.test2,W?(W.audiotrue&&(W.audiotrue=nt({path:W.audiotrue.path})),W.audiofalse&&(W.audiofalse=nt({path:W.audiofalse.path})),W.effecttrue&&(W.effecttrue=nt({path:W.effecttrue.path})),W.effectfalse&&(W.effectfalse=nt({path:W.effectfalse.path})),W.icontrue&&(W.icontrue=nt({path:W.icontrue.path})),W.iconfalse&&(W.iconfalse=nt({path:W.iconfalse.path})),W):{})};var W;q.background&&ot.svg&&(ot.svg.background=function(f){return f&&(null!==f.match(/#([a-zA-Z0-9]+)/)||null!==f.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==f.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(q.background)?{color:q.background}:function(f){return f&&null!==f.match(/data:[^;]+;base64,/)}(q.background)?{base64:q.background}:function(f){return f&&null!==f.match(/http(s)?:\/\//)}(q.background)?it(q.background):it(void 0,q.background)),jQuery(null!==(Q=q.svg)&&void 0!==Q?Q:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((W,_)=>{var yt,jt;let Lt=jQuery(_).parents(".indexs"),Pt=(et=Lt.attr("data-index"))?parseInt(et):0,ct=(et=>Pt&&et?parseInt(et):0)(Lt.attr("data-time")),xt=null!==(yt=_.getAttribute("id"))&&void 0!==yt?yt:(1e9*Math.random()).toFixed(),ce={id:parseInt(xt),code:`${_.nodeName}-${xt}`,name:_.nodeName,idx:Pt,time:ct,type:(()=>{switch(_.nodeName){case"polygon":return b.h.POLYGON;case"path":return b.h.PATH;case"circle":return b.h.CIRCLE;case"ellipse":return b.h.ELLIPSE;case"line":return b.h.LINE;case"rect":return b.h.RECT;case"foreignObject":return b.h.FOREIGNOBJECT}return 0})(),size:(et=>{let It={},pt=0,ft=0,j=0,Gt=0,D=null,P=null,s=parseFloat((null===(et=_.getAttribute("transform"))||void 0===et?void 0:et.replace("rotate(","").replace(")",""))||"0")||null;switch(_.nodeName){case"polygon":{var w,H;let tt=[],zt=[],Zt=999999999,Yt=999999999,Qt=0,Nt=0;D=JSON.parse(_.getAttribute("ratios")||"[]"),P=null!==(w=null===(H=_.getAttribute("points"))||void 0===H?void 0:H.split(",").map(function(ht){return ht.split(" ").map(function(Xt){return parseFloat(Xt)})}))&&void 0!==w?w:[],P.forEach(function(ht){tt.push(ht[0]),zt.push(ht[1])}),Zt=Math.min.apply(null,tt),Yt=Math.min.apply(null,zt),Qt=Math.max.apply(null,tt),Nt=Math.max.apply(null,zt),pt=Zt,ft=Yt,j=Qt-pt,Gt=Nt-ft;break}case"path":{let tt=_.getAttribute("d");if(tt){let zt=(0,A.CS)(tt),{minX:Zt,minY:Yt,maxX:Qt,maxY:Nt}=(0,A.lP)(zt);pt=Zt,ft=Yt,j=Qt-pt||1,Gt=Nt-ft||1,Object.assign(It,{ratioMaps:(0,A.nf)({x:pt,y:ft,width:j,height:Gt},zt)})}break}case"circle":{let tt=parseFloat(_.getAttribute("cx")||"0"),zt=parseFloat(_.getAttribute("cy")||"0"),Zt=parseFloat(_.getAttribute("r")||"0");pt=tt-Zt,ft=zt-Zt,j=2*Zt,Gt=2*Zt;break}case"ellipse":{let tt=parseFloat(_.getAttribute("cx")||"0"),zt=parseFloat(_.getAttribute("cy")||"0"),Zt=parseFloat(_.getAttribute("rx")||"0"),Yt=parseFloat(_.getAttribute("ry")||"0");pt=tt-Zt,ft=zt-Yt,j=2*Zt,Gt=2*Yt;break}case"line":{let tt=parseFloat(_.getAttribute("x1")||"0"),zt=parseFloat(_.getAttribute("y1")||"0"),Zt=parseFloat(_.getAttribute("x2")||"0"),Yt=parseFloat(_.getAttribute("y2")||"0"),Qt=999999999,Nt=999999999,ht=0,Xt=0;Qt=Math.min(tt,Zt),Nt=Math.min(zt,Yt),ht=Math.max(tt,Zt),Xt=Math.max(zt,Yt),pt=Qt,ft=Nt,j=ht-pt,Gt=Xt-ft,D=[[(tt-pt)/(j||1),(zt-ft)/(Gt||1)],[(Zt-pt)/(j||1),(Yt-ft)/(Gt||1)]];break}case"rect":case"foreignObject":pt=parseFloat(_.getAttribute("x")||"0"),ft=parseFloat(_.getAttribute("y")||"0"),j=parseFloat(_.getAttribute("width")||"0"),Gt=parseFloat(_.getAttribute("height")||"0")}return Object.assign(It,{x:pt,y:ft,width:j,height:Gt,ratios:D,points:P,rotate:s})})(),attribute:(()=>{let et={};switch(_.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var It,pt,ft,j,Gt,D,P,s;let ht=null!==(It=_.getAttribute("fill"))&&void 0!==It?It:null,Xt=null!==(pt=_.getAttribute("stroke"))&&void 0!==pt?pt:null,M=null!==(ft=parseFloat(null!==(j=_.getAttribute("stroke-opacity"))&&void 0!==j?j:"1"))&&void 0!==ft?ft:null,d=null!==(Gt=parseFloat(_.getAttribute("stroke-width")||"0"))&&void 0!==Gt?Gt:null,K=null!==(D=_.getAttribute("stroke-linecap"))&&void 0!==D?D:null,at=null!==(P=_.getAttribute("stroke-linejoin"))&&void 0!==P?P:null,ut=null!==(s=parseFloat(_.getAttribute("stroke-dasharray")||"0"))&&void 0!==s?s:null;Object.assign(et,{fill:ht,stroke:Xt,strokeOpacity:M,strokeWidth:d,strokeLinecap:K,strokeLinejoin:at,strokeDasharray:ut});break}case"path":{let ht=Lt.get(0);if(ht){var w,H,tt,zt,Zt,Yt,Qt,Nt;let Xt=null!==(w=ht.getAttribute("fill"))&&void 0!==w?w:null,M=null!==(H=ht.getAttribute("stroke"))&&void 0!==H?H:null,d=null!==(tt=parseFloat(null!==(zt=ht.getAttribute("stroke-opacity"))&&void 0!==zt?zt:"1"))&&void 0!==tt?tt:null,K=null!==(Zt=parseFloat(ht.getAttribute("stroke-width")||"0"))&&void 0!==Zt?Zt:null,at=null!==(Yt=ht.getAttribute("stroke-linecap"))&&void 0!==Yt?Yt:null,ut=null!==(Qt=ht.getAttribute("stroke-linejoin"))&&void 0!==Qt?Qt:null,X=null!==(Nt=parseFloat(ht.getAttribute("stroke-dasharray")||"0"))&&void 0!==Nt?Nt:null;Object.assign(et,{fill:Xt,stroke:M,strokeOpacity:d,strokeWidth:K,strokeLinecap:at,strokeLinejoin:ut,strokeDasharray:X})}break}}return et})(),style:(()=>{let et={};switch(_.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let ft=jQuery(_).find(".svg-container");if(ft.length){let Gt=parseFloat(ft.css("border-width")||"0")||null,D=ft.css("border-style")||null,P=ft.css("border-color")||null,s=null,w=ft.css("background-color")||null,H=null;(()=>{let{hex:tt,alpha:zt}=c(P);P=tt,s=zt})(),(()=>{let{hex:tt,alpha:zt}=c(w);w=tt,H=zt})(),Object.assign(et,{borderWidth:Gt,borderStyle:D,borderColor:P,borderOpacity:s,backgroundColor:w,backgroundOpacity:H})}let j=jQuery(_).find(".svg-editor-content");if(j.length){var It,pt;let Gt=JSON.parse((j.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:D,alpha:P}=c(Gt.TextColor);Object.assign(et,{fontFamily:null!==(It=Gt.FontFamily)&&void 0!==It?It:null,fontSize:null!==(pt=Gt.FontSize)&&void 0!==pt?pt:null,color:D,opacity:P})}break}}return et})(),source:(()=>{let et={};switch(_.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Lt.hasClass("editors")){var It;let Nt="div,h1,h2,h3,h4,h5,h6,p,span,strong,b,i",ht=d=>{null==d||d.forEach(K=>{let at=K.querySelectorAll(`:scope > ${Nt}`);at.length&&ht(at),!K.querySelectorAll(":scope > *").length&&""==K.textContent&&K.remove()})},Xt=d=>{let K=null==d?void 0:d.querySelectorAll(":scope > div,h1,h2,h3,h4,h5,h6,p,strong,span");if(null!=K&&K.length){var at;let ut=K[K.length-1];if(""==(null===(at=ut.textContent)||void 0===at?void 0:at.trim())){let X=ut.querySelectorAll(":scope > *");if(X.length){let E=X[X.length-1];["br","BR"].includes(null==E?void 0:E.nodeName)&&(E.remove(),Xt(d))}else ut.remove(),Xt(d)}}};ht(null===(It=jQuery(_).find(".svg-editor-content").get(0))||void 0===It?void 0:It.querySelectorAll(`:scope > ${Nt}`)),Xt(jQuery(_).find(".svg-editor-content").get(0));let M=jQuery(_).find(".svg-editor-content");if(M.length){var pt;let d=M.html(),K=null!==(pt=(null!=d?d:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==pt?pt:[];Object.assign(et,{type:"html",html:{htmlContent:d,variableKeywords:K}})}}else if(Lt.hasClass("inputs")||Lt.hasClass("textareas"))Object.assign(et,{type:"input",input:{input:!!jQuery(_).find("input").length,textarea:!!jQuery(_).find("textarea").length}});else if(Lt.hasClass("tests")){let Nt=jQuery(_).find(".svg-test");if(Lt.hasClass("tests-truefalse")){var ft,j;let ht=Nt.find(".svg-editor-content").html(),Xt=null!==(ft=(null!=ht?ht:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==ft?ft:[];Object.assign(et,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(j=q.test2.truefalse)||void 0===j?void 0:j.includes(xt)}},html:{htmlContent:ht,variableKeywords:Xt}})}else if(Lt.hasClass("tests-singlechoice")){var Gt,D;let ht=Nt.find(".svg-editor-content").html(),Xt=null!==(Gt=(null!=ht?ht:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Gt?Gt:[];Object.assign(et,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(D=q.test2.singlechoice)||void 0===D?void 0:D.includes(xt)}},html:{htmlContent:ht,variableKeywords:Xt}})}else if(Lt.hasClass("tests-multichoice")){var P,s;let ht=Nt.find(".svg-editor-content").html(),Xt=null!==(P=(null!=ht?ht:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==P?P:[];Object.assign(et,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(s=q.test2.multichoice)||void 0===s?void 0:s.includes(xt)}},html:{htmlContent:ht,variableKeywords:Xt}})}else if(Lt.hasClass("tests-fill")){var w,H;let ht=Nt.find(".svg-editor-content").html(),Xt=null!==(w=(null!=ht?ht:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==w?w:[],M=null!==(H=(null!=ht?ht:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==H?H:[];M=M.filter((d,K,at)=>at.indexOf(d)==K),Object.assign(et,{type:"test",test:{type:"fill",fill:M.map(d=>{var K;return{key:d,value:null===(K=q.test2.fill)||void 0===K||null===(K=K.find(at=>at.id==xt))||void 0===K||null===(K=K.vals)||void 0===K?void 0:K.map(at=>at.text).filter(at=>!["",null,void 0,NaN].includes(at))}})},html:{htmlContent:ht,variableKeywords:Xt,fillKeywords:M}})}else if(Lt.hasClass("tests-matching")){if(Nt.hasClass("svg-test-empty"))Object.assign(et,{type:"test",test:{type:"matching-empty",matching:{key:Nt.attr("data-name")||null}}});else if(Nt.hasClass("svg-test-content")){var tt;let ht=Nt.find(".svg-editor-content").html(),Xt=null!==(tt=(null!=ht?ht:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==tt?tt:[];Object.assign(et,{type:"test",test:{type:"matching-content",matching:{key:Nt.attr("data-name")||null}},html:{htmlContent:ht,variableKeywords:Xt}})}}else if(Lt.hasClass("tests-speech")){var zt;Object.assign(et,{type:"speech",speech:{value:null===(zt=q.test2.speech)||void 0===zt||null===(zt=zt.find(ht=>ht.id==xt))||void 0===zt||null===(zt=zt.vals)||void 0===zt?void 0:zt.map(ht=>ht.text).filter(ht=>!["",null,void 0,NaN].includes(ht))}})}else if(Lt.hasClass("tests-submit")){let ht=jQuery(_).find(".svg-container img");Object.assign(et,{type:"test",test:{type:"submit"},image:it(ht.attr("url"),ht.attr("path"),ht.attr("src"))})}}else if(Lt.hasClass("images")){let Nt=jQuery(_).find(".svg-editor-content img");if(Nt.length)Object.assign(et,{type:"image",image:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});else{let ht=jQuery(_).find("iframe");Object.assign(et,{type:"iframe",iframe:it(ht.attr("url"),ht.attr("path"),ht.attr("src"))})}}else if(Lt.hasClass("sounds")){let Nt=jQuery(_).find(".svg-editor-content img");Nt.length&&Object.assign(et,{type:"image",image:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))})}else if(Lt.hasClass("htmls")){let Nt=jQuery(_).find("iframe");Nt.length&&Object.assign(et,{type:"iframe",iframe:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))})}else if(Lt.hasClass("svgs")){let Nt=jQuery(_).find("svg");var Zt,Yt;Nt.length&&Object.assign(et,{type:"svg",svg:Object.assign(it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src")),{svgContent:null!==(Zt=null===(Yt=Nt.get(0))||void 0===Yt?void 0:Yt.outerHTML)&&void 0!==Zt?Zt:null})})}else if(Lt.hasClass("medias")){let Nt=jQuery(_).find(".media-item");if(Nt.length)switch(Nt.attr("type")){case"audio":Object.assign(et,{type:"audio",audio:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});break;case"video":Object.assign(et,{type:"video",video:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});break;case"file":Object.assign(et,{type:"file",file:it(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});break;default:var Qt;Object.assign(et,{type:"link",link:{url:null!==(Qt=Nt.attr("url"))&&void 0!==Qt?Qt:null}})}let ht=jQuery(_).find("img");ht.length&&(Object.assign(et,{image:it(ht.attr("url"),ht.attr("path"),ht.attr("src"))}),et.type||Object.assign(et,{type:"image"}))}}return et})(),animate:(et=>{let It={},pt=null===(et=q.animates)||void 0===et?void 0:et.find(ft=>ft.elementId==xt);return pt&&Object.assign(It,{value:pt.value}),It})(),interactive:(()=>{let et={},It=q.actions.show.filter(ft=>ft.elementId==xt&&ft.active);It.length&&(et.show={},It.forEach(ft=>{let{source:j}=ft;switch(null==j?void 0:j.type){case"work":var Gt,D,P,s,w;et.show.action={},Object.assign(et.show.action,{value:null!==(Gt=j.value)&&void 0!==Gt?Gt:null,iteration:null!==(D=j.iteration)&&void 0!==D?D:null,finish:null!==(P=j.end)&&void 0!==P?P:null,time:null!==(s=j.time)&&void 0!==s?s:null,points:null!==(w=j.points)&&void 0!==w?w:null});break;case"audio":var H,tt,zt;et.show.audio={},Object.assign(et.show.audio,{source:it(null,null,j.url),iteration:null!==(H=j.iteration)&&void 0!==H?H:null,finish:null!==(tt=j.end)&&void 0!==tt?tt:null,time:null!==(zt=j.time)&&void 0!==zt?zt:null,async:-1==j.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Zt,Yt,Qt,Nt,ht,Xt,M,d,K,at,ut,X,E,Y,st;j.options.includes("show")&&(et.show.triggershow={},Object.assign(et.show.triggershow,{id:null!==(Zt=parseInt(null!==(Yt=j.id)&&void 0!==Yt?Yt:"0"))&&void 0!==Zt?Zt:null,ids:null===(Qt=j.ids)||void 0===Qt?void 0:Qt.map(_t=>parseInt(_t)),async:null!==(Nt=j.async)&&void 0!==Nt?Nt:null,time:null!==(ht=j.time)&&void 0!==ht?ht:null})),j.options.includes("run")&&(et.show.triggerrun={},Object.assign(et.show.triggerrun,{id:null!==(Xt=parseInt(null!==(M=j.id)&&void 0!==M?M:"0"))&&void 0!==Xt?Xt:null,ids:null===(d=j.ids)||void 0===d?void 0:d.map(_t=>parseInt(_t)),async:null!==(K=j.async)&&void 0!==K?K:null,time:null!==(at=j.time)&&void 0!==at?at:null})),j.options.includes("hide")&&(et.show.triggerhide={},Object.assign(et.show.triggerhide,{id:null!==(ut=parseInt(null!==(X=j.id)&&void 0!==X?X:"0"))&&void 0!==ut?ut:null,ids:null===(E=j.ids)||void 0===E?void 0:E.map(_t=>parseInt(_t)),async:null!==(Y=j.async)&&void 0!==Y?Y:null,time:null!==(st=j.time)&&void 0!==st?st:null}))}}));let pt=q.actions.click.filter(ft=>ft.elementId==xt&&ft.active);return pt&&(et.click={},pt.forEach(ft=>{let{source:j}=ft;switch(null==j?void 0:j.type){case"work":var Gt,D,P,s,w;et.click.action={},Object.assign(et.click.action,{value:null!==(Gt=j.value)&&void 0!==Gt?Gt:null,iteration:null!==(D=j.iteration)&&void 0!==D?D:null,finish:null!==(P=j.end)&&void 0!==P?P:null,time:null!==(s=j.time)&&void 0!==s?s:null,points:null!==(w=j.points)&&void 0!==w?w:null});break;case"audio":var H,tt,zt;et.click.audio={},Object.assign(et.click.audio,{source:it(null,null,j.url),iteration:null!==(H=j.iteration)&&void 0!==H?H:null,finish:null!==(tt=j.end)&&void 0!==tt?tt:null,time:null!==(zt=j.time)&&void 0!==zt?zt:null,async:-1==j.iteration?"change-slide":"change-node"});break;case"video":{et.click.video={},Object.assign(et.click.video,{source:it(j.url,j.path)});let{url:Tt,path:Mt,name:Ot}=it(j.url,j.path);et.click.media={},Object.assign(et.click.media,{url:Tt,path:Mt,name:Ot,type:z.S.VIDEO});break}case"image":{et.click.image={},Object.assign(et.click.image,{source:it(j.url,j.path)});let{url:Tt,path:Mt,name:Ot}=it(j.url,j.path);et.click.media={},Object.assign(et.click.media,{url:Tt,path:Mt,name:Ot,type:z.S.IMAGE});break}case"link":{et.click.link={},Object.assign(et.click.link,{url:j.url,target:j.target});let{url:Tt,path:Mt,name:Ot}=it(j.url,j.path);et.click.media={},Object.assign(et.click.media,{url:Tt,path:Mt,name:Ot,type:z.S.LINK});break}case"text":et.click.text={},Object.assign(et.click.text,{content:j.content});break;case"node":case"node2":var Zt,Yt,Qt,Nt,ht,Xt,M,d,K,at,ut,X,E,Y,st;j.options.includes("show")&&(et.click.triggershow={},Object.assign(et.click.triggershow,{id:null!==(Zt=parseInt(null!==(Yt=j.id)&&void 0!==Yt?Yt:"0"))&&void 0!==Zt?Zt:null,ids:null===(Qt=j.ids)||void 0===Qt?void 0:Qt.map(Tt=>parseInt(Tt)),async:null!==(Nt=j.async)&&void 0!==Nt?Nt:null,time:null!==(ht=j.time)&&void 0!==ht?ht:null})),j.options.includes("run")&&(et.click.triggerrun={},Object.assign(et.click.triggerrun,{id:null!==(Xt=parseInt(null!==(M=j.id)&&void 0!==M?M:"0"))&&void 0!==Xt?Xt:null,ids:null===(d=j.ids)||void 0===d?void 0:d.map(Tt=>parseInt(Tt)),async:null!==(K=j.async)&&void 0!==K?K:null,time:null!==(at=j.time)&&void 0!==at?at:null})),j.options.includes("hide")&&(et.click.triggerhide={},Object.assign(et.click.triggerhide,{id:null!==(ut=parseInt(null!==(X=j.id)&&void 0!==X?X:"0"))&&void 0!==ut?ut:null,ids:null===(E=j.ids)||void 0===E?void 0:E.map(Tt=>parseInt(Tt)),async:null!==(Y=j.async)&&void 0!==Y?Y:null,time:null!==(st=j.time)&&void 0!==st?st:null}));break;case"slide":var _t;et.click.slide={},Object.assign(et.click.slide,{id:parseInt(null!==(_t=j.id)&&void 0!==_t?_t:"0")||j.num||null,code:j.id})}})),et})(),variable:(et=>{let It={};var pt;_.getAttribute("data-variable")&&(It.input={},Object.assign(It.input,{variable:null!==(pt=_.getAttribute("data-variable"))&&void 0!==pt?pt:null}));let ft=null===(et=q.nodes)||void 0===et||null===(et=et.find(s=>s.id==xt))||void 0===et?void 0:et.variable;var j,Gt,D,P;return ft&&(It.click={},Object.assign(It.click,{variable:null!==(j=ft.variable)&&void 0!==j?j:null,operator:null!==(Gt=ft.operator)&&void 0!==Gt?Gt:null,valuetype:null!==(D=ft.valuetype)&&void 0!==D?D:null,value:null!==(P=ft.value)&&void 0!==P?P:null})),It})()};var et;null===(jt=ot.svg)||void 0===jt||jt.nodes.push(ce)}),I.push(ot)}),{screen:{width:f.screen.w,height:f.screen.h},data:{slides:I},variable:f.variable,fonts:[]}}},6195:(he,Kt,v)=>{v.d(Kt,{A9:()=>z,IB:()=>O,_4:()=>A,_5:()=>gt,ar:()=>T,yW:()=>c});var S=v(467),b=v(119);b.config({driver:[b.INDEXEDDB,b.LOCALSTORAGE,b.WEBSQL],name:"_localDataDB",version:1});const N={create:(F=(0,S.A)(function*(){return b}),function(){return F.apply(this,arguments)}),get:function(){var F=(0,S.A)(function*(x){return b.getItem(x)});return function(nt){return F.apply(this,arguments)}}(),set:function(){var F=(0,S.A)(function*(x,nt){return b.setItem(x,nt)});return function(nt,it){return F.apply(this,arguments)}}()},gt=function(){var F=(0,S.A)(function*(x){yield N.create();var nt=(yield N.get("icdt-data"))||[];"function"==typeof x.callback&&x.callback(nt)});return function(nt){return F.apply(this,arguments)}}(),T=function(){var F=(0,S.A)(function*(x){yield N.create(),x.params=x.params||{};try{yield N.set("icdt-data",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(nt){"function"==typeof x.callback&&x.callback(null),console.error(nt)}});return function(nt){return F.apply(this,arguments)}}(),c=function(){var F=(0,S.A)(function*(x){yield N.create();try{var nt=(yield N.get("icdt-config"))||{};"function"==typeof x.callback&&x.callback(nt)}catch(it){"function"==typeof x.callback&&x.callback(null),console.error(it)}});return function(nt){return F.apply(this,arguments)}}(),A=function(){var F=(0,S.A)(function*(x){yield N.create(),x.params=x.params||{};try{yield N.set("icdt-config",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(nt){"function"==typeof x.callback&&x.callback(null),console.error(nt)}});return function(nt){return F.apply(this,arguments)}}(),z=function(){var F=(0,S.A)(function*(x){yield N.create();try{var nt=(yield N.get("icdt-clipboard"))||{};"function"==typeof x.callback&&x.callback(nt)}catch(it){"function"==typeof x.callback&&x.callback(null),console.error(it)}});return function(nt){return F.apply(this,arguments)}}(),O=function(){var F=(0,S.A)(function*(x){yield N.create(),x.params=x.params||{};try{yield N.set("icdt-clipboard",x.params),"function"==typeof x.callback&&x.callback(x.params)}catch(nt){"function"==typeof x.callback&&x.callback(null),console.error(nt)}});return function(nt){return F.apply(this,arguments)}}();var F},6315:(he,Kt,v)=>{v.d(Kt,{w:()=>S});const S=(b,lt)=>{if(!b)return"";let N=b.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),gt=(N&&N[4]||"").trim(),T=N?(256|N[1]).toString(16).slice(1)+(256|N[2]).toString(16).slice(1)+(256|N[3]).toString(16).slice(1):b;if("0"==gt)return"transparent";if(lt){let c;c=""!==gt?gt:"01",c=(255*c|256).toString(16).slice(1),T+=c}return`#${T}`}},7873:(he,Kt,v)=>{v.d(Kt,{F:()=>S});const S={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},1477:(he,Kt,v)=>{v.d(Kt,{r:()=>S});const S={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221,Minus:189,Equal:187}},2409:(he,Kt,v)=>{v.d(Kt,{F:()=>S});const S={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(he,Kt,v)=>{v.d(Kt,{P:()=>S});const S={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(he,Kt,v)=>{v.d(Kt,{Q:()=>S});const S={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(he,Kt,v)=>{v.d(Kt,{h:()=>S});const S={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,TSPAN:10,PATH:8,POLYLINE:11}},8338:(he,Kt,v)=>{v.d(Kt,{S:()=>S});const S={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},6611:(he,Kt,v)=>{v.d(Kt,{L:()=>Rt});var S=v(3603),b=v(5970),lt=v(7873),N=v(9506),gt=v(1308),T=v(5483);const z=G=>{var i,n,o,r,l,y,m;let h=(null===(i=G.mouseEvent)||void 0===i?void 0:i.target)||(null===(n=G.touchEvent)||void 0===n?void 0:n.target),C=(null===(o=h)||void 0===o?void 0:o.getAttribute("id"))||"",p=null===(r=h)||void 0===r?void 0:r.nodeName;Rt.dataSelect.nodeName.includes(p)||(h=jQuery(h).parents("foreignObject").get(0),h&&(C=h.getAttribute("id")||"",p=h.nodeName));let U=(null===(l=h)||void 0===l||null===(l=l.parentNode)||void 0===l?void 0:l.getAttribute("id"))||"";var R,St;if([lt.F.RESIZE_GROUP,lt.F.SELECT_GROUP].includes(U))return null===(R=G.mouseEvent)||void 0===R||R.stopPropagation(),void(null===(St=G.mouseEvent)||void 0===St||St.preventDefault());if(null!==(y=G.mouseEvent)&&void 0!==y&&y.altKey||null!==(m=G.touchEvent)&&void 0!==m&&m.altKey||!C||C.match(/[^0-9]/)||!Rt.dataSelect.nodeName.includes(p)){var Et;Rt.dataSelect.ids.length&&(Rt.dataSelect.ids=[]),(0==(null===(Et=G.mouseEvent)||void 0===Et?void 0:Et.button)||G.touchEvent)&&(G=>{let l=(0,b.RY)(lt.F.SCAN_GROUP,"g"),y=(0,N.CE)(0,0,1,1);(0,b.xJ)(l,y),((G,i,n)=>{(0,gt.I)(G,{start:l=>{},move:(l,y)=>{((l,y,m,h)=>{i=(0,N.CE)(l,y,m,h),(0,b.xJ)(n,i)})(y[0][0],y[0][1],l.x,l.y)},end:(l,y)=>{null==n||n.remove(),Rt.dataSelect.ids=Rt.data.getNodeInArea(Math.min(y[0][0],l.x),Math.min(y[0][1],l.y),Math.max(y[0][0],l.x),Math.max(y[0][1],l.y)),(0,T.D)(Rt.dataSelect.nodes)}})})(G,y,l)})(G)}else{var At,Bt;let ee=parseFloat(C||"0");Rt.dataSelect.ids=null!==(At=G.mouseEvent)&&void 0!==At&&At.shiftKey||null!==(Bt=G.touchEvent)&&void 0!==Bt&&Bt.shiftKey?[ee].concat(Rt.dataSelect.ids).filter((_e,me,Ee)=>Ee.indexOf(_e)==me):[ee],(0,T.D)(Rt.dataSelect.nodes)}};class F{constructor(){let{x:i,y:n}=Rt.screen.dislocation;var o=(r,l,y,m)=>{Rt.screen.move({x:i,y:n},{x:y-r,y:m-l})};return{start:r=>{},move:(r,l)=>{o(l[0][0],l[0][1],r.x,r.y)},end:(r,l)=>{o(l[0][0],l[0][1],r.x,r.y)}}}}var x=v(1999),nt=v(4888);const it=[{name:"tam gi\xe1c vu\xf4ng",type:nt.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:nt.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:nt.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:nt.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:nt.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:nt.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:nt.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:nt.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:nt.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:nt.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:nt.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:nt.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:nt.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var wt=v(1281),f=v(2492);class J{constructor(){let i=(0,b.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,wt.K)(Math.ceil(1e9*Math.random())),y=(m,h,C,p)=>{l=(0,N.CE)(m,h,C,p,{ratio:1}),l.x=(0,f.z)(l.x),l.y=(0,f.z)(l.y),l.width=(0,f.z)(l.width),l.height=(0,f.z)(l.height),Object.assign(r,(0,N.xW)(x.h.CIRCLE,l,r)),(0,b.tD)(o,r),(0,b.in)(i,l)};return{start:m=>{y(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,h)=>{y(h[0][0],h[0][1],m.x,m.y)},end:(m,h)=>{(l.width<=8||l.height<=8)&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,N.xW)(x.h.CIRCLE,l,r)),(0,b.tD)(o,r)),Rt.data.node=Object.assign({id:n,type:x.h.CIRCLE,name:"Circle"},{size:l,attribute:r}),null==i||i.remove()}}}}var I=v(6153);class q{constructor(){let i=(0,b.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,I.W)(Math.ceil(1e9*Math.random()));var y=(m,h,C,p)=>{l=(0,N.CE)(m,h,C,p),l.x=(0,f.z)(l.x),l.y=(0,f.z)(l.y),l.width=(0,f.z)(l.width),l.height=(0,f.z)(l.height),Object.assign(r,(0,N.xW)(x.h.ELLIPSE,l,r)),(0,b.tD)(o,r),(0,b.in)(i,l)};return{start:m=>{y(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,h)=>{y(h[0][0],h[0][1],m.x,m.y)},end:(m,h)=>{l.width<4&&(l.width=4),l.height<4&&(l.height=4),l.width+l.height<8&&(l.width=90,l.height=60,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,N.xW)(x.h.ELLIPSE,l,r)),(0,b.tD)(o,r)),Rt.data.node=Object.assign({id:n,type:x.h.ELLIPSE,name:"Ellipse"},{size:l,attribute:r}),null==i||i.remove()}}}}var rt=v(7945);class B{constructor(){let i=(0,b.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,rt.a)(Math.ceil(1e9*Math.random()));var y=(m,h,C,p)=>{l=(0,N.CE)(m,h,C,p),l.x=(0,f.z)(l.x),l.y=(0,f.z)(l.y),l.width=(0,f.z)(l.width),l.height=(0,f.z)(l.height),Object.assign(r,(0,N.xW)(x.h.RECT,l,r)),(0,b.tD)(o,r),(0,b.in)(i,l)};return{start:m=>{y(m.x,m.y,m.x+l.width,m.y+l.height)},move:(m,h)=>{y(h[0][0],h[0][1],m.x,m.y)},end:(m,h)=>{l.width<1&&(l.width=1),l.height<1&&(l.height=1),l.width+l.height<8&&(l.width=80,l.height=80,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,N.xW)(x.h.RECT,l,r)),(0,b.tD)(o,r)),Rt.data.node=Object.assign({id:n,type:x.h.RECT,name:"Rect"},{size:l,attribute:r}),null==i||i.remove()}}}}var Q=v(3477);class ot{constructor(i){let n=(0,b.RY)(lt.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:r,element:l,attribute:y,size:m}=(0,Q.u)(Math.ceil(1e9*Math.random()));m.ratios=o;var h=(C,p,U,R)=>{m=(0,N.CE)(C,p,U,R,{ratios:o}),m.x=(0,f.z)(m.x),m.y=(0,f.z)(m.y),m.width=(0,f.z)(m.width),m.height=(0,f.z)(m.height),Object.assign(y,(0,N.xW)(x.h.POLYGON,m,y)),(0,b.tD)(l,y),(0,b.in)(n,m)};return{start:C=>{h(C.x,C.y,C.x+m.width,C.y+m.height)},move:(C,p)=>{h(p[0][0],p[0][1],C.x,C.y)},end:(C,p)=>{m.width<1&&(m.width=1),m.height<1&&(m.height=1),m.width+m.height<8&&(m.width=80,m.height=80,m.x=m.x-m.width/2,m.y=m.y-m.height/2,Object.assign(y,(0,N.xW)(x.h.POLYGON,m,y)),(0,b.tD)(l,y)),Rt.data.node=Object.assign({id:r,type:x.h.POLYGON,name:"Polygon"},{size:m,attribute:y}),null==n||n.remove()}}}}var W=v(3069);class _{constructor(){let i=(0,b.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l}=(0,W.q)(Math.ceil(1e9*Math.random()));return{start:m=>{},move:(m,h)=>{((m,h,C,p)=>{l=(0,N.CE)(m,h,C,p),l.x=(0,f.z)(l.x),l.y=(0,f.z)(l.y),l.width=(0,f.z)(l.width),l.height=(0,f.z)(l.height),Object.assign(r,(0,N.xW)(x.h.LINE,l,r)),(0,b.tD)(o,r),(0,b.in)(i,l)})(h[0][0],h[0][1],m.x,m.y)},end:(m,h)=>{h.length>=2?(l.width<8&&(l.width=0),l.height<8&&(l.height=0),l.width+l.height<8&&(l.width=80,l.height=0,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,N.xW)(x.h.LINE,l,r)),(0,b.tD)(o,r)),Rt.data.node=Object.assign({id:n,type:x.h.LINE,name:"Line"},{size:l,attribute:r})):null==o||o.remove(),null==i||i.remove()}}}}var yt=v(4896),jt=v(6407);class Lt{constructor(){let{nodeId:i,element:n,attribute:o,size:r}=(0,jt.X)(Math.ceil(1e9*Math.random())),y="";return{start:h=>{y=`M ${h.x} ${h.y} L ${h.x} ${h.y}`},move:(h,C)=>{((h,C)=>{y+=` ${h} ${C}`,n.setAttribute("d",y)})(h.x,h.y)},end:(h,C)=>{let p=(0,yt.CS)(y),{minX:U,minY:R,maxX:St,maxY:Et}=(0,yt.lP)(p);r.x=U,r.y=R,r.width=St-U||1,r.height=Et-R||1,r.ratioMaps=(0,yt.nf)(r,p),Rt.data.node=Object.assign({id:i,type:x.h.PATH,name:"Path"},{size:r,attribute:o})}}}}var Pt=v(745);class ct{constructor(){let i=(0,b.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,size:r,attribute:l,style:y,source:m}=(0,Pt.$)(Math.ceil(1e9*Math.random()));var h=(C,p,U,R)=>{r=(0,N.CE)(C,p,U,R),r.x=(0,f.z)(r.x),r.y=(0,f.z)(r.y),r.width=(0,f.z)(r.width),r.height=(0,f.z)(r.height),Object.assign(l,(0,N.xW)(x.h.FOREIGNOBJECT,r,l)),(0,b.tD)(o,l),(0,b.in)(i,r)};return{start:C=>{h(C.x,C.y,C.x+r.width,C.y+r.height)},move:(C,p)=>{h(p[0][0],p[0][1],C.x,C.y)},end:(C,p)=>{(r.width<=16||r.height<=16)&&(r.width=90,r.height=60,r.x=r.x-r.width/2,r.y=r.y-r.height/2,Object.assign(l,(0,N.xW)(x.h.FOREIGNOBJECT,r,l)),(0,b.tD)(o,l)),Rt.data.node=Object.assign({id:n,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:l,style:y,source:m}),null==i||i.remove()}}}}var xt=v(9173);class ce{constructor(){var i,n;let o=(0,b.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:r,element:l,size:y,attribute:m,source:h}=(0,xt.B)(Math.ceil(1e9*Math.random())),C=1;(U=>{if(!U)return;let R=new Image;R.onload=()=>{C=(0,f.z)(R.naturalWidth/R.naturalHeight,100)},R.onerror=St=>{console.error(`ImgSrc load failed -> ${U}`,St)},R.src=U})(null!==(i=null===(n=h.image)||void 0===n?void 0:n.url)&&void 0!==i?i:"");var p=(U,R,St,Et)=>{y=(0,N.CE)(U,R,St,Et,{ratio:C}),y.x=(0,f.z)(y.x),y.y=(0,f.z)(y.y),y.width=(0,f.z)(y.width),y.height=(0,f.z)(y.height),Object.assign(m,(0,N.xW)(x.h.IMAGE,y,m)),(0,b.tD)(l,m),(0,b.in)(o,y)};return{start:U=>{p(U.x,U.y,U.x+y.width,U.y+y.height)},move:(U,R)=>{p(R[0][0],R[0][1],U.x,U.y)},end:(U,R)=>{(y.width<=16||y.height<=16)&&(y.width=80,y.height=80,y.x=y.x-y.width/2,y.y=y.y-y.height/2,Object.assign(m,(0,N.xW)(x.h.IMAGE,y,m)),(0,b.tD)(l,m)),Rt.data.node=Object.assign({id:r,type:x.h.IMAGE,name:"Image"},{size:y,attribute:m,source:h}),null==o||o.remove()}}}}var It=v(7135),pt=v(4979);function Gt(G,i,n,o){return Math.sqrt(Math.pow(n-G,2)+Math.pow(o-i,2))}function D(G,i,n,o,r){return Gt(G,i,n,o)<r?1:0}function s(G,i,n,o,r,l,y){var m=[];return m.push(D(G,i,n,o,y)),m.push(D(G,i,r,l,y)),m.push(function P(G,i,n,o,r,l,y){var m=[r-n,l-o],h=[G-n,i-o],C=[-m[1],m[0]],p=Math.sqrt(Math.pow(C[0],2)+Math.pow(C[1],2)),U=[C[0]/p,C[1]/p],R=Math.sqrt(Math.pow(m[0],2)+Math.pow(m[1],2)),St=[m[0]/R,m[1]/R],Et=h[0]*St[0]+h[1]*St[1];if(Et<=0||Et>=R)return 0;var At=h[0]*U[0]+h[1]*U[1];return At>=y||At<=-y?0:1}(G,i,n,o,r,l,y)),m}function w(G,i,n,o,r){var l=[n-G,o-i],y=[-l[1],l[0]],m=Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)),h=[y[0]/m,y[1]/m];return[[G+r*h[0],i+r*h[1]],[G-r*h[0],i-r*h[1]],[n-r*h[0],o-r*h[1]],[n+r*h[0],o+r*h[1]]]}function H(G,i,n,o,r,l,y){var Et,m=[r-G,l-i],h=[n-G,o-i],C=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)),p=[h[0]/C,h[1]/C],U=m[0]*p[0]+m[1]*p[1],R=[G+U*p[0],i+U*p[1]],St=Math.sqrt(Math.pow(r-R[0],2)+Math.pow(l-R[1],2));Et=0===St?y:Math.sqrt(Math.pow(y,2)-Math.pow(St,2));var At=[G+U*p[0]+Et*p[0],i+U*p[1]+Et*p[1]];return At[0]===G&&At[1]===i?null:At}function tt(G,i,n,o,r,l,y){var m=[r-G,l-i],h=[n-G,o-i],C=[-h[1],h[0]],p=Math.sqrt(Math.pow(C[0],2)+Math.pow(C[1],2)),U=[C[0]/p,C[1]/p],R=m[0]*U[0]+m[1]*U[1],St=ht([G,i],[n,o],[r,l]);if(Qt([St[0]-r,St[1]-l])>=y)return null;var At=Math.sqrt(Math.pow(y,2)-Math.pow(R,2)),Bt=[r-R*U[0],l-R*U[1]],ee=Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2)),_e=[h[0]/ee,h[1]/ee],me=[[Bt[0]-_e[0]*At,Bt[1]-_e[1]*At],[Bt[0]+_e[0]*At,Bt[1]+_e[1]*At]];return me[0][0]===G&&me[0][1]===i?null:me}function zt(G,i,n,o,r,l,y,m){var h,C,p,U,R,St;return-(p=y-r)*(C=o-i)+(h=n-G)*(U=m-l)==0?null:(St=(p*(i-l)-U*(G-r))/(-p*C+h*U),(R=(-C*(G-r)+h*(i-l))/(-p*C+h*U))>=0&&R<=1&&St>=0&&St<=1?[G+St*h,i+St*C]:null)}function Zt(G,i,n,o,r,l,y,m,h,C){var p=w(l,y,m,h,C),U=[];if(n[0]&&!n[1])U.push(H(G,i,o,r,l,y,C)),U.push(zt(G,i,o,r,p[0][0],p[0][1],p[3][0],p[3][1])),U.push(zt(G,i,o,r,p[1][0],p[1][1],p[2][0],p[2][1])),(R=tt(G,i,o,r,m,h,C))&&U.push(R[0],R[1]);else if(!n[0]&&n[1])U.push(H(G,i,o,r,m,h,C)),U.push(zt(G,i,o,r,p[0][0],p[0][1],p[3][0],p[3][1])),U.push(zt(G,i,o,r,p[1][0],p[1][1],p[2][0],p[2][1])),(R=tt(G,i,o,r,l,y,C))&&U.push(R[0],R[1]);else if(n[0]&&n[1])U.push(H(G,i,o,r,l,y,C)),U.push(zt(G,i,o,r,p[0][0],p[0][1],p[3][0],p[3][1])),U.push(zt(G,i,o,r,p[1][0],p[1][1],p[2][0],p[2][1])),U.push(H(G,i,o,r,m,h,C));else{var R=tt(G,i,o,r,m,h,C),St=tt(G,i,o,r,l,y,C);R&&U.push(R[0],R[1]),St&&U.push(St[0],St[1]),U.push(zt(G,i,o,r,p[0][0],p[0][1],p[3][0],p[3][1])),U.push(zt(G,i,o,r,p[1][0],p[1][1],p[2][0],p[2][1]))}for(var Et=[G,i],At=0;At<U.length;At++)U[At]&&Gt(U[At][0],U[At][1],o,r)<Gt(Et[0],Et[1],o,r)&&(Et=U[At]);return Et[0]===G&&Et[1]===i?null:Et}function Yt(G,i,n,o,r,l,y,m,h){var C=w(r,l,y,m,h),p=[],U=tt(G,i,n,o,r,l,h);U&&p.push(U[0],U[1]),(U=tt(G,i,n,o,y,m,h))&&p.push(U[0],U[1]),p.push(zt(G,i,n,o,C[0][0],C[0][1],C[3][0],C[3][1])),p.push(zt(G,i,n,o,C[1][0],C[1][1],C[2][0],C[2][1]));for(var R=[n,o],St=[G,i],Et=0;Et<p.length;Et++)p[Et]&&Gt(p[Et][0],p[Et][1],G,i)<Gt(R[0],R[1],G,i)&&(R=p[Et]);for(var At=0;At<p.length;At++)p[At]&&Gt(p[At][0],p[At][1],n,o)<Gt(St[0],St[1],n,o)&&(St=p[At]);return R[0]===n&&R[1]===o||St[0]===G&&St[1]===i?null:[R,St]}var Qt=function(G){return Math.sqrt(G[0]*G[0]+G[1]*G[1])},ht=function(G,i,n){var o=[i[0]-G[0],i[1]-G[1]],r=Qt(o);if(r<1e-6)return G;var l=[n[0]-G[0],n[1]-G[1]],y=(o[0]*l[0]+o[1]*l[1])/r;return y<0?G:y>r?i:[G[0]+o[0]*y/r,G[1]+o[1]*y/r]};class Xt{constructor(){let{element:o,size:l}=(0,jt.X)(Math.ceil(1e9*Math.random()));(0,b.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let y="";return{start:C=>{y=`M ${C.x} ${C.y} L ${C.x} ${C.y}`},move:(C,p)=>{((C,p)=>{y+=` ${C} ${p}`,o.setAttribute("d",y)})(C.x,C.y)},end:(C,p)=>{o.remove(),(C=>{let p=9999,U=9999,R=-9999,St=-9999;C.forEach(At=>{p=Math.min(p,At[0]),U=Math.min(U,At[1]),R=Math.max(R,At[0]),St=Math.max(St,At[1])}),l=(0,N.CE)(p,U,R,St,{points:C}),Rt.data.getNodeInArea(0,0,1920,1920,x.h.PATH).forEach(At=>{let ee=((G,i,n)=>{n=n||20;var o=[],r=function(p){var U=i[0][0],R=i[0][1],St=0,Et=0;if(1!==p.length||D(p[0][0],p[0][1],U,R,n)){for(var At;St<p.length-1;){var Bt=p[St],ee=p[St+1],_e=D(Bt[0],Bt[1],U,R,n),me=D(ee[0],ee[1],U,R,n);if(_e&&me)Et=++St;else if(_e&&!me)(Ee=H(Bt[0],Bt[1],ee[0],ee[1],U,R,n))?(p[St]=Ee,Et=St):St++;else if(!_e&&me){var Ee;(Ee=H(ee[0],ee[1],Bt[0],Bt[1],U,R,n))&&((At=p.slice(Et,St+1)).push(Ee),o.push(At)),Et=++St}else{var be=tt(Bt[0],Bt[1],ee[0],ee[1],U,R,n);be?(((At=p.slice(Et,St+1))[At.length-1][0]!==be[0][0]||At[At.length-1][1]!==be[0][1])&&At.push(be[0]),At.length>1&&o.push(At),p[St]=be[1],p[St+1]&&p[St+1][0]==be[1][0]&&p[St+1][1]==be[1][1]&&St++,Et=St):St++}}Et!==St&&(At=p.slice(Et,p.length))&&o.push(At)}else o.push(p)},l=function(p,U){var ee,R=i[U],St=i[U+1],Et=0,At=0;if(1!==p.length||-1!==(Bt=s(p[0][0],p[0][1],R[0],R[1],St[0],St[1],n)).indexOf(1)){for(;Et<p.length-1;){var _e=p[Et],me=p[Et+1],Bt=s(_e[0],_e[1],R[0],R[1],St[0],St[1],n),Ee=s(me[0],me[1],R[0],R[1],St[0],St[1],n);if(-1!==Bt.indexOf(1)&&-1!==Ee.indexOf(1))At=++Et;else if(-1!==Bt.indexOf(1)&&-1===Ee.indexOf(1))(be=Zt(_e[0],_e[1],Bt,me[0],me[1],R[0],R[1],St[0],St[1],n))?(p[Et]=be,At=Et):Et++;else if(-1===Bt.indexOf(1)&&-1!==Ee.indexOf(1)){var be;(be=Zt(me[0],me[1],Ee,_e[0],_e[1],R[0],R[1],St[0],St[1],n))?((ee=p.slice(At,Et+1)).push(be),o.push(ee),At=++Et):Et++}else{var ke=Yt(_e[0],_e[1],me[0],me[1],R[0],R[1],St[0],St[1],n);ke?(((ee=p.slice(At,Et+1))[ee.length-1][0]!==ke[0][0]||ee[ee.length-1][1]!==ke[0][1])&&ee.push(ke[0]),ee.length>1&&o.push(ee),p[Et]=ke[1],p[Et+1]&&p[Et+1][0]==ke[1][0]&&p[Et+1][1]==ke[1][1]&&Et++,At=Et):Et++}}At!==Et&&(ee=p.slice(At,p.length))&&o.push(ee)}else o.push(p)};if(i=function j(G){var i=[];if(1===G.length)i=G;else{for(var n=0;n<G.length-1;)(G[n][0]!==G[n+1][0]||G[n][1]!==G[n+1][1])&&i.push(G[n]),n++;0!==G.length&&0===i.length&&i.push(G[0]),(G[G.length-1][0]!==G[i.length-1][0]||G[G.length-1][1]!==G[i.length-1][1])&&i.push(G[n])}return i}(i),1===i.length){for(var y=0;y<G.length;y++)r(G[y]);G=o}else for(var m=0;m<i.length-1;m++){for(y=0;y<G.length;y++)l(G[y],m);G=o,o=[]}for(var h=0;h<G.length;h++)for(var C=0;C<G[h].length;C++)G[h][C][0]=Math.round(G[h][C][0]),G[h][C][1]=Math.round(G[h][C][1]);return G})(Rt.data.getNode(At).size.points,C,2);console.log(ee)})})(p)}}}}var d=v(6847);class K{constructor(){let i=(0,b.RY)(lt.F.CREATE_GROUP,"g"),{nodeId:n,element:o,attribute:r,size:l,source:y}=(0,d.L)(Math.ceil(1e9*Math.random())),m=(h,C,p,U)=>{l=(0,N.CE)(h,C,p,U),l.x=(0,f.z)(l.x),l.y=(0,f.z)(l.y),l.width=(0,f.z)(l.width),l.height=(0,f.z)(l.height),Object.assign(r,(0,N.xW)(x.h.TEXT,l,r)),(0,b.tD)(o,r),(0,b.in)(i,l)};return{start:h=>{m(h.x,h.y,h.x+l.width,h.y+l.height)},move:(h,C)=>{m(C[0][0],C[0][1],h.x,h.y)},end:(h,C)=>{l.width<100&&(l.width=100),l.height<20&&(l.height=20),l.width+l.height<8&&(l.width=100,l.height=20,l.x=l.x-l.width/2,l.y=l.y-l.height/2,Object.assign(r,(0,N.xW)(x.h.TEXT,l,r)),(0,b.tD)(o,r)),Rt.data.node=Object.assign({id:n,type:x.h.TEXT,name:"Text"},{size:l,attribute:r,source:y}),null==i||i.remove()}}}}var E=v(4312),Y=v(2409),st=v(6078);var Tt=v(3073);class Mt{constructor(){this._nodeName=["circle","ellipse","line","polygon","polyline","rect","text","tspan","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>Rt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var n,o,r,l,y;null===(n=window.document.getElementById(lt.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(o=window.document.getElementById(lt.F.SELECT_GROUP))||void 0===o||o.remove(),null===(r=window.document.getElementById(lt.F.SCAN_GROUP))||void 0===r||r.remove(),null===(l=window.document.getElementById(lt.F.CREATE_GROUP))||void 0===l||l.remove(),null===(y=window.document.getElementById(lt.F.INTERACTIVE_GROUP))||void 0===y||y.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(m=>m(i))}deleteNode(){for(let i of this._selected_Ids){let n=Rt.data.deleteNode(i);Rt.history.push([{type:"delete",from:{id:n},to:{id:n}}])}Rt.dataSelect.ids=[]}groupNode(){let i=[];if(Rt.dataSelect.ids.length>=2){let n=Rt.data.getNode(Rt.dataSelect.ids[0]),{nodeId:o,attribute:r,size:l}=(0,Tt.v)(Math.ceil(1e9*Math.random()),void 0,n.pid?window.document.getElementById(n.pid):null);Rt.data.node=Object.assign({id:o,type:x.h.GROUP,name:"G"},{size:l,attribute:r});for(let y of Rt.dataSelect.ids)i.push(Rt.data.addGroup(y,o))}i.length&&(Rt.dataSelect.ids=i,(0,T.D)(Rt.dataSelect.nodes))}ungroupNode(){let i=[];for(let n of Rt.dataSelect.ids)i.push(Rt.data.unGroup(n));i.length&&(Rt.dataSelect.ids=i,(0,T.D)(Rt.dataSelect.nodes))}}var Ot=v(2837),mt=v(8338);class kt{createNodeImage(i,n){var o,r,l,y;let{nodeId:h,element:C,size:p,attribute:U,source:R}=(0,xt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:50)-50,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:50)-50,width:100,height:100},source:{type:"image",image:(0,Ot.U)(i)}});(St=>{if(!St)return;let Et=new Image;Et.onload=()=>{let At=(0,f.z)(Et.naturalWidth/Et.naturalHeight,100);At>=1?(p.width=Math.min(Et.naturalWidth,512),p.height=(0,f.z)(p.width/At,100)):(p.height=Math.min(Et.naturalHeight,512),p.width=(0,f.z)(p.height*At,100)),p.x=(0,f.z)(p.x+50-p.width/2,100),p.y=(0,f.z)(p.y+50-p.height/2,100),Object.assign(U,(0,N.xW)(x.h.IMAGE,p,U)),(0,b.tD)(C,U),Rt.data.node=Object.assign({id:h,type:x.h.IMAGE,name:"Image"},{size:p,attribute:U,source:R})},Et.onerror=At=>{console.error(`ImgSrc load failed -> ${St}`,At),null==C||C.remove()},Et.src=St})(null!==(l=null===(y=R.image)||void 0===y?void 0:y.url)&&void 0!==l?l:"")}createNodeIframe(i,n){var o,r;let{nodeId:y,element:m,size:h,attribute:C,style:p,source:U}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:50)-50,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,Ot.U)(i)}});(R=>{let St=(null===(R=Rt.data.slide)||void 0===R||null===(R=R.svg)||void 0===R?void 0:R.viewBox)||{x:0,y:0,width:100,height:100},Et=(0,f.z)(St.width/St.height,100);Et>=1?(h.width=Math.min(St.width,512),h.height=(0,f.z)(h.width/Et,100)):(h.height=Math.min(St.height,512),h.width=(0,f.z)(h.height*Et,100)),h.x=(0,f.z)(h.x+50-h.width/2,100),h.y=(0,f.z)(h.y+50-h.height/2,100),Object.assign(C,(0,N.xW)(x.h.IMAGE,h,C)),(0,b.tD)(m,C),Rt.data.node=Object.assign({id:y,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:C,style:p,source:U})})()}createNodeEmbed(i,n){var o,r;let l={x:50,y:50,width:640,height:360};i.type==mt.S.AUDIO&&(l.width=480,l.height=80);let{nodeId:y,element:m,size:h,attribute:C,style:p,source:U}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:l.x)-l.x,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:l.y)-l.y,width:l.width,height:l.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,Ot.U)(i))}});(()=>{let R=(0,f.z)(l.width/l.height,100);R>=1?(h.width=Math.min(h.width,l.width),h.height=(0,f.z)(h.width/R,1)):(h.height=Math.min(h.height,l.height),h.width=(0,f.z)(h.height*R,1)),h.x=(0,f.z)(h.x+l.x-h.width/2,1),h.y=(0,f.z)(h.y+l.y-h.height/2,1),Object.assign(C,(0,N.xW)(x.h.FOREIGNOBJECT,h,C)),(0,b.tD)(m,C),Rt.data.node=Object.assign({id:y,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:C,style:p,source:U})})()}createNodeMedia(i,n){var o,r,l,y;let{nodeId:h,element:C,size:p,attribute:U,source:R}=(0,xt.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:50)-50,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:50)-50,width:100,height:100},source:{type:"image",image:(0,Ot.U)(i.cover)}}),St={click:{media:i.media}};(Et=>{if(!Et)return;let At=new Image;At.onload=()=>{let Bt=(0,f.z)(At.naturalWidth/At.naturalHeight,100);Bt>=1?(p.width=Math.min(At.naturalWidth,512),p.height=(0,f.z)(p.width/Bt,100)):(p.height=Math.min(At.naturalHeight,512),p.width=(0,f.z)(p.height*Bt,100)),p.x=(0,f.z)(p.x+50-p.width/2,100),p.y=(0,f.z)(p.y+50-p.height/2,100),Object.assign(U,(0,N.xW)(x.h.IMAGE,p,U)),(0,b.tD)(C,U),Rt.data.node=Object.assign({id:h,type:x.h.IMAGE,name:"Image"},{size:p,attribute:U,source:R,interactive:St})},At.onerror=Bt=>{console.error(`ImgSrc load failed -> ${Et}`,Bt),null==C||C.remove()},At.src=Et})(null!==(l=null===(y=R.image)||void 0===y?void 0:y.url)&&void 0!==l?l:"")}createNodeText(i,n){var o,r;let{nodeId:y,element:m,size:h,attribute:C,style:p,source:U}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==n?void 0:n.x)&&void 0!==o?o:0)-0,y:(null!==(r=null==n?void 0:n.y)&&void 0!==r?r:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let R=(0,f.z)(4,100);R>=1?(h.width=Math.min(h.width,320),h.height=(0,f.z)(h.width/R,1)):(h.height=Math.min(h.height,80),h.width=(0,f.z)(h.height*R,1)),h.x=(0,f.z)(h.x+0-h.width/2,1),h.y=(0,f.z)(h.y+0-h.height/2,1),Object.assign(C,(0,N.xW)(x.h.FOREIGNOBJECT,h,C)),(0,b.tD)(m,C),Rt.data.node=Object.assign({id:y,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:h,attribute:C,style:p,source:U})})()}insert(i){var n;if(Rt.data.insertSlide(Rt.data.slideId,1),i.title){let{nodeId:o,size:r,attribute:l,style:y,source:m}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});Rt.data.node=Object.assign({id:o,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:l,style:y,source:m})}if(i.description){let{nodeId:o,size:r,attribute:l,style:y,source:m}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});Rt.data.node=Object.assign({id:o,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:r,attribute:l,style:y,source:m})}null!==(n=i.media)&&void 0!==n&&n.prompt&&((()=>{let{nodeId:o,size:r,attribute:l}=(0,rt.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});Rt.data.node=Object.assign({id:o,type:x.h.RECT,name:"Rect"},{size:r,attribute:l})})(),(o=>{let{nodeId:r,size:l,attribute:y,style:m,source:h}=(0,Pt.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});Rt.data.node=Object.assign({id:r,type:x.h.FOREIGNOBJECT,name:"ForeignObject"},{size:l,attribute:y,style:m,source:h})})())}}var Ct=v(1026),Ft=v(8047);class Vt{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:Rt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let n=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((l,y)=>y==this._slideIdx),o=null==n?void 0:n.svg,r=l=>{let y=[];return l.filter(m=>!m.isdeleted).forEach(m=>{m.type==x.h.GROUP?y=y.concat(r(m.nodes||[])):y.push(m.id)}),y};return r((null==o?void 0:o.nodes)||[])}}get get(){var i;let n=o=>{var r,l;return null===(r=o)||void 0===r||r.filter(y=>y.type==x.h.GROUP).forEach(y=>{var m;y.nodes=n(null===(m=y.nodes)||void 0===m?void 0:m.filter(h=>!h.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(y=>{var m,h;return y.type!=x.h.GROUP||(null!==(m=null===(h=y.nodes)||void 0===h?void 0:h.length)&&void 0!==m?m:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var r;o.svg&&(o.svg.nodes=n(null===(r=o.svg)||void 0===r||null===(r=r.nodes)||void 0===r?void 0:r.filter(l=>!l.isdeleted)))}),this._dataSource}get getResource(){var i;let n=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var r,l,y,m,h,C,p,U;n.push(null===(r=o.svg)||void 0===r||null===(r=r.background)||void 0===r?void 0:r.path),null===(l=o.svg)||void 0===l||l.nodes.forEach(R=>{var St,Et,At,Bt,ee,_e,me,Ee,be,ke;n.push(null===(St=R.source)||void 0===St||null===(St=St.image)||void 0===St?void 0:St.path),n.push(null===(Et=R.source)||void 0===Et||null===(Et=Et.audio)||void 0===Et?void 0:Et.path),n.push(null===(At=R.source)||void 0===At||null===(At=At.video)||void 0===At?void 0:At.path),n.push(null===(Bt=R.source)||void 0===Bt||null===(Bt=Bt.file)||void 0===Bt?void 0:Bt.path),n.push(null===(ee=R.source)||void 0===ee||null===(ee=ee.iframe)||void 0===ee?void 0:ee.path),n.push(null===(_e=R.source)||void 0===_e||null===(_e=_e.track)||void 0===_e?void 0:_e.path),n.push(null===(me=R.interactive)||void 0===me||null===(me=me.show)||void 0===me||null===(me=me.audio)||void 0===me||null===(me=me.source)||void 0===me?void 0:me.path),n.push(null===(Ee=R.interactive)||void 0===Ee||null===(Ee=Ee.click)||void 0===Ee||null===(Ee=Ee.audio)||void 0===Ee||null===(Ee=Ee.source)||void 0===Ee?void 0:Ee.path),n.push(null===(be=R.interactive)||void 0===be||null===(be=be.click)||void 0===be||null===(be=be.image)||void 0===be||null===(be=be.source)||void 0===be?void 0:be.path),n.push(null===(ke=R.interactive)||void 0===ke||null===(ke=ke.click)||void 0===ke||null===(ke=ke.video)||void 0===ke||null===(ke=ke.source)||void 0===ke?void 0:ke.path)}),n.push(null===(y=o.test)||void 0===y||null===(y=y.audiotrue)||void 0===y?void 0:y.path),n.push(null===(m=o.test)||void 0===m||null===(m=m.audiofalse)||void 0===m?void 0:m.path),n.push(null===(h=o.test)||void 0===h||null===(h=h.effecttrue)||void 0===h?void 0:h.path),n.push(null===(C=o.test)||void 0===C||null===(C=C.effectfalse)||void 0===C?void 0:C.path),n.push(null===(p=o.test)||void 0===p||null===(p=p.icontrue)||void 0===p?void 0:p.path),n.push(null===(U=o.test)||void 0===U||null===(U=U.iconfalse)||void 0===U?void 0:U.path)}),n.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,r,l)=>l.indexOf(o)==r)}get getFonts(){var i;return(0,Ft.d)(JSON.stringify(null!==(i=this._dataSource.slides)&&void 0!==i?i:[]))}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,b.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let n=o=>{var r,l;return null===(r=o)||void 0===r||r.filter(y=>y.type==x.h.GROUP).forEach(y=>{var m;y.nodes=n(null===(m=y.nodes)||void 0===m?void 0:m.filter(h=>!h.isdeleted))}),(o=null===(l=o)||void 0===l?void 0:l.filter(y=>{var m,h;return y.type!=x.h.GROUP||(null!==(m=null===(h=y.nodes)||void 0===h?void 0:h.length)&&void 0!==m?m:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var r;o.svg&&(o.svg.nodes=n(null===(r=o.svg)||void 0===r||null===(r=r.nodes)||void 0===r?void 0:r.filter(l=>!l.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,b.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,n;return null!==(i=null===(n=this.slide)||void 0===n?void 0:n.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((n,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,n;this._slideIdx<(null!==(i=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,b.rN)(),(0,Ct.t)(this.slide)}openSlide(i,n){var o,r,l,y,m;if(i)for(let R=0,St=null!==(h=null===(C=this._dataSource.slides)||void 0===C?void 0:C.length)&&void 0!==h?h:0;R<St;R++){var h,C,p;if((null!==(p=this._dataSource.slides)&&void 0!==p?p:[])[R].id==i){this._slideIdx=R;break}}else if(n&&n>=0&&n<(null!==(o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==o?o:0))this._slideIdx=null!=n?n:0;else{var U;this._slideIdx=0,null!==(U=this._dataSource.slides)&&void 0!==U&&U.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,b.rN)(),null!==(l=this.slide)&&void 0!==l&&null!==(l=l.svg)&&void 0!==l&&l.viewBox&&(Rt.screen.frameSize=this.slide.svg.viewBox),(0,Ct.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(y=null===(m=this._dataSource.slides)||void 0===m?void 0:m.length)&&void 0!==y?y:0,this.slide)}addSlide(){var i,n,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==n?n:0)-1,this.openSlide(void 0,this._slideIdx)}tryMergeSlide(i,n,o){var r,l,y;let m=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(h=>h.id==i);return m?null!==(l=m.test)&&void 0!==l&&l.type&&null!==(y=n.test)&&void 0!==y&&y.type?"boolean"!=typeof o?-1:o?this.mergeSlide(i,m,n):this.insertSlide(i,1,n):this.mergeSlide(i,m,n):this.insertSlide(i,1,n)}tryReplaceSlide(i,n){var o,r,l,y,m;let h=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(p=>p.id==i);if(!h||null!=h&&null!==(r=h.svg)&&void 0!==r&&r.nodes.filter(p=>!p.isdeleted).length)return this.insertSlide(i,1,n);let C=null!==(l=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(h))&&void 0!==l?l:0;return null===(m=this._dataSource.slides)||void 0===m||m.splice(C,1,n),this._slideIdx=C,this.openSlide(void 0,this._slideIdx),1}mergeSlide(i,n,o){var r,l,y,m;return n.test=null!==(r=o.test)&&void 0!==r?r:n.test,n.audio=null!==(l=o.audio)&&void 0!==l?l:n.audio,n.svg?n.svg.nodes=n.svg.nodes.concat(null!==(y=null===(m=o.svg)||void 0===m?void 0:m.nodes)&&void 0!==y?y:[]):n.svg=o.svg,this.openSlide(i),1}insertSlide(i,n,o){var r,l,y,m,h;let C=null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.find(R=>R.id==i))&&void 0!==r?r:this._defaultSlide,p=(null!==(y=null===(m=this._dataSource.slides)||void 0===m?void 0:m.indexOf(C))&&void 0!==y?y:0)+n;var U;return o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(U=o.svg)&&void 0!==U&&U.viewBox||o.svg&&(o.svg.viewBox=Rt.screen.frameSize)):o=this._defaultSlide,null===(h=this._dataSource.slides)||void 0===h||h.splice(p,0,o),this._slideIdx=p,this.openSlide(void 0,this._slideIdx),1}copySlide(i){var n,o,r,l,y,m,h;let C=null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(R=>R.id==i))&&void 0!==n?n:this._defaultSlide,p=(null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(C))&&void 0!==r?r:0)+1,U=Object.assign(JSON.parse(JSON.stringify(C)),{id:this.newSlideId,code:void 0,name:`${C.name} + (Copy)`});null===(y=this._dataSource.slides)||void 0===y||y.splice(p,0,U),this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(h=this._dataSource.slides)||void 0===h?void 0:h.length)&&void 0!==m?m:0,this.slide)}moveSlide(i,n){var o,r,l,y,m,h;let C=null!==(o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find(U=>U.id==i))&&void 0!==o?o:this._defaultSlide,p=null!==(l=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(C))&&void 0!==l?l:0;null===(m=this._dataSource.slides)||void 0===m||m.splice(p+n,0,null===(h=this._dataSource.slides)||void 0===h?void 0:h.splice(p,1)[0])}deleteSlide(i){var n,o,r,l,y,m;let h=null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(R=>R.id==i))&&void 0!==n?n:this._defaultSlide,C=null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(h))&&void 0!==r?r:0;if(null===(y=this._dataSource.slides)||void 0===y||y.splice(C,1),null!==(m=this._dataSource.slides)&&void 0!==m&&m.length)if(C<this._slideIdx){var p,U;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(U=this._dataSource.slides)||void 0===U?void 0:U.length)&&void 0!==p?p:0,this.slide)}else C==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var n,o,r,l,y;let m=null!==(n=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(C=>C.id==i))&&void 0!==n?n:this._defaultSlide,h=null!==(r=null===(l=this._dataSource.slides)||void 0===l?void 0:l.indexOf(m))&&void 0!==r?r:0;if(m.isdeleted=!0,null!==(y=this._dataSource.slides)&&void 0!==y&&null!==(y=y.filter(C=>!C.isdeleted))&&void 0!==y&&y.length){let C=!0;for(;m.isdeleted;)C?h++:h--,this._dataSource.slides[h]?m=this._dataSource.slides[h]:C=!C;this.openSlide(m.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,n,o,r){this._fnChangeSlides.forEach(l=>l(i,n,o,r))}set node(i){var n,o;let r=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((l,y)=>y==this._slideIdx);null!=r&&null!==(o=r.svg)&&void 0!==o&&o.nodes&&r.svg.nodes.push(i),Rt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Ct.t)(r),(0,Ct.t)(r,null==r?void 0:r.id)}findNode(i){var n;let o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((R,St)=>St==this._slideIdx),r=null==o?void 0:o.svg,l=(R,St)=>{let Et=null==R?void 0:R.find(ee=>ee.id==i);if(Et)return Et.pid=St,Et;let At=0,Bt=R.length||0;for(;At<Bt&&!Et&&(Et=l(R[At].nodes||[],R[At].id),!Et);)At++;return Et},y=l((null==r?void 0:r.nodes)||[]);var m,h,C,p,U;return y?(y.style=null!==(m=y.style)&&void 0!==m?m:{},y.source=null!==(h=y.source)&&void 0!==h?h:{},y.animate=null!==(C=y.animate)&&void 0!==C?C:{},y.interactive=null!==(p=y.interactive)&&void 0!==p?p:{},y.variable=null!==(U=y.variable)&&void 0!==U?U:{},y):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var n;let o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find((m,h)=>h==this._slideIdx),r=null==o?void 0:o.svg,y=m=>{let h=(null==m?void 0:m.find(Et=>Et.id==i))||(m=>{let h=null,C=0,p=m.length||0;for(;C<p&&!h;){if(h=y(m[C].nodes),h){h.pid=m[C].id;break}C++}var U,R,St,Et,At;return h&&(h.style=null!==(U=h.style)&&void 0!==U?U:{},h.source=null!==(R=h.source)&&void 0!==R?R:{},h.animate=null!==(St=h.animate)&&void 0!==St?St:{},h.interactive=null!==(Et=h.interactive)&&void 0!==Et?Et:{},h.variable=null!==(At=h.variable)&&void 0!==At?At:{}),h})((null==m?void 0:m.filter(Et=>Et.type==x.h.GROUP))||[]);var C,p,U,R,St;return h&&(h.style=null!==(C=h.style)&&void 0!==C?C:{},h.source=null!==(p=h.source)&&void 0!==p?p:{},h.animate=null!==(U=h.animate)&&void 0!==U?U:{},h.interactive=null!==(R=h.interactive)&&void 0!==R?R:{},h.variable=null!==(St=h.variable)&&void 0!==St?St:{}),h};return y((null==r?void 0:r.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,n,o,r,l){var y;let m=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((p,U)=>U==this._slideIdx),h=null==m?void 0:m.svg,C=p=>{let U=[];return p.filter(R=>!R.isdeleted).forEach(R=>{R.type==x.h.GROUP?U=U.concat(C(R.nodes||[])):i>R.size.x||n>R.size.y||o<R.size.x+R.size.width||r<R.size.y+R.size.height||(l?R.type==l&&U.push(R.id):U.push(R.id))}),U};return C((null==h?void 0:h.nodes)||[])}getNodeOnArea(i,n,o,r,l){var y;let m=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((p,U)=>U==this._slideIdx),h=null==m?void 0:m.svg,C=p=>{let U=[];return p.filter(R=>!R.isdeleted).forEach(R=>{R.type==x.h.GROUP?U=U.concat(C(R.nodes||[])):R.size.x+R.size.width<i||R.size.y+R.size.height<n||R.size.x>o||R.size.y>r||(l?R.type==l&&U.push(R.id):U.push(R.id))}),U};return C((null==h?void 0:h.nodes)||[])}deleteNode(i,n){var o;return this.getNode(i).isdeleted=null==n||n,(0,Ct.t)(this.slide),(0,Ct.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var n,o;let r=this.getNode(i),l=Math.ceil(1e9*Math.random());return null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.push(Object.assign(JSON.parse(JSON.stringify(r)),{id:l})),Object.assign(r,{isdeleted:!0}),(0,Ct.t)(this.slide),(0,Ct.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),l}addGroup(i,n){var o;let r=this.getNode(i),l=this.getNode(n);l.nodes=l.nodes||[];let y=Math.ceil(1e9*Math.random());return l.nodes.push(Object.assign(JSON.parse(JSON.stringify(r)),{id:y})),Object.assign(r,{isdeleted:!0}),(0,Ct.t)(this.slide),(0,Ct.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),y}setNodeP(i,n){var o;let r=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(l=>l.id==i);r&&(r.pid=n||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,n){var o,r,l,y,m,h;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((p,U)=>{p.index=U+1});let C=(null!==(r=null===(l=this.slide)||void 0===l||null===(l=l.svg)||void 0===l?void 0:l.nodes.length)&&void 0!==r?r:0)+1;i.map(p=>{var U,R;return{id:p,index:null!==(U=null===(R=this.slide)||void 0===R||null===(R=R.svg)||void 0===R||null===(R=R.nodes.find(St=>St.id==p))||void 0===R?void 0:R.index)&&void 0!==U?U:0}}).sort((p,U)=>p.index-U.index).forEach(p=>{var R,U;n?null===(R=this.slide)||void 0===R||null===(R=R.svg)||void 0===R||R.nodes.filter((St,Et)=>St.id==p.id).forEach(St=>{St.index=n+p.index+p.index/1e3}):null===(U=this.slide)||void 0===U||null===(U=U.svg)||void 0===U||U.nodes.filter(St=>St.id==p.id).forEach(St=>{St.index=C+p.index})}),null===(y=this.slide)||void 0===y||null===(y=y.svg)||void 0===y||y.nodes.sort((p,U)=>{var R,St;return(null!==(R=p.index)&&void 0!==R?R:0)-(null!==(St=U.index)&&void 0!==St?St:0)}),(0,Ct.$)(this.slide),null===(m=window.document.getElementById(lt.F.RESIZE_GROUP))||void 0===m||m.remove(),null===(h=window.document.getElementById(lt.F.SELECT_GROUP))||void 0===h||h.remove(),(0,T.D)(Rt.dataSelect.nodes)}sendToBackStep(i,n){var o,r,l,y;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((m,h)=>{m.index=h+1}),i.map(m=>{var h,C;return{id:m,index:null!==(h=null===(C=this.slide)||void 0===C||null===(C=C.svg)||void 0===C||null===(C=C.nodes.find(p=>p.id==m))||void 0===C?void 0:C.index)&&void 0!==h?h:0}}).sort((m,h)=>m.index-h.index).forEach(m=>{var C,h;n?null===(C=this.slide)||void 0===C||null===(C=C.svg)||void 0===C||C.nodes.filter(p=>p.id==m.id).forEach(p=>{p.index=n+m.index+m.index/1e3}):null===(h=this.slide)||void 0===h||null===(h=h.svg)||void 0===h||h.nodes.filter(p=>p.id==m.id).forEach(p=>{p.index=m.index/100-1})}),null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.sort((m,h)=>{var C,p;return(null!==(C=m.index)&&void 0!==C?C:0)-(null!==(p=h.index)&&void 0!==p?p:0)}),(0,Ct.$)(this.slide),null===(l=window.document.getElementById(lt.F.RESIZE_GROUP))||void 0===l||l.remove(),null===(y=window.document.getElementById(lt.F.SELECT_GROUP))||void 0===y||y.remove(),(0,T.D)(Rt.dataSelect.nodes)}bringToFrontArea(i){var n,o,r,l;let y=i.map(Et=>Rt.data.getNode(Et)).filter(Et=>!Et.isfake),{x1:m,y1:h,x2:C,y2:p}=$t(y),U=this.getNodeOnArea(m,h,C,p);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((Et,At)=>{Et.index=At+1});let R=U.map(Et=>{var At,Bt;return null!==(At=null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||null===(Bt=Bt.nodes.find(ee=>ee.id==Et))||void 0===Bt?void 0:Bt.index)&&void 0!==At?At:0}),St=Math.max.apply(null,R);i.forEach((Et,At)=>{var Bt;null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||Bt.nodes.filter(ee=>ee.id==Et).forEach(ee=>{ee.index=St+(At+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((Et,At)=>{var Bt,ee;return(null!==(Bt=Et.index)&&void 0!==Bt?Bt:0)-(null!==(ee=At.index)&&void 0!==ee?ee:0)}),(0,Ct.$)(this.slide),null===(r=window.document.getElementById(lt.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(l=window.document.getElementById(lt.F.SELECT_GROUP))||void 0===l||l.remove(),(0,T.D)(Rt.dataSelect.nodes)}sendToBackArea(i){var n,o,r,l;let y=i.map(Et=>Rt.data.getNode(Et)).filter(Et=>!Et.isfake),{x1:m,y1:h,x2:C,y2:p}=$t(y),U=this.getNodeOnArea(m,h,C,p);null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.forEach((Et,At)=>{Et.index=At+1});let R=U.map(Et=>{var At,Bt;return null!==(At=null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||null===(Bt=Bt.nodes.find(ee=>ee.id==Et))||void 0===Bt?void 0:Bt.index)&&void 0!==At?At:0}),St=Math.min.apply(null,R)-1;i.forEach((Et,At)=>{var Bt;null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||Bt.nodes.filter(ee=>ee.id==Et).forEach(ee=>{ee.index=St+(At+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((Et,At)=>{var Bt,ee;return(null!==(Bt=Et.index)&&void 0!==Bt?Bt:0)-(null!==(ee=At.index)&&void 0!==ee?ee:0)}),(0,Ct.$)(this.slide),null===(r=window.document.getElementById(lt.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(l=window.document.getElementById(lt.F.SELECT_GROUP))||void 0===l||l.remove(),(0,T.D)(Rt.dataSelect.nodes)}}const $t=G=>{let i=999999,n=999999,o=-999999,r=-999999;return G.forEach(l=>{i=Math.min(i,l.size.x),n=Math.min(n,l.size.y),o=Math.max(o,l.size.x+l.size.width),r=Math.max(r,l.size.y+l.size.height)}),{x1:i,y1:n,x2:o,y2:r}};class ae{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":Rt.data.deleteNode(n.from.id);break;case"edit":break;case"delete":Rt.data.deleteNode(n.from.id,!1);break;case"size":{let{id:o,type:r,size:l,attribute:y}=Rt.data.getNode(n.from.id);Object.assign(l,n.from.size),Object.assign(y,(0,N.xW)(r,l,y)),(0,b.tD)(window.document.getElementById(o),y);break}case"attribute":{let{id:o,attribute:r}=Rt.data.getNode(n.from.id);Object.assign(r,n.from.attribute),(0,b.tD)(window.document.getElementById(o),r);break}case"style":{let{id:o,style:r}=Rt.data.getNode(n.from.id);Object.assign(null!=r?r:{},n.from.style),(0,b.c_)(window.document.getElementById(o),r);break}case"source":{let{id:o,type:r,source:l}=Rt.data.getNode(n.from.id);Object.assign(null!=l?l:{},n.from.source),(0,b.KG)(window.document.getElementById(o),r,null!=l?l:{});break}case"animate":{let{animate:o}=Rt.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.animate);break}case"interactive":{let{interactive:o}=Rt.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.interactive);break}case"variable":{let{variable:o}=Rt.data.getNode(n.from.id);Object.assign(null!=o?o:{},n.from.variable);break}}}),Rt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(n){switch(n.type){case"add":Rt.data.deleteNode(n.to.id,!1);break;case"edit":break;case"delete":Rt.data.deleteNode(n.to.id,!0);break;case"size":{let{id:o,type:r,size:l,attribute:y}=Rt.data.getNode(n.to.id);Object.assign(l,n.to.size),Object.assign(y,(0,N.xW)(r,l,y)),(0,b.tD)(window.document.getElementById(o),y);break}case"attribute":{let{id:o,attribute:r}=Rt.data.getNode(n.to.id);Object.assign(r,n.to.attribute),(0,b.tD)(window.document.getElementById(o),r);break}case"style":{let{id:o,style:r}=Rt.data.getNode(n.to.id);Object.assign(null!=r?r:{},n.to.style),(0,b.c_)(window.document.getElementById(o),r);break}case"source":{let{id:o,type:r,source:l}=Rt.data.getNode(n.to.id);Object.assign(null!=l?l:{},n.to.source),(0,b.KG)(window.document.getElementById(o),r,null!=l?l:{});break}case"animate":{let{animate:o}=Rt.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.animate);break}case"interactive":{let{interactive:o}=Rt.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.interactive);break}case"variable":{let{variable:o}=Rt.data.getNode(n.to.id);Object.assign(null!=o?o:{},n.to.variable);break}}}),Rt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class se{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var n,o;this._frameSize.width=null!==(n=null==i?void 0:i.width)&&void 0!==n?n:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,n,o){var r;if(!(i<.01||i>100)){if(n=null!==(r=n)&&void 0!==r?r:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-n.x,this._dislocation.y=this._height/i/2-n.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var l={x:Math.max(0,Math.min((0,f.z)(n.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,f.z)(n.y/this._height,1e3),1))},y={x:(this._width/i-this._width/this._scale)*l.x,y:(this._height/i-this._height/this._scale)*l.y};this._dislocation.x+=y.x,this._dislocation.y+=y.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}zoomIn(){this.scaleTo(this._scale+.04*this._scale)}zoomOut(){this.scaleTo(this._scale-.04*this._scale)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,n){this._dislocation.x=i.x+n.x/this._scale,this._dislocation.y=i.y+n.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,b.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(n=>n(i))}}var de=v(6195);class xe{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,de.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,de._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(n=>n(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(n=>n(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(n=>n(i)),this.saveConfig()}}var Le=v(5619),Ne=v(334),Te=v(3591),we=function(G){return G&&JSON.parse(JSON.stringify(G))},Ge=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],ei=[],di={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},li={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class ai{constructor(){this._data_variables=we(Ge).concat(we(ei)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(n=>{n(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(n=>{n(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var n of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))n.if&&n.if.length>0&&(this.checkValueConditions(n.if)?this.setValueOperators(n.then||[]):this.setValueOperators(n.else||[]))}}renew(){this._data_variables=we(Ge).concat(we(ei)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let n={};"string"==typeof i?n=JSON.parse(i):"object"==typeof i&&(n=i),this._data_variables=n.variables||[],this._data_conditions=n.conditions||(o=>(this._data_variables.map(r=>r.change||[]).forEach(r=>{o=o.concat(r)}),o))([]),Ge.forEach(o=>{var r=this._data_variables.filter(l=>l.key==o.key);r.length?r.forEach(function(l,y,m){l.type=o.type,l.readonly=o.readonly,l.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return we(di)}getConditionTemp(){return we(li)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,n){return i.localeCompare(n)})}getVariableAll(){return this._data_variables.length?we((G=this._data_variables,i="key",function(n){for(var o of G.map(function(r){return r[i]}).sort())G.filter(function(r){return r[i]==o}).forEach(function(r){n.push(r)}),G=G.filter(function(r){return r[i]!=o});return n}([]))):we(Ge).concat(we(ei));var G,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Ge.forEach(n=>{var o=this._data_variables.filter(r=>r.key==n.key);o.length?o.forEach((r,l,y)=>{r.type=n.type,r.readonly=n.readonly,r.system=n.system}):this._data_variables.push(n)}))}getVariable(i){return i?we(this._data_variables.filter(n=>n.key==i)[0]||{}):{}}setVariable(i,n,o){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),o||(o=(this._data_variables.filter(l=>l.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var r=this._data_variables.filter(l=>l.key==i);r.length?r.forEach(function(l,y,m){l.value=n,l.type=o}):this._data_variables.push({key:i,value:n,type:o})}}getValue(i,n){if(!i)return"";var o=this._data_variables.filter(function(y){return y.key==i});if(o.length){var l,r=o[0]||{};switch(this.OnGetActionExecuting(r),n||(n=r.type||null),n){case"string":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":"string"==typeof r.value?r.value||"":r.value.toString().trim();break;case"number":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?0:"number"==typeof r.value?r.value||0:parseFloat(r.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(r.value)>=0?l=!1:"boolean"==typeof r.value?l=r.value:(l=(r.value+"").toLowerCase(),l="1"==r.value||"true"==r.value||"yes"==r.value||"dung"==r.value);break;case"audio-src":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${r.value}"></source></audio>`:"";break;case"video-src":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${r.value}"></source></video>`:"";break;case"img-src":l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value?`<img style="width:100%;vertical-align:middle;" src="${r.value}"/>`:"";break;default:l=[null,void 0,NaN,1/0].indexOf(r.value)>=0?"":r.value}return this.OnGetActionExecuted(r),l}return null}setValue(i,n,o){if(i){switch([null,void 0,NaN,1/0].indexOf(n)>=0&&(n=""),o||(o=(this._data_variables.filter(function(y){return y.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof n&&(n=n.toString().trim());break;case"number":"number"!=typeof n&&(n=parseFloat(n)||0);break;case"boolean":"string"==typeof n&&(n=n.toLowerCase()),"boolean"!=typeof n&&(n="1"==n||"true"==n||"yes"==n||"dung"==n)}var r=this._data_variables.filter(function(y){return y.key==i});if(r.length){var l=r[0];this.OnSetActionExecuting(l),l&&(l.value=n),this.OnSetActionExecuted(l)}}}getConditionAll(){return we(this._data_conditions.sort(function(i,n){return i.idx-n.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?we(this._data_conditions.filter(n=>n.variable==i||(n.variables||[]).indexOf(i)>=0).sort(function(n,o){return n.idx-o.idx})):{}}switchCondition(i,n,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),o.split(";").map(function(r){return n==r.trim()?1:0}).reduce(function(r,l){return r+l})>0):n==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof n&&(n=n.toLowerCase().trim()),0==o.split(";").map(function(r){return n==r.trim()?1:0}).reduce(function(r,l){return r+l})):n!=o;case">=":return n>=o;case"<=":return n<=o;case">":return n>o;case"<":return n<o;case"\u2208":return o=(o+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),o.split(";").map(function(r){return n.indexOf(r.trim())>=0?1:0}).reduce(function(r,l){return r+l})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),n=(n+"").toLowerCase().trim(),0==o.split(";").map(function(r){return n.indexOf(r.trim())>=0?1:0}).reduce(function(r,l){return r+l});default:return!1}}switchOperator(i,n,o){switch(i){case"+":return n+o;case"-":return n-o;case"*":return n*o;case"/":return n/o;case"=":return o;case"=!":return!o;case"==":return n==o;case"!=":return n!=o}}switchFormula(i,n){switch(i){case"sum":return n.reduce(function(r,l){return r+l});case"sub":return n.reduce(function(r,l){return r-l});case"pro":return n.reduce(function(r,l){return r*l});case"div":return n.reduce(function(r,l){return r/l});case"avg":var o=n.reduce(function(r,l){return r+l})/(n.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,n);case"max":return Math.max.apply(null,n);case"and":return n.reduce(function(r,l){return r&&l});case"or":return n.reduce(function(r,l){return r||l});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var n=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),n)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(n=>{switch(n.type){case"variable":return this.switchValueType_Condition(n)?0:1;case"variables":return 0==n.variables.map(o=>this.switchValueType_Condition(Object.assign(we(n),{variable:o}))?0:1).reduce(function(o,r){return o+r})?0:1;default:return 0}}).reduce((n,o)=>(null!=n?n:0)+(null!=o?o:0))}setValueOperators(i){for(var n of i)switch(n.type){case"variable":this.setValue(n.variable,this.getValueOperator(n));break;case"variables":for(var o of n.variables)this.setValue(o,this.getValueOperator(Object.assign(we(n),{variable:o})));break;case"slide":Le.J.runSlide(void 0,void 0,n.slide);break;case"node":{var r;(0,Te.GD)({id:n.node,nodeStatus:Le.J.nodeStatus,slideStatus:Le.J.slideStatus});let l=Le.J.findNode(n.node);null!=l&&null!==(r=l.interactive)&&void 0!==r&&r.click&&(0,Ne.J)(l,Le.J.nodeStatus,Le.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(n=>{n(i)})}}class oi{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,n,o){if(this._pointer_type=i,n)switch(i){case S.P.PEN:this._pen_type=n;break;case S.P.SHAPE:this._shape_type=n,o&&n===x.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case S.P.PEN:this._pen_type||(this._pen_type=Y.F.DRAW);break;case S.P.SHAPE:this._shape_type||(this._shape_type=x.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,n,o){this._fnChangePointerTypes.forEach(r=>r(i,n,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,n,o){this._fnChangePointerTypeTemps.forEach(r=>r(i,n,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,n,o){this._fnChangePenTypes.forEach(r=>r(i,n,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,n,o){this._fnChangeShapeTypes.forEach(r=>r(i,n,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,n,o){this._fnChangePolygonTypes.forEach(r=>r(i,n,o))}set onchange(i){this._fnChanges.push(i)}change(i,n,o){this._fnChanges.forEach(r=>r(i,n,o))}}const Rt=new class hi{constructor(){this._container="",this._svg="",this._screen=se.prototype,this._data=Vt.prototype,this._dataSelect=Mt.prototype,this._slide=kt.prototype,this._history=ae.prototype,this._attribute=xe.prototype,this._pointer=oi.prototype,this._variable=ai.prototype,this._data=new Vt,this._dataSelect=new Mt,this._slide=new kt,this._history=new ae,this._attribute=new xe,this._pointer=new oi,this._variable=new ai,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,variable:this._variable.get,resources:this._data.getResource,fonts:this._data.getFonts,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,n,o,r,l;this._screen.screen=(i=jQuery(this._container).offset(),n=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(r=null==i?void 0:i.left)&&void 0!==r?r:0,y:null!==(l=null==i?void 0:i.top)&&void 0!==l?l:0},width:null!=n?n:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new se,(G=>{new b.cR(G.container,G.target);var i=(r,l,y,m)=>{switch(r){case S.P.POINTER:jQuery(G.target).css({cursor:"auto"});break;case S.P.HAND:m?jQuery(G.target).css({cursor:"grabbing"}):jQuery(G.target).css({cursor:"grab"});break;case S.P.PEN:switch(l){case Y.F.DRAW:jQuery(G.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case Y.F.HIGHTLIGH:jQuery(G.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case S.P.ERASER:jQuery(G.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case S.P.SHAPE:jQuery(G.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case S.P.TEXT:case S.P.FOREIGNOBJECT:jQuery(G.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};Rt.pointer.onchange=(r,l,y)=>{i(r,l)},jQuery(G.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",r=>{i(Rt.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",r=>{i(Rt.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",r=>{r.ctrlKey&&r.preventDefault()},{passive:!1}),jQuery(G.container).off("wheel.icdt-init").on("wheel.icdt-init",r=>{var l;r.preventDefault();let y=null!==(l=r.originalEvent)&&void 0!==l?l:r;if(!y.deltaX&&y.deltaY!=Math.floor(y.deltaY)||y.ctrlKey){var m=Rt.screen.scale;Rt.screen.scaleTo(m-.04*m*(y.deltaY>0?1:-1),(0,st.D)({x:r.clientX,y:r.clientY},1,{x:0,y:0},Rt.screen.offset))}else Rt.screen.move(Rt.screen.dislocation,{x:-y.deltaX,y:-y.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{Rt.screen.actived=!!jQuery(r.target).parents(Rt.container).length}),jQuery(G.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",r=>{}),jQuery(G.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",r=>{Rt.pointer.pointer_type_temp==S.P.HAND&&(Rt.pointer.pointer_type_temp=S.P.POINTER)}),jQuery(G.container).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{0==r.button&&(G.container.includes("#")&&G.container.includes(r.target.getAttribute("id"))||G.container.includes(".")&&G.container.includes(r.target.getAttribute("class"))||G.container.includes(r.target.nodeName))&&(Rt.pointer.pointer_type_temp||Rt.pointer.pointer_type)===S.P.POINTER&&(Rt.dataSelect.ids=[])}),jQuery(G.container).off("touchmove.icdt-init").on("touchmove.icdt-init",r=>{r.preventDefault()});const n=r=>{switch(Rt.pointer.pointer_type_temp||Rt.pointer.pointer_type){case S.P.POINTER:z(r);break;case S.P.HAND:(G=>{(0,gt.I)(G,new F,1,{x:0,y:0})})(r);break;case S.P.PEN:(0,pt.u)(r);break;case S.P.SHAPE:(G=>{var i=null;switch(Rt.pointer.shape_type){case x.h.CIRCLE:i=new J;break;case x.h.ELLIPSE:i=new q;break;case x.h.LINE:i=new _;break;case x.h.RECT:i=new B;break;case x.h.POLYGON:var n;i=new ot(null===(n=it.find(o=>o.type==Rt.pointer.polygon_type))||void 0===n?void 0:n.ratios);break;case x.h.FOREIGNOBJECT:i=new ct;break;case x.h.IMAGE:i=new ce;break;case x.h.TEXT:case x.h.PATH:i=new Lt}i&&(0,gt.I)(G,i)})(r);break;case S.P.FOREIGNOBJECT:(G=>{(0,gt.I)(G,new ct)})(r);break;case S.P.IMAGE:(G=>{(0,gt.I)(G,new ce)})(r);break;case S.P.TEXT:(G=>{(0,gt.I)(G,new K)})(r);break;case S.P.ERASER:(G=>{(0,gt.I)(G,new Xt)})(r);break;case S.P.INDEX:(0,E.h)(r)}};let o=!1;jQuery(G.target).off("touchstart.icdt-init").on("touchstart.icdt-init",r=>{o=!0,n({touchEvent:r})}),jQuery(G.target).off("mousedown.icdt-init").on("mousedown.icdt-init",r=>{if(1!=r.button){if(o)return void(o=!1);n({mouseEvent:r})}}),G.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",r=>{Rt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,It.K)(r))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",r=>{Rt.screen.actived&&((r.ctrlKey||r.altKey)&&(r.stopPropagation(),r.preventDefault()),(0,It.K)(r))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(he,Kt,v)=>{v.d(Kt,{h:()=>A,y:()=>O});var S=v(7873),b=v(6611),lt=v(9506),N=v(1308),gt=v(5970);const A=F=>{var x,nt,it,wt;let f=(null===(x=F.mouseEvent)||void 0===x?void 0:x.target)||(null===(nt=F.touchEvent)||void 0===nt?void 0:nt.target),J=(null==f?void 0:f.getAttribute("id"))||"",I=null==f?void 0:f.nodeName,q=jQuery(f).parents("g[id]").attr("id")||"";if(![S.F.INDEX_GROUP].includes(q))if(null!==(it=F.mouseEvent)&&void 0!==it&&it.altKey||null!==(wt=F.touchEvent)&&void 0!==wt&&wt.altKey||!J||J.match(/[^0-9]/)||!b.L.dataSelect.nodeName.includes(I)){var rt;b.L.dataSelect.ids.length&&(b.L.dataSelect.ids=[]),(0==(null===(rt=F.mouseEvent)||void 0===rt?void 0:rt.button)||F.touchEvent)&&((F,x)=>{let J=(0,gt.RY)(S.F.SCAN_GROUP,"g"),I=(0,lt.CE)(0,0,1,1);(0,gt.xJ)(J,I),((F,x,nt,it)=>{(0,N.I)(F,{start:J=>{},move:(J,I)=>{((J,I,q,rt)=>{x=(0,lt.CE)(J,I,q,rt),(0,gt.xJ)(nt,x)})(I[0][0],I[0][1],J.x,J.y)},end:(J,I)=>{null==nt||nt.remove(),b.L.dataSelect.ids=b.L.data.getNodeInArea(Math.min(I[0][0],J.x),Math.min(I[0][1],J.y),Math.max(I[0][0],J.x),Math.max(I[0][1],J.y)),it(b.L.dataSelect.nodes)}})})(F,I,J,x)})(F,z)}else{var B,Q;let ot=parseFloat(J||"0");b.L.dataSelect.ids=null!==(B=F.mouseEvent)&&void 0!==B&&B.shiftKey||null!==(Q=F.touchEvent)&&void 0!==Q&&Q.shiftKey?[ot].concat(b.L.dataSelect.ids).filter((_,yt,jt)=>jt.indexOf(_)==yt):[ot],z(b.L.dataSelect.nodes)}},z=F=>{var x,nt;let it=1;var wt,f;if(F.length&&(it=Math.max.apply(null,null!==(wt=null===(f=b.L.data.slide)||void 0===f||null===(f=f.svg)||void 0===f?void 0:f.nodes.map(I=>{var q;return null!==(q=I.idx)&&void 0!==q?q:0}))&&void 0!==wt?wt:[0])+1),1==F.length)F[0].idx||(F[0].idx=it,F[0].time=0);else if(F.length>=0){let I=F.map(rt=>{var B;return null!==(B=rt.idx)&&void 0!==B?B:0}).filter(rt=>rt>0),q=I.length?Math.min.apply(null,I):it;F.forEach(rt=>{var B;rt.idx=q,rt.time=null!==(B=rt.time)&&void 0!==B?B:0})}let J=(0,gt.RY)(S.F.INDEX_GROUP,"g");(0,gt.IA)(J,null!==(x=null===(nt=b.L.data.slide)||void 0===nt||null===(nt=nt.svg)||void 0===nt?void 0:nt.nodes)&&void 0!==x?x:[])},O=F=>{var x,nt,it;null!=F&&null!==(x=F.svg)&&void 0!==x&&x.nodes&&F.svg.nodes.forEach(f=>{f.idx=0,f.time=null});let wt=(0,gt.RY)(S.F.INDEX_GROUP,"g");(0,gt.IA)(wt,null!==(nt=null===(it=b.L.data.slide)||void 0===it||null===(it=it.svg)||void 0===it?void 0:it.nodes)&&void 0!==nt?nt:[])}},7135:(he,Kt,v)=>{v.d(Kt,{K:()=>x,X:()=>F});var S=v(6195),b=v(1477),lt=v(3603),N=v(6611),gt=v(1026),T=v(9841),c=v(2492),A=v(6752),z=v(5483);const F=new class O{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:b.r.Escape,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:b.r.Delete,fn:()=>{N.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:b.r.Space,fn:()=>{N.L.pointer.pointer_type_temp=lt.P.HAND}},this.onchange={type:"keyup",key:b.r.Space,fn:()=>{N.L.pointer.pointer_type_temp=lt.P.POINTER}},this.onchange={type:"keydown",key:b.r.ArrowLeft,fn:()=>{N.L.dataSelect.ids.length||N.L.data.backSlide()}},this.onchange={type:"keydown",key:b.r.ArrowRight,fn:()=>{N.L.dataSelect.ids.length||N.L.data.nextSlide()}},this.onchange={type:"keydown",key:b.r.PageDown,fn:()=>{N.L.dataSelect.ids.length||N.L.data.backSlide()}},this.onchange={type:"keydown",key:b.r.PageUp,fn:()=>{N.L.dataSelect.ids.length||N.L.data.nextSlide()}},this.onchange={type:"keydown",key:b.r.ArrowLeft,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(it=>{(0,A.ei)(it,(0,c.z)(it.size.x-(0,T.$)(1)))}),(0,z.D)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.r.ArrowRight,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(it=>{(0,A.ei)(it,(0,c.z)(it.size.x+(0,T.$)(1)))}),(0,z.D)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.r.ArrowUp,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(it=>{(0,A.ZF)(it,(0,c.z)(it.size.y-(0,T.$)(1)))}),(0,z.D)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.r.ArrowDown,fn:()=>{N.L.dataSelect.ids.length&&(N.L.dataSelect.nodes.forEach(it=>{(0,A.ZF)(it,(0,c.z)(it.size.y+(0,T.$)(1)))}),(0,z.D)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.r.Digit1,fn:it=>{it.shiftKey&&(N.L.reloadView(),N.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:b.r.Digit0,fn:it=>{it.ctrlKey&&(N.L.screen.zoomTo=100)}},this.onchange={type:"keydown",key:b.r.Equal,fn:it=>{it.ctrlKey&&N.L.screen.zoomIn()}},this.onchange={type:"keydown",key:b.r.Minus,fn:it=>{it.ctrlKey&&N.L.screen.zoomOut()}},this.onchange={type:"keydown",key:b.r.KeyA,fn:it=>{it.ctrlKey&&(N.L.dataSelect.ids=N.L.data.getNodeAll(),(0,z.D)(N.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.r.KeyC,fn:it=>{if(it.ctrlKey){let wt=N.L.dataSelect.nodes;wt&&(0,S.IB)({params:{type:"nodes",nodes:wt}})}}},this.onchange={type:"keydown",key:b.r.KeyV,fn:it=>{it.ctrlKey&&(0,S.A9)({callback:wt=>{var f,J;"nodes"==(null==wt?void 0:wt.type)&&null!=wt&&null!==(f=wt.nodes)&&void 0!==f&&f.length&&(null==wt||null===(J=wt.nodes)||void 0===J||J.forEach(I=>{it.shiftKey||N.L.data.findNode(I.id).id&&(I.size.x+=16,I.size.y+=16),I.id=Math.ceil(1e9*Math.random()),N.L.data.node=I}),(0,gt.t)(N.L.data.slide))}})}},this.onchange={type:"keydown",key:b.r.KeyZ,fn:it=>{it.ctrlKey&&it.shiftKey?N.L.history.redo():it.ctrlKey&&N.L.history.undo()}},this.onchange={type:"keydown",key:b.r.BracketLeft,fn:it=>{it.ctrlKey&&it.shiftKey?N.L.data.sendToBack(N.L.dataSelect.ids):it.ctrlKey?N.L.data.sendToBackStep(N.L.dataSelect.ids,-2):N.L.data.sendToBackArea(N.L.dataSelect.ids)}},this.onchange={type:"keydown",key:b.r.BracketRight,fn:it=>{it.ctrlKey&&it.shiftKey?N.L.data.bringToFront(N.L.dataSelect.ids):it.ctrlKey?N.L.data.bringToFrontStep(N.L.dataSelect.ids,1):N.L.data.bringToFrontArea(N.L.dataSelect.ids)}}}set onchange(it){let wt=this._fnChanges.find(f=>f.eventType==it.type&&f.eventKey==it.key);wt?wt.fns.push(it.fn):this._fnChanges.push({eventType:it.type,eventKey:it.key,fns:[it.fn]})}change(it,wt,f){var J;null===(J=this._fnChanges.find(I=>I.eventType==it&&I.eventKey==wt))||void 0===J||J.fns.forEach(I=>I(f))}},x=nt=>{F.change(nt.type,nt.keyCode||nt.which||nt.charCode||0,nt)}},669:(he,Kt,v)=>{v.d(Kt,{O:()=>A});var S=v(6407),b=v(5970),lt=v(1131),N=v(9841),gt=v(7873),T=v(6611),c=v(1281);class A{constructor(O,F){var x,nt;let it={stroke:"#FF0000",strokeWidth:(0,N.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,N.$)(8)},{element:wt}=(0,S.X)(Math.ceil(1e9*Math.random()),{size:F});window.document.getElementById(gt.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(Q=>null==Q?void 0:Q.remove()),window.document.getElementById(gt.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(Q=>null==Q?void 0:Q.remove()),null===(x=window.document.getElementById(gt.F.INTERACTIVE_GROUP))||void 0===x||x.appendChild(wt);var I=Q=>{if(!Q.length)return;let ot=[];if(1==Q.length){var W;let{size:_}=null!==(W=null!=O?O:T.L.dataSelect.nodes[0])&&void 0!==W?W:{};if(!_)return;ot=[[_.x+_.width/2,_.y+_.height/2],Q[0]]}else ot=[...Q];rt(ot),q(ot[0],"start"),q(ot[ot.length-1],"end")},q=(Q,ot)=>{Q&&((W=>{let{element:_}=(0,c.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==ot?"#FF0000":"#00BA00",strokeWidth:(0,N.$)(1)},size:{x:Q[0]-5,y:Q[1]-5,width:10,height:10}});null===(W=window.document.getElementById(gt.F.INTERACTIVE_GROUP))||void 0===W||W.prepend(_)})(),((W,_)=>{let{size:yt}=null!==(W=null!=O?O:T.L.dataSelect.nodes[0])&&void 0!==W?W:{};if(!yt)return;let jt=[[Q[0]-yt.width/2,Q[1]-yt.height/2],[Q[0]+yt.width/2,Q[1]-yt.height/2],[Q[0]+yt.width/2,Q[1]+yt.height/2],[Q[0]-yt.width/2,Q[1]+yt.height/2],[Q[0]-yt.width/2,Q[1]-yt.height/2]],{element:Lt}=(0,S.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,N.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,N.$)(8)},size:{x:0,y:0,width:10,height:10,points:jt}});null===(_=window.document.getElementById(gt.F.INTERACTIVE_GROUP))||void 0===_||_.prepend(Lt)})())},rt=Q=>{let W=lt.n8j().x(_=>_[0]).y(_=>_[1]).curve(lt.qrM)(Q);wt.setAttribute("d",W)};(0,b.tD)(wt,it),I(null!==(nt=null==F?void 0:F.points)&&void 0!==nt?nt:[]);let B="";return{start:Q=>{B=`M ${Q.x} ${Q.y} L ${Q.x} ${Q.y}`},move:(Q,ot)=>{B+=` ${Q.x} ${Q.y}`,wt.setAttribute("d",B)},end:(Q,ot)=>{I(ot),ot.length&&(window.interactivePoints=ot)}}}}},4979:(he,Kt,v)=>{v.d(Kt,{z:()=>it,u:()=>nt});var S=v(7873),b=v(2409),lt=v(6611),N=v(1308),gt=v(5970),T=v(1131),c=v(6407),A=v(1999),z=v(4896);class O{constructor(){let f={stroke:lt.L.attribute.stroke,strokeWidth:lt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:J,element:I,attribute:q,size:rt}=(0,c.X)(Math.ceil(1e9*Math.random()),{attribute:f});(0,gt.tD)(I,q);let B="",Q="";return{start:W=>{B=`M ${W.x} ${W.y} L ${W.x} ${W.y}`},move:(W,_)=>{((W,_)=>{B+=` ${W} ${_}`,I.setAttribute("d",B)})(W.x,W.y)},end:(W,_)=>{var yt;_.length>=3?(Q=null!==(yt=T.n8j().x(et=>et[0]).y(et=>et[1]).curve(T.qrM)(_))&&void 0!==yt?yt:"",I.setAttribute("d",Q)):I.setAttribute("d",B);let jt=(0,z.CS)(Q||B),{minX:Lt,minY:Pt,maxX:ct,maxY:xt}=(0,z.lP)(jt);rt.x=Lt,rt.y=Pt,rt.width=ct-Lt||1,rt.height=xt-Pt||1,rt.ratioMaps=(0,z.nf)(rt,jt),lt.L.data.node=Object.assign({id:J,type:A.h.PATH,name:"Path"},{size:rt,attribute:q})}}}}class F{constructor(){let f={stroke:lt.L.attribute.stroke,strokeOpacity:.4,strokeWidth:lt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:J,element:I,attribute:q,size:rt}=(0,c.X)(Math.ceil(1e9*Math.random()),{attribute:f});(0,gt.tD)(I,q);let B="";return{start:W=>{B=`M ${W.x} ${W.y} L ${W.x} ${W.y}`},move:(W,_)=>{((W,_)=>{B+=` ${W} ${_}`,I.setAttribute("d",B)})(W.x,W.y)},end:(W,_)=>{let yt=(0,z.CS)(B),{minX:jt,minY:Lt,maxX:Pt,maxY:ct}=(0,z.lP)(yt);rt.x=jt,rt.y=Lt,rt.width=Pt-jt||1,rt.height=ct-Lt||1,rt.ratioMaps=(0,z.nf)(rt,yt),lt.L.data.node=Object.assign({id:J,type:A.h.PATH,name:"Path"},{size:rt,attribute:q})}}}}var x=v(669);const nt=wt=>{switch(lt.L.pointer.pen_type){case b.F.DRAW:(0,N.I)(wt,new O);break;case b.F.HIGHTLIGH:(0,N.I)(wt,new F);break;case b.F.INTERACTIVE:it(wt)}},it=wt=>{var f,J;let I=(0,gt.RY)(S.F.INTERACTIVE_GROUP,"g"),q=null!==(f=null===(J=lt.L.data.slide)||void 0===J||null===(J=J.svg)||void 0===J?void 0:J.viewBox)&&void 0!==f?f:(()=>{let{width:rt,height:B}=lt.L.screen.get;return{x:0,y:0,width:rt,height:B}})();(0,gt.KP)(I,q),wt&&(0,N.I)(wt,new x.O)}},5483:(he,Kt,v)=>{v.d(Kt,{D:()=>f});var S=v(7873),b=v(6611),lt=v(9506),N=v(1308),gt=v(5970),T=v(2492);const z=(J,I,q,rt,B)=>{let{x:Q,y:ot,width:W,height:_}=q;0==W&&(W=1),0==_&&(_=1);let yt=rt.map(et=>Object.assign({},et.size)),Lt=[],xt=!1;(0,N.I)(J,{start:et=>{rt.forEach(et=>{let{id:It,size:pt,attribute:ft}=et;Lt.push({id:It,type:"size",from:JSON.parse(JSON.stringify({id:It,size:pt,attribute:ft}))})})},move:(et,It,pt)=>{((et,It,pt,ft,j)=>{let Gt=pt-et,D=ft-It;(()=>{let s,P=(W||1)/(_||1);switch(I){case"rect-center":s=null!=j&&j.shiftKey?Math.abs(pt-et)>=Math.abs(ft-It)?{x:Q+pt-et,y:ot,width:W,height:_}:{x:Q,y:ot+ft-It,width:W,height:_}:{x:Q+pt-et,y:ot+ft-It,width:W,height:_};break;case"rect-top-left":s=null!=j&&j.shiftKey&&null!=j&&j.altKey?P>=1?{x:Q+(pt-et),y:ot+(pt-et)/P,width:W-2*(pt-et),height:_-2*(pt-et)/P}:{x:Q+(ft-It)*P,y:ot+(ft-It),width:W-2*(ft-It)*P,height:_-2*(ft-It)}:null!=j&&j.shiftKey?P>=1?{x:Q+(pt-et),y:ot+(pt-et)/P,width:W-(pt-et),height:_-(pt-et)/P}:{x:Q+(ft-It)*P,y:ot+(ft-It),width:W-(ft-It)*P,height:_-(ft-It)}:null!=j&&j.altKey?{x:Q+(pt-et),y:ot+(ft-It),width:W-2*(pt-et),height:_-2*(ft-It)}:{x:Q+(pt-et),y:ot+(ft-It),width:W-(pt-et),height:_-(ft-It)};break;case"rect-top-right":s=null!=j&&j.shiftKey&&null!=j&&j.altKey?P>=1?{x:Q-(pt-et),y:ot-(pt-et)/P,width:W+2*(pt-et),height:_+2*(pt-et)/P}:{x:Q+(ft-It)*P,y:ot+(ft-It),width:W-2*(ft-It)*P,height:_-2*(ft-It)}:null!=j&&j.shiftKey?P>=1?{x:Q,y:ot-(pt-et)/P,width:W+(pt-et),height:_+(pt-et)/P}:{x:Q,y:ot+(ft-It),width:W-(ft-It)*P,height:_-(ft-It)}:null!=j&&j.altKey?{x:Q-(pt-et),y:ot+(ft-It),width:W+2*(pt-et),height:_-2*(ft-It)}:{x:Q,y:ot+(ft-It),width:W+(pt-et),height:_-(ft-It)};break;case"rect-bottom-left":s=null!=j&&j.shiftKey&&null!=j&&j.altKey?P>=1?{x:Q+(pt-et),y:ot+(pt-et)/P,width:W-2*(pt-et),height:_-2*(pt-et)/P}:{x:Q-(ft-It)*P,y:ot-(ft-It),width:W+2*(ft-It)*P,height:_+2*(ft-It)}:null!=j&&j.shiftKey?P>=1?{x:Q+(pt-et),y:ot,width:W-(pt-et),height:_-(pt-et)/P}:{x:Q-(ft-It)*P,y:ot,width:W+(ft-It)*P,height:_+(ft-It)}:null!=j&&j.altKey?{x:Q+(pt-et),y:ot-(ft-It),width:W-2*(pt-et),height:_+2*(ft-It)}:{x:Q+(pt-et),y:ot,width:W-(pt-et),height:_+(ft-It)};break;case"rect-bottom-right":s=null!=j&&j.shiftKey&&null!=j&&j.altKey?P>=1?{x:Q-(pt-et),y:ot-(pt-et)/P,width:W+2*(pt-et),height:_+2*(pt-et)/P}:{x:Q-(ft-It)*P,y:ot-(ft-It),width:W+2*(ft-It)*P,height:_+2*(ft-It)}:null!=j&&j.shiftKey?P>=1?{x:Q,y:ot,width:W+(pt-et),height:_+(pt-et)/P}:{x:Q,y:ot,width:W+(ft-It)*P,height:_+(ft-It)}:null!=j&&j.altKey?{x:Q-(pt-et),y:ot-(ft-It),width:W+2*(pt-et),height:_+2*(ft-It)}:{x:Q,y:ot,width:W+(pt-et),height:_+(ft-It)};break;case"rect-top":s=null!=j&&j.shiftKey?{x:Q+D/2*P,y:ot+D,width:W-D*P,height:_-D}:null!=j&&j.altKey?{x:Q,y:ot+D,width:W,height:_-2*D}:{x:Q,y:ot+D,width:W,height:_-D};break;case"rect-bottom":s=null!=j&&j.shiftKey?{x:Q-D/2*P,y:ot,width:W+D*P,height:_+D}:null!=j&&j.altKey?{x:Q,y:ot-D,width:W,height:_+2*D}:{x:Q,y:ot,width:W,height:_+D};break;case"rect-left":s=null!=j&&j.shiftKey?{x:Q+Gt,y:ot+Gt/2/P,width:W-Gt,height:_-Gt/P}:null!=j&&j.altKey?{x:Q+Gt,y:ot,width:W-2*Gt,height:_}:{x:Q+Gt,y:ot,width:W-Gt,height:_};break;case"rect-right":s=null!=j&&j.shiftKey?{x:Q,y:ot-Gt/2/P,width:W+Gt,height:_+Gt/P}:null!=j&&j.altKey?{x:Q-Gt,y:ot,width:W+2*Gt,height:_}:{x:Q,y:ot,width:W+Gt,height:_};break;default:s={x:Q+pt-et,y:ot+ft-It,width:W,height:_}}s.width<=0&&(s.width=1),s.height<=0&&(s.height=1),s.x=(0,T.z)(s.x,1),s.y=(0,T.z)(s.y,1),s.width=(0,T.z)(s.width,1),s.height=(0,T.z)(s.height,1),Object.assign(q,s),(0,gt.D_)(B,rt,s),(()=>{let w=Q-s.x,H=ot-s.y,tt=(s.width-W)/W,zt=(s.height-_)/_;rt.forEach((Zt,Yt)=>{let Qt=yt[Yt],ht=ot-Qt.y,Xt={x:(0,T.z)(Qt.x-(w+(Q-Qt.x)*tt),100),y:(0,T.z)(Qt.y-(H+ht*zt),100),width:(0,T.z)(Qt.width+Qt.width*tt,100),height:(0,T.z)(Qt.height+Qt.height*zt,100)},{id:M,type:d,size:K,attribute:at}=Zt;Object.assign(K,Xt),Object.assign(at,(0,lt.xW)(d,K,at)),(0,gt.tD)(window.document.getElementById(M),at)})})()})()})(It[0][0],It[0][1],et.x,et.y,pt),xt=!0},end:(et,It)=>{xt&&(rt.forEach(et=>{let{id:It,size:pt,attribute:ft}=et,j=Lt.find(Gt=>Gt.id==It);j&&(j.to=JSON.parse(JSON.stringify({id:It,size:pt,attribute:ft})))}),b.L.history.push(Lt))}})},x=(J,I,q,rt)=>{let xt,{id:B,type:Q,size:ot,attribute:W}=q,{x:_,y:yt,width:jt,height:Lt,ratios:Pt}=ot,ct=(jt||1)/(Lt||1),et=null,ft=!1;(0,N.I)(J,{start:Gt=>{et=JSON.parse(JSON.stringify({id:B,size:ot,attribute:W}))},move:(Gt,D,P)=>{((Gt,D,P,s,w)=>{let H=P-Gt,tt=s-D;switch(I){case"rect-center":xt=null!=w&&w.shiftKey?Math.abs(H)>=Math.abs(tt)?{x:_+H,y:yt,width:jt,height:Lt}:{x:_,y:yt+tt,width:jt,height:Lt}:{x:_+H,y:yt+tt,width:jt,height:Lt};break;case"rect-top-left":xt=null!=w&&w.shiftKey&&null!=w&&w.altKey?ct>=1?{x:_+H,y:yt+H/ct,width:jt-2*H,height:Lt-2*H/ct}:{x:_+tt*ct,y:yt+tt,width:jt-2*tt*ct,height:Lt-2*tt}:null!=w&&w.shiftKey?ct>=1?{x:_+H,y:yt+H/ct,width:jt-H,height:Lt-H/ct}:{x:_+tt*ct,y:yt+tt,width:jt-tt*ct,height:Lt-tt}:null!=w&&w.altKey?{x:_+H,y:yt+tt,width:jt-2*H,height:Lt-2*tt}:{x:_+H,y:yt+tt,width:jt-H,height:Lt-tt};break;case"rect-top-right":xt=null!=w&&w.shiftKey&&null!=w&&w.altKey?ct>=1?{x:_-H,y:yt-H/ct,width:jt+2*H,height:Lt+2*H/ct}:{x:_+tt*ct,y:yt+tt,width:jt-2*tt*ct,height:Lt-2*tt}:null!=w&&w.shiftKey?ct>=1?{x:_,y:yt-H/ct,width:jt+H,height:Lt+H/ct}:{x:_,y:yt+tt,width:jt-tt*ct,height:Lt-tt}:null!=w&&w.altKey?{x:_-H,y:yt+tt,width:jt+2*H,height:Lt-2*tt}:{x:_,y:yt+tt,width:jt+H,height:Lt-tt};break;case"rect-bottom-left":xt=null!=w&&w.shiftKey&&null!=w&&w.altKey?ct>=1?{x:_+H,y:yt+H/ct,width:jt-2*H,height:Lt-2*H/ct}:{x:_-tt*ct,y:yt-tt,width:jt+2*tt*ct,height:Lt+2*tt}:null!=w&&w.shiftKey?ct>=1?{x:_+H,y:yt,width:jt-H,height:Lt-H/ct}:{x:_-tt*ct,y:yt,width:jt+tt*ct,height:Lt+tt}:null!=w&&w.altKey?{x:_+H,y:yt-tt,width:jt-2*H,height:Lt+2*tt}:{x:_+H,y:yt,width:jt-H,height:Lt+tt};break;case"rect-bottom-right":xt=null!=w&&w.shiftKey&&null!=w&&w.altKey?ct>=1?{x:_-H,y:yt-H/ct,width:jt+2*H,height:Lt+2*H/ct}:{x:_-tt*ct,y:yt-tt,width:jt+2*tt*ct,height:Lt+2*tt}:null!=w&&w.shiftKey?ct>=1?{x:_,y:yt,width:jt+H,height:Lt+H/ct}:{x:_,y:yt,width:jt+tt*ct,height:Lt+tt}:null!=w&&w.altKey?{x:_-H,y:yt-tt,width:jt+2*H,height:Lt+2*tt}:{x:_,y:yt,width:jt+H,height:Lt+tt};break;case"rect-top":xt=null!=w&&w.shiftKey?{x:_+tt/2*ct,y:yt+tt,width:jt-tt*ct,height:Lt-tt}:null!=w&&w.altKey?{x:_,y:yt+tt,width:jt,height:Lt-2*tt}:{x:_,y:yt+tt,width:jt,height:Lt-tt};break;case"rect-bottom":xt=null!=w&&w.shiftKey?{x:_-tt/2*ct,y:yt,width:jt+tt*ct,height:Lt+tt}:null!=w&&w.altKey?{x:_,y:yt-tt,width:jt,height:Lt+2*tt}:{x:_,y:yt,width:jt,height:Lt+tt};break;case"rect-left":xt=null!=w&&w.shiftKey?{x:_+H,y:yt+H/2/ct,width:jt-H,height:Lt-H/ct}:null!=w&&w.altKey?{x:_+H,y:yt,width:jt-2*H,height:Lt}:{x:_+H,y:yt,width:jt-H,height:Lt};break;case"rect-right":xt=null!=w&&w.shiftKey?{x:_,y:yt-H/2/ct,width:jt+H,height:Lt+H/ct}:null!=w&&w.altKey?{x:_-H,y:yt,width:jt+2*H,height:Lt}:{x:_,y:yt,width:jt+H,height:Lt};break;default:xt=I.match(/^point-(\d+)/)?{x:_,y:yt,width:jt,height:Lt}:{x:_+H,y:yt+tt,width:jt,height:Lt}}xt.width<=0&&(xt.width=1),xt.height<=0&&(xt.height=1);let zt=I.match(/^point-(\d+)/);if(zt){let Yt=parseInt(zt[1]);if("number"==typeof Yt){var Zt;xt.ratios=null==Pt?void 0:Pt.map((Xt,M)=>M==Yt?[(0,T.z)(Xt[0]+(0==xt.width?0:H/xt.width),100),(0,T.z)(Xt[1]+(0==xt.height?0:tt/xt.height),100)]:Xt);let Qt=nt(xt.x,xt.y,xt.width,xt.height,null!==(Zt=xt.ratios)&&void 0!==Zt?Zt:[]),Nt=wt(Qt),ht=it(Nt.x,Nt.y,Nt.width,Nt.height,Qt);xt={x:Nt.x,y:Nt.y,width:Nt.width,height:Nt.height,ratios:ht}}}xt.x=(0,T.z)(xt.x,1),xt.y=(0,T.z)(xt.y,1),xt.width=(0,T.z)(xt.width,1),xt.height=(0,T.z)(xt.height,1),Object.assign(ot,xt),Object.assign(W,(0,lt.xW)(Q,ot,W)),(0,gt.tD)(window.document.getElementById(B),W),(0,gt.AE)(rt,q)})(D[0][0],D[0][1],Gt.x,Gt.y,P),ft=!0},end:(Gt,D)=>{ft&&et&&b.L.history.push([{type:"size",from:et,to:JSON.parse(JSON.stringify({id:B,size:ot,attribute:W}))}])}})},nt=(J,I,q,rt,B)=>B.map(Q=>[J+q*Q[0],I+rt*Q[1]]),it=(J,I,q,rt,B)=>B.map(Q=>[0==q?0:(0,T.z)((Q[0]-J)/q,100),0==rt?0:(0,T.z)((Q[1]-I)/rt,100)]),wt=J=>{let I=[],q=[];J.map(W=>{I.push(W[0]),q.push(W[1])});let rt=Math.min.apply(null,I),B=Math.min.apply(null,q);return{x:rt,y:B,width:Math.max.apply(null,I)-rt||1,height:Math.max.apply(null,q)-B||1}},f=J=>{J.length>1?(J=>{let I=999999,q=999999,rt=-999999,B=-999999;J.forEach(W=>{I=Math.min(I,W.size.x),q=Math.min(q,W.size.y),rt=Math.max(rt,W.size.x+W.size.width),B=Math.max(B,W.size.y+W.size.height)});let Q=(0,gt.RY)(S.F.RESIZE_GROUP,"g"),ot=(0,lt.CE)(I,q,rt,B);ot.x=(0,T.z)(ot.x,100),ot.y=(0,T.z)(ot.y,100),ot.width=(0,T.z)(ot.width,100),ot.height=(0,T.z)(ot.height,100),(0,gt.D_)(Q,J,ot).forEach(W=>{((J,I,q,rt,B)=>{let Q=!1;null==J||J.addEventListener("touchstart",ot=>{Q=!0,z({touchEvent:ot},I,q,rt,B)}),null==J||J.addEventListener("mousedown",ot=>{if(0==ot.button){if(Q)return void(Q=!1);z({mouseEvent:ot},I,q,rt,B)}})})(W.element,W.posType,ot,J,Q)})})(J):1==J.length&&(J=>{let I=(0,gt.RY)(S.F.RESIZE_GROUP,"g");if(J.length>0){let q=J[0];(0,gt.AE)(I,q).forEach(rt=>{((J,I,q,rt)=>{let B=!1;null==J||J.addEventListener("touchstart",Q=>{B=!0,x({touchEvent:Q},I,q,rt)}),null==J||J.addEventListener("mousedown",Q=>{if(0==Q.button){if(B)return void(B=!1);x({mouseEvent:Q},I,q,rt)}})})(rt.element,rt.posType,q,I)})}})(J)}},1026:(he,Kt,v)=>{v.d(Kt,{$:()=>I,t:()=>J});var S=v(7873),b=v(1281),lt=v(6153),N=v(3477),gt=v(7945),T=v(3069),c=v(3073),A=v(1999),z=v(6407),O=v(6847),F=v(745),x=v(9173),nt=v(6611),it=v(5970),wt=v(4669),f=v(3617);const J=(q,rt,B)=>{var Q;if(rt&&!(null!=B?B:window).document.getElementById(rt))return;if(rt){let W=(null!=B?B:window).document.getElementById(rt);jQuery(W).find("#"+S.F.BACKGROUND_GROUP).empty();let _=(0,it.RY)(S.F.BACKGROUND_GROUP,"g",void 0,W);(0,it.I6)(_,q)}else{jQuery(nt.L.target).find("#"+S.F.BACKGROUND_GROUP).empty();let W=(0,it.RY)(S.F.BACKGROUND_GROUP,"g",void 0,nt.L.target);(0,it.I6)(W,q)}let ot=(W,_)=>{_=rt&&_?`${rt}-${_}`:null!=rt?rt:_,null==W||W.forEach(yt=>{let jt=rt?`${rt}-${yt.id}`:yt.id;var Lt;if(yt.isdeleted)null===(Lt=(null!=B?B:window).document.getElementById(jt))||void 0===Lt||Lt.remove();else switch(yt.type){case A.h.GROUP:(0,c.v)(jt,{},_?(null!=B?B:window).document.getElementById(_):null),ot(yt.nodes,yt.id);break;case A.h.CIRCLE:(0,b.K)(jt,{size:yt.size,attribute:yt.attribute},_?(null!=B?B:window).document.getElementById(_):null);break;case A.h.ELLIPSE:(0,lt.W)(jt,{size:yt.size,attribute:yt.attribute},_?(null!=B?B:window).document.getElementById(_):null);break;case A.h.LINE:(0,T.q)(jt,{size:yt.size,attribute:yt.attribute},_?(null!=B?B:window).document.getElementById(_):null);break;case A.h.RECT:(0,gt.a)(jt,{size:yt.size,attribute:yt.attribute},_?(null!=B?B:window).document.getElementById(_):null);break;case A.h.POLYGON:(0,N.u)(jt,{size:yt.size,attribute:yt.attribute},_?(null!=B?B:window).document.getElementById(_):null);break;case A.h.POLYLINE:(0,f.E)(jt,{size:yt.size,attribute:yt.attribute},_?(null!=B?B:window).document.getElementById(_):null);break;case A.h.FOREIGNOBJECT:(0,F.$)(jt,{size:yt.size,attribute:yt.attribute,style:yt.style,source:yt.source},_?(null!=B?B:window).document.getElementById(_):null);break;case A.h.IMAGE:(0,x.B)(jt,{size:yt.size,attribute:yt.attribute,source:yt.source},_?(null!=B?B:window).document.getElementById(_):null);break;case A.h.TEXT:(0,O.L)(jt,{size:yt.size,attribute:yt.attribute,source:yt.source},_?(null!=B?B:window).document.getElementById(_):null);break;case A.h.TSPAN:(0,wt.M)(jt,{size:yt.size,attribute:yt.attribute,source:yt.source},_?(null!=B?B:window).document.getElementById(_):null);break;case A.h.PATH:(0,z.X)(jt,{size:yt.size,attribute:yt.attribute},_?(null!=B?B:window).document.getElementById(_):null)}})};ot(null==q||null===(Q=q.svg)||void 0===Q?void 0:Q.nodes)},I=(q,rt)=>{var B;if(rt&&!window.document.getElementById(rt))return;let Q=(ot,W)=>{W=W?`${rt}-${W}`:rt,null==ot||ot.forEach(_=>{jQuery("#"+(rt?`${rt}-${_.id}`:_.id)).appendTo(W?window.document.getElementById(W):nt.L.target),_.type==A.h.GROUP&&Q(_.nodes,_.id)})};Q(null==q||null===(B=q.svg)||void 0===B?void 0:B.nodes)}},1281:(he,Kt,v)=>{v.d(Kt,{K:()=>gt});var S=v(1999),b=v(6611),lt=v(9506),N=v(5970);const gt=(T,c,A)=>{let z=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},O=(null==c?void 0:c.attribute)||{fill:b.L.attribute.fill,stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(O,(0,lt.xW)(S.h.CIRCLE,z,O)),{nodeId:T,element:(0,N.fn)(T,S.h.CIRCLE,"circle",{size:z,attribute:O},A),size:z,attribute:O}}},6153:(he,Kt,v)=>{v.d(Kt,{W:()=>gt});var S=v(1999),b=v(6611),lt=v(9506),N=v(5970);const gt=(T,c,A)=>{let z=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},O=(null==c?void 0:c.attribute)||{fill:b.L.attribute.fill,stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(O,(0,lt.xW)(S.h.ELLIPSE,z,O)),{nodeId:T,element:(0,N.fn)(T,S.h.ELLIPSE,"ellipse",{size:z,attribute:O},A),size:z,attribute:O}}},745:(he,Kt,v)=>{v.d(Kt,{$:()=>N});var S=v(1999),b=v(9506),lt=v(5970);const N=(gt,T,c)=>{let A=(null==T?void 0:T.size)||{x:0,y:0,width:320,height:80},z=(null==T?void 0:T.attribute)||{};Object.assign(z,(0,b.xW)(S.h.FOREIGNOBJECT,A,z));let O=(null==T?void 0:T.source)||{type:"html",html:{htmlContent:""}},F=(null==T?void 0:T.style)||{};return{nodeId:gt,element:(0,lt.fn)(gt,S.h.FOREIGNOBJECT,"foreignObject",{size:A,attribute:z,style:F,source:O},c),size:A,attribute:z,style:F,source:O}}},3073:(he,Kt,v)=>{v.d(Kt,{v:()=>N});var S=v(1999),b=v(9506),lt=v(5970);const N=(T,c,A)=>{let z=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},O=(null==c?void 0:c.attribute)||{};return Object.assign(O,(0,b.xW)(S.h.GROUP,z,O)),{nodeId:T,element:(0,lt.fn)(T,S.h.GROUP,"g",{size:z,attribute:O},A),size:z,attribute:O}}},9173:(he,Kt,v)=>{v.d(Kt,{B:()=>N});var S=v(1999),b=v(9506),lt=v(5970);const N=(gt,T,c)=>{let A=(null==T?void 0:T.size)||{x:0,y:0,width:10,height:10},z=(null==T?void 0:T.attribute)||{preserveAspectRatio:"none"};Object.assign(z,(0,b.xW)(S.h.IMAGE,A,z));let O=(null==T?void 0:T.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:gt,element:(0,lt.fn)(gt,S.h.IMAGE,"image",{size:A,attribute:z,source:O},c),size:A,attribute:z,source:O}}},3069:(he,Kt,v)=>{v.d(Kt,{q:()=>gt});var S=v(1999),b=v(6611),lt=v(9506),N=v(5970);const gt=(T,c,A)=>{let z=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},O=(null==c?void 0:c.attribute)||{stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth,strokeLinecap:b.L.attribute.strokeLinecap};return Object.assign(O,(0,lt.xW)(S.h.LINE,z,O)),{nodeId:T,element:(0,N.fn)(T,S.h.LINE,"line",{size:z,attribute:O},A),size:z,attribute:O}}},6407:(he,Kt,v)=>{v.d(Kt,{X:()=>gt});var S=v(1999),b=v(6611),lt=v(9506),N=v(5970);const gt=(T,c,A)=>{let z=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},O=(null==c?void 0:c.attribute)||{stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(O,(0,lt.xW)(S.h.PATH,z,O)),{nodeId:T,element:(0,N.fn)(T,S.h.PATH,"path",{size:z,attribute:O},A),size:z,attribute:O}}},3477:(he,Kt,v)=>{v.d(Kt,{u:()=>gt});var S=v(1999),b=v(6611),lt=v(9506),N=v(5970);const gt=(T,c,A)=>{let z=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},O=(null==c?void 0:c.attribute)||{fill:b.L.attribute.fill,stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(O,(0,lt.xW)(S.h.POLYGON,z,O)),{nodeId:T,element:(0,N.fn)(T,S.h.POLYGON,"polygon",{size:z,attribute:O},A),size:z,attribute:O}}},3617:(he,Kt,v)=>{v.d(Kt,{E:()=>gt});var S=v(1999),b=v(6611),lt=v(9506),N=v(5970);const gt=(T,c,A)=>{let z=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},O=(null==c?void 0:c.attribute)||{fill:b.L.attribute.fill,stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(O,(0,lt.xW)(S.h.POLYLINE,z,O)),{nodeId:T,element:(0,N.fn)(T,S.h.POLYLINE,"polyline",{size:z,attribute:O},A),size:z,attribute:O}}},7945:(he,Kt,v)=>{v.d(Kt,{a:()=>gt});var S=v(1999),b=v(6611),lt=v(9506),N=v(5970);const gt=(T,c,A)=>{let z=(null==c?void 0:c.size)||{x:0,y:0,width:10,height:10},O=(null==c?void 0:c.attribute)||{fill:b.L.attribute.fill,stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(O,(0,lt.xW)(S.h.RECT,z,O)),{nodeId:T,element:(0,N.fn)(T,S.h.RECT,"rect",{size:z,attribute:O},A),size:z,attribute:O}}},6847:(he,Kt,v)=>{v.d(Kt,{L:()=>gt});var S=v(1999),b=v(6611),lt=v(9506),N=v(5970);const gt=(T,c,A)=>{let z=(null==c?void 0:c.size)||{x:0,y:0,width:320,height:80},O=(null==c?void 0:c.attribute)||{fill:b.L.attribute.stroke,fontFamily:b.L.attribute.fontFamily,fontSize:b.L.attribute.fontSize,textLength:b.L.attribute.textLength};Object.assign(O,(0,lt.xW)(S.h.TEXT,z,O));let F=(null==c?void 0:c.source)||{type:"text",text:{textContent:""}};return{nodeId:T,element:(0,N.fn)(T,S.h.TEXT,"text",{size:z,attribute:O,source:F},A),size:z,attribute:O,source:F}}},4669:(he,Kt,v)=>{v.d(Kt,{M:()=>gt});var S=v(1999),b=v(6611),lt=v(9506),N=v(5970);const gt=(T,c,A)=>{let z=(null==c?void 0:c.size)||{x:0,y:0,width:320,height:80},O=(null==c?void 0:c.attribute)||{fill:b.L.attribute.stroke,fontFamily:b.L.attribute.fontFamily,fontSize:b.L.attribute.fontSize,textLength:b.L.attribute.textLength};Object.assign(O,(0,lt.xW)(S.h.TSPAN,z,O));let F=(null==c?void 0:c.source)||{type:"text",text:{textContent:""}};return{nodeId:T,element:(0,N.fn)(T,S.h.TSPAN,"tspan",{size:z,attribute:O,source:F},A),size:z,attribute:O,source:F}}},9506:(he,Kt,v)=>{v.d(Kt,{CE:()=>lt,xW:()=>N});var S=v(1999),b=v(4896);const lt=(T,c,A,z,O)=>{let F={x:Math.min(T,A),y:Math.min(c,z),width:Math.abs(A-T)||1,height:Math.abs(z-c)||1};return null!=O&&O.ratio&&(F.width<=F.height?F.height=F.width*(null==O?void 0:O.ratio):F.width=F.height/(null==O?void 0:O.ratio)),Object.assign(F,{ratios:(null==O?void 0:O.ratios)||[[(T-F.x)/(F.width||1),(c-F.y)/(F.height||1)],[(A-F.x)/(F.width||1),(z-F.y)/(F.height||1)]]}),null!=O&&O.points&&(F.points=null==O?void 0:O.points),F},N=(T,c,A)=>{var z,O=(()=>{switch(T){case S.h.CIRCLE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,r:Math.min(c.width/2,c.height/2)};case S.h.ELLIPSE:return{cx:c.x+c.width/2,cy:c.y+c.height/2,rx:c.width/2,ry:c.height/2};case S.h.LINE:{var F;let f={};return null===(F=c.ratios)||void 0===F||F.forEach((J,I)=>{f[`x${I+1}`]=c.x+c.width*J[0],f[`y${I+1}`]=c.y+c.height*J[1]}),f}case S.h.RECT:case S.h.FOREIGNOBJECT:case S.h.IMAGE:return{x:c.x,y:c.y,width:c.width,height:c.height};case S.h.TEXT:case S.h.TSPAN:var x;return{x:c.x,y:c.y+(A.alignmentBaseline||A.dominantBaseline?0:null!==(x=A.fontSize)&&void 0!==x?x:16)};case S.h.POLYGON:case S.h.POLYLINE:var nt;if(null!==(nt=c.ratios)&&void 0!==nt&&nt.length)return{points:(0,b.n9)(c,c.ratios)};break;case S.h.PATH:var it,wt;if(null!==(it=c.ratioMaps)&&void 0!==it&&it.length)return{d:(0,b.$N)(c,c.ratioMaps)};if(null!==(wt=c.points)&&void 0!==wt&&wt.length)return{d:`M ${(f=c.points)[0][0]} ${f[0][1]} L ${(f.map(J=>[J[0],J[1]])||[]).map(J=>J.join(" ")).join(" ")}`}}var f;return{}})();return c.rotate?(O.transform=`rotate(${c.rotate})`,O.transformOrigin=`${c.x+c.width/2} ${c.y+c.height/2}`):null!==(z=A.transform)&&void 0!==z&&z.match(/^rotate/)&&(A.transform=null,A.transformOrigin=null),O}},2492:(he,Kt,v)=>{v.d(Kt,{z:()=>S});const S=(b,lt)=>{var N;return lt=null!==(N=lt)&&void 0!==N?N:100,Math.round((b+Number.EPSILON)*lt)/lt}},9841:(he,Kt,v)=>{v.d(Kt,{$:()=>lt});var S=v(6611),b=v(2492);const lt=N=>(0,b.z)(N/S.L.screen.scale)},6752:(he,Kt,v)=>{v.d(Kt,{E$:()=>c,Nx:()=>z,ZF:()=>T,ei:()=>gt,fu:()=>A});var S=v(6611),b=v(5970),lt=v(9506),N=v(2492);const gt=(O,F)=>{let{id:x,type:nt,size:it,attribute:wt}=O,f=JSON.parse(JSON.stringify({id:x,size:it,attribute:wt}));it.x=(0,N.z)(F||0),Object.assign(wt,(0,lt.xW)(nt,it,wt)),(0,b.tD)(window.document.getElementById(x),wt),S.L.history.push([{type:"size",from:f,to:JSON.parse(JSON.stringify({id:x,size:it,attribute:wt}))}])},T=(O,F)=>{let{id:x,type:nt,size:it,attribute:wt}=O,f=JSON.parse(JSON.stringify({id:x,size:it,attribute:wt}));it.y=(0,N.z)(F||0),Object.assign(wt,(0,lt.xW)(nt,it,wt)),(0,b.tD)(window.document.getElementById(x),wt),S.L.history.push([{type:"size",from:f,to:JSON.parse(JSON.stringify({id:x,size:it,attribute:wt}))}])},c=(O,F,x)=>{let{id:nt,type:it,size:wt,attribute:f}=O;F<=0&&(F=1);let J=JSON.parse(JSON.stringify({id:nt,size:wt,attribute:f}));x&&(wt.height=(0,N.z)(F*wt.height/(wt.width||1))),wt.width=(0,N.z)(F),Object.assign(f,(0,lt.xW)(it,wt,f)),(0,b.tD)(window.document.getElementById(nt),f),S.L.history.push([{type:"size",from:J,to:JSON.parse(JSON.stringify({id:nt,size:wt,attribute:f}))}])},A=(O,F,x)=>{let{id:nt,type:it,size:wt,attribute:f}=O;F<=0&&(F=1);let J=JSON.parse(JSON.stringify({id:nt,size:wt,attribute:f}));x&&(wt.width=(0,N.z)(F*wt.width/(wt.height||1))),wt.height=(0,N.z)(F),Object.assign(f,(0,lt.xW)(it,wt,f)),(0,b.tD)(window.document.getElementById(nt),f),S.L.history.push([{type:"size",from:J,to:JSON.parse(JSON.stringify({id:nt,size:wt,attribute:f}))}])},z=(O,F)=>{let{id:x,type:nt,size:it,attribute:wt}=O,f=JSON.parse(JSON.stringify({id:x,size:it,attribute:wt}));it.rotate="number"==typeof F?(0,N.z)(F,100):void 0,Object.assign(wt,(0,lt.xW)(nt,it,wt)),(0,b.tD)(window.document.getElementById(x),wt),S.L.history.push([{type:"size",from:f,to:JSON.parse(JSON.stringify({id:x,size:it,attribute:wt}))}])}},1308:(he,Kt,v)=>{v.d(Kt,{I:()=>T});var S=v(3603),b=v(6611);class lt{constructor(A){this._points=[],this._options=A}start(A){this._points.length=0,this._points.push([A.x,A.y]),this._options.start(A)}move(A,z){this._points.push([A.x,A.y]),this._options.move(A,this._points,z)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(A=this._points[0])[0],y:A[1]}:{x:0,y:0};var A}get offsetLast(){return this._points.length>=1?{x:(A=this._points[this._points.length-1])[0],y:A[1]}:{x:0,y:0};var A}}var N=v(6078);const T=(c,A,z,O,F)=>{var x,nt,it;let wt=null,f=0,J=0;c.mouseEvent?(wt=c.mouseEvent.target,f=c.mouseEvent.offsetX,J=c.mouseEvent.offsetY):c.touchEvent&&(wt=c.touchEvent.target,c.touchEvent.touches.length&&(f=c.touchEvent.touches[0].clientX,J=c.touchEvent.touches[0].clientY));let I=null!=z?z:b.L.screen.scale,q=null!=O?O:b.L.screen.dislocation,rt=null!=F?F:b.L.screen.offset,B=()=>{};var Q=new lt({start:null!==(x=null==A?void 0:A.start)&&void 0!==x?x:B,move:null!==(nt=null==A?void 0:A.move)&&void 0!==nt?nt:B,end:null!==(it=null==A?void 0:A.end)&&void 0!==it?it:B});c.mouseEvent?Q.start((0,N.D)({x:f,y:J},I,q,{x:0,y:0})):c.touchEvent&&Q.start((0,N.D)({x:f,y:J},I,q,rt));let ot=ct=>{Q.move((0,N.D)({x:ct.clientX,y:ct.clientY},I,q,rt),{ctrlKey:ct.ctrlKey,shiftKey:ct.shiftKey,altKey:ct.altKey})},W=ct=>{Q.end(),[S.P.SHAPE,S.P.FOREIGNOBJECT,S.P.IMAGE,S.P.TEXT].includes(b.L.pointer.pointer_type)&&(ct.shiftKey||(b.L.pointer.pointer_type=S.P.POINTER))},_=ct=>{ct.touches.length&&ot({clientX:ct.touches[0].clientX,clientY:ct.touches[0].clientY,ctrlKey:ct.ctrlKey,shiftKey:ct.shiftKey,altKey:ct.altKey})},yt=ct=>{W({ctrlKey:ct.ctrlKey,shiftKey:ct.shiftKey,altKey:ct.altKey}),window.removeEventListener("touchmove",_,!1),window.removeEventListener("touchend",yt,!1)},jt=ct=>{0==ct.button&&ot({clientX:ct.clientX,clientY:ct.clientY,ctrlKey:ct.ctrlKey,shiftKey:ct.shiftKey,altKey:ct.altKey})},Lt=ct=>{0==ct.button&&(W({shiftKey:ct.shiftKey,ctrlKey:ct.ctrlKey,altKey:ct.altKey}),window.removeEventListener("mousemove",jt,!1),window.removeEventListener("mouseup",Lt,!1))};if(c.mouseEvent)window.addEventListener("mousemove",jt,!1),window.addEventListener("mouseup",Lt,!1);else if(c.touchEvent){var Pt;window.addEventListener("touchmove",_,!1),window.addEventListener("touchend",yt,!1),null===(Pt=wt)||void 0===Pt||Pt.addEventListener("touchmove",function(ct){ct.preventDefault()})}}},6078:(he,Kt,v)=>{v.d(Kt,{D:()=>b});var S=v(2492);const b=(lt,N,gt,T)=>(lt.x-=T.x,lt.y-=T.y,lt.x/=N,lt.y/=N,lt.x-=gt.x,lt.y-=gt.y,lt.x=(0,S.z)(lt.x),lt.y=(0,S.z)(lt.y),lt)},5619:(he,Kt,v)=>{v.d(Kt,{J:()=>ht,I:()=>Xt});var S=v(7873),b=v(6611),lt=v(1999),N=v(334),gt=v(8946),T=v(7657),c=v(6769),A=v(3591),O=v(6847),F=v(3073);var f=v(7050),J=v(9173),I=v(2492);const q=(M,d,K)=>{var at,ut,X,E;let Y=1,st=new Image;st.onload=()=>{var _t,Tt,Mt,Ot;Y=(0,I.z)(st.naturalWidth/st.naturalHeight,100);let mt=0,kt=0,Ct=0,Ft=0;var Vt,$t,ae,se;Y>=1?(Ct=Math.min(st.naturalWidth,null!==(Vt=null===($t=ht.slide.svg)||void 0===$t||null===($t=$t.viewBox)||void 0===$t?void 0:$t.width)&&void 0!==Vt?Vt:0),Ft=Ct/Y):(Ft=Math.min(st.naturalHeight,null!==(ae=null===(se=ht.slide.svg)||void 0===se||null===(se=se.viewBox)||void 0===se?void 0:se.height)&&void 0!==ae?ae:0),Ct=Ft/Y),mt=((null!==(_t=null===(Tt=ht.slide.svg)||void 0===Tt||null===(Tt=Tt.viewBox)||void 0===Tt?void 0:Tt.width)&&void 0!==_t?_t:0)-Ct)/2,kt=((null!==(Mt=null===(Ot=ht.slide.svg)||void 0===Ot||null===(Ot=Ot.viewBox)||void 0===Ot?void 0:Ot.height)&&void 0!==Mt?Mt:0)-Ft)/2,d.size={x:mt,y:kt,width:Ct,height:Ft},rt(d,K)},st.onerror=_t=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,_t)},st.src=(null!==(at=d.source)&&void 0!==at&&at.path?(null===(ut=b.L.config)||void 0===ut?void 0:ut.readfileuploadurl)+(null===(X=d.source)||void 0===X?void 0:X.path):null===(E=d.source)||void 0===E?void 0:E.url)||""},rt=(M,d)=>{if(M.slideStatus!=ht.slideStatus)return void d();let{element:K}=(0,J.B)(Math.ceil(1e9*Math.random()),{size:M.size,source:{type:"image",image:null==M?void 0:M.source}});setTimeout(()=>{null==K||K.remove(),d()},3e3)};var B=v(5970);const Q=(M,d,K)=>{var at,ut,X,E;let Y=new Image;Y.onload=()=>{ot(M,{width:Y.naturalWidth,height:Y.naturalHeight},d,K)},Y.onerror=st=>{console.error(`ImgSrc load failed -> ${JSON.stringify(d.source)}`,st),K()},Y.src=(null!==(at=d.source)&&void 0!==at&&at.path?(null===(ut=b.L.config)||void 0===ut?void 0:ut.readfileuploadurl)+(null===(X=d.source)||void 0===X?void 0:X.path):null===(E=d.source)||void 0===E?void 0:E.url)||""},ot=(M,d,K,at)=>{if(K.slideStatus!=ht.slideStatus)return void at();let ut=(0,I.z)(d.width/d.height,100),X=0,E=0,Y=0,st=0;ut>=1?(Y=d.width,Y=Math.max(Y,40),Y=Math.min(Y,40),st=Y/ut):(st=d.height,st=Math.max(st,40),st=Math.min(st,40),Y=st/ut);let{size:Mt}=M;X=Mt.x+Mt.width-Y/2,E=Mt.y-st/2;let Ot=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,J.B)(`icon-${M.id}`,{size:{x:X,y:E,width:Y,height:st},source:{type:"image",image:null==K?void 0:K.source}},Ot),setTimeout(()=>{at()},3e3)},W=(M,d,K)=>{var at,ut,X,E,Y,st,_t;if(d.slideStatus!=ht.slideStatus)return void K();if(!(null!==(at=d.source)&&void 0!==at&&at.path||null!==(ut=d.source)&&void 0!==ut&&ut.url))return console.warn(`${M.id} -> audio no source!`),void K();var Tt=jQuery("#"+M.id);let Mt=null!==(X=d.iteration)&&void 0!==X?X:0;if(Mt<0&&(K(),K=function(){}),!(Tt.data("audio-running")&&Mt<0)){Tt.data("audio-running",!0);var Ot=new Audio;return Ot.autoplay=!0,Ot.loop=0!=Mt,Ot.preload="auto",Ot.controls=!0,Ot.setAttributeNode(document.createAttribute("playsinline")),Ot.addEventListener("canplay",function(){var mt=Ot.play();mt&&mt.then(function(kt){Tt.data("audio-running",!0)}).catch(function(kt){Tt.data("audio-running",!1),d.slideStatus===ht.slideStatus&&K()})}),Ot.addEventListener("timeupdate",function(){var kt;d.slideStatus!==ht.slideStatus&&((kt=this).pause(),kt.remove(),Tt.data("audio-running",!1))}),Ot.addEventListener("canplaythrough",function(){this.loop&&(Mt>0?Mt--:0==Mt&&(this.loop=!1))}),Ot.addEventListener("play",function(){}),Ot.addEventListener("pause",function(){}),Ot.addEventListener("ended",function(){this.remove(),Tt.data("audio-running",!1),d.slideStatus===ht.slideStatus&&K()}),Ot.onerror=function(){this.remove(),Tt.data("audio-running",!1),d.slideStatus===ht.slideStatus&&K()},Ot.src=(null!==(E=d.source)&&void 0!==E&&E.path?(null===(Y=b.L.config)||void 0===Y?void 0:Y.readfileuploadurl)+(null===(st=d.source)||void 0===st?void 0:st.path):null===(_t=d.source)||void 0===_t?void 0:_t.url)||"",Ot}};var _=v(2837);const ce=(M,d)=>{var K;null===(K=d.test)||void 0===K||null===(K=K.answer)||void 0===K||null===(K=K.matching)||void 0===K||K.filter(at=>at.id==M.id).forEach(at=>at.value=""),jQuery(`#node-${M.id}`).remove()},It=(M,d,K,at,ut,X)=>{var E,Y,st,_t,Tt,Mt,Ot,mt;ut.iscorrect?(null!==(E=d.test)&&void 0!==E&&null!==(E=E.audiotrue)&&void 0!==E&&E.path&&W(M,{source:(0,_.U)(null===(st=d.test)||void 0===st?void 0:st.audiotrue),iteration:0,nodeStatus:K,slideStatus:at},X),null!==(Y=d.test)&&void 0!==Y&&null!==(Y=Y.effecttrue)&&void 0!==Y&&Y.path&&q(0,{source:(0,_.U)(null===(_t=d.test)||void 0===_t?void 0:_t.effecttrue),iteration:0,nodeStatus:K,slideStatus:at},X)):(null!==(Tt=d.test)&&void 0!==Tt&&null!==(Tt=Tt.audiofalse)&&void 0!==Tt&&Tt.path&&W(M,{source:(0,_.U)(null===(Ot=d.test)||void 0===Ot?void 0:Ot.audiofalse),iteration:0,nodeStatus:K,slideStatus:at},X),null!==(Mt=d.test)&&void 0!==Mt&&null!==(Mt=Mt.effectfalse)&&void 0!==Mt&&Mt.path&&q(0,{source:(0,_.U)(null===(mt=d.test)||void 0===mt?void 0:mt.effectfalse),iteration:0,nodeStatus:K,slideStatus:at},X));pt(d,K,at,X)},pt=(M,d,K,at)=>{var ut;switch(null===(ut=M.test)||void 0===ut?void 0:ut.type){case"truefalse":{var X,E;let{value:se,iscorrect:de}=null!==(X=null==M||null===(E=M.test)||void 0===E||null===(E=E.answer)||void 0===E?void 0:E.truefalse)&&void 0!==X?X:{};if(se){let xe=ht.findNode(se);var Y,st,_t,Tt;de?null!==(Y=M.test)&&void 0!==Y&&null!==(Y=Y.icontrue)&&void 0!==Y&&Y.path&&Q(xe,{source:(0,_.U)(null===(st=M.test)||void 0===st?void 0:st.icontrue),iteration:0,nodeStatus:d,slideStatus:K},at):null!==(_t=M.test)&&void 0!==_t&&null!==(_t=_t.iconfalse)&&void 0!==_t&&_t.path&&Q(xe,{source:(0,_.U)(null===(Tt=M.test)||void 0===Tt?void 0:Tt.iconfalse),iteration:0,nodeStatus:d,slideStatus:K},at)}break}case"singlechoice":{var Mt,Ot;let{value:se,iscorrect:de}=null!==(Mt=null==M||null===(Ot=M.test)||void 0===Ot||null===(Ot=Ot.answer)||void 0===Ot?void 0:Ot.singlechoice)&&void 0!==Mt?Mt:{};if(se){let xe=ht.findNode(se);var mt,kt,Ct,Ft;de?null!==(mt=M.test)&&void 0!==mt&&null!==(mt=mt.icontrue)&&void 0!==mt&&mt.path&&Q(xe,{source:(0,_.U)(null===(kt=M.test)||void 0===kt?void 0:kt.icontrue),iteration:0,nodeStatus:d,slideStatus:K},at):null!==(Ct=M.test)&&void 0!==Ct&&null!==(Ct=Ct.iconfalse)&&void 0!==Ct&&Ct.path&&Q(xe,{source:(0,_.U)(null===(Ft=M.test)||void 0===Ft?void 0:Ft.iconfalse),iteration:0,nodeStatus:d,slideStatus:K},at)}break}case"multichoice":var Vt;null==M||null===(Vt=M.test)||void 0===Vt||null===(Vt=Vt.answer)||void 0===Vt||null===(Vt=Vt.multichoice)||void 0===Vt||Vt.forEach(se=>{let{value:de,iscorrect:xe}=se;if(de){let we=ht.findNode(de);var Le,Ne,Te,Me;xe?null!==(Le=M.test)&&void 0!==Le&&null!==(Le=Le.icontrue)&&void 0!==Le&&Le.path&&Q(we,{source:(0,_.U)(null===(Ne=M.test)||void 0===Ne?void 0:Ne.icontrue),iteration:0,nodeStatus:d,slideStatus:K},at):null!==(Te=M.test)&&void 0!==Te&&null!==(Te=Te.iconfalse)&&void 0!==Te&&Te.path&&Q(we,{source:(0,_.U)(null===(Me=M.test)||void 0===Me?void 0:Me.iconfalse),iteration:0,nodeStatus:d,slideStatus:K},at)}});break;case"fill":var $t;null==M||null===($t=M.test)||void 0===$t||null===($t=$t.answer)||void 0===$t||null===($t=$t.fill)||void 0===$t||$t.forEach(se=>{let{id:de,value:Le,iscorrect:Ne}=se;if(Le){let Ge=ht.findNode(de);var Te,Me,we,We;Ne?null!==(Te=M.test)&&void 0!==Te&&null!==(Te=Te.icontrue)&&void 0!==Te&&Te.path&&Q(Ge,{source:(0,_.U)(null===(Me=M.test)||void 0===Me?void 0:Me.icontrue),iteration:0,nodeStatus:d,slideStatus:K},at):null!==(we=M.test)&&void 0!==we&&null!==(we=we.iconfalse)&&void 0!==we&&we.path&&Q(Ge,{source:(0,_.U)(null===(We=M.test)||void 0===We?void 0:We.iconfalse),iteration:0,nodeStatus:d,slideStatus:K},at)}});break;case"matching":var ae;null==M||null===(ae=M.test)||void 0===ae||null===(ae=ae.answer)||void 0===ae||null===(ae=ae.matching)||void 0===ae||ae.forEach(se=>{let{id:de,key:xe,value:Le}=se;if(Le){let We=ht.findNode(de);var Ne,Te,Me,we;xe==Le?null!==(Ne=M.test)&&void 0!==Ne&&null!==(Ne=Ne.icontrue)&&void 0!==Ne&&Ne.path&&Q(We,{source:(0,_.U)(null===(Te=M.test)||void 0===Te?void 0:Te.icontrue),iteration:0,nodeStatus:d,slideStatus:K},at):null!==(Me=M.test)&&void 0!==Me&&null!==(Me=Me.iconfalse)&&void 0!==Me&&Me.path&&Q(We,{source:(0,_.U)(null===(we=M.test)||void 0===we?void 0:we.iconfalse),iteration:0,nodeStatus:d,slideStatus:K},at)}})}},ft=(M,d,K,at)=>{var ut,X,E,Y,st,_t,Mt,mt,Ot;null!==(ut=d.animate)&&void 0!==ut&&ut.value&&(0,f.a)(d,K.nodeStatus,K.slideStatus),null!==(X=d.interactive)&&void 0!==X&&X.show?(console.log(`node(${d.id}) | nodeStatus(${K.nodeStatus}) | slideStatus(${K.slideStatus}) | show`),((M,d,K,at)=>{var ut,X,E;let Y={total:0,counter:0},{triggershow:st,triggerrun:_t,triggerhide:Tt,action:Mt,audio:Ot}=null!==(ut=null===(X=M.interactive)||void 0===X?void 0:X.show)&&void 0!==ut?ut:{};if(console.log(`node(${M.id}) | nodeStatus(${d}) | slideStatus(${K}) | show`),st){let{id:kt,ids:Ct,time:Ft,async:Vt}=st;"asynctrue"==Vt?setTimeout(()=>{(0,A.GD)({id:kt,ids:Ct,nodeStatus:d,slideStatus:K})}):"time"==Vt&&setTimeout(()=>{(0,A.GD)({id:kt,ids:Ct,nodeStatus:d,slideStatus:K})},1e3*(null!=Ft?Ft:0))}if(_t){let{id:kt,ids:Ct,time:Ft,async:Vt}=_t;"asynctrue"==Vt?setTimeout(()=>{(0,A.MF)({id:kt,ids:Ct,nodeStatus:d,slideStatus:K})}):"time"==Vt&&setTimeout(()=>{(0,A.MF)({id:kt,ids:Ct,nodeStatus:d,slideStatus:K})},1e3*(null!=Ft?Ft:0))}if(Tt){let{id:kt,ids:Ct,time:Ft,async:Vt}=Tt;"asynctrue"==Vt?setTimeout(()=>{(0,A.vi)({id:kt,ids:Ct,nodeStatus:d,slideStatus:K})}):"time"==Vt&&setTimeout(()=>{(0,A.vi)({id:kt,ids:Ct,nodeStatus:d,slideStatus:K})},1e3*(null!=Ft?Ft:0))}let mt=()=>{setTimeout(()=>{if(Y.counter>=Y.total){if(at&&at(),st){let{id:kt,ids:Ct,async:Ft}=st;(!Ft||"asyncfalse"==Ft)&&(0,A.GD)({id:kt,ids:Ct,nodeStatus:d,slideStatus:K})}if(_t){let{id:kt,ids:Ct,async:Ft}=_t;(!Ft||"asyncfalse"==Ft)&&(0,A.MF)({id:kt,ids:Ct,nodeStatus:d,slideStatus:K})}if(Tt){let{id:kt,ids:Ct,async:Ft}=Tt;(!Ft||"asyncfalse"==Ft)&&(0,A.vi)({id:kt,ids:Ct,nodeStatus:d,slideStatus:K})}}})};if(null!=Mt&&Mt.value){Y.total+=1;let kt=()=>{Y.counter+=1,mt()};switch(null==Mt?void 0:Mt.value){case"hide":jQuery("#"+M.id).addClass("hide"),kt();break;case"points":{let{points:Ct,time:Ft,iteration:Vt,finish:$t}=Mt;(0,T.c)(M.id,{node:M,points:Ct,time:Ft,iteration:Vt,finish:$t,nodeStatus:d,slideStatus:K},kt);break}default:{let{value:Ct,time:Ft,iteration:Vt,finish:$t}=Mt;(0,gt.h)(M.id,{node:M,value:Ct,time:Ft,iteration:Vt,finish:$t,nodeStatus:d,slideStatus:K},kt);break}}}if(null!=Ot&&null!==(E=Ot.source)&&void 0!==E&&E.path){Y.total+=1;let kt=()=>{Y.counter+=1,mt()},Ct=(0,c.d)(M.id,Ot,Y,{nodeStatus:d,slideStatus:K},kt);-1==(null==Ot?void 0:Ot.iteration)&&jQuery("#"+M.id).click(Ft=>{Ft.preventDefault(),Ct&&(Ct.volume=Ct.volume>=1?0:Ct.volume+.25),console.log(null==Ct?void 0:Ct.volume)})}Y.total||mt()})(d,K.nodeStatus,K.slideStatus,at)):at&&at(),null!==(E=d.interactive)&&void 0!==E&&E.click&&(mt=null===(Mt=d.interactive)||void 0===Mt?void 0:Mt.click,Object.keys(null!=mt?mt:{}).map(Ct=>mt[Ct]?1:0).includes(1)&&jQuery("#"+d.id).addClass("interactive-click"),jQuery("#"+d.id).click(mt=>{mt.preventDefault(),K.nodeStatus=ht.refreshNodeStatus(),console.log(`node(${d.id}) | nodeStatus(${K.nodeStatus}) | slideStatus(${K.slideStatus}) | click`),(0,N.J)(d,K.nodeStatus,K.slideStatus)})),null!==(Y=d.variable)&&void 0!==Y&&Y.input&&jQuery("#"+d.id).on("change","input,textarea",mt=>{mt.preventDefault(),((M,d,K)=>{var at,ut;b.L.variable.setValue(null!==(at=null===(ut=d.variable)||void 0===ut||null===(ut=ut.input)||void 0===ut?void 0:ut.variable)&&void 0!==at?at:"",M),(M=>{var d;let K=(at,ut)=>{null==at||at.forEach(X=>{switch(X.type){case lt.h.GROUP:(0,F.v)(X.id,{},ut?window.document.getElementById(ut):null),K(X.nodes,X.id);break;case lt.h.POLYGON:break;case lt.h.TEXT:(0,O.L)(X.id,{size:X.size,attribute:X.attribute,source:X.source},ut?window.document.getElementById(ut):null)}})};K(null===(d=M.svg)||void 0===d?void 0:d.nodes)})(K)})(mt.target.value,d,M)}),null!==(st=d.variable)&&void 0!==st&&st.click&&(null!==(Ot=d.variable)&&void 0!==Ot&&null!==(Ot=Ot.click)&&void 0!==Ot&&Ot.variable&&jQuery("#"+d.id).addClass("variable-click"),jQuery("#"+d.id).click(mt=>{mt.preventDefault(),((M,d)=>{var K;b.L.variable.setValueOperator(null===(K=M.variable)||void 0===K?void 0:K.click),(M=>{var d;let K=(at,ut)=>{null==at||at.forEach(X=>{switch(X.type){case lt.h.GROUP:(0,F.v)(X.id,{},ut?window.document.getElementById(ut):null),K(X.nodes,X.id);break;case lt.h.POLYGON:break;case lt.h.TEXT:(0,O.L)(X.id,{size:X.size,attribute:X.attribute,source:X.source},ut?window.document.getElementById(ut):null)}})};K(null===(d=M.svg)||void 0===d?void 0:d.nodes)})(d)})(d,M)})),"test"==(null===(_t=d.source)||void 0===_t?void 0:_t.type)&&((M,d)=>{var K;let at=()=>{};switch(null===(K=M.source)||void 0===K||null===(K=K.test)||void 0===K?void 0:K.type){case"truefalse":{jQuery("#"+M.id).click(E=>{E.preventDefault(),((M,d,K,at,ut)=>{var X,E;let Y=null===(X=M.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.truefalse)||void 0===X?void 0:X.iscorrect;d.test?d.test.answer?d.test.answer.truefalse={value:M.id,iscorrect:Y}:d.test.answer={truefalse:{value:M.id,iscorrect:Y}}:d.test={answer:{truefalse:{value:M.id,iscorrect:Y}}},null!==(E=d.svg)&&void 0!==E&&E.nodes.find(_t=>{var Tt;return"submit"==(null===(Tt=_t.source)||void 0===Tt||null===(Tt=Tt.test)||void 0===Tt?void 0:Tt.type)})||It(M,d,K,at,{iscorrect:Y},ut);let st=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(st,d,M)})(M,d,ht.nodeStatus,ht.slideStatus,at)});let X=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(X,d,M);break}case"singlechoice":{jQuery("#"+M.id).click(E=>{E.preventDefault(),((M,d,K,at,ut)=>{var X,E;let Y=null===(X=M.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.singlechoice)||void 0===X?void 0:X.iscorrect;d.test?d.test.answer?d.test.answer.singlechoice={value:M.id,iscorrect:Y}:d.test.answer={singlechoice:{value:M.id,iscorrect:Y}}:d.test={answer:{singlechoice:{value:M.id,iscorrect:Y}}},null!==(E=d.svg)&&void 0!==E&&E.nodes.find(_t=>{var Tt;return"submit"==(null===(Tt=_t.source)||void 0===Tt||null===(Tt=Tt.test)||void 0===Tt?void 0:Tt.type)})||It(M,d,K,at,{iscorrect:Y},ut);let st=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(st,d,M)})(M,d,ht.nodeStatus,ht.slideStatus,at)});let X=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(X,d,M);break}case"multichoice":{jQuery("#"+M.id).click(E=>{E.preventDefault(),((M,d,K,at,ut)=>{var X,E;let Y=null===(X=M.source)||void 0===X||null===(X=X.test)||void 0===X||null===(X=X.multichoice)||void 0===X?void 0:X.iscorrect;d.test?d.test.answer?d.test.answer.multichoice?d.test.answer.multichoice.find(_t=>_t.value==M.id)?d.test.answer.multichoice=d.test.answer.multichoice.filter(_t=>_t.value!=M.id):d.test.answer.multichoice.push({value:M.id,iscorrect:Y}):d.test.answer.multichoice=[{value:M.id,iscorrect:Y}]:d.test.answer={multichoice:[{value:M.id,iscorrect:Y}]}:d.test={answer:{multichoice:[{value:M.id,iscorrect:Y}]}},null!==(E=d.svg)&&void 0!==E&&E.nodes.find(_t=>{var Tt;return"submit"==(null===(Tt=_t.source)||void 0===Tt||null===(Tt=Tt.test)||void 0===Tt?void 0:Tt.type)})||It(M,d,K,at,{iscorrect:Y},ut);let st=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(st,d,M)})(M,d,ht.nodeStatus,ht.slideStatus,at)});let X=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(X,d,M);break}case"fill":{var ut;jQuery("#"+M.id).on("keyup",'input[type="text"]',E=>{var Y;let st=jQuery("<div/>").css({"font-size":jQuery(E.target).css("font-size"),visibility:"hidden",float:"left"}).text(E.target.value).appendTo(window.document.body);jQuery(E.target).css({width:(null!==(Y=st.width())&&void 0!==Y?Y:0)+30})}).on("keypress",'input[type="text"]',E=>{13===(E.keyCode||E.charCode||E.which)&&(E.preventDefault(),E.stopPropagation(),jQuery(E.target).blur())}).on("change",'input[type="text"]',E=>{var Y,st;let _t=null===(Y=E.target)||void 0===Y?void 0:Y.getAttribute("data-key"),Tt=null===(st=E.target)||void 0===st||null===(st=st.value)||void 0===st?void 0:st.trim();jQuery("#"+M.id).find(`input[type="text"][data-key="${_t}"]`).val(Tt),((M,d,K,at,ut,X)=>{var E,Y,st,_t;let{value:Tt}=null!==(E=null===(Y=M.source)||void 0===Y||null===(Y=Y.test)||void 0===Y||null===(Y=Y.fill)||void 0===Y?void 0:Y.find(mt=>mt.key==`[[${ut.key}]]`))&&void 0!==E?E:{},Mt=Tt&&Tt.map(mt=>null==mt?void 0:mt.toLocaleLowerCase()).includes(null===(st=ut.value)||void 0===st?void 0:st.toLocaleLowerCase());ut.iscorrect=Mt,d.test?d.test.answer?d.test.answer.fill?d.test.answer.fill.find(mt=>mt.key==ut.key)?d.test.answer.fill.filter(mt=>mt.key==ut.key).forEach(mt=>{mt.value=ut.value,mt.iscorrect=ut.iscorrect}):d.test.answer.fill.push(ut):d.test.answer.fill=[ut]:d.test.answer={fill:[ut]}:d.test={answer:{fill:[ut]}};let Ot=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(Ot,d,M),null!==(_t=d.svg)&&void 0!==_t&&_t.nodes.find(mt=>{var kt;return"submit"==(null===(kt=mt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)})||It(M,d,K,at,{iscorrect:Mt},X)})(M,d,ht.nodeStatus,ht.slideStatus,{id:M.id,key:_t,value:Tt},at)}),null!==(ut=d.test)&&void 0!==ut&&ut.showselection||jQuery("#"+M.id).addClass("hide-selection");let X=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(X,d,M);break}case"matching-empty":{jQuery("#"+M.id).on("touchmove",".ondrag-item",function(E){E.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(E){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${M.size.height/M.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${E.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(E){var Y;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(Y=d.test)&&void 0!==Y&&Y.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),ce(M,d)},drag:function(E){},dragend:function(E){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${M.id} .ondrop-here`).kendoDropTarget({dragenter:function(E){E.dropTarget.hasClass("actived")&&E.dropTarget.addClass("focused")},dragleave:function(E){E.dropTarget.hasClass("actived")&&E.dropTarget.removeClass("focused")},drop:function(E){if(!E.dropTarget.hasClass("actived"))return;E.dropTarget.removeClass("focused");let Y=E.dropTarget,st=E.draggable.currentTarget;Y.is(":empty")||Y.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),st.appendTo(Y);let _t=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(_t,d,M),((M,d,K,at,ut,X)=>{var E,Y,st;let{key:_t}=null!==(E=null===(Y=M.source)||void 0===Y||null===(Y=Y.test)||void 0===Y?void 0:Y.matching)&&void 0!==E?E:{key:"KIEN"},Tt=ut.key==_t;ce(M,d);let Mt={id:M.id,key:null!=_t?_t:"",value:ut.key};d.test?d.test.answer?d.test.answer.matching?d.test.answer.matching.find(Ot=>Ot.id==Mt.id)?d.test.answer.matching.filter(Ot=>Ot.id==Mt.id).forEach(Ot=>{Ot.key=Mt.key,Ot.value=Mt.value}):d.test.answer.matching.push(Mt):d.test.answer.matching=[Mt]:d.test.answer={matching:[Mt]}:d.test={answer:{matching:[Mt]}},null!==(st=d.svg)&&void 0!==st&&st.nodes.find(Ot=>{var mt;return"submit"==(null===(mt=Ot.source)||void 0===mt||null===(mt=mt.test)||void 0===mt?void 0:mt.type)})||It(M,d,K,at,{iscorrect:Tt},X)})(M,d,ht.nodeStatus,ht.slideStatus,{key:st.data("key")},at)}});let X=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(X,d,M);break}case"matching-content":{jQuery("#"+M.id).on("touchmove",".ondrag-item",function(E){E.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(E){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${M.size.height/M.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${E.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(E){var Y;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(Y=d.test)&&void 0!==Y&&Y.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(E){},dragend:function(E){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${M.id} .ondrop-here`).kendoDropTarget({dragenter:function(E){E.dropTarget.hasClass("actived")&&E.dropTarget.addClass("focused")},dragleave:function(E){E.dropTarget.hasClass("actived")&&E.dropTarget.removeClass("focused")},drop:function(E){if(!E.dropTarget.hasClass("actived"))return;E.dropTarget.removeClass("focused");let Y=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(Y,d,M),E.draggable.currentTarget.appendTo(E.dropTarget),pt(d,ht.nodeStatus,ht.slideStatus,at)}});let X=(0,B.RY)(S.F.TEST_GROUP,"g",void 0,b.L.target);(0,B.kE)(X,d,M);break}case"speech":break;case"submit":jQuery("#"+M.id).click(X=>{X.preventDefault(),((M,d,K,at,ut)=>{var X,E,Y,st,_t;let Tt;var Mt;if(null!=d&&null!==(X=d.test)&&void 0!==X&&null!==(X=X.answer)&&void 0!==X&&X.truefalse)Tt=null==d||null===(Mt=d.test)||void 0===Mt||null===(Mt=Mt.answer)||void 0===Mt||null===(Mt=Mt.truefalse)||void 0===Mt?void 0:Mt.iscorrect;else if(null!=d&&null!==(E=d.test)&&void 0!==E&&null!==(E=E.answer)&&void 0!==E&&E.singlechoice){var Ot;Tt=null==d||null===(Ot=d.test)||void 0===Ot||null===(Ot=Ot.answer)||void 0===Ot||null===(Ot=Ot.singlechoice)||void 0===Ot?void 0:Ot.iscorrect}else if(null!=d&&null!==(Y=d.test)&&void 0!==Y&&null!==(Y=Y.answer)&&void 0!==Y&&Y.multichoice){var mt,kt,Ct;Tt=1==[null==d||null===(mt=d.test)||void 0===mt||null===(mt=mt.answer)||void 0===mt||null===(mt=mt.multichoice)||void 0===mt?void 0:mt.length,null==d||null===(kt=d.test)||void 0===kt||null===(kt=kt.answer)||void 0===kt||null===(kt=kt.multichoice)||void 0===kt||null===(kt=kt.map(se=>se.iscorrect?1:0))||void 0===kt?void 0:kt.reduce((se,de)=>se+de),null==d||null===(Ct=d.svg)||void 0===Ct||null===(Ct=Ct.nodes)||void 0===Ct||null===(Ct=Ct.filter(se=>{var de,xe;return"multichoice"==(null===(de=se.source)||void 0===de||null===(de=de.test)||void 0===de?void 0:de.type)&&(null===(xe=se.source)||void 0===xe||null===(xe=xe.test)||void 0===xe||null===(xe=xe.multichoice)||void 0===xe?void 0:xe.iscorrect)}))||void 0===Ct?void 0:Ct.length].filter((se,de,xe)=>xe.indexOf(se)==de).length}else if(null!=d&&null!==(st=d.test)&&void 0!==st&&null!==(st=st.answer)&&void 0!==st&&st.fill){var Ft,Vt;Tt=(null==d||null===(Ft=d.test)||void 0===Ft||null===(Ft=Ft.answer)||void 0===Ft||null===(Ft=Ft.fill)||void 0===Ft||null===(Ft=Ft.map(se=>se.iscorrect?1:0))||void 0===Ft?void 0:Ft.reduce((se,de)=>se+de))==(null===(Vt=d.svg)||void 0===Vt||null===(Vt=Vt.nodes)||void 0===Vt||null===(Vt=Vt.filter(se=>{var de;return"fill"==(null===(de=se.source)||void 0===de||null===(de=de.test)||void 0===de?void 0:de.type)}))||void 0===Vt?void 0:Vt.length)}else if(null!=d&&null!==(_t=d.test)&&void 0!==_t&&null!==(_t=_t.answer)&&void 0!==_t&&_t.matching){var $t,ae;Tt=(null===($t=d.svg)||void 0===$t||null===($t=$t.nodes)||void 0===$t||null===($t=$t.filter(se=>{var de;return"matching-empty"==(null===(de=se.source)||void 0===de||null===(de=de.test)||void 0===de?void 0:de.type)}))||void 0===$t?void 0:$t.length)==((null==d||null===(ae=d.test)||void 0===ae||null===(ae=ae.answer)||void 0===ae?void 0:ae.matching)||[]).map(se=>se.key==se.value?1:0).reduce((se,de)=>se+de)}It(M,d,K,at,{iscorrect:Tt},ut)})(M,d,ht.nodeStatus,ht.slideStatus,at)})}})(d,M)};var j=v(1281),Gt=v(6153),D=v(3069),P=v(7945),s=v(3477),w=v(745),H=v(6407),tt=v(3617),zt=v(4669);const Yt=(M,d,K)=>{if(K.slideStatus!=ht.slideStatus||!d.length)return;let at=d.shift(),ut=M.filter(st=>{var _t;return(null!==(_t=st.idx)&&void 0!==_t?_t:0)==at});if(!ut.length)return;let X=Math.max.apply(null,ut.map(st=>{var _t;return null!==(_t=st.time)&&void 0!==_t?_t:0})),E=!1,Y=X<.5?0:setTimeout(()=>{E||(E=!0,Yt(M,d,K))},1e3*X);Qt(M,d,ut,0,K,{idx:at,total:ut.length,counter:0,isRecursive:E,timeoutRecursive:Y,maxTimeCoundown:X,uid:Math.floor(1e9*Math.random())})},Qt=(M,d,K,at,ut,X)=>{if(ut.slideStatus!=ht.slideStatus)return;let E=K[at];if(E){switch(E.type){case lt.h.GROUP:break;case lt.h.CIRCLE:(0,j.K)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.h.ELLIPSE:(0,Gt.W)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.h.LINE:(0,D.q)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.h.RECT:(0,P.a)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.h.POLYGON:(0,s.u)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.h.POLYLINE:(0,tt.E)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null);break;case lt.h.FOREIGNOBJECT:(0,w.$)(E.id,{size:E.size,attribute:E.attribute,style:E.style,source:E.source},E.pid?window.document.getElementById(E.pid):null);break;case lt.h.IMAGE:(0,J.B)(E.id,{size:E.size,attribute:E.attribute,source:E.source},E.pid?window.document.getElementById(E.pid):null);break;case lt.h.TEXT:(0,O.L)(E.id,{size:E.size,attribute:E.attribute,source:E.source},E.pid?window.document.getElementById(E.pid):null);break;case lt.h.TSPAN:(0,zt.M)(E.id,{size:E.size,attribute:E.attribute,source:E.source},E.pid?window.document.getElementById(E.pid):null);break;case lt.h.PATH:(0,H.X)(E.id,{size:E.size,attribute:E.attribute},E.pid?window.document.getElementById(E.pid):null)}ft(ut.slide,E,ut,()=>{X.counter+=1,X.maxTimeCoundown<.5&&X.counter>=X.total&&(X.total=X.counter=0,X.isRecursive||(clearTimeout(X.timeoutRecursive),X.isRecursive=!0,setTimeout(()=>{Yt(M,d,ut)},250)))}),Qt(M,d,K,++at,ut,X)}},ht=new class Nt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(d){this._dataSource=d.data||{},b.L.variable.set=d.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var d,K;return null!==(d=null===(K=this._dataSource)||void 0===K||null===(K=K.slides)||void 0===K?void 0:K.length)&&void 0!==d?d:0}get slides(){var d;return(null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[]}get slide(){var d;return((null===(d=this._dataSource)||void 0===d?void 0:d.slides)||[])[this._slideIdx]||{}}findNode(d){var K;let at=null===(K=this._dataSource)||void 0===K||null===(K=K.slides)||void 0===K?void 0:K.find((Ot,mt)=>mt==this._slideIdx),ut=null==at?void 0:at.svg,X=(Ot,mt)=>{let kt=null==Ot?void 0:Ot.find(Vt=>Vt.id==d);if(kt)return kt.pid=mt,kt;let Ct=0,Ft=Ot.length||0;for(;Ct<Ft&&!kt&&(kt=X(Ot[Ct].nodes||[],Ot[Ct].id),!kt);)Ct++;return kt},E=X((null==ut?void 0:ut.nodes)||[]);var Y,st,_t,Tt,Mt;return E?(E.style=null!==(Y=E.style)&&void 0!==Y?Y:{},E.source=null!==(st=E.source)&&void 0!==st?st:{},E.animate=null!==(_t=E.animate)&&void 0!==_t?_t:{},E.interactive=null!==(Tt=E.interactive)&&void 0!==Tt?Tt:{},E.variable=null!==(Mt=E.variable)&&void 0!==Mt?Mt:{},E):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(d,K,at){var ut;let X;var E,Y;if(this.refreshNodeStatus(),this.refreshSlideStatus(),at)X=null===(E=this._dataSource)||void 0===E||null===(E=E.slides)||void 0===E?void 0:E.find(Mt=>Mt.code==at||Mt.id==at),X&&(this._slideIdx=(null===(Y=this._dataSource)||void 0===Y||null===(Y=Y.slides)||void 0===Y?void 0:Y.indexOf(X))||0);else if(K){var st,_t;X=null===(st=this._dataSource)||void 0===st||null===(st=st.slides)||void 0===st?void 0:st.find(Mt=>Mt.id==K),X&&(this._slideIdx=(null===(_t=this._dataSource)||void 0===_t||null===(_t=_t.slides)||void 0===_t?void 0:_t.indexOf(X))||0)}else this._slideIdx=Math.min(Math.max(d||0,0),this.slideTotal-1),X=this.slide;if(X){var Tt;Xt(b.L.container,b.L.svg,X,!0),null===(Tt=jQuery(b.L.svg).find("#"+S.F.BACKGROUND_GROUP))||void 0===Tt||Tt.empty();let Mt=(0,B.RY)(S.F.BACKGROUND_GROUP,"g",void 0,b.L.svg);(0,B.I6)(Mt,X),(M=>{var d,K,at,ut;let X=ht.nodeStatus,E=ht.slideStatus;null===(d=M.svg)||void 0===d||d.nodes.forEach(st=>{st.pid=Math.ceil(1e9*Math.random()),(0,F.v)(st.pid)});let Y=null===(K=M.svg)||void 0===K||null===(K=K.nodes)||void 0===K?void 0:K.map(st=>{var _t;return null!==(_t=st.idx)&&void 0!==_t?_t:0}).filter((st,_t,Tt)=>Tt.indexOf(st)==_t).sort((st,_t)=>(null!=st?st:0)-(null!=_t?_t:0));Yt(null!==(at=null===(ut=M.svg)||void 0===ut?void 0:ut.nodes)&&void 0!==at?at:[],null!=Y?Y:[],{slide:M,nodeStatus:X,slideStatus:E})})(X)}this.changeSlide(this.slides,null===(ut=this.slide)||void 0===ut?void 0:ut.id,this.slideIdx,this.slides.length,X)}set onChangeSlide(d){this._fnChangeSlides.push(d)}changeSlide(d,K,at,ut,X){this._fnChangeSlides.forEach(E=>E(d,K,at,ut,X))}},Xt=(M,d,K,at)=>{var ut,X,E,Y;let st=window.document.querySelector(d);var _t;st||(st=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(_t=window.document.querySelector(M))||void 0===_t||_t.appendChild(st)),at&&(st.textContent=null);let{x:Tt,y:Mt,width:Ot,height:mt}=null!==(ut=null==K||null===(X=K.svg)||void 0===X?void 0:X.viewBox)&&void 0!==ut?ut:b.L.screen.frameSize;st.setAttributeNS(null,"viewBox",Tt+" "+Mt+" "+Ot+" "+mt),st.setAttribute("id",d.replace("#",""));var $t,ae,kt=null!==(E=jQuery(M).width())&&void 0!==E?E:1080,Ct=null!==(Y=jQuery(M).height())&&void 0!==Y?Y:1080,Vt=Ot/mt;Vt>=kt/Ct?ae=($t=kt)/Vt:$t=(ae=Ct)*Vt,st.setAttributeNS(null,"width",$t.toString()),st.setAttributeNS(null,"height",ae.toString())}},7050:(he,Kt,v)=>{v.d(Kt,{M:()=>lt,a:()=>b});var S=v(5619);const b=(gt,T,c)=>{var A;let{value:O}=null!==(A=gt.animate)&&void 0!==A?A:{};lt(gt.id,{node:gt,value:O,nodeStatus:T,slideStatus:c},()=>{})},lt=(gt,T,c)=>{var A;if(!T.value)return void c();let z=jQuery("#"+gt).parents("g");if(!z.length)return void c();let{size:O}=T.node;z.css("transform-origin",`${O.x+O.width/2}px ${O.y+O.height/2}px`);let F="",x=null!==(A=T.iteration)&&void 0!==A?A:0,nt=[];(T.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?nt.push(T.value):T.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(T.value)?(nt.push("animation"),nt.push(`animation-${T.value}`)):(nt.push("animate__animated"),nt.push(`animate__${T.value}`)):(nt.push("animation"),nt.push("animation-fadein")),x<0?(nt.push("animation-iteration-infinite"),c(),c=function(){}):x>0&&nt.push("animation-iteration-"+(x+1)),F=nt.join(" "),function(wt){let f=function(){z.data("animate-running")?z.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){z.data("animate-running",!1),setTimeout(function(){wt()},100)}):wt()};z.hasClass("animation")?setTimeout(function(){f()}):f()}(function(){var wt;N(gt),(x>0||x<0)&&z.one("animationiteration",function(){T.slideStatus===S.J.slideStatus||(z.data("animate-running",!1),N(gt),T.slideStatus===S.J.slideStatus&&c())}),z.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(z.data("animate-running",!1),N(gt),T.finish){default:case 0:case 1:break;case 2:var f;lt(gt,{node:T.node,value:null===(f=T.node.animate)||void 0===f?void 0:f.out,nodeStatus:T.nodeStatus,slideStatus:T.slideStatus},()=>{z.addClass("hide")})}T.slideStatus===S.J.slideStatus&&c()}),z.attr("data-class",null!==(wt=z.attr("class"))&&void 0!==wt?wt:""),z.addClass(F),z.data("animate-running",!0)})},N=function(gt){var T,c,A=jQuery("#"+gt).parents("g"),z=null===(T=A.attr("class"))||void 0===T?void 0:T.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),O=null===(c=A.attr("class"))||void 0===c?void 0:c.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);z&&z.forEach(function(x){jQuery(A).removeClass(x)}),O&&O.forEach(function(x){jQuery(A).removeClass(x)});let F=A.attr("data-class");F&&(A.attr("class",F),A.removeAttr("data-class")),jQuery(A).data("animation-running",!1)}},8946:(he,Kt,v)=>{v.d(Kt,{h:()=>lt});var S=v(5619),b=v(7050);const lt=(gt,T,c)=>{var A;if(!T.value)return void c();let z=jQuery("#"+gt).parents("g");if(!z.length)return void c();let{size:O}=T.node;z.css("transform-origin",`${O.x+O.width/2}px ${O.y+O.height/2}px`);let F="",x=null!==(A=T.iteration)&&void 0!==A?A:0,nt=[];(T.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?nt.push(T.value):(nt.push("animation"),nt.push(T.value?"animation-"+T.value:"animation-fadein")),x<0?(nt.push("animation-iteration-infinite"),c(),c=function(){}):x>0&&nt.push("animation-iteration-"+(x+1)),F=nt.join(" "),function(wt){let f=function(){z.data("animate-running")?z.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){z.data("animate-running",!1),setTimeout(function(){wt()},100)}):wt()};z.hasClass("animation")?setTimeout(function(){f()}):f()}(function(){var wt;N(gt),(x>0||x<0)&&z.one("animationiteration",function(){T.slideStatus===S.J.slideStatus||(z.data("animate-running",!1),N(gt),T.slideStatus===S.J.slideStatus&&c())}),z.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(z.data("animate-running",!1),N(gt),T.finish){default:case 0:case 1:break;case 2:var f;(0,b.M)(gt,{node:T.node,value:null===(f=T.node.animate)||void 0===f?void 0:f.out,nodeStatus:T.nodeStatus,slideStatus:T.slideStatus},()=>{z.addClass("hide")})}T.slideStatus===S.J.slideStatus&&c()}),z.attr("data-class",null!==(wt=z.attr("class"))&&void 0!==wt?wt:""),z.addClass(F),z.data("animate-running",!0)})},N=function(gt){var T,c=jQuery("#"+gt).parents("g"),A=null===(T=c.attr("class"))||void 0===T?void 0:T.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);A&&A.forEach(function(O){jQuery(c).removeClass(O)});let z=c.attr("data-class");z&&(c.attr("class",z),c.removeAttr("data-class")),jQuery(c).data("animation-running",!1)}},7657:(he,Kt,v)=>{v.d(Kt,{c:()=>gt});var S=v(9506),b=v(5619),lt=v(5970),N=v(7050);const gt=(c,A,z)=>{var O;if(!A.points||!A.points.length)return void z();let F=jQuery("#"+c),nt=function T(c){let A=[];2===c.length&&c.splice(1,0,[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]);let nt,it,wt,z=1,O=c.length;for(;z<O;){if(nt=c[z-1],it=c[z],wt=c[z+1],(Math.abs(nt[0]-it[0])>=15||Math.abs(nt[1]-it[1])>=15)&&Math.pow(nt[0]-it[0],2)+Math.pow(nt[1]-it[1],2)>=Math.pow(15,2)&&wt&&(Math.abs(nt[0]-wt[0])<=20||Math.abs(nt[1]-wt[1])<=20)&&Math.pow(nt[0]-wt[0],2)+Math.pow(nt[1]-wt[1],2)<=Math.pow(20,2))A.push(it);else{let J=it[0]-nt[0],I=it[1]-nt[1],q=Math.max(Math.abs(J),Math.abs(I));for(var f=0;f<q;f+=15)A.push([nt[0]+J*f/q,nt[1]+I*f/q])}z++}return O>0&&(A.splice(0,0,c[0]),A.push(c[O-1])),A}((ot=>{if(1==ot.length){let{size:W}=A.node;return[[W.x+W.width/2,W.y+W.height/2],...ot]}return[...ot]})(A.points||[])),it=null!==(O=A.iteration)&&void 0!==O?O:0;if(it<0&&(z(),z=function(){}),F.data("work-running")&&it<0)return;F.data("work-running",!0);let B,wt=nt.length,f=Math.max(20,1e3*(A.time||3)/wt),{id:J,type:I,size:q,attribute:rt}=b.J.findNode(c),Q=function(ot){if(A.slideStatus!==b.J.slideStatus)return F.data("work-running",!1),void(A.slideStatus===b.J.slideStatus&&z());if(ot<wt){let _=nt[ot];_&&(B=Object.assign({},q,{x:_[0]-q.width/2,y:_[1]-q.height/2}),Object.assign(rt,(0,S.xW)(I,B,rt)),(0,lt.tD)(window.document.getElementById(J),rt),setTimeout(function(){Q(++ot)},f))}else if(it>0)it--,Q(1);else if(it<0)Q(1);else switch(F.data("work-running",!1),A.slideStatus===b.J.slideStatus&&z(),A.finish){default:case 0:break;case 1:Object.assign(rt,(0,S.xW)(I,q,rt)),(0,lt.tD)(window.document.getElementById(J),rt);break;case 2:var W;(0,N.M)(A.node.id,{node:A.node,value:null===(W=A.node.animate)||void 0===W?void 0:W.out,nodeStatus:A.nodeStatus,slideStatus:A.slideStatus},()=>{F.addClass("hide")})}};Q(1)}},6769:(he,Kt,v)=>{v.d(Kt,{d:()=>lt});var S=v(6611),b=v(5619);const lt=(N,gt,T,c,A)=>{var z,O,F,x,nt,it,wt;if(c.slideStatus!=b.J.slideStatus)return gt.async&&"change-slide"!=gt.async?void 0:void A();if(c.nodeStatus!=b.J.nodeStatus&&(!gt.async||"change-node"==gt.async))return void A();if(!(null!==(z=gt.source)&&void 0!==z&&z.path||null!==(O=gt.source)&&void 0!==O&&O.url))return console.warn(`${N} -> audio no source!`),A(),void(A=()=>{});var f=jQuery("#"+N);let J=null!==(F=gt.iteration)&&void 0!==F?F:0;if(J<0&&(A(),A=function(){}),!(f.data("audio-running")&&J<0)){f.data("audio-running",!0);var I=function(rt){rt.pause(),rt.remove(),f.data("audio-running",!1)},q=new Audio;return q.autoplay=!0,q.loop=0!=J,q.preload="auto",q.controls=!0,q.setAttributeNode(document.createAttribute("playsinline")),q.addEventListener("canplay",function(){var rt=q.play();rt&&rt.then(function(B){var Q;f.data("audio-running",!0),"time"==gt.async?setTimeout(()=>{c.slideStatus===b.J.slideStatus&&(I(q),A(),A=()=>{})},1e3*(null!==(Q=gt.time)&&void 0!==Q?Q:1)):"non-stop"==gt.async&&(A(),A=()=>{})}).catch(function(B){f.data("audio-running",!1),c.slideStatus===b.J.slideStatus&&(A(),A=()=>{})})}),q.addEventListener("timeupdate",function(){switch(gt.async){case"time":case"change-slide":c.slideStatus!==b.J.slideStatus&&(I(this),A(),A=()=>{});break;case"finish-action":T.total>=2&&T.total-T.counter==1&&(I(this),A(),A=()=>{});break;default:case"change-node":c.nodeStatus!==b.J.nodeStatus&&(I(this),A(),A=()=>{});case"non-stop":}}),q.addEventListener("canplaythrough",function(){this.loop&&(J>0?J--:0==J&&(this.loop=!1))}),q.addEventListener("play",function(){}),q.addEventListener("pause",function(){}),q.addEventListener("ended",function(){this.remove(),f.data("audio-running",!1),c.slideStatus===b.J.slideStatus&&(A(),A=()=>{})}),q.onerror=function(){this.remove(),f.data("audio-running",!1),c.slideStatus===b.J.slideStatus&&(A(),A=()=>{})},q.src=(null!==(x=gt.source)&&void 0!==x&&x.path?(null===(nt=S.L.config)||void 0===nt?void 0:nt.readfileuploadurl)+(null===(it=gt.source)||void 0===it?void 0:it.path):null===(wt=gt.source)||void 0===wt?void 0:wt.url)||"",q}}},334:(he,Kt,v)=>{v.d(Kt,{J:()=>z});var S=v(6611),b=v(5619),lt=v(8946),N=v(7657),gt=v(6769),T=v(3591),c=v(2241),A=v(7050);const z=(O,F,x,nt)=>{var it,wt,f;let J={total:0,counter:0},{triggershow:I,triggerrun:q,triggerhide:rt,action:B,audio:Q,slide:ot,media:W}=null!==(it=null===(wt=O.interactive)||void 0===wt?void 0:wt.click)&&void 0!==it?it:{};if(console.log(`node(${O.id}) | nodeStatus(${F}) | slideStatus(${x}) | click`),I){let{id:Pt,ids:ct,time:xt,async:ce}=I;"asynctrue"==ce?(0,T.GD)({id:Pt,ids:ct,nodeStatus:F,slideStatus:x}):"time"==ce&&setTimeout(()=>{(0,T.GD)({id:Pt,ids:ct,nodeStatus:F,slideStatus:x})},1e3*(null!=xt?xt:0))}if(q){let{id:Pt,ids:ct,time:xt,async:ce}=q;"asynctrue"==ce?(0,T.MF)({id:Pt,ids:ct,nodeStatus:F,slideStatus:x}):"time"==ce&&setTimeout(()=>{(0,T.MF)({id:Pt,ids:ct,nodeStatus:F,slideStatus:x})},1e3*(null!=xt?xt:0))}if(rt){let{id:Pt,ids:ct,time:xt,async:ce}=rt;"asynctrue"==ce?(0,T.vi)({id:Pt,ids:ct,nodeStatus:F,slideStatus:x}):"time"==ce&&setTimeout(()=>{(0,T.vi)({id:Pt,ids:ct,nodeStatus:F,slideStatus:x})},1e3*(null!=xt?xt:0))}let _=()=>{setTimeout(()=>{if(J.counter>=J.total){if(nt&&nt(),I){let{id:Pt,ids:ct,async:xt}=I;(!xt||"asyncfalse"==xt)&&(0,T.GD)({id:Pt,ids:ct,nodeStatus:F,slideStatus:x})}if(q){let{id:Pt,ids:ct,async:xt}=q;(!xt||"asyncfalse"==xt)&&(0,T.MF)({id:Pt,ids:ct,nodeStatus:F,slideStatus:x})}if(rt){let{id:Pt,ids:ct,async:xt}=rt;(!xt||"asyncfalse"==xt)&&(0,T.vi)({id:Pt,ids:ct,nodeStatus:F,slideStatus:x})}}})};if(null!=B&&B.value){J.total+=1;let Pt=()=>{J.counter+=1,_()};switch(null==B?void 0:B.value){case"hide":var yt;(0,A.M)(O.id,{node:O,value:null===(yt=O.animate)||void 0===yt?void 0:yt.out,nodeStatus:F,slideStatus:x},()=>{jQuery("#"+O.id).addClass("hide"),Pt()});break;case"points":{let{points:ct,time:xt,iteration:ce,finish:et}=B;ct&&(0,N.c)(O.id,{node:O,points:ct,time:xt,iteration:ce,finish:et,nodeStatus:F,slideStatus:x},Pt);break}default:{let{value:ct,time:xt,iteration:ce,finish:et}=B;(0,lt.h)(O.id,{node:O,value:ct,time:xt,iteration:ce,finish:et,nodeStatus:F,slideStatus:x},Pt);break}}}if(null!=Q&&null!==(f=Q.source)&&void 0!==f&&f.path){J.total+=1;let Pt=()=>{J.counter+=1,_()};(0,gt.d)(O.id,Q,J,{nodeStatus:F,slideStatus:x},Pt)}if(J.total||_(),null!=ot&&ot.id)switch(ot.id){case-1:b.J.runSlide(b.J.slideIdx-1);break;case-2:b.J.runSlide(b.J.slideIdx+1);break;default:var jt;b.J.runSlide(void 0,ot.id,null===(jt=ot.code)||void 0===jt?void 0:jt.toString())}if(null!=W&&W.type){var Lt;let ct=`<div class="popup-media-viewer"><iframe src="${(0,c._)({readfileuploadurl:null===(Lt=S.L.config)||void 0===Lt?void 0:Lt.readfileuploadurl,type:null==W?void 0:W.type,oss:null==W?void 0:W.oss,path:null==W?void 0:W.path,url:null==W?void 0:W.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,xt=jQuery(ct).appendTo(window.document.body);xt.find(".btn-close").click(function(ce){ce.preventDefault(),xt.remove()})}}},3591:(he,Kt,v)=>{v.d(Kt,{GD:()=>N,MF:()=>gt,vi:()=>T});var S=v(5619),b=v(334),lt=v(7050);const N=c=>{c.id?jQuery("#"+c.id).removeClass("hide"):c.ids&&c.ids.forEach(A=>{jQuery("#"+A).removeClass("hide")})},gt=c=>{c.id?(jQuery("#"+c.id).removeClass("hide"),(0,b.J)(S.J.findNode(c.id),c.nodeStatus,c.slideStatus)):c.ids&&c.ids.forEach(A=>{jQuery("#"+A).removeClass("hide"),(0,b.J)(S.J.findNode(A),c.nodeStatus,c.slideStatus)})},T=c=>{if(c.id){var A;let z=S.J.findNode(c.id);(0,lt.M)(c.id,{node:z,value:null===(A=z.animate)||void 0===A?void 0:A.out,nodeStatus:c.nodeStatus,slideStatus:c.slideStatus},()=>{jQuery("#"+c.id).addClass("hide")})}else c.ids&&c.ids.forEach(z=>{var O;let F=S.J.findNode(z);(0,lt.M)(z,{node:F,value:null===(O=F.animate)||void 0===O?void 0:O.out,nodeStatus:c.nodeStatus,slideStatus:c.slideStatus},()=>{jQuery("#"+z).addClass("hide")})})}},5970:(he,Kt,v)=>{v.d(Kt,{cR:()=>rt,rN:()=>ot,t8:()=>B,fn:()=>W,RY:()=>Pt,tD:()=>_,KG:()=>jt,c_:()=>yt,s6:()=>Q,I6:()=>j,in:()=>ct,IA:()=>ft,KP:()=>pt,AE:()=>xt,xJ:()=>It,D_:()=>ce,kE:()=>Gt});var S=v(1999),b=v(7873),lt=v(6315),gt=/^#?[a-fA-F0-9]+$/;const A=(D,P)=>{var s;if("none"==(D=null!==(s=D)&&void 0!==s?s:""))return"none";if("transparent"==D)return"rgba(0,0,0,0)";if(D.includes("rgba("))return D;if(D.includes("rgb(")&&(D=(0,lt.w)(D)),!(D=D.replace(/[^0-9a-fA-F]/g,"")))return"";if(!gt.test(D))return console.error(`hex2rgba -> ${D}: first argument has invalid hexadecimal characters`),"";if("#"===D[0]&&(D=D.slice(1)),3===D.length){let H=D.split("");H.splice(2,0,D[2]),H.splice(1,0,D[1]),H.splice(0,0,D[0]),D=H.join("")}if(6!==D.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var w=[parseInt(D.slice(0,2),16),parseInt(D.slice(2,4),16),parseInt(D.slice(4,6),16)];return P="number"==typeof P?P:parseFloat(P),w.push(P>=0&&P<=1?P:1),"rgba("+w.join(",")+")"};var z=v(2241),O=v(8779),F=v(6611),x=v(9841),nt=v(7945),it=v(9173),wt=v(1281),f=v(5619),J=v(745),I=v(6847),q=v(9506);class rt{constructor(P,s){let w=window.document.querySelector(s);var H;w||(w=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(H=window.document.querySelector(P))||void 0===H||H.appendChild(w));let{svgViewBox:tt,svgSize:zt}=F.L.screen.init();w.setAttributeNS(null,"viewBox",`${tt.x} ${tt.y} ${tt.width} ${tt.height}`),w.setAttribute("id",s.replace("#","")),w.style.display="block",w.style.width=`${zt.width}px`,w.style.height=`${zt.height}px`,w.style.backgroundColor="#fafafa",w.style.cursor="default"}}const B=D=>{jQuery(F.L.target).find("#"+b.F.BACKGROUND_GROUP).empty();let P=Pt(b.F.BACKGROUND_GROUP,"g",void 0,F.L.target);j(P,D),(()=>{let s=window.document.getElementById(null==D?void 0:D.id);jQuery(s).find("#"+b.F.BACKGROUND_GROUP).empty();let w=Pt(b.F.BACKGROUND_GROUP,"g",void 0,s);j(w,D)})()},Q=()=>{let D=F.L.screen.svgViewBox,P=F.L.screen.svgSize;F.L.target&&(F.L.target.setAttributeNS(null,"viewBox",`${D.x} ${D.y} ${D.width} ${D.height}`),F.L.target.style.left=`${P.x}px`,F.L.target.style.top=`${P.y}px`,F.L.target.style.width=`${P.width}px`,F.L.target.style.height=`${P.height}px`)},ot=()=>{jQuery(F.L.target).find(">*:not(defs)").remove()},W=(D,P,s,w,H)=>{let tt;return D?(tt=jQuery(H||F.L.target).find("#"+D).get(0),tt||(tt=window.document.createElementNS("http://www.w3.org/2000/svg",s),tt.setAttribute("id",D),P==S.h.FOREIGNOBJECT&&tt.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(tt).appendTo(H||F.L.target))):(tt=window.document.createElementNS("http://www.w3.org/2000/svg",s),jQuery(tt).appendTo(H||F.L.target)),null!=w&&w.attribute&&_(tt,null==w?void 0:w.attribute),null!=w&&w.style&&yt(tt,null==w?void 0:w.style),null!=w&&w.source&&jt(tt,P,null==w?void 0:w.source),tt},_=(D,P)=>{return jQuery(D).attr((s=Object.assign({},P||{}),null===(w=Object.keys(s))||void 0===w||w.forEach(zt=>{switch(zt){case"fill":break;case"fillRule":var Zt;Object.assign(s,{"fill-rule":null!==(Zt=s.fillRule)&&void 0!==Zt?Zt:null,fillRule:null});break;case"stroke":var Yt;Object.assign(s,{"stroke-width":null!==(Yt=s.strokeWidth)&&void 0!==Yt?Yt:null,strokeWidth:null});break;case"strokeLinecap":var Qt;Object.assign(s,{"stroke-linecap":null!==(Qt=s.strokeLinecap)&&void 0!==Qt?Qt:null,strokeLinecap:null});break;case"strokeLinejoin":var Nt;Object.assign(s,{"stroke-linejoin":null!==(Nt=s.strokeLinejoin)&&void 0!==Nt?Nt:null,strokeLinejoin:null});break;case"strokeMiterlimit":var ht;Object.assign(s,{"stroke-miterlimit":null!==(ht=s.strokeMiterlimit)&&void 0!==ht?ht:null,strokeMiterlimit:null});break;case"strokeDasharray":var Xt;Object.assign(s,{"stroke-dasharray":null!==(Xt=s.strokeDasharray)&&void 0!==Xt?Xt:null,strokeDasharray:null});break;case"strokeDasharrays":var M,d;Object.assign(s,{"stroke-dasharray":null!==(M=null===(d=s.strokeDasharrays)||void 0===d?void 0:d.join(" "))&&void 0!==M?M:null,strokeDasharrays:null});break;case"fontFamily":var K;Object.assign(s,{"font-family":null!==(K=s.fontFamily)&&void 0!==K?K:null,fontFamily:null});break;case"fontWeight":var at;Object.assign(s,{"font-weight":null!==(at=s.fontWeight)&&void 0!==at?at:null,fontWeight:null});break;case"fontStyle":var ut;Object.assign(s,{"font-style":null!==(ut=s.fontStyle)&&void 0!==ut?ut:null,fontStyle:null});break;case"fontSize":var X;Object.assign(s,{"font-size":null!==(X=s.fontSize)&&void 0!==X?X:null,fontSize:null});break;case"textLength":Object.assign(s,{textLength:s.textLength?`${s.textLength}px`:null});break;case"letterSpacing":var E;Object.assign(s,{"letter-spacing":null!==(E=s.letterSpacing)&&void 0!==E?E:null,letterSpacing:null});break;case"wordSpacing":var Y;Object.assign(s,{"word-spacing":null!==(Y=s.wordSpacing)&&void 0!==Y?Y:null,wordSpacing:null});break;case"alignmentBaseline":var st;Object.assign(s,{"alignment-baseline":null!==(st=s.alignmentBaseline)&&void 0!==st?st:null,alignmentBaseline:null});break;case"dominantBaseline":var _t;Object.assign(s,{"dominant-baseline":null!==(_t=s.dominantBaseline)&&void 0!==_t?_t:null,dominantBaseline:null});break;case"textAnchor":var Tt;Object.assign(s,{"text-anchor":null!==(Tt=s.textAnchor)&&void 0!==Tt?Tt:null,textAnchor:null});break;case"textDecoration":var Mt;Object.assign(s,{"text-decoration":null!==(Mt=s.textDecoration)&&void 0!==Mt?Mt:null,textDecoration:null});break;case"transformOrigin":var Ot;Object.assign(s,{"transform-origin":null!==(Ot=s.transformOrigin)&&void 0!==Ot?Ot:null,transformOrigin:null})}}),Object.assign({},null!=s?s:{},{fill:null!=s&&s.fill?A(s.fill,null!==(H=null==s?void 0:s.fillOpacity)&&void 0!==H?H:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=s&&s.stroke?A(s.stroke,null!==(tt=null==s?void 0:s.strokeOpacity)&&void 0!==tt?tt:1):"rgba(0,0,0,0)",strokeOpacity:null}))),D;var s,w,H,tt},yt=(D,P)=>{return jQuery(D).css((s=Object.assign({},P||{}),null===(w=Object.keys(s))||void 0===w||w.forEach(H=>{switch(H){case"padding":Object.assign(s,{padding:s.padding?`${s.padding}px`:null});break;case"borderWidth":var tt;Object.assign(s,s.borderWidth&&s.borderColor?{"border-width":`${s.borderWidth}px`,"border-style":s.borderStyle||"solid","border-color":A(s.borderColor,null!==(tt=s.borderOpacity)&&void 0!==tt?tt:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(s,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(s,{"border-radius":s.borderRadius?`${s.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var zt;Object.assign(s,s.backgroundColor?{"background-color":A(s.backgroundColor,null!==(zt=s.backgroundOpacity)&&void 0!==zt?zt:1)}:{"background-color":""}),Object.assign(s,{backgroundColor:null,backgroundOpacity:null})}}),s)),D;var s,w},jt=(D,P,s)=>{switch(P){case S.h.TEXT:var w,H;jQuery(D).text(null!==(w=null==s||null===(H=s.text)||void 0===H?void 0:H.textContent)&&void 0!==w?w:"");break;case S.h.TSPAN:var tt,zt;jQuery(D).text(null!==(tt=null==s||null===(zt=s.text)||void 0===zt?void 0:zt.textContent)&&void 0!==tt?tt:"");break;case S.h.IMAGE:var Zt,Yt,Qt,Nt,ht;jQuery(D).attr("href",(null==s||null===(Zt=s.image)||void 0===Zt?void 0:Zt.base64)||(null!=s&&null!==(Yt=s.image)&&void 0!==Yt&&Yt.path?(null===(Qt=F.L.config)||void 0===Qt?void 0:Qt.readfileuploadurl)+(null==s||null===(Nt=s.image)||void 0===Nt?void 0:Nt.path):null==s||null===(ht=s.image)||void 0===ht?void 0:ht.url)||"");break;case S.h.FOREIGNOBJECT:switch(null==s?void 0:s.type){case"text":var Xt,M;if(null!==(Xt=s.text)&&void 0!==Xt&&Xt.variableKeywords&&null!==(M=s.text)&&void 0!==M&&M.variableKeywords.length){var d;let h=F.L.variable.getKeys(),C=(null===(d=s.text)||void 0===d?void 0:d.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";s.text.variableKeywords.forEach(p=>{var U=p.replace(/[^a-zA-Z0-9_]/gm,"");if(h.indexOf(U)>=0){var R=F.L.variable.getValue(U);C=C.replace(p,R)}}),jQuery(D).text(C)}else{var K;jQuery(D).text((null===(K=s.text)||void 0===K?void 0:K.textContent)||"")}break;case"html":{var at,ut,X;let h=(null==s||null===(at=s.html)||void 0===at?void 0:at.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>';if(null!==(ut=s.html)&&void 0!==ut&&ut.variableKeywords&&null!==(X=s.html)&&void 0!==X&&X.variableKeywords.length){let C=F.L.variable.getKeys();s.html.variableKeywords.forEach(p=>{var U=p.replace(/[^a-zA-Z0-9_]/gm,"");if(C.indexOf(U)>=0){var R=F.L.variable.getValue(U);h=h.replace(p,R)}})}jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${h}</div>`).find("img[path],video[path],iframe[path]").each((C,p)=>{var U,R;p.setAttribute("src",(null!==(U=null===(R=F.L.config)||void 0===R?void 0:R.readfileuploadurl)&&void 0!==U?U:"")+p.getAttribute("path")),p.removeAttribute("path")});break}case"input":var E,Y,st,_t;if(null!==(E=s.input)&&void 0!==E&&E.input)jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(st=null===(_t=s.input)||void 0===_t?void 0:_t.placeholder)&&void 0!==st?st:""}" maxlength="100" /></div>`);else if(null!==(Y=s.input)&&void 0!==Y&&Y.textarea){var Tt,Mt;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(Tt=null===(Mt=s.input)||void 0===Mt?void 0:Mt.placeholder)&&void 0!==Tt?Tt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var Ot,mt,kt,Ct,Ft;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(Ot=s.image)||void 0===Ot?void 0:Ot.base64)||(null!==(mt=s.image)&&void 0!==mt&&mt.path?(null===(kt=F.L.config)||void 0===kt?void 0:kt.readfileuploadurl)+(null===(Ct=s.image)||void 0===Ct?void 0:Ct.path):null===(Ft=s.image)||void 0===Ft?void 0:Ft.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Vt,$t,ae,se;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Vt=s.iframe)&&void 0!==Vt&&Vt.path?(null===($t=F.L.config)||void 0===$t?void 0:$t.readfileuploadurl)+(null===(ae=s.iframe)||void 0===ae?void 0:ae.path):null===(se=s.iframe)||void 0===se?void 0:se.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var de,xe,Le,Ne,Te;let h=(0,z._)({readfileuploadurl:null===(de=F.L.config)||void 0===de?void 0:de.readfileuploadurl,type:null===(xe=s.embed)||void 0===xe?void 0:xe.type,oss:null===(Le=s.embed)||void 0===Le?void 0:Le.oss,path:null===(Ne=s.embed)||void 0===Ne?void 0:Ne.path,url:null===(Te=s.embed)||void 0===Te?void 0:Te.url});jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${h}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var Me,we;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(Me=null===(we=s.svg)||void 0===we?void 0:we.svgContent)&&void 0!==Me?Me:""}</div>`);break;case"test":{var We,Ge,ei,di;let h=(null==s||null===(We=s.html)||void 0===We?void 0:We.htmlContent)||"";if(null!==(Ge=s.html)&&void 0!==Ge&&Ge.variableKeywords&&null!==(ei=s.html)&&void 0!==ei&&ei.variableKeywords.length){let C=F.L.variable.getKeys();s.html.variableKeywords.forEach(p=>{var U=p.replace(/[^a-zA-Z0-9_]/gm,"");if(C.indexOf(U)>=0){var R=F.L.variable.getValue(U);h=h.replace(p,R)}})}switch(null==s||null===(di=s.test)||void 0===di?void 0:di.type){case"truefalse":var li;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(li=s.test.truefalse)&&void 0!==li&&li.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"singlechoice":var ai;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(ai=s.test.singlechoice)&&void 0!==ai&&ai.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"multichoice":var oi;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(oi=s.test.multichoice)&&void 0!==oi&&oi.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"matching-empty":var hi;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==s||null===(hi=s.test.matching)||void 0===hi?void 0:hi.key}"></div>`);break;case"matching-content":var Rt,G,i;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==s||null===(Rt=s.test.matching)||void 0===Rt?void 0:Rt.key}"><div class="ondrag-item" data-key="${null!==(G=null==s||null===(i=s.test)||void 0===i||null===(i=i.matching)||void 0===i?void 0:i.key)&&void 0!==G?G:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div></div>`);break;case"fill":var n;((null===(n=s.html)||void 0===n?void 0:n.fillKeywords)||[]).forEach(C=>{var p=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${C.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;h=h.replace(new RegExp(C.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),p)}),jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${h}</div></div></div>`);break;case"speech":jQuery(D).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var o,r,l,y,m;jQuery(D).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(o=null!==(r=s.image)&&void 0!==r&&r.path?(null===(l=F.L.config)||void 0===l?void 0:l.readfileuploadurl)+(null===(y=s.image)||void 0===y?void 0:y.path):null===(m=s.image)||void 0===m?void 0:m.url)&&void 0!==o?o:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(D).find("img[path],video[path],iframe[path]").each((C,p)=>{var U,R;p.setAttribute("src",(null!==(U=null===(R=F.L.config)||void 0===R?void 0:R.readfileuploadurl)&&void 0!==U?U:"")+p.getAttribute("path")),p.removeAttribute("path")})}}}},Pt=(D,P,s,w)=>{let H=jQuery(w||F.L.target).find("#"+D).get(0);return H||(H=window.document.createElementNS("http://www.w3.org/2000/svg",P),H.setAttribute("id",D),jQuery(H).appendTo(w||F.L.target)),jQuery(H).attr((null==s?void 0:s.attribute)||{}),jQuery(H).css((null==s?void 0:s.style)||{}),H},ct=(D,P)=>{let s=(0,x.$)(2),w={fill:O.pZ.fill,stroke:O.pZ.stroke,"stroke-width":(0,x.$)(O.pZ.strokeWidth)};return[{element:Pt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:P.x-s,y:P.y-s,width:P.width+2*s,height:P.height+2*s},w)},D),posType:"rect-center"}]},xt=(D,P)=>{let s=[],{size:w}=P,H=(0,x.$)(1),tt=(0,x.$)(2),zt=(0,x.$)(3),Qt=((0,x.$)(5),(0,x.$)(7),(0,x.$)(10)),Nt={stroke:O.u$.stroke,"stroke-width":(0,x.$)(O.u$.strokeWidth),"stroke-linecap":O.u$.strokeLinecap,"stroke-dasharray":O.u$.strokeDasharrays.map(Ft=>(0,x.$)(Ft)).join(" ")},ht={fill:O.bf.fill,stroke:O.bf.stroke,"stroke-width":(0,x.$)(O.bf.strokeWidth)},Xt={fill:O.eD.fill,stroke:O.eD.stroke,"stroke-width":(0,x.$)(O.eD.strokeWidth),width:(0,x.$)(O.eD.width),height:(0,x.$)(O.eD.height)},M={fill:O.eD.fill,stroke:O.eD.stroke,"stroke-width":(0,x.$)(O.eD.strokeWidth),width:(0,x.$)(O.eD.width),height:(0,x.$)(O.eD.height)},d=Pt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:w.x,y:w.y,width:w.width,height:w.height},ht),style:{cursor:"move"}},D);if(Pt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:w.x-H,y1:w.y-H,x2:w.x-H,y2:w.y+w.height+H},Nt)},D),Pt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:w.x-H,y1:w.y-H,x2:w.x+w.width+H,y2:w.y-H},Nt)},D),Pt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:w.x+w.width+H,y1:w.y-H,x2:w.x+w.width+H,y2:w.y+w.height+H},Nt)},D),Pt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:w.x-H,y1:w.y+w.height+H,x2:w.x+w.width+H,y2:w.y+w.height+H},Nt)},D),P.type==S.h.LINE){var E;let{size:Ft}=P,Vt=[];return null===(E=Ft.ratios)||void 0===E||E.forEach(function($t){Vt.push([Ft.x+Ft.width*$t[0],Ft.y+Ft.height*$t[1]])}),Vt.forEach(($t,ae)=>{s.push({posType:`point-${ae}`,element:Pt(`icdt-temp-resize-point-${ae+1}`,"circle",{attribute:Object.assign((0,q.xW)(S.h.CIRCLE,{x:$t[0]-tt-H,y:$t[1]-tt-H,width:M.width,height:M.height},{}),M)},D)})}),s.concat([{element:d,posType:"rect-center"}])}if(P.type==S.h.POLYGON){var Y;let{size:Ft}=P,Vt=[];null===(Y=Ft.ratios)||void 0===Y||Y.forEach(function($t){Vt.push([Ft.x+Ft.width*$t[0],Ft.y+Ft.height*$t[1]])}),Vt.forEach(($t,ae)=>{s.push({posType:`point-${ae}`,element:Pt(`icdt-temp-resize-point-${ae+1}`,"circle",{attribute:Object.assign((0,q.xW)(S.h.CIRCLE,{x:$t[0]-tt-H,y:$t[1]-tt-H,width:M.width,height:M.height},{}),M)},D)})})}let st=Pt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:w.x-Qt,y:w.y-Qt},Xt),style:{cursor:"nw-resize"}},D),_t=Pt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:w.x+w.width+zt,y:w.y-Qt},Xt),style:{cursor:"ne-resize"}},D),Tt=Pt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:w.x-Qt,y:w.y+w.height+zt},Xt),style:{cursor:"sw-resize"}},D),Mt=Pt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:w.x+w.width+zt,y:w.y+w.height+zt},Xt),style:{cursor:"se-resize"}},D),Ot=Pt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:w.x-Qt,y:w.y+w.height/2-tt-H},Xt),style:{cursor:"w-resize"}},D),mt=Pt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:w.x+w.width/2-tt-H,y:w.y-Qt},Xt),style:{cursor:"n-resize"}},D),kt=Pt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:w.x+w.width+zt,y:w.y+w.height/2-tt-H},Xt),style:{cursor:"e-resize"}},D),Ct=Pt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:w.x+w.width/2-tt-H,y:w.y+w.height+zt},Xt),style:{cursor:"s-resize"}},D);return s.concat([{element:d,posType:"rect-center"},{element:st,posType:"rect-top-left"},{element:_t,posType:"rect-top-right"},{element:Tt,posType:"rect-bottom-left"},{element:Mt,posType:"rect-bottom-right"},{element:Ot,posType:"rect-left"},{element:mt,posType:"rect-top"},{element:kt,posType:"rect-right"},{element:Ct,posType:"rect-bottom"}])},ce=(D,P,s)=>{let w=(0,x.$)(1),H=(0,x.$)(2),tt=(0,x.$)(5),zt={stroke:O.u$.stroke,"stroke-width":(0,x.$)(O.u$.strokeWidth),"stroke-linecap":O.u$.strokeLinecap},Zt={fill:O.bf.fill,stroke:O.bf.stroke,"stroke-width":(0,x.$)(O.bf.strokeWidth)},Yt={fill:O.eD.fill,stroke:O.eD.stroke,"stroke-width":(0,x.$)(O.eD.strokeWidth),width:(0,x.$)(O.eD.width),height:(0,x.$)(O.eD.height)},Qt={fill:O.l6.fill,rx:(0,x.$)(O.l6.rx)},Nt={fill:O.T2.fill,"alignment-baseline":O.T2.alignmentBaseline,"text-anchor":O.T2.textAnchor,"font-size":(0,x.$)(O.T2.fontSize)},ht={fill:O.IB.fill,stroke:O.IB.stroke,"stroke-width":(0,x.$)(O.IB.strokeWidth)},at=(Pt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:s.x-w,y1:s.y-w,x2:s.x-w,y2:s.y+s.height+w},zt)},D),Pt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:s.x-w,y1:s.y-w,x2:s.x+s.width+w,y2:s.y-w},zt)},D),Pt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:s.x+s.width+w,y1:s.y-w,x2:s.x+s.width+w,y2:s.y+s.height+w},zt)},D),Pt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:s.x-w,y1:s.y+s.height+w,x2:s.x+s.width+w,y2:s.y+s.height+w},zt)},D),Pt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:s.x,y:s.y,width:s.width,height:s.height},Zt)},D)),ut=`${s.width} x ${s.height}`,X=8*ut.length;return Pt("icdt-temp-select-rect-text","rect",{attribute:Object.assign({x:s.x+s.width/2-(0,x.$)(X/2),y:s.y+s.height+(0,x.$)(10),width:(0,x.$)(X),height:(0,x.$)(20)},Qt)},D),Pt("icdt-temp-select-text","text",{attribute:Object.assign({x:s.x+s.width/2,y:s.y+s.height+(0,x.$)(20)},Nt)},D).textContent=ut,P.length>1&&P.forEach(Ft=>{let{size:Vt}=Ft;Pt("icdt-temp-select-rect-node-"+Ft.id,"rect",{attribute:Object.assign({x:Vt.x,y:Vt.y,width:Vt.width,height:Vt.height},ht)},D)}),[{element:at,posType:"rect-center"},{element:Pt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:s.x-tt,y:s.y-tt},Yt),style:{cursor:"nw-resize"}},D),posType:"rect-top-left"},{element:Pt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:s.x+s.width-H,y:s.y-tt},Yt),style:{cursor:"ne-resize"}},D),posType:"rect-top-right"},{element:Pt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:s.x-tt,y:s.y+s.height-H},Yt),style:{cursor:"sw-resize"}},D),posType:"rect-bottom-left"},{element:Pt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:s.x+s.width-H,y:s.y+s.height-H},Yt),style:{cursor:"se-resize"}},D),posType:"rect-bottom-right"},{element:Pt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:s.x-tt,y:s.y+s.height/2-H-w},Yt),style:{cursor:"w-resize"}},D),posType:"rect-left"},{element:Pt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:s.x+s.width/2-H-w,y:s.y-tt},Yt),style:{cursor:"n-resize"}},D),posType:"rect-top"},{element:Pt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:s.x+s.width-H,y:s.y+s.height/2-H-w},Yt),style:{cursor:"e-resize"}},D),posType:"rect-right"},{element:Pt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:s.x+s.width/2-H-w,y:s.y+s.height-H},Yt),style:{cursor:"s-resize"}},D),posType:"rect-bottom"}]},It=(D,P)=>{let s=(0,x.$)(1),w={stroke:O.u$.stroke,"stroke-width":(0,x.$)(O.u$.strokeWidth),"stroke-linecap":O.u$.strokeLinecap},H={fill:O.bf.fill,stroke:O.bf.stroke,"stroke-width":(0,x.$)(O.bf.strokeWidth)};return Pt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:P.x-s,y1:P.y,x2:P.x-s,y2:P.y+P.height},w)},D),Pt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:P.x,y1:P.y-s,x2:P.x+P.width,y2:P.y-s},w)},D),Pt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:P.x+P.width+s,y1:P.y,x2:P.x+P.width+s,y2:P.y+P.height},w)},D),Pt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:P.x,y1:P.y+P.height+s,x2:P.x+P.width,y2:P.y+P.height+s},w)},D),[{element:Pt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:P.x,y:P.y,width:P.width,height:P.height},H)},D),posType:"rect-center"}]},pt=(D,P)=>((0,x.$)(-1),(0,x.$)(O.WR.strokeWidth),(0,x.$)(O.WR.strokeDasharray),Pt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:P.x,y:P.y,width:P.width,height:P.height,class:"cursor-draw"},{fill:O.lq.fill})},D),[]),ft=(D,P)=>{let s={fill:O.$u.fill,stroke:O.$u.stroke,"stroke-width":(0,x.$)(O.$u.strokeWidth),"stroke-dasharray":(0,x.$)(O.$u.strokeDasharray)};jQuery(D).empty(),P.forEach(w=>{var H,tt;let{size:zt}=w;if(!w.idx)return;Pt("icdt-temp-index-rect-node-"+w.id,"rect",{attribute:Object.assign({x:zt.x-5,y:zt.y-5,width:zt.width+10,height:zt.height+10},s)},D);let{element:Zt}=(0,J.$)(Math.ceil(1e9*Math.random()),{size:{x:zt.x-76,y:zt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(H=w.idx)&&void 0!==H?H:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(tt=w.time)&&void 0!==tt?tt:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},D);Zt.classList.add("node-input"),jQuery(Zt).on("change",'input[name="idx"]',Yt=>{var Qt;w.idx=parseInt(null!==(Qt=Yt.target.value)&&void 0!==Qt?Qt:"0")}).on("change",'input[name="time"]',Yt=>{var Qt;w.time=parseFloat(null!==(Qt=Yt.target.value)&&void 0!==Qt?Qt:"0")}).on("click",'button[name="remove"]',Yt=>{w.idx=0,w.time=null,ft(D,P)})})},j=(D,P)=>{var s,w,H,tt,zt,Zt;let{color:Yt,opacity:Qt,path:Nt,url:ht,base64:Xt}=null!==(s=null==P||null===(w=P.svg)||void 0===w?void 0:w.background)&&void 0!==s?s:{},{x:M,y:d,width:K,height:at}=null!==(H=null==P||null===(tt=P.svg)||void 0===tt?void 0:tt.viewBox)&&void 0!==H?H:{x:0,y:0,width:0,height:0};(0,I.L)(void 0,{size:{x:0,y:(0,x.$)(-10),width:100,height:20},attribute:{fill:"#999",textAnchor:"start",alignmentBaseline:"central",fontSize:(0,x.$)(12),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(zt=null!==(Zt=null==P?void 0:P.name)&&void 0!==Zt?Zt:null==P?void 0:P.code)&&void 0!==zt?zt:void 0}}},D),(0,nt.a)(void 0,{size:{x:M,y:d,width:K,height:at},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,x.$)(1),strokeDasharray:(0,x.$)(10),class:"hide-on-viewer"}},D),Yt&&(0,nt.a)(void 0,{size:{x:M,y:d,width:K,height:at},attribute:{fill:Yt,fillOpacity:Qt}},D),Nt&&(0,it.B)(void 0,{size:{x:M,y:d,width:K,height:at},source:{type:"image",image:{path:Nt,url:ht,base64:Xt}}},D)},Gt=(D,P,s)=>{var w;switch(jQuery(D).empty(),null===(w=P.test)||void 0===w?void 0:w.type){case"truefalse":var H;if(null!==(H=P.test)&&void 0!==H&&H.showselection){var tt,zt,Zt;let Ot=null==P||null===(tt=P.test)||void 0===tt||null===(tt=tt.answer)||void 0===tt||null===(tt=tt.truefalse)||void 0===tt?void 0:tt.value;null===(zt=P.svg)||void 0===zt||zt.nodes.filter(mt=>{var kt;return"truefalse"==(null===(kt=mt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)&&mt.id!=Ot}).forEach(mt=>{var kt;let{x:Ft,y:Vt,width:$t,height:ae}=null!==(kt=null==mt?void 0:mt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,wt.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Vt-.5,width:$t+1,height:ae+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},D)}),null!=P&&null!==(Zt=P.test)&&void 0!==Zt&&null!==(Zt=Zt.answer)&&void 0!==Zt&&Zt.truefalse&&Ot&&(mt=>{let kt=f.J.findNode(Ot),{x:Ft,y:Vt,width:$t,height:ae}=null!==(mt=null==kt?void 0:kt.size)&&void 0!==mt?mt:{x:0,y:0,width:0,height:0};(0,wt.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-2,y:Vt-2,width:$t+4,height:ae+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},D)})()}break;case"singlechoice":var Yt;if(null!==(Yt=P.test)&&void 0!==Yt&&Yt.showselection){var Qt,Nt,ht;let Ot=null==P||null===(Qt=P.test)||void 0===Qt||null===(Qt=Qt.answer)||void 0===Qt||null===(Qt=Qt.singlechoice)||void 0===Qt?void 0:Qt.value;null===(Nt=P.svg)||void 0===Nt||Nt.nodes.filter(mt=>{var kt;return"singlechoice"==(null===(kt=mt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)&&mt.id!=Ot}).forEach(mt=>{var kt;let{x:Ft,y:Vt,width:$t,height:ae}=null!==(kt=null==mt?void 0:mt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,wt.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Vt-.5,width:$t+1,height:ae+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},D)}),null!=P&&null!==(ht=P.test)&&void 0!==ht&&null!==(ht=ht.answer)&&void 0!==ht&&ht.singlechoice&&Ot&&(mt=>{let kt=f.J.findNode(Ot),{x:Ft,y:Vt,width:$t,height:ae}=null!==(mt=null==kt?void 0:kt.size)&&void 0!==mt?mt:{x:0,y:0,width:0,height:0};(0,wt.K)(Math.ceil(1e9*Math.random()),{size:{x:Ft-2,y:Vt-2,width:$t+4,height:ae+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},D)})()}break;case"multichoice":var Xt;if(null!==(Xt=P.test)&&void 0!==Xt&&Xt.showselection){var M,d,K,at;let Ot=null!==(M=null==P||null===(d=P.test)||void 0===d||null===(d=d.answer)||void 0===d||null===(d=d.multichoice)||void 0===d?void 0:d.map(mt=>mt.value))&&void 0!==M?M:[];var ut;null===(K=P.svg)||void 0===K||K.nodes.filter(mt=>{var kt;return"multichoice"==(null===(kt=mt.source)||void 0===kt||null===(kt=kt.test)||void 0===kt?void 0:kt.type)&&!Ot.includes(mt.id)}).forEach(mt=>{var kt;let{x:Ft,y:Vt,width:$t,height:ae}=null!==(kt=null==mt?void 0:mt.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,nt.a)(Math.ceil(1e9*Math.random()),{size:{x:Ft-.5,y:Vt-.5,width:$t+1,height:ae+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},D)}),null!=P&&null!==(at=P.test)&&void 0!==at&&null!==(at=at.answer)&&void 0!==at&&at.multichoice&&Ot.length&&(null==P||null===(ut=P.test)||void 0===ut||null===(ut=ut.answer)||void 0===ut||ut.multichoice.forEach(mt=>{var kt;let Ct=f.J.findNode(mt.value),{x:Vt,y:$t,width:ae,height:se}=null!==(kt=null==Ct?void 0:Ct.size)&&void 0!==kt?kt:{x:0,y:0,width:0,height:0};(0,nt.a)(Math.ceil(1e9*Math.random()),{size:{x:Vt-2,y:$t-2,width:ae+4,height:se+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},D)}))}break;case"fill":var X,E;null!=P&&null!==(X=P.test)&&void 0!==X&&null!==(X=X.answer)&&void 0!==X&&X.fill&&(null==P||null===(E=P.test)||void 0===E||null===(E=E.answer)||void 0===E||E.fill.forEach(Ot=>{jQuery("#"+s.id).find(`input[type="text"][data-key="${Ot.key}"]`).val(Ot.value)}));break;case"matching":var Y,st,_t,Tt;if(null!=P&&null!==(Y=P.test)&&void 0!==Y&&null!==(Y=Y.answer)&&void 0!==Y&&Y.matching)if("matching-empty"==(null===(st=s.source)||void 0===st||null===(st=st.test)||void 0===st?void 0:st.type))null==P||null===(Tt=P.test)||void 0===Tt||null===(Tt=Tt.answer)||void 0===Tt||Tt.matching.filter(Ot=>{var mt;return Ot.key==(null===(mt=s.source)||void 0===mt||null===(mt=mt.test)||void 0===mt||null===(mt=mt.matching)||void 0===mt?void 0:mt.key)}).forEach(Ot=>{});else if("matching-content"==(null===(_t=s.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)){var Mt;null==P||null===(Mt=P.test)||void 0===Mt||null===(Mt=Mt.answer)||void 0===Mt||Mt.matching.filter(Ot=>{var mt;return Ot.value==(null===(mt=s.source)||void 0===mt||null===(mt=mt.test)||void 0===mt||null===(mt=mt.matching)||void 0===mt?void 0:mt.key)}).forEach(Ot=>{})}}}},2241:(he,Kt,v)=>{v.d(Kt,{_:()=>lt});var S=v(8338);const lt=T=>{switch(null==T?void 0:T.type){case S.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+T.readfileuploadurl+T.path;case S.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+T.readfileuploadurl+T.path;case S.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+T.readfileuploadurl+T.path;case S.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+T.readfileuploadurl+T.path;case S.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+T.readfileuploadurl+T.path;case S.S.HTML:case S.S.IMAGE_ANIMATION:case S.S.PHET:return""+T.readfileuploadurl+T.path;case S.S.ZIP:case S.S.SCORM:var c;return"imsmanifest.xml"==(null===(c=T.path)||void 0===c||null===(c=c.split("/"))||void 0===c?void 0:c.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+T.readfileuploadurl+T.path:""+T.readfileuploadurl+T.path;case S.S.TRACK:case S.S.TEXT:return""+T.readfileuploadurl+T.path;case S.S.LINK:switch(T.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+T.url;case 1002:var A;return null!==(A=N(T.url))&&void 0!==A?A:"";case 1005:var z;return null!==(z=T.url)&&void 0!==z?z:"";default:var O;return null!==(O=T.url)&&void 0!==O?O:""}default:return""+T.readfileuploadurl+T.path}},N=T=>{let c=gt(T);return c?"https://www.youtube.com/embed/"+c+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},gt=T=>{let c=null==T?void 0:T.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return c&&c.length>=2?c[1]:null}},1131:(he,Kt,v)=>{function S(){}function b(t){return null==t?S:function(){return this.querySelector(t)}}function gt(){return[]}function T(t){return null==t?gt:function(){return this.querySelectorAll(t)}}function z(t){return function(){return this.matches(t)}}function O(t){return function(e){return e.matches(t)}}v.d(Kt,{qrM:()=>aa,n8j:()=>la});var F=Array.prototype.find;function nt(){return this.firstElementChild}var wt=Array.prototype.filter;function f(){return Array.from(this.children)}function rt(t){return new Array(t.length)}function Q(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function W(t,e,a,u,g,k){for(var V,L=0,Z=e.length,vt=k.length;L<vt;++L)(V=e[L])?(V.__data__=k[L],u[L]=V):a[L]=new Q(t,k[L]);for(;L<Z;++L)(V=e[L])&&(g[L]=V)}function _(t,e,a,u,g,k,L){var V,Z,ie,vt=new Map,bt=e.length,Jt=k.length,Ht=new Array(bt);for(V=0;V<bt;++V)(Z=e[V])&&(Ht[V]=ie=L.call(Z,Z.__data__,V,e)+"",vt.has(ie)?g[V]=Z:vt.set(ie,Z));for(V=0;V<Jt;++V)ie=L.call(t,k[V],V,k)+"",(Z=vt.get(ie))?(u[V]=Z,Z.__data__=k[V],vt.delete(ie)):a[V]=new Q(t,k[V]);for(V=0;V<bt;++V)(Z=e[V])&&vt.get(Ht[V])===Z&&(g[V]=Z)}function yt(t){return t.__data__}function Lt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function It(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Q.prototype={constructor:Q,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var s="http://www.w3.org/1999/xhtml";const w={svg:"http://www.w3.org/2000/svg",xhtml:s,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function H(t){var e=t+="",a=e.indexOf(":");return a>=0&&"xmlns"!==(e=t.slice(0,a))&&(t=t.slice(a+1)),w.hasOwnProperty(e)?{space:w[e],local:t}:t}function tt(t){return function(){this.removeAttribute(t)}}function zt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zt(t,e){return function(){this.setAttribute(t,e)}}function Yt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Qt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttribute(t):this.setAttribute(t,a)}}function Nt(t,e){return function(){var a=e.apply(this,arguments);null==a?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,a)}}function Xt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function M(t){return function(){this.style.removeProperty(t)}}function d(t,e,a){return function(){this.style.setProperty(t,e,a)}}function K(t,e,a){return function(){var u=e.apply(this,arguments);null==u?this.style.removeProperty(t):this.style.setProperty(t,u,a)}}function ut(t,e){return t.style.getPropertyValue(e)||Xt(t).getComputedStyle(t,null).getPropertyValue(e)}function X(t){return function(){delete this[t]}}function E(t,e){return function(){this[t]=e}}function Y(t,e){return function(){var a=e.apply(this,arguments);null==a?delete this[t]:this[t]=a}}function _t(t){return t.trim().split(/^|\s+/)}function Tt(t){return t.classList||new Mt(t)}function Mt(t){this._node=t,this._names=_t(t.getAttribute("class")||"")}function Ot(t,e){for(var a=Tt(t),u=-1,g=e.length;++u<g;)a.add(e[u])}function mt(t,e){for(var a=Tt(t),u=-1,g=e.length;++u<g;)a.remove(e[u])}function kt(t){return function(){Ot(this,t)}}function Ct(t){return function(){mt(this,t)}}function Ft(t,e){return function(){(e.apply(this,arguments)?Ot:mt)(this,t)}}function $t(){this.textContent=""}function ae(t){return function(){this.textContent=t}}function se(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function xe(){this.innerHTML=""}function Le(t){return function(){this.innerHTML=t}}function Ne(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Me(){this.nextSibling&&this.parentNode.appendChild(this)}function We(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ei(t){return function(){var e=this.ownerDocument,a=this.namespaceURI;return a===s&&e.documentElement.namespaceURI===s?e.createElement(t):e.createElementNS(a,t)}}function di(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function li(t){var e=H(t);return(e.local?di:ei)(e)}function oi(){return null}function Rt(){var t=this.parentNode;t&&t.removeChild(this)}function i(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function n(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function m(t){return function(){var e=this.__on;if(e){for(var k,a=0,u=-1,g=e.length;a<g;++a)k=e[a],t.type&&k.type!==t.type||k.name!==t.name?e[++u]=k:this.removeEventListener(k.type,k.listener,k.options);++u?e.length=u:delete this.__on}}}function h(t,e,a){return function(){var g,u=this.__on,k=function l(t){return function(e){t.call(this,e,this.__data__)}}(e);if(u)for(var L=0,V=u.length;L<V;++L)if((g=u[L]).type===t.type&&g.name===t.name)return this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=k,g.options=a),void(g.value=e);this.addEventListener(t.type,k,a),g={type:t.type,name:t.name,value:e,listener:k,options:a},u?u.push(g):this.__on=[g]}}function p(t,e,a){var u=Xt(t),g=u.CustomEvent;"function"==typeof g?g=new g(e,a):(g=u.document.createEvent("Event"),a?(g.initEvent(e,a.bubbles,a.cancelable),g.detail=a.detail):g.initEvent(e,!1,!1)),t.dispatchEvent(g)}function U(t,e){return function(){return p(this,t,e)}}function R(t,e){return function(){return p(this,t,e.apply(this,arguments))}}Mt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var At=[null];function Bt(t,e){this._groups=t,this._parents=e}function ee(){return new Bt([[document.documentElement]],At)}Bt.prototype=ee.prototype={constructor:Bt,select:function lt(t){"function"!=typeof t&&(t=b(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Z,vt,k=e[g],L=k.length,V=u[g]=new Array(L),bt=0;bt<L;++bt)(Z=k[bt])&&(vt=t.call(Z,Z.__data__,bt,k))&&("__data__"in Z&&(vt.__data__=Z.__data__),V[bt]=vt);return new Bt(u,this._parents)},selectAll:function A(t){t="function"==typeof t?function c(t){return function(){return function N(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):T(t);for(var e=this._groups,a=e.length,u=[],g=[],k=0;k<a;++k)for(var Z,L=e[k],V=L.length,vt=0;vt<V;++vt)(Z=L[vt])&&(u.push(t.call(Z,Z.__data__,vt,L)),g.push(Z));return new Bt(u,g)},selectChild:function it(t){return this.select(null==t?nt:function x(t){return function(){return F.call(this.children,t)}}("function"==typeof t?t:O(t)))},selectChildren:function I(t){return this.selectAll(null==t?f:function J(t){return function(){return wt.call(this.children,t)}}("function"==typeof t?t:O(t)))},filter:function q(t){"function"!=typeof t&&(t=z(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Z,k=e[g],L=k.length,V=u[g]=[],vt=0;vt<L;++vt)(Z=k[vt])&&t.call(Z,Z.__data__,vt,k)&&V.push(Z);return new Bt(u,this._parents)},data:function jt(t,e){if(!arguments.length)return Array.from(this,yt);var a=e?_:W,u=this._parents,g=this._groups;"function"!=typeof t&&(t=function ot(t){return function(){return t}}(t));for(var k=g.length,L=new Array(k),V=new Array(k),Z=new Array(k),vt=0;vt<k;++vt){var bt=u[vt],Jt=g[vt],Ht=Jt.length,ie=Lt(t.call(bt,bt&&bt.__data__,vt,u)),Oe=ie.length,Ae=V[vt]=new Array(Oe),Wt=L[vt]=new Array(Oe);a(bt,Jt,Ae,Wt,Z[vt]=new Array(Ht),ie,e);for(var fe,pe,oe=0,ne=0;oe<Oe;++oe)if(fe=Ae[oe]){for(oe>=ne&&(ne=oe+1);!(pe=Wt[ne])&&++ne<Oe;);fe._next=pe||null}}return(L=new Bt(L,u))._enter=V,L._exit=Z,L},enter:function B(){return new Bt(this._enter||this._groups.map(rt),this._parents)},exit:function Pt(){return new Bt(this._exit||this._groups.map(rt),this._parents)},join:function ct(t,e,a){var u=this.enter(),g=this,k=this.exit();return"function"==typeof t?(u=t(u))&&(u=u.selection()):u=u.append(t+""),null!=e&&(g=e(g))&&(g=g.selection()),null==a?k.remove():a(k),u&&g?u.merge(g).order():g},merge:function xt(t){for(var e=t.selection?t.selection():t,a=this._groups,u=e._groups,g=a.length,L=Math.min(g,u.length),V=new Array(g),Z=0;Z<L;++Z)for(var ie,vt=a[Z],bt=u[Z],Jt=vt.length,Ht=V[Z]=new Array(Jt),Oe=0;Oe<Jt;++Oe)(ie=vt[Oe]||bt[Oe])&&(Ht[Oe]=ie);for(;Z<g;++Z)V[Z]=a[Z];return new Bt(V,this._parents)},selection:function _e(){return this},order:function ce(){for(var t=this._groups,e=-1,a=t.length;++e<a;)for(var L,u=t[e],g=u.length-1,k=u[g];--g>=0;)(L=u[g])&&(k&&4^L.compareDocumentPosition(k)&&k.parentNode.insertBefore(L,k),k=L);return this},sort:function et(t){function e(Jt,Ht){return Jt&&Ht?t(Jt.__data__,Ht.__data__):!Jt-!Ht}t||(t=It);for(var a=this._groups,u=a.length,g=new Array(u),k=0;k<u;++k){for(var vt,L=a[k],V=L.length,Z=g[k]=new Array(V),bt=0;bt<V;++bt)(vt=L[bt])&&(Z[bt]=vt);Z.sort(e)}return new Bt(g,this._parents).order()},call:function pt(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function ft(){return Array.from(this)},node:function j(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var u=t[e],g=0,k=u.length;g<k;++g){var L=u[g];if(L)return L}return null},size:function Gt(){let t=0;for(const e of this)++t;return t},empty:function D(){return!this.node()},each:function P(t){for(var e=this._groups,a=0,u=e.length;a<u;++a)for(var V,g=e[a],k=0,L=g.length;k<L;++k)(V=g[k])&&t.call(V,V.__data__,k,g);return this},attr:function ht(t,e){var a=H(t);if(arguments.length<2){var u=this.node();return a.local?u.getAttributeNS(a.space,a.local):u.getAttribute(a)}return this.each((null==e?a.local?zt:tt:"function"==typeof e?a.local?Nt:Qt:a.local?Yt:Zt)(a,e))},style:function at(t,e,a){return arguments.length>1?this.each((null==e?M:"function"==typeof e?K:d)(t,e,null==a?"":a)):ut(this.node(),t)},property:function st(t,e){return arguments.length>1?this.each((null==e?X:"function"==typeof e?Y:E)(t,e)):this.node()[t]},classed:function Vt(t,e){var a=_t(t+"");if(arguments.length<2){for(var u=Tt(this.node()),g=-1,k=a.length;++g<k;)if(!u.contains(a[g]))return!1;return!0}return this.each(("function"==typeof e?Ft:e?kt:Ct)(a,e))},text:function de(t){return arguments.length?this.each(null==t?$t:("function"==typeof t?se:ae)(t)):this.node().textContent},html:function Te(t){return arguments.length?this.each(null==t?xe:("function"==typeof t?Ne:Le)(t)):this.node().innerHTML},raise:function we(){return this.each(Me)},lower:function Ge(){return this.each(We)},append:function ai(t){var e="function"==typeof t?t:li(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function hi(t,e){var a="function"==typeof t?t:li(t),u=null==e?oi:"function"==typeof e?e:b(e);return this.select(function(){return this.insertBefore(a.apply(this,arguments),u.apply(this,arguments)||null)})},remove:function G(){return this.each(Rt)},clone:function o(t){return this.select(t?n:i)},datum:function r(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function C(t,e,a){var g,L,u=function y(t){return t.trim().split(/^|\s+/).map(function(e){var a="",u=e.indexOf(".");return u>=0&&(a=e.slice(u+1),e=e.slice(0,u)),{type:e,name:a}})}(t+""),k=u.length;if(!(arguments.length<2)){for(V=e?h:m,g=0;g<k;++g)this.each(V(u[g],e,a));return this}var V=this.node().__on;if(V)for(var bt,Z=0,vt=V.length;Z<vt;++Z)for(g=0,bt=V[Z];g<k;++g)if((L=u[g]).type===bt.type&&L.name===bt.name)return bt.value},dispatch:function St(t,e){return this.each(("function"==typeof e?R:U)(t,e))},[Symbol.iterator]:function*Et(){for(var t=this._groups,e=0,a=t.length;e<a;++e)for(var L,u=t[e],g=0,k=u.length;g<k;++g)(L=u[g])&&(yield L)}};const me=ee;var Ee={value:()=>{}};function be(){for(var u,t=0,e=arguments.length,a={};t<e;++t){if(!(u=arguments[t]+"")||u in a||/[\s.]/.test(u))throw new Error("illegal type: "+u);a[u]=[]}return new ke(a)}function ke(t){this._=t}function ar(t,e){for(var g,a=0,u=t.length;a<u;++a)if((g=t[a]).name===e)return g.value}function gn(t,e,a){for(var u=0,g=t.length;u<g;++u)if(t[u].name===e){t[u]=Ee,t=t.slice(0,u).concat(t.slice(u+1));break}return null!=a&&t.push({name:e,value:a}),t}ke.prototype=be.prototype={constructor:ke,on:function(t,e){var g,a=this._,u=function lr(t,e){return t.trim().split(/^|\s+/).map(function(a){var u="",g=a.indexOf(".");if(g>=0&&(u=a.slice(g+1),a=a.slice(0,g)),a&&!e.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:u}})}(t+"",a),k=-1,L=u.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++k<L;)if(g=(t=u[k]).type)a[g]=gn(a[g],t.name,e);else if(null==e)for(g in a)a[g]=gn(a[g],t.name,null);return this}for(;++k<L;)if((g=(t=u[k]).type)&&(g=ar(a[g],t.name)))return g},copy:function(){var t={},e=this._;for(var a in e)t[a]=e[a].slice();return new ke(t)},call:function(t,e){if((g=arguments.length-2)>0)for(var g,k,a=new Array(g),u=0;u<g;++u)a[u]=arguments[u+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=0,g=(k=this._[t]).length;u<g;++u)k[u].value.apply(e,a)},apply:function(t,e,a){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var u=this._[t],g=0,k=u.length;g<k;++g)u[g].value.apply(e,a)}};const or=be;var Ni,Ti,mi=0,Oi=0,Si=0,yn=1e3,Di=0,ci=0,ji=0,ki="object"==typeof performance&&performance.now?performance:Date,mn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return ci||(mn(sr),ci=ki.now()+ji)}function sr(){ci=0}function zi(){this._call=this._time=this._next=null}function pn(t,e,a){var u=new zi;return u.restart(t,e,a),u}function wn(){ci=(Di=ki.now())+ji,mi=Oi=0;try{!function ur(){Xi(),++mi;for(var e,t=Ni;t;)(e=ci-t._time)>=0&&t._call.call(void 0,e),t=t._next;--mi}()}finally{mi=0,function hr(){for(var t,a,e=Ni,u=1/0;e;)e._call?(u>e._time&&(u=e._time),t=e,e=e._next):(a=e._next,e._next=null,e=t?t._next=a:Ni=a);Ti=t,qi(u)}(),ci=0}}function dr(){var t=ki.now(),e=t-Di;e>yn&&(ji-=e,Di=t)}function qi(t){mi||(Oi&&(Oi=clearTimeout(Oi)),t-ci>24?(t<1/0&&(Oi=setTimeout(wn,t-ki.now()-ji)),Si&&(Si=clearInterval(Si))):(Si||(Di=ki.now(),Si=setInterval(dr,yn)),mi=1,mn(wn)))}function xn(t,e,a){var u=new zi;return u.restart(g=>{u.stop(),t(g+e)},e=null==e?0:+e,a),u}zi.prototype=pn.prototype={constructor:zi,restart:function(t,e,a){if("function"!=typeof t)throw new TypeError("callback is not a function");a=(null==a?Xi():+a)+(null==e?0:+e),!this._next&&Ti!==this&&(Ti?Ti._next=this:Ni=this,Ti=this),this._call=t,this._time=a,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cr=or("start","end","cancel","interrupt"),vr=[],bn=0,Ki=3;function Fi(t,e,a,u,g,k){var L=t.__transition;if(L){if(a in L)return}else t.__transition={};!function fr(t,e,a){var g,u=t.__transition;function L(vt){var bt,Jt,Ht,ie;if(1!==a.state)return Z();for(bt in u)if((ie=u[bt]).name===a.name){if(ie.state===Ki)return xn(L);4===ie.state?(ie.state=6,ie.timer.stop(),ie.on.call("interrupt",t,t.__data__,ie.index,ie.group),delete u[bt]):+bt<e&&(ie.state=6,ie.timer.stop(),ie.on.call("cancel",t,t.__data__,ie.index,ie.group),delete u[bt])}if(xn(function(){a.state===Ki&&(a.state=4,a.timer.restart(V,a.delay,a.time),V(vt))}),a.state=2,a.on.call("start",t,t.__data__,a.index,a.group),2===a.state){for(a.state=Ki,g=new Array(Ht=a.tween.length),bt=0,Jt=-1;bt<Ht;++bt)(ie=a.tween[bt].value.call(t,t.__data__,a.index,a.group))&&(g[++Jt]=ie);g.length=Jt+1}}function V(vt){for(var bt=vt<a.duration?a.ease.call(null,vt/a.duration):(a.timer.restart(Z),a.state=5,1),Jt=-1,Ht=g.length;++Jt<Ht;)g[Jt].call(t,bt);5===a.state&&(a.on.call("end",t,t.__data__,a.index,a.group),Z())}function Z(){for(var vt in a.state=6,a.timer.stop(),delete u[e],u)return;delete t.__transition}u[e]=a,a.timer=pn(function k(vt){a.state=1,a.timer.restart(L,a.delay,a.time),a.delay<=vt&&L(vt-a.delay)},0,a.time)}(t,a,{name:e,index:u,group:g,on:cr,tween:vr,time:k.time,delay:k.delay,duration:k.duration,ease:k.ease,timer:null,state:bn})}function en(t,e){var a=Ze(t,e);if(a.state>bn)throw new Error("too late; already scheduled");return a}function qe(t,e){var a=Ze(t,e);if(a.state>Ki)throw new Error("too late; already running");return a}function Ze(t,e){var a=t.__transition;if(!a||!(a=a[e]))throw new Error("transition not found");return a}function si(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,a,u,g,k){var L,V,Z;return(L=Math.sqrt(t*t+e*e))&&(t/=L,e/=L),(Z=t*a+e*u)&&(a-=t*Z,u-=e*Z),(V=Math.sqrt(a*a+u*u))&&(a/=V,u/=V,Z/=V),t*u<e*a&&(t=-t,e=-e,Z=-Z,L=-L),{translateX:g,translateY:k,rotate:Math.atan2(e,t)*On,skewX:Math.atan(Z)*On,scaleX:L,scaleY:V}}function Tn(t,e,a,u){function g(vt){return vt.length?vt.pop()+" ":""}return function(vt,bt){var Jt=[],Ht=[];return vt=t(vt),bt=t(bt),function k(vt,bt,Jt,Ht,ie,Oe){if(vt!==Jt||bt!==Ht){var Ae=ie.push("translate(",null,e,null,a);Oe.push({i:Ae-4,x:si(vt,Jt)},{i:Ae-2,x:si(bt,Ht)})}else(Jt||Ht)&&ie.push("translate("+Jt+e+Ht+a)}(vt.translateX,vt.translateY,bt.translateX,bt.translateY,Jt,Ht),function L(vt,bt,Jt,Ht){vt!==bt?(vt-bt>180?bt+=360:bt-vt>180&&(vt+=360),Ht.push({i:Jt.push(g(Jt)+"rotate(",null,u)-2,x:si(vt,bt)})):bt&&Jt.push(g(Jt)+"rotate("+bt+u)}(vt.rotate,bt.rotate,Jt,Ht),function V(vt,bt,Jt,Ht){vt!==bt?Ht.push({i:Jt.push(g(Jt)+"skewX(",null,u)-2,x:si(vt,bt)}):bt&&Jt.push(g(Jt)+"skewX("+bt+u)}(vt.skewX,bt.skewX,Jt,Ht),function Z(vt,bt,Jt,Ht,ie,Oe){if(vt!==Jt||bt!==Ht){var Ae=ie.push(g(ie)+"scale(",null,",",null,")");Oe.push({i:Ae-4,x:si(vt,Jt)},{i:Ae-2,x:si(bt,Ht)})}else(1!==Jt||1!==Ht)&&ie.push(g(ie)+"scale("+Jt+","+Ht+")")}(vt.scaleX,vt.scaleY,bt.scaleX,bt.scaleY,Jt,Ht),vt=bt=null,function(ie){for(var Wt,Oe=-1,Ae=Ht.length;++Oe<Ae;)Jt[(Wt=Ht[Oe]).i]=Wt.x(ie);return Jt.join("")}}}var wr=Tn(function mr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xr=Tn(function pr(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function br(t,e){var a,u;return function(){var g=qe(this,t),k=g.tween;if(k!==a)for(var L=0,V=(u=a=k).length;L<V;++L)if(u[L].name===e){(u=u.slice()).splice(L,1);break}g.tween=u}}function _r(t,e,a){var u,g;if("function"!=typeof a)throw new Error;return function(){var k=qe(this,t),L=k.tween;if(L!==u){g=(u=L).slice();for(var V={name:e,value:a},Z=0,vt=g.length;Z<vt;++Z)if(g[Z].name===e){g[Z]=V;break}Z===vt&&g.push(V)}k.tween=g}}function rn(t,e,a){var u=t._id;return t.each(function(){var g=qe(this,u);(g.value||(g.value={}))[e]=a.apply(this,arguments)}),function(g){return Ze(g,u).value[e]}}function ln(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function kn(t,e){var a=Object.create(t.prototype);for(var u in e)a[u]=e[u];return a}function Ci(){}var Wi=1/.7,pi="\\s*([+-]?\\d+)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),Tr=new RegExp(`^rgb\\(${$e},${$e},${$e}\\)$`),kr=new RegExp(`^rgba\\(${pi},${pi},${pi},${Ai}\\)$`),Cr=new RegExp(`^rgba\\(${$e},${$e},${$e},${Ai}\\)$`),Lr=new RegExp(`^hsl\\(${Ai},${$e},${$e}\\)$`),Ar=new RegExp(`^hsla\\(${Ai},${$e},${$e},${Ai}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Pi(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(a=e[1].length,e=parseInt(e[1],16),6===a?Pn(e):3===a?new Qe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===a?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===a?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Qe(e[1],e[2],e[3],1):(e=Tr.exec(t))?new Qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=kr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Lr.exec(t))?Rn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Rn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?Pn(Cn[t]):"transparent"===t?new Qe(NaN,NaN,NaN,0):null}function Pn(t){return new Qe(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,a,u){return u<=0&&(t=e=a=NaN),new Qe(t,e,a,u)}function Qi(t,e,a,u){return 1===arguments.length?function Mr(t){return t instanceof Ci||(t=Pi(t)),t?new Qe((t=t.rgb()).r,t.g,t.b,t.opacity):new Qe}(t):new Qe(t,e,a,null==u?1:u)}function Qe(t,e,a,u){this.r=+t,this.g=+e,this.b=+a,this.opacity=+u}function In(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}`}function Mn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${vi(this.r)}, ${vi(this.g)}, ${vi(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fi(t){return((t=vi(t))<16?"0":"")+t.toString(16)}function Rn(t,e,a,u){return u<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new Xe(t,e,a,u)}function Nn(t){if(t instanceof Xe)return new Xe(t.h,t.s,t.l,t.opacity);if(t instanceof Ci||(t=Pi(t)),!t)return new Xe;if(t instanceof Xe)return t;var e=(t=t.rgb()).r/255,a=t.g/255,u=t.b/255,g=Math.min(e,a,u),k=Math.max(e,a,u),L=NaN,V=k-g,Z=(k+g)/2;return V?(L=e===k?(a-u)/V+6*(a<u):a===k?(u-e)/V+2:(e-a)/V+4,V/=Z<.5?k+g:2-k-g,L*=60):V=Z>0&&Z<1?0:L,new Xe(L,V,Z,t.opacity)}function Xe(t,e,a,u){this.h=+t,this.s=+e,this.l=+a,this.opacity=+u}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,a){return 255*(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)}function jn(t,e,a,u,g){var k=t*t,L=k*t;return((1-3*t+3*k-L)*e+(4-6*k+3*L)*a+(1+3*t+3*k-3*L)*u+L*g)/6}ln(Ci,Pi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Pr(){return this.rgb().formatHex8()},formatHsl:function Ir(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),ln(Qe,Qi,kn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qe(vi(this.r),vi(this.g),vi(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:In,formatHex:In,formatHex8:function Rr(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}${fi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Mn,toString:Mn})),ln(Xe,function Nr(t,e,a,u){return 1===arguments.length?Nn(t):new Xe(t,e,a,null==u?1:u)},kn(Ci,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Xe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Xe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,u=a+(a<.5?a:1-a)*e,g=2*a-u;return new Qe(an(t>=240?t-240:t+120,g,u),an(t,g,u),an(t<120?t+240:t-120,g,u),this.opacity)},clamp(){return new Xe(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const zn=t=>()=>t;function Bn(t,e){var a=e-t;return a?function Kn(t,e){return function(a){return t+a*e}}(t,a):zn(isNaN(t)?e:t)}const Fn=function t(e){var a=function Kr(t){return 1==(t=+t)?Bn:function(e,a){return a-e?function zr(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(u){return Math.pow(t+u*e,a)}}(e,a,t):zn(isNaN(e)?a:e)}}(e);function u(g,k){var L=a((g=Qi(g)).r,(k=Qi(k)).r),V=a(g.g,k.g),Z=a(g.b,k.b),vt=Bn(g.opacity,k.opacity);return function(bt){return g.r=L(bt),g.g=V(bt),g.b=Z(bt),g.opacity=vt(bt),g+""}}return u.gamma=t,u}(1);function Un(t){return function(e){var L,V,a=e.length,u=new Array(a),g=new Array(a),k=new Array(a);for(L=0;L<a;++L)V=Qi(e[L]),u[L]=V.r||0,g[L]=V.g||0,k[L]=V.b||0;return u=t(u),g=t(g),k=t(k),V.opacity=1,function(Z){return V.r=u(Z),V.g=g(Z),V.b=k(Z),V+""}}}Un(function Dr(t){var e=t.length-1;return function(a){var u=a<=0?a=0:a>=1?(a=1,e-1):Math.floor(a*e),g=t[u],k=t[u+1];return jn((a-u/e)*e,u>0?t[u-1]:2*g-k,g,k,u<e-1?t[u+2]:2*k-g)}}),Un(function jr(t){var e=t.length;return function(a){var u=Math.floor(((a%=1)<0?++a:a)*e);return jn((a-u/e)*e,t[(u+e-1)%e],t[u%e],t[(u+1)%e],t[(u+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ur(t,e){var u,g,k,a=on.lastIndex=sn.lastIndex=0,L=-1,V=[],Z=[];for(t+="",e+="";(u=on.exec(t))&&(g=sn.exec(e));)(k=g.index)>a&&(k=e.slice(a,k),V[L]?V[L]+=k:V[++L]=k),(u=u[0])===(g=g[0])?V[L]?V[L]+=g:V[++L]=g:(V[++L]=null,Z.push({i:L,x:si(u,g)})),a=sn.lastIndex;return a<e.length&&(k=e.slice(a),V[L]?V[L]+=k:V[++L]=k),V.length<2?Z[0]?function Fr(t){return function(e){return t(e)+""}}(Z[0].x):function Br(t){return function(){return t}}(e):(e=Z.length,function(vt){for(var Jt,bt=0;bt<e;++bt)V[(Jt=Z[bt]).i]=Jt.x(vt);return V.join("")})}function Wn(t,e){var a;return("number"==typeof e?si:e instanceof Pi?Fn:(a=Pi(e))?(e=a,Fn):Ur)(t,e)}function Wr(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,a){var u,k,g=a+"";return function(){var L=this.getAttribute(t);return L===g?null:L===u?k:k=e(u=L,a)}}function Jr(t,e,a){var u,k,g=a+"";return function(){var L=this.getAttributeNS(t.space,t.local);return L===g?null:L===u?k:k=e(u=L,a)}}function Hr(t,e,a){var u,g,k;return function(){var L,Z,V=a(this);return null==V?void this.removeAttribute(t):(L=this.getAttribute(t))===(Z=V+"")?null:L===u&&Z===g?k:(g=Z,k=e(u=L,V))}}function Vr(t,e,a){var u,g,k;return function(){var L,Z,V=a(this);return null==V?void this.removeAttributeNS(t.space,t.local):(L=this.getAttributeNS(t.space,t.local))===(Z=V+"")?null:L===u&&Z===g?k:(g=Z,k=e(u=L,V))}}function qr(t,e){var a,u;function g(){var k=e.apply(this,arguments);return k!==u&&(a=(u=k)&&function Xr(t,e){return function(a){this.setAttributeNS(t.space,t.local,e.call(this,a))}}(t,k)),a}return g._value=e,g}function $r(t,e){var a,u;function g(){var k=e.apply(this,arguments);return k!==u&&(a=(u=k)&&function Zr(t,e){return function(a){this.setAttribute(t,e.call(this,a))}}(t,k)),a}return g._value=e,g}function el(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){en(this,t).delay=e}}function rl(t,e){return function(){qe(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){qe(this,t).duration=e}}var xl=me.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var zl=0;function ii(t,e,a,u){this._groups=t,this._parents=e,this._name=a,this._id=u}function Qn(){return++zl}var ni=me.prototype;ii.prototype=function Kl(t){return me().transition(t)}.prototype={constructor:ii,select:function pl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=b(t));for(var u=this._groups,g=u.length,k=new Array(g),L=0;L<g;++L)for(var bt,Jt,V=u[L],Z=V.length,vt=k[L]=new Array(Z),Ht=0;Ht<Z;++Ht)(bt=V[Ht])&&(Jt=t.call(bt,bt.__data__,Ht,V))&&("__data__"in bt&&(Jt.__data__=bt.__data__),vt[Ht]=Jt,Fi(vt[Ht],e,a,Ht,vt,Ze(bt,a)));return new ii(k,this._parents,e,a)},selectAll:function wl(t){var e=this._name,a=this._id;"function"!=typeof t&&(t=T(t));for(var u=this._groups,g=u.length,k=[],L=[],V=0;V<g;++V)for(var bt,Z=u[V],vt=Z.length,Jt=0;Jt<vt;++Jt)if(bt=Z[Jt]){for(var ie,Ht=t.call(bt,bt.__data__,Jt,Z),Oe=Ze(bt,a),Ae=0,Wt=Ht.length;Ae<Wt;++Ae)(ie=Ht[Ae])&&Fi(ie,e,a,Ae,Ht,Oe);k.push(Ht),L.push(bt)}return new ii(k,L,e,a)},selectChild:ni.selectChild,selectChildren:ni.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=z(t));for(var e=this._groups,a=e.length,u=new Array(a),g=0;g<a;++g)for(var Z,k=e[g],L=k.length,V=u[g]=[],vt=0;vt<L;++vt)(Z=k[vt])&&t.call(Z,Z.__data__,vt,k)&&V.push(Z);return new ii(u,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,a=t._groups,u=e.length,k=Math.min(u,a.length),L=new Array(u),V=0;V<k;++V)for(var Ht,Z=e[V],vt=a[V],bt=Z.length,Jt=L[V]=new Array(bt),ie=0;ie<bt;++ie)(Ht=Z[ie]||vt[ie])&&(Jt[ie]=Ht);for(;V<u;++V)L[V]=e[V];return new ii(L,this._parents,this._name,this._id)},selection:function bl(){return new xl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,a=Qn(),u=this._groups,g=u.length,k=0;k<g;++k)for(var Z,L=u[k],V=L.length,vt=0;vt<V;++vt)if(Z=L[vt]){var bt=Ze(Z,e);Fi(Z,t,a,vt,L,{time:bt.time+bt.delay+bt.duration,delay:0,duration:bt.duration,ease:bt.ease})}return new ii(u,this._parents,t,a)},call:ni.call,nodes:ni.nodes,node:ni.node,size:ni.size,empty:ni.empty,each:ni.each,on:function gl(t,e){var a=this._id;return arguments.length<2?Ze(this.node(),a).on.on(t):this.each(function fl(t,e,a){var u,g,k=function vl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var a=e.indexOf(".");return a>=0&&(e=e.slice(0,a)),!e||"start"===e})}(e)?en:qe;return function(){var L=k(this,t),V=L.on;V!==u&&(g=(u=V).copy()).on(e,a),L.on=g}}(a,t,e))},attr:function Yr(t,e){var a=H(t),u="transform"===a?xr:Wn;return this.attrTween(t,"function"==typeof e?(a.local?Vr:Hr)(a,u,rn(this,"attr."+t,e)):null==e?(a.local?Gr:Wr)(a):(a.local?Jr:Qr)(a,u,e))},attrTween:function tl(t,e){var a="attr."+t;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;var u=H(t);return this.tween(a,(u.local?qr:$r)(u,e))},style:function Tl(t,e,a){var u="transform"==(t+="")?wr:Wn;return null==e?this.styleTween(t,function _l(t,e){var a,u,g;return function(){var k=ut(this,t),L=(this.style.removeProperty(t),ut(this,t));return k===L?null:k===a&&L===u?g:g=e(a=k,u=L)}}(t,u)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,a){var u,g,k;return function(){var L=ut(this,t),V=a(this),Z=V+"";return null==V&&(this.style.removeProperty(t),Z=V=ut(this,t)),L===Z?null:L===u&&Z===g?k:(g=Z,k=e(u=L,V))}}(t,u,rn(this,"style."+t,e))).each(function Sl(t,e){var a,u,g,V,k="style."+e,L="end."+k;return function(){var Z=qe(this,t),vt=Z.on,bt=null==Z.value[k]?V||(V=Gn(e)):void 0;(vt!==a||g!==bt)&&(u=(a=vt).copy()).on(L,g=bt),Z.on=u}}(this._id,t)):this.styleTween(t,function El(t,e,a){var u,k,g=a+"";return function(){var L=ut(this,t);return L===g?null:L===u?k:k=e(u=L,a)}}(t,u,e),a).on("end.style."+t,null)},styleTween:function Ll(t,e,a){var u="style."+(t+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==e)return this.tween(u,null);if("function"!=typeof e)throw new Error;return this.tween(u,function Cl(t,e,a){var u,g;function k(){var L=e.apply(this,arguments);return L!==g&&(u=(g=L)&&function kl(t,e,a){return function(u){this.style.setProperty(t,e.call(this,u),a)}}(t,L,a)),u}return k._value=e,k}(t,e,null==a?"":a))},text:function Il(t){return this.tween("text","function"==typeof t?function Pl(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Rl(t){var e,a;function u(){var g=t.apply(this,arguments);return g!==a&&(e=(a=g)&&function Ml(t){return function(e){this.textContent=t.call(this,e)}}(g)),e}return u._value=t,u}(t))},remove:function ml(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var a in this.__transition)if(+a!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var a=this._id;if(t+="",arguments.length<2){for(var L,u=Ze(this.node(),a).tween,g=0,k=u.length;g<k;++g)if((L=u[g]).name===t)return L.value;return null}return this.each((null==e?br:_r)(a,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):Ze(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):Ze(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){qe(this,t).ease=e}}(e,t)):Ze(this.node(),e).ease},easeVarying:function dl(t){if("function"!=typeof t)throw new Error;return this.each(function ul(t,e){return function(){var a=e.apply(this,arguments);if("function"!=typeof a)throw new Error;qe(this,t).ease=a}}(this._id,t))},end:function jl(){var t,e,a=this,u=a._id,g=a.size();return new Promise(function(k,L){var V={value:L},Z={value:function(){0==--g&&k()}};a.each(function(){var vt=qe(this,u),bt=vt.on;bt!==t&&((e=(t=bt).copy())._.cancel.push(V),e._.interrupt.push(V),e._.end.push(Z)),vt.on=e}),0===g&&k()})},[Symbol.iterator]:ni[Symbol.iterator]};var Fl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var a;!(a=t.__transition)||!(a=a[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return a}me.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var u,g,L,a=t.__transition,k=!0;if(a){for(L in e=null==e?null:e+"",a)(u=a[L]).name===e?(g=u.state>2&&u.state<5,u.state=6,u.timer.stop(),u.on.call(g?"interrupt":"cancel",t,t.__data__,u.index,u.group),delete a[L]):k=!1;k&&delete t.__transition}}(this,t)})},me.prototype.transition=function Wl(t){var e,a;t instanceof ii?(e=t._id,t=t._name):(e=Qn(),(a=Fl).time=Xi(),t=null==t?null:t+"");for(var u=this._groups,g=u.length,k=0;k<g;++k)for(var Z,L=u[k],V=L.length,vt=0;vt<V;++vt)(Z=L[vt])&&Fi(Z,t,e,vt,L,a||Ul(Z,e));return new ii(u,this._parents,t,e)};Math;function Ii(t){return{type:t}}function bi(t){return function(){return t}}function Xn(t){this._context=t}function ql(t){return new Xn(t)}["w","e"].map(Ii),["n","s"].map(Ii),["n","w","e","s","nw","ne","sw","se"].map(Ii),Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const vn=Math.PI,fn=2*vn,gi=1e-6,$l=fn-gi;function qn(t){this._+=t[0];for(let e=1,a=t.length;e<a;++e)this._+=arguments[e]+t[e]}class Zi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const a=10**e;return function(u){this._+=u[0];for(let g=1,k=u.length;g<k;++g)this._+=Math.round(arguments[g]*a)/a+u[g]}}(e)}moveTo(e,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,a){this._append`L${this._x1=+e},${this._y1=+a}`}quadraticCurveTo(e,a,u,g){this._append`Q${+e},${+a},${this._x1=+u},${this._y1=+g}`}bezierCurveTo(e,a,u,g,k,L){this._append`C${+e},${+a},${+u},${+g},${this._x1=+k},${this._y1=+L}`}arcTo(e,a,u,g,k){if(e=+e,a=+a,u=+u,g=+g,(k=+k)<0)throw new Error(`negative radius: ${k}`);let L=this._x1,V=this._y1,Z=u-e,vt=g-a,bt=L-e,Jt=V-a,Ht=bt*bt+Jt*Jt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=a}`;else if(Ht>gi)if(Math.abs(Jt*Z-vt*bt)>gi&&k){let ie=u-L,Oe=g-V,Ae=Z*Z+vt*vt,Wt=ie*ie+Oe*Oe,Ut=Math.sqrt(Ae),oe=Math.sqrt(Ht),ne=k*Math.tan((vn-Math.acos((Ae+Ht-Wt)/(2*Ut*oe)))/2),fe=ne/oe,pe=ne/Ut;Math.abs(fe-1)>gi&&this._append`L${e+fe*bt},${a+fe*Jt}`,this._append`A${k},${k},0,0,${+(Jt*ie>bt*Oe)},${this._x1=e+pe*Z},${this._y1=a+pe*vt}`}else this._append`L${this._x1=e},${this._y1=a}`}arc(e,a,u,g,k,L){if(e=+e,a=+a,L=!!L,(u=+u)<0)throw new Error(`negative radius: ${u}`);let V=u*Math.cos(g),Z=u*Math.sin(g),vt=e+V,bt=a+Z,Jt=1^L,Ht=L?g-k:k-g;null===this._x1?this._append`M${vt},${bt}`:(Math.abs(this._x1-vt)>gi||Math.abs(this._y1-bt)>gi)&&this._append`L${vt},${bt}`,u&&(Ht<0&&(Ht=Ht%fn+fn),Ht>$l?this._append`A${u},${u},0,1,${Jt},${e-V},${a-Z}A${u},${u},0,1,${Jt},${this._x1=vt},${this._y1=bt}`:Ht>gi&&this._append`A${u},${u},0,${+(Ht>=vn)},${Jt},${this._x1=e+u*Math.cos(k)},${this._y1=a+u*Math.sin(k)}`)}rect(e,a,u,g){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+a}h${u=+u}v${+g}h${-u}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var a=bi(!0),u=null,g=ql,k=null,L=function ia(t){let e=3;return t.digits=function(a){if(!arguments.length)return e;if(null==a)e=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);e=u}return t},()=>new Zi(e)}(V);function V(Z){var vt,Jt,ie,bt=(Z=function Xl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(Z)).length,Ht=!1;for(null==u&&(k=g(ie=L())),vt=0;vt<=bt;++vt)!(vt<bt&&a(Jt=Z[vt],vt,Z))===Ht&&((Ht=!Ht)?k.lineStart():k.lineEnd()),Ht&&k.point(+t(Jt,vt,Z),+e(Jt,vt,Z));if(ie)return k=null,ie+""||null}return t="function"==typeof t?t:void 0===t?na:bi(t),e="function"==typeof e?e:void 0===e?ra:bi(e),V.x=function(Z){return arguments.length?(t="function"==typeof Z?Z:bi(+Z),V):t},V.y=function(Z){return arguments.length?(e="function"==typeof Z?Z:bi(+Z),V):e},V.defined=function(Z){return arguments.length?(a="function"==typeof Z?Z:bi(!!Z),V):a},V.curve=function(Z){return arguments.length?(g=Z,null!=u&&(k=g(u)),V):g},V.context=function(Z){return arguments.length?(null==Z?u=k=null:k=g(u=Z),V):u},V}function $n(t,e,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+a)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function _i(t,e,a){this.k=t,this.x=e,this.y=a}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},_i.prototype={constructor:_i,scale:function(t){return 1===t?this:new _i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new _i(1,0,0)}}]);