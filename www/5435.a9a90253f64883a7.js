"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5435],{2806:(R,E,o)=>{o.d(E,{FC:()=>f,FL:()=>t,LC:()=>e,PS:()=>v,Q$:()=>a,QQ:()=>u,Tt:()=>l,Xd:()=>s,hv:()=>h,r_:()=>d});const t={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"},v={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8},f={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3},h={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,TSPAN:10,PATH:8,POLYLINE:11},a={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306},e=[{name:"tam gi\xe1c vu\xf4ng",type:a.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:a.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:a.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:a.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:a.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:a.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:a.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:a.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:a.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:a.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:a.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:a.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:a.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}],s={IMAGE:1,HTML:2,AUDIO:3,VIDEO:4},u={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,WORD:916,EXCEL:917,POWERPOINT:918,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912},l={ONEDRIVE:1e3,GOOGLEDRIVE:1001,YOUTUBE:1002,SCORM:1003,PHET:1005,OTHER:1004},d={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221,Minus:189,Equal:187}},1955:(R,E,o)=>{o.d(E,{_:()=>v});var t=o(2806);const v=a=>{switch(null==a?void 0:a.type){case t.QQ.IMAGE:return"www.tabca.vn"==location.hostname?`assets/iframe/lib/mk-image-viewer/viewer.html?url=${encodeURIComponent(a.readfileuploadurl+""+a.path)}`:""+a.readfileuploadurl+a.path;case t.QQ.AUDIO:return"www.tabca.vn"==location.hostname?`assets/iframe/lib/mk-audio-player-2/player.html?url=${encodeURIComponent(a.readfileuploadurl+""+a.path)}`:""+a.readfileuploadurl+a.path;case t.QQ.VIDEO:return"www.tabca.vn"==location.hostname?`assets/iframe/lib/mk-video-player/player.html?url=${encodeURIComponent(a.readfileuploadurl+""+a.path)}`:""+a.readfileuploadurl+a.path;case t.QQ.OFFICE:case t.QQ.WORD:case t.QQ.EXCEL:case t.QQ.POWERPOINT:return"www.tabca.vn"==location.hostname?`assets/iframe/lib/ONLYOFFICE/player.html?url=${encodeURIComponent(a.readfileuploadurl+""+a.path)}`:""+a.readfileuploadurl+a.path;case t.QQ.PDF:return"www.tabca.vn"==location.hostname?"assets/iframe/lib/PDFReader/web/viewer.html?file="+a.readfileuploadurl+a.path:""+a.readfileuploadurl+a.path;case t.QQ.HTML:case t.QQ.IMAGE_ANIMATION:case t.QQ.PHET:return""+a.readfileuploadurl+a.path;case t.QQ.ZIP:case t.QQ.SCORM:var e;return"imsmanifest.xml"==(null===(e=a.path)||void 0===e||null===(e=e.split("/"))||void 0===e?void 0:e.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+a.readfileuploadurl+a.path:""+a.readfileuploadurl+a.path;case t.QQ.TRACK:case t.QQ.TEXT:return""+a.readfileuploadurl+a.path;case t.QQ.LINK:switch(a.oss){case t.Tt.SCORM:return"assets/iframe/lib/ScormPool_Player/player.html?url="+a.url;case t.Tt.YOUTUBE:var s;return null!==(s=f(a.url))&&void 0!==s?s:"";case t.Tt.PHET:var u;return null!==(u=a.url)&&void 0!==u?u:"";default:var l;return null!==(l=a.url)&&void 0!==l?l:""}default:return""+a.readfileuploadurl+a.path}},f=a=>{let e=h(a);return e?"https://www.youtube.com/embed/"+e+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},h=a=>{let e=null==a?void 0:a.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return e&&e.length>=2?e[1]:null}},5781:(R,E,o)=>{o.d(E,{Cr:()=>a,Rq:()=>h,br:()=>v,e6:()=>f});var t=o(5972);function v(e){var s,u,l,d,n,m,P,M,O,A,T,C;e.params=e.params||{},e.params.page=e.params.page||1,e.params.limit=e.params.limit||1,(0,t.hm)({url:"api/Media/Search",params:{getby:null!==(s=e.params.userid)&&void 0!==s?s:null,gettype:e.params.gettype||null,getfrom:e.params.getfrom||null,media_id:null!==(u=e.params.media_id)&&void 0!==u?u:null,media_title:null!==(l=e.params.media_title)&&void 0!==l?l:null,topic_id:null!==(d=e.params.topic_id)&&void 0!==d?d:null,category_id:null!==(n=e.params.category_id)&&void 0!==n?n:null,directory_id:null!==(m=e.params.directory_id)&&void 0!==m?m:null,v_mediatype:null!==(P=e.params.v_mediatype)&&void 0!==P?P:null,v_mediatypes:null!==(M=e.params.v_mediatypes)&&void 0!==M?M:null,v_osstype:null!==(O=e.params.v_osstype)&&void 0!==O?O:null,tags:null!==(A=e.params.tags)&&void 0!==A?A:null,sortfield:null!==(T=e.params.sortfield)&&void 0!==T?T:null,sorttype:null!==(C=e.params.sorttype)&&void 0!==C?C:null,posstart:(e.params.page-1)*e.params.limit,numofrow:e.params.limit},success:i=>{var c;"function"==typeof e.callback&&e.callback(null!==(c=i.data)&&void 0!==c?c:null)},error:i=>{"function"==typeof e.callback&&e.callback(),console.error(i)},loading:e.loading,loadingController:e.loadingController})}function f(e){var s,u;e.params=e.params||{},(0,t.hm)({url:"api/Media/Detail",params:{getby:null!==(s=e.params.userid)&&void 0!==s?s:null,media_id:null!==(u=e.params.media_id)&&void 0!==u?u:null},success:l=>{var d;"function"==typeof e.callback&&e.callback(null!==(d=l.data)&&void 0!==d?d:null)},error:l=>{"function"==typeof e.callback&&e.callback(),console.error(l)},loading:e.loading,loadingController:e.loadingController})}function h(e){var s,u,l,d,n,m,P,M,O,A,T,C,i,c,_,r,p,g;e.params=e.params||{},(0,t.Ll)({url:"api/Media/AddUpdate",params:{media_id:null!==(s=e.params.media_id)&&void 0!==s?s:null,media_title:null!==(u=e.params.media_title)&&void 0!==u?u:null,media_description:null!==(l=e.params.media_description)&&void 0!==l?l:null,media_content:null!==(d=e.params.media_content)&&void 0!==d?d:null,filepath:null!==(n=e.params.filepath)&&void 0!==n?n:null,filepath_extract:null!==(m=e.params.filepath_extract)&&void 0!==m?m:null,link_file:null!==(P=e.params.link_file)&&void 0!==P?P:null,link_share:null!==(M=e.params.link_share)&&void 0!==M?M:null,cover:null!==(O=e.params.cover)&&void 0!==O?O:null,v_mediatype:null!==(A=e.params.v_mediatype)&&void 0!==A?A:null,v_osstype:null!==(T=e.params.v_osstype)&&void 0!==T?T:null,v_sharingmode:null!==(C=e.params.v_sharingmode)&&void 0!==C?C:null,topic_id:null!==(i=e.params.topic_id)&&void 0!==i?i:null,category_id:null!==(c=e.params.category_id)&&void 0!==c?c:null,directory_id:null!==(_=e.params.directory_id)&&void 0!==_?_:null,tags:null!==(r=e.params.tags)&&void 0!==r?r:null,createdby:null!==(p=e.params.userid)&&void 0!==p?p:null,modifiedby:null!==(g=e.params.userid)&&void 0!==g?g:null},success:y=>{var I;"function"==typeof e.callback&&e.callback(null!==(I=y.data)&&void 0!==I?I:null)},error:y=>{"function"==typeof e.callback&&e.callback(),console.error(y)},loading:e.loading,loadingController:e.loadingController})}function a(e){var s,u,l;e.params=e.params||{},(0,t.sj)({url:"api/Media/Delete",params:{deletedby:null!==(s=e.params.userid)&&void 0!==s?s:null,media_id:null!==(u=e.params.media_id)&&void 0!==u?u:null,createdby:null!==(l=e.params.userid)&&void 0!==l?l:null},success:d=>{var n;"function"==typeof e.callback&&e.callback(null!==(n=d.data)&&void 0!==n?n:null)},error:d=>{"function"==typeof e.callback&&e.callback(),console.error(d)},loading:e.loading,loadingController:e.loadingController})}},5435:(R,E,o)=>{o.r(E),o.d(E,{MediaEmbedPageModule:()=>C});var t=o(177),v=o(9417),f=o(6637),h=o(3658),a=o(467),e=o(1955),s=o(5972),u=o(5781),l=o(6539),d=o(5414),n=o(4438),m=o(2706);function P(i,c){if(1&i){const _=n.RV6();n.j41(0,"iframe",13),n.nI1(1,"safe"),n.bIt("load",function(p){n.eBV(_);const g=n.XpG();return n.Njj(g.loadIframe(p))}),n.k0s()}if(2&i){const _=n.XpG();n.Y8G("src",n.i5U(1,1,_.iframeSrc,"resourceUrl"),n.f$h)}}const O=[{path:"",component:(()=>{var i;class c{constructor(r,p,g){this.activatedRoute=r,this.toastController=p,this.loadingController=g,this.appsettings={},this.readfileuploadurl="",this.iframeSrc=""}ngOnInit(){var r=this;(0,a.A)(function*(){var p,g;if(r.appsettings=yield(0,s.AC)(),!r.appsettings.madonvi)return;r.user=yield(0,l.sx)(),r.readfileuploadurl=null!==(p=r.appsettings.readfileuploadurl)&&void 0!==p?p:"";let y=null!==(g=r.activatedRoute.snapshot.params.id)&&void 0!==g?g:"";y&&(r.media_id=parseInt(y)),r.refreshData()})()}ngAfterViewInit(){}ngOnDestroy(){var r;null===(r=this.iframe)||void 0===r||r.removeAttribute("src")}refreshData(){var r=this;return(0,a.A)(function*(){var p;(0,u.e6)({loadingController:r.loadingController,params:{userid:null===(p=r.user)||void 0===p?void 0:p.userid,media_id:r.media_id},callback:g=>{var y,I,b,$,w,N,D,U;r.media=g||{},r.media.media_id?r.iframeSrc=(0,e._)({readfileuploadurl:r.appsettings.readfileuploadurl,type:null===(y=r.media)||void 0===y?void 0:y.v_mediatype,oss:null===(I=r.media)||void 0===I?void 0:I.v_osstype,path:null!==(b=null===($=r.media)||void 0===$?void 0:$.filepath_extract)&&void 0!==b?b:null===(w=r.media)||void 0===w?void 0:w.filepath,url:null!==(N=null===(D=r.media)||void 0===D?void 0:D.link_file)&&void 0!==N?N:null===(U=r.media)||void 0===U?void 0:U.link_share}):(0,d.c)(r.toastController,{color:"danger",message:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u!"}).then(G=>G.present())}})})()}loadIframe(r){this.iframe=r.target}}return(i=c).\u0275fac=function(r){return new(r||i)(n.rXU(h.nX),n.rXU(f.K_),n.rXU(f.Xi))},i.\u0275cmp=n.VBU({type:i,selectors:[["app-media-embed"]],decls:14,vars:2,consts:[["scroll-x","false","scroll-y","false",3,"fullscreen"],[1,"container-grid","grid-column"],[1,"container-head","container-top"],[1,"container-body","grid-grow"],[1,"container-grid","grid-row"],[1,"container-left"],[1,"container-center"],[1,"grid-grow"],[1,"main-container","overflow-auto"],["scroll-x","false","scroll-y","false"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","fullscreen",3,"src","load",4,"ngIf"],[1,"container-bottom"],[1,"container-right"],["frameborder","0","allowfullscreen","","webkitallowfullscreen","","allowtransparency","true","allow","fullscreen",3,"load","src"]],template:function(r,p){1&r&&(n.j41(0,"ion-content",0)(1,"div",1),n.nrm(2,"div",2),n.j41(3,"div",3)(4,"div",4),n.nrm(5,"div",5),n.j41(6,"div",6)(7,"div",1)(8,"div",7)(9,"div",8)(10,"ion-content",9),n.DNE(11,P,2,4,"iframe",10),n.k0s()()(),n.nrm(12,"div",11),n.k0s()(),n.nrm(13,"div",12),n.k0s()()()()),2&r&&(n.Y8G("fullscreen",!0),n.R7$(11),n.Y8G("ngIf",p.iframeSrc))},dependencies:[t.bT,f.W9,m.m],styles:[".container-grid[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.container-grid.grid-row[_ngcontent-%COMP%]{flex-flow:row}.container-grid.grid-column[_ngcontent-%COMP%]{flex-flow:column}.container-grid[_ngcontent-%COMP%]   .grid-grow[_ngcontent-%COMP%]{flex-grow:1}.container-head[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:0 2px 2px #0000001a}.container-body[_ngcontent-%COMP%]{position:relative;z-index:1}.container-body[_ngcontent-%COMP%]   .container-left[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-right[_ngcontent-%COMP%]{position:relative;z-index:2;box-shadow:-2px 0 2px #0000001a}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]{position:relative;z-index:1;flex:auto;width:calc(100% - 480px)}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .container-bottom[_ngcontent-%COMP%]{position:relative;z-index:2}.container-body[_ngcontent-%COMP%]   .container-center[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;z-index:1;-webkit-user-select:none;user-select:none;background-color:#fafafa}.group-action-paging[_ngcontent-%COMP%]{position:absolute;bottom:.5rem;right:1rem;line-height:0;-webkit-user-select:none;user-select:none}.group-action-paging[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding:0 1rem;vertical-align:middle;font-size:18px;color:#fab11d}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{vertical-align:middle}.group-action-paging[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{height:34px;width:34px}iframe[_ngcontent-%COMP%]{display:block;width:100%;height:100%;padding:0;margin:0;border:0;outline:none;background-color:#fff}"]}),c})()}];let A=(()=>{var i;class c{}return(i=c).\u0275fac=function(r){return new(r||i)},i.\u0275mod=n.$C({type:i}),i.\u0275inj=n.G2t({imports:[h.iI.forChild(O),h.iI]}),c})();var T=o(3890);let C=(()=>{var i;class c{}return(i=c).\u0275fac=function(r){return new(r||i)},i.\u0275mod=n.$C({type:i}),i.\u0275inj=n.G2t({imports:[t.MD,v.YN,f.bv,A,T.x]}),c})()},6539:(R,E,o)=>{o.d(E,{JD:()=>e,lJ:()=>s,sx:()=>a});var t=o(467),v=o(2635),f=o(8833),h=o(5972);const a=function(){var l=(0,t.A)(function*(){return yield(0,v.Nk)()});return function(){return l.apply(this,arguments)}}(),e=function(){var l=(0,t.A)(function*(d){let n=null!=d?d:yield(0,h.AC)(),m=yield(0,v.Nk)();return(!n.madonvi||!m.userid||n.madonvi!=(null==m?void 0:m.madonvi))&&window.location.replace(f._.LANDING_PAGE+`?require=signin&returnurl=${encodeURIComponent(window.location.href)}`),m});return function(n){return l.apply(this,arguments)}}(),s=function(){var l=(0,t.A)(function*(){return!!(yield(0,v.Nk)()).userid});return function(){return l.apply(this,arguments)}}()}}]);