"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1967],{1850:(N,I,s)=>{s.d(I,{qG:()=>_});const _=(0,s(5083).F3)("NativeBiometric",{web:()=>s.e(2587).then(s.bind(s,2587)).then(n=>new n.NativeBiometricWeb)})},4393:(N,I,s)=>{s.d(I,{FC:()=>v,LK:()=>n,SD:()=>b,T9:()=>C,pJ:()=>_});var d=s(467),p=s(369);const o=new p.w({name:"_localDataDB",driverOrder:[p.C.IndexedDB,p.C.LocalStorage]}),_=function(){var g=(0,d.A)(function*(a){var r;yield o.create(),(a=null!==(r=a)&&void 0!==r?r:{}).params=a.params||{};try{var l=(yield o.get("ui-config"))||{};return"function"==typeof a.callback&&a.callback(l),l}catch(i){"function"==typeof a.callback&&a.callback(),console.error(i)}return{}});return function(r){return g.apply(this,arguments)}}(),n=function(){var g=(0,d.A)(function*(a){var r;yield o.create();var e="ui-config";(a=null!==(r=a)&&void 0!==r?r:{}).params=a.params||{};try{var l=(yield o.get(e))||{};Object.assign(l,a.params),yield o.set(e,l),"function"==typeof a.callback&&a.callback(l)}catch(i){"function"==typeof a.callback&&a.callback(),console.error(i)}});return function(r){return g.apply(this,arguments)}}(),v=function(){var g=(0,d.A)(function*(a){var r;yield o.create(),(a=null!==(r=a)&&void 0!==r?r:{}).params=a.params||{};try{var l=(yield o.get("setting"))||{};return"function"==typeof a.callback&&a.callback(l),l}catch(i){"function"==typeof a.callback&&a.callback(),console.error(i)}return{}});return function(r){return g.apply(this,arguments)}}(),C=function(){var g=(0,d.A)(function*(a){var r;yield o.create();var e="setting";(a=null!==(r=a)&&void 0!==r?r:{}).params=a.params||{};try{var l=(yield o.get(e))||{};Object.assign(l,a.params),yield o.set(e,l),"function"==typeof a.callback&&a.callback(l)}catch(i){"function"==typeof a.callback&&a.callback(),console.error(i)}});return function(r){return g.apply(this,arguments)}}(),b=function(){var g=(0,d.A)(function*(a){var r;yield o.create(),(a=null!==(r=a)&&void 0!==r?r:{}).params=a.params||{};try{yield o.set("setting",{}),"function"==typeof a.callback&&a.callback()}catch(l){"function"==typeof a.callback&&a.callback(),console.error(l)}});return function(r){return g.apply(this,arguments)}}()},2635:(N,I,s)=>{s.d(I,{N$:()=>b,Nk:()=>n,kD:()=>C,xy:()=>v});var d=s(467),p=s(369),o=s(5972);const _=new p.w({name:"_userDB",driverOrder:[p.C.IndexedDB,p.C.LocalStorage]}),n=function(){var r=(0,d.A)(function*(e){yield _.create();try{var l=(yield _.get("user-local"))||{};return"function"==typeof(null==e?void 0:e.callback)&&e.callback(Object.assign({},l||{})),l}catch(i){"function"==typeof(null==e?void 0:e.callback)&&e.callback(),console.error(i)}return{}});return function(l){return r.apply(this,arguments)}}(),v=function(){var r=(0,d.A)(function*(e){yield _.create(),e.params=e.params||{};try{var l=Object.assign({},e.params);yield _.set("user-local",l),"function"==typeof e.callback&&e.callback(Object.assign({},l||{}))}catch(i){"function"==typeof e.callback&&e.callback(),console.error(i)}});return function(l){return r.apply(this,arguments)}}(),C=function(){var r=(0,d.A)(function*(e){return e&&(e.params={}),v(null!=e?e:{})});return function(l){return r.apply(this,arguments)}}(),b=function(){var r=(0,d.A)(function*(e,l){let i=yield(0,o.AC)();if(l){let L=[];e.params.profilephoto&&L.push(new Promise((c,u)=>{let f=new Image;f.onload=()=>{e.params.url_profilephoto=f.src,c(1)},f.onerror=()=>{e.params.url_profilephoto="assets/image/user-avatar-default.png",c(0)},f.src=i.readfileuploadurl+e.params.profilephoto})),e.params.banner&&L.push(new Promise((c,u)=>{let f=new Image;f.onload=()=>{e.params.url_banner=f.src,c(1)},f.onerror=()=>{e.params.url_banner="assets/image/user-banner-default.png",c(0)},f.src=i.readfileuploadurl+e.params.banner})),L.length>0?Promise.all(L).then(()=>{v(e)}):v(e)}else n({callback:L=>{if(L){let c=[];e.params.profilephoto&&c.push(new Promise((u,f)=>{let t=new Image;t.onload=()=>{e.params.url_profilephoto=t.src,u(1)},t.onerror=()=>{e.params.url_profilephoto="assets/image/user-avatar-default.png",u(0)},t.src=i.readfileuploadurl+e.params.profilephoto})),e.params.banner&&c.push(new Promise((u,f)=>{let t=new Image;t.onload=()=>{e.params.url_banner=t.src,u(1)},t.onerror=()=>{e.params.url_banner="assets/image/user-banner-default.png",u(0)},t.src=i.readfileuploadurl+e.params.banner})),c.length>0?Promise.all(c).then(()=>{v({params:Object.assign({},L,e.params),callback:e.callback})}):v({params:Object.assign({},L,e.params),callback:e.callback})}else"function"==typeof e.callback&&e.callback()}})});return function(l,i){return r.apply(this,arguments)}}()},1967:(N,I,s)=>{s.r(I),s.d(I,{AppLoadingPageModule:()=>L});var d=s(177),p=s(9417),o=s(6637),_=s(3658),n=s(467),v=s(1850),C=s(5972),b=s(4393),g=s(2635),a=s(8833),r=s(4438);const l=[{path:"",component:(()=>{var c;class u{constructor(){this.appsettings={}}ngOnInit(){var t=this;(0,n.A)(function*(){t.appsettings=yield(0,C.AC)(),t.checkBiometric()})()}onIonRefresher(t){this.checkBiometric(),setTimeout(()=>{t.target.complete()},3e3)}checkBiometric(){var t=this;return(0,n.A)(function*(){(yield(0,b.FC)()).Biometric?v.qG.verifyIdentity({subtitle:"\u1ee8ng d\u1ee5ng \u0111\xe3 \u0111\u01b0\u1ee3c b\u1ea3o v\u1ec7 b\u1edfi sinh tr\u1eafc h\u1ecdc",useFallback:!0,maxAttempts:5}).then(m=>{console.info("NativeBiometric.verifyIdentity",m),t.checkAuth()}).catch(m=>{console.error("NativeBiometric.verifyIdentity",m)}):t.checkAuth()})()}checkAuth(){var t=this;return(0,n.A)(function*(){yield(0,g.Nk)({callback:m=>{var O,A;t.user=m,null!==(O=t.user)&&void 0!==O&&O.userid?(null===(A=t.user)||void 0===A?void 0:A.madonvi)==t.appsettings.madonvi?window.location.replace(a._.DASHBOARD):t.signOut():window.location.replace(a._.LANDING_PAGE)}})})()}signOut(){return(0,n.A)(function*(){yield(0,C.jQ)(),(0,g.xy)({callback:()=>{window.location.replace(a._.LANDING_PAGE)}})})()}}return(c=u).\u0275fac=function(t){return new(t||c)},c.\u0275cmp=r.VBU({type:c,selectors:[["app-app-loading"]],decls:3,vars:0,consts:[["slot","fixed",3,"ionRefresh"]],template:function(t,m){1&t&&(r.j41(0,"ion-content")(1,"ion-refresher",0),r.bIt("ionRefresh",function(A){return m.onIonRefresher(A)}),r.nrm(2,"ion-refresher-content"),r.k0s()())},dependencies:[o.W9,o.To,o.Ki]}),u})()}];let i=(()=>{var c;class u{}return(c=u).\u0275fac=function(t){return new(t||c)},c.\u0275mod=r.$C({type:c}),c.\u0275inj=r.G2t({imports:[_.iI.forChild(l),_.iI]}),u})(),L=(()=>{var c;class u{}return(c=u).\u0275fac=function(t){return new(t||c)},c.\u0275mod=r.$C({type:c}),c.\u0275inj=r.G2t({imports:[d.MD,p.YN,o.bv,i]}),u})()}}]);