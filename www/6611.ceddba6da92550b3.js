"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6611],{8779:(he,Dt,v)=>{v.d(Dt,{$u:()=>L,IB:()=>vt,WR:()=>C,bf:()=>z,eD:()=>nt,lq:()=>f,pZ:()=>E,u$:()=>b});const E={fill:"transparent",stroke:"#129bff",strokeWidth:1},b={stroke:"#5F6CE1",strokeWidth:1,strokeLinecap:"round",strokeDasharrays:[4,2,1,2]},nt={fill:"#FFFFFF",stroke:"#5F6CE1",strokeWidth:1,width:7,height:7},z={fill:"transparent",stroke:"transparent",strokeWidth:1},vt={fill:"none",stroke:"#5F6CE1",strokeWidth:1},C={stroke:"#129bff",strokeWidth:1,strokeLinecap:"round",strokeDasharray:8},f={fill:"transparent"},L={fill:"none",stroke:"#999",strokeWidth:1,strokeDasharray:2}},4896:(he,Dt,v)=>{v.d(Dt,{$N:()=>C,An:()=>f,CS:()=>b,Kf:()=>q,Lp:()=>U,j9:()=>L,lP:()=>z,ml:()=>F,n9:()=>k,nf:()=>vt});var E=v(2492);const b=d=>{var Y;return null===(Y=d.split(/(?=[MLCSQTAHVZmlcsqtahvz])/))||void 0===Y?void 0:Y.map(A=>{let X={type:A.substring(0,1)},st=(K=A.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?K.split(/\s/).map(Z=>(0,E.z)(parseFloat(Z),1e6)):[];var K;return st.length&&(X.points=st),X})},z=d=>{let Y=[],A=[],X=[],st=[];return d.forEach(K=>{switch(["M","L","C","S","Q","T"].includes(K.type)&&K.points&&K.points.forEach((Mt,Ht)=>{Ht%2==0?Y.push(Mt):A.push(Mt)}),K.type){case"A":var Z;7==(null===(Z=K.points)||void 0===Z?void 0:Z.length)&&(X.push(K.points[5]),st.push(K.points[6]));break;case"H":var xt;null!==(xt=K.points)&&void 0!==xt&&xt.length&&(Y.push(K.points[0]),X.push(K.points[0]));break;case"V":var H;null!==(H=K.points)&&void 0!==H&&H.length&&(A.push(K.points[0]),st.push(K.points[0]));break;case"a":var R;if(7==(null===(R=K.points)||void 0===R?void 0:R.length)){let Mt=Y[Y.length-1];Y.push(Mt+K.points[5]),X.push(Mt+K.points[5]);let Ht=A[A.length-1];A.push(Ht+K.points[6]),st.push(Ht+K.points[6])}break;case"h":var ut;if(null!==(ut=K.points)&&void 0!==ut&&ut.length){let Mt=Y[Y.length-1];Y.push(Mt+K.points[0]),X.push(Mt+K.points[0])}break;case"v":var Ct;if(null!==(Ct=K.points)&&void 0!==Ct&&Ct.length){let Mt=A[A.length-1];A.push(Mt+K.points[0]),st.push(Mt+K.points[0])}break;case"M":case"L":case"C":case"S":case"Q":case"T":var Tt;null===(Tt=K.points)||void 0===Tt||Tt.forEach((Mt,Ht)=>{Ht%2==0?X.push(Mt):st.push(Mt)});break;case"m":case"l":case"c":case"s":case"q":case"t":var Qt;null===(Qt=K.points)||void 0===Qt||Qt.forEach((Mt,Ht)=>{if(Ht%2==0){let ue=Y[Y.length-1];Y.push(ue+Mt),X.push(ue+Mt)}else{let ue=A[A.length-1];A.push(ue+Mt),st.push(ue+Mt)}})}}),{minX:Math.min.apply(null,X),minY:Math.min.apply(null,st),maxX:Math.max.apply(null,X),maxY:Math.max.apply(null,st)}},vt=(d,Y)=>Y.map(A=>{let X=[];switch(A.type){case"a":var st;7==(null===(st=A.points)||void 0===st?void 0:st.length)&&X.push([(0,E.z)(A.points[0]/d.width,1e6),(0,E.z)(A.points[1]/d.height,1e6),A.points[2],A.points[3],A.points[4],(0,E.z)(A.points[5]/d.width,1e6),(0,E.z)(A.points[6]/d.height,1e6)]);break;case"A":var K;7==(null===(K=A.points)||void 0===K?void 0:K.length)&&X.push([(0,E.z)(A.points[0]/d.width,1e6),(0,E.z)(A.points[1]/d.height,1e6),A.points[2],A.points[3],A.points[4],(0,E.z)((A.points[5]-d.x)/d.width,1e6),(0,E.z)((A.points[6]-d.y)/d.height,1e6)]);break;case"h":var Z;null!==(Z=A.points)&&void 0!==Z&&Z.length&&X.push([(0,E.z)(A.points[0]/d.width,1e6)]);break;case"H":var xt;null!==(xt=A.points)&&void 0!==xt&&xt.length&&X.push([(0,E.z)((A.points[0]-d.x)/d.width,1e6)]);break;case"v":var H;null!==(H=A.points)&&void 0!==H&&H.length&&X.push([(0,E.z)(A.points[0]/d.height,1e6)]);break;case"V":var R;null!==(R=A.points)&&void 0!==R&&R.length&&X.push([(0,E.z)((A.points[0]-d.y)/d.height,1e6)]);break;case"z":case"Z":break;case"M":case"L":case"C":case"S":case"Q":case"T":var ut;if(null!==(ut=A.points)&&void 0!==ut&&ut.length)for(let Tt=0,Qt=A.points.length-1;Tt<Qt;Tt+=2)X.push([(0,E.z)((A.points[Tt]-d.x)/d.width,1e6),(0,E.z)((A.points[Tt+1]-d.y)/d.height,1e6)]);break;case"m":case"l":case"c":case"s":case"q":case"t":var Ct;if(null!==(Ct=A.points)&&void 0!==Ct&&Ct.length)for(let Tt=0,Qt=A.points.length-1;Tt<Qt;Tt+=2)X.push([(0,E.z)(A.points[Tt]/d.width,1e6),(0,E.z)(A.points[Tt+1]/d.height,1e6)])}return X.length?{type:A.type,ratios:X}:{type:A.type}}),C=(d,Y)=>Y.map(A=>{switch(A.type){case"a":var X,st;return`${A.type}${null!==(X=null===(st=A.ratios)||void 0===st||null===(st=st.map(ct=>{var ft,V,I,B,s,tt,Et;return[(0,E.z)(d.width*(null!==(ft=ct[0])&&void 0!==ft?ft:0),1e6),(0,E.z)(d.height*(null!==(V=ct[1])&&void 0!==V?V:0),1e6),null!==(I=ct[2])&&void 0!==I?I:0,null!==(B=ct[3])&&void 0!==B?B:0,null!==(s=ct[4])&&void 0!==s?s:0,(0,E.z)(d.width*(null!==(tt=ct[5])&&void 0!==tt?tt:0),1e6),(0,E.z)(d.height*(null!==(Et=ct[6])&&void 0!==Et?Et:0),1e6)]}))||void 0===st||null===(st=st.map(ct=>ct.join(" ")))||void 0===st?void 0:st.join(" "))&&void 0!==X?X:""}`;case"A":var K,Z;return`${A.type}${null!==(K=null===(Z=A.ratios)||void 0===Z||null===(Z=Z.map(ct=>{var ft,V,I,B,s,tt,Et;return[(0,E.z)(d.width*(null!==(ft=ct[0])&&void 0!==ft?ft:0),1e6),(0,E.z)(d.height*(null!==(V=ct[1])&&void 0!==V?V:0),1e6),null!==(I=ct[2])&&void 0!==I?I:0,null!==(B=ct[3])&&void 0!==B?B:0,null!==(s=ct[4])&&void 0!==s?s:0,(0,E.z)(d.x+d.width*(null!==(tt=ct[5])&&void 0!==tt?tt:0),1e6),(0,E.z)(d.y+d.height*(null!==(Et=ct[6])&&void 0!==Et?Et:0),1e6)]}))||void 0===Z||null===(Z=Z.map(ct=>ct.join(" ")))||void 0===Z?void 0:Z.join(" "))&&void 0!==K?K:""}`;case"h":var xt,H;return`${A.type}${null!==(xt=null===(H=A.ratios)||void 0===H||null===(H=H.map(ct=>{var ft;return(0,E.z)(d.width*(null!==(ft=ct[0])&&void 0!==ft?ft:0),1e6)}))||void 0===H?void 0:H.join(" "))&&void 0!==xt?xt:""}`;case"H":var R,ut;return`${A.type}${null!==(R=null===(ut=A.ratios)||void 0===ut||null===(ut=ut.map(ct=>{var ft;return(0,E.z)(d.x+d.width*(null!==(ft=ct[0])&&void 0!==ft?ft:0),1e6)}))||void 0===ut?void 0:ut.join(" "))&&void 0!==R?R:""}`;case"v":var Ct,Tt;return`${A.type}${null!==(Ct=null===(Tt=A.ratios)||void 0===Tt||null===(Tt=Tt.map(ct=>{var ft;return(0,E.z)(d.height*(null!==(ft=ct[0])&&void 0!==ft?ft:0),1e6)}))||void 0===Tt?void 0:Tt.join(" "))&&void 0!==Ct?Ct:""}`;case"V":var Qt,Mt;return`${A.type}${null!==(Qt=null===(Mt=A.ratios)||void 0===Mt||null===(Mt=Mt.map(ct=>{var ft;return(0,E.z)(d.y+d.height*(null!==(ft=ct[0])&&void 0!==ft?ft:0),1e6)}))||void 0===Mt?void 0:Mt.join(" "))&&void 0!==Qt?Qt:""}`;case"z":case"Z":return A.type;case"M":case"L":case"C":case"S":case"Q":case"T":var Ht,ue;return`${A.type}${null!==(Ht=null===(ue=A.ratios)||void 0===ue||null===(ue=ue.map(ct=>{var ft,V;return[(0,E.z)(d.x+d.width*(null!==(ft=ct[0])&&void 0!==ft?ft:0),1e6),(0,E.z)(d.y+d.height*(null!==(V=ct[1])&&void 0!==V?V:0),1e6)]}))||void 0===ue||null===(ue=ue.map(ct=>ct.join(" ")))||void 0===ue?void 0:ue.join(" "))&&void 0!==Ht?Ht:""}`;case"m":case"l":case"c":case"s":case"q":case"t":var bt,Pt;return`${A.type}${null!==(bt=null===(Pt=A.ratios)||void 0===Pt||null===(Pt=Pt.map(ct=>{var ft,V;return[(0,E.z)(d.width*(null!==(ft=ct[0])&&void 0!==ft?ft:0),1e6),(0,E.z)(d.height*(null!==(V=ct[1])&&void 0!==V?V:0),1e6)]}))||void 0===Pt||null===(Pt=Pt.map(ct=>ct.join(" ")))||void 0===Pt?void 0:Pt.join(" "))&&void 0!==bt?bt:""}`;default:return""}}).join(""),f=d=>{return(Y=d.replace(/\,/g," ").replace(/\-/g," -").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim())?Y.split(/\s/).map(A=>parseFloat(A)):[];var Y},L=d=>{let Y=[],A=[];return d.forEach((X,st)=>{st%2==0?Y.push(X):A.push(X)}),{minX:Math.min.apply(null,Y),minY:Math.min.apply(null,A),maxX:Math.max.apply(null,Y),maxY:Math.max.apply(null,A)}},U=(d,Y)=>{let A=[];for(let X=0,st=Y.length-1;X<st;X+=2)A.push([(Y[X]-d.x)/d.width,(Y[X+1]-d.y)/d.height]);return A},k=(d,Y)=>Y.map(A=>[(0,E.z)(d.x+d.width*A[0],1e6),(0,E.z)(d.y+d.height*A[1],1e6)]).map(A=>A.join(" ")).join(" "),F=(d,Y)=>{let A=w(Y);if(A){let X=new window.Snap.Matrix(A.a,A.b,A.c,A.d,A.e,A.f);if(X){let{dx:st,dy:K,rotate:Z,scalex:xt,scaley:H}=X.split();return{x:d.x+st,y:d.y+K,dx:st,dy:K,rotate:Z,scalex:xt,scaley:H}}return{x:S(d.x,d.y,A),y:it(d.x,d.y,A)}}return d},w=d=>{let Y=d.replace(/\s?\-?[0-9\.]+e-[0-9]+/g," 0").replace(/\,/g," ").replace(/\s?\-/g," -").replace(/(\.[0-9]+)(\.[0-9]+)/g,"$1 0$2").replace(/\-\./g,"-0.").replace(/[^0-9\.\-]/g," ").replace(/\s+/g," ").trim().split(" ").map(A=>(0,E.z)(parseFloat(A),1e6));if(6==Y.length)return{a:Y[0],b:Y[1],c:Y[2],d:Y[3],e:Y[4],f:Y[5]}},q=(d,Y)=>{let A=w(Y);return A?window.Snap.path.map(d,new window.Snap.Matrix(A.a,A.b,A.c,A.d,A.e,A.f)).toString():d},S=function(d,Y,A){return(0,E.z)(d*A.a+Y*A.c+A.e,10)},it=function(d,Y,A){return(0,E.z)(d*A.b+Y*A.d+A.f,10)}},2837:(he,Dt,v)=>{v.d(Dt,{v:()=>it,U:()=>q});var E=v(6611),b=v(1999),nt=v(2492),z=/^#[a-fA-F0-9]+$/i,vt=/^rgb\((\d+),(\d+),(\d+)\)$/i,C=/^rgba\((\d+),(\d+),(\d+),([0-9\.]+)\)$/i;const f=d=>{let Y=null,A=null;if(d)if("transparent"==d)Y="#000000",A=0;else if(d.match(z))Y=d;else{let X=(d=d.replace(/\s+/g,"")).match(C);if(X)Y="#"+(256|X[1]).toString(16).slice(1)+(256|X[2]).toString(16).slice(1)+(256|X[3]).toString(16).slice(1),A=(0,nt.z)(parseFloat(X[4]),100);else{let st=d.match(vt);st&&(Y="#"+(256|st[1]).toString(16).slice(1)+(256|st[2]).toString(16).slice(1)+(256|st[3]).toString(16).slice(1))}}return{hex:Y,alpha:A}};var L=v(4896),U=v(8338);const q=d=>S(null==d?void 0:d.url,null==d?void 0:d.path,null==d?void 0:d.src,null==d?void 0:d.name);var S=(d,Y,A,X)=>{var st,K;let Z,xt,H,R;var ut,Ct;return d&&(Z=d.replace(/\\/g,"/")),Y&&(xt=Y.replace(/\\/g,"/")),A&&(H=A.replace(/\\/g,"/")),xt&&!Z&&(Z=(null===(ut=E.L.config)||void 0===ut?void 0:ut.readfileuploadurl)+xt),!H||xt||Z||(xt=H.replace(/^[a-zA-Z0-9\-\_\/\\\:\.]+(upload|FileUpload|files|readfileupload|filereader|readfile)\//g,""),Z=(null===(Ct=E.L.config)||void 0===Ct?void 0:Ct.readfileuploadurl)+xt),R=X||(null!==(st=Z)&&void 0!==st?st:"").split("/").pop()||(null!==(K=xt)&&void 0!==K?K:"").split("/").pop()||"",{url:Z,path:xt,name:R}};const it=d=>{let Y={x:0,y:0,width:d.screen.w,height:d.screen.h},A=[];return d.data.forEach((X,st)=>{var K,Z;let xt={id:"number"==typeof X.id?X.id:E.L.data.newSlideId,code:null===(K=X.id)||void 0===K?void 0:K.toString(),name:"string"==typeof X.id?X.id:`Trang ${st+1}`,svg:{viewBox:Y,nodes:[]},test:(H=X.test2,H?(H.audiotrue&&(H.audiotrue=q({path:H.audiotrue.path})),H.audiofalse&&(H.audiofalse=q({path:H.audiofalse.path})),H.effecttrue&&(H.effecttrue=q({path:H.effecttrue.path})),H.effectfalse&&(H.effectfalse=q({path:H.effectfalse.path})),H.icontrue&&(H.icontrue=q({path:H.icontrue.path})),H.iconfalse&&(H.iconfalse=q({path:H.iconfalse.path})),H):{})};var H;X.background&&xt.svg&&(xt.svg.background=function(d){return d&&(null!==d.match(/#([a-zA-Z0-9]+)/)||null!==d.match(/rgb\([0-9]+,[0-9]+,[0-9]+\)/)||null!==d.match(/rgba\([0-9]+,[0-9]+,[0-9]+,[0-9\.]+\)/))}(X.background)?{color:X.background}:function(d){return d&&null!==d.match(/data:[^;]+;base64,/)}(X.background)?{base64:X.background}:function(d){return d&&null!==d.match(/http(s)?:\/\//)}(X.background)?S(X.background):S(void 0,X.background)),jQuery(null!==(Z=X.svg)&&void 0!==Z?Z:"").find(".indexs").find("polygon,path,circle,ellipse,line,rect,foreignObject").each((H,R)=>{var ut,Ct;let Tt=jQuery(R).parents(".indexs"),Qt=(bt=Tt.attr("data-index"))?parseInt(bt):0,Mt=(bt=>Qt&&bt?parseInt(bt):0)(Tt.attr("data-time")),Ht=null!==(ut=R.getAttribute("id"))&&void 0!==ut?ut:(1e9*Math.random()).toFixed(),ue={id:parseInt(Ht),code:`${R.nodeName}-${Ht}`,name:R.nodeName,idx:Qt,time:Mt,type:(()=>{switch(R.nodeName){case"polygon":return b.h.POLYGON;case"path":return b.h.PATH;case"circle":return b.h.CIRCLE;case"ellipse":return b.h.ELLIPSE;case"line":return b.h.LINE;case"rect":return b.h.RECT;case"foreignObject":return b.h.FOREIGNOBJECT}return 0})(),size:(bt=>{let Pt={},ct=0,ft=0,V=0,I=0,B=null,s=null,tt=parseFloat((null===(bt=R.getAttribute("transform"))||void 0===bt?void 0:bt.replace("rotate(","").replace(")",""))||"0")||null;switch(R.nodeName){case"polygon":{var Et,Ot;let jt=[],Kt=[],Ut=999999999,Vt=999999999,re=0,Nt=0;B=JSON.parse(R.getAttribute("ratios")||"[]"),s=null!==(Et=null===(Ot=R.getAttribute("points"))||void 0===Ot?void 0:Ot.split(",").map(function(ht){return ht.split(" ").map(function(Xt){return parseFloat(Xt)})}))&&void 0!==Et?Et:[],s.forEach(function(ht){jt.push(ht[0]),Kt.push(ht[1])}),Ut=Math.min.apply(null,jt),Vt=Math.min.apply(null,Kt),re=Math.max.apply(null,jt),Nt=Math.max.apply(null,Kt),ct=Ut,ft=Vt,V=re-ct,I=Nt-ft;break}case"path":{let jt=R.getAttribute("d");if(jt){let Kt=(0,L.CS)(jt),{minX:Ut,minY:Vt,maxX:re,maxY:Nt}=(0,L.lP)(Kt);ct=Ut,ft=Vt,V=re-ct||1,I=Nt-ft||1,Object.assign(Pt,{ratioMaps:(0,L.nf)({x:ct,y:ft,width:V,height:I},Kt)})}break}case"circle":{let jt=parseFloat(R.getAttribute("cx")||"0"),Kt=parseFloat(R.getAttribute("cy")||"0"),Ut=parseFloat(R.getAttribute("r")||"0");ct=jt-Ut,ft=Kt-Ut,V=2*Ut,I=2*Ut;break}case"ellipse":{let jt=parseFloat(R.getAttribute("cx")||"0"),Kt=parseFloat(R.getAttribute("cy")||"0"),Ut=parseFloat(R.getAttribute("rx")||"0"),Vt=parseFloat(R.getAttribute("ry")||"0");ct=jt-Ut,ft=Kt-Vt,V=2*Ut,I=2*Vt;break}case"line":{let jt=parseFloat(R.getAttribute("x1")||"0"),Kt=parseFloat(R.getAttribute("y1")||"0"),Ut=parseFloat(R.getAttribute("x2")||"0"),Vt=parseFloat(R.getAttribute("y2")||"0"),re=999999999,Nt=999999999,ht=0,Xt=0;re=Math.min(jt,Ut),Nt=Math.min(Kt,Vt),ht=Math.max(jt,Ut),Xt=Math.max(Kt,Vt),ct=re,ft=Nt,V=ht-ct,I=Xt-ft,B=[[(jt-ct)/(V||1),(Kt-ft)/(I||1)],[(Ut-ct)/(V||1),(Vt-ft)/(I||1)]];break}case"rect":case"foreignObject":ct=parseFloat(R.getAttribute("x")||"0"),ft=parseFloat(R.getAttribute("y")||"0"),V=parseFloat(R.getAttribute("width")||"0"),I=parseFloat(R.getAttribute("height")||"0")}return Object.assign(Pt,{x:ct,y:ft,width:V,height:I,ratios:B,points:s,rotate:tt})})(),attribute:(()=>{let bt={};switch(R.nodeName){case"polygon":case"circle":case"ellipse":case"line":case"rect":{var Pt,ct,ft,V,I,B,s,tt;let ht=null!==(Pt=R.getAttribute("fill"))&&void 0!==Pt?Pt:null,Xt=null!==(ct=R.getAttribute("stroke"))&&void 0!==ct?ct:null,P=null!==(ft=parseFloat(null!==(V=R.getAttribute("stroke-opacity"))&&void 0!==V?V:"1"))&&void 0!==ft?ft:null,h=null!==(I=parseFloat(R.getAttribute("stroke-width")||"0"))&&void 0!==I?I:null,N=null!==(B=R.getAttribute("stroke-linecap"))&&void 0!==B?B:null,rt=null!==(s=R.getAttribute("stroke-linejoin"))&&void 0!==s?s:null,lt=null!==(tt=parseFloat(R.getAttribute("stroke-dasharray")||"0"))&&void 0!==tt?tt:null;Object.assign(bt,{fill:ht,stroke:Xt,strokeOpacity:P,strokeWidth:h,strokeLinecap:N,strokeLinejoin:rt,strokeDasharray:lt});break}case"path":{let ht=Tt.get(0);if(ht){var Et,Ot,jt,Kt,Ut,Vt,re,Nt;let Xt=null!==(Et=ht.getAttribute("fill"))&&void 0!==Et?Et:null,P=null!==(Ot=ht.getAttribute("stroke"))&&void 0!==Ot?Ot:null,h=null!==(jt=parseFloat(null!==(Kt=ht.getAttribute("stroke-opacity"))&&void 0!==Kt?Kt:"1"))&&void 0!==jt?jt:null,N=null!==(Ut=parseFloat(ht.getAttribute("stroke-width")||"0"))&&void 0!==Ut?Ut:null,rt=null!==(Vt=ht.getAttribute("stroke-linecap"))&&void 0!==Vt?Vt:null,lt=null!==(re=ht.getAttribute("stroke-linejoin"))&&void 0!==re?re:null,G=null!==(Nt=parseFloat(ht.getAttribute("stroke-dasharray")||"0"))&&void 0!==Nt?Nt:null;Object.assign(bt,{fill:Xt,stroke:P,strokeOpacity:h,strokeWidth:N,strokeLinecap:rt,strokeLinejoin:lt,strokeDasharray:G})}break}}return bt})(),style:(()=>{let bt={};switch(R.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":{let ft=jQuery(R).find(".svg-container");if(ft.length){let I=parseFloat(ft.css("border-width")||"0")||null,B=ft.css("border-style")||null,s=ft.css("border-color")||null,tt=null,Et=ft.css("background-color")||null,Ot=null;(()=>{let{hex:jt,alpha:Kt}=f(s);s=jt,tt=Kt})(),(()=>{let{hex:jt,alpha:Kt}=f(Et);Et=jt,Ot=Kt})(),Object.assign(bt,{borderWidth:I,borderStyle:B,borderColor:s,borderOpacity:tt,backgroundColor:Et,backgroundOpacity:Ot})}let V=jQuery(R).find(".svg-editor-content");if(V.length){var Pt,ct;let I=JSON.parse((V.attr("data-style")||"{}").replace(/\&quot\;/gm,'"')),{hex:B,alpha:s}=f(I.TextColor);Object.assign(bt,{fontFamily:null!==(Pt=I.FontFamily)&&void 0!==Pt?Pt:null,fontSize:null!==(ct=I.FontSize)&&void 0!==ct?ct:null,color:B,opacity:s})}break}}return bt})(),source:(()=>{let bt={};switch(R.nodeName){case"polygon":case"path":case"circle":case"ellipse":case"line":case"rect":break;case"foreignObject":if(Tt.hasClass("editors")){var Pt;let Nt="div,h1,h2,h3,h4,h5,h6,p,span,strong,b,i",ht=h=>{null==h||h.forEach(N=>{let rt=N.querySelectorAll(`:scope > ${Nt}`);rt.length&&ht(rt),!N.querySelectorAll(":scope > *").length&&""==N.textContent&&N.remove()})},Xt=h=>{let N=null==h?void 0:h.querySelectorAll(":scope > div,h1,h2,h3,h4,h5,h6,p,strong,span");if(null!=N&&N.length){var rt;let lt=N[N.length-1];if(""==(null===(rt=lt.textContent)||void 0===rt?void 0:rt.trim())){let G=lt.querySelectorAll(":scope > *");if(G.length){let x=G[G.length-1];["br","BR"].includes(null==x?void 0:x.nodeName)&&(x.remove(),Xt(h))}else lt.remove(),Xt(h)}}};ht(null===(Pt=jQuery(R).find(".svg-editor-content").get(0))||void 0===Pt?void 0:Pt.querySelectorAll(`:scope > ${Nt}`)),Xt(jQuery(R).find(".svg-editor-content").get(0));let P=jQuery(R).find(".svg-editor-content");if(P.length){var ct;let h=P.html(),N=null!==(ct=(null!=h?h:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==ct?ct:[];Object.assign(bt,{type:"html",html:{htmlContent:h,variableKeywords:N}})}}else if(Tt.hasClass("inputs")||Tt.hasClass("textareas"))Object.assign(bt,{type:"input",input:{input:!!jQuery(R).find("input").length,textarea:!!jQuery(R).find("textarea").length}});else if(Tt.hasClass("tests")){let Nt=jQuery(R).find(".svg-test");if(Tt.hasClass("tests-truefalse")){var ft,V;let ht=Nt.find(".svg-editor-content").html(),Xt=null!==(ft=(null!=ht?ht:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==ft?ft:[];Object.assign(bt,{type:"test",test:{type:"truefalse",truefalse:{iscorrect:null===(V=X.test2.truefalse)||void 0===V?void 0:V.includes(Ht)}},html:{htmlContent:ht,variableKeywords:Xt}})}else if(Tt.hasClass("tests-singlechoice")){var I,B;let ht=Nt.find(".svg-editor-content").html(),Xt=null!==(I=(null!=ht?ht:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==I?I:[];Object.assign(bt,{type:"test",test:{type:"singlechoice",singlechoice:{iscorrect:null===(B=X.test2.singlechoice)||void 0===B?void 0:B.includes(Ht)}},html:{htmlContent:ht,variableKeywords:Xt}})}else if(Tt.hasClass("tests-multichoice")){var s,tt;let ht=Nt.find(".svg-editor-content").html(),Xt=null!==(s=(null!=ht?ht:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==s?s:[];Object.assign(bt,{type:"test",test:{type:"multichoice",multichoice:{iscorrect:null===(tt=X.test2.multichoice)||void 0===tt?void 0:tt.includes(Ht)}},html:{htmlContent:ht,variableKeywords:Xt}})}else if(Tt.hasClass("tests-fill")){var Et,Ot;let ht=Nt.find(".svg-editor-content").html(),Xt=null!==(Et=(null!=ht?ht:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==Et?Et:[],P=null!==(Ot=(null!=ht?ht:"").match(/\[\[[a-zA-Z0-9]+\]\]/gm))&&void 0!==Ot?Ot:[];P=P.filter((h,N,rt)=>rt.indexOf(h)==N),Object.assign(bt,{type:"test",test:{type:"fill",fill:P.map(h=>{var N;return{key:h,value:null===(N=X.test2.fill)||void 0===N||null===(N=N.find(rt=>rt.id==Ht))||void 0===N||null===(N=N.vals)||void 0===N?void 0:N.map(rt=>rt.text).filter(rt=>!["",null,void 0,NaN].includes(rt))}})},html:{htmlContent:ht,variableKeywords:Xt,fillKeywords:P}})}else if(Tt.hasClass("tests-matching")){if(Nt.hasClass("svg-test-empty"))Object.assign(bt,{type:"test",test:{type:"matching-empty",matching:{key:Nt.attr("data-name")||null}}});else if(Nt.hasClass("svg-test-content")){var jt;let ht=Nt.find(".svg-editor-content").html(),Xt=null!==(jt=(null!=ht?ht:"").match(/\{[a-zA-Z0-9_]+\}/gm))&&void 0!==jt?jt:[];Object.assign(bt,{type:"test",test:{type:"matching-content",matching:{key:Nt.attr("data-name")||null}},html:{htmlContent:ht,variableKeywords:Xt}})}}else if(Tt.hasClass("tests-speech")){var Kt;Object.assign(bt,{type:"speech",speech:{value:null===(Kt=X.test2.speech)||void 0===Kt||null===(Kt=Kt.find(ht=>ht.id==Ht))||void 0===Kt||null===(Kt=Kt.vals)||void 0===Kt?void 0:Kt.map(ht=>ht.text).filter(ht=>!["",null,void 0,NaN].includes(ht))}})}else if(Tt.hasClass("tests-submit")){let ht=jQuery(R).find(".svg-container img");Object.assign(bt,{type:"test",test:{type:"submit"},image:S(ht.attr("url"),ht.attr("path"),ht.attr("src"))})}}else if(Tt.hasClass("images")){let Nt=jQuery(R).find(".svg-editor-content img");if(Nt.length)Object.assign(bt,{type:"image",image:S(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});else{let ht=jQuery(R).find("iframe");Object.assign(bt,{type:"iframe",iframe:S(ht.attr("url"),ht.attr("path"),ht.attr("src"))})}}else if(Tt.hasClass("sounds")){let Nt=jQuery(R).find(".svg-editor-content img");Nt.length&&Object.assign(bt,{type:"image",image:S(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))})}else if(Tt.hasClass("htmls")){let Nt=jQuery(R).find("iframe");Nt.length&&Object.assign(bt,{type:"iframe",iframe:S(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))})}else if(Tt.hasClass("svgs")){let Nt=jQuery(R).find("svg");var Ut,Vt;Nt.length&&Object.assign(bt,{type:"svg",svg:Object.assign(S(Nt.attr("url"),Nt.attr("path"),Nt.attr("src")),{svgContent:null!==(Ut=null===(Vt=Nt.get(0))||void 0===Vt?void 0:Vt.outerHTML)&&void 0!==Ut?Ut:null})})}else if(Tt.hasClass("medias")){let Nt=jQuery(R).find(".media-item");if(Nt.length)switch(Nt.attr("type")){case"audio":Object.assign(bt,{type:"audio",audio:S(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});break;case"video":Object.assign(bt,{type:"video",video:S(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});break;case"file":Object.assign(bt,{type:"file",file:S(Nt.attr("url"),Nt.attr("path"),Nt.attr("src"))});break;default:var re;Object.assign(bt,{type:"link",link:{url:null!==(re=Nt.attr("url"))&&void 0!==re?re:null}})}let ht=jQuery(R).find("img");ht.length&&(Object.assign(bt,{image:S(ht.attr("url"),ht.attr("path"),ht.attr("src"))}),bt.type||Object.assign(bt,{type:"image"}))}}return bt})(),animate:(bt=>{let Pt={},ct=null===(bt=X.animates)||void 0===bt?void 0:bt.find(ft=>ft.elementId==Ht);return ct&&Object.assign(Pt,{value:ct.value}),Pt})(),interactive:(()=>{let bt={},Pt=X.actions.show.filter(ft=>ft.elementId==Ht&&ft.active);Pt.length&&(bt.show={},Pt.forEach(ft=>{let{source:V}=ft;switch(null==V?void 0:V.type){case"work":var I,B,s,tt,Et;bt.show.action={},Object.assign(bt.show.action,{value:null!==(I=V.value)&&void 0!==I?I:null,iteration:null!==(B=V.iteration)&&void 0!==B?B:null,finish:null!==(s=V.end)&&void 0!==s?s:null,time:null!==(tt=V.time)&&void 0!==tt?tt:null,points:null!==(Et=V.points)&&void 0!==Et?Et:null});break;case"audio":var Ot,jt,Kt;bt.show.audio={},Object.assign(bt.show.audio,{source:S(null,null,V.url),iteration:null!==(Ot=V.iteration)&&void 0!==Ot?Ot:null,finish:null!==(jt=V.end)&&void 0!==jt?jt:null,time:null!==(Kt=V.time)&&void 0!==Kt?Kt:null,async:-1==V.iteration?"change-slide":"change-node"});break;case"node":case"node2":var Ut,Vt,re,Nt,ht,Xt,P,h,N,rt,lt,G,x,W,at;V.options.includes("show")&&(bt.show.triggershow={},Object.assign(bt.show.triggershow,{id:null!==(Ut=parseInt(null!==(Vt=V.id)&&void 0!==Vt?Vt:"0"))&&void 0!==Ut?Ut:null,ids:null===(re=V.ids)||void 0===re?void 0:re.map(yt=>parseInt(yt)),async:null!==(Nt=V.async)&&void 0!==Nt?Nt:null,time:null!==(ht=V.time)&&void 0!==ht?ht:null})),V.options.includes("run")&&(bt.show.triggerrun={},Object.assign(bt.show.triggerrun,{id:null!==(Xt=parseInt(null!==(P=V.id)&&void 0!==P?P:"0"))&&void 0!==Xt?Xt:null,ids:null===(h=V.ids)||void 0===h?void 0:h.map(yt=>parseInt(yt)),async:null!==(N=V.async)&&void 0!==N?N:null,time:null!==(rt=V.time)&&void 0!==rt?rt:null})),V.options.includes("hide")&&(bt.show.triggerhide={},Object.assign(bt.show.triggerhide,{id:null!==(lt=parseInt(null!==(G=V.id)&&void 0!==G?G:"0"))&&void 0!==lt?lt:null,ids:null===(x=V.ids)||void 0===x?void 0:x.map(yt=>parseInt(yt)),async:null!==(W=V.async)&&void 0!==W?W:null,time:null!==(at=V.time)&&void 0!==at?at:null}))}}));let ct=X.actions.click.filter(ft=>ft.elementId==Ht&&ft.active);return ct&&(bt.click={},ct.forEach(ft=>{let{source:V}=ft;switch(null==V?void 0:V.type){case"work":var I,B,s,tt,Et;bt.click.action={},Object.assign(bt.click.action,{value:null!==(I=V.value)&&void 0!==I?I:null,iteration:null!==(B=V.iteration)&&void 0!==B?B:null,finish:null!==(s=V.end)&&void 0!==s?s:null,time:null!==(tt=V.time)&&void 0!==tt?tt:null,points:null!==(Et=V.points)&&void 0!==Et?Et:null});break;case"audio":var Ot,jt,Kt;bt.click.audio={},Object.assign(bt.click.audio,{source:S(null,null,V.url),iteration:null!==(Ot=V.iteration)&&void 0!==Ot?Ot:null,finish:null!==(jt=V.end)&&void 0!==jt?jt:null,time:null!==(Kt=V.time)&&void 0!==Kt?Kt:null,async:-1==V.iteration?"change-slide":"change-node"});break;case"video":{bt.click.video={},Object.assign(bt.click.video,{source:S(V.url,V.path)});let{url:_t,path:St,name:et}=S(V.url,V.path);bt.click.media={},Object.assign(bt.click.media,{url:_t,path:St,name:et,type:U.S.VIDEO});break}case"image":{bt.click.image={},Object.assign(bt.click.image,{source:S(V.url,V.path)});let{url:_t,path:St,name:et}=S(V.url,V.path);bt.click.media={},Object.assign(bt.click.media,{url:_t,path:St,name:et,type:U.S.IMAGE});break}case"link":{bt.click.link={},Object.assign(bt.click.link,{url:V.url,target:V.target});let{url:_t,path:St,name:et}=S(V.url,V.path);bt.click.media={},Object.assign(bt.click.media,{url:_t,path:St,name:et,type:U.S.LINK});break}case"text":bt.click.text={},Object.assign(bt.click.text,{content:V.content});break;case"node":case"node2":var Ut,Vt,re,Nt,ht,Xt,P,h,N,rt,lt,G,x,W,at;V.options.includes("show")&&(bt.click.triggershow={},Object.assign(bt.click.triggershow,{id:null!==(Ut=parseInt(null!==(Vt=V.id)&&void 0!==Vt?Vt:"0"))&&void 0!==Ut?Ut:null,ids:null===(re=V.ids)||void 0===re?void 0:re.map(_t=>parseInt(_t)),async:null!==(Nt=V.async)&&void 0!==Nt?Nt:null,time:null!==(ht=V.time)&&void 0!==ht?ht:null})),V.options.includes("run")&&(bt.click.triggerrun={},Object.assign(bt.click.triggerrun,{id:null!==(Xt=parseInt(null!==(P=V.id)&&void 0!==P?P:"0"))&&void 0!==Xt?Xt:null,ids:null===(h=V.ids)||void 0===h?void 0:h.map(_t=>parseInt(_t)),async:null!==(N=V.async)&&void 0!==N?N:null,time:null!==(rt=V.time)&&void 0!==rt?rt:null})),V.options.includes("hide")&&(bt.click.triggerhide={},Object.assign(bt.click.triggerhide,{id:null!==(lt=parseInt(null!==(G=V.id)&&void 0!==G?G:"0"))&&void 0!==lt?lt:null,ids:null===(x=V.ids)||void 0===x?void 0:x.map(_t=>parseInt(_t)),async:null!==(W=V.async)&&void 0!==W?W:null,time:null!==(at=V.time)&&void 0!==at?at:null}));break;case"slide":var yt;bt.click.slide={},Object.assign(bt.click.slide,{id:parseInt(null!==(yt=V.id)&&void 0!==yt?yt:"0")||V.num||null,code:V.id})}})),bt})(),variable:(bt=>{let Pt={};var ct;R.getAttribute("data-variable")&&(Pt.input={},Object.assign(Pt.input,{variable:null!==(ct=R.getAttribute("data-variable"))&&void 0!==ct?ct:null}));let ft=null===(bt=X.nodes)||void 0===bt||null===(bt=bt.find(tt=>tt.id==Ht))||void 0===bt?void 0:bt.variable;var V,I,B,s;return ft&&(Pt.click={},Object.assign(Pt.click,{variable:null!==(V=ft.variable)&&void 0!==V?V:null,operator:null!==(I=ft.operator)&&void 0!==I?I:null,valuetype:null!==(B=ft.valuetype)&&void 0!==B?B:null,value:null!==(s=ft.value)&&void 0!==s?s:null})),Pt})()};var bt;null===(Ct=xt.svg)||void 0===Ct||Ct.nodes.push(ue)}),A.push(xt)}),{screen:{width:d.screen.w,height:d.screen.h},data:{slides:A},variable:d.variable}}},6195:(he,Dt,v)=>{v.d(Dt,{A9:()=>U,IB:()=>k,_4:()=>L,_5:()=>vt,ar:()=>C,yW:()=>f});var E=v(467),b=v(119);b.config({driver:[b.INDEXEDDB,b.LOCALSTORAGE,b.WEBSQL],name:"_localDataDB",version:1});const z={create:(F=(0,E.A)(function*(){return b}),function(){return F.apply(this,arguments)}),get:function(){var F=(0,E.A)(function*(w){return b.getItem(w)});return function(q){return F.apply(this,arguments)}}(),set:function(){var F=(0,E.A)(function*(w,q){return b.setItem(w,q)});return function(q,S){return F.apply(this,arguments)}}()},vt=function(){var F=(0,E.A)(function*(w){yield z.create();var q=(yield z.get("icdt-data"))||[];"function"==typeof w.callback&&w.callback(q)});return function(q){return F.apply(this,arguments)}}(),C=function(){var F=(0,E.A)(function*(w){yield z.create(),w.params=w.params||{};try{yield z.set("icdt-data",w.params),"function"==typeof w.callback&&w.callback(w.params)}catch(q){"function"==typeof w.callback&&w.callback(null),console.error(q)}});return function(q){return F.apply(this,arguments)}}(),f=function(){var F=(0,E.A)(function*(w){yield z.create();try{var q=(yield z.get("icdt-config"))||{};"function"==typeof w.callback&&w.callback(q)}catch(S){"function"==typeof w.callback&&w.callback(null),console.error(S)}});return function(q){return F.apply(this,arguments)}}(),L=function(){var F=(0,E.A)(function*(w){yield z.create(),w.params=w.params||{};try{yield z.set("icdt-config",w.params),"function"==typeof w.callback&&w.callback(w.params)}catch(q){"function"==typeof w.callback&&w.callback(null),console.error(q)}});return function(q){return F.apply(this,arguments)}}(),U=function(){var F=(0,E.A)(function*(w){yield z.create();try{var q=(yield z.get("icdt-clipboard"))||{};"function"==typeof w.callback&&w.callback(q)}catch(S){"function"==typeof w.callback&&w.callback(null),console.error(S)}});return function(q){return F.apply(this,arguments)}}(),k=function(){var F=(0,E.A)(function*(w){yield z.create(),w.params=w.params||{};try{yield z.set("icdt-clipboard",w.params),"function"==typeof w.callback&&w.callback(w.params)}catch(q){"function"==typeof w.callback&&w.callback(null),console.error(q)}});return function(q){return F.apply(this,arguments)}}();var F},6315:(he,Dt,v)=>{v.d(Dt,{w:()=>E});const E=(b,nt)=>{if(!b)return"";let z=b.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i),vt=(z&&z[4]||"").trim(),C=z?(256|z[1]).toString(16).slice(1)+(256|z[2]).toString(16).slice(1)+(256|z[3]).toString(16).slice(1):b;if("0"==vt)return"transparent";if(nt){let f;f=""!==vt?vt:"01",f=(255*f|256).toString(16).slice(1),C+=f}return`#${C}`}},7873:(he,Dt,v)=>{v.d(Dt,{F:()=>E});const E={RESIZE_GROUP:"icdt-resize-g",SELECT_GROUP:"icdt-select-g",SCAN_GROUP:"icdt-scan-g",CREATE_GROUP:"icdt-create-g",INTERACTIVE_GROUP:"icdt-interactive-g",INDEX_GROUP:"icdt-index-g",BACKGROUND_GROUP:"icdt-background-g",TEST_GROUP:"icdt-test-g"}},1477:(he,Dt,v)=>{v.d(Dt,{r:()=>E});const E={Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,Digit0:48,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,Insert:45,Delete:46,Home:36,End:35,PageUp:33,PageDown:34,ArrowUp:38,ArrowDown:40,ArrowLeft:37,ArrowRight:39,Escape:27,Tab:9,Backspace:8,Enter:13,Space:32,BracketLeft:219,BracketRight:221}},2409:(he,Dt,v)=>{v.d(Dt,{F:()=>E});const E={DRAW:1,HIGHTLIGH:2,INTERACTIVE:3}},3603:(he,Dt,v)=>{v.d(Dt,{P:()=>E});const E={POINTER:0,HAND:1,PEN:2,SHAPE:3,FOREIGNOBJECT:6,IMAGE:7,TEXT:4,ERASER:5,INDEX:8}},4888:(he,Dt,v)=>{v.d(Dt,{Q:()=>E});const E={TRIANGLE_ISOSCELES:3,TRIANGLE_EQUILATERAL:31,RECTANGLE:4,PENTAGON:5,HEXAGON:6,BOOKMARK:101,COMMENT:102,CROSS:104,ARROW_ONEWAY:201,ARROW_TWOWAY:202,STAR_FOUR:304,STAR_FIVE:305,STAR_SIX:306}},1999:(he,Dt,v)=>{v.d(Dt,{h:()=>E});const E={GROUP:0,CIRCLE:1,ELLIPSE:2,LINE:5,RECT:3,POLYGON:4,FOREIGNOBJECT:6,IMAGE:9,TEXT:7,TSPAN:10,PATH:8,POLYLINE:11}},8338:(he,Dt,v)=>{v.d(Dt,{S:()=>E});const E={TEXT:900,IMAGE:901,AUDIO:902,VIDEO:903,LINK:904,ZIP:905,HTML:906,TRACK:907,OFFICE:908,PDF:909,PHET:910,IMAGE_ANIMATION:911,SCORM:912}},6611:(he,Dt,v)=>{v.d(Dt,{L:()=>kt});var E=v(3603),b=v(5970),nt=v(7873),z=v(9506),vt=v(1308),C=v(5713);const U=j=>{var i,r,o,n,a,y,p;let c=(null===(i=j.mouseEvent)||void 0===i?void 0:i.target)||(null===(r=j.touchEvent)||void 0===r?void 0:r.target),O=(null===(o=c)||void 0===o?void 0:o.getAttribute("id"))||"",m=null===(n=c)||void 0===n?void 0:n.nodeName;kt.dataSelect.nodeName.includes(m)||(c=jQuery(c).parents("foreignObject").get(0),c&&(O=c.getAttribute("id")||"",m=c.nodeName));let D=(null===(a=c)||void 0===a||null===(a=a.parentNode)||void 0===a?void 0:a.getAttribute("id"))||"";var M,wt;if([nt.F.RESIZE_GROUP,nt.F.SELECT_GROUP].includes(D))return null===(M=j.mouseEvent)||void 0===M||M.stopPropagation(),void(null===(wt=j.mouseEvent)||void 0===wt||wt.preventDefault());if(null!==(y=j.mouseEvent)&&void 0!==y&&y.altKey||null!==(p=j.touchEvent)&&void 0!==p&&p.altKey||!O||O.match(/[^0-9]/)||!kt.dataSelect.nodeName.includes(m)){var pt;kt.dataSelect.ids.length&&(kt.dataSelect.ids=[]),(0==(null===(pt=j.mouseEvent)||void 0===pt?void 0:pt.button)||j.touchEvent)&&(j=>{let a=(0,b.RY)(nt.F.SCAN_GROUP,"g"),y=(0,z.CE)(0,0,1,1);(0,b.xJ)(a,y),((j,i,r)=>{(0,vt.I)(j,{start:a=>{},move:(a,y)=>{((a,y,p,c)=>{i=(0,z.CE)(a,y,p,c),(0,b.xJ)(r,i)})(y[0][0],y[0][1],a.x,a.y)},end:(a,y)=>{null==r||r.remove(),kt.dataSelect.ids=kt.data.getNodeInArea(Math.min(y[0][0],a.x),Math.min(y[0][1],a.y),Math.max(y[0][0],a.x),Math.max(y[0][1],a.y)),(0,C.D)(kt.dataSelect.nodes)}})})(j,y,a)})(j)}else{var Lt,Bt;let Yt=parseFloat(O||"0");kt.dataSelect.ids=null!==(Lt=j.mouseEvent)&&void 0!==Lt&&Lt.shiftKey||null!==(Bt=j.touchEvent)&&void 0!==Bt&&Bt.shiftKey?[Yt].concat(kt.dataSelect.ids).filter((_e,xe,be)=>be.indexOf(_e)==xe):[Yt],(0,C.D)(kt.dataSelect.nodes)}};class F{constructor(){let{x:i,y:r}=kt.screen.dislocation;var o=(n,a,y,p)=>{kt.screen.move({x:i,y:r},{x:y-n,y:p-a})};return{start:n=>{},move:(n,a)=>{o(a[0][0],a[0][1],n.x,n.y)},end:(n,a)=>{o(a[0][0],a[0][1],n.x,n.y)}}}}var w=v(1999),q=v(4888);const S=[{name:"tam gi\xe1c vu\xf4ng",type:q.Q.TRIANGLE_ISOSCELES,ratios:[[0,0],[1,1],[0,1]]},{name:"tam gi\xe1c c\xe2n",type:q.Q.TRIANGLE_EQUILATERAL,ratios:[[.5,0],[0,1],[1,1]]},{name:"h\xecnh ch\u1eef nh\u1eadt",type:q.Q.RECTANGLE,ratios:[[0,0],[1,0],[1,1],[0,1]]},{name:"h\xecnh ng\u0169 gi\xe1c \u0111\u1ec1u",type:q.Q.PENTAGON,ratios:[[.5,0],[1,.4],[.8,1],[.2,1],[0,.4]]},{name:"h\xecnh l\u1ee5c gi\xe1c \u0111\u1ec1u",type:q.Q.HEXAGON,ratios:[[.5,0],[1,.25],[1,.75],[.5,1],[0,.75],[0,.25]]},{name:"khung \u0111\xe1nh d\u1ea5u v\u1ecb tr\xed",type:q.Q.BOOKMARK,ratios:[[0,0],[1,0],[1,.8],[.5,1],[0,.8]]},{name:"khung \u0111\xe1nh tr\xf2 chuy\u1ec7n",type:q.Q.COMMENT,ratios:[[0,0],[1,0],[1,.9],[.3,.9],[.2,1],[.1,.9],[0,.9]]},{name:"h\xecnh ch\u1eef th\u1eadp",type:q.Q.CROSS,ratios:[[0,.3],[.3,.3],[.3,0],[.7,0],[.7,.3],[1,.3],[1,.7],[.7,.7],[.7,1],[.3,1],[.3,.7],[0,.7]]},{name:"h\xecnh m\u0169i t\xean 1 chi\u1ec1u",type:q.Q.ARROW_ONEWAY,ratios:[[0,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[0,.8]]},{name:"h\xecnh m\u0169i t\xean 2 chi\u1ec1u",type:q.Q.ARROW_TWOWAY,ratios:[[.2,0],[.2,.2],[.8,.2],[.8,0],[1,.5],[.8,1],[.8,.8],[.2,.8],[.2,1],[0,.5]]},{name:"h\xecnh ng\xf4i sao 4 c\xe1nh",type:q.Q.STAR_FOUR,ratios:[[.5,0],[.65,.35],[1,.5],[.65,.65],[.5,1],[.35,.65],[0,.5],[.35,.35]]},{name:"h\xecnh ng\xf4i sao 5 c\xe1nh",type:q.Q.STAR_FIVE,ratios:[[.5,0],[.625,.4],[1,.4],[.675,.625],[.8,1],[.5,.775],[.2,1],[.325,.625],[0,.4],[.375,.4]]},{name:"h\xecnh ng\xf4i sao 6 c\xe1nh",type:q.Q.STAR_SIX,ratios:[[.5,0],[.667,.25],[1,.25],[.5+.334,.5],[1,.75],[.667,.75],[.5,1],[.334,.75],[0,.75],[.167,.5],[0,.25],[.334,.25]]}];var it=v(1281),d=v(2492);class Y{constructor(){let i=(0,b.RY)(nt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:a}=(0,it.K)(Math.ceil(1e9*Math.random())),y=(p,c,O,m)=>{a=(0,z.CE)(p,c,O,m,{ratio:1}),a.x=(0,d.z)(a.x),a.y=(0,d.z)(a.y),a.width=(0,d.z)(a.width),a.height=(0,d.z)(a.height),Object.assign(n,(0,z.xW)(w.h.CIRCLE,a,n)),(0,b.tD)(o,n),(0,b.in)(i,a)};return{start:p=>{y(p.x,p.y,p.x+a.width,p.y+a.height)},move:(p,c)=>{y(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{(a.width<=16||a.height<=16)&&(a.width=80,a.height=80,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(n,(0,z.xW)(w.h.CIRCLE,a,n)),(0,b.tD)(o,n)),kt.data.node=Object.assign({id:r,type:w.h.CIRCLE,name:"Circle"},{size:a,attribute:n}),null==i||i.remove()}}}}var A=v(6153);class X{constructor(){let i=(0,b.RY)(nt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:a}=(0,A.W)(Math.ceil(1e9*Math.random()));var y=(p,c,O,m)=>{a=(0,z.CE)(p,c,O,m),a.x=(0,d.z)(a.x),a.y=(0,d.z)(a.y),a.width=(0,d.z)(a.width),a.height=(0,d.z)(a.height),Object.assign(n,(0,z.xW)(w.h.ELLIPSE,a,n)),(0,b.tD)(o,n),(0,b.in)(i,a)};return{start:p=>{y(p.x,p.y,p.x+a.width,p.y+a.height)},move:(p,c)=>{y(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{(a.width<=16||a.height<=16)&&(a.width=90,a.height=60,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(n,(0,z.xW)(w.h.ELLIPSE,a,n)),(0,b.tD)(o,n)),kt.data.node=Object.assign({id:r,type:w.h.ELLIPSE,name:"Ellipse"},{size:a,attribute:n}),null==i||i.remove()}}}}var st=v(7945);class K{constructor(){let i=(0,b.RY)(nt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:a}=(0,st.a)(Math.ceil(1e9*Math.random()));var y=(p,c,O,m)=>{a=(0,z.CE)(p,c,O,m),a.x=(0,d.z)(a.x),a.y=(0,d.z)(a.y),a.width=(0,d.z)(a.width),a.height=(0,d.z)(a.height),Object.assign(n,(0,z.xW)(w.h.RECT,a,n)),(0,b.tD)(o,n),(0,b.in)(i,a)};return{start:p=>{y(p.x,p.y,p.x+a.width,p.y+a.height)},move:(p,c)=>{y(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{(a.width<=16||a.height<=16)&&(a.width=80,a.height=80,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(n,(0,z.xW)(w.h.RECT,a,n)),(0,b.tD)(o,n)),kt.data.node=Object.assign({id:r,type:w.h.RECT,name:"Rect"},{size:a,attribute:n}),null==i||i.remove()}}}}var Z=v(3477);class xt{constructor(i){let r=(0,b.RY)(nt.F.CREATE_GROUP,"g"),o=i||[[0,0],[1,1],[0,1]],{nodeId:n,element:a,attribute:y,size:p}=(0,Z.u)(Math.ceil(1e9*Math.random()));p.ratios=o;var c=(O,m,D,M)=>{p=(0,z.CE)(O,m,D,M,{ratios:o}),p.x=(0,d.z)(p.x),p.y=(0,d.z)(p.y),p.width=(0,d.z)(p.width),p.height=(0,d.z)(p.height),Object.assign(y,(0,z.xW)(w.h.POLYGON,p,y)),(0,b.tD)(a,y),(0,b.in)(r,p)};return{start:O=>{c(O.x,O.y,O.x+p.width,O.y+p.height)},move:(O,m)=>{c(m[0][0],m[0][1],O.x,O.y)},end:(O,m)=>{(p.width<=16||p.height<=16)&&(p.width=80,p.height=80,p.x=p.x-p.width/2,p.y=p.y-p.height/2,Object.assign(y,(0,z.xW)(w.h.POLYGON,p,y)),(0,b.tD)(a,y)),kt.data.node=Object.assign({id:n,type:w.h.POLYGON,name:"Polygon"},{size:p,attribute:y}),null==r||r.remove()}}}}var H=v(3069);class R{constructor(){let i=(0,b.RY)(nt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:a}=(0,H.q)(Math.ceil(1e9*Math.random()));return{start:p=>{},move:(p,c)=>{((p,c,O,m)=>{a=(0,z.CE)(p,c,O,m),a.x=(0,d.z)(a.x),a.y=(0,d.z)(a.y),a.width=(0,d.z)(a.width),a.height=(0,d.z)(a.height),Object.assign(n,(0,z.xW)(w.h.LINE,a,n)),(0,b.tD)(o,n),(0,b.in)(i,a)})(c[0][0],c[0][1],p.x,p.y)},end:(p,c)=>{c.length>=2?((a.width<=16||a.height<=16)&&(a.width=80,a.height=80,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(n,(0,z.xW)(w.h.LINE,a,n)),(0,b.tD)(o,n)),kt.data.node=Object.assign({id:r,type:w.h.LINE,name:"Line"},{size:a,attribute:n})):null==o||o.remove(),null==i||i.remove()}}}}var ut=v(4896),Ct=v(6407);class Tt{constructor(){let{nodeId:i,element:r,attribute:o,size:n}=(0,Ct.X)(Math.ceil(1e9*Math.random())),y="";return{start:c=>{y=`M ${c.x} ${c.y} L ${c.x} ${c.y}`},move:(c,O)=>{((c,O)=>{y+=` ${c} ${O}`,r.setAttribute("d",y)})(c.x,c.y)},end:(c,O)=>{let m=(0,ut.CS)(y),{minX:D,minY:M,maxX:wt,maxY:pt}=(0,ut.lP)(m);n.x=D,n.y=M,n.width=wt-D||1,n.height=pt-M||1,n.ratioMaps=(0,ut.nf)(n,m),kt.data.node=Object.assign({id:i,type:w.h.PATH,name:"Path"},{size:n,attribute:o})}}}}var Qt=v(745);class Mt{constructor(){let i=(0,b.RY)(nt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,size:n,attribute:a,style:y,source:p}=(0,Qt.$)(Math.ceil(1e9*Math.random()));var c=(O,m,D,M)=>{n=(0,z.CE)(O,m,D,M),n.x=(0,d.z)(n.x),n.y=(0,d.z)(n.y),n.width=(0,d.z)(n.width),n.height=(0,d.z)(n.height),Object.assign(a,(0,z.xW)(w.h.FOREIGNOBJECT,n,a)),(0,b.tD)(o,a),(0,b.in)(i,n)};return{start:O=>{c(O.x,O.y,O.x+n.width,O.y+n.height)},move:(O,m)=>{c(m[0][0],m[0][1],O.x,O.y)},end:(O,m)=>{(n.width<=16||n.height<=16)&&(n.width=90,n.height=60,n.x=n.x-n.width/2,n.y=n.y-n.height/2,Object.assign(a,(0,z.xW)(w.h.FOREIGNOBJECT,n,a)),(0,b.tD)(o,a)),kt.data.node=Object.assign({id:r,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:a,style:y,source:p}),null==i||i.remove()}}}}var Ht=v(9173);class ue{constructor(){var i,r;let o=(0,b.RY)(nt.F.CREATE_GROUP,"g"),{nodeId:n,element:a,size:y,attribute:p,source:c}=(0,Ht.B)(Math.ceil(1e9*Math.random())),O=1;(D=>{if(!D)return;let M=new Image;M.onload=()=>{O=(0,d.z)(M.naturalWidth/M.naturalHeight,100)},M.onerror=wt=>{console.error(`ImgSrc load failed -> ${D}`,wt)},M.src=D})(null!==(i=null===(r=c.image)||void 0===r?void 0:r.url)&&void 0!==i?i:"");var m=(D,M,wt,pt)=>{y=(0,z.CE)(D,M,wt,pt,{ratio:O}),y.x=(0,d.z)(y.x),y.y=(0,d.z)(y.y),y.width=(0,d.z)(y.width),y.height=(0,d.z)(y.height),Object.assign(p,(0,z.xW)(w.h.IMAGE,y,p)),(0,b.tD)(a,p),(0,b.in)(o,y)};return{start:D=>{m(D.x,D.y,D.x+y.width,D.y+y.height)},move:(D,M)=>{m(M[0][0],M[0][1],D.x,D.y)},end:(D,M)=>{(y.width<=16||y.height<=16)&&(y.width=80,y.height=80,y.x=y.x-y.width/2,y.y=y.y-y.height/2,Object.assign(p,(0,z.xW)(w.h.IMAGE,y,p)),(0,b.tD)(a,p)),kt.data.node=Object.assign({id:n,type:w.h.IMAGE,name:"Image"},{size:y,attribute:p,source:c}),null==o||o.remove()}}}}var Pt=v(7135),ct=v(4979);function I(j,i,r,o){return Math.sqrt(Math.pow(r-j,2)+Math.pow(o-i,2))}function B(j,i,r,o,n){return I(j,i,r,o)<n?1:0}function tt(j,i,r,o,n,a,y){var p=[];return p.push(B(j,i,r,o,y)),p.push(B(j,i,n,a,y)),p.push(function s(j,i,r,o,n,a,y){var p=[n-r,a-o],c=[j-r,i-o],O=[-p[1],p[0]],m=Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2)),D=[O[0]/m,O[1]/m],M=Math.sqrt(Math.pow(p[0],2)+Math.pow(p[1],2)),wt=[p[0]/M,p[1]/M],pt=c[0]*wt[0]+c[1]*wt[1];if(pt<=0||pt>=M)return 0;var Lt=c[0]*D[0]+c[1]*D[1];return Lt>=y||Lt<=-y?0:1}(j,i,r,o,n,a,y)),p}function Et(j,i,r,o,n){var a=[r-j,o-i],y=[-a[1],a[0]],p=Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2)),c=[y[0]/p,y[1]/p];return[[j+n*c[0],i+n*c[1]],[j-n*c[0],i-n*c[1]],[r-n*c[0],o-n*c[1]],[r+n*c[0],o+n*c[1]]]}function Ot(j,i,r,o,n,a,y){var pt,p=[n-j,a-i],c=[r-j,o-i],O=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),m=[c[0]/O,c[1]/O],D=p[0]*m[0]+p[1]*m[1],M=[j+D*m[0],i+D*m[1]],wt=Math.sqrt(Math.pow(n-M[0],2)+Math.pow(a-M[1],2));pt=0===wt?y:Math.sqrt(Math.pow(y,2)-Math.pow(wt,2));var Lt=[j+D*m[0]+pt*m[0],i+D*m[1]+pt*m[1]];return Lt[0]===j&&Lt[1]===i?null:Lt}function jt(j,i,r,o,n,a,y){var p=[n-j,a-i],c=[r-j,o-i],O=[-c[1],c[0]],m=Math.sqrt(Math.pow(O[0],2)+Math.pow(O[1],2)),D=[O[0]/m,O[1]/m],M=p[0]*D[0]+p[1]*D[1],wt=ht([j,i],[r,o],[n,a]);if(re([wt[0]-n,wt[1]-a])>=y)return null;var Lt=Math.sqrt(Math.pow(y,2)-Math.pow(M,2)),Bt=[n-M*D[0],a-M*D[1]],Yt=Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)),_e=[c[0]/Yt,c[1]/Yt],xe=[[Bt[0]-_e[0]*Lt,Bt[1]-_e[1]*Lt],[Bt[0]+_e[0]*Lt,Bt[1]+_e[1]*Lt]];return xe[0][0]===j&&xe[0][1]===i?null:xe}function Kt(j,i,r,o,n,a,y,p){var c,O,m,D,M,wt;return-(m=y-n)*(O=o-i)+(c=r-j)*(D=p-a)==0?null:(wt=(m*(i-a)-D*(j-n))/(-m*O+c*D),(M=(-O*(j-n)+c*(i-a))/(-m*O+c*D))>=0&&M<=1&&wt>=0&&wt<=1?[j+wt*c,i+wt*O]:null)}function Ut(j,i,r,o,n,a,y,p,c,O){var m=Et(a,y,p,c,O),D=[];if(r[0]&&!r[1])D.push(Ot(j,i,o,n,a,y,O)),D.push(Kt(j,i,o,n,m[0][0],m[0][1],m[3][0],m[3][1])),D.push(Kt(j,i,o,n,m[1][0],m[1][1],m[2][0],m[2][1])),(M=jt(j,i,o,n,p,c,O))&&D.push(M[0],M[1]);else if(!r[0]&&r[1])D.push(Ot(j,i,o,n,p,c,O)),D.push(Kt(j,i,o,n,m[0][0],m[0][1],m[3][0],m[3][1])),D.push(Kt(j,i,o,n,m[1][0],m[1][1],m[2][0],m[2][1])),(M=jt(j,i,o,n,a,y,O))&&D.push(M[0],M[1]);else if(r[0]&&r[1])D.push(Ot(j,i,o,n,a,y,O)),D.push(Kt(j,i,o,n,m[0][0],m[0][1],m[3][0],m[3][1])),D.push(Kt(j,i,o,n,m[1][0],m[1][1],m[2][0],m[2][1])),D.push(Ot(j,i,o,n,p,c,O));else{var M=jt(j,i,o,n,p,c,O),wt=jt(j,i,o,n,a,y,O);M&&D.push(M[0],M[1]),wt&&D.push(wt[0],wt[1]),D.push(Kt(j,i,o,n,m[0][0],m[0][1],m[3][0],m[3][1])),D.push(Kt(j,i,o,n,m[1][0],m[1][1],m[2][0],m[2][1]))}for(var pt=[j,i],Lt=0;Lt<D.length;Lt++)D[Lt]&&I(D[Lt][0],D[Lt][1],o,n)<I(pt[0],pt[1],o,n)&&(pt=D[Lt]);return pt[0]===j&&pt[1]===i?null:pt}function Vt(j,i,r,o,n,a,y,p,c){var O=Et(n,a,y,p,c),m=[],D=jt(j,i,r,o,n,a,c);D&&m.push(D[0],D[1]),(D=jt(j,i,r,o,y,p,c))&&m.push(D[0],D[1]),m.push(Kt(j,i,r,o,O[0][0],O[0][1],O[3][0],O[3][1])),m.push(Kt(j,i,r,o,O[1][0],O[1][1],O[2][0],O[2][1]));for(var M=[r,o],wt=[j,i],pt=0;pt<m.length;pt++)m[pt]&&I(m[pt][0],m[pt][1],j,i)<I(M[0],M[1],j,i)&&(M=m[pt]);for(var Lt=0;Lt<m.length;Lt++)m[Lt]&&I(m[Lt][0],m[Lt][1],r,o)<I(wt[0],wt[1],r,o)&&(wt=m[Lt]);return M[0]===r&&M[1]===o||wt[0]===j&&wt[1]===i?null:[M,wt]}var re=function(j){return Math.sqrt(j[0]*j[0]+j[1]*j[1])},ht=function(j,i,r){var o=[i[0]-j[0],i[1]-j[1]],n=re(o);if(n<1e-6)return j;var a=[r[0]-j[0],r[1]-j[1]],y=(o[0]*a[0]+o[1]*a[1])/n;return y<0?j:y>n?i:[j[0]+o[0]*y/n,j[1]+o[1]*y/n]};class Xt{constructor(){let{element:o,size:a}=(0,Ct.X)(Math.ceil(1e9*Math.random()));(0,b.tD)(o,{stroke:"#ddd",strokeWidth:10,strokeLinecap:"round",strokeLinejoin:"round"});let y="";return{start:O=>{y=`M ${O.x} ${O.y} L ${O.x} ${O.y}`},move:(O,m)=>{((O,m)=>{y+=` ${O} ${m}`,o.setAttribute("d",y)})(O.x,O.y)},end:(O,m)=>{o.remove(),(O=>{let m=9999,D=9999,M=-9999,wt=-9999;O.forEach(Lt=>{m=Math.min(m,Lt[0]),D=Math.min(D,Lt[1]),M=Math.max(M,Lt[0]),wt=Math.max(wt,Lt[1])}),a=(0,z.CE)(m,D,M,wt,{points:O}),kt.data.getNodeInArea(0,0,1920,1920,w.h.PATH).forEach(Lt=>{let Yt=((j,i,r)=>{r=r||20;var o=[],n=function(m){var D=i[0][0],M=i[0][1],wt=0,pt=0;if(1!==m.length||B(m[0][0],m[0][1],D,M,r)){for(var Lt;wt<m.length-1;){var Bt=m[wt],Yt=m[wt+1],_e=B(Bt[0],Bt[1],D,M,r),xe=B(Yt[0],Yt[1],D,M,r);if(_e&&xe)pt=++wt;else if(_e&&!xe)(be=Ot(Bt[0],Bt[1],Yt[0],Yt[1],D,M,r))?(m[wt]=be,pt=wt):wt++;else if(!_e&&xe){var be;(be=Ot(Yt[0],Yt[1],Bt[0],Bt[1],D,M,r))&&((Lt=m.slice(pt,wt+1)).push(be),o.push(Lt)),pt=++wt}else{var Oe=jt(Bt[0],Bt[1],Yt[0],Yt[1],D,M,r);Oe?(((Lt=m.slice(pt,wt+1))[Lt.length-1][0]!==Oe[0][0]||Lt[Lt.length-1][1]!==Oe[0][1])&&Lt.push(Oe[0]),Lt.length>1&&o.push(Lt),m[wt]=Oe[1],m[wt+1]&&m[wt+1][0]==Oe[1][0]&&m[wt+1][1]==Oe[1][1]&&wt++,pt=wt):wt++}}pt!==wt&&(Lt=m.slice(pt,m.length))&&o.push(Lt)}else o.push(m)},a=function(m,D){var Yt,M=i[D],wt=i[D+1],pt=0,Lt=0;if(1!==m.length||-1!==(Bt=tt(m[0][0],m[0][1],M[0],M[1],wt[0],wt[1],r)).indexOf(1)){for(;pt<m.length-1;){var _e=m[pt],xe=m[pt+1],Bt=tt(_e[0],_e[1],M[0],M[1],wt[0],wt[1],r),be=tt(xe[0],xe[1],M[0],M[1],wt[0],wt[1],r);if(-1!==Bt.indexOf(1)&&-1!==be.indexOf(1))Lt=++pt;else if(-1!==Bt.indexOf(1)&&-1===be.indexOf(1))(Oe=Ut(_e[0],_e[1],Bt,xe[0],xe[1],M[0],M[1],wt[0],wt[1],r))?(m[pt]=Oe,Lt=pt):pt++;else if(-1===Bt.indexOf(1)&&-1!==be.indexOf(1)){var Oe;(Oe=Ut(xe[0],xe[1],be,_e[0],_e[1],M[0],M[1],wt[0],wt[1],r))?((Yt=m.slice(Lt,pt+1)).push(Oe),o.push(Yt),Lt=++pt):pt++}else{var Ie=Vt(_e[0],_e[1],xe[0],xe[1],M[0],M[1],wt[0],wt[1],r);Ie?(((Yt=m.slice(Lt,pt+1))[Yt.length-1][0]!==Ie[0][0]||Yt[Yt.length-1][1]!==Ie[0][1])&&Yt.push(Ie[0]),Yt.length>1&&o.push(Yt),m[pt]=Ie[1],m[pt+1]&&m[pt+1][0]==Ie[1][0]&&m[pt+1][1]==Ie[1][1]&&pt++,Lt=pt):pt++}}Lt!==pt&&(Yt=m.slice(Lt,m.length))&&o.push(Yt)}else o.push(m)};if(i=function V(j){var i=[];if(1===j.length)i=j;else{for(var r=0;r<j.length-1;)(j[r][0]!==j[r+1][0]||j[r][1]!==j[r+1][1])&&i.push(j[r]),r++;0!==j.length&&0===i.length&&i.push(j[0]),(j[j.length-1][0]!==j[i.length-1][0]||j[j.length-1][1]!==j[i.length-1][1])&&i.push(j[r])}return i}(i),1===i.length){for(var y=0;y<j.length;y++)n(j[y]);j=o}else for(var p=0;p<i.length-1;p++){for(y=0;y<j.length;y++)a(j[y],p);j=o,o=[]}for(var c=0;c<j.length;c++)for(var O=0;O<j[c].length;O++)j[c][O][0]=Math.round(j[c][O][0]),j[c][O][1]=Math.round(j[c][O][1]);return j})(kt.data.getNode(Lt).size.points,O,2);console.log(Yt)})})(m)}}}}var h=v(6847);class N{constructor(){let i=(0,b.RY)(nt.F.CREATE_GROUP,"g"),{nodeId:r,element:o,attribute:n,size:a,source:y}=(0,h.L)(Math.ceil(1e9*Math.random())),p=(c,O,m,D)=>{a=(0,z.CE)(c,O,m,D),a.x=(0,d.z)(a.x),a.y=(0,d.z)(a.y),a.width=(0,d.z)(a.width),a.height=(0,d.z)(a.height),Object.assign(n,(0,z.xW)(w.h.TEXT,a,n)),(0,b.tD)(o,n),(0,b.in)(i,a)};return{start:c=>{p(c.x,c.y,c.x+a.width,c.y+a.height)},move:(c,O)=>{p(O[0][0],O[0][1],c.x,c.y)},end:(c,O)=>{(a.width<=16||a.height<=16)&&(a.width=80,a.height=80,a.x=a.x-a.width/2,a.y=a.y-a.height/2,Object.assign(n,(0,z.xW)(w.h.TEXT,a,n)),(0,b.tD)(o,n)),kt.data.node=Object.assign({id:r,type:w.h.TEXT,name:"Text"},{size:a,attribute:n,source:y}),null==i||i.remove()}}}}var x=v(4312),W=v(2409),at=v(6078);var _t=v(3073);class St{constructor(){this._nodeName=["circle","ellipse","line","polygon","polyline","rect","text","tspan","path","image","foreignObject"],this._selected_Ids=[],this._fnChanges=[]}get nodeName(){return this._nodeName}get ids(){return this._selected_Ids}set ids(i){this._selected_Ids=i,this.change(this.ids)}get nodes(){return this._selected_Ids.map(i=>kt.data.getNode(i)).filter(i=>!i.isfake)}set onchange(i){this._fnChanges.push(i)}change(i){var r,o,n,a,y;null===(r=window.document.getElementById(nt.F.RESIZE_GROUP))||void 0===r||r.remove(),null===(o=window.document.getElementById(nt.F.SELECT_GROUP))||void 0===o||o.remove(),null===(n=window.document.getElementById(nt.F.SCAN_GROUP))||void 0===n||n.remove(),null===(a=window.document.getElementById(nt.F.CREATE_GROUP))||void 0===a||a.remove(),null===(y=window.document.getElementById(nt.F.INTERACTIVE_GROUP))||void 0===y||y.remove(),jQuery('[id^="icdt-temp-"]').remove(),this._fnChanges.forEach(p=>p(i))}deleteNode(){for(let i of this._selected_Ids){let r=kt.data.deleteNode(i);kt.history.push([{type:"delete",from:{id:r},to:{id:r}}])}kt.dataSelect.ids=[]}groupNode(){let i=[];if(kt.dataSelect.ids.length>=2){let r=kt.data.getNode(kt.dataSelect.ids[0]),{nodeId:o,attribute:n,size:a}=(0,_t.v)(Math.ceil(1e9*Math.random()),void 0,r.pid?window.document.getElementById(r.pid):null);kt.data.node=Object.assign({id:o,type:w.h.GROUP,name:"G"},{size:a,attribute:n});for(let y of kt.dataSelect.ids)i.push(kt.data.addGroup(y,o))}i.length&&(kt.dataSelect.ids=i,(0,C.D)(kt.dataSelect.nodes))}ungroupNode(){let i=[];for(let r of kt.dataSelect.ids)i.push(kt.data.unGroup(r));i.length&&(kt.dataSelect.ids=i,(0,C.D)(kt.dataSelect.nodes))}}var et=v(2837),mt=v(8338);class At{createNodeImage(i,r){var o,n,a,y;let{nodeId:c,element:O,size:m,attribute:D,source:M}=(0,Ht.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,et.U)(i)}});(wt=>{if(!wt)return;let pt=new Image;pt.onload=()=>{let Lt=(0,d.z)(pt.naturalWidth/pt.naturalHeight,100);Lt>=1?(m.width=Math.min(pt.naturalWidth,512),m.height=(0,d.z)(m.width/Lt,100)):(m.height=Math.min(pt.naturalHeight,512),m.width=(0,d.z)(m.height*Lt,100)),m.x=(0,d.z)(m.x+50-m.width/2,100),m.y=(0,d.z)(m.y+50-m.height/2,100),Object.assign(D,(0,z.xW)(w.h.IMAGE,m,D)),(0,b.tD)(O,D),kt.data.node=Object.assign({id:c,type:w.h.IMAGE,name:"Image"},{size:m,attribute:D,source:M})},pt.onerror=Lt=>{console.error(`ImgSrc load failed -> ${wt}`,Lt),null==O||O.remove()},pt.src=wt})(null!==(a=null===(y=M.image)||void 0===y?void 0:y.url)&&void 0!==a?a:"")}createNodeIframe(i,r){var o,n;let{nodeId:y,element:p,size:c,attribute:O,style:m,source:D}=(0,Qt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},style:{},source:{type:"iframe",iframe:(0,et.U)(i)}});(M=>{let wt=(null===(M=kt.data.slide)||void 0===M||null===(M=M.svg)||void 0===M?void 0:M.viewBox)||{x:0,y:0,width:100,height:100},pt=(0,d.z)(wt.width/wt.height,100);pt>=1?(c.width=Math.min(wt.width,512),c.height=(0,d.z)(c.width/pt,100)):(c.height=Math.min(wt.height,512),c.width=(0,d.z)(c.height*pt,100)),c.x=(0,d.z)(c.x+50-c.width/2,100),c.y=(0,d.z)(c.y+50-c.height/2,100),Object.assign(O,(0,z.xW)(w.h.IMAGE,c,O)),(0,b.tD)(p,O),kt.data.node=Object.assign({id:y,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:O,style:m,source:D})})()}createNodeEmbed(i,r){var o,n;let a={x:50,y:50,width:640,height:360};i.type==mt.S.AUDIO&&(a.width=480,a.height=80);let{nodeId:y,element:p,size:c,attribute:O,style:m,source:D}=(0,Qt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:a.x)-a.x,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:a.y)-a.y,width:a.width,height:a.height},style:{},source:{type:"embed",embed:Object.assign(i,(0,et.U)(i))}});(()=>{let M=(0,d.z)(a.width/a.height,100);M>=1?(c.width=Math.min(c.width,a.width),c.height=(0,d.z)(c.width/M,1)):(c.height=Math.min(c.height,a.height),c.width=(0,d.z)(c.height*M,1)),c.x=(0,d.z)(c.x+a.x-c.width/2,1),c.y=(0,d.z)(c.y+a.y-c.height/2,1),Object.assign(O,(0,z.xW)(w.h.FOREIGNOBJECT,c,O)),(0,b.tD)(p,O),kt.data.node=Object.assign({id:y,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:O,style:m,source:D})})()}createNodeMedia(i,r){var o,n,a,y;let{nodeId:c,element:O,size:m,attribute:D,source:M}=(0,Ht.B)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:50)-50,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:50)-50,width:100,height:100},source:{type:"image",image:(0,et.U)(i.cover)}}),wt={click:{media:i.media}};(pt=>{if(!pt)return;let Lt=new Image;Lt.onload=()=>{let Bt=(0,d.z)(Lt.naturalWidth/Lt.naturalHeight,100);Bt>=1?(m.width=Math.min(Lt.naturalWidth,512),m.height=(0,d.z)(m.width/Bt,100)):(m.height=Math.min(Lt.naturalHeight,512),m.width=(0,d.z)(m.height*Bt,100)),m.x=(0,d.z)(m.x+50-m.width/2,100),m.y=(0,d.z)(m.y+50-m.height/2,100),Object.assign(D,(0,z.xW)(w.h.IMAGE,m,D)),(0,b.tD)(O,D),kt.data.node=Object.assign({id:c,type:w.h.IMAGE,name:"Image"},{size:m,attribute:D,source:M,interactive:wt})},Lt.onerror=Bt=>{console.error(`ImgSrc load failed -> ${pt}`,Bt),null==O||O.remove()},Lt.src=pt})(null!==(a=null===(y=M.image)||void 0===y?void 0:y.url)&&void 0!==a?a:"")}createNodeText(i,r){var o,n;let{nodeId:y,element:p,size:c,attribute:O,style:m,source:D}=(0,Qt.$)(Math.ceil(1e9*Math.random()),{size:{x:(null!==(o=null==r?void 0:r.x)&&void 0!==o?o:0)-0,y:(null!==(n=null==r?void 0:r.y)&&void 0!==n?n:0)-0,width:320,height:80},style:{},source:{type:"html",html:{htmlContent:`<span style="font-family: Roboto; font-size: 24px;">${i.content}</span>`}}});(()=>{let M=(0,d.z)(4,100);M>=1?(c.width=Math.min(c.width,320),c.height=(0,d.z)(c.width/M,1)):(c.height=Math.min(c.height,80),c.width=(0,d.z)(c.height*M,1)),c.x=(0,d.z)(c.x+0-c.width/2,1),c.y=(0,d.z)(c.y+0-c.height/2,1),Object.assign(O,(0,z.xW)(w.h.FOREIGNOBJECT,c,O)),(0,b.tD)(p,O),kt.data.node=Object.assign({id:y,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:c,attribute:O,style:m,source:D})})()}insert(i){var r;if(kt.data.insertSlide(kt.data.slideId,1),i.title){let{nodeId:o,size:n,attribute:a,style:y,source:p}=(0,Qt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:100,width:800,height:150},source:{type:"html",html:{htmlContent:`<span style="font-size: 40px;">${i.title}</span>`}}});kt.data.node=Object.assign({id:o,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:a,style:y,source:p})}if(i.description){let{nodeId:o,size:n,attribute:a,style:y,source:p}=(0,Qt.$)(Math.ceil(1e9*Math.random()),{size:{x:100,y:300,width:600,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 24px;">${i.description.replace(/\n/g,"<br/>")}</span>`}}});kt.data.node=Object.assign({id:o,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:n,attribute:a,style:y,source:p})}null!==(r=i.media)&&void 0!==r&&r.prompt&&((()=>{let{nodeId:o,size:n,attribute:a}=(0,st.a)(Math.ceil(1e9*Math.random()),{size:{x:775,y:275,width:350,height:350},attribute:{fill:"#FFFFFF",stroke:"#E6E6E6",strokeWidth:1,strokeDasharray:1,rx:4}});kt.data.node=Object.assign({id:o,type:w.h.RECT,name:"Rect"},{size:n,attribute:a})})(),(o=>{let{nodeId:n,size:a,attribute:y,style:p,source:c}=(0,Qt.$)(Math.ceil(1e9*Math.random()),{size:{x:800,y:300,width:300,height:300},source:{type:"html",html:{htmlContent:`<span style="font-size: 18px; color: #6633cc"><i>${null===(o=i.media)||void 0===o?void 0:o.prompt}</i></span>`}}});kt.data.node=Object.assign({id:n,type:w.h.FOREIGNOBJECT,name:"ForeignObject"},{size:a,attribute:y,style:p,source:c})})())}}var Rt=v(1026);class Gt{get newSlideId(){return Math.ceil(1e9*Math.random())}get _defaultSlide(){return JSON.parse(JSON.stringify({id:this.newSlideId,name:"Trang m\u1edbi",svg:{viewBox:kt.screen.frameSize,nodes:[]}}))}constructor(){this._dataSource={slides:[],resources:[]},this._slideIdx=0,this._fnChangeSlides=[],this.getNodeAll=()=>{var i;let r=null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((a,y)=>y==this._slideIdx),o=null==r?void 0:r.svg,n=a=>{let y=[];return a.filter(p=>!p.isdeleted).forEach(p=>{p.type==w.h.GROUP?y=y.concat(n(p.nodes||[])):y.push(p.id)}),y};return n((null==o?void 0:o.nodes)||[])}}get get(){var i;let r=o=>{var n,a;return null===(n=o)||void 0===n||n.filter(y=>y.type==w.h.GROUP).forEach(y=>{var p;y.nodes=r(null===(p=y.nodes)||void 0===p?void 0:p.filter(c=>!c.isdeleted))}),(o=null===(a=o)||void 0===a?void 0:a.filter(y=>{var p,c;return y.type!=w.h.GROUP||(null!==(p=null===(c=y.nodes)||void 0===c?void 0:c.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(a=>!a.isdeleted)))}),this._dataSource}get getResource(){var i;let r=[];return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n,a,y,p,c,O,m,D;r.push(null===(n=o.svg)||void 0===n||null===(n=n.background)||void 0===n?void 0:n.path),null===(a=o.svg)||void 0===a||a.nodes.forEach(M=>{var wt,pt,Lt,Bt,Yt,_e,xe,be,Oe,Ie;r.push(null===(wt=M.source)||void 0===wt||null===(wt=wt.image)||void 0===wt?void 0:wt.path),r.push(null===(pt=M.source)||void 0===pt||null===(pt=pt.audio)||void 0===pt?void 0:pt.path),r.push(null===(Lt=M.source)||void 0===Lt||null===(Lt=Lt.video)||void 0===Lt?void 0:Lt.path),r.push(null===(Bt=M.source)||void 0===Bt||null===(Bt=Bt.file)||void 0===Bt?void 0:Bt.path),r.push(null===(Yt=M.source)||void 0===Yt||null===(Yt=Yt.iframe)||void 0===Yt?void 0:Yt.path),r.push(null===(_e=M.source)||void 0===_e||null===(_e=_e.track)||void 0===_e?void 0:_e.path),r.push(null===(xe=M.interactive)||void 0===xe||null===(xe=xe.show)||void 0===xe||null===(xe=xe.audio)||void 0===xe||null===(xe=xe.source)||void 0===xe?void 0:xe.path),r.push(null===(be=M.interactive)||void 0===be||null===(be=be.click)||void 0===be||null===(be=be.audio)||void 0===be||null===(be=be.source)||void 0===be?void 0:be.path),r.push(null===(Oe=M.interactive)||void 0===Oe||null===(Oe=Oe.click)||void 0===Oe||null===(Oe=Oe.image)||void 0===Oe||null===(Oe=Oe.source)||void 0===Oe?void 0:Oe.path),r.push(null===(Ie=M.interactive)||void 0===Ie||null===(Ie=Ie.click)||void 0===Ie||null===(Ie=Ie.video)||void 0===Ie||null===(Ie=Ie.source)||void 0===Ie?void 0:Ie.path)}),r.push(null===(y=o.test)||void 0===y||null===(y=y.audiotrue)||void 0===y?void 0:y.path),r.push(null===(p=o.test)||void 0===p||null===(p=p.audiofalse)||void 0===p?void 0:p.path),r.push(null===(c=o.test)||void 0===c||null===(c=c.effecttrue)||void 0===c?void 0:c.path),r.push(null===(O=o.test)||void 0===O||null===(O=O.effectfalse)||void 0===O?void 0:O.path),r.push(null===(m=o.test)||void 0===m||null===(m=m.icontrue)||void 0===m?void 0:m.path),r.push(null===(D=o.test)||void 0===D||null===(D=D.iconfalse)||void 0===D?void 0:D.path)}),r.filter(o=>o).map(o=>o.replace(/(\?|\#)[^\?\#]+/g,"").toLowerCase()).filter((o,n,a)=>a.indexOf(o)==n)}set set(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,b.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get dataSource(){var i;let r=o=>{var n,a;return null===(n=o)||void 0===n||n.filter(y=>y.type==w.h.GROUP).forEach(y=>{var p;y.nodes=r(null===(p=y.nodes)||void 0===p?void 0:p.filter(c=>!c.isdeleted))}),(o=null===(a=o)||void 0===a?void 0:a.filter(y=>{var p,c;return y.type!=w.h.GROUP||(null!==(p=null===(c=y.nodes)||void 0===c?void 0:c.length)&&void 0!==p?p:0)>0}))||[]};return null===(i=this._dataSource.slides)||void 0===i||i.forEach(o=>{var n;o.svg&&(o.svg.nodes=r(null===(n=o.svg)||void 0===n||null===(n=n.nodes)||void 0===n?void 0:n.filter(a=>!a.isdeleted)))}),this._dataSource.resources=this.getResource,this._dataSource}set dataSource(i){this._dataSource=i,this._dataSource.slides||(this._dataSource.slides=[]),this._dataSource.slides.length||(this._slideIdx=0,this._dataSource.slides.push(JSON.parse(JSON.stringify(this._defaultSlide)))),(0,b.rN)(),this.changeSlide(this.slides,this.slideIdx,this._dataSource.slides.length,this.slide)}get slideId(){var i,r;return null!==(i=null===(r=this.slide)||void 0===r?void 0:r.id)&&void 0!==i?i:0}get slideIdx(){return this._slideIdx}get slide(){var i;return null===(i=this._dataSource.slides)||void 0===i?void 0:i.find((r,o)=>o==this._slideIdx)}get slides(){return this._dataSource.slides||[]}backSlide(){this._slideIdx>0&&(this._slideIdx-=1,this.openSlide(void 0,this._slideIdx))}nextSlide(){var i,r;this._slideIdx<(null!==(i=null===(r=this._dataSource.slides)||void 0===r?void 0:r.length)&&void 0!==i?i:0)-1&&(this._slideIdx+=1,this.openSlide(void 0,this._slideIdx))}refreshSlide(){(0,b.rN)(),(0,Rt.t)(this.slide)}openSlide(i,r){var o,n,a,y,p;if(i)for(let M=0,wt=null!==(c=null===(O=this._dataSource.slides)||void 0===O?void 0:O.length)&&void 0!==c?c:0;M<wt;M++){var c,O,m;if((null!==(m=this._dataSource.slides)&&void 0!==m?m:[])[M].id==i){this._slideIdx=M;break}}else if(r&&r>=0&&r<(null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.length)&&void 0!==o?o:0))this._slideIdx=null!=r?r:0;else{var D;this._slideIdx=0,null!==(D=this._dataSource.slides)&&void 0!==D&&D.length||(this._dataSource.slides=[JSON.parse(JSON.stringify(this._defaultSlide))])}(0,b.rN)(),null!==(a=this.slide)&&void 0!==a&&null!==(a=a.svg)&&void 0!==a&&a.viewBox&&(kt.screen.frameSize=this.slide.svg.viewBox),(0,Rt.t)(this.slide),this.changeSlide(this.slides,this.slideIdx,null!==(y=null===(p=this._dataSource.slides)||void 0===p?void 0:p.length)&&void 0!==y?y:0,this.slide)}addSlide(){var i,r,o;null===(i=this._dataSource.slides)||void 0===i||i.push(this._defaultSlide),this._slideIdx=(null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.length)&&void 0!==r?r:0)-1,this.openSlide(void 0,this._slideIdx)}tryReplaceSlide(i,r,o){var n,a,y,p,c;let O=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(D=>D.id==i);if(!o||!O||null!=O&&null!==(a=O.svg)&&void 0!==a&&a.nodes.filter(D=>!D.isdeleted).length)return this.insertSlide(i,r,o);let m=null!==(y=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(O))&&void 0!==y?y:0;null===(c=this._dataSource.slides)||void 0===c||c.splice(m,1,o),this._slideIdx=m,this.openSlide(void 0,this._slideIdx)}insertSlide(i,r,o){var n,a,y,p,c;let O=null!==(n=null===(a=this._dataSource.slides)||void 0===a?void 0:a.find(M=>M.id==i))&&void 0!==n?n:this._defaultSlide,m=(null!==(y=null===(p=this._dataSource.slides)||void 0===p?void 0:p.indexOf(O))&&void 0!==y?y:0)+r;var D;o?(o.id=this.newSlideId,o.code=void 0,o.name||(o.name="Trang m\u1edbi"),null!==(D=o.svg)&&void 0!==D&&D.viewBox||o.svg&&(o.svg.viewBox=kt.screen.frameSize)):o=this._defaultSlide,null===(c=this._dataSource.slides)||void 0===c||c.splice(m,0,o),this._slideIdx=m,this.openSlide(void 0,this._slideIdx)}copySlide(i){var r,o,n,a,y,p,c;let O=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(M=>M.id==i))&&void 0!==r?r:this._defaultSlide,m=(null!==(n=null===(a=this._dataSource.slides)||void 0===a?void 0:a.indexOf(O))&&void 0!==n?n:0)+1,D=Object.assign(JSON.parse(JSON.stringify(O)),{id:this.newSlideId,code:void 0,name:`${O.name} + (Copy)`});null===(y=this._dataSource.slides)||void 0===y||y.splice(m,0,D),this.changeSlide(this.slides,this.slideIdx,null!==(p=null===(c=this._dataSource.slides)||void 0===c?void 0:c.length)&&void 0!==p?p:0,this.slide)}moveSlide(i,r){var o,n,a,y,p,c;let O=null!==(o=null===(n=this._dataSource.slides)||void 0===n?void 0:n.find(D=>D.id==i))&&void 0!==o?o:this._defaultSlide,m=null!==(a=null===(y=this._dataSource.slides)||void 0===y?void 0:y.indexOf(O))&&void 0!==a?a:0;null===(p=this._dataSource.slides)||void 0===p||p.splice(m+r,0,null===(c=this._dataSource.slides)||void 0===c?void 0:c.splice(m,1)[0])}deleteSlide(i){var r,o,n,a,y,p;let c=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(M=>M.id==i))&&void 0!==r?r:this._defaultSlide,O=null!==(n=null===(a=this._dataSource.slides)||void 0===a?void 0:a.indexOf(c))&&void 0!==n?n:0;if(null===(y=this._dataSource.slides)||void 0===y||y.splice(O,1),null!==(p=this._dataSource.slides)&&void 0!==p&&p.length)if(O<this._slideIdx){var m,D;--this._slideIdx,this.changeSlide(this.slides,this.slideIdx,null!==(m=null===(D=this._dataSource.slides)||void 0===D?void 0:D.length)&&void 0!==m?m:0,this.slide)}else O==this._slideIdx&&(--this._slideIdx,this.openSlide(void 0,this._slideIdx));else this.addSlide()}deleteSlide1(i){var r,o,n,a,y;let p=null!==(r=null===(o=this._dataSource.slides)||void 0===o?void 0:o.find(O=>O.id==i))&&void 0!==r?r:this._defaultSlide,c=null!==(n=null===(a=this._dataSource.slides)||void 0===a?void 0:a.indexOf(p))&&void 0!==n?n:0;if(p.isdeleted=!0,null!==(y=this._dataSource.slides)&&void 0!==y&&null!==(y=y.filter(O=>!O.isdeleted))&&void 0!==y&&y.length){let O=!0;for(;p.isdeleted;)O?c++:c--,this._dataSource.slides[c]?p=this._dataSource.slides[c]:O=!O;this.openSlide(p.id)}else this.addSlide()}set onChangeSlide(i){this._fnChangeSlides.push(i)}changeSlide(i,r,o,n){this._fnChangeSlides.forEach(a=>a(i,r,o,n))}set node(i){var r,o;let n=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((a,y)=>y==this._slideIdx);null!=n&&null!==(o=n.svg)&&void 0!==o&&o.nodes&&n.svg.nodes.push(i),kt.history.push([{type:"add",from:{id:i.id},to:{id:i.id}}]),(0,Rt.t)(n),(0,Rt.t)(n,null==n?void 0:n.id)}findNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((M,wt)=>wt==this._slideIdx),n=null==o?void 0:o.svg,a=(M,wt)=>{let pt=null==M?void 0:M.find(Yt=>Yt.id==i);if(pt)return pt.pid=wt,pt;let Lt=0,Bt=M.length||0;for(;Lt<Bt&&!pt&&(pt=a(M[Lt].nodes||[],M[Lt].id),!pt);)Lt++;return pt},y=a((null==n?void 0:n.nodes)||[]);var p,c,O,m,D;return y?(y.style=null!==(p=y.style)&&void 0!==p?p:{},y.source=null!==(c=y.source)&&void 0!==c?c:{},y.animate=null!==(O=y.animate)&&void 0!==O?O:{},y.interactive=null!==(m=y.interactive)&&void 0!==m?m:{},y.variable=null!==(D=y.variable)&&void 0!==D?D:{},y):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}getNode(i){var r;let o=null===(r=this._dataSource.slides)||void 0===r?void 0:r.find((p,c)=>c==this._slideIdx),n=null==o?void 0:o.svg,y=p=>{let c=(null==p?void 0:p.find(pt=>pt.id==i))||(p=>{let c=null,O=0,m=p.length||0;for(;O<m&&!c;){if(c=y(p[O].nodes),c){c.pid=p[O].id;break}O++}var D,M,wt,pt,Lt;return c&&(c.style=null!==(D=c.style)&&void 0!==D?D:{},c.source=null!==(M=c.source)&&void 0!==M?M:{},c.animate=null!==(wt=c.animate)&&void 0!==wt?wt:{},c.interactive=null!==(pt=c.interactive)&&void 0!==pt?pt:{},c.variable=null!==(Lt=c.variable)&&void 0!==Lt?Lt:{}),c})((null==p?void 0:p.filter(pt=>pt.type==w.h.GROUP))||[]);var O,m,D,M,wt;return c&&(c.style=null!==(O=c.style)&&void 0!==O?O:{},c.source=null!==(m=c.source)&&void 0!==m?m:{},c.animate=null!==(D=c.animate)&&void 0!==D?D:{},c.interactive=null!==(M=c.interactive)&&void 0!==M?M:{},c.variable=null!==(wt=c.variable)&&void 0!==wt?wt:{}),c};return y((null==n?void 0:n.nodes)||[])||{id:null,pid:null,type:null,element:document.createElement("div"),size:{x:0,y:0,width:0,height:0,points:[]},attribute:{},style:{},source:{},animate:{},interactive:{},variable:{},isfake:!0,isdeleted:!1,nodes:[]}}getNodeInArea(i,r,o,n,a){var y;let p=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((m,D)=>D==this._slideIdx),c=null==p?void 0:p.svg,O=m=>{let D=[];return m.filter(M=>!M.isdeleted).forEach(M=>{M.type==w.h.GROUP?D=D.concat(O(M.nodes||[])):i>M.size.x||r>M.size.y||o<M.size.x+M.size.width||n<M.size.y+M.size.height||(a?M.type==a&&D.push(M.id):D.push(M.id))}),D};return O((null==c?void 0:c.nodes)||[])}getNodeOnArea(i,r,o,n,a){var y;let p=null===(y=this._dataSource.slides)||void 0===y?void 0:y.find((m,D)=>D==this._slideIdx),c=null==p?void 0:p.svg,O=m=>{let D=[];return m.filter(M=>!M.isdeleted).forEach(M=>{M.type==w.h.GROUP?D=D.concat(O(M.nodes||[])):M.size.x+M.size.width<i||M.size.y+M.size.height<r||M.size.x>o||M.size.y>n||(a?M.type==a&&D.push(M.id):D.push(M.id))}),D};return O((null==c?void 0:c.nodes)||[])}deleteNode(i,r){var o;return this.getNode(i).isdeleted=null==r||r,(0,Rt.t)(this.slide),(0,Rt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),i}unGroup(i){var r,o;let n=this.getNode(i),a=Math.ceil(1e9*Math.random());return null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:a})),Object.assign(n,{isdeleted:!0}),(0,Rt.t)(this.slide),(0,Rt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),a}addGroup(i,r){var o;let n=this.getNode(i),a=this.getNode(r);a.nodes=a.nodes||[];let y=Math.ceil(1e9*Math.random());return a.nodes.push(Object.assign(JSON.parse(JSON.stringify(n)),{id:y})),Object.assign(n,{isdeleted:!0}),(0,Rt.t)(this.slide),(0,Rt.t)(this.slide,null===(o=this.slide)||void 0===o?void 0:o.id),y}setNodeP(i,r){var o;let n=null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o?void 0:o.nodes.find(a=>a.id==i);n&&(n.pid=r||null)}bringToFront(i){this.bringToFrontStep(i,0)}sendToBack(i){this.sendToBackStep(i,0)}bringToFrontStep(i,r){var o,n,a,y,p,c;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((m,D)=>{m.index=D+1});let O=(null!==(n=null===(a=this.slide)||void 0===a||null===(a=a.svg)||void 0===a?void 0:a.nodes.length)&&void 0!==n?n:0)+1;i.map(m=>{var D,M;return{id:m,index:null!==(D=null===(M=this.slide)||void 0===M||null===(M=M.svg)||void 0===M||null===(M=M.nodes.find(wt=>wt.id==m))||void 0===M?void 0:M.index)&&void 0!==D?D:0}}).sort((m,D)=>m.index-D.index).forEach(m=>{var M,D;r?null===(M=this.slide)||void 0===M||null===(M=M.svg)||void 0===M||M.nodes.filter((wt,pt)=>wt.id==m.id).forEach(wt=>{wt.index=r+m.index+m.index/1e3}):null===(D=this.slide)||void 0===D||null===(D=D.svg)||void 0===D||D.nodes.filter(wt=>wt.id==m.id).forEach(wt=>{wt.index=O+m.index})}),null===(y=this.slide)||void 0===y||null===(y=y.svg)||void 0===y||y.nodes.sort((m,D)=>{var M,wt;return(null!==(M=m.index)&&void 0!==M?M:0)-(null!==(wt=D.index)&&void 0!==wt?wt:0)}),(0,Rt.$)(this.slide),null===(p=window.document.getElementById(nt.F.RESIZE_GROUP))||void 0===p||p.remove(),null===(c=window.document.getElementById(nt.F.SELECT_GROUP))||void 0===c||c.remove(),(0,C.D)(kt.dataSelect.nodes)}sendToBackStep(i,r){var o,n,a,y;null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.forEach((p,c)=>{p.index=c+1}),i.map(p=>{var c,O;return{id:p,index:null!==(c=null===(O=this.slide)||void 0===O||null===(O=O.svg)||void 0===O||null===(O=O.nodes.find(m=>m.id==p))||void 0===O?void 0:O.index)&&void 0!==c?c:0}}).sort((p,c)=>p.index-c.index).forEach(p=>{var O,c;r?null===(O=this.slide)||void 0===O||null===(O=O.svg)||void 0===O||O.nodes.filter(m=>m.id==p.id).forEach(m=>{m.index=r+p.index+p.index/1e3}):null===(c=this.slide)||void 0===c||null===(c=c.svg)||void 0===c||c.nodes.filter(m=>m.id==p.id).forEach(m=>{m.index=p.index/100-1})}),null===(n=this.slide)||void 0===n||null===(n=n.svg)||void 0===n||n.nodes.sort((p,c)=>{var O,m;return(null!==(O=p.index)&&void 0!==O?O:0)-(null!==(m=c.index)&&void 0!==m?m:0)}),(0,Rt.$)(this.slide),null===(a=window.document.getElementById(nt.F.RESIZE_GROUP))||void 0===a||a.remove(),null===(y=window.document.getElementById(nt.F.SELECT_GROUP))||void 0===y||y.remove(),(0,C.D)(kt.dataSelect.nodes)}bringToFrontArea(i){var r,o,n,a;let y=i.map(pt=>kt.data.getNode(pt)).filter(pt=>!pt.isfake),{x1:p,y1:c,x2:O,y2:m}=qt(y),D=this.getNodeOnArea(p,c,O,m);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((pt,Lt)=>{pt.index=Lt+1});let M=D.map(pt=>{var Lt,Bt;return null!==(Lt=null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||null===(Bt=Bt.nodes.find(Yt=>Yt.id==pt))||void 0===Bt?void 0:Bt.index)&&void 0!==Lt?Lt:0}),wt=Math.max.apply(null,M);i.forEach((pt,Lt)=>{var Bt;null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||Bt.nodes.filter(Yt=>Yt.id==pt).forEach(Yt=>{Yt.index=wt+(Lt+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((pt,Lt)=>{var Bt,Yt;return(null!==(Bt=pt.index)&&void 0!==Bt?Bt:0)-(null!==(Yt=Lt.index)&&void 0!==Yt?Yt:0)}),(0,Rt.$)(this.slide),null===(n=window.document.getElementById(nt.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(a=window.document.getElementById(nt.F.SELECT_GROUP))||void 0===a||a.remove(),(0,C.D)(kt.dataSelect.nodes)}sendToBackArea(i){var r,o,n,a;let y=i.map(pt=>kt.data.getNode(pt)).filter(pt=>!pt.isfake),{x1:p,y1:c,x2:O,y2:m}=qt(y),D=this.getNodeOnArea(p,c,O,m);null===(r=this.slide)||void 0===r||null===(r=r.svg)||void 0===r||r.nodes.forEach((pt,Lt)=>{pt.index=Lt+1});let M=D.map(pt=>{var Lt,Bt;return null!==(Lt=null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||null===(Bt=Bt.nodes.find(Yt=>Yt.id==pt))||void 0===Bt?void 0:Bt.index)&&void 0!==Lt?Lt:0}),wt=Math.min.apply(null,M)-1;i.forEach((pt,Lt)=>{var Bt;null===(Bt=this.slide)||void 0===Bt||null===(Bt=Bt.svg)||void 0===Bt||Bt.nodes.filter(Yt=>Yt.id==pt).forEach(Yt=>{Yt.index=wt+(Lt+1)/100})}),null===(o=this.slide)||void 0===o||null===(o=o.svg)||void 0===o||o.nodes.sort((pt,Lt)=>{var Bt,Yt;return(null!==(Bt=pt.index)&&void 0!==Bt?Bt:0)-(null!==(Yt=Lt.index)&&void 0!==Yt?Yt:0)}),(0,Rt.$)(this.slide),null===(n=window.document.getElementById(nt.F.RESIZE_GROUP))||void 0===n||n.remove(),null===(a=window.document.getElementById(nt.F.SELECT_GROUP))||void 0===a||a.remove(),(0,C.D)(kt.dataSelect.nodes)}}const qt=j=>{let i=999999,r=999999,o=-999999,n=-999999;return j.forEach(a=>{i=Math.min(i,a.size.x),r=Math.min(r,a.size.y),o=Math.max(o,a.size.x+a.size.width),n=Math.max(n,a.size.y+a.size.height)}),{x1:i,y1:r,x2:o,y2:n}};class ie{constructor(){this._index=-1,this._dataSource=[],this.undoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":kt.data.deleteNode(r.from.id);break;case"edit":break;case"delete":kt.data.deleteNode(r.from.id,!1);break;case"size":{let{id:o,type:n,size:a,attribute:y}=kt.data.getNode(r.from.id);Object.assign(a,r.from.size),Object.assign(y,(0,z.xW)(n,a,y)),(0,b.tD)(window.document.getElementById(o),y);break}case"attribute":{let{id:o,attribute:n}=kt.data.getNode(r.from.id);Object.assign(n,r.from.attribute),(0,b.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=kt.data.getNode(r.from.id);Object.assign(null!=n?n:{},r.from.style),(0,b.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:a}=kt.data.getNode(r.from.id);Object.assign(null!=a?a:{},r.from.source),(0,b.KG)(window.document.getElementById(o),n,null!=a?a:{});break}case"animate":{let{animate:o}=kt.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.animate);break}case"interactive":{let{interactive:o}=kt.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.interactive);break}case"variable":{let{variable:o}=kt.data.getNode(r.from.id);Object.assign(null!=o?o:{},r.from.variable);break}}}),kt.dataSelect.ids=[]},this.redoExecute=i=>{i.forEach(function(r){switch(r.type){case"add":kt.data.deleteNode(r.to.id,!1);break;case"edit":break;case"delete":kt.data.deleteNode(r.to.id,!0);break;case"size":{let{id:o,type:n,size:a,attribute:y}=kt.data.getNode(r.to.id);Object.assign(a,r.to.size),Object.assign(y,(0,z.xW)(n,a,y)),(0,b.tD)(window.document.getElementById(o),y);break}case"attribute":{let{id:o,attribute:n}=kt.data.getNode(r.to.id);Object.assign(n,r.to.attribute),(0,b.tD)(window.document.getElementById(o),n);break}case"style":{let{id:o,style:n}=kt.data.getNode(r.to.id);Object.assign(null!=n?n:{},r.to.style),(0,b.c_)(window.document.getElementById(o),n);break}case"source":{let{id:o,type:n,source:a}=kt.data.getNode(r.to.id);Object.assign(null!=a?a:{},r.to.source),(0,b.KG)(window.document.getElementById(o),n,null!=a?a:{});break}case"animate":{let{animate:o}=kt.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.animate);break}case"interactive":{let{interactive:o}=kt.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.interactive);break}case"variable":{let{variable:o}=kt.data.getNode(r.to.id);Object.assign(null!=o?o:{},r.to.variable);break}}}),kt.dataSelect.ids=[]},this._fnChanges=[],this._index=-1,this._dataSource=[]}get index(){return this._index}get total(){return this._dataSource.length}get dataSource(){return this._dataSource}renew(){this._index=-1,this._dataSource=[],this.change()}push(i){this._index<0?(this._index=0,this._dataSource.length=0,this._dataSource[this._index]={data:i}):(this._index<this._dataSource.length-1&&this._dataSource.splice(this._index+1,this._dataSource.length-this._index-1),this._index++,this._dataSource.push({data:i})),this.change()}undo(){this._index<0||(this.undoExecute(this._dataSource[this._index].data),this._index--,this.change())}redo(){this._index>=this._dataSource.length-1||(this._index++,this.redoExecute(this._dataSource[this._index].data),this.change())}set onchange(i){this._fnChanges.push(i)}change(){this._fnChanges.forEach(i=>i(this.index,this.total))}}class ye{constructor(){this._x=0,this._y=0,this._width=0,this._height=0,this._scale=1,this._dislocation={x:0,y:0},this._offset={x:0,y:0},this._svgSize={x:0,y:0,width:0,height:0},this._svgViewBox={x:0,y:0,width:0,height:0},this._frameSize={x:0,y:0,width:1280,height:720},this._actived=!1,this._fnZoomChanges=[]}get actived(){return this._actived}set actived(i){this._actived=i}get get(){return{x:this._frameSize.x,y:this._frameSize.y,w:this._frameSize.width,h:this._frameSize.height,width:this._frameSize.width,height:this._frameSize.height}}set set(i){var r,o;this._frameSize.width=null!==(r=null==i?void 0:i.width)&&void 0!==r?r:1080,this._frameSize.height=null!==(o=null==i?void 0:i.height)&&void 0!==o?o:1080,this.zoomTo="fit"}get width(){return this._width}get height(){return this._height}get scale(){return this._scale}get dislocation(){return this._dislocation}get offset(){return this._offset}get svgSize(){return this._svgSize}get svgViewBox(){return this._svgViewBox}set svgViewBox(i){this._svgViewBox=i}get frameSize(){return this._frameSize}set frameSize(i){this._frameSize.x=i.x,this._frameSize.y=i.y,this._frameSize.width=i.width,this._frameSize.height=i.height,this.reset()}set screen(i){this._offset=i.offset,this._width=i.width,this._height=i.height,this.reset()}reset(){this.scaleTo(this._scale,void 0,!0)}scaleTo(i,r,o){var n;if(!(i<.01||i>100)){if(r=null!==(n=r)&&void 0!==n?n:{x:this._width/2,y:this._height/2},o)this._dislocation.x=this._width/i/2-r.x,this._dislocation.y=this._height/i/2-r.y,this._dislocation.x+=(this._width-this._frameSize.width)/2,this._dislocation.y+=(this._height-this._frameSize.height)/2;else{var a={x:Math.max(0,Math.min((0,d.z)(r.x/this._width,1e3),1)),y:Math.max(0,Math.min((0,d.z)(r.y/this._height,1e3),1))},y={x:(this._width/i-this._width/this._scale)*a.x,y:(this._height/i-this._height/this._scale)*a.y};this._dislocation.x+=y.x,this._dislocation.y+=y.y}this._scale=i,this.change(),this.zoomChange(this.scale)}}set zoomTo(i){"fit"==i?this.scaleTo(Math.min((this._width-80)/this._frameSize.width,(this._height-80)/this._frameSize.height),void 0,!0):"number"==typeof i&&this.scaleTo(i/100,void 0,!0)}init(){return{svgViewBox:this.svgViewBox,svgSize:this.svgSize}}move(i,r){this._dislocation.x=i.x+r.x/this._scale,this._dislocation.y=i.y+r.y/this._scale,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this.refScreen()}change(){this._svgSize.x=this._x,this._svgSize.y=this._y,this._svgSize.width=this._width,this._svgSize.height=this._height,this._svgViewBox.x=-this._dislocation.x,this._svgViewBox.y=-this._dislocation.y,this._svgViewBox.width=this._width/this._scale,this._svgViewBox.height=this._height/this._scale,this.refScreen()}refScreen(){(0,b.s6)()}set onZoomChange(i){this._fnZoomChanges.push(i)}zoomChange(i){this._fnZoomChanges.forEach(r=>r(i))}}var le=v(6195);class oe{constructor(){this._fill="#D9D9D9",this._stroke="#AAAAAA",this._strokeWidth=1,this._strokeLinecap="round",this._strokeLinejoin="round",this._fontFamily=void 0,this._fontSize=20,this._textLength=void 0,this._fnChangeFills=[],this._fnChangeStrokes=[],this._fnChangeStrokeWidths=[],this.loadConfig()}loadConfig(){(0,le.yW)({callback:i=>{this._fill=(null==i?void 0:i.fill)||this._fill,this._stroke=(null==i?void 0:i.stroke)||this._stroke,this._strokeWidth=(null==i?void 0:i.strokeWidth)||this._strokeWidth,this._strokeLinecap=(null==i?void 0:i.strokeLinecap)||this._strokeLinecap,this._strokeLinejoin=(null==i?void 0:i.strokeLinejoin)||this._strokeLinejoin,this.changeFill(this.fill),this.changeStroke(this.stroke),this.changeStrokeWidth(this.strokeWidth)}})}saveConfig(){(0,le._4)({params:{fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth,strokeLinecap:this._strokeLinecap,strokeLinejoin:this._strokeLinejoin}})}get fill(){return this._fill}set fill(i){this._fill=i,this.changeFill(this.fill)}get stroke(){return this._stroke}set stroke(i){this._stroke=i,this.changeStroke(this.stroke)}get strokeWidth(){return this._strokeWidth}set strokeWidth(i){this._strokeWidth=i,this.changeStrokeWidth(this.strokeWidth)}get strokeLinecap(){return this._strokeLinecap}set strokeLinecap(i){this._strokeLinecap=i}get strokeLinejoin(){return this._strokeLinejoin}set strokeLinejoin(i){this._strokeLinejoin=i}get fontFamily(){return this._fontFamily}get fontSize(){return this._fontSize}get textLength(){return this._textLength}set onchangefill(i){this._fnChangeFills.push(i)}changeFill(i){this._fnChangeFills.forEach(r=>r(i)),this.saveConfig()}set onchangestroke(i){this._fnChangeStrokes.push(i)}changeStroke(i){this._fnChangeStrokes.forEach(r=>r(i)),this.saveConfig()}set onchangestrokewidth(i){this._fnChangeStrokeWidths.push(i)}changeStrokeWidth(i){this._fnChangeStrokeWidths.forEach(r=>r(i)),this.saveConfig()}}var me=v(5619),Pe=v(334),Le=v(3591),pe=function(j){return j&&JSON.parse(JSON.stringify(j))},Re=[{key:"FinishedTest",type:"boolean",value:!1,note:"Ho\xe0n th\xe0nh BKT",system:!0,readonly:!1},{key:"TotalTest",type:"number",value:0,note:"T\u1ed5ng s\u1ed1 BKT",system:!0,readonly:!1},{key:"TotalTestDidNotPass",type:"number",value:0,note:"S\u1ed1 BKT kh\xf4ng v\u01b0\u1ee3t qua",system:!0,readonly:!1},{key:"TotalTestPassed",type:"number",value:0,note:"S\u1ed1 BKT \u0111\xe3 v\u01b0\u1ee3t qua",system:!0,readonly:!1}],Be=[],qe={key:"BienSo",value:"0",type:"number",note:null,readonly:!1},$e={if:[{type:"variable",variable:"BienSo",variables:null,slide:null,node:null,condition:">",operator:null,valuetype:"value",value:5}],then:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo > 5"}],else:[{type:"variable",variable:"BienChu",variables:null,slide:null,node:null,condition:null,operator:"=",valuetype:"value",value:"BienSo <= 5"}],id:"57623302",idx:1,variables:["BienSo"]};class Ve{constructor(){this._data_variables=pe(Re).concat(pe(Be)),this._data_conditions=[],this.GetActionExecutings=[],this.GetActionExecuteds=[],this.FuncGetExecuteds=i=>{"function"==typeof i&&this.GetActionExecuteds.push(i)},this.OnGetActionExecuted=i=>{this.GetActionExecuteds.forEach(r=>{r(i)})},this.SetActionExecutings=[],this.FuncSetExecutings=i=>{"function"==typeof i&&this.SetActionExecutings.push(i)},this.OnSetActionExecuting=i=>{this.SetActionExecutings.forEach(r=>{r(i)})},this.SetActionExecuteds=[],this.FuncSetExecuteds=i=>{"function"==typeof i&&this.SetActionExecuteds.push(i)},this.OnSetActionExecuted=i=>{for(var r of(this.SetActionExecuteds.forEach(o=>{o(i)}),this.getCondition(i.key)||[]))r.if&&r.if.length>0&&(this.checkValueConditions(r.if)?this.setValueOperators(r.then||[]):this.setValueOperators(r.else||[]))}}renew(){this._data_variables=pe(Re).concat(pe(Be)),this._data_conditions=[]}get totalVariable(){return this._data_variables.length}get totalCondition(){return this._data_conditions.length}get get(){return{variables:this._data_variables||[],conditions:this._data_conditions||[]}}set set(i){if(!i)return;let r={};"string"==typeof i?r=JSON.parse(i):"object"==typeof i&&(r=i),this._data_variables=r.variables||[],this._data_conditions=r.conditions||(o=>(this._data_variables.map(n=>n.change||[]).forEach(n=>{o=o.concat(n)}),o))([]),Re.forEach(o=>{var n=this._data_variables.filter(a=>a.key==o.key);n.length?n.forEach(function(a,y,p){a.type=o.type,a.readonly=o.readonly,a.system=o.system}):this._data_variables.push(o)})}getVariableTemp(){return pe(qe)}getConditionTemp(){return pe($e)}getKeys(){return this._data_variables.map(function(i){return i.key}).sort(function(i,r){return i.localeCompare(r)})}getVariableAll(){return this._data_variables.length?pe((j=this._data_variables,i="key",function(r){for(var o of j.map(function(n){return n[i]}).sort())j.filter(function(n){return n[i]==o}).forEach(function(n){r.push(n)}),j=j.filter(function(n){return n[i]!=o});return r}([]))):pe(Re).concat(pe(Be));var j,i}setVariableAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_variables=i),Re.forEach(r=>{var o=this._data_variables.filter(n=>n.key==r.key);o.length?o.forEach((n,a,y)=>{n.type=r.type,n.readonly=r.readonly,n.system=r.system}):this._data_variables.push(r)}))}getVariable(i){return i?pe(this._data_variables.filter(r=>r.key==i)[0]||{}):{}}setVariable(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(a=>a.key==i)[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(a=>a.key==i);n.length?n.forEach(function(a,y,p){a.value=r,a.type=o}):this._data_variables.push({key:i,value:r,type:o})}}getValue(i,r){if(!i)return"";var o=this._data_variables.filter(function(y){return y.key==i});if(o.length){var a,n=o[0]||{};switch(this.OnGetActionExecuting(n),r||(r=n.type||null),r){case"string":a=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":"string"==typeof n.value?n.value||"":n.value.toString().trim();break;case"number":a=[null,void 0,NaN,1/0].indexOf(n.value)>=0?0:"number"==typeof n.value?n.value||0:parseFloat(n.value)||0;break;case"boolean":[null,void 0,NaN,1/0].indexOf(n.value)>=0?a=!1:"boolean"==typeof n.value?a=n.value:(a=(n.value+"").toLowerCase(),a="1"==n.value||"true"==n.value||"yes"==n.value||"dung"==n.value);break;case"audio-src":a=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<audio controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></audio>`:"";break;case"video-src":a=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<video controls style="width:280px;vertical-align:middle;"><source src="${n.value}"></source></video>`:"";break;case"img-src":a=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value?`<img style="width:100%;vertical-align:middle;" src="${n.value}"/>`:"";break;default:a=[null,void 0,NaN,1/0].indexOf(n.value)>=0?"":n.value}return this.OnGetActionExecuted(n),a}return null}setValue(i,r,o){if(i){switch([null,void 0,NaN,1/0].indexOf(r)>=0&&(r=""),o||(o=(this._data_variables.filter(function(y){return y.key==i})[0]||{}).type||null),o){case"string":"string"!=typeof r&&(r=r.toString().trim());break;case"number":"number"!=typeof r&&(r=parseFloat(r)||0);break;case"boolean":"string"==typeof r&&(r=r.toLowerCase()),"boolean"!=typeof r&&(r="1"==r||"true"==r||"yes"==r||"dung"==r)}var n=this._data_variables.filter(function(y){return y.key==i});if(n.length){var a=n[0];this.OnSetActionExecuting(a),a&&(a.value=r),this.OnSetActionExecuted(a)}}}getConditionAll(){return pe(this._data_conditions.sort(function(i,r){return i.idx-r.idx}))}setConditionAll(i){i&&("string"==typeof i&&(i=JSON.parse(i)),"object"==typeof i&&(this._data_conditions=i))}getCondition(i){return i?pe(this._data_conditions.filter(r=>r.variable==i||(r.variables||[]).indexOf(i)>=0).sort(function(r,o){return r.idx-o.idx})):{}}switchCondition(i,r,o){switch(i){case"==":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,a){return n+a})>0):r==o;case"!=":return"string"==typeof o?(o=o.toLowerCase().trim(),"string"==typeof r&&(r=r.toLowerCase().trim()),0==o.split(";").map(function(n){return r==n.trim()?1:0}).reduce(function(n,a){return n+a})):r!=o;case">=":return r>=o;case"<=":return r<=o;case">":return r>o;case"<":return r<o;case"\u2208":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,a){return n+a})>0;case"\u2209":return o=(o+"").toLowerCase().trim(),r=(r+"").toLowerCase().trim(),0==o.split(";").map(function(n){return r.indexOf(n.trim())>=0?1:0}).reduce(function(n,a){return n+a});default:return!1}}switchOperator(i,r,o){switch(i){case"+":return r+o;case"-":return r-o;case"*":return r*o;case"/":return r/o;case"=":return o;case"=!":return!o;case"==":return r==o;case"!=":return r!=o}}switchFormula(i,r){switch(i){case"sum":return r.reduce(function(n,a){return n+a});case"sub":return r.reduce(function(n,a){return n-a});case"pro":return r.reduce(function(n,a){return n*a});case"div":return r.reduce(function(n,a){return n/a});case"avg":var o=r.reduce(function(n,a){return n+a})/(r.length||1);return Math.round(1e4*(o+Number.EPSILON))/1e4;case"min":return Math.min.apply(null,r);case"max":return Math.max.apply(null,r);case"and":return r.reduce(function(n,a){return n&&a});case"or":return r.reduce(function(n,a){return n||a});default:return 0}}switchValueType_Condition(i){switch(i.valuetype){case"value":return this.switchCondition(i.condition,this.getValue(i.variable),i.value);case"variable":return this.switchCondition(i.condition,this.getValue(i.variable),this.getValue(i.value));default:return 0}}switchValueType_Operator(i){switch(i.valuetype){case"value":return this.switchOperator(i.operator,this.getValue(i.variable),i.value);case"variable":return this.switchOperator(i.operator,this.getValue(i.variable),this.getValue(i.value));case"variables":var r=this.switchFormula(i.valueformula,i.value.map(o=>this.getValue(o)));return this.switchOperator(i.operator,this.getValue(i.variable),r)}}checkValueCondition(i){return this.switchValueType_Condition(i)}getValueOperator(i){return this.switchValueType_Operator(i)}setValueOperator(i){null!=i&&i.variable&&this.setValue(i.variable,this.getValueOperator(i))}checkValueConditions(i){return 0==i.map(r=>{switch(r.type){case"variable":return this.switchValueType_Condition(r)?0:1;case"variables":return 0==r.variables.map(o=>this.switchValueType_Condition(Object.assign(pe(r),{variable:o}))?0:1).reduce(function(o,n){return o+n})?0:1;default:return 0}}).reduce((r,o)=>(null!=r?r:0)+(null!=o?o:0))}setValueOperators(i){for(var r of i)switch(r.type){case"variable":this.setValue(r.variable,this.getValueOperator(r));break;case"variables":for(var o of r.variables)this.setValue(o,this.getValueOperator(Object.assign(pe(r),{variable:o})));break;case"slide":me.J.runSlide(void 0,void 0,r.slide);break;case"node":{var n;(0,Le.GD)({id:r.node,nodeStatus:me.J.nodeStatus,slideStatus:me.J.slideStatus});let a=me.J.findNode(r.node);null!=a&&null!==(n=a.interactive)&&void 0!==n&&n.click&&(0,Pe.J)(a,me.J.nodeStatus,me.J.slideStatus);break}}}FuncGetExecutings(i){"function"==typeof i&&this.GetActionExecutings.push(i)}OnGetActionExecuting(i){this.GetActionExecutings.forEach(r=>{r(i)})}}class Xe{constructor(){this._fnChangePointerTypes=[],this._fnChangePointerTypeTemps=[],this._fnChangePenTypes=[],this._fnChangeShapeTypes=[],this._fnChangePolygonTypes=[],this._fnChanges=[],this._pointer_type=0,this._pointer_type_temp=0,this._pen_type=0,this._shape_type=0,this._polygon_type=0}setPointer_nochange(i,r,o){if(this._pointer_type=i,r)switch(i){case E.P.PEN:this._pen_type=r;break;case E.P.SHAPE:this._shape_type=r,o&&r===w.h.POLYGON&&(this._polygon_type=o)}}get pointer_type(){return this._pointer_type}set pointer_type(i){switch(this._pointer_type=i,i){case E.P.PEN:this._pen_type||(this._pen_type=W.F.DRAW);break;case E.P.SHAPE:this._shape_type||(this._shape_type=w.h.RECT)}this.changePointerType(this.pointer_type),this.change(this.pointer_type)}get pointer_type_temp(){return this._pointer_type_temp}set pointer_type_temp(i){this._pointer_type_temp=i,this.changePointerTypeTemp(this.pointer_type),this.change(this.pointer_type_temp)}get pen_type(){return this._pen_type}set pen_type(i){this._pen_type=i,this.changePenType(this.pointer_type,this.pen_type),this.change(this.pointer_type,this.pen_type)}get shape_type(){return this._shape_type}set shape_type(i){this._shape_type=i,this.changeShapeType(this.pointer_type,this.shape_type),this.change(this.pointer_type,this.shape_type)}get polygon_type(){return this._polygon_type}set polygon_type(i){this._polygon_type=i,this.changePolygonType(this.pointer_type,this.shape_type,this.polygon_type),this.change(this.pointer_type,this.shape_type,this.polygon_type)}set onchangePointerType(i){this._fnChangePointerTypes.push(i)}changePointerType(i,r,o){this._fnChangePointerTypes.forEach(n=>n(i,r,o))}set onchangePointerTypeTemp(i){this._fnChangePointerTypeTemps.push(i)}changePointerTypeTemp(i,r,o){this._fnChangePointerTypeTemps.forEach(n=>n(i,r,o))}set onchangePenType(i){this._fnChangePenTypes.push(i)}changePenType(i,r,o){this._fnChangePenTypes.forEach(n=>n(i,r,o))}set onchangeShapeType(i){this._fnChangeShapeTypes.push(i)}changeShapeType(i,r,o){this._fnChangeShapeTypes.forEach(n=>n(i,r,o))}set onchangePolygonType(i){this._fnChangePolygonTypes.push(i)}changePolygonType(i,r,o){this._fnChangePolygonTypes.forEach(n=>n(i,r,o))}set onchange(i){this._fnChanges.push(i)}change(i,r,o){this._fnChanges.forEach(n=>n(i,r,o))}}const kt=new class ti{constructor(){this._container="",this._svg="",this._screen=ye.prototype,this._data=Gt.prototype,this._dataSelect=St.prototype,this._slide=At.prototype,this._history=ie.prototype,this._attribute=oe.prototype,this._pointer=Xe.prototype,this._variable=Ve.prototype,this._data=new Gt,this._dataSelect=new St,this._slide=new At,this._history=new ie,this._attribute=new oe,this._pointer=new Xe,this._variable=new Ve,this._pointer.onchangePointerType=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])},this._data.onChangeSlide=()=>{this._dataSelect.ids.length&&(this._dataSelect.ids=[])}}get config(){return this._config}set config(i){this._config=i}get dataSource(){return{modules:"icdtV2",screen:this._screen.get,data:this._data.get,resources:this._data.getResource,variable:this._variable.get,info:{}}}set dataSource(i){this._screen.set=i.screen||{width:1080,height:1080},this._data.set=i.data||{},this._variable.set=i.variable||{}}get container(){return this._container}set container(i){this._container=i}get svg(){return this._svg}set svg(i){this._svg=i}get target(){return window.document.querySelector(this._svg)}get screen(){return this._screen}get data(){return this._data}get dataSelect(){return this._dataSelect}get slide(){return this._slide}get history(){return this._history}get attribute(){return this._attribute}get pointer(){return this._pointer}get variable(){return this._variable}reloadView(){var i,r,o,n,a;this._screen.screen=(i=jQuery(this._container).offset(),r=jQuery(this._container).width(),o=jQuery(this._container).height(),{offset:{x:null!==(n=null==i?void 0:i.left)&&void 0!==n?n:0,y:null!==(a=null==i?void 0:i.top)&&void 0!==a?a:0},width:null!=r?r:0,height:null!=o?o:0})}init(i){this._container=i.container,this._svg=i.target,this._screen=new ye,(j=>{new b.cR(j.container,j.target);var i=(n,a,y,p)=>{switch(n){case E.P.POINTER:jQuery(j.target).css({cursor:"auto"});break;case E.P.HAND:p?jQuery(j.target).css({cursor:"grabbing"}):jQuery(j.target).css({cursor:"grab"});break;case E.P.PEN:switch(a){case W.F.DRAW:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/viet.png) 12 32,default"});break;case W.F.HIGHTLIGH:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/highlight1.png) 12 32,default"})}break;case E.P.ERASER:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/gom.png) 22 22,default"});break;case E.P.SHAPE:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/point.png) 22 22,default"});break;case E.P.TEXT:case E.P.FOREIGNOBJECT:jQuery(j.target).css({cursor:"url(assets/images/svg/icon/textmouse.png) 22 22,default"})}};kt.pointer.onchange=(n,a,y)=>{i(n,a)},jQuery(j.container).off("mousedown.icdt-init-icon").on("mousedown.icdt-init-icon",n=>{i(kt.pointer.pointer_type,void 0,0,!0)}).off("mouseup.icdt-init-icon").on("mouseup.icdt-init-icon",n=>{i(kt.pointer.pointer_type,void 0,0,!1)}),document.addEventListener("wheel",n=>{n.ctrlKey&&n.preventDefault()},{passive:!1}),jQuery(j.container).off("wheel.icdt-init").on("wheel.icdt-init",n=>{var a;n.preventDefault();let y=null!==(a=n.originalEvent)&&void 0!==a?a:n;if(!y.deltaX&&y.deltaY!=Math.floor(y.deltaY)||y.ctrlKey){var p=kt.screen.scale;kt.screen.scaleTo(p-.04*p*(y.deltaY>0?1:-1),(0,at.D)({x:n.clientX,y:n.clientY},1,{x:0,y:0},kt.screen.offset))}else kt.screen.move(kt.screen.dislocation,{x:-y.deltaX,y:-y.deltaY})}),jQuery(window).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{kt.screen.actived=!!jQuery(n.target).parents(kt.container).length}),jQuery(j.container).off("mouseenter.icdt-init").on("mouseenter.icdt-init",n=>{kt.screen.actived=!0}),jQuery(j.container).off("mouseleave.icdt-init").on("mouseleave.icdt-init",n=>{kt.screen.actived=!1,kt.pointer.pointer_type_temp==E.P.HAND&&(kt.pointer.pointer_type_temp=E.P.POINTER)}),jQuery(j.container).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{0==n.button&&(j.container.includes("#")&&j.container.includes(n.target.getAttribute("id"))||j.container.includes(".")&&j.container.includes(n.target.getAttribute("class"))||j.container.includes(n.target.nodeName))&&(kt.pointer.pointer_type_temp||kt.pointer.pointer_type)===E.P.POINTER&&(kt.dataSelect.ids=[])}),jQuery(j.container).off("touchmove.icdt-init").on("touchmove.icdt-init",n=>{n.preventDefault()});const r=n=>{switch(kt.pointer.pointer_type_temp||kt.pointer.pointer_type){case E.P.POINTER:U(n);break;case E.P.HAND:(j=>{(0,vt.I)(j,new F,1,{x:0,y:0})})(n);break;case E.P.PEN:(0,ct.u)(n);break;case E.P.SHAPE:(j=>{var i=null;switch(kt.pointer.shape_type){case w.h.CIRCLE:i=new Y;break;case w.h.ELLIPSE:i=new X;break;case w.h.LINE:i=new R;break;case w.h.RECT:i=new K;break;case w.h.POLYGON:var r;i=new xt(null===(r=S.find(o=>o.type==kt.pointer.polygon_type))||void 0===r?void 0:r.ratios);break;case w.h.FOREIGNOBJECT:i=new Mt;break;case w.h.IMAGE:i=new ue;break;case w.h.TEXT:case w.h.PATH:i=new Tt}i&&(0,vt.I)(j,i)})(n);break;case E.P.FOREIGNOBJECT:(j=>{(0,vt.I)(j,new Mt)})(n);break;case E.P.IMAGE:(j=>{(0,vt.I)(j,new ue)})(n);break;case E.P.TEXT:(j=>{(0,vt.I)(j,new N)})(n);break;case E.P.ERASER:(j=>{(0,vt.I)(j,new Xt)})(n);break;case E.P.INDEX:(0,x.h)(n)}};let o=!1;jQuery(j.target).off("touchstart.icdt-init").on("touchstart.icdt-init",n=>{o=!0,r({touchEvent:n})}),jQuery(j.target).off("mousedown.icdt-init").on("mousedown.icdt-init",n=>{if(1!=n.button){if(o)return void(o=!1);r({mouseEvent:n})}}),j.iskeyboard&&(jQuery(window).off("keydown.icdt-init").on("keydown.icdt-init",n=>{kt.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Pt.K)(n))}),jQuery(window).off("keyup.icdt-init").on("keyup.icdt-init",n=>{kt.screen.actived&&((n.ctrlKey||n.altKey)&&(n.stopPropagation(),n.preventDefault()),(0,Pt.K)(n))}))})({container:i.container,target:i.target,iskeyboard:i.iskeyboard})}}},4312:(he,Dt,v)=>{v.d(Dt,{h:()=>L,y:()=>k});var E=v(7873),b=v(6611),nt=v(9506),z=v(1308),vt=v(5970);const L=F=>{var w,q,S,it;let d=(null===(w=F.mouseEvent)||void 0===w?void 0:w.target)||(null===(q=F.touchEvent)||void 0===q?void 0:q.target),Y=(null==d?void 0:d.getAttribute("id"))||"",A=null==d?void 0:d.nodeName,X=jQuery(d).parents("g[id]").attr("id")||"";if(![E.F.INDEX_GROUP].includes(X))if(null!==(S=F.mouseEvent)&&void 0!==S&&S.altKey||null!==(it=F.touchEvent)&&void 0!==it&&it.altKey||!Y||Y.match(/[^0-9]/)||!b.L.dataSelect.nodeName.includes(A)){var st;b.L.dataSelect.ids.length&&(b.L.dataSelect.ids=[]),(0==(null===(st=F.mouseEvent)||void 0===st?void 0:st.button)||F.touchEvent)&&((F,w)=>{let Y=(0,vt.RY)(E.F.SCAN_GROUP,"g"),A=(0,nt.CE)(0,0,1,1);(0,vt.xJ)(Y,A),((F,w,q,S)=>{(0,z.I)(F,{start:Y=>{},move:(Y,A)=>{((Y,A,X,st)=>{w=(0,nt.CE)(Y,A,X,st),(0,vt.xJ)(q,w)})(A[0][0],A[0][1],Y.x,Y.y)},end:(Y,A)=>{null==q||q.remove(),b.L.dataSelect.ids=b.L.data.getNodeInArea(Math.min(A[0][0],Y.x),Math.min(A[0][1],Y.y),Math.max(A[0][0],Y.x),Math.max(A[0][1],Y.y)),S(b.L.dataSelect.nodes)}})})(F,A,Y,w)})(F,U)}else{var K,Z;let xt=parseFloat(Y||"0");b.L.dataSelect.ids=null!==(K=F.mouseEvent)&&void 0!==K&&K.shiftKey||null!==(Z=F.touchEvent)&&void 0!==Z&&Z.shiftKey?[xt].concat(b.L.dataSelect.ids).filter((R,ut,Ct)=>Ct.indexOf(R)==ut):[xt],U(b.L.dataSelect.nodes)}},U=F=>{var w,q;let S=1;var it,d;if(F.length&&(S=Math.max.apply(null,null!==(it=null===(d=b.L.data.slide)||void 0===d||null===(d=d.svg)||void 0===d?void 0:d.nodes.map(A=>{var X;return null!==(X=A.idx)&&void 0!==X?X:0}))&&void 0!==it?it:[0])+1),1==F.length)F[0].idx||(F[0].idx=S,F[0].time=0);else if(F.length>=0){let A=F.map(st=>{var K;return null!==(K=st.idx)&&void 0!==K?K:0}).filter(st=>st>0),X=A.length?Math.min.apply(null,A):S;F.forEach(st=>{var K;st.idx=X,st.time=null!==(K=st.time)&&void 0!==K?K:0})}let Y=(0,vt.RY)(E.F.INDEX_GROUP,"g");(0,vt.IA)(Y,null!==(w=null===(q=b.L.data.slide)||void 0===q||null===(q=q.svg)||void 0===q?void 0:q.nodes)&&void 0!==w?w:[])},k=F=>{var w,q,S;null!=F&&null!==(w=F.svg)&&void 0!==w&&w.nodes&&F.svg.nodes.forEach(d=>{d.idx=0,d.time=null});let it=(0,vt.RY)(E.F.INDEX_GROUP,"g");(0,vt.IA)(it,null!==(q=null===(S=b.L.data.slide)||void 0===S||null===(S=S.svg)||void 0===S?void 0:S.nodes)&&void 0!==q?q:[])}},7135:(he,Dt,v)=>{v.d(Dt,{K:()=>w,X:()=>F});var E=v(6195),b=v(1477),nt=v(3603),z=v(6611),vt=v(1026),C=v(9841),f=v(2492),L=v(6752),U=v(5713);const F=new class k{constructor(){this._fnChanges=[],this.onchange={type:"keydown",key:b.r.Escape,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.ids=[])}},this.onchange={type:"keydown",key:b.r.Delete,fn:()=>{z.L.dataSelect.deleteNode()}},this.onchange={type:"keydown",key:b.r.Space,fn:()=>{z.L.pointer.pointer_type_temp=nt.P.HAND}},this.onchange={type:"keyup",key:b.r.Space,fn:()=>{z.L.pointer.pointer_type_temp=nt.P.POINTER}},this.onchange={type:"keydown",key:b.r.ArrowLeft,fn:()=>{z.L.dataSelect.ids.length||z.L.data.backSlide()}},this.onchange={type:"keydown",key:b.r.ArrowRight,fn:()=>{z.L.dataSelect.ids.length||z.L.data.nextSlide()}},this.onchange={type:"keydown",key:b.r.ArrowLeft,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(S=>{(0,L.ei)(S,(0,f.z)(S.size.x-(0,C.$)(1)))}),(0,U.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.r.ArrowRight,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(S=>{(0,L.ei)(S,(0,f.z)(S.size.x+(0,C.$)(1)))}),(0,U.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.r.ArrowUp,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(S=>{(0,L.ZF)(S,(0,f.z)(S.size.y-(0,C.$)(1)))}),(0,U.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.r.ArrowDown,fn:()=>{z.L.dataSelect.ids.length&&(z.L.dataSelect.nodes.forEach(S=>{(0,L.ZF)(S,(0,f.z)(S.size.y+(0,C.$)(1)))}),(0,U.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.r.Digit1,fn:S=>{S.shiftKey&&(z.L.reloadView(),z.L.screen.zoomTo="fit")}},this.onchange={type:"keydown",key:b.r.KeyA,fn:S=>{S.ctrlKey&&(z.L.dataSelect.ids=z.L.data.getNodeAll(),(0,U.D)(z.L.dataSelect.nodes))}},this.onchange={type:"keydown",key:b.r.KeyC,fn:S=>{if(S.ctrlKey){let it=z.L.dataSelect.nodes;it&&(0,E.IB)({params:{type:"nodes",nodes:it}})}}},this.onchange={type:"keydown",key:b.r.KeyV,fn:S=>{S.ctrlKey&&(0,E.A9)({callback:it=>{var d,Y;"nodes"==(null==it?void 0:it.type)&&null!=it&&null!==(d=it.nodes)&&void 0!==d&&d.length&&(null==it||null===(Y=it.nodes)||void 0===Y||Y.forEach(A=>{S.shiftKey||z.L.data.findNode(A.id).id&&(A.size.x+=16,A.size.y+=16),A.id=Math.ceil(1e9*Math.random()),z.L.data.node=A}),(0,vt.t)(z.L.data.slide))}})}},this.onchange={type:"keydown",key:b.r.KeyZ,fn:S=>{S.ctrlKey&&S.shiftKey?z.L.history.redo():S.ctrlKey&&z.L.history.undo()}},this.onchange={type:"keydown",key:b.r.BracketLeft,fn:S=>{S.ctrlKey&&S.shiftKey?z.L.data.sendToBack(z.L.dataSelect.ids):S.ctrlKey?z.L.data.sendToBackStep(z.L.dataSelect.ids,-2):z.L.data.sendToBackArea(z.L.dataSelect.ids)}},this.onchange={type:"keydown",key:b.r.BracketRight,fn:S=>{S.ctrlKey&&S.shiftKey?z.L.data.bringToFront(z.L.dataSelect.ids):S.ctrlKey?z.L.data.bringToFrontStep(z.L.dataSelect.ids,1):z.L.data.bringToFrontArea(z.L.dataSelect.ids)}}}set onchange(S){let it=this._fnChanges.find(d=>d.eventType==S.type&&d.eventKey==S.key);it?it.fns.push(S.fn):this._fnChanges.push({eventType:S.type,eventKey:S.key,fns:[S.fn]})}change(S,it,d){var Y;null===(Y=this._fnChanges.find(A=>A.eventType==S&&A.eventKey==it))||void 0===Y||Y.fns.forEach(A=>A(d))}},w=q=>{F.change(q.type,q.keyCode||q.which||q.charCode||0,q)}},669:(he,Dt,v)=>{v.d(Dt,{O:()=>L});var E=v(6407),b=v(5970),nt=v(1131),z=v(9841),vt=v(7873),C=v(6611),f=v(1281);class L{constructor(k,F){var w,q;let S={stroke:"#FF0000",strokeWidth:(0,z.$)(2),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,z.$)(8)},{element:it}=(0,E.X)(Math.ceil(1e9*Math.random()),{size:F});window.document.getElementById(vt.F.INTERACTIVE_GROUP).querySelectorAll("path").forEach(Z=>null==Z?void 0:Z.remove()),window.document.getElementById(vt.F.INTERACTIVE_GROUP).querySelectorAll("circle").forEach(Z=>null==Z?void 0:Z.remove()),null===(w=window.document.getElementById(vt.F.INTERACTIVE_GROUP))||void 0===w||w.appendChild(it);var A=Z=>{if(!Z.length)return;let xt=[];if(1==Z.length){var H;let{size:R}=null!==(H=null!=k?k:C.L.dataSelect.nodes[0])&&void 0!==H?H:{};if(!R)return;xt=[[R.x+R.width/2,R.y+R.height/2],Z[0]]}else xt=[...Z];st(xt),X(xt[0],"start"),X(xt[xt.length-1],"end")},X=(Z,xt)=>{Z&&((H=>{let{element:R}=(0,f.K)(Math.ceil(1e9*Math.random()),{attribute:{fill:"start"==xt?"#FF0000":"#00BA00",strokeWidth:(0,z.$)(1)},size:{x:Z[0]-5,y:Z[1]-5,width:10,height:10}});null===(H=window.document.getElementById(vt.F.INTERACTIVE_GROUP))||void 0===H||H.prepend(R)})(),((H,R)=>{let{size:ut}=null!==(H=null!=k?k:C.L.dataSelect.nodes[0])&&void 0!==H?H:{};if(!ut)return;let Ct=[[Z[0]-ut.width/2,Z[1]-ut.height/2],[Z[0]+ut.width/2,Z[1]-ut.height/2],[Z[0]+ut.width/2,Z[1]+ut.height/2],[Z[0]-ut.width/2,Z[1]+ut.height/2],[Z[0]-ut.width/2,Z[1]-ut.height/2]],{element:Tt}=(0,E.X)(Math.ceil(1e9*Math.random()),{attribute:{fill:"#FFFFFF",fillOpacity:.6,stroke:"#5f6ce1",strokeWidth:(0,z.$)(1),strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:(0,z.$)(8)},size:{x:0,y:0,width:10,height:10,points:Ct}});null===(R=window.document.getElementById(vt.F.INTERACTIVE_GROUP))||void 0===R||R.prepend(Tt)})())},st=Z=>{let H=nt.n8j().x(R=>R[0]).y(R=>R[1]).curve(nt.qrM)(Z);it.setAttribute("d",H)};(0,b.tD)(it,S),A(null!==(q=null==F?void 0:F.points)&&void 0!==q?q:[]);let K="";return{start:Z=>{K=`M ${Z.x} ${Z.y} L ${Z.x} ${Z.y}`},move:(Z,xt)=>{K+=` ${Z.x} ${Z.y}`,it.setAttribute("d",K)},end:(Z,xt)=>{A(xt),xt.length&&(window.interactivePoints=xt)}}}}},4979:(he,Dt,v)=>{v.d(Dt,{z:()=>S,u:()=>q});var E=v(7873),b=v(2409),nt=v(6611),z=v(1308),vt=v(5970),C=v(1131),f=v(6407),L=v(1999),U=v(4896);class k{constructor(){let d={stroke:nt.L.attribute.stroke,strokeWidth:nt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:Y,element:A,attribute:X,size:st}=(0,f.X)(Math.ceil(1e9*Math.random()),{attribute:d});(0,vt.tD)(A,X);let K="",Z="";return{start:H=>{K=`M ${H.x} ${H.y} L ${H.x} ${H.y}`},move:(H,R)=>{((H,R)=>{K+=` ${H} ${R}`,A.setAttribute("d",K)})(H.x,H.y)},end:(H,R)=>{var ut;R.length>=3?(Z=null!==(ut=C.n8j().x(bt=>bt[0]).y(bt=>bt[1]).curve(C.qrM)(R))&&void 0!==ut?ut:"",A.setAttribute("d",Z)):A.setAttribute("d",K);let Ct=(0,U.CS)(Z||K),{minX:Tt,minY:Qt,maxX:Mt,maxY:Ht}=(0,U.lP)(Ct);st.x=Tt,st.y=Qt,st.width=Mt-Tt||1,st.height=Ht-Qt||1,st.ratioMaps=(0,U.nf)(st,Ct),nt.L.data.node=Object.assign({id:Y,type:L.h.PATH,name:"Path"},{size:st,attribute:X})}}}}class F{constructor(){let d={stroke:nt.L.attribute.stroke,strokeOpacity:.4,strokeWidth:nt.L.attribute.strokeWidth,strokeLinecap:"round",strokeLinejoin:"round"},{nodeId:Y,element:A,attribute:X,size:st}=(0,f.X)(Math.ceil(1e9*Math.random()),{attribute:d});(0,vt.tD)(A,X);let K="";return{start:H=>{K=`M ${H.x} ${H.y} L ${H.x} ${H.y}`},move:(H,R)=>{((H,R)=>{K+=` ${H} ${R}`,A.setAttribute("d",K)})(H.x,H.y)},end:(H,R)=>{let ut=(0,U.CS)(K),{minX:Ct,minY:Tt,maxX:Qt,maxY:Mt}=(0,U.lP)(ut);st.x=Ct,st.y=Tt,st.width=Qt-Ct||1,st.height=Mt-Tt||1,st.ratioMaps=(0,U.nf)(st,ut),nt.L.data.node=Object.assign({id:Y,type:L.h.PATH,name:"Path"},{size:st,attribute:X})}}}}var w=v(669);const q=it=>{switch(nt.L.pointer.pen_type){case b.F.DRAW:(0,z.I)(it,new k);break;case b.F.HIGHTLIGH:(0,z.I)(it,new F);break;case b.F.INTERACTIVE:S(it)}},S=it=>{var d,Y;let A=(0,vt.RY)(E.F.INTERACTIVE_GROUP,"g"),X=null!==(d=null===(Y=nt.L.data.slide)||void 0===Y||null===(Y=Y.svg)||void 0===Y?void 0:Y.viewBox)&&void 0!==d?d:(()=>{let{width:st,height:K}=nt.L.screen.get;return{x:0,y:0,width:st,height:K}})();(0,vt.KP)(A,X),it&&(0,z.I)(it,new w.O)}},5713:(he,Dt,v)=>{v.d(Dt,{D:()=>q});var E=v(7873),b=v(6611),nt=v(9506),z=v(1308),vt=v(5970),C=v(2492);const U=(S,it,d,Y,A)=>{let{x:X,y:st,width:K,height:Z}=d,xt=Y.map(Qt=>Object.assign({},Qt.size)),R=[];(0,z.I)(S,{start:Qt=>{Y.forEach((Qt,Mt)=>{let{id:Ht,size:bt,attribute:Pt}=Qt;R.push(JSON.parse(JSON.stringify({id:Ht,size:bt,attribute:Pt})))})},move:(Qt,Mt)=>{((Qt,Mt,Ht,ue)=>{(()=>{let bt;bt="rect-center"===it?{x:X+Ht-Qt,y:st+ue-Mt,width:K,height:Z}:{x:X,y:st,width:K,height:Z},bt.width<0&&(bt.width=0),bt.height<0&&(bt.height=0),Object.assign(d,bt),(0,vt.Mo)(A,Y,d)})(),Y.forEach((bt,Pt)=>{let Ot,{x:ct,y:ft,width:V,height:I}=xt[Pt],{id:B,type:s,size:tt,attribute:Et}=bt;Ot="rect-center"===it?{x:ct+Ht-Qt,y:ft+ue-Mt,width:V,height:I}:{x:ct,y:ft,width:V,height:I},Ot.width<0&&(Ot.width=0),Ot.height<0&&(Ot.height=0),Ot.x=(0,C.z)(Ot.x),Ot.y=(0,C.z)(Ot.y),Ot.width=(0,C.z)(Ot.width),Ot.height=(0,C.z)(Ot.height),Object.assign(tt,Ot),Object.assign(Et,(0,nt.xW)(s,tt,Et)),(0,vt.tD)(window.document.getElementById(B),Et)})})(Mt[0][0],Mt[0][1],Qt.x,Qt.y)},end:(Qt,Mt)=>{R.length&&b.L.history.push(Y.map((Qt,Mt)=>{let{id:Ht,size:bt,attribute:Pt}=Qt;return{type:"size",from:R[Mt],to:JSON.parse(JSON.stringify({id:Ht,size:bt,attribute:Pt}))}}))}})},w=(S,it,d,Y)=>{let Ct,{id:A,type:X,size:st,attribute:K}=d,{x:Z,y:xt,width:H,height:R}=st,ut=(H||1)/(R||1),Qt=null,ue=!1;(0,z.I)(S,{start:Pt=>{Qt=JSON.parse(JSON.stringify({id:A,size:st,attribute:K}))},move:(Pt,ct)=>{((Pt,ct,ft,V)=>{let I=ft-Pt,B=V-ct;switch(it){case"rect-center":var s,tt;Ct=null!==(s=S.mouseEvent)&&void 0!==s&&s.shiftKey||null!==(tt=S.touchEvent)&&void 0!==tt&&tt.shiftKey?Math.abs(ft-Pt)>=Math.abs(V-ct)?{x:Z+ft-Pt,y:xt,width:H,height:R}:{x:Z,y:xt+V-ct,width:H,height:R}:{x:Z+ft-Pt,y:xt+V-ct,width:H,height:R};break;case"rect-top-left":var Et,Ot,jt,Kt,Ut,Vt,re,Nt;Ct=(null!==(Et=S.mouseEvent)&&void 0!==Et&&Et.shiftKey||null!==(Ot=S.touchEvent)&&void 0!==Ot&&Ot.shiftKey)&&(null!==(jt=S.mouseEvent)&&void 0!==jt&&jt.altKey||null!==(Kt=S.touchEvent)&&void 0!==Kt&&Kt.altKey)?ut>=1?{x:Z+(ft-Pt),y:xt+(ft-Pt)/ut,width:H-2*(ft-Pt),height:R-2*(ft-Pt)/ut}:{x:Z+(V-ct)*ut,y:xt+(V-ct),width:H-2*(V-ct)*ut,height:R-2*(V-ct)}:null!==(Ut=S.mouseEvent)&&void 0!==Ut&&Ut.shiftKey||null!==(Vt=S.touchEvent)&&void 0!==Vt&&Vt.shiftKey?ut>=1?{x:Z+(ft-Pt),y:xt+(ft-Pt)/ut,width:H-(ft-Pt),height:R-(ft-Pt)/ut}:{x:Z+(V-ct)*ut,y:xt+(V-ct),width:H-(V-ct)*ut,height:R-(V-ct)}:null!==(re=S.mouseEvent)&&void 0!==re&&re.altKey||null!==(Nt=S.touchEvent)&&void 0!==Nt&&Nt.altKey?{x:Z+(ft-Pt),y:xt+(V-ct),width:H-2*(ft-Pt),height:R-2*(V-ct)}:{x:Z+(ft-Pt),y:xt+(V-ct),width:H-(ft-Pt),height:R-(V-ct)};break;case"rect-top-right":var ht,Xt,P,h,N,rt,lt,G;Ct=(null!==(ht=S.mouseEvent)&&void 0!==ht&&ht.shiftKey||null!==(Xt=S.touchEvent)&&void 0!==Xt&&Xt.shiftKey)&&(null!==(P=S.mouseEvent)&&void 0!==P&&P.altKey||null!==(h=S.touchEvent)&&void 0!==h&&h.altKey)?ut>=1?{x:Z-(ft-Pt),y:xt-(ft-Pt)/ut,width:H+2*(ft-Pt),height:R+2*(ft-Pt)/ut}:{x:Z+(V-ct)*ut,y:xt+(V-ct),width:H-2*(V-ct)*ut,height:R-2*(V-ct)}:null!==(N=S.mouseEvent)&&void 0!==N&&N.shiftKey||null!==(rt=S.touchEvent)&&void 0!==rt&&rt.shiftKey?ut>=1?{x:Z,y:xt-(ft-Pt)/ut,width:H+(ft-Pt),height:R+(ft-Pt)/ut}:{x:Z,y:xt+(V-ct),width:H-(V-ct)*ut,height:R-(V-ct)}:null!==(lt=S.mouseEvent)&&void 0!==lt&&lt.altKey||null!==(G=S.touchEvent)&&void 0!==G&&G.altKey?{x:Z-(ft-Pt),y:xt+(V-ct),width:H+2*(ft-Pt),height:R-2*(V-ct)}:{x:Z,y:xt+(V-ct),width:H+(ft-Pt),height:R-(V-ct)};break;case"rect-bottom-left":var x,W,at,yt,_t,St,et,mt;Ct=(null!==(x=S.mouseEvent)&&void 0!==x&&x.shiftKey||null!==(W=S.touchEvent)&&void 0!==W&&W.shiftKey)&&(null!==(at=S.mouseEvent)&&void 0!==at&&at.altKey||null!==(yt=S.touchEvent)&&void 0!==yt&&yt.altKey)?ut>=1?{x:Z+(ft-Pt),y:xt+(ft-Pt)/ut,width:H-2*(ft-Pt),height:R-2*(ft-Pt)/ut}:{x:Z-(V-ct)*ut,y:xt-(V-ct),width:H+2*(V-ct)*ut,height:R+2*(V-ct)}:null!==(_t=S.mouseEvent)&&void 0!==_t&&_t.shiftKey||null!==(St=S.touchEvent)&&void 0!==St&&St.shiftKey?ut>=1?{x:Z+(ft-Pt),y:xt,width:H-(ft-Pt),height:R-(ft-Pt)/ut}:{x:Z-(V-ct)*ut,y:xt,width:H+(V-ct)*ut,height:R+(V-ct)}:null!==(et=S.mouseEvent)&&void 0!==et&&et.altKey||null!==(mt=S.touchEvent)&&void 0!==mt&&mt.altKey?{x:Z+(ft-Pt),y:xt-(V-ct),width:H-2*(ft-Pt),height:R+2*(V-ct)}:{x:Z+(ft-Pt),y:xt,width:H-(ft-Pt),height:R+(V-ct)};break;case"rect-bottom-right":var At,Rt,Gt,qt,ie,ye,le,oe;Ct=(null!==(At=S.mouseEvent)&&void 0!==At&&At.shiftKey||null!==(Rt=S.touchEvent)&&void 0!==Rt&&Rt.shiftKey)&&(null!==(Gt=S.mouseEvent)&&void 0!==Gt&&Gt.altKey||null!==(qt=S.touchEvent)&&void 0!==qt&&qt.altKey)?ut>=1?{x:Z-(ft-Pt),y:xt-(ft-Pt)/ut,width:H+2*(ft-Pt),height:R+2*(ft-Pt)/ut}:{x:Z-(V-ct)*ut,y:xt-(V-ct),width:H+2*(V-ct)*ut,height:R+2*(V-ct)}:null!==(ie=S.mouseEvent)&&void 0!==ie&&ie.shiftKey||null!==(ye=S.touchEvent)&&void 0!==ye&&ye.shiftKey?ut>=1?{x:Z,y:xt,width:H+(ft-Pt),height:R+(ft-Pt)/ut}:{x:Z,y:xt,width:H+(V-ct)*ut,height:R+(V-ct)}:null!==(le=S.mouseEvent)&&void 0!==le&&le.altKey||null!==(oe=S.touchEvent)&&void 0!==oe&&oe.altKey?{x:Z-(ft-Pt),y:xt-(V-ct),width:H+2*(ft-Pt),height:R+2*(V-ct)}:{x:Z,y:xt,width:H+(ft-Pt),height:R+(V-ct)};break;case"rect-top":var me,Pe,Le,Ee;Ct=null!==(me=S.mouseEvent)&&void 0!==me&&me.shiftKey||null!==(Pe=S.touchEvent)&&void 0!==Pe&&Pe.shiftKey?{x:Z+B/2*ut,y:xt+B,width:H-B*ut,height:R-B}:null!==(Le=S.mouseEvent)&&void 0!==Le&&Le.altKey||null!==(Ee=S.touchEvent)&&void 0!==Ee&&Ee.altKey?{x:Z,y:xt+B,width:H,height:R-2*B}:{x:Z,y:xt+B,width:H,height:R-B};break;case"rect-bottom":var pe,Te,Re,Be;Ct=null!==(pe=S.mouseEvent)&&void 0!==pe&&pe.shiftKey||null!==(Te=S.touchEvent)&&void 0!==Te&&Te.shiftKey?{x:Z-B/2*ut,y:xt,width:H+B*ut,height:R+B}:null!==(Re=S.mouseEvent)&&void 0!==Re&&Re.altKey||null!==(Be=S.touchEvent)&&void 0!==Be&&Be.altKey?{x:Z,y:xt-B,width:H,height:R+2*B}:{x:Z,y:xt,width:H,height:R+B};break;case"rect-left":var qe,$e,Ve,Xe;Ct=null!==(qe=S.mouseEvent)&&void 0!==qe&&qe.shiftKey||null!==($e=S.touchEvent)&&void 0!==$e&&$e.shiftKey?{x:Z+I,y:xt+I/2/ut,width:H-I,height:R-I/ut}:null!==(Ve=S.mouseEvent)&&void 0!==Ve&&Ve.altKey||null!==(Xe=S.touchEvent)&&void 0!==Xe&&Xe.altKey?{x:Z+I,y:xt,width:H-2*I,height:R}:{x:Z+I,y:xt,width:H-I,height:R};break;case"rect-right":var ti,kt,j,i;Ct=null!==(ti=S.mouseEvent)&&void 0!==ti&&ti.shiftKey||null!==(kt=S.touchEvent)&&void 0!==kt&&kt.shiftKey?{x:Z,y:xt-I/2/ut,width:H+I,height:R+I/ut}:null!==(j=S.mouseEvent)&&void 0!==j&&j.altKey||null!==(i=S.touchEvent)&&void 0!==i&&i.altKey?{x:Z-I,y:xt,width:H+2*I,height:R}:{x:Z,y:xt,width:H+I,height:R};break;default:Ct={x:Z+ft-Pt,y:xt+V-ct,width:H,height:R}}Ct.width<0&&(Ct.width=0),Ct.height<0&&(Ct.height=0),Ct.x=(0,C.z)(Ct.x),Ct.y=(0,C.z)(Ct.y),Ct.width=(0,C.z)(Ct.width),Ct.height=(0,C.z)(Ct.height),Object.assign(st,Ct),Object.assign(K,(0,nt.xW)(X,st,K)),(0,vt.tD)(window.document.getElementById(A),K),(0,vt.AE)(Y,d)})(ct[0][0],ct[0][1],Pt.x,Pt.y),ue=!0},end:(Pt,ct)=>{ue&&Qt&&b.L.history.push([{type:"size",from:Qt,to:JSON.parse(JSON.stringify({id:A,size:st,attribute:K}))}])}})},q=S=>{S.length>1?(S=>{let it=999999,d=999999,Y=-999999,A=-999999;S.forEach(K=>{it=Math.min(it,K.size.x),d=Math.min(d,K.size.y),Y=Math.max(Y,K.size.x+K.size.width),A=Math.max(A,K.size.y+K.size.height)});let X=(0,vt.RY)(E.F.SELECT_GROUP,"g"),st=(0,nt.CE)(it,d,Y,A);(0,vt.Mo)(X,S,st).forEach(K=>{((S,it,d,Y,A)=>{let X=!1;null==S||S.addEventListener("touchstart",st=>{X=!0,U({touchEvent:st},it,d,Y,A)}),null==S||S.addEventListener("mousedown",st=>{if(0==st.button){if(X)return void(X=!1);U({mouseEvent:st},it,d,Y,A)}})})(K.element,K.posType,st,S,X)})})(S):1==S.length&&(S=>{let it=(0,vt.RY)(E.F.RESIZE_GROUP,"g");if(S.length>0){let d=S[0];(0,vt.AE)(it,d).forEach(Y=>{((S,it,d,Y)=>{let A=!1;null==S||S.addEventListener("touchstart",X=>{A=!0,w({touchEvent:X},it,d,Y)}),null==S||S.addEventListener("mousedown",X=>{if(0==X.button){if(A)return void(A=!1);w({mouseEvent:X},it,d,Y)}})})(Y.element,Y.posType,d,it)})}})(S)}},1026:(he,Dt,v)=>{v.d(Dt,{$:()=>A,t:()=>Y});var E=v(7873),b=v(1281),nt=v(6153),z=v(3477),vt=v(7945),C=v(3069),f=v(3073),L=v(1999),U=v(6407),k=v(6847),F=v(745),w=v(9173),q=v(6611),S=v(5970),it=v(4669),d=v(3617);const Y=(X,st,K)=>{var Z;if(st&&!(null!=K?K:window).document.getElementById(st))return;if(st){let H=(null!=K?K:window).document.getElementById(st);jQuery(H).find("#"+E.F.BACKGROUND_GROUP).empty();let R=(0,S.RY)(E.F.BACKGROUND_GROUP,"g",void 0,H);(0,S.I6)(R,X)}else{jQuery(q.L.target).find("#"+E.F.BACKGROUND_GROUP).empty();let H=(0,S.RY)(E.F.BACKGROUND_GROUP,"g",void 0,q.L.target);(0,S.I6)(H,X)}let xt=(H,R)=>{R=st&&R?`${st}-${R}`:null!=st?st:R,null==H||H.forEach(ut=>{let Ct=st?`${st}-${ut.id}`:ut.id;var Tt;if(ut.isdeleted)null===(Tt=(null!=K?K:window).document.getElementById(Ct))||void 0===Tt||Tt.remove();else switch(ut.type){case L.h.GROUP:(0,f.v)(Ct,{},R?(null!=K?K:window).document.getElementById(R):null),xt(ut.nodes,ut.id);break;case L.h.CIRCLE:(0,b.K)(Ct,{size:ut.size,attribute:ut.attribute},R?(null!=K?K:window).document.getElementById(R):null);break;case L.h.ELLIPSE:(0,nt.W)(Ct,{size:ut.size,attribute:ut.attribute},R?(null!=K?K:window).document.getElementById(R):null);break;case L.h.LINE:(0,C.q)(Ct,{size:ut.size,attribute:ut.attribute},R?(null!=K?K:window).document.getElementById(R):null);break;case L.h.RECT:(0,vt.a)(Ct,{size:ut.size,attribute:ut.attribute},R?(null!=K?K:window).document.getElementById(R):null);break;case L.h.POLYGON:(0,z.u)(Ct,{size:ut.size,attribute:ut.attribute},R?(null!=K?K:window).document.getElementById(R):null);break;case L.h.POLYLINE:(0,d.E)(Ct,{size:ut.size,attribute:ut.attribute},R?(null!=K?K:window).document.getElementById(R):null);break;case L.h.FOREIGNOBJECT:(0,F.$)(Ct,{size:ut.size,attribute:ut.attribute,style:ut.style,source:ut.source},R?(null!=K?K:window).document.getElementById(R):null);break;case L.h.IMAGE:(0,w.B)(Ct,{size:ut.size,attribute:ut.attribute,source:ut.source},R?(null!=K?K:window).document.getElementById(R):null);break;case L.h.TEXT:(0,k.L)(Ct,{size:ut.size,attribute:ut.attribute,source:ut.source},R?(null!=K?K:window).document.getElementById(R):null);break;case L.h.TSPAN:(0,it.M)(Ct,{size:ut.size,attribute:ut.attribute,source:ut.source},R?(null!=K?K:window).document.getElementById(R):null);break;case L.h.PATH:(0,U.X)(Ct,{size:ut.size,attribute:ut.attribute},R?(null!=K?K:window).document.getElementById(R):null)}})};xt(null==X||null===(Z=X.svg)||void 0===Z?void 0:Z.nodes)},A=(X,st)=>{var K;if(st&&!window.document.getElementById(st))return;let Z=(xt,H)=>{H=H?`${st}-${H}`:st,null==xt||xt.forEach(R=>{jQuery("#"+(st?`${st}-${R.id}`:R.id)).appendTo(H?window.document.getElementById(H):q.L.target),R.type==L.h.GROUP&&Z(R.nodes,R.id)})};Z(null==X||null===(K=X.svg)||void 0===K?void 0:K.nodes)}},1281:(he,Dt,v)=>{v.d(Dt,{K:()=>vt});var E=v(1999),b=v(6611),nt=v(9506),z=v(5970);const vt=(C,f,L)=>{let U=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},k=(null==f?void 0:f.attribute)||{fill:b.L.attribute.fill,stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(k,(0,nt.xW)(E.h.CIRCLE,U,k)),{nodeId:C,element:(0,z.fn)(C,E.h.CIRCLE,"circle",{size:U,attribute:k},L),size:U,attribute:k}}},6153:(he,Dt,v)=>{v.d(Dt,{W:()=>vt});var E=v(1999),b=v(6611),nt=v(9506),z=v(5970);const vt=(C,f,L)=>{let U=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},k=(null==f?void 0:f.attribute)||{fill:b.L.attribute.fill,stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(k,(0,nt.xW)(E.h.ELLIPSE,U,k)),{nodeId:C,element:(0,z.fn)(C,E.h.ELLIPSE,"ellipse",{size:U,attribute:k},L),size:U,attribute:k}}},745:(he,Dt,v)=>{v.d(Dt,{$:()=>z});var E=v(1999),b=v(9506),nt=v(5970);const z=(vt,C,f)=>{let L=(null==C?void 0:C.size)||{x:0,y:0,width:320,height:80},U=(null==C?void 0:C.attribute)||{};Object.assign(U,(0,b.xW)(E.h.FOREIGNOBJECT,L,U));let k=(null==C?void 0:C.source)||{type:"html",html:{htmlContent:""}},F=(null==C?void 0:C.style)||{};return{nodeId:vt,element:(0,nt.fn)(vt,E.h.FOREIGNOBJECT,"foreignObject",{size:L,attribute:U,style:F,source:k},f),size:L,attribute:U,style:F,source:k}}},3073:(he,Dt,v)=>{v.d(Dt,{v:()=>z});var E=v(1999),b=v(9506),nt=v(5970);const z=(C,f,L)=>{let U=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},k=(null==f?void 0:f.attribute)||{};return Object.assign(k,(0,b.xW)(E.h.GROUP,U,k)),{nodeId:C,element:(0,nt.fn)(C,E.h.GROUP,"g",{size:U,attribute:k},L),size:U,attribute:k}}},9173:(he,Dt,v)=>{v.d(Dt,{B:()=>z});var E=v(1999),b=v(9506),nt=v(5970);const z=(vt,C,f)=>{let L=(null==C?void 0:C.size)||{x:0,y:0,width:10,height:10},U=(null==C?void 0:C.attribute)||{preserveAspectRatio:"none"};Object.assign(U,(0,b.xW)(E.h.IMAGE,L,U));let k=(null==C?void 0:C.source)||{type:"image",image:{url:"../../assets/image-svg/logo.svg",path:"assets/image-svg/logo.svg",name:"logo.svg"}};return{nodeId:vt,element:(0,nt.fn)(vt,E.h.IMAGE,"image",{size:L,attribute:U,source:k},f),size:L,attribute:U,source:k}}},3069:(he,Dt,v)=>{v.d(Dt,{q:()=>vt});var E=v(1999),b=v(6611),nt=v(9506),z=v(5970);const vt=(C,f,L)=>{let U=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},k=(null==f?void 0:f.attribute)||{stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth,strokeLinecap:b.L.attribute.strokeLinecap};return Object.assign(k,(0,nt.xW)(E.h.LINE,U,k)),{nodeId:C,element:(0,z.fn)(C,E.h.LINE,"line",{size:U,attribute:k},L),size:U,attribute:k}}},6407:(he,Dt,v)=>{v.d(Dt,{X:()=>vt});var E=v(1999),b=v(6611),nt=v(9506),z=v(5970);const vt=(C,f,L)=>{let U=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},k=(null==f?void 0:f.attribute)||{stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(k,(0,nt.xW)(E.h.PATH,U,k)),{nodeId:C,element:(0,z.fn)(C,E.h.PATH,"path",{size:U,attribute:k},L),size:U,attribute:k}}},3477:(he,Dt,v)=>{v.d(Dt,{u:()=>vt});var E=v(1999),b=v(6611),nt=v(9506),z=v(5970);const vt=(C,f,L)=>{let U=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},k=(null==f?void 0:f.attribute)||{fill:b.L.attribute.fill,stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(k,(0,nt.xW)(E.h.POLYGON,U,k)),{nodeId:C,element:(0,z.fn)(C,E.h.POLYGON,"polygon",{size:U,attribute:k},L),size:U,attribute:k}}},3617:(he,Dt,v)=>{v.d(Dt,{E:()=>vt});var E=v(1999),b=v(6611),nt=v(9506),z=v(5970);const vt=(C,f,L)=>{let U=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},k=(null==f?void 0:f.attribute)||{fill:b.L.attribute.fill,stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(k,(0,nt.xW)(E.h.POLYLINE,U,k)),{nodeId:C,element:(0,z.fn)(C,E.h.POLYLINE,"polyline",{size:U,attribute:k},L),size:U,attribute:k}}},7945:(he,Dt,v)=>{v.d(Dt,{a:()=>vt});var E=v(1999),b=v(6611),nt=v(9506),z=v(5970);const vt=(C,f,L)=>{let U=(null==f?void 0:f.size)||{x:0,y:0,width:10,height:10},k=(null==f?void 0:f.attribute)||{fill:b.L.attribute.fill,stroke:b.L.attribute.stroke,strokeWidth:b.L.attribute.strokeWidth};return Object.assign(k,(0,nt.xW)(E.h.RECT,U,k)),{nodeId:C,element:(0,z.fn)(C,E.h.RECT,"rect",{size:U,attribute:k},L),size:U,attribute:k}}},6847:(he,Dt,v)=>{v.d(Dt,{L:()=>vt});var E=v(1999),b=v(6611),nt=v(9506),z=v(5970);const vt=(C,f,L)=>{let U=(null==f?void 0:f.size)||{x:0,y:0,width:320,height:80},k=(null==f?void 0:f.attribute)||{fill:b.L.attribute.stroke,fontFamily:b.L.attribute.fontFamily,fontSize:b.L.attribute.fontSize,textLength:b.L.attribute.textLength};Object.assign(k,(0,nt.xW)(E.h.TEXT,U,k));let F=(null==f?void 0:f.source)||{type:"text",text:{textContent:""}};return{nodeId:C,element:(0,z.fn)(C,E.h.TEXT,"text",{size:U,attribute:k,source:F},L),size:U,attribute:k,source:F}}},4669:(he,Dt,v)=>{v.d(Dt,{M:()=>vt});var E=v(1999),b=v(6611),nt=v(9506),z=v(5970);const vt=(C,f,L)=>{let U=(null==f?void 0:f.size)||{x:0,y:0,width:320,height:80},k=(null==f?void 0:f.attribute)||{fill:b.L.attribute.stroke,fontFamily:b.L.attribute.fontFamily,fontSize:b.L.attribute.fontSize,textLength:b.L.attribute.textLength};Object.assign(k,(0,nt.xW)(E.h.TSPAN,U,k));let F=(null==f?void 0:f.source)||{type:"text",text:{textContent:""}};return{nodeId:C,element:(0,z.fn)(C,E.h.TSPAN,"tspan",{size:U,attribute:k,source:F},L),size:U,attribute:k,source:F}}},9506:(he,Dt,v)=>{v.d(Dt,{CE:()=>nt,xW:()=>z});var E=v(1999),b=v(4896);const nt=(C,f,L,U,k)=>{let F={x:Math.min(C,L),y:Math.min(f,U),width:Math.abs(L-C)||1,height:Math.abs(U-f)||1};return null!=k&&k.ratio&&(F.width<=F.height?F.height=F.width*(null==k?void 0:k.ratio):F.width=F.height/(null==k?void 0:k.ratio)),Object.assign(F,{ratios:(null==k?void 0:k.ratios)||[[(C-F.x)/(F.width||1),(f-F.y)/(F.height||1)],[(L-F.x)/(F.width||1),(U-F.y)/(F.height||1)]]}),null!=k&&k.points&&(F.points=null==k?void 0:k.points),F},z=(C,f,L)=>{var U,k=(()=>{switch(C){case E.h.CIRCLE:return{cx:f.x+f.width/2,cy:f.y+f.height/2,r:Math.min(f.width/2,f.height/2)};case E.h.ELLIPSE:return{cx:f.x+f.width/2,cy:f.y+f.height/2,rx:f.width/2,ry:f.height/2};case E.h.LINE:{var F;let d={};return null===(F=f.ratios)||void 0===F||F.forEach((Y,A)=>{d[`x${A+1}`]=f.x+f.width*Y[0],d[`y${A+1}`]=f.y+f.height*Y[1]}),d}case E.h.RECT:case E.h.FOREIGNOBJECT:case E.h.IMAGE:return{x:f.x,y:f.y,width:f.width,height:f.height};case E.h.TEXT:case E.h.TSPAN:var w;return{x:f.x,y:f.y+(null!==(w=L.fontSize)&&void 0!==w?w:16)};case E.h.POLYGON:case E.h.POLYLINE:var q;if(null!==(q=f.ratios)&&void 0!==q&&q.length)return{points:(0,b.n9)(f,f.ratios)};break;case E.h.PATH:var S,it;if(null!==(S=f.ratioMaps)&&void 0!==S&&S.length)return{d:(0,b.$N)(f,f.ratioMaps)};if(null!==(it=f.points)&&void 0!==it&&it.length)return{d:`M ${(d=f.points)[0][0]} ${d[0][1]} L ${(d.map(Y=>[Y[0],Y[1]])||[]).map(Y=>Y.join(" ")).join(" ")}`}}var d;return{}})();return f.rotate?(k.transform=`rotate(${f.rotate})`,k.transformOrigin=`${f.x+f.width/2} ${f.y+f.height/2}`):null!==(U=L.transform)&&void 0!==U&&U.match(/^rotate/)&&(L.transform=null,L.transformOrigin=null),k}},2492:(he,Dt,v)=>{v.d(Dt,{z:()=>E});const E=(b,nt)=>{var z;return nt=null!==(z=nt)&&void 0!==z?z:100,Math.round((b+Number.EPSILON)*nt)/nt}},9841:(he,Dt,v)=>{v.d(Dt,{$:()=>nt});var E=v(6611),b=v(2492);const nt=z=>(0,b.z)(z/E.L.screen.scale)},6752:(he,Dt,v)=>{v.d(Dt,{E$:()=>f,Nx:()=>U,ZF:()=>C,ei:()=>vt,fu:()=>L});var E=v(6611),b=v(5970),nt=v(9506),z=v(2492);const vt=(k,F)=>{let{id:w,type:q,size:S,attribute:it}=k,d=JSON.parse(JSON.stringify({id:w,size:S,attribute:it}));S.x=(0,z.z)(F),Object.assign(it,(0,nt.xW)(q,S,it)),(0,b.tD)(window.document.getElementById(w),it),E.L.history.push([{type:"size",from:d,to:JSON.parse(JSON.stringify({id:w,size:S,attribute:it}))}])},C=(k,F)=>{let{id:w,type:q,size:S,attribute:it}=k,d=JSON.parse(JSON.stringify({id:w,size:S,attribute:it}));S.y=(0,z.z)(F),Object.assign(it,(0,nt.xW)(q,S,it)),(0,b.tD)(window.document.getElementById(w),it),E.L.history.push([{type:"size",from:d,to:JSON.parse(JSON.stringify({id:w,size:S,attribute:it}))}])},f=(k,F,w)=>{let{id:q,type:S,size:it,attribute:d}=k,Y=JSON.parse(JSON.stringify({id:q,size:it,attribute:d}));w&&(it.height=(0,z.z)(F*it.height/it.width)),it.width=(0,z.z)(F),Object.assign(d,(0,nt.xW)(S,it,d)),(0,b.tD)(window.document.getElementById(q),d),E.L.history.push([{type:"size",from:Y,to:JSON.parse(JSON.stringify({id:q,size:it,attribute:d}))}])},L=(k,F,w)=>{let{id:q,type:S,size:it,attribute:d}=k,Y=JSON.parse(JSON.stringify({id:q,size:it,attribute:d}));w&&(it.width=(0,z.z)(F*it.width/it.height)),it.height=(0,z.z)(F),Object.assign(d,(0,nt.xW)(S,it,d)),(0,b.tD)(window.document.getElementById(q),d),E.L.history.push([{type:"size",from:Y,to:JSON.parse(JSON.stringify({id:q,size:it,attribute:d}))}])},U=(k,F)=>{let{id:w,type:q,size:S,attribute:it}=k,d=JSON.parse(JSON.stringify({id:w,size:S,attribute:it}));S.rotate="number"==typeof F?(0,z.z)(F,100):void 0,Object.assign(it,(0,nt.xW)(q,S,it)),(0,b.tD)(window.document.getElementById(w),it),E.L.history.push([{type:"size",from:d,to:JSON.parse(JSON.stringify({id:w,size:S,attribute:it}))}])}},1308:(he,Dt,v)=>{v.d(Dt,{I:()=>C});var E=v(3603),b=v(6611);class nt{constructor(L){this._points=[],this._options=L}start(L){this._points.length=0,this._points.push([L.x,L.y]),this._options.start(L)}move(L){this._points.push([L.x,L.y]),this._options.move(L,this._points)}end(){this._options.end(this.offsetLast,this._points)}get offsetFirst(){return this._points.length>=1?{x:(L=this._points[0])[0],y:L[1]}:{x:0,y:0};var L}get offsetLast(){return this._points.length>=1?{x:(L=this._points[this._points.length-1])[0],y:L[1]}:{x:0,y:0};var L}}var z=v(6078);const C=(f,L,U,k,F)=>{var w,q,S;let it=null,d=0,Y=0;f.mouseEvent?(it=f.mouseEvent.target,d=f.mouseEvent.offsetX,Y=f.mouseEvent.offsetY):f.touchEvent&&(it=f.touchEvent.target,f.touchEvent.touches.length&&(d=f.touchEvent.touches[0].clientX,Y=f.touchEvent.touches[0].clientY));let A=null!=U?U:b.L.screen.scale,X=null!=k?k:b.L.screen.dislocation,st=null!=F?F:b.L.screen.offset,K=()=>{};var Z=new nt({start:null!==(w=null==L?void 0:L.start)&&void 0!==w?w:K,move:null!==(q=null==L?void 0:L.move)&&void 0!==q?q:K,end:null!==(S=null==L?void 0:L.end)&&void 0!==S?S:K});f.mouseEvent?Z.start((0,z.D)({x:d,y:Y},A,X,{x:0,y:0})):f.touchEvent&&Z.start((0,z.D)({x:d,y:Y},A,X,st));let xt=Mt=>{Z.move((0,z.D)({x:Mt.clientX,y:Mt.clientY},A,X,st))},H=Mt=>{Z.end(),[E.P.SHAPE,E.P.FOREIGNOBJECT,E.P.IMAGE,E.P.TEXT].includes(b.L.pointer.pointer_type)&&(Mt.shiftKey||(b.L.pointer.pointer_type=E.P.POINTER))},R=Mt=>{Mt.touches.length&&xt({clientX:Mt.touches[0].clientX,clientY:Mt.touches[0].clientY})},ut=Mt=>{H({shiftKey:Mt.shiftKey,ctrlKey:Mt.ctrlKey,altKey:Mt.altKey}),window.removeEventListener("touchmove",R,!1),window.removeEventListener("touchend",ut,!1)},Ct=Mt=>{0==Mt.button&&xt({clientX:Mt.clientX,clientY:Mt.clientY})},Tt=Mt=>{0==Mt.button&&(H({shiftKey:Mt.shiftKey,ctrlKey:Mt.ctrlKey,altKey:Mt.altKey}),window.removeEventListener("mousemove",Ct,!1),window.removeEventListener("mouseup",Tt,!1))};if(f.mouseEvent)window.addEventListener("mousemove",Ct,!1),window.addEventListener("mouseup",Tt,!1);else if(f.touchEvent){var Qt;window.addEventListener("touchmove",R,!1),window.addEventListener("touchend",ut,!1),null===(Qt=it)||void 0===Qt||Qt.addEventListener("touchmove",function(Mt){Mt.preventDefault()})}}},6078:(he,Dt,v)=>{v.d(Dt,{D:()=>b});var E=v(2492);const b=(nt,z,vt,C)=>(nt.x-=C.x,nt.y-=C.y,nt.x/=z,nt.y/=z,nt.x-=vt.x,nt.y-=vt.y,nt.x=(0,E.z)(nt.x),nt.y=(0,E.z)(nt.y),nt)},5619:(he,Dt,v)=>{v.d(Dt,{J:()=>ht,I:()=>Xt});var E=v(7873),b=v(6611),nt=v(1999),z=v(334),vt=v(8946),C=v(7657),f=v(6769),L=v(3591),k=v(6847),F=v(3073);var d=v(7050),Y=v(9173),A=v(2492);const X=(P,h,N)=>{var rt,lt,G,x;let W=1,at=new Image;at.onload=()=>{var yt,_t,St,et;W=(0,A.z)(at.naturalWidth/at.naturalHeight,100);let mt=0,At=0,Rt=0,Gt=0;var qt,ie,ye,le;W>=1?(Rt=Math.min(at.naturalWidth,null!==(qt=null===(ie=ht.slide.svg)||void 0===ie||null===(ie=ie.viewBox)||void 0===ie?void 0:ie.width)&&void 0!==qt?qt:0),Gt=Rt/W):(Gt=Math.min(at.naturalHeight,null!==(ye=null===(le=ht.slide.svg)||void 0===le||null===(le=le.viewBox)||void 0===le?void 0:le.height)&&void 0!==ye?ye:0),Rt=Gt/W),mt=((null!==(yt=null===(_t=ht.slide.svg)||void 0===_t||null===(_t=_t.viewBox)||void 0===_t?void 0:_t.width)&&void 0!==yt?yt:0)-Rt)/2,At=((null!==(St=null===(et=ht.slide.svg)||void 0===et||null===(et=et.viewBox)||void 0===et?void 0:et.height)&&void 0!==St?St:0)-Gt)/2,h.size={x:mt,y:At,width:Rt,height:Gt},st(h,N)},at.onerror=yt=>{console.error(`ImgSrc load failed -> ${JSON.stringify(h.source)}`,yt)},at.src=(null!==(rt=h.source)&&void 0!==rt&&rt.path?(null===(lt=b.L.config)||void 0===lt?void 0:lt.readfileuploadurl)+(null===(G=h.source)||void 0===G?void 0:G.path):null===(x=h.source)||void 0===x?void 0:x.url)||""},st=(P,h)=>{if(P.slideStatus!=ht.slideStatus)return void h();let{element:N}=(0,Y.B)(Math.ceil(1e9*Math.random()),{size:P.size,source:{type:"image",image:null==P?void 0:P.source}});setTimeout(()=>{null==N||N.remove(),h()},3e3)};var K=v(5970);const Z=(P,h,N)=>{var rt,lt,G,x;let W=new Image;W.onload=()=>{xt(P,{width:W.naturalWidth,height:W.naturalHeight},h,N)},W.onerror=at=>{console.error(`ImgSrc load failed -> ${JSON.stringify(h.source)}`,at),N()},W.src=(null!==(rt=h.source)&&void 0!==rt&&rt.path?(null===(lt=b.L.config)||void 0===lt?void 0:lt.readfileuploadurl)+(null===(G=h.source)||void 0===G?void 0:G.path):null===(x=h.source)||void 0===x?void 0:x.url)||""},xt=(P,h,N,rt)=>{if(N.slideStatus!=ht.slideStatus)return void rt();let lt=(0,A.z)(h.width/h.height,100),G=0,x=0,W=0,at=0;lt>=1?(W=h.width,W=Math.max(W,40),W=Math.min(W,40),at=W/lt):(at=h.height,at=Math.max(at,40),at=Math.min(at,40),W=at/lt);let{size:St}=P;G=St.x+St.width-W/2,x=St.y-at/2;let et=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,Y.B)(`icon-${P.id}`,{size:{x:G,y:x,width:W,height:at},source:{type:"image",image:null==N?void 0:N.source}},et),setTimeout(()=>{rt()},3e3)},H=(P,h,N)=>{var rt,lt,G,x,W,at,yt;if(h.slideStatus!=ht.slideStatus)return void N();if(!(null!==(rt=h.source)&&void 0!==rt&&rt.path||null!==(lt=h.source)&&void 0!==lt&&lt.url))return console.warn(`${P.id} -> audio no source!`),void N();var _t=jQuery("#"+P.id);let St=null!==(G=h.iteration)&&void 0!==G?G:0;if(St<0&&(N(),N=function(){}),!(_t.data("audio-running")&&St<0)){_t.data("audio-running",!0);var et=new Audio;return et.autoplay=!0,et.loop=0!=St,et.preload="auto",et.controls=!0,et.setAttributeNode(document.createAttribute("playsinline")),et.addEventListener("canplay",function(){var mt=et.play();mt&&mt.then(function(At){_t.data("audio-running",!0)}).catch(function(At){_t.data("audio-running",!1),h.slideStatus===ht.slideStatus&&N()})}),et.addEventListener("timeupdate",function(){var At;h.slideStatus!==ht.slideStatus&&((At=this).pause(),At.remove(),_t.data("audio-running",!1))}),et.addEventListener("canplaythrough",function(){this.loop&&(St>0?St--:0==St&&(this.loop=!1))}),et.addEventListener("play",function(){}),et.addEventListener("pause",function(){}),et.addEventListener("ended",function(){this.remove(),_t.data("audio-running",!1),h.slideStatus===ht.slideStatus&&N()}),et.onerror=function(){this.remove(),_t.data("audio-running",!1),h.slideStatus===ht.slideStatus&&N()},et.src=(null!==(x=h.source)&&void 0!==x&&x.path?(null===(W=b.L.config)||void 0===W?void 0:W.readfileuploadurl)+(null===(at=h.source)||void 0===at?void 0:at.path):null===(yt=h.source)||void 0===yt?void 0:yt.url)||"",et}};var R=v(2837);const ue=(P,h)=>{var N;null===(N=h.test)||void 0===N||null===(N=N.answer)||void 0===N||null===(N=N.matching)||void 0===N||N.filter(rt=>rt.id==P.id).forEach(rt=>rt.value=""),jQuery(`#node-${P.id}`).remove()},Pt=(P,h,N,rt,lt,G)=>{var x,W,at,yt,_t,St,et,mt;lt.iscorrect?(null!==(x=h.test)&&void 0!==x&&null!==(x=x.audiotrue)&&void 0!==x&&x.path&&H(P,{source:(0,R.U)(null===(at=h.test)||void 0===at?void 0:at.audiotrue),iteration:0,nodeStatus:N,slideStatus:rt},G),null!==(W=h.test)&&void 0!==W&&null!==(W=W.effecttrue)&&void 0!==W&&W.path&&X(0,{source:(0,R.U)(null===(yt=h.test)||void 0===yt?void 0:yt.effecttrue),iteration:0,nodeStatus:N,slideStatus:rt},G)):(null!==(_t=h.test)&&void 0!==_t&&null!==(_t=_t.audiofalse)&&void 0!==_t&&_t.path&&H(P,{source:(0,R.U)(null===(et=h.test)||void 0===et?void 0:et.audiofalse),iteration:0,nodeStatus:N,slideStatus:rt},G),null!==(St=h.test)&&void 0!==St&&null!==(St=St.effectfalse)&&void 0!==St&&St.path&&X(0,{source:(0,R.U)(null===(mt=h.test)||void 0===mt?void 0:mt.effectfalse),iteration:0,nodeStatus:N,slideStatus:rt},G));ct(h,N,rt,G)},ct=(P,h,N,rt)=>{var lt;switch(null===(lt=P.test)||void 0===lt?void 0:lt.type){case"truefalse":{var G,x;let{value:le,iscorrect:oe}=null!==(G=null==P||null===(x=P.test)||void 0===x||null===(x=x.answer)||void 0===x?void 0:x.truefalse)&&void 0!==G?G:{};if(le){let me=ht.findNode(le);var W,at,yt,_t;oe?null!==(W=P.test)&&void 0!==W&&null!==(W=W.icontrue)&&void 0!==W&&W.path&&Z(me,{source:(0,R.U)(null===(at=P.test)||void 0===at?void 0:at.icontrue),iteration:0,nodeStatus:h,slideStatus:N},rt):null!==(yt=P.test)&&void 0!==yt&&null!==(yt=yt.iconfalse)&&void 0!==yt&&yt.path&&Z(me,{source:(0,R.U)(null===(_t=P.test)||void 0===_t?void 0:_t.iconfalse),iteration:0,nodeStatus:h,slideStatus:N},rt)}break}case"singlechoice":{var St,et;let{value:le,iscorrect:oe}=null!==(St=null==P||null===(et=P.test)||void 0===et||null===(et=et.answer)||void 0===et?void 0:et.singlechoice)&&void 0!==St?St:{};if(le){let me=ht.findNode(le);var mt,At,Rt,Gt;oe?null!==(mt=P.test)&&void 0!==mt&&null!==(mt=mt.icontrue)&&void 0!==mt&&mt.path&&Z(me,{source:(0,R.U)(null===(At=P.test)||void 0===At?void 0:At.icontrue),iteration:0,nodeStatus:h,slideStatus:N},rt):null!==(Rt=P.test)&&void 0!==Rt&&null!==(Rt=Rt.iconfalse)&&void 0!==Rt&&Rt.path&&Z(me,{source:(0,R.U)(null===(Gt=P.test)||void 0===Gt?void 0:Gt.iconfalse),iteration:0,nodeStatus:h,slideStatus:N},rt)}break}case"multichoice":var qt;null==P||null===(qt=P.test)||void 0===qt||null===(qt=qt.answer)||void 0===qt||null===(qt=qt.multichoice)||void 0===qt||qt.forEach(le=>{let{value:oe,iscorrect:me}=le;if(oe){let Te=ht.findNode(oe);var Pe,Le,Ee,pe;me?null!==(Pe=P.test)&&void 0!==Pe&&null!==(Pe=Pe.icontrue)&&void 0!==Pe&&Pe.path&&Z(Te,{source:(0,R.U)(null===(Le=P.test)||void 0===Le?void 0:Le.icontrue),iteration:0,nodeStatus:h,slideStatus:N},rt):null!==(Ee=P.test)&&void 0!==Ee&&null!==(Ee=Ee.iconfalse)&&void 0!==Ee&&Ee.path&&Z(Te,{source:(0,R.U)(null===(pe=P.test)||void 0===pe?void 0:pe.iconfalse),iteration:0,nodeStatus:h,slideStatus:N},rt)}});break;case"fill":var ie;null==P||null===(ie=P.test)||void 0===ie||null===(ie=ie.answer)||void 0===ie||null===(ie=ie.fill)||void 0===ie||ie.forEach(le=>{let{id:oe,value:Pe,iscorrect:Le}=le;if(Pe){let Be=ht.findNode(oe);var Ee,pe,Te,Re;Le?null!==(Ee=P.test)&&void 0!==Ee&&null!==(Ee=Ee.icontrue)&&void 0!==Ee&&Ee.path&&Z(Be,{source:(0,R.U)(null===(pe=P.test)||void 0===pe?void 0:pe.icontrue),iteration:0,nodeStatus:h,slideStatus:N},rt):null!==(Te=P.test)&&void 0!==Te&&null!==(Te=Te.iconfalse)&&void 0!==Te&&Te.path&&Z(Be,{source:(0,R.U)(null===(Re=P.test)||void 0===Re?void 0:Re.iconfalse),iteration:0,nodeStatus:h,slideStatus:N},rt)}});break;case"matching":var ye;null==P||null===(ye=P.test)||void 0===ye||null===(ye=ye.answer)||void 0===ye||null===(ye=ye.matching)||void 0===ye||ye.forEach(le=>{let{id:oe,key:me,value:Pe}=le;if(Pe){let Re=ht.findNode(oe);var Le,Ee,pe,Te;me==Pe?null!==(Le=P.test)&&void 0!==Le&&null!==(Le=Le.icontrue)&&void 0!==Le&&Le.path&&Z(Re,{source:(0,R.U)(null===(Ee=P.test)||void 0===Ee?void 0:Ee.icontrue),iteration:0,nodeStatus:h,slideStatus:N},rt):null!==(pe=P.test)&&void 0!==pe&&null!==(pe=pe.iconfalse)&&void 0!==pe&&pe.path&&Z(Re,{source:(0,R.U)(null===(Te=P.test)||void 0===Te?void 0:Te.iconfalse),iteration:0,nodeStatus:h,slideStatus:N},rt)}})}},ft=(P,h,N,rt)=>{var lt,G,x,W,at,yt,St,mt,et;null!==(lt=h.animate)&&void 0!==lt&&lt.value&&(0,d.a)(h,N.nodeStatus,N.slideStatus),null!==(G=h.interactive)&&void 0!==G&&G.show?(console.log(`node(${h.id}) | nodeStatus(${N.nodeStatus}) | slideStatus(${N.slideStatus}) | show`),((P,h,N,rt)=>{var lt,G,x;let W={total:0,counter:0},{triggershow:at,triggerrun:yt,triggerhide:_t,action:St,audio:et}=null!==(lt=null===(G=P.interactive)||void 0===G?void 0:G.show)&&void 0!==lt?lt:{};if(console.log(`node(${P.id}) | nodeStatus(${h}) | slideStatus(${N}) | show`),at){let{id:At,ids:Rt,time:Gt,async:qt}=at;"asynctrue"==qt?setTimeout(()=>{(0,L.GD)({id:At,ids:Rt,nodeStatus:h,slideStatus:N})}):"time"==qt&&setTimeout(()=>{(0,L.GD)({id:At,ids:Rt,nodeStatus:h,slideStatus:N})},1e3*(null!=Gt?Gt:0))}if(yt){let{id:At,ids:Rt,time:Gt,async:qt}=yt;"asynctrue"==qt?setTimeout(()=>{(0,L.MF)({id:At,ids:Rt,nodeStatus:h,slideStatus:N})}):"time"==qt&&setTimeout(()=>{(0,L.MF)({id:At,ids:Rt,nodeStatus:h,slideStatus:N})},1e3*(null!=Gt?Gt:0))}if(_t){let{id:At,ids:Rt,time:Gt,async:qt}=_t;"asynctrue"==qt?setTimeout(()=>{(0,L.vi)({id:At,ids:Rt,nodeStatus:h,slideStatus:N})}):"time"==qt&&setTimeout(()=>{(0,L.vi)({id:At,ids:Rt,nodeStatus:h,slideStatus:N})},1e3*(null!=Gt?Gt:0))}let mt=()=>{setTimeout(()=>{if(W.counter>=W.total){if(rt&&rt(),at){let{id:At,ids:Rt,async:Gt}=at;(!Gt||"asyncfalse"==Gt)&&(0,L.GD)({id:At,ids:Rt,nodeStatus:h,slideStatus:N})}if(yt){let{id:At,ids:Rt,async:Gt}=yt;(!Gt||"asyncfalse"==Gt)&&(0,L.MF)({id:At,ids:Rt,nodeStatus:h,slideStatus:N})}if(_t){let{id:At,ids:Rt,async:Gt}=_t;(!Gt||"asyncfalse"==Gt)&&(0,L.vi)({id:At,ids:Rt,nodeStatus:h,slideStatus:N})}}})};if(null!=St&&St.value){W.total+=1;let At=()=>{W.counter+=1,mt()};switch(null==St?void 0:St.value){case"hide":jQuery("#"+P.id).addClass("hide"),At();break;case"points":{let{points:Rt,time:Gt,iteration:qt,finish:ie}=St;(0,C.c)(P.id,{node:P,points:Rt,time:Gt,iteration:qt,finish:ie,nodeStatus:h,slideStatus:N},At);break}default:{let{value:Rt,time:Gt,iteration:qt,finish:ie}=St;(0,vt.h)(P.id,{node:P,value:Rt,time:Gt,iteration:qt,finish:ie,nodeStatus:h,slideStatus:N},At);break}}}if(null!=et&&null!==(x=et.source)&&void 0!==x&&x.path){W.total+=1;let At=()=>{W.counter+=1,mt()},Rt=(0,f.d)(P.id,et,W,{nodeStatus:h,slideStatus:N},At);-1==(null==et?void 0:et.iteration)&&jQuery("#"+P.id).click(Gt=>{Gt.preventDefault(),Rt&&(Rt.volume=Rt.volume>=1?0:Rt.volume+.25),console.log(null==Rt?void 0:Rt.volume)})}W.total||mt()})(h,N.nodeStatus,N.slideStatus,rt)):rt&&rt(),null!==(x=h.interactive)&&void 0!==x&&x.click&&(mt=null===(St=h.interactive)||void 0===St?void 0:St.click,Object.keys(null!=mt?mt:{}).map(Rt=>mt[Rt]?1:0).includes(1)&&jQuery("#"+h.id).addClass("interactive-click"),jQuery("#"+h.id).click(mt=>{mt.preventDefault(),N.nodeStatus=ht.refreshNodeStatus(),console.log(`node(${h.id}) | nodeStatus(${N.nodeStatus}) | slideStatus(${N.slideStatus}) | click`),(0,z.J)(h,N.nodeStatus,N.slideStatus)})),null!==(W=h.variable)&&void 0!==W&&W.input&&jQuery("#"+h.id).on("change","input,textarea",mt=>{mt.preventDefault(),((P,h,N)=>{var rt,lt;b.L.variable.setValue(null!==(rt=null===(lt=h.variable)||void 0===lt||null===(lt=lt.input)||void 0===lt?void 0:lt.variable)&&void 0!==rt?rt:"",P),(P=>{var h;let N=(rt,lt)=>{null==rt||rt.forEach(G=>{switch(G.type){case nt.h.GROUP:(0,F.v)(G.id,{},lt?window.document.getElementById(lt):null),N(G.nodes,G.id);break;case nt.h.POLYGON:break;case nt.h.TEXT:(0,k.L)(G.id,{size:G.size,attribute:G.attribute,source:G.source},lt?window.document.getElementById(lt):null)}})};N(null===(h=P.svg)||void 0===h?void 0:h.nodes)})(N)})(mt.target.value,h,P)}),null!==(at=h.variable)&&void 0!==at&&at.click&&(null!==(et=h.variable)&&void 0!==et&&null!==(et=et.click)&&void 0!==et&&et.variable&&jQuery("#"+h.id).addClass("variable-click"),jQuery("#"+h.id).click(mt=>{mt.preventDefault(),((P,h)=>{var N;b.L.variable.setValueOperator(null===(N=P.variable)||void 0===N?void 0:N.click),(P=>{var h;let N=(rt,lt)=>{null==rt||rt.forEach(G=>{switch(G.type){case nt.h.GROUP:(0,F.v)(G.id,{},lt?window.document.getElementById(lt):null),N(G.nodes,G.id);break;case nt.h.POLYGON:break;case nt.h.TEXT:(0,k.L)(G.id,{size:G.size,attribute:G.attribute,source:G.source},lt?window.document.getElementById(lt):null)}})};N(null===(h=P.svg)||void 0===h?void 0:h.nodes)})(h)})(h,P)})),"test"==(null===(yt=h.source)||void 0===yt?void 0:yt.type)&&((P,h)=>{var N;let rt=()=>{};switch(null===(N=P.source)||void 0===N||null===(N=N.test)||void 0===N?void 0:N.type){case"truefalse":{jQuery("#"+P.id).click(x=>{x.preventDefault(),((P,h,N,rt,lt)=>{var G,x;let W=null===(G=P.source)||void 0===G||null===(G=G.test)||void 0===G||null===(G=G.truefalse)||void 0===G?void 0:G.iscorrect;h.test?h.test.answer?h.test.answer.truefalse={value:P.id,iscorrect:W}:h.test.answer={truefalse:{value:P.id,iscorrect:W}}:h.test={answer:{truefalse:{value:P.id,iscorrect:W}}},null!==(x=h.svg)&&void 0!==x&&x.nodes.find(yt=>{var _t;return"submit"==(null===(_t=yt.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)})||Pt(P,h,N,rt,{iscorrect:W},lt);let at=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(at,h,P)})(P,h,ht.nodeStatus,ht.slideStatus,rt)});let G=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(G,h,P);break}case"singlechoice":{jQuery("#"+P.id).click(x=>{x.preventDefault(),((P,h,N,rt,lt)=>{var G,x;let W=null===(G=P.source)||void 0===G||null===(G=G.test)||void 0===G||null===(G=G.singlechoice)||void 0===G?void 0:G.iscorrect;h.test?h.test.answer?h.test.answer.singlechoice={value:P.id,iscorrect:W}:h.test.answer={singlechoice:{value:P.id,iscorrect:W}}:h.test={answer:{singlechoice:{value:P.id,iscorrect:W}}},null!==(x=h.svg)&&void 0!==x&&x.nodes.find(yt=>{var _t;return"submit"==(null===(_t=yt.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)})||Pt(P,h,N,rt,{iscorrect:W},lt);let at=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(at,h,P)})(P,h,ht.nodeStatus,ht.slideStatus,rt)});let G=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(G,h,P);break}case"multichoice":{jQuery("#"+P.id).click(x=>{x.preventDefault(),((P,h,N,rt,lt)=>{var G,x;let W=null===(G=P.source)||void 0===G||null===(G=G.test)||void 0===G||null===(G=G.multichoice)||void 0===G?void 0:G.iscorrect;h.test?h.test.answer?h.test.answer.multichoice?h.test.answer.multichoice.find(yt=>yt.value==P.id)?h.test.answer.multichoice=h.test.answer.multichoice.filter(yt=>yt.value!=P.id):h.test.answer.multichoice.push({value:P.id,iscorrect:W}):h.test.answer.multichoice=[{value:P.id,iscorrect:W}]:h.test.answer={multichoice:[{value:P.id,iscorrect:W}]}:h.test={answer:{multichoice:[{value:P.id,iscorrect:W}]}},null!==(x=h.svg)&&void 0!==x&&x.nodes.find(yt=>{var _t;return"submit"==(null===(_t=yt.source)||void 0===_t||null===(_t=_t.test)||void 0===_t?void 0:_t.type)})||Pt(P,h,N,rt,{iscorrect:W},lt);let at=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(at,h,P)})(P,h,ht.nodeStatus,ht.slideStatus,rt)});let G=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(G,h,P);break}case"fill":{var lt;jQuery("#"+P.id).on("keyup",'input[type="text"]',x=>{var W;let at=jQuery("<div/>").css({"font-size":jQuery(x.target).css("font-size"),visibility:"hidden",float:"left"}).text(x.target.value).appendTo(window.document.body);jQuery(x.target).css({width:(null!==(W=at.width())&&void 0!==W?W:0)+30})}).on("keypress",'input[type="text"]',x=>{13===(x.keyCode||x.charCode||x.which)&&(x.preventDefault(),x.stopPropagation(),jQuery(x.target).blur())}).on("change",'input[type="text"]',x=>{var W,at;let yt=null===(W=x.target)||void 0===W?void 0:W.getAttribute("data-key"),_t=null===(at=x.target)||void 0===at||null===(at=at.value)||void 0===at?void 0:at.trim();jQuery("#"+P.id).find(`input[type="text"][data-key="${yt}"]`).val(_t),((P,h,N,rt,lt,G)=>{var x,W,at,yt;let{value:_t}=null!==(x=null===(W=P.source)||void 0===W||null===(W=W.test)||void 0===W||null===(W=W.fill)||void 0===W?void 0:W.find(mt=>mt.key==`[[${lt.key}]]`))&&void 0!==x?x:{},St=_t&&_t.map(mt=>null==mt?void 0:mt.toLocaleLowerCase()).includes(null===(at=lt.value)||void 0===at?void 0:at.toLocaleLowerCase());lt.iscorrect=St,h.test?h.test.answer?h.test.answer.fill?h.test.answer.fill.find(mt=>mt.key==lt.key)?h.test.answer.fill.filter(mt=>mt.key==lt.key).forEach(mt=>{mt.value=lt.value,mt.iscorrect=lt.iscorrect}):h.test.answer.fill.push(lt):h.test.answer.fill=[lt]:h.test.answer={fill:[lt]}:h.test={answer:{fill:[lt]}};let et=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(et,h,P),null!==(yt=h.svg)&&void 0!==yt&&yt.nodes.find(mt=>{var At;return"submit"==(null===(At=mt.source)||void 0===At||null===(At=At.test)||void 0===At?void 0:At.type)})||Pt(P,h,N,rt,{iscorrect:St},G)})(P,h,ht.nodeStatus,ht.slideStatus,{id:P.id,key:yt,value:_t},rt)}),null!==(lt=h.test)&&void 0!==lt&&lt.showselection||jQuery("#"+P.id).addClass("hide-selection");let G=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(G,h,P);break}case"matching-empty":{jQuery("#"+P.id).on("touchmove",".ondrag-item",function(x){x.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(x){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${P.size.height/P.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${x.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(x){var W;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(W=h.test)&&void 0!==W&&W.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection"),ue(P,h)},drag:function(x){},dragend:function(x){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${P.id} .ondrop-here`).kendoDropTarget({dragenter:function(x){x.dropTarget.hasClass("actived")&&x.dropTarget.addClass("focused")},dragleave:function(x){x.dropTarget.hasClass("actived")&&x.dropTarget.removeClass("focused")},drop:function(x){if(!x.dropTarget.hasClass("actived"))return;x.dropTarget.removeClass("focused");let W=x.dropTarget,at=x.draggable.currentTarget;W.is(":empty")||W.find(".ondrag-item").appendTo($('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').first()),at.appendTo(W);let yt=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(yt,h,P),((P,h,N,rt,lt,G)=>{var x,W,at;let{key:yt}=null!==(x=null===(W=P.source)||void 0===W||null===(W=W.test)||void 0===W?void 0:W.matching)&&void 0!==x?x:{key:"KIEN"},_t=lt.key==yt;ue(P,h);let St={id:P.id,key:null!=yt?yt:"",value:lt.key};h.test?h.test.answer?h.test.answer.matching?h.test.answer.matching.find(et=>et.id==St.id)?h.test.answer.matching.filter(et=>et.id==St.id).forEach(et=>{et.key=St.key,et.value=St.value}):h.test.answer.matching.push(St):h.test.answer.matching=[St]:h.test.answer={matching:[St]}:h.test={answer:{matching:[St]}},null!==(at=h.svg)&&void 0!==at&&at.nodes.find(et=>{var mt;return"submit"==(null===(mt=et.source)||void 0===mt||null===(mt=mt.test)||void 0===mt?void 0:mt.type)})||Pt(P,h,N,rt,{iscorrect:_t},G)})(P,h,ht.nodeStatus,ht.slideStatus,{key:at.data("key")},rt)}});let G=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(G,h,P);break}case"matching-content":{jQuery("#"+P.id).on("touchmove",".ondrag-item",function(x){x.preventDefault()}).kendoDraggable({filter:".ondrag-item",hint:function(x){return`<div class="ondrag-hint" style="transform: translateX(100%) translateY(100%);width:64px;height:${P.size.height/P.size.width*64}px;border-radius:8px;border:1px dashed #DADADA;padding:8px;box-sizing:content-box;background-color:rgba(255,255,255,0.8);">${x.prop("outerHTML")}</div>`.replace(/\s+/g," ")},dragstart:function(x){var W;jQuery('svg foreignObject .ondrop-here[data-type2="matching-content"]:empty').addClass("actived"),jQuery('svg foreignObject .ondrop-here[data-type2="matching-empty"]').addClass("actived"),null!==(W=h.test)&&void 0!==W&&W.showselection||jQuery('svg foreignObject .ondrop-here[data-type="matching"]').addClass("hide-selection")},drag:function(x){},dragend:function(x){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")},dragcancel:function(){jQuery("svg foreignObject .ondrop-here").removeClass("actived"),jQuery("svg foreignObject .ondrop-here").removeClass("focused")}}),jQuery(`#${P.id} .ondrop-here`).kendoDropTarget({dragenter:function(x){x.dropTarget.hasClass("actived")&&x.dropTarget.addClass("focused")},dragleave:function(x){x.dropTarget.hasClass("actived")&&x.dropTarget.removeClass("focused")},drop:function(x){if(!x.dropTarget.hasClass("actived"))return;x.dropTarget.removeClass("focused");let W=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(W,h,P),x.draggable.currentTarget.appendTo(x.dropTarget),ct(h,ht.nodeStatus,ht.slideStatus,rt)}});let G=(0,K.RY)(E.F.TEST_GROUP,"g",void 0,b.L.target);(0,K.kE)(G,h,P);break}case"speech":break;case"submit":jQuery("#"+P.id).click(G=>{G.preventDefault(),((P,h,N,rt,lt)=>{var G,x,W,at,yt;let _t;var St;if(null!=h&&null!==(G=h.test)&&void 0!==G&&null!==(G=G.answer)&&void 0!==G&&G.truefalse)_t=null==h||null===(St=h.test)||void 0===St||null===(St=St.answer)||void 0===St||null===(St=St.truefalse)||void 0===St?void 0:St.iscorrect;else if(null!=h&&null!==(x=h.test)&&void 0!==x&&null!==(x=x.answer)&&void 0!==x&&x.singlechoice){var et;_t=null==h||null===(et=h.test)||void 0===et||null===(et=et.answer)||void 0===et||null===(et=et.singlechoice)||void 0===et?void 0:et.iscorrect}else if(null!=h&&null!==(W=h.test)&&void 0!==W&&null!==(W=W.answer)&&void 0!==W&&W.multichoice){var mt,At,Rt;_t=1==[null==h||null===(mt=h.test)||void 0===mt||null===(mt=mt.answer)||void 0===mt||null===(mt=mt.multichoice)||void 0===mt?void 0:mt.length,null==h||null===(At=h.test)||void 0===At||null===(At=At.answer)||void 0===At||null===(At=At.multichoice)||void 0===At||null===(At=At.map(le=>le.iscorrect?1:0))||void 0===At?void 0:At.reduce((le,oe)=>le+oe),null==h||null===(Rt=h.svg)||void 0===Rt||null===(Rt=Rt.nodes)||void 0===Rt||null===(Rt=Rt.filter(le=>{var oe,me;return"multichoice"==(null===(oe=le.source)||void 0===oe||null===(oe=oe.test)||void 0===oe?void 0:oe.type)&&(null===(me=le.source)||void 0===me||null===(me=me.test)||void 0===me||null===(me=me.multichoice)||void 0===me?void 0:me.iscorrect)}))||void 0===Rt?void 0:Rt.length].filter((le,oe,me)=>me.indexOf(le)==oe).length}else if(null!=h&&null!==(at=h.test)&&void 0!==at&&null!==(at=at.answer)&&void 0!==at&&at.fill){var Gt,qt;_t=(null==h||null===(Gt=h.test)||void 0===Gt||null===(Gt=Gt.answer)||void 0===Gt||null===(Gt=Gt.fill)||void 0===Gt||null===(Gt=Gt.map(le=>le.iscorrect?1:0))||void 0===Gt?void 0:Gt.reduce((le,oe)=>le+oe))==(null===(qt=h.svg)||void 0===qt||null===(qt=qt.nodes)||void 0===qt||null===(qt=qt.filter(le=>{var oe;return"fill"==(null===(oe=le.source)||void 0===oe||null===(oe=oe.test)||void 0===oe?void 0:oe.type)}))||void 0===qt?void 0:qt.length)}else if(null!=h&&null!==(yt=h.test)&&void 0!==yt&&null!==(yt=yt.answer)&&void 0!==yt&&yt.matching){var ie,ye;_t=(null===(ie=h.svg)||void 0===ie||null===(ie=ie.nodes)||void 0===ie||null===(ie=ie.filter(le=>{var oe;return"matching-empty"==(null===(oe=le.source)||void 0===oe||null===(oe=oe.test)||void 0===oe?void 0:oe.type)}))||void 0===ie?void 0:ie.length)==((null==h||null===(ye=h.test)||void 0===ye||null===(ye=ye.answer)||void 0===ye?void 0:ye.matching)||[]).map(le=>le.key==le.value?1:0).reduce((le,oe)=>le+oe)}Pt(P,h,N,rt,{iscorrect:_t},lt)})(P,h,ht.nodeStatus,ht.slideStatus,rt)})}})(h,P)};var V=v(1281),I=v(6153),B=v(3069),s=v(7945),tt=v(3477),Et=v(745),Ot=v(6407),jt=v(3617),Kt=v(4669);const Vt=(P,h,N)=>{if(N.slideStatus!=ht.slideStatus||!h.length)return;let rt=h.shift(),lt=P.filter(at=>{var yt;return(null!==(yt=at.idx)&&void 0!==yt?yt:0)==rt});if(!lt.length)return;let G=Math.max.apply(null,lt.map(at=>{var yt;return null!==(yt=at.time)&&void 0!==yt?yt:0})),x=!1,W=G<.5?0:setTimeout(()=>{x||(x=!0,Vt(P,h,N))},1e3*G);re(P,h,lt,0,N,{idx:rt,total:lt.length,counter:0,isRecursive:x,timeoutRecursive:W,maxTimeCoundown:G,uid:Math.floor(1e9*Math.random())})},re=(P,h,N,rt,lt,G)=>{if(lt.slideStatus!=ht.slideStatus)return;let x=N[rt];if(x){switch(x.type){case nt.h.GROUP:break;case nt.h.CIRCLE:(0,V.K)(x.id,{size:x.size,attribute:x.attribute},x.pid?window.document.getElementById(x.pid):null);break;case nt.h.ELLIPSE:(0,I.W)(x.id,{size:x.size,attribute:x.attribute},x.pid?window.document.getElementById(x.pid):null);break;case nt.h.LINE:(0,B.q)(x.id,{size:x.size,attribute:x.attribute},x.pid?window.document.getElementById(x.pid):null);break;case nt.h.RECT:(0,s.a)(x.id,{size:x.size,attribute:x.attribute},x.pid?window.document.getElementById(x.pid):null);break;case nt.h.POLYGON:(0,tt.u)(x.id,{size:x.size,attribute:x.attribute},x.pid?window.document.getElementById(x.pid):null);break;case nt.h.POLYLINE:(0,jt.E)(x.id,{size:x.size,attribute:x.attribute},x.pid?window.document.getElementById(x.pid):null);break;case nt.h.FOREIGNOBJECT:(0,Et.$)(x.id,{size:x.size,attribute:x.attribute,style:x.style,source:x.source},x.pid?window.document.getElementById(x.pid):null);break;case nt.h.IMAGE:(0,Y.B)(x.id,{size:x.size,attribute:x.attribute,source:x.source},x.pid?window.document.getElementById(x.pid):null);break;case nt.h.TEXT:(0,k.L)(x.id,{size:x.size,attribute:x.attribute,source:x.source},x.pid?window.document.getElementById(x.pid):null);break;case nt.h.TSPAN:(0,Kt.M)(x.id,{size:x.size,attribute:x.attribute,source:x.source},x.pid?window.document.getElementById(x.pid):null);break;case nt.h.PATH:(0,Ot.X)(x.id,{size:x.size,attribute:x.attribute},x.pid?window.document.getElementById(x.pid):null)}ft(lt.slide,x,lt,()=>{G.counter+=1,G.maxTimeCoundown<.5&&G.counter>=G.total&&(G.total=G.counter=0,G.isRecursive||(clearTimeout(G.timeoutRecursive),G.isRecursive=!0,setTimeout(()=>{Vt(P,h,lt)},250)))}),re(P,h,N,++rt,lt,G)}},ht=new class Nt{constructor(){this._nodeStatus=0,this._slideStatus=0,this._slideIdx=0,this._fnChangeSlides=[]}set data(h){this._dataSource=h.data||{},b.L.variable.set=h.variable||{}}get nodeStatus(){return this._nodeStatus}refreshNodeStatus(){return this._nodeStatus=Math.floor(999999999*Math.random()),this._nodeStatus}get slideStatus(){return this._slideStatus}refreshSlideStatus(){return this._slideStatus=Math.floor(999999999*Math.random()),this._slideStatus}get slideIdx(){return this._slideIdx}get slideTotal(){var h,N;return null!==(h=null===(N=this._dataSource)||void 0===N||null===(N=N.slides)||void 0===N?void 0:N.length)&&void 0!==h?h:0}get slides(){var h;return(null===(h=this._dataSource)||void 0===h?void 0:h.slides)||[]}get slide(){var h;return((null===(h=this._dataSource)||void 0===h?void 0:h.slides)||[])[this._slideIdx]||{}}findNode(h){var N;let rt=null===(N=this._dataSource)||void 0===N||null===(N=N.slides)||void 0===N?void 0:N.find((et,mt)=>mt==this._slideIdx),lt=null==rt?void 0:rt.svg,G=(et,mt)=>{let At=null==et?void 0:et.find(qt=>qt.id==h);if(At)return At.pid=mt,At;let Rt=0,Gt=et.length||0;for(;Rt<Gt&&!At&&(At=G(et[Rt].nodes||[],et[Rt].id),!At);)Rt++;return At},x=G((null==lt?void 0:lt.nodes)||[]);var W,at,yt,_t,St;return x?(x.style=null!==(W=x.style)&&void 0!==W?W:{},x.source=null!==(at=x.source)&&void 0!==at?at:{},x.animate=null!==(yt=x.animate)&&void 0!==yt?yt:{},x.interactive=null!==(_t=x.interactive)&&void 0!==_t?_t:{},x.variable=null!==(St=x.variable)&&void 0!==St?St:{},x):{id:0,size:{x:0,y:0,width:0,height:0},attribute:{},isfake:!0}}runSlide(h,N,rt){var lt;let G;var x,W;if(this.refreshNodeStatus(),this.refreshSlideStatus(),rt)G=null===(x=this._dataSource)||void 0===x||null===(x=x.slides)||void 0===x?void 0:x.find(St=>St.code==rt||St.id==rt),G&&(this._slideIdx=(null===(W=this._dataSource)||void 0===W||null===(W=W.slides)||void 0===W?void 0:W.indexOf(G))||0);else if(N){var at,yt;G=null===(at=this._dataSource)||void 0===at||null===(at=at.slides)||void 0===at?void 0:at.find(St=>St.id==N),G&&(this._slideIdx=(null===(yt=this._dataSource)||void 0===yt||null===(yt=yt.slides)||void 0===yt?void 0:yt.indexOf(G))||0)}else this._slideIdx=Math.min(Math.max(h||0,0),this.slideTotal-1),G=this.slide;if(G){var _t;Xt(b.L.container,b.L.svg,G,!0),null===(_t=jQuery(b.L.svg).find("#"+E.F.BACKGROUND_GROUP))||void 0===_t||_t.empty();let St=(0,K.RY)(E.F.BACKGROUND_GROUP,"g",void 0,b.L.svg);(0,K.I6)(St,G),(P=>{var h,N,rt,lt;let G=ht.nodeStatus,x=ht.slideStatus;null===(h=P.svg)||void 0===h||h.nodes.forEach(at=>{at.pid=Math.ceil(1e9*Math.random()),(0,F.v)(at.pid)});let W=null===(N=P.svg)||void 0===N||null===(N=N.nodes)||void 0===N?void 0:N.map(at=>{var yt;return null!==(yt=at.idx)&&void 0!==yt?yt:0}).filter((at,yt,_t)=>_t.indexOf(at)==yt).sort((at,yt)=>(null!=at?at:0)-(null!=yt?yt:0));Vt(null!==(rt=null===(lt=P.svg)||void 0===lt?void 0:lt.nodes)&&void 0!==rt?rt:[],null!=W?W:[],{slide:P,nodeStatus:G,slideStatus:x})})(G)}this.changeSlide(this.slides,null===(lt=this.slide)||void 0===lt?void 0:lt.id,this.slideIdx,this.slides.length,G)}set onChangeSlide(h){this._fnChangeSlides.push(h)}changeSlide(h,N,rt,lt,G){this._fnChangeSlides.forEach(x=>x(h,N,rt,lt,G))}},Xt=(P,h,N,rt)=>{var lt,G,x,W;let at=window.document.querySelector(h);var yt;at||(at=document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(yt=window.document.querySelector(P))||void 0===yt||yt.appendChild(at)),rt&&(at.textContent=null);let{x:_t,y:St,width:et,height:mt}=null!==(lt=null==N||null===(G=N.svg)||void 0===G?void 0:G.viewBox)&&void 0!==lt?lt:b.L.screen.frameSize;at.setAttributeNS(null,"viewBox",_t+" "+St+" "+et+" "+mt),at.setAttribute("id",h.replace("#",""));var ie,ye,At=null!==(x=jQuery(P).width())&&void 0!==x?x:1080,Rt=null!==(W=jQuery(P).height())&&void 0!==W?W:1080,qt=et/mt;qt>=At/Rt?ye=(ie=At)/qt:ie=(ye=Rt)*qt,at.setAttributeNS(null,"width",ie.toString()),at.setAttributeNS(null,"height",ye.toString())}},7050:(he,Dt,v)=>{v.d(Dt,{M:()=>nt,a:()=>b});var E=v(5619);const b=(vt,C,f)=>{var L;let{value:k}=null!==(L=vt.animate)&&void 0!==L?L:{};nt(vt.id,{node:vt,value:k,nodeStatus:C,slideStatus:f},()=>{})},nt=(vt,C,f)=>{var L;if(!C.value)return void f();let U=jQuery("#"+vt).parents("g");if(!U.length)return void f();let{size:k}=C.node;U.css("transform-origin",`${k.x+k.width/2}px ${k.y+k.height/2}px`);let F="",w=null!==(L=C.iteration)&&void 0!==L?L:0,q=[];(C.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?q.push(C.value):C.value?["top-left","top","top-right","left","right","bottom-left","bottom","bottom-right"].includes(C.value)?(q.push("animation"),q.push(`animation-${C.value}`)):(q.push("animate__animated"),q.push(`animate__${C.value}`)):(q.push("animation"),q.push("animation-fadein")),w<0?(q.push("animation-iteration-infinite"),f(),f=function(){}):w>0&&q.push("animation-iteration-"+(w+1)),F=q.join(" "),function(it){let d=function(){U.data("animate-running")?U.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){U.data("animate-running",!1),setTimeout(function(){it()},100)}):it()};U.hasClass("animation")?setTimeout(function(){d()}):d()}(function(){var it;z(vt),(w>0||w<0)&&U.one("animationiteration",function(){C.slideStatus===E.J.slideStatus||(U.data("animate-running",!1),z(vt),C.slideStatus===E.J.slideStatus&&f())}),U.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(U.data("animate-running",!1),z(vt),C.finish){default:case 0:case 1:break;case 2:var d;nt(vt,{node:C.node,value:null===(d=C.node.animate)||void 0===d?void 0:d.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{U.addClass("hide")})}C.slideStatus===E.J.slideStatus&&f()}),U.attr("data-class",null!==(it=U.attr("class"))&&void 0!==it?it:""),U.addClass(F),U.data("animate-running",!0)})},z=function(vt){var C,f,L=jQuery("#"+vt).parents("g"),U=null===(C=L.attr("class"))||void 0===C?void 0:C.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm),k=null===(f=L.attr("class"))||void 0===f?void 0:f.match(/animate((__[a-zA-Z0-9]+)+)?(\s+||\")/gm);U&&U.forEach(function(w){jQuery(L).removeClass(w)}),k&&k.forEach(function(w){jQuery(L).removeClass(w)});let F=L.attr("data-class");F&&(L.attr("class",F),L.removeAttr("data-class")),jQuery(L).data("animation-running",!1)}},8946:(he,Dt,v)=>{v.d(Dt,{h:()=>nt});var E=v(5619),b=v(7050);const nt=(vt,C,f)=>{var L;if(!C.value)return void f();let U=jQuery("#"+vt).parents("g");if(!U.length)return void f();let{size:k}=C.node;U.css("transform-origin",`${k.x+k.width/2}px ${k.y+k.height/2}px`);let F="",w=null!==(L=C.iteration)&&void 0!==L?L:0,q=[];(C.value||"").match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm)?q.push(C.value):(q.push("animation"),q.push(C.value?"animation-"+C.value:"animation-fadein")),w<0?(q.push("animation-iteration-infinite"),f(),f=function(){}):w>0&&q.push("animation-iteration-"+(w+1)),F=q.join(" "),function(it){let d=function(){U.data("animate-running")?U.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){U.data("animate-running",!1),setTimeout(function(){it()},100)}):it()};U.hasClass("animation")?setTimeout(function(){d()}):d()}(function(){var it;z(vt),(w>0||w<0)&&U.one("animationiteration",function(){C.slideStatus===E.J.slideStatus||(U.data("animate-running",!1),z(vt),C.slideStatus===E.J.slideStatus&&f())}),U.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){switch(U.data("animate-running",!1),z(vt),C.finish){default:case 0:case 1:break;case 2:var d;(0,b.M)(vt,{node:C.node,value:null===(d=C.node.animate)||void 0===d?void 0:d.out,nodeStatus:C.nodeStatus,slideStatus:C.slideStatus},()=>{U.addClass("hide")})}C.slideStatus===E.J.slideStatus&&f()}),U.attr("data-class",null!==(it=U.attr("class"))&&void 0!==it?it:""),U.addClass(F),U.data("animate-running",!0)})},z=function(vt){var C,f=jQuery("#"+vt).parents("g"),L=null===(C=f.attr("class"))||void 0===C?void 0:C.match(/animation((-[a-zA-Z0-9]+)+)?(\s+||\")/gm);L&&L.forEach(function(k){jQuery(f).removeClass(k)});let U=f.attr("data-class");U&&(f.attr("class",U),f.removeAttr("data-class")),jQuery(f).data("animation-running",!1)}},7657:(he,Dt,v)=>{v.d(Dt,{c:()=>vt});var E=v(9506),b=v(5619),nt=v(5970),z=v(7050);const vt=(f,L,U)=>{var k;if(!L.points||!L.points.length)return void U();let F=jQuery("#"+f),q=function C(f){let L=[];2===f.length&&f.splice(1,0,[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]);let q,S,it,U=1,k=f.length;for(;U<k;){if(q=f[U-1],S=f[U],it=f[U+1],(Math.abs(q[0]-S[0])>=15||Math.abs(q[1]-S[1])>=15)&&Math.pow(q[0]-S[0],2)+Math.pow(q[1]-S[1],2)>=Math.pow(15,2)&&it&&(Math.abs(q[0]-it[0])<=20||Math.abs(q[1]-it[1])<=20)&&Math.pow(q[0]-it[0],2)+Math.pow(q[1]-it[1],2)<=Math.pow(20,2))L.push(S);else{let Y=S[0]-q[0],A=S[1]-q[1],X=Math.max(Math.abs(Y),Math.abs(A));for(var d=0;d<X;d+=15)L.push([q[0]+Y*d/X,q[1]+A*d/X])}U++}return k>0&&(L.splice(0,0,f[0]),L.push(f[k-1])),L}((xt=>{if(1==xt.length){let{size:H}=L.node;return[[H.x+H.width/2,H.y+H.height/2],...xt]}return[...xt]})(L.points||[])),S=null!==(k=L.iteration)&&void 0!==k?k:0;if(S<0&&(U(),U=function(){}),F.data("work-running")&&S<0)return;F.data("work-running",!0);let K,it=q.length,d=Math.max(20,1e3*(L.time||3)/it),{id:Y,type:A,size:X,attribute:st}=b.J.findNode(f),Z=function(xt){if(L.slideStatus!==b.J.slideStatus)return F.data("work-running",!1),void(L.slideStatus===b.J.slideStatus&&U());if(xt<it){let R=q[xt];R&&(K=Object.assign({},X,{x:R[0]-X.width/2,y:R[1]-X.height/2}),Object.assign(st,(0,E.xW)(A,K,st)),(0,nt.tD)(window.document.getElementById(Y),st),setTimeout(function(){Z(++xt)},d))}else if(S>0)S--,Z(1);else if(S<0)Z(1);else switch(F.data("work-running",!1),L.slideStatus===b.J.slideStatus&&U(),L.finish){default:case 0:break;case 1:Object.assign(st,(0,E.xW)(A,X,st)),(0,nt.tD)(window.document.getElementById(Y),st);break;case 2:var H;(0,z.M)(L.node.id,{node:L.node,value:null===(H=L.node.animate)||void 0===H?void 0:H.out,nodeStatus:L.nodeStatus,slideStatus:L.slideStatus},()=>{F.addClass("hide")})}};Z(1)}},6769:(he,Dt,v)=>{v.d(Dt,{d:()=>nt});var E=v(6611),b=v(5619);const nt=(z,vt,C,f,L)=>{var U,k,F,w,q,S,it;if(f.slideStatus!=b.J.slideStatus)return vt.async&&"change-slide"!=vt.async?void 0:void L();if(f.nodeStatus!=b.J.nodeStatus&&(!vt.async||"change-node"==vt.async))return void L();if(!(null!==(U=vt.source)&&void 0!==U&&U.path||null!==(k=vt.source)&&void 0!==k&&k.url))return console.warn(`${z} -> audio no source!`),L(),void(L=()=>{});var d=jQuery("#"+z);let Y=null!==(F=vt.iteration)&&void 0!==F?F:0;if(Y<0&&(L(),L=function(){}),!(d.data("audio-running")&&Y<0)){d.data("audio-running",!0);var A=function(st){st.pause(),st.remove(),d.data("audio-running",!1)},X=new Audio;return X.autoplay=!0,X.loop=0!=Y,X.preload="auto",X.controls=!0,X.setAttributeNode(document.createAttribute("playsinline")),X.addEventListener("canplay",function(){var st=X.play();st&&st.then(function(K){var Z;d.data("audio-running",!0),"time"==vt.async?setTimeout(()=>{f.slideStatus===b.J.slideStatus&&(A(X),L(),L=()=>{})},1e3*(null!==(Z=vt.time)&&void 0!==Z?Z:1)):"non-stop"==vt.async&&(L(),L=()=>{})}).catch(function(K){d.data("audio-running",!1),f.slideStatus===b.J.slideStatus&&(L(),L=()=>{})})}),X.addEventListener("timeupdate",function(){switch(vt.async){case"time":case"change-slide":f.slideStatus!==b.J.slideStatus&&(A(this),L(),L=()=>{});break;case"finish-action":C.total>=2&&C.total-C.counter==1&&(A(this),L(),L=()=>{});break;default:case"change-node":f.nodeStatus!==b.J.nodeStatus&&(A(this),L(),L=()=>{});case"non-stop":}}),X.addEventListener("canplaythrough",function(){this.loop&&(Y>0?Y--:0==Y&&(this.loop=!1))}),X.addEventListener("play",function(){}),X.addEventListener("pause",function(){}),X.addEventListener("ended",function(){this.remove(),d.data("audio-running",!1),f.slideStatus===b.J.slideStatus&&(L(),L=()=>{})}),X.onerror=function(){this.remove(),d.data("audio-running",!1),f.slideStatus===b.J.slideStatus&&(L(),L=()=>{})},X.src=(null!==(w=vt.source)&&void 0!==w&&w.path?(null===(q=E.L.config)||void 0===q?void 0:q.readfileuploadurl)+(null===(S=vt.source)||void 0===S?void 0:S.path):null===(it=vt.source)||void 0===it?void 0:it.url)||"",X}}},334:(he,Dt,v)=>{v.d(Dt,{J:()=>U});var E=v(6611),b=v(5619),nt=v(8946),z=v(7657),vt=v(6769),C=v(3591),f=v(2241),L=v(7050);const U=(k,F,w,q)=>{var S,it,d;let Y={total:0,counter:0},{triggershow:A,triggerrun:X,triggerhide:st,action:K,audio:Z,slide:xt,media:H}=null!==(S=null===(it=k.interactive)||void 0===it?void 0:it.click)&&void 0!==S?S:{};if(console.log(`node(${k.id}) | nodeStatus(${F}) | slideStatus(${w}) | click`),A){let{id:Qt,ids:Mt,time:Ht,async:ue}=A;"asynctrue"==ue?(0,C.GD)({id:Qt,ids:Mt,nodeStatus:F,slideStatus:w}):"time"==ue&&setTimeout(()=>{(0,C.GD)({id:Qt,ids:Mt,nodeStatus:F,slideStatus:w})},1e3*(null!=Ht?Ht:0))}if(X){let{id:Qt,ids:Mt,time:Ht,async:ue}=X;"asynctrue"==ue?(0,C.MF)({id:Qt,ids:Mt,nodeStatus:F,slideStatus:w}):"time"==ue&&setTimeout(()=>{(0,C.MF)({id:Qt,ids:Mt,nodeStatus:F,slideStatus:w})},1e3*(null!=Ht?Ht:0))}if(st){let{id:Qt,ids:Mt,time:Ht,async:ue}=st;"asynctrue"==ue?(0,C.vi)({id:Qt,ids:Mt,nodeStatus:F,slideStatus:w}):"time"==ue&&setTimeout(()=>{(0,C.vi)({id:Qt,ids:Mt,nodeStatus:F,slideStatus:w})},1e3*(null!=Ht?Ht:0))}let R=()=>{setTimeout(()=>{if(Y.counter>=Y.total){if(q&&q(),A){let{id:Qt,ids:Mt,async:Ht}=A;(!Ht||"asyncfalse"==Ht)&&(0,C.GD)({id:Qt,ids:Mt,nodeStatus:F,slideStatus:w})}if(X){let{id:Qt,ids:Mt,async:Ht}=X;(!Ht||"asyncfalse"==Ht)&&(0,C.MF)({id:Qt,ids:Mt,nodeStatus:F,slideStatus:w})}if(st){let{id:Qt,ids:Mt,async:Ht}=st;(!Ht||"asyncfalse"==Ht)&&(0,C.vi)({id:Qt,ids:Mt,nodeStatus:F,slideStatus:w})}}})};if(null!=K&&K.value){Y.total+=1;let Qt=()=>{Y.counter+=1,R()};switch(null==K?void 0:K.value){case"hide":var ut;(0,L.M)(k.id,{node:k,value:null===(ut=k.animate)||void 0===ut?void 0:ut.out,nodeStatus:F,slideStatus:w},()=>{jQuery("#"+k.id).addClass("hide"),Qt()});break;case"points":{let{points:Mt,time:Ht,iteration:ue,finish:bt}=K;Mt&&(0,z.c)(k.id,{node:k,points:Mt,time:Ht,iteration:ue,finish:bt,nodeStatus:F,slideStatus:w},Qt);break}default:{let{value:Mt,time:Ht,iteration:ue,finish:bt}=K;(0,nt.h)(k.id,{node:k,value:Mt,time:Ht,iteration:ue,finish:bt,nodeStatus:F,slideStatus:w},Qt);break}}}if(null!=Z&&null!==(d=Z.source)&&void 0!==d&&d.path){Y.total+=1;let Qt=()=>{Y.counter+=1,R()};(0,vt.d)(k.id,Z,Y,{nodeStatus:F,slideStatus:w},Qt)}if(Y.total||R(),null!=xt&&xt.id)switch(xt.id){case-1:b.J.runSlide(b.J.slideIdx-1);break;case-2:b.J.runSlide(b.J.slideIdx+1);break;default:var Ct;b.J.runSlide(void 0,xt.id,null===(Ct=xt.code)||void 0===Ct?void 0:Ct.toString())}if(null!=H&&H.type){var Tt;let Mt=`<div class="popup-media-viewer"><iframe src="${(0,f._)({readfileuploadurl:null===(Tt=E.L.config)||void 0===Tt?void 0:Tt.readfileuploadurl,type:null==H?void 0:H.type,oss:null==H?void 0:H.oss,path:null==H?void 0:H.path,url:null==H?void 0:H.url})}" frameborder="0" allowfullscreen\n        webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen"></iframe><div class="btn-close"><img src="assets/icon-svg/close-outline.svg"/></div></div>`,Ht=jQuery(Mt).appendTo(window.document.body);Ht.find(".btn-close").click(function(ue){ue.preventDefault(),Ht.remove()})}}},3591:(he,Dt,v)=>{v.d(Dt,{GD:()=>z,MF:()=>vt,vi:()=>C});var E=v(5619),b=v(334),nt=v(7050);const z=f=>{f.id?jQuery("#"+f.id).removeClass("hide"):f.ids&&f.ids.forEach(L=>{jQuery("#"+L).removeClass("hide")})},vt=f=>{f.id?(jQuery("#"+f.id).removeClass("hide"),(0,b.J)(E.J.findNode(f.id),f.nodeStatus,f.slideStatus)):f.ids&&f.ids.forEach(L=>{jQuery("#"+L).removeClass("hide"),(0,b.J)(E.J.findNode(L),f.nodeStatus,f.slideStatus)})},C=f=>{if(f.id){var L;let U=E.J.findNode(f.id);(0,nt.M)(f.id,{node:U,value:null===(L=U.animate)||void 0===L?void 0:L.out,nodeStatus:f.nodeStatus,slideStatus:f.slideStatus},()=>{jQuery("#"+f.id).addClass("hide")})}else f.ids&&f.ids.forEach(U=>{var k;let F=E.J.findNode(U);(0,nt.M)(U,{node:F,value:null===(k=F.animate)||void 0===k?void 0:k.out,nodeStatus:f.nodeStatus,slideStatus:f.slideStatus},()=>{jQuery("#"+U).addClass("hide")})})}},5970:(he,Dt,v)=>{v.d(Dt,{cR:()=>X,rN:()=>Z,t8:()=>st,fn:()=>xt,RY:()=>Tt,tD:()=>H,KG:()=>ut,c_:()=>R,s6:()=>K,I6:()=>ft,in:()=>Qt,IA:()=>ct,KP:()=>Pt,AE:()=>Mt,xJ:()=>bt,Mo:()=>ue,kE:()=>V});var E=v(1999),b=v(7873),nt=v(6315),vt=/^#?[a-fA-F0-9]+$/;const L=(I,B)=>{var s;if("none"==(I=null!==(s=I)&&void 0!==s?s:""))return"none";if("transparent"==I)return"rgba(0,0,0,0)";if(I.includes("rgba("))return I;if(I.includes("rgb(")&&(I=(0,nt.w)(I)),!(I=I.replace(/[^0-9a-fA-F]/g,"")))return"";if(!vt.test(I))return console.error(`hex2rgba -> ${I}: first argument has invalid hexadecimal characters`),"";if("#"===I[0]&&(I=I.slice(1)),3===I.length){let Et=I.split("");Et.splice(2,0,I[2]),Et.splice(1,0,I[1]),Et.splice(0,0,I[0]),I=Et.join("")}if(6!==I.length)return console.error("hex2rgba: first argument has invalid hexadecimal length"),"";var tt=[parseInt(I.slice(0,2),16),parseInt(I.slice(2,4),16),parseInt(I.slice(4,6),16)];return B="number"==typeof B?B:parseFloat(B),tt.push(B>=0&&B<=1?B:1),"rgba("+tt.join(",")+")"};var U=v(2241),k=v(8779),F=v(6611),w=v(9841),q=v(7945),S=v(9173),it=v(1281),d=v(5619),Y=v(745),A=v(6847);class X{constructor(B,s){let tt=window.document.querySelector(s);var Et;tt||(tt=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),null===(Et=window.document.querySelector(B))||void 0===Et||Et.appendChild(tt));let{svgViewBox:Ot,svgSize:jt}=F.L.screen.init();tt.setAttributeNS(null,"viewBox",`${Ot.x} ${Ot.y} ${Ot.width} ${Ot.height}`),tt.setAttribute("id",s.replace("#","")),tt.style.display="block",tt.style.width=`${jt.width}px`,tt.style.height=`${jt.height}px`,tt.style.backgroundColor="#fafafa",tt.style.cursor="default"}}const st=I=>{jQuery(F.L.target).find("#"+b.F.BACKGROUND_GROUP).empty();let B=Tt(b.F.BACKGROUND_GROUP,"g",void 0,F.L.target);ft(B,I),(()=>{let s=window.document.getElementById(null==I?void 0:I.id);jQuery(s).find("#"+b.F.BACKGROUND_GROUP).empty();let tt=Tt(b.F.BACKGROUND_GROUP,"g",void 0,s);ft(tt,I)})()},K=()=>{let I=F.L.screen.svgViewBox,B=F.L.screen.svgSize;F.L.target&&(F.L.target.setAttributeNS(null,"viewBox",`${I.x} ${I.y} ${I.width} ${I.height}`),F.L.target.style.left=`${B.x}px`,F.L.target.style.top=`${B.y}px`,F.L.target.style.width=`${B.width}px`,F.L.target.style.height=`${B.height}px`)},Z=()=>{jQuery(F.L.target).find(">*:not(defs)").remove()},xt=(I,B,s,tt,Et)=>{let Ot;return I?(Ot=jQuery(Et||F.L.target).find("#"+I).get(0),Ot||(Ot=window.document.createElementNS("http://www.w3.org/2000/svg",s),Ot.setAttribute("id",I),B==E.h.FOREIGNOBJECT&&Ot.setAttribute("xmlns:html","http://www.w3.org/1999/xhtml"),jQuery(Ot).appendTo(Et||F.L.target))):(Ot=window.document.createElementNS("http://www.w3.org/2000/svg",s),jQuery(Ot).appendTo(Et||F.L.target)),null!=tt&&tt.attribute&&H(Ot,null==tt?void 0:tt.attribute),null!=tt&&tt.style&&R(Ot,null==tt?void 0:tt.style),null!=tt&&tt.source&&ut(Ot,B,null==tt?void 0:tt.source),Ot},H=(I,B)=>{return jQuery(I).attr((s=Object.assign({},B||{}),null===(tt=Object.keys(s))||void 0===tt||tt.forEach(jt=>{switch(jt){case"fill":break;case"fillRule":var Kt;Object.assign(s,{"fill-rule":null!==(Kt=s.fillRule)&&void 0!==Kt?Kt:null,fillRule:null});break;case"stroke":var Ut;Object.assign(s,{"stroke-width":null!==(Ut=s.strokeWidth)&&void 0!==Ut?Ut:null,strokeWidth:null});break;case"strokeLinecap":var Vt;Object.assign(s,{"stroke-linecap":null!==(Vt=s.strokeLinecap)&&void 0!==Vt?Vt:null,strokeLinecap:null});break;case"strokeLinejoin":var re;Object.assign(s,{"stroke-linejoin":null!==(re=s.strokeLinejoin)&&void 0!==re?re:null,strokeLinejoin:null});break;case"strokeMiterlimit":var Nt;Object.assign(s,{"stroke-miterlimit":null!==(Nt=s.strokeMiterlimit)&&void 0!==Nt?Nt:null,strokeMiterlimit:null});break;case"strokeDasharray":var ht;Object.assign(s,{"stroke-dasharray":null!==(ht=s.strokeDasharray)&&void 0!==ht?ht:null,strokeDasharray:null});break;case"strokeDasharrays":var Xt,P;Object.assign(s,{"stroke-dasharray":null!==(Xt=null===(P=s.strokeDasharrays)||void 0===P?void 0:P.join(" "))&&void 0!==Xt?Xt:null,strokeDasharrays:null});break;case"fontFamily":var h;Object.assign(s,{"font-family":null!==(h=s.fontFamily)&&void 0!==h?h:null,fontFamily:null});break;case"fontWeight":var N;Object.assign(s,{"font-weight":null!==(N=s.fontWeight)&&void 0!==N?N:null,fontWeight:null});break;case"fontStyle":var rt;Object.assign(s,{"font-style":null!==(rt=s.fontStyle)&&void 0!==rt?rt:null,fontStyle:null});break;case"fontSize":var lt;Object.assign(s,{"font-size":null!==(lt=s.fontSize)&&void 0!==lt?lt:null,fontSize:null});break;case"textLength":Object.assign(s,{textLength:s.textLength?`${s.textLength}px`:null});break;case"letterSpacing":var G;Object.assign(s,{"letter-spacing":null!==(G=s.letterSpacing)&&void 0!==G?G:null,letterSpacing:null});break;case"wordSpacing":var x;Object.assign(s,{"word-spacing":null!==(x=s.wordSpacing)&&void 0!==x?x:null,wordSpacing:null});break;case"transformOrigin":var W;Object.assign(s,{"transform-origin":null!==(W=s.transformOrigin)&&void 0!==W?W:null,transformOrigin:null})}}),Object.assign({},null!=s?s:{},{fill:null!=s&&s.fill?L(s.fill,null!==(Et=null==s?void 0:s.fillOpacity)&&void 0!==Et?Et:1):"rgba(0,0,0,0)",fillOpacity:null,stroke:null!=s&&s.stroke?L(s.stroke,null!==(Ot=null==s?void 0:s.strokeOpacity)&&void 0!==Ot?Ot:1):"rgba(0,0,0,0)",strokeOpacity:null}))),I;var s,tt,Et,Ot},R=(I,B)=>{return jQuery(I).css((s=Object.assign({},B||{}),null===(tt=Object.keys(s))||void 0===tt||tt.forEach(Et=>{switch(Et){case"padding":Object.assign(s,{padding:s.padding?`${s.padding}px`:null});break;case"borderWidth":var Ot;Object.assign(s,s.borderWidth&&s.borderColor?{"border-width":`${s.borderWidth}px`,"border-style":s.borderStyle||"solid","border-color":L(s.borderColor,null!==(Ot=s.borderOpacity)&&void 0!==Ot?Ot:1)}:{"border-width":"","border-style":"","border-color":""}),Object.assign(s,{borderWidth:null,borderStyle:null,borderColor:null,borderOpacity:null});break;case"borderRadius":Object.assign(s,{"border-radius":s.borderRadius?`${s.borderRadius}px`:null,borderRadius:null});break;case"backgroundColor":var jt;Object.assign(s,s.backgroundColor?{"background-color":L(s.backgroundColor,null!==(jt=s.backgroundOpacity)&&void 0!==jt?jt:1)}:{"background-color":""}),Object.assign(s,{backgroundColor:null,backgroundOpacity:null})}}),s)),I;var s,tt},ut=(I,B,s)=>{switch(B){case E.h.TEXT:var tt,Et;jQuery(I).text(null!==(tt=null==s||null===(Et=s.text)||void 0===Et?void 0:Et.textContent)&&void 0!==tt?tt:"");break;case E.h.TSPAN:var Ot,jt;jQuery(I).text(null!==(Ot=null==s||null===(jt=s.text)||void 0===jt?void 0:jt.textContent)&&void 0!==Ot?Ot:"");break;case E.h.IMAGE:var Kt,Ut,Vt,re,Nt;jQuery(I).attr("href",(null==s||null===(Kt=s.image)||void 0===Kt?void 0:Kt.base64)||(null!=s&&null!==(Ut=s.image)&&void 0!==Ut&&Ut.path?(null===(Vt=F.L.config)||void 0===Vt?void 0:Vt.readfileuploadurl)+(null==s||null===(re=s.image)||void 0===re?void 0:re.path):null==s||null===(Nt=s.image)||void 0===Nt?void 0:Nt.url)||"");break;case E.h.FOREIGNOBJECT:switch(null==s?void 0:s.type){case"text":var ht,Xt;if(null!==(ht=s.text)&&void 0!==ht&&ht.variableKeywords&&null!==(Xt=s.text)&&void 0!==Xt&&Xt.variableKeywords.length){var P;let c=F.L.variable.getKeys(),O=(null===(P=s.text)||void 0===P?void 0:P.textContent)||"H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!";s.text.variableKeywords.forEach(m=>{var D=m.replace(/[^a-zA-Z0-9_]/gm,"");if(c.indexOf(D)>=0){var M=F.L.variable.getValue(D);O=O.replace(m,M)}}),jQuery(I).text(O)}else{var h;jQuery(I).text((null===(h=s.text)||void 0===h?void 0:h.textContent)||"")}break;case"html":{var N,rt,lt;let c=(null==s||null===(N=s.html)||void 0===N?void 0:N.htmlContent)||'<span style="font-family: Roboto; font-size: 24px;">H\xe3y nh\u1eadp n\u1ed9i dung c\u1ee7a b\u1ea1n!</span>';if(null!==(rt=s.html)&&void 0!==rt&&rt.variableKeywords&&null!==(lt=s.html)&&void 0!==lt&&lt.variableKeywords.length){let O=F.L.variable.getKeys();s.html.variableKeywords.forEach(m=>{var D=m.replace(/[^a-zA-Z0-9_]/gm,"");if(O.indexOf(D)>=0){var M=F.L.variable.getValue(D);c=c.replace(m,M)}})}jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${c}</div>`).find("img[path],video[path],iframe[path]").each((O,m)=>{var D,M;m.setAttribute("src",(null!==(D=null===(M=F.L.config)||void 0===M?void 0:M.readfileuploadurl)&&void 0!==D?D:"")+m.getAttribute("path")),m.removeAttribute("path")});break}case"input":var G,x,W,at;if(null!==(G=s.input)&&void 0!==G&&G.input)jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><input type="text" placeholder="${null!==(W=null===(at=s.input)||void 0===at?void 0:at.placeholder)&&void 0!==W?W:""}" maxlength="100" /></div>`);else if(null!==(x=s.input)&&void 0!==x&&x.textarea){var yt,_t;jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><textarea placeholder="${null!==(yt=null===(_t=s.input)||void 0===_t?void 0:_t.placeholder)&&void 0!==yt?yt:""}" maxlength="1000"></textarea></div>`)}break;case"image":var St,et,mt,At,Rt;jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><img src="${(null===(St=s.image)||void 0===St?void 0:St.base64)||(null!==(et=s.image)&&void 0!==et&&et.path?(null===(mt=F.L.config)||void 0===mt?void 0:mt.readfileuploadurl)+(null===(At=s.image)||void 0===At?void 0:At.path):null===(Rt=s.image)||void 0===Rt?void 0:Rt.url)||""}" style="width:100%;height:100%;display:block;"/></div>`);break;case"iframe":var Gt,qt,ie,ye;jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${(null!==(Gt=s.iframe)&&void 0!==Gt&&Gt.path?(null===(qt=F.L.config)||void 0===qt?void 0:qt.readfileuploadurl)+(null===(ie=s.iframe)||void 0===ie?void 0:ie.path):null===(ye=s.iframe)||void 0===ye?void 0:ye.url)||""}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break;case"embed":{var le,oe,me,Pe,Le;let c=(0,U._)({readfileuploadurl:null===(le=F.L.config)||void 0===le?void 0:le.readfileuploadurl,type:null===(oe=s.embed)||void 0===oe?void 0:oe.type,oss:null===(me=s.embed)||void 0===me?void 0:me.oss,path:null===(Pe=s.embed)||void 0===Pe?void 0:Pe.path,url:null===(Le=s.embed)||void 0===Le?void 0:Le.url});jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;"><iframe src="${c}" frameborder="0" allowfullscreen\n                    webkitallowfullscreen allowtransparency="true" allow="autoplay; fullscreen" style="width:100%;height:100%;display:block;"></iframe></div>`);break}case"svg":var Ee,pe;jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;">${null!==(Ee=null===(pe=s.svg)||void 0===pe?void 0:pe.svgContent)&&void 0!==Ee?Ee:""}</div>`);break;case"test":{var Te,Re,Be,qe;let c=(null==s||null===(Te=s.html)||void 0===Te?void 0:Te.htmlContent)||"";if(null!==(Re=s.html)&&void 0!==Re&&Re.variableKeywords&&null!==(Be=s.html)&&void 0!==Be&&Be.variableKeywords.length){let O=F.L.variable.getKeys();s.html.variableKeywords.forEach(m=>{var D=m.replace(/[^a-zA-Z0-9_]/gm,"");if(O.indexOf(D)>=0){var M=F.L.variable.getValue(D);c=c.replace(m,M)}})}switch(null==s||null===(qe=s.test)||void 0===qe?void 0:qe.type){case"truefalse":var $e;jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==($e=s.test.truefalse)&&void 0!==$e&&$e.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"singlechoice":var Ve;jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(Ve=s.test.singlechoice)&&void 0!==Ve&&Ve.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"multichoice":var Xe;jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test" data-type="${null==s?void 0:s.test.type}" data-correct="${null!=s&&null!==(Xe=s.test.multichoice)&&void 0!==Xe&&Xe.iscorrect?1:0}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"matching-empty":var ti;jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-empty" data-key="${null==s||null===(ti=s.test.matching)||void 0===ti?void 0:ti.key}"></div>`);break;case"matching-content":var kt,j,i;jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" class="ondrop-here" data-node="test" data-type="matching" data-type2="matching-content" data-key="${null==s||null===(kt=s.test.matching)||void 0===kt?void 0:kt.key}"><div class="ondrag-item" data-key="${null!==(j=null==s||null===(i=s.test)||void 0===i||null===(i=i.matching)||void 0===i?void 0:i.key)&&void 0!==j?j:"KIEN"}"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div></div>`);break;case"fill":var r;((null===(r=s.html)||void 0===r?void 0:r.fillKeywords)||[]).forEach(O=>{var m=`<input type="text" maxlength="128" style="display:inline-block;width:100px;min-width:100px;max-width:100%;padding:0px 10px;margin:0px;box-sizing:border-box;outline:none;box-shadow:none;border-width:0px 0px 1px;border-top-style:initial;border-right-style:initial;border-left-style:initial;border-top-color:initial;border-right-color:initial;border-left-color:initial;border-image:initial;border-bottom-style:dashed;border-bottom-color:rgb(123,146,254);background:transparent;animation:0.3s ease-in-out 0s 1 normal none running width;text-align:inherit;" data-key="${O.replace(/[^a-zA-Z0-9]+/gm,"")}"/>`;c=c.replace(new RegExp(O.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),m)}),jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><div style="width:100%">${c}</div></div></div>`);break;case"speech":jQuery(I).html('<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><div style="display:flex;align-items:center;width:100%;height:100%;"><img src="images/svg/component/microphone4.svg" width="60" height="60"/></div></div>');break;case"submit":var o,n,a,y,p;jQuery(I).html(`<div xmlns="http://www.w3.org/1999/xhtml" style="width:100%;height:100%;display:block;" data-node="test"><img src="${null!==(o=null!==(n=s.image)&&void 0!==n&&n.path?(null===(a=F.L.config)||void 0===a?void 0:a.readfileuploadurl)+(null===(y=s.image)||void 0===y?void 0:y.path):null===(p=s.image)||void 0===p?void 0:p.url)&&void 0!==o?o:""}" style="width:100%;height:100%;display:block;"/></div>`)}jQuery(I).find("img[path],video[path],iframe[path]").each((O,m)=>{var D,M;m.setAttribute("src",(null!==(D=null===(M=F.L.config)||void 0===M?void 0:M.readfileuploadurl)&&void 0!==D?D:"")+m.getAttribute("path")),m.removeAttribute("path")})}}}},Tt=(I,B,s,tt)=>{let Et=jQuery(tt||F.L.target).find("#"+I).get(0);return Et||(Et=window.document.createElementNS("http://www.w3.org/2000/svg",B),Et.setAttribute("id",I),jQuery(Et).appendTo(tt||F.L.target)),jQuery(Et).attr((null==s?void 0:s.attribute)||{}),jQuery(Et).css((null==s?void 0:s.style)||{}),Et},Qt=(I,B)=>{let s=(0,w.$)(2),tt={fill:k.pZ.fill,stroke:k.pZ.stroke,"stroke-width":(0,w.$)(k.pZ.strokeWidth)};return[{element:Tt("icdt-temp-create-rect-center","rect",{attribute:Object.assign({x:B.x-s,y:B.y-s,width:B.width+2*s,height:B.height+2*s},tt)},I),posType:"rect-center"}]},Mt=(I,B)=>{let{size:s}=B,tt=(0,w.$)(1),Et=(0,w.$)(2),Ot=(0,w.$)(5),jt={stroke:k.u$.stroke,"stroke-width":(0,w.$)(k.u$.strokeWidth),"stroke-linecap":k.u$.strokeLinecap},Kt={fill:k.bf.fill,stroke:k.bf.stroke,"stroke-width":(0,w.$)(k.bf.strokeWidth)},Ut={fill:k.eD.fill,stroke:k.eD.stroke,"stroke-width":(0,w.$)(k.eD.strokeWidth),width:(0,w.$)(k.eD.width),height:(0,w.$)(k.eD.height)};return Tt("icdt-temp-resize-line-left","line",{attribute:Object.assign({x1:s.x-tt,y1:s.y,x2:s.x-tt,y2:s.y+s.height},jt)},I),Tt("icdt-temp-resize-line-top","line",{attribute:Object.assign({x1:s.x,y1:s.y-tt,x2:s.x+s.width,y2:s.y-tt},jt)},I),Tt("icdt-temp-resize-line-right","line",{attribute:Object.assign({x1:s.x+s.width+tt,y1:s.y,x2:s.x+s.width+tt,y2:s.y+s.height},jt)},I),Tt("icdt-temp-resize-line-bottom","line",{attribute:Object.assign({x1:s.x,y1:s.y+s.height+tt,x2:s.x+s.width,y2:s.y+s.height+tt},jt)},I),[{element:Tt("icdt-temp-resize-rect-center","rect",{attribute:Object.assign({x:s.x,y:s.y,width:s.width,height:s.height},Kt),style:{cursor:"move"}},I),posType:"rect-center"},{element:Tt("icdt-temp-resize-rect-top-left","rect",{attribute:Object.assign({x:s.x-Ot,y:s.y-Ot},Ut),style:{cursor:"nw-resize"}},I),posType:"rect-top-left"},{element:Tt("icdt-temp-resize-rect-top-right","rect",{attribute:Object.assign({x:s.x+s.width-Et,y:s.y-Ot},Ut),style:{cursor:"ne-resize"}},I),posType:"rect-top-right"},{element:Tt("icdt-temp-resize-rect-bottom-left","rect",{attribute:Object.assign({x:s.x-Ot,y:s.y+s.height-Et},Ut),style:{cursor:"sw-resize"}},I),posType:"rect-bottom-left"},{element:Tt("icdt-temp-resize-rect-bottom-right","rect",{attribute:Object.assign({x:s.x+s.width-Et,y:s.y+s.height-Et},Ut),style:{cursor:"se-resize"}},I),posType:"rect-bottom-right"},{element:Tt("icdt-temp-resize-rect-top","rect",{attribute:Object.assign({x:s.x+s.width/2-Et-tt,y:s.y-Ot},Ut),style:{cursor:"n-resize"}},I),posType:"rect-top"},{element:Tt("icdt-temp-resize-rect-right","rect",{attribute:Object.assign({x:s.x+s.width-Et,y:s.y+s.height/2-Et-tt},Ut),style:{cursor:"e-resize"}},I),posType:"rect-right"},{element:Tt("icdt-temp-resize-rect-bottom","rect",{attribute:Object.assign({x:s.x+s.width/2-Et-tt,y:s.y+s.height-Et},Ut),style:{cursor:"s-resize"}},I),posType:"rect-bottom"},{element:Tt("icdt-temp-resize-rect-left","rect",{attribute:Object.assign({x:s.x-Ot,y:s.y+s.height/2-Et-tt},Ut),style:{cursor:"w-resize"}},I),posType:"rect-left"}]},ue=(I,B,s)=>{let tt=(0,w.$)(1),Et={stroke:k.u$.stroke,"stroke-width":(0,w.$)(k.u$.strokeWidth),"stroke-linecap":k.u$.strokeLinecap},Ot={fill:k.bf.fill,stroke:k.bf.stroke,"stroke-width":(0,w.$)(k.bf.strokeWidth)},jt={fill:k.IB.fill,stroke:k.IB.stroke,"stroke-width":(0,w.$)(k.IB.strokeWidth)},Nt=(Tt("icdt-temp-select-line-left","line",{attribute:Object.assign({x1:s.x-tt,y1:s.y,x2:s.x-tt,y2:s.y+s.height},Et)},I),Tt("icdt-temp-select-line-top","line",{attribute:Object.assign({x1:s.x,y1:s.y-tt,x2:s.x+s.width,y2:s.y-tt},Et)},I),Tt("icdt-temp-select-line-right","line",{attribute:Object.assign({x1:s.x+s.width+tt,y1:s.y,x2:s.x+s.width+tt,y2:s.y+s.height},Et)},I),Tt("icdt-temp-select-line-bottom","line",{attribute:Object.assign({x1:s.x,y1:s.y+s.height+tt,x2:s.x+s.width,y2:s.y+s.height+tt},Et)},I),Tt("icdt-temp-select-rect-center","rect",{attribute:Object.assign({x:s.x,y:s.y,width:s.width,height:s.height},Ot)},I));return B.forEach(ht=>{let{size:Xt}=ht;Tt("icdt-temp-select-rect-node-"+ht.id,"rect",{attribute:Object.assign({x:Xt.x,y:Xt.y,width:Xt.width,height:Xt.height},jt)},I)}),[{element:Nt,posType:"rect-center"}]},bt=(I,B)=>{let s=(0,w.$)(1),tt={stroke:k.u$.stroke,"stroke-width":(0,w.$)(k.u$.strokeWidth),"stroke-linecap":k.u$.strokeLinecap},Et={fill:k.bf.fill,stroke:k.bf.stroke,"stroke-width":(0,w.$)(k.bf.strokeWidth)};return Tt("icdt-temp-scan-line-left","line",{attribute:Object.assign({x1:B.x-s,y1:B.y,x2:B.x-s,y2:B.y+B.height},tt)},I),Tt("icdt-temp-scan-line-top","line",{attribute:Object.assign({x1:B.x,y1:B.y-s,x2:B.x+B.width,y2:B.y-s},tt)},I),Tt("icdt-temp-scan-line-right","line",{attribute:Object.assign({x1:B.x+B.width+s,y1:B.y,x2:B.x+B.width+s,y2:B.y+B.height},tt)},I),Tt("icdt-temp-scan-line-bottom","line",{attribute:Object.assign({x1:B.x,y1:B.y+B.height+s,x2:B.x+B.width,y2:B.y+B.height+s},tt)},I),[{element:Tt("icdt-temp-scan-rect-center","rect",{attribute:Object.assign({x:B.x,y:B.y,width:B.width,height:B.height},Et)},I),posType:"rect-center"}]},Pt=(I,B)=>((0,w.$)(-1),(0,w.$)(k.WR.strokeWidth),(0,w.$)(k.WR.strokeDasharray),Tt("icdt-temp-interactive-rect-center","rect",{attribute:Object.assign({x:B.x,y:B.y,width:B.width,height:B.height,class:"cursor-draw"},{fill:k.lq.fill})},I),[]),ct=(I,B)=>{let s={fill:k.$u.fill,stroke:k.$u.stroke,"stroke-width":(0,w.$)(k.$u.strokeWidth),"stroke-dasharray":(0,w.$)(k.$u.strokeDasharray)};jQuery(I).empty(),B.forEach(tt=>{var Et,Ot;let{size:jt}=tt;if(!tt.idx)return;Tt("icdt-temp-index-rect-node-"+tt.id,"rect",{attribute:Object.assign({x:jt.x-5,y:jt.y-5,width:jt.width+10,height:jt.height+10},s)},I);let{element:Kt}=(0,Y.$)(Math.ceil(1e9*Math.random()),{size:{x:jt.x-76,y:jt.y-6,width:70,height:80},attribute:{},style:{},source:{type:"html",html:{htmlContent:`<div class="position-slide" style="position:relative;width:100%;height:100%;">\n                  <div style="position:absolute;top:0;right:0;line-height:22px;">\n                    <div title="Th\u1ee9 t\u1ef1 xu\u1ea5t hi\u1ec7n">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-play" style="margin:6px 0;color:#7da7d9;font-size:12px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="idx" value="${null!==(Et=tt.idx)&&void 0!==Et?Et:0}" min="0" max="999" step="1" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="Th\u1eddi gian \u0111\u1ee3i(s), n\u1ebfu gi\xe1 tr\u1ecb = 0 s\u1ebd chuy\u1ec3n sang \u0111\u1ee3i ho\xe0n t\u1ea5t ho\u1ea1t \u0111\u1ed9ng v\xe0 \xe2m thanh" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <span style="display:block;width:18px;float:left;text-align:center;">\n                            <i class="fa fa-clock-o" style="margin:5px 0;color:#7da7d9;font-size:14px;"></i>\n                          </span>\n                          <span style="display:block;width:50px;float:left;">\n                            <input type="number" name="time" value="${null!==(Ot=tt.time)&&void 0!==Ot?Ot:0}" min="0" max="999" step="0.5" style="box-sizing:border-box;width:100%;padding:0;border:1px solid #ddd;outline:0;text-align:center;background:#eee;background: radial-gradient(#fff, #eee);font-size:12px;">\n                          </span>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                    <div title="H\u1ee7y thi\u1ebft l\u1eadp" style="margin-top:2px;">\n                        <div style="float:right;">\n                          <button name="remove" style="box-sizing:border-box;width:24px;height:24px;padding:0;border:1px solid #ddd;line-height: 0;outline:none;background:#eee;background: radial-gradient(#fff, #eee);">\n                            <img src="assets/icon-png/xoa2.png" height="18">\n                          </button>\n                        </div>\n                        <div style="clear:both;"></div>\n                    </div>\n                  </div>\n              </div>`}}},I);Kt.classList.add("node-input"),jQuery(Kt).on("change",'input[name="idx"]',Ut=>{var Vt;tt.idx=parseInt(null!==(Vt=Ut.target.value)&&void 0!==Vt?Vt:"0")}).on("change",'input[name="time"]',Ut=>{var Vt;tt.time=parseFloat(null!==(Vt=Ut.target.value)&&void 0!==Vt?Vt:"0")}).on("click",'button[name="remove"]',Ut=>{tt.idx=0,tt.time=null,ct(I,B)})})},ft=(I,B)=>{var s,tt,Et,Ot,jt,Kt;let{color:Ut,opacity:Vt,path:re,url:Nt,base64:ht}=null!==(s=null==B||null===(tt=B.svg)||void 0===tt?void 0:tt.background)&&void 0!==s?s:{},{x:Xt,y:P,width:h,height:N}=null!==(Et=null==B||null===(Ot=B.svg)||void 0===Ot?void 0:Ot.viewBox)&&void 0!==Et?Et:{x:0,y:0,width:0,height:0};(0,A.L)(void 0,{size:{x:0,y:(0,w.$)(-21),width:h,height:N},attribute:{fill:"#999",fontSize:(0,w.$)(14),class:"hide-on-viewer"},source:{type:"text",text:{textContent:null!==(jt=null!==(Kt=null==B?void 0:B.name)&&void 0!==Kt?Kt:null==B?void 0:B.code)&&void 0!==jt?jt:void 0}}},I),(0,q.a)(void 0,{size:{x:Xt,y:P,width:h,height:N},attribute:{fill:"#fff",stroke:"#999",strokeWidth:(0,w.$)(1),strokeDasharray:(0,w.$)(10),class:"hide-on-viewer"}},I),Ut&&(0,q.a)(void 0,{size:{x:Xt,y:P,width:h,height:N},attribute:{fill:Ut,fillOpacity:Vt}},I),re&&(0,S.B)(void 0,{size:{x:Xt,y:P,width:h,height:N},source:{type:"image",image:{path:re,url:Nt,base64:ht}}},I)},V=(I,B,s)=>{var tt;switch(jQuery(I).empty(),null===(tt=B.test)||void 0===tt?void 0:tt.type){case"truefalse":var Et;if(null!==(Et=B.test)&&void 0!==Et&&Et.showselection){var Ot,jt,Kt;let St=null==B||null===(Ot=B.test)||void 0===Ot||null===(Ot=Ot.answer)||void 0===Ot||null===(Ot=Ot.truefalse)||void 0===Ot?void 0:Ot.value;null===(jt=B.svg)||void 0===jt||jt.nodes.filter(et=>{var mt;return"truefalse"==(null===(mt=et.source)||void 0===mt||null===(mt=mt.test)||void 0===mt?void 0:mt.type)&&et.id!=St}).forEach(et=>{var mt;let{x:Rt,y:Gt,width:qt,height:ie}=null!==(mt=null==et?void 0:et.size)&&void 0!==mt?mt:{x:0,y:0,width:0,height:0};(0,it.K)(Math.ceil(1e9*Math.random()),{size:{x:Rt-.5,y:Gt-.5,width:qt+1,height:ie+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},I)}),null!=B&&null!==(Kt=B.test)&&void 0!==Kt&&null!==(Kt=Kt.answer)&&void 0!==Kt&&Kt.truefalse&&St&&(et=>{let mt=d.J.findNode(St),{x:Rt,y:Gt,width:qt,height:ie}=null!==(et=null==mt?void 0:mt.size)&&void 0!==et?et:{x:0,y:0,width:0,height:0};(0,it.K)(Math.ceil(1e9*Math.random()),{size:{x:Rt-2,y:Gt-2,width:qt+4,height:ie+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},I)})()}break;case"singlechoice":var Ut;if(null!==(Ut=B.test)&&void 0!==Ut&&Ut.showselection){var Vt,re,Nt;let St=null==B||null===(Vt=B.test)||void 0===Vt||null===(Vt=Vt.answer)||void 0===Vt||null===(Vt=Vt.singlechoice)||void 0===Vt?void 0:Vt.value;null===(re=B.svg)||void 0===re||re.nodes.filter(et=>{var mt;return"singlechoice"==(null===(mt=et.source)||void 0===mt||null===(mt=mt.test)||void 0===mt?void 0:mt.type)&&et.id!=St}).forEach(et=>{var mt;let{x:Rt,y:Gt,width:qt,height:ie}=null!==(mt=null==et?void 0:et.size)&&void 0!==mt?mt:{x:0,y:0,width:0,height:0};(0,it.K)(Math.ceil(1e9*Math.random()),{size:{x:Rt-.5,y:Gt-.5,width:qt+1,height:ie+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},I)}),null!=B&&null!==(Nt=B.test)&&void 0!==Nt&&null!==(Nt=Nt.answer)&&void 0!==Nt&&Nt.singlechoice&&St&&(et=>{let mt=d.J.findNode(St),{x:Rt,y:Gt,width:qt,height:ie}=null!==(et=null==mt?void 0:mt.size)&&void 0!==et?et:{x:0,y:0,width:0,height:0};(0,it.K)(Math.ceil(1e9*Math.random()),{size:{x:Rt-2,y:Gt-2,width:qt+4,height:ie+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},I)})()}break;case"multichoice":var ht;if(null!==(ht=B.test)&&void 0!==ht&&ht.showselection){var Xt,P,h,N;let St=null!==(Xt=null==B||null===(P=B.test)||void 0===P||null===(P=P.answer)||void 0===P||null===(P=P.multichoice)||void 0===P?void 0:P.map(et=>et.value))&&void 0!==Xt?Xt:[];var rt;null===(h=B.svg)||void 0===h||h.nodes.filter(et=>{var mt;return"multichoice"==(null===(mt=et.source)||void 0===mt||null===(mt=mt.test)||void 0===mt?void 0:mt.type)&&!St.includes(et.id)}).forEach(et=>{var mt;let{x:Rt,y:Gt,width:qt,height:ie}=null!==(mt=null==et?void 0:et.size)&&void 0!==mt?mt:{x:0,y:0,width:0,height:0};(0,q.a)(Math.ceil(1e9*Math.random()),{size:{x:Rt-.5,y:Gt-.5,width:qt+1,height:ie+1},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:1,strokeDasharray:4}},I)}),null!=B&&null!==(N=B.test)&&void 0!==N&&null!==(N=N.answer)&&void 0!==N&&N.multichoice&&St.length&&(null==B||null===(rt=B.test)||void 0===rt||null===(rt=rt.answer)||void 0===rt||rt.multichoice.forEach(et=>{var mt;let At=d.J.findNode(et.value),{x:Gt,y:qt,width:ie,height:ye}=null!==(mt=null==At?void 0:At.size)&&void 0!==mt?mt:{x:0,y:0,width:0,height:0};(0,q.a)(Math.ceil(1e9*Math.random()),{size:{x:Gt-2,y:qt-2,width:ie+4,height:ye+4},attribute:{fill:"none",stroke:"#5F6CE1",strokeWidth:4}},I)}))}break;case"fill":var lt,G;null!=B&&null!==(lt=B.test)&&void 0!==lt&&null!==(lt=lt.answer)&&void 0!==lt&&lt.fill&&(null==B||null===(G=B.test)||void 0===G||null===(G=G.answer)||void 0===G||G.fill.forEach(St=>{jQuery("#"+s.id).find(`input[type="text"][data-key="${St.key}"]`).val(St.value)}));break;case"matching":var x,W,at,yt;if(null!=B&&null!==(x=B.test)&&void 0!==x&&null!==(x=x.answer)&&void 0!==x&&x.matching)if("matching-empty"==(null===(W=s.source)||void 0===W||null===(W=W.test)||void 0===W?void 0:W.type))null==B||null===(yt=B.test)||void 0===yt||null===(yt=yt.answer)||void 0===yt||yt.matching.filter(St=>{var et;return St.key==(null===(et=s.source)||void 0===et||null===(et=et.test)||void 0===et||null===(et=et.matching)||void 0===et?void 0:et.key)}).forEach(St=>{});else if("matching-content"==(null===(at=s.source)||void 0===at||null===(at=at.test)||void 0===at?void 0:at.type)){var _t;null==B||null===(_t=B.test)||void 0===_t||null===(_t=_t.answer)||void 0===_t||_t.matching.filter(St=>{var et;return St.value==(null===(et=s.source)||void 0===et||null===(et=et.test)||void 0===et||null===(et=et.matching)||void 0===et?void 0:et.key)}).forEach(St=>{})}}}},2241:(he,Dt,v)=>{v.d(Dt,{_:()=>nt});var E=v(8338);const nt=C=>{switch(null==C?void 0:C.type){case E.S.IMAGE:return"assets/iframe/lib/mk-image-viewer/viewer.html?url="+C.readfileuploadurl+C.path;case E.S.AUDIO:return"assets/iframe/lib/mk-audio-player-2/player.html?url="+C.readfileuploadurl+C.path;case E.S.VIDEO:return"assets/iframe/lib/mk-video-player/player.html?url="+C.readfileuploadurl+C.path;case E.S.OFFICE:return"https://view.officeapps.live.com/op/view.aspx?src="+C.readfileuploadurl+C.path;case E.S.PDF:return"assets/iframe/lib/PDFReader/web/viewer.html?file="+C.readfileuploadurl+C.path;case E.S.HTML:case E.S.IMAGE_ANIMATION:case E.S.PHET:return""+C.readfileuploadurl+C.path;case E.S.ZIP:case E.S.SCORM:var f;return"imsmanifest.xml"==(null===(f=C.path)||void 0===f||null===(f=f.split("/"))||void 0===f?void 0:f.pop())?"assets/iframe/lib/ScormPool_Player/player.html?url="+C.readfileuploadurl+C.path:""+C.readfileuploadurl+C.path;case E.S.TRACK:case E.S.TEXT:return""+C.readfileuploadurl+C.path;case E.S.LINK:switch(C.oss){case 1003:return"assets/iframe/lib/ScormPool_Player/player.html?url="+C.url;case 1002:var L;return null!==(L=z(C.url))&&void 0!==L?L:"";case 1005:var U;return null!==(U=C.url)&&void 0!==U?U:"";default:var k;return null!==(k=C.url)&&void 0!==k?k:""}default:return""+C.readfileuploadurl+C.path}},z=C=>{let f=vt(C);return f?"https://www.youtube.com/embed/"+f+"?"+jQuery.param({wmode:"opaque",border:0,hd:1,autoplay:!1,autohide:1,enablejsapi:1,modestbranding:1,version:3,hl:"vi_VN",rel:0,showinfo:0,iv_load_policy:3}):null},vt=C=>{let f=null==C?void 0:C.match(/(?:.+?)?(?:\/v\/|watch\/|\?v\=|\&v\=|youtu\.be\/|\/v\=|^youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})+/);return f&&f.length>=2?f[1]:null}},1131:(he,Dt,v)=>{function E(){}function b(t){return null==t?E:function(){return this.querySelector(t)}}function vt(){return[]}function C(t){return null==t?vt:function(){return this.querySelectorAll(t)}}function U(t){return function(){return this.matches(t)}}function k(t){return function(e){return e.matches(t)}}v.d(Dt,{qrM:()=>aa,n8j:()=>la});var F=Array.prototype.find;function q(){return this.firstElementChild}var it=Array.prototype.filter;function d(){return Array.from(this.children)}function st(t){return new Array(t.length)}function Z(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function H(t,e,l,u,g,_){for(var Q,T=0,J=e.length,dt=_.length;T<dt;++T)(Q=e[T])?(Q.__data__=_[T],u[T]=Q):l[T]=new Z(t,_[T]);for(;T<J;++T)(Q=e[T])&&(g[T]=Q)}function R(t,e,l,u,g,_,T){var Q,J,te,dt=new Map,gt=e.length,Wt=_.length,Jt=new Array(gt);for(Q=0;Q<gt;++Q)(J=e[Q])&&(Jt[Q]=te=T.call(J,J.__data__,Q,e)+"",dt.has(te)?g[Q]=J:dt.set(te,J));for(Q=0;Q<Wt;++Q)te=T.call(t,_[Q],Q,_)+"",(J=dt.get(te))?(u[Q]=J,J.__data__=_[Q],dt.delete(te)):l[Q]=new Z(t,_[Q]);for(Q=0;Q<gt;++Q)(J=e[Q])&&dt.get(Jt[Q])===J&&(g[Q]=J)}function ut(t){return t.__data__}function Tt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Pt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Z.prototype={constructor:Z,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var tt="http://www.w3.org/1999/xhtml";const Et={svg:"http://www.w3.org/2000/svg",xhtml:tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ot(t){var e=t+="",l=e.indexOf(":");return l>=0&&"xmlns"!==(e=t.slice(0,l))&&(t=t.slice(l+1)),Et.hasOwnProperty(e)?{space:Et[e],local:t}:t}function jt(t){return function(){this.removeAttribute(t)}}function Kt(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ut(t,e){return function(){this.setAttribute(t,e)}}function Vt(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function re(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttribute(t):this.setAttribute(t,l)}}function Nt(t,e){return function(){var l=e.apply(this,arguments);null==l?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,l)}}function Xt(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function P(t){return function(){this.style.removeProperty(t)}}function h(t,e,l){return function(){this.style.setProperty(t,e,l)}}function N(t,e,l){return function(){var u=e.apply(this,arguments);null==u?this.style.removeProperty(t):this.style.setProperty(t,u,l)}}function lt(t,e){return t.style.getPropertyValue(e)||Xt(t).getComputedStyle(t,null).getPropertyValue(e)}function G(t){return function(){delete this[t]}}function x(t,e){return function(){this[t]=e}}function W(t,e){return function(){var l=e.apply(this,arguments);null==l?delete this[t]:this[t]=l}}function yt(t){return t.trim().split(/^|\s+/)}function _t(t){return t.classList||new St(t)}function St(t){this._node=t,this._names=yt(t.getAttribute("class")||"")}function et(t,e){for(var l=_t(t),u=-1,g=e.length;++u<g;)l.add(e[u])}function mt(t,e){for(var l=_t(t),u=-1,g=e.length;++u<g;)l.remove(e[u])}function At(t){return function(){et(this,t)}}function Rt(t){return function(){mt(this,t)}}function Gt(t,e){return function(){(e.apply(this,arguments)?et:mt)(this,t)}}function ie(){this.textContent=""}function ye(t){return function(){this.textContent=t}}function le(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function me(){this.innerHTML=""}function Pe(t){return function(){this.innerHTML=t}}function Le(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function pe(){this.nextSibling&&this.parentNode.appendChild(this)}function Re(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qe(t){return function(){var e=this.ownerDocument,l=this.namespaceURI;return l===tt&&e.documentElement.namespaceURI===tt?e.createElement(t):e.createElementNS(l,t)}}function $e(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ve(t){var e=Ot(t);return(e.local?$e:qe)(e)}function ti(){return null}function j(){var t=this.parentNode;t&&t.removeChild(this)}function r(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function o(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function c(t){return function(){var e=this.__on;if(e){for(var _,l=0,u=-1,g=e.length;l<g;++l)_=e[l],t.type&&_.type!==t.type||_.name!==t.name?e[++u]=_:this.removeEventListener(_.type,_.listener,_.options);++u?e.length=u:delete this.__on}}}function O(t,e,l){return function(){var g,u=this.__on,_=function y(t){return function(e){t.call(this,e,this.__data__)}}(e);if(u)for(var T=0,Q=u.length;T<Q;++T)if((g=u[T]).type===t.type&&g.name===t.name)return this.removeEventListener(g.type,g.listener,g.options),this.addEventListener(g.type,g.listener=_,g.options=l),void(g.value=e);this.addEventListener(t.type,_,l),g={type:t.type,name:t.name,value:e,listener:_,options:l},u?u.push(g):this.__on=[g]}}function D(t,e,l){var u=Xt(t),g=u.CustomEvent;"function"==typeof g?g=new g(e,l):(g=u.document.createEvent("Event"),l?(g.initEvent(e,l.bubbles,l.cancelable),g.detail=l.detail):g.initEvent(e,!1,!1)),t.dispatchEvent(g)}function M(t,e){return function(){return D(this,t,e)}}function wt(t,e){return function(){return D(this,t,e.apply(this,arguments))}}St.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Bt=[null];function Yt(t,e){this._groups=t,this._parents=e}function _e(){return new Yt([[document.documentElement]],Bt)}Yt.prototype=_e.prototype={constructor:Yt,select:function nt(t){"function"!=typeof t&&(t=b(t));for(var e=this._groups,l=e.length,u=new Array(l),g=0;g<l;++g)for(var J,dt,_=e[g],T=_.length,Q=u[g]=new Array(T),gt=0;gt<T;++gt)(J=_[gt])&&(dt=t.call(J,J.__data__,gt,_))&&("__data__"in J&&(dt.__data__=J.__data__),Q[gt]=dt);return new Yt(u,this._parents)},selectAll:function L(t){t="function"==typeof t?function f(t){return function(){return function z(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):C(t);for(var e=this._groups,l=e.length,u=[],g=[],_=0;_<l;++_)for(var J,T=e[_],Q=T.length,dt=0;dt<Q;++dt)(J=T[dt])&&(u.push(t.call(J,J.__data__,dt,T)),g.push(J));return new Yt(u,g)},selectChild:function S(t){return this.select(null==t?q:function w(t){return function(){return F.call(this.children,t)}}("function"==typeof t?t:k(t)))},selectChildren:function A(t){return this.selectAll(null==t?d:function Y(t){return function(){return it.call(this.children,t)}}("function"==typeof t?t:k(t)))},filter:function X(t){"function"!=typeof t&&(t=U(t));for(var e=this._groups,l=e.length,u=new Array(l),g=0;g<l;++g)for(var J,_=e[g],T=_.length,Q=u[g]=[],dt=0;dt<T;++dt)(J=_[dt])&&t.call(J,J.__data__,dt,_)&&Q.push(J);return new Yt(u,this._parents)},data:function Ct(t,e){if(!arguments.length)return Array.from(this,ut);var l=e?R:H,u=this._parents,g=this._groups;"function"!=typeof t&&(t=function xt(t){return function(){return t}}(t));for(var _=g.length,T=new Array(_),Q=new Array(_),J=new Array(_),dt=0;dt<_;++dt){var gt=u[dt],Wt=g[dt],Jt=Wt.length,te=Tt(t.call(gt,gt&&gt.__data__,dt,u)),Se=te.length,Ae=Q[dt]=new Array(Se),Ft=T[dt]=new Array(Se);l(gt,Wt,Ae,Ft,J[dt]=new Array(Jt),te,e);for(var fe,we,se=0,ee=0;se<Se;++se)if(fe=Ae[se]){for(se>=ee&&(ee=se+1);!(we=Ft[ee])&&++ee<Se;);fe._next=we||null}}return(T=new Yt(T,u))._enter=Q,T._exit=J,T},enter:function K(){return new Yt(this._enter||this._groups.map(st),this._parents)},exit:function Qt(){return new Yt(this._exit||this._groups.map(st),this._parents)},join:function Mt(t,e,l){var u=this.enter(),g=this,_=this.exit();return"function"==typeof t?(u=t(u))&&(u=u.selection()):u=u.append(t+""),null!=e&&(g=e(g))&&(g=g.selection()),null==l?_.remove():l(_),u&&g?u.merge(g).order():g},merge:function Ht(t){for(var e=t.selection?t.selection():t,l=this._groups,u=e._groups,g=l.length,T=Math.min(g,u.length),Q=new Array(g),J=0;J<T;++J)for(var te,dt=l[J],gt=u[J],Wt=dt.length,Jt=Q[J]=new Array(Wt),Se=0;Se<Wt;++Se)(te=dt[Se]||gt[Se])&&(Jt[Se]=te);for(;J<g;++J)Q[J]=l[J];return new Yt(Q,this._parents)},selection:function xe(){return this},order:function ue(){for(var t=this._groups,e=-1,l=t.length;++e<l;)for(var T,u=t[e],g=u.length-1,_=u[g];--g>=0;)(T=u[g])&&(_&&4^T.compareDocumentPosition(_)&&_.parentNode.insertBefore(T,_),_=T);return this},sort:function bt(t){function e(Wt,Jt){return Wt&&Jt?t(Wt.__data__,Jt.__data__):!Wt-!Jt}t||(t=Pt);for(var l=this._groups,u=l.length,g=new Array(u),_=0;_<u;++_){for(var dt,T=l[_],Q=T.length,J=g[_]=new Array(Q),gt=0;gt<Q;++gt)(dt=T[gt])&&(J[gt]=dt);J.sort(e)}return new Yt(g,this._parents).order()},call:function ct(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function ft(){return Array.from(this)},node:function V(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var u=t[e],g=0,_=u.length;g<_;++g){var T=u[g];if(T)return T}return null},size:function I(){let t=0;for(const e of this)++t;return t},empty:function B(){return!this.node()},each:function s(t){for(var e=this._groups,l=0,u=e.length;l<u;++l)for(var Q,g=e[l],_=0,T=g.length;_<T;++_)(Q=g[_])&&t.call(Q,Q.__data__,_,g);return this},attr:function ht(t,e){var l=Ot(t);if(arguments.length<2){var u=this.node();return l.local?u.getAttributeNS(l.space,l.local):u.getAttribute(l)}return this.each((null==e?l.local?Kt:jt:"function"==typeof e?l.local?Nt:re:l.local?Vt:Ut)(l,e))},style:function rt(t,e,l){return arguments.length>1?this.each((null==e?P:"function"==typeof e?N:h)(t,e,null==l?"":l)):lt(this.node(),t)},property:function at(t,e){return arguments.length>1?this.each((null==e?G:"function"==typeof e?W:x)(t,e)):this.node()[t]},classed:function qt(t,e){var l=yt(t+"");if(arguments.length<2){for(var u=_t(this.node()),g=-1,_=l.length;++g<_;)if(!u.contains(l[g]))return!1;return!0}return this.each(("function"==typeof e?Gt:e?At:Rt)(l,e))},text:function oe(t){return arguments.length?this.each(null==t?ie:("function"==typeof t?le:ye)(t)):this.node().textContent},html:function Ee(t){return arguments.length?this.each(null==t?me:("function"==typeof t?Le:Pe)(t)):this.node().innerHTML},raise:function Te(){return this.each(pe)},lower:function Be(){return this.each(Re)},append:function Xe(t){var e="function"==typeof t?t:Ve(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function kt(t,e){var l="function"==typeof t?t:Ve(t),u=null==e?ti:"function"==typeof e?e:b(e);return this.select(function(){return this.insertBefore(l.apply(this,arguments),u.apply(this,arguments)||null)})},remove:function i(){return this.each(j)},clone:function n(t){return this.select(t?o:r)},datum:function a(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function m(t,e,l){var g,T,u=function p(t){return t.trim().split(/^|\s+/).map(function(e){var l="",u=e.indexOf(".");return u>=0&&(l=e.slice(u+1),e=e.slice(0,u)),{type:e,name:l}})}(t+""),_=u.length;if(!(arguments.length<2)){for(Q=e?O:c,g=0;g<_;++g)this.each(Q(u[g],e,l));return this}var Q=this.node().__on;if(Q)for(var gt,J=0,dt=Q.length;J<dt;++J)for(g=0,gt=Q[J];g<_;++g)if((T=u[g]).type===gt.type&&T.name===gt.name)return gt.value},dispatch:function pt(t,e){return this.each(("function"==typeof e?wt:M)(t,e))},[Symbol.iterator]:function*Lt(){for(var t=this._groups,e=0,l=t.length;e<l;++e)for(var T,u=t[e],g=0,_=u.length;g<_;++g)(T=u[g])&&(yield T)}};const be=_e;var Oe={value:()=>{}};function Ie(){for(var u,t=0,e=arguments.length,l={};t<e;++t){if(!(u=arguments[t]+"")||u in l||/[\s.]/.test(u))throw new Error("illegal type: "+u);l[u]=[]}return new Mi(l)}function Mi(t){this._=t}function ar(t,e){for(var g,l=0,u=t.length;l<u;++l)if((g=t[l]).name===e)return g.value}function gn(t,e,l){for(var u=0,g=t.length;u<g;++u)if(t[u].name===e){t[u]=Oe,t=t.slice(0,u).concat(t.slice(u+1));break}return null!=l&&t.push({name:e,value:l}),t}Mi.prototype=Ie.prototype={constructor:Mi,on:function(t,e){var g,l=this._,u=function lr(t,e){return t.trim().split(/^|\s+/).map(function(l){var u="",g=l.indexOf(".");if(g>=0&&(u=l.slice(g+1),l=l.slice(0,g)),l&&!e.hasOwnProperty(l))throw new Error("unknown type: "+l);return{type:l,name:u}})}(t+"",l),_=-1,T=u.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++_<T;)if(g=(t=u[_]).type)l[g]=gn(l[g],t.name,e);else if(null==e)for(g in l)l[g]=gn(l[g],t.name,null);return this}for(;++_<T;)if((g=(t=u[_]).type)&&(g=ar(l[g],t.name)))return g},copy:function(){var t={},e=this._;for(var l in e)t[l]=e[l].slice();return new Mi(t)},call:function(t,e){if((g=arguments.length-2)>0)for(var g,_,l=new Array(g),u=0;u<g;++u)l[u]=arguments[u+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(u=0,g=(_=this._[t]).length;u<g;++u)_[u].value.apply(e,l)},apply:function(t,e,l){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var u=this._[t],g=0,_=u.length;g<_;++g)u[g].value.apply(e,l)}};const or=Ie;var Ni,Si,yi=0,Ei=0,Oi=0,yn=1e3,Di=0,hi=0,ji=0,ki="object"==typeof performance&&performance.now?performance:Date,mn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xi(){return hi||(mn(sr),hi=ki.now()+ji)}function sr(){hi=0}function zi(){this._call=this._time=this._next=null}function pn(t,e,l){var u=new zi;return u.restart(t,e,l),u}function wn(){hi=(Di=ki.now())+ji,yi=Ei=0;try{!function ur(){Xi(),++yi;for(var e,t=Ni;t;)(e=hi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--yi}()}finally{yi=0,function hr(){for(var t,l,e=Ni,u=1/0;e;)e._call?(u>e._time&&(u=e._time),t=e,e=e._next):(l=e._next,e._next=null,e=t?t._next=l:Ni=l);Si=t,qi(u)}(),hi=0}}function dr(){var t=ki.now(),e=t-Di;e>yn&&(ji-=e,Di=t)}function qi(t){yi||(Ei&&(Ei=clearTimeout(Ei)),t-hi>24?(t<1/0&&(Ei=setTimeout(wn,t-ki.now()-ji)),Oi&&(Oi=clearInterval(Oi))):(Oi||(Di=ki.now(),Oi=setInterval(dr,yn)),yi=1,mn(wn)))}function xn(t,e,l){var u=new zi;return u.restart(g=>{u.stop(),t(g+e)},e=null==e?0:+e,l),u}zi.prototype=pn.prototype={constructor:zi,restart:function(t,e,l){if("function"!=typeof t)throw new TypeError("callback is not a function");l=(null==l?Xi():+l)+(null==e?0:+e),!this._next&&Si!==this&&(Si?Si._next=this:Ni=this,Si=this),this._call=t,this._time=l,qi()},stop:function(){this._call&&(this._call=null,this._time=1/0,qi())}};var cr=or("start","end","cancel","interrupt"),fr=[],bn=0,Ki=3;function Fi(t,e,l,u,g,_){var T=t.__transition;if(T){if(l in T)return}else t.__transition={};!function vr(t,e,l){var g,u=t.__transition;function T(dt){var gt,Wt,Jt,te;if(1!==l.state)return J();for(gt in u)if((te=u[gt]).name===l.name){if(te.state===Ki)return xn(T);4===te.state?(te.state=6,te.timer.stop(),te.on.call("interrupt",t,t.__data__,te.index,te.group),delete u[gt]):+gt<e&&(te.state=6,te.timer.stop(),te.on.call("cancel",t,t.__data__,te.index,te.group),delete u[gt])}if(xn(function(){l.state===Ki&&(l.state=4,l.timer.restart(Q,l.delay,l.time),Q(dt))}),l.state=2,l.on.call("start",t,t.__data__,l.index,l.group),2===l.state){for(l.state=Ki,g=new Array(Jt=l.tween.length),gt=0,Wt=-1;gt<Jt;++gt)(te=l.tween[gt].value.call(t,t.__data__,l.index,l.group))&&(g[++Wt]=te);g.length=Wt+1}}function Q(dt){for(var gt=dt<l.duration?l.ease.call(null,dt/l.duration):(l.timer.restart(J),l.state=5,1),Wt=-1,Jt=g.length;++Wt<Jt;)g[Wt].call(t,gt);5===l.state&&(l.on.call("end",t,t.__data__,l.index,l.group),J())}function J(){for(var dt in l.state=6,l.timer.stop(),delete u[e],u)return;delete t.__transition}u[e]=l,l.timer=pn(function _(dt){l.state=1,l.timer.restart(T,l.delay,l.time),l.delay<=dt&&T(dt-l.delay)},0,l.time)}(t,l,{name:e,index:u,group:g,on:cr,tween:fr,time:_.time,delay:_.delay,duration:_.duration,ease:_.ease,timer:null,state:bn})}function en(t,e){var l=ei(t,e);if(l.state>bn)throw new Error("too late; already scheduled");return l}function ni(t,e){var l=ei(t,e);if(l.state>Ki)throw new Error("too late; already running");return l}function ei(t,e){var l=t.__transition;if(!l||!(l=l[e]))throw new Error("transition not found");return l}function ui(t,e){return t=+t,e=+e,function(l){return t*(1-l)+e*l}}var Ui,On=180/Math.PI,nn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Sn(t,e,l,u,g,_){var T,Q,J;return(T=Math.sqrt(t*t+e*e))&&(t/=T,e/=T),(J=t*l+e*u)&&(l-=t*J,u-=e*J),(Q=Math.sqrt(l*l+u*u))&&(l/=Q,u/=Q,J/=Q),t*u<e*l&&(t=-t,e=-e,J=-J,T=-T),{translateX:g,translateY:_,rotate:Math.atan2(e,t)*On,skewX:Math.atan(J)*On,scaleX:T,scaleY:Q}}function kn(t,e,l,u){function g(dt){return dt.length?dt.pop()+" ":""}return function(dt,gt){var Wt=[],Jt=[];return dt=t(dt),gt=t(gt),function _(dt,gt,Wt,Jt,te,Se){if(dt!==Wt||gt!==Jt){var Ae=te.push("translate(",null,e,null,l);Se.push({i:Ae-4,x:ui(dt,Wt)},{i:Ae-2,x:ui(gt,Jt)})}else(Wt||Jt)&&te.push("translate("+Wt+e+Jt+l)}(dt.translateX,dt.translateY,gt.translateX,gt.translateY,Wt,Jt),function T(dt,gt,Wt,Jt){dt!==gt?(dt-gt>180?gt+=360:gt-dt>180&&(dt+=360),Jt.push({i:Wt.push(g(Wt)+"rotate(",null,u)-2,x:ui(dt,gt)})):gt&&Wt.push(g(Wt)+"rotate("+gt+u)}(dt.rotate,gt.rotate,Wt,Jt),function Q(dt,gt,Wt,Jt){dt!==gt?Jt.push({i:Wt.push(g(Wt)+"skewX(",null,u)-2,x:ui(dt,gt)}):gt&&Wt.push(g(Wt)+"skewX("+gt+u)}(dt.skewX,gt.skewX,Wt,Jt),function J(dt,gt,Wt,Jt,te,Se){if(dt!==Wt||gt!==Jt){var Ae=te.push(g(te)+"scale(",null,",",null,")");Se.push({i:Ae-4,x:ui(dt,Wt)},{i:Ae-2,x:ui(gt,Jt)})}else(1!==Wt||1!==Jt)&&te.push(g(te)+"scale("+Wt+","+Jt+")")}(dt.scaleX,dt.scaleY,gt.scaleX,gt.scaleY,Wt,Jt),dt=gt=null,function(te){for(var Ft,Se=-1,Ae=Jt.length;++Se<Ae;)Wt[(Ft=Jt[Se]).i]=Ft.x(te);return Wt.join("")}}}var wr=kn(function mr(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nn:Sn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),xr=kn(function pr(t){return null!=t&&(Ui||(Ui=document.createElementNS("http://www.w3.org/2000/svg","g")),Ui.setAttribute("transform",t),t=Ui.transform.baseVal.consolidate())?Sn((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nn},", ",")",")");function br(t,e){var l,u;return function(){var g=ni(this,t),_=g.tween;if(_!==l)for(var T=0,Q=(u=l=_).length;T<Q;++T)if(u[T].name===e){(u=u.slice()).splice(T,1);break}g.tween=u}}function _r(t,e,l){var u,g;if("function"!=typeof l)throw new Error;return function(){var _=ni(this,t),T=_.tween;if(T!==u){g=(u=T).slice();for(var Q={name:e,value:l},J=0,dt=g.length;J<dt;++J)if(g[J].name===e){g[J]=Q;break}J===dt&&g.push(Q)}_.tween=g}}function rn(t,e,l){var u=t._id;return t.each(function(){var g=ni(this,u);(g.value||(g.value={}))[e]=l.apply(this,arguments)}),function(g){return ei(g,u).value[e]}}function ln(t,e,l){t.prototype=e.prototype=l,l.constructor=t}function Tn(t,e){var l=Object.create(t.prototype);for(var u in e)l[u]=e[u];return l}function Ti(){}var Wi=1/.7,mi="\\s*([+-]?\\d+)\\s*",Li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ri="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Or=/^#([0-9a-f]{3,8})$/,Sr=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),kr=new RegExp(`^rgb\\(${ri},${ri},${ri}\\)$`),Tr=new RegExp(`^rgba\\(${mi},${mi},${mi},${Li}\\)$`),Cr=new RegExp(`^rgba\\(${ri},${ri},${ri},${Li}\\)$`),Lr=new RegExp(`^hsl\\(${Li},${ri},${ri}\\)$`),Ar=new RegExp(`^hsla\\(${Li},${ri},${ri},${Li}\\)$`),Cn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ln(){return this.rgb().formatHex()}function An(){return this.rgb().formatRgb()}function Ai(t){var e,l;return t=(t+"").trim().toLowerCase(),(e=Or.exec(t))?(l=e[1].length,e=parseInt(e[1],16),6===l?Pn(e):3===l?new Qe(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===l?Gi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===l?Gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Sr.exec(t))?new Qe(e[1],e[2],e[3],1):(e=kr.exec(t))?new Qe(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Tr.exec(t))?Gi(e[1],e[2],e[3],e[4]):(e=Cr.exec(t))?Gi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Lr.exec(t))?Mn(e[1],e[2]/100,e[3]/100,1):(e=Ar.exec(t))?Mn(e[1],e[2]/100,e[3]/100,e[4]):Cn.hasOwnProperty(t)?Pn(Cn[t]):"transparent"===t?new Qe(NaN,NaN,NaN,0):null}function Pn(t){return new Qe(t>>16&255,t>>8&255,255&t,1)}function Gi(t,e,l,u){return u<=0&&(t=e=l=NaN),new Qe(t,e,l,u)}function Qi(t,e,l,u){return 1===arguments.length?function Rr(t){return t instanceof Ti||(t=Ai(t)),t?new Qe((t=t.rgb()).r,t.g,t.b,t.opacity):new Qe}(t):new Qe(t,e,l,null==u?1:u)}function Qe(t,e,l,u){this.r=+t,this.g=+e,this.b=+l,this.opacity=+u}function In(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}`}function Rn(){const t=Ji(this.opacity);return`${1===t?"rgb(":"rgba("}${ci(this.r)}, ${ci(this.g)}, ${ci(this.b)}${1===t?")":`, ${t})`}`}function Ji(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ci(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fi(t){return((t=ci(t))<16?"0":"")+t.toString(16)}function Mn(t,e,l,u){return u<=0?t=e=l=NaN:l<=0||l>=1?t=e=NaN:e<=0&&(t=NaN),new ii(t,e,l,u)}function Nn(t){if(t instanceof ii)return new ii(t.h,t.s,t.l,t.opacity);if(t instanceof Ti||(t=Ai(t)),!t)return new ii;if(t instanceof ii)return t;var e=(t=t.rgb()).r/255,l=t.g/255,u=t.b/255,g=Math.min(e,l,u),_=Math.max(e,l,u),T=NaN,Q=_-g,J=(_+g)/2;return Q?(T=e===_?(l-u)/Q+6*(l<u):l===_?(u-e)/Q+2:(e-l)/Q+4,Q/=J<.5?_+g:2-_-g,T*=60):Q=J>0&&J<1?0:T,new ii(T,Q,J,t.opacity)}function ii(t,e,l,u){this.h=+t,this.s=+e,this.l=+l,this.opacity=+u}function Dn(t){return(t=(t||0)%360)<0?t+360:t}function Hi(t){return Math.max(0,Math.min(1,t||0))}function an(t,e,l){return 255*(t<60?e+(l-e)*t/60:t<180?l:t<240?e+(l-e)*(240-t)/60:e)}function jn(t,e,l,u,g){var _=t*t,T=_*t;return((1-3*t+3*_-T)*e+(4-6*_+3*T)*l+(1+3*t+3*_-3*T)*u+T*g)/6}ln(Ti,Ai,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ln,formatHex:Ln,formatHex8:function Pr(){return this.rgb().formatHex8()},formatHsl:function Ir(){return Nn(this).formatHsl()},formatRgb:An,toString:An}),ln(Qe,Qi,Tn(Ti,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Qe(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Qe(ci(this.r),ci(this.g),ci(this.b),Ji(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:In,formatHex:In,formatHex8:function Mr(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}${fi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Rn,toString:Rn})),ln(ii,function Nr(t,e,l,u){return 1===arguments.length?Nn(t):new ii(t,e,l,null==u?1:u)},Tn(Ti,{brighter(t){return t=null==t?Wi:Math.pow(Wi,t),new ii(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new ii(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,l=this.l,u=l+(l<.5?l:1-l)*e,g=2*l-u;return new Qe(an(t>=240?t-240:t+120,g,u),an(t,g,u),an(t<120?t+240:t-120,g,u),this.opacity)},clamp(){return new ii(Dn(this.h),Hi(this.s),Hi(this.l),Ji(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ji(this.opacity);return`${1===t?"hsl(":"hsla("}${Dn(this.h)}, ${100*Hi(this.s)}%, ${100*Hi(this.l)}%${1===t?")":`, ${t})`}`}}));const zn=t=>()=>t;function Bn(t,e){var l=e-t;return l?function Kn(t,e){return function(l){return t+l*e}}(t,l):zn(isNaN(t)?e:t)}const Fn=function t(e){var l=function Kr(t){return 1==(t=+t)?Bn:function(e,l){return l-e?function zr(t,e,l){return t=Math.pow(t,l),e=Math.pow(e,l)-t,l=1/l,function(u){return Math.pow(t+u*e,l)}}(e,l,t):zn(isNaN(e)?l:e)}}(e);function u(g,_){var T=l((g=Qi(g)).r,(_=Qi(_)).r),Q=l(g.g,_.g),J=l(g.b,_.b),dt=Bn(g.opacity,_.opacity);return function(gt){return g.r=T(gt),g.g=Q(gt),g.b=J(gt),g.opacity=dt(gt),g+""}}return u.gamma=t,u}(1);function Un(t){return function(e){var T,Q,l=e.length,u=new Array(l),g=new Array(l),_=new Array(l);for(T=0;T<l;++T)Q=Qi(e[T]),u[T]=Q.r||0,g[T]=Q.g||0,_[T]=Q.b||0;return u=t(u),g=t(g),_=t(_),Q.opacity=1,function(J){return Q.r=u(J),Q.g=g(J),Q.b=_(J),Q+""}}}Un(function Dr(t){var e=t.length-1;return function(l){var u=l<=0?l=0:l>=1?(l=1,e-1):Math.floor(l*e),g=t[u],_=t[u+1];return jn((l-u/e)*e,u>0?t[u-1]:2*g-_,g,_,u<e-1?t[u+2]:2*_-g)}}),Un(function jr(t){var e=t.length;return function(l){var u=Math.floor(((l%=1)<0?++l:l)*e);return jn((l-u/e)*e,t[(u+e-1)%e],t[u%e],t[(u+1)%e],t[(u+2)%e])}});var on=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(on.source,"g");function Ur(t,e){var u,g,_,l=on.lastIndex=sn.lastIndex=0,T=-1,Q=[],J=[];for(t+="",e+="";(u=on.exec(t))&&(g=sn.exec(e));)(_=g.index)>l&&(_=e.slice(l,_),Q[T]?Q[T]+=_:Q[++T]=_),(u=u[0])===(g=g[0])?Q[T]?Q[T]+=g:Q[++T]=g:(Q[++T]=null,J.push({i:T,x:ui(u,g)})),l=sn.lastIndex;return l<e.length&&(_=e.slice(l),Q[T]?Q[T]+=_:Q[++T]=_),Q.length<2?J[0]?function Fr(t){return function(e){return t(e)+""}}(J[0].x):function Br(t){return function(){return t}}(e):(e=J.length,function(dt){for(var Wt,gt=0;gt<e;++gt)Q[(Wt=J[gt]).i]=Wt.x(dt);return Q.join("")})}function Wn(t,e){var l;return("number"==typeof e?ui:e instanceof Ai?Fn:(l=Ai(e))?(e=l,Fn):Ur)(t,e)}function Wr(t){return function(){this.removeAttribute(t)}}function Gr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qr(t,e,l){var u,_,g=l+"";return function(){var T=this.getAttribute(t);return T===g?null:T===u?_:_=e(u=T,l)}}function Jr(t,e,l){var u,_,g=l+"";return function(){var T=this.getAttributeNS(t.space,t.local);return T===g?null:T===u?_:_=e(u=T,l)}}function Hr(t,e,l){var u,g,_;return function(){var T,J,Q=l(this);return null==Q?void this.removeAttribute(t):(T=this.getAttribute(t))===(J=Q+"")?null:T===u&&J===g?_:(g=J,_=e(u=T,Q))}}function Vr(t,e,l){var u,g,_;return function(){var T,J,Q=l(this);return null==Q?void this.removeAttributeNS(t.space,t.local):(T=this.getAttributeNS(t.space,t.local))===(J=Q+"")?null:T===u&&J===g?_:(g=J,_=e(u=T,Q))}}function qr(t,e){var l,u;function g(){var _=e.apply(this,arguments);return _!==u&&(l=(u=_)&&function Xr(t,e){return function(l){this.setAttributeNS(t.space,t.local,e.call(this,l))}}(t,_)),l}return g._value=e,g}function $r(t,e){var l,u;function g(){var _=e.apply(this,arguments);return _!==u&&(l=(u=_)&&function Zr(t,e){return function(l){this.setAttribute(t,e.call(this,l))}}(t,_)),l}return g._value=e,g}function el(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){en(this,t).delay=e}}function rl(t,e){return function(){ni(this,t).duration=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){ni(this,t).duration=e}}var xl=be.prototype.constructor;function Gn(t){return function(){this.style.removeProperty(t)}}var zl=0;function ai(t,e,l,u){this._groups=t,this._parents=e,this._name=l,this._id=u}function Qn(){return++zl}var oi=be.prototype;ai.prototype=function Kl(t){return be().transition(t)}.prototype={constructor:ai,select:function pl(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=b(t));for(var u=this._groups,g=u.length,_=new Array(g),T=0;T<g;++T)for(var gt,Wt,Q=u[T],J=Q.length,dt=_[T]=new Array(J),Jt=0;Jt<J;++Jt)(gt=Q[Jt])&&(Wt=t.call(gt,gt.__data__,Jt,Q))&&("__data__"in gt&&(Wt.__data__=gt.__data__),dt[Jt]=Wt,Fi(dt[Jt],e,l,Jt,dt,ei(gt,l)));return new ai(_,this._parents,e,l)},selectAll:function wl(t){var e=this._name,l=this._id;"function"!=typeof t&&(t=C(t));for(var u=this._groups,g=u.length,_=[],T=[],Q=0;Q<g;++Q)for(var gt,J=u[Q],dt=J.length,Wt=0;Wt<dt;++Wt)if(gt=J[Wt]){for(var te,Jt=t.call(gt,gt.__data__,Wt,J),Se=ei(gt,l),Ae=0,Ft=Jt.length;Ae<Ft;++Ae)(te=Jt[Ae])&&Fi(te,e,l,Ae,Jt,Se);_.push(Jt),T.push(gt)}return new ai(_,T,e,l)},selectChild:oi.selectChild,selectChildren:oi.selectChildren,filter:function hl(t){"function"!=typeof t&&(t=U(t));for(var e=this._groups,l=e.length,u=new Array(l),g=0;g<l;++g)for(var J,_=e[g],T=_.length,Q=u[g]=[],dt=0;dt<T;++dt)(J=_[dt])&&t.call(J,J.__data__,dt,_)&&Q.push(J);return new ai(u,this._parents,this._name,this._id)},merge:function cl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,l=t._groups,u=e.length,_=Math.min(u,l.length),T=new Array(u),Q=0;Q<_;++Q)for(var Jt,J=e[Q],dt=l[Q],gt=J.length,Wt=T[Q]=new Array(gt),te=0;te<gt;++te)(Jt=J[te]||dt[te])&&(Wt[te]=Jt);for(;Q<u;++Q)T[Q]=e[Q];return new ai(T,this._parents,this._name,this._id)},selection:function bl(){return new xl(this._groups,this._parents)},transition:function Dl(){for(var t=this._name,e=this._id,l=Qn(),u=this._groups,g=u.length,_=0;_<g;++_)for(var J,T=u[_],Q=T.length,dt=0;dt<Q;++dt)if(J=T[dt]){var gt=ei(J,e);Fi(J,t,l,dt,T,{time:gt.time+gt.delay+gt.duration,delay:0,duration:gt.duration,ease:gt.ease})}return new ai(u,this._parents,t,l)},call:oi.call,nodes:oi.nodes,node:oi.node,size:oi.size,empty:oi.empty,each:oi.each,on:function gl(t,e){var l=this._id;return arguments.length<2?ei(this.node(),l).on.on(t):this.each(function vl(t,e,l){var u,g,_=function fl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var l=e.indexOf(".");return l>=0&&(e=e.slice(0,l)),!e||"start"===e})}(e)?en:ni;return function(){var T=_(this,t),Q=T.on;Q!==u&&(g=(u=Q).copy()).on(e,l),T.on=g}}(l,t,e))},attr:function Yr(t,e){var l=Ot(t),u="transform"===l?xr:Wn;return this.attrTween(t,"function"==typeof e?(l.local?Vr:Hr)(l,u,rn(this,"attr."+t,e)):null==e?(l.local?Gr:Wr)(l):(l.local?Jr:Qr)(l,u,e))},attrTween:function tl(t,e){var l="attr."+t;if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==e)return this.tween(l,null);if("function"!=typeof e)throw new Error;var u=Ot(t);return this.tween(l,(u.local?qr:$r)(u,e))},style:function kl(t,e,l){var u="transform"==(t+="")?wr:Wn;return null==e?this.styleTween(t,function _l(t,e){var l,u,g;return function(){var _=lt(this,t),T=(this.style.removeProperty(t),lt(this,t));return _===T?null:_===l&&T===u?g:g=e(l=_,u=T)}}(t,u)).on("end.style."+t,Gn(t)):"function"==typeof e?this.styleTween(t,function Ol(t,e,l){var u,g,_;return function(){var T=lt(this,t),Q=l(this),J=Q+"";return null==Q&&(this.style.removeProperty(t),J=Q=lt(this,t)),T===J?null:T===u&&J===g?_:(g=J,_=e(u=T,Q))}}(t,u,rn(this,"style."+t,e))).each(function Sl(t,e){var l,u,g,Q,_="style."+e,T="end."+_;return function(){var J=ni(this,t),dt=J.on,gt=null==J.value[_]?Q||(Q=Gn(e)):void 0;(dt!==l||g!==gt)&&(u=(l=dt).copy()).on(T,g=gt),J.on=u}}(this._id,t)):this.styleTween(t,function El(t,e,l){var u,_,g=l+"";return function(){var T=lt(this,t);return T===g?null:T===u?_:_=e(u=T,l)}}(t,u,e),l).on("end.style."+t,null)},styleTween:function Ll(t,e,l){var u="style."+(t+="");if(arguments.length<2)return(u=this.tween(u))&&u._value;if(null==e)return this.tween(u,null);if("function"!=typeof e)throw new Error;return this.tween(u,function Cl(t,e,l){var u,g;function _(){var T=e.apply(this,arguments);return T!==g&&(u=(g=T)&&function Tl(t,e,l){return function(u){this.style.setProperty(t,e.call(this,u),l)}}(t,T,l)),u}return _._value=e,_}(t,e,null==l?"":l))},text:function Il(t){return this.tween("text","function"==typeof t?function Pl(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function Al(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function Nl(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function Ml(t){var e,l;function u(){var g=t.apply(this,arguments);return g!==l&&(e=(l=g)&&function Rl(t){return function(e){this.textContent=t.call(this,e)}}(g)),e}return u._value=t,u}(t))},remove:function ml(){return this.on("end.remove",function yl(t){return function(){var e=this.parentNode;for(var l in this.__transition)if(+l!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function Er(t,e){var l=this._id;if(t+="",arguments.length<2){for(var T,u=ei(this.node(),l).tween,g=0,_=u.length;g<_;++g)if((T=u[g]).name===t)return T.value;return null}return this.each((null==e?br:_r)(l,t,e))},delay:function nl(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?el:il)(e,t)):ei(this.node(),e).delay},duration:function al(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?rl:ll)(e,t)):ei(this.node(),e).duration},ease:function sl(t){var e=this._id;return arguments.length?this.each(function ol(t,e){if("function"!=typeof e)throw new Error;return function(){ni(this,t).ease=e}}(e,t)):ei(this.node(),e).ease},easeVarying:function dl(t){if("function"!=typeof t)throw new Error;return this.each(function ul(t,e){return function(){var l=e.apply(this,arguments);if("function"!=typeof l)throw new Error;ni(this,t).ease=l}}(this._id,t))},end:function jl(){var t,e,l=this,u=l._id,g=l.size();return new Promise(function(_,T){var Q={value:T},J={value:function(){0==--g&&_()}};l.each(function(){var dt=ni(this,u),gt=dt.on;gt!==t&&((e=(t=gt).copy())._.cancel.push(Q),e._.interrupt.push(Q),e._.end.push(J)),dt.on=e}),0===g&&_()})},[Symbol.iterator]:oi[Symbol.iterator]};var Fl={time:null,delay:0,duration:250,ease:function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ul(t,e){for(var l;!(l=t.__transition)||!(l=l[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return l}be.prototype.interrupt=function yr(t){return this.each(function(){!function gr(t,e){var u,g,T,l=t.__transition,_=!0;if(l){for(T in e=null==e?null:e+"",l)(u=l[T]).name===e?(g=u.state>2&&u.state<5,u.state=6,u.timer.stop(),u.on.call(g?"interrupt":"cancel",t,t.__data__,u.index,u.group),delete l[T]):_=!1;_&&delete t.__transition}}(this,t)})},be.prototype.transition=function Wl(t){var e,l;t instanceof ai?(e=t._id,t=t._name):(e=Qn(),(l=Fl).time=Xi(),t=null==t?null:t+"");for(var u=this._groups,g=u.length,_=0;_<g;++_)for(var J,T=u[_],Q=T.length,dt=0;dt<Q;++dt)(J=T[dt])&&Fi(J,t,e,dt,T,l||Ul(J,e));return new ai(u,this._parents,t,e)};Math;function Pi(t){return{type:t}}function xi(t){return function(){return t}}function Xn(t){this._context=t}function ql(t){return new Xn(t)}["w","e"].map(Pi),["n","s"].map(Pi),["n","w","e","s","nw","ne","sw","se"].map(Pi),Xn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};const fn=Math.PI,vn=2*fn,vi=1e-6,$l=vn-vi;function qn(t){this._+=t[0];for(let e=1,l=t.length;e<l;++e)this._+=arguments[e]+t[e]}class Zi{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?qn:function ta(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return qn;const l=10**e;return function(u){this._+=u[0];for(let g=1,_=u.length;g<_;++g)this._+=Math.round(arguments[g]*l)/l+u[g]}}(e)}moveTo(e,l){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,l){this._append`L${this._x1=+e},${this._y1=+l}`}quadraticCurveTo(e,l,u,g){this._append`Q${+e},${+l},${this._x1=+u},${this._y1=+g}`}bezierCurveTo(e,l,u,g,_,T){this._append`C${+e},${+l},${+u},${+g},${this._x1=+_},${this._y1=+T}`}arcTo(e,l,u,g,_){if(e=+e,l=+l,u=+u,g=+g,(_=+_)<0)throw new Error(`negative radius: ${_}`);let T=this._x1,Q=this._y1,J=u-e,dt=g-l,gt=T-e,Wt=Q-l,Jt=gt*gt+Wt*Wt;if(null===this._x1)this._append`M${this._x1=e},${this._y1=l}`;else if(Jt>vi)if(Math.abs(Wt*J-dt*gt)>vi&&_){let te=u-T,Se=g-Q,Ae=J*J+dt*dt,Ft=te*te+Se*Se,zt=Math.sqrt(Ae),se=Math.sqrt(Jt),ee=_*Math.tan((fn-Math.acos((Ae+Jt-Ft)/(2*zt*se)))/2),fe=ee/se,we=ee/zt;Math.abs(fe-1)>vi&&this._append`L${e+fe*gt},${l+fe*Wt}`,this._append`A${_},${_},0,0,${+(Wt*te>gt*Se)},${this._x1=e+we*J},${this._y1=l+we*dt}`}else this._append`L${this._x1=e},${this._y1=l}`}arc(e,l,u,g,_,T){if(e=+e,l=+l,T=!!T,(u=+u)<0)throw new Error(`negative radius: ${u}`);let Q=u*Math.cos(g),J=u*Math.sin(g),dt=e+Q,gt=l+J,Wt=1^T,Jt=T?g-_:_-g;null===this._x1?this._append`M${dt},${gt}`:(Math.abs(this._x1-dt)>vi||Math.abs(this._y1-gt)>vi)&&this._append`L${dt},${gt}`,u&&(Jt<0&&(Jt=Jt%vn+vn),Jt>$l?this._append`A${u},${u},0,1,${Wt},${e-Q},${l-J}A${u},${u},0,1,${Wt},${this._x1=dt},${this._y1=gt}`:Jt>vi&&this._append`A${u},${u},0,${+(Jt>=fn)},${Wt},${this._x1=e+u*Math.cos(_)},${this._y1=l+u*Math.sin(_)}`)}rect(e,l,u,g){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+l}h${u=+u}v${+g}h${-u}Z`}toString(){return this._}}function na(t){return t[0]}function ra(t){return t[1]}function la(t,e){var l=xi(!0),u=null,g=ql,_=null,T=function ia(t){let e=3;return t.digits=function(l){if(!arguments.length)return e;if(null==l)e=null;else{const u=Math.floor(l);if(!(u>=0))throw new RangeError(`invalid digits: ${l}`);e=u}return t},()=>new Zi(e)}(Q);function Q(J){var dt,Wt,te,gt=(J=function Xl(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(J)).length,Jt=!1;for(null==u&&(_=g(te=T())),dt=0;dt<=gt;++dt)!(dt<gt&&l(Wt=J[dt],dt,J))===Jt&&((Jt=!Jt)?_.lineStart():_.lineEnd()),Jt&&_.point(+t(Wt,dt,J),+e(Wt,dt,J));if(te)return _=null,te+""||null}return t="function"==typeof t?t:void 0===t?na:xi(t),e="function"==typeof e?e:void 0===e?ra:xi(e),Q.x=function(J){return arguments.length?(t="function"==typeof J?J:xi(+J),Q):t},Q.y=function(J){return arguments.length?(e="function"==typeof J?J:xi(+J),Q):e},Q.defined=function(J){return arguments.length?(l="function"==typeof J?J:xi(!!J),Q):l},Q.curve=function(J){return arguments.length?(g=J,null!=u&&(_=g(u)),Q):g},Q.context=function(J){return arguments.length?(null==J?u=_=null:_=g(u=J),Q):u},Q}function $n(t,e,l){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+l)/6)}function tr(t){this._context=t}function aa(t){return new tr(t)}function bi(t,e,l){this.k=t,this.x=e,this.y=l}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$n(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},bi.prototype={constructor:bi,scale:function(t){return 1===t?this:new bi(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new bi(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new bi(1,0,0)}}]);